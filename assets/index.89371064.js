var se=Object.defineProperty,ie=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var A=(n,e,a)=>e in n?se(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,g=(n,e)=>{for(var a in e||(e={}))re.call(e,a)&&A(n,a,e[a]);if(G)for(var a of G(e))le.call(e,a)&&A(n,a,e[a]);return n},F=(n,e)=>ie(n,oe(e));var _=(n,e,a)=>(A(n,typeof e!="symbol"?e+"":e,a),a);import{j as I,m as Q,r as w,a as E,M as ce,v as de,Q as pe,R as ue,b as fe}from"./vendor.2c6bff34.js";const me=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}};me();const r=I.exports.jsx,b=I.exports.jsxs,z=I.exports.Fragment,he={color:"#0000ff",selectedColor:"#ff0000",radius:6};var ne;const ge=JSON.parse((ne=window.localStorage.getItem("blockDisplaySettings"))!=null?ne:"false")||he;function _e({settings:n,setSettings:e,selected:a,blocks:t,setBlockData:s}){const o=f=>{e(f),window.localStorage.setItem("blockDisplaySettings",JSON.stringify(f))},l=t[a],u=l?b("div",{className:"flex flex-col gap-2 border-2 rounded p-2",children:[r("span",{className:"text-xl font-bold",children:l.name}),b("div",{className:"flex flex-row justify-between items-center",children:[r("span",{className:"text-l font-bold",children:"Name"}),r("span",{className:"w-2/5 flex-shrink-0",children:r("input",{className:"rounded w-full",type:"text",value:l.name,onChange:f=>{s(a,{name:f.target.value})}})})]})]}):r(z,{});return b(z,{children:[b("div",{className:"flex flex-col gap-2",children:[b("div",{className:"flex flex-row justify-between items-center",children:[r("span",{className:"text-l font-bold",children:"Color"}),r("span",{className:"w-2/5 flex-shrink-0",children:r("input",{className:"rounded w-full",type:"color",value:n.color,onChange:f=>{o(F(g({},n),{color:f.target.value}))}})})]}),b("div",{className:"flex flex-row justify-between items-center",children:[r("span",{className:"text-l font-bold",children:"Selected Color"}),r("span",{className:"w-2/5 flex-shrink-0",children:r("input",{className:"rounded w-full",type:"color",value:n.selectedColor,onChange:f=>{o(F(g({},n),{selectedColor:f.target.value}))}})})]}),b("div",{className:"flex flex-row justify-between items-center",children:[r("span",{className:"text-l font-bold",children:"Radius"}),r("span",{className:"w-2/5 flex-shrink-0",children:r("input",{className:"rounded w-full",type:"range",min:"2",max:"10",step:"0.5",value:n.radius,onChange:f=>{o(F(g({},n),{radius:Number.parseFloat(f.target.value)}))}})})]})]}),u]})}function we({folder:n,files:e,setFile:a}){const t=Object.keys(e).map(s=>{const o=e[s];return b("div",{className:"flex flex-row justify-between items-center",children:[b("div",{className:"flex flex-col",children:[r("span",{className:"text-l font-bold","data-testid":`file-${s}-label`,children:o.name}),r("span",{className:"text-sm","data-testid":`file-${s}-description`,children:o.description})]}),r("span",{className:"w-2/5 flex-shrink-0",children:b("select",{"data-testid":`file-${s}-select`,className:"w-full rounded",value:o.currentFilePath,onChange:async l=>{const u=l.currentTarget.value;try{const f=await n.getFile(u);a(s,f.name,f)}catch{a(s,"")}},children:[r("option",{value:"","data-testid":`file-${s}-empty`,children:"\xA0"}),n.fileList.filter(l=>l.endsWith(o.extension)).map(l=>r("option",{value:l,"data-testid":`file-${s}-select-${l}`,children:l},l))]})})]},s)});return r("div",{className:"flex flex-col gap-2",children:t})}function ye({view:n,buttons:e,active:a,setActive:t}){if(!e)return r("span",{});const s=[];for(const o of Object.keys(e)){const l=e[o],u=o===a;s.push(r("button",{type:"button","data-testid":`tab-${o}`,className:`${u?"bg-gray-100":"bg-gray-300"} p-2 shadow-inner hover:bg-gray-200 rounded-t`,onClick:()=>t(u?"":o),children:l},o))}return b("div",{"data-testid":"inspector-container",className:"absolute bottom-0 right-2 h-1/2 w-1/3 flex flex-col-reverse z-50",children:[a?r("div",{"data-testid":"inspector-view",className:"flex flex-col bg-gray-100 flex-grow rounded-tr p-2",children:n}):"",r("div",{"data-testid":"inspector-tabs",className:"flex flex-row rounded-sm gap-0 divide-x divide-gray-200",children:s})]})}Q.accessToken="pk.eyJ1IjoiYnJlbmRhbmptZWFkZSIsImEiOiJja3g2ZzVueWMybTJtMzFwaHdzZmV5OGJvIn0.Oz8qQnu5b-jx8XFHlFnKDQ";const M=Math.PI/6,O=2*Math.PI-M;function ve({pointSources:n,arrowSources:e}){const a=w.exports.useRef(null),[t,s]=w.exports.useState(),[o,l]=w.exports.useState(!1),[u,f]=w.exports.useState(),[x]=w.exports.useState(new E.exports.Popup({closeButton:!1,closeOnClick:!1})),[h,C]=w.exports.useState(),[$,D]=w.exports.useState();return w.exports.useEffect(()=>{if(!t&&Q.accessToken&&a.current){const i=new E.exports.Map({container:a.current,style:"mapbox://styles/mapbox-public/ckngin2db09as17p84ejhe24y",center:[0,0],zoom:2});i.addControl(new E.exports.NavigationControl);const y=new ce({});i.addControl(y),s(i),f(y),i.on("load",()=>{l(!0)})}console.log("Updating map...")},[t,u]),w.exports.useEffect(()=>{if(console.log("Adding layers"),t&&o&&h!==n)if(console.log("Setting points in map!"),h){for(const i of h){const y=t.getSource(`point:${i.name}`);y!==void 0&&y.setData({type:"FeatureCollection",features:[]}),t.removeLayer(`layer:point:${i.name}`);const N=t.getSource(`point:${i.name}:selected`);N!==void 0&&N.setData({type:"FeatureCollection",features:[]}),t.removeLayer(`layer:point:${i.name}:selected`)}C(void 0)}else{for(const i of n){let y=t.getSource(`point:${i.name}`),N=t.getSource(`point:${i.name}:selected`);const p=y===void 0;p&&(t.addSource(`point:${i.name}`,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),y=t.getSource(`point:${i.name}`),t.addSource(`point:${i.name}:selected`,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),N=t.getSource(`point:${i.name}:selected`)),y!==void 0&&N!==void 0&&(y.setData({type:"FeatureCollection",features:i.points.filter(c=>!c.selected).map(c=>({type:"Feature",properties:{description:`<strong>${c.name}</strong><p>${c.description}</p>`,index:c.index,name:c.name},geometry:{type:"Point",coordinates:[c.longitude,c.latitude]}}))}),N.setData({type:"FeatureCollection",features:i.points.filter(c=>c.selected).map(c=>({type:"Feature",properties:{description:`<strong>${c.name}</strong><p>${c.description}</p>`,index:c.index,name:c.name},geometry:{type:"Point",coordinates:[c.longitude,c.latitude]}}))})),t.addLayer({id:`layer:point:${i.name}`,type:"circle",source:`point:${i.name}`,paint:{"circle-color":i.color,"circle-radius":i.radius,"circle-stroke-width":1,"circle-stroke-color":"#ffffff"}}),t.addLayer({id:`layer:point:${i.name}:selected`,type:"circle",source:`point:${i.name}:selected`,paint:{"circle-color":i.selectedColor,"circle-radius":i.radius,"circle-stroke-width":1,"circle-stroke-color":"#ffffff"}}),p&&(t.on("mouseenter",`layer:point:${i.name}`,c=>{if(!c.features)return;const m=c.features[0];if(m.geometry.type==="Point"&&m.properties&&typeof m.properties.description=="string"){const v=[...m.geometry.coordinates],{description:k}=m.properties;for(;Math.abs(c.lngLat.lng-v[0])>180;)v[0]+=c.lngLat.lng>v[0]?360:-360;x.setLngLat(v).setHTML(k).addTo(t)}}),t.on("mouseleave",`layer:point:${i.name}`,()=>{x.remove()}),t.on("click",`layer:point:${i.name}`,c=>{if(!c.features||!i.clickPoint)return;const m=c.features[0];if(m.properties&&typeof m.properties.index=="number"&&typeof m.properties.name=="string"){const{index:v,name:k}=m.properties;i.clickPoint(v,k)}}))}C(n)}},[t,h,n,o,x]),w.exports.useEffect(()=>{if(console.log("Adding layers"),t&&o&&$!==e)if(console.log("Setting arrows in map!"),$){for(const i of $){const y=t.getSource(`arrow:${i.name}`);y!==void 0&&y.setData({type:"FeatureCollection",features:[]}),t.removeLayer(`layer:arrow:${i.name}`)}D(void 0)}else{for(const i of e){let y=t.getSource(`arrow:${i.name}`);const N=y===void 0;N&&(t.addSource(`arrow:${i.name}`,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),y=t.getSource(`arrow:${i.name}`)),y!==void 0&&y.setData({type:"FeatureCollection",features:i.arrows.map((p,c)=>{const m=p.scale*i.scale,v=i.scale*i.arrowHeadScale,k=[p.longitude+p.direction[0]*m,p.latitude+p.direction[1]*m],d=[k[0]+(Math.cos(M)*-p.direction[0]-Math.sin(M)*-p.direction[1])*v,k[1]+(Math.sin(M)*-p.direction[0]+Math.cos(M)*-p.direction[1])*v],S=[k[0]+(Math.cos(O)*-p.direction[0]-Math.sin(O)*-p.direction[1])*v,k[1]+(Math.sin(O)*-p.direction[0]+Math.cos(O)*-p.direction[1])*v];return{type:"Feature",properties:{description:`<strong>${p.name}</strong><p>${p.description}</p>`,index:c,name:p.name},geometry:{type:"LineString",coordinates:[[p.longitude,p.latitude],k,d,k,S]}}})}),t.addLayer({id:`layer:arrow:${i.name}`,type:"line",source:`arrow:${i.name}`,layout:{"line-cap":"round","line-join":"miter"},paint:{"line-color":i.color,"line-width":i.width}}),N&&(t.on("mouseenter",`layer:arrow:${i.name}`,p=>{if(!p.features)return;const c=p.features[0];if(c.geometry.type==="Point"&&c.properties&&typeof c.properties.description=="string"){const m=[...c.geometry.coordinates],{description:v}=c.properties;for(;Math.abs(p.lngLat.lng-m[0])>180;)m[0]+=p.lngLat.lng>m[0]?360:-360;x.setLngLat(m).setHTML(v).addTo(t)}}),t.on("mouseleave",`layer:arrow:${i.name}`,()=>{x.remove()}),t.on("click",`layer:arrow:${i.name}`,p=>{if(!p.features||!i.clickArrow)return;const c=p.features[0];if(c.properties&&typeof c.properties.index=="number"&&typeof c.properties.name=="string"){const{index:m,name:v}=c.properties;i.clickArrow(m,v)}}))}D(e)}},[t,$,e,o,x]),r("div",{"data-testid":"map",className:"w-full h-full",ref:a})}function xe({folder:n,openFolder:e}){function a(){e()}return b("div",{"data-testid":"topbar",className:"p-2 bg-gradient-to-r from-blue-700 to-green-700 text-white flex flex-row justify-between",children:[r("h3",{className:"text-lg font-bold",children:"Celeri UI"}),r("span",{"data-testid":"open-folder-topbar",children:n?b(z,{children:["Working in ",n.name]}):r("button",{type:"button",onClick:a,"data-testid":"open-folder-button",children:"Open Folder"})})]})}const be={color:"#ffff00",scale:.02,width:1,arrowHead:1};var ae;const Se=JSON.parse((ae=window.localStorage.getItem("velocityDisplaySettings"))!=null?ae:"false")||be;function Ne({settings:n,setSettings:e}){const a=t=>{e(t),window.localStorage.setItem("velocityDisplaySettings",JSON.stringify(t))};return b("div",{className:"flex flex-col gap-2",children:[b("div",{className:"flex flex-row justify-between items-center",children:[r("span",{className:"text-l font-bold",children:"Color"}),r("span",{className:"w-2/5 flex-shrink-0",children:r("input",{className:"rounded w-full",type:"color",value:n.color,onChange:t=>{a(F(g({},n),{color:t.target.value}))}})})]}),b("div",{className:"flex flex-row justify-between items-center",children:[r("span",{className:"text-l font-bold",children:"Scale"}),r("span",{className:"w-2/5 flex-shrink-0",children:r("input",{className:"rounded w-full",type:"range",min:"0.001",max:"0.1",step:"0.001",value:n.scale,onChange:t=>{a(F(g({},n),{scale:Number.parseFloat(t.target.value)}))}})})]}),b("div",{className:"flex flex-row justify-between items-center",children:[r("span",{className:"text-l font-bold",children:"Width"}),r("span",{className:"w-2/5 flex-shrink-0",children:r("input",{className:"rounded w-full",type:"range",min:"0.1",max:"2",step:"0.1",value:n.width,onChange:t=>{a(F(g({},n),{width:Number.parseFloat(t.target.value)}))}})})]}),b("div",{className:"flex flex-row justify-between items-center",children:[r("span",{className:"text-l font-bold",children:"Arrow Head Size"}),r("span",{className:"w-2/5 flex-shrink-0",children:r("input",{className:"rounded w-full",type:"range",min:"0.5",max:"5",step:"0.1",value:n.arrowHead,onChange:t=>{a(F(g({},n),{arrowHead:Number.parseFloat(t.target.value)}))}})})]})]})}function B(n){const e=n.split(/\n/g),a=e[0].split(","),t=e.slice(1),s=[];for(const o of t){const l=o.split(/\s*,\s*/),u={};for(let f=0;f<a.length;f+=1){let x=l[f];const h=a[f],C=Number.parseFloat(x);x=Number.isNaN(C)?x:C,typeof x=="string"&&x.startsWith('"')&&x.endsWith('"')&&(x=x.slice(1,-1)),u[h]=x}s.push(u)}return s}function R(n,e){const a=[e.join(",")];for(const t of n){const s=t;a.push(e.map(o=>o in s?typeof s[o]=="string"&&/\s/.test(`${s[o]}`)?`"${s[o]}"`:`${s[o]}`:"").join(","))}return a.join(`
`)}const Z=["other1","other2","other3","other4","other5","other6","name","interior_lon","interior_lat","euler_lon","euler_lon_sig","euler_lat","euler_lat_sig","rotation_rate","rotation_rate_sig","rotation_flag","apriori_flag","strain_rate","strain_rate_sig","strain_rate_flag"],ke={other1:0,other2:0,other3:0,other4:0,other5:0,other6:0,name:"",interior_lon:0,interior_lat:0,euler_lon:0,euler_lon_sig:0,euler_lat:0,euler_lat_sig:0,rotation_rate:0,rotation_rate_sig:0,rotation_flag:0,apriori_flag:0,strain_rate:0,strain_rate_sig:0,strain_rate_flag:0};function Fe(n){return g(g({},ke),n)}class H{constructor(e){_(this,"handle");_(this,"data");this.handle=e,this.data=void 0}async initialize(){const e=await this.handle.getContents(),t=B(e).map(s=>{const o={};for(const l of Z)o[l]=s[l]||(l==="name"?"":0);return o});this.data=t}async save(){var a;const e=R((a=this.data)!=null?a:[],Z);await this.handle.setContents(e)}clone(){return new H(this.handle)}}const Ce={file_name:"basic_command_default_values.json",reuse_elastic:"no",reuse_elastic_file:"./celeri_elastic_operators.hdf5",save_elastic:"yes",save_elastic_file:"./celeri_elastic_operators.hdf5",material_lambda:3e10,material_mu:3e10,unit_sigmas:"no",locking_depth_flag2:0,locking_depth_flag3:0,locking_depth_flag4:0,locking_depth_flag5:0,locking_depth_override_flag:"no",locking_depth_overide_value:0,apriori_block_name:"",tri_smooth:1e4,pmag_tri_smooth:0,smooth_type:1,n_iterations:1,tri_edge:[0,0,0],tri_depth_tolerance:0,tri_con_weight:1,strain_method:0,sar_file_name:"",sar_ramp:0,sar_weight:0,tri_slip_constraint_type:0,inversion_type:"standard",inversion_param01:0,inversion_param02:0,inversion_param03:0,inversion_param04:0,inversion_param05:0,save_all:"yes",mogi_file_name:"",solution_method:"backslash",ridge_param:0,tri_full_coupling:"no",tvr_lambda:1,tri_slip_sign:[0,0],n_eigs:0,segment_file_name:"",station_file_name:"",block_file_name:"",mesh_parameters_file_name:"",fault_resolution:1,station_data_weight:1,station_data_weight_min:1,station_data_weight_max:1,station_data_weight_steps:1,slip_constraint_weight:1,slip_constraint_weight_min:1,slip_constraint_weight_max:1,slip_constraint_weight_steps:1,block_constraint_weight:1,block_constraint_weight_min:1,block_constraint_weight_max:1,block_constraint_weight_steps:1,slip_file_names:""};function $e(n){return g(g({},Ce),n)}class T{constructor(e){_(this,"handle");_(this,"data");this.handle=e,this.data=void 0}async initialize(){const e=await this.handle.getContents(),a=JSON.parse(e);this.data=$e(a)}async save(){if(this.data){const e=JSON.stringify(this.data);await this.handle.setContents(e)}}clone(){return new T(this.handle)}}const U=["name","lon1","lat1","lon2","lat2","dip","res","other3","other6","other7","other8","other9","other10","other11","other12","locking_depth","locking_depth_sig","locking_depth_flag","dip_sig","dip_flag","ss_rate","ss_rate_sig","ss_rate_flag","ds_rate","ds_rate_sig","ds_rate_flag","ts_rate","ts_rate_sig","ts_rate_flag","burial_depth","burial_depth_sig","burial_depth_flag","resolution_override","resolution_other","patch_file_name","patch_flag","patch_slip_file","patch_slip_flag"];class V{constructor(e){_(this,"handle");_(this,"data");this.handle=e,this.data=void 0}async initialize(){const e=await this.handle.getContents(),t=B(e).map(s=>{const o={};for(const l of U)o[l]=s[l]||(l==="name"?"":0);return o});this.data=t}async save(){var a;const e=R((a=this.data)!=null?a:[],U);await this.handle.setContents(e)}clone(){return new V(this.handle)}}const K=["lon","lat","corr","other1","name","east_vel","north_vel","east_sig","north_sig","flag","up_vel","up_sig","east_adjust","north_adjust","up_adjust"];class W{constructor(e){_(this,"handle");_(this,"data");this.handle=e,this.data=void 0}async initialize(){const e=await this.handle.getContents(),t=B(e).map(s=>{const o={};for(const l of K)o[l]=s[l]||(l==="name"?"":0);return o});this.data=t}async save(){var a;const e=R((a=this.data)!=null?a:[],K);await this.handle.setContents(e)}clone(){return new W(this.handle)}}async function X(n){const e=new V(n);return await e.initialize(),e}async function Y(n){const e=new H(n);return await e.initialize(),e}async function ee(n){const e=new W(n);return await e.initialize(),e}async function Le(n,e,a){const t=new T(e);if(await t.initialize(),t.data){const s=await X(await n.getFile(t.data.segment_file_name)),o=await Y(await n.getFile(t.data.block_file_name)),l=await ee(await n.getFile(t.data.station_file_name)),u=g({},a);return"command"in u&&(u.command=F(g({},u.command),{currentFilePath:e.name})),"segment"in u&&(u.segment=F(g({},u.segment),{currentFilePath:t.data.segment_file_name})),"block"in u&&(u.block=F(g({},u.block),{currentFilePath:t.data.block_file_name})),"velocities"in u&&(u.velocities=F(g({},u.velocities),{currentFilePath:t.data.station_file_name})),{openableFiles:u,commands:t,segments:s,blocks:o,velocities:l}}throw new Error("Can't open command file")}class je{constructor(e){_(this,"name");_(this,"handle");this.handle=e,this.name=e.name}async getContents(){return(await this.handle.getFile()).text()}async setContents(e){const a=await this.handle.createWritable();await a.write(e),await a.close()}}class J{constructor(e){_(this,"name");_(this,"handle");_(this,"fileList");_(this,"folderList");this.handle=e,this.fileList=[],this.folderList=[],this.name=e.name}async initialize(){for await(const e of this.handle.values())e.kind==="directory"?this.folderList.push(e.name):this.fileList.push(e.name)}async getFile(e){if(!this.fileList.includes(e))throw new Error("Missing File");const a=await this.handle.getFileHandle(e);return new je(a)}async getDirectory(e){if(!this.folderList.includes(e))throw new Error("Missing Directory");const a=await this.handle.getDirectoryHandle(e),t=new J(a);return await t.initialize(),t}}const Pe=async()=>{const n=await window.showDirectoryPicker(),e=new J(n);return await e.initialize(),e};class De{constructor(e,a){_(this,"name");_(this,"parent");this.name=e,this.parent=a}async getContents(){const e=this.parent[this.name];if(typeof e!="string")throw new Error("No Such File");return e}async setContents(e){this.parent[this.name]=e}}class q{constructor(e,a){_(this,"name");_(this,"parent");_(this,"fileList");_(this,"folderList");this.name=e,this.parent=a,this.fileList=[],this.folderList=[];const t=a[e];for(const s of Object.keys(t))typeof t[s]=="string"?this.fileList.push(s):this.folderList.push(s)}async getFile(e){if(!this.fileList.includes(e))throw new Error("No Such File");return new De(e,this.parent[this.name])}async getDirectory(e){if(!this.folderList.includes(e))throw new Error("No Such File");return new q(e,this.parent[this.name])}}const Me=async n=>new q("root",n);let te=async()=>{var e;return Me((e=window.FakeDirectory)!=null?e:{})};function Oe(n){te=n}async function Ae(){return te()}window.location.search.includes("fake-dir")||Oe(Pe);const Ie={files:"Files",segment:"Segment",block:"Block",velocities:"Velocities"};function Ee(){var k;const[n,e]=w.exports.useState(),[a,t]=w.exports.useState(""),[s,o]=w.exports.useState({command:{name:"Command File",description:"A file pointing to all the other relevant files",extension:".json",currentFilePath:""},segment:{name:"Segment File",description:"A CSV containing the details of fault locations",extension:".csv",currentFilePath:""},block:{name:"Block File",description:"A CSV containing information on blocks/plates",extension:".csv",currentFilePath:""},velocities:{name:"Velocity Estimations",description:"A CSV containing velocity estimations for various points on the globe",extension:".csv",currentFilePath:""}}),[l,u]=w.exports.useState(),[f,x]=w.exports.useState(),[h,C]=w.exports.useState(),[$,D]=w.exports.useState(),[i,y]=w.exports.useState(Se),[N,p]=w.exports.useState(ge),[c,m]=w.exports.useState(-1);let v=r("span",{});switch(a){case"files":v=n?r(we,{folder:n,files:s,setFile:async(d,S,j)=>{if(j){let P=g({},s);switch(P[d]=F(g({},P[d]),{currentFilePath:S}),d){case"segment":x(await X(j));break;case"block":C(await Y(j));break;case"velocity":D(await ee(j));break;case"command":const L=await Le(n,j,s);u(L.commands),x(L.segments),C(L.blocks),D(L.velocities),P=L.openableFiles;break}o(P)}}}):r("span",{});break;case"velocities":v=r(Ne,{settings:i,setSettings:y});break;case"block":v=r(_e,{settings:N,setSettings:p,selected:c,blocks:(k=h==null?void 0:h.data)!=null?k:[],setBlockData:(d,S)=>{if(h!==void 0){const j=h.data&&h.data[d]?g(g({},h.data[d]),S):Fe(S),P=h.data?[...h.data]:[];P[d]=j;const L=h.clone();L.data=P,C(L)}}});break}return b("div",{className:"w-screen h-screen flex flex-col",children:[r(xe,{folder:n,openFolder:async()=>{const d=await Ae();e(d),t("files")}}),r(ve,{pointSources:[{name:"blocks",color:N.color,selectedColor:N.selectedColor,radius:N.radius,points:(h==null?void 0:h.data)?h.data.map((d,S)=>({longitude:d.interior_lon,latitude:d.interior_lat,name:d.name,description:"",selected:S===c,index:S})):[],clickPoint:(d,S)=>{console.log("Selected",S,d),m(d),t("block")}}],arrowSources:[{name:"velocity",color:i.color,scale:i.scale,arrowHeadScale:i.arrowHead,width:i.width,arrows:($==null?void 0:$.data)?$.data.map(d=>{const S=Math.sqrt(d.east_vel*d.east_vel+d.north_vel*d.north_vel);return{longitude:d.lon,latitude:d.lat,direction:[d.east_vel/S,d.north_vel/S],scale:S,name:d.name,description:`north: ${d.north_vel}, east: ${d.east_vel}`}}):[]}]}),r(ye,{view:v,buttons:n?Ie:void 0,active:a,setActive:d=>t(d)})]})}function ze(n={}){const{immediate:e=!1,onNeedRefresh:a,onOfflineReady:t,onRegistered:s,onRegisterError:o}=n;let l;const u=async(f=!0)=>{};return"serviceWorker"in navigator&&(l=new de("./sw.js",{scope:"./"}),l.addEventListener("activated",f=>{f.isUpdate?window.location.reload():t==null||t()}),l.register({immediate:e}).then(f=>{s==null||s(f)}).catch(f=>{o==null||o(f)})),u}ze();const Be=1,Re=new pe({defaultOptions:{queries:{staleTime:Number.POSITIVE_INFINITY,retry:Be}}});ue.render(r(w.exports.StrictMode,{children:r(fe,{client:Re,children:r(Ee,{})})}),document.querySelector("#root"));
