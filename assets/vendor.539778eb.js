var cc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ag={exports:{}};(function(r,a){(function(p,m){r.exports=m()})(cc,function(){var p=function(b,T){var R={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},oe={on:function(fe,_e,Ve){if(R[fe]===void 0)throw new Error("Invalid event type: "+fe);R[fe].push({selector:_e,fn:Ve})},render:function(fe){T.store.featureChanged(fe)}},ve=function(fe,_e){for(var Ve=R[fe],Ue=Ve.length;Ue--;){var ct=Ve[Ue];if(ct.selector(_e)){ct.fn.call(oe,_e)||T.store.render(),T.ui.updateMapClasses();break}}};return b.start.call(oe),{render:b.render,stop:function(){b.stop&&b.stop()},trash:function(){b.trash&&(b.trash(),T.store.render())},combineFeatures:function(){b.combineFeatures&&b.combineFeatures()},uncombineFeatures:function(){b.uncombineFeatures&&b.uncombineFeatures()},drag:function(fe){ve("drag",fe)},click:function(fe){ve("click",fe)},mousemove:function(fe){ve("mousemove",fe)},mousedown:function(fe){ve("mousedown",fe)},mouseup:function(fe){ve("mouseup",fe)},mouseout:function(fe){ve("mouseout",fe)},keydown:function(fe){ve("keydown",fe)},keyup:function(fe){ve("keyup",fe)},touchstart:function(fe){ve("touchstart",fe)},touchmove:function(fe){ve("touchmove",fe)},touchend:function(fe){ve("touchend",fe)},tap:function(fe){ve("tap",fe)}}},m=6378137;function g(b){var T=0;if(b&&b.length>0){T+=Math.abs(S(b[0]));for(var R=1;R<b.length;R++)T-=Math.abs(S(b[R]))}return T}function S(b){var T,R,oe,ve,fe,_e,Ve=0,Ue=b.length;if(Ue>2){for(_e=0;_e<Ue;_e++)_e===Ue-2?(oe=Ue-2,ve=Ue-1,fe=0):_e===Ue-1?(oe=Ue-1,ve=0,fe=1):(oe=_e,ve=_e+1,fe=_e+2),T=b[oe],R=b[ve],Ve+=(l(b[fe][0])-l(T[0]))*Math.sin(l(R[1]));Ve=Ve*m*m/2}return Ve}function l(b){return b*Math.PI/180}var L={geometry:function b(T){var R,oe=0;switch(T.type){case"Polygon":return g(T.coordinates);case"MultiPolygon":for(R=0;R<T.coordinates.length;R++)oe+=g(T.coordinates[R]);return oe;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(R=0;R<T.geometries.length;R++)oe+=b(T.geometries[R]);return oe}},ring:S},D="mapboxgl-ctrl",J="mapbox-gl-draw_ctrl-draw-btn",he="mapbox-gl-draw_line",Ne="mapbox-gl-draw_polygon",ne="mapbox-gl-draw_point",Oe="mapbox-gl-draw_trash",He="mapbox-gl-draw_combine",rt="mapbox-gl-draw_uncombine",pe="mapboxgl-ctrl-group",ae="active",le="mapbox-gl-draw_boxselect",Pe="mapbox-gl-draw-hot",Me="mapbox-gl-draw-cold",yt="add",Ze="move",It="drag",Ot="pointer",pt="none",er={POLYGON:"polygon",LINE:"line_string",POINT:"point"},br="Feature",Rr="Polygon",Ut="LineString",ir="Point",qr="FeatureCollection",zr="Multi",Qn="MultiPoint",Tn="MultiLineString",ei="MultiPolygon",Vt={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},$e="draw.create",At="draw.delete",Xt="draw.update",Lr="draw.selectionchange",Zr="draw.modechange",ao="draw.actionable",Jr="draw.render",ii="draw.combine",sr="draw.uncombine",wo="move",Za="change_coordinates",qn="feature",Ht="midpoint",Fi="vertex",rn="true",In="false",Au=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Ri={Point:0,LineString:1,Polygon:2};function ms(b,T){var R=Ri[b.geometry.type]-Ri[T.geometry.type];return R===0&&b.geometry.type===Rr?b.area-T.area:R}function un(b){if(this._items={},this._nums={},this._length=b?b.length:0,b)for(var T=0,R=b.length;T<R;T++)this.add(b[T]),b[T]!==void 0&&(typeof b[T]=="string"?this._items[b[T]]=T:this._nums[b[T]]=T)}un.prototype.add=function(b){return this.has(b)||(this._length++,typeof b=="string"?this._items[b]=this._length:this._nums[b]=this._length),this},un.prototype.delete=function(b){return this.has(b)===!1||(this._length--,delete this._items[b],delete this._nums[b]),this},un.prototype.has=function(b){return(typeof b=="string"||typeof b=="number")&&(this._items[b]!==void 0||this._nums[b]!==void 0)},un.prototype.values=function(){var b=this,T=[];return Object.keys(this._items).forEach(function(R){T.push({k:R,v:b._items[R]})}),Object.keys(this._nums).forEach(function(R){T.push({k:JSON.parse(R),v:b._nums[R]})}),T.sort(function(R,oe){return R.v-oe.v}).map(function(R){return R.k})},un.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ba=[qn,Ht,Fi],bo={click:function(b,T,R){return bi(b,T,R,R.options.clickBuffer)},touch:function(b,T,R){return bi(b,T,R,R.options.touchBuffer)}};function bi(b,T,R,oe){if(R.map===null)return[];var ve=b?function(ct,be){return be===void 0&&(be=0),[[ct.point.x-be,ct.point.y-be],[ct.point.x+be,ct.point.y+be]]}(b,oe):T,fe={};R.options.styles&&(fe.layers=R.options.styles.map(function(ct){return ct.id}));var _e=R.map.queryRenderedFeatures(ve,fe).filter(function(ct){return ba.indexOf(ct.properties.meta)!==-1}),Ve=new un,Ue=[];return _e.forEach(function(ct){var be=ct.properties.id;Ve.has(be)||(Ve.add(be),Ue.push(ct))}),function(ct){return ct.map(function(be){return be.geometry.type===Rr&&(be.area=L.geometry({type:br,property:{},geometry:be.geometry})),be}).sort(ms).map(function(be){return delete be.area,be})}(Ue)}function hi(b,T){var R=bo.click(b,null,T),oe={mouse:pt};return R[0]&&(oe.mouse=R[0].properties.active===rn?Ze:Ot,oe.feature=R[0].properties.meta),T.events.currentModeName().indexOf("draw")!==-1&&(oe.mouse=yt),T.ui.queueMapClasses(oe),T.ui.updateMapClasses(),R[0]}function ta(b,T){var R=b.x-T.x,oe=b.y-T.y;return Math.sqrt(R*R+oe*oe)}function Bi(b,T,R){R===void 0&&(R={});var oe=R.fineTolerance!=null?R.fineTolerance:4,ve=R.grossTolerance!=null?R.grossTolerance:12,fe=R.interval!=null?R.interval:500;b.point=b.point||T.point,b.time=b.time||T.time;var _e=ta(b.point,T.point);return _e<oe||_e<ve&&T.time-b.time<fe}function ys(b,T,R){R===void 0&&(R={});var oe=R.tolerance!=null?R.tolerance:25,ve=R.interval!=null?R.interval:250;return b.point=b.point||T.point,b.time=b.time||T.time,ta(b.point,T.point)<oe&&T.time-b.time<ve}function Ga(b,T){return b(T={exports:{}},T.exports),T.exports}var Sa=Ga(function(b){var T=b.exports=function(R,oe){if(oe||(oe=16),R===void 0&&(R=128),R<=0)return"0";for(var ve=Math.log(Math.pow(2,R))/Math.log(oe),fe=2;ve===1/0;fe*=2)ve=Math.log(Math.pow(2,R/fe))/Math.log(oe)*fe;var _e=ve-Math.floor(ve),Ve="";for(fe=0;fe<Math.floor(ve);fe++)Ve=Math.floor(Math.random()*oe).toString(oe)+Ve;if(_e){var Ue=Math.pow(oe,_e);Ve=Math.floor(Math.random()*Ue).toString(oe)+Ve}var ct=parseInt(Ve,oe);return ct!==1/0&&ct>=Math.pow(2,R)?T(R,oe):Ve};T.rack=function(R,oe,ve){var fe=function(Ve){var Ue=0;do{if(Ue++>10){if(!ve)throw new Error("too many ID collisions, use more bits");R+=ve}var ct=T(R,oe)}while(Object.hasOwnProperty.call(_e,ct));return _e[ct]=Ve,ct},_e=fe.hats={};return fe.get=function(Ve){return fe.hats[Ve]},fe.set=function(Ve,Ue){return fe.hats[Ve]=Ue,fe},fe.bits=R||128,fe.base=oe||16,fe}}),Pn=function(b,T){this.ctx=b,this.properties=T.properties||{},this.coordinates=T.geometry.coordinates,this.id=T.id||Sa(),this.type=T.geometry.type};Pn.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Pn.prototype.incomingCoords=function(b){this.setCoordinates(b)},Pn.prototype.setCoordinates=function(b){this.coordinates=b,this.changed()},Pn.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Pn.prototype.setProperty=function(b,T){this.properties[b]=T},Pn.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:br,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Pn.prototype.internal=function(b){var T={id:this.id,meta:qn,"meta:type":this.type,active:In,mode:b};if(this.ctx.options.userProperties)for(var R in this.properties)T["user_"+R]=this.properties[R];return{type:br,properties:T,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Ui=function(b,T){Pn.call(this,b,T)};(Ui.prototype=Object.create(Pn.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Ui.prototype.updateCoordinate=function(b,T,R){this.coordinates=arguments.length===3?[T,R]:[b,T],this.changed()},Ui.prototype.getCoordinate=function(){return this.getCoordinates()};var Ni=function(b,T){Pn.call(this,b,T)};(Ni.prototype=Object.create(Pn.prototype)).isValid=function(){return this.coordinates.length>1},Ni.prototype.addCoordinate=function(b,T,R){this.changed();var oe=parseInt(b,10);this.coordinates.splice(oe,0,[T,R])},Ni.prototype.getCoordinate=function(b){var T=parseInt(b,10);return JSON.parse(JSON.stringify(this.coordinates[T]))},Ni.prototype.removeCoordinate=function(b){this.changed(),this.coordinates.splice(parseInt(b,10),1)},Ni.prototype.updateCoordinate=function(b,T,R){var oe=parseInt(b,10);this.coordinates[oe]=[T,R],this.changed()};var Zn=function(b,T){Pn.call(this,b,T),this.coordinates=this.coordinates.map(function(R){return R.slice(0,-1)})};(Zn.prototype=Object.create(Pn.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(b){return b.length>2})},Zn.prototype.incomingCoords=function(b){this.coordinates=b.map(function(T){return T.slice(0,-1)}),this.changed()},Zn.prototype.setCoordinates=function(b){this.coordinates=b,this.changed()},Zn.prototype.addCoordinate=function(b,T,R){this.changed();var oe=b.split(".").map(function(ve){return parseInt(ve,10)});this.coordinates[oe[0]].splice(oe[1],0,[T,R])},Zn.prototype.removeCoordinate=function(b){this.changed();var T=b.split(".").map(function(oe){return parseInt(oe,10)}),R=this.coordinates[T[0]];R&&(R.splice(T[1],1),R.length<3&&this.coordinates.splice(T[0],1))},Zn.prototype.getCoordinate=function(b){var T=b.split(".").map(function(oe){return parseInt(oe,10)}),R=this.coordinates[T[0]];return JSON.parse(JSON.stringify(R[T[1]]))},Zn.prototype.getCoordinates=function(){return this.coordinates.map(function(b){return b.concat([b[0]])})},Zn.prototype.updateCoordinate=function(b,T,R){this.changed();var oe=b.split("."),ve=parseInt(oe[0],10),fe=parseInt(oe[1],10);this.coordinates[ve]===void 0&&(this.coordinates[ve]=[]),this.coordinates[ve][fe]=[T,R]};var vs={MultiPoint:Ui,MultiLineString:Ni,MultiPolygon:Zn},So=function(b,T,R,oe,ve){var fe=R.split("."),_e=parseInt(fe[0],10),Ve=fe[1]?fe.slice(1).join("."):null;return b[_e][T](Ve,oe,ve)},Dn=function(b,T){if(Pn.call(this,b,T),delete this.coordinates,this.model=vs[T.geometry.type],this.model===void 0)throw new TypeError(T.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(T.geometry.coordinates)};function $t(b){this.map=b.map,this.drawConfig=JSON.parse(JSON.stringify(b.options||{})),this._ctx=b}(Dn.prototype=Object.create(Pn.prototype))._coordinatesToFeatures=function(b){var T=this,R=this.model.bind(this);return b.map(function(oe){return new R(T.ctx,{id:Sa(),type:br,properties:{},geometry:{coordinates:oe,type:T.type.replace("Multi","")}})})},Dn.prototype.isValid=function(){return this.features.every(function(b){return b.isValid()})},Dn.prototype.setCoordinates=function(b){this.features=this._coordinatesToFeatures(b),this.changed()},Dn.prototype.getCoordinate=function(b){return So(this.features,"getCoordinate",b)},Dn.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(b){return b.type===Rr?b.getCoordinates():b.coordinates})))},Dn.prototype.updateCoordinate=function(b,T,R){So(this.features,"updateCoordinate",b,T,R),this.changed()},Dn.prototype.addCoordinate=function(b,T,R){So(this.features,"addCoordinate",b,T,R),this.changed()},Dn.prototype.removeCoordinate=function(b){So(this.features,"removeCoordinate",b),this.changed()},Dn.prototype.getFeatures=function(){return this.features},$t.prototype.setSelected=function(b){return this._ctx.store.setSelected(b)},$t.prototype.setSelectedCoordinates=function(b){var T=this;this._ctx.store.setSelectedCoordinates(b),b.reduce(function(R,oe){return R[oe.feature_id]===void 0&&(R[oe.feature_id]=!0,T._ctx.store.get(oe.feature_id).changed()),R},{})},$t.prototype.getSelected=function(){return this._ctx.store.getSelected()},$t.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},$t.prototype.isSelected=function(b){return this._ctx.store.isSelected(b)},$t.prototype.getFeature=function(b){return this._ctx.store.get(b)},$t.prototype.select=function(b){return this._ctx.store.select(b)},$t.prototype.deselect=function(b){return this._ctx.store.deselect(b)},$t.prototype.deleteFeature=function(b,T){return T===void 0&&(T={}),this._ctx.store.delete(b,T)},$t.prototype.addFeature=function(b){return this._ctx.store.add(b)},$t.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},$t.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},$t.prototype.setActionableState=function(b){b===void 0&&(b={});var T={trash:b.trash||!1,combineFeatures:b.combineFeatures||!1,uncombineFeatures:b.uncombineFeatures||!1};return this._ctx.events.actionable(T)},$t.prototype.changeMode=function(b,T,R){return T===void 0&&(T={}),R===void 0&&(R={}),this._ctx.events.changeMode(b,T,R)},$t.prototype.updateUIClasses=function(b){return this._ctx.ui.queueMapClasses(b)},$t.prototype.activateUIButton=function(b){return this._ctx.ui.setActiveButton(b)},$t.prototype.featuresAt=function(b,T,R){if(R===void 0&&(R="click"),R!=="click"&&R!=="touch")throw new Error("invalid buffer type");return bo[R](b,T,this._ctx)},$t.prototype.newFeature=function(b){var T=b.geometry.type;return T===ir?new Ui(this._ctx,b):T===Ut?new Ni(this._ctx,b):T===Rr?new Zn(this._ctx,b):new Dn(this._ctx,b)},$t.prototype.isInstanceOf=function(b,T){if(b===ir)return T instanceof Ui;if(b===Ut)return T instanceof Ni;if(b===Rr)return T instanceof Zn;if(b==="MultiFeature")return T instanceof Dn;throw new Error("Unknown feature class: "+b)},$t.prototype.doRender=function(b){return this._ctx.store.featureChanged(b)},$t.prototype.onSetup=function(){},$t.prototype.onDrag=function(){},$t.prototype.onClick=function(){},$t.prototype.onMouseMove=function(){},$t.prototype.onMouseDown=function(){},$t.prototype.onMouseUp=function(){},$t.prototype.onMouseOut=function(){},$t.prototype.onKeyUp=function(){},$t.prototype.onKeyDown=function(){},$t.prototype.onTouchStart=function(){},$t.prototype.onTouchMove=function(){},$t.prototype.onTouchEnd=function(){},$t.prototype.onTap=function(){},$t.prototype.onStop=function(){},$t.prototype.onTrash=function(){},$t.prototype.onCombineFeature=function(){},$t.prototype.onUncombineFeature=function(){},$t.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var gs={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Xs=Object.keys(gs);function Ea(b){var T=Object.keys(b);return function(R,oe){oe===void 0&&(oe={});var ve={},fe=T.reduce(function(_e,Ve){return _e[Ve]=b[Ve],_e},new $t(R));return{start:function(){var _e=this;ve=fe.onSetup(oe),Xs.forEach(function(Ve){var Ue,ct=gs[Ve],be=function(){return!1};b[ct]&&(be=function(){return!0}),_e.on(Ve,be,(Ue=ct,function(it){return fe[Ue](ve,it)}))})},stop:function(){fe.onStop(ve)},trash:function(){fe.onTrash(ve)},combineFeatures:function(){fe.onCombineFeatures(ve)},uncombineFeatures:function(){fe.onUncombineFeatures(ve)},render:function(_e,Ve){fe.toDisplayFeatures(ve,_e,Ve)}}}}function ji(b){return[].concat(b).filter(function(T){return T!==void 0})}function No(){var b=this;if(!(b.ctx.map&&b.ctx.map.getSource(Pe)!==void 0))return Ue();var T=b.ctx.events.currentModeName();b.ctx.ui.queueMapClasses({mode:T});var R=[],oe=[];b.isDirty?oe=b.getAllIds():(R=b.getChangedIds().filter(function(ct){return b.get(ct)!==void 0}),oe=b.sources.hot.filter(function(ct){return ct.properties.id&&R.indexOf(ct.properties.id)===-1&&b.get(ct.properties.id)!==void 0}).map(function(ct){return ct.properties.id})),b.sources.hot=[];var ve=b.sources.cold.length;b.sources.cold=b.isDirty?[]:b.sources.cold.filter(function(ct){var be=ct.properties.id||ct.properties.parent;return R.indexOf(be)===-1});var fe=ve!==b.sources.cold.length||oe.length>0;function _e(ct,be){var it=b.get(ct).internal(T);b.ctx.events.currentModeRender(it,function(ht){b.sources[be].push(ht)})}if(R.forEach(function(ct){return _e(ct,"hot")}),oe.forEach(function(ct){return _e(ct,"cold")}),fe&&b.ctx.map.getSource(Me).setData({type:qr,features:b.sources.cold}),b.ctx.map.getSource(Pe).setData({type:qr,features:b.sources.hot}),b._emitSelectionChange&&(b.ctx.map.fire(Lr,{features:b.getSelected().map(function(ct){return ct.toGeoJSON()}),points:b.getSelectedCoordinates().map(function(ct){return{type:br,properties:{},geometry:{type:ir,coordinates:ct.coordinates}}})}),b._emitSelectionChange=!1),b._deletedFeaturesToEmit.length){var Ve=b._deletedFeaturesToEmit.map(function(ct){return ct.toGeoJSON()});b._deletedFeaturesToEmit=[],b.ctx.map.fire(At,{features:Ve})}function Ue(){b.isDirty=!1,b.clearChangedIds()}Ue(),b.ctx.map.fire(Jr,{})}function Ir(b){var T,R=this;this._features={},this._featureIds=new un,this._selectedFeatureIds=new un,this._selectedCoordinates=[],this._changedFeatureIds=new un,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=b,this.sources={hot:[],cold:[]},this.render=function(){T||(T=requestAnimationFrame(function(){T=null,No.call(R)}))},this.isDirty=!1}function Wa(b,T){var R=b._selectedCoordinates.filter(function(oe){return b._selectedFeatureIds.has(oe.feature_id)});b._selectedCoordinates.length===R.length||T.silent||(b._emitSelectionChange=!0),b._selectedCoordinates=R}Ir.prototype.createRenderBatch=function(){var b=this,T=this.render,R=0;return this.render=function(){R++},function(){b.render=T,R>0&&b.render()}},Ir.prototype.setDirty=function(){return this.isDirty=!0,this},Ir.prototype.featureChanged=function(b){return this._changedFeatureIds.add(b),this},Ir.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Ir.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Ir.prototype.getAllIds=function(){return this._featureIds.values()},Ir.prototype.add=function(b){return this.featureChanged(b.id),this._features[b.id]=b,this._featureIds.add(b.id),this},Ir.prototype.delete=function(b,T){var R=this;return T===void 0&&(T={}),ji(b).forEach(function(oe){R._featureIds.has(oe)&&(R._featureIds.delete(oe),R._selectedFeatureIds.delete(oe),T.silent||R._deletedFeaturesToEmit.indexOf(R._features[oe])===-1&&R._deletedFeaturesToEmit.push(R._features[oe]),delete R._features[oe],R.isDirty=!0)}),Wa(this,T),this},Ir.prototype.get=function(b){return this._features[b]},Ir.prototype.getAll=function(){var b=this;return Object.keys(this._features).map(function(T){return b._features[T]})},Ir.prototype.select=function(b,T){var R=this;return T===void 0&&(T={}),ji(b).forEach(function(oe){R._selectedFeatureIds.has(oe)||(R._selectedFeatureIds.add(oe),R._changedFeatureIds.add(oe),T.silent||(R._emitSelectionChange=!0))}),this},Ir.prototype.deselect=function(b,T){var R=this;return T===void 0&&(T={}),ji(b).forEach(function(oe){R._selectedFeatureIds.has(oe)&&(R._selectedFeatureIds.delete(oe),R._changedFeatureIds.add(oe),T.silent||(R._emitSelectionChange=!0))}),Wa(this,T),this},Ir.prototype.clearSelected=function(b){return b===void 0&&(b={}),this.deselect(this._selectedFeatureIds.values(),{silent:b.silent}),this},Ir.prototype.setSelected=function(b,T){var R=this;return T===void 0&&(T={}),b=ji(b),this.deselect(this._selectedFeatureIds.values().filter(function(oe){return b.indexOf(oe)===-1}),{silent:T.silent}),this.select(b.filter(function(oe){return!R._selectedFeatureIds.has(oe)}),{silent:T.silent}),this},Ir.prototype.setSelectedCoordinates=function(b){return this._selectedCoordinates=b,this._emitSelectionChange=!0,this},Ir.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Ir.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Ir.prototype.getSelected=function(){var b=this;return this._selectedFeatureIds.values().map(function(T){return b.get(T)})},Ir.prototype.getSelectedCoordinates=function(){var b=this;return this._selectedCoordinates.map(function(T){return{coordinates:b.get(T.feature_id).getCoordinate(T.coord_path)}})},Ir.prototype.isSelected=function(b){return this._selectedFeatureIds.has(b)},Ir.prototype.setFeatureProperty=function(b,T,R){this.get(b).setProperty(T,R),this.featureChanged(b)},Ir.prototype.storeMapConfig=function(){var b=this;Au.forEach(function(T){b.ctx.map[T]&&(b._mapInitialConfig[T]=b.ctx.map[T].isEnabled())})},Ir.prototype.restoreMapConfig=function(){var b=this;Object.keys(this._mapInitialConfig).forEach(function(T){b._mapInitialConfig[T]?b.ctx.map[T].enable():b.ctx.map[T].disable()})},Ir.prototype.getInitialConfigValue=function(b){return this._mapInitialConfig[b]===void 0||this._mapInitialConfig[b]};var Pr=function(){for(var b=arguments,T={},R=0;R<arguments.length;R++){var oe=b[R];for(var ve in oe)M.call(oe,ve)&&(T[ve]=oe[ve])}return T},M=Object.prototype.hasOwnProperty,O=["mode","feature","mouse"];function B(b){var T=null,R=null,oe={onRemove:function(){return b.map.off("load",oe.connect),clearInterval(R),oe.removeLayers(),b.store.restoreMapConfig(),b.ui.removeButtons(),b.events.removeEventListeners(),b.ui.clearMapClasses(),b.map=null,b.container=null,b.store=null,T&&T.parentNode&&T.parentNode.removeChild(T),T=null,this},connect:function(){b.map.off("load",oe.connect),clearInterval(R),oe.addLayers(),b.store.storeMapConfig(),b.events.addEventListeners()},onAdd:function(ve){var fe=ve.fire;return ve.fire=function(_e,Ve){var Ue=arguments;return fe.length===1&&arguments.length!==1&&(Ue=[Pr({},{type:_e},Ve)]),fe.apply(ve,Ue)},b.map=ve,b.events=function(_e){var Ve=Object.keys(_e.options.modes).reduce(function(ze,mt){return ze[mt]=Ea(_e.options.modes[mt]),ze},{}),Ue={},ct={},be={},it=null,ht=null;be.drag=function(ze,mt){mt({point:ze.point,time:new Date().getTime()})?(_e.ui.queueMapClasses({mouse:It}),ht.drag(ze)):ze.originalEvent.stopPropagation()},be.mousedrag=function(ze){be.drag(ze,function(mt){return!Bi(Ue,mt)})},be.touchdrag=function(ze){be.drag(ze,function(mt){return!ys(ct,mt)})},be.mousemove=function(ze){if((ze.originalEvent.buttons!==void 0?ze.originalEvent.buttons:ze.originalEvent.which)===1)return be.mousedrag(ze);var mt=hi(ze,_e);ze.featureTarget=mt,ht.mousemove(ze)},be.mousedown=function(ze){Ue={time:new Date().getTime(),point:ze.point};var mt=hi(ze,_e);ze.featureTarget=mt,ht.mousedown(ze)},be.mouseup=function(ze){var mt=hi(ze,_e);ze.featureTarget=mt,Bi(Ue,{point:ze.point,time:new Date().getTime()})?ht.click(ze):ht.mouseup(ze)},be.mouseout=function(ze){ht.mouseout(ze)},be.touchstart=function(ze){if(ze.originalEvent.preventDefault(),_e.options.touchEnabled){ct={time:new Date().getTime(),point:ze.point};var mt=bo.touch(ze,null,_e)[0];ze.featureTarget=mt,ht.touchstart(ze)}},be.touchmove=function(ze){if(ze.originalEvent.preventDefault(),_e.options.touchEnabled)return ht.touchmove(ze),be.touchdrag(ze)},be.touchend=function(ze){if(ze.originalEvent.preventDefault(),_e.options.touchEnabled){var mt=bo.touch(ze,null,_e)[0];ze.featureTarget=mt,ys(ct,{time:new Date().getTime(),point:ze.point})?ht.tap(ze):ht.touchend(ze)}};var zt=function(ze){return!(ze===8||ze===46||ze>=48&&ze<=57)};function Rt(ze,mt,Sr){Sr===void 0&&(Sr={}),ht.stop();var rr=Ve[ze];if(rr===void 0)throw new Error(ze+" is not valid");it=ze;var kr=rr(_e,mt);ht=p(kr,_e),Sr.silent||_e.map.fire(Zr,{mode:ze}),_e.store.setDirty(),_e.store.render()}be.keydown=function(ze){(ze.srcElement||ze.target).classList[0]==="mapboxgl-canvas"&&(ze.keyCode!==8&&ze.keyCode!==46||!_e.options.controls.trash?zt(ze.keyCode)?ht.keydown(ze):ze.keyCode===49&&_e.options.controls.point?Rt(Vt.DRAW_POINT):ze.keyCode===50&&_e.options.controls.line_string?Rt(Vt.DRAW_LINE_STRING):ze.keyCode===51&&_e.options.controls.polygon&&Rt(Vt.DRAW_POLYGON):(ze.preventDefault(),ht.trash()))},be.keyup=function(ze){zt(ze.keyCode)&&ht.keyup(ze)},be.zoomend=function(){_e.store.changeZoom()},be.data=function(ze){if(ze.dataType==="style"){var mt=_e.setup,Sr=_e.map,rr=_e.options,kr=_e.store;rr.styles.some(function(St){return Sr.getLayer(St.id)})||(mt.addLayers(),kr.setDirty(),kr.render())}};var nn={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){it=_e.options.defaultMode,ht=p(Ve[it](_e),_e)},changeMode:Rt,actionable:function(ze){var mt=!1;Object.keys(ze).forEach(function(Sr){if(nn[Sr]===void 0)throw new Error("Invalid action type");nn[Sr]!==ze[Sr]&&(mt=!0),nn[Sr]=ze[Sr]}),mt&&_e.map.fire(ao,{actions:nn})},currentModeName:function(){return it},currentModeRender:function(ze,mt){return ht.render(ze,mt)},fire:function(ze,mt){be[ze]&&be[ze](mt)},addEventListeners:function(){_e.map.on("mousemove",be.mousemove),_e.map.on("mousedown",be.mousedown),_e.map.on("mouseup",be.mouseup),_e.map.on("data",be.data),_e.map.on("touchmove",be.touchmove),_e.map.on("touchstart",be.touchstart),_e.map.on("touchend",be.touchend),_e.container.addEventListener("mouseout",be.mouseout),_e.options.keybindings&&(_e.container.addEventListener("keydown",be.keydown),_e.container.addEventListener("keyup",be.keyup))},removeEventListeners:function(){_e.map.off("mousemove",be.mousemove),_e.map.off("mousedown",be.mousedown),_e.map.off("mouseup",be.mouseup),_e.map.off("data",be.data),_e.map.off("touchmove",be.touchmove),_e.map.off("touchstart",be.touchstart),_e.map.off("touchend",be.touchend),_e.container.removeEventListener("mouseout",be.mouseout),_e.options.keybindings&&(_e.container.removeEventListener("keydown",be.keydown),_e.container.removeEventListener("keyup",be.keyup))},trash:function(ze){ht.trash(ze)},combineFeatures:function(){ht.combineFeatures()},uncombineFeatures:function(){ht.uncombineFeatures()},getMode:function(){return it}}}(b),b.ui=function(_e){var Ve={},Ue=null,ct={mode:null,feature:null,mouse:null},be={mode:null,feature:null,mouse:null};function it(ze){be=Pr(be,ze)}function ht(){var ze,mt;if(_e.container){var Sr=[],rr=[];O.forEach(function(kr){be[kr]!==ct[kr]&&(Sr.push(kr+"-"+ct[kr]),be[kr]!==null&&rr.push(kr+"-"+be[kr]))}),Sr.length>0&&(ze=_e.container.classList).remove.apply(ze,Sr),rr.length>0&&(mt=_e.container.classList).add.apply(mt,rr),ct=Pr(ct,be)}}function zt(ze,mt){mt===void 0&&(mt={});var Sr=document.createElement("button");return Sr.className=J+" "+mt.className,Sr.setAttribute("title",mt.title),mt.container.appendChild(Sr),Sr.addEventListener("click",function(rr){if(rr.preventDefault(),rr.stopPropagation(),rr.target===Ue)return Rt(),void mt.onDeactivate();nn(ze),mt.onActivate()},!0),Sr}function Rt(){Ue&&(Ue.classList.remove(ae),Ue=null)}function nn(ze){Rt();var mt=Ve[ze];mt&&mt&&ze!=="trash"&&(mt.classList.add(ae),Ue=mt)}return{setActiveButton:nn,queueMapClasses:it,updateMapClasses:ht,clearMapClasses:function(){it({mode:null,feature:null,mouse:null}),ht()},addButtons:function(){var ze=_e.options.controls,mt=document.createElement("div");return mt.className=pe+" "+D,ze&&(ze[er.LINE]&&(Ve[er.LINE]=zt(er.LINE,{container:mt,className:he,title:"LineString tool "+(_e.options.keybindings?"(l)":""),onActivate:function(){return _e.events.changeMode(Vt.DRAW_LINE_STRING)},onDeactivate:function(){return _e.events.trash()}})),ze[er.POLYGON]&&(Ve[er.POLYGON]=zt(er.POLYGON,{container:mt,className:Ne,title:"Polygon tool "+(_e.options.keybindings?"(p)":""),onActivate:function(){return _e.events.changeMode(Vt.DRAW_POLYGON)},onDeactivate:function(){return _e.events.trash()}})),ze[er.POINT]&&(Ve[er.POINT]=zt(er.POINT,{container:mt,className:ne,title:"Marker tool "+(_e.options.keybindings?"(m)":""),onActivate:function(){return _e.events.changeMode(Vt.DRAW_POINT)},onDeactivate:function(){return _e.events.trash()}})),ze.trash&&(Ve.trash=zt("trash",{container:mt,className:Oe,title:"Delete",onActivate:function(){_e.events.trash()}})),ze.combine_features&&(Ve.combine_features=zt("combineFeatures",{container:mt,className:He,title:"Combine",onActivate:function(){_e.events.combineFeatures()}})),ze.uncombine_features&&(Ve.uncombine_features=zt("uncombineFeatures",{container:mt,className:rt,title:"Uncombine",onActivate:function(){_e.events.uncombineFeatures()}}))),mt},removeButtons:function(){Object.keys(Ve).forEach(function(ze){var mt=Ve[ze];mt.parentNode&&mt.parentNode.removeChild(mt),delete Ve[ze]})}}}(b),b.container=ve.getContainer(),b.store=new Ir(b),T=b.ui.addButtons(),b.options.boxSelect&&(ve.boxZoom.disable(),ve.dragPan.disable(),ve.dragPan.enable()),ve.loaded()?oe.connect():(ve.on("load",oe.connect),R=setInterval(function(){ve.loaded()&&oe.connect()},16)),b.events.start(),T},addLayers:function(){b.map.addSource(Me,{data:{type:qr,features:[]},type:"geojson"}),b.map.addSource(Pe,{data:{type:qr,features:[]},type:"geojson"}),b.options.styles.forEach(function(ve){b.map.addLayer(ve)}),b.store.setDirty(!0),b.store.render()},removeLayers:function(){b.options.styles.forEach(function(ve){b.map.getLayer(ve.id)&&b.map.removeLayer(ve.id)}),b.map.getSource(Me)&&b.map.removeSource(Me),b.map.getSource(Pe)&&b.map.removeSource(Pe)}};return b.setup=oe,oe}function Z(b){return function(T){var R=T.featureTarget;return!!R&&!!R.properties&&R.properties.meta===b}}function X(b){return!!b.featureTarget&&!!b.featureTarget.properties&&b.featureTarget.properties.active===rn&&b.featureTarget.properties.meta===qn}function ie(b){return!!b.featureTarget&&!!b.featureTarget.properties&&b.featureTarget.properties.active===In&&b.featureTarget.properties.meta===qn}function ue(b){return b.featureTarget===void 0}function j(b){var T=b.featureTarget;return!!T&&!!T.properties&&T.properties.meta===Fi}function Y(b){return!!b.originalEvent&&b.originalEvent.shiftKey===!0}function me(b){return b.keyCode===27}function Le(b){return b.keyCode===13}var Re=Ee;function Ee(b,T){this.x=b,this.y=T}function Fe(b,T){var R=T.getBoundingClientRect();return new Re(b.clientX-R.left-(T.clientLeft||0),b.clientY-R.top-(T.clientTop||0))}function st(b,T,R,oe){return{type:br,properties:{meta:Fi,parent:b,coord_path:R,active:oe?rn:In},geometry:{type:ir,coordinates:T}}}function nt(b,T,R){T===void 0&&(T={}),R===void 0&&(R=null);var oe,ve=b.geometry,fe=ve.type,_e=ve.coordinates,Ve=b.properties&&b.properties.id,Ue=[];function ct(it,ht){var zt="",Rt=null;it.forEach(function(nn,ze){var mt=ht!=null?ht+"."+ze:String(ze),Sr=st(Ve,nn,mt,be(mt));if(T.midpoints&&Rt){var rr=function(St,Ti,ai){var ar=Ti.geometry.coordinates,fi=ai.geometry.coordinates;if(ar[1]>85||ar[1]<-85||fi[1]>85||fi[1]<-85)return null;var jr={lng:(ar[0]+fi[0])/2,lat:(ar[1]+fi[1])/2};return{type:br,properties:{meta:Ht,parent:St,lng:jr.lng,lat:jr.lat,coord_path:ai.properties.coord_path},geometry:{type:ir,coordinates:[jr.lng,jr.lat]}}}(Ve,Rt,Sr);rr&&Ue.push(rr)}Rt=Sr;var kr=JSON.stringify(nn);zt!==kr&&Ue.push(Sr),ze===0&&(zt=kr)})}function be(it){return!!T.selectedPaths&&T.selectedPaths.indexOf(it)!==-1}return fe===ir?Ue.push(st(Ve,_e,R,be(R))):fe===Rr?_e.forEach(function(it,ht){ct(it,R!==null?R+"."+ht:String(ht))}):fe===Ut?ct(_e,R):fe.indexOf(zr)===0&&(oe=fe.replace(zr,""),_e.forEach(function(it,ht){var zt={type:br,properties:b.properties,geometry:{type:oe,coordinates:it}};Ue=Ue.concat(nt(zt,T,ht))})),Ue}Ee.prototype={clone:function(){return new Ee(this.x,this.y)},add:function(b){return this.clone()._add(b)},sub:function(b){return this.clone()._sub(b)},multByPoint:function(b){return this.clone()._multByPoint(b)},divByPoint:function(b){return this.clone()._divByPoint(b)},mult:function(b){return this.clone()._mult(b)},div:function(b){return this.clone()._div(b)},rotate:function(b){return this.clone()._rotate(b)},rotateAround:function(b,T){return this.clone()._rotateAround(b,T)},matMult:function(b){return this.clone()._matMult(b)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(b){return this.x===b.x&&this.y===b.y},dist:function(b){return Math.sqrt(this.distSqr(b))},distSqr:function(b){var T=b.x-this.x,R=b.y-this.y;return T*T+R*R},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(b){return Math.atan2(this.y-b.y,this.x-b.x)},angleWith:function(b){return this.angleWithSep(b.x,b.y)},angleWithSep:function(b,T){return Math.atan2(this.x*T-this.y*b,this.x*b+this.y*T)},_matMult:function(b){var T=b[0]*this.x+b[1]*this.y,R=b[2]*this.x+b[3]*this.y;return this.x=T,this.y=R,this},_add:function(b){return this.x+=b.x,this.y+=b.y,this},_sub:function(b){return this.x-=b.x,this.y-=b.y,this},_mult:function(b){return this.x*=b,this.y*=b,this},_div:function(b){return this.x/=b,this.y/=b,this},_multByPoint:function(b){return this.x*=b.x,this.y*=b.y,this},_divByPoint:function(b){return this.x/=b.x,this.y/=b.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var b=this.y;return this.y=this.x,this.x=-b,this},_rotate:function(b){var T=Math.cos(b),R=Math.sin(b),oe=T*this.x-R*this.y,ve=R*this.x+T*this.y;return this.x=oe,this.y=ve,this},_rotateAround:function(b,T){var R=Math.cos(b),oe=Math.sin(b),ve=T.x+R*(this.x-T.x)-oe*(this.y-T.y),fe=T.y+oe*(this.x-T.x)+R*(this.y-T.y);return this.x=ve,this.y=fe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ee.convert=function(b){return b instanceof Ee?b:Array.isArray(b)?new Ee(b[0],b[1]):b};var Te=function(b){setTimeout(function(){b.map&&b.map.doubleClickZoom&&b._ctx&&b._ctx.store&&b._ctx.store.getInitialConfigValue&&b._ctx.store.getInitialConfigValue("doubleClickZoom")&&b.map.doubleClickZoom.enable()},0)},Ye=function(b){setTimeout(function(){b.map&&b.map.doubleClickZoom&&b.map.doubleClickZoom.disable()},0)},We=function(b){if(!b||!b.type)return null;var T=Xe[b.type];if(!T)return null;if(T==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:b}]};if(T==="feature")return{type:"FeatureCollection",features:[b]};if(T==="featurecollection")return b},Xe={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function jt(b){switch(b&&b.type||null){case"FeatureCollection":return b.features=b.features.reduce(function(T,R){return T.concat(jt(R))},[]),b;case"Feature":return b.geometry?jt(b.geometry).map(function(T){var R={type:"Feature",properties:JSON.parse(JSON.stringify(b.properties)),geometry:T};return b.id!==void 0&&(R.id=b.id),R}):[b];case"MultiPoint":return b.coordinates.map(function(T){return{type:"Point",coordinates:T}});case"MultiPolygon":return b.coordinates.map(function(T){return{type:"Polygon",coordinates:T}});case"MultiLineString":return b.coordinates.map(function(T){return{type:"LineString",coordinates:T}});case"GeometryCollection":return b.geometries.map(jt).reduce(function(T,R){return T.concat(R)},[]);case"Point":case"Polygon":case"LineString":return[b]}}var Je=function(b){if(!b)return[];var T=jt(We(b)),R=[];return T.features.forEach(function(oe){oe.geometry&&(R=R.concat(function ve(fe){return Array.isArray(fe)&&fe.length&&typeof fe[0]=="number"?[fe]:fe.reduce(function(_e,Ve){return Array.isArray(Ve)&&Array.isArray(Ve[0])?_e.concat(ve(Ve)):(_e.push(Ve),_e)},[])}(oe.geometry.coordinates)))}),R},tr=Ga(function(b){var T=b.exports=function(be){return new R(be)};function R(be){this.value=be}function oe(be,it,ht){var zt=[],Rt=[],nn=!0;return function ze(mt){var Sr=ht?ve(mt):mt,rr={},kr=!0,St={node:Sr,node_:mt,path:[].concat(zt),parent:Rt[Rt.length-1],parents:Rt,key:zt.slice(-1)[0],isRoot:zt.length===0,level:zt.length,circular:null,update:function(ar,fi){St.isRoot||(St.parent.node[St.key]=ar),St.node=ar,fi&&(kr=!1)},delete:function(ar){delete St.parent.node[St.key],ar&&(kr=!1)},remove:function(ar){Ve(St.parent.node)?St.parent.node.splice(St.key,1):delete St.parent.node[St.key],ar&&(kr=!1)},keys:null,before:function(ar){rr.before=ar},after:function(ar){rr.after=ar},pre:function(ar){rr.pre=ar},post:function(ar){rr.post=ar},stop:function(){nn=!1},block:function(){kr=!1}};if(!nn)return St;function Ti(){if(typeof St.node=="object"&&St.node!==null){St.keys&&St.node_===St.node||(St.keys=fe(St.node)),St.isLeaf=St.keys.length==0;for(var ar=0;ar<Rt.length;ar++)if(Rt[ar].node_===mt){St.circular=Rt[ar];break}}else St.isLeaf=!0,St.keys=null;St.notLeaf=!St.isLeaf,St.notRoot=!St.isRoot}Ti();var ai=it.call(St,St.node);return ai!==void 0&&St.update&&St.update(ai),rr.before&&rr.before.call(St,St.node),kr&&(typeof St.node!="object"||St.node===null||St.circular||(Rt.push(St),Ti(),Ue(St.keys,function(ar,fi){zt.push(ar),rr.pre&&rr.pre.call(St,St.node[ar],ar);var jr=ze(St.node[ar]);ht&&ct.call(St.node,ar)&&(St.node[ar]=jr.node),jr.isLast=fi==St.keys.length-1,jr.isFirst=fi==0,rr.post&&rr.post.call(St,jr),zt.pop()}),Rt.pop()),rr.after&&rr.after.call(St,St.node)),St}(be).node}function ve(be){if(typeof be=="object"&&be!==null){var it;if(Ve(be))it=[];else if(_e(be)==="[object Date]")it=new Date(be.getTime?be.getTime():be);else if(function(Rt){return _e(Rt)==="[object RegExp]"}(be))it=new RegExp(be);else if(function(Rt){return _e(Rt)==="[object Error]"}(be))it={message:be.message};else if(function(Rt){return _e(Rt)==="[object Boolean]"}(be))it=new Boolean(be);else if(function(Rt){return _e(Rt)==="[object Number]"}(be))it=new Number(be);else if(function(Rt){return _e(Rt)==="[object String]"}(be))it=new String(be);else if(Object.create&&Object.getPrototypeOf)it=Object.create(Object.getPrototypeOf(be));else if(be.constructor===Object)it={};else{var ht=be.constructor&&be.constructor.prototype||be.__proto__||{},zt=function(){};zt.prototype=ht,it=new zt}return Ue(fe(be),function(Rt){it[Rt]=be[Rt]}),it}return be}R.prototype.get=function(be){for(var it=this.value,ht=0;ht<be.length;ht++){var zt=be[ht];if(!it||!ct.call(it,zt)){it=void 0;break}it=it[zt]}return it},R.prototype.has=function(be){for(var it=this.value,ht=0;ht<be.length;ht++){var zt=be[ht];if(!it||!ct.call(it,zt))return!1;it=it[zt]}return!0},R.prototype.set=function(be,it){for(var ht=this.value,zt=0;zt<be.length-1;zt++){var Rt=be[zt];ct.call(ht,Rt)||(ht[Rt]={}),ht=ht[Rt]}return ht[be[zt]]=it,it},R.prototype.map=function(be){return oe(this.value,be,!0)},R.prototype.forEach=function(be){return this.value=oe(this.value,be,!1),this.value},R.prototype.reduce=function(be,it){var ht=arguments.length===1,zt=ht?this.value:it;return this.forEach(function(Rt){this.isRoot&&ht||(zt=be.call(this,zt,Rt))}),zt},R.prototype.paths=function(){var be=[];return this.forEach(function(it){be.push(this.path)}),be},R.prototype.nodes=function(){var be=[];return this.forEach(function(it){be.push(this.node)}),be},R.prototype.clone=function(){var be=[],it=[];return function ht(zt){for(var Rt=0;Rt<be.length;Rt++)if(be[Rt]===zt)return it[Rt];if(typeof zt=="object"&&zt!==null){var nn=ve(zt);return be.push(zt),it.push(nn),Ue(fe(zt),function(ze){nn[ze]=ht(zt[ze])}),be.pop(),it.pop(),nn}return zt}(this.value)};var fe=Object.keys||function(be){var it=[];for(var ht in be)it.push(ht);return it};function _e(be){return Object.prototype.toString.call(be)}var Ve=Array.isArray||function(be){return Object.prototype.toString.call(be)==="[object Array]"},Ue=function(be,it){if(be.forEach)return be.forEach(it);for(var ht=0;ht<be.length;ht++)it(be[ht],ht,be)};Ue(fe(R.prototype),function(be){T[be]=function(it){var ht=[].slice.call(arguments,1),zt=new R(it);return zt[be].apply(zt,ht)}});var ct=Object.hasOwnProperty||function(be,it){return it in be}}),Cr=Mt;function Mt(b){if(!(this instanceof Mt))return new Mt(b);this._bbox=b||[1/0,1/0,-1/0,-1/0],this._valid=!!b}Mt.prototype.include=function(b){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],b[0]),this._bbox[1]=Math.min(this._bbox[1],b[1]),this._bbox[2]=Math.max(this._bbox[2],b[0]),this._bbox[3]=Math.max(this._bbox[3],b[1]),this},Mt.prototype.equals=function(b){var T;return T=b instanceof Mt?b.bbox():b,this._bbox[0]==T[0]&&this._bbox[1]==T[1]&&this._bbox[2]==T[2]&&this._bbox[3]==T[3]},Mt.prototype.center=function(b){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Mt.prototype.union=function(b){var T;return this._valid=!0,T=b instanceof Mt?b.bbox():b,this._bbox[0]=Math.min(this._bbox[0],T[0]),this._bbox[1]=Math.min(this._bbox[1],T[1]),this._bbox[2]=Math.max(this._bbox[2],T[2]),this._bbox[3]=Math.max(this._bbox[3],T[3]),this},Mt.prototype.bbox=function(){return this._valid?this._bbox:null},Mt.prototype.contains=function(b){if(!b)return this._fastContains();if(!this._valid)return null;var T=b[0],R=b[1];return this._bbox[0]<=T&&this._bbox[1]<=R&&this._bbox[2]>=T&&this._bbox[3]>=R},Mt.prototype.intersect=function(b){return this._valid?(T=b instanceof Mt?b.bbox():b,!(this._bbox[0]>T[2]||this._bbox[2]<T[0]||this._bbox[3]<T[1]||this._bbox[1]>T[3])):null;var T},Mt.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var b="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",b)},Mt.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var lr={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},or=Object.keys(lr),On=function(b){return dr(b).bbox()};function dr(b){for(var T=Cr(),R=Je(b),oe=0;oe<R.length;oe++)T.include(R[oe]);return T}On.polygon=function(b){return dr(b).polygon()},On.bboxify=function(b){return tr(b).map(function(T){T&&or.some(function(R){return!!T[R]&&lr[R].indexOf(T.type)!==-1})&&(T.bbox=dr(T).bbox(),this.update(T))})};function Qr(b,T){var R=-90,oe=90,ve=-90,fe=90,_e=270,Ve=-270;b.forEach(function(ct){var be=On(ct),it=be[1],ht=be[3],zt=be[0],Rt=be[2];it>R&&(R=it),ht<oe&&(oe=ht),ht>ve&&(ve=ht),it<fe&&(fe=it),zt<_e&&(_e=zt),Rt>Ve&&(Ve=Rt)});var Ue=T;return R+Ue.lat>85&&(Ue.lat=85-R),ve+Ue.lat>90&&(Ue.lat=90-ve),oe+Ue.lat<-85&&(Ue.lat=-85-oe),fe+Ue.lat<-90&&(Ue.lat=-90-fe),_e+Ue.lng<=-270&&(Ue.lng+=360*Math.ceil(Math.abs(Ue.lng)/360)),Ve+Ue.lng>=270&&(Ue.lng-=360*Math.ceil(Math.abs(Ue.lng)/360)),Ue}function xr(b,T){var R=Qr(b.map(function(oe){return oe.toGeoJSON()}),T);b.forEach(function(oe){var ve,fe=oe.getCoordinates(),_e=function(Ue){var ct={lng:Ue[0]+R.lng,lat:Ue[1]+R.lat};return[ct.lng,ct.lat]},Ve=function(Ue){return Ue.map(function(ct){return _e(ct)})};oe.type===ir?ve=_e(fe):oe.type===Ut||oe.type===Qn?ve=fe.map(_e):oe.type===Rr||oe.type===Tn?ve=fe.map(Ve):oe.type===ei&&(ve=fe.map(function(Ue){return Ue.map(function(ct){return Ve(ct)})})),oe.incomingCoords(ve)})}var Pt={onSetup:function(b){var T=this,R={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:b.featureIds||[]};return this.setSelected(R.initiallySelectedFeatureIds.filter(function(oe){return T.getFeature(oe)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),R},fireUpdate:function(){this.map.fire(Xt,{action:wo,features:this.getSelected().map(function(b){return b.toGeoJSON()})})},fireActionable:function(){var b=this,T=this.getSelected(),R=T.filter(function(Ve){return b.isInstanceOf("MultiFeature",Ve)}),oe=!1;if(T.length>1){oe=!0;var ve=T[0].type.replace("Multi","");T.forEach(function(Ve){Ve.type.replace("Multi","")!==ve&&(oe=!1)})}var fe=R.length>0,_e=T.length>0;this.setActionableState({combineFeatures:oe,uncombineFeatures:fe,trash:_e})},getUniqueIds:function(b){return b.length?b.map(function(T){return T.properties.id}).filter(function(T){return T!==void 0}).reduce(function(T,R){return T.add(R),T},new un).values():[]},stopExtendedInteractions:function(b){b.boxSelectElement&&(b.boxSelectElement.parentNode&&b.boxSelectElement.parentNode.removeChild(b.boxSelectElement),b.boxSelectElement=null),this.map.dragPan.enable(),b.boxSelecting=!1,b.canBoxSelect=!1,b.dragMoving=!1,b.canDragMove=!1},onStop:function(){Te(this)},onMouseMove:function(b){return this.stopExtendedInteractions(b),!0},onMouseOut:function(b){return!b.dragMoving||this.fireUpdate()}};Pt.onTap=Pt.onClick=function(b,T){return ue(T)?this.clickAnywhere(b,T):Z(Fi)(T)?this.clickOnVertex(b,T):function(R){return!!R.featureTarget&&!!R.featureTarget.properties&&R.featureTarget.properties.meta===qn}(T)?this.clickOnFeature(b,T):void 0},Pt.clickAnywhere=function(b){var T=this,R=this.getSelectedIds();R.length&&(this.clearSelectedFeatures(),R.forEach(function(oe){return T.doRender(oe)})),Te(this),this.stopExtendedInteractions(b)},Pt.clickOnVertex=function(b,T){this.changeMode(Vt.DIRECT_SELECT,{featureId:T.featureTarget.properties.parent,coordPath:T.featureTarget.properties.coord_path,startPos:T.lngLat}),this.updateUIClasses({mouse:Ze})},Pt.startOnActiveFeature=function(b,T){this.stopExtendedInteractions(b),this.map.dragPan.disable(),this.doRender(T.featureTarget.properties.id),b.canDragMove=!0,b.dragMoveLocation=T.lngLat},Pt.clickOnFeature=function(b,T){var R=this;Ye(this),this.stopExtendedInteractions(b);var oe=Y(T),ve=this.getSelectedIds(),fe=T.featureTarget.properties.id,_e=this.isSelected(fe);if(!oe&&_e&&this.getFeature(fe).type!==ir)return this.changeMode(Vt.DIRECT_SELECT,{featureId:fe});_e&&oe?(this.deselect(fe),this.updateUIClasses({mouse:Ot}),ve.length===1&&Te(this)):!_e&&oe?(this.select(fe),this.updateUIClasses({mouse:Ze})):_e||oe||(ve.forEach(function(Ve){return R.doRender(Ve)}),this.setSelected(fe),this.updateUIClasses({mouse:Ze})),this.doRender(fe)},Pt.onMouseDown=function(b,T){return X(T)?this.startOnActiveFeature(b,T):this.drawConfig.boxSelect&&function(R){return!!R.originalEvent&&!!R.originalEvent.shiftKey&&R.originalEvent.button===0}(T)?this.startBoxSelect(b,T):void 0},Pt.startBoxSelect=function(b,T){this.stopExtendedInteractions(b),this.map.dragPan.disable(),b.boxSelectStartLocation=Fe(T.originalEvent,this.map.getContainer()),b.canBoxSelect=!0},Pt.onTouchStart=function(b,T){if(X(T))return this.startOnActiveFeature(b,T)},Pt.onDrag=function(b,T){return b.canDragMove?this.dragMove(b,T):this.drawConfig.boxSelect&&b.canBoxSelect?this.whileBoxSelect(b,T):void 0},Pt.whileBoxSelect=function(b,T){b.boxSelecting=!0,this.updateUIClasses({mouse:yt}),b.boxSelectElement||(b.boxSelectElement=document.createElement("div"),b.boxSelectElement.classList.add(le),this.map.getContainer().appendChild(b.boxSelectElement));var R=Fe(T.originalEvent,this.map.getContainer()),oe=Math.min(b.boxSelectStartLocation.x,R.x),ve=Math.max(b.boxSelectStartLocation.x,R.x),fe=Math.min(b.boxSelectStartLocation.y,R.y),_e=Math.max(b.boxSelectStartLocation.y,R.y),Ve="translate("+oe+"px, "+fe+"px)";b.boxSelectElement.style.transform=Ve,b.boxSelectElement.style.WebkitTransform=Ve,b.boxSelectElement.style.width=ve-oe+"px",b.boxSelectElement.style.height=_e-fe+"px"},Pt.dragMove=function(b,T){b.dragMoving=!0,T.originalEvent.stopPropagation();var R={lng:T.lngLat.lng-b.dragMoveLocation.lng,lat:T.lngLat.lat-b.dragMoveLocation.lat};xr(this.getSelected(),R),b.dragMoveLocation=T.lngLat},Pt.onMouseUp=function(b,T){var R=this;if(b.dragMoving)this.fireUpdate();else if(b.boxSelecting){var oe=[b.boxSelectStartLocation,Fe(T.originalEvent,this.map.getContainer())],ve=this.featuresAt(null,oe,"click"),fe=this.getUniqueIds(ve).filter(function(_e){return!R.isSelected(_e)});fe.length&&(this.select(fe),fe.forEach(function(_e){return R.doRender(_e)}),this.updateUIClasses({mouse:Ze}))}this.stopExtendedInteractions(b)},Pt.toDisplayFeatures=function(b,T,R){T.properties.active=this.isSelected(T.properties.id)?rn:In,R(T),this.fireActionable(),T.properties.active===rn&&T.geometry.type!==ir&&nt(T).forEach(R)},Pt.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Pt.onCombineFeatures=function(){var b=this.getSelected();if(!(b.length===0||b.length<2)){for(var T=[],R=[],oe=b[0].type.replace("Multi",""),ve=0;ve<b.length;ve++){var fe=b[ve];if(fe.type.replace("Multi","")!==oe)return;fe.type.includes("Multi")?fe.getCoordinates().forEach(function(Ve){T.push(Ve)}):T.push(fe.getCoordinates()),R.push(fe.toGeoJSON())}if(R.length>1){var _e=this.newFeature({type:br,properties:R[0].properties,geometry:{type:"Multi"+oe,coordinates:T}});this.addFeature(_e),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([_e.id]),this.map.fire(ii,{createdFeatures:[_e.toGeoJSON()],deletedFeatures:R})}this.fireActionable()}},Pt.onUncombineFeatures=function(){var b=this,T=this.getSelected();if(T.length!==0){for(var R=[],oe=[],ve=function(_e){var Ve=T[_e];b.isInstanceOf("MultiFeature",Ve)&&(Ve.getFeatures().forEach(function(Ue){b.addFeature(Ue),Ue.properties=Ve.properties,R.push(Ue.toGeoJSON()),b.select([Ue.id])}),b.deleteFeature(Ve.id,{silent:!0}),oe.push(Ve.toGeoJSON()))},fe=0;fe<T.length;fe++)ve(fe);R.length>1&&this.map.fire(sr,{createdFeatures:R,deletedFeatures:oe}),this.fireActionable()}};var cr=Z(Fi),oi=Z(Ht),Vi={fireUpdate:function(){this.map.fire(Xt,{action:Za,features:this.getSelected().map(function(b){return b.toGeoJSON()})})},fireActionable:function(b){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:b.selectedCoordPaths.length>0})},startDragging:function(b,T){this.map.dragPan.disable(),b.canDragMove=!0,b.dragMoveLocation=T.lngLat},stopDragging:function(b){this.map.dragPan.enable(),b.dragMoving=!1,b.canDragMove=!1,b.dragMoveLocation=null},onVertex:function(b,T){this.startDragging(b,T);var R=T.featureTarget.properties,oe=b.selectedCoordPaths.indexOf(R.coord_path);Y(T)||oe!==-1?Y(T)&&oe===-1&&b.selectedCoordPaths.push(R.coord_path):b.selectedCoordPaths=[R.coord_path];var ve=this.pathsToCoordinates(b.featureId,b.selectedCoordPaths);this.setSelectedCoordinates(ve)},onMidpoint:function(b,T){this.startDragging(b,T);var R=T.featureTarget.properties;b.feature.addCoordinate(R.coord_path,R.lng,R.lat),this.fireUpdate(),b.selectedCoordPaths=[R.coord_path]},pathsToCoordinates:function(b,T){return T.map(function(R){return{feature_id:b,coord_path:R}})},onFeature:function(b,T){b.selectedCoordPaths.length===0?this.startDragging(b,T):this.stopDragging(b)},dragFeature:function(b,T,R){xr(this.getSelected(),R),b.dragMoveLocation=T.lngLat},dragVertex:function(b,T,R){for(var oe=b.selectedCoordPaths.map(function(Ve){return b.feature.getCoordinate(Ve)}),ve=Qr(oe.map(function(Ve){return{type:br,properties:{},geometry:{type:ir,coordinates:Ve}}}),R),fe=0;fe<oe.length;fe++){var _e=oe[fe];b.feature.updateCoordinate(b.selectedCoordPaths[fe],_e[0]+ve.lng,_e[1]+ve.lat)}},clickNoTarget:function(){this.changeMode(Vt.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(Vt.SIMPLE_SELECT)},clickActiveFeature:function(b){b.selectedCoordPaths=[],this.clearSelectedCoordinates(),b.feature.changed()},onSetup:function(b){var T=b.featureId,R=this.getFeature(T);if(!R)throw new Error("You must provide a featureId to enter direct_select mode");if(R.type===ir)throw new TypeError("direct_select mode doesn't handle point features");var oe={featureId:T,feature:R,dragMoveLocation:b.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:b.coordPath?[b.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(T,oe.selectedCoordPaths)),this.setSelected(T),Ye(this),this.setActionableState({trash:!0}),oe},onStop:function(){Te(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(b,T,R){b.featureId===T.properties.id?(T.properties.active=rn,R(T),nt(T,{map:this.map,midpoints:!0,selectedPaths:b.selectedCoordPaths}).forEach(R)):(T.properties.active=In,R(T)),this.fireActionable(b)},onTrash:function(b){b.selectedCoordPaths.sort(function(T,R){return R.localeCompare(T,"en",{numeric:!0})}).forEach(function(T){return b.feature.removeCoordinate(T)}),this.fireUpdate(),b.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(b),b.feature.isValid()===!1&&(this.deleteFeature([b.featureId]),this.changeMode(Vt.SIMPLE_SELECT,{}))},onMouseMove:function(b,T){var R=X(T),oe=cr(T),ve=b.selectedCoordPaths.length===0;return R&&ve||oe&&!ve?this.updateUIClasses({mouse:Ze}):this.updateUIClasses({mouse:pt}),this.stopDragging(b),!0},onMouseOut:function(b){return b.dragMoving&&this.fireUpdate(),!0}};Vi.onTouchStart=Vi.onMouseDown=function(b,T){return cr(T)?this.onVertex(b,T):X(T)?this.onFeature(b,T):oi(T)?this.onMidpoint(b,T):void 0},Vi.onDrag=function(b,T){if(b.canDragMove===!0){b.dragMoving=!0,T.originalEvent.stopPropagation();var R={lng:T.lngLat.lng-b.dragMoveLocation.lng,lat:T.lngLat.lat-b.dragMoveLocation.lat};b.selectedCoordPaths.length>0?this.dragVertex(b,T,R):this.dragFeature(b,T,R),b.dragMoveLocation=T.lngLat}},Vi.onClick=function(b,T){return ue(T)?this.clickNoTarget(b,T):X(T)?this.clickActiveFeature(b,T):ie(T)?this.clickInactive(b,T):void this.stopDragging(b)},Vi.onTap=function(b,T){return ue(T)?this.clickNoTarget(b,T):X(T)?this.clickActiveFeature(b,T):ie(T)?this.clickInactive(b,T):void 0},Vi.onTouchEnd=Vi.onMouseUp=function(b){b.dragMoving&&this.fireUpdate(),this.stopDragging(b)};var Br={};function Gn(b,T){return!!b.lngLat&&b.lngLat.lng===T[0]&&b.lngLat.lat===T[1]}Br.onSetup=function(){var b=this.newFeature({type:br,properties:{},geometry:{type:ir,coordinates:[]}});return this.addFeature(b),this.clearSelectedFeatures(),this.updateUIClasses({mouse:yt}),this.activateUIButton(er.POINT),this.setActionableState({trash:!0}),{point:b}},Br.stopDrawingAndRemove=function(b){this.deleteFeature([b.point.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT)},Br.onTap=Br.onClick=function(b,T){this.updateUIClasses({mouse:Ze}),b.point.updateCoordinate("",T.lngLat.lng,T.lngLat.lat),this.map.fire($e,{features:[b.point.toGeoJSON()]}),this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[b.point.id]})},Br.onStop=function(b){this.activateUIButton(),b.point.getCoordinate().length||this.deleteFeature([b.point.id],{silent:!0})},Br.toDisplayFeatures=function(b,T,R){var oe=T.properties.id===b.point.id;if(T.properties.active=oe?rn:In,!oe)return R(T)},Br.onTrash=Br.stopDrawingAndRemove,Br.onKeyUp=function(b,T){if(me(T)||Le(T))return this.stopDrawingAndRemove(b,T)};var jo={onSetup:function(){var b=this.newFeature({type:br,properties:{},geometry:{type:Rr,coordinates:[[]]}});return this.addFeature(b),this.clearSelectedFeatures(),Ye(this),this.updateUIClasses({mouse:yt}),this.activateUIButton(er.POLYGON),this.setActionableState({trash:!0}),{polygon:b,currentVertexPosition:0}},clickAnywhere:function(b,T){if(b.currentVertexPosition>0&&Gn(T,b.polygon.coordinates[0][b.currentVertexPosition-1]))return this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[b.polygon.id]});this.updateUIClasses({mouse:yt}),b.polygon.updateCoordinate("0."+b.currentVertexPosition,T.lngLat.lng,T.lngLat.lat),b.currentVertexPosition++,b.polygon.updateCoordinate("0."+b.currentVertexPosition,T.lngLat.lng,T.lngLat.lat)},clickOnVertex:function(b){return this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[b.polygon.id]})},onMouseMove:function(b,T){b.polygon.updateCoordinate("0."+b.currentVertexPosition,T.lngLat.lng,T.lngLat.lat),j(T)&&this.updateUIClasses({mouse:Ot})}};jo.onTap=jo.onClick=function(b,T){return j(T)?this.clickOnVertex(b,T):this.clickAnywhere(b,T)},jo.onKeyUp=function(b,T){me(T)?(this.deleteFeature([b.polygon.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT)):Le(T)&&this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[b.polygon.id]})},jo.onStop=function(b){this.updateUIClasses({mouse:pt}),Te(this),this.activateUIButton(),this.getFeature(b.polygon.id)!==void 0&&(b.polygon.removeCoordinate("0."+b.currentVertexPosition),b.polygon.isValid()?this.map.fire($e,{features:[b.polygon.toGeoJSON()]}):(this.deleteFeature([b.polygon.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT,{},{silent:!0})))},jo.toDisplayFeatures=function(b,T,R){var oe=T.properties.id===b.polygon.id;if(T.properties.active=oe?rn:In,!oe)return R(T);if(T.geometry.coordinates.length!==0){var ve=T.geometry.coordinates[0].length;if(!(ve<3)){if(T.properties.meta=qn,R(st(b.polygon.id,T.geometry.coordinates[0][0],"0.0",!1)),ve>3){var fe=T.geometry.coordinates[0].length-3;R(st(b.polygon.id,T.geometry.coordinates[0][fe],"0."+fe,!1))}if(ve<=4){var _e=[[T.geometry.coordinates[0][0][0],T.geometry.coordinates[0][0][1]],[T.geometry.coordinates[0][1][0],T.geometry.coordinates[0][1][1]]];if(R({type:br,properties:T.properties,geometry:{coordinates:_e,type:Ut}}),ve===3)return}return R(T)}}},jo.onTrash=function(b){this.deleteFeature([b.polygon.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT)};var so={onSetup:function(b){var T,R,oe=(b=b||{}).featureId,ve="forward";if(oe){if(!(T=this.getFeature(oe)))throw new Error("Could not find a feature with the provided featureId");var fe=b.from;if(fe&&fe.type==="Feature"&&fe.geometry&&fe.geometry.type==="Point"&&(fe=fe.geometry),fe&&fe.type==="Point"&&fe.coordinates&&fe.coordinates.length===2&&(fe=fe.coordinates),!fe||!Array.isArray(fe))throw new Error("Please use the `from` property to indicate which point to continue the line from");var _e=T.coordinates.length-1;if(T.coordinates[_e][0]===fe[0]&&T.coordinates[_e][1]===fe[1])R=_e+1,T.addCoordinate.apply(T,[R].concat(T.coordinates[_e]));else{if(T.coordinates[0][0]!==fe[0]||T.coordinates[0][1]!==fe[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");ve="backwards",R=0,T.addCoordinate.apply(T,[R].concat(T.coordinates[0]))}}else T=this.newFeature({type:br,properties:{},geometry:{type:Ut,coordinates:[]}}),R=0,this.addFeature(T);return this.clearSelectedFeatures(),Ye(this),this.updateUIClasses({mouse:yt}),this.activateUIButton(er.LINE),this.setActionableState({trash:!0}),{line:T,currentVertexPosition:R,direction:ve}},clickAnywhere:function(b,T){if(b.currentVertexPosition>0&&Gn(T,b.line.coordinates[b.currentVertexPosition-1])||b.direction==="backwards"&&Gn(T,b.line.coordinates[b.currentVertexPosition+1]))return this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[b.line.id]});this.updateUIClasses({mouse:yt}),b.line.updateCoordinate(b.currentVertexPosition,T.lngLat.lng,T.lngLat.lat),b.direction==="forward"?(b.currentVertexPosition++,b.line.updateCoordinate(b.currentVertexPosition,T.lngLat.lng,T.lngLat.lat)):b.line.addCoordinate(0,T.lngLat.lng,T.lngLat.lat)},clickOnVertex:function(b){return this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[b.line.id]})},onMouseMove:function(b,T){b.line.updateCoordinate(b.currentVertexPosition,T.lngLat.lng,T.lngLat.lat),j(T)&&this.updateUIClasses({mouse:Ot})}};so.onTap=so.onClick=function(b,T){if(j(T))return this.clickOnVertex(b,T);this.clickAnywhere(b,T)},so.onKeyUp=function(b,T){Le(T)?this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[b.line.id]}):me(T)&&(this.deleteFeature([b.line.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT))},so.onStop=function(b){Te(this),this.activateUIButton(),this.getFeature(b.line.id)!==void 0&&(b.line.removeCoordinate(""+b.currentVertexPosition),b.line.isValid()?this.map.fire($e,{features:[b.line.toGeoJSON()]}):(this.deleteFeature([b.line.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT,{},{silent:!0})))},so.onTrash=function(b){this.deleteFeature([b.line.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT)},so.toDisplayFeatures=function(b,T,R){var oe=T.properties.id===b.line.id;if(T.properties.active=oe?rn:In,!oe)return R(T);T.geometry.coordinates.length<2||(T.properties.meta=qn,R(st(b.line.id,T.geometry.coordinates[b.direction==="forward"?T.geometry.coordinates.length-2:1],""+(b.direction==="forward"?T.geometry.coordinates.length-2:1),!1)),R(T))};var en={simple_select:Pt,direct_select:Vi,draw_point:Br,draw_polygon:jo,draw_line_string:so},_s={defaultMode:Vt.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:en,controls:{},userProperties:!1},ti={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},kn={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Si(b,T){return b.map(function(R){return R.source?R:Pr(R,{id:R.id+"."+T,source:T==="hot"?Pe:Me})})}var Nr=Ga(function(b,T){var R="[object Arguments]",oe="[object Map]",ve="[object Object]",fe="[object Set]",_e=/^\[object .+?Constructor\]$/,Ve=/^(?:0|[1-9]\d*)$/,Ue={};Ue["[object Float32Array]"]=Ue["[object Float64Array]"]=Ue["[object Int8Array]"]=Ue["[object Int16Array]"]=Ue["[object Int32Array]"]=Ue["[object Uint8Array]"]=Ue["[object Uint8ClampedArray]"]=Ue["[object Uint16Array]"]=Ue["[object Uint32Array]"]=!0,Ue[R]=Ue["[object Array]"]=Ue["[object ArrayBuffer]"]=Ue["[object Boolean]"]=Ue["[object DataView]"]=Ue["[object Date]"]=Ue["[object Error]"]=Ue["[object Function]"]=Ue[oe]=Ue["[object Number]"]=Ue[ve]=Ue["[object RegExp]"]=Ue[fe]=Ue["[object String]"]=Ue["[object WeakMap]"]=!1;var ct=typeof cc=="object"&&cc&&cc.Object===Object&&cc,be=typeof self=="object"&&self&&self.Object===Object&&self,it=ct||be||Function("return this")(),ht=T&&!T.nodeType&&T,zt=ht&&b&&!b.nodeType&&b,Rt=zt&&zt.exports===ht,nn=Rt&&ct.process,ze=function(){try{return nn&&nn.binding&&nn.binding("util")}catch{}}(),mt=ze&&ze.isTypedArray;function Sr(de,ke){for(var Qe=-1,gt=de==null?0:de.length;++Qe<gt;)if(ke(de[Qe],Qe,de))return!0;return!1}function rr(de){var ke=-1,Qe=Array(de.size);return de.forEach(function(gt,Gr){Qe[++ke]=[Gr,gt]}),Qe}function kr(de){var ke=-1,Qe=Array(de.size);return de.forEach(function(gt){Qe[++ke]=gt}),Qe}var St,Ti,ai,ar=Array.prototype,fi=Function.prototype,jr=Object.prototype,tn=it["__core-js_shared__"],Ca=fi.toString,lo=jr.hasOwnProperty,vl=(St=/[^.]+$/.exec(tn&&tn.keys&&tn.keys.IE_PROTO||""))?"Symbol(src)_1."+St:"",gl=jr.toString,Mu=RegExp("^"+Ca.call(lo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ks=Rt?it.Buffer:void 0,Xa=it.Symbol,Hs=it.Uint8Array,zu=jr.propertyIsEnumerable,_l=ar.splice,Ta=Xa?Xa.toStringTag:void 0,Ka=Object.getOwnPropertySymbols,xs=Ks?Ks.isBuffer:void 0,xl=(Ti=Object.keys,ai=Object,function(de){return Ti(ai(de))}),bn=Gi(it,"DataView"),Ia=Gi(it,"Map"),Eo=Gi(it,"Promise"),Co=Gi(it,"Set"),Vo=Gi(it,"WeakMap"),co=Gi(Object,"create"),ra=Po(bn),Pa=Po(Ia),ka=Po(Eo),na=Po(Co),wl=Po(Vo),Lu=Xa?Xa.prototype:void 0,wr=Lu?Lu.valueOf:void 0;function Aa(de){var ke=-1,Qe=de==null?0:de.length;for(this.clear();++ke<Qe;){var gt=de[ke];this.set(gt[0],gt[1])}}function qi(de){var ke=-1,Qe=de==null?0:de.length;for(this.clear();++ke<Qe;){var gt=de[ke];this.set(gt[0],gt[1])}}function ia(de){var ke=-1,Qe=de==null?0:de.length;for(this.clear();++ke<Qe;){var gt=de[ke];this.set(gt[0],gt[1])}}function ws(de){var ke=-1,Qe=de==null?0:de.length;for(this.__data__=new ia;++ke<Qe;)this.add(de[ke])}function qo(de){var ke=this.__data__=new qi(de);this.size=ke.size}function bl(de,ke){var Qe=bs(de),gt=!Qe&&Ha(de),Gr=!Qe&&!gt&&Ru(de),pr=!Qe&&!gt&&!Gr&&Es(de),on=Qe||gt||Gr||pr,Wr=on?function(mn,Ii){for(var Go=-1,Fn=Array(mn);++Go<mn;)Fn[Go]=Ii(Go);return Fn}(de.length,String):[],si=Wr.length;for(var ln in de)!ke&&!lo.call(de,ln)||on&&(ln=="length"||Gr&&(ln=="offset"||ln=="parent")||pr&&(ln=="buffer"||ln=="byteLength"||ln=="byteOffset")||Dr(ln,si))||Wr.push(ln);return Wr}function To(de,ke){for(var Qe=de.length;Qe--;)if(Cl(de[Qe][0],ke))return Qe;return-1}function Zi(de){return de==null?de===void 0?"[object Undefined]":"[object Null]":Ta&&Ta in Object(de)?function(ke){var Qe=lo.call(ke,Ta),gt=ke[Ta];try{ke[Ta]=void 0;var Gr=!0}catch{}var pr=gl.call(ke);return Gr&&(Qe?ke[Ta]=gt:delete ke[Ta]),pr}(de):function(ke){return gl.call(ke)}(de)}function oa(de){return Zo(de)&&Zi(de)==R}function Du(de,ke,Qe,gt,Gr){return de===ke||(de==null||ke==null||!Zo(de)&&!Zo(ke)?de!=de&&ke!=ke:function(pr,on,Wr,si,ln,mn){var Ii=bs(pr),Go=bs(on),Fn=Ii?"[object Array]":Wi(pr),po=Go?"[object Array]":Wi(on),za=(Fn=Fn==R?ve:Fn)==ve,Ts=(po=po==R?ve:po)==ve,Wo=Fn==po;if(Wo&&Ru(pr)){if(!Ru(on))return!1;Ii=!0,za=!1}if(Wo&&!za)return mn||(mn=new qo),Ii||Es(pr)?aa(pr,on,Wr,si,ln,mn):function(Ur,yr,Ar,ho,Xo,An,qt){switch(Ar){case"[object DataView]":if(Ur.byteLength!=yr.byteLength||Ur.byteOffset!=yr.byteOffset)return!1;Ur=Ur.buffer,yr=yr.buffer;case"[object ArrayBuffer]":return!(Ur.byteLength!=yr.byteLength||!An(new Hs(Ur),new Hs(yr)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Cl(+Ur,+yr);case"[object Error]":return Ur.name==yr.name&&Ur.message==yr.message;case"[object RegExp]":case"[object String]":return Ur==yr+"";case oe:var mr=rr;case fe:var Wn=1&ho;if(mr||(mr=kr),Ur.size!=yr.size&&!Wn)return!1;var sa=qt.get(Ur);if(sa)return sa==yr;ho|=2,qt.set(Ur,yr);var fo=aa(mr(Ur),mr(yr),ho,Xo,An,qt);return qt.delete(Ur),fo;case"[object Symbol]":if(wr)return wr.call(Ur)==wr.call(yr)}return!1}(pr,on,Fn,Wr,si,ln,mn);if(!(1&Wr)){var La=za&&lo.call(pr,"__wrapped__"),$s=Ts&&lo.call(on,"__wrapped__");if(La||$s){var Uu=La?pr.value():pr,Is=$s?on.value():on;return mn||(mn=new qo),ln(Uu,Is,Wr,si,mn)}}return Wo?(mn||(mn=new qo),function(Ur,yr,Ar,ho,Xo,An){var qt=1&Ar,mr=Fu(Ur),Wn=mr.length,sa=Fu(yr).length;if(Wn!=sa&&!qt)return!1;for(var fo=Wn;fo--;){var Xi=mr[fo];if(!(qt?Xi in yr:lo.call(yr,Xi)))return!1}var Tl=An.get(Ur);if(Tl&&An.get(yr))return Tl==yr;var Ys=!0;An.set(Ur,yr),An.set(yr,Ur);for(var Da=qt;++fo<Wn;){Xi=mr[fo];var ua=Ur[Xi],Ki=yr[Xi];if(ho)var cn=qt?ho(Ki,ua,Xi,yr,Ur,An):ho(ua,Ki,Xi,Ur,yr,An);if(!(cn===void 0?ua===Ki||Xo(ua,Ki,Ar,ho,An):cn)){Ys=!1;break}Da||(Da=Xi=="constructor")}if(Ys&&!Da){var la=Ur.constructor,Ps=yr.constructor;la==Ps||!("constructor"in Ur)||!("constructor"in yr)||typeof la=="function"&&la instanceof la&&typeof Ps=="function"&&Ps instanceof Ps||(Ys=!1)}return An.delete(Ur),An.delete(yr),Ys}(pr,on,Wr,si,ln,mn)):!1}(de,ke,Qe,gt,Du,Gr))}function Sl(de){return!(!Ma(de)||function(ke){return!!vl&&vl in ke}(de))&&(Bu(de)?Mu:_e).test(Po(de))}function Ou(de){if(Qe=(ke=de)&&ke.constructor,gt=typeof Qe=="function"&&Qe.prototype||jr,ke!==gt)return xl(de);var ke,Qe,gt,Gr=[];for(var pr in Object(de))lo.call(de,pr)&&pr!="constructor"&&Gr.push(pr);return Gr}function aa(de,ke,Qe,gt,Gr,pr){var on=1&Qe,Wr=de.length,si=ke.length;if(Wr!=si&&!(on&&si>Wr))return!1;var ln=pr.get(de);if(ln&&pr.get(ke))return ln==ke;var mn=-1,Ii=!0,Go=2&Qe?new ws:void 0;for(pr.set(de,ke),pr.set(ke,de);++mn<Wr;){var Fn=de[mn],po=ke[mn];if(gt)var za=on?gt(po,Fn,mn,ke,de,pr):gt(Fn,po,mn,de,ke,pr);if(za!==void 0){if(za)continue;Ii=!1;break}if(Go){if(!Sr(ke,function(Ts,Wo){if(La=Wo,!Go.has(La)&&(Fn===Ts||Gr(Fn,Ts,Qe,gt,pr)))return Go.push(Wo);var La})){Ii=!1;break}}else if(Fn!==po&&!Gr(Fn,po,Qe,gt,pr)){Ii=!1;break}}return pr.delete(de),pr.delete(ke),Ii}function Fu(de){return function(ke,Qe,gt){var Gr=Qe(ke);return bs(ke)?Gr:function(pr,on){for(var Wr=-1,si=on.length,ln=pr.length;++Wr<si;)pr[ln+Wr]=on[Wr];return pr}(Gr,gt(ke))}(de,Cs,El)}function Io(de,ke){var Qe,gt,Gr=de.__data__;return((gt=typeof(Qe=ke))=="string"||gt=="number"||gt=="symbol"||gt=="boolean"?Qe!=="__proto__":Qe===null)?Gr[typeof ke=="string"?"string":"hash"]:Gr.map}function Gi(de,ke){var Qe=function(gt,Gr){return gt==null?void 0:gt[Gr]}(de,ke);return Sl(Qe)?Qe:void 0}Aa.prototype.clear=function(){this.__data__=co?co(null):{},this.size=0},Aa.prototype.delete=function(de){var ke=this.has(de)&&delete this.__data__[de];return this.size-=ke?1:0,ke},Aa.prototype.get=function(de){var ke=this.__data__;if(co){var Qe=ke[de];return Qe==="__lodash_hash_undefined__"?void 0:Qe}return lo.call(ke,de)?ke[de]:void 0},Aa.prototype.has=function(de){var ke=this.__data__;return co?ke[de]!==void 0:lo.call(ke,de)},Aa.prototype.set=function(de,ke){var Qe=this.__data__;return this.size+=this.has(de)?0:1,Qe[de]=co&&ke===void 0?"__lodash_hash_undefined__":ke,this},qi.prototype.clear=function(){this.__data__=[],this.size=0},qi.prototype.delete=function(de){var ke=this.__data__,Qe=To(ke,de);return!(Qe<0)&&(Qe==ke.length-1?ke.pop():_l.call(ke,Qe,1),--this.size,!0)},qi.prototype.get=function(de){var ke=this.__data__,Qe=To(ke,de);return Qe<0?void 0:ke[Qe][1]},qi.prototype.has=function(de){return To(this.__data__,de)>-1},qi.prototype.set=function(de,ke){var Qe=this.__data__,gt=To(Qe,de);return gt<0?(++this.size,Qe.push([de,ke])):Qe[gt][1]=ke,this},ia.prototype.clear=function(){this.size=0,this.__data__={hash:new Aa,map:new(Ia||qi),string:new Aa}},ia.prototype.delete=function(de){var ke=Io(this,de).delete(de);return this.size-=ke?1:0,ke},ia.prototype.get=function(de){return Io(this,de).get(de)},ia.prototype.has=function(de){return Io(this,de).has(de)},ia.prototype.set=function(de,ke){var Qe=Io(this,de),gt=Qe.size;return Qe.set(de,ke),this.size+=Qe.size==gt?0:1,this},ws.prototype.add=ws.prototype.push=function(de){return this.__data__.set(de,"__lodash_hash_undefined__"),this},ws.prototype.has=function(de){return this.__data__.has(de)},qo.prototype.clear=function(){this.__data__=new qi,this.size=0},qo.prototype.delete=function(de){var ke=this.__data__,Qe=ke.delete(de);return this.size=ke.size,Qe},qo.prototype.get=function(de){return this.__data__.get(de)},qo.prototype.has=function(de){return this.__data__.has(de)},qo.prototype.set=function(de,ke){var Qe=this.__data__;if(Qe instanceof qi){var gt=Qe.__data__;if(!Ia||gt.length<199)return gt.push([de,ke]),this.size=++Qe.size,this;Qe=this.__data__=new ia(gt)}return Qe.set(de,ke),this.size=Qe.size,this};var El=Ka?function(de){return de==null?[]:(de=Object(de),function(ke,Qe){for(var gt=-1,Gr=ke==null?0:ke.length,pr=0,on=[];++gt<Gr;){var Wr=ke[gt];Qe(Wr,gt,ke)&&(on[pr++]=Wr)}return on}(Ka(de),function(ke){return zu.call(de,ke)}))}:function(){return[]},Wi=Zi;function Dr(de,ke){return!!(ke=ke==null?9007199254740991:ke)&&(typeof de=="number"||Ve.test(de))&&de>-1&&de%1==0&&de<ke}function Po(de){if(de!=null){try{return Ca.call(de)}catch{}try{return de+""}catch{}}return""}function Cl(de,ke){return de===ke||de!=de&&ke!=ke}(bn&&Wi(new bn(new ArrayBuffer(1)))!="[object DataView]"||Ia&&Wi(new Ia)!=oe||Eo&&Wi(Eo.resolve())!="[object Promise]"||Co&&Wi(new Co)!=fe||Vo&&Wi(new Vo)!="[object WeakMap]")&&(Wi=function(de){var ke=Zi(de),Qe=ke==ve?de.constructor:void 0,gt=Qe?Po(Qe):"";if(gt)switch(gt){case ra:return"[object DataView]";case Pa:return oe;case ka:return"[object Promise]";case na:return fe;case wl:return"[object WeakMap]"}return ke});var Ha=oa(function(){return arguments}())?oa:function(de){return Zo(de)&&lo.call(de,"callee")&&!zu.call(de,"callee")},bs=Array.isArray,Ru=xs||function(){return!1};function Bu(de){if(!Ma(de))return!1;var ke=Zi(de);return ke=="[object Function]"||ke=="[object GeneratorFunction]"||ke=="[object AsyncFunction]"||ke=="[object Proxy]"}function Ss(de){return typeof de=="number"&&de>-1&&de%1==0&&de<=9007199254740991}function Ma(de){var ke=typeof de;return de!=null&&(ke=="object"||ke=="function")}function Zo(de){return de!=null&&typeof de=="object"}var Es=mt?function(de){return function(ke){return de(ke)}}(mt):function(de){return Zo(de)&&Ss(de.length)&&!!Ue[Zi(de)]};function Cs(de){return(ke=de)!=null&&Ss(ke.length)&&!Bu(ke)?bl(de):Ou(de);var ke}b.exports=function(de,ke){return Du(de,ke)}}),uo={Polygon:Zn,LineString:Ni,Point:Ui,MultiPolygon:Dn,MultiLineString:Dn,MultiPoint:Dn};function Ei(b,T){return T.modes=Vt,T.getFeatureIdsAt=function(R){return bo.click({point:R},null,b).map(function(oe){return oe.properties.id})},T.getSelectedIds=function(){return b.store.getSelectedIds()},T.getSelected=function(){return{type:qr,features:b.store.getSelectedIds().map(function(R){return b.store.get(R)}).map(function(R){return R.toGeoJSON()})}},T.getSelectedPoints=function(){return{type:qr,features:b.store.getSelectedCoordinates().map(function(R){return{type:br,properties:{},geometry:{type:ir,coordinates:R.coordinates}}})}},T.set=function(R){if(R.type===void 0||R.type!==qr||!Array.isArray(R.features))throw new Error("Invalid FeatureCollection");var oe=b.store.createRenderBatch(),ve=b.store.getAllIds().slice(),fe=T.add(R),_e=new un(fe);return(ve=ve.filter(function(Ve){return!_e.has(Ve)})).length&&T.delete(ve),oe(),fe},T.add=function(R){var oe=JSON.parse(JSON.stringify(We(R))).features.map(function(ve){if(ve.id=ve.id||Sa(),ve.geometry===null)throw new Error("Invalid geometry: null");if(b.store.get(ve.id)===void 0||b.store.get(ve.id).type!==ve.geometry.type){var fe=uo[ve.geometry.type];if(fe===void 0)throw new Error("Invalid geometry type: "+ve.geometry.type+".");var _e=new fe(b,ve);b.store.add(_e)}else{var Ve=b.store.get(ve.id);Ve.properties=ve.properties,Nr(Ve.getCoordinates(),ve.geometry.coordinates)||Ve.incomingCoords(ve.geometry.coordinates)}return ve.id});return b.store.render(),oe},T.get=function(R){var oe=b.store.get(R);if(oe)return oe.toGeoJSON()},T.getAll=function(){return{type:qr,features:b.store.getAll().map(function(R){return R.toGeoJSON()})}},T.delete=function(R){return b.store.delete(R,{silent:!0}),T.getMode()!==Vt.DIRECT_SELECT||b.store.getSelectedIds().length?b.store.render():b.events.changeMode(Vt.SIMPLE_SELECT,void 0,{silent:!0}),T},T.deleteAll=function(){return b.store.delete(b.store.getAllIds(),{silent:!0}),T.getMode()===Vt.DIRECT_SELECT?b.events.changeMode(Vt.SIMPLE_SELECT,void 0,{silent:!0}):b.store.render(),T},T.changeMode=function(R,oe){return oe===void 0&&(oe={}),R===Vt.SIMPLE_SELECT&&T.getMode()===Vt.SIMPLE_SELECT?(ve=oe.featureIds||[],fe=b.store.getSelectedIds(),ve.length===fe.length&&JSON.stringify(ve.map(function(_e){return _e}).sort())===JSON.stringify(fe.map(function(_e){return _e}).sort())||(b.store.setSelected(oe.featureIds,{silent:!0}),b.store.render()),T):(R===Vt.DIRECT_SELECT&&T.getMode()===Vt.DIRECT_SELECT&&oe.featureId===b.store.getSelectedIds()[0]||b.events.changeMode(R,oe,{silent:!0}),T);var ve,fe},T.getMode=function(){return b.events.getMode()},T.trash=function(){return b.events.trash({silent:!0}),T},T.combineFeatures=function(){return b.events.combineFeatures({silent:!0}),T},T.uncombineFeatures=function(){return b.events.uncombineFeatures({silent:!0}),T},T.setFeatureProperty=function(R,oe,ve){return b.store.setFeatureProperty(R,oe,ve),T},T}var yl=function(b,T){var R={options:b=function(ve){ve===void 0&&(ve={});var fe=Pr(ve);return ve.controls||(fe.controls={}),ve.displayControlsDefault===!1?fe.controls=Pr(kn,ve.controls):fe.controls=Pr(ti,ve.controls),(fe=Pr(_s,fe)).styles=Si(fe.styles,"cold").concat(Si(fe.styles,"hot")),fe}(b)};T=Ei(R,T),R.api=T;var oe=B(R);return T.onAdd=oe.onAdd,T.onRemove=oe.onRemove,T.types=er,T.options=b,T};function Ci(b){yl(b,this)}return Ci.modes=en,Ci})})(Ag);var xS=Ag.exports,Mg={exports:{}};(function(r,a){(function(p,m){r.exports=m()})(cc,function(){var p,m,g;function S(l,L){if(!p)p=L;else if(!m)m=L;else{var D="var sharedChunk = {}; ("+p+")(sharedChunk); ("+m+")(sharedChunk);",J={};p(J),g=L(J),typeof window!="undefined"&&(g.workerUrl=window.URL.createObjectURL(new Blob([D],{type:"text/javascript"})))}}return S(["exports"],function(l){function L(e,t){return e(t={exports:{}},t.exports),t.exports}var D=J;function J(e,t,n,u){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=u,this.p2x=n,this.p2y=u}J.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},J.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},J.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},J.prototype.solveCurveX=function(e,t){var n,u,h,f,y;for(t===void 0&&(t=1e-6),h=e,y=0;y<8;y++){if(f=this.sampleCurveX(h)-e,Math.abs(f)<t)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=f/w}if((h=e)<(n=0))return n;if(h>(u=1))return u;for(;n<u;){if(f=this.sampleCurveX(h),Math.abs(f-e)<t)return h;e>f?n=h:u=h,h=.5*(u-n)+n}return h},J.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var he=Ne;function Ne(e,t){this.x=e,this.y=t}Ne.prototype={clone:function(){return new Ne(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),u=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=u,this},_rotateAround:function(e,t){var n=Math.cos(e),u=Math.sin(e),h=t.y+u*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-u*(this.y-t.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ne.convert=function(e){return e instanceof Ne?e:Array.isArray(e)?new Ne(e[0],e[1]):e};var ne=typeof self!="undefined"?self:{},Oe=Math.pow(2,53)-1;function He(e,t,n,u){var h=new D(e,t,n,u);return function(f){return h.solve(f)}}var rt=He(.25,.1,.25,1);function pe(e,t,n){return Math.min(n,Math.max(t,e))}function ae(e,t,n){var u=n-t,h=((e-t)%u+u)%u+t;return h===t?n:h}function le(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var u=0,h=t;u<h.length;u+=1){var f=h[u];for(var y in f)e[y]=f[y]}return e}var Pe=1;function Me(){return Pe++}function yt(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Ze(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function It(e,t){e.forEach(function(n){t[n]&&(t[n]=t[n].bind(t))})}function Ot(e,t){return e.indexOf(t,e.length-t.length)!==-1}function pt(e,t,n){var u={};for(var h in e)u[h]=t.call(n||this,e[h],h,e);return u}function er(e,t,n){var u={};for(var h in e)t.call(n||this,e[h],h,e)&&(u[h]=e[h]);return u}function br(e){return Array.isArray(e)?e.map(br):typeof e=="object"&&e?pt(e,br):e}var Rr={};function Ut(e){Rr[e]||(typeof console!="undefined"&&console.warn(e),Rr[e]=!0)}function ir(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function qr(e){for(var t=0,n=0,u=e.length,h=u-1,f=void 0,y=void 0;n<u;h=n++)t+=((y=e[h]).x-(f=e[n]).x)*(f.y+y.y);return t}function zr(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Qn(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(u,h,f,y){var w=f||y;return t[h]=!w||w.toLowerCase(),""}),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var Tn=null;function ei(e){if(Tn==null){var t=e.navigator?e.navigator.userAgent:null;Tn=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Tn}function Vt(e){try{var t=ne[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var $e,At,Xt,Lr,Zr=ne.performance&&ne.performance.now?ne.performance.now.bind(ne.performance):Date.now.bind(Date),ao=ne.requestAnimationFrame||ne.mozRequestAnimationFrame||ne.webkitRequestAnimationFrame||ne.msRequestAnimationFrame,Jr=ne.cancelAnimationFrame||ne.mozCancelAnimationFrame||ne.webkitCancelAnimationFrame||ne.msCancelAnimationFrame,ii={now:Zr,frame:function(e){var t=ao(e);return{cancel:function(){return Jr(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var n=ne.document.createElement("canvas"),u=n.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,u.drawImage(e,0,0,e.width,e.height),u.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return $e||($e=ne.document.createElement("a")),$e.href=e,$e.href},hardwareConcurrency:ne.navigator&&ne.navigator.hardwareConcurrency||4,get devicePixelRatio(){return ne.devicePixelRatio},get prefersReducedMotion(){return!!ne.matchMedia&&(At==null&&(At=ne.matchMedia("(prefers-reduced-motion: reduce)")),At.matches)}},sr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},wo={supported:!1,testSupport:function(e){!Za&&Lr&&(qn?Ht(e):Xt=e)}},Za=!1,qn=!1;function Ht(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Lr),e.isContextLost())return;wo.supported=!0}catch{}e.deleteTexture(t),Za=!0}ne.document&&((Lr=ne.document.createElement("img")).onload=function(){Xt&&Ht(Xt),Xt=null,qn=!0},Lr.onerror=function(){Za=!0,Xt=null},Lr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Fi="01",rn=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function In(e){return e.indexOf("mapbox:")===0}rn.prototype._createSkuToken=function(){var e=function(){for(var t="",n=0;n<10;n++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Fi,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},rn.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},rn.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},rn.prototype.normalizeStyleURL=function(e,t){if(!In(e))return e;var n=un(e);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},rn.prototype.normalizeGlyphsURL=function(e,t){if(!In(e))return e;var n=un(e);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},rn.prototype.normalizeSourceURL=function(e,t){if(!In(e))return e;var n=un(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)},rn.prototype.normalizeSpriteURL=function(e,t,n,u){var h=un(e);return In(e)?(h.path="/styles/v1"+h.path+"/sprite"+t+n,this._makeAPIURL(h,this._customAccessToken||u)):(h.path+=""+t+n,ba(h))},rn.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!In(e))return e;var n=un(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ii.devicePixelRatio>=2||t===512?"@2x":"")+(wo.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var u=this._customAccessToken||function(h){for(var f=0,y=h;f<y.length;f+=1){var w=y[f].match(/^access_token=(.*)$/);if(w)return w[1]}return null}(n.params)||sr.ACCESS_TOKEN;return sr.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,u)},rn.prototype.canonicalizeTileURL=function(e,t){var n=un(e);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return e;var u="mapbox://tiles/";u+=n.path.replace("/v4/","");var h=n.params;return t&&(h=h.filter(function(f){return!f.match(/^access_token=/)})),h.length&&(u+="?"+h.join("&")),u},rn.prototype.canonicalizeTileset=function(e,t){for(var n=!!t&&In(t),u=[],h=0,f=e.tiles||[];h<f.length;h+=1){var y=f[h];Ri(y)?u.push(this.canonicalizeTileURL(y,n)):u.push(y)}return u},rn.prototype._makeAPIURL=function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=un(sr.API_URL);if(e.protocol=u.protocol,e.authority=u.authority,e.protocol==="http"){var h=e.params.indexOf("secure");h>=0&&e.params.splice(h,1)}if(u.path!=="/"&&(e.path=""+u.path+e.path),!sr.REQUIRE_ACCESS_TOKEN)return ba(e);if(!(t=t||sr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return e.params=e.params.filter(function(f){return f.indexOf("access_token")===-1}),e.params.push("access_token="+t),ba(e)};var Au=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ri(e){return Au.test(e)}var ms=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function un(e){var t=e.match(ms);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function ba(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function bo(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(ne.atob(t[1]).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var bi=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};bi.prototype.getStorageKey=function(e){var t,n=bo(sr.ACCESS_TOKEN);return t=n&&n.u?ne.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,function(u,h){return String.fromCharCode(Number("0x"+h))})):sr.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},bi.prototype.fetchEventData=function(){var e=Vt("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var u=ne.localStorage.getItem(t);u&&(this.eventData=JSON.parse(u));var h=ne.localStorage.getItem(n);h&&(this.anonId=h)}catch{Ut("Unable to read from LocalStorage")}},bi.prototype.saveEventData=function(){var e=Vt("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{ne.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&ne.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Ut("Unable to write to LocalStorage")}},bi.prototype.processRequests=function(e){},bi.prototype.postEvent=function(e,t,n,u){var h=this;if(sr.EVENTS_URL){var f=un(sr.EVENTS_URL);f.params.push("access_token="+(u||sr.ACCESS_TOKEN||""));var y={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:Fi,userId:this.anonId},w=t?le(y,t):y,C={url:ba(f),headers:{"Content-Type":"text/plain"},body:JSON.stringify([w])};this.pendingRequest=Pr(C,function(I){h.pendingRequest=null,n(I),h.saveEventData(),h.processRequests(u)})}},bi.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var hi,ta,Bi=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(n,u,h,f){this.skuToken=h,(sr.EVENTS_URL&&f||sr.ACCESS_TOKEN&&Array.isArray(n)&&n.some(function(y){return In(y)||Ri(y)}))&&this.queueRequest({id:u,timestamp:Date.now()},f)},t.prototype.processRequests=function(n){var u=this;if(!this.pendingRequest&&this.queue.length!==0){var h=this.queue.shift(),f=h.id,y=h.timestamp;f&&this.success[f]||(this.anonId||this.fetchEventData(),Ze(this.anonId)||(this.anonId=yt()),this.postEvent(y,{skuToken:this.skuToken},function(w){w||f&&(u.success[f]=!0)},n))}},t}(bi),ys=new(function(e){function t(n){e.call(this,"appUserTurnstile"),this._customAccessToken=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(n,u){sr.EVENTS_URL&&sr.ACCESS_TOKEN&&Array.isArray(n)&&n.some(function(h){return In(h)||Ri(h)})&&this.queueRequest(Date.now(),u)},t.prototype.processRequests=function(n){var u=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var h=bo(sr.ACCESS_TOKEN),f=h?h.u:sr.ACCESS_TOKEN,y=f!==this.eventData.tokenU;Ze(this.anonId)||(this.anonId=yt(),y=!0);var w=this.queue.shift();if(this.eventData.lastSuccess){var C=new Date(this.eventData.lastSuccess),I=new Date(w),k=(w-this.eventData.lastSuccess)/864e5;y=y||k>=1||k<-1||C.getDate()!==I.getDate()}else y=!0;if(!y)return this.processRequests();this.postEvent(w,{"enabled.telemetry":!1},function(A){A||(u.eventData.lastSuccess=w,u.eventData.tokenU=f)},n)}},t}(bi)),Ga=ys.postTurnstileEvent.bind(ys),Sa=new Bi,Pn=Sa.postMapLoadEvent.bind(Sa),Ui=500,Ni=50;function Zn(){ne.caches&&!hi&&(hi=ne.caches.open("mapbox-tiles"))}function vs(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var So,Dn=1/0;function $t(){return So==null&&(So=ne.OffscreenCanvas&&new ne.OffscreenCanvas(1,1).getContext("2d")&&typeof ne.createImageBitmap=="function"),So}var gs={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(gs);var Xs=function(e){function t(n,u,h){u===401&&Ri(h)&&(n+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,n),this.status=u,this.url=h,this.name=this.constructor.name,this.message=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Ea=zr()?function(){return self.worker&&self.worker.referrer}:function(){return(ne.location.protocol==="blob:"?ne.parent:ne).location.href},ji,No,Ir=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(Ea())&&!/^\w+:/.test(n))){if(ne.fetch&&ne.Request&&ne.AbortController&&ne.Request.prototype.hasOwnProperty("signal"))return function(u,h){var f,y=new ne.AbortController,w=new ne.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:Ea(),signal:y.signal}),C=!1,I=!1,k=(f=w.url).indexOf("sku=")>0&&Ri(f);u.type==="json"&&w.headers.set("Accept","application/json");var A=function(U,W,K){if(!I){if(U&&U.message!=="SecurityError"&&Ut(U),W&&K)return F(W);var re=Date.now();ne.fetch(w).then(function(Q){if(Q.ok){var ce=k?Q.clone():null;return F(Q,ce,re)}return h(new Xs(Q.statusText,Q.status,u.url))}).catch(function(Q){Q.code!==20&&h(new Error(Q.message))})}},F=function(U,W,K){(u.type==="arrayBuffer"?U.arrayBuffer():u.type==="json"?U.json():U.text()).then(function(re){I||(W&&K&&function(Q,ce,ge){if(Zn(),hi){var xe={status:ce.status,statusText:ce.statusText,headers:new ne.Headers};ce.headers.forEach(function(Ae,Be){return xe.headers.set(Be,Ae)});var Se=Qn(ce.headers.get("Cache-Control")||"");Se["no-store"]||(Se["max-age"]&&xe.headers.set("Expires",new Date(ge+1e3*Se["max-age"]).toUTCString()),new Date(xe.headers.get("Expires")).getTime()-ge<42e4||function(Ae,Be){if(ta===void 0)try{new Response(new ReadableStream),ta=!0}catch{ta=!1}ta?Be(Ae.body):Ae.blob().then(Be)}(ce,function(Ae){var Be=new ne.Response(Ae,xe);Zn(),hi&&hi.then(function(Ge){return Ge.put(vs(Q.url),Be)}).catch(function(Ge){return Ut(Ge.message)})}))}}(w,W,K),C=!0,h(null,re,U.headers.get("Cache-Control"),U.headers.get("Expires")))}).catch(function(re){I||h(new Error(re.message))})};return k?function(U,W){if(Zn(),!hi)return W(null);var K=vs(U.url);hi.then(function(re){re.match(K).then(function(Q){var ce=function(ge){if(!ge)return!1;var xe=new Date(ge.headers.get("Expires")||0),Se=Qn(ge.headers.get("Cache-Control")||"");return xe>Date.now()&&!Se["no-cache"]}(Q);re.delete(K),ce&&re.put(K,Q.clone()),W(null,Q,ce)}).catch(W)}).catch(W)}(w,A):A(null,null),{cancel:function(){I=!0,C||y.abort()}}}(e,t);if(zr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(u,h){var f=new ne.XMLHttpRequest;for(var y in f.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(f.responseType="arraybuffer"),u.headers)f.setRequestHeader(y,u.headers[y]);return u.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=u.credentials==="include",f.onerror=function(){h(new Error(f.statusText))},f.onload=function(){if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){var w=f.response;if(u.type==="json")try{w=JSON.parse(f.response)}catch(C){return h(C)}h(null,w,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else h(new Xs(f.statusText,f.status,u.url))},f.send(u.body),{cancel:function(){return f.abort()}}}(e,t)},Wa=function(e,t){return Ir(le(e,{type:"arrayBuffer"}),t)},Pr=function(e,t){return Ir(le(e,{method:"POST"}),t)},M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";ji=[],No=0;var O=function(e,t){if(wo.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),No>=sr.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return ji.push(n),n}No++;var u=!1,h=function(){if(!u)for(u=!0,No--;ji.length&&No<sr.MAX_PARALLEL_IMAGE_REQUESTS;){var y=ji.shift();y.cancelled||(y.cancel=O(y.requestParameters,y.callback).cancel)}},f=Wa(e,function(y,w,C,I){h(),y?t(y):w&&($t()?function(k,A){var F=new ne.Blob([new Uint8Array(k)],{type:"image/png"});ne.createImageBitmap(F).then(function(U){A(null,U)}).catch(function(U){A(new Error("Could not load image because of "+U.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(w,t):function(k,A,F,U){var W=new ne.Image,K=ne.URL;W.onload=function(){A(null,W),K.revokeObjectURL(W.src),W.onload=null,ne.requestAnimationFrame(function(){W.src=M})},W.onerror=function(){return A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var re=new ne.Blob([new Uint8Array(k)],{type:"image/png"});W.cacheControl=F,W.expires=U,W.src=k.byteLength?K.createObjectURL(re):M}(w,t,C,I))});return{cancel:function(){f.cancel(),h()}}};function B(e,t,n){n[e]&&n[e].indexOf(t)!==-1||(n[e]=n[e]||[],n[e].push(t))}function Z(e,t,n){if(n&&n[e]){var u=n[e].indexOf(t);u!==-1&&n[e].splice(u,1)}}var X=function(e,t){t===void 0&&(t={}),le(this,t),this.type=e},ie=function(e){function t(n,u){u===void 0&&(u={}),e.call(this,"error",le({error:n},u))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(X),ue=function(){};ue.prototype.on=function(e,t){return this._listeners=this._listeners||{},B(e,t,this._listeners),this},ue.prototype.off=function(e,t){return Z(e,t,this._listeners),Z(e,t,this._oneTimeListeners),this},ue.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},B(e,t,this._oneTimeListeners),this},ue.prototype.fire=function(e,t){typeof e=="string"&&(e=new X(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;for(var u=0,h=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];u<h.length;u+=1)h[u].call(this,e);for(var f=0,y=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];f<y.length;f+=1){var w=y[f];Z(n,w,this._oneTimeListeners),w.call(this,e)}var C=this._eventedParent;C&&(le(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(e))}else e instanceof ie&&console.error(e.error);return this},ue.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ue.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var j={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Y=function(e,t,n,u){this.message=(e?e+": ":"")+n,u&&(this.identifier=u),t!=null&&t.__line__&&(this.line=t.__line__)};function me(e){var t=e.value;return t?[new Y(e.key,t,"constants have been deprecated as of v8")]:[]}function Le(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var u=0,h=t;u<h.length;u+=1){var f=h[u];for(var y in f)e[y]=f[y]}return e}function Re(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ee(e){if(Array.isArray(e))return e.map(Ee);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=Ee(e[n]);return t}return Re(e)}var Fe=function(e){function t(n,u){e.call(this,u),this.message=u,this.key=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),st=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var n=0,u=t;n<u.length;n+=1){var h=u[n];this.bindings[h[0]]=h[1]}};st.prototype.concat=function(e){return new st(this,e)},st.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},st.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var nt={kind:"null"},Te={kind:"number"},Ye={kind:"string"},We={kind:"boolean"},Xe={kind:"color"},jt={kind:"object"},Je={kind:"value"},tr={kind:"collator"},Cr={kind:"formatted"},Mt={kind:"resolvedImage"};function lr(e,t){return{kind:"array",itemType:e,N:t}}function or(e){if(e.kind==="array"){var t=or(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var On=[nt,Te,Ye,We,Xe,Cr,jt,lr(Je),Mt];function dr(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!dr(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var n=0,u=On;n<u.length;n+=1)if(!dr(u[n],t))return null}}return"Expected "+or(e)+" but found "+or(t)+" instead."}function Qr(e,t){return t.some(function(n){return n.kind===e.kind})}function xr(e,t){return t.some(function(n){return n==="null"?e===null:n==="array"?Array.isArray(e):n==="object"?e&&!Array.isArray(e)&&typeof e=="object":n===typeof e})}var Pt=L(function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(w){return(w=Math.round(w))<0?0:w>255?255:w}function h(w){return u(w[w.length-1]==="%"?parseFloat(w)/100*255:parseInt(w))}function f(w){return(C=w[w.length-1]==="%"?parseFloat(w)/100:parseFloat(w))<0?0:C>1?1:C;var C}function y(w,C,I){return I<0?I+=1:I>1&&(I-=1),6*I<1?w+(C-w)*I*6:2*I<1?C:3*I<2?w+(C-w)*(2/3-I)*6:w}try{t.parseCSSColor=function(w){var C,I=w.replace(/ /g,"").toLowerCase();if(I in n)return n[I].slice();if(I[0]==="#")return I.length===4?(C=parseInt(I.substr(1),16))>=0&&C<=4095?[(3840&C)>>4|(3840&C)>>8,240&C|(240&C)>>4,15&C|(15&C)<<4,1]:null:I.length===7&&(C=parseInt(I.substr(1),16))>=0&&C<=16777215?[(16711680&C)>>16,(65280&C)>>8,255&C,1]:null;var k=I.indexOf("("),A=I.indexOf(")");if(k!==-1&&A+1===I.length){var F=I.substr(0,k),U=I.substr(k+1,A-(k+1)).split(","),W=1;switch(F){case"rgba":if(U.length!==4)return null;W=f(U.pop());case"rgb":return U.length!==3?null:[h(U[0]),h(U[1]),h(U[2]),W];case"hsla":if(U.length!==4)return null;W=f(U.pop());case"hsl":if(U.length!==3)return null;var K=(parseFloat(U[0])%360+360)%360/360,re=f(U[1]),Q=f(U[2]),ce=Q<=.5?Q*(re+1):Q+re-Q*re,ge=2*Q-ce;return[u(255*y(ge,ce,K+1/3)),u(255*y(ge,ce,K)),u(255*y(ge,ce,K-1/3)),W];default:return null}}return null}}catch{}}).parseCSSColor,cr=function(e,t,n,u){u===void 0&&(u=1),this.r=e,this.g=t,this.b=n,this.a=u};cr.parse=function(e){if(e){if(e instanceof cr)return e;if(typeof e=="string"){var t=Pt(e);if(t)return new cr(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},cr.prototype.toString=function(){var e=this.toArray(),t=e[1],n=e[2],u=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(n)+","+u+")"},cr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);var oi=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};oi.prototype.compare=function(e,t){return this.collator.compare(e,t)},oi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Vi=function(e,t,n,u,h){this.text=e,this.image=t,this.scale=n,this.fontStack=u,this.textColor=h},Br=function(e){this.sections=e};Br.fromString=function(e){return new Br([new Vi(e,null,null,null,null)])},Br.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Br.factory=function(e){return e instanceof Br?e:Br.fromString(e)},Br.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Br.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var u=n[t];if(u.image)e.push(["image",u.image.name]);else{e.push(u.text);var h={};u.fontStack&&(h["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(h["font-scale"]=u.scale),u.textColor&&(h["text-color"]=["rgba"].concat(u.textColor.toArray())),e.push(h)}}return e};var Gn=function(e){this.name=e.name,this.available=e.available};function jo(e,t,n,u){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:"Invalid rgba value ["+[e,t,n,u].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof u=="number"?[e,t,n,u]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function so(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof cr||e instanceof oi||e instanceof Br||e instanceof Gn)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!so(n[t]))return!1;return!0}if(typeof e=="object"){for(var u in e)if(!so(e[u]))return!1;return!0}return!1}function en(e){if(e===null)return nt;if(typeof e=="string")return Ye;if(typeof e=="boolean")return We;if(typeof e=="number")return Te;if(e instanceof cr)return Xe;if(e instanceof oi)return tr;if(e instanceof Br)return Cr;if(e instanceof Gn)return Mt;if(Array.isArray(e)){for(var t,n=e.length,u=0,h=e;u<h.length;u+=1){var f=en(h[u]);if(t){if(t===f)continue;t=Je;break}t=f}return lr(t||Je,n)}return jt}function _s(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof cr||e instanceof Br||e instanceof Gn?e.toString():JSON.stringify(e)}Gn.prototype.toString=function(){return this.name},Gn.fromString=function(e){return e?new Gn({name:e,available:!1}):null},Gn.prototype.serialize=function(){return["image",this.name]};var ti=function(e,t){this.type=e,this.value=t};ti.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!so(e[1]))return t.error("invalid value");var n=e[1],u=en(n),h=t.expectedType;return u.kind!=="array"||u.N!==0||!h||h.kind!=="array"||typeof h.N=="number"&&h.N!==0||(u=h),new ti(u,n)},ti.prototype.evaluate=function(){return this.value},ti.prototype.eachChild=function(){},ti.prototype.outputDefined=function(){return!0},ti.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof cr?["rgba"].concat(this.value.toArray()):this.value instanceof Br?this.value.serialize():this.value};var kn=function(e){this.name="ExpressionEvaluationError",this.message=e};kn.prototype.toJSON=function(){return this.message};var Si={string:Ye,number:Te,boolean:We,object:jt},Nr=function(e,t){this.type=e,this.args=t};Nr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,u=1,h=e[0];if(h==="array"){var f,y;if(e.length>2){var w=e[1];if(typeof w!="string"||!(w in Si)||w==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);f=Si[w],u++}else f=Je;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);y=e[2],u++}n=lr(f,y)}else n=Si[h];for(var C=[];u<e.length;u++){var I=t.parse(e[u],u,Je);if(!I)return null;C.push(I)}return new Nr(n,C)},Nr.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!dr(this.type,en(n)))return n;if(t===this.args.length-1)throw new kn("Expected value to be of type "+or(this.type)+", but found "+or(en(n))+" instead.")}return null},Nr.prototype.eachChild=function(e){this.args.forEach(e)},Nr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Nr.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){t.push(n.kind);var u=e.N;(typeof u=="number"||this.args.length>1)&&t.push(u)}}return t.concat(this.args.map(function(h){return h.serialize()}))};var uo=function(e){this.type=Cr,this.sections=e};uo.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&typeof n=="object")return t.error("First argument must be an image or text section.");for(var u=[],h=!1,f=1;f<=e.length-1;++f){var y=e[f];if(h&&typeof y=="object"&&!Array.isArray(y)){h=!1;var w=null;if(y["font-scale"]&&!(w=t.parse(y["font-scale"],1,Te)))return null;var C=null;if(y["text-font"]&&!(C=t.parse(y["text-font"],1,lr(Ye))))return null;var I=null;if(y["text-color"]&&!(I=t.parse(y["text-color"],1,Xe)))return null;var k=u[u.length-1];k.scale=w,k.font=C,k.textColor=I}else{var A=t.parse(e[f],1,Je);if(!A)return null;var F=A.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");h=!0,u.push({content:A,scale:null,font:null,textColor:null})}}return new uo(u)},uo.prototype.evaluate=function(e){return new Br(this.sections.map(function(t){var n=t.content.evaluate(e);return en(n)===Mt?new Vi("",n,null,null,null):new Vi(_s(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},uo.prototype.eachChild=function(e){for(var t=0,n=this.sections;t<n.length;t+=1){var u=n[t];e(u.content),u.scale&&e(u.scale),u.font&&e(u.font),u.textColor&&e(u.textColor)}},uo.prototype.outputDefined=function(){return!1},uo.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var u=n[t];e.push(u.content.serialize());var h={};u.scale&&(h["font-scale"]=u.scale.serialize()),u.font&&(h["text-font"]=u.font.serialize()),u.textColor&&(h["text-color"]=u.textColor.serialize()),e.push(h)}return e};var Ei=function(e){this.type=Mt,this.input=e};Ei.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Ye);return n?new Ei(n):t.error("No image name provided.")},Ei.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=Gn.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n},Ei.prototype.eachChild=function(e){e(this.input)},Ei.prototype.outputDefined=function(){return!1},Ei.prototype.serialize=function(){return["image",this.input.serialize()]};var yl={"to-boolean":We,"to-color":Xe,"to-number":Te,"to-string":Ye},Ci=function(e,t){this.type=e,this.args=t};Ci.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var u=yl[n],h=[],f=1;f<e.length;f++){var y=t.parse(e[f],f,Je);if(!y)return null;h.push(y)}return new Ci(u,h)},Ci.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var t,n,u=0,h=this.args;u<h.length;u+=1){if(n=null,(t=h[u].evaluate(e))instanceof cr)return t;if(typeof t=="string"){var f=e.parseColor(t);if(f)return f}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":jo(t[0],t[1],t[2],t[3])))return new cr(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new kn(n||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var y=null,w=0,C=this.args;w<C.length;w+=1){if((y=C[w].evaluate(e))===null)return 0;var I=Number(y);if(!isNaN(I))return I}throw new kn("Could not convert "+JSON.stringify(y)+" to number.")}return this.type.kind==="formatted"?Br.fromString(_s(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Gn.fromString(_s(this.args[0].evaluate(e))):_s(this.args[0].evaluate(e))},Ci.prototype.eachChild=function(e){this.args.forEach(e)},Ci.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ci.prototype.serialize=function(){if(this.type.kind==="formatted")return new uo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ei(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var b=["Unknown","Point","LineString","Polygon"],T=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};T.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},T.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?b[this.feature.type]:this.feature.type:null},T.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},T.prototype.canonicalID=function(){return this.canonical},T.prototype.properties=function(){return this.feature&&this.feature.properties||{}},T.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=cr.parse(e)),t};var R=function(e,t,n,u){this.name=e,this.type=t,this._evaluate=n,this.args=u};R.prototype.evaluate=function(e){return this._evaluate(e,this.args)},R.prototype.eachChild=function(e){this.args.forEach(e)},R.prototype.outputDefined=function(){return!1},R.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},R.parse=function(e,t){var n,u=e[0],h=R.definitions[u];if(!h)return t.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0);for(var f=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,w=y.filter(function(wt){var tt=wt[0];return!Array.isArray(tt)||tt.length===e.length-1}),C=null,I=0,k=w;I<k.length;I+=1){var A=k[I],F=A[0],U=A[1];C=new ar(t.registry,t.path,null,t.scope);for(var W=[],K=!1,re=1;re<e.length;re++){var Q=e[re],ce=Array.isArray(F)?F[re-1]:F.type,ge=C.parse(Q,1+W.length,ce);if(!ge){K=!0;break}W.push(ge)}if(!K)if(Array.isArray(F)&&F.length!==W.length)C.error("Expected "+F.length+" arguments, but found "+W.length+" instead.");else{for(var xe=0;xe<W.length;xe++){var Se=Array.isArray(F)?F[xe]:F.type,Ae=W[xe];C.concat(xe+1).checkSubtype(Se,Ae.type)}if(C.errors.length===0)return new R(u,f,U,W)}}if(w.length===1)(n=t.errors).push.apply(n,C.errors);else{for(var Be=(w.length?w:y).map(function(wt){var tt;return tt=wt[0],Array.isArray(tt)?"("+tt.map(or).join(", ")+")":"("+or(tt.type)+"...)"}).join(" | "),Ge=[],vt=1;vt<e.length;vt++){var et=t.parse(e[vt],1+Ge.length);if(!et)return null;Ge.push(or(et.type))}t.error("Expected arguments of type "+Be+", but found ("+Ge.join(", ")+") instead.")}return null},R.register=function(e,t){for(var n in R.definitions=t,t)e[n]=R};var oe=function(e,t,n){this.type=tr,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};function ve(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function fe(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function _e(e,t){var n=(180+e[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,h=Math.pow(2,t.z);return[Math.round(n*h*8192),Math.round(u*h*8192)]}function Ve(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function Ue(e,t){for(var n,u,h,f,y,w,C,I=!1,k=0,A=t.length;k<A;k++)for(var F=t[k],U=0,W=F.length;U<W-1;U++){if((f=(n=e)[0]-(u=F[U])[0])*(C=n[1]-(h=F[U+1])[1])-(w=n[0]-h[0])*(y=n[1]-u[1])==0&&f*w<=0&&y*C<=0)return!1;Ve(e,F[U],F[U+1])&&(I=!I)}return I}function ct(e,t){for(var n=0;n<t.length;n++)if(Ue(e,t[n]))return!0;return!1}function be(e,t,n,u){var h=u[0]-n[0],f=u[1]-n[1],y=(e[0]-n[0])*f-h*(e[1]-n[1]),w=(t[0]-n[0])*f-h*(t[1]-n[1]);return y>0&&w<0||y<0&&w>0}function it(e,t,n){for(var u=0,h=n;u<h.length;u+=1)for(var f=h[u],y=0;y<f.length-1;++y)if((A=[(k=f[y+1])[0]-(I=f[y])[0],k[1]-I[1]])[0]*(F=[(C=t)[0]-(w=e)[0],C[1]-w[1]])[1]-A[1]*F[0]!=0&&be(w,C,I,k)&&be(I,k,w,C))return!0;var w,C,I,k,A,F;return!1}function ht(e,t){for(var n=0;n<e.length;++n)if(!Ue(e[n],t))return!1;for(var u=0;u<e.length-1;++u)if(it(e[u],e[u+1],t))return!1;return!0}function zt(e,t){for(var n=0;n<t.length;n++)if(ht(e,t[n]))return!0;return!1}function Rt(e,t,n){for(var u=[],h=0;h<e.length;h++){for(var f=[],y=0;y<e[h].length;y++){var w=_e(e[h][y],n);ve(t,w),f.push(w)}u.push(f)}return u}function nn(e,t,n){for(var u=[],h=0;h<e.length;h++){var f=Rt(e[h],t,n);u.push(f)}return u}function ze(e,t,n,u){if(e[0]<n[0]||e[0]>n[2]){var h=.5*u,f=e[0]-n[0]>h?-u:n[0]-e[0]>h?u:0;f===0&&(f=e[0]-n[2]>h?-u:n[2]-e[0]>h?u:0),e[0]+=f}ve(t,e)}function mt(e,t,n,u){for(var h=8192*Math.pow(2,u.z),f=[8192*u.x,8192*u.y],y=[],w=0,C=e;w<C.length;w+=1)for(var I=0,k=C[w];I<k.length;I+=1){var A=k[I],F=[A.x+f[0],A.y+f[1]];ze(F,t,n,h),y.push(F)}return y}function Sr(e,t,n,u){for(var h,f=8192*Math.pow(2,u.z),y=[8192*u.x,8192*u.y],w=[],C=0,I=e;C<I.length;C+=1){for(var k=[],A=0,F=I[C];A<F.length;A+=1){var U=F[A],W=[U.x+y[0],U.y+y[1]];ve(t,W),k.push(W)}w.push(k)}if(t[2]-t[0]<=f/2){(h=t)[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var K=0,re=w;K<re.length;K+=1)for(var Q=0,ce=re[K];Q<ce.length;Q+=1)ze(ce[Q],t,n,f)}return w}oe.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var n=e[1];if(typeof n!="object"||Array.isArray(n))return t.error("Collator options argument must be an object.");var u=t.parse(n["case-sensitive"]!==void 0&&n["case-sensitive"],1,We);if(!u)return null;var h=t.parse(n["diacritic-sensitive"]!==void 0&&n["diacritic-sensitive"],1,We);if(!h)return null;var f=null;return n.locale&&!(f=t.parse(n.locale,1,Ye))?null:new oe(u,h,f)},oe.prototype.evaluate=function(e){return new oi(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},oe.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},oe.prototype.outputDefined=function(){return!1},oe.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var rr=function(e,t){this.type=We,this.geojson=e,this.geometries=t};function kr(e){if(e instanceof R&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof rr)return!1;var t=!0;return e.eachChild(function(n){t&&!kr(n)&&(t=!1)}),t}function St(e){if(e instanceof R&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(n){t&&!St(n)&&(t=!1)}),t}function Ti(e,t){if(e instanceof R&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(u){n&&!Ti(u,t)&&(n=!1)}),n}rr.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(so(e[1])){var n=e[1];if(n.type==="FeatureCollection")for(var u=0;u<n.features.length;++u){var h=n.features[u].geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new rr(n,n.features[u].geometry)}else if(n.type==="Feature"){var f=n.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new rr(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new rr(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},rr.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,n){var u=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],f=t.canonicalID();if(n.type==="Polygon"){var y=Rt(n.coordinates,h,f),w=mt(t.geometry(),u,h,f);if(!fe(u,h))return!1;for(var C=0,I=w;C<I.length;C+=1)if(!Ue(I[C],y))return!1}if(n.type==="MultiPolygon"){var k=nn(n.coordinates,h,f),A=mt(t.geometry(),u,h,f);if(!fe(u,h))return!1;for(var F=0,U=A;F<U.length;F+=1)if(!ct(U[F],k))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,n){var u=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],f=t.canonicalID();if(n.type==="Polygon"){var y=Rt(n.coordinates,h,f),w=Sr(t.geometry(),u,h,f);if(!fe(u,h))return!1;for(var C=0,I=w;C<I.length;C+=1)if(!ht(I[C],y))return!1}if(n.type==="MultiPolygon"){var k=nn(n.coordinates,h,f),A=Sr(t.geometry(),u,h,f);if(!fe(u,h))return!1;for(var F=0,U=A;F<U.length;F+=1)if(!zt(U[F],k))return!1}return!0}(e,this.geometries)}return!1},rr.prototype.eachChild=function(){},rr.prototype.outputDefined=function(){return!0},rr.prototype.serialize=function(){return["within",this.geojson]};var ai=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};ai.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new ai(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},ai.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},ai.prototype.eachChild=function(){},ai.prototype.outputDefined=function(){return!1},ai.prototype.serialize=function(){return["var",this.name]};var ar=function(e,t,n,u,h){t===void 0&&(t=[]),u===void 0&&(u=new st),h===void 0&&(h=[]),this.registry=e,this.path=t,this.key=t.map(function(f){return"["+f+"]"}).join(""),this.scope=u,this.errors=h,this.expectedType=n};function fi(e,t){for(var n,u=e.length-1,h=0,f=u,y=0;h<=f;)if((n=e[y=Math.floor((h+f)/2)])<=t){if(y===u||t<e[y+1])return y;h=y+1}else{if(!(n>t))throw new kn("Input is not a number.");f=y-1}return 0}ar.prototype.parse=function(e,t,n,u,h){return h===void 0&&(h={}),t?this.concat(t,n,u)._parse(e,h):this._parse(e,h)},ar.prototype._parse=function(e,t){function n(I,k,A){return A==="assert"?new Nr(k,[I]):A==="coerce"?new Ci(k,[I]):I}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var u=e[0];if(typeof u!="string")return this.error("Expression name must be a string, but found "+typeof u+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=this.registry[u];if(h){var f=h.parse(e,this);if(!f)return null;if(this.expectedType){var y=this.expectedType,w=f.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||w.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string"){if(this.checkSubtype(y,w))return null}else f=n(f,y,t.typeAnnotation||"coerce");else f=n(f,y,t.typeAnnotation||"assert")}if(!(f instanceof ti)&&f.type.kind!=="resolvedImage"&&function I(k){if(k instanceof ai)return I(k.boundExpression);if(k instanceof R&&k.name==="error"||k instanceof oe||k instanceof rr)return!1;var A=k instanceof Ci||k instanceof Nr,F=!0;return k.eachChild(function(U){F=A?F&&I(U):F&&U instanceof ti}),!!F&&kr(k)&&Ti(k,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(f)){var C=new T;try{f=new ti(f.type,f.evaluate(C))}catch(I){return this.error(I.message),null}}return f}return this.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},ar.prototype.concat=function(e,t,n){var u=typeof e=="number"?this.path.concat(e):this.path,h=n?this.scope.concat(n):this.scope;return new ar(this.registry,u,t||null,h,this.errors)},ar.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var u=""+this.key+t.map(function(h){return"["+h+"]"}).join("");this.errors.push(new Fe(u,e))},ar.prototype.checkSubtype=function(e,t){var n=dr(e,t);return n&&this.error(n),n};var jr=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var u=0,h=n;u<h.length;u+=1){var f=h[u],y=f[1];this.labels.push(f[0]),this.outputs.push(y)}};function tn(e,t,n){return e*(1-n)+t*n}jr.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var n=t.parse(e[1],1,Te);if(!n)return null;var u=[],h=null;t.expectedType&&t.expectedType.kind!=="value"&&(h=t.expectedType);for(var f=1;f<e.length;f+=2){var y=f===1?-1/0:e[f],w=e[f+1],C=f,I=f+1;if(typeof y!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(u.length&&u[u.length-1][0]>=y)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);var k=t.parse(w,I,h);if(!k)return null;h=h||k.type,u.push([y,k])}return new jr(h,n,u)},jr.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return n[0].evaluate(e);var h=t.length;return u>=t[h-1]?n[h-1].evaluate(e):n[fi(t,u)].evaluate(e)},jr.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},jr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},jr.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Ca=Object.freeze({__proto__:null,number:tn,color:function(e,t,n){return new cr(tn(e.r,t.r,n),tn(e.g,t.g,n),tn(e.b,t.b,n),tn(e.a,t.a,n))},array:function(e,t,n){return e.map(function(u,h){return tn(u,t[h],n)})}}),lo=6/29*3*(6/29),vl=Math.PI/180,gl=180/Math.PI;function Mu(e){return e>.008856451679035631?Math.pow(e,1/3):e/lo+4/29}function Ks(e){return e>6/29?e*e*e:lo*(e-4/29)}function Xa(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Hs(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function zu(e){var t=Hs(e.r),n=Hs(e.g),u=Hs(e.b),h=Mu((.4124564*t+.3575761*n+.1804375*u)/.95047),f=Mu((.2126729*t+.7151522*n+.072175*u)/1);return{l:116*f-16,a:500*(h-f),b:200*(f-Mu((.0193339*t+.119192*n+.9503041*u)/1.08883)),alpha:e.a}}function _l(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,u=isNaN(e.b)?t:t-e.b/200;return t=1*Ks(t),n=.95047*Ks(n),u=1.08883*Ks(u),new cr(Xa(3.2404542*n-1.5371385*t-.4985314*u),Xa(-.969266*n+1.8760108*t+.041556*u),Xa(.0556434*n-.2040259*t+1.0572252*u),e.alpha)}function Ta(e,t,n){var u=t-e;return e+n*(u>180||u<-180?u-360*Math.round(u/360):u)}var Ka={forward:zu,reverse:_l,interpolate:function(e,t,n){return{l:tn(e.l,t.l,n),a:tn(e.a,t.a,n),b:tn(e.b,t.b,n),alpha:tn(e.alpha,t.alpha,n)}}},xs={forward:function(e){var t=zu(e),n=t.l,u=t.a,h=t.b,f=Math.atan2(h,u)*gl;return{h:f<0?f+360:f,c:Math.sqrt(u*u+h*h),l:n,alpha:e.a}},reverse:function(e){var t=e.h*vl,n=e.c;return _l({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Ta(e.h,t.h,n),c:tn(e.c,t.c,n),l:tn(e.l,t.l,n),alpha:tn(e.alpha,t.alpha,n)}}},xl=Object.freeze({__proto__:null,lab:Ka,hcl:xs}),bn=function(e,t,n,u,h){this.type=e,this.operator=t,this.interpolation=n,this.input=u,this.labels=[],this.outputs=[];for(var f=0,y=h;f<y.length;f+=1){var w=y[f],C=w[1];this.labels.push(w[0]),this.outputs.push(C)}};function Ia(e,t,n,u){var h=u-n,f=e-n;return h===0?0:t===1?f/h:(Math.pow(t,f)-1)/(Math.pow(t,h)-1)}bn.interpolationFactor=function(e,t,n,u){var h=0;if(e.name==="exponential")h=Ia(t,e.base,n,u);else if(e.name==="linear")h=Ia(t,1,n,u);else if(e.name==="cubic-bezier"){var f=e.controlPoints;h=new D(f[0],f[1],f[2],f[3]).solve(Ia(t,1,n,u))}return h},bn.parse=function(e,t){var n=e[0],u=e[1],h=e[2],f=e.slice(3);if(!Array.isArray(u)||u.length===0)return t.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){var y=u[1];if(typeof y!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:y}}else{if(u[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(u[0]),1,0);var w=u.slice(1);if(w.length!==4||w.some(function(re){return typeof re!="number"||re<0||re>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:w}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(h=t.parse(h,2,Te)))return null;var C=[],I=null;n==="interpolate-hcl"||n==="interpolate-lab"?I=Xe:t.expectedType&&t.expectedType.kind!=="value"&&(I=t.expectedType);for(var k=0;k<f.length;k+=2){var A=f[k],F=f[k+1],U=k+3,W=k+4;if(typeof A!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(C.length&&C[C.length-1][0]>=A)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);var K=t.parse(F,W,I);if(!K)return null;I=I||K.type,C.push([A,K])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new bn(I,n,u,h,C):t.error("Type "+or(I)+" is not interpolatable.")},bn.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return n[0].evaluate(e);var h=t.length;if(u>=t[h-1])return n[h-1].evaluate(e);var f=fi(t,u),y=bn.interpolationFactor(this.interpolation,u,t[f],t[f+1]),w=n[f].evaluate(e),C=n[f+1].evaluate(e);return this.operator==="interpolate"?Ca[this.type.kind.toLowerCase()](w,C,y):this.operator==="interpolate-hcl"?xs.reverse(xs.interpolate(xs.forward(w),xs.forward(C),y)):Ka.reverse(Ka.interpolate(Ka.forward(w),Ka.forward(C),y))},bn.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},bn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},bn.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var Eo=function(e,t){this.type=e,this.args=t};Eo.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,u=t.expectedType;u&&u.kind!=="value"&&(n=u);for(var h=[],f=0,y=e.slice(1);f<y.length;f+=1){var w=t.parse(y[f],1+h.length,n,void 0,{typeAnnotation:"omit"});if(!w)return null;n=n||w.type,h.push(w)}var C=u&&h.some(function(I){return dr(u,I.type)});return new Eo(C?Je:n,h)},Eo.prototype.evaluate=function(e){for(var t,n=null,u=0,h=0,f=this.args;h<f.length&&(u++,(n=f[h].evaluate(e))&&n instanceof Gn&&!n.available&&(t||(t=n.name),n=null,u===this.args.length&&(n=t)),n===null);h+=1);return n},Eo.prototype.eachChild=function(e){this.args.forEach(e)},Eo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Eo.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Co=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Co.prototype.evaluate=function(e){return this.result.evaluate(e)},Co.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},Co.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],u=1;u<e.length-1;u+=2){var h=e[u];if(typeof h!="string")return t.error("Expected string, but found "+typeof h+" instead.",u);if(/[^a-zA-Z0-9_]/.test(h))return t.error("Variable names must contain only alphanumeric characters or '_'.",u);var f=t.parse(e[u+1],u+1);if(!f)return null;n.push([h,f])}var y=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return y?new Co(n,y):null},Co.prototype.outputDefined=function(){return this.result.outputDefined()},Co.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var u=n[t];e.push(u[0],u[1].serialize())}return e.push(this.result.serialize()),e};var Vo=function(e,t,n){this.type=e,this.index=t,this.input=n};Vo.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Te),u=t.parse(e[2],2,lr(t.expectedType||Je));return n&&u?new Vo(u.type.itemType,n,u):null},Vo.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new kn("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new kn("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new kn("Array index must be an integer, but found "+t+" instead.");return n[t]},Vo.prototype.eachChild=function(e){e(this.index),e(this.input)},Vo.prototype.outputDefined=function(){return!1},Vo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var co=function(e,t){this.type=We,this.needle=e,this.haystack=t};co.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Je),u=t.parse(e[2],2,Je);return n&&u?Qr(n.type,[We,Ye,Te,nt,Je])?new co(n,u):t.error("Expected first argument to be of type boolean, string, number or null, but found "+or(n.type)+" instead"):null},co.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!xr(t,["boolean","string","number","null"]))throw new kn("Expected first argument to be of type boolean, string, number or null, but found "+or(en(t))+" instead.");if(!xr(n,["string","array"]))throw new kn("Expected second argument to be of type array or string, but found "+or(en(n))+" instead.");return n.indexOf(t)>=0},co.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},co.prototype.outputDefined=function(){return!0},co.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ra=function(e,t,n){this.type=Te,this.needle=e,this.haystack=t,this.fromIndex=n};ra.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Je),u=t.parse(e[2],2,Je);if(!n||!u)return null;if(!Qr(n.type,[We,Ye,Te,nt,Je]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+or(n.type)+" instead");if(e.length===4){var h=t.parse(e[3],3,Te);return h?new ra(n,u,h):null}return new ra(n,u)},ra.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!xr(t,["boolean","string","number","null"]))throw new kn("Expected first argument to be of type boolean, string, number or null, but found "+or(en(t))+" instead.");if(!xr(n,["string","array"]))throw new kn("Expected second argument to be of type array or string, but found "+or(en(n))+" instead.");if(this.fromIndex){var u=this.fromIndex.evaluate(e);return n.indexOf(t,u)}return n.indexOf(t)},ra.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},ra.prototype.outputDefined=function(){return!1},ra.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Pa=function(e,t,n,u,h,f){this.inputType=e,this.type=t,this.input=n,this.cases=u,this.outputs=h,this.otherwise=f};Pa.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,u;t.expectedType&&t.expectedType.kind!=="value"&&(u=t.expectedType);for(var h={},f=[],y=2;y<e.length-1;y+=2){var w=e[y],C=e[y+1];Array.isArray(w)||(w=[w]);var I=t.concat(y);if(w.length===0)return I.error("Expected at least one branch label.");for(var k=0,A=w;k<A.length;k+=1){var F=A[k];if(typeof F!="number"&&typeof F!="string")return I.error("Branch labels must be numbers or strings.");if(typeof F=="number"&&Math.abs(F)>Number.MAX_SAFE_INTEGER)return I.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof F=="number"&&Math.floor(F)!==F)return I.error("Numeric branch labels must be integer values.");if(n){if(I.checkSubtype(n,en(F)))return null}else n=en(F);if(h[String(F)]!==void 0)return I.error("Branch labels must be unique.");h[String(F)]=f.length}var U=t.parse(C,y,u);if(!U)return null;u=u||U.type,f.push(U)}var W=t.parse(e[1],1,Je);if(!W)return null;var K=t.parse(e[e.length-1],e.length-1,u);return K?W.type.kind!=="value"&&t.concat(1).checkSubtype(n,W.type)?null:new Pa(n,u,W,h,f,K):null},Pa.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(en(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Pa.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Pa.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Pa.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],u={},h=0,f=Object.keys(this.cases).sort();h<f.length;h+=1){var y=f[h];(A=u[this.cases[y]])===void 0?(u[this.cases[y]]=n.length,n.push([this.cases[y],[y]])):n[A][1].push(y)}for(var w=function(U){return e.inputType.kind==="number"?Number(U):U},C=0,I=n;C<I.length;C+=1){var k=I[C],A=k[0],F=k[1];t.push(F.length===1?w(F[0]):F.map(w)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var ka=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};ka.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&t.expectedType.kind!=="value"&&(n=t.expectedType);for(var u=[],h=1;h<e.length-1;h+=2){var f=t.parse(e[h],h,We);if(!f)return null;var y=t.parse(e[h+1],h+1,n);if(!y)return null;u.push([f,y]),n=n||y.type}var w=t.parse(e[e.length-1],e.length-1,n);return w?new ka(n,u,w):null},ka.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var u=n[t],h=u[1];if(u[0].evaluate(e))return h.evaluate(e)}return this.otherwise.evaluate(e)},ka.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var u=n[t],h=u[1];e(u[0]),e(h)}e(this.otherwise)},ka.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},ka.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var na=function(e,t,n,u){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=u};function wl(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Lu(e,t,n,u){return u.compare(t,n)===0}function wr(e,t,n){var u=e!=="=="&&e!=="!=";return function(){function h(f,y,w){this.type=We,this.lhs=f,this.rhs=y,this.collator=w,this.hasUntypedArgument=f.type.kind==="value"||y.type.kind==="value"}return h.parse=function(f,y){if(f.length!==3&&f.length!==4)return y.error("Expected two or three arguments.");var w=f[0],C=y.parse(f[1],1,Je);if(!C)return null;if(!wl(w,C.type))return y.concat(1).error('"'+w+`" comparisons are not supported for type '`+or(C.type)+"'.");var I=y.parse(f[2],2,Je);if(!I)return null;if(!wl(w,I.type))return y.concat(2).error('"'+w+`" comparisons are not supported for type '`+or(I.type)+"'.");if(C.type.kind!==I.type.kind&&C.type.kind!=="value"&&I.type.kind!=="value")return y.error("Cannot compare types '"+or(C.type)+"' and '"+or(I.type)+"'.");u&&(C.type.kind==="value"&&I.type.kind!=="value"?C=new Nr(I.type,[C]):C.type.kind!=="value"&&I.type.kind==="value"&&(I=new Nr(C.type,[I])));var k=null;if(f.length===4){if(C.type.kind!=="string"&&I.type.kind!=="string"&&C.type.kind!=="value"&&I.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(!(k=y.parse(f[3],3,tr)))return null}return new h(C,I,k)},h.prototype.evaluate=function(f){var y=this.lhs.evaluate(f),w=this.rhs.evaluate(f);if(u&&this.hasUntypedArgument){var C=en(y),I=en(w);if(C.kind!==I.kind||C.kind!=="string"&&C.kind!=="number")throw new kn('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+C.kind+", "+I.kind+") instead.")}if(this.collator&&!u&&this.hasUntypedArgument){var k=en(y),A=en(w);if(k.kind!=="string"||A.kind!=="string")return t(f,y,w)}return this.collator?n(f,y,w,this.collator.evaluate(f)):t(f,y,w)},h.prototype.eachChild=function(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)},h.prototype.outputDefined=function(){return!0},h.prototype.serialize=function(){var f=[e];return this.eachChild(function(y){f.push(y.serialize())}),f},h}()}na.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Je),u=t.parse(e[2],2,Te);if(!n||!u)return null;if(!Qr(n.type,[lr(Je),Ye,Je]))return t.error("Expected first argument to be of type array or string, but found "+or(n.type)+" instead");if(e.length===4){var h=t.parse(e[3],3,Te);return h?new na(n.type,n,u,h):null}return new na(n.type,n,u)},na.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!xr(t,["string","array"]))throw new kn("Expected first argument to be of type array or string, but found "+or(en(t))+" instead.");if(this.endIndex){var u=this.endIndex.evaluate(e);return t.slice(n,u)}return t.slice(n)},na.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},na.prototype.outputDefined=function(){return!1},na.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Aa=wr("==",function(e,t,n){return t===n},Lu),qi=wr("!=",function(e,t,n){return t!==n},function(e,t,n,u){return!Lu(0,t,n,u)}),ia=wr("<",function(e,t,n){return t<n},function(e,t,n,u){return u.compare(t,n)<0}),ws=wr(">",function(e,t,n){return t>n},function(e,t,n,u){return u.compare(t,n)>0}),qo=wr("<=",function(e,t,n){return t<=n},function(e,t,n,u){return u.compare(t,n)<=0}),bl=wr(">=",function(e,t,n){return t>=n},function(e,t,n,u){return u.compare(t,n)>=0}),To=function(e,t,n,u,h){this.type=Ye,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=u,this.maxFractionDigits=h};To.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Te);if(!n)return null;var u=e[2];if(typeof u!="object"||Array.isArray(u))return t.error("NumberFormat options argument must be an object.");var h=null;if(u.locale&&!(h=t.parse(u.locale,1,Ye)))return null;var f=null;if(u.currency&&!(f=t.parse(u.currency,1,Ye)))return null;var y=null;if(u["min-fraction-digits"]&&!(y=t.parse(u["min-fraction-digits"],1,Te)))return null;var w=null;return u["max-fraction-digits"]&&!(w=t.parse(u["max-fraction-digits"],1,Te))?null:new To(n,h,f,y,w)},To.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},To.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},To.prototype.outputDefined=function(){return!1},To.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Zi=function(e){this.type=Te,this.input=e};Zi.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+or(n.type)+" instead."):new Zi(n):null},Zi.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new kn("Expected value to be of type string or array, but found "+or(en(t))+" instead.")},Zi.prototype.eachChild=function(e){e(this.input)},Zi.prototype.outputDefined=function(){return!1},Zi.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var oa={"==":Aa,"!=":qi,">":ws,"<":ia,">=":bl,"<=":qo,array:Nr,at:Vo,boolean:Nr,case:ka,coalesce:Eo,collator:oe,format:uo,image:Ei,in:co,"index-of":ra,interpolate:bn,"interpolate-hcl":bn,"interpolate-lab":bn,length:Zi,let:Co,literal:ti,match:Pa,number:Nr,"number-format":To,object:Nr,slice:na,step:jr,string:Nr,"to-boolean":Ci,"to-color":Ci,"to-number":Ci,"to-string":Ci,var:ai,within:rr};function Du(e,t){var n=t[0],u=t[1],h=t[2],f=t[3];n=n.evaluate(e),u=u.evaluate(e),h=h.evaluate(e);var y=f?f.evaluate(e):1,w=jo(n,u,h,y);if(w)throw new kn(w);return new cr(n/255*y,u/255*y,h/255*y,y)}function Sl(e,t){return e in t}function Ou(e,t){var n=t[e];return n===void 0?null:n}function aa(e){return{type:e}}function Fu(e){return{result:"success",value:e}}function Io(e){return{result:"error",value:e}}function Gi(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function El(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Wi(e){return!!e.expression&&e.expression.interpolated}function Dr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Po(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Cl(e){return e}function Ha(e,t,n){return e!==void 0?e:t!==void 0?t:n!==void 0?n:void 0}function bs(e,t,n,u,h){return Ha(typeof n===h?u[n]:void 0,e.default,t.default)}function Ru(e,t,n){if(Dr(n)!=="number")return Ha(e.default,t.default);var u=e.stops.length;if(u===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[u-1][0])return e.stops[u-1][1];var h=fi(e.stops.map(function(f){return f[0]}),n);return e.stops[h][1]}function Bu(e,t,n){var u=e.base!==void 0?e.base:1;if(Dr(n)!=="number")return Ha(e.default,t.default);var h=e.stops.length;if(h===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[h-1][0])return e.stops[h-1][1];var f=fi(e.stops.map(function(A){return A[0]}),n),y=function(A,F,U,W){var K=W-U,re=A-U;return K===0?0:F===1?re/K:(Math.pow(F,re)-1)/(Math.pow(F,K)-1)}(n,u,e.stops[f][0],e.stops[f+1][0]),w=e.stops[f][1],C=e.stops[f+1][1],I=Ca[t.type]||Cl;if(e.colorSpace&&e.colorSpace!=="rgb"){var k=xl[e.colorSpace];I=function(A,F){return k.reverse(k.interpolate(k.forward(A),k.forward(F),y))}}return typeof w.evaluate=="function"?{evaluate:function(){for(var A=[],F=arguments.length;F--;)A[F]=arguments[F];var U=w.evaluate.apply(void 0,A),W=C.evaluate.apply(void 0,A);if(U!==void 0&&W!==void 0)return I(U,W,y)}}:I(w,C,y)}function Ss(e,t,n){return t.type==="color"?n=cr.parse(n):t.type==="formatted"?n=Br.fromString(n.toString()):t.type==="resolvedImage"?n=Gn.fromString(n.toString()):Dr(n)===t.type||t.type==="enum"&&t.values[n]||(n=void 0),Ha(n,e.default,t.default)}R.register(oa,{error:[{kind:"error"},[Ye],function(e,t){throw new kn(t[0].evaluate(e))}],typeof:[Ye,[Je],function(e,t){return or(en(t[0].evaluate(e)))}],"to-rgba":[lr(Te,4),[Xe],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Xe,[Te,Te,Te],Du],rgba:[Xe,[Te,Te,Te,Te],Du],has:{type:We,overloads:[[[Ye],function(e,t){return Sl(t[0].evaluate(e),e.properties())}],[[Ye,jt],function(e,t){var n=t[1];return Sl(t[0].evaluate(e),n.evaluate(e))}]]},get:{type:Je,overloads:[[[Ye],function(e,t){return Ou(t[0].evaluate(e),e.properties())}],[[Ye,jt],function(e,t){var n=t[1];return Ou(t[0].evaluate(e),n.evaluate(e))}]]},"feature-state":[Je,[Ye],function(e,t){return Ou(t[0].evaluate(e),e.featureState||{})}],properties:[jt,[],function(e){return e.properties()}],"geometry-type":[Ye,[],function(e){return e.geometryType()}],id:[Je,[],function(e){return e.id()}],zoom:[Te,[],function(e){return e.globals.zoom}],"heatmap-density":[Te,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Te,[],function(e){return e.globals.lineProgress||0}],accumulated:[Je,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Te,aa(Te),function(e,t){for(var n=0,u=0,h=t;u<h.length;u+=1)n+=h[u].evaluate(e);return n}],"*":[Te,aa(Te),function(e,t){for(var n=1,u=0,h=t;u<h.length;u+=1)n*=h[u].evaluate(e);return n}],"-":{type:Te,overloads:[[[Te,Te],function(e,t){var n=t[1];return t[0].evaluate(e)-n.evaluate(e)}],[[Te],function(e,t){return-t[0].evaluate(e)}]]},"/":[Te,[Te,Te],function(e,t){var n=t[1];return t[0].evaluate(e)/n.evaluate(e)}],"%":[Te,[Te,Te],function(e,t){var n=t[1];return t[0].evaluate(e)%n.evaluate(e)}],ln2:[Te,[],function(){return Math.LN2}],pi:[Te,[],function(){return Math.PI}],e:[Te,[],function(){return Math.E}],"^":[Te,[Te,Te],function(e,t){var n=t[1];return Math.pow(t[0].evaluate(e),n.evaluate(e))}],sqrt:[Te,[Te],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Te,[Te],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Te,[Te],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Te,[Te],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Te,[Te],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Te,[Te],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Te,[Te],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Te,[Te],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Te,[Te],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Te,[Te],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Te,aa(Te),function(e,t){return Math.min.apply(Math,t.map(function(n){return n.evaluate(e)}))}],max:[Te,aa(Te),function(e,t){return Math.max.apply(Math,t.map(function(n){return n.evaluate(e)}))}],abs:[Te,[Te],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Te,[Te],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Te,[Te],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Te,[Te],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[We,[Ye,Je],function(e,t){var n=t[0],u=t[1];return e.properties()[n.value]===u.value}],"filter-id-==":[We,[Je],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[We,[Ye],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[We,[Ye,Je],function(e,t){var n=t[0],u=t[1],h=e.properties()[n.value],f=u.value;return typeof h==typeof f&&h<f}],"filter-id-<":[We,[Je],function(e,t){var n=t[0],u=e.id(),h=n.value;return typeof u==typeof h&&u<h}],"filter->":[We,[Ye,Je],function(e,t){var n=t[0],u=t[1],h=e.properties()[n.value],f=u.value;return typeof h==typeof f&&h>f}],"filter-id->":[We,[Je],function(e,t){var n=t[0],u=e.id(),h=n.value;return typeof u==typeof h&&u>h}],"filter-<=":[We,[Ye,Je],function(e,t){var n=t[0],u=t[1],h=e.properties()[n.value],f=u.value;return typeof h==typeof f&&h<=f}],"filter-id-<=":[We,[Je],function(e,t){var n=t[0],u=e.id(),h=n.value;return typeof u==typeof h&&u<=h}],"filter->=":[We,[Ye,Je],function(e,t){var n=t[0],u=t[1],h=e.properties()[n.value],f=u.value;return typeof h==typeof f&&h>=f}],"filter-id->=":[We,[Je],function(e,t){var n=t[0],u=e.id(),h=n.value;return typeof u==typeof h&&u>=h}],"filter-has":[We,[Je],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[We,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[We,[lr(Ye)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[We,[lr(Je)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[We,[Ye,lr(Je)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[We,[Ye,lr(Je)],function(e,t){var n=t[0],u=t[1];return function(h,f,y,w){for(;y<=w;){var C=y+w>>1;if(f[C]===h)return!0;f[C]>h?w=C-1:y=C+1}return!1}(e.properties()[n.value],u.value,0,u.value.length-1)}],all:{type:We,overloads:[[[We,We],function(e,t){var n=t[1];return t[0].evaluate(e)&&n.evaluate(e)}],[aa(We),function(e,t){for(var n=0,u=t;n<u.length;n+=1)if(!u[n].evaluate(e))return!1;return!0}]]},any:{type:We,overloads:[[[We,We],function(e,t){var n=t[1];return t[0].evaluate(e)||n.evaluate(e)}],[aa(We),function(e,t){for(var n=0,u=t;n<u.length;n+=1)if(u[n].evaluate(e))return!0;return!1}]]},"!":[We,[We],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[We,[Ye],function(e,t){var n=e.globals&&e.globals.isSupportedScript;return!n||n(t[0].evaluate(e))}],upcase:[Ye,[Ye],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Ye,[Ye],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Ye,aa(Je),function(e,t){return t.map(function(n){return _s(n.evaluate(e))}).join("")}],"resolved-locale":[Ye,[tr],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Ma=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new T,this._defaultValue=t?function(n){return n.type==="color"&&Po(n.default)?new cr(0,0,0,0):n.type==="color"?cr.parse(n.default)||null:n.default===void 0?null:n.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function Zo(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in oa}function Es(e,t){var n=new ar(oa,[],t?function(h){var f={color:Xe,string:Ye,number:Te,enum:Ye,boolean:We,formatted:Cr,resolvedImage:Mt};return h.type==="array"?lr(f[h.value]||Je,h.length):f[h.type]}(t):void 0),u=n.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Fu(new Ma(u,t)):Io(n.errors)}Ma.prototype.evaluateWithoutErrorHandling=function(e,t,n,u,h,f){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=u,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=f,this.expression.evaluate(this._evaluator)},Ma.prototype.evaluate=function(e,t,n,u,h,f){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=u,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=f||null;try{var y=this.expression.evaluate(this._evaluator);if(y==null||typeof y=="number"&&y!=y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new kn("Expected value to be one of "+Object.keys(this._enumValues).map(function(w){return JSON.stringify(w)}).join(", ")+", but found "+JSON.stringify(y)+" instead.");return y}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console!="undefined"&&console.warn(w.message)),this._defaultValue}};var Cs=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!St(t.expression)};Cs.prototype.evaluateWithoutErrorHandling=function(e,t,n,u,h,f){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,u,h,f)},Cs.prototype.evaluate=function(e,t,n,u,h,f){return this._styleExpression.evaluate(e,t,n,u,h,f)};var de=function(e,t,n,u){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!St(t.expression),this.interpolationType=u};function ke(e,t){if((e=Es(e,t)).result==="error")return e;var n=e.value.expression,u=kr(n);if(!u&&!Gi(t))return Io([new Fe("","data expressions not supported")]);var h=Ti(n,["zoom"]);if(!h&&!El(t))return Io([new Fe("","zoom expressions not supported")]);var f=function y(w){var C=null;if(w instanceof Co)C=y(w.result);else if(w instanceof Eo)for(var I=0,k=w.args;I<k.length&&!(C=y(k[I]));I+=1);else(w instanceof jr||w instanceof bn)&&w.input instanceof R&&w.input.name==="zoom"&&(C=w);return C instanceof Fe||w.eachChild(function(A){var F=y(A);F instanceof Fe?C=F:!C&&F?C=new Fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&F&&C!==F&&(C=new Fe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}(n);return f||h?f instanceof Fe?Io([f]):f instanceof bn&&!Wi(t)?Io([new Fe("",'"interpolate" expressions cannot be used with this property')]):Fu(f?new de(u?"camera":"composite",e.value,f.labels,f instanceof bn?f.interpolation:void 0):new Cs(u?"constant":"source",e.value)):Io([new Fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}de.prototype.evaluateWithoutErrorHandling=function(e,t,n,u,h,f){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,u,h,f)},de.prototype.evaluate=function(e,t,n,u,h,f){return this._styleExpression.evaluate(e,t,n,u,h,f)},de.prototype.interpolationFactor=function(e,t,n){return this.interpolationType?bn.interpolationFactor(this.interpolationType,e,t,n):0};var Qe=function(e,t){this._parameters=e,this._specification=t,Le(this,function n(u,h){var f,y,w,C=h.type==="color",I=u.stops&&typeof u.stops[0][0]=="object",k=I||!(I||u.property!==void 0),A=u.type||(Wi(h)?"exponential":"interval");if(C&&((u=Le({},u)).stops&&(u.stops=u.stops.map(function(et){return[et[0],cr.parse(et[1])]})),u.default=cr.parse(u.default?u.default:h.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!xl[u.colorSpace])throw new Error("Unknown color space: "+u.colorSpace);if(A==="exponential")f=Bu;else if(A==="interval")f=Ru;else if(A==="categorical"){f=bs,y=Object.create(null);for(var F=0,U=u.stops;F<U.length;F+=1){var W=U[F];y[W[0]]=W[1]}w=typeof u.stops[0][0]}else{if(A!=="identity")throw new Error('Unknown function type "'+A+'"');f=Ss}if(I){for(var K={},re=[],Q=0;Q<u.stops.length;Q++){var ce=u.stops[Q],ge=ce[0].zoom;K[ge]===void 0&&(K[ge]={zoom:ge,type:u.type,property:u.property,default:u.default,stops:[]},re.push(ge)),K[ge].stops.push([ce[0].value,ce[1]])}for(var xe=[],Se=0,Ae=re;Se<Ae.length;Se+=1){var Be=Ae[Se];xe.push([K[Be].zoom,n(K[Be],h)])}var Ge={name:"linear"};return{kind:"composite",interpolationType:Ge,interpolationFactor:bn.interpolationFactor.bind(void 0,Ge),zoomStops:xe.map(function(et){return et[0]}),evaluate:function(et,wt){var tt=et.zoom;return Bu({stops:xe,base:u.base},h,tt).evaluate(tt,wt)}}}if(k){var vt=A==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:vt,interpolationFactor:bn.interpolationFactor.bind(void 0,vt),zoomStops:u.stops.map(function(et){return et[0]}),evaluate:function(et){return f(u,h,et.zoom,y,w)}}}return{kind:"source",evaluate:function(et,wt){var tt=wt&&wt.properties?wt.properties[u.property]:void 0;return tt===void 0?Ha(u.default,h.default):f(u,h,tt,y,w)}}}(this._parameters,this._specification))};function gt(e){var t=e.key,n=e.value,u=e.valueSpec||{},h=e.objectElementValidators||{},f=e.style,y=e.styleSpec,w=[],C=Dr(n);if(C!=="object")return[new Y(t,n,"object expected, "+C+" found")];for(var I in n){var k=I.split(".")[0],A=u[k]||u["*"],F=void 0;if(h[k])F=h[k];else if(u[k])F=qt;else if(h["*"])F=h["*"];else{if(!u["*"]){w.push(new Y(t,n[I],'unknown property "'+I+'"'));continue}F=qt}w=w.concat(F({key:(t&&t+".")+I,value:n[I],valueSpec:A,style:f,styleSpec:y,object:n,objectKey:I},n))}for(var U in u)h[U]||u[U].required&&u[U].default===void 0&&n[U]===void 0&&w.push(new Y(t,n,'missing required property "'+U+'"'));return w}function Gr(e){var t=e.value,n=e.valueSpec,u=e.style,h=e.styleSpec,f=e.key,y=e.arrayElementValidator||qt;if(Dr(t)!=="array")return[new Y(f,t,"array expected, "+Dr(t)+" found")];if(n.length&&t.length!==n.length)return[new Y(f,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new Y(f,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var w={type:n.value,values:n.values};h.$version<7&&(w.function=n.function),Dr(n.value)==="object"&&(w=n.value);for(var C=[],I=0;I<t.length;I++)C=C.concat(y({array:t,arrayIndex:I,value:t[I],valueSpec:w,style:u,styleSpec:h,key:f+"["+I+"]"}));return C}function pr(e){var t=e.key,n=e.value,u=e.valueSpec,h=Dr(n);return h==="number"&&n!=n&&(h="NaN"),h!=="number"?[new Y(t,n,"number expected, "+h+" found")]:"minimum"in u&&n<u.minimum?[new Y(t,n,n+" is less than the minimum value "+u.minimum)]:"maximum"in u&&n>u.maximum?[new Y(t,n,n+" is greater than the maximum value "+u.maximum)]:[]}function on(e){var t,n,u,h=e.valueSpec,f=Re(e.value.type),y={},w=f!=="categorical"&&e.value.property===void 0,C=!w,I=Dr(e.value.stops)==="array"&&Dr(e.value.stops[0])==="array"&&Dr(e.value.stops[0][0])==="object",k=gt({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(U){if(f==="identity")return[new Y(U.key,U.value,'identity function may not have a "stops" property')];var W=[],K=U.value;return W=W.concat(Gr({key:U.key,value:K,valueSpec:U.valueSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:A})),Dr(K)==="array"&&K.length===0&&W.push(new Y(U.key,K,"array must have at least one stop")),W},default:function(U){return qt({key:U.key,value:U.value,valueSpec:h,style:U.style,styleSpec:U.styleSpec})}}});return f==="identity"&&w&&k.push(new Y(e.key,e.value,'missing required property "property"')),f==="identity"||e.value.stops||k.push(new Y(e.key,e.value,'missing required property "stops"')),f==="exponential"&&e.valueSpec.expression&&!Wi(e.valueSpec)&&k.push(new Y(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(C&&!Gi(e.valueSpec)?k.push(new Y(e.key,e.value,"property functions not supported")):w&&!El(e.valueSpec)&&k.push(new Y(e.key,e.value,"zoom functions not supported"))),f!=="categorical"&&!I||e.value.property!==void 0||k.push(new Y(e.key,e.value,'"property" property is required')),k;function A(U){var W=[],K=U.value,re=U.key;if(Dr(K)!=="array")return[new Y(re,K,"array expected, "+Dr(K)+" found")];if(K.length!==2)return[new Y(re,K,"array length 2 expected, length "+K.length+" found")];if(I){if(Dr(K[0])!=="object")return[new Y(re,K,"object expected, "+Dr(K[0])+" found")];if(K[0].zoom===void 0)return[new Y(re,K,"object stop key must have zoom")];if(K[0].value===void 0)return[new Y(re,K,"object stop key must have value")];if(u&&u>Re(K[0].zoom))return[new Y(re,K[0].zoom,"stop zoom values must appear in ascending order")];Re(K[0].zoom)!==u&&(u=Re(K[0].zoom),n=void 0,y={}),W=W.concat(gt({key:re+"[0]",value:K[0],valueSpec:{zoom:{}},style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:pr,value:F}}))}else W=W.concat(F({key:re+"[0]",value:K[0],valueSpec:{},style:U.style,styleSpec:U.styleSpec},K));return Zo(Ee(K[1]))?W.concat([new Y(re+"[1]",K[1],"expressions are not allowed in function stops.")]):W.concat(qt({key:re+"[1]",value:K[1],valueSpec:h,style:U.style,styleSpec:U.styleSpec}))}function F(U,W){var K=Dr(U.value),re=Re(U.value),Q=U.value!==null?U.value:W;if(t){if(K!==t)return[new Y(U.key,Q,K+" stop domain type must match previous stop domain type "+t)]}else t=K;if(K!=="number"&&K!=="string"&&K!=="boolean")return[new Y(U.key,Q,"stop domain value must be a number, string, or boolean")];if(K!=="number"&&f!=="categorical"){var ce="number expected, "+K+" found";return Gi(h)&&f===void 0&&(ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Y(U.key,Q,ce)]}return f!=="categorical"||K!=="number"||isFinite(re)&&Math.floor(re)===re?f!=="categorical"&&K==="number"&&n!==void 0&&re<n?[new Y(U.key,Q,"stop domain values must appear in ascending order")]:(n=re,f==="categorical"&&re in y?[new Y(U.key,Q,"stop domain values must be unique")]:(y[re]=!0,[])):[new Y(U.key,Q,"integer expected, found "+re)]}}function Wr(e){var t=(e.expressionContext==="property"?ke:Es)(Ee(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(u){return new Y(""+e.key+u.key,e.value,u.message)});var n=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!n.outputDefined())return[new Y(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!St(n))return[new Y(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!St(n))return[new Y(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Ti(n,["zoom","feature-state"]))return[new Y(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!kr(n))return[new Y(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function si(e){var t=e.key,n=e.value,u=e.valueSpec,h=[];return Array.isArray(u.values)?u.values.indexOf(Re(n))===-1&&h.push(new Y(t,n,"expected one of ["+u.values.join(", ")+"], "+JSON.stringify(n)+" found")):Object.keys(u.values).indexOf(Re(n))===-1&&h.push(new Y(t,n,"expected one of ["+Object.keys(u.values).join(", ")+"], "+JSON.stringify(n)+" found")),h}function ln(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var u=n[t];if(!ln(u)&&typeof u!="boolean")return!1}return!0;default:return!0}}Qe.deserialize=function(e){return new Qe(e._parameters,e._specification)},Qe.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var mn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ii(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};ln(e)||(e=Fn(e));var t=Es(e,mn);if(t.result==="error")throw new Error(t.value.map(function(n){return n.key+": "+n.message}).join(", "));return{filter:function(n,u,h){return t.value.evaluate(n,u,{},h)},needGeometry:function n(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(var h=1;h<u.length;h++)if(n(u[h]))return!0;return!1}(e)}}function Go(e,t){return e<t?-1:e>t?1:0}function Fn(e){if(!e)return!0;var t,n=e[0];return e.length<=1?n!=="any":n==="=="?po(e[1],e[2],"=="):n==="!="?Wo(po(e[1],e[2],"==")):n==="<"||n===">"||n==="<="||n===">="?po(e[1],e[2],n):n==="any"?(t=e.slice(1),["any"].concat(t.map(Fn))):n==="all"?["all"].concat(e.slice(1).map(Fn)):n==="none"?["all"].concat(e.slice(1).map(Fn).map(Wo)):n==="in"?za(e[1],e.slice(2)):n==="!in"?Wo(za(e[1],e.slice(2))):n==="has"?Ts(e[1]):n==="!has"?Wo(Ts(e[1])):n!=="within"||e}function po(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function za(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(n){return typeof n!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Go)]]:["filter-in-small",e,["literal",t]]}}function Ts(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Wo(e){return["!",e]}function La(e){return ln(Ee(e.value))?Wr(Le({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(n){var u=n.value,h=n.key;if(Dr(u)!=="array")return[new Y(h,u,"array expected, "+Dr(u)+" found")];var f,y=n.styleSpec,w=[];if(u.length<1)return[new Y(h,u,"filter array must have at least 1 element")];switch(w=w.concat(si({key:h+"[0]",value:u[0],valueSpec:y.filter_operator,style:n.style,styleSpec:n.styleSpec})),Re(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Re(u[1])==="$type"&&w.push(new Y(h,u,'"$type" cannot be use with operator "'+u[0]+'"'));case"==":case"!=":u.length!==3&&w.push(new Y(h,u,'filter array for operator "'+u[0]+'" must have 3 elements'));case"in":case"!in":u.length>=2&&(f=Dr(u[1]))!=="string"&&w.push(new Y(h+"[1]",u[1],"string expected, "+f+" found"));for(var C=2;C<u.length;C++)f=Dr(u[C]),Re(u[1])==="$type"?w=w.concat(si({key:h+"["+C+"]",value:u[C],valueSpec:y.geometry_type,style:n.style,styleSpec:n.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&w.push(new Y(h+"["+C+"]",u[C],"string, number, or boolean expected, "+f+" found"));break;case"any":case"all":case"none":for(var I=1;I<u.length;I++)w=w.concat(t({key:h+"["+I+"]",value:u[I],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":f=Dr(u[1]),u.length!==2?w.push(new Y(h,u,'filter array for "'+u[0]+'" operator must have 2 elements')):f!=="string"&&w.push(new Y(h+"[1]",u[1],"string expected, "+f+" found"));break;case"within":f=Dr(u[1]),u.length!==2?w.push(new Y(h,u,'filter array for "'+u[0]+'" operator must have 2 elements')):f!=="object"&&w.push(new Y(h+"[1]",u[1],"object expected, "+f+" found"))}return w}(e)}function $s(e,t){var n=e.key,u=e.style,h=e.styleSpec,f=e.value,y=e.objectKey,w=h[t+"_"+e.layerType];if(!w)return[];var C=y.match(/^(.*)-transition$/);if(t==="paint"&&C&&w[C[1]]&&w[C[1]].transition)return qt({key:n,value:f,valueSpec:h.transition,style:u,styleSpec:h});var I,k=e.valueSpec||w[y];if(!k)return[new Y(n,f,'unknown property "'+y+'"')];if(Dr(f)==="string"&&Gi(k)&&!k.tokens&&(I=/^{([^}]+)}$/.exec(f)))return[new Y(n,f,'"'+y+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(I[1])+" }`.")];var A=[];return e.layerType==="symbol"&&(y==="text-field"&&u&&!u.glyphs&&A.push(new Y(n,f,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&Po(Ee(f))&&Re(f.type)==="identity"&&A.push(new Y(n,f,'"text-font" does not support identity functions'))),A.concat(qt({key:e.key,value:f,valueSpec:k,style:u,styleSpec:h,expressionContext:"property",propertyType:t,propertyKey:y}))}function Uu(e){return $s(e,"paint")}function Is(e){return $s(e,"layout")}function Ur(e){var t=[],n=e.value,u=e.key,h=e.style,f=e.styleSpec;n.type||n.ref||t.push(new Y(u,n,'either "type" or "ref" is required'));var y,w=Re(n.type),C=Re(n.ref);if(n.id)for(var I=Re(n.id),k=0;k<e.arrayIndex;k++){var A=h.layers[k];Re(A.id)===I&&t.push(new Y(u,n.id,'duplicate layer id "'+n.id+'", previously used at line '+A.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(W){W in n&&t.push(new Y(u,n[W],'"'+W+'" is prohibited for ref layers'))}),h.layers.forEach(function(W){Re(W.id)===C&&(y=W)}),y?y.ref?t.push(new Y(u,n.ref,"ref cannot reference another ref layer")):w=Re(y.type):t.push(new Y(u,n.ref,'ref layer "'+C+'" not found'));else if(w!=="background")if(n.source){var F=h.sources&&h.sources[n.source],U=F&&Re(F.type);F?U==="vector"&&w==="raster"?t.push(new Y(u,n.source,'layer "'+n.id+'" requires a raster source')):U==="raster"&&w!=="raster"?t.push(new Y(u,n.source,'layer "'+n.id+'" requires a vector source')):U!=="vector"||n["source-layer"]?U==="raster-dem"&&w!=="hillshade"?t.push(new Y(u,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!n.paint||!n.paint["line-gradient"]||U==="geojson"&&F.lineMetrics||t.push(new Y(u,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Y(u,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new Y(u,n.source,'source "'+n.source+'" not found'))}else t.push(new Y(u,n,'missing required property "source"'));return t=t.concat(gt({key:u,value:n,valueSpec:f.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return qt({key:u+".type",value:n.type,valueSpec:f.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:La,layout:function(W){return gt({layer:n,key:W.key,value:W.value,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{"*":function(K){return Is(Le({layerType:w},K))}}})},paint:function(W){return gt({layer:n,key:W.key,value:W.value,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{"*":function(K){return Uu(Le({layerType:w},K))}}})}}}))}function yr(e){var t=e.value,n=e.key,u=Dr(t);return u!=="string"?[new Y(n,t,"string expected, "+u+" found")]:[]}var Ar={promoteId:function(e){var t=e.key,n=e.value;if(Dr(n)==="string")return yr({key:t,value:n});var u=[];for(var h in n)u.push.apply(u,yr({key:t+"."+h,value:n[h]}));return u}};function ho(e){var t=e.value,n=e.key,u=e.styleSpec,h=e.style;if(!t.type)return[new Y(n,t,'"type" is required')];var f,y=Re(t.type);switch(y){case"vector":case"raster":case"raster-dem":return gt({key:n,value:t,valueSpec:u["source_"+y.replace("-","_")],style:e.style,styleSpec:u,objectElementValidators:Ar});case"geojson":if(f=gt({key:n,value:t,valueSpec:u.source_geojson,style:h,styleSpec:u,objectElementValidators:Ar}),t.cluster)for(var w in t.clusterProperties){var C=t.clusterProperties[w],I=C[0],k=typeof I=="string"?[I,["accumulated"],["get",w]]:I;f.push.apply(f,Wr({key:n+"."+w+".map",value:C[1],expressionContext:"cluster-map"})),f.push.apply(f,Wr({key:n+"."+w+".reduce",value:k,expressionContext:"cluster-reduce"}))}return f;case"video":return gt({key:n,value:t,valueSpec:u.source_video,style:h,styleSpec:u});case"image":return gt({key:n,value:t,valueSpec:u.source_image,style:h,styleSpec:u});case"canvas":return[new Y(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return si({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:u})}}function Xo(e){var t=e.value,n=e.styleSpec,u=n.light,h=e.style,f=[],y=Dr(t);if(t===void 0)return f;if(y!=="object")return f.concat([new Y("light",t,"object expected, "+y+" found")]);for(var w in t){var C=w.match(/^(.*)-transition$/);f=f.concat(C&&u[C[1]]&&u[C[1]].transition?qt({key:w,value:t[w],valueSpec:n.transition,style:h,styleSpec:n}):u[w]?qt({key:w,value:t[w],valueSpec:u[w],style:h,styleSpec:n}):[new Y(w,t[w],'unknown property "'+w+'"')])}return f}var An={"*":function(){return[]},array:Gr,boolean:function(e){var t=e.value,n=e.key,u=Dr(t);return u!=="boolean"?[new Y(n,t,"boolean expected, "+u+" found")]:[]},number:pr,color:function(e){var t=e.key,n=e.value,u=Dr(n);return u!=="string"?[new Y(t,n,"color expected, "+u+" found")]:Pt(n)===null?[new Y(t,n,'color expected, "'+n+'" found')]:[]},constants:me,enum:si,filter:La,function:on,layer:Ur,object:gt,source:ho,light:Xo,string:yr,formatted:function(e){return yr(e).length===0?[]:Wr(e)},resolvedImage:function(e){return yr(e).length===0?[]:Wr(e)}};function qt(e){var t=e.value,n=e.valueSpec,u=e.styleSpec;return n.expression&&Po(Re(t))?on(e):n.expression&&Zo(Ee(t))?Wr(e):n.type&&An[n.type]?An[n.type](e):gt(Le({},e,{valueSpec:n.type?u[n.type]:n}))}function mr(e){var t=e.value,n=e.key,u=yr(e);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new Y(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new Y(n,t,'"glyphs" url must include a "{range}" token'))),u}function Wn(e,t){t===void 0&&(t=j);var n=[];return n=n.concat(qt({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:mr,"*":function(){return[]}}})),e.constants&&(n=n.concat(me({key:"constants",value:e.constants,style:e,styleSpec:t}))),sa(n)}function sa(e){return[].concat(e).sort(function(t,n){return t.line-n.line})}function fo(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return sa(e.apply(this,t))}}Wn.source=fo(ho),Wn.light=fo(Xo),Wn.layer=fo(Ur),Wn.filter=fo(La),Wn.paintProperty=fo(Uu),Wn.layoutProperty=fo(Is);var Xi=Wn,Tl=Xi.light,Ys=Xi.paintProperty,Da=Xi.layoutProperty;function ua(e,t){var n=!1;if(t&&t.length)for(var u=0,h=t;u<h.length;u+=1)e.fire(new ie(new Error(h[u].message))),n=!0;return n}var Ki=cn;function cn(e,t,n){var u=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var h=new Int32Array(this.arrayBuffer);e=h[0],this.d=(t=h[1])+2*(n=h[2]);for(var f=0;f<this.d*this.d;f++){var y=h[3+f],w=h[3+f+1];u.push(y===w?null:h.subarray(y,w))}var C=h[3+u.length+1];this.keys=h.subarray(h[3+u.length],C),this.bboxes=h.subarray(C),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var I=0;I<this.d*this.d;I++)u.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var k=n/t*e;this.min=-k,this.max=e+k}cn.prototype.insert=function(e,t,n,u,h){this._forEachCell(t,n,u,h,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(u),this.bboxes.push(h)},cn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},cn.prototype._insertCell=function(e,t,n,u,h,f){this.cells[h].push(f)},cn.prototype.query=function(e,t,n,u,h){var f=this.min,y=this.max;if(e<=f&&t<=f&&y<=n&&y<=u&&!h)return Array.prototype.slice.call(this.keys);var w=[];return this._forEachCell(e,t,n,u,this._queryCell,w,{},h),w},cn.prototype._queryCell=function(e,t,n,u,h,f,y,w){var C=this.cells[h];if(C!==null)for(var I=this.keys,k=this.bboxes,A=0;A<C.length;A++){var F=C[A];if(y[F]===void 0){var U=4*F;(w?w(k[U+0],k[U+1],k[U+2],k[U+3]):e<=k[U+2]&&t<=k[U+3]&&n>=k[U+0]&&u>=k[U+1])?(y[F]=!0,f.push(I[F])):y[F]=!1}}},cn.prototype._forEachCell=function(e,t,n,u,h,f,y,w){for(var C=this._convertToCellCoord(e),I=this._convertToCellCoord(t),k=this._convertToCellCoord(n),A=this._convertToCellCoord(u),F=C;F<=k;F++)for(var U=I;U<=A;U++){var W=this.d*U+F;if((!w||w(this._convertFromCellCoord(F),this._convertFromCellCoord(U),this._convertFromCellCoord(F+1),this._convertFromCellCoord(U+1)))&&h.call(this,e,t,n,u,W,f,y,w))return}},cn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},cn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},cn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,u=0;u<this.cells.length;u++)n+=this.cells[u].length;var h=new Int32Array(t+n+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var f=t,y=0;y<e.length;y++){var w=e[y];h[3+y]=f,h.set(w,f),f+=w.length}return h[3+e.length]=f,h.set(this.keys,f),h[3+e.length+1]=f+=this.keys.length,h.set(this.bboxes,f),f+=this.bboxes.length,h.buffer};var la=ne.ImageData,Ps=ne.ImageBitmap,Sn={};function lt(e,t,n){n===void 0&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Sn[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var Hi in lt("Object",Object),Ki.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Ki.deserialize=function(e){return new Ki(e.buffer)},lt("Grid",Ki),lt("Color",cr),lt("Error",Error),lt("ResolvedImage",Gn),lt("StylePropertyFunction",Qe),lt("StyleExpression",Ma,{omit:["_evaluator"]}),lt("ZoomDependentExpression",de),lt("ZoomConstantExpression",Cs),lt("CompoundExpression",R,{omit:["_evaluate"]}),oa)oa[Hi]._classRegistryKey||lt("Expression_"+Hi,oa[Hi]);function Il(e){return e&&typeof ArrayBuffer!="undefined"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function Js(e){return Ps&&e instanceof Ps}function Ko(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Il(e)||Js(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof la)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var u=[],h=0,f=e;h<f.length;h+=1)u.push(Ko(f[h],t));return u}if(typeof e=="object"){var y=e.constructor,w=y._classRegistryKey;if(!w)throw new Error("can't serialize object of unregistered class");var C=y.serialize?y.serialize(e,t):{};if(!y.serialize){for(var I in e)if(e.hasOwnProperty(I)&&!(Sn[w].omit.indexOf(I)>=0)){var k=e[I];C[I]=Sn[w].shallow.indexOf(I)>=0?k:Ko(k,t)}e instanceof Error&&(C.message=e.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return w!=="Object"&&(C.$name=w),C}throw new Error("can't serialize object of type "+typeof e)}function $i(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Il(e)||Js(e)||ArrayBuffer.isView(e)||e instanceof la)return e;if(Array.isArray(e))return e.map($i);if(typeof e=="object"){var t=e.$name||"Object",n=Sn[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var u=Object.create(n.prototype),h=0,f=Object.keys(e);h<f.length;h+=1){var y=f[h];if(y!=="$name"){var w=e[y];u[y]=Sn[t].shallow.indexOf(y)>=0?w:$i(w)}}return u}throw new Error("can't deserialize object of type "+typeof e)}var jc=function(){this.first=!0};jc.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var Ke={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Vc(e){for(var t=0,n=e;t<n.length;t+=1)if(Pl(n[t].charCodeAt(0)))return!0;return!1}function Pl(e){return!(e!==746&&e!==747&&(e<4352||!(Ke["Bopomofo Extended"](e)||Ke.Bopomofo(e)||Ke["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Ke["CJK Compatibility Ideographs"](e)||Ke["CJK Compatibility"](e)||Ke["CJK Radicals Supplement"](e)||Ke["CJK Strokes"](e)||!(!Ke["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||Ke["CJK Unified Ideographs Extension A"](e)||Ke["CJK Unified Ideographs"](e)||Ke["Enclosed CJK Letters and Months"](e)||Ke["Hangul Compatibility Jamo"](e)||Ke["Hangul Jamo Extended-A"](e)||Ke["Hangul Jamo Extended-B"](e)||Ke["Hangul Jamo"](e)||Ke["Hangul Syllables"](e)||Ke.Hiragana(e)||Ke["Ideographic Description Characters"](e)||Ke.Kanbun(e)||Ke["Kangxi Radicals"](e)||Ke["Katakana Phonetic Extensions"](e)||Ke.Katakana(e)&&e!==12540||!(!Ke["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!Ke["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Ke["Unified Canadian Aboriginal Syllabics"](e)||Ke["Unified Canadian Aboriginal Syllabics Extended"](e)||Ke["Vertical Forms"](e)||Ke["Yijing Hexagram Symbols"](e)||Ke["Yi Syllables"](e)||Ke["Yi Radicals"](e))))}function qc(e){return!(Pl(e)||function(t){return!!(Ke["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Ke["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Ke["Letterlike Symbols"](t)||Ke["Number Forms"](t)||Ke["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Ke["Control Pictures"](t)&&t!==9251||Ke["Optical Character Recognition"](t)||Ke["Enclosed Alphanumerics"](t)||Ke["Geometric Shapes"](t)||Ke["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Ke["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Ke["CJK Symbols and Punctuation"](t)||Ke.Katakana(t)||Ke["Private Use Area"](t)||Ke["CJK Compatibility Forms"](t)||Ke["Small Form Variants"](t)||Ke["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function ko(e){return e>=1424&&e<=2303||Ke["Arabic Presentation Forms-A"](e)||Ke["Arabic Presentation Forms-B"](e)}function Yi(e,t){return!(!t&&ko(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Ke.Khmer(e))}function kl(e){for(var t=0,n=e;t<n.length;t+=1)if(ko(n[t].charCodeAt(0)))return!0;return!1}var Al=null,Ji="unavailable",Oa=null,wh=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Ji="error"),Al&&Al(e)};function Nu(){Zc.fire(new X("pluginStateChange",{pluginStatus:Ji,pluginURL:Oa}))}var Zc=new ue,Gc=function(){return Ji},Ho=function(){if(Ji!=="deferred"||!Oa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ji="loading",Nu(),Oa&&Wa({url:Oa},function(e){e?wh(e):(Ji="loaded",Nu())})},mo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ji==="loaded"||mo.applyArabicShaping!=null},isLoading:function(){return Ji==="loading"},setState:function(e){Ji=e.pluginStatus,Oa=e.pluginURL},isParsed:function(){return mo.applyArabicShaping!=null&&mo.processBidirectionalText!=null&&mo.processStyledBidirectionalText!=null},getPluginURL:function(){return Oa}},Jt=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jc,this.transition={})};Jt.prototype.isSupportedScript=function(e){return function(t,n){for(var u=0,h=t;u<h.length;u+=1)if(!Yi(h[u].charCodeAt(0),n))return!1;return!0}(e,mo.isLoaded())},Jt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Jt.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}};var ca=function(e,t){this.property=e,this.value=t,this.expression=function(n,u){if(Po(n))return new Qe(n,u);if(Zo(n)){var h=ke(n,u);if(h.result==="error")throw new Error(h.value.map(function(y){return y.key+": "+y.message}).join(", "));return h.value}var f=n;return typeof n=="string"&&u.type==="color"&&(f=cr.parse(n)),{kind:"constant",evaluate:function(){return f}}}(t===void 0?e.specification.default:t,e.specification)};ca.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ca.prototype.possiblyEvaluate=function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)};var Ao=function(e){this.property=e,this.value=new ca(e,void 0)};Ao.prototype.transitioned=function(e,t){return new ks(this.property,this.value,t,le({},e.transition,this.transition),e.now)},Ao.prototype.untransitioned=function(){return new ks(this.property,this.value,null,{},0)};var ri=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};ri.prototype.getValue=function(e){return br(this._values[e].value.value)},ri.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ao(this._values[e].property)),this._values[e].value=new ca(this._values[e].property,t===null?void 0:br(t))},ri.prototype.getTransition=function(e){return br(this._values[e].transition)},ri.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ao(this._values[e].property)),this._values[e].transition=br(t)||void 0},ri.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var u=n[t],h=this.getValue(u);h!==void 0&&(e[u]=h);var f=this.getTransition(u);f!==void 0&&(e[u+"-transition"]=f)}return e},ri.prototype.transitioned=function(e,t){for(var n=new $a(this._properties),u=0,h=Object.keys(this._values);u<h.length;u+=1){var f=h[u];n._values[f]=this._values[f].transitioned(e,t._values[f])}return n},ri.prototype.untransitioned=function(){for(var e=new $a(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var u=n[t];e._values[u]=this._values[u].untransitioned()}return e};var ks=function(e,t,n,u,h){this.property=e,this.value=t,this.begin=h+u.delay||0,this.end=this.begin+u.duration||0,e.specification.transition&&(u.delay||u.duration)&&(this.prior=n)};ks.prototype.possiblyEvaluate=function(e,t,n){var u=e.now||0,h=this.value.possiblyEvaluate(e,t,n),f=this.prior;if(f){if(u>this.end)return this.prior=null,h;if(this.value.isDataDriven())return this.prior=null,h;if(u<this.begin)return f.possiblyEvaluate(e,t,n);var y=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(f.possiblyEvaluate(e,t,n),h,function(w){if(w<=0)return 0;if(w>=1)return 1;var C=w*w,I=C*w;return 4*(w<.5?I:3*(w-C)+I-.75)}(y))}return h};var $a=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};$a.prototype.possiblyEvaluate=function(e,t,n){for(var u=new ju(this._properties),h=0,f=Object.keys(this._values);h<f.length;h+=1){var y=f[h];u._values[y]=this._values[y].possiblyEvaluate(e,t,n)}return u},$a.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var $o=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};$o.prototype.getValue=function(e){return br(this._values[e].value)},$o.prototype.setValue=function(e,t){this._values[e]=new ca(this._values[e].property,t===null?void 0:br(t))},$o.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var u=n[t],h=this.getValue(u);h!==void 0&&(e[u]=h)}return e},$o.prototype.possiblyEvaluate=function(e,t,n){for(var u=new ju(this._properties),h=0,f=Object.keys(this._values);h<f.length;h+=1){var y=f[h];u._values[y]=this._values[y].possiblyEvaluate(e,t,n)}return u};var di=function(e,t,n){this.property=e,this.value=t,this.parameters=n};di.prototype.isConstant=function(){return this.value.kind==="constant"},di.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},di.prototype.evaluate=function(e,t,n,u){return this.property.evaluate(this.value,this.parameters,e,t,n,u)};var ju=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};ju.prototype.get=function(e){return this._values[e]};var _t=function(e){this.specification=e};_t.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},_t.prototype.interpolate=function(e,t,n){var u=Ca[this.specification.type];return u?u(e,t,n):e};var ft=function(e,t){this.specification=e,this.overrides=t};ft.prototype.possiblyEvaluate=function(e,t,n,u){return new di(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},n,u)}:e.expression,t)},ft.prototype.interpolate=function(e,t,n){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new di(this,{kind:"constant",value:void 0},e.parameters);var u=Ca[this.specification.type];return u?new di(this,{kind:"constant",value:u(e.value.value,t.value.value,n)},e.parameters):e},ft.prototype.evaluate=function(e,t,n,u,h,f){return e.kind==="constant"?e.value:e.evaluate(t,n,u,h,f)};var Ml=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(n,u,h,f){if(n.value===void 0)return new di(this,{kind:"constant",value:void 0},u);if(n.expression.kind==="constant"){var y=n.expression.evaluate(u,null,{},h,f),w=n.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,C=this._calculate(w,w,w,u);return new di(this,{kind:"constant",value:C},u)}if(n.expression.kind==="camera"){var I=this._calculate(n.expression.evaluate({zoom:u.zoom-1}),n.expression.evaluate({zoom:u.zoom}),n.expression.evaluate({zoom:u.zoom+1}),u);return new di(this,{kind:"constant",value:I},u)}return new di(this,n.expression,u)},t.prototype.evaluate=function(n,u,h,f,y,w){if(n.kind==="source"){var C=n.evaluate(u,h,f,y,w);return this._calculate(C,C,C,u)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(u.zoom)-1},h,f),n.evaluate({zoom:Math.floor(u.zoom)},h,f),n.evaluate({zoom:Math.floor(u.zoom)+1},h,f),u):n.value},t.prototype._calculate=function(n,u,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:u}:{from:h,to:u}},t.prototype.interpolate=function(n){return n},t}(ft),mi=function(e){this.specification=e};mi.prototype.possiblyEvaluate=function(e,t,n,u){if(e.value!==void 0){if(e.expression.kind==="constant"){var h=e.expression.evaluate(t,null,{},n,u);return this._calculate(h,h,h,t)}return this._calculate(e.expression.evaluate(new Jt(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Jt(Math.floor(t.zoom),t)),e.expression.evaluate(new Jt(Math.floor(t.zoom+1),t)),t)}},mi.prototype._calculate=function(e,t,n,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},mi.prototype.interpolate=function(e){return e};var Yo=function(e){this.specification=e};Yo.prototype.possiblyEvaluate=function(e,t,n,u){return!!e.expression.evaluate(t,null,{},n,u)},Yo.prototype.interpolate=function(){return!1};var ni=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var n=e[t];n.specification.overridable&&this.overridableProperties.push(t);var u=this.defaultPropertyValues[t]=new ca(n,void 0),h=this.defaultTransitionablePropertyValues[t]=new Ao(n);this.defaultTransitioningPropertyValues[t]=h.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=u.possiblyEvaluate({})}};lt("DataDrivenProperty",ft),lt("DataConstantProperty",_t),lt("CrossFadedDataDrivenProperty",Ml),lt("CrossFadedProperty",mi),lt("ColorRampProperty",Yo);var pa=function(e){function t(n,u){if(e.call(this),this.id=n.id,this.type=n.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},n.type!=="custom"&&(this.metadata=(n=n).metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),u.layout&&(this._unevaluatedLayout=new $o(u.layout)),u.paint)){for(var h in this._transitionablePaint=new ri(u.paint),n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(var f in n.layout)this.setLayoutProperty(f,n.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ju(u.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)},t.prototype.setLayoutProperty=function(n,u,h){h===void 0&&(h={}),u!=null&&this._validate(Da,"layers."+this.id+".layout."+n,n,u,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,u):this.visibility=u)},t.prototype.getPaintProperty=function(n){return Ot(n,"-transition")?this._transitionablePaint.getTransition(n.slice(0,-"-transition".length)):this._transitionablePaint.getValue(n)},t.prototype.setPaintProperty=function(n,u,h){if(h===void 0&&(h={}),u!=null&&this._validate(Ys,"layers."+this.id+".paint."+n,n,u,h))return!1;if(Ot(n,"-transition"))return this._transitionablePaint.setTransition(n.slice(0,-"-transition".length),u||void 0),!1;var f=this._transitionablePaint._values[n],y=f.property.specification["property-type"]==="cross-faded-data-driven",w=f.value.isDataDriven(),C=f.value;this._transitionablePaint.setValue(n,u),this._handleSpecialPaintPropertyUpdate(n);var I=this._transitionablePaint._values[n].value;return I.isDataDriven()||w||y||this._handleOverridablePaintPropertyUpdate(n,C,I)},t.prototype._handleSpecialPaintPropertyUpdate=function(n){},t.prototype._handleOverridablePaintPropertyUpdate=function(n,u,h){return!1},t.prototype.isHidden=function(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(n,u){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,u)},t.prototype.serialize=function(){var n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),er(n,function(u,h){return!(u===void 0||h==="layout"&&!Object.keys(u).length||h==="paint"&&!Object.keys(u).length)})},t.prototype._validate=function(n,u,h,f,y){return y===void 0&&(y={}),(!y||y.validate!==!1)&&ua(this,n.call(Xi,{key:u,layerType:this.type,objectKey:h,value:f,styleSpec:j,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var n in this.paint._values){var u=this.paint.get(n);if(u instanceof di&&Gi(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1},t}(ue),Wc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},zl=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Er=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Xn(e,t){t===void 0&&(t=1);var n=0,u=0;return{members:e.map(function(h){var f=Wc[h.type].BYTES_PER_ELEMENT,y=n=bh(n,Math.max(t,f)),w=h.components||1;return u=Math.max(u,f),n+=f*w,{name:h.name,type:h.type,components:w,offset:y}}),size:bh(n,Math.max(u,t)),alignment:t}}function bh(e,t){return Math.ceil(e/t)*t}Er.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Er.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Er.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Er.prototype.clear=function(){this.length=0},Er.prototype.resize=function(e){this.reserve(e),this.length=e},Er.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Er.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var As=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u){var h=this.length;return this.resize(h+1),this.emplace(h,n,u)},t.prototype.emplace=function(n,u,h){var f=2*n;return this.int16[f+0]=u,this.int16[f+1]=h,n},t}(Er);As.prototype.bytesPerElement=4,lt("StructArrayLayout2i4",As);var Xc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,n,u,h,f)},t.prototype.emplace=function(n,u,h,f,y){var w=4*n;return this.int16[w+0]=u,this.int16[w+1]=h,this.int16[w+2]=f,this.int16[w+3]=y,n},t}(Er);Xc.prototype.bytesPerElement=8,lt("StructArrayLayout4i8",Xc);var Fa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f,y,w){var C=this.length;return this.resize(C+1),this.emplace(C,n,u,h,f,y,w)},t.prototype.emplace=function(n,u,h,f,y,w,C){var I=6*n;return this.int16[I+0]=u,this.int16[I+1]=h,this.int16[I+2]=f,this.int16[I+3]=y,this.int16[I+4]=w,this.int16[I+5]=C,n},t}(Er);Fa.prototype.bytesPerElement=12,lt("StructArrayLayout2i4i12",Fa);var Qi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f,y,w){var C=this.length;return this.resize(C+1),this.emplace(C,n,u,h,f,y,w)},t.prototype.emplace=function(n,u,h,f,y,w,C){var I=4*n,k=8*n;return this.int16[I+0]=u,this.int16[I+1]=h,this.uint8[k+4]=f,this.uint8[k+5]=y,this.uint8[k+6]=w,this.uint8[k+7]=C,n},t}(Er);Qi.prototype.bytesPerElement=8,lt("StructArrayLayout2i4ub8",Qi);var Qs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u){var h=this.length;return this.resize(h+1),this.emplace(h,n,u)},t.prototype.emplace=function(n,u,h){var f=2*n;return this.float32[f+0]=u,this.float32[f+1]=h,n},t}(Er);Qs.prototype.bytesPerElement=8,lt("StructArrayLayout2f8",Qs);var ha=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f,y,w,C,I,k,A){var F=this.length;return this.resize(F+1),this.emplace(F,n,u,h,f,y,w,C,I,k,A)},t.prototype.emplace=function(n,u,h,f,y,w,C,I,k,A,F){var U=10*n;return this.uint16[U+0]=u,this.uint16[U+1]=h,this.uint16[U+2]=f,this.uint16[U+3]=y,this.uint16[U+4]=w,this.uint16[U+5]=C,this.uint16[U+6]=I,this.uint16[U+7]=k,this.uint16[U+8]=A,this.uint16[U+9]=F,n},t}(Er);ha.prototype.bytesPerElement=20,lt("StructArrayLayout10ui20",ha);var Ll=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f,y,w,C,I,k,A,F,U){var W=this.length;return this.resize(W+1),this.emplace(W,n,u,h,f,y,w,C,I,k,A,F,U)},t.prototype.emplace=function(n,u,h,f,y,w,C,I,k,A,F,U,W){var K=12*n;return this.int16[K+0]=u,this.int16[K+1]=h,this.int16[K+2]=f,this.int16[K+3]=y,this.uint16[K+4]=w,this.uint16[K+5]=C,this.uint16[K+6]=I,this.uint16[K+7]=k,this.int16[K+8]=A,this.int16[K+9]=F,this.int16[K+10]=U,this.int16[K+11]=W,n},t}(Er);Ll.prototype.bytesPerElement=24,lt("StructArrayLayout4i4ui4i24",Ll);var eu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,u,h)},t.prototype.emplace=function(n,u,h,f){var y=3*n;return this.float32[y+0]=u,this.float32[y+1]=h,this.float32[y+2]=f,n},t}(Er);eu.prototype.bytesPerElement=12,lt("StructArrayLayout3f12",eu);var Vu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var u=this.length;return this.resize(u+1),this.emplace(u,n)},t.prototype.emplace=function(n,u){return this.uint32[1*n+0]=u,n},t}(Er);Vu.prototype.bytesPerElement=4,lt("StructArrayLayout1ul4",Vu);var Kc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f,y,w,C,I,k){var A=this.length;return this.resize(A+1),this.emplace(A,n,u,h,f,y,w,C,I,k)},t.prototype.emplace=function(n,u,h,f,y,w,C,I,k,A){var F=10*n,U=5*n;return this.int16[F+0]=u,this.int16[F+1]=h,this.int16[F+2]=f,this.int16[F+3]=y,this.int16[F+4]=w,this.int16[F+5]=C,this.uint32[U+3]=I,this.uint16[F+8]=k,this.uint16[F+9]=A,n},t}(Er);Kc.prototype.bytesPerElement=20,lt("StructArrayLayout6i1ul2ui20",Kc);var tu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f,y,w){var C=this.length;return this.resize(C+1),this.emplace(C,n,u,h,f,y,w)},t.prototype.emplace=function(n,u,h,f,y,w,C){var I=6*n;return this.int16[I+0]=u,this.int16[I+1]=h,this.int16[I+2]=f,this.int16[I+3]=y,this.int16[I+4]=w,this.int16[I+5]=C,n},t}(Er);tu.prototype.bytesPerElement=12,lt("StructArrayLayout2i2i2i12",tu);var Ms=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f,y){var w=this.length;return this.resize(w+1),this.emplace(w,n,u,h,f,y)},t.prototype.emplace=function(n,u,h,f,y,w){var C=4*n,I=8*n;return this.float32[C+0]=u,this.float32[C+1]=h,this.float32[C+2]=f,this.int16[I+6]=y,this.int16[I+7]=w,n},t}(Er);Ms.prototype.bytesPerElement=16,lt("StructArrayLayout2f1f2i16",Ms);var Hc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,n,u,h,f)},t.prototype.emplace=function(n,u,h,f,y){var w=12*n,C=3*n;return this.uint8[w+0]=u,this.uint8[w+1]=h,this.float32[C+1]=f,this.float32[C+2]=y,n},t}(Er);Hc.prototype.bytesPerElement=12,lt("StructArrayLayout2ub2f12",Hc);var Ya=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,u,h)},t.prototype.emplace=function(n,u,h,f){var y=3*n;return this.uint16[y+0]=u,this.uint16[y+1]=h,this.uint16[y+2]=f,n},t}(Er);Ya.prototype.bytesPerElement=6,lt("StructArrayLayout3ui6",Ya);var Ja=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f,y,w,C,I,k,A,F,U,W,K,re,Q,ce){var ge=this.length;return this.resize(ge+1),this.emplace(ge,n,u,h,f,y,w,C,I,k,A,F,U,W,K,re,Q,ce)},t.prototype.emplace=function(n,u,h,f,y,w,C,I,k,A,F,U,W,K,re,Q,ce,ge){var xe=24*n,Se=12*n,Ae=48*n;return this.int16[xe+0]=u,this.int16[xe+1]=h,this.uint16[xe+2]=f,this.uint16[xe+3]=y,this.uint32[Se+2]=w,this.uint32[Se+3]=C,this.uint32[Se+4]=I,this.uint16[xe+10]=k,this.uint16[xe+11]=A,this.uint16[xe+12]=F,this.float32[Se+7]=U,this.float32[Se+8]=W,this.uint8[Ae+36]=K,this.uint8[Ae+37]=re,this.uint8[Ae+38]=Q,this.uint32[Se+10]=ce,this.int16[xe+22]=ge,n},t}(Er);Ja.prototype.bytesPerElement=48,lt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ja);var Dl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f,y,w,C,I,k,A,F,U,W,K,re,Q,ce,ge,xe,Se,Ae,Be,Ge,vt,et,wt,tt,Kt){var Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,n,u,h,f,y,w,C,I,k,A,F,U,W,K,re,Q,ce,ge,xe,Se,Ae,Be,Ge,vt,et,wt,tt,Kt)},t.prototype.emplace=function(n,u,h,f,y,w,C,I,k,A,F,U,W,K,re,Q,ce,ge,xe,Se,Ae,Be,Ge,vt,et,wt,tt,Kt,Lt){var dt=34*n,Yt=17*n;return this.int16[dt+0]=u,this.int16[dt+1]=h,this.int16[dt+2]=f,this.int16[dt+3]=y,this.int16[dt+4]=w,this.int16[dt+5]=C,this.int16[dt+6]=I,this.int16[dt+7]=k,this.uint16[dt+8]=A,this.uint16[dt+9]=F,this.uint16[dt+10]=U,this.uint16[dt+11]=W,this.uint16[dt+12]=K,this.uint16[dt+13]=re,this.uint16[dt+14]=Q,this.uint16[dt+15]=ce,this.uint16[dt+16]=ge,this.uint16[dt+17]=xe,this.uint16[dt+18]=Se,this.uint16[dt+19]=Ae,this.uint16[dt+20]=Be,this.uint16[dt+21]=Ge,this.uint16[dt+22]=vt,this.uint32[Yt+12]=et,this.float32[Yt+13]=wt,this.float32[Yt+14]=tt,this.float32[Yt+15]=Kt,this.float32[Yt+16]=Lt,n},t}(Er);Dl.prototype.bytesPerElement=68,lt("StructArrayLayout8i15ui1ul4f68",Dl);var Qa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var u=this.length;return this.resize(u+1),this.emplace(u,n)},t.prototype.emplace=function(n,u){return this.float32[1*n+0]=u,n},t}(Er);Qa.prototype.bytesPerElement=4,lt("StructArrayLayout1f4",Qa);var Mo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,u,h)},t.prototype.emplace=function(n,u,h,f){var y=3*n;return this.int16[y+0]=u,this.int16[y+1]=h,this.int16[y+2]=f,n},t}(Er);Mo.prototype.bytesPerElement=6,lt("StructArrayLayout3i6",Mo);var $c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,u,h)},t.prototype.emplace=function(n,u,h,f){var y=4*n;return this.uint32[2*n+0]=u,this.uint16[y+2]=h,this.uint16[y+3]=f,n},t}(Er);$c.prototype.bytesPerElement=8,lt("StructArrayLayout1ul2ui8",$c);var qu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u){var h=this.length;return this.resize(h+1),this.emplace(h,n,u)},t.prototype.emplace=function(n,u,h){var f=2*n;return this.uint16[f+0]=u,this.uint16[f+1]=h,n},t}(Er);qu.prototype.bytesPerElement=4,lt("StructArrayLayout2ui4",qu);var Yc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var u=this.length;return this.resize(u+1),this.emplace(u,n)},t.prototype.emplace=function(n,u){return this.uint16[1*n+0]=u,n},t}(Er);Yc.prototype.bytesPerElement=2,lt("StructArrayLayout1ui2",Yc);var Ol=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,n,u,h,f)},t.prototype.emplace=function(n,u,h,f,y){var w=4*n;return this.float32[w+0]=u,this.float32[w+1]=h,this.float32[w+2]=f,this.float32[w+3]=y,n},t}(Er);Ol.prototype.bytesPerElement=16,lt("StructArrayLayout4f16",Ol);var i=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new he(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(zl);i.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new i(this,n)},t}(Kc);lt("CollisionBoxArray",s);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(u){this._structArray.uint8[this._pos1+37]=u},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(u){this._structArray.uint8[this._pos1+38]=u},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(u){this._structArray.uint32[this._pos4+10]=u},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,n),t}(zl);o.prototype.size=48;var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new o(this,n)},t}(Ja);lt("PlacedSymbolArray",c);var d=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(u){this._structArray.uint32[this._pos4+12]=u},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,n),t}(zl);d.prototype.size=68;var v=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new d(this,n)},t}(Dl);lt("SymbolInstanceArray",v);var x=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(n){return this.float32[1*n+0]},t}(Qa);lt("GlyphOffsetArray",x);var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(n){return this.int16[3*n+0]},t.prototype.gety=function(n){return this.int16[3*n+1]},t.prototype.gettileUnitDistanceFromAnchor=function(n){return this.int16[3*n+2]},t}(Mo);lt("SymbolLineVertexArray",E);var P=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,n),t}(zl);P.prototype.size=8;var z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new P(this,n)},t}($c);lt("FeatureIndexArray",z);var N=Xn([{name:"a_pos",components:2,type:"Int16"}],4).members,V=function(e){e===void 0&&(e=[]),this.segments=e};function q(e,t){return 256*(e=pe(Math.floor(e),0,255))+pe(Math.floor(t),0,255)}V.prototype.prepareSegment=function(e,t,n,u){var h=this.segments[this.segments.length-1];return e>V.MAX_VERTEX_ARRAY_LENGTH&&Ut("Max vertices per segment is "+V.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!h||h.vertexLength+e>V.MAX_VERTEX_ARRAY_LENGTH||h.sortKey!==u)&&(h={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},u!==void 0&&(h.sortKey=u),this.segments.push(h)),h},V.prototype.get=function(){return this.segments},V.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var u in n.vaos)n.vaos[u].destroy()}},V.simpleSegment=function(e,t,n,u){return new V([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:u,vaos:{},sortKey:0}])},V.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,lt("SegmentVector",V);var $=Xn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),H=L(function(e){e.exports=function(t,n){var u,h,f,y,w,C,I,k;for(h=t.length-(u=3&t.length),f=n,w=3432918353,C=461845907,k=0;k<h;)I=255&t.charCodeAt(k)|(255&t.charCodeAt(++k))<<8|(255&t.charCodeAt(++k))<<16|(255&t.charCodeAt(++k))<<24,++k,f=27492+(65535&(y=5*(65535&(f=(f^=I=(65535&(I=(I=(65535&I)*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*C+(((I>>>16)*C&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(I=0,u){case 3:I^=(255&t.charCodeAt(k+2))<<16;case 2:I^=(255&t.charCodeAt(k+1))<<8;case 1:f^=I=(65535&(I=(I=(65535&(I^=255&t.charCodeAt(k)))*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*C+(((I>>>16)*C&65535)<<16)&4294967295}return f^=t.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0}}),te=L(function(e){e.exports=function(t,n){for(var u,h=t.length,f=n^h,y=0;h>=4;)u=1540483477*(65535&(u=255&t.charCodeAt(y)|(255&t.charCodeAt(++y))<<8|(255&t.charCodeAt(++y))<<16|(255&t.charCodeAt(++y))<<24))+((1540483477*(u>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:f^=(255&t.charCodeAt(y+2))<<16;case 2:f^=(255&t.charCodeAt(y+1))<<8;case 1:f=1540483477*(65535&(f^=255&t.charCodeAt(y)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0}}),G=H,ee=te;G.murmur3=H,G.murmur2=ee;var se=function(){this.ids=[],this.positions=[],this.indexed=!1};se.prototype.add=function(e,t,n,u){this.ids.push(Ce(e)),this.positions.push(t,n,u)},se.prototype.getPositions=function(e){for(var t=Ce(e),n=0,u=this.ids.length-1;n<u;){var h=n+u>>1;this.ids[h]>=t?u=h:n=h+1}for(var f=[];this.ids[n]===t;)f.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return f},se.serialize=function(e,t){var n=new Float64Array(e.ids),u=new Uint32Array(e.positions);return function h(f,y,w,C){for(;w<C;){for(var I=f[w+C>>1],k=w-1,A=C+1;;){do k++;while(f[k]<I);do A--;while(f[A]>I);if(k>=A)break;we(f,k,A),we(y,3*k,3*A),we(y,3*k+1,3*A+1),we(y,3*k+2,3*A+2)}A-w<C-A?(h(f,y,w,A),w=A+1):(h(f,y,A+1,C),C=A)}}(n,u,0,n.length-1),t&&t.push(n.buffer,u.buffer),{ids:n,positions:u}},se.deserialize=function(e){var t=new se;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var ye=Math.pow(2,53)-1;function Ce(e){var t=+e;return!isNaN(t)&&t<=ye?t:G(String(e))}function we(e,t,n){var u=e[t];e[t]=e[n],e[n]=u}lt("FeaturePositionMap",se);var Ie=function(e,t){this.gl=e.gl,this.location=t},De=function(e){function t(n,u){e.call(this,n,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))},t}(Ie),qe=function(e){function t(n,u){e.call(this,n,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))},t}(Ie),je=function(e){function t(n,u){e.call(this,n,u),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))},t}(Ie),ot=function(e){function t(n,u){e.call(this,n,u),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))},t}(Ie),xt=function(e){function t(n,u){e.call(this,n,u),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))},t}(Ie),Ct=function(e){function t(n,u){e.call(this,n,u),this.current=cr.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))},t}(Ie),Et=new Float32Array(16),hr=function(e){function t(n,u){e.call(this,n,u),this.current=Et}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(var u=1;u<16;u++)if(n[u]!==this.current[u]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}},t}(Ie);function ut(e){return[q(255*e.r,255*e.g),q(255*e.b,255*e.a)]}var Nt=function(e,t,n){this.value=e,this.uniformNames=t.map(function(u){return"u_"+u}),this.type=n};Nt.prototype.setUniform=function(e,t,n){e.set(n.constantOr(this.value))},Nt.prototype.getBinding=function(e,t,n){return this.type==="color"?new Ct(e,t):new qe(e,t)};var Wt=function(e,t){this.uniformNames=t.map(function(n){return"u_"+n}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Wt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Wt.prototype.setUniform=function(e,t,n,u){var h=u==="u_pattern_to"?this.patternTo:u==="u_pattern_from"?this.patternFrom:u==="u_pixel_ratio_to"?this.pixelRatioTo:u==="u_pixel_ratio_from"?this.pixelRatioFrom:null;h&&e.set(h)},Wt.prototype.getBinding=function(e,t,n){return n.substr(0,9)==="u_pattern"?new xt(e,t):new qe(e,t)};var Bt=function(e,t,n,u){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map(function(h){return{name:"a_"+h,type:"Float32",components:n==="color"?2:1,offset:0}}),this.paintVertexArray=new u};Bt.prototype.populatePaintArray=function(e,t,n,u,h){var f=this.paintVertexArray.length,y=this.expression.evaluate(new Jt(0),t,{},u,[],h);this.paintVertexArray.resize(e),this._setPaintValue(f,e,y)},Bt.prototype.updatePaintArray=function(e,t,n,u){var h=this.expression.evaluate({zoom:0},n,u);this._setPaintValue(e,t,h)},Bt.prototype._setPaintValue=function(e,t,n){if(this.type==="color")for(var u=ut(n),h=e;h<t;h++)this.paintVertexArray.emplace(h,u[0],u[1]);else{for(var f=e;f<t;f++)this.paintVertexArray.emplace(f,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},Bt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Bt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ft=function(e,t,n,u,h,f){this.expression=e,this.uniformNames=t.map(function(y){return"u_"+y+"_t"}),this.type=n,this.useIntegerZoom=u,this.zoom=h,this.maxValue=0,this.paintVertexAttributes=t.map(function(y){return{name:"a_"+y,type:"Float32",components:n==="color"?4:2,offset:0}}),this.paintVertexArray=new f};Ft.prototype.populatePaintArray=function(e,t,n,u,h){var f=this.expression.evaluate(new Jt(this.zoom),t,{},u,[],h),y=this.expression.evaluate(new Jt(this.zoom+1),t,{},u,[],h),w=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(w,e,f,y)},Ft.prototype.updatePaintArray=function(e,t,n,u){var h=this.expression.evaluate({zoom:this.zoom},n,u),f=this.expression.evaluate({zoom:this.zoom+1},n,u);this._setPaintValue(e,t,h,f)},Ft.prototype._setPaintValue=function(e,t,n,u){if(this.type==="color")for(var h=ut(n),f=ut(u),y=e;y<t;y++)this.paintVertexArray.emplace(y,h[0],h[1],f[0],f[1]);else{for(var w=e;w<t;w++)this.paintVertexArray.emplace(w,n,u);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(u))}},Ft.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ft.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ft.prototype.setUniform=function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,u=pe(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(u)},Ft.prototype.getBinding=function(e,t,n){return new qe(e,t)};var Gt=function(e,t,n,u,h,f){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=u,this.layerId=f,this.zoomInPaintVertexArray=new h,this.zoomOutPaintVertexArray=new h};Gt.prototype.populatePaintArray=function(e,t,n){var u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,t.patterns&&t.patterns[this.layerId],n)},Gt.prototype.updatePaintArray=function(e,t,n,u,h){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],h)},Gt.prototype._setPaintValues=function(e,t,n,u){if(u&&n){var h=u[n.min],f=u[n.mid],y=u[n.max];if(h&&f&&y)for(var w=e;w<t;w++)this.zoomInPaintVertexArray.emplace(w,f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],f.pixelRatio,h.pixelRatio),this.zoomOutPaintVertexArray.emplace(w,f.tl[0],f.tl[1],f.br[0],f.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1],f.pixelRatio,y.pixelRatio)}},Gt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,$.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,$.members,this.expression.isStateDependent))},Gt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Dt=function(e,t,n){this.binders={},this._buffers=[];var u=[];for(var h in e.paint._values)if(n(h)){var f=e.paint.get(h);if(f instanceof di&&Gi(f.property.specification)){var y=Rn(h,e.type),w=f.value,C=f.property.specification.type,I=f.property.useIntegerZoom,k=f.property.specification["property-type"],A=k==="cross-faded"||k==="cross-faded-data-driven";if(w.kind==="constant")this.binders[h]=A?new Wt(w.value,y):new Nt(w.value,y,C),u.push("/u_"+h);else if(w.kind==="source"||A){var F=pn(h,C,"source");this.binders[h]=A?new Gt(w,C,I,t,F,e.id):new Bt(w,y,C,F),u.push("/a_"+h)}else{var U=pn(h,C,"composite");this.binders[h]=new Ft(w,y,C,I,t,U),u.push("/z_"+h)}}}this.cacheKey=u.sort().join("")};Dt.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Bt||t instanceof Ft?t.maxValue:0},Dt.prototype.populatePaintArrays=function(e,t,n,u,h){for(var f in this.binders){var y=this.binders[f];(y instanceof Bt||y instanceof Ft||y instanceof Gt)&&y.populatePaintArray(e,t,n,u,h)}},Dt.prototype.setConstantPatternPositions=function(e,t){for(var n in this.binders){var u=this.binders[n];u instanceof Wt&&u.setConstantPatternPositions(e,t)}},Dt.prototype.updatePaintArrays=function(e,t,n,u,h){var f=!1;for(var y in e)for(var w=0,C=t.getPositions(y);w<C.length;w+=1){var I=C[w],k=n.feature(I.index);for(var A in this.binders){var F=this.binders[A];if((F instanceof Bt||F instanceof Ft||F instanceof Gt)&&F.expression.isStateDependent===!0){var U=u.paint.get(A);F.expression=U.value,F.updatePaintArray(I.start,I.end,k,e[y],h),f=!0}}}return f},Dt.prototype.defines=function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof Nt||n instanceof Wt)&&e.push.apply(e,n.uniformNames.map(function(u){return"#define HAS_UNIFORM_"+u}))}return e},Dt.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Bt||n instanceof Ft)for(var u=0;u<n.paintVertexAttributes.length;u++)e.push(n.paintVertexAttributes[u].name);else if(n instanceof Gt)for(var h=0;h<$.members.length;h++)e.push($.members[h].name)}return e},Dt.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Nt||n instanceof Wt||n instanceof Ft)for(var u=0,h=n.uniformNames;u<h.length;u+=1)e.push(h[u])}return e},Dt.prototype.getPaintVertexBuffers=function(){return this._buffers},Dt.prototype.getUniforms=function(e,t){var n=[];for(var u in this.binders){var h=this.binders[u];if(h instanceof Nt||h instanceof Wt||h instanceof Ft)for(var f=0,y=h.uniformNames;f<y.length;f+=1){var w=y[f];if(t[w]){var C=h.getBinding(e,t[w],w);n.push({name:w,property:u,binding:C})}}}return n},Dt.prototype.setUniforms=function(e,t,n,u){for(var h=0,f=t;h<f.length;h+=1){var y=f[h],w=y.name,C=y.property;this.binders[C].setUniform(y.binding,u,n.get(C),w)}},Dt.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof Gt){var u=e.fromScale===2?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(n instanceof Bt||n instanceof Ft)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},Dt.prototype.upload=function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof Bt||n instanceof Ft||n instanceof Gt)&&n.upload(e)}this.updatePaintBuffers()},Dt.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Bt||t instanceof Ft||t instanceof Gt)&&t.destroy()}};var kt=function(e,t,n){n===void 0&&(n=function(){return!0}),this.programConfigurations={};for(var u=0,h=e;u<h.length;u+=1){var f=h[u];this.programConfigurations[f.id]=new Dt(f,t,n)}this.needsUpload=!1,this._featureMap=new se,this._bufferOffset=0};function Rn(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function pn(e,t,n){var u={color:{source:Qs,composite:Ol},number:{source:Qa,composite:Qs}},h=function(f){return{"line-pattern":{source:ha,composite:ha},"fill-pattern":{source:ha,composite:ha},"fill-extrusion-pattern":{source:ha,composite:ha}}[f]}(e);return h&&h[n]||u[t][n]}kt.prototype.populatePaintArrays=function(e,t,n,u,h,f){for(var y in this.programConfigurations)this.programConfigurations[y].populatePaintArrays(e,t,u,h,f);t.id!==void 0&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},kt.prototype.updatePaintArrays=function(e,t,n,u){for(var h=0,f=n;h<f.length;h+=1){var y=f[h];this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(e,this._featureMap,t,y,u)||this.needsUpload}},kt.prototype.get=function(e){return this.programConfigurations[e]},kt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},kt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},lt("ConstantBinder",Nt),lt("CrossFadedConstantBinder",Wt),lt("SourceExpressionBinder",Bt),lt("CrossFadedCompositeBinder",Gt),lt("CompositeExpressionBinder",Ft),lt("ProgramConfiguration",Dt,{omit:["_buffers"]}),lt("ProgramConfigurationSet",kt);var ui=Math.pow(2,14)-1,Kn=-ui-1;function an(e){for(var t=8192/e.extent,n=e.loadGeometry(),u=0;u<n.length;u++)for(var h=n[u],f=0;f<h.length;f++){var y=h[f],w=Math.round(y.x*t),C=Math.round(y.y*t);y.x=pe(w,Kn,ui),y.y=pe(C,Kn,ui),(w<y.x||w>y.x+1||C<y.y||C>y.y+1)&&Ut("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function yn(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?an(e):[]}}function eo(e,t,n,u,h){e.emplaceBack(2*t+(u+1)/2,2*n+(h+1)/2)}var yi=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new As,this.indexArray=new Ya,this.segments=new V,this.programConfigurations=new kt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function es(e,t){for(var n=0;n<e.length;n++)if(fa(t,e[n]))return!0;for(var u=0;u<t.length;u++)if(fa(e,t[u]))return!0;return!!Zu(e,t)}function Pi(e,t,n){return!!fa(e,t)||!!ts(t,e,n)}function Jo(e,t){if(e.length===1)return Gu(t,e[0]);for(var n=0;n<t.length;n++)for(var u=t[n],h=0;h<u.length;h++)if(fa(e,u[h]))return!0;for(var f=0;f<e.length;f++)if(Gu(t,e[f]))return!0;for(var y=0;y<t.length;y++)if(Zu(e,t[y]))return!0;return!1}function zo(e,t,n){if(e.length>1){if(Zu(e,t))return!0;for(var u=0;u<t.length;u++)if(ts(t[u],e,n))return!0}for(var h=0;h<e.length;h++)if(ts(e[h],t,n))return!0;return!1}function Zu(e,t){if(e.length===0||t.length===0)return!1;for(var n=0;n<e.length-1;n++)for(var u=e[n],h=e[n+1],f=0;f<t.length-1;f++)if(ru(u,h,t[f],t[f+1]))return!0;return!1}function ru(e,t,n,u){return ir(e,n,u)!==ir(t,n,u)&&ir(e,t,n)!==ir(e,t,u)}function ts(e,t,n){var u=n*n;if(t.length===1)return e.distSqr(t[0])<u;for(var h=1;h<t.length;h++)if(nu(e,t[h-1],t[h])<u)return!0;return!1}function nu(e,t,n){var u=t.distSqr(n);if(u===0)return e.distSqr(t);var h=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/u;return e.distSqr(h<0?t:h>1?n:n.sub(t)._mult(h)._add(t))}function Gu(e,t){for(var n,u,h,f=!1,y=0;y<e.length;y++)for(var w=0,C=(n=e[y]).length-1;w<n.length;C=w++)(u=n[w]).y>t.y!=(h=n[C]).y>t.y&&t.x<(h.x-u.x)*(t.y-u.y)/(h.y-u.y)+u.x&&(f=!f);return f}function fa(e,t){for(var n=!1,u=0,h=e.length-1;u<e.length;h=u++){var f=e[u],y=e[h];f.y>t.y!=y.y>t.y&&t.x<(y.x-f.x)*(t.y-f.y)/(y.y-f.y)+f.x&&(n=!n)}return n}function Wu(e,t,n){var u=n[0],h=n[2];if(e.x<u.x&&t.x<u.x||e.x>h.x&&t.x>h.x||e.y<u.y&&t.y<u.y||e.y>h.y&&t.y>h.y)return!1;var f=ir(e,t,n[0]);return f!==ir(e,t,n[1])||f!==ir(e,t,n[2])||f!==ir(e,t,n[3])}function da(e,t,n){var u=t.paint.get(e).value;return u.kind==="constant"?u.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Bn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ra(e,t,n,u,h){if(!t[0]&&!t[1])return e;var f=he.convert(t)._mult(h);n==="viewport"&&f._rotate(-u);for(var y=[],w=0;w<e.length;w++)y.push(e[w].sub(f));return y}yi.prototype.populate=function(e,t,n){var u=this.layers[0],h=[],f=null;u.type==="circle"&&(f=u.layout.get("circle-sort-key"));for(var y=0,w=e;y<w.length;y+=1){var C=w[y],I=C.feature,k=C.id,A=C.index,F=C.sourceLayerIndex,U=this.layers[0]._featureFilter.needGeometry,W=yn(I,U);if(this.layers[0]._featureFilter.filter(new Jt(this.zoom),W,n)){var K=f?f.evaluate(W,{},n):void 0,re={id:k,properties:I.properties,type:I.type,sourceLayerIndex:F,index:A,geometry:U?W.geometry:an(I),patterns:{},sortKey:K};h.push(re)}}f&&h.sort(function(Ge,vt){return Ge.sortKey-vt.sortKey});for(var Q=0,ce=h;Q<ce.length;Q+=1){var ge=ce[Q],xe=ge.geometry,Se=ge.index,Ae=ge.sourceLayerIndex,Be=e[Se].feature;this.addFeature(ge,xe,Se,n),t.featureIndex.insert(Be,xe,Se,Ae,this.index)}},yi.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},yi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},yi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},yi.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,N),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},yi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},yi.prototype.addFeature=function(e,t,n,u){for(var h=0,f=t;h<f.length;h+=1)for(var y=0,w=f[h];y<w.length;y+=1){var C=w[y],I=C.x,k=C.y;if(!(I<0||I>=8192||k<0||k>=8192)){var A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),F=A.vertexLength;eo(this.layoutVertexArray,I,k,-1,-1),eo(this.layoutVertexArray,I,k,1,-1),eo(this.layoutVertexArray,I,k,1,1),eo(this.layoutVertexArray,I,k,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+3,F+2),A.vertexLength+=4,A.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},u)},lt("CircleBucket",yi,{omit:["layers"]});var rs=new ni({"circle-sort-key":new ft(j.layout_circle["circle-sort-key"])}),zs={paint:new ni({"circle-radius":new ft(j.paint_circle["circle-radius"]),"circle-color":new ft(j.paint_circle["circle-color"]),"circle-blur":new ft(j.paint_circle["circle-blur"]),"circle-opacity":new ft(j.paint_circle["circle-opacity"]),"circle-translate":new _t(j.paint_circle["circle-translate"]),"circle-translate-anchor":new _t(j.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new _t(j.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new _t(j.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ft(j.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ft(j.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ft(j.paint_circle["circle-stroke-opacity"])}),layout:rs},_r=typeof Float32Array!="undefined"?Float32Array:Array;function yo(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ki(e,t,n){var u=t[0],h=t[1],f=t[2],y=t[3],w=t[4],C=t[5],I=t[6],k=t[7],A=t[8],F=t[9],U=t[10],W=t[11],K=t[12],re=t[13],Q=t[14],ce=t[15],ge=n[0],xe=n[1],Se=n[2],Ae=n[3];return e[0]=ge*u+xe*w+Se*A+Ae*K,e[1]=ge*h+xe*C+Se*F+Ae*re,e[2]=ge*f+xe*I+Se*U+Ae*Q,e[3]=ge*y+xe*k+Se*W+Ae*ce,e[4]=(ge=n[4])*u+(xe=n[5])*w+(Se=n[6])*A+(Ae=n[7])*K,e[5]=ge*h+xe*C+Se*F+Ae*re,e[6]=ge*f+xe*I+Se*U+Ae*Q,e[7]=ge*y+xe*k+Se*W+Ae*ce,e[8]=(ge=n[8])*u+(xe=n[9])*w+(Se=n[10])*A+(Ae=n[11])*K,e[9]=ge*h+xe*C+Se*F+Ae*re,e[10]=ge*f+xe*I+Se*U+Ae*Q,e[11]=ge*y+xe*k+Se*W+Ae*ce,e[12]=(ge=n[12])*u+(xe=n[13])*w+(Se=n[14])*A+(Ae=n[15])*K,e[13]=ge*h+xe*C+Se*F+Ae*re,e[14]=ge*f+xe*I+Se*U+Ae*Q,e[15]=ge*y+xe*k+Se*W+Ae*ce,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,n=arguments.length;n--;)t+=e[n]*e[n];return Math.sqrt(t)});var Ls,_d=ki;function Fl(e,t,n){var u=t[0],h=t[1],f=t[2],y=t[3];return e[0]=n[0]*u+n[4]*h+n[8]*f+n[12]*y,e[1]=n[1]*u+n[5]*h+n[9]*f+n[13]*y,e[2]=n[2]*u+n[6]*h+n[10]*f+n[14]*y,e[3]=n[3]*u+n[7]*h+n[11]*f+n[15]*y,e}Ls=new _r(3),_r!=Float32Array&&(Ls[0]=0,Ls[1]=0,Ls[2]=0),function(){var e=new _r(4);_r!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var xd=(function(){var e=new _r(2);_r!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(n){e.call(this,n,zs)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new yi(n)},t.prototype.queryRadius=function(n){var u=n;return da("circle-radius",this,u)+da("circle-stroke-width",this,u)+Bn(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(n,u,h,f,y,w,C,I){for(var k=Ra(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,C),A=this.paint.get("circle-radius").evaluate(u,h)+this.paint.get("circle-stroke-width").evaluate(u,h),F=this.paint.get("circle-pitch-alignment")==="map",U=F?k:function(Be,Ge){return Be.map(function(vt){return Xu(vt,Ge)})}(k,I),W=F?A*C:A,K=0,re=f;K<re.length;K+=1)for(var Q=0,ce=re[K];Q<ce.length;Q+=1){var ge=ce[Q],xe=F?ge:Xu(ge,I),Se=W,Ae=Fl([],[ge.x,ge.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Se*=Ae[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Se*=w.cameraToCenterDistance/Ae[3]),Pi(U,xe,Se))return!0}return!1},t}(pa));function Xu(e,t){var n=Fl([],[e.x,e.y,0,1],t);return new he(n[0]/n[3],n[1]/n[3])}var Sh=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(yi);function iu(e,t,n,u){var h=t.width,f=t.height;if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==h*f*n)throw new RangeError("mismatched image size")}else u=new Uint8Array(h*f*n);return e.width=h,e.height=f,e.data=u,e}function Rl(e,t,n){var u=t.width,h=t.height;if(u!==e.width||h!==e.height){var f=iu({},{width:u,height:h},n);wd(e,f,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,u),height:Math.min(e.height,h)},n),e.width=u,e.height=h,e.data=f.data}}function wd(e,t,n,u,h,f){if(h.width===0||h.height===0)return t;if(h.width>e.width||h.height>e.height||n.x>e.width-h.width||n.y>e.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>t.width||h.height>t.height||u.x>t.width-h.width||u.y>t.height-h.height)throw new RangeError("out of range destination coordinates for image copy");for(var y=e.data,w=t.data,C=0;C<h.height;C++)for(var I=((n.y+C)*e.width+n.x)*f,k=((u.y+C)*t.width+u.x)*f,A=0;A<h.width*f;A++)w[k+A]=y[I+A];return t}lt("HeatmapBucket",Sh,{omit:["layers"]});var Ku=function(e,t){iu(this,e,1,t)};Ku.prototype.resize=function(e){Rl(this,e,1)},Ku.prototype.clone=function(){return new Ku({width:this.width,height:this.height},new Uint8Array(this.data))},Ku.copy=function(e,t,n,u,h){wd(e,t,n,u,h,1)};var to=function(e,t){iu(this,e,4,t)};to.prototype.resize=function(e){Rl(this,e,4)},to.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},to.prototype.clone=function(){return new to({width:this.width,height:this.height},new Uint8Array(this.data))},to.copy=function(e,t,n,u,h){wd(e,t,n,u,h,4)},lt("AlphaImage",Ku),lt("RGBAImage",to);var a1={paint:new ni({"heatmap-radius":new ft(j.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ft(j.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new _t(j.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Yo(j.paint_heatmap["heatmap-color"]),"heatmap-opacity":new _t(j.paint_heatmap["heatmap-opacity"])})};function cv(e){var t={},n=e.resolution||256,u=e.clips?e.clips.length:1,h=e.image||new to({width:n,height:u}),f=function(W,K,re){t[e.evaluationKey]=re;var Q=e.expression.evaluate(t);h.data[W+K+0]=Math.floor(255*Q.r/Q.a),h.data[W+K+1]=Math.floor(255*Q.g/Q.a),h.data[W+K+2]=Math.floor(255*Q.b/Q.a),h.data[W+K+3]=Math.floor(255*Q.a)};if(e.clips)for(var y=0,w=0;y<u;++y,w+=4*n)for(var C=0,I=0;C<n;C++,I+=4){var k=C/(n-1),A=e.clips[y];f(w,I,A.start*(1-k)+A.end*k)}else for(var F=0,U=0;F<n;F++,U+=4)f(0,U,F/(n-1));return h}var s1=function(e){function t(n){e.call(this,n,a1),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new Sh(n)},t.prototype._handleSpecialPaintPropertyUpdate=function(n){n==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=cv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(pa),u1={paint:new ni({"hillshade-illumination-direction":new _t(j.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new _t(j.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new _t(j.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new _t(j.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new _t(j.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new _t(j.paint_hillshade["hillshade-accent-color"])})},l1=function(e){function t(n){e.call(this,n,u1)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(pa),c1=Xn([{name:"a_pos",components:2,type:"Int16"}],4).members,bd=Eh,p1=Eh;function Eh(e,t,n){n=n||2;var u,h,f,y,w,C,I,k=t&&t.length,A=k?t[0]*n:e.length,F=pv(e,0,A,n,!0),U=[];if(!F||F.next===F.prev)return U;if(k&&(F=function(K,re,Q,ce){var ge,xe,Se,Ae=[];for(ge=0,xe=re.length;ge<xe;ge++)(Se=pv(K,re[ge]*ce,ge<xe-1?re[ge+1]*ce:K.length,ce,!1))===Se.next&&(Se.steiner=!0),Ae.push(_1(Se));for(Ae.sort(y1),ge=0;ge<Ae.length;ge++)v1(Ae[ge],Q),Q=ou(Q,Q.next);return Q}(e,t,F,n)),e.length>80*n){u=f=e[0],h=y=e[1];for(var W=n;W<A;W+=n)(w=e[W])<u&&(u=w),(C=e[W+1])<h&&(h=C),w>f&&(f=w),C>y&&(y=C);I=(I=Math.max(f-u,y-h))!==0?1/I:0}return Jc(F,U,n,u,h,I),U}function pv(e,t,n,u,h){var f,y;if(h===Cd(e,t,n,u)>0)for(f=t;f<n;f+=u)y=dv(f,e[f],e[f+1],y);else for(f=n-u;f>=t;f-=u)y=dv(f,e[f],e[f+1],y);return y&&Ch(y,y.next)&&(ep(y),y=y.next),y}function ou(e,t){if(!e)return e;t||(t=e);var n,u=e;do if(n=!1,u.steiner||!Ch(u,u.next)&&Mn(u.prev,u,u.next)!==0)u=u.next;else{if(ep(u),(u=t=u.prev)===u.next)break;n=!0}while(n||u!==t);return t}function Jc(e,t,n,u,h,f,y){if(e){!y&&f&&function(k,A,F,U){var W=k;do W.z===null&&(W.z=Sd(W.x,W.y,A,F,U)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==k);W.prevZ.nextZ=null,W.prevZ=null,function(K){var re,Q,ce,ge,xe,Se,Ae,Be,Ge=1;do{for(Q=K,K=null,xe=null,Se=0;Q;){for(Se++,ce=Q,Ae=0,re=0;re<Ge&&(Ae++,ce=ce.nextZ);re++);for(Be=Ge;Ae>0||Be>0&&ce;)Ae!==0&&(Be===0||!ce||Q.z<=ce.z)?(ge=Q,Q=Q.nextZ,Ae--):(ge=ce,ce=ce.nextZ,Be--),xe?xe.nextZ=ge:K=ge,ge.prevZ=xe,xe=ge;Q=ce}xe.nextZ=null,Ge*=2}while(Se>1)}(W)}(e,u,h,f);for(var w,C,I=e;e.prev!==e.next;)if(w=e.prev,C=e.next,f?f1(e,u,h,f):h1(e))t.push(w.i/n),t.push(e.i/n),t.push(C.i/n),ep(e),e=C.next,I=C.next;else if((e=C)===I){y?y===1?Jc(e=d1(ou(e),t,n),t,n,u,h,f,2):y===2&&m1(e,t,n,u,h,f):Jc(ou(e),t,n,u,h,f,1);break}}}function h1(e){var t=e.prev,n=e,u=e.next;if(Mn(t,n,u)>=0)return!1;for(var h=e.next.next;h!==e.prev;){if(Bl(t.x,t.y,n.x,n.y,u.x,u.y,h.x,h.y)&&Mn(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function f1(e,t,n,u){var h=e.prev,f=e,y=e.next;if(Mn(h,f,y)>=0)return!1;for(var w=h.x>f.x?h.x>y.x?h.x:y.x:f.x>y.x?f.x:y.x,C=h.y>f.y?h.y>y.y?h.y:y.y:f.y>y.y?f.y:y.y,I=Sd(h.x<f.x?h.x<y.x?h.x:y.x:f.x<y.x?f.x:y.x,h.y<f.y?h.y<y.y?h.y:y.y:f.y<y.y?f.y:y.y,t,n,u),k=Sd(w,C,t,n,u),A=e.prevZ,F=e.nextZ;A&&A.z>=I&&F&&F.z<=k;){if(A!==e.prev&&A!==e.next&&Bl(h.x,h.y,f.x,f.y,y.x,y.y,A.x,A.y)&&Mn(A.prev,A,A.next)>=0||(A=A.prevZ,F!==e.prev&&F!==e.next&&Bl(h.x,h.y,f.x,f.y,y.x,y.y,F.x,F.y)&&Mn(F.prev,F,F.next)>=0))return!1;F=F.nextZ}for(;A&&A.z>=I;){if(A!==e.prev&&A!==e.next&&Bl(h.x,h.y,f.x,f.y,y.x,y.y,A.x,A.y)&&Mn(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;F&&F.z<=k;){if(F!==e.prev&&F!==e.next&&Bl(h.x,h.y,f.x,f.y,y.x,y.y,F.x,F.y)&&Mn(F.prev,F,F.next)>=0)return!1;F=F.nextZ}return!0}function d1(e,t,n){var u=e;do{var h=u.prev,f=u.next.next;!Ch(h,f)&&hv(h,u,u.next,f)&&Qc(h,f)&&Qc(f,h)&&(t.push(h.i/n),t.push(u.i/n),t.push(f.i/n),ep(u),ep(u.next),u=e=f),u=u.next}while(u!==e);return ou(u)}function m1(e,t,n,u,h,f){var y=e;do{for(var w=y.next.next;w!==y.prev;){if(y.i!==w.i&&x1(y,w)){var C=fv(y,w);return y=ou(y,y.next),C=ou(C,C.next),Jc(y,t,n,u,h,f),void Jc(C,t,n,u,h,f)}w=w.next}y=y.next}while(y!==e)}function y1(e,t){return e.x-t.x}function v1(e,t){if(t=function(u,h){var f,y=h,w=u.x,C=u.y,I=-1/0;do{if(C<=y.y&&C>=y.next.y&&y.next.y!==y.y){var k=y.x+(C-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(k<=w&&k>I){if(I=k,k===w){if(C===y.y)return y;if(C===y.next.y)return y.next}f=y.x<y.next.x?y:y.next}}y=y.next}while(y!==h);if(!f)return null;if(w===I)return f;var A,F=f,U=f.x,W=f.y,K=1/0;y=f;do w>=y.x&&y.x>=U&&w!==y.x&&Bl(C<W?w:I,C,U,W,C<W?I:w,C,y.x,y.y)&&(A=Math.abs(C-y.y)/(w-y.x),Qc(y,u)&&(A<K||A===K&&(y.x>f.x||y.x===f.x&&g1(f,y)))&&(f=y,K=A)),y=y.next;while(y!==F);return f}(e,t)){var n=fv(t,e);ou(t,t.next),ou(n,n.next)}}function g1(e,t){return Mn(e.prev,e,t.prev)<0&&Mn(t.next,e,e.next)<0}function Sd(e,t,n,u,h){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*h)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-u)*h)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function _1(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function Bl(e,t,n,u,h,f,y,w){return(h-y)*(t-w)-(e-y)*(f-w)>=0&&(e-y)*(u-w)-(n-y)*(t-w)>=0&&(n-y)*(f-w)-(h-y)*(u-w)>=0}function x1(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(n,u){var h=n;do{if(h.i!==n.i&&h.next.i!==n.i&&h.i!==u.i&&h.next.i!==u.i&&hv(h,h.next,n,u))return!0;h=h.next}while(h!==n);return!1}(e,t)&&(Qc(e,t)&&Qc(t,e)&&function(n,u){var h=n,f=!1,y=(n.x+u.x)/2,w=(n.y+u.y)/2;do h.y>w!=h.next.y>w&&h.next.y!==h.y&&y<(h.next.x-h.x)*(w-h.y)/(h.next.y-h.y)+h.x&&(f=!f),h=h.next;while(h!==n);return f}(e,t)&&(Mn(e.prev,e,t.prev)||Mn(e,t.prev,t))||Ch(e,t)&&Mn(e.prev,e,e.next)>0&&Mn(t.prev,t,t.next)>0)}function Mn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ch(e,t){return e.x===t.x&&e.y===t.y}function hv(e,t,n,u){var h=Ih(Mn(e,t,n)),f=Ih(Mn(e,t,u)),y=Ih(Mn(n,u,e)),w=Ih(Mn(n,u,t));return h!==f&&y!==w||!(h!==0||!Th(e,n,t))||!(f!==0||!Th(e,u,t))||!(y!==0||!Th(n,e,u))||!(w!==0||!Th(n,t,u))}function Th(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Ih(e){return e>0?1:e<0?-1:0}function Qc(e,t){return Mn(e.prev,e,e.next)<0?Mn(e,t,e.next)>=0&&Mn(e,e.prev,t)>=0:Mn(e,t,e.prev)<0||Mn(e,e.next,t)<0}function fv(e,t){var n=new Ed(e.i,e.x,e.y),u=new Ed(t.i,t.x,t.y),h=e.next,f=t.prev;return e.next=t,t.prev=e,n.next=h,h.prev=n,u.next=n,n.prev=u,f.next=u,u.prev=f,u}function dv(e,t,n,u){var h=new Ed(e,t,n);return u?(h.next=u.next,h.prev=u,u.next.prev=h,u.next=h):(h.prev=h,h.next=h),h}function ep(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ed(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Cd(e,t,n,u){for(var h=0,f=t,y=n-u;f<n;f+=u)h+=(e[y]-e[f])*(e[f+1]+e[y+1]),y=f;return h}function w1(e,t,n,u,h){(function f(y,w,C,I,k){for(;I>C;){if(I-C>600){var A=I-C+1,F=w-C+1,U=Math.log(A),W=.5*Math.exp(2*U/3),K=.5*Math.sqrt(U*W*(A-W)/A)*(F-A/2<0?-1:1);f(y,w,Math.max(C,Math.floor(w-F*W/A+K)),Math.min(I,Math.floor(w+(A-F)*W/A+K)),k)}var re=y[w],Q=C,ce=I;for(tp(y,C,w),k(y[I],re)>0&&tp(y,C,I);Q<ce;){for(tp(y,Q,ce),Q++,ce--;k(y[Q],re)<0;)Q++;for(;k(y[ce],re)>0;)ce--}k(y[C],re)===0?tp(y,C,ce):tp(y,++ce,I),ce<=w&&(C=ce+1),w<=ce&&(I=ce-1)}})(e,t,n||0,u||e.length-1,h||b1)}function tp(e,t,n){var u=e[t];e[t]=e[n],e[n]=u}function b1(e,t){return e<t?-1:e>t?1:0}function Td(e,t){var n=e.length;if(n<=1)return[e];for(var u,h,f=[],y=0;y<n;y++){var w=qr(e[y]);w!==0&&(e[y].area=Math.abs(w),h===void 0&&(h=w<0),h===w<0?(u&&f.push(u),u=[e[y]]):u.push(e[y]))}if(u&&f.push(u),t>1)for(var C=0;C<f.length;C++)f[C].length<=t||(w1(f[C],t,1,f[C].length-1,S1),f[C]=f[C].slice(0,t));return f}function S1(e,t){return t.area-e.area}function Id(e,t,n){for(var u=n.patternDependencies,h=!1,f=0,y=t;f<y.length;f+=1){var w=y[f].paint.get(e+"-pattern");w.isConstant()||(h=!0);var C=w.constantOr(null);C&&(h=!0,u[C.to]=!0,u[C.from]=!0)}return h}function Pd(e,t,n,u,h){for(var f=h.patternDependencies,y=0,w=t;y<w.length;y+=1){var C=w[y],I=C.paint.get(e+"-pattern").value;if(I.kind!=="constant"){var k=I.evaluate({zoom:u-1},n,{},h.availableImages),A=I.evaluate({zoom:u},n,{},h.availableImages),F=I.evaluate({zoom:u+1},n,{},h.availableImages);A=A&&A.name?A.name:A,F=F&&F.name?F.name:F,f[k=k&&k.name?k.name:k]=!0,f[A]=!0,f[F]=!0,n.patterns[C.id]={min:k,mid:A,max:F}}}return n}Eh.deviation=function(e,t,n,u){var h=t&&t.length,f=Math.abs(Cd(e,0,h?t[0]*n:e.length,n));if(h)for(var y=0,w=t.length;y<w;y++)f-=Math.abs(Cd(e,t[y]*n,y<w-1?t[y+1]*n:e.length,n));var C=0;for(y=0;y<u.length;y+=3){var I=u[y]*n,k=u[y+1]*n,A=u[y+2]*n;C+=Math.abs((e[I]-e[A])*(e[k+1]-e[I+1])-(e[I]-e[k])*(e[A+1]-e[I+1]))}return f===0&&C===0?0:Math.abs((C-f)/f)},Eh.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},u=0,h=0;h<e.length;h++){for(var f=0;f<e[h].length;f++)for(var y=0;y<t;y++)n.vertices.push(e[h][f][y]);h>0&&n.holes.push(u+=e[h-1].length)}return n},bd.default=p1;var Ba=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new As,this.indexArray=new Ya,this.indexArray2=new qu,this.programConfigurations=new kt(e.layers,e.zoom),this.segments=new V,this.segments2=new V,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Ba.prototype.populate=function(e,t,n){this.hasPattern=Id("fill",this.layers,t);for(var u=this.layers[0].layout.get("fill-sort-key"),h=[],f=0,y=e;f<y.length;f+=1){var w=y[f],C=w.feature,I=w.id,k=w.index,A=w.sourceLayerIndex,F=this.layers[0]._featureFilter.needGeometry,U=yn(C,F);if(this.layers[0]._featureFilter.filter(new Jt(this.zoom),U,n)){var W=u?u.evaluate(U,{},n,t.availableImages):void 0,K={id:I,properties:C.properties,type:C.type,sourceLayerIndex:A,index:k,geometry:F?U.geometry:an(C),patterns:{},sortKey:W};h.push(K)}}u&&h.sort(function(Be,Ge){return Be.sortKey-Ge.sortKey});for(var re=0,Q=h;re<Q.length;re+=1){var ce=Q[re],ge=ce.geometry,xe=ce.index,Se=ce.sourceLayerIndex;if(this.hasPattern){var Ae=Pd("fill",this.layers,ce,this.zoom,t);this.patternFeatures.push(Ae)}else this.addFeature(ce,ge,xe,n,{});t.featureIndex.insert(e[xe].feature,ge,xe,Se,this.index)}},Ba.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Ba.prototype.addFeatures=function(e,t,n){for(var u=0,h=this.patternFeatures;u<h.length;u+=1){var f=h[u];this.addFeature(f,f.geometry,f.index,t,n)}},Ba.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ba.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ba.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,c1),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Ba.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ba.prototype.addFeature=function(e,t,n,u,h){for(var f=0,y=Td(t,500);f<y.length;f+=1){for(var w=y[f],C=0,I=0,k=w;I<k.length;I+=1)C+=k[I].length;for(var A=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),F=A.vertexLength,U=[],W=[],K=0,re=w;K<re.length;K+=1){var Q=re[K];if(Q.length!==0){Q!==w[0]&&W.push(U.length/2);var ce=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),ge=ce.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(ge+Q.length-1,ge),U.push(Q[0].x),U.push(Q[0].y);for(var xe=1;xe<Q.length;xe++)this.layoutVertexArray.emplaceBack(Q[xe].x,Q[xe].y),this.indexArray2.emplaceBack(ge+xe-1,ge+xe),U.push(Q[xe].x),U.push(Q[xe].y);ce.vertexLength+=Q.length,ce.primitiveLength+=Q.length}}for(var Se=bd(U,W),Ae=0;Ae<Se.length;Ae+=3)this.indexArray.emplaceBack(F+Se[Ae],F+Se[Ae+1],F+Se[Ae+2]);A.vertexLength+=C,A.primitiveLength+=Se.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,u)},lt("FillBucket",Ba,{omit:["layers","patternFeatures"]});var E1=new ni({"fill-sort-key":new ft(j.layout_fill["fill-sort-key"])}),C1={paint:new ni({"fill-antialias":new _t(j.paint_fill["fill-antialias"]),"fill-opacity":new ft(j.paint_fill["fill-opacity"]),"fill-color":new ft(j.paint_fill["fill-color"]),"fill-outline-color":new ft(j.paint_fill["fill-outline-color"]),"fill-translate":new _t(j.paint_fill["fill-translate"]),"fill-translate-anchor":new _t(j.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ml(j.paint_fill["fill-pattern"])}),layout:E1},T1=function(e){function t(n){e.call(this,n,C1)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(n,u){e.prototype.recalculate.call(this,n,u);var h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(n){return new Ba(n)},t.prototype.queryRadius=function(){return Bn(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(n,u,h,f,y,w,C){return Jo(Ra(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,C),f)},t.prototype.isTileClipped=function(){return!0},t}(pa),I1=Xn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,mv=Ul;function Ul(e,t,n,u,h){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=u,this._values=h,e.readFields(P1,this,t)}function P1(e,t,n){e==1?t.id=n.readVarint():e==2?function(u,h){for(var f=u.readVarint()+u.pos;u.pos<f;){var y=h._keys[u.readVarint()],w=h._values[u.readVarint()];h.properties[y]=w}}(n,t):e==3?t.type=n.readVarint():e==4&&(t._geometry=n.pos)}function k1(e){for(var t,n,u=0,h=0,f=e.length,y=f-1;h<f;y=h++)u+=((n=e[y]).x-(t=e[h]).x)*(t.y+n.y);return u}Ul.types=["Unknown","Point","LineString","Polygon"],Ul.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,u=1,h=0,f=0,y=0,w=[];e.pos<n;){if(h<=0){var C=e.readVarint();u=7&C,h=C>>3}if(h--,u===1||u===2)f+=e.readSVarint(),y+=e.readSVarint(),u===1&&(t&&w.push(t),t=[]),t.push(new he(f,y));else{if(u!==7)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&w.push(t),w},Ul.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,u=0,h=0,f=0,y=1/0,w=-1/0,C=1/0,I=-1/0;e.pos<t;){if(u<=0){var k=e.readVarint();n=7&k,u=k>>3}if(u--,n===1||n===2)(h+=e.readSVarint())<y&&(y=h),h>w&&(w=h),(f+=e.readSVarint())<C&&(C=f),f>I&&(I=f);else if(n!==7)throw new Error("unknown command "+n)}return[y,C,w,I]},Ul.prototype.toGeoJSON=function(e,t,n){var u,h,f=this.extent*Math.pow(2,n),y=this.extent*e,w=this.extent*t,C=this.loadGeometry(),I=Ul.types[this.type];function k(U){for(var W=0;W<U.length;W++){var K=U[W];U[W]=[360*(K.x+y)/f-180,360/Math.PI*Math.atan(Math.exp((180-360*(K.y+w)/f)*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(u=0;u<C.length;u++)A[u]=C[u][0];k(C=A);break;case 2:for(u=0;u<C.length;u++)k(C[u]);break;case 3:for(C=function(U){var W=U.length;if(W<=1)return[U];for(var K,re,Q=[],ce=0;ce<W;ce++){var ge=k1(U[ce]);ge!==0&&(re===void 0&&(re=ge<0),re===ge<0?(K&&Q.push(K),K=[U[ce]]):K.push(U[ce]))}return K&&Q.push(K),Q}(C),u=0;u<C.length;u++)for(h=0;h<C[u].length;h++)k(C[u][h])}C.length===1?C=C[0]:I="Multi"+I;var F={type:"Feature",geometry:{type:I,coordinates:C},properties:this.properties};return"id"in this&&(F.id=this.id),F};var yv=vv;function vv(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(A1,this,t),this.length=this._features.length}function A1(e,t,n){e===15?t.version=n.readVarint():e===1?t.name=n.readString():e===5?t.extent=n.readVarint():e===2?t._features.push(n.pos):e===3?t._keys.push(n.readString()):e===4&&t._values.push(function(u){for(var h=null,f=u.readVarint()+u.pos;u.pos<f;){var y=u.readVarint()>>3;h=y===1?u.readString():y===2?u.readFloat():y===3?u.readDouble():y===4?u.readVarint64():y===5?u.readVarint():y===6?u.readSVarint():y===7?u.readBoolean():null}return h}(n))}function M1(e,t,n){if(e===3){var u=new yv(n,n.readVarint()+n.pos);u.length&&(t[u.name]=u)}}vv.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new mv(this._pbf,t,this.extent,this._keys,this._values)};var Nl={VectorTile:function(e,t){this.layers=e.readFields(M1,{},t)},VectorTileFeature:mv,VectorTileLayer:yv},z1=Nl.VectorTileFeature.types,kd=Math.pow(2,13);function rp(e,t,n,u,h,f,y,w){e.emplaceBack(t,n,2*Math.floor(u*kd)+y,h*kd*2,f*kd*2,Math.round(w))}var Ua=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Fa,this.indexArray=new Ya,this.programConfigurations=new kt(e.layers,e.zoom),this.segments=new V,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function L1(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Ua.prototype.populate=function(e,t,n){this.features=[],this.hasPattern=Id("fill-extrusion",this.layers,t);for(var u=0,h=e;u<h.length;u+=1){var f=h[u],y=f.feature,w=f.id,C=f.index,I=f.sourceLayerIndex,k=this.layers[0]._featureFilter.needGeometry,A=yn(y,k);if(this.layers[0]._featureFilter.filter(new Jt(this.zoom),A,n)){var F={id:w,sourceLayerIndex:I,index:C,geometry:k?A.geometry:an(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(Pd("fill-extrusion",this.layers,F,this.zoom,t)):this.addFeature(F,F.geometry,C,n,{}),t.featureIndex.insert(y,F.geometry,C,I,this.index,!0)}}},Ua.prototype.addFeatures=function(e,t,n){for(var u=0,h=this.features;u<h.length;u+=1){var f=h[u];this.addFeature(f,f.geometry,f.index,t,n)}},Ua.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Ua.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ua.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ua.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,I1),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ua.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ua.prototype.addFeature=function(e,t,n,u,h){for(var f=0,y=Td(t,500);f<y.length;f+=1){for(var w=y[f],C=0,I=0,k=w;I<k.length;I+=1)C+=k[I].length;for(var A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),F=0,U=w;F<U.length;F+=1){var W=U[F];if(W.length!==0&&!((Yt=W).every(function(Zt){return Zt.x<0})||Yt.every(function(Zt){return Zt.x>8192})||Yt.every(function(Zt){return Zt.y<0})||Yt.every(function(Zt){return Zt.y>8192})))for(var K=0,re=0;re<W.length;re++){var Q=W[re];if(re>=1){var ce=W[re-1];if(!L1(Q,ce)){A.vertexLength+4>V.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ge=Q.sub(ce)._perp()._unit(),xe=ce.dist(Q);K+xe>32768&&(K=0),rp(this.layoutVertexArray,Q.x,Q.y,ge.x,ge.y,0,0,K),rp(this.layoutVertexArray,Q.x,Q.y,ge.x,ge.y,0,1,K),rp(this.layoutVertexArray,ce.x,ce.y,ge.x,ge.y,0,0,K+=xe),rp(this.layoutVertexArray,ce.x,ce.y,ge.x,ge.y,0,1,K);var Se=A.vertexLength;this.indexArray.emplaceBack(Se,Se+2,Se+1),this.indexArray.emplaceBack(Se+1,Se+2,Se+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+C>V.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),z1[e.type]==="Polygon"){for(var Ae=[],Be=[],Ge=A.vertexLength,vt=0,et=w;vt<et.length;vt+=1){var wt=et[vt];if(wt.length!==0){wt!==w[0]&&Be.push(Ae.length/2);for(var tt=0;tt<wt.length;tt++){var Kt=wt[tt];rp(this.layoutVertexArray,Kt.x,Kt.y,0,0,1,1,0),Ae.push(Kt.x),Ae.push(Kt.y)}}}for(var Lt=bd(Ae,Be),dt=0;dt<Lt.length;dt+=3)this.indexArray.emplaceBack(Ge+Lt[dt],Ge+Lt[dt+2],Ge+Lt[dt+1]);A.primitiveLength+=Lt.length/3,A.vertexLength+=C}}var Yt;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,u)},lt("FillExtrusionBucket",Ua,{omit:["layers","features"]});var D1={paint:new ni({"fill-extrusion-opacity":new _t(j["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ft(j["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new _t(j["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new _t(j["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ml(j["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ft(j["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ft(j["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new _t(j["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},O1=function(e){function t(n){e.call(this,n,D1)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new Ua(n)},t.prototype.queryRadius=function(){return Bn(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(n,u,h,f,y,w,C,I){var k=Ra(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,C),A=this.paint.get("fill-extrusion-height").evaluate(u,h),F=this.paint.get("fill-extrusion-base").evaluate(u,h),U=function(K,re,Q,ce){for(var ge=[],xe=0,Se=K;xe<Se.length;xe+=1){var Ae=Se[xe],Be=[Ae.x,Ae.y,0,1];Fl(Be,Be,re),ge.push(new he(Be[0]/Be[3],Be[1]/Be[3]))}return ge}(k,I),W=function(K,re,Q,ce){for(var ge=[],xe=[],Se=ce[8]*re,Ae=ce[9]*re,Be=ce[10]*re,Ge=ce[11]*re,vt=ce[8]*Q,et=ce[9]*Q,wt=ce[10]*Q,tt=ce[11]*Q,Kt=0,Lt=K;Kt<Lt.length;Kt+=1){for(var dt=[],Yt=[],Zt=0,ur=Lt[Kt];Zt<ur.length;Zt+=1){var bt=ur[Zt],vr=bt.x,Hr=bt.y,hn=ce[0]*vr+ce[4]*Hr+ce[12],sn=ce[1]*vr+ce[5]*Hr+ce[13],$r=ce[2]*vr+ce[6]*Hr+ce[14],fn=ce[3]*vr+ce[7]*Hr+ce[15],Un=$r+Be,Nn=fn+Ge,gi=hn+vt,$n=sn+et,_i=$r+wt,vn=fn+tt,Yn=new he((hn+Se)/Nn,(sn+Ae)/Nn);Yn.z=Un/Nn,dt.push(Yn);var nr=new he(gi/vn,$n/vn);nr.z=_i/vn,Yt.push(nr)}ge.push(dt),xe.push(Yt)}return[ge,xe]}(f,F,A,I);return function(K,re,Q){var ce=1/0;Jo(Q,re)&&(ce=gv(Q,re[0]));for(var ge=0;ge<re.length;ge++)for(var xe=re[ge],Se=K[ge],Ae=0;Ae<xe.length-1;Ae++){var Be=xe[Ae],Ge=[Be,xe[Ae+1],Se[Ae+1],Se[Ae],Be];es(Q,Ge)&&(ce=Math.min(ce,gv(Q,Ge)))}return ce!==1/0&&ce}(W[0],W[1],U)},t}(pa);function np(e,t){return e.x*t.x+e.y*t.y}function gv(e,t){if(e.length===1){for(var n,u=0,h=t[u++];!n||h.equals(n);)if(!(n=t[u++]))return 1/0;for(;u<t.length;u++){var f=t[u],y=e[0],w=n.sub(h),C=f.sub(h),I=y.sub(h),k=np(w,w),A=np(w,C),F=np(C,C),U=np(I,w),W=np(I,C),K=k*F-A*A,re=(F*U-A*W)/K,Q=(k*W-A*U)/K,ce=h.z*(1-re-Q)+n.z*re+f.z*Q;if(isFinite(ce))return ce}return 1/0}for(var ge=1/0,xe=0,Se=t;xe<Se.length;xe+=1)ge=Math.min(ge,Se[xe].z);return ge}var F1=Xn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,R1=Xn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,B1=Nl.VectorTileFeature.types,U1=Math.cos(Math.PI/180*37.5),_v=Math.pow(2,14)/.5,Ai=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(n){return n.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(n){t.gradients[n.id]={}}),this.layoutVertexArray=new Qi,this.layoutVertexArray2=new Qs,this.indexArray=new Ya,this.programConfigurations=new kt(e.layers,e.zoom),this.segments=new V,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(n){return n.isStateDependent()}).map(function(n){return n.id})};Ai.prototype.populate=function(e,t,n){this.hasPattern=Id("line",this.layers,t);for(var u=this.layers[0].layout.get("line-sort-key"),h=[],f=0,y=e;f<y.length;f+=1){var w=y[f],C=w.feature,I=w.id,k=w.index,A=w.sourceLayerIndex,F=this.layers[0]._featureFilter.needGeometry,U=yn(C,F);if(this.layers[0]._featureFilter.filter(new Jt(this.zoom),U,n)){var W=u?u.evaluate(U,{},n):void 0,K={id:I,properties:C.properties,type:C.type,sourceLayerIndex:A,index:k,geometry:F?U.geometry:an(C),patterns:{},sortKey:W};h.push(K)}}u&&h.sort(function(Be,Ge){return Be.sortKey-Ge.sortKey});for(var re=0,Q=h;re<Q.length;re+=1){var ce=Q[re],ge=ce.geometry,xe=ce.index,Se=ce.sourceLayerIndex;if(this.hasPattern){var Ae=Pd("line",this.layers,ce,this.zoom,t);this.patternFeatures.push(Ae)}else this.addFeature(ce,ge,xe,n,{});t.featureIndex.insert(e[xe].feature,ge,xe,Se,this.index)}},Ai.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Ai.prototype.addFeatures=function(e,t,n){for(var u=0,h=this.patternFeatures;u<h.length;u+=1){var f=h[u];this.addFeature(f,f.geometry,f.index,t,n)}},Ai.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ai.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ai.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,R1)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,F1),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ai.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ai.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Ai.prototype.addFeature=function(e,t,n,u,h){var f=this.layers[0].layout,y=f.get("line-join").evaluate(e,{}),w=f.get("line-cap"),C=f.get("line-miter-limit"),I=f.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var k=0,A=t;k<A.length;k+=1)this.addLine(A[k],e,y,w,C,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,u)},Ai.prototype.addLine=function(e,t,n,u,h,f){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var y=0;y<e.length-1;y++)this.totalDistance+=e[y].dist(e[y+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var w=B1[t.type]==="Polygon",C=e.length;C>=2&&e[C-1].equals(e[C-2]);)C--;for(var I=0;I<C-1&&e[I].equals(e[I+1]);)I++;if(!(C<(w?3:2))){n==="bevel"&&(h=1.05);var k,A=this.overscaling<=16?122880/(512*this.overscaling):0,F=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),U=void 0,W=void 0,K=void 0,re=void 0;this.e1=this.e2=-1,w&&(re=e[I].sub(k=e[C-2])._unit()._perp());for(var Q=I;Q<C;Q++)if(!(W=Q===C-1?w?e[I+1]:void 0:e[Q+1])||!e[Q].equals(W)){re&&(K=re),k&&(U=k),k=e[Q],re=W?W.sub(k)._unit()._perp():K;var ce=(K=K||re).add(re);ce.x===0&&ce.y===0||ce._unit();var ge=K.x*re.x+K.y*re.y,xe=ce.x*re.x+ce.y*re.y,Se=xe!==0?1/xe:1/0,Ae=2*Math.sqrt(2-2*xe),Be=xe<U1&&U&&W,Ge=K.x*re.y-K.y*re.x>0;if(Be&&Q>I){var vt=k.dist(U);if(vt>2*A){var et=k.sub(k.sub(U)._mult(A/vt)._round());this.updateDistance(U,et),this.addCurrentVertex(et,K,0,0,F),U=et}}var wt=U&&W,tt=wt?n:w?"butt":u;if(wt&&tt==="round"&&(Se<f?tt="miter":Se<=2&&(tt="fakeround")),tt==="miter"&&Se>h&&(tt="bevel"),tt==="bevel"&&(Se>2&&(tt="flipbevel"),Se<h&&(tt="miter")),U&&this.updateDistance(U,k),tt==="miter")ce._mult(Se),this.addCurrentVertex(k,ce,0,0,F);else if(tt==="flipbevel"){if(Se>100)ce=re.mult(-1);else{var Kt=Se*K.add(re).mag()/K.sub(re).mag();ce._perp()._mult(Kt*(Ge?-1:1))}this.addCurrentVertex(k,ce,0,0,F),this.addCurrentVertex(k,ce.mult(-1),0,0,F)}else if(tt==="bevel"||tt==="fakeround"){var Lt=-Math.sqrt(Se*Se-1),dt=Ge?Lt:0,Yt=Ge?0:Lt;if(U&&this.addCurrentVertex(k,K,dt,Yt,F),tt==="fakeround")for(var Zt=Math.round(180*Ae/Math.PI/20),ur=1;ur<Zt;ur++){var bt=ur/Zt;if(bt!==.5){var vr=bt-.5;bt+=bt*vr*(bt-1)*((1.0904+ge*(ge*(3.55645-1.43519*ge)-3.2452))*vr*vr+(.848013+ge*(.215638*ge-1.06021)))}var Hr=re.sub(K)._mult(bt)._add(K)._unit()._mult(Ge?-1:1);this.addHalfVertex(k,Hr.x,Hr.y,!1,Ge,0,F)}W&&this.addCurrentVertex(k,re,-dt,-Yt,F)}else if(tt==="butt")this.addCurrentVertex(k,ce,0,0,F);else if(tt==="square"){var hn=U?1:-1;this.addCurrentVertex(k,ce,hn,hn,F)}else tt==="round"&&(U&&(this.addCurrentVertex(k,K,0,0,F),this.addCurrentVertex(k,K,1,1,F,!0)),W&&(this.addCurrentVertex(k,re,-1,-1,F,!0),this.addCurrentVertex(k,re,0,0,F)));if(Be&&Q<C-1){var sn=k.dist(W);if(sn>2*A){var $r=k.add(W.sub(k)._mult(A/sn)._round());this.updateDistance(k,$r),this.addCurrentVertex($r,re,0,0,F),k=$r}}}}},Ai.prototype.addCurrentVertex=function(e,t,n,u,h,f){f===void 0&&(f=!1);var y=t.y*u-t.x,w=-t.y-t.x*u;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,f,!1,n,h),this.addHalfVertex(e,y,w,f,!0,-u,h),this.distance>_v/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,n,u,h,f))},Ai.prototype.addHalfVertex=function(e,t,n,u,h,f,y){var w=.5*(this.lineClips?this.scaledDistance*(_v-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(u?1:0),(e.y<<1)+(h?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(f===0?0:f<0?-1:1)|(63&w)<<2,w>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var C=y.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),y.primitiveLength++),h?this.e2=C:this.e1=C},Ai.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ai.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},lt("LineBucket",Ai,{omit:["layers","patternFeatures"]});var N1=new ni({"line-cap":new _t(j.layout_line["line-cap"]),"line-join":new ft(j.layout_line["line-join"]),"line-miter-limit":new _t(j.layout_line["line-miter-limit"]),"line-round-limit":new _t(j.layout_line["line-round-limit"]),"line-sort-key":new ft(j.layout_line["line-sort-key"])}),xv={paint:new ni({"line-opacity":new ft(j.paint_line["line-opacity"]),"line-color":new ft(j.paint_line["line-color"]),"line-translate":new _t(j.paint_line["line-translate"]),"line-translate-anchor":new _t(j.paint_line["line-translate-anchor"]),"line-width":new ft(j.paint_line["line-width"]),"line-gap-width":new ft(j.paint_line["line-gap-width"]),"line-offset":new ft(j.paint_line["line-offset"]),"line-blur":new ft(j.paint_line["line-blur"]),"line-dasharray":new mi(j.paint_line["line-dasharray"]),"line-pattern":new Ml(j.paint_line["line-pattern"]),"line-gradient":new Yo(j.paint_line["line-gradient"])}),layout:N1},wv=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(n,u){return u=new Jt(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),e.prototype.possiblyEvaluate.call(this,n,u)},t.prototype.evaluate=function(n,u,h,f){return u=le({},u,{zoom:Math.floor(u.zoom)}),e.prototype.evaluate.call(this,n,u,h,f)},t}(ft))(xv.paint.properties["line-width"].specification);wv.useIntegerZoom=!0;var j1=function(e){function t(n){e.call(this,n,xv),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(n){n==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof jr,this.gradientVersion=(this.gradientVersion+1)%Oe)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(n,u){e.prototype.recalculate.call(this,n,u),this.paint._values["line-floorwidth"]=wv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)},t.prototype.createBucket=function(n){return new Ai(n)},t.prototype.queryRadius=function(n){var u=n,h=bv(da("line-width",this,u),da("line-gap-width",this,u)),f=da("line-offset",this,u);return h/2+Math.abs(f)+Bn(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(n,u,h,f,y,w,C){var I=Ra(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,C),k=C/2*bv(this.paint.get("line-width").evaluate(u,h),this.paint.get("line-gap-width").evaluate(u,h)),A=this.paint.get("line-offset").evaluate(u,h);return A&&(f=function(F,U){for(var W=[],K=new he(0,0),re=0;re<F.length;re++){for(var Q=F[re],ce=[],ge=0;ge<Q.length;ge++){var xe=Q[ge],Se=Q[ge+1],Ae=ge===0?K:xe.sub(Q[ge-1])._unit()._perp(),Be=ge===Q.length-1?K:Se.sub(xe)._unit()._perp(),Ge=Ae._add(Be)._unit();Ge._mult(1/(Ge.x*Be.x+Ge.y*Be.y)),ce.push(Ge._mult(U)._add(xe))}W.push(ce)}return W}(f,A*C)),function(F,U,W){for(var K=0;K<U.length;K++){var re=U[K];if(F.length>=3){for(var Q=0;Q<re.length;Q++)if(fa(F,re[Q]))return!0}if(zo(F,re,W))return!0}return!1}(I,f,k)},t.prototype.isTileClipped=function(){return!0},t}(pa);function bv(e,t){return t>0?t+2*e:e}var V1=Xn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),q1=Xn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Z1=(Xn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Xn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Sv=(Xn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Xn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),G1=Xn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function W1(e,t,n){return e.sections.forEach(function(u){u.text=function(h,f,y){var w=f.layout.get("text-transform").evaluate(y,{});return w==="uppercase"?h=h.toLocaleUpperCase():w==="lowercase"&&(h=h.toLocaleLowerCase()),mo.applyArabicShaping&&(h=mo.applyArabicShaping(h)),h}(u.text,t,n)}),e}Xn([{name:"triangle",components:3,type:"Uint16"}]),Xn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Xn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Xn([{type:"Float32",name:"offsetX"}]),Xn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ip={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Ev=function(e,t,n,u,h){var f,y,w=8*h-u-1,C=(1<<w)-1,I=C>>1,k=-7,A=n?h-1:0,F=n?-1:1,U=e[t+A];for(A+=F,f=U&(1<<-k)-1,U>>=-k,k+=w;k>0;f=256*f+e[t+A],A+=F,k-=8);for(y=f&(1<<-k)-1,f>>=-k,k+=u;k>0;y=256*y+e[t+A],A+=F,k-=8);if(f===0)f=1-I;else{if(f===C)return y?NaN:1/0*(U?-1:1);y+=Math.pow(2,u),f-=I}return(U?-1:1)*y*Math.pow(2,f-u)},Cv=function(e,t,n,u,h,f){var y,w,C,I=8*f-h-1,k=(1<<I)-1,A=k>>1,F=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=u?0:f-1,W=u?1:-1,K=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(w=isNaN(t)?1:0,y=k):(y=Math.floor(Math.log(t)/Math.LN2),t*(C=Math.pow(2,-y))<1&&(y--,C*=2),(t+=y+A>=1?F/C:F*Math.pow(2,1-A))*C>=2&&(y++,C/=2),y+A>=k?(w=0,y=k):y+A>=1?(w=(t*C-1)*Math.pow(2,h),y+=A):(w=t*Math.pow(2,A-1)*Math.pow(2,h),y=0));h>=8;e[n+U]=255&w,U+=W,w/=256,h-=8);for(y=y<<h|w,I+=h;I>0;e[n+U]=255&y,U+=W,y/=256,I-=8);e[n+U-W]|=128*K},Ph=Vr;function Vr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Vr.Varint=0,Vr.Fixed64=1,Vr.Bytes=2,Vr.Fixed32=5;var Tv=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Ds(e){return e.type===Vr.Bytes?e.readVarint()+e.pos:e.pos+1}function jl(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Iv(e,t,n){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(u);for(var h=n.pos-1;h>=e;h--)n.buf[h+u]=n.buf[h]}function X1(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function K1(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function H1(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function $1(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Y1(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function J1(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Q1(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function ew(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function tw(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function kh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Vl(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Pv(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function rw(e,t,n){e===1&&n.readMessage(nw,t)}function nw(e,t,n){if(e===3){var u=n.readMessage(iw,{}),h=u.width,f=u.height,y=u.left,w=u.top,C=u.advance;t.push({id:u.id,bitmap:new Ku({width:h+6,height:f+6},u.bitmap),metrics:{width:h,height:f,left:y,top:w,advance:C}})}}function iw(e,t,n){e===1?t.id=n.readVarint():e===2?t.bitmap=n.readBytes():e===3?t.width=n.readVarint():e===4?t.height=n.readVarint():e===5?t.left=n.readSVarint():e===6?t.top=n.readSVarint():e===7&&(t.advance=n.readVarint())}function kv(e){for(var t=0,n=0,u=0,h=e;u<h.length;u+=1){var f=h[u];t+=f.w*f.h,n=Math.max(n,f.w)}e.sort(function(K,re){return re.h-K.h});for(var y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],w=0,C=0,I=0,k=e;I<k.length;I+=1)for(var A=k[I],F=y.length-1;F>=0;F--){var U=y[F];if(!(A.w>U.w||A.h>U.h)){if(A.x=U.x,A.y=U.y,C=Math.max(C,A.y+A.h),w=Math.max(w,A.x+A.w),A.w===U.w&&A.h===U.h){var W=y.pop();F<y.length&&(y[F]=W)}else A.h===U.h?(U.x+=A.w,U.w-=A.w):A.w===U.w?(U.y+=A.h,U.h-=A.h):(y.push({x:U.x+A.w,y:U.y,w:U.w-A.w,h:A.h}),U.y+=A.h,U.h-=A.h);break}}return{w,h:C,fill:t/(w*C)||0}}Vr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var u=this.readVarint(),h=u>>3,f=this.pos;this.type=7&u,e(h,t,this),this.pos===f&&this.skip(u)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=kh(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Pv(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=kh(this.buf,this.pos)+4294967296*kh(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=kh(this.buf,this.pos)+4294967296*Pv(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Ev(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ev(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,u=this.buf;return t=127&(n=u[this.pos++]),n<128?t:(t|=(127&(n=u[this.pos++]))<<7,n<128?t:(t|=(127&(n=u[this.pos++]))<<14,n<128?t:(t|=(127&(n=u[this.pos++]))<<21,n<128?t:function(h,f,y){var w,C,I=y.buf;if(w=(112&(C=I[y.pos++]))>>4,C<128||(w|=(127&(C=I[y.pos++]))<<3,C<128)||(w|=(127&(C=I[y.pos++]))<<10,C<128)||(w|=(127&(C=I[y.pos++]))<<17,C<128)||(w|=(127&(C=I[y.pos++]))<<24,C<128)||(w|=(1&(C=I[y.pos++]))<<31,C<128))return jl(h,w,f);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=u[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Tv?function(n,u,h){return Tv.decode(n.subarray(u,h))}(this.buf,t,e):function(n,u,h){for(var f="",y=u;y<h;){var w,C,I,k=n[y],A=null,F=k>239?4:k>223?3:k>191?2:1;if(y+F>h)break;F===1?k<128&&(A=k):F===2?(192&(w=n[y+1]))==128&&(A=(31&k)<<6|63&w)<=127&&(A=null):F===3?(C=n[y+2],(192&(w=n[y+1]))==128&&(192&C)==128&&((A=(15&k)<<12|(63&w)<<6|63&C)<=2047||A>=55296&&A<=57343)&&(A=null)):F===4&&(C=n[y+2],I=n[y+3],(192&(w=n[y+1]))==128&&(192&C)==128&&(192&I)==128&&((A=(15&k)<<18|(63&w)<<12|(63&C)<<6|63&I)<=65535||A>=1114112)&&(A=null)),A===null?(A=65533,F=1):A>65535&&(A-=65536,f+=String.fromCharCode(A>>>10&1023|55296),A=56320|1023&A),f+=String.fromCharCode(A),y+=F}return f}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Vr.Bytes)return e.push(this.readVarint(t));var n=Ds(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Vr.Bytes)return e.push(this.readSVarint());var t=Ds(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Vr.Bytes)return e.push(this.readBoolean());var t=Ds(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Vr.Bytes)return e.push(this.readFloat());var t=Ds(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Vr.Bytes)return e.push(this.readDouble());var t=Ds(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Vr.Bytes)return e.push(this.readFixed32());var t=Ds(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Vr.Bytes)return e.push(this.readSFixed32());var t=Ds(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Vr.Bytes)return e.push(this.readFixed64());var t=Ds(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Vr.Bytes)return e.push(this.readSFixed64());var t=Ds(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Vr.Varint)for(;this.buf[this.pos++]>127;);else if(t===Vr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Vr.Fixed32)this.pos+=4;else{if(t!==Vr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Vl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Vl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Vl(this.buf,-1&e,this.pos),Vl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Vl(this.buf,-1&e,this.pos),Vl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,n){var u,h;if(t>=0?(u=t%4294967296|0,h=t/4294967296|0):(h=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,h=h+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(f,y,w){w.buf[w.pos++]=127&f|128,f>>>=7,w.buf[w.pos++]=127&f|128,f>>>=7,w.buf[w.pos++]=127&f|128,f>>>=7,w.buf[w.pos++]=127&f|128,w.buf[w.pos]=127&(f>>>=7)}(u,0,n),function(f,y){var w=(7&f)<<4;y.buf[y.pos++]|=w|((f>>>=3)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f)))))}(h,n)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(u,h,f){for(var y,w,C=0;C<h.length;C++){if((y=h.charCodeAt(C))>55295&&y<57344){if(!w){y>56319||C+1===h.length?(u[f++]=239,u[f++]=191,u[f++]=189):w=y;continue}if(y<56320){u[f++]=239,u[f++]=191,u[f++]=189,w=y;continue}y=w-55296<<10|y-56320|65536,w=null}else w&&(u[f++]=239,u[f++]=191,u[f++]=189,w=null);y<128?u[f++]=y:(y<2048?u[f++]=y>>6|192:(y<65536?u[f++]=y>>12|224:(u[f++]=y>>18|240,u[f++]=y>>12&63|128),u[f++]=y>>6&63|128),u[f++]=63&y|128)}return f}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Iv(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Cv(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Cv(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var u=this.pos-n;u>=128&&Iv(n,u,this),this.pos=n-1,this.writeVarint(u),this.pos+=u},writeMessage:function(e,t,n){this.writeTag(e,Vr.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,X1,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,K1,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Y1,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,H1,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,$1,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,J1,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Q1,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,ew,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,tw,t)},writeBytesField:function(e,t){this.writeTag(e,Vr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Vr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Vr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Vr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Vr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Vr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Vr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Vr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Vr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Vr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Ah=function(e,t){var n=t.pixelRatio,u=t.version,h=t.stretchX,f=t.stretchY,y=t.content;this.paddedRect=e,this.pixelRatio=n,this.stretchX=h,this.stretchY=f,this.content=y,this.version=u},op={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};op.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},op.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},op.tlbr.get=function(){return this.tl.concat(this.br)},op.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ah.prototype,op);var ap=function(e,t){var n={},u={};this.haveRenderCallbacks=[];var h=[];this.addImages(e,n,h),this.addImages(t,u,h);var f=kv(h),y=new to({width:f.w||1,height:f.h||1});for(var w in e){var C=e[w],I=n[w].paddedRect;to.copy(C.data,y,{x:0,y:0},{x:I.x+1,y:I.y+1},C.data)}for(var k in t){var A=t[k],F=u[k].paddedRect,U=F.x+1,W=F.y+1,K=A.data.width,re=A.data.height;to.copy(A.data,y,{x:0,y:0},{x:U,y:W},A.data),to.copy(A.data,y,{x:0,y:re-1},{x:U,y:W-1},{width:K,height:1}),to.copy(A.data,y,{x:0,y:0},{x:U,y:W+re},{width:K,height:1}),to.copy(A.data,y,{x:K-1,y:0},{x:U-1,y:W},{width:1,height:re}),to.copy(A.data,y,{x:0,y:0},{x:U+K,y:W},{width:1,height:re})}this.image=y,this.iconPositions=n,this.patternPositions=u};ap.prototype.addImages=function(e,t,n){for(var u in e){var h=e[u],f={x:0,y:0,w:h.data.width+2,h:h.data.height+2};n.push(f),t[u]=new Ah(f,h),h.hasRenderCallback&&this.haveRenderCallbacks.push(u)}},ap.prototype.patchUpdatedImages=function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)},ap.prototype.patchUpdatedImage=function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var u=e.tl;n.update(t.data,void 0,{x:u[0],y:u[1]})}},lt("ImagePosition",Ah),lt("ImageAtlas",ap);var Lo={horizontal:1,vertical:2,horizontalOnly:3},ql=function(){this.scale=1,this.fontStack="",this.imageName=null};ql.forText=function(e,t){var n=new ql;return n.scale=e||1,n.fontStack=t,n},ql.forImage=function(e){var t=new ql;return t.imageName=e,t};var vi=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Mh(e,t,n,u,h,f,y,w,C,I,k,A,F,U,W,K){var re,Q=vi.fromFeature(e,h);A===Lo.vertical&&Q.verticalizePunctuation();var ce=mo.processBidirectionalText,ge=mo.processStyledBidirectionalText;if(ce&&Q.sections.length===1){re=[];for(var xe=0,Se=ce(Q.toString(),Ad(Q,I,f,t,u,U,W));xe<Se.length;xe+=1){var Ae=Se[xe],Be=new vi;Be.text=Ae,Be.sections=Q.sections;for(var Ge=0;Ge<Ae.length;Ge++)Be.sectionIndex.push(0);re.push(Be)}}else if(ge){re=[];for(var vt=0,et=ge(Q.text,Q.sectionIndex,Ad(Q,I,f,t,u,U,W));vt<et.length;vt+=1){var wt=et[vt],tt=new vi;tt.text=wt[0],tt.sectionIndex=wt[1],tt.sections=Q.sections,re.push(tt)}}else re=function(dt,Yt){for(var Zt=[],ur=dt.text,bt=0,vr=0,Hr=Yt;vr<Hr.length;vr+=1){var hn=Hr[vr];Zt.push(dt.substring(bt,hn)),bt=hn}return bt<ur.length&&Zt.push(dt.substring(bt,ur.length)),Zt}(Q,Ad(Q,I,f,t,u,U,W));var Kt=[],Lt={positionedLines:Kt,text:Q.toString(),top:k[1],bottom:k[1],left:k[0],right:k[0],writingMode:A,iconsInText:!1,verticalizable:!1};return function(dt,Yt,Zt,ur,bt,vr,Hr,hn,sn,$r,fn,Un){for(var Nn=0,gi=-17,$n=0,_i=0,vn=hn==="right"?1:hn==="left"?0:.5,Yn=0,nr=0,Or=bt;nr<Or.length;nr+=1){var Tr=Or[nr];Tr.trim();var fr=Tr.getMaxScale(),Mi=24*(fr-1),li={positionedGlyphs:[],lineOffset:0};dt.positionedLines[Yn]=li;var Xr=li.positionedGlyphs,En=0;if(Tr.length()){for(var ci=0;ci<Tr.length();ci++){var gr=Tr.getSection(ci),ns=Tr.getSectionIndex(ci),Do=Tr.getCharCode(ci),is=0,gn=null,os=null,ma=null,Yl=24,Ju=!(sn===Lo.horizontal||!fn&&!Pl(Do)||fn&&(zh[Do]||(Bs=Do,Ke.Arabic(Bs)||Ke["Arabic Supplement"](Bs)||Ke["Arabic Extended-A"](Bs)||Ke["Arabic Presentation Forms-A"](Bs)||Ke["Arabic Presentation Forms-B"](Bs))));if(gr.imageName){var Jl=ur[gr.imageName];if(!Jl)continue;ma=gr.imageName,dt.iconsInText=dt.iconsInText||!0,os=Jl.paddedRect;var Rs=Jl.displaySize;gr.scale=24*gr.scale/Un,is=Mi+(24-Rs[1]*gr.scale),Yl=(gn={width:Rs[0],height:Rs[1],left:1,top:-3,advance:Ju?Rs[1]:Rs[0]}).advance;var Ql=Ju?Rs[0]*gr.scale-24*fr:Rs[1]*gr.scale-24*fr;Ql>0&&Ql>En&&(En=Ql)}else{var jh=Zt[gr.fontStack],ec=jh&&jh[Do];if(ec&&ec.rect)os=ec.rect,gn=ec.metrics;else{var lp=Yt[gr.fontStack],Vh=lp&&lp[Do];if(!Vh)continue;gn=Vh.metrics}is=24*(fr-gr.scale)}Ju?(dt.verticalizable=!0,Xr.push({glyph:Do,imageName:ma,x:Nn,y:gi+is,vertical:Ju,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:ns,metrics:gn,rect:os}),Nn+=Yl*gr.scale+$r):(Xr.push({glyph:Do,imageName:ma,x:Nn,y:gi+is,vertical:Ju,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:ns,metrics:gn,rect:os}),Nn+=gn.advance*gr.scale+$r)}Xr.length!==0&&($n=Math.max(Nn-$r,$n),aw(Xr,0,Xr.length-1,vn,En)),Nn=0;var qh=vr*fr+En;li.lineOffset=Math.max(En,Mi),gi+=qh,_i=Math.max(qh,_i),++Yn}else gi+=vr,++Yn}var Bs,cp=gi- -17,tc=Md(Hr),su=tc.horizontalAlign,rc=tc.verticalAlign;(function(Zh,Gh,pp,hp,Wh,fp,dp,mp,Xh){var nc,Kh=(Gh-pp)*Wh;nc=fp!==dp?-mp*hp- -17:(-hp*Xh+.5)*dp;for(var ic=0,yp=Zh;ic<yp.length;ic+=1)for(var Qu=0,vp=yp[ic].positionedGlyphs;Qu<vp.length;Qu+=1){var oc=vp[Qu];oc.x+=Kh,oc.y+=nc}})(dt.positionedLines,vn,su,rc,$n,_i,vr,cp,bt.length),dt.top+=-rc*cp,dt.bottom=dt.top+cp,dt.left+=-su*$n,dt.right=dt.left+$n}(Lt,t,n,u,re,y,w,C,A,I,F,K),!function(dt){for(var Yt=0,Zt=dt;Yt<Zt.length;Yt+=1)if(Zt[Yt].positionedGlyphs.length!==0)return!1;return!0}(Kt)&&Lt}vi.fromFeature=function(e,t){for(var n=new vi,u=0;u<e.sections.length;u++){var h=e.sections[u];h.image?n.addImageSection(h):n.addTextSection(h,t)}return n},vi.prototype.length=function(){return this.text.length},vi.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},vi.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},vi.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},vi.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var u=e.charCodeAt(n+1)||null,h=e.charCodeAt(n-1)||null;t+=u&&qc(u)&&!ip[e[n+1]]||h&&qc(h)&&!ip[e[n-1]]||!ip[e[n]]?e[n]:ip[e[n]]}return t}(this.text)},vi.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&zh[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,u=this.text.length-1;u>=0&&u>=e&&zh[this.text.charCodeAt(u)];u--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},vi.prototype.substring=function(e,t){var n=new vi;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},vi.prototype.toString=function(){return this.text},vi.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,n){return Math.max(t,e.sections[n].scale)},0)},vi.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(ql.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,u=0;u<e.text.length;++u)this.sectionIndex.push(n)},vi.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(ql.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Ut("Reached maximum number of images 6401")}else Ut("Can't add FormattedSection with an empty image.")},vi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var zh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},vo={};function Av(e,t,n,u,h,f){if(t.imageName){var y=u[t.imageName];return y?y.displaySize[0]*t.scale*24/f+h:0}var w=n[t.fontStack],C=w&&w[e];return C?C.metrics.advance*t.scale+h:0}function Mv(e,t,n,u){var h=Math.pow(e-t,2);return u?e<t?h/2:2*h:h+Math.abs(n)*n}function ow(e,t,n){var u=0;return e===10&&(u-=1e4),n&&(u+=150),e!==40&&e!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function zv(e,t,n,u,h,f){for(var y=null,w=Mv(t,n,h,f),C=0,I=u;C<I.length;C+=1){var k=I[C],A=Mv(t-k.x,n,h,f)+k.badness;A<=w&&(y=k,w=A)}return{index:e,x:t,priorBreak:y,badness:w}}function Ad(e,t,n,u,h,f,y){if(f!=="point")return[];if(!e)return[];for(var w,C=[],I=function(re,Q,ce,ge,xe,Se){for(var Ae=0,Be=0;Be<re.length();Be++){var Ge=re.getSection(Be);Ae+=Av(re.getCharCode(Be),Ge,ge,xe,Q,Se)}return Ae/Math.max(1,Math.ceil(Ae/ce))}(e,t,n,u,h,y),k=e.text.indexOf("\u200B")>=0,A=0,F=0;F<e.length();F++){var U=e.getSection(F),W=e.getCharCode(F);if(zh[W]||(A+=Av(W,U,u,h,t,y)),F<e.length()-1){var K=!((w=W)<11904||!(Ke["Bopomofo Extended"](w)||Ke.Bopomofo(w)||Ke["CJK Compatibility Forms"](w)||Ke["CJK Compatibility Ideographs"](w)||Ke["CJK Compatibility"](w)||Ke["CJK Radicals Supplement"](w)||Ke["CJK Strokes"](w)||Ke["CJK Symbols and Punctuation"](w)||Ke["CJK Unified Ideographs Extension A"](w)||Ke["CJK Unified Ideographs"](w)||Ke["Enclosed CJK Letters and Months"](w)||Ke["Halfwidth and Fullwidth Forms"](w)||Ke.Hiragana(w)||Ke["Ideographic Description Characters"](w)||Ke["Kangxi Radicals"](w)||Ke["Katakana Phonetic Extensions"](w)||Ke.Katakana(w)||Ke["Vertical Forms"](w)||Ke["Yi Radicals"](w)||Ke["Yi Syllables"](w)));(vo[W]||K||U.imageName)&&C.push(zv(F+1,A,I,C,ow(W,e.getCharCode(F+1),K&&k),!1))}}return function re(Q){return Q?re(Q.priorBreak).concat(Q.index):[]}(zv(e.length(),A,I,C,0,!0))}function Md(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function aw(e,t,n,u,h){if(u||h)for(var f=e[n],y=(e[n].x+f.metrics.advance*f.scale)*u,w=t;w<=n;w++)e[w].x-=y,e[w].y+=h}function Lv(e,t,n,u,h,f){var y,w=e.image;if(w.content){var C=w.content,I=w.pixelRatio||1;y=[C[0]/I,C[1]/I,w.displaySize[0]-C[2]/I,w.displaySize[1]-C[3]/I]}var k,A,F,U,W=t.left*f,K=t.right*f;n==="width"||n==="both"?(U=h[0]+W-u[3],A=h[0]+K+u[1]):A=(U=h[0]+(W+K-w.displaySize[0])/2)+w.displaySize[0];var re=t.top*f,Q=t.bottom*f;return n==="height"||n==="both"?(k=h[1]+re-u[0],F=h[1]+Q+u[2]):F=(k=h[1]+(re+Q-w.displaySize[1])/2)+w.displaySize[1],{image:w,top:k,right:A,bottom:F,left:U,collisionPadding:y}}vo[10]=!0,vo[32]=!0,vo[38]=!0,vo[40]=!0,vo[41]=!0,vo[43]=!0,vo[45]=!0,vo[47]=!0,vo[173]=!0,vo[183]=!0,vo[8203]=!0,vo[8208]=!0,vo[8211]=!0,vo[8231]=!0;var Zl=function(e){function t(n,u,h,f){e.call(this,n,u),this.angle=h,f!==void 0&&(this.segment=f)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(he);function zd(e,t){var n=t.expression;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new Jt(e+1))};if(n.kind==="source")return{kind:"source"};for(var u=n.zoomStops,h=n.interpolationType,f=0;f<u.length&&u[f]<=e;)f++;for(var y=f=Math.max(0,f-1);y<u.length&&u[y]<e+1;)y++;y=Math.min(u.length-1,y);var w=u[f],C=u[y];return n.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:C,interpolationType:h}:{kind:"camera",minZoom:w,maxZoom:C,minSize:n.evaluate(new Jt(w)),maxSize:n.evaluate(new Jt(C)),interpolationType:h}}function Dv(e,t,n){var u=t.uSize,h=n.lowerSize;return e.kind==="source"?h/128:e.kind==="composite"?tn(h/128,n.upperSize/128,t.uSizeT):u}function Ov(e,t){var n=0,u=0;if(e.kind==="constant")u=e.layoutSize;else if(e.kind!=="source"){var h=e.interpolationType,f=h?pe(bn.interpolationFactor(h,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?u=tn(e.minSize,e.maxSize,f):n=f}return{uSizeT:n,uSize:u}}lt("Anchor",Zl);var sw=Object.freeze({__proto__:null,getSizeData:zd,evaluateSizeForFeature:Dv,evaluateSizeForZoom:Ov,SIZE_PACK_FACTOR:128});function Fv(e,t,n,u,h){if(t.segment===void 0)return!0;for(var f=t,y=t.segment+1,w=0;w>-n/2;){if(--y<0)return!1;w-=e[y].dist(f),f=e[y]}w+=e[y].dist(e[y+1]),y++;for(var C=[],I=0;w<n/2;){var k=e[y],A=e[y+1];if(!A)return!1;var F=e[y-1].angleTo(k)-k.angleTo(A);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:w,angleDelta:F}),I+=F;w-C[0].distance>u;)I-=C.shift().angleDelta;if(I>h)return!1;y++,w+=k.dist(A)}return!0}function Rv(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Bv(e,t,n){return e?.6*t*n:0}function Uv(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function uw(e,t,n,u,h,f){for(var y=Bv(n,h,f),w=Uv(n,u)*f,C=0,I=Rv(e)/2,k=0;k<e.length-1;k++){var A=e[k],F=e[k+1],U=A.dist(F);if(C+U>I){var W=(I-C)/U,K=tn(A.x,F.x,W),re=tn(A.y,F.y,W),Q=new Zl(K,re,F.angleTo(A),k);return Q._round(),!y||Fv(e,Q,w,y,t)?Q:void 0}C+=U}}function lw(e,t,n,u,h,f,y,w,C){var I=Bv(u,f,y),k=Uv(u,h),A=k*y,F=e[0].x===0||e[0].x===C||e[0].y===0||e[0].y===C;return t-A<t/4&&(t=A+t/4),function U(W,K,re,Q,ce,ge,xe,Se,Ae){for(var Be=ge/2,Ge=Rv(W),vt=0,et=K-re,wt=[],tt=0;tt<W.length-1;tt++){for(var Kt=W[tt],Lt=W[tt+1],dt=Kt.dist(Lt),Yt=Lt.angleTo(Kt);et+re<vt+dt;){var Zt=((et+=re)-vt)/dt,ur=tn(Kt.x,Lt.x,Zt),bt=tn(Kt.y,Lt.y,Zt);if(ur>=0&&ur<Ae&&bt>=0&&bt<Ae&&et-Be>=0&&et+Be<=Ge){var vr=new Zl(ur,bt,Yt,tt);vr._round(),Q&&!Fv(W,vr,ge,Q,ce)||wt.push(vr)}}vt+=dt}return Se||wt.length||xe||(wt=U(W,vt/2,re,Q,ce,ge,xe,!0,Ae)),wt}(e,F?t/2*w%t:(k/2+2*f)*y*w%t,t,I,n,A,F,!1,C)}function Nv(e,t,n,u,h){for(var f=[],y=0;y<e.length;y++)for(var w=e[y],C=void 0,I=0;I<w.length-1;I++){var k=w[I],A=w[I+1];k.x<t&&A.x<t||(k.x<t?k=new he(t,k.y+(t-k.x)/(A.x-k.x)*(A.y-k.y))._round():A.x<t&&(A=new he(t,k.y+(t-k.x)/(A.x-k.x)*(A.y-k.y))._round()),k.y<n&&A.y<n||(k.y<n?k=new he(k.x+(n-k.y)/(A.y-k.y)*(A.x-k.x),n)._round():A.y<n&&(A=new he(k.x+(n-k.y)/(A.y-k.y)*(A.x-k.x),n)._round()),k.x>=u&&A.x>=u||(k.x>=u?k=new he(u,k.y+(u-k.x)/(A.x-k.x)*(A.y-k.y))._round():A.x>=u&&(A=new he(u,k.y+(u-k.x)/(A.x-k.x)*(A.y-k.y))._round()),k.y>=h&&A.y>=h||(k.y>=h?k=new he(k.x+(h-k.y)/(A.y-k.y)*(A.x-k.x),h)._round():A.y>=h&&(A=new he(k.x+(h-k.y)/(A.y-k.y)*(A.x-k.x),h)._round()),C&&k.equals(C[C.length-1])||f.push(C=[k]),C.push(A)))))}return f}function jv(e,t,n,u){var h=[],f=e.image,y=f.pixelRatio,w=f.paddedRect.w-2,C=f.paddedRect.h-2,I=e.right-e.left,k=e.bottom-e.top,A=f.stretchX||[[0,w]],F=f.stretchY||[[0,C]],U=function(ur,bt){return ur+bt[1]-bt[0]},W=A.reduce(U,0),K=F.reduce(U,0),re=w-W,Q=C-K,ce=0,ge=W,xe=0,Se=K,Ae=0,Be=re,Ge=0,vt=Q;if(f.content&&u){var et=f.content;ce=Lh(A,0,et[0]),xe=Lh(F,0,et[1]),ge=Lh(A,et[0],et[2]),Se=Lh(F,et[1],et[3]),Ae=et[0]-ce,Ge=et[1]-xe,Be=et[2]-et[0]-ge,vt=et[3]-et[1]-Se}var wt=function(ur,bt,vr,Hr){var hn=Dh(ur.stretch-ce,ge,I,e.left),sn=Oh(ur.fixed-Ae,Be,ur.stretch,W),$r=Dh(bt.stretch-xe,Se,k,e.top),fn=Oh(bt.fixed-Ge,vt,bt.stretch,K),Un=Dh(vr.stretch-ce,ge,I,e.left),Nn=Oh(vr.fixed-Ae,Be,vr.stretch,W),gi=Dh(Hr.stretch-xe,Se,k,e.top),$n=Oh(Hr.fixed-Ge,vt,Hr.stretch,K),_i=new he(hn,$r),vn=new he(Un,$r),Yn=new he(Un,gi),nr=new he(hn,gi),Or=new he(sn/y,fn/y),Tr=new he(Nn/y,$n/y),fr=t*Math.PI/180;if(fr){var Mi=Math.sin(fr),li=Math.cos(fr),Xr=[li,-Mi,Mi,li];_i._matMult(Xr),vn._matMult(Xr),nr._matMult(Xr),Yn._matMult(Xr)}var En=ur.stretch+ur.fixed,ci=bt.stretch+bt.fixed;return{tl:_i,tr:vn,bl:nr,br:Yn,tex:{x:f.paddedRect.x+1+En,y:f.paddedRect.y+1+ci,w:vr.stretch+vr.fixed-En,h:Hr.stretch+Hr.fixed-ci},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Or,pixelOffsetBR:Tr,minFontScaleX:Be/y/I,minFontScaleY:vt/y/k,isSDF:n}};if(u&&(f.stretchX||f.stretchY))for(var tt=Vv(A,re,W),Kt=Vv(F,Q,K),Lt=0;Lt<tt.length-1;Lt++)for(var dt=tt[Lt],Yt=tt[Lt+1],Zt=0;Zt<Kt.length-1;Zt++)h.push(wt(dt,Kt[Zt],Yt,Kt[Zt+1]));else h.push(wt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:C+1}));return h}function Lh(e,t,n){for(var u=0,h=0,f=e;h<f.length;h+=1){var y=f[h];u+=Math.max(t,Math.min(n,y[1]))-Math.max(t,Math.min(n,y[0]))}return u}function Vv(e,t,n){for(var u=[{fixed:-1,stretch:0}],h=0,f=e;h<f.length;h+=1){var y=f[h],w=y[0],C=y[1],I=u[u.length-1];u.push({fixed:w-I.stretch,stretch:I.stretch}),u.push({fixed:w-I.stretch,stretch:I.stretch+(C-w)})}return u.push({fixed:t+1,stretch:n}),u}function Dh(e,t,n,u){return e/t*n+u}function Oh(e,t,n,u){return e-t*n/u}var Fh=function(e,t,n,u,h,f,y,w,C,I){if(this.boxStartIndex=e.length,C){var k=f.top,A=f.bottom,F=f.collisionPadding;F&&(k-=F[1],A+=F[3]);var U=A-k;U>0&&(U=Math.max(10,U),this.circleDiameter=U)}else{var W=f.top*y-w,K=f.bottom*y+w,re=f.left*y-w,Q=f.right*y+w,ce=f.collisionPadding;if(ce&&(re-=ce[0]*y,W-=ce[1]*y,Q+=ce[2]*y,K+=ce[3]*y),I){var ge=new he(re,W),xe=new he(Q,W),Se=new he(re,K),Ae=new he(Q,K),Be=I*Math.PI/180;ge._rotate(Be),xe._rotate(Be),Se._rotate(Be),Ae._rotate(Be),re=Math.min(ge.x,xe.x,Se.x,Ae.x),Q=Math.max(ge.x,xe.x,Se.x,Ae.x),W=Math.min(ge.y,xe.y,Se.y,Ae.y),K=Math.max(ge.y,xe.y,Se.y,Ae.y)}e.emplaceBack(t.x,t.y,re,W,Q,K,n,u,h)}this.boxEndIndex=e.length},Gl=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=cw),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function cw(e,t){return e<t?-1:e>t?1:0}function pw(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!1);for(var u=1/0,h=1/0,f=-1/0,y=-1/0,w=e[0],C=0;C<w.length;C++){var I=w[C];(!C||I.x<u)&&(u=I.x),(!C||I.y<h)&&(h=I.y),(!C||I.x>f)&&(f=I.x),(!C||I.y>y)&&(y=I.y)}var k=Math.min(f-u,y-h),A=k/2,F=new Gl([],hw);if(k===0)return new he(u,h);for(var U=u;U<f;U+=k)for(var W=h;W<y;W+=k)F.push(new Wl(U+A,W+A,A,e));for(var K=function(ce){for(var ge=0,xe=0,Se=0,Ae=ce[0],Be=0,Ge=Ae.length,vt=Ge-1;Be<Ge;vt=Be++){var et=Ae[Be],wt=Ae[vt],tt=et.x*wt.y-wt.x*et.y;xe+=(et.x+wt.x)*tt,Se+=(et.y+wt.y)*tt,ge+=3*tt}return new Wl(xe/ge,Se/ge,0,ce)}(e),re=F.length;F.length;){var Q=F.pop();(Q.d>K.d||!K.d)&&(K=Q,n&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,re)),Q.max-K.d<=t||(F.push(new Wl(Q.p.x-(A=Q.h/2),Q.p.y-A,A,e)),F.push(new Wl(Q.p.x+A,Q.p.y-A,A,e)),F.push(new Wl(Q.p.x-A,Q.p.y+A,A,e)),F.push(new Wl(Q.p.x+A,Q.p.y+A,A,e)),re+=4)}return n&&(console.log("num probes: "+re),console.log("best distance: "+K.d)),K.p}function hw(e,t){return t.max-e.max}function Wl(e,t,n,u){this.p=new he(e,t),this.h=n,this.d=function(h,f){for(var y=!1,w=1/0,C=0;C<f.length;C++)for(var I=f[C],k=0,A=I.length,F=A-1;k<A;F=k++){var U=I[k],W=I[F];U.y>h.y!=W.y>h.y&&h.x<(W.x-U.x)*(h.y-U.y)/(W.y-U.y)+U.x&&(y=!y),w=Math.min(w,nu(h,U,W))}return(y?1:-1)*Math.sqrt(w)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}Gl.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Gl.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},Gl.prototype.peek=function(){return this.data[0]},Gl.prototype._up=function(e){for(var t=this.data,n=this.compare,u=t[e];e>0;){var h=e-1>>1,f=t[h];if(n(u,f)>=0)break;t[e]=f,e=h}t[e]=u},Gl.prototype._down=function(e){for(var t=this.data,n=this.compare,u=this.length>>1,h=t[e];e<u;){var f=1+(e<<1),y=t[f],w=f+1;if(w<this.length&&n(t[w],y)<0&&(f=w,y=t[w]),n(y,h)>=0)break;t[e]=y,e=f}t[e]=h};var Ld=Number.POSITIVE_INFINITY;function qv(e,t){return t[1]!==Ld?function(n,u,h){var f=0,y=0;switch(u=Math.abs(u),h=Math.abs(h),n){case"top-right":case"top-left":case"top":y=h-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-h}switch(n){case"top-right":case"bottom-right":case"right":f=-u;break;case"top-left":case"bottom-left":case"left":f=u}return[f,y]}(e,t[0],t[1]):function(n,u){var h=0,f=0;u<0&&(u=0);var y=u/Math.sqrt(2);switch(n){case"top-right":case"top-left":f=y-7;break;case"bottom-right":case"bottom-left":f=7-y;break;case"bottom":f=7-u;break;case"top":f=u-7}switch(n){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=u;break;case"right":h=-u}return[h,f]}(e,t[0])}function Dd(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Zv(e,t,n,u,h,f,y,w,C,I,k,A,F,U,W){var K=function(xe,Se,Ae,Be,Ge,vt,et,wt){for(var tt=Be.layout.get("text-rotate").evaluate(vt,{})*Math.PI/180,Kt=[],Lt=0,dt=Se.positionedLines;Lt<dt.length;Lt+=1)for(var Yt=dt[Lt],Zt=0,ur=Yt.positionedGlyphs;Zt<ur.length;Zt+=1){var bt=ur[Zt];if(bt.rect){var vr=bt.rect||{},Hr=4,hn=!0,sn=1,$r=0,fn=(Ge||wt)&&bt.vertical,Un=bt.metrics.advance*bt.scale/2;if(wt&&Se.verticalizable&&($r=Yt.lineOffset/2-(bt.imageName?-(24-bt.metrics.width*bt.scale)/2:24*(bt.scale-1))),bt.imageName){var Nn=et[bt.imageName];hn=Nn.sdf,Hr=1/(sn=Nn.pixelRatio)}var gi=Ge?[bt.x+Un,bt.y]:[0,0],$n=Ge?[0,0]:[bt.x+Un+Ae[0],bt.y+Ae[1]-$r],_i=[0,0];fn&&(_i=$n,$n=[0,0]);var vn=(bt.metrics.left-Hr)*bt.scale-Un+$n[0],Yn=(-bt.metrics.top-Hr)*bt.scale+$n[1],nr=vn+vr.w*bt.scale/sn,Or=Yn+vr.h*bt.scale/sn,Tr=new he(vn,Yn),fr=new he(nr,Yn),Mi=new he(vn,Or),li=new he(nr,Or);if(fn){var Xr=new he(-Un,Un- -17),En=-Math.PI/2,ci=12-Un,gr=new he(22-ci,-(bt.imageName?ci:0)),ns=new(Function.prototype.bind.apply(he,[null].concat(_i)));Tr._rotateAround(En,Xr)._add(gr)._add(ns),fr._rotateAround(En,Xr)._add(gr)._add(ns),Mi._rotateAround(En,Xr)._add(gr)._add(ns),li._rotateAround(En,Xr)._add(gr)._add(ns)}if(tt){var Do=Math.sin(tt),is=Math.cos(tt),gn=[is,-Do,Do,is];Tr._matMult(gn),fr._matMult(gn),Mi._matMult(gn),li._matMult(gn)}var os=new he(0,0),ma=new he(0,0);Kt.push({tl:Tr,tr:fr,bl:Mi,br:li,tex:vr,writingMode:Se.writingMode,glyphOffset:gi,sectionIndex:bt.sectionIndex,isSDF:hn,pixelOffsetTL:os,pixelOffsetBR:ma,minFontScaleX:0,minFontScaleY:0})}}return Kt}(0,n,w,h,f,y,u,e.allowVerticalPlacement),re=e.textSizeData,Q=null;re.kind==="source"?(Q=[128*h.layout.get("text-size").evaluate(y,{})])[0]>32640&&Ut(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):re.kind==="composite"&&((Q=[128*U.compositeTextSizes[0].evaluate(y,{},W),128*U.compositeTextSizes[1].evaluate(y,{},W)])[0]>32640||Q[1]>32640)&&Ut(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,K,Q,w,f,y,I,t,C.lineStartIndex,C.lineLength,F,W);for(var ce=0,ge=k;ce<ge.length;ce+=1)A[ge[ce]]=e.text.placedSymbolArray.length-1;return 4*K.length}function Gv(e){for(var t in e)return e[t];return null}function fw(e,t,n,u){var h=e.compareText;if(t in h){for(var f=h[t],y=f.length-1;y>=0;y--)if(u.dist(f[y])<n)return!0}else h[t]=[];return h[t].push(u),!1}var dw=Nl.VectorTileFeature.types,mw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Rh(e,t,n,u,h,f,y,w,C,I,k,A,F){var U=w?Math.min(32640,Math.round(w[0])):0,W=w?Math.min(32640,Math.round(w[1])):0;e.emplaceBack(t,n,Math.round(32*u),Math.round(32*h),f,y,(U<<1)+(C?1:0),W,16*I,16*k,256*A,256*F)}function Od(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function yw(e){for(var t=0,n=e.sections;t<n.length;t+=1)if(kl(n[t].text))return!0;return!1}var Xl=function(e){this.layoutVertexArray=new Ll,this.indexArray=new Ya,this.programConfigurations=e,this.segments=new V,this.dynamicLayoutVertexArray=new eu,this.opacityVertexArray=new Vu,this.placedSymbolArray=new c};Xl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Xl.prototype.upload=function(e,t,n,u){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,V1.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,q1.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,mw,!0),this.opacityVertexBuffer.itemSize=1),(n||u)&&this.programConfigurations.upload(e))},Xl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},lt("SymbolBuffers",Xl);var sp=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new V,this.collisionVertexArray=new Hc};sp.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Z1.members,!0)},sp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},lt("CollisionBuffers",sp);var Mr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(f){return f.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=yo([]),this.placementViewportMatrix=yo([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zd(this.zoom,t["text-size"]),this.iconSizeData=zd(this.zoom,t["icon-size"]);var n=this.layers[0].layout,u=n.get("symbol-sort-key"),h=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey=h!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(h==="viewport-y"||h==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,n.get("symbol-placement")==="point"&&(this.writingModes=n.get("text-writing-mode").map(function(f){return Lo[f]})),this.stateDependentLayerIds=this.layers.filter(function(f){return f.isStateDependent()}).map(function(f){return f.id}),this.sourceID=e.sourceID};Mr.prototype.createArrays=function(){this.text=new Xl(new kt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Xl(new kt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new x,this.lineVertexArray=new E,this.symbolInstances=new v},Mr.prototype.calculateGlyphDependencies=function(e,t,n,u,h){for(var f=0;f<e.length;f++)if(t[e.charCodeAt(f)]=!0,(n||u)&&h){var y=ip[e.charAt(f)];y&&(t[y.charCodeAt(0)]=!0)}},Mr.prototype.populate=function(e,t,n){var u=this.layers[0],h=u.layout,f=h.get("text-font"),y=h.get("text-field"),w=h.get("icon-image"),C=(y.value.kind!=="constant"||y.value.value instanceof Br&&!y.value.value.isEmpty()||y.value.value.toString().length>0)&&(f.value.kind!=="constant"||f.value.value.length>0),I=w.value.kind!=="constant"||!!w.value.value||Object.keys(w.parameters).length>0,k=h.get("symbol-sort-key");if(this.features=[],C||I){for(var A=t.iconDependencies,F=t.glyphDependencies,U=t.availableImages,W=new Jt(this.zoom),K=0,re=e;K<re.length;K+=1){var Q=re[K],ce=Q.feature,ge=Q.id,xe=Q.index,Se=Q.sourceLayerIndex,Ae=u._featureFilter.needGeometry,Be=yn(ce,Ae);if(u._featureFilter.filter(W,Be,n)){Ae||(Be.geometry=an(ce));var Ge=void 0;if(C){var vt=u.getValueAndResolveTokens("text-field",Be,n,U),et=Br.factory(vt);yw(et)&&(this.hasRTLText=!0),(!this.hasRTLText||Gc()==="unavailable"||this.hasRTLText&&mo.isParsed())&&(Ge=W1(et,u,Be))}var wt=void 0;if(I){var tt=u.getValueAndResolveTokens("icon-image",Be,n,U);wt=tt instanceof Gn?tt:Gn.fromString(tt)}if(Ge||wt){var Kt=this.sortFeaturesByKey?k.evaluate(Be,{},n):void 0;if(this.features.push({id:ge,text:Ge,icon:wt,index:xe,sourceLayerIndex:Se,geometry:Be.geometry,properties:ce.properties,type:dw[ce.type],sortKey:Kt}),wt&&(A[wt.name]=!0),Ge){var Lt=f.evaluate(Be,{},n).join(","),dt=h.get("text-rotation-alignment")==="map"&&h.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Lo.vertical)>=0;for(var Yt=0,Zt=Ge.sections;Yt<Zt.length;Yt+=1){var ur=Zt[Yt];if(ur.image)A[ur.image.name]=!0;else{var bt=Vc(Ge.toString()),vr=ur.fontStack||Lt,Hr=F[vr]=F[vr]||{};this.calculateGlyphDependencies(ur.text,Hr,dt,this.allowVerticalPlacement,bt)}}}}}}h.get("symbol-placement")==="line"&&(this.features=function(hn){var sn={},$r={},fn=[],Un=0;function Nn(Xr){fn.push(hn[Xr]),Un++}function gi(Xr,En,ci){var gr=$r[Xr];return delete $r[Xr],$r[En]=gr,fn[gr].geometry[0].pop(),fn[gr].geometry[0]=fn[gr].geometry[0].concat(ci[0]),gr}function $n(Xr,En,ci){var gr=sn[En];return delete sn[En],sn[Xr]=gr,fn[gr].geometry[0].shift(),fn[gr].geometry[0]=ci[0].concat(fn[gr].geometry[0]),gr}function _i(Xr,En,ci){var gr=ci?En[0][En[0].length-1]:En[0][0];return Xr+":"+gr.x+":"+gr.y}for(var vn=0;vn<hn.length;vn++){var Yn=hn[vn],nr=Yn.geometry,Or=Yn.text?Yn.text.toString():null;if(Or){var Tr=_i(Or,nr),fr=_i(Or,nr,!0);if(Tr in $r&&fr in sn&&$r[Tr]!==sn[fr]){var Mi=$n(Tr,fr,nr),li=gi(Tr,fr,fn[Mi].geometry);delete sn[Tr],delete $r[fr],$r[_i(Or,fn[li].geometry,!0)]=li,fn[Mi].geometry=null}else Tr in $r?gi(Tr,fr,nr):fr in sn?$n(Tr,fr,nr):(Nn(vn),sn[Tr]=Un-1,$r[fr]=Un-1)}else Nn(vn)}return fn.filter(function(Xr){return Xr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(hn,sn){return hn.sortKey-sn.sortKey})}},Mr.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},Mr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Mr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Mr.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Mr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Mr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Mr.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(e.segment!==void 0){for(var u=e.dist(t[e.segment+1]),h=e.dist(t[e.segment]),f={},y=e.segment+1;y<t.length;y++)f[y]={x:t[y].x,y:t[y].y,tileUnitDistanceFromAnchor:u},y<t.length-1&&(u+=t[y+1].dist(t[y]));for(var w=e.segment||0;w>=0;w--)f[w]={x:t[w].x,y:t[w].y,tileUnitDistanceFromAnchor:h},w>0&&(h+=t[w-1].dist(t[w]));for(var C=0;C<t.length;C++){var I=f[C];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Mr.prototype.addSymbols=function(e,t,n,u,h,f,y,w,C,I,k,A){for(var F=e.indexArray,U=e.layoutVertexArray,W=e.segments.prepareSegment(4*t.length,U,F,this.canOverlap?f.sortKey:void 0),K=this.glyphOffsetArray.length,re=W.vertexLength,Q=this.allowVerticalPlacement&&y===Lo.vertical?Math.PI/2:0,ce=f.text&&f.text.sections,ge=0;ge<t.length;ge++){var xe=t[ge],Se=xe.tl,Ae=xe.tr,Be=xe.bl,Ge=xe.br,vt=xe.tex,et=xe.pixelOffsetTL,wt=xe.pixelOffsetBR,tt=xe.minFontScaleX,Kt=xe.minFontScaleY,Lt=xe.glyphOffset,dt=xe.isSDF,Yt=xe.sectionIndex,Zt=W.vertexLength,ur=Lt[1];Rh(U,w.x,w.y,Se.x,ur+Se.y,vt.x,vt.y,n,dt,et.x,et.y,tt,Kt),Rh(U,w.x,w.y,Ae.x,ur+Ae.y,vt.x+vt.w,vt.y,n,dt,wt.x,et.y,tt,Kt),Rh(U,w.x,w.y,Be.x,ur+Be.y,vt.x,vt.y+vt.h,n,dt,et.x,wt.y,tt,Kt),Rh(U,w.x,w.y,Ge.x,ur+Ge.y,vt.x+vt.w,vt.y+vt.h,n,dt,wt.x,wt.y,tt,Kt),Od(e.dynamicLayoutVertexArray,w,Q),F.emplaceBack(Zt,Zt+1,Zt+2),F.emplaceBack(Zt+1,Zt+2,Zt+3),W.vertexLength+=4,W.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lt[0]),ge!==t.length-1&&Yt===t[ge+1].sectionIndex||e.programConfigurations.populatePaintArrays(U.length,f,f.index,{},A,ce&&ce[Yt])}e.placedSymbolArray.emplaceBack(w.x,w.y,K,this.glyphOffsetArray.length-K,re,C,I,w.segment,n?n[0]:0,n?n[1]:0,u[0],u[1],y,0,!1,0,k)},Mr.prototype._addCollisionDebugVertex=function(e,t,n,u,h,f){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,u,h,Math.round(f.x),Math.round(f.y))},Mr.prototype.addCollisionDebugVertices=function(e,t,n,u,h,f,y){var w=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),C=w.vertexLength,I=h.layoutVertexArray,k=h.collisionVertexArray,A=y.anchorX,F=y.anchorY;this._addCollisionDebugVertex(I,k,f,A,F,new he(e,t)),this._addCollisionDebugVertex(I,k,f,A,F,new he(n,t)),this._addCollisionDebugVertex(I,k,f,A,F,new he(n,u)),this._addCollisionDebugVertex(I,k,f,A,F,new he(e,u)),w.vertexLength+=4;var U=h.indexArray;U.emplaceBack(C,C+1),U.emplaceBack(C+1,C+2),U.emplaceBack(C+2,C+3),U.emplaceBack(C+3,C),w.primitiveLength+=4},Mr.prototype.addDebugCollisionBoxes=function(e,t,n,u){for(var h=e;h<t;h++){var f=this.collisionBoxArray.get(h);this.addCollisionDebugVertices(f.x1,f.y1,f.x2,f.y2,u?this.textCollisionBox:this.iconCollisionBox,f.anchorPoint,n)}},Mr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sp(tu,Sv.members,qu),this.iconCollisionBox=new sp(tu,Sv.members,qu);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Mr.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,u,h,f,y,w,C){for(var I={},k=t;k<n;k++){var A=e.get(k);I.textBox={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2,anchorPointX:A.anchorPointX,anchorPointY:A.anchorPointY},I.textFeatureIndex=A.featureIndex;break}for(var F=u;F<h;F++){var U=e.get(F);I.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},I.verticalTextFeatureIndex=U.featureIndex;break}for(var W=f;W<y;W++){var K=e.get(W);I.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},I.iconFeatureIndex=K.featureIndex;break}for(var re=w;re<C;re++){var Q=e.get(re);I.verticalIconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},I.verticalIconFeatureIndex=Q.featureIndex;break}return I},Mr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},Mr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Mr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Mr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Mr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Mr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Mr.prototype.addIndicesForPlacedSymbol=function(e,t){for(var n=e.placedSymbolArray.get(t),u=n.vertexStartIndex+4*n.numGlyphs,h=n.vertexStartIndex;h<u;h+=4)e.indexArray.emplaceBack(h,h+1,h+2),e.indexArray.emplaceBack(h+1,h+2,h+3)},Mr.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),u=[],h=[],f=[],y=0;y<this.symbolInstances.length;++y){f.push(y);var w=this.symbolInstances.get(y);u.push(0|Math.round(t*w.anchorX+n*w.anchorY)),h.push(w.featureIndex)}return f.sort(function(C,I){return u[C]-u[I]||h[I]-h[C]}),f},Mr.prototype.addToSortKeyRanges=function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Mr.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,u=this.symbolInstanceIndexes;n<u.length;n+=1){var h=this.symbolInstances.get(u[n]);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach(function(f,y,w){f>=0&&w.indexOf(f)===y&&t.addIndicesForPlacedSymbol(t.text,f)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},lt("SymbolBucket",Mr,{omit:["layers","collisionBoxArray","features","compareText"]}),Mr.MAX_GLYPHS=65535,Mr.addDynamicAttributes=Od;var vw=new ni({"symbol-placement":new _t(j.layout_symbol["symbol-placement"]),"symbol-spacing":new _t(j.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new _t(j.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ft(j.layout_symbol["symbol-sort-key"]),"symbol-z-order":new _t(j.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new _t(j.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new _t(j.layout_symbol["icon-ignore-placement"]),"icon-optional":new _t(j.layout_symbol["icon-optional"]),"icon-rotation-alignment":new _t(j.layout_symbol["icon-rotation-alignment"]),"icon-size":new ft(j.layout_symbol["icon-size"]),"icon-text-fit":new _t(j.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new _t(j.layout_symbol["icon-text-fit-padding"]),"icon-image":new ft(j.layout_symbol["icon-image"]),"icon-rotate":new ft(j.layout_symbol["icon-rotate"]),"icon-padding":new _t(j.layout_symbol["icon-padding"]),"icon-keep-upright":new _t(j.layout_symbol["icon-keep-upright"]),"icon-offset":new ft(j.layout_symbol["icon-offset"]),"icon-anchor":new ft(j.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new _t(j.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new _t(j.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new _t(j.layout_symbol["text-rotation-alignment"]),"text-field":new ft(j.layout_symbol["text-field"]),"text-font":new ft(j.layout_symbol["text-font"]),"text-size":new ft(j.layout_symbol["text-size"]),"text-max-width":new ft(j.layout_symbol["text-max-width"]),"text-line-height":new _t(j.layout_symbol["text-line-height"]),"text-letter-spacing":new ft(j.layout_symbol["text-letter-spacing"]),"text-justify":new ft(j.layout_symbol["text-justify"]),"text-radial-offset":new ft(j.layout_symbol["text-radial-offset"]),"text-variable-anchor":new _t(j.layout_symbol["text-variable-anchor"]),"text-anchor":new ft(j.layout_symbol["text-anchor"]),"text-max-angle":new _t(j.layout_symbol["text-max-angle"]),"text-writing-mode":new _t(j.layout_symbol["text-writing-mode"]),"text-rotate":new ft(j.layout_symbol["text-rotate"]),"text-padding":new _t(j.layout_symbol["text-padding"]),"text-keep-upright":new _t(j.layout_symbol["text-keep-upright"]),"text-transform":new ft(j.layout_symbol["text-transform"]),"text-offset":new ft(j.layout_symbol["text-offset"]),"text-allow-overlap":new _t(j.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new _t(j.layout_symbol["text-ignore-placement"]),"text-optional":new _t(j.layout_symbol["text-optional"])}),Fd={paint:new ni({"icon-opacity":new ft(j.paint_symbol["icon-opacity"]),"icon-color":new ft(j.paint_symbol["icon-color"]),"icon-halo-color":new ft(j.paint_symbol["icon-halo-color"]),"icon-halo-width":new ft(j.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ft(j.paint_symbol["icon-halo-blur"]),"icon-translate":new _t(j.paint_symbol["icon-translate"]),"icon-translate-anchor":new _t(j.paint_symbol["icon-translate-anchor"]),"text-opacity":new ft(j.paint_symbol["text-opacity"]),"text-color":new ft(j.paint_symbol["text-color"],{runtimeType:Xe,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new ft(j.paint_symbol["text-halo-color"]),"text-halo-width":new ft(j.paint_symbol["text-halo-width"]),"text-halo-blur":new ft(j.paint_symbol["text-halo-blur"]),"text-translate":new _t(j.paint_symbol["text-translate"]),"text-translate-anchor":new _t(j.paint_symbol["text-translate-anchor"])}),layout:vw},Kl=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:nt,this.defaultValue=e};Kl.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Kl.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Kl.prototype.outputDefined=function(){return!1},Kl.prototype.serialize=function(){return null},lt("FormatSectionOverride",Kl,{omit:["defaultValue"]});var gw=function(e){function t(n){e.call(this,n,Fd)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(n,u){if(e.prototype.recalculate.call(this,n,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var h=this.layout.get("text-writing-mode");if(h){for(var f=[],y=0,w=h;y<w.length;y+=1){var C=w[y];f.indexOf(C)<0&&f.push(C)}this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(n,u,h,f){var y=this.layout.get(n).evaluate(u,{},h,f),w=this._unevaluatedLayout._values[n];return w.isDataDriven()||Zo(w.value)||!y?y:function(C,I){return I.replace(/{([^{}]+)}/g,function(k,A){return A in C?String(C[A]):""})}(u.properties,y)},t.prototype.createBucket=function(n){return new Mr(n)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var n=0,u=Fd.paint.overridableProperties;n<u.length;n+=1){var h=u[n];if(t.hasPaintOverride(this.layout,h)){var f,y=this.paint.get(h),w=new Kl(y),C=new Ma(w,y.property.specification);f=y.value.kind==="constant"||y.value.kind==="source"?new Cs("source",C):new de("composite",C,y.value.zoomStops,y.value._interpolationType),this.paint._values[h]=new di(y.property,f,y.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(n,u,h){return!(!this.layout||u.isDataDriven()||h.isDataDriven())&&t.hasPaintOverride(this.layout,n)},t.hasPaintOverride=function(n,u){var h=n.get("text-field"),f=Fd.paint.properties[u],y=!1,w=function(k){for(var A=0,F=k;A<F.length;A+=1)if(f.overrides&&f.overrides.hasOverride(F[A]))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Br)w(h.value.value.sections);else if(h.value.kind==="source"){var C=function(k){y||(k instanceof ti&&en(k.value)===Cr?w(k.value.sections):k instanceof uo?w(k.sections):k.eachChild(C))},I=h.value;I._styleExpression&&C(I._styleExpression.expression)}return y},t}(pa),_w={paint:new ni({"background-color":new _t(j.paint_background["background-color"]),"background-pattern":new mi(j.paint_background["background-pattern"]),"background-opacity":new _t(j.paint_background["background-opacity"])})},xw=function(e){function t(n){e.call(this,n,_w)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(pa),ww={paint:new ni({"raster-opacity":new _t(j.paint_raster["raster-opacity"]),"raster-hue-rotate":new _t(j.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new _t(j.paint_raster["raster-brightness-min"]),"raster-brightness-max":new _t(j.paint_raster["raster-brightness-max"]),"raster-saturation":new _t(j.paint_raster["raster-saturation"]),"raster-contrast":new _t(j.paint_raster["raster-contrast"]),"raster-resampling":new _t(j.paint_raster["raster-resampling"]),"raster-fade-duration":new _t(j.paint_raster["raster-fade-duration"])})},bw=function(e){function t(n){e.call(this,n,ww)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(pa),Sw=function(e){function t(n){e.call(this,n,{}),this.implementation=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},t.prototype.onRemove=function(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},t}(pa),Ew={circle:xd,heatmap:s1,hillshade:l1,fill:T1,"fill-extrusion":O1,line:j1,symbol:gw,background:xw,raster:bw},Wv=ne.HTMLImageElement,Xv=ne.HTMLCanvasElement,Kv=ne.HTMLVideoElement,Hv=ne.ImageData,Bh=ne.ImageBitmap,Hu=function(e,t,n,u){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,u)};Hu.prototype.update=function(e,t,n){var u=e.width,h=e.height,f=!(this.size&&this.size[0]===u&&this.size[1]===h||n),y=this.context,w=y.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),w.bindTexture(w.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!t||t.premultiply!==!1)),f)this.size=[u,h],e instanceof Wv||e instanceof Xv||e instanceof Kv||e instanceof Hv||Bh&&e instanceof Bh?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,e):w.texImage2D(w.TEXTURE_2D,0,this.format,u,h,0,this.format,w.UNSIGNED_BYTE,e.data);else{var C=n||{x:0,y:0},I=C.x,k=C.y;e instanceof Wv||e instanceof Xv||e instanceof Kv||e instanceof Hv||Bh&&e instanceof Bh?w.texSubImage2D(w.TEXTURE_2D,0,I,k,w.RGBA,w.UNSIGNED_BYTE,e):w.texSubImage2D(w.TEXTURE_2D,0,I,k,u,h,w.RGBA,w.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&w.generateMipmap(w.TEXTURE_2D)},Hu.prototype.bind=function(e,t,n){var u=this.context.gl;u.bindTexture(u.TEXTURE_2D,this.texture),n!==u.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=u.LINEAR),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,t),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,t),this.wrap=t)},Hu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Hu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Rd=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Rd.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Rd.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Hl=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},It(["receive","process"],this),this.invoker=new Rd(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=zr()?e:ne};function $v(e,t,n){var u=2*Math.PI*6378137/256/Math.pow(2,n);return[e*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}Hl.prototype.send=function(e,t,n,u,h){var f=this;h===void 0&&(h=!1);var y=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[y]=n);var w=ei(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:e,hasCallback:!!n,targetMapId:u,mustQueue:h,sourceMapId:this.mapId,data:Ko(t,w)},w),{cancel:function(){n&&delete f.callbacks[y],f.target.postMessage({id:y,type:"<cancel>",targetMapId:u,sourceMapId:f.mapId})}}},Hl.prototype.receive=function(e){var t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[n];var u=this.cancelCallbacks[n];delete this.cancelCallbacks[n],u&&u()}else zr()||t.mustQueue?(this.tasks[n]=t,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,t)},Hl.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},Hl.prototype.processTask=function(e,t){var n=this;if(t.type==="<response>"){var u=this.callbacks[e];delete this.callbacks[e],u&&(t.error?u($i(t.error)):u(null,$i(t.data)))}else{var h=!1,f=ei(this.globalScope)?void 0:[],y=t.hasCallback?function(k,A){h=!0,delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:k?Ko(k):null,data:Ko(A,f)},f)}:function(k){h=!0},w=null,C=$i(t.data);if(this.parent[t.type])w=this.parent[t.type](t.sourceMapId,C,y);else if(this.parent.getWorkerSource){var I=t.type.split(".");w=this.parent.getWorkerSource(t.sourceMapId,I[0],C.source)[I[1]](C,y)}else y(new Error("Could not find function "+t.type));!h&&w&&w.cancel&&(this.cancelCallbacks[e]=w.cancel)}},Hl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var zn=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};zn.prototype.setNorthEast=function(e){return this._ne=e instanceof Kr?new Kr(e.lng,e.lat):Kr.convert(e),this},zn.prototype.setSouthWest=function(e){return this._sw=e instanceof Kr?new Kr(e.lng,e.lat):Kr.convert(e),this},zn.prototype.extend=function(e){var t,n,u=this._sw,h=this._ne;if(e instanceof Kr)t=e,n=e;else{if(!(e instanceof zn))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(zn.convert(e)):this.extend(Kr.convert(e)):this;if(n=e._ne,!(t=e._sw)||!n)return this}return u||h?(u.lng=Math.min(t.lng,u.lng),u.lat=Math.min(t.lat,u.lat),h.lng=Math.max(n.lng,h.lng),h.lat=Math.max(n.lat,h.lat)):(this._sw=new Kr(t.lng,t.lat),this._ne=new Kr(n.lng,n.lat)),this},zn.prototype.getCenter=function(){return new Kr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},zn.prototype.getSouthWest=function(){return this._sw},zn.prototype.getNorthEast=function(){return this._ne},zn.prototype.getNorthWest=function(){return new Kr(this.getWest(),this.getNorth())},zn.prototype.getSouthEast=function(){return new Kr(this.getEast(),this.getSouth())},zn.prototype.getWest=function(){return this._sw.lng},zn.prototype.getSouth=function(){return this._sw.lat},zn.prototype.getEast=function(){return this._ne.lng},zn.prototype.getNorth=function(){return this._ne.lat},zn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},zn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},zn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},zn.prototype.contains=function(e){var t=Kr.convert(e),n=t.lng,u=t.lat,h=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&h},zn.convert=function(e){return!e||e instanceof zn?e:new zn(e)};var Kr=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Kr.prototype.wrap=function(){return new Kr(ae(this.lng,-180,180),this.lat)},Kr.prototype.toArray=function(){return[this.lng,this.lat]},Kr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Kr.prototype.distanceTo=function(e){var t=Math.PI/180,n=this.lat*t,u=e.lat*t,h=Math.sin(n)*Math.sin(u)+Math.cos(n)*Math.cos(u)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(h,1))},Kr.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new zn(new Kr(this.lng-n,this.lat-t),new Kr(this.lng+n,this.lat+t))},Kr.convert=function(e){if(e instanceof Kr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Kr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Kr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Yv=2*Math.PI*63710088e-1;function Jv(e){return Yv*Math.cos(e*Math.PI/180)}function Qv(e){return(180+e)/360}function eg(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function tg(e,t){return e/Jv(t)}function Bd(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var $u=function(e,t,n){n===void 0&&(n=0),this.x=+e,this.y=+t,this.z=+n};$u.fromLngLat=function(e,t){t===void 0&&(t=0);var n=Kr.convert(e);return new $u(Qv(n.lng),eg(n.lat),tg(t,n.lat))},$u.prototype.toLngLat=function(){return new Kr(360*this.x-180,Bd(this.y))},$u.prototype.toAltitude=function(){return this.z*Jv(Bd(this.y))},$u.prototype.meterInMercatorCoordinateUnits=function(){return 1/Yv*(e=Bd(this.y),1/Math.cos(e*Math.PI/180));var e};var Yu=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=up(0,e,e,t,n)};Yu.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Yu.prototype.url=function(e,t){var n,u,h,f,y,w=(u=this.y,h=this.z,f=$v(256*(n=this.x),256*(u=Math.pow(2,h)-u-1),h),y=$v(256*(n+1),256*(u+1),h),f[0]+","+f[1]+","+y[0]+","+y[1]),C=function(I,k,A){for(var F,U="",W=I;W>0;W--)U+=(k&(F=1<<W-1)?1:0)+(A&F?2:0);return U}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",C).replace("{bbox-epsg-3857}",w)},Yu.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new he(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Yu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var rg=function(e,t){this.wrap=e,this.canonical=t,this.key=up(e,t.z,t.z,t.x,t.y)},Ln=function(e,t,n,u,h){this.overscaledZ=e,this.wrap=t,this.canonical=new Yu(n,+u,+h),this.key=up(t,e,n,u,h)};function up(e,t,n,u,h){(e*=2)<0&&(e=-1*e-1);var f=1<<n;return(f*f*e+f*h+u).toString(36)+n.toString(36)+t.toString(36)}Ln.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Ln.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Ln(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ln(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Ln.prototype.calculateScaledKey=function(e,t){var n=this.canonical.z-e;return e>this.canonical.z?up(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):up(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)},Ln.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Ln.prototype.children=function(e){if(this.overscaledZ>=e)return[new Ln(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,u=2*this.canonical.y;return[new Ln(t,this.wrap,t,n,u),new Ln(t,this.wrap,t,n+1,u),new Ln(t,this.wrap,t,n,u+1),new Ln(t,this.wrap,t,n+1,u+1)]},Ln.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Ln.prototype.wrapped=function(){return new Ln(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ln.prototype.unwrapTo=function(e){return new Ln(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Ln.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ln.prototype.toUnwrapped=function(){return new rg(this.wrap,this.canonical)},Ln.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ln.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new $u(e.x-this.wrap,e.y))},lt("CanonicalTileID",Yu),lt("OverscaledTileID",Ln,{omit:["posMatrix"]});var Os=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&n!=="mapbox"&&n!=="terrarium")return Ut('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var u=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox";for(var h=0;h<u;h++)this.data[this._idx(-1,h)]=this.data[this._idx(0,h)],this.data[this._idx(u,h)]=this.data[this._idx(u-1,h)],this.data[this._idx(h,-1)]=this.data[this._idx(h,0)],this.data[this._idx(h,u)]=this.data[this._idx(h,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)],this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)],this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]};Os.prototype.get=function(e,t){var n=new Uint8Array(this.data.buffer),u=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(n[u],n[u+1],n[u+2])},Os.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Os.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Os.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},Os.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},Os.prototype.getPixels=function(){return new to({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Os.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var u=t*this.dim,h=t*this.dim+this.dim,f=n*this.dim,y=n*this.dim+this.dim;switch(t){case-1:u=h-1;break;case 1:h=u+1}switch(n){case-1:f=y-1;break;case 1:y=f+1}for(var w=-t*this.dim,C=-n*this.dim,I=f;I<y;I++)for(var k=u;k<h;k++)this.data[this._idx(k,I)]=e.data[this._idx(k+w,I+C)]},lt("DEMData",Os);var Uh=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};Uh.prototype.encode=function(e){return this._stringToNumber[e]},Uh.prototype.decode=function(e){return this._numberToString[e]};var Nh=function(e,t,n,u,h){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=u,this.properties=e.properties,this.id=h},Ud={geometry:{configurable:!0}};Ud.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Ud.geometry.set=function(e){this._geometry=e},Nh.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(Nh.prototype,Ud);var $l=function(){this.state={},this.stateChanges={},this.deletedStates={}};$l.prototype.updateState=function(e,t,n){var u=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},le(this.stateChanges[e][u],n),this.deletedStates[e]===null)for(var h in this.deletedStates[e]={},this.state[e])h!==u&&(this.deletedStates[e][h]=null);else if(this.deletedStates[e]&&this.deletedStates[e][u]===null)for(var f in this.deletedStates[e][u]={},this.state[e][u])n[f]||(this.deletedStates[e][u][f]=null);else for(var y in n)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][y]===null&&delete this.deletedStates[e][u][y]},$l.prototype.removeFeatureState=function(e,t,n){if(this.deletedStates[e]!==null){var u=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&t!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][n]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(n in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][n]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}},$l.prototype.getState=function(e,t){var n=String(t),u=le({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var h=this.deletedStates[e][t];if(h===null)return{};for(var f in h)delete u[f]}return u},$l.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},$l.prototype.coalesceChanges=function(e,t){var n={};for(var u in this.stateChanges){this.state[u]=this.state[u]||{};var h={};for(var f in this.stateChanges[u])this.state[u][f]||(this.state[u][f]={}),le(this.state[u][f],this.stateChanges[u][f]),h[f]=this.state[u][f];n[u]=h}for(var y in this.deletedStates){this.state[y]=this.state[y]||{};var w={};if(this.deletedStates[y]===null)for(var C in this.state[y])w[C]={},this.state[y][C]={};else for(var I in this.deletedStates[y]){if(this.deletedStates[y][I]===null)this.state[y][I]={};else for(var k=0,A=Object.keys(this.deletedStates[y][I]);k<A.length;k+=1)delete this.state[y][I][A[k]];w[I]=this.state[y][I]}n[y]=n[y]||{},le(n[y],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(n).length!==0)for(var F in e)e[F].setFeatureState(n,t)};var Fs=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Ki(8192,16,0),this.grid3D=new Ki(8192,16,0),this.featureIndexArray=new z,this.promoteId=t};function ng(e,t,n,u,h){return pt(e,function(f,y){var w=t instanceof ju?t.get(y):null;return w&&w.evaluate?w.evaluate(n,u,h):w})}function ig(e){for(var t=1/0,n=1/0,u=-1/0,h=-1/0,f=0,y=e;f<y.length;f+=1){var w=y[f];t=Math.min(t,w.x),n=Math.min(n,w.y),u=Math.max(u,w.x),h=Math.max(h,w.y)}return{minX:t,minY:n,maxX:u,maxY:h}}function Cw(e,t){return t-e}Fs.prototype.insert=function(e,t,n,u,h,f){var y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,u,h);for(var w=f?this.grid3D:this.grid,C=0;C<t.length;C++){for(var I=t[C],k=[1/0,1/0,-1/0,-1/0],A=0;A<I.length;A++){var F=I[A];k[0]=Math.min(k[0],F.x),k[1]=Math.min(k[1],F.y),k[2]=Math.max(k[2],F.x),k[3]=Math.max(k[3],F.y)}k[0]<8192&&k[1]<8192&&k[2]>=0&&k[3]>=0&&w.insert(y,k[0],k[1],k[2],k[3])}},Fs.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Nl.VectorTile(new Ph(this.rawTileData)).layers,this.sourceLayerCoder=new Uh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Fs.prototype.query=function(e,t,n,u){var h=this;this.loadVTLayers();for(var f=e.params||{},y=8192/e.tileSize/e.scale,w=Ii(f.filter),C=e.queryGeometry,I=e.queryPadding*y,k=ig(C),A=this.grid.query(k.minX-I,k.minY-I,k.maxX+I,k.maxY+I),F=ig(e.cameraQueryGeometry),U=this.grid3D.query(F.minX-I,F.minY-I,F.maxX+I,F.maxY+I,function(xe,Se,Ae,Be){return function(Ge,vt,et,wt,tt){for(var Kt=0,Lt=Ge;Kt<Lt.length;Kt+=1){var dt=Lt[Kt];if(vt<=dt.x&&et<=dt.y&&wt>=dt.x&&tt>=dt.y)return!0}var Yt=[new he(vt,et),new he(vt,tt),new he(wt,tt),new he(wt,et)];if(Ge.length>2){for(var Zt=0,ur=Yt;Zt<ur.length;Zt+=1)if(fa(Ge,ur[Zt]))return!0}for(var bt=0;bt<Ge.length-1;bt++)if(Wu(Ge[bt],Ge[bt+1],Yt))return!0;return!1}(e.cameraQueryGeometry,xe-I,Se-I,Ae+I,Be+I)}),W=0,K=U;W<K.length;W+=1)A.push(K[W]);A.sort(Cw);for(var re,Q={},ce=function(xe){var Se=A[xe];if(Se!==re){re=Se;var Ae=h.featureIndexArray.get(Se),Be=null;h.loadMatchingFeature(Q,Ae.bucketIndex,Ae.sourceLayerIndex,Ae.featureIndex,w,f.layers,f.availableImages,t,n,u,function(Ge,vt,et){return Be||(Be=an(Ge)),vt.queryIntersectsFeature(C,Ge,et,Be,h.z,e.transform,y,e.pixelPosMatrix)})}},ge=0;ge<A.length;ge++)ce(ge);return Q},Fs.prototype.loadMatchingFeature=function(e,t,n,u,h,f,y,w,C,I,k){var A=this.bucketLayerIDs[t];if(!f||function(Ge,vt){for(var et=0;et<Ge.length;et++)if(vt.indexOf(Ge[et])>=0)return!0;return!1}(f,A)){var F=this.sourceLayerCoder.decode(n),U=this.vtLayers[F].feature(u);if(h.needGeometry){var W=yn(U,!0);if(!h.filter(new Jt(this.tileID.overscaledZ),W,this.tileID.canonical))return}else if(!h.filter(new Jt(this.tileID.overscaledZ),U))return;for(var K=this.getId(U,F),re=0;re<A.length;re++){var Q=A[re];if(!(f&&f.indexOf(Q)<0)){var ce=w[Q];if(ce){var ge={};K!==void 0&&I&&(ge=I.getState(ce.sourceLayer||"_geojsonTileLayer",K));var xe=le({},C[Q]);xe.paint=ng(xe.paint,ce.paint,U,ge,y),xe.layout=ng(xe.layout,ce.layout,U,ge,y);var Se=!k||k(U,ce,ge);if(Se){var Ae=new Nh(U,this.z,this.x,this.y,K);Ae.layer=xe;var Be=e[Q];Be===void 0&&(Be=e[Q]=[]),Be.push({featureIndex:u,feature:Ae,intersectionZ:Se})}}}}}},Fs.prototype.lookupSymbolFeatures=function(e,t,n,u,h,f,y,w){var C={};this.loadVTLayers();for(var I=Ii(h),k=0,A=e;k<A.length;k+=1)this.loadMatchingFeature(C,n,u,A[k],I,f,y,w,t);return C},Fs.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var u=0,h=n[t];u<h.length;u+=1)if(e===h[u])return!0;return!1},Fs.prototype.getId=function(e,t){var n=e.id;return this.promoteId&&typeof(n=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(n=Number(n)),n},lt("FeatureIndex",Fs,{omit:["rawTileData","sourceLayerCoder"]});var Hn=function(e,t){this.tileID=e,this.uid=Me(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Hn.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<ii.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Hn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Hn.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var u in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(I,k){var A={};if(!k)return A;for(var F=function(){var K=W[U],re=K.layerIds.map(function(ge){return k.getLayer(ge)}).filter(Boolean);if(re.length!==0){K.layers=re,K.stateDependentLayerIds&&(K.stateDependentLayers=K.stateDependentLayerIds.map(function(ge){return re.filter(function(xe){return xe.id===ge})[0]}));for(var Q=0,ce=re;Q<ce.length;Q+=1)A[ce[Q].id]=K}},U=0,W=I;U<W.length;U+=1)F();return A}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var h=this.buckets[u];if(h instanceof Mr){if(this.hasSymbolBuckets=!0,!n)break;h.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var f in this.buckets){var y=this.buckets[f];if(y instanceof Mr&&y.hasRTLText){this.hasRTLText=!0,mo.isLoading()||mo.isLoaded()||Gc()!=="deferred"||Ho();break}}for(var w in this.queryPadding=0,this.buckets){var C=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(w).queryRadius(C))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},Hn.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Hn.prototype.getBucket=function(e){return this.buckets[e.id]},Hn.prototype.upload=function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var u=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Hu(e,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Hu(e,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)},Hn.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Hn.prototype.queryRenderedFeatures=function(e,t,n,u,h,f,y,w,C,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:u,cameraQueryGeometry:h,scale:f,tileSize:this.tileSize,pixelPosMatrix:I,transform:w,params:y,queryPadding:this.queryPadding*C},e,t,n):{}},Hn.prototype.querySourceFeatures=function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var u=n.loadVTLayers(),h=t?t.sourceLayer:"",f=u._geojsonTileLayer||u[h];if(f)for(var y=Ii(t&&t.filter),w=this.tileID.canonical,C=w.z,I=w.x,k=w.y,A={z:C,x:I,y:k},F=0;F<f.length;F++){var U=f.feature(F);if(y.needGeometry){var W=yn(U,!0);if(!y.filter(new Jt(this.tileID.overscaledZ),W,this.tileID.canonical))continue}else if(!y.filter(new Jt(this.tileID.overscaledZ),U))continue;var K=n.getId(U,h),re=new Nh(U,C,I,k,K);re.tile=A,e.push(re)}}},Hn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Hn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Hn.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=Qn(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var u=Date.now(),h=!1;if(this.expirationTime>u)h=!1;else if(t)if(this.expirationTime<t)h=!0;else{var f=this.expirationTime-t;f?this.expirationTime=u+Math.max(f,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Hn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Hn.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var n=this.latestFeatureIndex.loadVTLayers();for(var u in this.buckets)if(t.style.hasLayer(u)){var h=this.buckets[u],f=h.layers[0].sourceLayer||"_geojsonTileLayer",y=n[f],w=e[f];if(y&&w&&Object.keys(w).length!==0){h.update(w,y,this.imageAtlas&&this.imageAtlas.patternPositions||{});var C=t&&t.style&&t.style.getLayer(u);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(h)))}}}},Hn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Hn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ii.now()},Hn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Hn.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=ii.now()+e},Hn.prototype.setDependencies=function(e,t){for(var n={},u=0,h=t;u<h.length;u+=1)n[h[u]]=!0;this.dependencies[e]=n},Hn.prototype.hasDependency=function(e,t){for(var n=0,u=e;n<u.length;n+=1){var h=this.dependencies[u[n]];if(h){for(var f=0,y=t;f<y.length;f+=1)if(h[y[f]])return!0}}return!1};var au=ne.performance,og=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},au.mark(this._marks.start)};og.prototype.finish=function(){au.mark(this._marks.end);var e=au.getEntriesByName(this._marks.measure);return e.length===0&&(au.measure(this._marks.measure,this._marks.start,this._marks.end),e=au.getEntriesByName(this._marks.measure),au.clearMarks(this._marks.start),au.clearMarks(this._marks.end),au.clearMeasures(this._marks.measure)),e},l.Actor=Hl,l.AlphaImage=Ku,l.CanonicalTileID=Yu,l.CollisionBoxArray=s,l.Color=cr,l.DEMData=Os,l.DataConstantProperty=_t,l.DictionaryCoder=Uh,l.EXTENT=8192,l.ErrorEvent=ie,l.EvaluationParameters=Jt,l.Event=X,l.Evented=ue,l.FeatureIndex=Fs,l.FillBucket=Ba,l.FillExtrusionBucket=Ua,l.ImageAtlas=ap,l.ImagePosition=Ah,l.LineBucket=Ai,l.LngLat=Kr,l.LngLatBounds=zn,l.MercatorCoordinate=$u,l.ONE_EM=24,l.OverscaledTileID=Ln,l.Point=he,l.Point$1=he,l.Properties=ni,l.Protobuf=Ph,l.RGBAImage=to,l.RequestManager=rn,l.RequestPerformance=og,l.ResourceType=gs,l.SegmentVector=V,l.SourceFeatureState=$l,l.StructArrayLayout1ui2=Yc,l.StructArrayLayout2f1f2i16=Ms,l.StructArrayLayout2i4=As,l.StructArrayLayout3ui6=Ya,l.StructArrayLayout4i8=Xc,l.SymbolBucket=Mr,l.Texture=Hu,l.Tile=Hn,l.Transitionable=ri,l.Uniform1f=qe,l.Uniform1i=De,l.Uniform2f=je,l.Uniform3f=ot,l.Uniform4f=xt,l.UniformColor=Ct,l.UniformMatrix4f=hr,l.UnwrappedTileID=rg,l.ValidationError=Y,l.WritingMode=Lo,l.ZoomHistory=jc,l.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},l.addDynamicAttributes=Od,l.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var u=e.length,h=new Array(e.length),f=null;e.forEach(function(y,w){t(y,function(C,I){C&&(f=C),h[w]=I,--u==0&&n(f,h)})})},l.bezier=He,l.bindAll=It,l.browser=ii,l.cacheEntryPossiblyAdded=function(e){++Dn>Ni&&(e.getActor().send("enforceCacheSizeLimit",Ui),Dn=0)},l.clamp=pe,l.clearTileCache=function(e){var t=ne.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},l.clipLine=Nv,l.clone=function(e){var t=new _r(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},l.clone$1=br,l.clone$2=function(e){var t=new _r(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},l.collisionCircleLayout=G1,l.config=sr,l.create=function(){var e=new _r(16);return _r!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},l.create$1=function(){var e=new _r(9);return _r!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},l.create$2=function(){var e=new _r(4);return _r!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},l.createCommonjsModule=L,l.createExpression=Es,l.createLayout=Xn,l.createStyleLayer=function(e){return e.type==="custom"?new Sw(e):new Ew[e.type](e)},l.cross=function(e,t,n){var u=t[0],h=t[1],f=t[2],y=n[0],w=n[1],C=n[2];return e[0]=h*C-f*w,e[1]=f*y-u*C,e[2]=u*w-h*y,e},l.deepEqual=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var u=0;u<t.length;u++)if(!e(t[u],n[u]))return!1;return!0}if(typeof t=="object"&&t!==null&&n!==null){if(typeof n!="object"||Object.keys(t).length!==Object.keys(n).length)return!1;for(var h in t)if(!e(t[h],n[h]))return!1;return!0}return t===n},l.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},l.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},l.ease=rt,l.emitValidationErrors=ua,l.endsWith=Ot,l.enforceCacheSizeLimit=function(e){Zn(),hi&&hi.then(function(t){t.keys().then(function(n){for(var u=0;u<n.length-e;u++)t.delete(n[u])})})},l.evaluateSizeForFeature=Dv,l.evaluateSizeForZoom=Ov,l.evaluateVariableOffset=qv,l.evented=Zc,l.extend=le,l.featureFilter=Ii,l.filterObject=er,l.fromRotation=function(e,t){var n=Math.sin(t),u=Math.cos(t);return e[0]=u,e[1]=n,e[2]=0,e[3]=-n,e[4]=u,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},l.getAnchorAlignment=Md,l.getAnchorJustification=Dd,l.getArrayBuffer=Wa,l.getImage=O,l.getJSON=function(e,t){return Ir(le(e,{type:"json"}),t)},l.getRTLTextPluginStatus=Gc,l.getReferrer=Ea,l.getVideo=function(e,t){var n,u,h=ne.document.createElement("video");h.muted=!0,h.onloadstart=function(){t(null,h)};for(var f=0;f<e.length;f++){var y=ne.document.createElement("source");n=e[f],u=void 0,(u=ne.document.createElement("a")).href=n,(u.protocol!==ne.document.location.protocol||u.host!==ne.document.location.host)&&(h.crossOrigin="Anonymous"),y.src=e[f],h.appendChild(y)}return{cancel:function(){}}},l.identity=yo,l.invert=function(e,t){var n=t[0],u=t[1],h=t[2],f=t[3],y=t[4],w=t[5],C=t[6],I=t[7],k=t[8],A=t[9],F=t[10],U=t[11],W=t[12],K=t[13],re=t[14],Q=t[15],ce=n*w-u*y,ge=n*C-h*y,xe=n*I-f*y,Se=u*C-h*w,Ae=u*I-f*w,Be=h*I-f*C,Ge=k*K-A*W,vt=k*re-F*W,et=k*Q-U*W,wt=A*re-F*K,tt=A*Q-U*K,Kt=F*Q-U*re,Lt=ce*Kt-ge*tt+xe*wt+Se*et-Ae*vt+Be*Ge;return Lt?(e[0]=(w*Kt-C*tt+I*wt)*(Lt=1/Lt),e[1]=(h*tt-u*Kt-f*wt)*Lt,e[2]=(K*Be-re*Ae+Q*Se)*Lt,e[3]=(F*Ae-A*Be-U*Se)*Lt,e[4]=(C*et-y*Kt-I*vt)*Lt,e[5]=(n*Kt-h*et+f*vt)*Lt,e[6]=(re*xe-W*Be-Q*ge)*Lt,e[7]=(k*Be-F*xe+U*ge)*Lt,e[8]=(y*tt-w*et+I*Ge)*Lt,e[9]=(u*et-n*tt-f*Ge)*Lt,e[10]=(W*Ae-K*xe+Q*ce)*Lt,e[11]=(A*xe-k*Ae-U*ce)*Lt,e[12]=(w*vt-y*wt-C*Ge)*Lt,e[13]=(n*wt-u*vt+h*Ge)*Lt,e[14]=(K*ge-W*Se-re*ce)*Lt,e[15]=(k*Se-A*ge+F*ce)*Lt,e):null},l.isChar=Ke,l.isMapboxURL=In,l.keysDifference=function(e,t){var n=[];for(var u in e)u in t||n.push(u);return n},l.makeRequest=Ir,l.mapObject=pt,l.mercatorXfromLng=Qv,l.mercatorYfromLat=eg,l.mercatorZfromAltitude=tg,l.mul=_d,l.multiply=ki,l.mvt=Nl,l.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},l.normalize=function(e,t){var n=t[0],u=t[1],h=t[2],f=n*n+u*u+h*h;return f>0&&(f=1/Math.sqrt(f)),e[0]=t[0]*f,e[1]=t[1]*f,e[2]=t[2]*f,e},l.number=tn,l.offscreenCanvasSupported=$t,l.ortho=function(e,t,n,u,h,f,y){var w=1/(t-n),C=1/(u-h),I=1/(f-y);return e[0]=-2*w,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*C,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*I,e[11]=0,e[12]=(t+n)*w,e[13]=(h+u)*C,e[14]=(y+f)*I,e[15]=1,e},l.parseGlyphPBF=function(e){return new Ph(e).readFields(rw,[])},l.pbf=Ph,l.performSymbolLayout=function(e,t,n,u,h,f,y){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var w=e.layers[0].layout,C=e.layers[0]._unevaluatedLayout._values,I={};if(e.textSizeData.kind==="composite"){var k=e.textSizeData,A=k.maxZoom;I.compositeTextSizes=[C["text-size"].possiblyEvaluate(new Jt(k.minZoom),y),C["text-size"].possiblyEvaluate(new Jt(A),y)]}if(e.iconSizeData.kind==="composite"){var F=e.iconSizeData,U=F.maxZoom;I.compositeIconSizes=[C["icon-size"].possiblyEvaluate(new Jt(F.minZoom),y),C["icon-size"].possiblyEvaluate(new Jt(U),y)]}I.layoutTextSize=C["text-size"].possiblyEvaluate(new Jt(e.zoom+1),y),I.layoutIconSize=C["icon-size"].possiblyEvaluate(new Jt(e.zoom+1),y),I.textMaxSize=C["text-size"].possiblyEvaluate(new Jt(18));for(var W=24*w.get("text-line-height"),K=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point",re=w.get("text-keep-upright"),Q=w.get("text-size"),ce=function(){var Se=xe[ge],Ae=w.get("text-font").evaluate(Se,{},y).join(","),Be=Q.evaluate(Se,{},y),Ge=I.layoutTextSize.evaluate(Se,{},y),vt=I.layoutIconSize.evaluate(Se,{},y),et={horizontal:{},vertical:void 0},wt=Se.text,tt=[0,0];if(wt){var Kt=wt.toString(),Lt=24*w.get("text-letter-spacing").evaluate(Se,{},y),dt=function(nr){for(var Or=0,Tr=nr;Or<Tr.length;Or+=1)if(fr=Tr[Or].charCodeAt(0),Ke.Arabic(fr)||Ke["Arabic Supplement"](fr)||Ke["Arabic Extended-A"](fr)||Ke["Arabic Presentation Forms-A"](fr)||Ke["Arabic Presentation Forms-B"](fr))return!1;var fr;return!0}(Kt)?Lt:0,Yt=w.get("text-anchor").evaluate(Se,{},y),Zt=w.get("text-variable-anchor");if(!Zt){var ur=w.get("text-radial-offset").evaluate(Se,{},y);tt=ur?qv(Yt,[24*ur,Ld]):w.get("text-offset").evaluate(Se,{},y).map(function(nr){return 24*nr})}var bt=K?"center":w.get("text-justify").evaluate(Se,{},y),vr=w.get("symbol-placement"),Hr=vr==="point"?24*w.get("text-max-width").evaluate(Se,{},y):0,hn=function(){e.allowVerticalPlacement&&Vc(Kt)&&(et.vertical=Mh(wt,t,n,h,Ae,Hr,W,Yt,"left",dt,tt,Lo.vertical,!0,vr,Ge,Be))};if(!K&&Zt){for(var sn=bt==="auto"?Zt.map(function(nr){return Dd(nr)}):[bt],$r=!1,fn=0;fn<sn.length;fn++){var Un=sn[fn];if(!et.horizontal[Un])if($r)et.horizontal[Un]=et.horizontal[0];else{var Nn=Mh(wt,t,n,h,Ae,Hr,W,"center",Un,dt,tt,Lo.horizontal,!1,vr,Ge,Be);Nn&&(et.horizontal[Un]=Nn,$r=Nn.positionedLines.length===1)}}hn()}else{bt==="auto"&&(bt=Dd(Yt));var gi=Mh(wt,t,n,h,Ae,Hr,W,Yt,bt,dt,tt,Lo.horizontal,!1,vr,Ge,Be);gi&&(et.horizontal[bt]=gi),hn(),Vc(Kt)&&K&&re&&(et.vertical=Mh(wt,t,n,h,Ae,Hr,W,Yt,bt,dt,tt,Lo.vertical,!1,vr,Ge,Be))}}var $n=void 0,_i=!1;if(Se.icon&&Se.icon.name){var vn=u[Se.icon.name];vn&&($n=function(nr,Or,Tr){var fr=Md(Tr),Mi=Or[0]-nr.displaySize[0]*fr.horizontalAlign,li=Or[1]-nr.displaySize[1]*fr.verticalAlign;return{image:nr,top:li,bottom:li+nr.displaySize[1],left:Mi,right:Mi+nr.displaySize[0]}}(h[Se.icon.name],w.get("icon-offset").evaluate(Se,{},y),w.get("icon-anchor").evaluate(Se,{},y)),_i=vn.sdf,e.sdfIcons===void 0?e.sdfIcons=vn.sdf:e.sdfIcons!==vn.sdf&&Ut("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(vn.pixelRatio!==e.pixelRatio||w.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var Yn=Gv(et.horizontal)||et.vertical;e.iconsInText=!!Yn&&Yn.iconsInText,(Yn||$n)&&function(nr,Or,Tr,fr,Mi,li,Xr,En,ci,gr,ns){var Do=li.textMaxSize.evaluate(Or,{});Do===void 0&&(Do=Xr);var is,gn=nr.layers[0].layout,os=gn.get("icon-offset").evaluate(Or,{},ns),ma=Gv(Tr.horizontal),Yl=Xr/24,Ju=nr.tilePixelRatio*Yl,Jl=nr.tilePixelRatio*Do/24,Rs=nr.tilePixelRatio*En,Ql=nr.tilePixelRatio*gn.get("symbol-spacing"),jh=gn.get("text-padding")*nr.tilePixelRatio,ec=gn.get("icon-padding")*nr.tilePixelRatio,lp=gn.get("text-max-angle")/180*Math.PI,Vh=gn.get("text-rotation-alignment")==="map"&&gn.get("symbol-placement")!=="point",qh=gn.get("icon-rotation-alignment")==="map"&&gn.get("symbol-placement")!=="point",Bs=gn.get("symbol-placement"),cp=Ql/2,tc=gn.get("icon-text-fit");fr&&tc!=="none"&&(nr.allowVerticalPlacement&&Tr.vertical&&(is=Lv(fr,Tr.vertical,tc,gn.get("icon-text-fit-padding"),os,Yl)),ma&&(fr=Lv(fr,ma,tc,gn.get("icon-text-fit-padding"),os,Yl)));var su=function(Tw,gp){gp.x<0||gp.x>=8192||gp.y<0||gp.y>=8192||function(_n,Na,Iw,uu,qd,ug,Hh,as,$h,_p,Yh,Jh,Zd,lg,xp,cg,pg,hg,fg,dg,Oo,Qh,mg,ss,Pw){var yg,el,ac,sc,uc,lc=_n.addToLineVertexArray(Na,Iw),vg=0,gg=0,_g=0,xg=0,Gd=-1,Wd=-1,Us={},wg=G(""),Xd=0,Kd=0;if(as._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Xd=(yg=as.layout.get("text-offset").evaluate(Oo,{},ss).map(function(bp){return 24*bp}))[0],Kd=yg[1]):(Xd=24*as.layout.get("text-radial-offset").evaluate(Oo,{},ss),Kd=Ld),_n.allowVerticalPlacement&&uu.vertical){var bg=as.layout.get("text-rotate").evaluate(Oo,{},ss)+90;sc=new Fh($h,Na,_p,Yh,Jh,uu.vertical,Zd,lg,xp,bg),Hh&&(uc=new Fh($h,Na,_p,Yh,Jh,Hh,pg,hg,xp,bg))}if(qd){var Hd=as.layout.get("icon-rotate").evaluate(Oo,{}),Sg=as.layout.get("icon-text-fit")!=="none",Eg=jv(qd,Hd,mg,Sg),$d=Hh?jv(Hh,Hd,mg,Sg):void 0;ac=new Fh($h,Na,_p,Yh,Jh,qd,pg,hg,!1,Hd),vg=4*Eg.length;var Cg=_n.iconSizeData,wp=null;Cg.kind==="source"?(wp=[128*as.layout.get("icon-size").evaluate(Oo,{})])[0]>32640&&Ut(_n.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Cg.kind==="composite"&&((wp=[128*Qh.compositeIconSizes[0].evaluate(Oo,{},ss),128*Qh.compositeIconSizes[1].evaluate(Oo,{},ss)])[0]>32640||wp[1]>32640)&&Ut(_n.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),_n.addSymbols(_n.icon,Eg,wp,dg,fg,Oo,!1,Na,lc.lineStartIndex,lc.lineLength,-1,ss),Gd=_n.icon.placedSymbolArray.length-1,$d&&(gg=4*$d.length,_n.addSymbols(_n.icon,$d,wp,dg,fg,Oo,Lo.vertical,Na,lc.lineStartIndex,lc.lineLength,-1,ss),Wd=_n.icon.placedSymbolArray.length-1)}for(var Tg in uu.horizontal){var ef=uu.horizontal[Tg];if(!el){wg=G(ef.text);var kw=as.layout.get("text-rotate").evaluate(Oo,{},ss);el=new Fh($h,Na,_p,Yh,Jh,ef,Zd,lg,xp,kw)}var Ig=ef.positionedLines.length===1;if(_g+=Zv(_n,Na,ef,ug,as,xp,Oo,cg,lc,uu.vertical?Lo.horizontal:Lo.horizontalOnly,Ig?Object.keys(uu.horizontal):[Tg],Us,Gd,Qh,ss),Ig)break}uu.vertical&&(xg+=Zv(_n,Na,uu.vertical,ug,as,xp,Oo,cg,lc,Lo.vertical,["vertical"],Us,Wd,Qh,ss));var Aw=el?el.boxStartIndex:_n.collisionBoxArray.length,Mw=el?el.boxEndIndex:_n.collisionBoxArray.length,zw=sc?sc.boxStartIndex:_n.collisionBoxArray.length,Lw=sc?sc.boxEndIndex:_n.collisionBoxArray.length,Dw=ac?ac.boxStartIndex:_n.collisionBoxArray.length,Ow=ac?ac.boxEndIndex:_n.collisionBoxArray.length,Fw=uc?uc.boxStartIndex:_n.collisionBoxArray.length,Rw=uc?uc.boxEndIndex:_n.collisionBoxArray.length,us=-1,tf=function(bp,kg){return bp&&bp.circleDiameter?Math.max(bp.circleDiameter,kg):kg};us=tf(el,us),us=tf(sc,us),us=tf(ac,us);var Pg=(us=tf(uc,us))>-1?1:0;Pg&&(us*=Pw/24),_n.glyphOffsetArray.length>=Mr.MAX_GLYPHS&&Ut("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Oo.sortKey!==void 0&&_n.addToSortKeyRanges(_n.symbolInstances.length,Oo.sortKey),_n.symbolInstances.emplaceBack(Na.x,Na.y,Us.right>=0?Us.right:-1,Us.center>=0?Us.center:-1,Us.left>=0?Us.left:-1,Us.vertical||-1,Gd,Wd,wg,Aw,Mw,zw,Lw,Dw,Ow,Fw,Rw,_p,_g,xg,vg,gg,Pg,0,Zd,Xd,Kd,us)}(nr,gp,Tw,Tr,fr,Mi,is,nr.layers[0],nr.collisionBoxArray,Or.index,Or.sourceLayerIndex,nr.index,Ju,jh,Vh,ci,Rs,ec,qh,os,Or,li,gr,ns,Xr)};if(Bs==="line")for(var rc=0,Zh=Nv(Or.geometry,0,0,8192,8192);rc<Zh.length;rc+=1)for(var Gh=Zh[rc],pp=0,hp=lw(Gh,Ql,lp,Tr.vertical||ma,fr,24,Jl,nr.overscaling,8192);pp<hp.length;pp+=1){var Wh=hp[pp];ma&&fw(nr,ma.text,cp,Wh)||su(Gh,Wh)}else if(Bs==="line-center")for(var fp=0,dp=Or.geometry;fp<dp.length;fp+=1){var mp=dp[fp];if(mp.length>1){var Xh=uw(mp,lp,Tr.vertical||ma,fr,24,Jl);Xh&&su(mp,Xh)}}else if(Or.type==="Polygon")for(var nc=0,Kh=Td(Or.geometry,0);nc<Kh.length;nc+=1){var ic=Kh[nc],yp=pw(ic,16);su(ic[0],new Zl(yp.x,yp.y,0))}else if(Or.type==="LineString")for(var Qu=0,vp=Or.geometry;Qu<vp.length;Qu+=1){var oc=vp[Qu];su(oc,new Zl(oc[0].x,oc[0].y,0))}else if(Or.type==="Point")for(var Nd=0,ag=Or.geometry;Nd<ag.length;Nd+=1)for(var jd=0,sg=ag[Nd];jd<sg.length;jd+=1){var Vd=sg[jd];su([Vd],new Zl(Vd.x,Vd.y,0))}}(e,Se,et,$n,u,I,Ge,vt,tt,_i,y)},ge=0,xe=e.features;ge<xe.length;ge+=1)ce();f&&e.generateCollisionDebugBuffers()},l.perspective=function(e,t,n,u,h){var f,y=1/Math.tan(t/2);return e[0]=y/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,h!=null&&h!==1/0?(e[10]=(h+u)*(f=1/(u-h)),e[14]=2*h*u*f):(e[10]=-1,e[14]=-2*u),e},l.pick=function(e,t){for(var n={},u=0;u<t.length;u++){var h=t[u];h in e&&(n[h]=e[h])}return n},l.plugin=mo,l.polygonIntersectsPolygon=es,l.postMapLoadEvent=Pn,l.postTurnstileEvent=Ga,l.potpack=kv,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=lt,l.registerForPluginStateChange=function(e){return e({pluginStatus:Ji,pluginURL:Oa}),Zc.on("pluginStateChange",e),e},l.renderColorRamp=cv,l.rotate=function(e,t,n){var u=t[0],h=t[1],f=t[2],y=t[3],w=Math.sin(n),C=Math.cos(n);return e[0]=u*C+f*w,e[1]=h*C+y*w,e[2]=u*-w+f*C,e[3]=h*-w+y*C,e},l.rotateX=function(e,t,n){var u=Math.sin(n),h=Math.cos(n),f=t[4],y=t[5],w=t[6],C=t[7],I=t[8],k=t[9],A=t[10],F=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=f*h+I*u,e[5]=y*h+k*u,e[6]=w*h+A*u,e[7]=C*h+F*u,e[8]=I*h-f*u,e[9]=k*h-y*u,e[10]=A*h-w*u,e[11]=F*h-C*u,e},l.rotateZ=function(e,t,n){var u=Math.sin(n),h=Math.cos(n),f=t[0],y=t[1],w=t[2],C=t[3],I=t[4],k=t[5],A=t[6],F=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=f*h+I*u,e[1]=y*h+k*u,e[2]=w*h+A*u,e[3]=C*h+F*u,e[4]=I*h-f*u,e[5]=k*h-y*u,e[6]=A*h-w*u,e[7]=F*h-C*u,e},l.scale=function(e,t,n){var u=n[0],h=n[1],f=n[2];return e[0]=t[0]*u,e[1]=t[1]*u,e[2]=t[2]*u,e[3]=t[3]*u,e[4]=t[4]*h,e[5]=t[5]*h,e[6]=t[6]*h,e[7]=t[7]*h,e[8]=t[8]*f,e[9]=t[9]*f,e[10]=t[10]*f,e[11]=t[11]*f,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},l.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},l.scale$2=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},l.setCacheLimits=function(e,t){Ui=e,Ni=t},l.setRTLTextPlugin=function(e,t,n){if(n===void 0&&(n=!1),Ji==="deferred"||Ji==="loading"||Ji==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Oa=ii.resolveURL(e),Ji="deferred",Al=t,Nu(),n||Ho()},l.sphericalToCartesian=function(e){var t=e[0],n=e[1],u=e[2];return n+=90,n*=Math.PI/180,u*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(u),y:t*Math.sin(n)*Math.sin(u),z:t*Math.cos(u)}},l.sqrLen=function(e){var t=e[0],n=e[1];return t*t+n*n},l.styleSpec=j,l.sub=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},l.symbolSize=sw,l.transformMat3=function(e,t,n){var u=t[0],h=t[1],f=t[2];return e[0]=u*n[0]+h*n[3]+f*n[6],e[1]=u*n[1]+h*n[4]+f*n[7],e[2]=u*n[2]+h*n[5]+f*n[8],e},l.transformMat4=Fl,l.translate=function(e,t,n){var u,h,f,y,w,C,I,k,A,F,U,W,K=n[0],re=n[1],Q=n[2];return t===e?(e[12]=t[0]*K+t[4]*re+t[8]*Q+t[12],e[13]=t[1]*K+t[5]*re+t[9]*Q+t[13],e[14]=t[2]*K+t[6]*re+t[10]*Q+t[14],e[15]=t[3]*K+t[7]*re+t[11]*Q+t[15]):(h=t[1],f=t[2],y=t[3],w=t[4],C=t[5],I=t[6],k=t[7],A=t[8],F=t[9],U=t[10],W=t[11],e[0]=u=t[0],e[1]=h,e[2]=f,e[3]=y,e[4]=w,e[5]=C,e[6]=I,e[7]=k,e[8]=A,e[9]=F,e[10]=U,e[11]=W,e[12]=u*K+w*re+A*Q+t[12],e[13]=h*K+C*re+F*Q+t[13],e[14]=f*K+I*re+U*Q+t[14],e[15]=y*K+k*re+W*Q+t[15]),e},l.triggerPluginCompletionEvent=wh,l.uniqueId=Me,l.validateCustomStyleLayer=function(e){var t=[],n=e.id;return n===void 0&&t.push({message:"layers."+n+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},l.validateLight=Tl,l.validateStyle=Xi,l.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},l.vectorTile=Nl,l.version="1.13.2",l.warnOnce=Ut,l.webpSupported=wo,l.window=ne,l.wrap=ae}),S(["./shared"],function(l){function L(M){var O=typeof M;if(O==="number"||O==="boolean"||O==="string"||M==null)return JSON.stringify(M);if(Array.isArray(M)){for(var B="[",Z=0,X=M;Z<X.length;Z+=1)B+=L(X[Z])+",";return B+"]"}for(var ie=Object.keys(M).sort(),ue="{",j=0;j<ie.length;j++)ue+=JSON.stringify(ie[j])+":"+L(M[ie[j]])+",";return ue+"}"}function D(M){for(var O="",B=0,Z=l.refProperties;B<Z.length;B+=1)O+="/"+L(M[Z[B]]);return O}var J=function(M){this.keyCache={},M&&this.replace(M)};J.prototype.replace=function(M){this._layerConfigs={},this._layers={},this.update(M,[])},J.prototype.update=function(M,O){for(var B=this,Z=0,X=M;Z<X.length;Z+=1){var ie=X[Z];this._layerConfigs[ie.id]=ie;var ue=this._layers[ie.id]=l.createStyleLayer(ie);ue._featureFilter=l.featureFilter(ue.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(var j=0,Y=O;j<Y.length;j+=1){var me=Y[j];delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me]}this.familiesBySource={};for(var Le=0,Re=function(We,Xe){for(var jt={},Je=0;Je<We.length;Je++){var tr=Xe&&Xe[We[Je].id]||D(We[Je]);Xe&&(Xe[We[Je].id]=tr);var Cr=jt[tr];Cr||(Cr=jt[tr]=[]),Cr.push(We[Je])}var Mt=[];for(var lr in jt)Mt.push(jt[lr]);return Mt}(l.values(this._layerConfigs),this.keyCache);Le<Re.length;Le+=1){var Ee=Re[Le].map(function(We){return B._layers[We.id]}),Fe=Ee[0];if(Fe.visibility!=="none"){var st=Fe.source||"",nt=this.familiesBySource[st];nt||(nt=this.familiesBySource[st]={});var Te=Fe.sourceLayer||"_geojsonTileLayer",Ye=nt[Te];Ye||(Ye=nt[Te]=[]),Ye.push(Ee)}}};var he=function(M){var O={},B=[];for(var Z in M){var X=M[Z],ie=O[Z]={};for(var ue in X){var j=X[+ue];if(j&&j.bitmap.width!==0&&j.bitmap.height!==0){var Y={x:0,y:0,w:j.bitmap.width+2,h:j.bitmap.height+2};B.push(Y),ie[ue]={rect:Y,metrics:j.metrics}}}}var me=l.potpack(B),Le=new l.AlphaImage({width:me.w||1,height:me.h||1});for(var Re in M){var Ee=M[Re];for(var Fe in Ee){var st=Ee[+Fe];if(st&&st.bitmap.width!==0&&st.bitmap.height!==0){var nt=O[Re][Fe].rect;l.AlphaImage.copy(st.bitmap,Le,{x:0,y:0},{x:nt.x+1,y:nt.y+1},st.bitmap)}}}this.image=Le,this.positions=O};l.register("GlyphAtlas",he);var Ne=function(M){this.tileID=new l.OverscaledTileID(M.tileID.overscaledZ,M.tileID.wrap,M.tileID.canonical.z,M.tileID.canonical.x,M.tileID.canonical.y),this.uid=M.uid,this.zoom=M.zoom,this.pixelRatio=M.pixelRatio,this.tileSize=M.tileSize,this.source=M.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=M.showCollisionBoxes,this.collectResourceTiming=!!M.collectResourceTiming,this.returnDependencies=!!M.returnDependencies,this.promoteId=M.promoteId};function ne(M,O,B){for(var Z=new l.EvaluationParameters(O),X=0,ie=M;X<ie.length;X+=1)ie[X].recalculate(Z,B)}function Oe(M,O){var B=l.getArrayBuffer(M.request,function(Z,X,ie,ue){Z?O(Z):X&&O(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(X)),rawData:X,cacheControl:ie,expires:ue})});return function(){B.cancel(),O()}}Ne.prototype.parse=function(M,O,B,Z,X){var ie=this;this.status="parsing",this.data=M,this.collisionBoxArray=new l.CollisionBoxArray;var ue=new l.DictionaryCoder(Object.keys(M.layers).sort()),j=new l.FeatureIndex(this.tileID,this.promoteId);j.bucketLayerIDs=[];var Y,me,Le,Re,Ee={},Fe={featureIndex:j,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:B},st=O.familiesBySource[this.source];for(var nt in st){var Te=M.layers[nt];if(Te){Te.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+nt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ye=ue.encode(nt),We=[],Xe=0;Xe<Te.length;Xe++){var jt=Te.feature(Xe),Je=j.getId(jt,nt);We.push({feature:jt,id:Je,index:Xe,sourceLayerIndex:Ye})}for(var tr=0,Cr=st[nt];tr<Cr.length;tr+=1){var Mt=Cr[tr],lr=Mt[0];lr.minzoom&&this.zoom<Math.floor(lr.minzoom)||lr.maxzoom&&this.zoom>=lr.maxzoom||lr.visibility!=="none"&&(ne(Mt,this.zoom,B),(Ee[lr.id]=lr.createBucket({index:j.bucketLayerIDs.length,layers:Mt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ye,sourceID:this.source})).populate(We,Fe,this.tileID.canonical),j.bucketLayerIDs.push(Mt.map(function(xr){return xr.id})))}}}var or=l.mapObject(Fe.glyphDependencies,function(xr){return Object.keys(xr).map(Number)});Object.keys(or).length?Z.send("getGlyphs",{uid:this.uid,stacks:or},function(xr,Pt){Y||(Y=xr,me=Pt,Qr.call(ie))}):me={};var On=Object.keys(Fe.iconDependencies);On.length?Z.send("getImages",{icons:On,source:this.source,tileID:this.tileID,type:"icons"},function(xr,Pt){Y||(Y=xr,Le=Pt,Qr.call(ie))}):Le={};var dr=Object.keys(Fe.patternDependencies);function Qr(){if(Y)return X(Y);if(me&&Le&&Re){var xr=new he(me),Pt=new l.ImageAtlas(Le,Re);for(var cr in Ee){var oi=Ee[cr];oi instanceof l.SymbolBucket?(ne(oi.layers,this.zoom,B),l.performSymbolLayout(oi,me,xr.positions,Le,Pt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):oi.hasPattern&&(oi instanceof l.LineBucket||oi instanceof l.FillBucket||oi instanceof l.FillExtrusionBucket)&&(ne(oi.layers,this.zoom,B),oi.addFeatures(Fe,this.tileID.canonical,Pt.patternPositions))}this.status="done",X(null,{buckets:l.values(Ee).filter(function(Vi){return!Vi.isEmpty()}),featureIndex:j,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xr.image,imageAtlas:Pt,glyphMap:this.returnDependencies?me:null,iconMap:this.returnDependencies?Le:null,glyphPositions:this.returnDependencies?xr.positions:null})}}dr.length?Z.send("getImages",{icons:dr,source:this.source,tileID:this.tileID,type:"patterns"},function(xr,Pt){Y||(Y=xr,Re=Pt,Qr.call(ie))}):Re={},Qr.call(this)};var He=function(M,O,B,Z){this.actor=M,this.layerIndex=O,this.availableImages=B,this.loadVectorData=Z||Oe,this.loading={},this.loaded={}};He.prototype.loadTile=function(M,O){var B=this,Z=M.uid;this.loading||(this.loading={});var X=!!(M&&M.request&&M.request.collectResourceTiming)&&new l.RequestPerformance(M.request),ie=this.loading[Z]=new Ne(M);ie.abort=this.loadVectorData(M,function(ue,j){if(delete B.loading[Z],ue||!j)return ie.status="done",B.loaded[Z]=ie,O(ue);var Y=j.rawData,me={};j.expires&&(me.expires=j.expires),j.cacheControl&&(me.cacheControl=j.cacheControl);var Le={};if(X){var Re=X.finish();Re&&(Le.resourceTiming=JSON.parse(JSON.stringify(Re)))}ie.vectorTile=j.vectorTile,ie.parse(j.vectorTile,B.layerIndex,B.availableImages,B.actor,function(Ee,Fe){if(Ee||!Fe)return O(Ee);O(null,l.extend({rawTileData:Y.slice(0)},Fe,me,Le))}),B.loaded=B.loaded||{},B.loaded[Z]=ie})},He.prototype.reloadTile=function(M,O){var B=this,Z=this.loaded,X=M.uid,ie=this;if(Z&&Z[X]){var ue=Z[X];ue.showCollisionBoxes=M.showCollisionBoxes;var j=function(Y,me){var Le=ue.reloadCallback;Le&&(delete ue.reloadCallback,ue.parse(ue.vectorTile,ie.layerIndex,B.availableImages,ie.actor,Le)),O(Y,me)};ue.status==="parsing"?ue.reloadCallback=j:ue.status==="done"&&(ue.vectorTile?ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor,j):j())}},He.prototype.abortTile=function(M,O){var B=this.loading,Z=M.uid;B&&B[Z]&&B[Z].abort&&(B[Z].abort(),delete B[Z]),O()},He.prototype.removeTile=function(M,O){var B=this.loaded,Z=M.uid;B&&B[Z]&&delete B[Z],O()};var rt=l.window.ImageBitmap,pe=function(){this.loaded={}};function ae(M,O){if(M.length!==0){le(M[0],O);for(var B=1;B<M.length;B++)le(M[B],!O)}}function le(M,O){for(var B=0,Z=0,X=M.length,ie=X-1;Z<X;ie=Z++)B+=(M[Z][0]-M[ie][0])*(M[ie][1]+M[Z][1]);B>=0!=!!O&&M.reverse()}pe.prototype.loadTile=function(M,O){var B=M.uid,Z=M.encoding,X=M.rawImageData,ie=rt&&X instanceof rt?this.getImageData(X):X,ue=new l.DEMData(B,ie,Z);this.loaded=this.loaded||{},this.loaded[B]=ue,O(null,ue)},pe.prototype.getImageData=function(M){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(M.width,M.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=M.width,this.offscreenCanvas.height=M.height,this.offscreenCanvasContext.drawImage(M,0,0,M.width,M.height);var O=this.offscreenCanvasContext.getImageData(-1,-1,M.width+2,M.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:O.width,height:O.height},O.data)},pe.prototype.removeTile=function(M){var O=this.loaded,B=M.uid;O&&O[B]&&delete O[B]};var Pe=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,Me=function(M){this._feature=M,this.extent=l.EXTENT,this.type=M.type,this.properties=M.tags,"id"in M&&!isNaN(M.id)&&(this.id=parseInt(M.id,10))};Me.prototype.loadGeometry=function(){if(this._feature.type===1){for(var M=[],O=0,B=this._feature.geometry;O<B.length;O+=1){var Z=B[O];M.push([new l.Point$1(Z[0],Z[1])])}return M}for(var X=[],ie=0,ue=this._feature.geometry;ie<ue.length;ie+=1){for(var j=[],Y=0,me=ue[ie];Y<me.length;Y+=1){var Le=me[Y];j.push(new l.Point$1(Le[0],Le[1]))}X.push(j)}return X},Me.prototype.toGeoJSON=function(M,O,B){return Pe.call(this,M,O,B)};var yt=function(M){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=M.length,this._features=M};yt.prototype.feature=function(M){return new Me(this._features[M])};var Ze=l.vectorTile.VectorTileFeature,It=Ot;function Ot(M,O){this.options=O||{},this.features=M,this.length=M.length}function pt(M,O){this.id=typeof M.id=="number"?M.id:void 0,this.type=M.type,this.rawGeometry=M.type===1?[M.geometry]:M.geometry,this.properties=M.tags,this.extent=O||4096}Ot.prototype.feature=function(M){return new pt(this.features[M],this.options.extent)},pt.prototype.loadGeometry=function(){var M=this.rawGeometry;this.geometry=[];for(var O=0;O<M.length;O++){for(var B=M[O],Z=[],X=0;X<B.length;X++)Z.push(new l.Point$1(B[X][0],B[X][1]));this.geometry.push(Z)}return this.geometry},pt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var M=this.geometry,O=1/0,B=-1/0,Z=1/0,X=-1/0,ie=0;ie<M.length;ie++)for(var ue=M[ie],j=0;j<ue.length;j++){var Y=ue[j];O=Math.min(O,Y.x),B=Math.max(B,Y.x),Z=Math.min(Z,Y.y),X=Math.max(X,Y.y)}return[O,Z,B,X]},pt.prototype.toGeoJSON=Ze.prototype.toGeoJSON;var er=Rr,br=It;function Rr(M){var O=new l.pbf;return function(B,Z){for(var X in B.layers)Z.writeMessage(3,Ut,B.layers[X])}(M,O),O.finish()}function Ut(M,O){var B;O.writeVarintField(15,M.version||1),O.writeStringField(1,M.name||""),O.writeVarintField(5,M.extent||4096);var Z={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<M.length;B++)Z.feature=M.feature(B),O.writeMessage(2,ir,Z);var X=Z.keys;for(B=0;B<X.length;B++)O.writeStringField(3,X[B]);var ie=Z.values;for(B=0;B<ie.length;B++)O.writeMessage(4,ei,ie[B])}function ir(M,O){var B=M.feature;B.id!==void 0&&O.writeVarintField(1,B.id),O.writeMessage(2,qr,M),O.writeVarintField(3,B.type),O.writeMessage(4,Tn,B)}function qr(M,O){var B=M.feature,Z=M.keys,X=M.values,ie=M.keycache,ue=M.valuecache;for(var j in B.properties){var Y=ie[j];Y===void 0&&(Z.push(j),ie[j]=Y=Z.length-1),O.writeVarint(Y);var me=B.properties[j],Le=typeof me;Le!=="string"&&Le!=="boolean"&&Le!=="number"&&(me=JSON.stringify(me));var Re=Le+":"+me,Ee=ue[Re];Ee===void 0&&(X.push(me),ue[Re]=Ee=X.length-1),O.writeVarint(Ee)}}function zr(M,O){return(O<<3)+(7&M)}function Qn(M){return M<<1^M>>31}function Tn(M,O){for(var B=M.loadGeometry(),Z=M.type,X=0,ie=0,ue=B.length,j=0;j<ue;j++){var Y=B[j],me=1;Z===1&&(me=Y.length),O.writeVarint(zr(1,me));for(var Le=Z===3?Y.length-1:Y.length,Re=0;Re<Le;Re++){Re===1&&Z!==1&&O.writeVarint(zr(2,Le-1));var Ee=Y[Re].x-X,Fe=Y[Re].y-ie;O.writeVarint(Qn(Ee)),O.writeVarint(Qn(Fe)),X+=Ee,ie+=Fe}Z===3&&O.writeVarint(zr(7,1))}}function ei(M,O){var B=typeof M;B==="string"?O.writeStringField(1,M):B==="boolean"?O.writeBooleanField(7,M):B==="number"&&(M%1!=0?O.writeDoubleField(3,M):M<0?O.writeSVarintField(6,M):O.writeVarintField(5,M))}function Vt(M,O,B,Z){$e(M,B,Z),$e(O,2*B,2*Z),$e(O,2*B+1,2*Z+1)}function $e(M,O,B){var Z=M[O];M[O]=M[B],M[B]=Z}function At(M,O,B,Z){var X=M-B,ie=O-Z;return X*X+ie*ie}er.fromVectorTileJs=Rr,er.fromGeojsonVt=function(M,O){O=O||{};var B={};for(var Z in M)B[Z]=new It(M[Z].features,O),B[Z].name=Z,B[Z].version=O.version,B[Z].extent=O.extent;return Rr({layers:B})},er.GeoJSONWrapper=br;var Xt=function(M){return M[0]},Lr=function(M){return M[1]},Zr=function(M,O,B,Z,X){O===void 0&&(O=Xt),B===void 0&&(B=Lr),Z===void 0&&(Z=64),X===void 0&&(X=Float64Array),this.nodeSize=Z,this.points=M;for(var ie=M.length<65536?Uint16Array:Uint32Array,ue=this.ids=new ie(M.length),j=this.coords=new X(2*M.length),Y=0;Y<M.length;Y++)ue[Y]=Y,j[2*Y]=O(M[Y]),j[2*Y+1]=B(M[Y]);(function me(Le,Re,Ee,Fe,st,nt){if(!(st-Fe<=Ee)){var Te=Fe+st>>1;(function Ye(We,Xe,jt,Je,tr,Cr){for(;tr>Je;){if(tr-Je>600){var Mt=tr-Je+1,lr=jt-Je+1,or=Math.log(Mt),On=.5*Math.exp(2*or/3),dr=.5*Math.sqrt(or*On*(Mt-On)/Mt)*(lr-Mt/2<0?-1:1);Ye(We,Xe,jt,Math.max(Je,Math.floor(jt-lr*On/Mt+dr)),Math.min(tr,Math.floor(jt+(Mt-lr)*On/Mt+dr)),Cr)}var Qr=Xe[2*jt+Cr],xr=Je,Pt=tr;for(Vt(We,Xe,Je,jt),Xe[2*tr+Cr]>Qr&&Vt(We,Xe,Je,tr);xr<Pt;){for(Vt(We,Xe,xr,Pt),xr++,Pt--;Xe[2*xr+Cr]<Qr;)xr++;for(;Xe[2*Pt+Cr]>Qr;)Pt--}Xe[2*Je+Cr]===Qr?Vt(We,Xe,Je,Pt):Vt(We,Xe,++Pt,tr),Pt<=jt&&(Je=Pt+1),jt<=Pt&&(tr=Pt-1)}})(Le,Re,Te,Fe,st,nt%2),me(Le,Re,Ee,Fe,Te-1,nt+1),me(Le,Re,Ee,Te+1,st,nt+1)}})(ue,j,Z,0,ue.length-1,0)};Zr.prototype.range=function(M,O,B,Z){return function(X,ie,ue,j,Y,me,Le){for(var Re,Ee,Fe=[0,X.length-1,0],st=[];Fe.length;){var nt=Fe.pop(),Te=Fe.pop(),Ye=Fe.pop();if(Te-Ye<=Le)for(var We=Ye;We<=Te;We++)Ee=ie[2*We+1],(Re=ie[2*We])>=ue&&Re<=Y&&Ee>=j&&Ee<=me&&st.push(X[We]);else{var Xe=Math.floor((Ye+Te)/2);Ee=ie[2*Xe+1],(Re=ie[2*Xe])>=ue&&Re<=Y&&Ee>=j&&Ee<=me&&st.push(X[Xe]);var jt=(nt+1)%2;(nt===0?ue<=Re:j<=Ee)&&(Fe.push(Ye),Fe.push(Xe-1),Fe.push(jt)),(nt===0?Y>=Re:me>=Ee)&&(Fe.push(Xe+1),Fe.push(Te),Fe.push(jt))}}return st}(this.ids,this.coords,M,O,B,Z,this.nodeSize)},Zr.prototype.within=function(M,O,B){return function(Z,X,ie,ue,j,Y){for(var me=[0,Z.length-1,0],Le=[],Re=j*j;me.length;){var Ee=me.pop(),Fe=me.pop(),st=me.pop();if(Fe-st<=Y)for(var nt=st;nt<=Fe;nt++)At(X[2*nt],X[2*nt+1],ie,ue)<=Re&&Le.push(Z[nt]);else{var Te=Math.floor((st+Fe)/2),Ye=X[2*Te],We=X[2*Te+1];At(Ye,We,ie,ue)<=Re&&Le.push(Z[Te]);var Xe=(Ee+1)%2;(Ee===0?ie-j<=Ye:ue-j<=We)&&(me.push(st),me.push(Te-1),me.push(Xe)),(Ee===0?ie+j>=Ye:ue+j>=We)&&(me.push(Te+1),me.push(Fe),me.push(Xe))}}return Le}(this.ids,this.coords,M,O,B,this.nodeSize)};var ao={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(M){return M}},Jr=function(M){this.options=Fi(Object.create(ao),M),this.trees=new Array(this.options.maxZoom+1)};function ii(M,O,B,Z,X){return{x:M,y:O,zoom:1/0,id:B,parentId:-1,numPoints:Z,properties:X}}function sr(M,O){var B=M.geometry.coordinates,Z=B[1];return{x:qn(B[0]),y:Ht(Z),zoom:1/0,index:O,parentId:-1}}function wo(M){return{type:"Feature",id:M.id,properties:Za(M),geometry:{type:"Point",coordinates:[(Z=M.x,360*(Z-.5)),(O=M.y,B=(180-360*O)*Math.PI/180,360*Math.atan(Math.exp(B))/Math.PI-90)]}};var O,B,Z}function Za(M){var O=M.numPoints,B=O>=1e4?Math.round(O/1e3)+"k":O>=1e3?Math.round(O/100)/10+"k":O;return Fi(Fi({},M.properties),{cluster:!0,cluster_id:M.id,point_count:O,point_count_abbreviated:B})}function qn(M){return M/360+.5}function Ht(M){var O=Math.sin(M*Math.PI/180),B=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return B<0?0:B>1?1:B}function Fi(M,O){for(var B in O)M[B]=O[B];return M}function rn(M){return M.x}function In(M){return M.y}function Au(M,O,B,Z,X,ie){var ue=X-B,j=ie-Z;if(ue!==0||j!==0){var Y=((M-B)*ue+(O-Z)*j)/(ue*ue+j*j);Y>1?(B=X,Z=ie):Y>0&&(B+=ue*Y,Z+=j*Y)}return(ue=M-B)*ue+(j=O-Z)*j}function Ri(M,O,B,Z){var X={id:M===void 0?null:M,type:O,geometry:B,tags:Z,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ie){var ue=ie.geometry,j=ie.type;if(j==="Point"||j==="MultiPoint"||j==="LineString")ms(ie,ue);else if(j==="Polygon"||j==="MultiLineString")for(var Y=0;Y<ue.length;Y++)ms(ie,ue[Y]);else if(j==="MultiPolygon")for(Y=0;Y<ue.length;Y++)for(var me=0;me<ue[Y].length;me++)ms(ie,ue[Y][me])}(X),X}function ms(M,O){for(var B=0;B<O.length;B+=3)M.minX=Math.min(M.minX,O[B]),M.minY=Math.min(M.minY,O[B+1]),M.maxX=Math.max(M.maxX,O[B]),M.maxY=Math.max(M.maxY,O[B+1])}function un(M,O,B,Z){if(O.geometry){var X=O.geometry.coordinates,ie=O.geometry.type,ue=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),j=[],Y=O.id;if(B.promoteId?Y=O.properties[B.promoteId]:B.generateId&&(Y=Z||0),ie==="Point")ba(X,j);else if(ie==="MultiPoint")for(var me=0;me<X.length;me++)ba(X[me],j);else if(ie==="LineString")bo(X,j,ue,!1);else if(ie==="MultiLineString"){if(B.lineMetrics){for(me=0;me<X.length;me++)bo(X[me],j=[],ue,!1),M.push(Ri(Y,"LineString",j,O.properties));return}bi(X,j,ue,!1)}else if(ie==="Polygon")bi(X,j,ue,!0);else{if(ie!=="MultiPolygon"){if(ie==="GeometryCollection"){for(me=0;me<O.geometry.geometries.length;me++)un(M,{id:Y,geometry:O.geometry.geometries[me],properties:O.properties},B,Z);return}throw new Error("Input data is not a valid GeoJSON object.")}for(me=0;me<X.length;me++){var Le=[];bi(X[me],Le,ue,!0),j.push(Le)}}M.push(Ri(Y,ie,j,O.properties))}}function ba(M,O){O.push(hi(M[0])),O.push(ta(M[1])),O.push(0)}function bo(M,O,B,Z){for(var X,ie,ue=0,j=0;j<M.length;j++){var Y=hi(M[j][0]),me=ta(M[j][1]);O.push(Y),O.push(me),O.push(0),j>0&&(ue+=Z?(X*me-Y*ie)/2:Math.sqrt(Math.pow(Y-X,2)+Math.pow(me-ie,2))),X=Y,ie=me}var Le=O.length-3;O[2]=1,function Re(Ee,Fe,st,nt){for(var Te,Ye=nt,We=st-Fe>>1,Xe=st-Fe,jt=Ee[Fe],Je=Ee[Fe+1],tr=Ee[st],Cr=Ee[st+1],Mt=Fe+3;Mt<st;Mt+=3){var lr=Au(Ee[Mt],Ee[Mt+1],jt,Je,tr,Cr);if(lr>Ye)Te=Mt,Ye=lr;else if(lr===Ye){var or=Math.abs(Mt-We);or<Xe&&(Te=Mt,Xe=or)}}Ye>nt&&(Te-Fe>3&&Re(Ee,Fe,Te,nt),Ee[Te+2]=Ye,st-Te>3&&Re(Ee,Te,st,nt))}(O,0,Le,B),O[Le+2]=1,O.size=Math.abs(ue),O.start=0,O.end=O.size}function bi(M,O,B,Z){for(var X=0;X<M.length;X++){var ie=[];bo(M[X],ie,B,Z),O.push(ie)}}function hi(M){return M/360+.5}function ta(M){var O=Math.sin(M*Math.PI/180),B=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return B<0?0:B>1?1:B}function Bi(M,O,B,Z,X,ie,ue,j){if(Z/=O,ie>=(B/=O)&&ue<Z)return M;if(ue<B||ie>=Z)return null;for(var Y=[],me=0;me<M.length;me++){var Le=M[me],Re=Le.geometry,Ee=Le.type,Fe=X===0?Le.minX:Le.minY,st=X===0?Le.maxX:Le.maxY;if(Fe>=B&&st<Z)Y.push(Le);else if(!(st<B||Fe>=Z)){var nt=[];if(Ee==="Point"||Ee==="MultiPoint")ys(Re,nt,B,Z,X);else if(Ee==="LineString")Ga(Re,nt,B,Z,X,!1,j.lineMetrics);else if(Ee==="MultiLineString")Pn(Re,nt,B,Z,X,!1);else if(Ee==="Polygon")Pn(Re,nt,B,Z,X,!0);else if(Ee==="MultiPolygon")for(var Te=0;Te<Re.length;Te++){var Ye=[];Pn(Re[Te],Ye,B,Z,X,!0),Ye.length&&nt.push(Ye)}if(nt.length){if(j.lineMetrics&&Ee==="LineString"){for(Te=0;Te<nt.length;Te++)Y.push(Ri(Le.id,Ee,nt[Te],Le.tags));continue}Ee!=="LineString"&&Ee!=="MultiLineString"||(nt.length===1?(Ee="LineString",nt=nt[0]):Ee="MultiLineString"),Ee!=="Point"&&Ee!=="MultiPoint"||(Ee=nt.length===3?"Point":"MultiPoint"),Y.push(Ri(Le.id,Ee,nt,Le.tags))}}}return Y.length?Y:null}function ys(M,O,B,Z,X){for(var ie=0;ie<M.length;ie+=3){var ue=M[ie+X];ue>=B&&ue<=Z&&(O.push(M[ie]),O.push(M[ie+1]),O.push(M[ie+2]))}}function Ga(M,O,B,Z,X,ie,ue){for(var j,Y,me=Sa(M),Le=X===0?Ni:Zn,Re=M.start,Ee=0;Ee<M.length-3;Ee+=3){var Fe=M[Ee],st=M[Ee+1],nt=M[Ee+2],Te=M[Ee+3],Ye=M[Ee+4],We=X===0?Fe:st,Xe=X===0?Te:Ye,jt=!1;ue&&(j=Math.sqrt(Math.pow(Fe-Te,2)+Math.pow(st-Ye,2))),We<B?Xe>B&&(Y=Le(me,Fe,st,Te,Ye,B),ue&&(me.start=Re+j*Y)):We>Z?Xe<Z&&(Y=Le(me,Fe,st,Te,Ye,Z),ue&&(me.start=Re+j*Y)):Ui(me,Fe,st,nt),Xe<B&&We>=B&&(Y=Le(me,Fe,st,Te,Ye,B),jt=!0),Xe>Z&&We<=Z&&(Y=Le(me,Fe,st,Te,Ye,Z),jt=!0),!ie&&jt&&(ue&&(me.end=Re+j*Y),O.push(me),me=Sa(M)),ue&&(Re+=j)}var Je=M.length-3;Fe=M[Je],st=M[Je+1],nt=M[Je+2],(We=X===0?Fe:st)>=B&&We<=Z&&Ui(me,Fe,st,nt),Je=me.length-3,ie&&Je>=3&&(me[Je]!==me[0]||me[Je+1]!==me[1])&&Ui(me,me[0],me[1],me[2]),me.length&&O.push(me)}function Sa(M){var O=[];return O.size=M.size,O.start=M.start,O.end=M.end,O}function Pn(M,O,B,Z,X,ie){for(var ue=0;ue<M.length;ue++)Ga(M[ue],O,B,Z,X,ie,!1)}function Ui(M,O,B,Z){M.push(O),M.push(B),M.push(Z)}function Ni(M,O,B,Z,X,ie){var ue=(ie-O)/(Z-O);return M.push(ie),M.push(B+(X-B)*ue),M.push(1),ue}function Zn(M,O,B,Z,X,ie){var ue=(ie-B)/(X-B);return M.push(O+(Z-O)*ue),M.push(ie),M.push(1),ue}function vs(M,O){for(var B=[],Z=0;Z<M.length;Z++){var X,ie=M[Z],ue=ie.type;if(ue==="Point"||ue==="MultiPoint"||ue==="LineString")X=So(ie.geometry,O);else if(ue==="MultiLineString"||ue==="Polygon"){X=[];for(var j=0;j<ie.geometry.length;j++)X.push(So(ie.geometry[j],O))}else if(ue==="MultiPolygon")for(X=[],j=0;j<ie.geometry.length;j++){for(var Y=[],me=0;me<ie.geometry[j].length;me++)Y.push(So(ie.geometry[j][me],O));X.push(Y)}B.push(Ri(ie.id,ue,X,ie.tags))}return B}function So(M,O){var B=[];B.size=M.size,M.start!==void 0&&(B.start=M.start,B.end=M.end);for(var Z=0;Z<M.length;Z+=3)B.push(M[Z]+O,M[Z+1],M[Z+2]);return B}function Dn(M,O){if(M.transformed)return M;var B,Z,X,ie=1<<M.z,ue=M.x,j=M.y;for(B=0;B<M.features.length;B++){var Y=M.features[B],me=Y.geometry,Le=Y.type;if(Y.geometry=[],Le===1)for(Z=0;Z<me.length;Z+=2)Y.geometry.push($t(me[Z],me[Z+1],O,ie,ue,j));else for(Z=0;Z<me.length;Z++){var Re=[];for(X=0;X<me[Z].length;X+=2)Re.push($t(me[Z][X],me[Z][X+1],O,ie,ue,j));Y.geometry.push(Re)}}return M.transformed=!0,M}function $t(M,O,B,Z,X,ie){return[Math.round(B*(M*Z-X)),Math.round(B*(O*Z-ie))]}function gs(M,O,B,Z,X){for(var ie=O===X.maxZoom?0:X.tolerance/((1<<O)*X.extent),ue={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:Z,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},j=0;j<M.length;j++){ue.numFeatures++,Xs(ue,M[j],ie,X);var Y=M[j].minX,me=M[j].minY,Le=M[j].maxX,Re=M[j].maxY;Y<ue.minX&&(ue.minX=Y),me<ue.minY&&(ue.minY=me),Le>ue.maxX&&(ue.maxX=Le),Re>ue.maxY&&(ue.maxY=Re)}return ue}function Xs(M,O,B,Z){var X=O.geometry,ie=O.type,ue=[];if(ie==="Point"||ie==="MultiPoint")for(var j=0;j<X.length;j+=3)ue.push(X[j]),ue.push(X[j+1]),M.numPoints++,M.numSimplified++;else if(ie==="LineString")Ea(ue,X,M,B,!1,!1);else if(ie==="MultiLineString"||ie==="Polygon")for(j=0;j<X.length;j++)Ea(ue,X[j],M,B,ie==="Polygon",j===0);else if(ie==="MultiPolygon")for(var Y=0;Y<X.length;Y++){var me=X[Y];for(j=0;j<me.length;j++)Ea(ue,me[j],M,B,!0,j===0)}if(ue.length){var Le=O.tags||null;if(ie==="LineString"&&Z.lineMetrics){for(var Re in Le={},O.tags)Le[Re]=O.tags[Re];Le.mapbox_clip_start=X.start/X.size,Le.mapbox_clip_end=X.end/X.size}var Ee={geometry:ue,type:ie==="Polygon"||ie==="MultiPolygon"?3:ie==="LineString"||ie==="MultiLineString"?2:1,tags:Le};O.id!==null&&(Ee.id=O.id),M.features.push(Ee)}}function Ea(M,O,B,Z,X,ie){var ue=Z*Z;if(Z>0&&O.size<(X?ue:Z))B.numPoints+=O.length/3;else{for(var j=[],Y=0;Y<O.length;Y+=3)(Z===0||O[Y+2]>ue)&&(B.numSimplified++,j.push(O[Y]),j.push(O[Y+1])),B.numPoints++;X&&function(me,Le){for(var Re=0,Ee=0,Fe=me.length,st=Fe-2;Ee<Fe;st=Ee,Ee+=2)Re+=(me[Ee]-me[st])*(me[Ee+1]+me[st+1]);if(Re>0===Le)for(Ee=0,Fe=me.length;Ee<Fe/2;Ee+=2){var nt=me[Ee],Te=me[Ee+1];me[Ee]=me[Fe-2-Ee],me[Ee+1]=me[Fe-1-Ee],me[Fe-2-Ee]=nt,me[Fe-1-Ee]=Te}}(j,ie),M.push(j)}}function ji(M,O){var B=(O=this.options=function(X,ie){for(var ue in ie)X[ue]=ie[ue];return X}(Object.create(this.options),O)).debug;if(B&&console.time("preprocess data"),O.maxZoom<0||O.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(O.promoteId&&O.generateId)throw new Error("promoteId and generateId cannot be used together.");var Z=function(X,ie){var ue=[];if(X.type==="FeatureCollection")for(var j=0;j<X.features.length;j++)un(ue,X.features[j],ie,j);else un(ue,X.type==="Feature"?X:{geometry:X},ie);return ue}(M,O);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",O.indexMaxZoom,O.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Z=function(X,ie){var ue=ie.buffer/ie.extent,j=X,Y=Bi(X,1,-1-ue,ue,0,-1,2,ie),me=Bi(X,1,1-ue,2+ue,0,-1,2,ie);return(Y||me)&&(j=Bi(X,1,-ue,1+ue,0,-1,2,ie)||[],Y&&(j=vs(Y,1).concat(j)),me&&(j=j.concat(vs(me,-1)))),j}(Z,O)).length&&this.splitTile(Z,0,0,0),B&&(Z.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function No(M,O,B){return 32*((1<<M)*B+O)+M}function Ir(M,O){var B=M.tileID.canonical;if(!this._geoJSONIndex)return O(null,null);var Z=this._geoJSONIndex.getTile(B.z,B.x,B.y);if(!Z)return O(null,null);var X=new yt(Z.features),ie=er(X);ie.byteOffset===0&&ie.byteLength===ie.buffer.byteLength||(ie=new Uint8Array(ie)),O(null,{vectorTile:X,rawData:ie.buffer})}Jr.prototype.load=function(M){var O=this.options,B=O.log,Z=O.minZoom,X=O.maxZoom,ie=O.nodeSize;B&&console.time("total time");var ue="prepare "+M.length+" points";B&&console.time(ue),this.points=M;for(var j=[],Y=0;Y<M.length;Y++)M[Y].geometry&&j.push(sr(M[Y],Y));this.trees[X+1]=new Zr(j,rn,In,ie,Float32Array),B&&console.timeEnd(ue);for(var me=X;me>=Z;me--){var Le=+Date.now();j=this._cluster(j,me),this.trees[me]=new Zr(j,rn,In,ie,Float32Array),B&&console.log("z%d: %d clusters in %dms",me,j.length,+Date.now()-Le)}return B&&console.timeEnd("total time"),this},Jr.prototype.getClusters=function(M,O){var B=((M[0]+180)%360+360)%360-180,Z=Math.max(-90,Math.min(90,M[1])),X=M[2]===180?180:((M[2]+180)%360+360)%360-180,ie=Math.max(-90,Math.min(90,M[3]));if(M[2]-M[0]>=360)B=-180,X=180;else if(B>X){var ue=this.getClusters([B,Z,180,ie],O),j=this.getClusters([-180,Z,X,ie],O);return ue.concat(j)}for(var Y=this.trees[this._limitZoom(O)],me=[],Le=0,Re=Y.range(qn(B),Ht(ie),qn(X),Ht(Z));Le<Re.length;Le+=1){var Ee=Y.points[Re[Le]];me.push(Ee.numPoints?wo(Ee):this.points[Ee.index])}return me},Jr.prototype.getChildren=function(M){var O=this._getOriginId(M),B=this._getOriginZoom(M),Z="No cluster with the specified id.",X=this.trees[B];if(!X)throw new Error(Z);var ie=X.points[O];if(!ie)throw new Error(Z);for(var ue=this.options.radius/(this.options.extent*Math.pow(2,B-1)),j=[],Y=0,me=X.within(ie.x,ie.y,ue);Y<me.length;Y+=1){var Le=X.points[me[Y]];Le.parentId===M&&j.push(Le.numPoints?wo(Le):this.points[Le.index])}if(j.length===0)throw new Error(Z);return j},Jr.prototype.getLeaves=function(M,O,B){var Z=[];return this._appendLeaves(Z,M,O=O||10,B=B||0,0),Z},Jr.prototype.getTile=function(M,O,B){var Z=this.trees[this._limitZoom(M)],X=Math.pow(2,M),ie=this.options,ue=ie.radius/ie.extent,j=(B-ue)/X,Y=(B+1+ue)/X,me={features:[]};return this._addTileFeatures(Z.range((O-ue)/X,j,(O+1+ue)/X,Y),Z.points,O,B,X,me),O===0&&this._addTileFeatures(Z.range(1-ue/X,j,1,Y),Z.points,X,B,X,me),O===X-1&&this._addTileFeatures(Z.range(0,j,ue/X,Y),Z.points,-1,B,X,me),me.features.length?me:null},Jr.prototype.getClusterExpansionZoom=function(M){for(var O=this._getOriginZoom(M)-1;O<=this.options.maxZoom;){var B=this.getChildren(M);if(O++,B.length!==1)break;M=B[0].properties.cluster_id}return O},Jr.prototype._appendLeaves=function(M,O,B,Z,X){for(var ie=0,ue=this.getChildren(O);ie<ue.length;ie+=1){var j=ue[ie],Y=j.properties;if(Y&&Y.cluster?X+Y.point_count<=Z?X+=Y.point_count:X=this._appendLeaves(M,Y.cluster_id,B,Z,X):X<Z?X++:M.push(j),M.length===B)break}return X},Jr.prototype._addTileFeatures=function(M,O,B,Z,X,ie){for(var ue=0,j=M;ue<j.length;ue+=1){var Y=O[j[ue]],me=Y.numPoints,Le={type:1,geometry:[[Math.round(this.options.extent*(Y.x*X-B)),Math.round(this.options.extent*(Y.y*X-Z))]],tags:me?Za(Y):this.points[Y.index].properties},Re=void 0;me?Re=Y.id:this.options.generateId?Re=Y.index:this.points[Y.index].id&&(Re=this.points[Y.index].id),Re!==void 0&&(Le.id=Re),ie.features.push(Le)}},Jr.prototype._limitZoom=function(M){return Math.max(this.options.minZoom,Math.min(+M,this.options.maxZoom+1))},Jr.prototype._cluster=function(M,O){for(var B=[],Z=this.options,X=Z.reduce,ie=Z.minPoints,ue=Z.radius/(Z.extent*Math.pow(2,O)),j=0;j<M.length;j++){var Y=M[j];if(!(Y.zoom<=O)){Y.zoom=O;for(var me=this.trees[O+1],Le=me.within(Y.x,Y.y,ue),Re=Y.numPoints||1,Ee=Re,Fe=0,st=Le;Fe<st.length;Fe+=1){var nt=me.points[st[Fe]];nt.zoom>O&&(Ee+=nt.numPoints||1)}if(Ee>=ie){for(var Te=Y.x*Re,Ye=Y.y*Re,We=X&&Re>1?this._map(Y,!0):null,Xe=(j<<5)+(O+1)+this.points.length,jt=0,Je=Le;jt<Je.length;jt+=1){var tr=me.points[Je[jt]];if(!(tr.zoom<=O)){tr.zoom=O;var Cr=tr.numPoints||1;Te+=tr.x*Cr,Ye+=tr.y*Cr,tr.parentId=Xe,X&&(We||(We=this._map(Y,!0)),X(We,this._map(tr)))}}Y.parentId=Xe,B.push(ii(Te/Ee,Ye/Ee,Xe,Ee,We))}else if(B.push(Y),Ee>1)for(var Mt=0,lr=Le;Mt<lr.length;Mt+=1){var or=me.points[lr[Mt]];or.zoom<=O||(or.zoom=O,B.push(or))}}}return B},Jr.prototype._getOriginId=function(M){return M-this.points.length>>5},Jr.prototype._getOriginZoom=function(M){return(M-this.points.length)%32},Jr.prototype._map=function(M,O){if(M.numPoints)return O?Fi({},M.properties):M.properties;var B=this.points[M.index].properties,Z=this.options.map(B);return O&&Z===B?Fi({},Z):Z},ji.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ji.prototype.splitTile=function(M,O,B,Z,X,ie,ue){for(var j=[M,O,B,Z],Y=this.options,me=Y.debug;j.length;){Z=j.pop(),B=j.pop(),O=j.pop(),M=j.pop();var Le=1<<O,Re=No(O,B,Z),Ee=this.tiles[Re];if(!Ee&&(me>1&&console.time("creation"),Ee=this.tiles[Re]=gs(M,O,B,Z,Y),this.tileCoords.push({z:O,x:B,y:Z}),me)){me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",O,B,Z,Ee.numFeatures,Ee.numPoints,Ee.numSimplified),console.timeEnd("creation"));var Fe="z"+O;this.stats[Fe]=(this.stats[Fe]||0)+1,this.total++}if(Ee.source=M,X){if(O===Y.maxZoom||O===X)continue;var st=1<<X-O;if(B!==Math.floor(ie/st)||Z!==Math.floor(ue/st))continue}else if(O===Y.indexMaxZoom||Ee.numPoints<=Y.indexMaxPoints)continue;if(Ee.source=null,M.length!==0){me>1&&console.time("clipping");var nt,Te,Ye,We,Xe,jt,Je=.5*Y.buffer/Y.extent,tr=.5-Je,Cr=.5+Je,Mt=1+Je;nt=Te=Ye=We=null,Xe=Bi(M,Le,B-Je,B+Cr,0,Ee.minX,Ee.maxX,Y),jt=Bi(M,Le,B+tr,B+Mt,0,Ee.minX,Ee.maxX,Y),M=null,Xe&&(nt=Bi(Xe,Le,Z-Je,Z+Cr,1,Ee.minY,Ee.maxY,Y),Te=Bi(Xe,Le,Z+tr,Z+Mt,1,Ee.minY,Ee.maxY,Y),Xe=null),jt&&(Ye=Bi(jt,Le,Z-Je,Z+Cr,1,Ee.minY,Ee.maxY,Y),We=Bi(jt,Le,Z+tr,Z+Mt,1,Ee.minY,Ee.maxY,Y),jt=null),me>1&&console.timeEnd("clipping"),j.push(nt||[],O+1,2*B,2*Z),j.push(Te||[],O+1,2*B,2*Z+1),j.push(Ye||[],O+1,2*B+1,2*Z),j.push(We||[],O+1,2*B+1,2*Z+1)}}},ji.prototype.getTile=function(M,O,B){var Z=this.options,X=Z.extent,ie=Z.debug;if(M<0||M>24)return null;var ue=1<<M,j=No(M,O=(O%ue+ue)%ue,B);if(this.tiles[j])return Dn(this.tiles[j],X);ie>1&&console.log("drilling down to z%d-%d-%d",M,O,B);for(var Y,me=M,Le=O,Re=B;!Y&&me>0;)me--,Le=Math.floor(Le/2),Re=Math.floor(Re/2),Y=this.tiles[No(me,Le,Re)];return Y&&Y.source?(ie>1&&console.log("found parent tile z%d-%d-%d",me,Le,Re),ie>1&&console.time("drilling down"),this.splitTile(Y.source,me,Le,Re,M,O,B),ie>1&&console.timeEnd("drilling down"),this.tiles[j]?Dn(this.tiles[j],X):null):null};var Wa=function(M){function O(B,Z,X,ie){M.call(this,B,Z,X,Ir),ie&&(this.loadGeoJSON=ie)}return M&&(O.__proto__=M),(O.prototype=Object.create(M&&M.prototype)).constructor=O,O.prototype.loadData=function(B,Z){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Z,this._pendingLoadDataParams=B,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},O.prototype._loadData=function(){var B=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Z=this._pendingCallback,X=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ie=!!(X&&X.request&&X.request.collectResourceTiming)&&new l.RequestPerformance(X.request);this.loadGeoJSON(X,function(ue,j){if(ue||!j)return Z(ue);if(typeof j!="object")return Z(new Error("Input data given to '"+X.source+"' is not a valid GeoJSON object."));(function Ee(Fe,st){var nt,Te=Fe&&Fe.type;if(Te==="FeatureCollection")for(nt=0;nt<Fe.features.length;nt++)Ee(Fe.features[nt],st);else if(Te==="GeometryCollection")for(nt=0;nt<Fe.geometries.length;nt++)Ee(Fe.geometries[nt],st);else if(Te==="Feature")Ee(Fe.geometry,st);else if(Te==="Polygon")ae(Fe.coordinates,st);else if(Te==="MultiPolygon")for(nt=0;nt<Fe.coordinates.length;nt++)ae(Fe.coordinates[nt],st);return Fe})(j,!0);try{if(X.filter){var Y=l.createExpression(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Y.result==="error")throw new Error(Y.value.map(function(Ee){return Ee.key+": "+Ee.message}).join(", "));var me=j.features.filter(function(Ee){return Y.value.evaluate({zoom:0},Ee)});j={type:"FeatureCollection",features:me}}B._geoJSONIndex=X.cluster?new Jr(function(Ee){var Fe=Ee.superclusterOptions,st=Ee.clusterProperties;if(!st||!Fe)return Fe;for(var nt={},Te={},Ye={accumulated:null,zoom:0},We={properties:null},Xe=Object.keys(st),jt=0,Je=Xe;jt<Je.length;jt+=1){var tr=Je[jt],Cr=st[tr],Mt=Cr[0],lr=l.createExpression(Cr[1]),or=l.createExpression(typeof Mt=="string"?[Mt,["accumulated"],["get",tr]]:Mt);nt[tr]=lr.value,Te[tr]=or.value}return Fe.map=function(On){We.properties=On;for(var dr={},Qr=0,xr=Xe;Qr<xr.length;Qr+=1){var Pt=xr[Qr];dr[Pt]=nt[Pt].evaluate(Ye,We)}return dr},Fe.reduce=function(On,dr){We.properties=dr;for(var Qr=0,xr=Xe;Qr<xr.length;Qr+=1){var Pt=xr[Qr];Ye.accumulated=On[Pt],On[Pt]=Te[Pt].evaluate(Ye,We)}},Fe}(X)).load(j.features):function(Ee,Fe){return new ji(Ee,Fe)}(j,X.geojsonVtOptions)}catch(Ee){return Z(Ee)}B.loaded={};var Le={};if(ie){var Re=ie.finish();Re&&(Le.resourceTiming={},Le.resourceTiming[X.source]=JSON.parse(JSON.stringify(Re)))}Z(null,Le)})}},O.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},O.prototype.reloadTile=function(B,Z){var X=this.loaded;return X&&X[B.uid]?M.prototype.reloadTile.call(this,B,Z):this.loadTile(B,Z)},O.prototype.loadGeoJSON=function(B,Z){if(B.request)l.getJSON(B.request,Z);else{if(typeof B.data!="string")return Z(new Error("Input data given to '"+B.source+"' is not a valid GeoJSON object."));try{return Z(null,JSON.parse(B.data))}catch{return Z(new Error("Input data given to '"+B.source+"' is not a valid GeoJSON object."))}}},O.prototype.removeSource=function(B,Z){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Z()},O.prototype.getClusterExpansionZoom=function(B,Z){try{Z(null,this._geoJSONIndex.getClusterExpansionZoom(B.clusterId))}catch(X){Z(X)}},O.prototype.getClusterChildren=function(B,Z){try{Z(null,this._geoJSONIndex.getChildren(B.clusterId))}catch(X){Z(X)}},O.prototype.getClusterLeaves=function(B,Z){try{Z(null,this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset))}catch(X){Z(X)}},O}(He),Pr=function(M){var O=this;this.self=M,this.actor=new l.Actor(M,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:He,geojson:Wa},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(B,Z){if(O.workerSourceTypes[B])throw new Error('Worker source with name "'+B+'" already registered.');O.workerSourceTypes[B]=Z},this.self.registerRTLTextPlugin=function(B){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=B.applyArabicShaping,l.plugin.processBidirectionalText=B.processBidirectionalText,l.plugin.processStyledBidirectionalText=B.processStyledBidirectionalText}};return Pr.prototype.setReferrer=function(M,O){this.referrer=O},Pr.prototype.setImages=function(M,O,B){for(var Z in this.availableImages[M]=O,this.workerSources[M]){var X=this.workerSources[M][Z];for(var ie in X)X[ie].availableImages=O}B()},Pr.prototype.setLayers=function(M,O,B){this.getLayerIndex(M).replace(O),B()},Pr.prototype.updateLayers=function(M,O,B){this.getLayerIndex(M).update(O.layers,O.removedIds),B()},Pr.prototype.loadTile=function(M,O,B){this.getWorkerSource(M,O.type,O.source).loadTile(O,B)},Pr.prototype.loadDEMTile=function(M,O,B){this.getDEMWorkerSource(M,O.source).loadTile(O,B)},Pr.prototype.reloadTile=function(M,O,B){this.getWorkerSource(M,O.type,O.source).reloadTile(O,B)},Pr.prototype.abortTile=function(M,O,B){this.getWorkerSource(M,O.type,O.source).abortTile(O,B)},Pr.prototype.removeTile=function(M,O,B){this.getWorkerSource(M,O.type,O.source).removeTile(O,B)},Pr.prototype.removeDEMTile=function(M,O){this.getDEMWorkerSource(M,O.source).removeTile(O)},Pr.prototype.removeSource=function(M,O,B){if(this.workerSources[M]&&this.workerSources[M][O.type]&&this.workerSources[M][O.type][O.source]){var Z=this.workerSources[M][O.type][O.source];delete this.workerSources[M][O.type][O.source],Z.removeSource!==void 0?Z.removeSource(O,B):B()}},Pr.prototype.loadWorkerSource=function(M,O,B){try{this.self.importScripts(O.url),B()}catch(Z){B(Z.toString())}},Pr.prototype.syncRTLPluginState=function(M,O,B){try{l.plugin.setState(O);var Z=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Z!=null){this.self.importScripts(Z);var X=l.plugin.isParsed();B(X?void 0:new Error("RTL Text Plugin failed to import scripts from "+Z),X)}}catch(ie){B(ie.toString())}},Pr.prototype.getAvailableImages=function(M){var O=this.availableImages[M];return O||(O=[]),O},Pr.prototype.getLayerIndex=function(M){var O=this.layerIndexes[M];return O||(O=this.layerIndexes[M]=new J),O},Pr.prototype.getWorkerSource=function(M,O,B){var Z=this;return this.workerSources[M]||(this.workerSources[M]={}),this.workerSources[M][O]||(this.workerSources[M][O]={}),this.workerSources[M][O][B]||(this.workerSources[M][O][B]=new this.workerSourceTypes[O]({send:function(X,ie,ue){Z.actor.send(X,ie,ue,M)}},this.getLayerIndex(M),this.getAvailableImages(M))),this.workerSources[M][O][B]},Pr.prototype.getDEMWorkerSource=function(M,O){return this.demWorkerSources[M]||(this.demWorkerSources[M]={}),this.demWorkerSources[M][O]||(this.demWorkerSources[M][O]=new pe),this.demWorkerSources[M][O]},Pr.prototype.enforceCacheSizeLimit=function(M,O){l.enforceCacheSizeLimit(O)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Pr(self)),Pr}),S(["./shared"],function(l){var L=l.createCommonjsModule(function(i){function s(d){return!o(d)}function o(d){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var x,E,P=new Blob([""],{type:"text/javascript"}),z=URL.createObjectURL(P);try{E=new Worker(z),x=!0}catch{x=!1}return E&&E.terminate(),URL.revokeObjectURL(z),x}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var x=document.createElement("canvas");x.width=x.height=1;var E=x.getContext("2d");if(!E)return!1;var P=E.getImageData(0,0,1,1);return P&&P.width===x.width}()?(c[v=d&&d.failIfMajorPerformanceCaveat]===void 0&&(c[v]=function(x){var E=function(z){var N=document.createElement("canvas"),V=Object.create(s.webGLContextAttributes);return V.failIfMajorPerformanceCaveat=z,N.probablySupportsContext?N.probablySupportsContext("webgl",V)||N.probablySupportsContext("experimental-webgl",V):N.supportsContext?N.supportsContext("webgl",V)||N.supportsContext("experimental-webgl",V):N.getContext("webgl",V)||N.getContext("experimental-webgl",V)}(x);if(!E)return!1;var P=E.createShader(E.VERTEX_SHADER);return!(!P||E.isContextLost())&&(E.shaderSource(P,"void main() {}"),E.compileShader(P),E.getShaderParameter(P,E.COMPILE_STATUS)===!0)}(v)),c[v]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var v}i.exports?i.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=o);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),D={create:function(i,s,o){var c=l.window.document.createElement(i);return s!==void 0&&(c.className=s),o&&o.appendChild(c),c},createNS:function(i,s){return l.window.document.createElementNS(i,s)}},J=l.window.document&&l.window.document.documentElement.style;function he(i){if(!J)return i[0];for(var s=0;s<i.length;s++)if(i[s]in J)return i[s];return i[0]}var Ne,ne=he(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);D.disableDrag=function(){J&&ne&&(Ne=J[ne],J[ne]="none")},D.enableDrag=function(){J&&ne&&(J[ne]=Ne)};var Oe=he(["transform","WebkitTransform"]);D.setTransform=function(i,s){i.style[Oe]=s};var He=!1;try{var rt=Object.defineProperty({},"passive",{get:function(){He=!0}});l.window.addEventListener("test",rt,rt),l.window.removeEventListener("test",rt,rt)}catch{He=!1}D.addEventListener=function(i,s,o,c){c===void 0&&(c={}),i.addEventListener(s,o,"passive"in c&&He?c:c.capture)},D.removeEventListener=function(i,s,o,c){c===void 0&&(c={}),i.removeEventListener(s,o,"passive"in c&&He?c:c.capture)};var pe=function(i){i.preventDefault(),i.stopPropagation(),l.window.removeEventListener("click",pe,!0)};function ae(i){var s=i.userImage;return!!(s&&s.render&&s.render())&&(i.data.replace(new Uint8Array(s.data.buffer)),!0)}D.suppressClick=function(){l.window.addEventListener("click",pe,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",pe,!0)},0)},D.mousePos=function(i,s){var o=i.getBoundingClientRect();return new l.Point(s.clientX-o.left-i.clientLeft,s.clientY-o.top-i.clientTop)},D.touchPos=function(i,s){for(var o=i.getBoundingClientRect(),c=[],d=0;d<s.length;d++)c.push(new l.Point(s[d].clientX-o.left-i.clientLeft,s[d].clientY-o.top-i.clientTop));return c},D.mouseButton=function(i){return l.window.InstallTrigger!==void 0&&i.button===2&&i.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:i.button},D.remove=function(i){i.parentNode&&i.parentNode.removeChild(i)};var le=function(i){function s(){i.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(o){if(this.loaded!==o&&(this.loaded=o,o)){for(var c=0,d=this.requestors;c<d.length;c+=1){var v=d[c];this._notify(v.ids,v.callback)}this.requestors=[]}},s.prototype.getImage=function(o){return this.images[o]},s.prototype.addImage=function(o,c){this._validate(o,c)&&(this.images[o]=c)},s.prototype._validate=function(o,c){var d=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchX" value'))),d=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchY" value'))),d=!1),this._validateContent(c.content,c)||(this.fire(new l.ErrorEvent(new Error('Image "'+o+'" has invalid "content" value'))),d=!1),d},s.prototype._validateStretch=function(o,c){if(!o)return!0;for(var d=0,v=0,x=o;v<x.length;v+=1){var E=x[v];if(E[0]<d||E[1]<E[0]||c<E[1])return!1;d=E[1]}return!0},s.prototype._validateContent=function(o,c){return!(o&&(o.length!==4||o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))},s.prototype.updateImage=function(o,c){c.version=this.images[o].version+1,this.images[o]=c,this.updatedImages[o]=!0},s.prototype.removeImage=function(o){var c=this.images[o];delete this.images[o],delete this.patterns[o],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(o,c){var d=!0;if(!this.isLoaded())for(var v=0,x=o;v<x.length;v+=1)this.images[x[v]]||(d=!1);this.isLoaded()||d?this._notify(o,c):this.requestors.push({ids:o,callback:c})},s.prototype._notify=function(o,c){for(var d={},v=0,x=o;v<x.length;v+=1){var E=x[v];this.images[E]||this.fire(new l.Event("styleimagemissing",{id:E}));var P=this.images[E];P?d[E]={data:P.data.clone(),pixelRatio:P.pixelRatio,sdf:P.sdf,version:P.version,stretchX:P.stretchX,stretchY:P.stretchY,content:P.content,hasRenderCallback:Boolean(P.userImage&&P.userImage.render)}:l.warnOnce('Image "'+E+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,d)},s.prototype.getPixelSize=function(){var o=this.atlasImage;return{width:o.width,height:o.height}},s.prototype.getPattern=function(o){var c=this.patterns[o],d=this.getImage(o);if(!d)return null;if(c&&c.position.version===d.version)return c.position;if(c)c.position.version=d.version;else{var v={w:d.data.width+2,h:d.data.height+2,x:0,y:0},x=new l.ImagePosition(v,d);this.patterns[o]={bin:v,position:x}}return this._updatePatternAtlas(),this.patterns[o].position},s.prototype.bind=function(o){var c=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(o,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var o=[];for(var c in this.patterns)o.push(this.patterns[c].bin);var d=l.potpack(o),v=d.w,x=d.h,E=this.atlasImage;for(var P in E.resize({width:v||1,height:x||1}),this.patterns){var z=this.patterns[P].bin,N=z.x+1,V=z.y+1,q=this.images[P].data,$=q.width,H=q.height;l.RGBAImage.copy(q,E,{x:0,y:0},{x:N,y:V},{width:$,height:H}),l.RGBAImage.copy(q,E,{x:0,y:H-1},{x:N,y:V-1},{width:$,height:1}),l.RGBAImage.copy(q,E,{x:0,y:0},{x:N,y:V+H},{width:$,height:1}),l.RGBAImage.copy(q,E,{x:$-1,y:0},{x:N-1,y:V},{width:1,height:H}),l.RGBAImage.copy(q,E,{x:0,y:0},{x:N+$,y:V},{width:1,height:H})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(o){for(var c=0,d=o;c<d.length;c+=1){var v=d[c];if(!this.callbackDispatchedThisFrame[v]){this.callbackDispatchedThisFrame[v]=!0;var x=this.images[v];ae(x)&&this.updateImage(v,x)}}},s}(l.Evented),Pe=Ze,Me=Ze,yt=1e20;function Ze(i,s,o,c,d,v){this.fontSize=i||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=d||"sans-serif",this.fontWeight=v||"normal",this.radius=o||8;var x=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=x,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.d=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Int16Array(x),this.middle=Math.round(x/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function It(i,s,o,c,d,v,x){for(var E=0;E<s;E++){for(var P=0;P<o;P++)c[P]=i[P*s+E];for(Ot(c,d,v,x,o),P=0;P<o;P++)i[P*s+E]=d[P]}for(P=0;P<o;P++){for(E=0;E<s;E++)c[E]=i[P*s+E];for(Ot(c,d,v,x,s),E=0;E<s;E++)i[P*s+E]=Math.sqrt(d[E])}}function Ot(i,s,o,c,d){o[0]=0,c[0]=-yt,c[1]=+yt;for(var v=1,x=0;v<d;v++){for(var E=(i[v]+v*v-(i[o[x]]+o[x]*o[x]))/(2*v-2*o[x]);E<=c[x];)x--,E=(i[v]+v*v-(i[o[x]]+o[x]*o[x]))/(2*v-2*o[x]);o[++x]=v,c[x]=E,c[x+1]=+yt}for(v=0,x=0;v<d;v++){for(;c[x+1]<v;)x++;s[v]=(v-o[x])*(v-o[x])+i[o[x]]}}Ze.prototype.draw=function(i){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(i,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var d=s.data[4*c+3]/255;this.gridOuter[c]=d===1?0:d===0?yt:Math.pow(Math.max(0,.5-d),2),this.gridInner[c]=d===1?yt:d===0?0:Math.pow(Math.max(0,d-.5),2)}for(It(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),It(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)o[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return o},Pe.default=Me;var pt=function(i,s){this.requestManager=i,this.localIdeographFontFamily=s,this.entries={}};pt.prototype.setURL=function(i){this.url=i},pt.prototype.getGlyphs=function(i,s){var o=this,c=[];for(var d in i)for(var v=0,x=i[d];v<x.length;v+=1)c.push({stack:d,id:x[v]});l.asyncAll(c,function(E,P){var z=E.stack,N=E.id,V=o.entries[z];V||(V=o.entries[z]={glyphs:{},requests:{},ranges:{}});var q=V.glyphs[N];if(q===void 0){if(q=o._tinySDF(V,z,N))return V.glyphs[N]=q,void P(null,{stack:z,id:N,glyph:q});var $=Math.floor(N/256);if(256*$>65535)P(new Error("glyphs > 65535 not supported"));else if(V.ranges[$])P(null,{stack:z,id:N,glyph:q});else{var H=V.requests[$];H||(H=V.requests[$]=[],pt.loadGlyphRange(z,$,o.url,o.requestManager,function(te,G){if(G){for(var ee in G)o._doesCharSupportLocalGlyph(+ee)||(V.glyphs[+ee]=G[+ee]);V.ranges[$]=!0}for(var se=0,ye=H;se<ye.length;se+=1)(0,ye[se])(te,G);delete V.requests[$]})),H.push(function(te,G){te?P(te):G&&P(null,{stack:z,id:N,glyph:G[N]||null})})}}else P(null,{stack:z,id:N,glyph:q})},function(E,P){if(E)s(E);else if(P){for(var z={},N=0,V=P;N<V.length;N+=1){var q=V[N],$=q.stack,H=q.id,te=q.glyph;(z[$]||(z[$]={}))[H]=te&&{id:te.id,bitmap:te.bitmap.clone(),metrics:te.metrics}}s(null,z)}})},pt.prototype._doesCharSupportLocalGlyph=function(i){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](i)||l.isChar["Hangul Syllables"](i)||l.isChar.Hiragana(i)||l.isChar.Katakana(i))},pt.prototype._tinySDF=function(i,s,o){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(o)){var d=i.tinySDF;if(!d){var v="400";/bold/i.test(s)?v="900":/medium/i.test(s)?v="500":/light/i.test(s)&&(v="200"),d=i.tinySDF=new pt.TinySDF(24,3,8,.25,c,v)}return{id:o,bitmap:new l.AlphaImage({width:30,height:30},d.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},pt.loadGlyphRange=function(i,s,o,c,d){var v=256*s,x=v+255,E=c.transformRequest(c.normalizeGlyphsURL(o).replace("{fontstack}",i).replace("{range}",v+"-"+x),l.ResourceType.Glyphs);l.getArrayBuffer(E,function(P,z){if(P)d(P);else if(z){for(var N={},V=0,q=l.parseGlyphPBF(z);V<q.length;V+=1){var $=q[V];N[$.id]=$}d(null,N)}})},pt.TinySDF=Pe;var er=function(){this.specification=l.styleSpec.light.position};er.prototype.possiblyEvaluate=function(i,s){return l.sphericalToCartesian(i.expression.evaluate(s))},er.prototype.interpolate=function(i,s,o){return{x:l.number(i.x,s.x,o),y:l.number(i.y,s.y,o),z:l.number(i.z,s.z,o)}};var br=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new er,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),Rr=function(i){function s(o){i.call(this),this._transitionable=new l.Transitionable(br),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(o,c){if(c===void 0&&(c={}),!this._validate(l.validateLight,o,c))for(var d in o){var v=o[d];l.endsWith(d,"-transition")?this._transitionable.setTransition(d.slice(0,-"-transition".length),v):this._transitionable.setValue(d,v)}},s.prototype.updateTransitions=function(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(o){this.properties=this._transitioning.possiblyEvaluate(o)},s.prototype._validate=function(o,c,d){return(!d||d.validate!==!1)&&l.emitValidationErrors(this,o.call(l.validateStyle,l.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},s}(l.Evented),Ut=function(i,s){this.width=i,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ut.prototype.getDash=function(i,s){var o=i.join(",")+String(s);return this.dashEntry[o]||(this.dashEntry[o]=this.addDash(i,s)),this.dashEntry[o]},Ut.prototype.getDashRanges=function(i,s,o){var c=[],d=i.length%2==1?-i[i.length-1]*o:0,v=i[0]*o,x=!0;c.push({left:d,right:v,isDash:x,zeroLength:i[0]===0});for(var E=i[0],P=1;P<i.length;P++){var z=i[P];c.push({left:d=E*o,right:v=(E+=z)*o,isDash:x=!x,zeroLength:z===0})}return c},Ut.prototype.addRoundDash=function(i,s,o){for(var c=s/2,d=-o;d<=o;d++)for(var v=this.width*(this.nextRow+o+d),x=0,E=i[x],P=0;P<this.width;P++){P/E.right>1&&(E=i[++x]);var z=Math.abs(P-E.left),N=Math.abs(P-E.right),V=Math.min(z,N),q=void 0,$=d/o*(c+1);if(E.isDash){var H=c-Math.abs($);q=Math.sqrt(V*V+H*H)}else q=c-Math.sqrt(V*V+$*$);this.data[v+P]=Math.max(0,Math.min(255,q+128))}},Ut.prototype.addRegularDash=function(i){for(var s=i.length-1;s>=0;--s){var o=i[s],c=i[s+1];o.zeroLength?i.splice(s,1):c&&c.isDash===o.isDash&&(c.left=o.left,i.splice(s,1))}var d=i[0],v=i[i.length-1];d.isDash===v.isDash&&(d.left=v.left-this.width,v.right=d.right+this.width);for(var x=this.width*this.nextRow,E=0,P=i[E],z=0;z<this.width;z++){z/P.right>1&&(P=i[++E]);var N=Math.abs(z-P.left),V=Math.abs(z-P.right),q=Math.min(N,V);this.data[x+z]=Math.max(0,Math.min(255,(P.isDash?q:-q)+128))}},Ut.prototype.addDash=function(i,s){var o=s?7:0,c=2*o+1;if(this.nextRow+c>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var d=0,v=0;v<i.length;v++)d+=i[v];if(d!==0){var x=this.width/d,E=this.getDashRanges(i,this.width,x);s?this.addRoundDash(E,x,o):this.addRegularDash(E)}var P={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:d};return this.nextRow+=c,this.dirty=!0,P},Ut.prototype.bind=function(i){var s=i.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var ir=function i(s,o){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var c=this.workerPool.acquire(this.id),d=0;d<c.length;d++){var v=new i.Actor(c[d],o,this.id);v.name="Worker "+d,this.actors.push(v)}};function qr(i,s,o){var c=function(d,v){if(d)return o(d);if(v){var x=l.pick(l.extend(v,i),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);v.vector_layers&&(x.vectorLayers=v.vector_layers,x.vectorLayerIds=x.vectorLayers.map(function(E){return E.id})),x.tiles=s.canonicalizeTileset(x,i.url),o(null,x)}};return i.url?l.getJSON(s.transformRequest(s.normalizeSourceURL(i.url),l.ResourceType.Source),c):l.browser.frame(function(){return c(null,i)})}ir.prototype.broadcast=function(i,s,o){l.asyncAll(this.actors,function(c,d){c.send(i,s,d)},o=o||function(){})},ir.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},ir.prototype.remove=function(){this.actors.forEach(function(i){i.remove()}),this.actors=[],this.workerPool.release(this.id)},ir.Actor=l.Actor;var zr=function(i,s,o){this.bounds=l.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=s||0,this.maxzoom=o||24};zr.prototype.validateBounds=function(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]},zr.prototype.contains=function(i){var s=Math.pow(2,i.z),o=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*s),d=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*s),v=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*s);return i.x>=o&&i.x<d&&i.y>=c&&i.y<v};var Qn=function(i){function s(o,c,d,v){if(i.call(this),this.id=o,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(c,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qr(this._options,this.map._requestManager,function(c,d){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new l.ErrorEvent(c)):d&&(l.extend(o,d),d.bounds&&(o.tileBounds=new zr(d.bounds,o.minzoom,o.maxzoom)),l.postTurnstileEvent(d.tiles,o.map._requestManager._customAccessToken),l.postMapLoadEvent(d.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setSourceProperty=function(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(o){var c=this;return this.setSourceProperty(function(){c._options.tiles=o}),this},s.prototype.setUrl=function(o){var c=this;return this.setSourceProperty(function(){c.url=o,c._options.url=o}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return l.extend({},this._options)},s.prototype.loadTile=function(o,c){var d=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(d,l.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(E,P){return delete o.request,o.aborted?c(null):E&&E.status!==404?c(E):(P&&P.resourceTiming&&(o.resourceTiming=P.resourceTiming),this.map._refreshExpiredTiles&&P&&o.setExpiryData(P),o.loadVectorData(P,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}v.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",v,x.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",v,x.bind(this)))},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(l.Evented),Tn=function(i){function s(o,c,d,v){i.call(this),this.id=o,this.dispatcher=d,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},c),l.extend(this,l.pick(c,["url","scheme","tileSize"]))}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qr(this._options,this.map._requestManager,function(c,d){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new l.ErrorEvent(c)):d&&(l.extend(o,d),d.bounds&&(o.tileBounds=new zr(d.bounds,o.minzoom,o.maxzoom)),l.postTurnstileEvent(d.tiles),l.postMapLoadEvent(d.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return l.extend({},this._options)},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.loadTile=function(o,c){var d=this,v=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=l.getImage(this.map._requestManager.transformRequest(v,l.ResourceType.Tile),function(x,E){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(x)o.state="errored",c(x);else if(E){d.map._refreshExpiredTiles&&o.setExpiryData(E),delete E.cacheControl,delete E.expires;var P=d.map.painter.context,z=P.gl;o.texture=d.map.painter.getTileTexture(E.width),o.texture?o.texture.update(E,{useMipmap:!0}):(o.texture=new l.Texture(P,E,z.RGBA,{useMipmap:!0}),o.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),P.extTextureFilterAnisotropic&&z.texParameterf(z.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax)),o.state="loaded",l.cacheEntryPossiblyAdded(d.dispatcher),c(null)}})},s.prototype.abortTile=function(o,c){o.request&&(o.request.cancel(),delete o.request),c()},s.prototype.unloadTile=function(o,c){o.texture&&this.map.painter.saveTileTexture(o.texture),c()},s.prototype.hasTransition=function(){return!1},s}(l.Evented),ei=function(i){function s(o,c,d,v){i.call(this,o,c,d,v),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(o,c){var d=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function v(x,E){x&&(o.state="errored",c(x)),E&&(o.dem=E,o.needsHillshadePrepare=!0,o.state="loaded",c(null))}o.request=l.getImage(this.map._requestManager.transformRequest(d,l.ResourceType.Tile),function(x,E){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(x)o.state="errored",c(x);else if(E){this.map._refreshExpiredTiles&&o.setExpiryData(E),delete E.cacheControl,delete E.expires;var P=l.window.ImageBitmap&&E instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?E:l.browser.getImageData(E,1),z={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:P,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",z,v.bind(this)))}}.bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},s.prototype._getNeighboringTiles=function(o){var c=o.canonical,d=Math.pow(2,c.z),v=(c.x-1+d)%d,x=c.x===0?o.wrap-1:o.wrap,E=(c.x+1+d)%d,P=c.x+1===d?o.wrap+1:o.wrap,z={};return z[new l.OverscaledTileID(o.overscaledZ,x,c.z,v,c.y).key]={backfilled:!1},z[new l.OverscaledTileID(o.overscaledZ,P,c.z,E,c.y).key]={backfilled:!1},c.y>0&&(z[new l.OverscaledTileID(o.overscaledZ,x,c.z,v,c.y-1).key]={backfilled:!1},z[new l.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},z[new l.OverscaledTileID(o.overscaledZ,P,c.z,E,c.y-1).key]={backfilled:!1}),c.y+1<d&&(z[new l.OverscaledTileID(o.overscaledZ,x,c.z,v,c.y+1).key]={backfilled:!1},z[new l.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},z[new l.OverscaledTileID(o.overscaledZ,P,c.z,E,c.y+1).key]={backfilled:!1}),z},s.prototype.unloadTile=function(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})},s}(Tn),Vt=function(i){function s(o,c,d,v){i.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(v),this._data=c.data,this._options=l.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var x=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*x,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*x,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:l.EXTENT,radius:(c.clusterRadius||50)*x,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(){var o=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)o.fire(new l.ErrorEvent(c));else{var d={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(d.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new l.Event("data",d))}})},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setData=function(o){var c=this;return this._data=o,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(d){if(d)c.fire(new l.ErrorEvent(d));else{var v={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(v.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new l.Event("data",v))}}),this},s.prototype.getClusterExpansionZoom=function(o,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},c),this},s.prototype.getClusterChildren=function(o,c){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},c),this},s.prototype.getClusterLeaves=function(o,c,d,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:c,offset:d},v),this},s.prototype._updateWorkerData=function(o){var c=this;this._loaded=!1;var d=l.extend({},this.workerOptions),v=this._data;typeof v=="string"?(d.request=this.map._requestManager.transformRequest(l.browser.resolveURL(v),l.ResourceType.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(v),this.actor.send(this.type+".loadData",d,function(x,E){c._removed||E&&E.abandoned||(c._loaded=!0,E&&E.resourceTiming&&E.resourceTiming[c.id]&&(c._resourceTiming=E.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:d.source},null),o(x))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(o,c){var d=this,v=o.actor?"reloadTile":"loadTile";o.actor=this.actor,o.request=this.actor.send(v,{type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(x,E){return delete o.request,o.unloadVectorData(),o.aborted?c(null):x?c(x):(o.loadVectorData(E,d.map.painter,v==="reloadTile"),c(null))})},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0},s.prototype.unloadTile=function(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(l.Evented),$e=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),At=function(i){function s(o,c,d,v){i.call(this),this.id=o,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(o,c){var d=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(v,x){d._loaded=!0,v?d.fire(new l.ErrorEvent(v)):x&&(d.image=x,o&&(d.coordinates=o),c&&c(),d._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(o){var c=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setCoordinates=function(o){var c=this;this.coordinates=o;var d=o.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(x){for(var E=1/0,P=1/0,z=-1/0,N=-1/0,V=0,q=x;V<q.length;V+=1){var $=q[V];E=Math.min(E,$.x),P=Math.min(P,$.y),z=Math.max(z,$.x),N=Math.max(N,$.y)}var H=Math.max(z-E,N-P),te=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),G=Math.pow(2,te);return new l.CanonicalTileID(te,Math.floor((E+z)/2*G),Math.floor((P+N)/2*G))}(d),this.minzoom=this.maxzoom=this.tileID.z;var v=d.map(function(x){return c.tileID.getTilePoint(x)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(v[2].x,v[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var o=this.map.painter.context,c=o.gl;for(var d in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(o,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var v=this.tiles[d];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}},s.prototype.loadTile=function(o,c){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},c(null)):(o.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(l.Evented),Xt=function(i){function s(o,c,d,v){i.call(this,o,c,d,v),this.roundZoom=!0,this.type="video",this.options=c}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1;var c=this.options;this.urls=[];for(var d=0,v=c.urls;d<v.length;d+=1)this.urls.push(this.map._requestManager.transformRequest(v[d],l.ResourceType.Source).url);l.getVideo(this.urls,function(x,E){o._loaded=!0,x?o.fire(new l.ErrorEvent(x)):E&&(o.video=E,o.video.loop=!0,o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(o){if(this.video){var c=this.video.seekable;o<c.start(0)||o>c.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=o}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var o=this.map.painter.context,c=o.gl;for(var d in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(o,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var v=this.tiles[d];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(At),Lr=function(i){function s(o,c,d,v){i.call(this,o,c,d,v),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(x){return!Array.isArray(x)||x.length!==2||x.some(function(E){return typeof E!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+o,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,d=c.gl;for(var v in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(c,this.canvas,d.RGBA,{premultiply:!0}),this.tiles){var x=this.tiles[v];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var o=0,c=[this.canvas.width,this.canvas.height];o<c.length;o+=1){var d=c[o];if(isNaN(d)||d<=0)return!0}return!1},s}(At),Zr={vector:Qn,raster:Tn,"raster-dem":ei,geojson:Vt,video:Xt,image:At,canvas:Lr};function ao(i,s){var o=l.identity([]);return l.translate(o,o,[1,1,0]),l.scale(o,o,[.5*i.width,.5*i.height,1]),l.multiply(o,o,i.calculatePosMatrix(s.toUnwrapped()))}function Jr(i,s,o,c,d,v){var x=function(te,G,ee){if(te)for(var se=0,ye=te;se<ye.length;se+=1){var Ce=G[ye[se]];if(Ce&&Ce.source===ee&&Ce.type==="fill-extrusion")return!0}else for(var we in G){var Ie=G[we];if(Ie.source===ee&&Ie.type==="fill-extrusion")return!0}return!1}(d&&d.layers,s,i.id),E=v.maxPitchScaleFactor(),P=i.tilesIn(c,E,x);P.sort(ii);for(var z=[],N=0,V=P;N<V.length;N+=1){var q=V[N];z.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(s,o,i._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,d,v,E,ao(i.transform,q.tileID))})}var $=function(te){for(var G={},ee={},se=0,ye=te;se<ye.length;se+=1){var Ce=ye[se],we=Ce.queryResults,Ie=Ce.wrappedTileID,De=ee[Ie]=ee[Ie]||{};for(var qe in we)for(var je=we[qe],ot=De[qe]=De[qe]||{},xt=G[qe]=G[qe]||[],Ct=0,Et=je;Ct<Et.length;Ct+=1){var hr=Et[Ct];ot[hr.featureIndex]||(ot[hr.featureIndex]=!0,xt.push(hr))}}return G}(z);for(var H in $)$[H].forEach(function(te){var G=te.feature,ee=i.getFeatureState(G.layer["source-layer"],G.id);G.source=G.layer.source,G.layer["source-layer"]&&(G.sourceLayer=G.layer["source-layer"]),G.state=ee});return $}function ii(i,s){var o=i.tileID,c=s.tileID;return o.overscaledZ-c.overscaledZ||o.canonical.y-c.canonical.y||o.wrap-c.wrap||o.canonical.x-c.canonical.x}var sr=function(i,s){this.max=i,this.onRemove=s,this.reset()};sr.prototype.reset=function(){for(var i in this.data)for(var s=0,o=this.data[i];s<o.length;s+=1){var c=o[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},sr.prototype.add=function(i,s,o){var c=this,d=i.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);var v={value:s,timeout:void 0};if(o!==void 0&&(v.timeout=setTimeout(function(){c.remove(i,v)},o)),this.data[d].push(v),this.order.push(d),this.order.length>this.max){var x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this},sr.prototype.has=function(i){return i.wrapped().key in this.data},sr.prototype.getAndRemove=function(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null},sr.prototype._getAndRemoveByKey=function(i){var s=this.data[i].shift();return s.timeout&&clearTimeout(s.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),s.value},sr.prototype.getByKey=function(i){var s=this.data[i];return s?s[0].value:null},sr.prototype.get=function(i){return this.has(i)?this.data[i.wrapped().key][0].value:null},sr.prototype.remove=function(i,s){if(!this.has(i))return this;var o=i.wrapped().key,c=s===void 0?0:this.data[o].indexOf(s),d=this.data[o][c];return this.data[o].splice(c,1),d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(d.value),this.order.splice(this.order.indexOf(o),1),this},sr.prototype.setMaxSize=function(i){for(this.max=i;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},sr.prototype.filter=function(i){var s=[];for(var o in this.data)for(var c=0,d=this.data[o];c<d.length;c+=1){var v=d[c];i(v.value)||s.push(v)}for(var x=0,E=s;x<E.length;x+=1){var P=E[x];this.remove(P.value.tileID,P)}};var wo=function(i,s,o){this.context=i;var c=i.gl;this.buffer=c.createBuffer(),this.dynamicDraw=Boolean(o),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};wo.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},wo.prototype.updateData=function(i){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)},wo.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Za={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},qn=function(i,s,o,c){this.length=s.length,this.attributes=o,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=i;var d=i.gl;this.buffer=d.createBuffer(),i.bindVertexBuffer.set(this.buffer),d.bufferData(d.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};qn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},qn.prototype.updateData=function(i){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,i.arrayBuffer)},qn.prototype.enableAttributes=function(i,s){for(var o=0;o<this.attributes.length;o++){var c=s.attributes[this.attributes[o].name];c!==void 0&&i.enableVertexAttribArray(c)}},qn.prototype.setVertexAttribPointers=function(i,s,o){for(var c=0;c<this.attributes.length;c++){var d=this.attributes[c],v=s.attributes[d.name];v!==void 0&&i.vertexAttribPointer(v,d.components,i[Za[d.type]],!1,this.itemSize,d.offset+this.itemSize*(o||0))}},qn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ht=function(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ht.prototype.get=function(){return this.current},Ht.prototype.set=function(i){},Ht.prototype.getDefault=function(){return this.default},Ht.prototype.setDefault=function(){this.set(this.default)};var Fi=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return l.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Ht),rn=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)},s}(Ht),In=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)},s}(Ht),Au=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Ht),Ri=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)},s}(Ht),ms=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)},s}(Ht),un=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(o){var c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},s}(Ht),ba=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},s}(Ht),bo=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}},s}(Ht),bi=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Ht),hi=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}},s}(Ht),ta=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)},s}(Ht),Bi=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}},s}(Ht),ys=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.ONE,o.ZERO]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Ht),Ga=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return l.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Ht),Sa=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)},s}(Ht),Pn=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}},s}(Ht),Ui=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)},s}(Ht),Ni=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)},s}(Ht),Zn=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)},s}(Ht),vs=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)},s}(Ht),So=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Ht),Dn=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},s}(Ht),$t=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Ht),gs=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}},s}(Ht),Xs=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},s}(Ht),Ea=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},s}(Ht),ji=function(i){function s(o){i.call(this,o),this.vao=o.extVertexArrayObject}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)},s}(Ht),No=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},s}(Ht),Ir=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},s}(Ht),Wa=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},s}(Ht),Pr=function(i){function s(o,c){i.call(this,o),this.context=o,this.parent=c}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Ht),M=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},s}(Pr),O=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Pr),B=function(i,s,o,c){this.context=i,this.width=s,this.height=o;var d=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new M(i,d),c&&(this.depthAttachment=new O(i,d))};B.prototype.destroy=function(){var i=this.context.gl,s=this.colorAttachment.get();if(s&&i.deleteTexture(s),this.depthAttachment){var o=this.depthAttachment.get();o&&i.deleteRenderbuffer(o)}i.deleteFramebuffer(this.framebuffer)};var Z=function(i,s,o){this.func=i,this.mask=s,this.range=o};Z.ReadOnly=!1,Z.ReadWrite=!0,Z.disabled=new Z(519,Z.ReadOnly,[0,1]);var X=function(i,s,o,c,d,v){this.test=i,this.ref=s,this.mask=o,this.fail=c,this.depthFail=d,this.pass=v};X.disabled=new X({func:519,mask:0},0,0,7680,7680,7680);var ie=function(i,s,o){this.blendFunction=i,this.blendColor=s,this.mask=o};ie.disabled=new ie(ie.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),ie.unblended=new ie(ie.Replace,l.Color.transparent,[!0,!0,!0,!0]),ie.alphaBlended=new ie([1,771],l.Color.transparent,[!0,!0,!0,!0]);var ue=function(i,s,o){this.enable=i,this.mode=s,this.frontFace=o};ue.disabled=new ue(!1,1029,2305),ue.backCCW=new ue(!0,1029,2305);var j=function(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Fi(this),this.clearDepth=new rn(this),this.clearStencil=new In(this),this.colorMask=new Au(this),this.depthMask=new Ri(this),this.stencilMask=new ms(this),this.stencilFunc=new un(this),this.stencilOp=new ba(this),this.stencilTest=new bo(this),this.depthRange=new bi(this),this.depthTest=new hi(this),this.depthFunc=new ta(this),this.blend=new Bi(this),this.blendFunc=new ys(this),this.blendColor=new Ga(this),this.blendEquation=new Sa(this),this.cullFace=new Pn(this),this.cullFaceSide=new Ui(this),this.frontFace=new Ni(this),this.program=new Zn(this),this.activeTexture=new vs(this),this.viewport=new So(this),this.bindFramebuffer=new Dn(this),this.bindRenderbuffer=new $t(this),this.bindTexture=new gs(this),this.bindVertexBuffer=new Xs(this),this.bindElementBuffer=new Ea(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ji(this),this.pixelStoreUnpack=new No(this),this.pixelStoreUnpackPremultiplyAlpha=new Ir(this),this.pixelStoreUnpackFlipY=new Wa(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)};j.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},j.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},j.prototype.createIndexBuffer=function(i,s){return new wo(this,i,s)},j.prototype.createVertexBuffer=function(i,s,o){return new qn(this,i,s,o)},j.prototype.createRenderbuffer=function(i,s,o){var c=this.gl,d=c.createRenderbuffer();return this.bindRenderbuffer.set(d),c.renderbufferStorage(c.RENDERBUFFER,i,s,o),this.bindRenderbuffer.set(null),d},j.prototype.createFramebuffer=function(i,s,o){return new B(this,i,s,o)},j.prototype.clear=function(i){var s=i.color,o=i.depth,c=this.gl,d=0;s&&(d|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(d|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),c.clear(d)},j.prototype.setCullFace=function(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))},j.prototype.setDepthMode=function(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)},j.prototype.setStencilMode=function(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)},j.prototype.setColorMode=function(i){l.deepEqual(i.blendFunction,ie.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)},j.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Y=function(i){function s(o,c,d){var v=this;i.call(this),this.id=o,this.dispatcher=d,this.on("data",function(x){x.dataType==="source"&&x.sourceDataType==="metadata"&&(v._sourceLoaded=!0),v._sourceLoaded&&!v._paused&&x.dataType==="source"&&x.sourceDataType==="content"&&(v.reload(),v.transform&&v.update(v.transform))}),this.on("error",function(){v._sourceErrored=!0}),this._source=function(x,E,P,z){var N=new Zr[E.type](x,E,P,z);if(N.id!==x)throw new Error("Expected Source id to be "+x+" instead of "+N.id);return l.bindAll(["load","abort","unload","serialize","prepare"],N),N}(o,c,d,this),this._tiles={},this._cache=new sr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.onAdd=function(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)},s.prototype.onRemove=function(o){this._source&&this._source.onRemove&&this._source.onRemove(o)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var o in this._tiles){var c=this._tiles[o];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(o,c){return this._source.loadTile(o,c)},s.prototype._unloadTile=function(o){if(this._source.unloadTile)return this._source.unloadTile(o,function(){})},s.prototype._abortTile=function(o){if(this._source.abortTile)return this._source.abortTile(o,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(o){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var d=this._tiles[c];d.upload(o),d.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return l.values(this._tiles).map(function(o){return o.tileID}).sort(me).map(function(o){return o.key})},s.prototype.getRenderableIds=function(o){var c=this,d=[];for(var v in this._tiles)this._isIdRenderable(v,o)&&d.push(this._tiles[v]);return o?d.sort(function(x,E){var P=x.tileID,z=E.tileID,N=new l.Point(P.canonical.x,P.canonical.y)._rotate(c.transform.angle),V=new l.Point(z.canonical.x,z.canonical.y)._rotate(c.transform.angle);return P.overscaledZ-z.overscaledZ||V.y-N.y||V.x-N.x}).map(function(x){return x.tileID.key}):d.map(function(x){return x.tileID}).sort(me).map(function(x){return x.key})},s.prototype.hasRenderableParent=function(o){var c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(o,c){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var o in this._cache.reset(),this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")},s.prototype._reloadTile=function(o,c){var d=this._tiles[o];d&&(d.state!=="loading"&&(d.state=c),this._loadTile(d,this._tileLoaded.bind(this,d,o,c)))},s.prototype._tileLoaded=function(o,c,d,v){if(v)return o.state="errored",void(v.status!==404?this._source.fire(new l.ErrorEvent(v,{tile:o})):this.update(this.transform));o.timeAdded=l.browser.now(),d==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},s.prototype._backfillDEM=function(o){for(var c=this.getRenderableIds(),d=0;d<c.length;d++){var v=c[d];if(o.neighboringTiles&&o.neighboringTiles[v]){var x=this.getTileByID(v);E(o,x),E(x,o)}}function E(P,z){P.needsHillshadePrepare=!0;var N=z.tileID.canonical.x-P.tileID.canonical.x,V=z.tileID.canonical.y-P.tileID.canonical.y,q=Math.pow(2,P.tileID.canonical.z),$=z.tileID.key;N===0&&V===0||Math.abs(V)>1||(Math.abs(N)>1&&(Math.abs(N+q)===1?N+=q:Math.abs(N-q)===1&&(N-=q)),z.dem&&P.dem&&(P.dem.backfillBorder(z.dem,N,V),P.neighboringTiles&&P.neighboringTiles[$]&&(P.neighboringTiles[$].backfilled=!0)))}},s.prototype.getTile=function(o){return this.getTileByID(o.key)},s.prototype.getTileByID=function(o){return this._tiles[o]},s.prototype._retainLoadedChildren=function(o,c,d,v){for(var x in this._tiles){var E=this._tiles[x];if(!(v[x]||!E.hasData()||E.tileID.overscaledZ<=c||E.tileID.overscaledZ>d)){for(var P=E.tileID;E&&E.tileID.overscaledZ>c+1;){var z=E.tileID.scaledTo(E.tileID.overscaledZ-1);(E=this._tiles[z.key])&&E.hasData()&&(P=z)}for(var N=P;N.overscaledZ>c;)if(o[(N=N.scaledTo(N.overscaledZ-1)).key]){v[P.key]=P;break}}}},s.prototype.findLoadedParent=function(o,c){if(o.key in this._loadedParentTiles){var d=this._loadedParentTiles[o.key];return d&&d.tileID.overscaledZ>=c?d:null}for(var v=o.overscaledZ-1;v>=c;v--){var x=o.scaledTo(v),E=this._getLoadedTile(x);if(E)return E}},s.prototype._getLoadedTile=function(o){var c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(o.wrapped().key)},s.prototype.updateCacheSize=function(o){var c=Math.ceil(o.width/this._source.tileSize)+1,d=Math.ceil(o.height/this._source.tileSize)+1,v=Math.floor(c*d*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(x)},s.prototype.handleWrapJump=function(o){var c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){var d={};for(var v in this._tiles){var x=this._tiles[v];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+c),d[x.tileID.key]=x}for(var E in this._tiles=d,this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(var P in this._tiles)this._setTileReloadTimer(P,this._tiles[P])}},s.prototype.update=function(o){var c=this;if(this.transform=o,this._sourceLoaded&&!this._paused){var d;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?d=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(De){return new l.OverscaledTileID(De.canonical.z,De.wrap,De.canonical.z,De.canonical.x,De.canonical.y)}):(d=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(d=d.filter(function(De){return c._source.hasTile(De)}))):d=[];var v=o.coveringZoomLevel(this._source),x=Math.max(v-s.maxOverzooming,this._source.minzoom),E=Math.max(v+s.maxUnderzooming,this._source.minzoom),P=this._updateRetainedTiles(d,v);if(Le(this._source.type)){for(var z={},N={},V=0,q=Object.keys(P);V<q.length;V+=1){var $=q[V],H=P[$],te=this._tiles[$];if(te&&!(te.fadeEndTime&&te.fadeEndTime<=l.browser.now())){var G=this.findLoadedParent(H,x);G&&(this._addTile(G.tileID),z[G.tileID.key]=G.tileID),N[$]=H}}for(var ee in this._retainLoadedChildren(N,v,E,P),z)P[ee]||(this._coveredTiles[ee]=!0,P[ee]=z[ee])}for(var se in P)this._tiles[se].clearFadeHold();for(var ye=0,Ce=l.keysDifference(this._tiles,P);ye<Ce.length;ye+=1){var we=Ce[ye],Ie=this._tiles[we];Ie.hasSymbolBuckets&&!Ie.holdingForFade()?Ie.setHoldDuration(this.map._fadeDuration):Ie.hasSymbolBuckets&&!Ie.symbolFadeFinished()||this._removeTile(we)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)},s.prototype._updateRetainedTiles=function(o,c){for(var d={},v={},x=Math.max(c-s.maxOverzooming,this._source.minzoom),E=Math.max(c+s.maxUnderzooming,this._source.minzoom),P={},z=0,N=o;z<N.length;z+=1){var V=N[z],q=this._addTile(V);d[V.key]=V,q.hasData()||c<this._source.maxzoom&&(P[V.key]=V)}this._retainLoadedChildren(P,c,E,d);for(var $=0,H=o;$<H.length;$+=1){var te=H[$],G=this._tiles[te.key];if(!G.hasData()){if(c+1>this._source.maxzoom){var ee=te.children(this._source.maxzoom)[0],se=this.getTile(ee);if(se&&se.hasData()){d[ee.key]=ee;continue}}else{var ye=te.children(this._source.maxzoom);if(d[ye[0].key]&&d[ye[1].key]&&d[ye[2].key]&&d[ye[3].key])continue}for(var Ce=G.wasRequested(),we=te.overscaledZ-1;we>=x;--we){var Ie=te.scaledTo(we);if(v[Ie.key]||(v[Ie.key]=!0,!(G=this.getTile(Ie))&&Ce&&(G=this._addTile(Ie)),G&&(d[Ie.key]=Ie,Ce=G.wasRequested(),G.hasData())))break}}}return d},s.prototype._updateLoadedParentTileCache=function(){for(var o in this._loadedParentTiles={},this._tiles){for(var c=[],d=void 0,v=this._tiles[o].tileID;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){d=this._loadedParentTiles[v.key];break}c.push(v.key);var x=v.scaledTo(v.overscaledZ-1);if(d=this._getLoadedTile(x))break;v=x}for(var E=0,P=c;E<P.length;E+=1)this._loadedParentTiles[P[E]]=d}},s.prototype._addTile=function(o){var c=this._tiles[o.key];if(c)return c;(c=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));var d=Boolean(c);return d||(c=new l.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))),c?(c.uses++,this._tiles[o.key]=c,d||this._source.fire(new l.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(o,c){var d=this;o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);var v=c.getExpiryTimeout();v&&(this._timers[o]=setTimeout(function(){d._reloadTile(o,"expired"),delete d._timers[o]},v))},s.prototype._removeTile=function(o){var c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var o in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(o);this._cache.reset()},s.prototype.tilesIn=function(o,c,d){var v=this,x=[],E=this.transform;if(!E)return x;for(var P=d?E.getCameraQueryGeometry(o):o,z=o.map(function(we){return E.pointCoordinate(we)}),N=P.map(function(we){return E.pointCoordinate(we)}),V=this.getIds(),q=1/0,$=1/0,H=-1/0,te=-1/0,G=0,ee=N;G<ee.length;G+=1){var se=ee[G];q=Math.min(q,se.x),$=Math.min($,se.y),H=Math.max(H,se.x),te=Math.max(te,se.y)}for(var ye=function(we){var Ie=v._tiles[V[we]];if(!Ie.holdingForFade()){var De=Ie.tileID,qe=Math.pow(2,E.zoom-Ie.tileID.overscaledZ),je=c*Ie.queryPadding*l.EXTENT/Ie.tileSize/qe,ot=[De.getTilePoint(new l.MercatorCoordinate(q,$)),De.getTilePoint(new l.MercatorCoordinate(H,te))];if(ot[0].x-je<l.EXTENT&&ot[0].y-je<l.EXTENT&&ot[1].x+je>=0&&ot[1].y+je>=0){var xt=z.map(function(Et){return De.getTilePoint(Et)}),Ct=N.map(function(Et){return De.getTilePoint(Et)});x.push({tile:Ie,tileID:De,queryGeometry:xt,cameraQueryGeometry:Ct,scale:qe})}}},Ce=0;Ce<V.length;Ce++)ye(Ce);return x},s.prototype.getVisibleCoordinates=function(o){for(var c=this,d=this.getRenderableIds(o).map(function(P){return c._tiles[P].tileID}),v=0,x=d;v<x.length;v+=1){var E=x[v];E.posMatrix=this.transform.calculatePosMatrix(E.toUnwrapped())}return d},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Le(this._source.type))for(var o in this._tiles){var c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=l.browser.now())return!0}return!1},s.prototype.setFeatureState=function(o,c,d){this._state.updateState(o=o||"_geojsonTileLayer",c,d)},s.prototype.removeFeatureState=function(o,c,d){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,d)},s.prototype.getFeatureState=function(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(o,c,d){var v=this._tiles[o];v&&v.setDependencies(c,d)},s.prototype.reloadTilesForDependencies=function(o,c){for(var d in this._tiles)this._tiles[d].hasDependency(o,c)&&this._reloadTile(d,"reloading");this._cache.filter(function(v){return!v.hasDependency(o,c)})},s}(l.Evented);function me(i,s){var o=Math.abs(2*i.wrap)-+(i.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return i.overscaledZ-s.overscaledZ||c-o||s.canonical.y-i.canonical.y||s.canonical.x-i.canonical.x}function Le(i){return i==="raster"||i==="image"||i==="video"}function Re(){return new l.window.Worker(Ol.workerUrl)}Y.maxOverzooming=10,Y.maxUnderzooming=3;var Ee="mapboxgl_preloaded_worker_pool",Fe=function(){this.active={}};Fe.prototype.acquire=function(i){if(!this.workers)for(this.workers=[];this.workers.length<Fe.workerCount;)this.workers.push(new Re);return this.active[i]=!0,this.workers.slice()},Fe.prototype.release=function(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Fe.prototype.isPreloaded=function(){return!!this.active[Ee]},Fe.prototype.numActive=function(){return Object.keys(this.active).length};var st,nt=Math.floor(l.browser.hardwareConcurrency/2);function Te(){return st||(st=new Fe),st}function Ye(i,s){var o={};for(var c in i)c!=="ref"&&(o[c]=i[c]);return l.refProperties.forEach(function(d){d in s&&(o[d]=s[d])}),o}function We(i){i=i.slice();for(var s=Object.create(null),o=0;o<i.length;o++)s[i[o].id]=i[o];for(var c=0;c<i.length;c++)"ref"in i[c]&&(i[c]=Ye(i[c],s[i[c].ref]));return i}Fe.workerCount=Math.max(Math.min(nt,6),1);var Xe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jt(i,s,o){o.push({command:Xe.addSource,args:[i,s[i]]})}function Je(i,s,o){s.push({command:Xe.removeSource,args:[i]}),o[i]=!0}function tr(i,s,o,c){Je(i,o,c),jt(i,s,o)}function Cr(i,s,o){var c;for(c in i[o])if(i[o].hasOwnProperty(c)&&c!=="data"&&!l.deepEqual(i[o][c],s[o][c]))return!1;for(c in s[o])if(s[o].hasOwnProperty(c)&&c!=="data"&&!l.deepEqual(i[o][c],s[o][c]))return!1;return!0}function Mt(i,s,o,c,d,v){var x;for(x in s=s||{},i=i||{})i.hasOwnProperty(x)&&(l.deepEqual(i[x],s[x])||o.push({command:v,args:[c,x,s[x],d]}));for(x in s)s.hasOwnProperty(x)&&!i.hasOwnProperty(x)&&(l.deepEqual(i[x],s[x])||o.push({command:v,args:[c,x,s[x],d]}))}function lr(i){return i.id}function or(i,s){return i[s.id]=s,i}var On=function(i,s){this.reset(i,s)};On.prototype.reset=function(i,s){this.points=i||[],this._distances=[0];for(var o=1;o<this.points.length;o++)this._distances[o]=this._distances[o-1]+this.points[o].dist(this.points[o-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},On.prototype.lerp=function(i){if(this.points.length===1)return this.points[0];i=l.clamp(i,0,1);for(var s=1,o=this._distances[s],c=i*this.paddedLength+this.padding;o<c&&s<this._distances.length;)o=this._distances[++s];var d=s-1,v=this._distances[d],x=o-v,E=x>0?(c-v)/x:0;return this.points[d].mult(1-E).add(this.points[s].mult(E))};var dr=function(i,s,o){var c=this.boxCells=[],d=this.circleCells=[];this.xCellCount=Math.ceil(i/o),this.yCellCount=Math.ceil(s/o);for(var v=0;v<this.xCellCount*this.yCellCount;v++)c.push([]),d.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=s,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function Qr(i,s,o,c,d){var v=l.create();return s?(l.scale(v,v,[1/d,1/d,1]),o||l.rotateZ(v,v,c.angle)):l.multiply(v,c.labelPlaneMatrix,i),v}function xr(i,s,o,c,d){if(s){var v=l.clone(i);return l.scale(v,v,[d,d,1]),o||l.rotateZ(v,v,-c.angle),v}return c.glCoordMatrix}function Pt(i,s){var o=[i.x,i.y,0,1];kn(o,o,s);var c=o[3];return{point:new l.Point(o[0]/c,o[1]/c),signedDistanceFromCamera:c}}function cr(i,s){return .5+i/s*.5}function oi(i,s){var o=i[0]/i[3],c=i[1]/i[3];return o>=-s[0]&&o<=s[0]&&c>=-s[1]&&c<=s[1]}function Vi(i,s,o,c,d,v,x,E){var P=c?i.textSizeData:i.iconSizeData,z=l.evaluateSizeForZoom(P,o.transform.zoom),N=[256/o.width*2+1,256/o.height*2+1],V=c?i.text.dynamicLayoutVertexArray:i.icon.dynamicLayoutVertexArray;V.clear();for(var q=i.lineVertexArray,$=c?i.text.placedSymbolArray:i.icon.placedSymbolArray,H=o.transform.width/o.transform.height,te=!1,G=0;G<$.length;G++){var ee=$.get(G);if(ee.hidden||ee.writingMode===l.WritingMode.vertical&&!te)ti(ee.numGlyphs,V);else{te=!1;var se=[ee.anchorX,ee.anchorY,0,1];if(l.transformMat4(se,se,s),oi(se,N)){var ye=cr(o.transform.cameraToCenterDistance,se[3]),Ce=l.evaluateSizeForFeature(P,z,ee),we=x?Ce/ye:Ce*ye,Ie=new l.Point(ee.anchorX,ee.anchorY),De=Pt(Ie,d).point,qe={},je=jo(ee,we,!1,E,s,d,v,i.glyphOffsetArray,q,V,De,Ie,qe,H);te=je.useVertical,(je.notEnoughRoom||te||je.needsFlipping&&jo(ee,we,!0,E,s,d,v,i.glyphOffsetArray,q,V,De,Ie,qe,H).notEnoughRoom)&&ti(ee.numGlyphs,V)}else ti(ee.numGlyphs,V)}}c?i.text.dynamicLayoutVertexBuffer.updateData(V):i.icon.dynamicLayoutVertexBuffer.updateData(V)}function Br(i,s,o,c,d,v,x,E,P,z,N){var V=E.glyphStartIndex+E.numGlyphs,q=E.lineStartIndex,$=E.lineStartIndex+E.lineLength,H=s.getoffsetX(E.glyphStartIndex),te=s.getoffsetX(V-1),G=en(i*H,o,c,d,v,x,E.segment,q,$,P,z,N);if(!G)return null;var ee=en(i*te,o,c,d,v,x,E.segment,q,$,P,z,N);return ee?{first:G,last:ee}:null}function Gn(i,s,o,c){return i===l.WritingMode.horizontal&&Math.abs(o.y-s.y)>Math.abs(o.x-s.x)*c?{useVertical:!0}:(i===l.WritingMode.vertical?s.y<o.y:s.x>o.x)?{needsFlipping:!0}:null}function jo(i,s,o,c,d,v,x,E,P,z,N,V,q,$){var H,te=s/24,G=i.lineOffsetX*te,ee=i.lineOffsetY*te;if(i.numGlyphs>1){var se=i.glyphStartIndex+i.numGlyphs,ye=i.lineStartIndex,Ce=i.lineStartIndex+i.lineLength,we=Br(te,E,G,ee,o,N,V,i,P,v,q);if(!we)return{notEnoughRoom:!0};var Ie=Pt(we.first.point,x).point,De=Pt(we.last.point,x).point;if(c&&!o){var qe=Gn(i.writingMode,Ie,De,$);if(qe)return qe}H=[we.first];for(var je=i.glyphStartIndex+1;je<se-1;je++)H.push(en(te*E.getoffsetX(je),G,ee,o,N,V,i.segment,ye,Ce,P,v,q));H.push(we.last)}else{if(c&&!o){var ot=Pt(V,d).point,xt=i.lineStartIndex+i.segment+1,Ct=new l.Point(P.getx(xt),P.gety(xt)),Et=Pt(Ct,d),hr=Et.signedDistanceFromCamera>0?Et.point:so(V,Ct,ot,1,d),ut=Gn(i.writingMode,ot,hr,$);if(ut)return ut}var Nt=en(te*E.getoffsetX(i.glyphStartIndex),G,ee,o,N,V,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,P,v,q);if(!Nt)return{notEnoughRoom:!0};H=[Nt]}for(var Wt=0,Bt=H;Wt<Bt.length;Wt+=1){var Ft=Bt[Wt];l.addDynamicAttributes(z,Ft.point,Ft.angle)}return{}}function so(i,s,o,c,d){var v=Pt(i.add(i.sub(s)._unit()),d).point,x=o.sub(v);return o.add(x._mult(c/x.mag()))}function en(i,s,o,c,d,v,x,E,P,z,N,V){var q=c?i-s:i+s,$=q>0?1:-1,H=0;c&&($*=-1,H=Math.PI),$<0&&(H+=Math.PI);for(var te=$>0?E+x:E+x+1,G=d,ee=d,se=0,ye=0,Ce=Math.abs(q),we=[];se+ye<=Ce;){if((te+=$)<E||te>=P)return null;if(ee=G,we.push(G),(G=V[te])===void 0){var Ie=new l.Point(z.getx(te),z.gety(te)),De=Pt(Ie,N);if(De.signedDistanceFromCamera>0)G=V[te]=De.point;else{var qe=te-$;G=so(se===0?v:new l.Point(z.getx(qe),z.gety(qe)),Ie,ee,Ce-se+1,N)}}se+=ye,ye=ee.dist(G)}var je=(Ce-se)/ye,ot=G.sub(ee),xt=ot.mult(je)._add(ee);xt._add(ot._unit()._perp()._mult(o*$));var Ct=H+Math.atan2(G.y-ee.y,G.x-ee.x);return we.push(xt),{point:xt,angle:Ct,path:we}}dr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},dr.prototype.insert=function(i,s,o,c,d){this._forEachCell(s,o,c,d,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(s),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(d)},dr.prototype.insertCircle=function(i,s,o,c){this._forEachCell(s-c,o-c,s+c,o+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(s),this.circles.push(o),this.circles.push(c)},dr.prototype._insertBoxCell=function(i,s,o,c,d,v){this.boxCells[d].push(v)},dr.prototype._insertCircleCell=function(i,s,o,c,d,v){this.circleCells[d].push(v)},dr.prototype._query=function(i,s,o,c,d,v){if(o<0||i>this.width||c<0||s>this.height)return!d&&[];var x=[];if(i<=0&&s<=0&&this.width<=o&&this.height<=c){if(d)return!0;for(var E=0;E<this.boxKeys.length;E++)x.push({key:this.boxKeys[E],x1:this.bboxes[4*E],y1:this.bboxes[4*E+1],x2:this.bboxes[4*E+2],y2:this.bboxes[4*E+3]});for(var P=0;P<this.circleKeys.length;P++){var z=this.circles[3*P],N=this.circles[3*P+1],V=this.circles[3*P+2];x.push({key:this.circleKeys[P],x1:z-V,y1:N-V,x2:z+V,y2:N+V})}return v?x.filter(v):x}return this._forEachCell(i,s,o,c,this._queryCell,x,{hitTest:d,seenUids:{box:{},circle:{}}},v),d?x.length>0:x},dr.prototype._queryCircle=function(i,s,o,c,d){var v=i-o,x=i+o,E=s-o,P=s+o;if(x<0||v>this.width||P<0||E>this.height)return!c&&[];var z=[];return this._forEachCell(v,E,x,P,this._queryCellCircle,z,{hitTest:c,circle:{x:i,y:s,radius:o},seenUids:{box:{},circle:{}}},d),c?z.length>0:z},dr.prototype.query=function(i,s,o,c,d){return this._query(i,s,o,c,!1,d)},dr.prototype.hitTest=function(i,s,o,c,d){return this._query(i,s,o,c,!0,d)},dr.prototype.hitTestCircle=function(i,s,o,c){return this._queryCircle(i,s,o,!0,c)},dr.prototype._queryCell=function(i,s,o,c,d,v,x,E){var P=x.seenUids,z=this.boxCells[d];if(z!==null)for(var N=this.bboxes,V=0,q=z;V<q.length;V+=1){var $=q[V];if(!P.box[$]){P.box[$]=!0;var H=4*$;if(i<=N[H+2]&&s<=N[H+3]&&o>=N[H+0]&&c>=N[H+1]&&(!E||E(this.boxKeys[$]))){if(x.hitTest)return v.push(!0),!0;v.push({key:this.boxKeys[$],x1:N[H],y1:N[H+1],x2:N[H+2],y2:N[H+3]})}}}var te=this.circleCells[d];if(te!==null)for(var G=this.circles,ee=0,se=te;ee<se.length;ee+=1){var ye=se[ee];if(!P.circle[ye]){P.circle[ye]=!0;var Ce=3*ye;if(this._circleAndRectCollide(G[Ce],G[Ce+1],G[Ce+2],i,s,o,c)&&(!E||E(this.circleKeys[ye]))){if(x.hitTest)return v.push(!0),!0;var we=G[Ce],Ie=G[Ce+1],De=G[Ce+2];v.push({key:this.circleKeys[ye],x1:we-De,y1:Ie-De,x2:we+De,y2:Ie+De})}}}},dr.prototype._queryCellCircle=function(i,s,o,c,d,v,x,E){var P=x.circle,z=x.seenUids,N=this.boxCells[d];if(N!==null)for(var V=this.bboxes,q=0,$=N;q<$.length;q+=1){var H=$[q];if(!z.box[H]){z.box[H]=!0;var te=4*H;if(this._circleAndRectCollide(P.x,P.y,P.radius,V[te+0],V[te+1],V[te+2],V[te+3])&&(!E||E(this.boxKeys[H])))return v.push(!0),!0}}var G=this.circleCells[d];if(G!==null)for(var ee=this.circles,se=0,ye=G;se<ye.length;se+=1){var Ce=ye[se];if(!z.circle[Ce]){z.circle[Ce]=!0;var we=3*Ce;if(this._circlesCollide(ee[we],ee[we+1],ee[we+2],P.x,P.y,P.radius)&&(!E||E(this.circleKeys[Ce])))return v.push(!0),!0}}},dr.prototype._forEachCell=function(i,s,o,c,d,v,x,E){for(var P=this._convertToXCellCoord(i),z=this._convertToYCellCoord(s),N=this._convertToXCellCoord(o),V=this._convertToYCellCoord(c),q=P;q<=N;q++)for(var $=z;$<=V;$++)if(d.call(this,i,s,o,c,this.xCellCount*$+q,v,x,E))return},dr.prototype._convertToXCellCoord=function(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))},dr.prototype._convertToYCellCoord=function(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))},dr.prototype._circlesCollide=function(i,s,o,c,d,v){var x=c-i,E=d-s,P=o+v;return P*P>x*x+E*E},dr.prototype._circleAndRectCollide=function(i,s,o,c,d,v,x){var E=(v-c)/2,P=Math.abs(i-(c+E));if(P>E+o)return!1;var z=(x-d)/2,N=Math.abs(s-(d+z));if(N>z+o)return!1;if(P<=E||N<=z)return!0;var V=P-E,q=N-z;return V*V+q*q<=o*o};var _s=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ti(i,s){for(var o=0;o<i;o++){var c=s.length;s.resize(c+4),s.float32.set(_s,3*c)}}function kn(i,s,o){var c=s[0],d=s[1];return i[0]=o[0]*c+o[4]*d+o[12],i[1]=o[1]*c+o[5]*d+o[13],i[3]=o[3]*c+o[7]*d+o[15],i}var Si=function(i,s,o){s===void 0&&(s=new dr(i.width+200,i.height+200,25)),o===void 0&&(o=new dr(i.width+200,i.height+200,25)),this.transform=i,this.grid=s,this.ignoredGrid=o,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+100,this.screenBottomBoundary=i.height+100,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200};function Nr(i,s,o){return s*(l.EXTENT/(i.tileSize*Math.pow(2,o-i.tileID.overscaledZ)))}Si.prototype.placeCollisionBox=function(i,s,o,c,d){var v=this.projectAndGetPerspectiveRatio(c,i.anchorPointX,i.anchorPointY),x=o*v.perspectiveRatio,E=i.x1*x+v.point.x,P=i.y1*x+v.point.y,z=i.x2*x+v.point.x,N=i.y2*x+v.point.y;return!this.isInsideGrid(E,P,z,N)||!s&&this.grid.hitTest(E,P,z,N,d)?{box:[],offscreen:!1}:{box:[E,P,z,N],offscreen:this.isOffscreen(E,P,z,N)}},Si.prototype.placeCollisionCircles=function(i,s,o,c,d,v,x,E,P,z,N,V,q){var $=[],H=new l.Point(s.anchorX,s.anchorY),te=Pt(H,v),G=cr(this.transform.cameraToCenterDistance,te.signedDistanceFromCamera),ee=(z?d/G:d*G)/l.ONE_EM,se=Pt(H,x).point,ye=Br(ee,c,s.lineOffsetX*ee,s.lineOffsetY*ee,!1,se,H,s,o,x,{}),Ce=!1,we=!1,Ie=!0;if(ye){for(var De=.5*V*G+q,qe=new l.Point(-100,-100),je=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),ot=new On,xt=ye.first,Ct=ye.last,Et=[],hr=xt.path.length-1;hr>=1;hr--)Et.push(xt.path[hr]);for(var ut=1;ut<Ct.path.length;ut++)Et.push(Ct.path[ut]);var Nt=2.5*De;if(E){var Wt=Et.map(function(zo){return Pt(zo,E)});Et=Wt.some(function(zo){return zo.signedDistanceFromCamera<=0})?[]:Wt.map(function(zo){return zo.point})}var Bt=[];if(Et.length>0){for(var Ft=Et[0].clone(),Gt=Et[0].clone(),Dt=1;Dt<Et.length;Dt++)Ft.x=Math.min(Ft.x,Et[Dt].x),Ft.y=Math.min(Ft.y,Et[Dt].y),Gt.x=Math.max(Gt.x,Et[Dt].x),Gt.y=Math.max(Gt.y,Et[Dt].y);Bt=Ft.x>=qe.x&&Gt.x<=je.x&&Ft.y>=qe.y&&Gt.y<=je.y?[Et]:Gt.x<qe.x||Ft.x>je.x||Gt.y<qe.y||Ft.y>je.y?[]:l.clipLine([Et],qe.x,qe.y,je.x,je.y)}for(var kt=0,Rn=Bt;kt<Rn.length;kt+=1){var pn;ot.reset(Rn[kt],.25*De),pn=ot.length<=.5*De?1:Math.ceil(ot.paddedLength/Nt)+1;for(var ui=0;ui<pn;ui++){var Kn=ui/Math.max(pn-1,1),an=ot.lerp(Kn),yn=an.x+100,eo=an.y+100;$.push(yn,eo,De,0);var yi=yn-De,es=eo-De,Pi=yn+De,Jo=eo+De;if(Ie=Ie&&this.isOffscreen(yi,es,Pi,Jo),we=we||this.isInsideGrid(yi,es,Pi,Jo),!i&&this.grid.hitTestCircle(yn,eo,De,N)&&(Ce=!0,!P))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!P&&Ce||!we?[]:$,offscreen:Ie,collisionDetected:Ce}},Si.prototype.queryRenderedSymbols=function(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],o=1/0,c=1/0,d=-1/0,v=-1/0,x=0,E=i;x<E.length;x+=1){var P=E[x],z=new l.Point(P.x+100,P.y+100);o=Math.min(o,z.x),c=Math.min(c,z.y),d=Math.max(d,z.x),v=Math.max(v,z.y),s.push(z)}for(var N={},V={},q=0,$=this.grid.query(o,c,d,v).concat(this.ignoredGrid.query(o,c,d,v));q<$.length;q+=1){var H=$[q],te=H.key;if(N[te.bucketInstanceId]===void 0&&(N[te.bucketInstanceId]={}),!N[te.bucketInstanceId][te.featureIndex]){var G=[new l.Point(H.x1,H.y1),new l.Point(H.x2,H.y1),new l.Point(H.x2,H.y2),new l.Point(H.x1,H.y2)];l.polygonIntersectsPolygon(s,G)&&(N[te.bucketInstanceId][te.featureIndex]=!0,V[te.bucketInstanceId]===void 0&&(V[te.bucketInstanceId]=[]),V[te.bucketInstanceId].push(te.featureIndex))}}return V},Si.prototype.insertCollisionBox=function(i,s,o,c,d){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:o,featureIndex:c,collisionGroupID:d},i[0],i[1],i[2],i[3])},Si.prototype.insertCollisionCircles=function(i,s,o,c,d){for(var v=s?this.ignoredGrid:this.grid,x={bucketInstanceId:o,featureIndex:c,collisionGroupID:d},E=0;E<i.length;E+=4)v.insertCircle(x,i[E],i[E+1],i[E+2])},Si.prototype.projectAndGetPerspectiveRatio=function(i,s,o){var c=[s,o,0,1];return kn(c,c,i),{point:new l.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},Si.prototype.isOffscreen=function(i,s,o,c){return o<100||i>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},Si.prototype.isInsideGrid=function(i,s,o,c){return o>=0&&i<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},Si.prototype.getViewportMatrix=function(){var i=l.identity([]);return l.translate(i,i,[-100,-100,0]),i};var uo=function(i,s,o,c){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?s:-s))):c&&o?1:0,this.placed=o};uo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Ei=function(i,s,o,c,d){this.text=new uo(i?i.text:null,s,o,d),this.icon=new uo(i?i.icon:null,s,c,d)};Ei.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var yl=function(i,s,o){this.text=i,this.icon=s,this.skipFade=o},Ci=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},b=function(i,s,o,c,d){this.bucketInstanceId=i,this.featureIndex=s,this.sourceLayerIndex=o,this.bucketIndex=c,this.tileID=d},T=function(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}};function R(i,s,o,c,d){var v=l.getAnchorAlignment(i),x=-(v.horizontalAlign-.5)*s,E=-(v.verticalAlign-.5)*o,P=l.evaluateVariableOffset(i,c);return new l.Point(x+P[0]*d,E+P[1]*d)}function oe(i,s,o,c,d,v){var x=i.x1,E=i.x2,P=i.y1,z=i.y2,N=i.anchorPointX,V=i.anchorPointY,q=new l.Point(s,o);return c&&q._rotate(d?v:-v),{x1:x+q.x,y1:P+q.y,x2:E+q.x,y2:z+q.y,anchorPointX:N,anchorPointY:V}}T.prototype.get=function(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){var s=++this.maxGroupID;this.collisionGroups[i]={ID:s,predicate:function(o){return o.collisionGroupID===s}}}return this.collisionGroups[i]};var ve=function(i,s,o,c){this.transform=i.clone(),this.collisionIndex=new Si(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new T(o),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function fe(i,s,o,c,d){i.emplaceBack(s?1:0,o?1:0,c||0,d||0),i.emplaceBack(s?1:0,o?1:0,c||0,d||0),i.emplaceBack(s?1:0,o?1:0,c||0,d||0),i.emplaceBack(s?1:0,o?1:0,c||0,d||0)}ve.prototype.getBucketParts=function(i,s,o,c){var d=o.getBucket(s),v=o.latestFeatureIndex;if(d&&v&&s.id===d.layerIds[0]){var x=o.collisionBoxArray,E=d.layers[0].layout,P=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),z=o.tileSize/l.EXTENT,N=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),V=E.get("text-pitch-alignment")==="map",q=E.get("text-rotation-alignment")==="map",$=Nr(o,1,this.transform.zoom),H=Qr(N,V,q,this.transform,$),te=null;if(V){var G=xr(N,V,q,this.transform,$);te=l.multiply([],this.transform.labelPlaneMatrix,G)}this.retainedQueryData[d.bucketInstanceId]=new b(d.bucketInstanceId,v,d.sourceLayerIndex,d.index,o.tileID);var ee={bucket:d,layout:E,posMatrix:N,textLabelPlaneMatrix:H,labelToScreenMatrix:te,scale:P,textPixelRatio:z,holdingForFade:o.holdingForFade(),collisionBoxArray:x,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(d.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(d.sourceID)};if(c)for(var se=0,ye=d.sortKeyRanges;se<ye.length;se+=1){var Ce=ye[se];i.push({sortKey:Ce.sortKey,symbolInstanceStart:Ce.symbolInstanceStart,symbolInstanceEnd:Ce.symbolInstanceEnd,parameters:ee})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:d.symbolInstances.length,parameters:ee})}},ve.prototype.attemptAnchorPlacement=function(i,s,o,c,d,v,x,E,P,z,N,V,q,$,H){var te,G=[V.textOffset0,V.textOffset1],ee=R(i,o,c,G,d),se=this.collisionIndex.placeCollisionBox(oe(s,ee.x,ee.y,v,x,this.transform.angle),N,E,P,z.predicate);if(!H||this.collisionIndex.placeCollisionBox(oe(H,ee.x,ee.y,v,x,this.transform.angle),N,E,P,z.predicate).box.length!==0)return se.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID].text&&(te=this.prevPlacement.variableOffsets[V.crossTileID].anchor),this.variableOffsets[V.crossTileID]={textOffset:G,width:o,height:c,anchor:i,textBoxScale:d,prevAnchor:te},this.markUsedJustification(q,i,V,$),q.allowVerticalPlacement&&(this.markUsedOrientation(q,$,V),this.placedOrientations[V.crossTileID]=$),{shift:ee,placedGlyphBoxes:se}):void 0},ve.prototype.placeLayerBucketPart=function(i,s,o){var c=this,d=i.parameters,v=d.bucket,x=d.layout,E=d.posMatrix,P=d.textLabelPlaneMatrix,z=d.labelToScreenMatrix,N=d.textPixelRatio,V=d.holdingForFade,q=d.collisionBoxArray,$=d.partiallyEvaluatedTextSize,H=d.collisionGroup,te=x.get("text-optional"),G=x.get("icon-optional"),ee=x.get("text-allow-overlap"),se=x.get("icon-allow-overlap"),ye=x.get("text-rotation-alignment")==="map",Ce=x.get("text-pitch-alignment")==="map",we=x.get("icon-text-fit")!=="none",Ie=x.get("symbol-z-order")==="viewport-y",De=ee&&(se||!v.hasIconData()||G),qe=se&&(ee||!v.hasTextData()||te);!v.collisionArrays&&q&&v.deserializeCollisionBoxes(q);var je=function(ut,Nt){if(!s[ut.crossTileID])if(V)c.placements[ut.crossTileID]=new yl(!1,!1,!1);else{var Wt,Bt=!1,Ft=!1,Gt=!0,Dt=null,kt={box:null,offscreen:null},Rn={box:null,offscreen:null},pn=null,ui=null,Kn=0,an=0,yn=0;Nt.textFeatureIndex?Kn=Nt.textFeatureIndex:ut.useRuntimeCollisionCircles&&(Kn=ut.featureIndex),Nt.verticalTextFeatureIndex&&(an=Nt.verticalTextFeatureIndex);var eo=Nt.textBox;if(eo){var yi=function(_r){var yo=l.WritingMode.horizontal;if(v.allowVerticalPlacement&&!_r&&c.prevPlacement){var ki=c.prevPlacement.placedOrientations[ut.crossTileID];ki&&(c.placedOrientations[ut.crossTileID]=ki,c.markUsedOrientation(v,yo=ki,ut))}return yo},es=function(_r,yo){if(v.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&Nt.verticalTextBox)for(var ki=0,Ls=v.writingModes;ki<Ls.length&&(Ls[ki]===l.WritingMode.vertical?(kt=yo(),Rn=kt):kt=_r(),!(kt&&kt.box&&kt.box.length));ki+=1);else kt=_r()};if(x.get("text-variable-anchor")){var Pi=x.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[ut.crossTileID]){var Jo=c.prevPlacement.variableOffsets[ut.crossTileID];Pi.indexOf(Jo.anchor)>0&&(Pi=Pi.filter(function(_r){return _r!==Jo.anchor})).unshift(Jo.anchor)}var zo=function(_r,yo,ki){for(var Ls=_r.x2-_r.x1,_d=_r.y2-_r.y1,Fl=ut.textBoxScale,xd=we&&!se?yo:null,Xu={box:[],offscreen:!1},Sh=ee?2*Pi.length:Pi.length,iu=0;iu<Sh;++iu){var Rl=c.attemptAnchorPlacement(Pi[iu%Pi.length],_r,Ls,_d,Fl,ye,Ce,N,E,H,iu>=Pi.length,ut,v,ki,xd);if(Rl&&(Xu=Rl.placedGlyphBoxes)&&Xu.box&&Xu.box.length){Bt=!0,Dt=Rl.shift;break}}return Xu};es(function(){return zo(eo,Nt.iconBox,l.WritingMode.horizontal)},function(){var _r=Nt.verticalTextBox;return v.allowVerticalPlacement&&!(kt&&kt.box&&kt.box.length)&&ut.numVerticalGlyphVertices>0&&_r?zo(_r,Nt.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),kt&&(Bt=kt.box,Gt=kt.offscreen);var Zu=yi(kt&&kt.box);if(!Bt&&c.prevPlacement){var ru=c.prevPlacement.variableOffsets[ut.crossTileID];ru&&(c.variableOffsets[ut.crossTileID]=ru,c.markUsedJustification(v,ru.anchor,ut,Zu))}}else{var ts=function(_r,yo){var ki=c.collisionIndex.placeCollisionBox(_r,ee,N,E,H.predicate);return ki&&ki.box&&ki.box.length&&(c.markUsedOrientation(v,yo,ut),c.placedOrientations[ut.crossTileID]=yo),ki};es(function(){return ts(eo,l.WritingMode.horizontal)},function(){var _r=Nt.verticalTextBox;return v.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&_r?ts(_r,l.WritingMode.vertical):{box:null,offscreen:null}}),yi(kt&&kt.box&&kt.box.length)}}if(Bt=(Wt=kt)&&Wt.box&&Wt.box.length>0,Gt=Wt&&Wt.offscreen,ut.useRuntimeCollisionCircles){var nu=v.text.placedSymbolArray.get(ut.centerJustifiedTextSymbolIndex),Gu=l.evaluateSizeForFeature(v.textSizeData,$,nu),fa=x.get("text-padding");pn=c.collisionIndex.placeCollisionCircles(ee,nu,v.lineVertexArray,v.glyphOffsetArray,Gu,E,P,z,o,Ce,H.predicate,ut.collisionCircleDiameter,fa),Bt=ee||pn.circles.length>0&&!pn.collisionDetected,Gt=Gt&&pn.offscreen}if(Nt.iconFeatureIndex&&(yn=Nt.iconFeatureIndex),Nt.iconBox){var Wu=function(_r){var yo=we&&Dt?oe(_r,Dt.x,Dt.y,ye,Ce,c.transform.angle):_r;return c.collisionIndex.placeCollisionBox(yo,se,N,E,H.predicate)};Ft=Rn&&Rn.box&&Rn.box.length&&Nt.verticalIconBox?(ui=Wu(Nt.verticalIconBox)).box.length>0:(ui=Wu(Nt.iconBox)).box.length>0,Gt=Gt&&ui.offscreen}var da=te||ut.numHorizontalGlyphVertices===0&&ut.numVerticalGlyphVertices===0,Bn=G||ut.numIconVertices===0;if(da||Bn?Bn?da||(Ft=Ft&&Bt):Bt=Ft&&Bt:Ft=Bt=Ft&&Bt,Bt&&Wt&&Wt.box&&c.collisionIndex.insertCollisionBox(Wt.box,x.get("text-ignore-placement"),v.bucketInstanceId,Rn&&Rn.box&&an?an:Kn,H.ID),Ft&&ui&&c.collisionIndex.insertCollisionBox(ui.box,x.get("icon-ignore-placement"),v.bucketInstanceId,yn,H.ID),pn&&(Bt&&c.collisionIndex.insertCollisionCircles(pn.circles,x.get("text-ignore-placement"),v.bucketInstanceId,Kn,H.ID),o)){var Ra=v.bucketInstanceId,rs=c.collisionCircleArrays[Ra];rs===void 0&&(rs=c.collisionCircleArrays[Ra]=new Ci);for(var zs=0;zs<pn.circles.length;zs+=4)rs.circles.push(pn.circles[zs+0]),rs.circles.push(pn.circles[zs+1]),rs.circles.push(pn.circles[zs+2]),rs.circles.push(pn.collisionDetected?1:0)}c.placements[ut.crossTileID]=new yl(Bt||De,Ft||qe,Gt||v.justReloaded),s[ut.crossTileID]=!0}};if(Ie)for(var ot=v.getSortedSymbolIndexes(this.transform.angle),xt=ot.length-1;xt>=0;--xt){var Ct=ot[xt];je(v.symbolInstances.get(Ct),v.collisionArrays[Ct])}else for(var Et=i.symbolInstanceStart;Et<i.symbolInstanceEnd;Et++)je(v.symbolInstances.get(Et),v.collisionArrays[Et]);if(o&&v.bucketInstanceId in this.collisionCircleArrays){var hr=this.collisionCircleArrays[v.bucketInstanceId];l.invert(hr.invProjMatrix,E),hr.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1},ve.prototype.markUsedJustification=function(i,s,o,c){var d;d=c===l.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(s)];for(var v=0,x=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];v<x.length;v+=1){var E=x[v];E>=0&&(i.text.placedSymbolArray.get(E).crossTileID=d>=0&&E!==d?0:o.crossTileID)}},ve.prototype.markUsedOrientation=function(i,s,o){for(var c=s===l.WritingMode.horizontal||s===l.WritingMode.horizontalOnly?s:0,d=s===l.WritingMode.vertical?s:0,v=0,x=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];v<x.length;v+=1)i.text.placedSymbolArray.get(x[v]).placedOrientation=c;o.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=d)},ve.prototype.commit=function(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,o=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(i):1,d=s?s.opacities:{},v=s?s.variableOffsets:{},x=s?s.placedOrientations:{};for(var E in this.placements){var P=this.placements[E],z=d[E];z?(this.opacities[E]=new Ei(z,c,P.text,P.icon),o=o||P.text!==z.text.placed||P.icon!==z.icon.placed):(this.opacities[E]=new Ei(null,c,P.text,P.icon,P.skipFade),o=o||P.text||P.icon)}for(var N in d){var V=d[N];if(!this.opacities[N]){var q=new Ei(V,c,!1,!1);q.isHidden()||(this.opacities[N]=q,o=o||V.text.placed||V.icon.placed)}}for(var $ in v)this.variableOffsets[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.variableOffsets[$]=v[$]);for(var H in x)this.placedOrientations[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.placedOrientations[H]=x[H]);o?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:i)},ve.prototype.updateLayerOpacities=function(i,s){for(var o={},c=0,d=s;c<d.length;c+=1){var v=d[c],x=v.getBucket(i);x&&v.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,o,v.collisionBoxArray)}},ve.prototype.updateBucketOpacities=function(i,s,o){var c=this;i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();var d=i.layers[0].layout,v=new Ei(null,0,!1,!1,!0),x=d.get("text-allow-overlap"),E=d.get("icon-allow-overlap"),P=d.get("text-variable-anchor"),z=d.get("text-rotation-alignment")==="map",N=d.get("text-pitch-alignment")==="map",V=d.get("icon-text-fit")!=="none",q=new Ei(null,0,x&&(E||!i.hasIconData()||d.get("icon-optional")),E&&(x||!i.hasTextData()||d.get("text-optional")),!0);!i.collisionArrays&&o&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(o);for(var $=function(ee,se,ye){for(var Ce=0;Ce<se/4;Ce++)ee.opacityVertexArray.emplaceBack(ye)},H=function(ee){var se=i.symbolInstances.get(ee),ye=se.numHorizontalGlyphVertices,Ce=se.numVerticalGlyphVertices,we=se.crossTileID,Ie=c.opacities[we];s[we]?Ie=v:Ie||(c.opacities[we]=Ie=q),s[we]=!0;var De=se.numIconVertices>0,qe=c.placedOrientations[se.crossTileID],je=qe===l.WritingMode.vertical,ot=qe===l.WritingMode.horizontal||qe===l.WritingMode.horizontalOnly;if(ye>0||Ce>0){var xt=zt(Ie.text);$(i.text,ye,je?Rt:xt),$(i.text,Ce,ot?Rt:xt);var Ct=Ie.text.isHidden();[se.rightJustifiedTextSymbolIndex,se.centerJustifiedTextSymbolIndex,se.leftJustifiedTextSymbolIndex].forEach(function(kt){kt>=0&&(i.text.placedSymbolArray.get(kt).hidden=Ct||je?1:0)}),se.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(se.verticalPlacedTextSymbolIndex).hidden=Ct||ot?1:0);var Et=c.variableOffsets[se.crossTileID];Et&&c.markUsedJustification(i,Et.anchor,se,qe);var hr=c.placedOrientations[se.crossTileID];hr&&(c.markUsedJustification(i,"left",se,hr),c.markUsedOrientation(i,hr,se))}if(De){var ut=zt(Ie.icon),Nt=!(V&&se.verticalPlacedIconSymbolIndex&&je);se.placedIconSymbolIndex>=0&&($(i.icon,se.numIconVertices,Nt?ut:Rt),i.icon.placedSymbolArray.get(se.placedIconSymbolIndex).hidden=Ie.icon.isHidden()),se.verticalPlacedIconSymbolIndex>=0&&($(i.icon,se.numVerticalIconVertices,Nt?Rt:ut),i.icon.placedSymbolArray.get(se.verticalPlacedIconSymbolIndex).hidden=Ie.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){var Wt=i.collisionArrays[ee];if(Wt){var Bt=new l.Point(0,0);if(Wt.textBox||Wt.verticalTextBox){var Ft=!0;if(P){var Gt=c.variableOffsets[we];Gt?(Bt=R(Gt.anchor,Gt.width,Gt.height,Gt.textOffset,Gt.textBoxScale),z&&Bt._rotate(N?c.transform.angle:-c.transform.angle)):Ft=!1}Wt.textBox&&fe(i.textCollisionBox.collisionVertexArray,Ie.text.placed,!Ft||je,Bt.x,Bt.y),Wt.verticalTextBox&&fe(i.textCollisionBox.collisionVertexArray,Ie.text.placed,!Ft||ot,Bt.x,Bt.y)}var Dt=Boolean(!ot&&Wt.verticalIconBox);Wt.iconBox&&fe(i.iconCollisionBox.collisionVertexArray,Ie.icon.placed,Dt,V?Bt.x:0,V?Bt.y:0),Wt.verticalIconBox&&fe(i.iconCollisionBox.collisionVertexArray,Ie.icon.placed,!Dt,V?Bt.x:0,V?Bt.y:0)}}},te=0;te<i.symbolInstances.length;te++)H(te);if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){var G=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=G.invProjMatrix,i.placementViewportMatrix=G.viewportMatrix,i.collisionCircleArray=G.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}},ve.prototype.symbolFadeChange=function(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ve.prototype.zoomAdjustment=function(i){return Math.max(0,(this.transform.zoom-i)/1.5)},ve.prototype.hasTransitions=function(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration},ve.prototype.stillRecent=function(i,s){var o=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*o>i},ve.prototype.setStale=function(){this.stale=!0};var _e=Math.pow(2,25),Ve=Math.pow(2,24),Ue=Math.pow(2,17),ct=Math.pow(2,16),be=Math.pow(2,9),it=Math.pow(2,8),ht=Math.pow(2,1);function zt(i){if(i.opacity===0&&!i.placed)return 0;if(i.opacity===1&&i.placed)return 4294967295;var s=i.placed?1:0,o=Math.floor(127*i.opacity);return o*_e+s*Ve+o*Ue+s*ct+o*be+s*it+o*ht+s}var Rt=0,nn=function(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};nn.prototype.continuePlacement=function(i,s,o,c,d){for(var v=this._bucketParts;this._currentTileIndex<i.length;)if(s.getBucketParts(v,c,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,d())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,v.sort(function(x,E){return x.sortKey-E.sortKey}));this._currentPartIndex<v.length;)if(s.placeLayerBucketPart(v[this._currentPartIndex],this._seenCrossTileIDs,o),this._currentPartIndex++,d())return!0;return!1};var ze=function(i,s,o,c,d,v,x){this.placement=new ve(i,d,v,x),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=c,this._done=!1};ze.prototype.isDone=function(){return this._done},ze.prototype.continuePlacement=function(i,s,o){for(var c=this,d=l.browser.now(),v=function(){var P=l.browser.now()-d;return!c._forceFullPlacement&&P>2};this._currentPlacementIndex>=0;){var x=s[i[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=E)&&(!x.maxzoom||x.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new nn(x)),this._inProgressLayer.continuePlacement(o[x.source],this.placement,this._showCollisionBoxes,x,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ze.prototype.commit=function(i){return this.placement.commit(i),this.placement};var mt=512/l.EXTENT/2,Sr=function(i,s,o){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var c=0;c<s.length;c++){var d=s.get(c),v=d.key;this.indexedSymbolInstances[v]||(this.indexedSymbolInstances[v]=[]),this.indexedSymbolInstances[v].push({crossTileID:d.crossTileID,coord:this.getScaledCoordinates(d,i)})}};Sr.prototype.getScaledCoordinates=function(i,s){var o=mt/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*l.EXTENT+i.anchorX)*o),y:Math.floor((s.canonical.y*l.EXTENT+i.anchorY)*o)}},Sr.prototype.findMatches=function(i,s,o){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),d=0;d<i.length;d++){var v=i.get(d);if(!v.crossTileID){var x=this.indexedSymbolInstances[v.key];if(x)for(var E=this.getScaledCoordinates(v,s),P=0,z=x;P<z.length;P+=1){var N=z[P];if(Math.abs(N.coord.x-E.x)<=c&&Math.abs(N.coord.y-E.y)<=c&&!o[N.crossTileID]){o[N.crossTileID]=!0,v.crossTileID=N.crossTileID;break}}}}};var rr=function(){this.maxCrossTileID=0};rr.prototype.generate=function(){return++this.maxCrossTileID};var kr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};kr.prototype.handleWrapJump=function(i){var s=Math.round((i-this.lng)/360);if(s!==0)for(var o in this.indexes){var c=this.indexes[o],d={};for(var v in c){var x=c[v];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+s),d[x.tileID.key]=x}this.indexes[o]=d}this.lng=i},kr.prototype.addBucket=function(i,s,o){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});var d=this.usedCrossTileIDs[i.overscaledZ];for(var v in this.indexes){var x=this.indexes[v];if(Number(v)>i.overscaledZ)for(var E in x){var P=x[E];P.tileID.isChildOf(i)&&P.findMatches(s.symbolInstances,i,d)}else{var z=x[i.scaledTo(Number(v)).key];z&&z.findMatches(s.symbolInstances,i,d)}}for(var N=0;N<s.symbolInstances.length;N++){var V=s.symbolInstances.get(N);V.crossTileID||(V.crossTileID=o.generate(),d[V.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Sr(i,s.symbolInstances,s.bucketInstanceId),!0},kr.prototype.removeBucketCrossTileIDs=function(i,s){for(var o in s.indexedSymbolInstances)for(var c=0,d=s.indexedSymbolInstances[o];c<d.length;c+=1)delete this.usedCrossTileIDs[i][d[c].crossTileID]},kr.prototype.removeStaleBuckets=function(i){var s=!1;for(var o in this.indexes){var c=this.indexes[o];for(var d in c)i[c[d].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,c[d]),delete c[d],s=!0)}return s};var St=function(){this.layerIndexes={},this.crossTileIDs=new rr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};St.prototype.addLayer=function(i,s,o){var c=this.layerIndexes[i.id];c===void 0&&(c=this.layerIndexes[i.id]=new kr);var d=!1,v={};c.handleWrapJump(o);for(var x=0,E=s;x<E.length;x+=1){var P=E[x],z=P.getBucket(i);z&&i.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(P.tileID,z,this.crossTileIDs)&&(d=!0),v[z.bucketInstanceId]=!0)}return c.removeStaleBuckets(v)&&(d=!0),d},St.prototype.pruneUnusedLayers=function(i){var s={};for(var o in i.forEach(function(c){s[c]=!0}),this.layerIndexes)s[o]||delete this.layerIndexes[o]};var Ti=function(i,s){return l.emitValidationErrors(i,s&&s.filter(function(o){return o.identifier!=="source.canvas"}))},ai=l.pick(Xe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ar=l.pick(Xe,["setCenter","setZoom","setBearing","setPitch"]),fi=function(){var i={},s=l.styleSpec.$version;for(var o in l.styleSpec.$root){var c,d=l.styleSpec.$root[o];d.required&&(c=o==="version"?s:d.type==="array"?[]:{})!=null&&(i[o]=c)}return i}(),jr=function(i){function s(o,c){var d=this;c===void 0&&(c={}),i.call(this),this.map=o,this.dispatcher=new ir(Te(),this),this.imageManager=new le,this.imageManager.setEventedParent(this),this.glyphManager=new pt(o._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Ut(256,512),this.crossTileSymbolIndex=new St,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var v=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(x){v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},function(E,P){if(l.triggerPluginCompletionEvent(E),P&&P.every(function(N){return N}))for(var z in v.sourceCaches)v.sourceCaches[z].reload()})}),this.on("data",function(x){if(x.dataType==="source"&&x.sourceDataType==="metadata"){var E=d.sourceCaches[x.sourceId];if(E){var P=E.getSource();if(P&&P.vectorLayerIds)for(var z in d._layers){var N=d._layers[z];N.source===P.id&&d._validateLayer(N)}}}})}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.loadURL=function(o,c){var d=this;c===void 0&&(c={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var v=typeof c.validate=="boolean"?c.validate:!l.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,c.accessToken);var x=this.map._requestManager.transformRequest(o,l.ResourceType.Style);this._request=l.getJSON(x,function(E,P){d._request=null,E?d.fire(new l.ErrorEvent(E)):P&&d._load(P,v)})},s.prototype.loadJSON=function(o,c){var d=this;c===void 0&&(c={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){d._request=null,d._load(o,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(fi,!1)},s.prototype._load=function(o,c){if(!c||!Ti(this,l.validateStyle(o))){for(var d in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(d,o.sources[d],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var v=We(this.stylesheet.layers);this._order=v.map(function(z){return z.id}),this._layers={},this._serializedLayers={};for(var x=0,E=v;x<E.length;x+=1){var P=E[x];(P=l.createStyleLayer(P)).setEventedParent(this,{layer:{id:P.id}}),this._layers[P.id]=P,this._serializedLayers[P.id]=P.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Rr(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},s.prototype._loadSprite=function(o){var c=this;this._spriteRequest=function(d,v,x){var E,P,z,N=l.browser.devicePixelRatio>1?"@2x":"",V=l.getJSON(v.transformRequest(v.normalizeSpriteURL(d,N,".json"),l.ResourceType.SpriteJSON),function(H,te){V=null,z||(z=H,E=te,$())}),q=l.getImage(v.transformRequest(v.normalizeSpriteURL(d,N,".png"),l.ResourceType.SpriteImage),function(H,te){q=null,z||(z=H,P=te,$())});function $(){if(z)x(z);else if(E&&P){var H=l.browser.getImageData(P),te={};for(var G in E){var ee=E[G],se=ee.width,ye=ee.height,Ce=ee.x,we=ee.y,Ie=ee.sdf,De=ee.pixelRatio,qe=ee.stretchX,je=ee.stretchY,ot=ee.content,xt=new l.RGBAImage({width:se,height:ye});l.RGBAImage.copy(H,xt,{x:Ce,y:we},{x:0,y:0},{width:se,height:ye}),te[G]={data:xt,pixelRatio:De,sdf:Ie,stretchX:qe,stretchY:je,content:ot}}x(null,te)}}return{cancel:function(){V&&(V.cancel(),V=null),q&&(q.cancel(),q=null)}}}(o,this.map._requestManager,function(d,v){if(c._spriteRequest=null,d)c.fire(new l.ErrorEvent(d));else if(v)for(var x in v)c.imageManager.addImage(x,v[x]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new l.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(o){var c=this.sourceCaches[o.source];if(c){var d=o.sourceLayer;if(d){var v=c.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(d)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+d+'" does not exist on source "'+v.id+'" as specified by style layer "'+o.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(o){for(var c=[],d=0,v=o;d<v.length;d+=1){var x=this._layers[v[d]];x.type!=="custom"&&c.push(x.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(o){if(this._loaded){var c=this._changed;if(this._changed){var d=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);for(var x in(d.length||v.length)&&this._updateWorkerLayers(d,v),this._updatedSources){var E=this._updatedSources[x];E==="reload"?this._reloadSource(x):E==="clear"&&this._clearSource(x)}for(var P in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[P].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}var z={};for(var N in this.sourceCaches){var V=this.sourceCaches[N];z[N]=V.used,V.used=!1}for(var q=0,$=this._order;q<$.length;q+=1){var H=this._layers[$[q]];H.recalculate(o,this._availableImages),!H.isHidden(o.zoom)&&H.source&&(this.sourceCaches[H.source].used=!0)}for(var te in z){var G=this.sourceCaches[te];z[te]!==G.used&&G.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:te}))}this.light.recalculate(o),this.z=o.zoom,c&&this.fire(new l.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var o=Object.keys(this._changedImages);if(o.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}},s.prototype._updateWorkerLayers=function(o,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(o){var c=this;if(this._checkLoaded(),Ti(this,l.validateStyle(o)))return!1;(o=l.clone$1(o)).layers=We(o.layers);var d=function(x,E){if(!x)return[{command:Xe.setStyle,args:[E]}];var P=[];try{if(!l.deepEqual(x.version,E.version))return[{command:Xe.setStyle,args:[E]}];l.deepEqual(x.center,E.center)||P.push({command:Xe.setCenter,args:[E.center]}),l.deepEqual(x.zoom,E.zoom)||P.push({command:Xe.setZoom,args:[E.zoom]}),l.deepEqual(x.bearing,E.bearing)||P.push({command:Xe.setBearing,args:[E.bearing]}),l.deepEqual(x.pitch,E.pitch)||P.push({command:Xe.setPitch,args:[E.pitch]}),l.deepEqual(x.sprite,E.sprite)||P.push({command:Xe.setSprite,args:[E.sprite]}),l.deepEqual(x.glyphs,E.glyphs)||P.push({command:Xe.setGlyphs,args:[E.glyphs]}),l.deepEqual(x.transition,E.transition)||P.push({command:Xe.setTransition,args:[E.transition]}),l.deepEqual(x.light,E.light)||P.push({command:Xe.setLight,args:[E.light]});var z={},N=[];(function(q,$,H,te){var G;for(G in $=$||{},q=q||{})q.hasOwnProperty(G)&&($.hasOwnProperty(G)||Je(G,H,te));for(G in $)$.hasOwnProperty(G)&&(q.hasOwnProperty(G)?l.deepEqual(q[G],$[G])||(q[G].type==="geojson"&&$[G].type==="geojson"&&Cr(q,$,G)?H.push({command:Xe.setGeoJSONSourceData,args:[G,$[G].data]}):tr(G,$,H,te)):jt(G,$,H))})(x.sources,E.sources,N,z);var V=[];x.layers&&x.layers.forEach(function(q){z[q.source]?P.push({command:Xe.removeLayer,args:[q.id]}):V.push(q)}),P=P.concat(N),function(q,$,H){$=$||[];var te,G,ee,se,ye,Ce,we,Ie=(q=q||[]).map(lr),De=$.map(lr),qe=q.reduce(or,{}),je=$.reduce(or,{}),ot=Ie.slice(),xt=Object.create(null);for(te=0,G=0;te<Ie.length;te++)je.hasOwnProperty(ee=Ie[te])?G++:(H.push({command:Xe.removeLayer,args:[ee]}),ot.splice(ot.indexOf(ee,G),1));for(te=0,G=0;te<De.length;te++)ot[ot.length-1-te]!==(ee=De[De.length-1-te])&&(qe.hasOwnProperty(ee)?(H.push({command:Xe.removeLayer,args:[ee]}),ot.splice(ot.lastIndexOf(ee,ot.length-G),1)):G++,H.push({command:Xe.addLayer,args:[je[ee],Ce=ot[ot.length-te]]}),ot.splice(ot.length-te,0,ee),xt[ee]=!0);for(te=0;te<De.length;te++)if(se=qe[ee=De[te]],ye=je[ee],!xt[ee]&&!l.deepEqual(se,ye))if(l.deepEqual(se.source,ye.source)&&l.deepEqual(se["source-layer"],ye["source-layer"])&&l.deepEqual(se.type,ye.type)){for(we in Mt(se.layout,ye.layout,H,ee,null,Xe.setLayoutProperty),Mt(se.paint,ye.paint,H,ee,null,Xe.setPaintProperty),l.deepEqual(se.filter,ye.filter)||H.push({command:Xe.setFilter,args:[ee,ye.filter]}),l.deepEqual(se.minzoom,ye.minzoom)&&l.deepEqual(se.maxzoom,ye.maxzoom)||H.push({command:Xe.setLayerZoomRange,args:[ee,ye.minzoom,ye.maxzoom]}),se)se.hasOwnProperty(we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?Mt(se[we],ye[we],H,ee,we.slice(6),Xe.setPaintProperty):l.deepEqual(se[we],ye[we])||H.push({command:Xe.setLayerProperty,args:[ee,we,ye[we]]}));for(we in ye)ye.hasOwnProperty(we)&&!se.hasOwnProperty(we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?Mt(se[we],ye[we],H,ee,we.slice(6),Xe.setPaintProperty):l.deepEqual(se[we],ye[we])||H.push({command:Xe.setLayerProperty,args:[ee,we,ye[we]]}))}else H.push({command:Xe.removeLayer,args:[ee]}),Ce=ot[ot.lastIndexOf(ee)+1],H.push({command:Xe.addLayer,args:[ye,Ce]})}(V,E.layers,P)}catch(q){console.warn("Unable to compute style diff:",q),P=[{command:Xe.setStyle,args:[E]}]}return P}(this.serialize(),o).filter(function(x){return!(x.command in ar)});if(d.length===0)return!1;var v=d.filter(function(x){return!(x.command in ai)});if(v.length>0)throw new Error("Unimplemented: "+v.map(function(x){return x.command}).join(", ")+".");return d.forEach(function(x){x.command!=="setTransition"&&c[x.command].apply(c,x.args)}),this.stylesheet=o,!0},s.prototype.addImage=function(o,c){if(this.getImage(o))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(o,c),this._afterImageUpdated(o)},s.prototype.updateImage=function(o,c){this.imageManager.updateImage(o,c)},s.prototype.getImage=function(o){return this.imageManager.getImage(o)},s.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(o),this._afterImageUpdated(o)},s.prototype._afterImageUpdated=function(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(o,c,d){var v=this;if(d===void 0&&(d={}),this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(l.validateStyle.source,"sources."+o,c,null,d))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var x=this.sourceCaches[o]=new Y(o,c,this.dispatcher);x.style=this,x.setEventedParent(this,function(){return{isSourceLoaded:v.loaded(),source:x.serialize(),sourceId:o}}),x.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===o)return this.fire(new l.ErrorEvent(new Error('Source "'+o+'" cannot be removed while layer "'+c+'" is using it.')));var d=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],d.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),d.setEventedParent(null),d.clearTiles(),d.onRemove&&d.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(o,c){this._checkLoaded(),this.sourceCaches[o].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()},s.prototype.addLayer=function(o,c,d){d===void 0&&(d={}),this._checkLoaded();var v=o.id;if(this.getLayer(v))this.fire(new l.ErrorEvent(new Error('Layer with id "'+v+'" already exists on this map')));else{var x;if(o.type==="custom"){if(Ti(this,l.validateCustomStyleLayer(o)))return;x=l.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(v,o.source),o=l.clone$1(o),o=l.extend(o,{source:v})),this._validate(l.validateStyle.layer,"layers."+v,o,{arrayIndex:-1},d))return;x=l.createStyleLayer(o),this._validateLayer(x),x.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[x.id]=x.serialize()}var E=c?this._order.indexOf(c):this._order.length;if(c&&E===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(E,0,v),this._layerOrderChanged=!0,this._layers[v]=x,this._removedLayers[v]&&x.source&&x.type!=="custom"){var P=this._removedLayers[v];delete this._removedLayers[v],P.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}},s.prototype.moveLayer=function(o,c){if(this._checkLoaded(),this._changed=!0,this._layers[o]){if(o!==c){var d=this._order.indexOf(o);this._order.splice(d,1);var v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(v,0,o),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(o){this._checkLoaded();var c=this._layers[o];if(c){c.setEventedParent(null);var d=this._order.indexOf(o);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=c,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],c.onRemove&&c.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(o){return this._layers[o]},s.prototype.hasLayer=function(o){return o in this._layers},s.prototype.setLayerZoomRange=function(o,c,d){this._checkLoaded();var v=this.getLayer(o);v?v.minzoom===c&&v.maxzoom===d||(c!=null&&(v.minzoom=c),d!=null&&(v.maxzoom=d),this._updateLayer(v)):this.fire(new l.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(o,c,d){d===void 0&&(d={}),this._checkLoaded();var v=this.getLayer(o);if(v){if(!l.deepEqual(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(l.validateStyle.filter,"layers."+v.id+".filter",c,null,d)||(v.filter=l.clone$1(c),this._updateLayer(v)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(o){return l.clone$1(this.getLayer(o).filter)},s.prototype.setLayoutProperty=function(o,c,d,v){v===void 0&&(v={}),this._checkLoaded();var x=this.getLayer(o);x?l.deepEqual(x.getLayoutProperty(c),d)||(x.setLayoutProperty(c,d,v),this._updateLayer(x)):this.fire(new l.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(o,c){var d=this.getLayer(o);if(d)return d.getLayoutProperty(c);this.fire(new l.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(o,c,d,v){v===void 0&&(v={}),this._checkLoaded();var x=this.getLayer(o);x?l.deepEqual(x.getPaintProperty(c),d)||(x.setPaintProperty(c,d,v)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(o,c){return this.getLayer(o).getPaintProperty(c)},s.prototype.setFeatureState=function(o,c){this._checkLoaded();var d=o.source,v=o.sourceLayer,x=this.sourceCaches[d];if(x!==void 0){var E=x.getSource().type;E==="geojson"&&v?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||v?(o.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(v,o.id,c)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(o,c){this._checkLoaded();var d=o.source,v=this.sourceCaches[d];if(v!==void 0){var x=v.getSource().type,E=x==="vector"?o.sourceLayer:void 0;x!=="vector"||E?c&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(E,o.id,c):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(o){this._checkLoaded();var c=o.source,d=o.sourceLayer,v=this.sourceCaches[c];if(v!==void 0){if(v.getSource().type!=="vector"||d)return o.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),v.getFeatureState(d,o.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(o){return o.serialize()}),layers:this._serializeLayers(this._order)},function(o){return o!==void 0})},s.prototype._updateLayer=function(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(o){for(var c=this,d=function(qe){return c._layers[qe].type==="fill-extrusion"},v={},x=[],E=this._order.length-1;E>=0;E--){var P=this._order[E];if(d(P)){v[P]=E;for(var z=0,N=o;z<N.length;z+=1){var V=N[z][P];if(V)for(var q=0,$=V;q<$.length;q+=1)x.push($[q])}}}x.sort(function(qe,je){return je.intersectionZ-qe.intersectionZ});for(var H=[],te=this._order.length-1;te>=0;te--){var G=this._order[te];if(d(G))for(var ee=x.length-1;ee>=0;ee--){var se=x[ee].feature;if(v[se.layer.id]<te)break;H.push(se),x.pop()}else for(var ye=0,Ce=o;ye<Ce.length;ye+=1){var we=Ce[ye][G];if(we)for(var Ie=0,De=we;Ie<De.length;Ie+=1)H.push(De[Ie].feature)}}return H},s.prototype.queryRenderedFeatures=function(o,c,d){c&&c.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var v={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var x=0,E=c.layers;x<E.length;x+=1){var P=E[x],z=this._layers[P];if(!z)return this.fire(new l.ErrorEvent(new Error("The layer '"+P+"' does not exist in the map's style and cannot be queried for features."))),[];v[z.source]=!0}}var N=[];for(var V in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!v[V]||N.push(Jr(this.sourceCaches[V],this._layers,this._serializedLayers,o,c,d));return this.placement&&N.push(function(q,$,H,te,G,ee,se){for(var ye={},Ce=ee.queryRenderedSymbols(te),we=[],Ie=0,De=Object.keys(Ce).map(Number);Ie<De.length;Ie+=1)we.push(se[De[Ie]]);we.sort(ii);for(var qe=function(){var Et=ot[je],hr=Et.featureIndex.lookupSymbolFeatures(Ce[Et.bucketInstanceId],$,Et.bucketIndex,Et.sourceLayerIndex,G.filter,G.layers,G.availableImages,q);for(var ut in hr){var Nt=ye[ut]=ye[ut]||[],Wt=hr[ut];Wt.sort(function(Gt,Dt){var kt=Et.featureSortOrder;if(kt){var Rn=kt.indexOf(Gt.featureIndex);return kt.indexOf(Dt.featureIndex)-Rn}return Dt.featureIndex-Gt.featureIndex});for(var Bt=0,Ft=Wt;Bt<Ft.length;Bt+=1)Nt.push(Ft[Bt])}},je=0,ot=we;je<ot.length;je+=1)qe();var xt=function(Et){ye[Et].forEach(function(hr){var ut=hr.feature,Nt=H[q[Et].source].getFeatureState(ut.layer["source-layer"],ut.id);ut.source=ut.layer.source,ut.layer["source-layer"]&&(ut.sourceLayer=ut.layer["source-layer"]),ut.state=Nt})};for(var Ct in ye)xt(Ct);return ye}(this._layers,this._serializedLayers,this.sourceCaches,o,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(N)},s.prototype.querySourceFeatures=function(o,c){c&&c.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var d=this.sourceCaches[o];return d?function(v,x){for(var E=v.getRenderableIds().map(function($){return v.getTileByID($)}),P=[],z={},N=0;N<E.length;N++){var V=E[N],q=V.tileID.canonical.key;z[q]||(z[q]=!0,V.querySourceFeatures(P,x))}return P}(d,c):[]},s.prototype.addSourceType=function(o,c,d){return s.getSourceType(o)?d(new Error('A source type called "'+o+'" already exists.')):(s.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},d):d(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(o,c){c===void 0&&(c={}),this._checkLoaded();var d=this.light.getLight(),v=!1;for(var x in o)if(!l.deepEqual(o[x],d[x])){v=!0;break}if(v){var E={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,c),this.light.updateTransitions(E)}},s.prototype._validate=function(o,c,d,v,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&Ti(this,o.call(l.validateStyle,l.extend({key:c,style:this.serialize(),value:d,styleSpec:l.styleSpec},v)))},s.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(o){this.sourceCaches[o].clearTiles()},s.prototype._reloadSource=function(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()},s.prototype._updateSources=function(o){for(var c in this.sourceCaches)this.sourceCaches[c].update(o)},s.prototype._generateCollisionBoxes=function(){for(var o in this.sourceCaches)this._reloadSource(o)},s.prototype._updatePlacement=function(o,c,d,v,x){x===void 0&&(x=!1);for(var E=!1,P=!1,z={},N=0,V=this._order;N<V.length;N+=1){var q=this._layers[V[N]];if(q.type==="symbol"){if(!z[q.source]){var $=this.sourceCaches[q.source];z[q.source]=$.getRenderableIds(!0).map(function(se){return $.getTileByID(se)}).sort(function(se,ye){return ye.tileID.overscaledZ-se.tileID.overscaledZ||(se.tileID.isLessThan(ye.tileID)?-1:1)})}var H=this.crossTileSymbolIndex.addLayer(q,z[q.source],o.center.lng);E=E||H}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),o.zoom))&&(this.pauseablePlacement=new ze(o,this._order,x,c,d,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),P=!0),E&&this.pauseablePlacement.placement.setStale()),P||E)for(var te=0,G=this._order;te<G.length;te+=1){var ee=this._layers[G[te]];ee.type==="symbol"&&this.placement.updateLayerOpacities(ee,z[ee.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()},s.prototype.getImages=function(o,c,d){this.imageManager.getImages(c.icons,d),this._updateTilesForChangedImages();var v=this.sourceCaches[c.source];v&&v.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(o,c,d){this.glyphManager.getGlyphs(c.stacks,d)},s.prototype.getResource=function(o,c,d){return l.makeRequest(c,d)},s}(l.Evented);jr.getSourceType=function(i){return Zr[i]},jr.setSourceType=function(i,s){Zr[i]=s},jr.registerForPluginStateChange=l.registerForPluginStateChange;var tn=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ca=wr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),lo=wr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),vl=wr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),gl=wr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Mu=wr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ks=wr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Xa=wr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Hs=wr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),zu=wr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),_l=wr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ta=wr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Ka=wr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),xs=wr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),xl=wr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),bn=wr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ia=wr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Eo=wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Co=wr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Vo=wr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),co=wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ra=wr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Pa=wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),ka=wr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),na=wr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),wl=wr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Lu=wr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function wr(i,s){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),d=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=v?v.concat(d):d,E={};return{fragmentSource:i=i.replace(o,function(P,z,N,V,q){return E[q]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
varying `+N+" "+V+" "+q+`;
#else
uniform `+N+" "+V+" u_"+q+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+q+`
    `+N+" "+V+" "+q+" = u_"+q+`;
#endif
`}),vertexSource:s=s.replace(o,function(P,z,N,V,q){var $=V==="float"?"vec2":"vec4",H=q.match(/color/)?"color":$;return E[q]?z==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
uniform lowp float u_`+q+`_t;
attribute `+N+" "+$+" a_"+q+`;
varying `+N+" "+V+" "+q+`;
#else
uniform `+N+" "+V+" u_"+q+`;
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_`+q+`
    `+q+" = a_"+q+`;
#else
    `+N+" "+V+" "+q+" = u_"+q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+q+`
    `+q+" = unpack_mix_"+H+"(a_"+q+", u_"+q+`_t);
#else
    `+N+" "+V+" "+q+" = u_"+q+`;
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
uniform lowp float u_`+q+`_t;
attribute `+N+" "+$+" a_"+q+`;
#else
uniform `+N+" "+V+" u_"+q+`;
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_`+q+`
    `+N+" "+V+" "+q+" = a_"+q+`;
#else
    `+N+" "+V+" "+q+" = u_"+q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+q+`
    `+N+" "+V+" "+q+" = unpack_mix_"+H+"(a_"+q+", u_"+q+`_t);
#else
    `+N+" "+V+" "+q+" = u_"+q+`;
#endif
`}),staticAttributes:c,staticUniforms:x}}var Aa=Object.freeze({__proto__:null,prelude:Ca,background:lo,backgroundPattern:vl,circle:gl,clippingMask:Mu,heatmap:Ks,heatmapTexture:Xa,collisionBox:Hs,collisionCircle:zu,debug:_l,fill:Ta,fillOutline:Ka,fillOutlinePattern:xs,fillPattern:xl,fillExtrusion:bn,fillExtrusionPattern:Ia,hillshadePrepare:Eo,hillshade:Co,line:Vo,lineGradient:co,linePattern:ra,lineSDF:Pa,raster:ka,symbolIcon:na,symbolSDF:wl,symbolTextAndIcon:Lu}),qi=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function ia(i){for(var s=[],o=0;o<i.length;o++)if(i[o]!==null){var c=i[o].split(" ");s.push(c.pop())}return s}qi.prototype.bind=function(i,s,o,c,d,v,x,E){this.context=i;for(var P=this.boundPaintVertexBuffers.length!==c.length,z=0;!P&&z<c.length;z++)this.boundPaintVertexBuffers[z]!==c[z]&&(P=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===o&&!P&&this.boundIndexBuffer===d&&this.boundVertexOffset===v&&this.boundDynamicVertexBuffer===x&&this.boundDynamicVertexBuffer2===E?(i.bindVertexArrayOES.set(this.vao),x&&x.bind(),d&&d.dynamicDraw&&d.bind(),E&&E.bind()):this.freshBind(s,o,c,d,v,x,E)},qi.prototype.freshBind=function(i,s,o,c,d,v,x){var E,P=i.numAttributes,z=this.context,N=z.gl;if(z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=z.extVertexArrayObject.createVertexArrayOES(),z.bindVertexArrayOES.set(this.vao),E=0,this.boundProgram=i,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=c,this.boundVertexOffset=d,this.boundDynamicVertexBuffer=v,this.boundDynamicVertexBuffer2=x;else{E=z.currentNumAttributes||0;for(var V=P;V<E;V++)N.disableVertexAttribArray(V)}s.enableAttributes(N,i);for(var q=0,$=o;q<$.length;q+=1)$[q].enableAttributes(N,i);v&&v.enableAttributes(N,i),x&&x.enableAttributes(N,i),s.bind(),s.setVertexAttribPointers(N,i,d);for(var H=0,te=o;H<te.length;H+=1){var G=te[H];G.bind(),G.setVertexAttribPointers(N,i,d)}v&&(v.bind(),v.setVertexAttribPointers(N,i,d)),c&&c.bind(),x&&(x.bind(),x.setVertexAttribPointers(N,i,d)),z.currentNumAttributes=P},qi.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ws=function(i,s,o,c,d,v){var x=i.gl;this.program=x.createProgram();for(var E=ia(o.staticAttributes),P=c?c.getBinderAttributes():[],z=E.concat(P),N=o.staticUniforms?ia(o.staticUniforms):[],V=c?c.getBinderUniforms():[],q=[],$=0,H=N.concat(V);$<H.length;$+=1){var te=H[$];q.indexOf(te)<0&&q.push(te)}var G=c?c.defines():[];v&&G.push("#define OVERDRAW_INSPECTOR;");var ee=G.concat(Ca.fragmentSource,o.fragmentSource).join(`
`),se=G.concat(Ca.vertexSource,o.vertexSource).join(`
`),ye=x.createShader(x.FRAGMENT_SHADER);if(x.isContextLost())this.failedToCreate=!0;else{x.shaderSource(ye,ee),x.compileShader(ye),x.attachShader(this.program,ye);var Ce=x.createShader(x.VERTEX_SHADER);if(x.isContextLost())this.failedToCreate=!0;else{x.shaderSource(Ce,se),x.compileShader(Ce),x.attachShader(this.program,Ce),this.attributes={};var we={};this.numAttributes=z.length;for(var Ie=0;Ie<this.numAttributes;Ie++)z[Ie]&&(x.bindAttribLocation(this.program,Ie,z[Ie]),this.attributes[z[Ie]]=Ie);x.linkProgram(this.program),x.deleteShader(Ce),x.deleteShader(ye);for(var De=0;De<q.length;De++){var qe=q[De];if(qe&&!we[qe]){var je=x.getUniformLocation(this.program,qe);je&&(we[qe]=je)}}this.fixedUniforms=d(i,we),this.binderUniforms=c?c.getUniforms(i,we):[]}}};function qo(i,s,o){var c=1/Nr(o,1,s.transform.tileZoom),d=Math.pow(2,o.tileID.overscaledZ),v=o.tileSize*Math.pow(2,s.transform.tileZoom)/d,x=v*(o.tileID.canonical.x+o.tileID.wrap*d),E=v*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[c,i.fromScale,i.toScale],u_fade:i.t,u_pixel_coord_upper:[x>>16,E>>16],u_pixel_coord_lower:[65535&x,65535&E]}}ws.prototype.draw=function(i,s,o,c,d,v,x,E,P,z,N,V,q,$,H,te){var G,ee=i.gl;if(!this.failedToCreate){for(var se in i.program.set(this.program),i.setDepthMode(o),i.setStencilMode(c),i.setColorMode(d),i.setCullFace(v),this.fixedUniforms)this.fixedUniforms[se].set(x[se]);$&&$.setUniforms(i,this.binderUniforms,V,{zoom:q});for(var ye=(G={},G[ee.LINES]=2,G[ee.TRIANGLES]=3,G[ee.LINE_STRIP]=1,G)[s],Ce=0,we=N.get();Ce<we.length;Ce+=1){var Ie=we[Ce],De=Ie.vaos||(Ie.vaos={});(De[E]||(De[E]=new qi)).bind(i,this,P,$?$.getPaintVertexBuffers():[],z,Ie.vertexOffset,H,te),ee.drawElements(s,Ie.primitiveLength*ye,ee.UNSIGNED_SHORT,Ie.primitiveOffset*ye*2)}}};var bl=function(i,s,o,c){var d=s.style.light,v=d.properties.get("position"),x=[v.x,v.y,v.z],E=l.create$1();d.properties.get("anchor")==="viewport"&&l.fromRotation(E,-s.transform.angle),l.transformMat3(x,x,E);var P=d.properties.get("color");return{u_matrix:i,u_lightpos:x,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+o,u_opacity:c}},To=function(i,s,o,c,d,v,x){return l.extend(bl(i,s,o,c),qo(v,s,x),{u_height_factor:-Math.pow(2,d.overscaledZ)/x.tileSize/8})},Zi=function(i){return{u_matrix:i}},oa=function(i,s,o,c){return l.extend(Zi(i),qo(o,s,c))},Du=function(i,s){return{u_matrix:i,u_world:s}},Sl=function(i,s,o,c,d){return l.extend(oa(i,s,o,c),{u_world:d})},Ou=function(i,s,o,c){var d,v,x=i.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var E=Nr(o,1,x.zoom);d=!0,v=[E,E]}else d=!1,v=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:i.translatePosMatrix(s.posMatrix,o,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+d,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:v}},aa=function(i,s,o){var c=Nr(o,1,s.zoom),d=Math.pow(2,s.zoom-o.tileID.overscaledZ),v=o.tileID.overscaleFactor();return{u_matrix:i,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*d),s.pixelsToGLUnits[1]/(c*d)],u_overscale_factor:v}},Fu=function(i,s,o){return{u_matrix:i,u_inv_matrix:s,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}},Io=function(i,s,o){return o===void 0&&(o=1),{u_matrix:i,u_color:s,u_overlay:0,u_overlay_scale:o}},Gi=function(i){return{u_matrix:i}},El=function(i,s,o,c){return{u_matrix:i,u_extrude_scale:Nr(s,1,o),u_intensity:c}},Wi=function(i,s,o){var c=i.transform;return{u_matrix:bs(i,s,o),u_ratio:1/Nr(s,1,c.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Dr=function(i,s,o,c){return l.extend(Wi(i,s,o),{u_image:0,u_image_height:c})},Po=function(i,s,o,c){var d=i.transform,v=Ha(s,d);return{u_matrix:bs(i,s,o),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Nr(s,1,d.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[v,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Cl=function(i,s,o,c,d){var v=i.lineAtlas,x=Ha(s,i.transform),E=o.layout.get("line-cap")==="round",P=v.getDash(c.from,E),z=v.getDash(c.to,E),N=P.width*d.fromScale,V=z.width*d.toScale;return l.extend(Wi(i,s,o),{u_patternscale_a:[x/N,-P.height/2],u_patternscale_b:[x/V,-z.height/2],u_sdfgamma:v.width/(256*Math.min(N,V)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:z.y,u_mix:d.t})};function Ha(i,s){return 1/Nr(i,1,s.tileZoom)}function bs(i,s,o){return i.translatePosMatrix(s.tileID.posMatrix,s,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var Ru=function(i,s,o,c,d){return{u_matrix:i,u_tl_parent:s,u_scale_parent:o,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(x=d.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(v=d.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:Bu(d.paint.get("raster-hue-rotate"))};var v,x};function Bu(i){i*=Math.PI/180;var s=Math.sin(i),o=Math.cos(i);return[(2*o+1)/3,(-Math.sqrt(3)*s-o+1)/3,(Math.sqrt(3)*s-o+1)/3]}var Ss,Ma=function(i,s,o,c,d,v,x,E,P,z){var N=d.transform;return{u_is_size_zoom_constant:+(i==="constant"||i==="source"),u_is_size_feature_constant:+(i==="constant"||i==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:N.cameraToCenterDistance,u_pitch:N.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:N.width/N.height,u_fade_change:d.options.fadeDuration?d.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:x,u_coord_matrix:E,u_is_text:+P,u_pitch_with_map:+c,u_texsize:z,u_texture:0}},Zo=function(i,s,o,c,d,v,x,E,P,z,N){var V=d.transform;return l.extend(Ma(i,s,o,c,d,v,x,E,P,z),{u_gamma_scale:c?Math.cos(V._pitch)*V.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+N})},Es=function(i,s,o,c,d,v,x,E,P,z){return l.extend(Zo(i,s,o,c,d,v,x,E,!0,P,!0),{u_texsize_icon:z,u_texture_icon:1})},Cs=function(i,s,o){return{u_matrix:i,u_opacity:s,u_color:o}},de=function(i,s,o,c,d,v){return l.extend(function(x,E,P,z){var N=P.imageManager.getPattern(x.from.toString()),V=P.imageManager.getPattern(x.to.toString()),q=P.imageManager.getPixelSize(),$=q.width,H=q.height,te=Math.pow(2,z.tileID.overscaledZ),G=z.tileSize*Math.pow(2,P.transform.tileZoom)/te,ee=G*(z.tileID.canonical.x+z.tileID.wrap*te),se=G*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[$,H],u_mix:E.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Nr(z,1,P.transform.tileZoom),u_pixel_coord_upper:[ee>>16,se>>16],u_pixel_coord_lower:[65535&ee,65535&se]}}(c,v,o,d),{u_matrix:i,u_opacity:s})},ke={fillExtrusion:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_lightpos:new l.Uniform3f(i,s.u_lightpos),u_lightintensity:new l.Uniform1f(i,s.u_lightintensity),u_lightcolor:new l.Uniform3f(i,s.u_lightcolor),u_vertical_gradient:new l.Uniform1f(i,s.u_vertical_gradient),u_opacity:new l.Uniform1f(i,s.u_opacity)}},fillExtrusionPattern:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_lightpos:new l.Uniform3f(i,s.u_lightpos),u_lightintensity:new l.Uniform1f(i,s.u_lightintensity),u_lightcolor:new l.Uniform3f(i,s.u_lightcolor),u_vertical_gradient:new l.Uniform1f(i,s.u_vertical_gradient),u_height_factor:new l.Uniform1f(i,s.u_height_factor),u_image:new l.Uniform1i(i,s.u_image),u_texsize:new l.Uniform2f(i,s.u_texsize),u_pixel_coord_upper:new l.Uniform2f(i,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(i,s.u_pixel_coord_lower),u_scale:new l.Uniform3f(i,s.u_scale),u_fade:new l.Uniform1f(i,s.u_fade),u_opacity:new l.Uniform1f(i,s.u_opacity)}},fill:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix)}},fillPattern:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_image:new l.Uniform1i(i,s.u_image),u_texsize:new l.Uniform2f(i,s.u_texsize),u_pixel_coord_upper:new l.Uniform2f(i,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(i,s.u_pixel_coord_lower),u_scale:new l.Uniform3f(i,s.u_scale),u_fade:new l.Uniform1f(i,s.u_fade)}},fillOutline:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_world:new l.Uniform2f(i,s.u_world)}},fillOutlinePattern:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_world:new l.Uniform2f(i,s.u_world),u_image:new l.Uniform1i(i,s.u_image),u_texsize:new l.Uniform2f(i,s.u_texsize),u_pixel_coord_upper:new l.Uniform2f(i,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(i,s.u_pixel_coord_lower),u_scale:new l.Uniform3f(i,s.u_scale),u_fade:new l.Uniform1f(i,s.u_fade)}},circle:function(i,s){return{u_camera_to_center_distance:new l.Uniform1f(i,s.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(i,s.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(i,s.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(i,s.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(i,s.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(i,s.u_matrix)}},collisionBox:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_camera_to_center_distance:new l.Uniform1f(i,s.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(i,s.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(i,s.u_extrude_scale),u_overscale_factor:new l.Uniform1f(i,s.u_overscale_factor)}},collisionCircle:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_inv_matrix:new l.UniformMatrix4f(i,s.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(i,s.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(i,s.u_viewport_size)}},debug:function(i,s){return{u_color:new l.UniformColor(i,s.u_color),u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_overlay:new l.Uniform1i(i,s.u_overlay),u_overlay_scale:new l.Uniform1f(i,s.u_overlay_scale)}},clippingMask:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix)}},heatmap:function(i,s){return{u_extrude_scale:new l.Uniform1f(i,s.u_extrude_scale),u_intensity:new l.Uniform1f(i,s.u_intensity),u_matrix:new l.UniformMatrix4f(i,s.u_matrix)}},heatmapTexture:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_world:new l.Uniform2f(i,s.u_world),u_image:new l.Uniform1i(i,s.u_image),u_color_ramp:new l.Uniform1i(i,s.u_color_ramp),u_opacity:new l.Uniform1f(i,s.u_opacity)}},hillshade:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_image:new l.Uniform1i(i,s.u_image),u_latrange:new l.Uniform2f(i,s.u_latrange),u_light:new l.Uniform2f(i,s.u_light),u_shadow:new l.UniformColor(i,s.u_shadow),u_highlight:new l.UniformColor(i,s.u_highlight),u_accent:new l.UniformColor(i,s.u_accent)}},hillshadePrepare:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_image:new l.Uniform1i(i,s.u_image),u_dimension:new l.Uniform2f(i,s.u_dimension),u_zoom:new l.Uniform1f(i,s.u_zoom),u_unpack:new l.Uniform4f(i,s.u_unpack)}},line:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_ratio:new l.Uniform1f(i,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(i,s.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(i,s.u_units_to_pixels)}},lineGradient:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_ratio:new l.Uniform1f(i,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(i,s.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(i,s.u_units_to_pixels),u_image:new l.Uniform1i(i,s.u_image),u_image_height:new l.Uniform1f(i,s.u_image_height)}},linePattern:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_texsize:new l.Uniform2f(i,s.u_texsize),u_ratio:new l.Uniform1f(i,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(i,s.u_device_pixel_ratio),u_image:new l.Uniform1i(i,s.u_image),u_units_to_pixels:new l.Uniform2f(i,s.u_units_to_pixels),u_scale:new l.Uniform3f(i,s.u_scale),u_fade:new l.Uniform1f(i,s.u_fade)}},lineSDF:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_ratio:new l.Uniform1f(i,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(i,s.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(i,s.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(i,s.u_patternscale_a),u_patternscale_b:new l.Uniform2f(i,s.u_patternscale_b),u_sdfgamma:new l.Uniform1f(i,s.u_sdfgamma),u_image:new l.Uniform1i(i,s.u_image),u_tex_y_a:new l.Uniform1f(i,s.u_tex_y_a),u_tex_y_b:new l.Uniform1f(i,s.u_tex_y_b),u_mix:new l.Uniform1f(i,s.u_mix)}},raster:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_tl_parent:new l.Uniform2f(i,s.u_tl_parent),u_scale_parent:new l.Uniform1f(i,s.u_scale_parent),u_buffer_scale:new l.Uniform1f(i,s.u_buffer_scale),u_fade_t:new l.Uniform1f(i,s.u_fade_t),u_opacity:new l.Uniform1f(i,s.u_opacity),u_image0:new l.Uniform1i(i,s.u_image0),u_image1:new l.Uniform1i(i,s.u_image1),u_brightness_low:new l.Uniform1f(i,s.u_brightness_low),u_brightness_high:new l.Uniform1f(i,s.u_brightness_high),u_saturation_factor:new l.Uniform1f(i,s.u_saturation_factor),u_contrast_factor:new l.Uniform1f(i,s.u_contrast_factor),u_spin_weights:new l.Uniform3f(i,s.u_spin_weights)}},symbolIcon:function(i,s){return{u_is_size_zoom_constant:new l.Uniform1i(i,s.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(i,s.u_is_size_feature_constant),u_size_t:new l.Uniform1f(i,s.u_size_t),u_size:new l.Uniform1f(i,s.u_size),u_camera_to_center_distance:new l.Uniform1f(i,s.u_camera_to_center_distance),u_pitch:new l.Uniform1f(i,s.u_pitch),u_rotate_symbol:new l.Uniform1i(i,s.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(i,s.u_aspect_ratio),u_fade_change:new l.Uniform1f(i,s.u_fade_change),u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(i,s.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(i,s.u_coord_matrix),u_is_text:new l.Uniform1i(i,s.u_is_text),u_pitch_with_map:new l.Uniform1i(i,s.u_pitch_with_map),u_texsize:new l.Uniform2f(i,s.u_texsize),u_texture:new l.Uniform1i(i,s.u_texture)}},symbolSDF:function(i,s){return{u_is_size_zoom_constant:new l.Uniform1i(i,s.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(i,s.u_is_size_feature_constant),u_size_t:new l.Uniform1f(i,s.u_size_t),u_size:new l.Uniform1f(i,s.u_size),u_camera_to_center_distance:new l.Uniform1f(i,s.u_camera_to_center_distance),u_pitch:new l.Uniform1f(i,s.u_pitch),u_rotate_symbol:new l.Uniform1i(i,s.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(i,s.u_aspect_ratio),u_fade_change:new l.Uniform1f(i,s.u_fade_change),u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(i,s.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(i,s.u_coord_matrix),u_is_text:new l.Uniform1i(i,s.u_is_text),u_pitch_with_map:new l.Uniform1i(i,s.u_pitch_with_map),u_texsize:new l.Uniform2f(i,s.u_texsize),u_texture:new l.Uniform1i(i,s.u_texture),u_gamma_scale:new l.Uniform1f(i,s.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(i,s.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(i,s.u_is_halo)}},symbolTextAndIcon:function(i,s){return{u_is_size_zoom_constant:new l.Uniform1i(i,s.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(i,s.u_is_size_feature_constant),u_size_t:new l.Uniform1f(i,s.u_size_t),u_size:new l.Uniform1f(i,s.u_size),u_camera_to_center_distance:new l.Uniform1f(i,s.u_camera_to_center_distance),u_pitch:new l.Uniform1f(i,s.u_pitch),u_rotate_symbol:new l.Uniform1i(i,s.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(i,s.u_aspect_ratio),u_fade_change:new l.Uniform1f(i,s.u_fade_change),u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(i,s.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(i,s.u_coord_matrix),u_is_text:new l.Uniform1i(i,s.u_is_text),u_pitch_with_map:new l.Uniform1i(i,s.u_pitch_with_map),u_texsize:new l.Uniform2f(i,s.u_texsize),u_texsize_icon:new l.Uniform2f(i,s.u_texsize_icon),u_texture:new l.Uniform1i(i,s.u_texture),u_texture_icon:new l.Uniform1i(i,s.u_texture_icon),u_gamma_scale:new l.Uniform1f(i,s.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(i,s.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(i,s.u_is_halo)}},background:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_opacity:new l.Uniform1f(i,s.u_opacity),u_color:new l.UniformColor(i,s.u_color)}},backgroundPattern:function(i,s){return{u_matrix:new l.UniformMatrix4f(i,s.u_matrix),u_opacity:new l.Uniform1f(i,s.u_opacity),u_image:new l.Uniform1i(i,s.u_image),u_pattern_tl_a:new l.Uniform2f(i,s.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(i,s.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(i,s.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(i,s.u_pattern_br_b),u_texsize:new l.Uniform2f(i,s.u_texsize),u_mix:new l.Uniform1f(i,s.u_mix),u_pattern_size_a:new l.Uniform2f(i,s.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(i,s.u_pattern_size_b),u_scale_a:new l.Uniform1f(i,s.u_scale_a),u_scale_b:new l.Uniform1f(i,s.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(i,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(i,s.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(i,s.u_tile_units_to_pixels)}}};function Qe(i,s,o,c,d,v,x){for(var E=i.context,P=E.gl,z=i.useProgram("collisionBox"),N=[],V=0,q=0,$=0;$<c.length;$++){var H=c[$],te=s.getTile(H),G=te.getBucket(o);if(G){var ee=H.posMatrix;d[0]===0&&d[1]===0||(ee=i.translatePosMatrix(H.posMatrix,te,d,v));var se=x?G.textCollisionBox:G.iconCollisionBox,ye=G.collisionCircleArray;if(ye.length>0){var Ce=l.create(),we=ee;l.mul(Ce,G.placementInvProjMatrix,i.transform.glCoordMatrix),l.mul(Ce,Ce,G.placementViewportMatrix),N.push({circleArray:ye,circleOffset:q,transform:we,invTransform:Ce}),q=V+=ye.length/4}se&&z.draw(E,P.LINES,Z.disabled,X.disabled,i.colorModeForRenderPass(),ue.disabled,aa(ee,i.transform,te),o.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,null,i.transform.zoom,null,null,se.collisionVertexBuffer)}}if(x&&N.length){var Ie=i.useProgram("collisionCircle"),De=new l.StructArrayLayout2f1f2i16;De.resize(4*V),De._trim();for(var qe=0,je=0,ot=N;je<ot.length;je+=1)for(var xt=ot[je],Ct=0;Ct<xt.circleArray.length/4;Ct++){var Et=4*Ct,hr=xt.circleArray[Et+0],ut=xt.circleArray[Et+1],Nt=xt.circleArray[Et+2],Wt=xt.circleArray[Et+3];De.emplace(qe++,hr,ut,Nt,Wt,0),De.emplace(qe++,hr,ut,Nt,Wt,1),De.emplace(qe++,hr,ut,Nt,Wt,2),De.emplace(qe++,hr,ut,Nt,Wt,3)}(!Ss||Ss.length<2*V)&&(Ss=function(pn){var ui=2*pn,Kn=new l.StructArrayLayout3ui6;Kn.resize(ui),Kn._trim();for(var an=0;an<ui;an++){var yn=6*an;Kn.uint16[yn+0]=4*an+0,Kn.uint16[yn+1]=4*an+1,Kn.uint16[yn+2]=4*an+2,Kn.uint16[yn+3]=4*an+2,Kn.uint16[yn+4]=4*an+3,Kn.uint16[yn+5]=4*an+0}return Kn}(V));for(var Bt=E.createIndexBuffer(Ss,!0),Ft=E.createVertexBuffer(De,l.collisionCircleLayout.members,!0),Gt=0,Dt=N;Gt<Dt.length;Gt+=1){var kt=Dt[Gt],Rn=Fu(kt.transform,kt.invTransform,i.transform);Ie.draw(E,P.TRIANGLES,Z.disabled,X.disabled,i.colorModeForRenderPass(),ue.disabled,Rn,o.id,Ft,Bt,l.SegmentVector.simpleSegment(0,2*kt.circleOffset,kt.circleArray.length,kt.circleArray.length/2),null,i.transform.zoom,null,null,null)}Ft.destroy(),Bt.destroy()}}var gt=l.identity(new Float32Array(16));function Gr(i,s,o,c,d,v){var x=l.getAnchorAlignment(i),E=-(x.horizontalAlign-.5)*s,P=-(x.verticalAlign-.5)*o,z=l.evaluateVariableOffset(i,c);return new l.Point((E/d+z[0])*v,(P/d+z[1])*v)}function pr(i,s,o,c,d,v,x,E,P,z,N){var V=i.text.placedSymbolArray,q=i.text.dynamicLayoutVertexArray,$=i.icon.dynamicLayoutVertexArray,H={};q.clear();for(var te=0;te<V.length;te++){var G=V.get(te),ee=G.hidden||!G.crossTileID||i.allowVerticalPlacement&&!G.placedOrientation?null:c[G.crossTileID];if(ee){var se=new l.Point(G.anchorX,G.anchorY),ye=Pt(se,o?E:x),Ce=cr(v.cameraToCenterDistance,ye.signedDistanceFromCamera),we=d.evaluateSizeForFeature(i.textSizeData,z,G)*Ce/l.ONE_EM;o&&(we*=i.tilePixelRatio/P);for(var Ie=Gr(ee.anchor,ee.width,ee.height,ee.textOffset,ee.textBoxScale,we),De=o?Pt(se.add(Ie),x).point:ye.point.add(s?Ie.rotate(-v.angle):Ie),qe=i.allowVerticalPlacement&&G.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,je=0;je<G.numGlyphs;je++)l.addDynamicAttributes(q,De,qe);N&&G.associatedIconIndex>=0&&(H[G.associatedIconIndex]={shiftedAnchor:De,angle:qe})}else ti(G.numGlyphs,q)}if(N){$.clear();for(var ot=i.icon.placedSymbolArray,xt=0;xt<ot.length;xt++){var Ct=ot.get(xt);if(Ct.hidden)ti(Ct.numGlyphs,$);else{var Et=H[xt];if(Et)for(var hr=0;hr<Ct.numGlyphs;hr++)l.addDynamicAttributes($,Et.shiftedAnchor,Et.angle);else ti(Ct.numGlyphs,$)}}i.icon.dynamicLayoutVertexBuffer.updateData($)}i.text.dynamicLayoutVertexBuffer.updateData(q)}function on(i,s,o){return o.iconsInText&&s?"symbolTextAndIcon":i?"symbolSDF":"symbolIcon"}function Wr(i,s,o,c,d,v,x,E,P,z,N,V){for(var q=i.context,$=q.gl,H=i.transform,te=E==="map",G=P==="map",ee=te&&o.layout.get("symbol-placement")!=="point",se=te&&!G&&!ee,ye=o.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ce=!1,we=i.depthModeForSublayer(0,Z.ReadOnly),Ie=o.layout.get("text-variable-anchor"),De=[],qe=0,je=c;qe<je.length;qe+=1){var ot=je[qe],xt=s.getTile(ot),Ct=xt.getBucket(o);if(Ct){var Et=d?Ct.text:Ct.icon;if(Et&&Et.segments.get().length){var hr=Et.programConfigurations.get(o.id),ut=d||Ct.sdfIcons,Nt=d?Ct.textSizeData:Ct.iconSizeData,Wt=G||H.pitch!==0,Bt=i.useProgram(on(ut,d,Ct),hr),Ft=l.evaluateSizeForZoom(Nt,H.zoom),Gt=void 0,Dt=[0,0],kt=void 0,Rn=void 0,pn=null,ui=void 0;if(d)kt=xt.glyphAtlasTexture,Rn=$.LINEAR,Gt=xt.glyphAtlasTexture.size,Ct.iconsInText&&(Dt=xt.imageAtlasTexture.size,pn=xt.imageAtlasTexture,ui=Wt||i.options.rotating||i.options.zooming||Nt.kind==="composite"||Nt.kind==="camera"?$.LINEAR:$.NEAREST);else{var Kn=o.layout.get("icon-size").constantOr(0)!==1||Ct.iconsNeedLinear;kt=xt.imageAtlasTexture,Rn=ut||i.options.rotating||i.options.zooming||Kn||Wt?$.LINEAR:$.NEAREST,Gt=xt.imageAtlasTexture.size}var an=Nr(xt,1,i.transform.zoom),yn=Qr(ot.posMatrix,G,te,i.transform,an),eo=xr(ot.posMatrix,G,te,i.transform,an),yi=Ie&&Ct.hasTextData(),es=o.layout.get("icon-text-fit")!=="none"&&yi&&Ct.hasIconData();ee&&Vi(Ct,ot.posMatrix,i,d,yn,eo,G,z);var Pi=i.translatePosMatrix(ot.posMatrix,xt,v,x),Jo=ee||d&&Ie||es?gt:yn,zo=i.translatePosMatrix(eo,xt,v,x,!0),Zu=ut&&o.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ru={program:Bt,buffers:Et,uniformValues:ut?Ct.iconsInText?Es(Nt.kind,Ft,se,G,i,Pi,Jo,zo,Gt,Dt):Zo(Nt.kind,Ft,se,G,i,Pi,Jo,zo,d,Gt,!0):Ma(Nt.kind,Ft,se,G,i,Pi,Jo,zo,d,Gt),atlasTexture:kt,atlasTextureIcon:pn,atlasInterpolation:Rn,atlasInterpolationIcon:ui,isSDF:ut,hasHalo:Zu};if(ye&&Ct.canOverlap){Ce=!0;for(var ts=0,nu=Et.segments.get();ts<nu.length;ts+=1){var Gu=nu[ts];De.push({segments:new l.SegmentVector([Gu]),sortKey:Gu.sortKey,state:ru})}}else De.push({segments:Et.segments,sortKey:0,state:ru})}}}Ce&&De.sort(function(rs,zs){return rs.sortKey-zs.sortKey});for(var fa=0,Wu=De;fa<Wu.length;fa+=1){var da=Wu[fa],Bn=da.state;if(q.activeTexture.set($.TEXTURE0),Bn.atlasTexture.bind(Bn.atlasInterpolation,$.CLAMP_TO_EDGE),Bn.atlasTextureIcon&&(q.activeTexture.set($.TEXTURE1),Bn.atlasTextureIcon&&Bn.atlasTextureIcon.bind(Bn.atlasInterpolationIcon,$.CLAMP_TO_EDGE)),Bn.isSDF){var Ra=Bn.uniformValues;Bn.hasHalo&&(Ra.u_is_halo=1,si(Bn.buffers,da.segments,o,i,Bn.program,we,N,V,Ra)),Ra.u_is_halo=0}si(Bn.buffers,da.segments,o,i,Bn.program,we,N,V,Bn.uniformValues)}}function si(i,s,o,c,d,v,x,E,P){var z=c.context;d.draw(z,z.gl.TRIANGLES,v,x,E,ue.disabled,P,o.id,i.layoutVertexBuffer,i.indexBuffer,s,o.paint,c.transform.zoom,i.programConfigurations.get(o.id),i.dynamicLayoutVertexBuffer,i.opacityVertexBuffer)}function ln(i,s,o,c,d,v,x){var E,P,z,N,V,q=i.context.gl,$=o.paint.get("fill-pattern"),H=$&&$.constantOr(1),te=o.getCrossfadeParameters();x?(P=H&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",E=q.LINES):(P=H?"fillPattern":"fill",E=q.TRIANGLES);for(var G=0,ee=c;G<ee.length;G+=1){var se=ee[G],ye=s.getTile(se);if(!H||ye.patternsLoaded()){var Ce=ye.getBucket(o);if(Ce){var we=Ce.programConfigurations.get(o.id),Ie=i.useProgram(P,we);H&&(i.context.activeTexture.set(q.TEXTURE0),ye.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),we.updatePaintBuffers(te));var De=$.constantOr(null);if(De&&ye.imageAtlas){var qe=ye.imageAtlas,je=qe.patternPositions[De.to.toString()],ot=qe.patternPositions[De.from.toString()];je&&ot&&we.setConstantPatternPositions(je,ot)}var xt=i.translatePosMatrix(se.posMatrix,ye,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(x){N=Ce.indexBuffer2,V=Ce.segments2;var Ct=[q.drawingBufferWidth,q.drawingBufferHeight];z=P==="fillOutlinePattern"&&H?Sl(xt,i,te,ye,Ct):Du(xt,Ct)}else N=Ce.indexBuffer,V=Ce.segments,z=H?oa(xt,i,te,ye):Zi(xt);Ie.draw(i.context,E,d,i.stencilModeForClipping(se),v,ue.disabled,z,o.id,Ce.layoutVertexBuffer,N,V,o.paint,i.transform.zoom,we)}}}}function mn(i,s,o,c,d,v,x){for(var E=i.context,P=E.gl,z=o.paint.get("fill-extrusion-pattern"),N=z.constantOr(1),V=o.getCrossfadeParameters(),q=o.paint.get("fill-extrusion-opacity"),$=0,H=c;$<H.length;$+=1){var te=H[$],G=s.getTile(te),ee=G.getBucket(o);if(ee){var se=ee.programConfigurations.get(o.id),ye=i.useProgram(N?"fillExtrusionPattern":"fillExtrusion",se);N&&(i.context.activeTexture.set(P.TEXTURE0),G.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),se.updatePaintBuffers(V));var Ce=z.constantOr(null);if(Ce&&G.imageAtlas){var we=G.imageAtlas,Ie=we.patternPositions[Ce.to.toString()],De=we.patternPositions[Ce.from.toString()];Ie&&De&&se.setConstantPatternPositions(Ie,De)}var qe=i.translatePosMatrix(te.posMatrix,G,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),je=o.paint.get("fill-extrusion-vertical-gradient"),ot=N?To(qe,i,je,q,te,V,G):bl(qe,i,je,q);ye.draw(E,E.gl.TRIANGLES,d,v,x,ue.backCCW,ot,o.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,o.paint,i.transform.zoom,se)}}}function Ii(i,s,o,c,d,v){var x=i.context,E=x.gl,P=s.fbo;if(P){var z=i.useProgram("hillshade");x.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,P.colorAttachment.get());var N=function(V,q,$){var H=$.paint.get("hillshade-shadow-color"),te=$.paint.get("hillshade-highlight-color"),G=$.paint.get("hillshade-accent-color"),ee=$.paint.get("hillshade-illumination-direction")*(Math.PI/180);$.paint.get("hillshade-illumination-anchor")==="viewport"&&(ee-=V.transform.angle);var se,ye,Ce,we=!V.options.moving;return{u_matrix:V.transform.calculatePosMatrix(q.tileID.toUnwrapped(),we),u_image:0,u_latrange:(se=q.tileID,ye=Math.pow(2,se.canonical.z),Ce=se.canonical.y,[new l.MercatorCoordinate(0,Ce/ye).toLngLat().lat,new l.MercatorCoordinate(0,(Ce+1)/ye).toLngLat().lat]),u_light:[$.paint.get("hillshade-exaggeration"),ee],u_shadow:H,u_highlight:te,u_accent:G}}(i,s,o);z.draw(x,E.TRIANGLES,c,d,v,ue.disabled,N,o.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments)}}function Go(i,s,o,c,d,v){var x=i.context,E=x.gl,P=s.dem;if(P&&P.data){var z=P.dim,N=P.stride,V=P.getPixels();if(x.activeTexture.set(E.TEXTURE1),x.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||i.getTileTexture(N),s.demTexture){var q=s.demTexture;q.update(V,{premultiply:!1}),q.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else s.demTexture=new l.Texture(x,V,E.RGBA,{premultiply:!1}),s.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);x.activeTexture.set(E.TEXTURE0);var $=s.fbo;if(!$){var H=new l.Texture(x,{width:z,height:z,data:null},E.RGBA);H.bind(E.LINEAR,E.CLAMP_TO_EDGE),($=s.fbo=x.createFramebuffer(z,z,!0)).colorAttachment.set(H.texture)}x.bindFramebuffer.set($.framebuffer),x.viewport.set([0,0,z,z]),i.useProgram("hillshadePrepare").draw(x,E.TRIANGLES,c,d,v,ue.disabled,function(te,G){var ee=G.stride,se=l.create();return l.ortho(se,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(se,se,[0,-l.EXTENT,0]),{u_matrix:se,u_image:1,u_dimension:[ee,ee],u_zoom:te.overscaledZ,u_unpack:G.getUnpackVector()}}(s.tileID,P),o.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Fn(i,s,o,c,d){var v=c.paint.get("raster-fade-duration");if(v>0){var x=l.browser.now(),E=(x-i.timeAdded)/v,P=s?(x-s.timeAdded)/v:-1,z=o.getSource(),N=d.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),V=!s||Math.abs(s.tileID.overscaledZ-N)>Math.abs(i.tileID.overscaledZ-N),q=V&&i.refreshedUponExpiration?1:l.clamp(V?E:1-P,0,1);return i.refreshedUponExpiration&&E>=1&&(i.refreshedUponExpiration=!1),s?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}var po=new l.Color(1,0,0,1),za=new l.Color(0,1,0,1),Ts=new l.Color(0,0,1,1),Wo=new l.Color(1,0,1,1),La=new l.Color(0,1,1,1);function $s(i,s,o,c){Is(i,0,s+o/2,i.transform.width,o,c)}function Uu(i,s,o,c){Is(i,s-o/2,0,o,i.transform.height,c)}function Is(i,s,o,c,d,v){var x=i.context,E=x.gl;E.enable(E.SCISSOR_TEST),E.scissor(s*l.browser.devicePixelRatio,o*l.browser.devicePixelRatio,c*l.browser.devicePixelRatio,d*l.browser.devicePixelRatio),x.clear({color:v}),E.disable(E.SCISSOR_TEST)}function Ur(i,s,o){var c=i.context,d=c.gl,v=o.posMatrix,x=i.useProgram("debug"),E=Z.disabled,P=X.disabled,z=i.colorModeForRenderPass();c.activeTexture.set(d.TEXTURE0),i.emptyTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),x.draw(c,d.LINE_STRIP,E,P,z,ue.disabled,Io(v,l.Color.red),"$debug",i.debugBuffer,i.tileBorderIndexBuffer,i.debugSegments);var N=s.getTileByID(o.key).latestRawTileData,V=Math.floor((N&&N.byteLength||0)/1024),q=s.getTile(o).tileSize,$=512/Math.min(q,512)*(o.overscaledZ/i.transform.zoom)*.5,H=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(H+=" => "+o.overscaledZ),function(te,G){te.initDebugOverlayCanvas();var ee=te.debugOverlayCanvas,se=te.context.gl,ye=te.debugOverlayCanvas.getContext("2d");ye.clearRect(0,0,ee.width,ee.height),ye.shadowColor="white",ye.shadowBlur=2,ye.lineWidth=1.5,ye.strokeStyle="white",ye.textBaseline="top",ye.font="bold 36px Open Sans, sans-serif",ye.fillText(G,5,5),ye.strokeText(G,5,5),te.debugOverlayTexture.update(ee),te.debugOverlayTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE)}(i,H+" "+V+"kb"),x.draw(c,d.TRIANGLES,E,P,ie.alphaBlended,ue.disabled,Io(v,l.Color.transparent,$),"$debug",i.debugBuffer,i.quadTriangleIndexBuffer,i.debugSegments)}var yr={symbol:function(i,s,o,c,d){if(i.renderPass==="translucent"){var v=X.disabled,x=i.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(E,P,z,N,V,q,$){for(var H=P.transform,te=V==="map",G=q==="map",ee=0,se=E;ee<se.length;ee+=1){var ye=se[ee],Ce=N.getTile(ye),we=Ce.getBucket(z);if(we&&we.text&&we.text.segments.get().length){var Ie=l.evaluateSizeForZoom(we.textSizeData,H.zoom),De=Nr(Ce,1,P.transform.zoom),qe=Qr(ye.posMatrix,G,te,P.transform,De),je=z.layout.get("icon-text-fit")!=="none"&&we.hasIconData();if(Ie){var ot=Math.pow(2,H.zoom-Ce.tileID.overscaledZ);pr(we,te,G,$,l.symbolSize,H,qe,ye.posMatrix,ot,Ie,je)}}}}(c,i,o,s,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),d),o.paint.get("icon-opacity").constantOr(1)!==0&&Wr(i,s,o,c,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),v,x),o.paint.get("text-opacity").constantOr(1)!==0&&Wr(i,s,o,c,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),v,x),s.map.showCollisionBoxes&&(Qe(i,s,o,c,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Qe(i,s,o,c,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(i,s,o,c){if(i.renderPass==="translucent"){var d=o.paint.get("circle-opacity"),v=o.paint.get("circle-stroke-width"),x=o.paint.get("circle-stroke-opacity"),E=o.layout.get("circle-sort-key").constantOr(1)!==void 0;if(d.constantOr(1)!==0||v.constantOr(1)!==0&&x.constantOr(1)!==0){for(var P=i.context,z=P.gl,N=i.depthModeForSublayer(0,Z.ReadOnly),V=X.disabled,q=i.colorModeForRenderPass(),$=[],H=0;H<c.length;H++){var te=c[H],G=s.getTile(te),ee=G.getBucket(o);if(ee){var se=ee.programConfigurations.get(o.id),ye={programConfiguration:se,program:i.useProgram("circle",se),layoutVertexBuffer:ee.layoutVertexBuffer,indexBuffer:ee.indexBuffer,uniformValues:Ou(i,te,G,o)};if(E)for(var Ce=0,we=ee.segments.get();Ce<we.length;Ce+=1){var Ie=we[Ce];$.push({segments:new l.SegmentVector([Ie]),sortKey:Ie.sortKey,state:ye})}else $.push({segments:ee.segments,sortKey:0,state:ye})}}E&&$.sort(function(xt,Ct){return xt.sortKey-Ct.sortKey});for(var De=0,qe=$;De<qe.length;De+=1){var je=qe[De],ot=je.state;ot.program.draw(P,z.TRIANGLES,N,V,q,ue.disabled,ot.uniformValues,o.id,ot.layoutVertexBuffer,ot.indexBuffer,je.segments,o.paint,i.transform.zoom,ot.programConfiguration)}}}},heatmap:function(i,s,o,c){if(o.paint.get("heatmap-opacity")!==0)if(i.renderPass==="offscreen"){var d=i.context,v=d.gl,x=X.disabled,E=new ie([v.ONE,v.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function($,H,te){var G=$.gl;$.activeTexture.set(G.TEXTURE1),$.viewport.set([0,0,H.width/4,H.height/4]);var ee=te.heatmapFbo;if(ee)G.bindTexture(G.TEXTURE_2D,ee.colorAttachment.get()),$.bindFramebuffer.set(ee.framebuffer);else{var se=G.createTexture();G.bindTexture(G.TEXTURE_2D,se),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),ee=te.heatmapFbo=$.createFramebuffer(H.width/4,H.height/4,!1),function(ye,Ce,we,Ie){var De=ye.gl;De.texImage2D(De.TEXTURE_2D,0,De.RGBA,Ce.width/4,Ce.height/4,0,De.RGBA,ye.extRenderToTextureHalfFloat?ye.extTextureHalfFloat.HALF_FLOAT_OES:De.UNSIGNED_BYTE,null),Ie.colorAttachment.set(we)}($,H,se,ee)}})(d,i,o),d.clear({color:l.Color.transparent});for(var P=0;P<c.length;P++){var z=c[P];if(!s.hasRenderableParent(z)){var N=s.getTile(z),V=N.getBucket(o);if(V){var q=V.programConfigurations.get(o.id);i.useProgram("heatmap",q).draw(d,v.TRIANGLES,Z.disabled,x,E,ue.disabled,El(z.posMatrix,N,i.transform.zoom,o.paint.get("heatmap-intensity")),o.id,V.layoutVertexBuffer,V.indexBuffer,V.segments,o.paint,i.transform.zoom,q)}}}d.viewport.set([0,0,i.width,i.height])}else i.renderPass==="translucent"&&(i.context.setColorMode(i.colorModeForRenderPass()),function($,H){var te=$.context,G=te.gl,ee=H.heatmapFbo;if(ee){te.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,ee.colorAttachment.get()),te.activeTexture.set(G.TEXTURE1);var se=H.colorRampTexture;se||(se=H.colorRampTexture=new l.Texture(te,H.colorRamp,G.RGBA)),se.bind(G.LINEAR,G.CLAMP_TO_EDGE),$.useProgram("heatmapTexture").draw(te,G.TRIANGLES,Z.disabled,X.disabled,$.colorModeForRenderPass(),ue.disabled,function(ye,Ce,we,Ie){var De=l.create();l.ortho(De,0,ye.width,ye.height,0,0,1);var qe=ye.context.gl;return{u_matrix:De,u_world:[qe.drawingBufferWidth,qe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}}($,H),H.id,$.viewportBuffer,$.quadTriangleIndexBuffer,$.viewportSegments,H.paint,$.transform.zoom)}}(i,o))},line:function(i,s,o,c){if(i.renderPass==="translucent"){var d=o.paint.get("line-opacity"),v=o.paint.get("line-width");if(d.constantOr(1)!==0&&v.constantOr(1)!==0)for(var x=i.depthModeForSublayer(0,Z.ReadOnly),E=i.colorModeForRenderPass(),P=o.paint.get("line-dasharray"),z=o.paint.get("line-pattern"),N=z.constantOr(1),V=o.paint.get("line-gradient"),q=o.getCrossfadeParameters(),$=N?"linePattern":P?"lineSDF":V?"lineGradient":"line",H=i.context,te=H.gl,G=!0,ee=0,se=c;ee<se.length;ee+=1){var ye=se[ee],Ce=s.getTile(ye);if(!N||Ce.patternsLoaded()){var we=Ce.getBucket(o);if(we){var Ie=we.programConfigurations.get(o.id),De=i.context.program.get(),qe=i.useProgram($,Ie),je=G||qe.program!==De,ot=z.constantOr(null);if(ot&&Ce.imageAtlas){var xt=Ce.imageAtlas,Ct=xt.patternPositions[ot.to.toString()],Et=xt.patternPositions[ot.from.toString()];Ct&&Et&&Ie.setConstantPatternPositions(Ct,Et)}var hr=N?Po(i,Ce,o,q):P?Cl(i,Ce,o,P,q):V?Dr(i,Ce,o,we.lineClipsArray.length):Wi(i,Ce,o);if(N)H.activeTexture.set(te.TEXTURE0),Ce.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),Ie.updatePaintBuffers(q);else if(P&&(je||i.lineAtlas.dirty))H.activeTexture.set(te.TEXTURE0),i.lineAtlas.bind(H);else if(V){var ut=we.gradients[o.id],Nt=ut.texture;if(o.gradientVersion!==ut.version){var Wt=256;if(o.stepInterpolant){var Bt=s.getSource().maxzoom,Ft=ye.canonical.z===Bt?Math.ceil(1<<i.transform.maxZoom-ye.canonical.z):1;Wt=l.clamp(l.nextPowerOfTwo(we.maxLineLength/l.EXTENT*1024*Ft),256,H.maxTextureSize)}ut.gradient=l.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:Wt,image:ut.gradient||void 0,clips:we.lineClipsArray}),ut.texture?ut.texture.update(ut.gradient):ut.texture=new l.Texture(H,ut.gradient,te.RGBA),ut.version=o.gradientVersion,Nt=ut.texture}H.activeTexture.set(te.TEXTURE0),Nt.bind(o.stepInterpolant?te.NEAREST:te.LINEAR,te.CLAMP_TO_EDGE)}qe.draw(H,te.TRIANGLES,x,i.stencilModeForClipping(ye),E,ue.disabled,hr,o.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,o.paint,i.transform.zoom,Ie,we.layoutVertexBuffer2),G=!1}}}}},fill:function(i,s,o,c){var d=o.paint.get("fill-color"),v=o.paint.get("fill-opacity");if(v.constantOr(1)!==0){var x=i.colorModeForRenderPass(),E=o.paint.get("fill-pattern"),P=i.opaquePassEnabledForLayer()&&!E.constantOr(1)&&d.constantOr(l.Color.transparent).a===1&&v.constantOr(0)===1?"opaque":"translucent";if(i.renderPass===P){var z=i.depthModeForSublayer(1,i.renderPass==="opaque"?Z.ReadWrite:Z.ReadOnly);ln(i,s,o,c,z,x,!1)}if(i.renderPass==="translucent"&&o.paint.get("fill-antialias")){var N=i.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,Z.ReadOnly);ln(i,s,o,c,N,x,!0)}}},"fill-extrusion":function(i,s,o,c){var d=o.paint.get("fill-extrusion-opacity");if(d!==0&&i.renderPass==="translucent"){var v=new Z(i.context.gl.LEQUAL,Z.ReadWrite,i.depthRangeFor3D);if(d!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))mn(i,s,o,c,v,X.disabled,ie.disabled),mn(i,s,o,c,v,i.stencilModeFor3D(),i.colorModeForRenderPass());else{var x=i.colorModeForRenderPass();mn(i,s,o,c,v,X.disabled,x)}}},hillshade:function(i,s,o,c){if(i.renderPass==="offscreen"||i.renderPass==="translucent"){for(var d=i.context,v=i.depthModeForSublayer(0,Z.ReadOnly),x=i.colorModeForRenderPass(),E=i.renderPass==="translucent"?i.stencilConfigForOverlap(c):[{},c],P=E[0],z=0,N=E[1];z<N.length;z+=1){var V=N[z],q=s.getTile(V);q.needsHillshadePrepare&&i.renderPass==="offscreen"?Go(i,q,o,v,X.disabled,x):i.renderPass==="translucent"&&Ii(i,q,o,v,P[V.overscaledZ],x)}d.viewport.set([0,0,i.width,i.height])}},raster:function(i,s,o,c){if(i.renderPass==="translucent"&&o.paint.get("raster-opacity")!==0&&c.length)for(var d=i.context,v=d.gl,x=s.getSource(),E=i.useProgram("raster"),P=i.colorModeForRenderPass(),z=x instanceof At?[{},c]:i.stencilConfigForOverlap(c),N=z[0],V=z[1],q=V[V.length-1].overscaledZ,$=!i.options.moving,H=0,te=V;H<te.length;H+=1){var G=te[H],ee=i.depthModeForSublayer(G.overscaledZ-q,o.paint.get("raster-opacity")===1?Z.ReadWrite:Z.ReadOnly,v.LESS),se=s.getTile(G),ye=i.transform.calculatePosMatrix(G.toUnwrapped(),$);se.registerFadeDuration(o.paint.get("raster-fade-duration"));var Ce=s.findLoadedParent(G,0),we=Fn(se,Ce,s,o,i.transform),Ie=void 0,De=void 0,qe=o.paint.get("raster-resampling")==="nearest"?v.NEAREST:v.LINEAR;d.activeTexture.set(v.TEXTURE0),se.texture.bind(qe,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),d.activeTexture.set(v.TEXTURE1),Ce?(Ce.texture.bind(qe,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),Ie=Math.pow(2,Ce.tileID.overscaledZ-se.tileID.overscaledZ),De=[se.tileID.canonical.x*Ie%1,se.tileID.canonical.y*Ie%1]):se.texture.bind(qe,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST);var je=Ru(ye,De||[0,0],Ie||1,we,o);x instanceof At?E.draw(d,v.TRIANGLES,ee,X.disabled,P,ue.disabled,je,o.id,x.boundsBuffer,i.quadTriangleIndexBuffer,x.boundsSegments):E.draw(d,v.TRIANGLES,ee,N[G.overscaledZ],P,ue.disabled,je,o.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments)}},background:function(i,s,o){var c=o.paint.get("background-color"),d=o.paint.get("background-opacity");if(d!==0){var v=i.context,x=v.gl,E=i.transform,P=E.tileSize,z=o.paint.get("background-pattern");if(!i.isPatternMissing(z)){var N=!z&&c.a===1&&d===1&&i.opaquePassEnabledForLayer()?"opaque":"translucent";if(i.renderPass===N){var V=X.disabled,q=i.depthModeForSublayer(0,N==="opaque"?Z.ReadWrite:Z.ReadOnly),$=i.colorModeForRenderPass(),H=i.useProgram(z?"backgroundPattern":"background"),te=E.coveringTiles({tileSize:P});z&&(v.activeTexture.set(x.TEXTURE0),i.imageManager.bind(i.context));for(var G=o.getCrossfadeParameters(),ee=0,se=te;ee<se.length;ee+=1){var ye=se[ee],Ce=i.transform.calculatePosMatrix(ye.toUnwrapped()),we=z?de(Ce,d,i,z,{tileID:ye,tileSize:P},G):Cs(Ce,d,c);H.draw(v,x.TRIANGLES,q,V,$,ue.disabled,we,o.id,i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}}}},debug:function(i,s,o){for(var c=0;c<o.length;c++)Ur(i,s,o[c])},custom:function(i,s,o){var c=i.context,d=o.implementation;if(i.renderPass==="offscreen"){var v=d.prerender;v&&(i.setCustomLayerDefaults(),c.setColorMode(i.colorModeForRenderPass()),v.call(d,c.gl,i.transform.customLayerMatrix()),c.setDirty(),i.setBaseState())}else if(i.renderPass==="translucent"){i.setCustomLayerDefaults(),c.setColorMode(i.colorModeForRenderPass()),c.setStencilMode(X.disabled);var x=d.renderingMode==="3d"?new Z(i.context.gl.LEQUAL,Z.ReadWrite,i.depthRangeFor3D):i.depthModeForSublayer(0,Z.ReadOnly);c.setDepthMode(x),d.render(c.gl,i.transform.customLayerMatrix()),c.setDirty(),i.setBaseState(),c.bindFramebuffer.set(null)}}},Ar=function(i,s){this.context=new j(i),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=Y.maxUnderzooming+Y.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new St,this.gpuTimers={}};Ar.prototype.resize=function(i,s){if(this.width=i*l.browser.devicePixelRatio,this.height=s*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,c=this.style._order;o<c.length;o+=1)this.style._layers[c[o]].resize()},Ar.prototype.setup=function(){var i=this.context,s=new l.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(l.EXTENT,0),s.emplaceBack(0,l.EXTENT),s.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(s,tn.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var o=new l.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(l.EXTENT,0),o.emplaceBack(0,l.EXTENT),o.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=i.createVertexBuffer(o,tn.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var c=new l.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(l.EXTENT,0,l.EXTENT,0),c.emplaceBack(0,l.EXTENT,0,l.EXTENT),c.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(c,$e.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var d=new l.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(1,0),d.emplaceBack(0,1),d.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(d,tn.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var v=new l.StructArrayLayout1ui2;v.emplaceBack(0),v.emplaceBack(1),v.emplaceBack(3),v.emplaceBack(2),v.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(v);var x=new l.StructArrayLayout3ui6;x.emplaceBack(0,1,2),x.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(x),this.emptyTexture=new l.Texture(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);var E=this.context.gl;this.stencilClearMode=new X({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)},Ar.prototype.clearStencil=function(){var i=this.context,s=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=l.create();l.ortho(o,0,this.width,this.height,0,0,1),l.scale(o,o,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,s.TRIANGLES,Z.disabled,this.stencilClearMode,ie.disabled,ue.disabled,Gi(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ar.prototype._renderTileClippingMasks=function(i,s){if(this.currentStencilSource!==i.source&&i.isTileClipped()&&s&&s.length){this.currentStencilSource=i.source;var o=this.context,c=o.gl;this.nextStencilID+s.length>256&&this.clearStencil(),o.setColorMode(ie.disabled),o.setDepthMode(Z.disabled);var d=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var v=0,x=s;v<x.length;v+=1){var E=x[v],P=this._tileClippingMaskIDs[E.key]=this.nextStencilID++;d.draw(o,c.TRIANGLES,Z.disabled,new X({func:c.ALWAYS,mask:0},P,255,c.KEEP,c.KEEP,c.REPLACE),ie.disabled,ue.disabled,Gi(E.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ar.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var i=this.nextStencilID++,s=this.context.gl;return new X({func:s.NOTEQUAL,mask:255},i,255,s.KEEP,s.KEEP,s.REPLACE)},Ar.prototype.stencilModeForClipping=function(i){var s=this.context.gl;return new X({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,s.KEEP,s.KEEP,s.REPLACE)},Ar.prototype.stencilConfigForOverlap=function(i){var s,o=this.context.gl,c=i.sort(function(P,z){return z.overscaledZ-P.overscaledZ}),d=c[c.length-1].overscaledZ,v=c[0].overscaledZ-d+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();for(var x={},E=0;E<v;E++)x[E+d]=new X({func:o.GEQUAL,mask:255},E+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=v,[x,c]}return[(s={},s[d]=X.disabled,s),c]},Ar.prototype.colorModeForRenderPass=function(){var i=this.context.gl;return this._showOverdrawInspector?new ie([i.CONSTANT_COLOR,i.ONE],new l.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ie.unblended:ie.alphaBlended},Ar.prototype.depthModeForSublayer=function(i,s,o){if(!this.opaquePassEnabledForLayer())return Z.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Z(o||this.context.gl.LEQUAL,s,[c,c])},Ar.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ar.prototype.render=function(i,s){var o=this;this.style=i,this.options=s,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var c=this.style._order,d=this.style.sourceCaches;for(var v in d){var x=d[v];x.used&&x.prepare(this.context)}var E,P,z={},N={},V={};for(var q in d){var $=d[q];z[q]=$.getVisibleCoordinates(),N[q]=z[q].slice().reverse(),V[q]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var H=0;H<c.length;H++)if(this.style._layers[c[H]].is3D()){this.opaquePassCutoff=H;break}this.renderPass="offscreen";for(var te=0,G=c;te<G.length;te+=1){var ee=this.style._layers[G[te]];if(ee.hasOffscreenPass()&&!ee.isHidden(this.transform.zoom)){var se=N[ee.source];(ee.type==="custom"||se.length)&&this.renderLayer(this,d[ee.source],ee,se)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var ye=this.style._layers[c[this.currentLayer]],Ce=d[ye.source],we=z[ye.source];this._renderTileClippingMasks(ye,we),this.renderLayer(this,Ce,ye,we)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Ie=this.style._layers[c[this.currentLayer]],De=d[Ie.source],qe=(Ie.type==="symbol"?V:N)[Ie.source];this._renderTileClippingMasks(Ie,z[Ie.source]),this.renderLayer(this,De,Ie,qe)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(je){je.source&&!je.isHidden(o.transform.zoom)&&(je.source!==(P&&P.id)&&(P=o.style.sourceCaches[je.source]),(!E||E.getSource().maxzoom<P.getSource().maxzoom)&&(E=P))}),E&&yr.debug(this,E,E.getVisibleCoordinates())),this.options.showPadding&&function(je){var ot=je.transform.padding;$s(je,je.transform.height-(ot.top||0),3,po),$s(je,ot.bottom||0,3,za),Uu(je,ot.left||0,3,Ts),Uu(je,je.transform.width-(ot.right||0),3,Wo);var xt=je.transform.centerPoint;(function(Ct,Et,hr,ut){Is(Ct,Et-1,hr-10,2,20,ut),Is(Ct,Et-10,hr-1,20,2,ut)})(je,xt.x,je.transform.height-xt.y,La)}(this),this.context.setDefault()},Ar.prototype.renderLayer=function(i,s,o,c){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||c.length)&&(this.id=o.id,this.gpuTimingStart(o),yr[o.type](i,s,o,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ar.prototype.gpuTimingStart=function(i){if(this.options.gpuTiming){var s=this.context.extTimerQuery,o=this.gpuTimers[i.id];o||(o=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),o.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,o.query)}},Ar.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}},Ar.prototype.collectGpuTimers=function(){var i=this.gpuTimers;return this.gpuTimers={},i},Ar.prototype.queryGpuTimers=function(i){var s={};for(var o in i){var c=i[o],d=this.context.extTimerQuery,v=d.getQueryObjectEXT(c.query,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(c.query),s[o]=v}return s},Ar.prototype.translatePosMatrix=function(i,s,o,c,d){if(!o[0]&&!o[1])return i;var v=d?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(v){var x=Math.sin(v),E=Math.cos(v);o=[o[0]*E-o[1]*x,o[0]*x+o[1]*E]}var P=[d?o[0]:Nr(s,o[0],this.transform.zoom),d?o[1]:Nr(s,o[1],this.transform.zoom),0],z=new Float32Array(16);return l.translate(z,i,P),z},Ar.prototype.saveTileTexture=function(i){var s=this._tileTextures[i.size[0]];s?s.push(i):this._tileTextures[i.size[0]]=[i]},Ar.prototype.getTileTexture=function(i){var s=this._tileTextures[i];return s&&s.length>0?s.pop():null},Ar.prototype.isPatternMissing=function(i){if(!i)return!1;if(!i.from||!i.to)return!0;var s=this.imageManager.getPattern(i.from.toString()),o=this.imageManager.getPattern(i.to.toString());return!s||!o},Ar.prototype.useProgram=function(i,s){this.cache=this.cache||{};var o=""+i+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new ws(this.context,i,Aa[i],s,ke[i],this._showOverdrawInspector)),this.cache[o]},Ar.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ar.prototype.setBaseState=function(){var i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)},Ar.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ar.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ho=function(i,s){this.points=i,this.planes=s};ho.fromInvProjectionMatrix=function(i,s,o){var c=Math.pow(2,o),d=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(x){return l.transformMat4([],x,i)}).map(function(x){return l.scale$1([],x,1/x[3]/s*c)}),v=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(x){var E=l.sub([],d[x[0]],d[x[1]]),P=l.sub([],d[x[2]],d[x[1]]),z=l.normalize([],l.cross([],E,P)),N=-l.dot(z,d[x[1]]);return z.concat(N)});return new ho(d,v)};var Xo=function(i,s){this.min=i,this.max=s,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};Xo.prototype.quadrant=function(i){for(var s=[i%2==0,i<2],o=l.clone$2(this.min),c=l.clone$2(this.max),d=0;d<s.length;d++)o[d]=s[d]?this.min[d]:this.center[d],c[d]=s[d]?this.center[d]:this.max[d];return c[2]=this.max[2],new Xo(o,c)},Xo.prototype.distanceX=function(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]},Xo.prototype.distanceY=function(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]},Xo.prototype.intersects=function(i){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,c=0;c<i.planes.length;c++){for(var d=i.planes[c],v=0,x=0;x<s.length;x++)v+=l.dot$1(d,s[x])>=0;if(v===0)return 0;v!==s.length&&(o=!1)}if(o)return 2;for(var E=0;E<3;E++){for(var P=Number.MAX_VALUE,z=-Number.MAX_VALUE,N=0;N<i.points.length;N++){var V=i.points[N][E]-this.min[E];P=Math.min(P,V),z=Math.max(z,V)}if(z<0||P>this.max[E]-this.min[E])return 0}return 1};var An=function(i,s,o,c){if(i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o=0),c===void 0&&(c=0),isNaN(i)||i<0||isNaN(s)||s<0||isNaN(o)||o<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=s,this.left=o,this.right=c};An.prototype.interpolate=function(i,s,o){return s.top!=null&&i.top!=null&&(this.top=l.number(i.top,s.top,o)),s.bottom!=null&&i.bottom!=null&&(this.bottom=l.number(i.bottom,s.bottom,o)),s.left!=null&&i.left!=null&&(this.left=l.number(i.left,s.left,o)),s.right!=null&&i.right!=null&&(this.right=l.number(i.right,s.right,o)),this},An.prototype.getCenter=function(i,s){var o=l.clamp((this.left+i-this.right)/2,0,i),c=l.clamp((this.top+s-this.bottom)/2,0,s);return new l.Point(o,c)},An.prototype.equals=function(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right},An.prototype.clone=function(){return new An(this.top,this.bottom,this.left,this.right)},An.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var qt=function(i,s,o,c,d){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=d===void 0||d,this._minZoom=i||0,this._maxZoom=s||22,this._minPitch=o==null?0:o,this._maxPitch=c==null?60:c,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new An,this._posMatrixCache={},this._alignedPosMatrixCache={}},mr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};qt.prototype.clone=function(){var i=new qt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i},mr.minZoom.get=function(){return this._minZoom},mr.minZoom.set=function(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))},mr.maxZoom.get=function(){return this._maxZoom},mr.maxZoom.set=function(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))},mr.minPitch.get=function(){return this._minPitch},mr.minPitch.set=function(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))},mr.maxPitch.get=function(){return this._maxPitch},mr.maxPitch.set=function(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))},mr.renderWorldCopies.get=function(){return this._renderWorldCopies},mr.renderWorldCopies.set=function(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i},mr.worldSize.get=function(){return this.tileSize*this.scale},mr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},mr.size.get=function(){return new l.Point(this.width,this.height)},mr.bearing.get=function(){return-this.angle/Math.PI*180},mr.bearing.set=function(i){var s=-l.wrap(i,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},mr.pitch.get=function(){return this._pitch/Math.PI*180},mr.pitch.set=function(i){var s=l.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},mr.fov.get=function(){return this._fov/Math.PI*180},mr.fov.set=function(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())},mr.zoom.get=function(){return this._zoom},mr.zoom.set=function(i){var s=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},mr.center.get=function(){return this._center},mr.center.set=function(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())},mr.padding.get=function(){return this._edgeInsets.toJSON()},mr.padding.set=function(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())},mr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},qt.prototype.isPaddingEqual=function(i){return this._edgeInsets.equals(i)},qt.prototype.interpolatePadding=function(i,s,o){this._unmodified=!1,this._edgeInsets.interpolate(i,s,o),this._constrain(),this._calcMatrices()},qt.prototype.coveringZoomLevel=function(i){var s=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,s)},qt.prototype.getVisibleUnwrappedCoordinates=function(i){var s=[new l.UnwrappedTileID(0,i)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new l.Point(0,0)),c=this.pointCoordinate(new l.Point(this.width,0)),d=this.pointCoordinate(new l.Point(this.width,this.height)),v=this.pointCoordinate(new l.Point(0,this.height)),x=Math.floor(Math.min(o.x,c.x,d.x,v.x)),E=Math.floor(Math.max(o.x,c.x,d.x,v.x)),P=x-1;P<=E+1;P++)P!==0&&s.push(new l.UnwrappedTileID(P,i));return s},qt.prototype.coveringTiles=function(i){var s=this.coveringZoomLevel(i),o=s;if(i.minzoom!==void 0&&s<i.minzoom)return[];i.maxzoom!==void 0&&s>i.maxzoom&&(s=i.maxzoom);var c=l.MercatorCoordinate.fromLngLat(this.center),d=Math.pow(2,s),v=[d*c.x,d*c.y,0],x=ho.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),E=i.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(E=s);var P=function(je){return{aabb:new Xo([je*d,0,0],[(je+1)*d,d,0]),zoom:0,x:0,y:0,wrap:je,fullyVisible:!1}},z=[],N=[],V=s,q=i.reparseOverscaled?o:s;if(this._renderWorldCopies)for(var $=1;$<=3;$++)z.push(P(-$)),z.push(P($));for(z.push(P(0));z.length>0;){var H=z.pop(),te=H.x,G=H.y,ee=H.fullyVisible;if(!ee){var se=H.aabb.intersects(x);if(se===0)continue;ee=se===2}var ye=H.aabb.distanceX(v),Ce=H.aabb.distanceY(v),we=Math.max(Math.abs(ye),Math.abs(Ce));if(H.zoom===V||we>3+(1<<V-H.zoom)-2&&H.zoom>=E)N.push({tileID:new l.OverscaledTileID(H.zoom===V?q:H.zoom,H.wrap,H.zoom,te,G),distanceSq:l.sqrLen([v[0]-.5-te,v[1]-.5-G])});else for(var Ie=0;Ie<4;Ie++){var De=(te<<1)+Ie%2,qe=(G<<1)+(Ie>>1);z.push({aabb:H.aabb.quadrant(Ie),zoom:H.zoom+1,x:De,y:qe,wrap:H.wrap,fullyVisible:ee})}}return N.sort(function(je,ot){return je.distanceSq-ot.distanceSq}).map(function(je){return je.tileID})},qt.prototype.resize=function(i,s){this.width=i,this.height=s,this.pixelsToGLUnits=[2/i,-2/s],this._constrain(),this._calcMatrices()},mr.unmodified.get=function(){return this._unmodified},qt.prototype.zoomScale=function(i){return Math.pow(2,i)},qt.prototype.scaleZoom=function(i){return Math.log(i)/Math.LN2},qt.prototype.project=function(i){var s=l.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(i.lng)*this.worldSize,l.mercatorYfromLat(s)*this.worldSize)},qt.prototype.unproject=function(i){return new l.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()},mr.point.get=function(){return this.project(this.center)},qt.prototype.setLocationAtPoint=function(i,s){var o=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),d=this.locationCoordinate(i),v=new l.MercatorCoordinate(d.x-(o.x-c.x),d.y-(o.y-c.y));this.center=this.coordinateLocation(v),this._renderWorldCopies&&(this.center=this.center.wrap())},qt.prototype.locationPoint=function(i){return this.coordinatePoint(this.locationCoordinate(i))},qt.prototype.pointLocation=function(i){return this.coordinateLocation(this.pointCoordinate(i))},qt.prototype.locationCoordinate=function(i){return l.MercatorCoordinate.fromLngLat(i)},qt.prototype.coordinateLocation=function(i){return i.toLngLat()},qt.prototype.pointCoordinate=function(i){var s=[i.x,i.y,0,1],o=[i.x,i.y,1,1];l.transformMat4(s,s,this.pixelMatrixInverse),l.transformMat4(o,o,this.pixelMatrixInverse);var c=s[3],d=o[3],v=s[1]/c,x=o[1]/d,E=s[2]/c,P=o[2]/d,z=E===P?0:(0-E)/(P-E);return new l.MercatorCoordinate(l.number(s[0]/c,o[0]/d,z)/this.worldSize,l.number(v,x,z)/this.worldSize)},qt.prototype.coordinatePoint=function(i){var s=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.transformMat4(s,s,this.pixelMatrix),new l.Point(s[0]/s[3],s[1]/s[3])},qt.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},qt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},qt.prototype.setMaxBounds=function(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},qt.prototype.calculatePosMatrix=function(i,s){s===void 0&&(s=!1);var o=i.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[o])return c[o];var d=i.canonical,v=this.worldSize/this.zoomScale(d.z),x=d.x+Math.pow(2,d.z)*i.wrap,E=l.identity(new Float64Array(16));return l.translate(E,E,[x*v,d.y*v,0]),l.scale(E,E,[v/l.EXTENT,v/l.EXTENT,1]),l.multiply(E,s?this.alignedProjMatrix:this.projMatrix,E),c[o]=new Float32Array(E),c[o]},qt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},qt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var i,s,o,c,d=-90,v=90,x=-180,E=180,P=this.size,z=this._unmodified;if(this.latRange){var N=this.latRange;d=l.mercatorYfromLat(N[1])*this.worldSize,i=(v=l.mercatorYfromLat(N[0])*this.worldSize)-d<P.y?P.y/(v-d):0}if(this.lngRange){var V=this.lngRange;x=l.mercatorXfromLng(V[0])*this.worldSize,s=(E=l.mercatorXfromLng(V[1])*this.worldSize)-x<P.x?P.x/(E-x):0}var q=this.point,$=Math.max(s||0,i||0);if($)return this.center=this.unproject(new l.Point(s?(E+x)/2:q.x,i?(v+d)/2:q.y)),this.zoom+=this.scaleZoom($),this._unmodified=z,void(this._constraining=!1);if(this.latRange){var H=q.y,te=P.y/2;H-te<d&&(c=d+te),H+te>v&&(c=v-te)}if(this.lngRange){var G=q.x,ee=P.x/2;G-ee<x&&(o=x+ee),G+ee>E&&(o=E-ee)}o===void 0&&c===void 0||(this.center=this.unproject(new l.Point(o!==void 0?o:q.x,c!==void 0?c:q.y))),this._unmodified=z,this._constraining=!1}},qt.prototype._calcMatrices=function(){if(this.height){var i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,o=this._fov*(.5+i.y/this.height),c=Math.sin(o)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-s-o,.01,Math.PI-.01)),d=this.point,v=d.x,x=d.y,E=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),P=this.height/50,z=new Float64Array(16);l.perspective(z,this._fov,this.width/this.height,P,E),z[8]=2*-i.x/this.width,z[9]=2*i.y/this.height,l.scale(z,z,[1,-1,1]),l.translate(z,z,[0,0,-this.cameraToCenterDistance]),l.rotateX(z,z,this._pitch),l.rotateZ(z,z,this.angle),l.translate(z,z,[-v,-x,0]),this.mercatorMatrix=l.scale([],z,[this.worldSize,this.worldSize,this.worldSize]),l.scale(z,z,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=z,this.invProjMatrix=l.invert([],this.projMatrix);var N=this.width%2/2,V=this.height%2/2,q=Math.cos(this.angle),$=Math.sin(this.angle),H=v-Math.round(v)+q*N+$*V,te=x-Math.round(x)+q*V+$*N,G=new Float64Array(z);if(l.translate(G,G,[H>.5?H-1:H,te>.5?te-1:te,0]),this.alignedProjMatrix=G,z=l.create(),l.scale(z,z,[this.width/2,-this.height/2,1]),l.translate(z,z,[1,-1,0]),this.labelPlaneMatrix=z,z=l.create(),l.scale(z,z,[1,-1,1]),l.translate(z,z,[-1,-1,0]),l.scale(z,z,[2/this.width,2/this.height,1]),this.glCoordMatrix=z,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(z=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=z,this._posMatrixCache={},this._alignedPosMatrixCache={}}},qt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var i=this.pointCoordinate(new l.Point(0,0)),s=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},qt.prototype.getCameraPoint=function(){var i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,i))},qt.prototype.getCameraQueryGeometry=function(i){var s=this.getCameraPoint();if(i.length===1)return[i[0],s];for(var o=s.x,c=s.y,d=s.x,v=s.y,x=0,E=i;x<E.length;x+=1){var P=E[x];o=Math.min(o,P.x),c=Math.min(c,P.y),d=Math.max(d,P.x),v=Math.max(v,P.y)}return[new l.Point(o,c),new l.Point(d,c),new l.Point(d,v),new l.Point(o,v),new l.Point(o,c)]},Object.defineProperties(qt.prototype,mr);var Wn=function(i){var s,o,c,d;this._hashName=i&&encodeURIComponent(i),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),o=!1,c=null,d=function(){c=null,o&&(s(),c=setTimeout(d,300),o=!1)},function(){return o=!0,c||d(),c})};Wn.prototype.addTo=function(i){return this._map=i,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Wn.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Wn.prototype.getHashString=function(i){var s=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,c=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),d=Math.pow(10,c),v=Math.round(s.lng*d)/d,x=Math.round(s.lat*d)/d,E=this._map.getBearing(),P=this._map.getPitch(),z="";if(z+=i?"/"+v+"/"+x+"/"+o:o+"/"+x+"/"+v,(E||P)&&(z+="/"+Math.round(10*E)/10),P&&(z+="/"+Math.round(P)),this._hashName){var N=this._hashName,V=!1,q=l.window.location.hash.slice(1).split("&").map(function($){var H=$.split("=")[0];return H===N?(V=!0,H+"="+z):$}).filter(function($){return $});return V||q.push(N+"="+z),"#"+q.join("&")}return"#"+z},Wn.prototype._getCurrentHash=function(){var i,s=this,o=l.window.location.hash.replace("#","");return this._hashName?(o.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(i=c)}),(i&&i[1]||"").split("/")):o.split("/")},Wn.prototype._onHashChange=function(){var i=this._getCurrentHash();if(i.length>=3&&!i.some(function(o){return isNaN(o)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:s,pitch:+(i[4]||0)}),!0}return!1},Wn.prototype._updateHashUnthrottled=function(){var i=l.window.location.href.replace(/(#.+)?$/,this.getHashString());try{l.window.history.replaceState(l.window.history.state,null,i)}catch{}};var sa={linearity:.3,easing:l.bezier(0,0,.3,1)},fo=l.extend({deceleration:2500,maxSpeed:1400},sa),Xi=l.extend({deceleration:20,maxSpeed:1400},sa),Tl=l.extend({deceleration:1e3,maxSpeed:360},sa),Ys=l.extend({deceleration:1e3,maxSpeed:90},sa),Da=function(i){this._map=i,this.clear()};function ua(i,s){(!i.duration||i.duration<s.duration)&&(i.duration=s.duration,i.easing=s.easing)}function Ki(i,s,o){var c=o.maxSpeed,d=o.linearity,v=o.deceleration,x=l.clamp(i*d/(s/1e3),-c,c),E=Math.abs(x)/(v*d);return{easing:o.easing,duration:1e3*E,amount:x*(E/2)}}Da.prototype.clear=function(){this._inertiaBuffer=[]},Da.prototype.record=function(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:i})},Da.prototype._drainInertiaBuffer=function(){for(var i=this._inertiaBuffer,s=l.browser.now();i.length>0&&s-i[0].time>160;)i.shift()},Da.prototype._onMoveEnd=function(i){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},o=0,c=this._inertiaBuffer;o<c.length;o+=1){var d=c[o].settings;s.zoom+=d.zoomDelta||0,s.bearing+=d.bearingDelta||0,s.pitch+=d.pitchDelta||0,d.panDelta&&s.pan._add(d.panDelta),d.around&&(s.around=d.around),d.pinchAround&&(s.pinchAround=d.pinchAround)}var v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(s.pan.mag()){var E=Ki(s.pan.mag(),v,l.extend({},fo,i||{}));x.offset=s.pan.mult(E.amount/s.pan.mag()),x.center=this._map.transform.center,ua(x,E)}if(s.zoom){var P=Ki(s.zoom,v,Xi);x.zoom=this._map.transform.zoom+P.amount,ua(x,P)}if(s.bearing){var z=Ki(s.bearing,v,Tl);x.bearing=this._map.transform.bearing+l.clamp(z.amount,-179,179),ua(x,z)}if(s.pitch){var N=Ki(s.pitch,v,Ys);x.pitch=this._map.transform.pitch+N.amount,ua(x,N)}if(x.zoom||x.bearing){var V=s.pinchAround===void 0?s.around:s.pinchAround;x.around=V?this._map.unproject(V):this._map.getCenter()}return this.clear(),l.extend(x,{noMoveStart:!0})}};var cn=function(i){function s(c,d,v,x){x===void 0&&(x={});var E=D.mousePos(d.getCanvasContainer(),v),P=d.unproject(E);i.call(this,c,l.extend({point:E,lngLat:P,originalEvent:v},x)),this._defaultPrevented=!1,this.target=d}i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(l.Event),la=function(i){function s(c,d,v){var x=c==="touchend"?v.changedTouches:v.touches,E=D.touchPos(d.getCanvasContainer(),x),P=E.map(function(V){return d.unproject(V)}),z=E.reduce(function(V,q,$,H){return V.add(q.div(H.length))},new l.Point(0,0)),N=d.unproject(z);i.call(this,c,{points:E,point:z,lngLats:P,lngLat:N,originalEvent:v}),this._defaultPrevented=!1}i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(l.Event),Ps=function(i){function s(c,d,v){i.call(this,c,{originalEvent:v}),this._defaultPrevented=!1}i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(l.Event),Sn=function(i,s){this._map=i,this._clickTolerance=s.clickTolerance};Sn.prototype.reset=function(){delete this._mousedownPos},Sn.prototype.wheel=function(i){return this._firePreventable(new Ps(i.type,this._map,i))},Sn.prototype.mousedown=function(i,s){return this._mousedownPos=s,this._firePreventable(new cn(i.type,this._map,i))},Sn.prototype.mouseup=function(i){this._map.fire(new cn(i.type,this._map,i))},Sn.prototype.click=function(i,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new cn(i.type,this._map,i))},Sn.prototype.dblclick=function(i){return this._firePreventable(new cn(i.type,this._map,i))},Sn.prototype.mouseover=function(i){this._map.fire(new cn(i.type,this._map,i))},Sn.prototype.mouseout=function(i){this._map.fire(new cn(i.type,this._map,i))},Sn.prototype.touchstart=function(i){return this._firePreventable(new la(i.type,this._map,i))},Sn.prototype.touchmove=function(i){this._map.fire(new la(i.type,this._map,i))},Sn.prototype.touchend=function(i){this._map.fire(new la(i.type,this._map,i))},Sn.prototype.touchcancel=function(i){this._map.fire(new la(i.type,this._map,i))},Sn.prototype._firePreventable=function(i){if(this._map.fire(i),i.defaultPrevented)return{}},Sn.prototype.isEnabled=function(){return!0},Sn.prototype.isActive=function(){return!1},Sn.prototype.enable=function(){},Sn.prototype.disable=function(){};var lt=function(i){this._map=i};lt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},lt.prototype.mousemove=function(i){this._map.fire(new cn(i.type,this._map,i))},lt.prototype.mousedown=function(){this._delayContextMenu=!0},lt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new cn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},lt.prototype.contextmenu=function(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new cn(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()},lt.prototype.isEnabled=function(){return!0},lt.prototype.isActive=function(){return!1},lt.prototype.enable=function(){},lt.prototype.disable=function(){};var Hi=function(i,s){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=s.clickTolerance||1};function Il(i,s){for(var o={},c=0;c<i.length;c++)o[i[c].identifier]=s[c];return o}Hi.prototype.isEnabled=function(){return!!this._enabled},Hi.prototype.isActive=function(){return!!this._active},Hi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Hi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Hi.prototype.mousedown=function(i,s){this.isEnabled()&&i.shiftKey&&i.button===0&&(D.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},Hi.prototype.mousemoveWindow=function(i,s){if(this._active){var o=s;if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=o,this._box||(this._box=D.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));var d=Math.min(c.x,o.x),v=Math.max(c.x,o.x),x=Math.min(c.y,o.y),E=Math.max(c.y,o.y);D.setTransform(this._box,"translate("+d+"px,"+x+"px)"),this._box.style.width=v-d+"px",this._box.style.height=E-x+"px"}}},Hi.prototype.mouseupWindow=function(i,s){var o=this;if(this._active&&i.button===0){var c=this._startPos,d=s;if(this.reset(),D.suppressClick(),c.x!==d.x||c.y!==d.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:function(v){return v.fitScreenCoordinates(c,d,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",i)}},Hi.prototype.keydown=function(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))},Hi.prototype.blur=function(){this.reset()},Hi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(D.remove(this._box),this._box=null),D.enableDrag(),delete this._startPos,delete this._lastPos},Hi.prototype._fireEvent=function(i,s){return this._map.fire(new l.Event(i,{originalEvent:s}))};var Js=function(i){this.reset(),this.numTouches=i.numTouches};Js.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Js.prototype.touchstart=function(i,s,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),o.length===this.numTouches&&(this.centroid=function(c){for(var d=new l.Point(0,0),v=0,x=c;v<x.length;v+=1)d._add(x[v]);return d.div(c.length)}(s),this.touches=Il(o,s)))},Js.prototype.touchmove=function(i,s,o){if(!this.aborted&&this.centroid){var c=Il(o,s);for(var d in this.touches){var v=c[d];(!v||v.dist(this.touches[d])>30)&&(this.aborted=!0)}}},Js.prototype.touchend=function(i,s,o){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),o.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var Ko=function(i){this.singleTap=new Js(i),this.numTaps=i.numTaps,this.reset()};Ko.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ko.prototype.touchstart=function(i,s,o){this.singleTap.touchstart(i,s,o)},Ko.prototype.touchmove=function(i,s,o){this.singleTap.touchmove(i,s,o)},Ko.prototype.touchend=function(i,s,o){var c=this.singleTap.touchend(i,s,o);if(c){var d=i.timeStamp-this.lastTime<500,v=!this.lastTap||this.lastTap.dist(c)<30;if(d&&v||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var $i=function(){this._zoomIn=new Ko({numTouches:1,numTaps:2}),this._zoomOut=new Ko({numTouches:2,numTaps:1}),this.reset()};$i.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},$i.prototype.touchstart=function(i,s,o){this._zoomIn.touchstart(i,s,o),this._zoomOut.touchstart(i,s,o)},$i.prototype.touchmove=function(i,s,o){this._zoomIn.touchmove(i,s,o),this._zoomOut.touchmove(i,s,o)},$i.prototype.touchend=function(i,s,o){var c=this,d=this._zoomIn.touchend(i,s,o),v=this._zoomOut.touchend(i,s,o);return d?(this._active=!0,i.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(x){return x.easeTo({duration:300,zoom:x.getZoom()+1,around:x.unproject(d)},{originalEvent:i})}}):v?(this._active=!0,i.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(x){return x.easeTo({duration:300,zoom:x.getZoom()-1,around:x.unproject(v)},{originalEvent:i})}}):void 0},$i.prototype.touchcancel=function(){this.reset()},$i.prototype.enable=function(){this._enabled=!0},$i.prototype.disable=function(){this._enabled=!1,this.reset()},$i.prototype.isEnabled=function(){return this._enabled},$i.prototype.isActive=function(){return this._active};var jc={0:1,2:2},Ke=function(i){this.reset(),this._clickTolerance=i.clickTolerance||1};Ke.prototype.blur=function(){this.reset()},Ke.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Ke.prototype._correctButton=function(i,s){return!1},Ke.prototype._move=function(i,s){return{}},Ke.prototype.mousedown=function(i,s){if(!this._lastPoint){var o=D.mouseButton(i);this._correctButton(i,o)&&(this._lastPoint=s,this._eventButton=o)}},Ke.prototype.mousemoveWindow=function(i,s){var o=this._lastPoint;if(o){if(i.preventDefault(),function(c,d){var v=jc[d];return c.buttons===void 0||(c.buttons&v)!==v}(i,this._eventButton))this.reset();else if(this._moved||!(s.dist(o)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(o,s)}},Ke.prototype.mouseupWindow=function(i){this._lastPoint&&D.mouseButton(i)===this._eventButton&&(this._moved&&D.suppressClick(),this.reset())},Ke.prototype.enable=function(){this._enabled=!0},Ke.prototype.disable=function(){this._enabled=!1,this.reset()},Ke.prototype.isEnabled=function(){return this._enabled},Ke.prototype.isActive=function(){return this._active};var Vc=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.mousedown=function(o,c){i.prototype.mousedown.call(this,o,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(o,c){return c===0&&!o.ctrlKey},s.prototype._move=function(o,c){return{around:c,panDelta:c.sub(o)}},s}(Ke),Pl=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var d=.8*(c.x-o.x);if(d)return this._active=!0,{bearingDelta:d}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(Ke),qc=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var d=-.5*(c.y-o.y);if(d)return this._active=!0,{pitchDelta:d}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(Ke),ko=function(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()};ko.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},ko.prototype.touchstart=function(i,s,o){return this._calculateTransform(i,s,o)},ko.prototype.touchmove=function(i,s,o){if(this._active&&!(o.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,s,o)},ko.prototype.touchend=function(i,s,o){this._calculateTransform(i,s,o),this._active&&o.length<this._minTouches&&this.reset()},ko.prototype.touchcancel=function(){this.reset()},ko.prototype._calculateTransform=function(i,s,o){o.length>0&&(this._active=!0);var c=Il(o,s),d=new l.Point(0,0),v=new l.Point(0,0),x=0;for(var E in c){var P=c[E],z=this._touches[E];z&&(d._add(P),v._add(P.sub(z)),x++,c[E]=P)}if(this._touches=c,!(x<this._minTouches)&&v.mag()){var N=v.div(x);if(this._sum._add(N),!(this._sum.mag()<this._clickTolerance))return{around:d.div(x),panDelta:N}}},ko.prototype.enable=function(){this._enabled=!0},ko.prototype.disable=function(){this._enabled=!1,this.reset()},ko.prototype.isEnabled=function(){return this._enabled},ko.prototype.isActive=function(){return this._active};var Yi=function(){this.reset()};function kl(i,s,o){for(var c=0;c<i.length;c++)if(i[c].identifier===o)return s[c]}function Al(i,s){return Math.log(i/s)/Math.LN2}Yi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Yi.prototype._start=function(i){},Yi.prototype._move=function(i,s,o){return{}},Yi.prototype.touchstart=function(i,s,o){this._firstTwoTouches||o.length<2||(this._firstTwoTouches=[o[0].identifier,o[1].identifier],this._start([s[0],s[1]]))},Yi.prototype.touchmove=function(i,s,o){if(this._firstTwoTouches){i.preventDefault();var c=this._firstTwoTouches,d=c[1],v=kl(o,s,c[0]),x=kl(o,s,d);if(v&&x){var E=this._aroundCenter?null:v.add(x).div(2);return this._move([v,x],E,i)}}},Yi.prototype.touchend=function(i,s,o){if(this._firstTwoTouches){var c=this._firstTwoTouches,d=c[1],v=kl(o,s,c[0]),x=kl(o,s,d);v&&x||(this._active&&D.suppressClick(),this.reset())}},Yi.prototype.touchcancel=function(){this.reset()},Yi.prototype.enable=function(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"},Yi.prototype.disable=function(){this._enabled=!1,this.reset()},Yi.prototype.isEnabled=function(){return this._enabled},Yi.prototype.isActive=function(){return this._active};var Ji=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.reset=function(){i.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(o){this._startDistance=this._distance=o[0].dist(o[1])},s.prototype._move=function(o,c){var d=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Al(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Al(this._distance,d),pinchAround:c}},s}(Yi);function Oa(i,s){return 180*i.angleWith(s)/Math.PI}var wh=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.reset=function(){i.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])},s.prototype._move=function(o,c){var d=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Oa(this._vector,d),pinchAround:c}},s.prototype._isBelowThreshold=function(o){this._minDiameter=Math.min(this._minDiameter,o.mag());var c=25/(Math.PI*this._minDiameter)*360,d=Oa(o,this._startVector);return Math.abs(d)<c},s}(Yi);function Nu(i){return Math.abs(i.y)>Math.abs(i.x)}var Zc=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.reset=function(){i.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(o){this._lastPoints=o,Nu(o[0].sub(o[1]))&&(this._valid=!1)},s.prototype._move=function(o,c,d){var v=o[0].sub(this._lastPoints[0]),x=o[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(v,x,d.timeStamp),this._valid)return this._lastPoints=o,this._active=!0,{pitchDelta:(v.y+x.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(o,c,d){if(this._valid!==void 0)return this._valid;var v=o.mag()>=2,x=c.mag()>=2;if(v||x){if(!v||!x)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;var E=o.y>0==c.y>0;return Nu(o)&&Nu(c)&&E}},s}(Yi),Gc={panStep:100,bearingStep:15,pitchStep:10},Ho=function(){var i=Gc;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1};function mo(i){return i*(2-i)}Ho.prototype.blur=function(){this.reset()},Ho.prototype.reset=function(){this._active=!1},Ho.prototype.keydown=function(i){var s=this;if(!(i.altKey||i.ctrlKey||i.metaKey)){var o=0,c=0,d=0,v=0,x=0;switch(i.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:i.shiftKey?c=-1:(i.preventDefault(),v=-1);break;case 39:i.shiftKey?c=1:(i.preventDefault(),v=1);break;case 38:i.shiftKey?d=1:(i.preventDefault(),x=-1);break;case 40:i.shiftKey?d=-1:(i.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(c=0,d=0),{cameraAnimation:function(E){var P=E.getZoom();E.easeTo({duration:300,easeId:"keyboardHandler",easing:mo,zoom:o?Math.round(P)+o*(i.shiftKey?2:1):P,bearing:E.getBearing()+c*s._bearingStep,pitch:E.getPitch()+d*s._pitchStep,offset:[-v*s._panStep,-x*s._panStep],center:E.getCenter()},{originalEvent:i})}}}},Ho.prototype.enable=function(){this._enabled=!0},Ho.prototype.disable=function(){this._enabled=!1,this.reset()},Ho.prototype.isEnabled=function(){return this._enabled},Ho.prototype.isActive=function(){return this._active},Ho.prototype.disableRotation=function(){this._rotationDisabled=!0},Ho.prototype.enableRotation=function(){this._rotationDisabled=!1};var Jt=function(i,s){this._map=i,this._el=i.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,l.bindAll(["_onTimeout"],this)};Jt.prototype.setZoomRate=function(i){this._defaultZoomRate=i},Jt.prototype.setWheelZoomRate=function(i){this._wheelZoomRate=i},Jt.prototype.isEnabled=function(){return!!this._enabled},Jt.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Jt.prototype.isZooming=function(){return!!this._zooming},Jt.prototype.enable=function(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")},Jt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Jt.prototype.wheel=function(i){if(this.isEnabled()){var s=i.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY,o=l.browser.now(),c=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),i.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=i,this._delta-=s,this._active||this._start(i)),i.preventDefault()}},Jt.prototype._onTimeout=function(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)},Jt.prototype._start=function(i){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=D.mousePos(this._el,i);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Jt.prototype.renderFrame=function(){var i=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var o=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&c!==0&&(c=1/c);var d=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(d*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var v,x=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,E=this._startZoom,P=this._easing,z=!1;if(this._type==="wheel"&&E&&P){var N=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),V=P(N);v=l.number(E,x,V),N<1?this._frameId||(this._frameId=!0):z=!0}else v=x,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(function(){i._zooming=!1,i._handler._triggerRenderFrame(),delete i._targetZoom,delete i._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!z,zoomDelta:v-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Jt.prototype._smoothOutEasing=function(i){var s=l.ease;if(this._prevEase){var o=this._prevEase,c=(l.browser.now()-o.start)/o.duration,d=o.easing(c+.01)-o.easing(c),v=.27/Math.sqrt(d*d+1e-4)*.01,x=Math.sqrt(.0729-v*v);s=l.bezier(v,x,.25,1)}return this._prevEase={start:l.browser.now(),duration:i,easing:s},s},Jt.prototype.blur=function(){this.reset()},Jt.prototype.reset=function(){this._active=!1};var ca=function(i,s){this._clickZoom=i,this._tapZoom=s};ca.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ca.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ca.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ca.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ao=function(){this.reset()};Ao.prototype.reset=function(){this._active=!1},Ao.prototype.blur=function(){this.reset()},Ao.prototype.dblclick=function(i,s){return i.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(i.shiftKey?-1:1),around:o.unproject(s)},{originalEvent:i})}}},Ao.prototype.enable=function(){this._enabled=!0},Ao.prototype.disable=function(){this._enabled=!1,this.reset()},Ao.prototype.isEnabled=function(){return this._enabled},Ao.prototype.isActive=function(){return this._active};var ri=function(){this._tap=new Ko({numTouches:1,numTaps:1}),this.reset()};ri.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ri.prototype.touchstart=function(i,s,o){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?o.length>0&&(this._swipePoint=s[0],this._swipeTouch=o[0].identifier):this._tap.touchstart(i,s,o))},ri.prototype.touchmove=function(i,s,o){if(this._tapTime){if(this._swipePoint){if(o[0].identifier!==this._swipeTouch)return;var c=s[0],d=c.y-this._swipePoint.y;return this._swipePoint=c,i.preventDefault(),this._active=!0,{zoomDelta:d/128}}}else this._tap.touchmove(i,s,o)},ri.prototype.touchend=function(i,s,o){this._tapTime?this._swipePoint&&o.length===0&&this.reset():this._tap.touchend(i,s,o)&&(this._tapTime=i.timeStamp)},ri.prototype.touchcancel=function(){this.reset()},ri.prototype.enable=function(){this._enabled=!0},ri.prototype.disable=function(){this._enabled=!1,this.reset()},ri.prototype.isEnabled=function(){return this._enabled},ri.prototype.isActive=function(){return this._active};var ks=function(i,s,o){this._el=i,this._mousePan=s,this._touchPan=o};ks.prototype.enable=function(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ks.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ks.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ks.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var $a=function(i,s,o){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=s,this._mousePitch=o};$a.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},$a.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},$a.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},$a.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var $o=function(i,s,o,c){this._el=i,this._touchZoom=s,this._touchRotate=o,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};$o.prototype.enable=function(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},$o.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},$o.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},$o.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},$o.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},$o.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var di=function(i){return i.zoom||i.drag||i.pitch||i.rotate},ju=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s}(l.Event);function _t(i){return i.panDelta&&i.panDelta.mag()||i.zoomDelta||i.bearingDelta||i.pitchDelta}var ft=function(i,s){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Da(i),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),l.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[l.window,"blur",void 0]];for(var c=0,d=this._listeners;c<d.length;c+=1){var v=d[c],x=v[0];D.addEventListener(x,v[1],x===l.window.document?this.handleWindowEvent:this.handleEvent,v[2])}};ft.prototype.destroy=function(){for(var i=0,s=this._listeners;i<s.length;i+=1){var o=s[i],c=o[0];D.removeEventListener(c,o[1],c===l.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},ft.prototype._addDefaultHandlers=function(i){var s=this._map,o=s.getCanvasContainer();this._add("mapEvent",new Sn(s,i));var c=s.boxZoom=new Hi(s,i);this._add("boxZoom",c);var d=new $i,v=new Ao;s.doubleClickZoom=new ca(v,d),this._add("tapZoom",d),this._add("clickZoom",v);var x=new ri;this._add("tapDragZoom",x);var E=s.touchPitch=new Zc;this._add("touchPitch",E);var P=new Pl(i),z=new qc(i);s.dragRotate=new $a(i,P,z),this._add("mouseRotate",P,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]);var N=new Vc(i),V=new ko(i);s.dragPan=new ks(o,N,V),this._add("mousePan",N),this._add("touchPan",V,["touchZoom","touchRotate"]);var q=new wh,$=new Ji;s.touchZoomRotate=new $o(o,$,q,x),this._add("touchRotate",q,["touchPan","touchZoom"]),this._add("touchZoom",$,["touchPan","touchRotate"]);var H=s.scrollZoom=new Jt(s,this);this._add("scrollZoom",H,["mousePan"]);var te=s.keyboard=new Ho;this._add("keyboard",te),this._add("blockableMapEvent",new lt(s));for(var G=0,ee=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];G<ee.length;G+=1){var se=ee[G];i.interactive&&i[se]&&s[se].enable(i[se])}},ft.prototype._add=function(i,s,o){this._handlers.push({handlerName:i,handler:s,allowed:o}),this._handlersById[i]=s},ft.prototype.stop=function(i){if(!this._updatingCamera){for(var s=0,o=this._handlers;s<o.length;s+=1)o[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}},ft.prototype.isActive=function(){for(var i=0,s=this._handlers;i<s.length;i+=1)if(s[i].handler.isActive())return!0;return!1},ft.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ft.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ft.prototype.isMoving=function(){return Boolean(di(this._eventsInProgress))||this.isZooming()},ft.prototype._blockedByActive=function(i,s,o){for(var c in i)if(c!==o&&(!s||s.indexOf(c)<0))return!0;return!1},ft.prototype.handleWindowEvent=function(i){this.handleEvent(i,i.type+"Window")},ft.prototype._getMapTouches=function(i){for(var s=[],o=0,c=i;o<c.length;o+=1){var d=c[o];this._el.contains(d.target)&&s.push(d)}return s},ft.prototype.handleEvent=function(i,s){this._updatingCamera=!0;for(var o=i.type==="renderFrame"?void 0:i,c={needsRenderFrame:!1},d={},v={},x=i.touches?this._getMapTouches(i.touches):void 0,E=x?D.touchPos(this._el,x):D.mousePos(this._el,i),P=0,z=this._handlers;P<z.length;P+=1){var N=z[P],V=N.handlerName,q=N.handler,$=N.allowed;if(q.isEnabled()){var H=void 0;this._blockedByActive(v,$,V)?q.reset():q[s||i.type]&&(H=q[s||i.type](i,E,x),this.mergeHandlerResult(c,d,H,V,o),H&&H.needsRenderFrame&&this._triggerRenderFrame()),(H||q.isActive())&&(v[V]=q)}}var te={};for(var G in this._previousActiveHandlers)v[G]||(te[G]=o);this._previousActiveHandlers=v,(Object.keys(te).length||_t(c))&&(this._changes.push([c,d,te]),this._triggerRenderFrame()),(Object.keys(v).length||_t(c))&&this._map._stop(!0),this._updatingCamera=!1;var ee=c.cameraAnimation;ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ee(this._map))},ft.prototype.mergeHandlerResult=function(i,s,o,c,d){if(o){l.extend(i,o);var v={handlerName:c,originalEvent:o.originalEvent||d};o.zoomDelta!==void 0&&(s.zoom=v),o.panDelta!==void 0&&(s.drag=v),o.pitchDelta!==void 0&&(s.pitch=v),o.bearingDelta!==void 0&&(s.rotate=v)}},ft.prototype._applyChanges=function(){for(var i={},s={},o={},c=0,d=this._changes;c<d.length;c+=1){var v=d[c],x=v[0],E=v[1],P=v[2];x.panDelta&&(i.panDelta=(i.panDelta||new l.Point(0,0))._add(x.panDelta)),x.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(i.around=x.around),x.pinchAround!==void 0&&(i.pinchAround=x.pinchAround),x.noInertia&&(i.noInertia=x.noInertia),l.extend(s,E),l.extend(o,P)}this._updateMapTransform(i,s,o),this._changes=[]},ft.prototype._updateMapTransform=function(i,s,o){var c=this._map,d=c.transform;if(!_t(i))return this._fireEvents(s,o,!0);var v=i.panDelta,x=i.zoomDelta,E=i.bearingDelta,P=i.pitchDelta,z=i.around,N=i.pinchAround;N!==void 0&&(z=N),c._stop(!0),z=z||c.transform.centerPoint;var V=d.pointLocation(v?z.sub(v):z);E&&(d.bearing+=E),P&&(d.pitch+=P),x&&(d.zoom+=x),d.setLocationAtPoint(V,z),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(s,o,!0)},ft.prototype._fireEvents=function(i,s,o){var c=this,d=di(this._eventsInProgress),v=di(i),x={};for(var E in i)this._eventsInProgress[E]||(x[E+"start"]=i[E].originalEvent),this._eventsInProgress[E]=i[E];for(var P in!d&&v&&this._fireEvent("movestart",v.originalEvent),x)this._fireEvent(P,x[P]);for(var z in v&&this._fireEvent("move",v.originalEvent),i)this._fireEvent(z,i[z].originalEvent);var N,V={};for(var q in this._eventsInProgress){var $=this._eventsInProgress[q],H=$.handlerName,te=$.originalEvent;this._handlersById[H].isActive()||(delete this._eventsInProgress[q],V[q+"end"]=N=s[H]||te)}for(var G in V)this._fireEvent(G,V[G]);var ee=di(this._eventsInProgress);if(o&&(d||v)&&!ee){this._updatingCamera=!0;var se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ye=function(Ce){return Ce!==0&&-c._bearingSnap<Ce&&Ce<c._bearingSnap};se?(ye(se.bearing||this._map.getBearing())&&(se.bearing=0),this._map.easeTo(se,{originalEvent:N})):(this._map.fire(new l.Event("moveend",{originalEvent:N})),ye(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ft.prototype._fireEvent=function(i,s){this._map.fire(new l.Event(i,s?{originalEvent:s}:{}))},ft.prototype._requestFrame=function(){var i=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete i._frameId,i.handleEvent(new ju("renderFrame",{timeStamp:s})),i._applyChanges()})},ft.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ml=function(i){function s(o,c){i.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(o,c){return this.jumpTo({center:o},c)},s.prototype.panBy=function(o,c,d){return o=l.Point.convert(o).mult(-1),this.panTo(this.transform.center,l.extend({offset:o},c),d)},s.prototype.panTo=function(o,c,d){return this.easeTo(l.extend({center:o},c),d)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(o,c){return this.jumpTo({zoom:o},c),this},s.prototype.zoomTo=function(o,c,d){return this.easeTo(l.extend({zoom:o},c),d)},s.prototype.zoomIn=function(o,c){return this.zoomTo(this.getZoom()+1,o,c),this},s.prototype.zoomOut=function(o,c){return this.zoomTo(this.getZoom()-1,o,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(o,c){return this.jumpTo({bearing:o},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(o,c){return this.jumpTo({padding:o},c),this},s.prototype.rotateTo=function(o,c,d){return this.easeTo(l.extend({bearing:o},c),d)},s.prototype.resetNorth=function(o,c){return this.rotateTo(0,l.extend({duration:1e3},o),c),this},s.prototype.resetNorthPitch=function(o,c){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},o),c),this},s.prototype.snapToNorth=function(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(o,c){return this.jumpTo({pitch:o},c),this},s.prototype.cameraForBounds=function(o,c){o=l.LngLatBounds.convert(o);var d=c&&c.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),d,c)},s.prototype._cameraForBoxAndBearing=function(o,c,d,v){var x={top:0,bottom:0,right:0,left:0};if(typeof(v=l.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){var E=v.padding;v.padding={top:E,bottom:E,right:E,left:E}}v.padding=l.extend(x,v.padding);var P=this.transform,z=P.padding,N=P.project(l.LngLat.convert(o)),V=P.project(l.LngLat.convert(c)),q=N.rotate(-d*Math.PI/180),$=V.rotate(-d*Math.PI/180),H=new l.Point(Math.max(q.x,$.x),Math.max(q.y,$.y)),te=new l.Point(Math.min(q.x,$.x),Math.min(q.y,$.y)),G=H.sub(te),ee=(P.width-(z.left+z.right+v.padding.left+v.padding.right))/G.x,se=(P.height-(z.top+z.bottom+v.padding.top+v.padding.bottom))/G.y;if(!(se<0||ee<0)){var ye=Math.min(P.scaleZoom(P.scale*Math.min(ee,se)),v.maxZoom),Ce=typeof v.offset.x=="number"?new l.Point(v.offset.x,v.offset.y):l.Point.convert(v.offset),we=new l.Point((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(d*Math.PI/180),Ie=Ce.add(we).mult(P.scale/P.zoomScale(ye));return{center:P.unproject(N.add(V).div(2).sub(Ie)),zoom:ye,bearing:d}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(o,c,d){return this._fitInternal(this.cameraForBounds(o,c),c,d)},s.prototype.fitScreenCoordinates=function(o,c,d,v,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(o)),this.transform.pointLocation(l.Point.convert(c)),d,v),v,x)},s.prototype._fitInternal=function(o,c,d){return o?(delete(c=l.extend(o,c)).padding,c.linear?this.easeTo(c,d):this.flyTo(c,d)):this},s.prototype.jumpTo=function(o,c){this.stop();var d=this.transform,v=!1,x=!1,E=!1;return"zoom"in o&&d.zoom!==+o.zoom&&(v=!0,d.zoom=+o.zoom),o.center!==void 0&&(d.center=l.LngLat.convert(o.center)),"bearing"in o&&d.bearing!==+o.bearing&&(x=!0,d.bearing=+o.bearing),"pitch"in o&&d.pitch!==+o.pitch&&(E=!0,d.pitch=+o.pitch),o.padding==null||d.isPaddingEqual(o.padding)||(d.padding=o.padding),this.fire(new l.Event("movestart",c)).fire(new l.Event("move",c)),v&&this.fire(new l.Event("zoomstart",c)).fire(new l.Event("zoom",c)).fire(new l.Event("zoomend",c)),x&&this.fire(new l.Event("rotatestart",c)).fire(new l.Event("rotate",c)).fire(new l.Event("rotateend",c)),E&&this.fire(new l.Event("pitchstart",c)).fire(new l.Event("pitch",c)).fire(new l.Event("pitchend",c)),this.fire(new l.Event("moveend",c))},s.prototype.easeTo=function(o,c){var d=this;this._stop(!1,o.easeId),((o=l.extend({offset:[0,0],duration:500,easing:l.ease},o)).animate===!1||!o.essential&&l.browser.prefersReducedMotion)&&(o.duration=0);var v=this.transform,x=this.getZoom(),E=this.getBearing(),P=this.getPitch(),z=this.getPadding(),N="zoom"in o?+o.zoom:x,V="bearing"in o?this._normalizeBearing(o.bearing,E):E,q="pitch"in o?+o.pitch:P,$="padding"in o?o.padding:v.padding,H=l.Point.convert(o.offset),te=v.centerPoint.add(H),G=v.pointLocation(te),ee=l.LngLat.convert(o.center||G);this._normalizeCenter(ee);var se,ye,Ce=v.project(G),we=v.project(ee).sub(Ce),Ie=v.zoomScale(N-x);o.around&&(se=l.LngLat.convert(o.around),ye=v.locationPoint(se));var De={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||N!==x,this._rotating=this._rotating||E!==V,this._pitching=this._pitching||q!==P,this._padding=!v.isPaddingEqual($),this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,De),this._ease(function(qe){if(d._zooming&&(v.zoom=l.number(x,N,qe)),d._rotating&&(v.bearing=l.number(E,V,qe)),d._pitching&&(v.pitch=l.number(P,q,qe)),d._padding&&(v.interpolatePadding(z,$,qe),te=v.centerPoint.add(H)),se)v.setLocationAtPoint(se,ye);else{var je=v.zoomScale(v.zoom-x),ot=N>x?Math.min(2,Ie):Math.max(.5,Ie),xt=Math.pow(ot,1-qe),Ct=v.unproject(Ce.add(we.mult(qe*xt)).mult(je));v.setLocationAtPoint(v.renderWorldCopies?Ct.wrap():Ct,te)}d._fireMoveEvents(c)},function(qe){d._afterEase(c,qe)},o),this},s.prototype._prepareEase=function(o,c,d){d===void 0&&(d={}),this._moving=!0,c||d.moving||this.fire(new l.Event("movestart",o)),this._zooming&&!d.zooming&&this.fire(new l.Event("zoomstart",o)),this._rotating&&!d.rotating&&this.fire(new l.Event("rotatestart",o)),this._pitching&&!d.pitching&&this.fire(new l.Event("pitchstart",o))},s.prototype._fireMoveEvents=function(o){this.fire(new l.Event("move",o)),this._zooming&&this.fire(new l.Event("zoom",o)),this._rotating&&this.fire(new l.Event("rotate",o)),this._pitching&&this.fire(new l.Event("pitch",o))},s.prototype._afterEase=function(o,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var d=this._zooming,v=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new l.Event("zoomend",o)),v&&this.fire(new l.Event("rotateend",o)),x&&this.fire(new l.Event("pitchend",o)),this.fire(new l.Event("moveend",o))}},s.prototype.flyTo=function(o,c){var d=this;if(!o.essential&&l.browser.prefersReducedMotion){var v=l.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(v,c)}this.stop(),o=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},o);var x=this.transform,E=this.getZoom(),P=this.getBearing(),z=this.getPitch(),N=this.getPadding(),V="zoom"in o?l.clamp(+o.zoom,x.minZoom,x.maxZoom):E,q="bearing"in o?this._normalizeBearing(o.bearing,P):P,$="pitch"in o?+o.pitch:z,H="padding"in o?o.padding:x.padding,te=x.zoomScale(V-E),G=l.Point.convert(o.offset),ee=x.centerPoint.add(G),se=x.pointLocation(ee),ye=l.LngLat.convert(o.center||se);this._normalizeCenter(ye);var Ce=x.project(se),we=x.project(ye).sub(Ce),Ie=o.curve,De=Math.max(x.width,x.height),qe=De/te,je=we.mag();if("minZoom"in o){var ot=l.clamp(Math.min(o.minZoom,E,V),x.minZoom,x.maxZoom),xt=De/x.zoomScale(ot-E);Ie=Math.sqrt(xt/je*2)}var Ct=Ie*Ie;function Et(Dt){var kt=(qe*qe-De*De+(Dt?-1:1)*Ct*Ct*je*je)/(2*(Dt?qe:De)*Ct*je);return Math.log(Math.sqrt(kt*kt+1)-kt)}function hr(Dt){return(Math.exp(Dt)-Math.exp(-Dt))/2}function ut(Dt){return(Math.exp(Dt)+Math.exp(-Dt))/2}var Nt=Et(0),Wt=function(Dt){return ut(Nt)/ut(Nt+Ie*Dt)},Bt=function(Dt){return De*((ut(Nt)*(hr(kt=Nt+Ie*Dt)/ut(kt))-hr(Nt))/Ct)/je;var kt},Ft=(Et(1)-Nt)/Ie;if(Math.abs(je)<1e-6||!isFinite(Ft)){if(Math.abs(De-qe)<1e-6)return this.easeTo(o,c);var Gt=qe<De?-1:1;Ft=Math.abs(Math.log(qe/De))/Ie,Bt=function(){return 0},Wt=function(Dt){return Math.exp(Gt*Ie*Dt)}}return o.duration="duration"in o?+o.duration:1e3*Ft/("screenSpeed"in o?+o.screenSpeed/Ie:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=P!==q,this._pitching=$!==z,this._padding=!x.isPaddingEqual(H),this._prepareEase(c,!1),this._ease(function(Dt){var kt=Dt*Ft,Rn=1/Wt(kt);x.zoom=Dt===1?V:E+x.scaleZoom(Rn),d._rotating&&(x.bearing=l.number(P,q,Dt)),d._pitching&&(x.pitch=l.number(z,$,Dt)),d._padding&&(x.interpolatePadding(N,H,Dt),ee=x.centerPoint.add(G));var pn=Dt===1?ye:x.unproject(Ce.add(we.mult(Bt(kt))).mult(Rn));x.setLocationAtPoint(x.renderWorldCopies?pn.wrap():pn,ee),d._fireMoveEvents(c)},function(){return d._afterEase(c)},o),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,c)}if(!o){var v=this.handlers;v&&v.stop(!1)}return this},s.prototype._ease=function(o,c,d){d.animate===!1||d.duration===0?(o(1),c()):(this._easeStart=l.browser.now(),this._easeOptions=d,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var o=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(o,c){o=l.wrap(o,-180,180);var d=Math.abs(o-c);return Math.abs(o-360-c)<d&&(o-=360),Math.abs(o+360-c)<d&&(o+=360),o},s.prototype._normalizeCenter=function(o){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var d=o.lng-c.center.lng;o.lng+=d>180?-360:d<-180?360:0}},s}(l.Evented),mi=function(i){i===void 0&&(i={}),this.options=i,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};mi.prototype.getDefaultPosition=function(){return"bottom-right"},mi.prototype.onAdd=function(i){var s=this.options&&this.options.compact;return this._map=i,this._container=D.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=D.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=D.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},mi.prototype.onRemove=function(){D.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},mi.prototype._setElementTitle=function(i,s){var o=this._map._getUIString("AttributionControl."+s);i.title=o,i.setAttribute("aria-label",o)},mi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},mi.prototype._updateEditLink=function(){var i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(i){var o=s.reduce(function(c,d,v){return d.value&&(c+=d.key+"="+d.value+(v<s.length-1?"&":"")),c},"?");i.href=l.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}},mi.prototype._updateData=function(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},mi.prototype._updateAttributions=function(){if(this._map.style){var i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(function(E){return typeof E!="string"?"":E})):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var o=this._map.style.sourceCaches;for(var c in o){var d=o[c];if(d.used){var v=d.getSource();v.attribution&&i.indexOf(v.attribution)<0&&i.push(v.attribution)}}i.sort(function(E,P){return E.length-P.length});var x=(i=i.filter(function(E,P){for(var z=P+1;z<i.length;z++)if(i[z].indexOf(E)>=0)return!1;return!0})).join(" | ");x!==this._attribHTML&&(this._attribHTML=x,i.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},mi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Yo=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};Yo.prototype.onAdd=function(i){this._map=i,this._container=D.create("div","mapboxgl-ctrl");var s=D.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Yo.prototype.onRemove=function(){D.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Yo.prototype.getDefaultPosition=function(){return"bottom-left"},Yo.prototype._updateLogo=function(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Yo.prototype._logoRequired=function(){if(this._map.style){var i=this._map.style.sourceCaches;for(var s in i)if(i[s].getSource().mapbox_logo)return!0;return!1}},Yo.prototype._updateCompact=function(){var i=this._container.children;if(i.length){var s=i[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var ni=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ni.prototype.add=function(i){var s=++this._id;return this._queue.push({callback:i,id:s,cancelled:!1}),s},ni.prototype.remove=function(i){for(var s=this._currentlyRunning,o=0,c=s?this._queue.concat(s):this._queue;o<c.length;o+=1){var d=c[o];if(d.id===i)return void(d.cancelled=!0)}},ni.prototype.run=function(i){i===void 0&&(i=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,c=s;o<c.length;o+=1){var d=c[o];if(!d.cancelled&&(d.callback(i),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ni.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var pa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Wc=l.window.HTMLImageElement,zl=l.window.HTMLElement,Er=l.window.ImageBitmap,Xn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},bh=function(i){function s(c){var d=this;if((c=l.extend({},Xn,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var v=new qt(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(i.call(this,v,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new ni,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},pa,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new l.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=l.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof zl))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return d._update(!1)}),this.on("moveend",function(){return d._update(!1)}),this.on("zoom",function(){return d._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ft(this,c),this._hash=c.hash&&new Wn(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,l.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new mi({customAttribution:c.customAttribution})),this.addControl(new Yo,c.logoPosition),this.on("style.load",function(){d.transform.unmodified&&d.jumpTo(d.style.stylesheet)}),this.on("data",function(x){d._update(x.dataType==="style"),d.fire(new l.Event(x.dataType+"data",x))}),this.on("dataloading",function(x){d.fire(new l.Event(x.dataType+"dataloading",x))})}i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,d){if(d===void 0&&(d=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var v=c.onAdd(this);this._controls.push(c);var x=this._controlPositions[d];return d.indexOf("bottom")!==-1?x.insertBefore(v,x.firstChild):x.appendChild(v),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var d=this._controls.indexOf(c);return d>-1&&this._controls.splice(d,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var d=this._containerDimensions(),v=d[0],x=d[1];if(v===this.transform.width&&x===this.transform.height)return this;this._resizeCanvas(v,x),this.transform.resize(v,x),this.painter.resize(v,x);var E=!this._moving;return E&&this.fire(new l.Event("movestart",c)).fire(new l.Event("move",c)),this.fire(new l.Event("resize",c)),E&&this.fire(new l.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(l.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c==null?-2:c)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c==null?22:c)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c==null?0:c)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c==null?60:c)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(l.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(l.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,d,v){var x,E=this;if(c==="mouseenter"||c==="mouseover"){var P=!1;return{layer:d,listener:v,delegates:{mousemove:function(N){var V=E.getLayer(d)?E.queryRenderedFeatures(N.point,{layers:[d]}):[];V.length?P||(P=!0,v.call(E,new cn(c,E,N.originalEvent,{features:V}))):P=!1},mouseout:function(){P=!1}}}}if(c==="mouseleave"||c==="mouseout"){var z=!1;return{layer:d,listener:v,delegates:{mousemove:function(N){(E.getLayer(d)?E.queryRenderedFeatures(N.point,{layers:[d]}):[]).length?z=!0:z&&(z=!1,v.call(E,new cn(c,E,N.originalEvent)))},mouseout:function(N){z&&(z=!1,v.call(E,new cn(c,E,N.originalEvent)))}}}}return{layer:d,listener:v,delegates:(x={},x[c]=function(N){var V=E.getLayer(d)?E.queryRenderedFeatures(N.point,{layers:[d]}):[];V.length&&(N.features=V,v.call(E,N),delete N.features)},x)}},s.prototype.on=function(c,d,v){if(v===void 0)return i.prototype.on.call(this,c,d);var x=this._createDelegatedListener(c,d,v);for(var E in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(x),x.delegates)this.on(E,x.delegates[E]);return this},s.prototype.once=function(c,d,v){if(v===void 0)return i.prototype.once.call(this,c,d);var x=this._createDelegatedListener(c,d,v);for(var E in x.delegates)this.once(E,x.delegates[E]);return this},s.prototype.off=function(c,d,v){var x=this;return v===void 0?i.prototype.off.call(this,c,d):(this._delegatedListeners&&this._delegatedListeners[c]&&function(E){for(var P=E[c],z=0;z<P.length;z++){var N=P[z];if(N.layer===d&&N.listener===v){for(var V in N.delegates)x.off(V,N.delegates[V]);return P.splice(z,1),x}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,d){if(!this.style)return[];var v;if(d!==void 0||c===void 0||c instanceof l.Point||Array.isArray(c)||(d=c,c=void 0),d=d||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof c[0]=="number")v=[l.Point.convert(c)];else{var x=l.Point.convert(c[0]),E=l.Point.convert(c[1]);v=[x,new l.Point(E.x,x.y),E,new l.Point(x.x,E.y),x]}return this.style.queryRenderedFeatures(v,d,this.transform)},s.prototype.querySourceFeatures=function(c,d){return this.style.querySourceFeatures(c,d)},s.prototype.setStyle=function(c,d){return(d=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._updateStyle(c,d))},s.prototype._getUIString=function(c){var d=this._locale[c];if(d==null)throw new Error("Missing UI string '"+c+"'");return d},s.prototype._updateStyle=function(c,d){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new jr(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new jr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,d){var v=this;if(typeof c=="string"){var x=this._requestManager.normalizeStyleURL(c),E=this._requestManager.transformRequest(x,l.ResourceType.Style);l.getJSON(E,function(P,z){P?v.fire(new l.ErrorEvent(P)):z&&v._updateDiff(z,d)})}else typeof c=="object"&&this._updateDiff(c,d)},s.prototype._updateDiff=function(c,d){try{this.style.setState(c)&&this._update(!0)}catch(v){l.warnOnce("Unable to perform style diff: "+(v.message||v.error||v)+".  Rebuilding the style from scratch."),this._updateStyle(c,d)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,d){return this._lazyInitEmptyStyle(),this.style.addSource(c,d),this._update(!0)},s.prototype.isSourceLoaded=function(c){var d=this.style&&this.style.sourceCaches[c];if(d!==void 0)return d.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var d in c){var v=c[d]._tiles;for(var x in v){var E=v[x];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,d,v){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,d,v)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,d,v){v===void 0&&(v={});var x=v.pixelRatio;x===void 0&&(x=1);var E=v.sdf;E===void 0&&(E=!1);var P=v.stretchX,z=v.stretchY,N=v.content;if(this._lazyInitEmptyStyle(),d instanceof Wc||Er&&d instanceof Er){var V=l.browser.getImageData(d);this.style.addImage(c,{data:new l.RGBAImage({width:V.width,height:V.height},V.data),pixelRatio:x,stretchX:P,stretchY:z,content:N,sdf:E,version:0})}else{if(d.width===void 0||d.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var q=d;this.style.addImage(c,{data:new l.RGBAImage({width:d.width,height:d.height},new Uint8Array(d.data)),pixelRatio:x,stretchX:P,stretchY:z,content:N,sdf:E,version:0,userImage:q}),q.onAdd&&q.onAdd(this,c)}},s.prototype.updateImage=function(c,d){var v=this.style.getImage(c);if(!v)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var x=d instanceof Wc||Er&&d instanceof Er?l.browser.getImageData(d):d,E=x.width,P=x.height,z=x.data;return E===void 0||P===void 0?this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):E!==v.data.width||P!==v.data.height?this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(v.data.replace(z,!(d instanceof Wc||Er&&d instanceof Er)),void this.style.updateImage(c,v))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,d){l.getImage(this._requestManager.transformRequest(c,l.ResourceType.Image),d)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,d){return this._lazyInitEmptyStyle(),this.style.addLayer(c,d),this._update(!0)},s.prototype.moveLayer=function(c,d){return this.style.moveLayer(c,d),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,d,v){return this.style.setLayerZoomRange(c,d,v),this._update(!0)},s.prototype.setFilter=function(c,d,v){return v===void 0&&(v={}),this.style.setFilter(c,d,v),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,d,v,x){return x===void 0&&(x={}),this.style.setPaintProperty(c,d,v,x),this._update(!0)},s.prototype.getPaintProperty=function(c,d){return this.style.getPaintProperty(c,d)},s.prototype.setLayoutProperty=function(c,d,v,x){return x===void 0&&(x={}),this.style.setLayoutProperty(c,d,v,x),this._update(!0)},s.prototype.getLayoutProperty=function(c,d){return this.style.getLayoutProperty(c,d)},s.prototype.setLight=function(c,d){return d===void 0&&(d={}),this._lazyInitEmptyStyle(),this.style.setLight(c,d),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,d){return this.style.setFeatureState(c,d),this._update()},s.prototype.removeFeatureState=function(c,d){return this.style.removeFeatureState(c,d),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,d=0;return this._container&&(c=this._container.clientWidth||400,d=this._container.clientHeight||300),[c,d]},s.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=D.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var d=this._canvasContainer=D.create("div","mapboxgl-canvas-container",c);this._interactive&&d.classList.add("mapboxgl-interactive"),this._canvas=D.create("canvas","mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var v=this._containerDimensions();this._resizeCanvas(v[0],v[1]);var x=this._controlContainer=D.create("div","mapboxgl-control-container",c),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(P){E[P]=D.create("div","mapboxgl-ctrl-"+P,x)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,d){var v=l.browser.devicePixelRatio||1;this._canvas.width=v*c,this._canvas.height=v*d,this._canvas.style.width=c+"px",this._canvas.style.height=d+"px"},s.prototype._setupPainter=function(){var c=l.extend({},L.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);d?(this.painter=new Ar(d,this.transform),l.webpSupported.testSupport(d)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var d,v=this,x=0,E=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(d=E.createQueryEXT(),E.beginQueryEXT(E.TIME_ELAPSED_EXT,d),x=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var P=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var z=this.transform.zoom,N=l.browser.now();this.style.zoomHistory.update(z,N);var V=new l.EvaluationParameters(z,{now:N,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),q=V.crossFadingFactor();q===1&&q===this._crossFadingFactor||(P=!0,this._crossFadingFactor=q),this.style.update(V)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||P)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var $=l.browser.now()-x;E.endQueryEXT(E.TIME_ELAPSED_EXT,d),setTimeout(function(){var G=E.getQueryObjectEXT(d,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(d),v.fire(new l.Event("gpu-timing-frame",{cpuTime:$,gpuTime:G}))},50)}if(this.listens("gpu-timing-layer")){var H=this.painter.collectGpuTimers();setTimeout(function(){var G=v.painter.queryGpuTimers(H);v.fire(new l.Event("gpu-timing-layer",{layerTimes:G}))},50)}var te=this._sourcesDirty||this._styleDirty||this._placementDirty;return te||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||te||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,d=this._controls;c<d.length;c+=1)d[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),As(this._canvasContainer),As(this._controlContainer),As(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(d){c._frame=null,c._render(d)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,d){l.setCacheLimits(c,d)},o.version.get=function(){return l.version},Object.defineProperties(s.prototype,o),s}(Ml);function As(i){i.parentNode&&i.parentNode.removeChild(i)}var Xc={showCompass:!0,showZoom:!0,visualizePitch:!1},Fa=function(i){var s=this;this.options=l.extend({},Xc,i),this._container=D.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(o){return o.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(o){return s._map.zoomIn({},{originalEvent:o})}),D.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(o){return s._map.zoomOut({},{originalEvent:o})}),D.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(o){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:o}):s._map.resetNorth({},{originalEvent:o})}),this._compassIcon=D.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Fa.prototype._updateZoomButtons=function(){var i=this._map.getZoom(),s=i===this._map.getMaxZoom(),o=i===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())},Fa.prototype._rotateCompassArrow=function(){var i=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=i},Fa.prototype.onAdd=function(i){return this._map=i,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Qi(this._map,this._compass,this.options.visualizePitch)),this._container},Fa.prototype.onRemove=function(){D.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Fa.prototype._createButton=function(i,s){var o=D.create("button",i,this._container);return o.type="button",o.addEventListener("click",s),o},Fa.prototype._setButtonTitle=function(i,s){var o=this._map._getUIString("NavigationControl."+s);i.title=o,i.setAttribute("aria-label",o)};var Qi=function(i,s,o){o===void 0&&(o=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new Pl({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,o&&(this.mousePitch=new qc({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),D.addEventListener(s,"mousedown",this.mousedown),D.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),D.addEventListener(s,"touchmove",this.touchmove),D.addEventListener(s,"touchend",this.touchend),D.addEventListener(s,"touchcancel",this.reset)};function Qs(i,s,o){if(i=new l.LngLat(i.lng,i.lat),s){var c=new l.LngLat(i.lng-360,i.lat),d=new l.LngLat(i.lng+360,i.lat),v=o.locationPoint(i).distSqr(s);o.locationPoint(c).distSqr(s)<v?i=c:o.locationPoint(d).distSqr(s)<v&&(i=d)}for(;Math.abs(i.lng-o.center.lng)>180;){var x=o.locationPoint(i);if(x.x>=0&&x.y>=0&&x.x<=o.width&&x.y<=o.height)break;i.lng>o.center.lng?i.lng-=360:i.lng+=360}return i}Qi.prototype.down=function(i,s){this.mouseRotate.mousedown(i,s),this.mousePitch&&this.mousePitch.mousedown(i,s),D.disableDrag()},Qi.prototype.move=function(i,s){var o=this.map,c=this.mouseRotate.mousemoveWindow(i,s);if(c&&c.bearingDelta&&o.setBearing(o.getBearing()+c.bearingDelta),this.mousePitch){var d=this.mousePitch.mousemoveWindow(i,s);d&&d.pitchDelta&&o.setPitch(o.getPitch()+d.pitchDelta)}},Qi.prototype.off=function(){var i=this.element;D.removeEventListener(i,"mousedown",this.mousedown),D.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),D.removeEventListener(i,"touchmove",this.touchmove),D.removeEventListener(i,"touchend",this.touchend),D.removeEventListener(i,"touchcancel",this.reset),this.offTemp()},Qi.prototype.offTemp=function(){D.enableDrag(),D.removeEventListener(l.window,"mousemove",this.mousemove),D.removeEventListener(l.window,"mouseup",this.mouseup)},Qi.prototype.mousedown=function(i){this.down(l.extend({},i,{ctrlKey:!0,preventDefault:function(){return i.preventDefault()}}),D.mousePos(this.element,i)),D.addEventListener(l.window,"mousemove",this.mousemove),D.addEventListener(l.window,"mouseup",this.mouseup)},Qi.prototype.mousemove=function(i){this.move(i,D.mousePos(this.element,i))},Qi.prototype.mouseup=function(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()},Qi.prototype.touchstart=function(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=D.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return i.preventDefault()}},this._startPos))},Qi.prototype.touchmove=function(i){i.targetTouches.length!==1?this.reset():(this._lastPos=D.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:function(){return i.preventDefault()}},this._lastPos))},Qi.prototype.touchend=function(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Qi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ha={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ll(i,s,o){var c=i.classList;for(var d in ha)c.remove("mapboxgl-"+o+"-anchor-"+d);c.add("mapboxgl-"+o+"-anchor-"+s)}var eu,Vu=function(i){function s(o,c){if(i.call(this),(o instanceof l.window.HTMLElement||c)&&(o=l.extend({element:o},c)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=l.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=D.create("div"),this._element.setAttribute("aria-label","Map marker");var d=D.createNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height","41px"),d.setAttributeNS(null,"width","27px"),d.setAttributeNS(null,"viewBox","0 0 27 41");var v=D.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");var x=D.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"fill-rule","nonzero");var E=D.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");for(var P=0,z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];P<z.length;P+=1){var N=z[P],V=D.createNS("http://www.w3.org/2000/svg","ellipse");V.setAttributeNS(null,"opacity","0.04"),V.setAttributeNS(null,"cx","10.5"),V.setAttributeNS(null,"cy","5.80029008"),V.setAttributeNS(null,"rx",N.rx),V.setAttributeNS(null,"ry",N.ry),E.appendChild(V)}var q=D.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill",this._color);var $=D.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),q.appendChild($);var H=D.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");var te=D.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(te);var G=D.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(6.0, 7.0)"),G.setAttributeNS(null,"fill","#FFFFFF");var ee=D.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");var se=D.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");var ye=D.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#FFFFFF"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962"),ee.appendChild(se),ee.appendChild(ye),x.appendChild(E),x.appendChild(q),x.appendChild(H),x.appendChild(G),x.appendChild(ee),d.appendChild(x),d.setAttributeNS(null,"height",41*this._scale+"px"),d.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(d),this._offset=l.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ce){Ce.preventDefault()}),this._element.addEventListener("mousedown",function(Ce){Ce.preventDefault()}),Ll(this._element,this._anchor,"marker"),this._popup=null}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.addTo=function(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),D.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=l.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(o){var c=o.code,d=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&d!==32&&d!==13||this.togglePopup()},s.prototype._onMapClick=function(o){var c=o.originalEvent.target,d=this._element;this._popup&&(c===d||d.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this},s.prototype._update=function(o){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Qs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var d="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?d="rotateX(0deg)":this._pitchAlignment==="map"&&(d="rotateX("+this._map.getPitch()+"deg)"),o&&o.type!=="moveend"||(this._pos=this._pos.round()),D.setTransform(this._element,ha[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+d+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(o){return this._offset=l.Point.convert(o),this._update(),this},s.prototype._onMove=function(o){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(o){return this._rotation=o||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(o){return this._rotationAlignment=o||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(l.Evented),Kc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},tu=0,Ms=!1,Hc=function(i){function s(o){i.call(this),this.options=l.extend({},Kc,o),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.onAdd=function(o){var c;return this._map=o,this._container=D.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,eu!==void 0?c(eu):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(d){c(eu=d.state!=="denied")}):c(eu=!!l.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),D.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,tu=0,Ms=!1},s.prototype._isOutOfMapMaxBounds=function(o){var c=this._map.getMaxBounds(),d=o.coords;return c&&(d.longitude<c.getWest()||d.longitude>c.getEast()||d.latitude<c.getSouth()||d.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",o)),this._finish()}},s.prototype._updateCamera=function(o){var c=new l.LngLat(o.coords.longitude,o.coords.latitude),d=o.coords.accuracy,v=this._map.getBearing(),x=l.extend({bearing:v},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(d),x,{geolocateSource:!0})},s.prototype._updateMarker=function(o){if(o){var c=new l.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var o=this._map._container.clientHeight/2,c=this._map.unproject([0,o]),d=this._map.unproject([1,o]),v=c.distanceTo(d),x=Math.ceil(2*this._accuracy/v);this._circleElement.style.width=x+"px",this._circleElement.style.height=x+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&Ms)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",o)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(o){var c=this;if(this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this._geolocateButton=D.create("button","mapboxgl-ctrl-geolocate",this._container),D.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",o===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{var v=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=v,this._geolocateButton.setAttribute("aria-label",v)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=D.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Vu(this._dotElement),this._circleElement=D.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Vu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(x){x.geolocateSource||c._watchState!=="ACTIVE_LOCK"||x.originalEvent&&x.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new l.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":tu--,Ms=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++tu>1?(o={maximumAge:6e5,timeout:0},Ms=!0):(o=this.options.positionOptions,Ms=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(l.Evented),Ya={maxWidth:100,unit:"metric"},Ja=function(i){this.options=l.extend({},Ya,i),l.bindAll(["_onMove","setUnit"],this)};function Dl(i,s,o){var c=o&&o.maxWidth||100,d=i._container.clientHeight/2,v=i.unproject([0,d]),x=i.unproject([c,d]),E=v.distanceTo(x);if(o&&o.unit==="imperial"){var P=3.2808*E;P>5280?Qa(s,c,P/5280,i._getUIString("ScaleControl.Miles")):Qa(s,c,P,i._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Qa(s,c,E/1852,i._getUIString("ScaleControl.NauticalMiles")):E>=1e3?Qa(s,c,E/1e3,i._getUIString("ScaleControl.Kilometers")):Qa(s,c,E,i._getUIString("ScaleControl.Meters"))}function Qa(i,s,o,c){var d,v,x,E=(d=o,(v=Math.pow(10,(""+Math.floor(d)).length-1))*(x=(x=d/v)>=10?10:x>=5?5:x>=3?3:x>=2?2:x>=1?1:function(P){var z=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*z)/z}(x)));i.style.width=s*(E/o)+"px",i.innerHTML=E+"&nbsp;"+c}Ja.prototype.getDefaultPosition=function(){return"bottom-left"},Ja.prototype._onMove=function(){Dl(this._map,this._container,this.options)},Ja.prototype.onAdd=function(i){return this._map=i,this._container=D.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",i.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ja.prototype.onRemove=function(){D.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ja.prototype.setUnit=function(i){this.options.unit=i,Dl(this._map,this._container,this.options)};var Mo=function(i){this._fullscreen=!1,i&&i.container&&(i.container instanceof l.window.HTMLElement?this._container=i.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};Mo.prototype.onAdd=function(i){return this._map=i,this._container||(this._container=this._map.getContainer()),this._controlContainer=D.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Mo.prototype.onRemove=function(){D.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Mo.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},Mo.prototype._setupUI=function(){var i=this._fullscreenButton=D.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);D.create("span","mapboxgl-ctrl-icon",i).setAttribute("aria-hidden",!0),i.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Mo.prototype._updateTitle=function(){var i=this._getTitle();this._fullscreenButton.setAttribute("aria-label",i),this._fullscreenButton.title=i},Mo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Mo.prototype._isFullscreen=function(){return this._fullscreen},Mo.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Mo.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var $c={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},qu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Yc=function(i){function s(o){i.call(this),this.options=l.extend(Object.create($c),o),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&D.remove(this._content),this._container&&(D.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=l.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(o){return this.setDOMContent(l.window.document.createTextNode(o))},s.prototype.setHTML=function(o){var c,d=l.window.document.createDocumentFragment(),v=l.window.document.createElement("body");for(v.innerHTML=o;c=v.firstChild;)d.appendChild(c);return this.setDOMContent(d)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(o){return this.options.maxWidth=o,this._update(),this},s.prototype.setDOMContent=function(o){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=D.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(o),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(o){this._container&&this._container.classList.add(o)},s.prototype.removeClassName=function(o){this._container&&this._container.classList.remove(o)},s.prototype.setOffset=function(o){return this.options.offset=o,this._update(),this},s.prototype.toggleClassName=function(o){if(this._container)return this._container.classList.toggle(o)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=D.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(o){this._update(o.point)},s.prototype._onMouseMove=function(o){this._update(o.point)},s.prototype._onDrag=function(o){this._update(o.point)},s.prototype._update=function(o){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=D.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=D.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(V){return c._container.classList.add(V)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Qs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||o)){var d=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat),v=this.options.anchor,x=function V(q){if(q){if(typeof q=="number"){var $=Math.round(Math.sqrt(.5*Math.pow(q,2)));return{center:new l.Point(0,0),top:new l.Point(0,q),"top-left":new l.Point($,$),"top-right":new l.Point(-$,$),bottom:new l.Point(0,-q),"bottom-left":new l.Point($,-$),"bottom-right":new l.Point(-$,-$),left:new l.Point(q,0),right:new l.Point(-q,0)}}if(q instanceof l.Point||Array.isArray(q)){var H=l.Point.convert(q);return{center:H,top:H,"top-left":H,"top-right":H,bottom:H,"bottom-left":H,"bottom-right":H,left:H,right:H}}return{center:l.Point.convert(q.center||[0,0]),top:l.Point.convert(q.top||[0,0]),"top-left":l.Point.convert(q["top-left"]||[0,0]),"top-right":l.Point.convert(q["top-right"]||[0,0]),bottom:l.Point.convert(q.bottom||[0,0]),"bottom-left":l.Point.convert(q["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(q["bottom-right"]||[0,0]),left:l.Point.convert(q.left||[0,0]),right:l.Point.convert(q.right||[0,0])}}return V(new l.Point(0,0))}(this.options.offset);if(!v){var E,P=this._container.offsetWidth,z=this._container.offsetHeight;E=d.y+x.bottom.y<z?["top"]:d.y>this._map.transform.height-z?["bottom"]:[],d.x<P/2?E.push("left"):d.x>this._map.transform.width-P/2&&E.push("right"),v=E.length===0?"bottom":E.join("-")}var N=d.add(x[v]).round();D.setTransform(this._container,ha[v]+" translate("+N.x+"px,"+N.y+"px)"),Ll(this._container,v,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var o=this._container.querySelector(qu);o&&o.focus()}},s.prototype._onClose=function(){this.remove()},s}(l.Evented),Ol={version:l.version,supported:L,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:bh,NavigationControl:Fa,GeolocateControl:Hc,AttributionControl:mi,ScaleControl:Ja,FullscreenControl:Mo,Popup:Yc,Marker:Vu,Style:jr,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){Te().acquire(Ee)},clearPrewarmedResources:function(){var i=st;i&&(i.isPreloaded()&&i.numActive()===1?(i.release(Ee),st=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(i){l.config.ACCESS_TOKEN=i},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(i){l.config.API_URL=i},get workerCount(){return Fe.workerCount},set workerCount(i){Fe.workerCount=i},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(i){l.config.MAX_PARALLEL_IMAGE_REQUESTS=i},clearStorage:function(i){l.clearTileCache(i)},workerUrl:""};return Ol}),g})})(Mg);var wS=Mg.exports,rf={exports:{}},Fr={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var zg=Object.getOwnPropertySymbols,Bw=Object.prototype.hasOwnProperty,Uw=Object.prototype.propertyIsEnumerable;function Nw(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function jw(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var a={},p=0;p<10;p++)a["_"+String.fromCharCode(p)]=p;var m=Object.getOwnPropertyNames(a).map(function(S){return a[S]});if(m.join("")!=="0123456789")return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach(function(S){g[S]=S}),Object.keys(Object.assign({},g)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Lg=jw()?Object.assign:function(r,a){for(var p,m=Nw(r),g,S=1;S<arguments.length;S++){p=Object(arguments[S]);for(var l in p)Bw.call(p,l)&&(m[l]=p[l]);if(zg){g=zg(p);for(var L=0;L<g.length;L++)Uw.call(p,g[L])&&(m[g[L]]=p[g[L]])}}return m};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd=Lg,pc=60103,Dg=60106;Fr.Fragment=60107;Fr.StrictMode=60108;Fr.Profiler=60114;var Og=60109,Fg=60110,Rg=60112;Fr.Suspense=60113;var Bg=60115,Ug=60116;if(typeof Symbol=="function"&&Symbol.for){var ja=Symbol.for;pc=ja("react.element"),Dg=ja("react.portal"),Fr.Fragment=ja("react.fragment"),Fr.StrictMode=ja("react.strict_mode"),Fr.Profiler=ja("react.profiler"),Og=ja("react.provider"),Fg=ja("react.context"),Rg=ja("react.forward_ref"),Fr.Suspense=ja("react.suspense"),Bg=ja("react.memo"),Ug=ja("react.lazy")}var Ng=typeof Symbol=="function"&&Symbol.iterator;function Vw(r){return r===null||typeof r!="object"?null:(r=Ng&&r[Ng]||r["@@iterator"],typeof r=="function"?r:null)}function Sp(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,p=1;p<arguments.length;p++)a+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vg={};function hc(r,a,p){this.props=r,this.context=a,this.refs=Vg,this.updater=p||jg}hc.prototype.isReactComponent={};hc.prototype.setState=function(r,a){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error(Sp(85));this.updater.enqueueSetState(this,r,a,"setState")};hc.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function qg(){}qg.prototype=hc.prototype;function Jd(r,a,p){this.props=r,this.context=a,this.refs=Vg,this.updater=p||jg}var Qd=Jd.prototype=new qg;Qd.constructor=Jd;Yd(Qd,hc.prototype);Qd.isPureReactComponent=!0;var em={current:null},Zg=Object.prototype.hasOwnProperty,Gg={key:!0,ref:!0,__self:!0,__source:!0};function Wg(r,a,p){var m,g={},S=null,l=null;if(a!=null)for(m in a.ref!==void 0&&(l=a.ref),a.key!==void 0&&(S=""+a.key),a)Zg.call(a,m)&&!Gg.hasOwnProperty(m)&&(g[m]=a[m]);var L=arguments.length-2;if(L===1)g.children=p;else if(1<L){for(var D=Array(L),J=0;J<L;J++)D[J]=arguments[J+2];g.children=D}if(r&&r.defaultProps)for(m in L=r.defaultProps,L)g[m]===void 0&&(g[m]=L[m]);return{$$typeof:pc,type:r,key:S,ref:l,props:g,_owner:em.current}}function qw(r,a){return{$$typeof:pc,type:r.type,key:a,ref:r.ref,props:r.props,_owner:r._owner}}function tm(r){return typeof r=="object"&&r!==null&&r.$$typeof===pc}function Zw(r){var a={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(p){return a[p]})}var Xg=/\/+/g;function rm(r,a){return typeof r=="object"&&r!==null&&r.key!=null?Zw(""+r.key):a.toString(36)}function nf(r,a,p,m,g){var S=typeof r;(S==="undefined"||S==="boolean")&&(r=null);var l=!1;if(r===null)l=!0;else switch(S){case"string":case"number":l=!0;break;case"object":switch(r.$$typeof){case pc:case Dg:l=!0}}if(l)return l=r,g=g(l),r=m===""?"."+rm(l,0):m,Array.isArray(g)?(p="",r!=null&&(p=r.replace(Xg,"$&/")+"/"),nf(g,a,p,"",function(J){return J})):g!=null&&(tm(g)&&(g=qw(g,p+(!g.key||l&&l.key===g.key?"":(""+g.key).replace(Xg,"$&/")+"/")+r)),a.push(g)),1;if(l=0,m=m===""?".":m+":",Array.isArray(r))for(var L=0;L<r.length;L++){S=r[L];var D=m+rm(S,L);l+=nf(S,a,p,D,g)}else if(D=Vw(r),typeof D=="function")for(r=D.call(r),L=0;!(S=r.next()).done;)S=S.value,D=m+rm(S,L++),l+=nf(S,a,p,D,g);else if(S==="object")throw a=""+r,Error(Sp(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a));return l}function of(r,a,p){if(r==null)return r;var m=[],g=0;return nf(r,m,"","",function(S){return a.call(p,S,g++)}),m}function Gw(r){if(r._status===-1){var a=r._result;a=a(),r._status=0,r._result=a,a.then(function(p){r._status===0&&(p=p.default,r._status=1,r._result=p)},function(p){r._status===0&&(r._status=2,r._result=p)})}if(r._status===1)return r._result;throw r._result}var Kg={current:null};function Ns(){var r=Kg.current;if(r===null)throw Error(Sp(321));return r}var Ww={ReactCurrentDispatcher:Kg,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:em,IsSomeRendererActing:{current:!1},assign:Yd};Fr.Children={map:of,forEach:function(r,a,p){of(r,function(){a.apply(this,arguments)},p)},count:function(r){var a=0;return of(r,function(){a++}),a},toArray:function(r){return of(r,function(a){return a})||[]},only:function(r){if(!tm(r))throw Error(Sp(143));return r}};Fr.Component=hc;Fr.PureComponent=Jd;Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ww;Fr.cloneElement=function(r,a,p){if(r==null)throw Error(Sp(267,r));var m=Yd({},r.props),g=r.key,S=r.ref,l=r._owner;if(a!=null){if(a.ref!==void 0&&(S=a.ref,l=em.current),a.key!==void 0&&(g=""+a.key),r.type&&r.type.defaultProps)var L=r.type.defaultProps;for(D in a)Zg.call(a,D)&&!Gg.hasOwnProperty(D)&&(m[D]=a[D]===void 0&&L!==void 0?L[D]:a[D])}var D=arguments.length-2;if(D===1)m.children=p;else if(1<D){L=Array(D);for(var J=0;J<D;J++)L[J]=arguments[J+2];m.children=L}return{$$typeof:pc,type:r.type,key:g,ref:S,props:m,_owner:l}};Fr.createContext=function(r,a){return a===void 0&&(a=null),r={$$typeof:Fg,_calculateChangedBits:a,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null},r.Provider={$$typeof:Og,_context:r},r.Consumer=r};Fr.createElement=Wg;Fr.createFactory=function(r){var a=Wg.bind(null,r);return a.type=r,a};Fr.createRef=function(){return{current:null}};Fr.forwardRef=function(r){return{$$typeof:Rg,render:r}};Fr.isValidElement=tm;Fr.lazy=function(r){return{$$typeof:Ug,_payload:{_status:-1,_result:r},_init:Gw}};Fr.memo=function(r,a){return{$$typeof:Bg,type:r,compare:a===void 0?null:a}};Fr.useCallback=function(r,a){return Ns().useCallback(r,a)};Fr.useContext=function(r,a){return Ns().useContext(r,a)};Fr.useDebugValue=function(){};Fr.useEffect=function(r,a){return Ns().useEffect(r,a)};Fr.useImperativeHandle=function(r,a,p){return Ns().useImperativeHandle(r,a,p)};Fr.useLayoutEffect=function(r,a){return Ns().useLayoutEffect(r,a)};Fr.useMemo=function(r,a){return Ns().useMemo(r,a)};Fr.useReducer=function(r,a,p){return Ns().useReducer(r,a,p)};Fr.useRef=function(r){return Ns().useRef(r)};Fr.useState=function(r){return Ns().useState(r)};Fr.version="17.0.2";rf.exports=Fr;var Ep=rf.exports,Xw={exports:{}},Cp={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw=rf.exports,Hg=60103;Cp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var $g=Symbol.for;Hg=$g("react.element"),Cp.Fragment=$g("react.fragment")}var Hw=Kw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$w=Object.prototype.hasOwnProperty,Yw={key:!0,ref:!0,__self:!0,__source:!0};function Yg(r,a,p){var m,g={},S=null,l=null;p!==void 0&&(S=""+p),a.key!==void 0&&(S=""+a.key),a.ref!==void 0&&(l=a.ref);for(m in a)$w.call(a,m)&&!Yw.hasOwnProperty(m)&&(g[m]=a[m]);if(r&&r.defaultProps)for(m in a=r.defaultProps,a)g[m]===void 0&&(g[m]=a[m]);return{$$typeof:Hg,type:r,key:S,ref:l,props:g,_owner:Hw.current}}Cp.jsx=Yg;Cp.jsxs=Yg;Xw.exports=Cp;var Jg={exports:{}},ya={},Qg={exports:{}},e_={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){var a,p,m,g;if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;r.unstable_now=function(){return S.now()}}else{var l=Date,L=l.now();r.unstable_now=function(){return l.now()-L}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var D=null,J=null,he=function(){if(D!==null)try{var $e=r.unstable_now();D(!0,$e),D=null}catch(At){throw setTimeout(he,0),At}};a=function($e){D!==null?setTimeout(a,0,$e):(D=$e,setTimeout(he,0))},p=function($e,At){J=setTimeout($e,At)},m=function(){clearTimeout(J)},r.unstable_shouldYield=function(){return!1},g=r.unstable_forceFrameRate=function(){}}else{var Ne=window.setTimeout,ne=window.clearTimeout;if(typeof console!="undefined"){var Oe=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof Oe!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var He=!1,rt=null,pe=-1,ae=5,le=0;r.unstable_shouldYield=function(){return r.unstable_now()>=le},g=function(){},r.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<$e?Math.floor(1e3/$e):5};var Pe=new MessageChannel,Me=Pe.port2;Pe.port1.onmessage=function(){if(rt!==null){var $e=r.unstable_now();le=$e+ae;try{rt(!0,$e)?Me.postMessage(null):(He=!1,rt=null)}catch(At){throw Me.postMessage(null),At}}else He=!1},a=function($e){rt=$e,He||(He=!0,Me.postMessage(null))},p=function($e,At){pe=Ne(function(){$e(r.unstable_now())},At)},m=function(){ne(pe),pe=-1}}function yt($e,At){var Xt=$e.length;$e.push(At);e:for(;;){var Lr=Xt-1>>>1,Zr=$e[Lr];if(Zr!==void 0&&0<Ot(Zr,At))$e[Lr]=At,$e[Xt]=Zr,Xt=Lr;else break e}}function Ze($e){return $e=$e[0],$e===void 0?null:$e}function It($e){var At=$e[0];if(At!==void 0){var Xt=$e.pop();if(Xt!==At){$e[0]=Xt;e:for(var Lr=0,Zr=$e.length;Lr<Zr;){var ao=2*(Lr+1)-1,Jr=$e[ao],ii=ao+1,sr=$e[ii];if(Jr!==void 0&&0>Ot(Jr,Xt))sr!==void 0&&0>Ot(sr,Jr)?($e[Lr]=sr,$e[ii]=Xt,Lr=ii):($e[Lr]=Jr,$e[ao]=Xt,Lr=ao);else if(sr!==void 0&&0>Ot(sr,Xt))$e[Lr]=sr,$e[ii]=Xt,Lr=ii;else break e}}return At}return null}function Ot($e,At){var Xt=$e.sortIndex-At.sortIndex;return Xt!==0?Xt:$e.id-At.id}var pt=[],er=[],br=1,Rr=null,Ut=3,ir=!1,qr=!1,zr=!1;function Qn($e){for(var At=Ze(er);At!==null;){if(At.callback===null)It(er);else if(At.startTime<=$e)It(er),At.sortIndex=At.expirationTime,yt(pt,At);else break;At=Ze(er)}}function Tn($e){if(zr=!1,Qn($e),!qr)if(Ze(pt)!==null)qr=!0,a(ei);else{var At=Ze(er);At!==null&&p(Tn,At.startTime-$e)}}function ei($e,At){qr=!1,zr&&(zr=!1,m()),ir=!0;var Xt=Ut;try{for(Qn(At),Rr=Ze(pt);Rr!==null&&(!(Rr.expirationTime>At)||$e&&!r.unstable_shouldYield());){var Lr=Rr.callback;if(typeof Lr=="function"){Rr.callback=null,Ut=Rr.priorityLevel;var Zr=Lr(Rr.expirationTime<=At);At=r.unstable_now(),typeof Zr=="function"?Rr.callback=Zr:Rr===Ze(pt)&&It(pt),Qn(At)}else It(pt);Rr=Ze(pt)}if(Rr!==null)var ao=!0;else{var Jr=Ze(er);Jr!==null&&p(Tn,Jr.startTime-At),ao=!1}return ao}finally{Rr=null,Ut=Xt,ir=!1}}var Vt=g;r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($e){$e.callback=null},r.unstable_continueExecution=function(){qr||ir||(qr=!0,a(ei))},r.unstable_getCurrentPriorityLevel=function(){return Ut},r.unstable_getFirstCallbackNode=function(){return Ze(pt)},r.unstable_next=function($e){switch(Ut){case 1:case 2:case 3:var At=3;break;default:At=Ut}var Xt=Ut;Ut=At;try{return $e()}finally{Ut=Xt}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=Vt,r.unstable_runWithPriority=function($e,At){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var Xt=Ut;Ut=$e;try{return At()}finally{Ut=Xt}},r.unstable_scheduleCallback=function($e,At,Xt){var Lr=r.unstable_now();switch(typeof Xt=="object"&&Xt!==null?(Xt=Xt.delay,Xt=typeof Xt=="number"&&0<Xt?Lr+Xt:Lr):Xt=Lr,$e){case 1:var Zr=-1;break;case 2:Zr=250;break;case 5:Zr=1073741823;break;case 4:Zr=1e4;break;default:Zr=5e3}return Zr=Xt+Zr,$e={id:br++,callback:At,priorityLevel:$e,startTime:Xt,expirationTime:Zr,sortIndex:-1},Xt>Lr?($e.sortIndex=Xt,yt(er,$e),Ze(pt)===null&&$e===Ze(er)&&(zr?m():zr=!0,p(Tn,Xt-Lr))):($e.sortIndex=Zr,yt(pt,$e),qr||ir||(qr=!0,a(ei))),$e},r.unstable_wrapCallback=function($e){var At=Ut;return function(){var Xt=Ut;Ut=At;try{return $e.apply(this,arguments)}finally{Ut=Xt}}}})(e_);Qg.exports=e_;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af=rf.exports,Cn=Lg,xi=Qg.exports;function at(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,p=1;p<arguments.length;p++)a+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!af)throw Error(at(227));var t_=new Set,Tp={};function tl(r,a){fc(r,a),fc(r+"Capture",a)}function fc(r,a){for(Tp[r]=a,r=0;r<a.length;r++)t_.add(a[r])}var js=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Jw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r_=Object.prototype.hasOwnProperty,n_={},i_={};function Qw(r){return r_.call(i_,r)?!0:r_.call(n_,r)?!1:Jw.test(r)?i_[r]=!0:(n_[r]=!0,!1)}function eb(r,a,p,m){if(p!==null&&p.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:p!==null?!p.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function tb(r,a,p,m){if(a===null||typeof a=="undefined"||eb(r,a,p,m))return!0;if(m)return!1;if(p!==null)switch(p.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function go(r,a,p,m,g,S,l){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=g,this.mustUseProperty=p,this.propertyName=r,this.type=a,this.sanitizeURL=S,this.removeEmptyString=l}var zi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){zi[r]=new go(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];zi[a]=new go(a,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){zi[r]=new go(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){zi[r]=new go(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){zi[r]=new go(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){zi[r]=new go(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){zi[r]=new go(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){zi[r]=new go(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){zi[r]=new go(r,5,!1,r.toLowerCase(),null,!1,!1)});var nm=/[\-:]([a-z])/g;function im(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(nm,im);zi[a]=new go(a,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(nm,im);zi[a]=new go(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(nm,im);zi[a]=new go(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){zi[r]=new go(r,1,!1,r.toLowerCase(),null,!1,!1)});zi.xlinkHref=new go("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){zi[r]=new go(r,1,!1,r.toLowerCase(),null,!0,!0)});function om(r,a,p,m){var g=zi.hasOwnProperty(a)?zi[a]:null,S=g!==null?g.type===0:m?!1:!(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N");S||(tb(a,p,g,m)&&(p=null),m||g===null?Qw(a)&&(p===null?r.removeAttribute(a):r.setAttribute(a,""+p)):g.mustUseProperty?r[g.propertyName]=p===null?g.type===3?!1:"":p:(a=g.attributeName,m=g.attributeNamespace,p===null?r.removeAttribute(a):(g=g.type,p=g===3||g===4&&p===!0?"":""+p,m?r.setAttributeNS(m,a,p):r.setAttribute(a,p))))}var rl=af.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ip=60103,nl=60106,lu=60107,am=60108,Pp=60114,sm=60109,um=60110,sf=60112,kp=60113,uf=60120,lf=60115,lm=60116,cm=60121,pm=60128,o_=60129,hm=60130,fm=60131;if(typeof Symbol=="function"&&Symbol.for){var wi=Symbol.for;Ip=wi("react.element"),nl=wi("react.portal"),lu=wi("react.fragment"),am=wi("react.strict_mode"),Pp=wi("react.profiler"),sm=wi("react.provider"),um=wi("react.context"),sf=wi("react.forward_ref"),kp=wi("react.suspense"),uf=wi("react.suspense_list"),lf=wi("react.memo"),lm=wi("react.lazy"),cm=wi("react.block"),wi("react.scope"),pm=wi("react.opaque.id"),o_=wi("react.debug_trace_mode"),hm=wi("react.offscreen"),fm=wi("react.legacy_hidden")}var a_=typeof Symbol=="function"&&Symbol.iterator;function Ap(r){return r===null||typeof r!="object"?null:(r=a_&&r[a_]||r["@@iterator"],typeof r=="function"?r:null)}var dm;function Mp(r){if(dm===void 0)try{throw Error()}catch(p){var a=p.stack.trim().match(/\n( *(at )?)/);dm=a&&a[1]||""}return`
`+dm+r}var mm=!1;function cf(r,a){if(!r||mm)return"";mm=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(D){var m=D}Reflect.construct(r,[],a)}else{try{a.call()}catch(D){m=D}r.call(a.prototype)}else{try{throw Error()}catch(D){m=D}r()}}catch(D){if(D&&m&&typeof D.stack=="string"){for(var g=D.stack.split(`
`),S=m.stack.split(`
`),l=g.length-1,L=S.length-1;1<=l&&0<=L&&g[l]!==S[L];)L--;for(;1<=l&&0<=L;l--,L--)if(g[l]!==S[L]){if(l!==1||L!==1)do if(l--,L--,0>L||g[l]!==S[L])return`
`+g[l].replace(" at new "," at ");while(1<=l&&0<=L);break}}}finally{mm=!1,Error.prepareStackTrace=p}return(r=r?r.displayName||r.name:"")?Mp(r):""}function rb(r){switch(r.tag){case 5:return Mp(r.type);case 16:return Mp("Lazy");case 13:return Mp("Suspense");case 19:return Mp("SuspenseList");case 0:case 2:case 15:return r=cf(r.type,!1),r;case 11:return r=cf(r.type.render,!1),r;case 22:return r=cf(r.type._render,!1),r;case 1:return r=cf(r.type,!0),r;default:return""}}function dc(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case lu:return"Fragment";case nl:return"Portal";case Pp:return"Profiler";case am:return"StrictMode";case kp:return"Suspense";case uf:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case um:return(r.displayName||"Context")+".Consumer";case sm:return(r._context.displayName||"Context")+".Provider";case sf:var a=r.render;return a=a.displayName||a.name||"",r.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case lf:return dc(r.type);case cm:return dc(r._render);case lm:a=r._payload,r=r._init;try{return dc(r(a))}catch{}}return null}function cu(r){switch(typeof r){case"boolean":case"number":case"object":case"string":case"undefined":return r;default:return""}}function s_(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function nb(r){var a=s_(r)?"checked":"value",p=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),m=""+r[a];if(!r.hasOwnProperty(a)&&typeof p!="undefined"&&typeof p.get=="function"&&typeof p.set=="function"){var g=p.get,S=p.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return g.call(this)},set:function(l){m=""+l,S.call(this,l)}}),Object.defineProperty(r,a,{enumerable:p.enumerable}),{getValue:function(){return m},setValue:function(l){m=""+l},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function pf(r){r._valueTracker||(r._valueTracker=nb(r))}function u_(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var p=a.getValue(),m="";return r&&(m=s_(r)?r.checked?"true":"false":r.value),r=m,r!==p?(a.setValue(r),!0):!1}function hf(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch{return r.body}}function ym(r,a){var p=a.checked;return Cn({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p!=null?p:r._wrapperState.initialChecked})}function l_(r,a){var p=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;p=cu(a.value!=null?a.value:p),r._wrapperState={initialChecked:m,initialValue:p,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function c_(r,a){a=a.checked,a!=null&&om(r,"checked",a,!1)}function vm(r,a){c_(r,a);var p=cu(a.value),m=a.type;if(p!=null)m==="number"?(p===0&&r.value===""||r.value!=p)&&(r.value=""+p):r.value!==""+p&&(r.value=""+p);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?gm(r,a.type,p):a.hasOwnProperty("defaultValue")&&gm(r,a.type,cu(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function p_(r,a,p){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,p||a===r.value||(r.value=a),r.defaultValue=a}p=r.name,p!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,p!==""&&(r.name=p)}function gm(r,a,p){(a!=="number"||hf(r.ownerDocument)!==r)&&(p==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+p&&(r.defaultValue=""+p))}function ib(r){var a="";return af.Children.forEach(r,function(p){p!=null&&(a+=p)}),a}function _m(r,a){return r=Cn({children:void 0},a),(a=ib(a.children))&&(r.children=a),r}function mc(r,a,p,m){if(r=r.options,a){a={};for(var g=0;g<p.length;g++)a["$"+p[g]]=!0;for(p=0;p<r.length;p++)g=a.hasOwnProperty("$"+r[p].value),r[p].selected!==g&&(r[p].selected=g),g&&m&&(r[p].defaultSelected=!0)}else{for(p=""+cu(p),a=null,g=0;g<r.length;g++){if(r[g].value===p){r[g].selected=!0,m&&(r[g].defaultSelected=!0);return}a!==null||r[g].disabled||(a=r[g])}a!==null&&(a.selected=!0)}}function xm(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(at(91));return Cn({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function h_(r,a){var p=a.value;if(p==null){if(p=a.children,a=a.defaultValue,p!=null){if(a!=null)throw Error(at(92));if(Array.isArray(p)){if(!(1>=p.length))throw Error(at(93));p=p[0]}a=p}a==null&&(a=""),p=a}r._wrapperState={initialValue:cu(p)}}function f_(r,a){var p=cu(a.value),m=cu(a.defaultValue);p!=null&&(p=""+p,p!==r.value&&(r.value=p),a.defaultValue==null&&r.defaultValue!==p&&(r.defaultValue=p)),m!=null&&(r.defaultValue=""+m)}function d_(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}var wm={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function m_(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bm(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?m_(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ff,y_=function(r){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(a,p,m,g){MSApp.execUnsafeLocalFunction(function(){return r(a,p,m,g)})}:r}(function(r,a){if(r.namespaceURI!==wm.svg||"innerHTML"in r)r.innerHTML=a;else{for(ff=ff||document.createElement("div"),ff.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ff.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function zp(r,a){if(a){var p=r.firstChild;if(p&&p===r.lastChild&&p.nodeType===3){p.nodeValue=a;return}}r.textContent=a}var Lp={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ob=["Webkit","ms","Moz","O"];Object.keys(Lp).forEach(function(r){ob.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),Lp[a]=Lp[r]})});function v_(r,a,p){return a==null||typeof a=="boolean"||a===""?"":p||typeof a!="number"||a===0||Lp.hasOwnProperty(r)&&Lp[r]?(""+a).trim():a+"px"}function g_(r,a){r=r.style;for(var p in a)if(a.hasOwnProperty(p)){var m=p.indexOf("--")===0,g=v_(p,a[p],m);p==="float"&&(p="cssFloat"),m?r.setProperty(p,g):r[p]=g}}var ab=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sm(r,a){if(a){if(ab[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(at(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(at(60));if(!(typeof a.dangerouslySetInnerHTML=="object"&&"__html"in a.dangerouslySetInnerHTML))throw Error(at(61))}if(a.style!=null&&typeof a.style!="object")throw Error(at(62))}}function Em(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Cm(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Tm=null,yc=null,vc=null;function __(r){if(r=Jp(r)){if(typeof Tm!="function")throw Error(at(280));var a=r.stateNode;a&&(a=Mf(a),Tm(r.stateNode,r.type,a))}}function x_(r){yc?vc?vc.push(r):vc=[r]:yc=r}function w_(){if(yc){var r=yc,a=vc;if(vc=yc=null,__(r),a)for(r=0;r<a.length;r++)__(a[r])}}function Im(r,a){return r(a)}function b_(r,a,p,m,g){return r(a,p,m,g)}function Pm(){}var S_=Im,il=!1,km=!1;function Am(){(yc!==null||vc!==null)&&(Pm(),w_())}function sb(r,a,p){if(km)return r(a,p);km=!0;try{return S_(r,a,p)}finally{km=!1,Am()}}function Dp(r,a){var p=r.stateNode;if(p===null)return null;var m=Mf(p);if(m===null)return null;p=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(p&&typeof p!="function")throw Error(at(231,a,typeof p));return p}var Mm=!1;if(js)try{var Op={};Object.defineProperty(Op,"passive",{get:function(){Mm=!0}}),window.addEventListener("test",Op,Op),window.removeEventListener("test",Op,Op)}catch{Mm=!1}function ub(r,a,p,m,g,S,l,L,D){var J=Array.prototype.slice.call(arguments,3);try{a.apply(p,J)}catch(he){this.onError(he)}}var Fp=!1,df=null,mf=!1,zm=null,lb={onError:function(r){Fp=!0,df=r}};function cb(r,a,p,m,g,S,l,L,D){Fp=!1,df=null,ub.apply(lb,arguments)}function pb(r,a,p,m,g,S,l,L,D){if(cb.apply(this,arguments),Fp){if(Fp){var J=df;Fp=!1,df=null}else throw Error(at(198));mf||(mf=!0,zm=J)}}function ol(r){var a=r,p=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&1026)!=0&&(p=a.return),r=a.return;while(r)}return a.tag===3?p:null}function E_(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function C_(r){if(ol(r)!==r)throw Error(at(188))}function hb(r){var a=r.alternate;if(!a){if(a=ol(r),a===null)throw Error(at(188));return a!==r?null:r}for(var p=r,m=a;;){var g=p.return;if(g===null)break;var S=g.alternate;if(S===null){if(m=g.return,m!==null){p=m;continue}break}if(g.child===S.child){for(S=g.child;S;){if(S===p)return C_(g),r;if(S===m)return C_(g),a;S=S.sibling}throw Error(at(188))}if(p.return!==m.return)p=g,m=S;else{for(var l=!1,L=g.child;L;){if(L===p){l=!0,p=g,m=S;break}if(L===m){l=!0,m=g,p=S;break}L=L.sibling}if(!l){for(L=S.child;L;){if(L===p){l=!0,p=S,m=g;break}if(L===m){l=!0,m=S,p=g;break}L=L.sibling}if(!l)throw Error(at(189))}}if(p.alternate!==m)throw Error(at(190))}if(p.tag!==3)throw Error(at(188));return p.stateNode.current===p?r:a}function T_(r){if(r=hb(r),!r)return null;for(var a=r;;){if(a.tag===5||a.tag===6)return a;if(a.child)a.child.return=a,a=a.child;else{if(a===r)break;for(;!a.sibling;){if(!a.return||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}}return null}function I_(r,a){for(var p=r.alternate;a!==null;){if(a===r||a===p)return!0;a=a.return}return!1}var P_,Lm,k_,A_,Dm=!1,ls=[],pu=null,hu=null,fu=null,Rp=new Map,Bp=new Map,Up=[],M_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Om(r,a,p,m,g){return{blockedOn:r,domEventName:a,eventSystemFlags:p|16,nativeEvent:g,targetContainers:[m]}}function z_(r,a){switch(r){case"focusin":case"focusout":pu=null;break;case"dragenter":case"dragleave":hu=null;break;case"mouseover":case"mouseout":fu=null;break;case"pointerover":case"pointerout":Rp.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bp.delete(a.pointerId)}}function Np(r,a,p,m,g,S){return r===null||r.nativeEvent!==S?(r=Om(a,p,m,g,S),a!==null&&(a=Jp(a),a!==null&&Lm(a)),r):(r.eventSystemFlags|=m,a=r.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),r)}function fb(r,a,p,m,g){switch(a){case"focusin":return pu=Np(pu,r,a,p,m,g),!0;case"dragenter":return hu=Np(hu,r,a,p,m,g),!0;case"mouseover":return fu=Np(fu,r,a,p,m,g),!0;case"pointerover":var S=g.pointerId;return Rp.set(S,Np(Rp.get(S)||null,r,a,p,m,g)),!0;case"gotpointercapture":return S=g.pointerId,Bp.set(S,Np(Bp.get(S)||null,r,a,p,m,g)),!0}return!1}function db(r){var a=al(r.target);if(a!==null){var p=ol(a);if(p!==null){if(a=p.tag,a===13){if(a=E_(p),a!==null){r.blockedOn=a,A_(r.lanePriority,function(){xi.unstable_runWithPriority(r.priority,function(){k_(p)})});return}}else if(a===3&&p.stateNode.hydrate){r.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}r.blockedOn=null}function yf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var p=jm(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(p!==null)return a=Jp(p),a!==null&&Lm(a),r.blockedOn=p,!1;a.shift()}return!0}function L_(r,a,p){yf(r)&&p.delete(a)}function mb(){for(Dm=!1;0<ls.length;){var r=ls[0];if(r.blockedOn!==null){r=Jp(r.blockedOn),r!==null&&P_(r);break}for(var a=r.targetContainers;0<a.length;){var p=jm(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(p!==null){r.blockedOn=p;break}a.shift()}r.blockedOn===null&&ls.shift()}pu!==null&&yf(pu)&&(pu=null),hu!==null&&yf(hu)&&(hu=null),fu!==null&&yf(fu)&&(fu=null),Rp.forEach(L_),Bp.forEach(L_)}function jp(r,a){r.blockedOn===a&&(r.blockedOn=null,Dm||(Dm=!0,xi.unstable_scheduleCallback(xi.unstable_NormalPriority,mb)))}function D_(r){function a(g){return jp(g,r)}if(0<ls.length){jp(ls[0],r);for(var p=1;p<ls.length;p++){var m=ls[p];m.blockedOn===r&&(m.blockedOn=null)}}for(pu!==null&&jp(pu,r),hu!==null&&jp(hu,r),fu!==null&&jp(fu,r),Rp.forEach(a),Bp.forEach(a),p=0;p<Up.length;p++)m=Up[p],m.blockedOn===r&&(m.blockedOn=null);for(;0<Up.length&&(p=Up[0],p.blockedOn===null);)db(p),p.blockedOn===null&&Up.shift()}function vf(r,a){var p={};return p[r.toLowerCase()]=a.toLowerCase(),p["Webkit"+r]="webkit"+a,p["Moz"+r]="moz"+a,p}var gc={animationend:vf("Animation","AnimationEnd"),animationiteration:vf("Animation","AnimationIteration"),animationstart:vf("Animation","AnimationStart"),transitionend:vf("Transition","TransitionEnd")},Fm={},O_={};js&&(O_=document.createElement("div").style,"AnimationEvent"in window||(delete gc.animationend.animation,delete gc.animationiteration.animation,delete gc.animationstart.animation),"TransitionEvent"in window||delete gc.transitionend.transition);function gf(r){if(Fm[r])return Fm[r];if(!gc[r])return r;var a=gc[r],p;for(p in a)if(a.hasOwnProperty(p)&&p in O_)return Fm[r]=a[p];return r}var F_=gf("animationend"),R_=gf("animationiteration"),B_=gf("animationstart"),U_=gf("transitionend"),N_=new Map,Rm=new Map,yb=["abort","abort",F_,"animationEnd",R_,"animationIteration",B_,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",U_,"transitionEnd","waiting","waiting"];function Bm(r,a){for(var p=0;p<r.length;p+=2){var m=r[p],g=r[p+1];g="on"+(g[0].toUpperCase()+g.slice(1)),Rm.set(m,a),N_.set(m,g),tl(g,[m])}}var vb=xi.unstable_now;vb();var dn=8;function _c(r){if((1&r)!=0)return dn=15,1;if((2&r)!=0)return dn=14,2;if((4&r)!=0)return dn=13,4;var a=24&r;return a!==0?(dn=12,a):(r&32)!=0?(dn=11,32):(a=192&r,a!==0?(dn=10,a):(r&256)!=0?(dn=9,256):(a=3584&r,a!==0?(dn=8,a):(r&4096)!=0?(dn=7,4096):(a=4186112&r,a!==0?(dn=6,a):(a=62914560&r,a!==0?(dn=5,a):r&67108864?(dn=4,67108864):(r&134217728)!=0?(dn=3,134217728):(a=805306368&r,a!==0?(dn=2,a):(1073741824&r)!=0?(dn=1,1073741824):(dn=8,r))))))}function gb(r){switch(r){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function _b(r){switch(r){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(at(358,r))}}function Vp(r,a){var p=r.pendingLanes;if(p===0)return dn=0;var m=0,g=0,S=r.expiredLanes,l=r.suspendedLanes,L=r.pingedLanes;if(S!==0)m=S,g=dn=15;else if(S=p&134217727,S!==0){var D=S&~l;D!==0?(m=_c(D),g=dn):(L&=S,L!==0&&(m=_c(L),g=dn))}else S=p&~l,S!==0?(m=_c(S),g=dn):L!==0&&(m=_c(L),g=dn);if(m===0)return 0;if(m=31-du(m),m=p&((0>m?0:1<<m)<<1)-1,a!==0&&a!==m&&(a&l)==0){if(_c(a),g<=dn)return a;dn=g}if(a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=m;0<a;)p=31-du(a),g=1<<p,m|=r[p],a&=~g;return m}function j_(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function _f(r,a){switch(r){case 15:return 1;case 14:return 2;case 12:return r=xc(24&~a),r===0?_f(10,a):r;case 10:return r=xc(192&~a),r===0?_f(8,a):r;case 8:return r=xc(3584&~a),r===0&&(r=xc(4186112&~a),r===0&&(r=512)),r;case 2:return a=xc(805306368&~a),a===0&&(a=268435456),a}throw Error(at(358,r))}function xc(r){return r&-r}function Um(r){for(var a=[],p=0;31>p;p++)a.push(r);return a}function xf(r,a,p){r.pendingLanes|=a;var m=a-1;r.suspendedLanes&=m,r.pingedLanes&=m,r=r.eventTimes,a=31-du(a),r[a]=p}var du=Math.clz32?Math.clz32:bb,xb=Math.log,wb=Math.LN2;function bb(r){return r===0?32:31-(xb(r)/wb|0)|0}var Sb=xi.unstable_UserBlockingPriority,Eb=xi.unstable_runWithPriority,wf=!0;function Cb(r,a,p,m){il||Pm();var g=Nm,S=il;il=!0;try{b_(g,r,a,p,m)}finally{(il=S)||Am()}}function Tb(r,a,p,m){Eb(Sb,Nm.bind(null,r,a,p,m))}function Nm(r,a,p,m){if(wf){var g;if((g=(a&4)==0)&&0<ls.length&&-1<M_.indexOf(r))r=Om(null,r,a,p,m),ls.push(r);else{var S=jm(r,a,p,m);if(S===null)g&&z_(r,m);else{if(g){if(-1<M_.indexOf(r)){r=Om(S,r,a,p,m),ls.push(r);return}if(fb(S,r,a,p,m))return;z_(r,m)}v0(r,a,m,null,p)}}}}function jm(r,a,p,m){var g=Cm(m);if(g=al(g),g!==null){var S=ol(g);if(S===null)g=null;else{var l=S.tag;if(l===13){if(g=E_(S),g!==null)return g;g=null}else if(l===3){if(S.stateNode.hydrate)return S.tag===3?S.stateNode.containerInfo:null;g=null}else S!==g&&(g=null)}}return v0(r,a,m,g,p),null}var mu=null,Vm=null,bf=null;function V_(){if(bf)return bf;var r,a=Vm,p=a.length,m,g="value"in mu?mu.value:mu.textContent,S=g.length;for(r=0;r<p&&a[r]===g[r];r++);var l=p-r;for(m=1;m<=l&&a[p-m]===g[S-m];m++);return bf=g.slice(r,1<m?1-m:void 0)}function Sf(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Ef(){return!0}function q_(){return!1}function Qo(r){function a(p,m,g,S,l){this._reactName=p,this._targetInst=g,this.type=m,this.nativeEvent=S,this.target=l,this.currentTarget=null;for(var L in r)r.hasOwnProperty(L)&&(p=r[L],this[L]=p?p(S):S[L]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ef:q_,this.isPropagationStopped=q_,this}return Cn(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Ef)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Ef)},persist:function(){},isPersistent:Ef}),a}var wc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qm=Qo(wc),qp=Cn({},wc,{view:0,detail:0}),Ib=Qo(qp),Zm,Gm,Zp,Cf=Cn({},qp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xm,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Zp&&(Zp&&r.type==="mousemove"?(Zm=r.screenX-Zp.screenX,Gm=r.screenY-Zp.screenY):Gm=Zm=0,Zp=r),Zm)},movementY:function(r){return"movementY"in r?r.movementY:Gm}}),Z_=Qo(Cf),Pb=Cn({},Cf,{dataTransfer:0}),kb=Qo(Pb),Ab=Cn({},qp,{relatedTarget:0}),Wm=Qo(Ab),Mb=Cn({},wc,{animationName:0,elapsedTime:0,pseudoElement:0}),zb=Qo(Mb),Lb=Cn({},wc,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Db=Qo(Lb),Ob=Cn({},wc,{data:0}),G_=Qo(Ob),Fb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ub(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Bb[r])?!!a[r]:!1}function Xm(){return Ub}var Nb=Cn({},qp,{key:function(r){if(r.key){var a=Fb[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Sf(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Rb[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xm,charCode:function(r){return r.type==="keypress"?Sf(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Sf(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),jb=Qo(Nb),Vb=Cn({},Cf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W_=Qo(Vb),qb=Cn({},qp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xm}),Zb=Qo(qb),Gb=Cn({},wc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wb=Qo(Gb),Xb=Cn({},Cf,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Kb=Qo(Xb),Hb=[9,13,27,32],Km=js&&"CompositionEvent"in window,Gp=null;js&&"documentMode"in document&&(Gp=document.documentMode);var $b=js&&"TextEvent"in window&&!Gp,X_=js&&(!Km||Gp&&8<Gp&&11>=Gp),K_=String.fromCharCode(32),H_=!1;function $_(r,a){switch(r){case"keyup":return Hb.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y_(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var bc=!1;function Yb(r,a){switch(r){case"compositionend":return Y_(a);case"keypress":return a.which!==32?null:(H_=!0,K_);case"textInput":return r=a.data,r===K_&&H_?null:r;default:return null}}function Jb(r,a){if(bc)return r==="compositionend"||!Km&&$_(r,a)?(r=V_(),bf=Vm=mu=null,bc=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return X_&&a.locale!=="ko"?null:a.data;default:return null}}var Qb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J_(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Qb[r.type]:a==="textarea"}function Q_(r,a,p,m){x_(m),a=If(a,"onChange"),0<a.length&&(p=new qm("onChange","change",null,p,m),r.push({event:p,listeners:a}))}var Wp=null,Xp=null;function e2(r){h0(r,0)}function Tf(r){var a=Ic(r);if(u_(a))return r}function t2(r,a){if(r==="change")return a}var e0=!1;if(js){var Hm;if(js){var $m="oninput"in document;if(!$m){var t0=document.createElement("div");t0.setAttribute("oninput","return;"),$m=typeof t0.oninput=="function"}Hm=$m}else Hm=!1;e0=Hm&&(!document.documentMode||9<document.documentMode)}function r0(){Wp&&(Wp.detachEvent("onpropertychange",n0),Xp=Wp=null)}function n0(r){if(r.propertyName==="value"&&Tf(Xp)){var a=[];if(Q_(a,Xp,r,Cm(r)),r=e2,il)r(a);else{il=!0;try{Im(r,a)}finally{il=!1,Am()}}}}function r2(r,a,p){r==="focusin"?(r0(),Wp=a,Xp=p,Wp.attachEvent("onpropertychange",n0)):r==="focusout"&&r0()}function n2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Tf(Xp)}function i2(r,a){if(r==="click")return Tf(a)}function o2(r,a){if(r==="input"||r==="change")return Tf(a)}function a2(r,a){return r===a&&(r!==0||1/r==1/a)||r!==r&&a!==a}var va=typeof Object.is=="function"?Object.is:a2,s2=Object.prototype.hasOwnProperty;function Kp(r,a){if(va(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var p=Object.keys(r),m=Object.keys(a);if(p.length!==m.length)return!1;for(m=0;m<p.length;m++)if(!s2.call(a,p[m])||!va(r[p[m]],a[p[m]]))return!1;return!0}function i0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function o0(r,a){var p=i0(r);r=0;for(var m;p;){if(p.nodeType===3){if(m=r+p.textContent.length,r<=a&&m>=a)return{node:p,offset:a-r};r=m}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=i0(p)}}function a0(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?a0(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function s0(){for(var r=window,a=hf();a instanceof r.HTMLIFrameElement;){try{var p=typeof a.contentWindow.location.href=="string"}catch{p=!1}if(p)r=a.contentWindow;else break;a=hf(r.document)}return a}function Ym(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var u2=js&&"documentMode"in document&&11>=document.documentMode,Sc=null,Jm=null,Hp=null,Qm=!1;function u0(r,a,p){var m=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Qm||Sc==null||Sc!==hf(m)||(m=Sc,"selectionStart"in m&&Ym(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Hp&&Kp(Hp,m)||(Hp=m,m=If(Jm,"onSelect"),0<m.length&&(a=new qm("onSelect","select",null,a,p),r.push({event:a,listeners:m}),a.target=Sc)))}Bm("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Bm("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Bm(yb,2);for(var l0="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ey=0;ey<l0.length;ey++)Rm.set(l0[ey],0);fc("onMouseEnter",["mouseout","mouseover"]);fc("onMouseLeave",["mouseout","mouseover"]);fc("onPointerEnter",["pointerout","pointerover"]);fc("onPointerLeave",["pointerout","pointerover"]);tl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tl("onBeforeInput",["compositionend","keypress","textInput","paste"]);tl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $p="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c0=new Set("cancel close invalid load scroll toggle".split(" ").concat($p));function p0(r,a,p){var m=r.type||"unknown-event";r.currentTarget=p,pb(m,a,void 0,r),r.currentTarget=null}function h0(r,a){a=(a&4)!=0;for(var p=0;p<r.length;p++){var m=r[p],g=m.event;m=m.listeners;e:{var S=void 0;if(a)for(var l=m.length-1;0<=l;l--){var L=m[l],D=L.instance,J=L.currentTarget;if(L=L.listener,D!==S&&g.isPropagationStopped())break e;p0(g,L,J),S=D}else for(l=0;l<m.length;l++){if(L=m[l],D=L.instance,J=L.currentTarget,L=L.listener,D!==S&&g.isPropagationStopped())break e;p0(g,L,J),S=D}}}if(mf)throw r=zm,mf=!1,zm=null,r}function xn(r,a){var p=S0(a),m=r+"__bubble";p.has(m)||(y0(a,r,2,!1),p.add(m))}var f0="_reactListening"+Math.random().toString(36).slice(2);function d0(r){r[f0]||(r[f0]=!0,t_.forEach(function(a){c0.has(a)||m0(a,!1,r,null),m0(a,!0,r,null)}))}function m0(r,a,p,m){var g=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,S=p;if(r==="selectionchange"&&p.nodeType!==9&&(S=p.ownerDocument),m!==null&&!a&&c0.has(r)){if(r!=="scroll")return;g|=2,S=m}var l=S0(S),L=r+"__"+(a?"capture":"bubble");l.has(L)||(a&&(g|=4),y0(S,r,g,a),l.add(L))}function y0(r,a,p,m){var g=Rm.get(a);switch(g===void 0?2:g){case 0:g=Cb;break;case 1:g=Tb;break;default:g=Nm}p=g.bind(null,a,p,r),g=void 0,!Mm||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),m?g!==void 0?r.addEventListener(a,p,{capture:!0,passive:g}):r.addEventListener(a,p,!0):g!==void 0?r.addEventListener(a,p,{passive:g}):r.addEventListener(a,p,!1)}function v0(r,a,p,m,g){var S=m;if((a&1)==0&&(a&2)==0&&m!==null)e:for(;;){if(m===null)return;var l=m.tag;if(l===3||l===4){var L=m.stateNode.containerInfo;if(L===g||L.nodeType===8&&L.parentNode===g)break;if(l===4)for(l=m.return;l!==null;){var D=l.tag;if((D===3||D===4)&&(D=l.stateNode.containerInfo,D===g||D.nodeType===8&&D.parentNode===g))return;l=l.return}for(;L!==null;){if(l=al(L),l===null)return;if(D=l.tag,D===5||D===6){m=S=l;continue e}L=L.parentNode}}m=m.return}sb(function(){var J=S,he=Cm(p),Ne=[];e:{var ne=N_.get(r);if(ne!==void 0){var Oe=qm,He=r;switch(r){case"keypress":if(Sf(p)===0)break e;case"keydown":case"keyup":Oe=jb;break;case"focusin":He="focus",Oe=Wm;break;case"focusout":He="blur",Oe=Wm;break;case"beforeblur":case"afterblur":Oe=Wm;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=Z_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=kb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=Zb;break;case F_:case R_:case B_:Oe=zb;break;case U_:Oe=Wb;break;case"scroll":Oe=Ib;break;case"wheel":Oe=Kb;break;case"copy":case"cut":case"paste":Oe=Db;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=W_}var rt=(a&4)!=0,pe=!rt&&r==="scroll",ae=rt?ne!==null?ne+"Capture":null:ne;rt=[];for(var le=J,Pe;le!==null;){Pe=le;var Me=Pe.stateNode;if(Pe.tag===5&&Me!==null&&(Pe=Me,ae!==null&&(Me=Dp(le,ae),Me!=null&&rt.push(Yp(le,Me,Pe)))),pe)break;le=le.return}0<rt.length&&(ne=new Oe(ne,He,null,p,he),Ne.push({event:ne,listeners:rt}))}}if((a&7)==0){e:{if(ne=r==="mouseover"||r==="pointerover",Oe=r==="mouseout"||r==="pointerout",ne&&(a&16)==0&&(He=p.relatedTarget||p.fromElement)&&(al(He)||He[Tc]))break e;if((Oe||ne)&&(ne=he.window===he?he:(ne=he.ownerDocument)?ne.defaultView||ne.parentWindow:window,Oe?(He=p.relatedTarget||p.toElement,Oe=J,He=He?al(He):null,He!==null&&(pe=ol(He),He!==pe||He.tag!==5&&He.tag!==6)&&(He=null)):(Oe=null,He=J),Oe!==He)){if(rt=Z_,Me="onMouseLeave",ae="onMouseEnter",le="mouse",(r==="pointerout"||r==="pointerover")&&(rt=W_,Me="onPointerLeave",ae="onPointerEnter",le="pointer"),pe=Oe==null?ne:Ic(Oe),Pe=He==null?ne:Ic(He),ne=new rt(Me,le+"leave",Oe,p,he),ne.target=pe,ne.relatedTarget=Pe,Me=null,al(he)===J&&(rt=new rt(ae,le+"enter",He,p,he),rt.target=Pe,rt.relatedTarget=pe,Me=rt),pe=Me,Oe&&He)t:{for(rt=Oe,ae=He,le=0,Pe=rt;Pe;Pe=Ec(Pe))le++;for(Pe=0,Me=ae;Me;Me=Ec(Me))Pe++;for(;0<le-Pe;)rt=Ec(rt),le--;for(;0<Pe-le;)ae=Ec(ae),Pe--;for(;le--;){if(rt===ae||ae!==null&&rt===ae.alternate)break t;rt=Ec(rt),ae=Ec(ae)}rt=null}else rt=null;Oe!==null&&g0(Ne,ne,Oe,rt,!1),He!==null&&pe!==null&&g0(Ne,pe,He,rt,!0)}}e:{if(ne=J?Ic(J):window,Oe=ne.nodeName&&ne.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&ne.type==="file")var yt=t2;else if(J_(ne))if(e0)yt=o2;else{yt=n2;var Ze=r2}else(Oe=ne.nodeName)&&Oe.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(yt=i2);if(yt&&(yt=yt(r,J))){Q_(Ne,yt,p,he);break e}Ze&&Ze(r,ne,J),r==="focusout"&&(Ze=ne._wrapperState)&&Ze.controlled&&ne.type==="number"&&gm(ne,"number",ne.value)}switch(Ze=J?Ic(J):window,r){case"focusin":(J_(Ze)||Ze.contentEditable==="true")&&(Sc=Ze,Jm=J,Hp=null);break;case"focusout":Hp=Jm=Sc=null;break;case"mousedown":Qm=!0;break;case"contextmenu":case"mouseup":case"dragend":Qm=!1,u0(Ne,p,he);break;case"selectionchange":if(u2)break;case"keydown":case"keyup":u0(Ne,p,he)}var It;if(Km)e:{switch(r){case"compositionstart":var Ot="onCompositionStart";break e;case"compositionend":Ot="onCompositionEnd";break e;case"compositionupdate":Ot="onCompositionUpdate";break e}Ot=void 0}else bc?$_(r,p)&&(Ot="onCompositionEnd"):r==="keydown"&&p.keyCode===229&&(Ot="onCompositionStart");Ot&&(X_&&p.locale!=="ko"&&(bc||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&bc&&(It=V_()):(mu=he,Vm="value"in mu?mu.value:mu.textContent,bc=!0)),Ze=If(J,Ot),0<Ze.length&&(Ot=new G_(Ot,r,null,p,he),Ne.push({event:Ot,listeners:Ze}),It?Ot.data=It:(It=Y_(p),It!==null&&(Ot.data=It)))),(It=$b?Yb(r,p):Jb(r,p))&&(J=If(J,"onBeforeInput"),0<J.length&&(he=new G_("onBeforeInput","beforeinput",null,p,he),Ne.push({event:he,listeners:J}),he.data=It))}h0(Ne,a)})}function Yp(r,a,p){return{instance:r,listener:a,currentTarget:p}}function If(r,a){for(var p=a+"Capture",m=[];r!==null;){var g=r,S=g.stateNode;g.tag===5&&S!==null&&(g=S,S=Dp(r,p),S!=null&&m.unshift(Yp(r,S,g)),S=Dp(r,a),S!=null&&m.push(Yp(r,S,g))),r=r.return}return m}function Ec(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function g0(r,a,p,m,g){for(var S=a._reactName,l=[];p!==null&&p!==m;){var L=p,D=L.alternate,J=L.stateNode;if(D!==null&&D===m)break;L.tag===5&&J!==null&&(L=J,g?(D=Dp(p,S),D!=null&&l.unshift(Yp(p,D,L))):g||(D=Dp(p,S),D!=null&&l.push(Yp(p,D,L)))),p=p.return}l.length!==0&&r.push({event:a,listeners:l})}function Pf(){}var ty=null,ry=null;function _0(r,a){switch(r){case"button":case"input":case"select":case"textarea":return!!a.autoFocus}return!1}function ny(r,a){return r==="textarea"||r==="option"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var x0=typeof setTimeout=="function"?setTimeout:void 0,l2=typeof clearTimeout=="function"?clearTimeout:void 0;function iy(r){r.nodeType===1?r.textContent="":r.nodeType===9&&(r=r.body,r!=null&&(r.textContent=""))}function Cc(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break}return r}function w0(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var p=r.data;if(p==="$"||p==="$!"||p==="$?"){if(a===0)return r;a--}else p==="/$"&&a++}r=r.previousSibling}return null}var oy=0;function c2(r){return{$$typeof:pm,toString:r,valueOf:r}}var kf=Math.random().toString(36).slice(2),yu="__reactFiber$"+kf,Af="__reactProps$"+kf,Tc="__reactContainer$"+kf,b0="__reactEvents$"+kf;function al(r){var a=r[yu];if(a)return a;for(var p=r.parentNode;p;){if(a=p[Tc]||p[yu]){if(p=a.alternate,a.child!==null||p!==null&&p.child!==null)for(r=w0(r);r!==null;){if(p=r[yu])return p;r=w0(r)}return a}r=p,p=r.parentNode}return null}function Jp(r){return r=r[yu]||r[Tc],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ic(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(at(33))}function Mf(r){return r[Af]||null}function S0(r){var a=r[b0];return a===void 0&&(a=r[b0]=new Set),a}var ay=[],Pc=-1;function vu(r){return{current:r}}function wn(r){0>Pc||(r.current=ay[Pc],ay[Pc]=null,Pc--)}function jn(r,a){Pc++,ay[Pc]=r.current,r.current=a}var gu={},ro=vu(gu),Fo=vu(!1),sl=gu;function kc(r,a){var p=r.type.contextTypes;if(!p)return gu;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var g={},S;for(S in p)g[S]=a[S];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=g),g}function Ro(r){return r=r.childContextTypes,r!=null}function zf(){wn(Fo),wn(ro)}function E0(r,a,p){if(ro.current!==gu)throw Error(at(168));jn(ro,a),jn(Fo,p)}function C0(r,a,p){var m=r.stateNode;if(r=a.childContextTypes,typeof m.getChildContext!="function")return p;m=m.getChildContext();for(var g in m)if(!(g in r))throw Error(at(108,dc(a)||"Unknown",g));return Cn({},p,m)}function Lf(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||gu,sl=ro.current,jn(ro,r),jn(Fo,Fo.current),!0}function T0(r,a,p){var m=r.stateNode;if(!m)throw Error(at(169));p?(r=C0(r,a,sl),m.__reactInternalMemoizedMergedChildContext=r,wn(Fo),wn(ro),jn(ro,r)):wn(Fo),jn(Fo,p)}var sy=null,ul=null,p2=xi.unstable_runWithPriority,uy=xi.unstable_scheduleCallback,ly=xi.unstable_cancelCallback,h2=xi.unstable_shouldYield,I0=xi.unstable_requestPaint,cy=xi.unstable_now,f2=xi.unstable_getCurrentPriorityLevel,Df=xi.unstable_ImmediatePriority,P0=xi.unstable_UserBlockingPriority,k0=xi.unstable_NormalPriority,A0=xi.unstable_LowPriority,M0=xi.unstable_IdlePriority,py={},d2=I0!==void 0?I0:function(){},Vs=null,Of=null,hy=!1,z0=cy(),no=1e4>z0?cy:function(){return cy()-z0};function Ac(){switch(f2()){case Df:return 99;case P0:return 98;case k0:return 97;case A0:return 96;case M0:return 95;default:throw Error(at(332))}}function L0(r){switch(r){case 99:return Df;case 98:return P0;case 97:return k0;case 96:return A0;case 95:return M0;default:throw Error(at(332))}}function ll(r,a){return r=L0(r),p2(r,a)}function Qp(r,a,p){return r=L0(r),uy(r,a,p)}function cs(){if(Of!==null){var r=Of;Of=null,ly(r)}D0()}function D0(){if(!hy&&Vs!==null){hy=!0;var r=0;try{var a=Vs;ll(99,function(){for(;r<a.length;r++){var p=a[r];do p=p(!0);while(p!==null)}}),Vs=null}catch(p){throw Vs!==null&&(Vs=Vs.slice(r+1)),uy(Df,cs),p}finally{hy=!1}}}var m2=rl.ReactCurrentBatchConfig;function Va(r,a){if(r&&r.defaultProps){a=Cn({},a),r=r.defaultProps;for(var p in r)a[p]===void 0&&(a[p]=r[p]);return a}return a}var Ff=vu(null),Rf=null,Mc=null,Bf=null;function fy(){Bf=Mc=Rf=null}function dy(r){var a=Ff.current;wn(Ff),r.type._context._currentValue=a}function O0(r,a){for(;r!==null;){var p=r.alternate;if((r.childLanes&a)===a){if(p===null||(p.childLanes&a)===a)break;p.childLanes|=a}else r.childLanes|=a,p!==null&&(p.childLanes|=a);r=r.return}}function zc(r,a){Rf=r,Bf=Mc=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&a)!=0&&(qa=!0),r.firstContext=null)}function ga(r,a){if(Bf!==r&&a!==!1&&a!==0)if((typeof a!="number"||a===1073741823)&&(Bf=r,a=1073741823),a={context:r,observedBits:a,next:null},Mc===null){if(Rf===null)throw Error(at(308));Mc=a,Rf.dependencies={lanes:0,firstContext:a,responders:null}}else Mc=Mc.next=a;return r._currentValue}var _u=!1;function my(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function F0(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function xu(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function wu(r,a){if(r=r.updateQueue,r!==null){r=r.shared;var p=r.pending;p===null?a.next=a:(a.next=p.next,p.next=a),r.pending=a}}function R0(r,a){var p=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,p===m)){var g=null,S=null;if(p=p.firstBaseUpdate,p!==null){do{var l={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};S===null?g=S=l:S=S.next=l,p=p.next}while(p!==null);S===null?g=S=a:S=S.next=a}else g=S=a;p={baseState:m.baseState,firstBaseUpdate:g,lastBaseUpdate:S,shared:m.shared,effects:m.effects},r.updateQueue=p;return}r=p.lastBaseUpdate,r===null?p.firstBaseUpdate=a:r.next=a,p.lastBaseUpdate=a}function eh(r,a,p,m){var g=r.updateQueue;_u=!1;var S=g.firstBaseUpdate,l=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var D=L,J=D.next;D.next=null,l===null?S=J:l.next=J,l=D;var he=r.alternate;if(he!==null){he=he.updateQueue;var Ne=he.lastBaseUpdate;Ne!==l&&(Ne===null?he.firstBaseUpdate=J:Ne.next=J,he.lastBaseUpdate=D)}}if(S!==null){Ne=g.baseState,l=0,he=J=D=null;do{L=S.lane;var ne=S.eventTime;if((m&L)===L){he!==null&&(he=he.next={eventTime:ne,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var Oe=r,He=S;switch(L=a,ne=p,He.tag){case 1:if(Oe=He.payload,typeof Oe=="function"){Ne=Oe.call(ne,Ne,L);break e}Ne=Oe;break e;case 3:Oe.flags=Oe.flags&-4097|64;case 0:if(Oe=He.payload,L=typeof Oe=="function"?Oe.call(ne,Ne,L):Oe,L==null)break e;Ne=Cn({},Ne,L);break e;case 2:_u=!0}}S.callback!==null&&(r.flags|=32,L=g.effects,L===null?g.effects=[S]:L.push(S))}else ne={eventTime:ne,lane:L,tag:S.tag,payload:S.payload,callback:S.callback,next:null},he===null?(J=he=ne,D=Ne):he=he.next=ne,l|=L;if(S=S.next,S===null){if(L=g.shared.pending,L===null)break;S=L.next,L.next=null,g.lastBaseUpdate=L,g.shared.pending=null}}while(1);he===null&&(D=Ne),g.baseState=D,g.firstBaseUpdate=J,g.lastBaseUpdate=he,hh|=l,r.lanes=l,r.memoizedState=Ne}}function B0(r,a,p){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var m=r[a],g=m.callback;if(g!==null){if(m.callback=null,m=p,typeof g!="function")throw Error(at(191,g));g.call(m)}}}var U0=new af.Component().refs;function Uf(r,a,p,m){a=r.memoizedState,p=p(m,a),p=p==null?a:Cn({},a,p),r.memoizedState=p,r.lanes===0&&(r.updateQueue.baseState=p)}var Nf={isMounted:function(r){return(r=r._reactInternals)?ol(r)===r:!1},enqueueSetState:function(r,a,p){r=r._reactInternals;var m=ea(),g=Eu(r),S=xu(m,g);S.payload=a,p!=null&&(S.callback=p),wu(r,S),Cu(r,g,m)},enqueueReplaceState:function(r,a,p){r=r._reactInternals;var m=ea(),g=Eu(r),S=xu(m,g);S.tag=1,S.payload=a,p!=null&&(S.callback=p),wu(r,S),Cu(r,g,m)},enqueueForceUpdate:function(r,a){r=r._reactInternals;var p=ea(),m=Eu(r),g=xu(p,m);g.tag=2,a!=null&&(g.callback=a),wu(r,g),Cu(r,m,p)}};function N0(r,a,p,m,g,S,l){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,S,l):a.prototype&&a.prototype.isPureReactComponent?!Kp(p,m)||!Kp(g,S):!0}function j0(r,a,p){var m=!1,g=gu,S=a.contextType;return typeof S=="object"&&S!==null?S=ga(S):(g=Ro(a)?sl:ro.current,m=a.contextTypes,S=(m=m!=null)?kc(r,g):gu),a=new a(p,S),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Nf,r.stateNode=a,a._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=S),a}function V0(r,a,p,m){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(p,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(p,m),a.state!==r&&Nf.enqueueReplaceState(a,a.state,null)}function yy(r,a,p,m){var g=r.stateNode;g.props=p,g.state=r.memoizedState,g.refs=U0,my(r);var S=a.contextType;typeof S=="object"&&S!==null?g.context=ga(S):(S=Ro(a)?sl:ro.current,g.context=kc(r,S)),eh(r,p,g,m),g.state=r.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Uf(r,a,S,p),g.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&Nf.enqueueReplaceState(g,g.state,null),eh(r,p,g,m),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4)}var jf=Array.isArray;function th(r,a,p){if(r=p.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(at(309));var m=p.stateNode}if(!m)throw Error(at(147,r));var g=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===g?a.ref:(a=function(S){var l=m.refs;l===U0&&(l=m.refs={}),S===null?delete l[g]:l[g]=S},a._stringRef=g,a)}if(typeof r!="string")throw Error(at(284));if(!p._owner)throw Error(at(290,r))}return r}function Vf(r,a){if(r.type!=="textarea")throw Error(at(31,Object.prototype.toString.call(a)==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":a))}function q0(r){function a(pe,ae){if(r){var le=pe.lastEffect;le!==null?(le.nextEffect=ae,pe.lastEffect=ae):pe.firstEffect=pe.lastEffect=ae,ae.nextEffect=null,ae.flags=8}}function p(pe,ae){if(!r)return null;for(;ae!==null;)a(pe,ae),ae=ae.sibling;return null}function m(pe,ae){for(pe=new Map;ae!==null;)ae.key!==null?pe.set(ae.key,ae):pe.set(ae.index,ae),ae=ae.sibling;return pe}function g(pe,ae){return pe=Pu(pe,ae),pe.index=0,pe.sibling=null,pe}function S(pe,ae,le){return pe.index=le,r?(le=pe.alternate,le!==null?(le=le.index,le<ae?(pe.flags=2,ae):le):(pe.flags=2,ae)):ae}function l(pe){return r&&pe.alternate===null&&(pe.flags=2),pe}function L(pe,ae,le,Pe){return ae===null||ae.tag!==6?(ae=Jy(le,pe.mode,Pe),ae.return=pe,ae):(ae=g(ae,le),ae.return=pe,ae)}function D(pe,ae,le,Pe){return ae!==null&&ae.elementType===le.type?(Pe=g(ae,le.props),Pe.ref=th(pe,ae,le),Pe.return=pe,Pe):(Pe=ad(le.type,le.key,le.props,null,pe.mode,Pe),Pe.ref=th(pe,ae,le),Pe.return=pe,Pe)}function J(pe,ae,le,Pe){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==le.containerInfo||ae.stateNode.implementation!==le.implementation?(ae=Qy(le,pe.mode,Pe),ae.return=pe,ae):(ae=g(ae,le.children||[]),ae.return=pe,ae)}function he(pe,ae,le,Pe,Me){return ae===null||ae.tag!==7?(ae=Nc(le,pe.mode,Pe,Me),ae.return=pe,ae):(ae=g(ae,le),ae.return=pe,ae)}function Ne(pe,ae,le){if(typeof ae=="string"||typeof ae=="number")return ae=Jy(""+ae,pe.mode,le),ae.return=pe,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Ip:return le=ad(ae.type,ae.key,ae.props,null,pe.mode,le),le.ref=th(pe,null,ae),le.return=pe,le;case nl:return ae=Qy(ae,pe.mode,le),ae.return=pe,ae}if(jf(ae)||Ap(ae))return ae=Nc(ae,pe.mode,le,null),ae.return=pe,ae;Vf(pe,ae)}return null}function ne(pe,ae,le,Pe){var Me=ae!==null?ae.key:null;if(typeof le=="string"||typeof le=="number")return Me!==null?null:L(pe,ae,""+le,Pe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case Ip:return le.key===Me?le.type===lu?he(pe,ae,le.props.children,Pe,Me):D(pe,ae,le,Pe):null;case nl:return le.key===Me?J(pe,ae,le,Pe):null}if(jf(le)||Ap(le))return Me!==null?null:he(pe,ae,le,Pe,null);Vf(pe,le)}return null}function Oe(pe,ae,le,Pe,Me){if(typeof Pe=="string"||typeof Pe=="number")return pe=pe.get(le)||null,L(ae,pe,""+Pe,Me);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case Ip:return pe=pe.get(Pe.key===null?le:Pe.key)||null,Pe.type===lu?he(ae,pe,Pe.props.children,Me,Pe.key):D(ae,pe,Pe,Me);case nl:return pe=pe.get(Pe.key===null?le:Pe.key)||null,J(ae,pe,Pe,Me)}if(jf(Pe)||Ap(Pe))return pe=pe.get(le)||null,he(ae,pe,Pe,Me,null);Vf(ae,Pe)}return null}function He(pe,ae,le,Pe){for(var Me=null,yt=null,Ze=ae,It=ae=0,Ot=null;Ze!==null&&It<le.length;It++){Ze.index>It?(Ot=Ze,Ze=null):Ot=Ze.sibling;var pt=ne(pe,Ze,le[It],Pe);if(pt===null){Ze===null&&(Ze=Ot);break}r&&Ze&&pt.alternate===null&&a(pe,Ze),ae=S(pt,ae,It),yt===null?Me=pt:yt.sibling=pt,yt=pt,Ze=Ot}if(It===le.length)return p(pe,Ze),Me;if(Ze===null){for(;It<le.length;It++)Ze=Ne(pe,le[It],Pe),Ze!==null&&(ae=S(Ze,ae,It),yt===null?Me=Ze:yt.sibling=Ze,yt=Ze);return Me}for(Ze=m(pe,Ze);It<le.length;It++)Ot=Oe(Ze,pe,It,le[It],Pe),Ot!==null&&(r&&Ot.alternate!==null&&Ze.delete(Ot.key===null?It:Ot.key),ae=S(Ot,ae,It),yt===null?Me=Ot:yt.sibling=Ot,yt=Ot);return r&&Ze.forEach(function(er){return a(pe,er)}),Me}function rt(pe,ae,le,Pe){var Me=Ap(le);if(typeof Me!="function")throw Error(at(150));if(le=Me.call(le),le==null)throw Error(at(151));for(var yt=Me=null,Ze=ae,It=ae=0,Ot=null,pt=le.next();Ze!==null&&!pt.done;It++,pt=le.next()){Ze.index>It?(Ot=Ze,Ze=null):Ot=Ze.sibling;var er=ne(pe,Ze,pt.value,Pe);if(er===null){Ze===null&&(Ze=Ot);break}r&&Ze&&er.alternate===null&&a(pe,Ze),ae=S(er,ae,It),yt===null?Me=er:yt.sibling=er,yt=er,Ze=Ot}if(pt.done)return p(pe,Ze),Me;if(Ze===null){for(;!pt.done;It++,pt=le.next())pt=Ne(pe,pt.value,Pe),pt!==null&&(ae=S(pt,ae,It),yt===null?Me=pt:yt.sibling=pt,yt=pt);return Me}for(Ze=m(pe,Ze);!pt.done;It++,pt=le.next())pt=Oe(Ze,pe,It,pt.value,Pe),pt!==null&&(r&&pt.alternate!==null&&Ze.delete(pt.key===null?It:pt.key),ae=S(pt,ae,It),yt===null?Me=pt:yt.sibling=pt,yt=pt);return r&&Ze.forEach(function(br){return a(pe,br)}),Me}return function(pe,ae,le,Pe){var Me=typeof le=="object"&&le!==null&&le.type===lu&&le.key===null;Me&&(le=le.props.children);var yt=typeof le=="object"&&le!==null;if(yt)switch(le.$$typeof){case Ip:e:{for(yt=le.key,Me=ae;Me!==null;){if(Me.key===yt){switch(Me.tag){case 7:if(le.type===lu){p(pe,Me.sibling),ae=g(Me,le.props.children),ae.return=pe,pe=ae;break e}break;default:if(Me.elementType===le.type){p(pe,Me.sibling),ae=g(Me,le.props),ae.ref=th(pe,Me,le),ae.return=pe,pe=ae;break e}}p(pe,Me);break}else a(pe,Me);Me=Me.sibling}le.type===lu?(ae=Nc(le.props.children,pe.mode,Pe,le.key),ae.return=pe,pe=ae):(Pe=ad(le.type,le.key,le.props,null,pe.mode,Pe),Pe.ref=th(pe,ae,le),Pe.return=pe,pe=Pe)}return l(pe);case nl:e:{for(Me=le.key;ae!==null;){if(ae.key===Me)if(ae.tag===4&&ae.stateNode.containerInfo===le.containerInfo&&ae.stateNode.implementation===le.implementation){p(pe,ae.sibling),ae=g(ae,le.children||[]),ae.return=pe,pe=ae;break e}else{p(pe,ae);break}else a(pe,ae);ae=ae.sibling}ae=Qy(le,pe.mode,Pe),ae.return=pe,pe=ae}return l(pe)}if(typeof le=="string"||typeof le=="number")return le=""+le,ae!==null&&ae.tag===6?(p(pe,ae.sibling),ae=g(ae,le),ae.return=pe,pe=ae):(p(pe,ae),ae=Jy(le,pe.mode,Pe),ae.return=pe,pe=ae),l(pe);if(jf(le))return He(pe,ae,le,Pe);if(Ap(le))return rt(pe,ae,le,Pe);if(yt&&Vf(pe,le),typeof le=="undefined"&&!Me)switch(pe.tag){case 1:case 22:case 0:case 11:case 15:throw Error(at(152,dc(pe.type)||"Component"))}return p(pe,ae)}}var qf=q0(!0),Z0=q0(!1),rh={},ps=vu(rh),nh=vu(rh),ih=vu(rh);function cl(r){if(r===rh)throw Error(at(174));return r}function vy(r,a){switch(jn(ih,a),jn(nh,r),jn(ps,rh),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:bm(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=bm(a,r)}wn(ps),jn(ps,a)}function Lc(){wn(ps),wn(nh),wn(ih)}function G0(r){cl(ih.current);var a=cl(ps.current),p=bm(a,r.type);a!==p&&(jn(nh,r),jn(ps,p))}function gy(r){nh.current===r&&(wn(ps),wn(nh))}var Vn=vu(0);function Zf(r){for(var a=r;a!==null;){if(a.tag===13){var p=a.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&64)!=0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var qs=null,bu=null,hs=!1;function W0(r,a){var p=wa(5,null,null,0);p.elementType="DELETED",p.type="DELETED",p.stateNode=a,p.return=r,p.flags=8,r.lastEffect!==null?(r.lastEffect.nextEffect=p,r.lastEffect=p):r.firstEffect=r.lastEffect=p}function X0(r,a){switch(r.tag){case 5:var p=r.type;return a=a.nodeType!==1||p.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,!0):!1;case 13:return!1;default:return!1}}function _y(r){if(hs){var a=bu;if(a){var p=a;if(!X0(r,a)){if(a=Cc(p.nextSibling),!a||!X0(r,a)){r.flags=r.flags&-1025|2,hs=!1,qs=r;return}W0(qs,p)}qs=r,bu=Cc(a.firstChild)}else r.flags=r.flags&-1025|2,hs=!1,qs=r}}function K0(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;qs=r}function Gf(r){if(r!==qs)return!1;if(!hs)return K0(r),hs=!0,!1;var a=r.type;if(r.tag!==5||a!=="head"&&a!=="body"&&!ny(a,r.memoizedProps))for(a=bu;a;)W0(r,a),a=Cc(a.nextSibling);if(K0(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(at(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var p=r.data;if(p==="/$"){if(a===0){bu=Cc(r.nextSibling);break e}a--}else p!=="$"&&p!=="$!"&&p!=="$?"||a++}r=r.nextSibling}bu=null}}else bu=qs?Cc(r.stateNode.nextSibling):null;return!0}function xy(){bu=qs=null,hs=!1}var Dc=[];function wy(){for(var r=0;r<Dc.length;r++)Dc[r]._workInProgressVersionPrimary=null;Dc.length=0}var oh=rl.ReactCurrentDispatcher,_a=rl.ReactCurrentBatchConfig,ah=0,Jn=null,io=null,Li=null,Wf=!1,sh=!1;function Bo(){throw Error(at(321))}function by(r,a){if(a===null)return!1;for(var p=0;p<a.length&&p<r.length;p++)if(!va(r[p],a[p]))return!1;return!0}function Sy(r,a,p,m,g,S){if(ah=S,Jn=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,oh.current=r===null||r.memoizedState===null?v2:g2,r=p(m,g),sh){S=0;do{if(sh=!1,!(25>S))throw Error(at(301));S+=1,Li=io=null,a.updateQueue=null,oh.current=_2,r=p(m,g)}while(sh)}if(oh.current=$f,a=io!==null&&io.next!==null,ah=0,Li=io=Jn=null,Wf=!1,a)throw Error(at(300));return r}function pl(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Li===null?Jn.memoizedState=Li=r:Li=Li.next=r,Li}function hl(){if(io===null){var r=Jn.alternate;r=r!==null?r.memoizedState:null}else r=io.next;var a=Li===null?Jn.memoizedState:Li.next;if(a!==null)Li=a,io=r;else{if(r===null)throw Error(at(310));io=r,r={memoizedState:io.memoizedState,baseState:io.baseState,baseQueue:io.baseQueue,queue:io.queue,next:null},Li===null?Jn.memoizedState=Li=r:Li=Li.next=r}return Li}function fs(r,a){return typeof a=="function"?a(r):a}function uh(r){var a=hl(),p=a.queue;if(p===null)throw Error(at(311));p.lastRenderedReducer=r;var m=io,g=m.baseQueue,S=p.pending;if(S!==null){if(g!==null){var l=g.next;g.next=S.next,S.next=l}m.baseQueue=g=S,p.pending=null}if(g!==null){g=g.next,m=m.baseState;var L=l=S=null,D=g;do{var J=D.lane;if((ah&J)===J)L!==null&&(L=L.next={lane:0,action:D.action,eagerReducer:D.eagerReducer,eagerState:D.eagerState,next:null}),m=D.eagerReducer===r?D.eagerState:r(m,D.action);else{var he={lane:J,action:D.action,eagerReducer:D.eagerReducer,eagerState:D.eagerState,next:null};L===null?(l=L=he,S=m):L=L.next=he,Jn.lanes|=J,hh|=J}D=D.next}while(D!==null&&D!==g);L===null?S=m:L.next=l,va(m,a.memoizedState)||(qa=!0),a.memoizedState=m,a.baseState=S,a.baseQueue=L,p.lastRenderedState=m}return[a.memoizedState,p.dispatch]}function lh(r){var a=hl(),p=a.queue;if(p===null)throw Error(at(311));p.lastRenderedReducer=r;var m=p.dispatch,g=p.pending,S=a.memoizedState;if(g!==null){p.pending=null;var l=g=g.next;do S=r(S,l.action),l=l.next;while(l!==g);va(S,a.memoizedState)||(qa=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),p.lastRenderedState=S}return[S,m]}function H0(r,a,p){var m=a._getVersion;m=m(a._source);var g=a._workInProgressVersionPrimary;if(g!==null?r=g===m:(r=r.mutableReadLanes,(r=(ah&r)===r)&&(a._workInProgressVersionPrimary=m,Dc.push(a))),r)return p(a._source);throw Dc.push(a),Error(at(350))}function $0(r,a,p,m){var g=_o;if(g===null)throw Error(at(349));var S=a._getVersion,l=S(a._source),L=oh.current,D=L.useState(function(){return H0(g,a,p)}),J=D[1],he=D[0];D=Li;var Ne=r.memoizedState,ne=Ne.refs,Oe=ne.getSnapshot,He=Ne.source;Ne=Ne.subscribe;var rt=Jn;return r.memoizedState={refs:ne,source:a,subscribe:m},L.useEffect(function(){ne.getSnapshot=p,ne.setSnapshot=J;var pe=S(a._source);if(!va(l,pe)){pe=p(a._source),va(he,pe)||(J(pe),pe=Eu(rt),g.mutableReadLanes|=pe&g.pendingLanes),pe=g.mutableReadLanes,g.entangledLanes|=pe;for(var ae=g.entanglements,le=pe;0<le;){var Pe=31-du(le),Me=1<<Pe;ae[Pe]|=pe,le&=~Me}}},[p,a,m]),L.useEffect(function(){return m(a._source,function(){var pe=ne.getSnapshot,ae=ne.setSnapshot;try{ae(pe(a._source));var le=Eu(rt);g.mutableReadLanes|=le&g.pendingLanes}catch(Pe){ae(function(){throw Pe})}})},[a,m]),va(Oe,p)&&va(He,a)&&va(Ne,m)||(r={pending:null,dispatch:null,lastRenderedReducer:fs,lastRenderedState:he},r.dispatch=J=Iy.bind(null,Jn,r),D.queue=r,D.baseQueue=null,he=H0(g,a,p),D.memoizedState=D.baseState=he),he}function Y0(r,a,p){var m=hl();return $0(m,r,a,p)}function ch(r){var a=pl();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r=a.queue={pending:null,dispatch:null,lastRenderedReducer:fs,lastRenderedState:r},r=r.dispatch=Iy.bind(null,Jn,r),[a.memoizedState,r]}function Xf(r,a,p,m){return r={tag:r,create:a,destroy:p,deps:m,next:null},a=Jn.updateQueue,a===null?(a={lastEffect:null},Jn.updateQueue=a,a.lastEffect=r.next=r):(p=a.lastEffect,p===null?a.lastEffect=r.next=r:(m=p.next,p.next=r,r.next=m,a.lastEffect=r)),r}function J0(r){var a=pl();return r={current:r},a.memoizedState=r}function Kf(){return hl().memoizedState}function Ey(r,a,p,m){var g=pl();Jn.flags|=r,g.memoizedState=Xf(1|a,p,void 0,m===void 0?null:m)}function Cy(r,a,p,m){var g=hl();m=m===void 0?null:m;var S=void 0;if(io!==null){var l=io.memoizedState;if(S=l.destroy,m!==null&&by(m,l.deps)){Xf(a,p,S,m);return}}Jn.flags|=r,g.memoizedState=Xf(1|a,p,S,m)}function Q0(r,a){return Ey(516,4,r,a)}function Hf(r,a){return Cy(516,4,r,a)}function ex(r,a){return Cy(4,2,r,a)}function tx(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function rx(r,a,p){return p=p!=null?p.concat([r]):null,Cy(4,2,tx.bind(null,a,r),p)}function Ty(){}function nx(r,a){var p=hl();a=a===void 0?null:a;var m=p.memoizedState;return m!==null&&a!==null&&by(a,m[1])?m[0]:(p.memoizedState=[r,a],r)}function ix(r,a){var p=hl();a=a===void 0?null:a;var m=p.memoizedState;return m!==null&&a!==null&&by(a,m[1])?m[0]:(r=r(),p.memoizedState=[r,a],r)}function y2(r,a){var p=Ac();ll(98>p?98:p,function(){r(!0)}),ll(97<p?97:p,function(){var m=_a.transition;_a.transition=1;try{r(!1),a()}finally{_a.transition=m}})}function Iy(r,a,p){var m=ea(),g=Eu(r),S={lane:g,action:p,eagerReducer:null,eagerState:null,next:null},l=a.pending;if(l===null?S.next=S:(S.next=l.next,l.next=S),a.pending=S,l=r.alternate,r===Jn||l!==null&&l===Jn)sh=Wf=!0;else{if(r.lanes===0&&(l===null||l.lanes===0)&&(l=a.lastRenderedReducer,l!==null))try{var L=a.lastRenderedState,D=l(L,p);if(S.eagerReducer=l,S.eagerState=D,va(D,L))return}catch{}finally{}Cu(r,g,m)}}var $f={readContext:ga,useCallback:Bo,useContext:Bo,useEffect:Bo,useImperativeHandle:Bo,useLayoutEffect:Bo,useMemo:Bo,useReducer:Bo,useRef:Bo,useState:Bo,useDebugValue:Bo,useDeferredValue:Bo,useTransition:Bo,useMutableSource:Bo,useOpaqueIdentifier:Bo,unstable_isNewReconciler:!1},v2={readContext:ga,useCallback:function(r,a){return pl().memoizedState=[r,a===void 0?null:a],r},useContext:ga,useEffect:Q0,useImperativeHandle:function(r,a,p){return p=p!=null?p.concat([r]):null,Ey(4,2,tx.bind(null,a,r),p)},useLayoutEffect:function(r,a){return Ey(4,2,r,a)},useMemo:function(r,a){var p=pl();return a=a===void 0?null:a,r=r(),p.memoizedState=[r,a],r},useReducer:function(r,a,p){var m=pl();return a=p!==void 0?p(a):a,m.memoizedState=m.baseState=a,r=m.queue={pending:null,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},r=r.dispatch=Iy.bind(null,Jn,r),[m.memoizedState,r]},useRef:J0,useState:ch,useDebugValue:Ty,useDeferredValue:function(r){var a=ch(r),p=a[0],m=a[1];return Q0(function(){var g=_a.transition;_a.transition=1;try{m(r)}finally{_a.transition=g}},[r]),p},useTransition:function(){var r=ch(!1),a=r[0];return r=y2.bind(null,r[1]),J0(r),[r,a]},useMutableSource:function(r,a,p){var m=pl();return m.memoizedState={refs:{getSnapshot:a,setSnapshot:null},source:r,subscribe:p},$0(m,r,a,p)},useOpaqueIdentifier:function(){if(hs){var r=!1,a=c2(function(){throw r||(r=!0,p("r:"+(oy++).toString(36))),Error(at(355))}),p=ch(a)[1];return(Jn.mode&2)==0&&(Jn.flags|=516,Xf(5,function(){p("r:"+(oy++).toString(36))},void 0,null)),a}return a="r:"+(oy++).toString(36),ch(a),a},unstable_isNewReconciler:!1},g2={readContext:ga,useCallback:nx,useContext:ga,useEffect:Hf,useImperativeHandle:rx,useLayoutEffect:ex,useMemo:ix,useReducer:uh,useRef:Kf,useState:function(){return uh(fs)},useDebugValue:Ty,useDeferredValue:function(r){var a=uh(fs),p=a[0],m=a[1];return Hf(function(){var g=_a.transition;_a.transition=1;try{m(r)}finally{_a.transition=g}},[r]),p},useTransition:function(){var r=uh(fs)[0];return[Kf().current,r]},useMutableSource:Y0,useOpaqueIdentifier:function(){return uh(fs)[0]},unstable_isNewReconciler:!1},_2={readContext:ga,useCallback:nx,useContext:ga,useEffect:Hf,useImperativeHandle:rx,useLayoutEffect:ex,useMemo:ix,useReducer:lh,useRef:Kf,useState:function(){return lh(fs)},useDebugValue:Ty,useDeferredValue:function(r){var a=lh(fs),p=a[0],m=a[1];return Hf(function(){var g=_a.transition;_a.transition=1;try{m(r)}finally{_a.transition=g}},[r]),p},useTransition:function(){var r=lh(fs)[0];return[Kf().current,r]},useMutableSource:Y0,useOpaqueIdentifier:function(){return lh(fs)[0]},unstable_isNewReconciler:!1},x2=rl.ReactCurrentOwner,qa=!1;function Uo(r,a,p,m){a.child=r===null?Z0(a,null,p,m):qf(a,r.child,p,m)}function ox(r,a,p,m,g){p=p.render;var S=a.ref;return zc(a,g),m=Sy(r,a,p,m,S,g),r!==null&&!qa?(a.updateQueue=r.updateQueue,a.flags&=-517,r.lanes&=~g,Zs(r,a,g)):(a.flags|=1,Uo(r,a,m,g),a.child)}function ax(r,a,p,m,g,S){if(r===null){var l=p.type;return typeof l=="function"&&!$y(l)&&l.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(a.tag=15,a.type=l,sx(r,a,l,m,g,S)):(r=ad(p.type,null,m,a,a.mode,S),r.ref=a.ref,r.return=a,a.child=r)}return l=r.child,(g&S)==0&&(g=l.memoizedProps,p=p.compare,p=p!==null?p:Kp,p(g,m)&&r.ref===a.ref)?Zs(r,a,S):(a.flags|=1,r=Pu(l,m),r.ref=a.ref,r.return=a,a.child=r)}function sx(r,a,p,m,g,S){if(r!==null&&Kp(r.memoizedProps,m)&&r.ref===a.ref)if(qa=!1,(S&g)!=0)(r.flags&16384)!=0&&(qa=!0);else return a.lanes=r.lanes,Zs(r,a,S);return ky(r,a,p,m,S)}function Py(r,a,p){var m=a.pendingProps,g=m.children,S=r!==null?r.memoizedState:null;if(m.mode==="hidden"||m.mode==="unstable-defer-without-hiding")if((a.mode&4)==0)a.memoizedState={baseLanes:0},od(a,p);else if((p&1073741824)!=0)a.memoizedState={baseLanes:0},od(a,S!==null?S.baseLanes:p);else return r=S!==null?S.baseLanes|p:p,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r},od(a,r),null;else S!==null?(m=S.baseLanes|p,a.memoizedState=null):m=p,od(a,m);return Uo(r,a,g,p),a.child}function ux(r,a){var p=a.ref;(r===null&&p!==null||r!==null&&r.ref!==p)&&(a.flags|=128)}function ky(r,a,p,m,g){var S=Ro(p)?sl:ro.current;return S=kc(a,S),zc(a,g),p=Sy(r,a,p,m,S,g),r!==null&&!qa?(a.updateQueue=r.updateQueue,a.flags&=-517,r.lanes&=~g,Zs(r,a,g)):(a.flags|=1,Uo(r,a,p,g),a.child)}function lx(r,a,p,m,g){if(Ro(p)){var S=!0;Lf(a)}else S=!1;if(zc(a,g),a.stateNode===null)r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),j0(a,p,m),yy(a,p,m,g),m=!0;else if(r===null){var l=a.stateNode,L=a.memoizedProps;l.props=L;var D=l.context,J=p.contextType;typeof J=="object"&&J!==null?J=ga(J):(J=Ro(p)?sl:ro.current,J=kc(a,J));var he=p.getDerivedStateFromProps,Ne=typeof he=="function"||typeof l.getSnapshotBeforeUpdate=="function";Ne||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(L!==m||D!==J)&&V0(a,l,m,J),_u=!1;var ne=a.memoizedState;l.state=ne,eh(a,m,l,g),D=a.memoizedState,L!==m||ne!==D||Fo.current||_u?(typeof he=="function"&&(Uf(a,p,he,m),D=a.memoizedState),(L=_u||N0(a,p,L,m,ne,D,J))?(Ne||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(a.flags|=4)):(typeof l.componentDidMount=="function"&&(a.flags|=4),a.memoizedProps=m,a.memoizedState=D),l.props=m,l.state=D,l.context=J,m=L):(typeof l.componentDidMount=="function"&&(a.flags|=4),m=!1)}else{l=a.stateNode,F0(r,a),L=a.memoizedProps,J=a.type===a.elementType?L:Va(a.type,L),l.props=J,Ne=a.pendingProps,ne=l.context,D=p.contextType,typeof D=="object"&&D!==null?D=ga(D):(D=Ro(p)?sl:ro.current,D=kc(a,D));var Oe=p.getDerivedStateFromProps;(he=typeof Oe=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(L!==Ne||ne!==D)&&V0(a,l,m,D),_u=!1,ne=a.memoizedState,l.state=ne,eh(a,m,l,g);var He=a.memoizedState;L!==Ne||ne!==He||Fo.current||_u?(typeof Oe=="function"&&(Uf(a,p,Oe,m),He=a.memoizedState),(J=_u||N0(a,p,J,m,ne,He,D))?(he||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(m,He,D),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(m,He,D)),typeof l.componentDidUpdate=="function"&&(a.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(a.flags|=256)):(typeof l.componentDidUpdate!="function"||L===r.memoizedProps&&ne===r.memoizedState||(a.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&ne===r.memoizedState||(a.flags|=256),a.memoizedProps=m,a.memoizedState=He),l.props=m,l.state=He,l.context=D,m=J):(typeof l.componentDidUpdate!="function"||L===r.memoizedProps&&ne===r.memoizedState||(a.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&ne===r.memoizedState||(a.flags|=256),m=!1)}return Ay(r,a,p,m,S,g)}function Ay(r,a,p,m,g,S){ux(r,a);var l=(a.flags&64)!=0;if(!m&&!l)return g&&T0(a,p,!1),Zs(r,a,S);m=a.stateNode,x2.current=a;var L=l&&typeof p.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,r!==null&&l?(a.child=qf(a,r.child,null,S),a.child=qf(a,null,L,S)):Uo(r,a,L,S),a.memoizedState=m.state,g&&T0(a,p,!0),a.child}function cx(r){var a=r.stateNode;a.pendingContext?E0(r,a.pendingContext,a.pendingContext!==a.context):a.context&&E0(r,a.context,!1),vy(r,a.containerInfo)}var Yf={dehydrated:null,retryLane:0};function px(r,a,p){var m=a.pendingProps,g=Vn.current,S=!1,l;return(l=(a.flags&64)!=0)||(l=r!==null&&r.memoizedState===null?!1:(g&2)!=0),l?(S=!0,a.flags&=-65):r!==null&&r.memoizedState===null||m.fallback===void 0||m.unstable_avoidThisFallback===!0||(g|=1),jn(Vn,g&1),r===null?(m.fallback!==void 0&&_y(a),r=m.children,g=m.fallback,S?(r=hx(a,r,g,p),a.child.memoizedState={baseLanes:p},a.memoizedState=Yf,r):typeof m.unstable_expectedLoadTime=="number"?(r=hx(a,r,g,p),a.child.memoizedState={baseLanes:p},a.memoizedState=Yf,a.lanes=33554432,r):(p=Yy({mode:"visible",children:r},a.mode,p,null),p.return=a,a.child=p)):r.memoizedState!==null?S?(m=dx(r,a,m.children,m.fallback,p),S=a.child,g=r.child.memoizedState,S.memoizedState=g===null?{baseLanes:p}:{baseLanes:g.baseLanes|p},S.childLanes=r.childLanes&~p,a.memoizedState=Yf,m):(p=fx(r,a,m.children,p),a.memoizedState=null,p):S?(m=dx(r,a,m.children,m.fallback,p),S=a.child,g=r.child.memoizedState,S.memoizedState=g===null?{baseLanes:p}:{baseLanes:g.baseLanes|p},S.childLanes=r.childLanes&~p,a.memoizedState=Yf,m):(p=fx(r,a,m.children,p),a.memoizedState=null,p)}function hx(r,a,p,m){var g=r.mode,S=r.child;return a={mode:"hidden",children:a},(g&2)==0&&S!==null?(S.childLanes=0,S.pendingProps=a):S=Yy(a,g,0,null),p=Nc(p,g,m,null),S.return=r,p.return=r,S.sibling=p,r.child=S,p}function fx(r,a,p,m){var g=r.child;return r=g.sibling,p=Pu(g,{mode:"visible",children:p}),(a.mode&2)==0&&(p.lanes=m),p.return=a,p.sibling=null,r!==null&&(r.nextEffect=null,r.flags=8,a.firstEffect=a.lastEffect=r),a.child=p}function dx(r,a,p,m,g){var S=a.mode,l=r.child;r=l.sibling;var L={mode:"hidden",children:p};return(S&2)==0&&a.child!==l?(p=a.child,p.childLanes=0,p.pendingProps=L,l=p.lastEffect,l!==null?(a.firstEffect=p.firstEffect,a.lastEffect=l,l.nextEffect=null):a.firstEffect=a.lastEffect=null):p=Pu(l,L),r!==null?m=Pu(r,m):(m=Nc(m,S,g,null),m.flags|=2),m.return=a,p.return=a,p.sibling=m,a.child=p,m}function mx(r,a){r.lanes|=a;var p=r.alternate;p!==null&&(p.lanes|=a),O0(r.return,a)}function My(r,a,p,m,g,S){var l=r.memoizedState;l===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:p,tailMode:g,lastEffect:S}:(l.isBackwards=a,l.rendering=null,l.renderingStartTime=0,l.last=m,l.tail=p,l.tailMode=g,l.lastEffect=S)}function yx(r,a,p){var m=a.pendingProps,g=m.revealOrder,S=m.tail;if(Uo(r,a,m.children,p),m=Vn.current,(m&2)!=0)m=m&1|2,a.flags|=64;else{if(r!==null&&(r.flags&64)!=0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&mx(r,p);else if(r.tag===19)mx(r,p);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(jn(Vn,m),(a.mode&2)==0)a.memoizedState=null;else switch(g){case"forwards":for(p=a.child,g=null;p!==null;)r=p.alternate,r!==null&&Zf(r)===null&&(g=p),p=p.sibling;p=g,p===null?(g=a.child,a.child=null):(g=p.sibling,p.sibling=null),My(a,!1,g,p,S,a.lastEffect);break;case"backwards":for(p=null,g=a.child,a.child=null;g!==null;){if(r=g.alternate,r!==null&&Zf(r)===null){a.child=g;break}r=g.sibling,g.sibling=p,p=g,g=r}My(a,!0,p,null,S,a.lastEffect);break;case"together":My(a,!1,null,null,void 0,a.lastEffect);break;default:a.memoizedState=null}return a.child}function Zs(r,a,p){if(r!==null&&(a.dependencies=r.dependencies),hh|=a.lanes,(p&a.childLanes)!=0){if(r!==null&&a.child!==r.child)throw Error(at(153));if(a.child!==null){for(r=a.child,p=Pu(r,r.pendingProps),a.child=p,p.return=a;r.sibling!==null;)r=r.sibling,p=p.sibling=Pu(r,r.pendingProps),p.return=a;p.sibling=null}return a.child}return null}var vx,zy,gx,_x;vx=function(r,a){for(var p=a.child;p!==null;){if(p.tag===5||p.tag===6)r.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break;for(;p.sibling===null;){if(p.return===null||p.return===a)return;p=p.return}p.sibling.return=p.return,p=p.sibling}};zy=function(){};gx=function(r,a,p,m){var g=r.memoizedProps;if(g!==m){r=a.stateNode,cl(ps.current);var S=null;switch(p){case"input":g=ym(r,g),m=ym(r,m),S=[];break;case"option":g=_m(r,g),m=_m(r,m),S=[];break;case"select":g=Cn({},g,{value:void 0}),m=Cn({},m,{value:void 0}),S=[];break;case"textarea":g=xm(r,g),m=xm(r,m),S=[];break;default:typeof g.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=Pf)}Sm(p,m);var l;p=null;for(J in g)if(!m.hasOwnProperty(J)&&g.hasOwnProperty(J)&&g[J]!=null)if(J==="style"){var L=g[J];for(l in L)L.hasOwnProperty(l)&&(p||(p={}),p[l]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(Tp.hasOwnProperty(J)?S||(S=[]):(S=S||[]).push(J,null));for(J in m){var D=m[J];if(L=g!=null?g[J]:void 0,m.hasOwnProperty(J)&&D!==L&&(D!=null||L!=null))if(J==="style")if(L){for(l in L)!L.hasOwnProperty(l)||D&&D.hasOwnProperty(l)||(p||(p={}),p[l]="");for(l in D)D.hasOwnProperty(l)&&L[l]!==D[l]&&(p||(p={}),p[l]=D[l])}else p||(S||(S=[]),S.push(J,p)),p=D;else J==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,L=L?L.__html:void 0,D!=null&&L!==D&&(S=S||[]).push(J,D)):J==="children"?typeof D!="string"&&typeof D!="number"||(S=S||[]).push(J,""+D):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(Tp.hasOwnProperty(J)?(D!=null&&J==="onScroll"&&xn("scroll",r),S||L===D||(S=[])):typeof D=="object"&&D!==null&&D.$$typeof===pm?D.toString():(S=S||[]).push(J,D))}p&&(S=S||[]).push("style",p);var J=S;(a.updateQueue=J)&&(a.flags|=4)}};_x=function(r,a,p,m){p!==m&&(a.flags|=4)};function ph(r,a){if(!hs)switch(r.tailMode){case"hidden":a=r.tail;for(var p=null;a!==null;)a.alternate!==null&&(p=a),a=a.sibling;p===null?r.tail=null:p.sibling=null;break;case"collapsed":p=r.tail;for(var m=null;p!==null;)p.alternate!==null&&(m=p),p=p.sibling;m===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function w2(r,a,p){var m=a.pendingProps;switch(a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ro(a.type)&&zf(),null;case 3:return Lc(),wn(Fo),wn(ro),wy(),m=a.stateNode,m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(Gf(a)?a.flags|=4:m.hydrate||(a.flags|=256)),zy(a),null;case 5:gy(a);var g=cl(ih.current);if(p=a.type,r!==null&&a.stateNode!=null)gx(r,a,p,m,g),r.ref!==a.ref&&(a.flags|=128);else{if(!m){if(a.stateNode===null)throw Error(at(166));return null}if(r=cl(ps.current),Gf(a)){m=a.stateNode,p=a.type;var S=a.memoizedProps;switch(m[yu]=a,m[Af]=S,p){case"dialog":xn("cancel",m),xn("close",m);break;case"iframe":case"object":case"embed":xn("load",m);break;case"video":case"audio":for(r=0;r<$p.length;r++)xn($p[r],m);break;case"source":xn("error",m);break;case"img":case"image":case"link":xn("error",m),xn("load",m);break;case"details":xn("toggle",m);break;case"input":l_(m,S),xn("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!S.multiple},xn("invalid",m);break;case"textarea":h_(m,S),xn("invalid",m)}Sm(p,S),r=null;for(var l in S)S.hasOwnProperty(l)&&(g=S[l],l==="children"?typeof g=="string"?m.textContent!==g&&(r=["children",g]):typeof g=="number"&&m.textContent!==""+g&&(r=["children",""+g]):Tp.hasOwnProperty(l)&&g!=null&&l==="onScroll"&&xn("scroll",m));switch(p){case"input":pf(m),p_(m,S,!0);break;case"textarea":pf(m),d_(m);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(m.onclick=Pf)}m=r,a.updateQueue=m,m!==null&&(a.flags|=4)}else{switch(l=g.nodeType===9?g:g.ownerDocument,r===wm.html&&(r=m_(p)),r===wm.html?p==="script"?(r=l.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=l.createElement(p,{is:m.is}):(r=l.createElement(p),p==="select"&&(l=r,m.multiple?l.multiple=!0:m.size&&(l.size=m.size))):r=l.createElementNS(r,p),r[yu]=a,r[Af]=m,vx(r,a,!1,!1),a.stateNode=r,l=Em(p,m),p){case"dialog":xn("cancel",r),xn("close",r),g=m;break;case"iframe":case"object":case"embed":xn("load",r),g=m;break;case"video":case"audio":for(g=0;g<$p.length;g++)xn($p[g],r);g=m;break;case"source":xn("error",r),g=m;break;case"img":case"image":case"link":xn("error",r),xn("load",r),g=m;break;case"details":xn("toggle",r),g=m;break;case"input":l_(r,m),g=ym(r,m),xn("invalid",r);break;case"option":g=_m(r,m);break;case"select":r._wrapperState={wasMultiple:!!m.multiple},g=Cn({},m,{value:void 0}),xn("invalid",r);break;case"textarea":h_(r,m),g=xm(r,m),xn("invalid",r);break;default:g=m}Sm(p,g);var L=g;for(S in L)if(L.hasOwnProperty(S)){var D=L[S];S==="style"?g_(r,D):S==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&y_(r,D)):S==="children"?typeof D=="string"?(p!=="textarea"||D!=="")&&zp(r,D):typeof D=="number"&&zp(r,""+D):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Tp.hasOwnProperty(S)?D!=null&&S==="onScroll"&&xn("scroll",r):D!=null&&om(r,S,D,l))}switch(p){case"input":pf(r),p_(r,m,!1);break;case"textarea":pf(r),d_(r);break;case"option":m.value!=null&&r.setAttribute("value",""+cu(m.value));break;case"select":r.multiple=!!m.multiple,S=m.value,S!=null?mc(r,!!m.multiple,S,!1):m.defaultValue!=null&&mc(r,!!m.multiple,m.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=Pf)}_0(p,m)&&(a.flags|=4)}a.ref!==null&&(a.flags|=128)}return null;case 6:if(r&&a.stateNode!=null)_x(r,a,r.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(at(166));p=cl(ih.current),cl(ps.current),Gf(a)?(m=a.stateNode,p=a.memoizedProps,m[yu]=a,m.nodeValue!==p&&(a.flags|=4)):(m=(p.nodeType===9?p:p.ownerDocument).createTextNode(m),m[yu]=a,a.stateNode=m)}return null;case 13:return wn(Vn),m=a.memoizedState,(a.flags&64)!=0?(a.lanes=p,a):(m=m!==null,p=!1,r===null?a.memoizedProps.fallback!==void 0&&Gf(a):p=r.memoizedState!==null,m&&!p&&(a.mode&2)!=0&&(r===null&&a.memoizedProps.unstable_avoidThisFallback!==!0||(Vn.current&1)!=0?Di===0&&(Di=3):((Di===0||Di===3)&&(Di=4),_o===null||(hh&134217727)==0&&(Fc&134217727)==0||Bc(_o,oo))),(m||p)&&(a.flags|=4),null);case 4:return Lc(),zy(a),r===null&&d0(a.stateNode.containerInfo),null;case 10:return dy(a),null;case 17:return Ro(a.type)&&zf(),null;case 19:if(wn(Vn),m=a.memoizedState,m===null)return null;if(S=(a.flags&64)!=0,l=m.rendering,l===null)if(S)ph(m,!1);else{if(Di!==0||r!==null&&(r.flags&64)!=0)for(r=a.child;r!==null;){if(l=Zf(r),l!==null){for(a.flags|=64,ph(m,!1),S=l.updateQueue,S!==null&&(a.updateQueue=S,a.flags|=4),m.lastEffect===null&&(a.firstEffect=null),a.lastEffect=m.lastEffect,m=p,p=a.child;p!==null;)S=p,r=m,S.flags&=2,S.nextEffect=null,S.firstEffect=null,S.lastEffect=null,l=S.alternate,l===null?(S.childLanes=0,S.lanes=r,S.child=null,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=l.childLanes,S.lanes=l.lanes,S.child=l.child,S.memoizedProps=l.memoizedProps,S.memoizedState=l.memoizedState,S.updateQueue=l.updateQueue,S.type=l.type,r=l.dependencies,S.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),p=p.sibling;return jn(Vn,Vn.current&1|2),a.child}r=r.sibling}m.tail!==null&&no()>qy&&(a.flags|=64,S=!0,ph(m,!1),a.lanes=33554432)}else{if(!S)if(r=Zf(l),r!==null){if(a.flags|=64,S=!0,p=r.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),ph(m,!0),m.tail===null&&m.tailMode==="hidden"&&!l.alternate&&!hs)return a=a.lastEffect=m.lastEffect,a!==null&&(a.nextEffect=null),null}else 2*no()-m.renderingStartTime>qy&&p!==1073741824&&(a.flags|=64,S=!0,ph(m,!1),a.lanes=33554432);m.isBackwards?(l.sibling=a.child,a.child=l):(p=m.last,p!==null?p.sibling=l:a.child=l,m.last=l)}return m.tail!==null?(p=m.tail,m.rendering=p,m.tail=p.sibling,m.lastEffect=a.lastEffect,m.renderingStartTime=no(),p.sibling=null,a=Vn.current,jn(Vn,S?a&1|2:a&1),p):null;case 23:case 24:return Hy(),r!==null&&r.memoizedState!==null!=(a.memoizedState!==null)&&m.mode!=="unstable-defer-without-hiding"&&(a.flags|=4),null}throw Error(at(156,a.tag))}function b2(r){switch(r.tag){case 1:Ro(r.type)&&zf();var a=r.flags;return a&4096?(r.flags=a&-4097|64,r):null;case 3:if(Lc(),wn(Fo),wn(ro),wy(),a=r.flags,(a&64)!=0)throw Error(at(285));return r.flags=a&-4097|64,r;case 5:return gy(r),null;case 13:return wn(Vn),a=r.flags,a&4096?(r.flags=a&-4097|64,r):null;case 19:return wn(Vn),null;case 4:return Lc(),null;case 10:return dy(r),null;case 23:case 24:return Hy(),null;default:return null}}function Ly(r,a){try{var p="",m=a;do p+=rb(m),m=m.return;while(m);var g=p}catch(S){g=`
Error generating stack: `+S.message+`
`+S.stack}return{value:r,source:a,stack:g}}function Dy(r,a){try{console.error(a.value)}catch(p){setTimeout(function(){throw p})}}var S2=typeof WeakMap=="function"?WeakMap:Map;function xx(r,a,p){p=xu(-1,p),p.tag=3,p.payload={element:null};var m=a.value;return p.callback=function(){ed||(ed=!0,Zy=m),Dy(r,a)},p}function wx(r,a,p){p=xu(-1,p),p.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var g=a.value;p.payload=function(){return Dy(r,a),m(g)}}var S=r.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(p.callback=function(){typeof m!="function"&&(ds===null?ds=new Set([this]):ds.add(this),Dy(r,a));var l=a.stack;this.componentDidCatch(a.value,{componentStack:l!==null?l:""})}),p}var E2=typeof WeakSet=="function"?WeakSet:Set;function bx(r){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(p){Iu(r,p)}else a.current=null}function C2(r,a){switch(a.tag){case 0:case 11:case 15:case 22:return;case 1:if(a.flags&256&&r!==null){var p=r.memoizedProps,m=r.memoizedState;r=a.stateNode,a=r.getSnapshotBeforeUpdate(a.elementType===a.type?p:Va(a.type,p),m),r.__reactInternalSnapshotBeforeUpdate=a}return;case 3:a.flags&256&&iy(a.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(at(163))}function T2(r,a,p){switch(p.tag){case 0:case 11:case 15:case 22:if(a=p.updateQueue,a=a!==null?a.lastEffect:null,a!==null){r=a=a.next;do{if((r.tag&3)==3){var m=r.create;r.destroy=m()}r=r.next}while(r!==a)}if(a=p.updateQueue,a=a!==null?a.lastEffect:null,a!==null){r=a=a.next;do{var g=r;m=g.next,g=g.tag,(g&4)!=0&&(g&1)!=0&&(Rx(p,r),D2(p,r)),r=m}while(r!==a)}return;case 1:r=p.stateNode,p.flags&4&&(a===null?r.componentDidMount():(m=p.elementType===p.type?a.memoizedProps:Va(p.type,a.memoizedProps),r.componentDidUpdate(m,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate))),a=p.updateQueue,a!==null&&B0(p,a,r);return;case 3:if(a=p.updateQueue,a!==null){if(r=null,p.child!==null)switch(p.child.tag){case 5:r=p.child.stateNode;break;case 1:r=p.child.stateNode}B0(p,a,r)}return;case 5:r=p.stateNode,a===null&&p.flags&4&&_0(p.type,p.memoizedProps)&&r.focus();return;case 6:return;case 4:return;case 12:return;case 13:p.memoizedState===null&&(p=p.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&D_(p))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(at(163))}function Sx(r,a){for(var p=r;;){if(p.tag===5){var m=p.stateNode;if(a)m=m.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{m=p.stateNode;var g=p.memoizedProps.style;g=g!=null&&g.hasOwnProperty("display")?g.display:null,m.style.display=v_("display",g)}}else if(p.tag===6)p.stateNode.nodeValue=a?"":p.memoizedProps;else if((p.tag!==23&&p.tag!==24||p.memoizedState===null||p===r)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===r)break;for(;p.sibling===null;){if(p.return===null||p.return===r)return;p=p.return}p.sibling.return=p.return,p=p.sibling}}function Ex(r,a){if(ul&&typeof ul.onCommitFiberUnmount=="function")try{ul.onCommitFiberUnmount(sy,a)}catch{}switch(a.tag){case 0:case 11:case 14:case 15:case 22:if(r=a.updateQueue,r!==null&&(r=r.lastEffect,r!==null)){var p=r=r.next;do{var m=p,g=m.destroy;if(m=m.tag,g!==void 0)if((m&4)!=0)Rx(a,p);else{m=a;try{g()}catch(S){Iu(m,S)}}p=p.next}while(p!==r)}break;case 1:if(bx(a),r=a.stateNode,typeof r.componentWillUnmount=="function")try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(S){Iu(a,S)}break;case 5:bx(a);break;case 4:Px(r,a)}}function Cx(r){r.alternate=null,r.child=null,r.dependencies=null,r.firstEffect=null,r.lastEffect=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.return=null,r.updateQueue=null}function Tx(r){return r.tag===5||r.tag===3||r.tag===4}function Ix(r){e:{for(var a=r.return;a!==null;){if(Tx(a))break e;a=a.return}throw Error(at(160))}var p=a;switch(a=p.stateNode,p.tag){case 5:var m=!1;break;case 3:a=a.containerInfo,m=!0;break;case 4:a=a.containerInfo,m=!0;break;default:throw Error(at(161))}p.flags&16&&(zp(a,""),p.flags&=-17);e:t:for(p=r;;){for(;p.sibling===null;){if(p.return===null||Tx(p.return)){p=null;break e}p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue t;p.child.return=p,p=p.child}if(!(p.flags&2)){p=p.stateNode;break e}}m?Oy(r,p,a):Fy(r,p,a)}function Oy(r,a,p){var m=r.tag,g=m===5||m===6;if(g)r=g?r.stateNode:r.stateNode.instance,a?p.nodeType===8?p.parentNode.insertBefore(r,a):p.insertBefore(r,a):(p.nodeType===8?(a=p.parentNode,a.insertBefore(r,p)):(a=p,a.appendChild(r)),p=p._reactRootContainer,p!=null||a.onclick!==null||(a.onclick=Pf));else if(m!==4&&(r=r.child,r!==null))for(Oy(r,a,p),r=r.sibling;r!==null;)Oy(r,a,p),r=r.sibling}function Fy(r,a,p){var m=r.tag,g=m===5||m===6;if(g)r=g?r.stateNode:r.stateNode.instance,a?p.insertBefore(r,a):p.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(Fy(r,a,p),r=r.sibling;r!==null;)Fy(r,a,p),r=r.sibling}function Px(r,a){for(var p=a,m=!1,g,S;;){if(!m){m=p.return;e:for(;;){if(m===null)throw Error(at(160));switch(g=m.stateNode,m.tag){case 5:S=!1;break e;case 3:g=g.containerInfo,S=!0;break e;case 4:g=g.containerInfo,S=!0;break e}m=m.return}m=!0}if(p.tag===5||p.tag===6){e:for(var l=r,L=p,D=L;;)if(Ex(l,D),D.child!==null&&D.tag!==4)D.child.return=D,D=D.child;else{if(D===L)break e;for(;D.sibling===null;){if(D.return===null||D.return===L)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}S?(l=g,L=p.stateNode,l.nodeType===8?l.parentNode.removeChild(L):l.removeChild(L)):g.removeChild(p.stateNode)}else if(p.tag===4){if(p.child!==null){g=p.stateNode.containerInfo,S=!0,p.child.return=p,p=p.child;continue}}else if(Ex(r,p),p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break;for(;p.sibling===null;){if(p.return===null||p.return===a)return;p=p.return,p.tag===4&&(m=!1)}p.sibling.return=p.return,p=p.sibling}}function Ry(r,a){switch(a.tag){case 0:case 11:case 14:case 15:case 22:var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var m=p=p.next;do(m.tag&3)==3&&(r=m.destroy,m.destroy=void 0,r!==void 0&&r()),m=m.next;while(m!==p)}return;case 1:return;case 5:if(p=a.stateNode,p!=null){m=a.memoizedProps;var g=r!==null?r.memoizedProps:m;r=a.type;var S=a.updateQueue;if(a.updateQueue=null,S!==null){for(p[Af]=m,r==="input"&&m.type==="radio"&&m.name!=null&&c_(p,m),Em(r,g),a=Em(r,m),g=0;g<S.length;g+=2){var l=S[g],L=S[g+1];l==="style"?g_(p,L):l==="dangerouslySetInnerHTML"?y_(p,L):l==="children"?zp(p,L):om(p,l,L,a)}switch(r){case"input":vm(p,m);break;case"textarea":f_(p,m);break;case"select":r=p._wrapperState.wasMultiple,p._wrapperState.wasMultiple=!!m.multiple,S=m.value,S!=null?mc(p,!!m.multiple,S,!1):r!==!!m.multiple&&(m.defaultValue!=null?mc(p,!!m.multiple,m.defaultValue,!0):mc(p,!!m.multiple,m.multiple?[]:"",!1))}}}return;case 6:if(a.stateNode===null)throw Error(at(162));a.stateNode.nodeValue=a.memoizedProps;return;case 3:p=a.stateNode,p.hydrate&&(p.hydrate=!1,D_(p.containerInfo));return;case 12:return;case 13:a.memoizedState!==null&&(Vy=no(),Sx(a.child,!0)),kx(a);return;case 19:kx(a);return;case 17:return;case 23:case 24:Sx(a,a.memoizedState!==null);return}throw Error(at(163))}function kx(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var p=r.stateNode;p===null&&(p=r.stateNode=new E2),a.forEach(function(m){var g=R2.bind(null,r,m);p.has(m)||(p.add(m),m.then(g,g))})}}function I2(r,a){return r!==null&&(r=r.memoizedState,r===null||r.dehydrated!==null)?(a=a.memoizedState,a!==null&&a.dehydrated===null):!1}var P2=Math.ceil,Jf=rl.ReactCurrentDispatcher,By=rl.ReactCurrentOwner,Qt=0,_o=null,pi=null,oo=0,fl=0,Uy=vu(0),Di=0,Qf=null,Oc=0,hh=0,Fc=0,Ny=0,jy=null,Vy=0,qy=1/0;function Rc(){qy=no()+500}var Tt=null,ed=!1,Zy=null,ds=null,Su=!1,fh=null,dh=90,Gy=[],Wy=[],Gs=null,mh=0,Xy=null,td=-1,Ws=0,rd=0,yh=null,nd=!1;function ea(){return(Qt&48)!=0?no():td!==-1?td:td=no()}function Eu(r){if(r=r.mode,(r&2)==0)return 1;if((r&4)==0)return Ac()===99?1:2;if(Ws===0&&(Ws=Oc),m2.transition!==0){rd!==0&&(rd=jy!==null?jy.pendingLanes:0),r=Ws;var a=4186112&~rd;return a&=-a,a===0&&(r=4186112&~r,a=r&-r,a===0&&(a=8192)),a}return r=Ac(),(Qt&4)!=0&&r===98?r=_f(12,Ws):(r=gb(r),r=_f(r,Ws)),r}function Cu(r,a,p){if(50<mh)throw mh=0,Xy=null,Error(at(185));if(r=id(r,a),r===null)return null;xf(r,a,p),r===_o&&(Fc|=a,Di===4&&Bc(r,oo));var m=Ac();a===1?(Qt&8)!=0&&(Qt&48)==0?Ky(r):(xa(r,p),Qt===0&&(Rc(),cs())):((Qt&4)==0||m!==98&&m!==99||(Gs===null?Gs=new Set([r]):Gs.add(r)),xa(r,p)),jy=r}function id(r,a){r.lanes|=a;var p=r.alternate;for(p!==null&&(p.lanes|=a),p=r,r=r.return;r!==null;)r.childLanes|=a,p=r.alternate,p!==null&&(p.childLanes|=a),p=r,r=r.return;return p.tag===3?p.stateNode:null}function xa(r,a){for(var p=r.callbackNode,m=r.suspendedLanes,g=r.pingedLanes,S=r.expirationTimes,l=r.pendingLanes;0<l;){var L=31-du(l),D=1<<L,J=S[L];if(J===-1){if((D&m)==0||(D&g)!=0){J=a,_c(D);var he=dn;S[L]=10<=he?J+250:6<=he?J+5e3:-1}}else J<=a&&(r.expiredLanes|=D);l&=~D}if(m=Vp(r,r===_o?oo:0),a=dn,m===0)p!==null&&(p!==py&&ly(p),r.callbackNode=null,r.callbackPriority=0);else{if(p!==null){if(r.callbackPriority===a)return;p!==py&&ly(p)}a===15?(p=Ky.bind(null,r),Vs===null?(Vs=[p],Of=uy(Df,D0)):Vs.push(p),p=py):a===14?p=Qp(99,Ky.bind(null,r)):(p=_b(a),p=Qp(p,Ax.bind(null,r))),r.callbackPriority=a,r.callbackNode=p}}function Ax(r){if(td=-1,rd=Ws=0,(Qt&48)!=0)throw Error(at(327));var a=r.callbackNode;if(Tu()&&r.callbackNode!==a)return null;var p=Vp(r,r===_o?oo:0);if(p===0)return null;var m=p,g=Qt;Qt|=16;var S=Dx();(_o!==r||oo!==m)&&(Rc(),Uc(r,m));do try{M2();break}catch(L){Lx(r,L)}while(1);if(fy(),Jf.current=S,Qt=g,pi!==null?m=0:(_o=null,oo=0,m=Di),(Oc&Fc)!=0)Uc(r,0);else if(m!==0){if(m===2&&(Qt|=64,r.hydrate&&(r.hydrate=!1,iy(r.containerInfo)),p=j_(r),p!==0&&(m=vh(r,p))),m===1)throw a=Qf,Uc(r,0),Bc(r,p),xa(r,no()),a;switch(r.finishedWork=r.current.alternate,r.finishedLanes=p,m){case 0:case 1:throw Error(at(345));case 2:dl(r);break;case 3:if(Bc(r,p),(p&62914560)===p&&(m=Vy+500-no(),10<m)){if(Vp(r,0)!==0)break;if(g=r.suspendedLanes,(g&p)!==p){ea(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=x0(dl.bind(null,r),m);break}dl(r);break;case 4:if(Bc(r,p),(p&4186112)===p)break;for(m=r.eventTimes,g=-1;0<p;){var l=31-du(p);S=1<<l,l=m[l],l>g&&(g=l),p&=~S}if(p=g,p=no()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*P2(p/1960))-p,10<p){r.timeoutHandle=x0(dl.bind(null,r),p);break}dl(r);break;case 5:dl(r);break;default:throw Error(at(329))}}return xa(r,no()),r.callbackNode===a?Ax.bind(null,r):null}function Bc(r,a){for(a&=~Ny,a&=~Fc,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var p=31-du(a),m=1<<p;r[p]=-1,a&=~m}}function Ky(r){if((Qt&48)!=0)throw Error(at(327));if(Tu(),r===_o&&(r.expiredLanes&oo)!=0){var a=oo,p=vh(r,a);(Oc&Fc)!=0&&(a=Vp(r,a),p=vh(r,a))}else a=Vp(r,0),p=vh(r,a);if(r.tag!==0&&p===2&&(Qt|=64,r.hydrate&&(r.hydrate=!1,iy(r.containerInfo)),a=j_(r),a!==0&&(p=vh(r,a))),p===1)throw p=Qf,Uc(r,0),Bc(r,a),xa(r,no()),p;return r.finishedWork=r.current.alternate,r.finishedLanes=a,dl(r),xa(r,no()),null}function k2(){if(Gs!==null){var r=Gs;Gs=null,r.forEach(function(a){a.expiredLanes|=24&a.pendingLanes,xa(a,no())})}cs()}function Mx(r,a){var p=Qt;Qt|=1;try{return r(a)}finally{Qt=p,Qt===0&&(Rc(),cs())}}function zx(r,a){var p=Qt;Qt&=-2,Qt|=8;try{return r(a)}finally{Qt=p,Qt===0&&(Rc(),cs())}}function od(r,a){jn(Uy,fl),fl|=a,Oc|=a}function Hy(){fl=Uy.current,wn(Uy)}function Uc(r,a){r.finishedWork=null,r.finishedLanes=0;var p=r.timeoutHandle;if(p!==-1&&(r.timeoutHandle=-1,l2(p)),pi!==null)for(p=pi.return;p!==null;){var m=p;switch(m.tag){case 1:m=m.type.childContextTypes,m!=null&&zf();break;case 3:Lc(),wn(Fo),wn(ro),wy();break;case 5:gy(m);break;case 4:Lc();break;case 13:wn(Vn);break;case 19:wn(Vn);break;case 10:dy(m);break;case 23:case 24:Hy()}p=p.return}_o=r,pi=Pu(r.current,null),oo=fl=Oc=a,Di=0,Qf=null,Ny=Fc=hh=0}function Lx(r,a){do{var p=pi;try{if(fy(),oh.current=$f,Wf){for(var m=Jn.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}Wf=!1}if(ah=0,Li=io=Jn=null,sh=!1,By.current=null,p===null||p.return===null){Di=1,Qf=a,pi=null;break}e:{var S=r,l=p.return,L=p,D=a;if(a=oo,L.flags|=2048,L.firstEffect=L.lastEffect=null,D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=D;if((L.mode&2)==0){var he=L.alternate;he?(L.updateQueue=he.updateQueue,L.memoizedState=he.memoizedState,L.lanes=he.lanes):(L.updateQueue=null,L.memoizedState=null)}var Ne=(Vn.current&1)!=0,ne=l;do{var Oe;if(Oe=ne.tag===13){var He=ne.memoizedState;if(He!==null)Oe=He.dehydrated!==null;else{var rt=ne.memoizedProps;Oe=rt.fallback===void 0?!1:rt.unstable_avoidThisFallback!==!0?!0:!Ne}}if(Oe){var pe=ne.updateQueue;if(pe===null){var ae=new Set;ae.add(J),ne.updateQueue=ae}else pe.add(J);if((ne.mode&2)==0){if(ne.flags|=64,L.flags|=16384,L.flags&=-2981,L.tag===1)if(L.alternate===null)L.tag=17;else{var le=xu(-1,1);le.tag=2,wu(L,le)}L.lanes|=1;break e}D=void 0,L=a;var Pe=S.pingCache;if(Pe===null?(Pe=S.pingCache=new S2,D=new Set,Pe.set(J,D)):(D=Pe.get(J),D===void 0&&(D=new Set,Pe.set(J,D))),!D.has(L)){D.add(L);var Me=F2.bind(null,S,J,L);J.then(Me,Me)}ne.flags|=4096,ne.lanes=a;break e}ne=ne.return}while(ne!==null);D=Error((dc(L.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Di!==5&&(Di=2),D=Ly(D,L),ne=l;do{switch(ne.tag){case 3:S=D,ne.flags|=4096,a&=-a,ne.lanes|=a;var yt=xx(ne,S,a);R0(ne,yt);break e;case 1:S=D;var Ze=ne.type,It=ne.stateNode;if((ne.flags&64)==0&&(typeof Ze.getDerivedStateFromError=="function"||It!==null&&typeof It.componentDidCatch=="function"&&(ds===null||!ds.has(It)))){ne.flags|=4096,a&=-a,ne.lanes|=a;var Ot=wx(ne,S,a);R0(ne,Ot);break e}}ne=ne.return}while(ne!==null)}Fx(p)}catch(pt){a=pt,pi===p&&p!==null&&(pi=p=p.return);continue}break}while(1)}function Dx(){var r=Jf.current;return Jf.current=$f,r===null?$f:r}function vh(r,a){var p=Qt;Qt|=16;var m=Dx();_o===r&&oo===a||Uc(r,a);do try{A2();break}catch(g){Lx(r,g)}while(1);if(fy(),Qt=p,Jf.current=m,pi!==null)throw Error(at(261));return _o=null,oo=0,Di}function A2(){for(;pi!==null;)Ox(pi)}function M2(){for(;pi!==null&&!h2();)Ox(pi)}function Ox(r){var a=Ux(r.alternate,r,fl);r.memoizedProps=r.pendingProps,a===null?Fx(r):pi=a,By.current=null}function Fx(r){var a=r;do{var p=a.alternate;if(r=a.return,(a.flags&2048)==0){if(p=w2(p,a,fl),p!==null){pi=p;return}if(p=a,p.tag!==24&&p.tag!==23||p.memoizedState===null||(fl&1073741824)!=0||(p.mode&4)==0){for(var m=0,g=p.child;g!==null;)m|=g.lanes|g.childLanes,g=g.sibling;p.childLanes=m}r!==null&&(r.flags&2048)==0&&(r.firstEffect===null&&(r.firstEffect=a.firstEffect),a.lastEffect!==null&&(r.lastEffect!==null&&(r.lastEffect.nextEffect=a.firstEffect),r.lastEffect=a.lastEffect),1<a.flags&&(r.lastEffect!==null?r.lastEffect.nextEffect=a:r.firstEffect=a,r.lastEffect=a))}else{if(p=b2(a),p!==null){p.flags&=2047,pi=p;return}r!==null&&(r.firstEffect=r.lastEffect=null,r.flags|=2048)}if(a=a.sibling,a!==null){pi=a;return}pi=a=r}while(a!==null);Di===0&&(Di=5)}function dl(r){var a=Ac();return ll(99,z2.bind(null,r,a)),null}function z2(r,a){do Tu();while(fh!==null);if((Qt&48)!=0)throw Error(at(327));var p=r.finishedWork;if(p===null)return null;if(r.finishedWork=null,r.finishedLanes=0,p===r.current)throw Error(at(177));r.callbackNode=null;var m=p.lanes|p.childLanes,g=m,S=r.pendingLanes&~g;r.pendingLanes=g,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=g,r.mutableReadLanes&=g,r.entangledLanes&=g,g=r.entanglements;for(var l=r.eventTimes,L=r.expirationTimes;0<S;){var D=31-du(S),J=1<<D;g[D]=0,l[D]=-1,L[D]=-1,S&=~J}if(Gs!==null&&(m&24)==0&&Gs.has(r)&&Gs.delete(r),r===_o&&(pi=_o=null,oo=0),1<p.flags?p.lastEffect!==null?(p.lastEffect.nextEffect=p,m=p.firstEffect):m=p:m=p.firstEffect,m!==null){if(g=Qt,Qt|=32,By.current=null,ty=wf,l=s0(),Ym(l)){if("selectionStart"in l)L={start:l.selectionStart,end:l.selectionEnd};else e:if(L=(L=l.ownerDocument)&&L.defaultView||window,(J=L.getSelection&&L.getSelection())&&J.rangeCount!==0){L=J.anchorNode,S=J.anchorOffset,D=J.focusNode,J=J.focusOffset;try{L.nodeType,D.nodeType}catch{L=null;break e}var he=0,Ne=-1,ne=-1,Oe=0,He=0,rt=l,pe=null;t:for(;;){for(var ae;rt!==L||S!==0&&rt.nodeType!==3||(Ne=he+S),rt!==D||J!==0&&rt.nodeType!==3||(ne=he+J),rt.nodeType===3&&(he+=rt.nodeValue.length),(ae=rt.firstChild)!==null;)pe=rt,rt=ae;for(;;){if(rt===l)break t;if(pe===L&&++Oe===S&&(Ne=he),pe===D&&++He===J&&(ne=he),(ae=rt.nextSibling)!==null)break;rt=pe,pe=rt.parentNode}rt=ae}L=Ne===-1||ne===-1?null:{start:Ne,end:ne}}else L=null;L=L||{start:0,end:0}}else L=null;ry={focusedElem:l,selectionRange:L},wf=!1,yh=null,nd=!1,Tt=m;do try{L2()}catch(pt){if(Tt===null)throw Error(at(330));Iu(Tt,pt),Tt=Tt.nextEffect}while(Tt!==null);yh=null,Tt=m;do try{for(l=r;Tt!==null;){var le=Tt.flags;if(le&16&&zp(Tt.stateNode,""),le&128){var Pe=Tt.alternate;if(Pe!==null){var Me=Pe.ref;Me!==null&&(typeof Me=="function"?Me(null):Me.current=null)}}switch(le&1038){case 2:Ix(Tt),Tt.flags&=-3;break;case 6:Ix(Tt),Tt.flags&=-3,Ry(Tt.alternate,Tt);break;case 1024:Tt.flags&=-1025;break;case 1028:Tt.flags&=-1025,Ry(Tt.alternate,Tt);break;case 4:Ry(Tt.alternate,Tt);break;case 8:L=Tt,Px(l,L);var yt=L.alternate;Cx(L),yt!==null&&Cx(yt)}Tt=Tt.nextEffect}}catch(pt){if(Tt===null)throw Error(at(330));Iu(Tt,pt),Tt=Tt.nextEffect}while(Tt!==null);if(Me=ry,Pe=s0(),le=Me.focusedElem,l=Me.selectionRange,Pe!==le&&le&&le.ownerDocument&&a0(le.ownerDocument.documentElement,le)){for(l!==null&&Ym(le)&&(Pe=l.start,Me=l.end,Me===void 0&&(Me=Pe),"selectionStart"in le?(le.selectionStart=Pe,le.selectionEnd=Math.min(Me,le.value.length)):(Me=(Pe=le.ownerDocument||document)&&Pe.defaultView||window,Me.getSelection&&(Me=Me.getSelection(),L=le.textContent.length,yt=Math.min(l.start,L),l=l.end===void 0?yt:Math.min(l.end,L),!Me.extend&&yt>l&&(L=l,l=yt,yt=L),L=o0(le,yt),S=o0(le,l),L&&S&&(Me.rangeCount!==1||Me.anchorNode!==L.node||Me.anchorOffset!==L.offset||Me.focusNode!==S.node||Me.focusOffset!==S.offset)&&(Pe=Pe.createRange(),Pe.setStart(L.node,L.offset),Me.removeAllRanges(),yt>l?(Me.addRange(Pe),Me.extend(S.node,S.offset)):(Pe.setEnd(S.node,S.offset),Me.addRange(Pe)))))),Pe=[],Me=le;Me=Me.parentNode;)Me.nodeType===1&&Pe.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof le.focus=="function"&&le.focus(),le=0;le<Pe.length;le++)Me=Pe[le],Me.element.scrollLeft=Me.left,Me.element.scrollTop=Me.top}wf=!!ty,ry=ty=null,r.current=p,Tt=m;do try{for(le=r;Tt!==null;){var Ze=Tt.flags;if(Ze&36&&T2(le,Tt.alternate,Tt),Ze&128){Pe=void 0;var It=Tt.ref;if(It!==null){var Ot=Tt.stateNode;switch(Tt.tag){case 5:Pe=Ot;break;default:Pe=Ot}typeof It=="function"?It(Pe):It.current=Pe}}Tt=Tt.nextEffect}}catch(pt){if(Tt===null)throw Error(at(330));Iu(Tt,pt),Tt=Tt.nextEffect}while(Tt!==null);Tt=null,d2(),Qt=g}else r.current=p;if(Su)Su=!1,fh=r,dh=a;else for(Tt=m;Tt!==null;)a=Tt.nextEffect,Tt.nextEffect=null,Tt.flags&8&&(Ze=Tt,Ze.sibling=null,Ze.stateNode=null),Tt=a;if(m=r.pendingLanes,m===0&&(ds=null),m===1?r===Xy?mh++:(mh=0,Xy=r):mh=0,p=p.stateNode,ul&&typeof ul.onCommitFiberRoot=="function")try{ul.onCommitFiberRoot(sy,p,void 0,(p.current.flags&64)==64)}catch{}if(xa(r,no()),ed)throw ed=!1,r=Zy,Zy=null,r;return(Qt&8)!=0||cs(),null}function L2(){for(;Tt!==null;){var r=Tt.alternate;nd||yh===null||((Tt.flags&8)!=0?I_(Tt,yh)&&(nd=!0):Tt.tag===13&&I2(r,Tt)&&I_(Tt,yh)&&(nd=!0));var a=Tt.flags;(a&256)!=0&&C2(r,Tt),(a&512)==0||Su||(Su=!0,Qp(97,function(){return Tu(),null})),Tt=Tt.nextEffect}}function Tu(){if(dh!==90){var r=97<dh?97:dh;return dh=90,ll(r,O2)}return!1}function D2(r,a){Gy.push(a,r),Su||(Su=!0,Qp(97,function(){return Tu(),null}))}function Rx(r,a){Wy.push(a,r),Su||(Su=!0,Qp(97,function(){return Tu(),null}))}function O2(){if(fh===null)return!1;var r=fh;if(fh=null,(Qt&48)!=0)throw Error(at(331));var a=Qt;Qt|=32;var p=Wy;Wy=[];for(var m=0;m<p.length;m+=2){var g=p[m],S=p[m+1],l=g.destroy;if(g.destroy=void 0,typeof l=="function")try{l()}catch(D){if(S===null)throw Error(at(330));Iu(S,D)}}for(p=Gy,Gy=[],m=0;m<p.length;m+=2){g=p[m],S=p[m+1];try{var L=g.create;g.destroy=L()}catch(D){if(S===null)throw Error(at(330));Iu(S,D)}}for(L=r.current.firstEffect;L!==null;)r=L.nextEffect,L.nextEffect=null,L.flags&8&&(L.sibling=null,L.stateNode=null),L=r;return Qt=a,cs(),!0}function Bx(r,a,p){a=Ly(p,a),a=xx(r,a,1),wu(r,a),a=ea(),r=id(r,1),r!==null&&(xf(r,1,a),xa(r,a))}function Iu(r,a){if(r.tag===3)Bx(r,r,a);else for(var p=r.return;p!==null;){if(p.tag===3){Bx(p,r,a);break}else if(p.tag===1){var m=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ds===null||!ds.has(m))){r=Ly(a,r);var g=wx(p,r,1);if(wu(p,g),g=ea(),p=id(p,1),p!==null)xf(p,1,g),xa(p,g);else if(typeof m.componentDidCatch=="function"&&(ds===null||!ds.has(m)))try{m.componentDidCatch(a,r)}catch{}break}}p=p.return}}function F2(r,a,p){var m=r.pingCache;m!==null&&m.delete(a),a=ea(),r.pingedLanes|=r.suspendedLanes&p,_o===r&&(oo&p)===p&&(Di===4||Di===3&&(oo&62914560)===oo&&500>no()-Vy?Uc(r,0):Ny|=p),xa(r,a)}function R2(r,a){var p=r.stateNode;p!==null&&p.delete(a),a=0,a===0&&(a=r.mode,(a&2)==0?a=1:(a&4)==0?a=Ac()===99?1:2:(Ws===0&&(Ws=Oc),a=xc(62914560&~Ws),a===0&&(a=4194304))),p=ea(),r=id(r,a),r!==null&&(xf(r,a,p),xa(r,p))}var Ux;Ux=function(r,a,p){var m=a.lanes;if(r!==null)if(r.memoizedProps!==a.pendingProps||Fo.current)qa=!0;else if((p&m)!=0)qa=(r.flags&16384)!=0;else{switch(qa=!1,a.tag){case 3:cx(a),xy();break;case 5:G0(a);break;case 1:Ro(a.type)&&Lf(a);break;case 4:vy(a,a.stateNode.containerInfo);break;case 10:m=a.memoizedProps.value;var g=a.type._context;jn(Ff,g._currentValue),g._currentValue=m;break;case 13:if(a.memoizedState!==null)return(p&a.child.childLanes)!=0?px(r,a,p):(jn(Vn,Vn.current&1),a=Zs(r,a,p),a!==null?a.sibling:null);jn(Vn,Vn.current&1);break;case 19:if(m=(p&a.childLanes)!=0,(r.flags&64)!=0){if(m)return yx(r,a,p);a.flags|=64}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),jn(Vn,Vn.current),m)break;return null;case 23:case 24:return a.lanes=0,Py(r,a,p)}return Zs(r,a,p)}else qa=!1;switch(a.lanes=0,a.tag){case 2:if(m=a.type,r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),r=a.pendingProps,g=kc(a,ro.current),zc(a,p),g=Sy(null,a,m,r,g,p),a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0){if(a.tag=1,a.memoizedState=null,a.updateQueue=null,Ro(m)){var S=!0;Lf(a)}else S=!1;a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,my(a);var l=m.getDerivedStateFromProps;typeof l=="function"&&Uf(a,m,l,r),g.updater=Nf,a.stateNode=g,g._reactInternals=a,yy(a,m,r,p),a=Ay(null,a,m,!0,S,p)}else a.tag=0,Uo(null,a,g,p),a=a.child;return a;case 16:g=a.elementType;e:{switch(r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),r=a.pendingProps,S=g._init,g=S(g._payload),a.type=g,S=a.tag=U2(g),r=Va(g,r),S){case 0:a=ky(null,a,g,r,p);break e;case 1:a=lx(null,a,g,r,p);break e;case 11:a=ox(null,a,g,r,p);break e;case 14:a=ax(null,a,g,Va(g.type,r),m,p);break e}throw Error(at(306,g,""))}return a;case 0:return m=a.type,g=a.pendingProps,g=a.elementType===m?g:Va(m,g),ky(r,a,m,g,p);case 1:return m=a.type,g=a.pendingProps,g=a.elementType===m?g:Va(m,g),lx(r,a,m,g,p);case 3:if(cx(a),m=a.updateQueue,r===null||m===null)throw Error(at(282));if(m=a.pendingProps,g=a.memoizedState,g=g!==null?g.element:null,F0(r,a),eh(a,m,null,p),m=a.memoizedState.element,m===g)xy(),a=Zs(r,a,p);else{if(g=a.stateNode,(S=g.hydrate)&&(bu=Cc(a.stateNode.containerInfo.firstChild),qs=a,S=hs=!0),S){if(r=g.mutableSourceEagerHydrationData,r!=null)for(g=0;g<r.length;g+=2)S=r[g],S._workInProgressVersionPrimary=r[g+1],Dc.push(S);for(p=Z0(a,null,m,p),a.child=p;p;)p.flags=p.flags&-3|1024,p=p.sibling}else Uo(r,a,m,p),xy();a=a.child}return a;case 5:return G0(a),r===null&&_y(a),m=a.type,g=a.pendingProps,S=r!==null?r.memoizedProps:null,l=g.children,ny(m,g)?l=null:S!==null&&ny(m,S)&&(a.flags|=16),ux(r,a),Uo(r,a,l,p),a.child;case 6:return r===null&&_y(a),null;case 13:return px(r,a,p);case 4:return vy(a,a.stateNode.containerInfo),m=a.pendingProps,r===null?a.child=qf(a,null,m,p):Uo(r,a,m,p),a.child;case 11:return m=a.type,g=a.pendingProps,g=a.elementType===m?g:Va(m,g),ox(r,a,m,g,p);case 7:return Uo(r,a,a.pendingProps,p),a.child;case 8:return Uo(r,a,a.pendingProps.children,p),a.child;case 12:return Uo(r,a,a.pendingProps.children,p),a.child;case 10:e:{m=a.type._context,g=a.pendingProps,l=a.memoizedProps,S=g.value;var L=a.type._context;if(jn(Ff,L._currentValue),L._currentValue=S,l!==null)if(L=l.value,S=va(L,S)?0:(typeof m._calculateChangedBits=="function"?m._calculateChangedBits(L,S):1073741823)|0,S===0){if(l.children===g.children&&!Fo.current){a=Zs(r,a,p);break e}}else for(L=a.child,L!==null&&(L.return=a);L!==null;){var D=L.dependencies;if(D!==null){l=L.child;for(var J=D.firstContext;J!==null;){if(J.context===m&&(J.observedBits&S)!=0){L.tag===1&&(J=xu(-1,p&-p),J.tag=2,wu(L,J)),L.lanes|=p,J=L.alternate,J!==null&&(J.lanes|=p),O0(L.return,p),D.lanes|=p;break}J=J.next}}else l=L.tag===10&&L.type===a.type?null:L.child;if(l!==null)l.return=L;else for(l=L;l!==null;){if(l===a){l=null;break}if(L=l.sibling,L!==null){L.return=l.return,l=L;break}l=l.return}L=l}Uo(r,a,g.children,p),a=a.child}return a;case 9:return g=a.type,S=a.pendingProps,m=S.children,zc(a,p),g=ga(g,S.unstable_observedBits),m=m(g),a.flags|=1,Uo(r,a,m,p),a.child;case 14:return g=a.type,S=Va(g,a.pendingProps),S=Va(g.type,S),ax(r,a,g,S,m,p);case 15:return sx(r,a,a.type,a.pendingProps,m,p);case 17:return m=a.type,g=a.pendingProps,g=a.elementType===m?g:Va(m,g),r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),a.tag=1,Ro(m)?(r=!0,Lf(a)):r=!1,zc(a,p),j0(a,m,g),yy(a,m,g,p),Ay(null,a,m,!0,r,p);case 19:return yx(r,a,p);case 23:return Py(r,a,p);case 24:return Py(r,a,p)}throw Error(at(156,a.tag))};function B2(r,a,p,m){this.tag=r,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function wa(r,a,p,m){return new B2(r,a,p,m)}function $y(r){return r=r.prototype,!(!r||!r.isReactComponent)}function U2(r){if(typeof r=="function")return $y(r)?1:0;if(r!=null){if(r=r.$$typeof,r===sf)return 11;if(r===lf)return 14}return 2}function Pu(r,a){var p=r.alternate;return p===null?(p=wa(r.tag,a,r.key,r.mode),p.elementType=r.elementType,p.type=r.type,p.stateNode=r.stateNode,p.alternate=r,r.alternate=p):(p.pendingProps=a,p.type=r.type,p.flags=0,p.nextEffect=null,p.firstEffect=null,p.lastEffect=null),p.childLanes=r.childLanes,p.lanes=r.lanes,p.child=r.child,p.memoizedProps=r.memoizedProps,p.memoizedState=r.memoizedState,p.updateQueue=r.updateQueue,a=r.dependencies,p.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},p.sibling=r.sibling,p.index=r.index,p.ref=r.ref,p}function ad(r,a,p,m,g,S){var l=2;if(m=r,typeof r=="function")$y(r)&&(l=1);else if(typeof r=="string")l=5;else e:switch(r){case lu:return Nc(p.children,g,S,a);case o_:l=8,g|=16;break;case am:l=8,g|=1;break;case Pp:return r=wa(12,p,a,g|8),r.elementType=Pp,r.type=Pp,r.lanes=S,r;case kp:return r=wa(13,p,a,g),r.type=kp,r.elementType=kp,r.lanes=S,r;case uf:return r=wa(19,p,a,g),r.elementType=uf,r.lanes=S,r;case hm:return Yy(p,g,S,a);case fm:return r=wa(24,p,a,g),r.elementType=fm,r.lanes=S,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case sm:l=10;break e;case um:l=9;break e;case sf:l=11;break e;case lf:l=14;break e;case lm:l=16,m=null;break e;case cm:l=22;break e}throw Error(at(130,r==null?r:typeof r,""))}return a=wa(l,p,a,g),a.elementType=r,a.type=m,a.lanes=S,a}function Nc(r,a,p,m){return r=wa(7,r,m,a),r.lanes=p,r}function Yy(r,a,p,m){return r=wa(23,r,m,a),r.elementType=hm,r.lanes=p,r}function Jy(r,a,p){return r=wa(6,r,null,a),r.lanes=p,r}function Qy(r,a,p){return a=wa(4,r.children!==null?r.children:[],r.key,a),a.lanes=p,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function N2(r,a,p){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=p,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Um(0),this.expirationTimes=Um(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Um(0),this.mutableSourceEagerHydrationData=null}function j2(r,a,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nl,key:m==null?null:""+m,children:r,containerInfo:a,implementation:p}}function sd(r,a,p,m){var g=a.current,S=ea(),l=Eu(g);e:if(p){p=p._reactInternals;t:{if(ol(p)!==p||p.tag!==1)throw Error(at(170));var L=p;do{switch(L.tag){case 3:L=L.stateNode.context;break t;case 1:if(Ro(L.type)){L=L.stateNode.__reactInternalMemoizedMergedChildContext;break t}}L=L.return}while(L!==null);throw Error(at(171))}if(p.tag===1){var D=p.type;if(Ro(D)){p=C0(p,D,L);break e}}p=L}else p=gu;return a.context===null?a.context=p:a.pendingContext=p,a=xu(S,l),a.payload={element:r},m=m===void 0?null:m,m!==null&&(a.callback=m),wu(g,a),Cu(g,l,S),l}function ev(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Nx(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var p=r.retryLane;r.retryLane=p!==0&&p<a?p:a}}function tv(r,a){Nx(r,a),(r=r.alternate)&&Nx(r,a)}function V2(){return null}function rv(r,a,p){var m=p!=null&&p.hydrationOptions!=null&&p.hydrationOptions.mutableSources||null;if(p=new N2(r,a,p!=null&&p.hydrate===!0),a=wa(3,null,null,a===2?7:a===1?3:0),p.current=a,a.stateNode=p,my(a),r[Tc]=p.current,d0(r.nodeType===8?r.parentNode:r),m)for(r=0;r<m.length;r++){a=m[r];var g=a._getVersion;g=g(a._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[a,g]:p.mutableSourceEagerHydrationData.push(a,g)}this._internalRoot=p}rv.prototype.render=function(r){sd(r,this._internalRoot,null,null)};rv.prototype.unmount=function(){var r=this._internalRoot,a=r.containerInfo;sd(null,r,null,function(){a[Tc]=null})};function gh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function q2(r,a){if(a||(a=r?r.nodeType===9?r.documentElement:r.firstChild:null,a=!(!a||a.nodeType!==1||!a.hasAttribute("data-reactroot"))),!a)for(var p;p=r.lastChild;)r.removeChild(p);return new rv(r,0,a?{hydrate:!0}:void 0)}function ud(r,a,p,m,g){var S=p._reactRootContainer;if(S){var l=S._internalRoot;if(typeof g=="function"){var L=g;g=function(){var J=ev(l);L.call(J)}}sd(a,l,r,g)}else{if(S=p._reactRootContainer=q2(p,m),l=S._internalRoot,typeof g=="function"){var D=g;g=function(){var J=ev(l);D.call(J)}}zx(function(){sd(a,l,r,g)})}return ev(l)}P_=function(r){if(r.tag===13){var a=ea();Cu(r,4,a),tv(r,4)}};Lm=function(r){if(r.tag===13){var a=ea();Cu(r,67108864,a),tv(r,67108864)}};k_=function(r){if(r.tag===13){var a=ea(),p=Eu(r);Cu(r,p,a),tv(r,p)}};A_=function(r,a){return a()};Tm=function(r,a,p){switch(a){case"input":if(vm(r,p),a=p.name,p.type==="radio"&&a!=null){for(p=r;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<p.length;a++){var m=p[a];if(m!==r&&m.form===r.form){var g=Mf(m);if(!g)throw Error(at(90));u_(m),vm(m,g)}}}break;case"textarea":f_(r,p);break;case"select":a=p.value,a!=null&&mc(r,!!p.multiple,a,!1)}};Im=Mx;b_=function(r,a,p,m,g){var S=Qt;Qt|=4;try{return ll(98,r.bind(null,a,p,m,g))}finally{Qt=S,Qt===0&&(Rc(),cs())}};Pm=function(){(Qt&49)==0&&(k2(),Tu())};S_=function(r,a){var p=Qt;Qt|=2;try{return r(a)}finally{Qt=p,Qt===0&&(Rc(),cs())}};function jx(r,a){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gh(a))throw Error(at(200));return j2(r,a,null,p)}var Z2={Events:[Jp,Ic,Mf,x_,w_,Tu,{current:!1}]},_h={findFiberByHostInstance:al,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},G2={bundleType:_h.bundleType,version:_h.version,rendererPackageName:_h.rendererPackageName,rendererConfig:_h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rl.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=T_(r),r===null?null:r.stateNode},findFiberByHostInstance:_h.findFiberByHostInstance||V2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{sy=ld.inject(G2),ul=ld}catch{}}ya.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z2;ya.createPortal=jx;ya.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(at(188)):Error(at(268,Object.keys(r)));return r=T_(a),r=r===null?null:r.stateNode,r};ya.flushSync=function(r,a){var p=Qt;if((p&48)!=0)return r(a);Qt|=1;try{if(r)return ll(99,r.bind(null,a))}finally{Qt=p,cs()}};ya.hydrate=function(r,a,p){if(!gh(a))throw Error(at(200));return ud(null,r,a,!0,p)};ya.render=function(r,a,p){if(!gh(a))throw Error(at(200));return ud(null,r,a,!1,p)};ya.unmountComponentAtNode=function(r){if(!gh(r))throw Error(at(40));return r._reactRootContainer?(zx(function(){ud(null,null,r,!1,function(){r._reactRootContainer=null,r[Tc]=null})}),!0):!1};ya.unstable_batchedUpdates=Mx;ya.unstable_createPortal=function(r,a){return jx(r,a,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};ya.unstable_renderSubtreeIntoContainer=function(r,a,p,m){if(!gh(p))throw Error(at(200));if(r==null||r._reactInternals===void 0)throw Error(at(38));return ud(r,a,p,!1,m)};ya.version="17.0.2";function Vx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vx)}catch(r){console.error(r)}}Vx(),Jg.exports=ya;var W2=Jg.exports;function nv(r,a){return nv=Object.setPrototypeOf||function(m,g){return m.__proto__=g,m},nv(r,a)}function cd(r,a){r.prototype=Object.create(a.prototype),r.prototype.constructor=r,nv(r,a)}var pd=function(){function r(){this.listeners=[]}var a=r.prototype;return a.subscribe=function(m){var g=this,S=m||function(){};return this.listeners.push(S),this.onSubscribe(),function(){g.listeners=g.listeners.filter(function(l){return l!==S}),g.onUnsubscribe()}},a.hasListeners=function(){return this.listeners.length>0},a.onSubscribe=function(){},a.onUnsubscribe=function(){},r}();function Yr(){return Yr=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var p=arguments[a];for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(r[m]=p[m])}return r},Yr.apply(this,arguments)}var qx=typeof window=="undefined";function xo(){}function X2(r,a){return typeof r=="function"?r(a):r}function K2(r){return typeof r=="number"&&r>=0&&r!==1/0}function hd(r){return Array.isArray(r)?r:[r]}function H2(r,a){return Math.max(r+(a||0)-Date.now(),0)}function iv(r,a,p){return dd(r)?typeof a=="function"?Yr({},p,{queryKey:r,queryFn:a}):Yr({},a,{queryKey:r}):r}function ku(r,a,p){return dd(r)?[Yr({},a,{queryKey:r}),p]:[r||{},a]}function $2(r,a){if(r===!0&&a===!0||r==null&&a==null)return"all";if(r===!1&&a===!1)return"none";var p=r!=null?r:!a;return p?"active":"inactive"}function Zx(r,a){var p=r.active,m=r.exact,g=r.fetching,S=r.inactive,l=r.predicate,L=r.queryKey,D=r.stale;if(dd(L)){if(m){if(a.queryHash!==ov(L,a.options))return!1}else if(!fd(a.queryKey,L))return!1}var J=$2(p,S);if(J==="none")return!1;if(J!=="all"){var he=a.isActive();if(J==="active"&&!he||J==="inactive"&&he)return!1}return!(typeof D=="boolean"&&a.isStale()!==D||typeof g=="boolean"&&a.isFetching()!==g||l&&!l(a))}function Gx(r,a){var p=r.exact,m=r.fetching,g=r.predicate,S=r.mutationKey;if(dd(S)){if(!a.options.mutationKey)return!1;if(p){if(ml(a.options.mutationKey)!==ml(S))return!1}else if(!fd(a.options.mutationKey,S))return!1}return!(typeof m=="boolean"&&a.state.status==="loading"!==m||g&&!g(a))}function ov(r,a){var p=(a==null?void 0:a.queryKeyHashFn)||ml;return p(r)}function ml(r){var a=hd(r);return Y2(a)}function Y2(r){return JSON.stringify(r,function(a,p){return av(p)?Object.keys(p).sort().reduce(function(m,g){return m[g]=p[g],m},{}):p})}function fd(r,a){return Wx(hd(r),hd(a))}function Wx(r,a){return r===a?!0:typeof r!=typeof a?!1:r&&a&&typeof r=="object"&&typeof a=="object"?!Object.keys(a).some(function(p){return!Wx(r[p],a[p])}):!1}function Xx(r,a){if(r===a)return r;var p=Array.isArray(r)&&Array.isArray(a);if(p||av(r)&&av(a)){for(var m=p?r.length:Object.keys(r).length,g=p?a:Object.keys(a),S=g.length,l=p?[]:{},L=0,D=0;D<S;D++){var J=p?D:g[D];l[J]=Xx(r[J],a[J]),l[J]===r[J]&&L++}return m===S&&L===m?r:l}return a}function av(r){if(!Kx(r))return!1;var a=r.constructor;if(typeof a=="undefined")return!0;var p=a.prototype;return!(!Kx(p)||!p.hasOwnProperty("isPrototypeOf"))}function Kx(r){return Object.prototype.toString.call(r)==="[object Object]"}function dd(r){return typeof r=="string"||Array.isArray(r)}function J2(r){return new Promise(function(a){setTimeout(a,r)})}function Hx(r){Promise.resolve().then(r).catch(function(a){return setTimeout(function(){throw a})})}function $x(){if(typeof AbortController=="function")return new AbortController}var Q2=function(r){cd(a,r);function a(){return r.apply(this,arguments)||this}var p=a.prototype;return p.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},p.setEventListener=function(g){var S=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=g(function(l){typeof l=="boolean"?S.setFocused(l):S.onFocus()})},p.setFocused=function(g){this.focused=g,g&&this.onFocus()},p.onFocus=function(){this.listeners.forEach(function(g){g()})},p.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document=="undefined"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},p.setDefaultEventListener=function(){var g;!qx&&((g=window)==null?void 0:g.addEventListener)&&this.setEventListener(function(S){var l=function(){return S()};return window.addEventListener("visibilitychange",l,!1),window.addEventListener("focus",l,!1),function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("focus",l)}})},a}(pd),md=new Q2,eS=function(r){cd(a,r);function a(){return r.apply(this,arguments)||this}var p=a.prototype;return p.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},p.setEventListener=function(g){var S=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=g(function(l){typeof l=="boolean"?S.setOnline(l):S.onOnline()})},p.setOnline=function(g){this.online=g,g&&this.onOnline()},p.onOnline=function(){this.listeners.forEach(function(g){g()})},p.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator=="undefined"||typeof navigator.onLine=="undefined"?!0:navigator.onLine},p.setDefaultEventListener=function(){var g;!qx&&((g=window)==null?void 0:g.addEventListener)&&this.setEventListener(function(S){var l=function(){return S()};return window.addEventListener("online",l,!1),window.addEventListener("offline",l,!1),function(){window.removeEventListener("online",l),window.removeEventListener("offline",l)}})},a}(pd),yd=new eS;function tS(r){return Math.min(1e3*Math.pow(2,r),3e4)}function vd(r){return typeof(r==null?void 0:r.cancel)=="function"}var Yx=function(a){this.revert=a==null?void 0:a.revert,this.silent=a==null?void 0:a.silent};function sv(r){return r instanceof Yx}var Jx=function(a){var p=this,m=!1,g,S,l,L;this.abort=a.abort,this.cancel=function(ne){return g==null?void 0:g(ne)},this.cancelRetry=function(){m=!0},this.continueRetry=function(){m=!1},this.continue=function(){return S==null?void 0:S()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(ne,Oe){l=ne,L=Oe});var D=function(Oe){p.isResolved||(p.isResolved=!0,a.onSuccess==null||a.onSuccess(Oe),S==null||S(),l(Oe))},J=function(Oe){p.isResolved||(p.isResolved=!0,a.onError==null||a.onError(Oe),S==null||S(),L(Oe))},he=function(){return new Promise(function(Oe){S=Oe,p.isPaused=!0,a.onPause==null||a.onPause()}).then(function(){S=void 0,p.isPaused=!1,a.onContinue==null||a.onContinue()})},Ne=function ne(){if(!p.isResolved){var Oe;try{Oe=a.fn()}catch(He){Oe=Promise.reject(He)}g=function(rt){if(!p.isResolved&&(J(new Yx(rt)),p.abort==null||p.abort(),vd(Oe)))try{Oe.cancel()}catch{}},p.isTransportCancelable=vd(Oe),Promise.resolve(Oe).then(D).catch(function(He){var rt,pe;if(!p.isResolved){var ae=(rt=a.retry)!=null?rt:3,le=(pe=a.retryDelay)!=null?pe:tS,Pe=typeof le=="function"?le(p.failureCount,He):le,Me=ae===!0||typeof ae=="number"&&p.failureCount<ae||typeof ae=="function"&&ae(p.failureCount,He);if(m||!Me){J(He);return}p.failureCount++,a.onFail==null||a.onFail(p.failureCount,He),J2(Pe).then(function(){if(!md.isFocused()||!yd.isOnline())return he()}).then(function(){m?J(He):ne()})}})}};Ne()},rS=function(){function r(){this.queue=[],this.transactions=0,this.notifyFn=function(p){p()},this.batchNotifyFn=function(p){p()}}var a=r.prototype;return a.batch=function(m){this.transactions++;var g=m();return this.transactions--,this.transactions||this.flush(),g},a.schedule=function(m){var g=this;this.transactions?this.queue.push(m):Hx(function(){g.notifyFn(m)})},a.batchCalls=function(m){var g=this;return function(){for(var S=arguments.length,l=new Array(S),L=0;L<S;L++)l[L]=arguments[L];g.schedule(function(){m.apply(void 0,l)})}},a.flush=function(){var m=this,g=this.queue;this.queue=[],g.length&&Hx(function(){m.batchNotifyFn(function(){g.forEach(function(S){m.notifyFn(S)})})})},a.setNotifyFunction=function(m){this.notifyFn=m},a.setBatchNotifyFunction=function(m){this.batchNotifyFn=m},r}(),Oi=new rS,Qx=console;function e1(){return Qx}function nS(r){Qx=r}var iS=function(){function r(p){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=p.defaultOptions,this.setOptions(p.options),this.observers=[],this.cache=p.cache,this.queryKey=p.queryKey,this.queryHash=p.queryHash,this.initialState=p.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=p.meta,this.scheduleGc()}var a=r.prototype;return a.setOptions=function(m){var g;this.options=Yr({},this.defaultOptions,m),this.meta=m==null?void 0:m.meta,this.cacheTime=Math.max(this.cacheTime||0,(g=this.options.cacheTime)!=null?g:5*60*1e3)},a.setDefaultOptions=function(m){this.defaultOptions=m},a.scheduleGc=function(){var m=this;this.clearGcTimeout(),K2(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){m.optionalRemove()},this.cacheTime))},a.clearGcTimeout=function(){clearTimeout(this.gcTimeout),this.gcTimeout=void 0},a.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},a.setData=function(m,g){var S,l,L=this.state.data,D=X2(m,L);return((S=(l=this.options).isDataEqual)==null?void 0:S.call(l,L,D))?D=L:this.options.structuralSharing!==!1&&(D=Xx(L,D)),this.dispatch({data:D,type:"success",dataUpdatedAt:g==null?void 0:g.updatedAt}),D},a.setState=function(m,g){this.dispatch({type:"setState",state:m,setStateOptions:g})},a.cancel=function(m){var g,S=this.promise;return(g=this.retryer)==null||g.cancel(m),S?S.then(xo).catch(xo):Promise.resolve()},a.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},a.reset=function(){this.destroy(),this.setState(this.initialState)},a.isActive=function(){return this.observers.some(function(m){return m.options.enabled!==!1})},a.isFetching=function(){return this.state.isFetching},a.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(m){return m.getCurrentResult().isStale})},a.isStaleByTime=function(m){return m===void 0&&(m=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!H2(this.state.dataUpdatedAt,m)},a.onFocus=function(){var m,g=this.observers.find(function(S){return S.shouldFetchOnWindowFocus()});g&&g.refetch(),(m=this.retryer)==null||m.continue()},a.onOnline=function(){var m,g=this.observers.find(function(S){return S.shouldFetchOnReconnect()});g&&g.refetch(),(m=this.retryer)==null||m.continue()},a.addObserver=function(m){this.observers.indexOf(m)===-1&&(this.observers.push(m),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:m}))},a.removeObserver=function(m){this.observers.indexOf(m)!==-1&&(this.observers=this.observers.filter(function(g){return g!==m}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:m}))},a.getObserversCount=function(){return this.observers.length},a.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},a.fetch=function(m,g){var S=this,l,L,D;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(g==null?void 0:g.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var J;return(J=this.retryer)==null||J.continueRetry(),this.promise}}if(m&&this.setOptions(m),!this.options.queryFn){var he=this.observers.find(function(le){return le.options.queryFn});he&&this.setOptions(he.options)}var Ne=hd(this.queryKey),ne=$x(),Oe={queryKey:Ne,pageParam:void 0,meta:this.meta};Object.defineProperty(Oe,"signal",{enumerable:!0,get:function(){if(ne)return S.abortSignalConsumed=!0,ne.signal}});var He=function(){return S.options.queryFn?(S.abortSignalConsumed=!1,S.options.queryFn(Oe)):Promise.reject("Missing queryFn")},rt={fetchOptions:g,options:this.options,queryKey:Ne,state:this.state,fetchFn:He,meta:this.meta};if((l=this.options.behavior)==null?void 0:l.onFetch){var pe;(pe=this.options.behavior)==null||pe.onFetch(rt)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((L=rt.fetchOptions)==null?void 0:L.meta)){var ae;this.dispatch({type:"fetch",meta:(ae=rt.fetchOptions)==null?void 0:ae.meta})}return this.retryer=new Jx({fn:rt.fetchFn,abort:ne==null||(D=ne.abort)==null?void 0:D.bind(ne),onSuccess:function(Pe){S.setData(Pe),S.cache.config.onSuccess==null||S.cache.config.onSuccess(Pe,S),S.cacheTime===0&&S.optionalRemove()},onError:function(Pe){sv(Pe)&&Pe.silent||S.dispatch({type:"error",error:Pe}),sv(Pe)||(S.cache.config.onError==null||S.cache.config.onError(Pe,S),e1().error(Pe)),S.cacheTime===0&&S.optionalRemove()},onFail:function(){S.dispatch({type:"failed"})},onPause:function(){S.dispatch({type:"pause"})},onContinue:function(){S.dispatch({type:"continue"})},retry:rt.options.retry,retryDelay:rt.options.retryDelay}),this.promise=this.retryer.promise,this.promise},a.dispatch=function(m){var g=this;this.state=this.reducer(this.state,m),Oi.batch(function(){g.observers.forEach(function(S){S.onQueryUpdate(m)}),g.cache.notify({query:g,type:"queryUpdated",action:m})})},a.getDefaultState=function(m){var g=typeof m.initialData=="function"?m.initialData():m.initialData,S=typeof m.initialData!="undefined",l=S?typeof m.initialDataUpdatedAt=="function"?m.initialDataUpdatedAt():m.initialDataUpdatedAt:0,L=typeof g!="undefined";return{data:g,dataUpdateCount:0,dataUpdatedAt:L?l!=null?l:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:L?"success":"idle"}},a.reducer=function(m,g){var S,l;switch(g.type){case"failed":return Yr({},m,{fetchFailureCount:m.fetchFailureCount+1});case"pause":return Yr({},m,{isPaused:!0});case"continue":return Yr({},m,{isPaused:!1});case"fetch":return Yr({},m,{fetchFailureCount:0,fetchMeta:(S=g.meta)!=null?S:null,isFetching:!0,isPaused:!1,status:m.dataUpdatedAt?m.status:"loading"});case"success":return Yr({},m,{data:g.data,dataUpdateCount:m.dataUpdateCount+1,dataUpdatedAt:(l=g.dataUpdatedAt)!=null?l:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var L=g.error;return sv(L)&&L.revert&&this.revertState?Yr({},this.revertState):Yr({},m,{error:L,errorUpdateCount:m.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:m.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return Yr({},m,{isInvalidated:!0});case"setState":return Yr({},m,g.state);default:return m}},r}(),oS=function(r){cd(a,r);function a(m){var g;return g=r.call(this)||this,g.config=m||{},g.queries=[],g.queriesMap={},g}var p=a.prototype;return p.build=function(g,S,l){var L,D=S.queryKey,J=(L=S.queryHash)!=null?L:ov(D,S),he=this.get(J);return he||(he=new iS({cache:this,queryKey:D,queryHash:J,options:g.defaultQueryOptions(S),state:l,defaultOptions:g.getQueryDefaults(D),meta:S.meta}),this.add(he)),he},p.add=function(g){this.queriesMap[g.queryHash]||(this.queriesMap[g.queryHash]=g,this.queries.push(g),this.notify({type:"queryAdded",query:g}))},p.remove=function(g){var S=this.queriesMap[g.queryHash];S&&(g.destroy(),this.queries=this.queries.filter(function(l){return l!==g}),S===g&&delete this.queriesMap[g.queryHash],this.notify({type:"queryRemoved",query:g}))},p.clear=function(){var g=this;Oi.batch(function(){g.queries.forEach(function(S){g.remove(S)})})},p.get=function(g){return this.queriesMap[g]},p.getAll=function(){return this.queries},p.find=function(g,S){var l=ku(g,S),L=l[0];return typeof L.exact=="undefined"&&(L.exact=!0),this.queries.find(function(D){return Zx(L,D)})},p.findAll=function(g,S){var l=ku(g,S),L=l[0];return Object.keys(L).length>0?this.queries.filter(function(D){return Zx(L,D)}):this.queries},p.notify=function(g){var S=this;Oi.batch(function(){S.listeners.forEach(function(l){l(g)})})},p.onFocus=function(){var g=this;Oi.batch(function(){g.queries.forEach(function(S){S.onFocus()})})},p.onOnline=function(){var g=this;Oi.batch(function(){g.queries.forEach(function(S){S.onOnline()})})},a}(pd),aS=function(){function r(p){this.options=Yr({},p.defaultOptions,p.options),this.mutationId=p.mutationId,this.mutationCache=p.mutationCache,this.observers=[],this.state=p.state||sS(),this.meta=p.meta}var a=r.prototype;return a.setState=function(m){this.dispatch({type:"setState",state:m})},a.addObserver=function(m){this.observers.indexOf(m)===-1&&this.observers.push(m)},a.removeObserver=function(m){this.observers=this.observers.filter(function(g){return g!==m})},a.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(xo).catch(xo)):Promise.resolve()},a.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},a.execute=function(){var m=this,g,S=this.state.status==="loading",l=Promise.resolve();return S||(this.dispatch({type:"loading",variables:this.options.variables}),l=l.then(function(){m.mutationCache.config.onMutate==null||m.mutationCache.config.onMutate(m.state.variables,m)}).then(function(){return m.options.onMutate==null?void 0:m.options.onMutate(m.state.variables)}).then(function(L){L!==m.state.context&&m.dispatch({type:"loading",context:L,variables:m.state.variables})})),l.then(function(){return m.executeMutation()}).then(function(L){g=L,m.mutationCache.config.onSuccess==null||m.mutationCache.config.onSuccess(g,m.state.variables,m.state.context,m)}).then(function(){return m.options.onSuccess==null?void 0:m.options.onSuccess(g,m.state.variables,m.state.context)}).then(function(){return m.options.onSettled==null?void 0:m.options.onSettled(g,null,m.state.variables,m.state.context)}).then(function(){return m.dispatch({type:"success",data:g}),g}).catch(function(L){return m.mutationCache.config.onError==null||m.mutationCache.config.onError(L,m.state.variables,m.state.context,m),e1().error(L),Promise.resolve().then(function(){return m.options.onError==null?void 0:m.options.onError(L,m.state.variables,m.state.context)}).then(function(){return m.options.onSettled==null?void 0:m.options.onSettled(void 0,L,m.state.variables,m.state.context)}).then(function(){throw m.dispatch({type:"error",error:L}),L})})},a.executeMutation=function(){var m=this,g;return this.retryer=new Jx({fn:function(){return m.options.mutationFn?m.options.mutationFn(m.state.variables):Promise.reject("No mutationFn found")},onFail:function(){m.dispatch({type:"failed"})},onPause:function(){m.dispatch({type:"pause"})},onContinue:function(){m.dispatch({type:"continue"})},retry:(g=this.options.retry)!=null?g:0,retryDelay:this.options.retryDelay}),this.retryer.promise},a.dispatch=function(m){var g=this;this.state=uS(this.state,m),Oi.batch(function(){g.observers.forEach(function(S){S.onMutationUpdate(m)}),g.mutationCache.notify(g)})},r}();function sS(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function uS(r,a){switch(a.type){case"failed":return Yr({},r,{failureCount:r.failureCount+1});case"pause":return Yr({},r,{isPaused:!0});case"continue":return Yr({},r,{isPaused:!1});case"loading":return Yr({},r,{context:a.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:a.variables});case"success":return Yr({},r,{data:a.data,error:null,status:"success",isPaused:!1});case"error":return Yr({},r,{data:void 0,error:a.error,failureCount:r.failureCount+1,isPaused:!1,status:"error"});case"setState":return Yr({},r,a.state);default:return r}}var lS=function(r){cd(a,r);function a(m){var g;return g=r.call(this)||this,g.config=m||{},g.mutations=[],g.mutationId=0,g}var p=a.prototype;return p.build=function(g,S,l){var L=new aS({mutationCache:this,mutationId:++this.mutationId,options:g.defaultMutationOptions(S),state:l,defaultOptions:S.mutationKey?g.getMutationDefaults(S.mutationKey):void 0,meta:S.meta});return this.add(L),L},p.add=function(g){this.mutations.push(g),this.notify(g)},p.remove=function(g){this.mutations=this.mutations.filter(function(S){return S!==g}),g.cancel(),this.notify(g)},p.clear=function(){var g=this;Oi.batch(function(){g.mutations.forEach(function(S){g.remove(S)})})},p.getAll=function(){return this.mutations},p.find=function(g){return typeof g.exact=="undefined"&&(g.exact=!0),this.mutations.find(function(S){return Gx(g,S)})},p.findAll=function(g){return this.mutations.filter(function(S){return Gx(g,S)})},p.notify=function(g){var S=this;Oi.batch(function(){S.listeners.forEach(function(l){l(g)})})},p.onFocus=function(){this.resumePausedMutations()},p.onOnline=function(){this.resumePausedMutations()},p.resumePausedMutations=function(){var g=this.mutations.filter(function(S){return S.state.isPaused});return Oi.batch(function(){return g.reduce(function(S,l){return S.then(function(){return l.continue().catch(xo)})},Promise.resolve())})},a}(pd);function cS(){return{onFetch:function(a){a.fetchFn=function(){var p,m,g,S,l,L,D=(p=a.fetchOptions)==null||(m=p.meta)==null?void 0:m.refetchPage,J=(g=a.fetchOptions)==null||(S=g.meta)==null?void 0:S.fetchMore,he=J==null?void 0:J.pageParam,Ne=(J==null?void 0:J.direction)==="forward",ne=(J==null?void 0:J.direction)==="backward",Oe=((l=a.state.data)==null?void 0:l.pages)||[],He=((L=a.state.data)==null?void 0:L.pageParams)||[],rt=$x(),pe=rt==null?void 0:rt.signal,ae=He,le=!1,Pe=a.options.queryFn||function(){return Promise.reject("Missing queryFn")},Me=function(ir,qr,zr,Qn){return ae=Qn?[qr].concat(ae):[].concat(ae,[qr]),Qn?[zr].concat(ir):[].concat(ir,[zr])},yt=function(ir,qr,zr,Qn){if(le)return Promise.reject("Cancelled");if(typeof zr=="undefined"&&!qr&&ir.length)return Promise.resolve(ir);var Tn={queryKey:a.queryKey,signal:pe,pageParam:zr,meta:a.meta},ei=Pe(Tn),Vt=Promise.resolve(ei).then(function(At){return Me(ir,zr,At,Qn)});if(vd(ei)){var $e=Vt;$e.cancel=ei.cancel}return Vt},Ze;if(!Oe.length)Ze=yt([]);else if(Ne){var It=typeof he!="undefined",Ot=It?he:t1(a.options,Oe);Ze=yt(Oe,It,Ot)}else if(ne){var pt=typeof he!="undefined",er=pt?he:pS(a.options,Oe);Ze=yt(Oe,pt,er,!0)}else(function(){ae=[];var Ut=typeof a.options.getNextPageParam=="undefined",ir=D&&Oe[0]?D(Oe[0],0,Oe):!0;Ze=ir?yt([],Ut,He[0]):Promise.resolve(Me([],He[0],Oe[0]));for(var qr=function(Tn){Ze=Ze.then(function(ei){var Vt=D&&Oe[Tn]?D(Oe[Tn],Tn,Oe):!0;if(Vt){var $e=Ut?He[Tn]:t1(a.options,ei);return yt(ei,Ut,$e)}return Promise.resolve(Me(ei,He[Tn],Oe[Tn]))})},zr=1;zr<Oe.length;zr++)qr(zr)})();var br=Ze.then(function(Ut){return{pages:Ut,pageParams:ae}}),Rr=br;return Rr.cancel=function(){le=!0,rt==null||rt.abort(),vd(Ze)&&Ze.cancel()},br}}}}function t1(r,a){return r.getNextPageParam==null?void 0:r.getNextPageParam(a[a.length-1],a)}function pS(r,a){return r.getPreviousPageParam==null?void 0:r.getPreviousPageParam(a[0],a)}var bS=function(){function r(p){p===void 0&&(p={}),this.queryCache=p.queryCache||new oS,this.mutationCache=p.mutationCache||new lS,this.defaultOptions=p.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var a=r.prototype;return a.mount=function(){var m=this;this.unsubscribeFocus=md.subscribe(function(){md.isFocused()&&yd.isOnline()&&(m.mutationCache.onFocus(),m.queryCache.onFocus())}),this.unsubscribeOnline=yd.subscribe(function(){md.isFocused()&&yd.isOnline()&&(m.mutationCache.onOnline(),m.queryCache.onOnline())})},a.unmount=function(){var m,g;(m=this.unsubscribeFocus)==null||m.call(this),(g=this.unsubscribeOnline)==null||g.call(this)},a.isFetching=function(m,g){var S=ku(m,g),l=S[0];return l.fetching=!0,this.queryCache.findAll(l).length},a.isMutating=function(m){return this.mutationCache.findAll(Yr({},m,{fetching:!0})).length},a.getQueryData=function(m,g){var S;return(S=this.queryCache.find(m,g))==null?void 0:S.state.data},a.getQueriesData=function(m){return this.getQueryCache().findAll(m).map(function(g){var S=g.queryKey,l=g.state,L=l.data;return[S,L]})},a.setQueryData=function(m,g,S){var l=iv(m),L=this.defaultQueryOptions(l);return this.queryCache.build(this,L).setData(g,S)},a.setQueriesData=function(m,g,S){var l=this;return Oi.batch(function(){return l.getQueryCache().findAll(m).map(function(L){var D=L.queryKey;return[D,l.setQueryData(D,g,S)]})})},a.getQueryState=function(m,g){var S;return(S=this.queryCache.find(m,g))==null?void 0:S.state},a.removeQueries=function(m,g){var S=ku(m,g),l=S[0],L=this.queryCache;Oi.batch(function(){L.findAll(l).forEach(function(D){L.remove(D)})})},a.resetQueries=function(m,g,S){var l=this,L=ku(m,g,S),D=L[0],J=L[1],he=this.queryCache,Ne=Yr({},D,{active:!0});return Oi.batch(function(){return he.findAll(D).forEach(function(ne){ne.reset()}),l.refetchQueries(Ne,J)})},a.cancelQueries=function(m,g,S){var l=this,L=ku(m,g,S),D=L[0],J=L[1],he=J===void 0?{}:J;typeof he.revert=="undefined"&&(he.revert=!0);var Ne=Oi.batch(function(){return l.queryCache.findAll(D).map(function(ne){return ne.cancel(he)})});return Promise.all(Ne).then(xo).catch(xo)},a.invalidateQueries=function(m,g,S){var l,L,D,J=this,he=ku(m,g,S),Ne=he[0],ne=he[1],Oe=Yr({},Ne,{active:(l=(L=Ne.refetchActive)!=null?L:Ne.active)!=null?l:!0,inactive:(D=Ne.refetchInactive)!=null?D:!1});return Oi.batch(function(){return J.queryCache.findAll(Ne).forEach(function(He){He.invalidate()}),J.refetchQueries(Oe,ne)})},a.refetchQueries=function(m,g,S){var l=this,L=ku(m,g,S),D=L[0],J=L[1],he=Oi.batch(function(){return l.queryCache.findAll(D).map(function(ne){return ne.fetch(void 0,Yr({},J,{meta:{refetchPage:D==null?void 0:D.refetchPage}}))})}),Ne=Promise.all(he).then(xo);return(J==null?void 0:J.throwOnError)||(Ne=Ne.catch(xo)),Ne},a.fetchQuery=function(m,g,S){var l=iv(m,g,S),L=this.defaultQueryOptions(l);typeof L.retry=="undefined"&&(L.retry=!1);var D=this.queryCache.build(this,L);return D.isStaleByTime(L.staleTime)?D.fetch(L):Promise.resolve(D.state.data)},a.prefetchQuery=function(m,g,S){return this.fetchQuery(m,g,S).then(xo).catch(xo)},a.fetchInfiniteQuery=function(m,g,S){var l=iv(m,g,S);return l.behavior=cS(),this.fetchQuery(l)},a.prefetchInfiniteQuery=function(m,g,S){return this.fetchInfiniteQuery(m,g,S).then(xo).catch(xo)},a.cancelMutations=function(){var m=this,g=Oi.batch(function(){return m.mutationCache.getAll().map(function(S){return S.cancel()})});return Promise.all(g).then(xo).catch(xo)},a.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},a.executeMutation=function(m){return this.mutationCache.build(this,m).execute()},a.getQueryCache=function(){return this.queryCache},a.getMutationCache=function(){return this.mutationCache},a.getDefaultOptions=function(){return this.defaultOptions},a.setDefaultOptions=function(m){this.defaultOptions=m},a.setQueryDefaults=function(m,g){var S=this.queryDefaults.find(function(l){return ml(m)===ml(l.queryKey)});S?S.defaultOptions=g:this.queryDefaults.push({queryKey:m,defaultOptions:g})},a.getQueryDefaults=function(m){var g;return m?(g=this.queryDefaults.find(function(S){return fd(m,S.queryKey)}))==null?void 0:g.defaultOptions:void 0},a.setMutationDefaults=function(m,g){var S=this.mutationDefaults.find(function(l){return ml(m)===ml(l.mutationKey)});S?S.defaultOptions=g:this.mutationDefaults.push({mutationKey:m,defaultOptions:g})},a.getMutationDefaults=function(m){var g;return m?(g=this.mutationDefaults.find(function(S){return fd(m,S.mutationKey)}))==null?void 0:g.defaultOptions:void 0},a.defaultQueryOptions=function(m){if(m==null?void 0:m._defaulted)return m;var g=Yr({},this.defaultOptions.queries,this.getQueryDefaults(m==null?void 0:m.queryKey),m,{_defaulted:!0});return!g.queryHash&&g.queryKey&&(g.queryHash=ov(g.queryKey,g)),g},a.defaultQueryObserverOptions=function(m){return this.defaultQueryOptions(m)},a.defaultMutationOptions=function(m){return(m==null?void 0:m._defaulted)?m:Yr({},this.defaultOptions.mutations,this.getMutationDefaults(m==null?void 0:m.mutationKey),m,{_defaulted:!0})},a.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},r}(),hS=W2.unstable_batchedUpdates;Oi.setBatchNotifyFunction(hS);var fS=console;nS(fS);var r1=Ep.createContext(void 0),dS=Ep.createContext(!1);function mS(r){return r&&typeof window!="undefined"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=r1),window.ReactQueryClientContext):r1}var SS=function(a){var p=a.client,m=a.contextSharing,g=m===void 0?!1:m,S=a.children;Ep.useEffect(function(){return p.mount(),function(){p.unmount()}},[p]);var l=mS(g);return Ep.createElement(dS.Provider,{value:g},Ep.createElement(l.Provider,{value:p},S))};try{self["workbox:window:6.4.1"]&&_()}catch{}function n1(r,a){return new Promise(function(p){var m=new MessageChannel;m.port1.onmessage=function(g){p(g.data)},r.postMessage(a,[m.port2])})}function yS(r,a){for(var p=0;p<a.length;p++){var m=a[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(r,m.key,m)}}function i1(r,a){(a==null||a>r.length)&&(a=r.length);for(var p=0,m=new Array(a);p<a;p++)m[p]=r[p];return m}function vS(r,a){var p;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(p=function(g,S){if(g){if(typeof g=="string")return i1(g,S);var l=Object.prototype.toString.call(g).slice(8,-1);return l==="Object"&&g.constructor&&(l=g.constructor.name),l==="Map"||l==="Set"?Array.from(g):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?i1(g,S):void 0}}(r))||a&&r&&typeof r.length=="number"){p&&(r=p);var m=0;return function(){return m>=r.length?{done:!0}:{done:!1,value:r[m++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(p=r[Symbol.iterator]()).next.bind(p)}try{self["workbox:core:6.4.1"]&&_()}catch{}var uv=function(){var r=this;this.promise=new Promise(function(a,p){r.resolve=a,r.reject=p})};function lv(r,a){var p=location.href;return new URL(r,p).href===new URL(a,p).href}var xh=function(r,a){this.type=r,Object.assign(this,a)};function gd(r,a,p){return p?a?a(r):r:(r&&r.then||(r=Promise.resolve(r)),a?r.then(a):r)}function gS(){}var _S={type:"SKIP_WAITING"};function o1(r,a){if(!a)return r&&r.then?r.then(gS):Promise.resolve()}var ES=function(r){var a,p;function m(L,D){var J,he;return D===void 0&&(D={}),(J=r.call(this)||this).nn={},J.tn=0,J.rn=new uv,J.en=new uv,J.on=new uv,J.un=0,J.an=new Set,J.cn=function(){var Ne=J.fn,ne=Ne.installing;J.tn>0||!lv(ne.scriptURL,J.sn.toString())||performance.now()>J.un+6e4?(J.vn=ne,Ne.removeEventListener("updatefound",J.cn)):(J.hn=ne,J.an.add(ne),J.rn.resolve(ne)),++J.tn,ne.addEventListener("statechange",J.ln)},J.ln=function(Ne){var ne=J.fn,Oe=Ne.target,He=Oe.state,rt=Oe===J.vn,pe={sw:Oe,isExternal:rt,originalEvent:Ne};!rt&&J.mn&&(pe.isUpdate=!0),J.dispatchEvent(new xh(He,pe)),He==="installed"?J.wn=self.setTimeout(function(){He==="installed"&&ne.waiting===Oe&&J.dispatchEvent(new xh("waiting",pe))},200):He==="activating"&&(clearTimeout(J.wn),rt||J.en.resolve(Oe))},J.dn=function(Ne){var ne=J.hn,Oe=ne!==navigator.serviceWorker.controller;J.dispatchEvent(new xh("controlling",{isExternal:Oe,originalEvent:Ne,sw:ne,isUpdate:J.mn})),Oe||J.on.resolve(ne)},J.gn=(he=function(Ne){var ne=Ne.data,Oe=Ne.ports,He=Ne.source;return gd(J.getSW(),function(){J.an.has(He)&&J.dispatchEvent(new xh("message",{data:ne,originalEvent:Ne,ports:Oe,sw:He}))})},function(){for(var Ne=[],ne=0;ne<arguments.length;ne++)Ne[ne]=arguments[ne];try{return Promise.resolve(he.apply(this,Ne))}catch(Oe){return Promise.reject(Oe)}}),J.sn=L,J.nn=D,navigator.serviceWorker.addEventListener("message",J.gn),J}p=r,(a=m).prototype=Object.create(p.prototype),a.prototype.constructor=a,a.__proto__=p;var g,S,l=m.prototype;return l.register=function(L){var D=(L===void 0?{}:L).immediate,J=D!==void 0&&D;try{var he=this;return function(Ne,ne){var Oe=Ne();return Oe&&Oe.then?Oe.then(ne):ne(Oe)}(function(){if(!J&&document.readyState!=="complete")return o1(new Promise(function(Ne){return window.addEventListener("load",Ne)}))},function(){return he.mn=Boolean(navigator.serviceWorker.controller),he.yn=he.pn(),gd(he.bn(),function(Ne){he.fn=Ne,he.yn&&(he.hn=he.yn,he.en.resolve(he.yn),he.on.resolve(he.yn),he.yn.addEventListener("statechange",he.ln,{once:!0}));var ne=he.fn.waiting;return ne&&lv(ne.scriptURL,he.sn.toString())&&(he.hn=ne,Promise.resolve().then(function(){he.dispatchEvent(new xh("waiting",{sw:ne,wasWaitingBeforeRegister:!0}))}).then(function(){})),he.hn&&(he.rn.resolve(he.hn),he.an.add(he.hn)),he.fn.addEventListener("updatefound",he.cn),navigator.serviceWorker.addEventListener("controllerchange",he.dn),he.fn})})}catch(Ne){return Promise.reject(Ne)}},l.update=function(){try{return this.fn?o1(this.fn.update()):void 0}catch(L){return Promise.reject(L)}},l.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},l.messageSW=function(L){try{return gd(this.getSW(),function(D){return n1(D,L)})}catch(D){return Promise.reject(D)}},l.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&n1(this.fn.waiting,_S)},l.pn=function(){var L=navigator.serviceWorker.controller;return L&&lv(L.scriptURL,this.sn.toString())?L:void 0},l.bn=function(){try{var L=this;return function(D,J){try{var he=D()}catch(Ne){return J(Ne)}return he&&he.then?he.then(void 0,J):he}(function(){return gd(navigator.serviceWorker.register(L.sn,L.nn),function(D){return L.un=performance.now(),D})},function(D){throw D})}catch(D){return Promise.reject(D)}},g=m,(S=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&yS(g.prototype,S),m}(function(){function r(){this.Pn=new Map}var a=r.prototype;return a.addEventListener=function(p,m){this.Sn(p).add(m)},a.removeEventListener=function(p,m){this.Sn(p).delete(m)},a.dispatchEvent=function(p){p.target=this;for(var m,g=vS(this.Sn(p.type));!(m=g()).done;)(0,m.value)(p)},a.Sn=function(p){return this.Pn.has(p)||this.Pn.set(p,new Set),this.Pn.get(p)},r}());export{xS as M,bS as Q,W2 as R,Mg as a,SS as b,Xw as j,wS as m,rf as r,ES as v};
