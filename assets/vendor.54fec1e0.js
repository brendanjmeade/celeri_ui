var Ic=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Rf={exports:{}},Gp={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var H_=Object.getOwnPropertySymbols,U2=Object.prototype.hasOwnProperty,N2=Object.prototype.propertyIsEnumerable;function j2(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function V2(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var i={},u=0;u<10;u++)i["_"+String.fromCharCode(u)]=u;var f=Object.getOwnPropertyNames(i).map(function(S){return i[S]});if(f.join("")!=="0123456789")return!1;var y={};return"abcdefghijklmnopqrst".split("").forEach(function(S){y[S]=S}),Object.keys(Object.assign({},y)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Y_=V2()?Object.assign:function(r,i){for(var u,f=j2(r),y,S=1;S<arguments.length;S++){u=Object(arguments[S]);for(var l in u)U2.call(u,l)&&(f[l]=u[l]);if(H_){y=H_(u);for(var k=0;k<y.length;k++)N2.call(u,y[k])&&(f[y[k]]=u[y[k]])}}return f},Si={exports:{}},Rr={};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm=Y_,kc=60103,J_=60106;Rr.Fragment=60107;Rr.StrictMode=60108;Rr.Profiler=60114;var Q_=60109,e0=60110,t0=60112;Rr.Suspense=60113;var r0=60115,n0=60116;if(typeof Symbol=="function"&&Symbol.for){var Ha=Symbol.for;kc=Ha("react.element"),J_=Ha("react.portal"),Rr.Fragment=Ha("react.fragment"),Rr.StrictMode=Ha("react.strict_mode"),Rr.Profiler=Ha("react.profiler"),Q_=Ha("react.provider"),e0=Ha("react.context"),t0=Ha("react.forward_ref"),Rr.Suspense=Ha("react.suspense"),r0=Ha("react.memo"),n0=Ha("react.lazy")}var i0=typeof Symbol=="function"&&Symbol.iterator;function q2(r){return r===null||typeof r!="object"?null:(r=i0&&r[i0]||r["@@iterator"],typeof r=="function"?r:null)}function Wp(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)i+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a0={};function Ac(r,i,u){this.props=r,this.context=i,this.refs=a0,this.updater=u||o0}Ac.prototype.isReactComponent={};Ac.prototype.setState=function(r,i){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error(Wp(85));this.updater.enqueueSetState(this,r,i,"setState")};Ac.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function s0(){}s0.prototype=Ac.prototype;function Km(r,i,u){this.props=r,this.context=i,this.refs=a0,this.updater=u||o0}var Hm=Km.prototype=new s0;Hm.constructor=Km;Xm(Hm,Ac.prototype);Hm.isPureReactComponent=!0;var Ym={current:null},u0=Object.prototype.hasOwnProperty,l0={key:!0,ref:!0,__self:!0,__source:!0};function c0(r,i,u){var f,y={},S=null,l=null;if(i!=null)for(f in i.ref!==void 0&&(l=i.ref),i.key!==void 0&&(S=""+i.key),i)u0.call(i,f)&&!l0.hasOwnProperty(f)&&(y[f]=i[f]);var k=arguments.length-2;if(k===1)y.children=u;else if(1<k){for(var M=Array(k),q=0;q<k;q++)M[q]=arguments[q+2];y.children=M}if(r&&r.defaultProps)for(f in k=r.defaultProps,k)y[f]===void 0&&(y[f]=k[f]);return{$$typeof:kc,type:r,key:S,ref:l,props:y,_owner:Ym.current}}function Z2(r,i){return{$$typeof:kc,type:r.type,key:i,ref:r.ref,props:r.props,_owner:r._owner}}function Jm(r){return typeof r=="object"&&r!==null&&r.$$typeof===kc}function G2(r){var i={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(u){return i[u]})}var p0=/\/+/g;function Qm(r,i){return typeof r=="object"&&r!==null&&r.key!=null?G2(""+r.key):i.toString(36)}function Ff(r,i,u,f,y){var S=typeof r;(S==="undefined"||S==="boolean")&&(r=null);var l=!1;if(r===null)l=!0;else switch(S){case"string":case"number":l=!0;break;case"object":switch(r.$$typeof){case kc:case J_:l=!0}}if(l)return l=r,y=y(l),r=f===""?"."+Qm(l,0):f,Array.isArray(y)?(u="",r!=null&&(u=r.replace(p0,"$&/")+"/"),Ff(y,i,u,"",function(q){return q})):y!=null&&(Jm(y)&&(y=Z2(y,u+(!y.key||l&&l.key===y.key?"":(""+y.key).replace(p0,"$&/")+"/")+r)),i.push(y)),1;if(l=0,f=f===""?".":f+":",Array.isArray(r))for(var k=0;k<r.length;k++){S=r[k];var M=f+Qm(S,k);l+=Ff(S,i,u,M,y)}else if(M=q2(r),typeof M=="function")for(r=M.call(r),k=0;!(S=r.next()).done;)S=S.value,M=f+Qm(S,k++),l+=Ff(S,i,u,M,y);else if(S==="object")throw i=""+r,Error(Wp(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i));return l}function Bf(r,i,u){if(r==null)return r;var f=[],y=0;return Ff(r,f,"","",function(S){return i.call(u,S,y++)}),f}function W2(r){if(r._status===-1){var i=r._result;i=i(),r._status=0,r._result=i,i.then(function(u){r._status===0&&(u=u.default,r._status=1,r._result=u)},function(u){r._status===0&&(r._status=2,r._result=u)})}if(r._status===1)return r._result;throw r._result}var h0={current:null};function Js(){var r=h0.current;if(r===null)throw Error(Wp(321));return r}var $2={ReactCurrentDispatcher:h0,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Ym,IsSomeRendererActing:{current:!1},assign:Xm};Rr.Children={map:Bf,forEach:function(r,i,u){Bf(r,function(){i.apply(this,arguments)},u)},count:function(r){var i=0;return Bf(r,function(){i++}),i},toArray:function(r){return Bf(r,function(i){return i})||[]},only:function(r){if(!Jm(r))throw Error(Wp(143));return r}};Rr.Component=Ac;Rr.PureComponent=Km;Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$2;Rr.cloneElement=function(r,i,u){if(r==null)throw Error(Wp(267,r));var f=Xm({},r.props),y=r.key,S=r.ref,l=r._owner;if(i!=null){if(i.ref!==void 0&&(S=i.ref,l=Ym.current),i.key!==void 0&&(y=""+i.key),r.type&&r.type.defaultProps)var k=r.type.defaultProps;for(M in i)u0.call(i,M)&&!l0.hasOwnProperty(M)&&(f[M]=i[M]===void 0&&k!==void 0?k[M]:i[M])}var M=arguments.length-2;if(M===1)f.children=u;else if(1<M){k=Array(M);for(var q=0;q<M;q++)k[q]=arguments[q+2];f.children=k}return{$$typeof:kc,type:r.type,key:y,ref:S,props:f,_owner:l}};Rr.createContext=function(r,i){return i===void 0&&(i=null),r={$$typeof:e0,_calculateChangedBits:i,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null},r.Provider={$$typeof:Q_,_context:r},r.Consumer=r};Rr.createElement=c0;Rr.createFactory=function(r){var i=c0.bind(null,r);return i.type=r,i};Rr.createRef=function(){return{current:null}};Rr.forwardRef=function(r){return{$$typeof:t0,render:r}};Rr.isValidElement=Jm;Rr.lazy=function(r){return{$$typeof:n0,_payload:{_status:-1,_result:r},_init:W2}};Rr.memo=function(r,i){return{$$typeof:r0,type:r,compare:i===void 0?null:i}};Rr.useCallback=function(r,i){return Js().useCallback(r,i)};Rr.useContext=function(r,i){return Js().useContext(r,i)};Rr.useDebugValue=function(){};Rr.useEffect=function(r,i){return Js().useEffect(r,i)};Rr.useImperativeHandle=function(r,i,u){return Js().useImperativeHandle(r,i,u)};Rr.useLayoutEffect=function(r,i){return Js().useLayoutEffect(r,i)};Rr.useMemo=function(r,i){return Js().useMemo(r,i)};Rr.useReducer=function(r,i,u){return Js().useReducer(r,i,u)};Rr.useRef=function(r){return Js().useRef(r)};Rr.useState=function(r){return Js().useState(r)};Rr.version="17.0.2";Si.exports=Rr;var Mc=Si.exports;/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X2=Si.exports,f0=60103;Gp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var d0=Symbol.for;f0=d0("react.element"),Gp.Fragment=d0("react.fragment")}var K2=X2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H2=Object.prototype.hasOwnProperty,Y2={key:!0,ref:!0,__self:!0,__source:!0};function m0(r,i,u){var f,y={},S=null,l=null;u!==void 0&&(S=""+u),i.key!==void 0&&(S=""+i.key),i.ref!==void 0&&(l=i.ref);for(f in i)H2.call(i,f)&&!Y2.hasOwnProperty(f)&&(y[f]=i[f]);if(r&&r.defaultProps)for(f in i=r.defaultProps,i)y[f]===void 0&&(y[f]=i[f]);return{$$typeof:f0,type:r,key:S,ref:l,props:y,_owner:K2.current}}Gp.jsx=m0;Gp.jsxs=m0;Rf.exports=Gp;const J2=Rf.exports.jsx,PP=Rf.exports.jsxs,TP=Rf.exports.Fragment;var y0={exports:{}};(function(r,i){(function(u,f){r.exports=f()})(Ic,function(){var u=function(w,P){var F={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},le={on:function(fe,_e,Ze){if(F[fe]===void 0)throw new Error("Invalid event type: "+fe);F[fe].push({selector:_e,fn:Ze})},render:function(fe){P.store.featureChanged(fe)}},ve=function(fe,_e){for(var Ze=F[fe],Ve=Ze.length;Ve--;){var ct=Ze[Ve];if(ct.selector(_e)){ct.fn.call(le,_e)||P.store.render(),P.ui.updateMapClasses();break}}};return w.start.call(le),{render:w.render,stop:function(){w.stop&&w.stop()},trash:function(){w.trash&&(w.trash(),P.store.render())},combineFeatures:function(){w.combineFeatures&&w.combineFeatures()},uncombineFeatures:function(){w.uncombineFeatures&&w.uncombineFeatures()},drag:function(fe){ve("drag",fe)},click:function(fe){ve("click",fe)},mousemove:function(fe){ve("mousemove",fe)},mousedown:function(fe){ve("mousedown",fe)},mouseup:function(fe){ve("mouseup",fe)},mouseout:function(fe){ve("mouseout",fe)},keydown:function(fe){ve("keydown",fe)},keyup:function(fe){ve("keyup",fe)},touchstart:function(fe){ve("touchstart",fe)},touchmove:function(fe){ve("touchmove",fe)},touchend:function(fe){ve("touchend",fe)},tap:function(fe){ve("tap",fe)}}},f=6378137;function y(w){var P=0;if(w&&w.length>0){P+=Math.abs(S(w[0]));for(var F=1;F<w.length;F++)P-=Math.abs(S(w[F]))}return P}function S(w){var P,F,le,ve,fe,_e,Ze=0,Ve=w.length;if(Ve>2){for(_e=0;_e<Ve;_e++)_e===Ve-2?(le=Ve-2,ve=Ve-1,fe=0):_e===Ve-1?(le=Ve-1,ve=0,fe=1):(le=_e,ve=_e+1,fe=_e+2),P=w[le],F=w[ve],Ze+=(l(w[fe][0])-l(P[0]))*Math.sin(l(F[1]));Ze=Ze*f*f/2}return Ze}function l(w){return w*Math.PI/180}var k={geometry:function w(P){var F,le=0;switch(P.type){case"Polygon":return y(P.coordinates);case"MultiPolygon":for(F=0;F<P.coordinates.length;F++)le+=y(P.coordinates[F]);return le;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(F=0;F<P.geometries.length;F++)le+=w(P.geometries[F]);return le}},ring:S},M="mapboxgl-ctrl",q="mapbox-gl-draw_ctrl-draw-btn",ee="mapbox-gl-draw_line",ke="mapbox-gl-draw_polygon",X="mapbox-gl-draw_point",Se="mapbox-gl-draw_trash",Me="mapbox-gl-draw_combine",Le="mapbox-gl-draw_uncombine",ue="mapboxgl-ctrl-group",re="active",ae="mapbox-gl-draw_boxselect",be="mapbox-gl-draw-hot",De="mapbox-gl-draw-cold",mt="add",We="move",Tt="drag",Ot="pointer",pt="none",er={POLYGON:"polygon",LINE:"line_string",POINT:"point"},wr="Feature",Fr="Polygon",Ut="LineString",ir="Point",qr="FeatureCollection",zr="Multi",ri="MultiPoint",kn="MultiLineString",ni="MultiPolygon",Vt={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},Ye="draw.create",At="draw.delete",$t="draw.update",Lr="draw.selectionchange",Zr="draw.modechange",fo="draw.actionable",Qr="draw.render",si="draw.combine",sr="draw.uncombine",Io="move",ts="change_coordinates",Wn="feature",Kt="midpoint",Vi="vertex",nn="true",An="false",Wu=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],qi={Point:0,LineString:1,Polygon:2};function Ts(w,P){var F=qi[w.geometry.type]-qi[P.geometry.type];return F===0&&w.geometry.type===Fr?w.area-P.area:F}function ln(w){if(this._items={},this._nums={},this._length=w?w.length:0,w)for(var P=0,F=w.length;P<F;P++)this.add(w[P]),w[P]!==void 0&&(typeof w[P]=="string"?this._items[w[P]]=P:this._nums[w[P]]=P)}ln.prototype.add=function(w){return this.has(w)||(this._length++,typeof w=="string"?this._items[w]=this._length:this._nums[w]=this._length),this},ln.prototype.delete=function(w){return this.has(w)===!1||(this._length--,delete this._items[w],delete this._nums[w]),this},ln.prototype.has=function(w){return(typeof w=="string"||typeof w=="number")&&(this._items[w]!==void 0||this._nums[w]!==void 0)},ln.prototype.values=function(){var w=this,P=[];return Object.keys(this._items).forEach(function(F){P.push({k:F,v:w._items[F]})}),Object.keys(this._nums).forEach(function(F){P.push({k:JSON.parse(F),v:w._nums[F]})}),P.sort(function(F,le){return F.v-le.v}).map(function(F){return F.k})},ln.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Ma=[Wn,Kt,Vi],ko={click:function(w,P,F){return Ti(w,P,F,F.options.clickBuffer)},touch:function(w,P,F){return Ti(w,P,F,F.options.touchBuffer)}};function Ti(w,P,F,le){if(F.map===null)return[];var ve=w?function(ct,Ee){return Ee===void 0&&(Ee=0),[[ct.point.x-Ee,ct.point.y-Ee],[ct.point.x+Ee,ct.point.y+Ee]]}(w,le):P,fe={};F.options.styles&&(fe.layers=F.options.styles.map(function(ct){return ct.id}));var _e=F.map.queryRenderedFeatures(ve,fe).filter(function(ct){return Ma.indexOf(ct.properties.meta)!==-1}),Ze=new ln,Ve=[];return _e.forEach(function(ct){var Ee=ct.properties.id;Ze.has(Ee)||(Ze.add(Ee),Ve.push(ct))}),function(ct){return ct.map(function(Ee){return Ee.geometry.type===Fr&&(Ee.area=k.geometry({type:wr,property:{},geometry:Ee.geometry})),Ee}).sort(Ts).map(function(Ee){return delete Ee.area,Ee})}(Ve)}function mi(w,P){var F=ko.click(w,null,P),le={mouse:pt};return F[0]&&(le.mouse=F[0].properties.active===nn?We:Ot,le.feature=F[0].properties.meta),P.events.currentModeName().indexOf("draw")!==-1&&(le.mouse=mt),P.ui.queueMapClasses(le),P.ui.updateMapClasses(),F[0]}function ca(w,P){var F=w.x-P.x,le=w.y-P.y;return Math.sqrt(F*F+le*le)}function Zi(w,P,F){F===void 0&&(F={});var le=F.fineTolerance!=null?F.fineTolerance:4,ve=F.grossTolerance!=null?F.grossTolerance:12,fe=F.interval!=null?F.interval:500;w.point=w.point||P.point,w.time=w.time||P.time;var _e=ca(w.point,P.point);return _e<le||_e<ve&&P.time-w.time<fe}function Is(w,P,F){F===void 0&&(F={});var le=F.tolerance!=null?F.tolerance:25,ve=F.interval!=null?F.interval:250;return w.point=w.point||P.point,w.time=w.time||P.time,ca(w.point,P.point)<le&&P.time-w.time<ve}function rs(w,P){return w(P={exports:{}},P.exports),P.exports}var za=rs(function(w){var P=w.exports=function(F,le){if(le||(le=16),F===void 0&&(F=128),F<=0)return"0";for(var ve=Math.log(Math.pow(2,F))/Math.log(le),fe=2;ve===1/0;fe*=2)ve=Math.log(Math.pow(2,F/fe))/Math.log(le)*fe;var _e=ve-Math.floor(ve),Ze="";for(fe=0;fe<Math.floor(ve);fe++)Ze=Math.floor(Math.random()*le).toString(le)+Ze;if(_e){var Ve=Math.pow(le,_e);Ze=Math.floor(Math.random()*Ve).toString(le)+Ze}var ct=parseInt(Ze,le);return ct!==1/0&&ct>=Math.pow(2,F)?P(F,le):Ze};P.rack=function(F,le,ve){var fe=function(Ze){var Ve=0;do{if(Ve++>10){if(!ve)throw new Error("too many ID collisions, use more bits");F+=ve}var ct=P(F,le)}while(Object.hasOwnProperty.call(_e,ct));return _e[ct]=Ze,ct},_e=fe.hats={};return fe.get=function(Ze){return fe.hats[Ze]},fe.set=function(Ze,Ve){return fe.hats[Ze]=Ve,fe},fe.bits=F||128,fe.base=le||16,fe}}),Mn=function(w,P){this.ctx=w,this.properties=P.properties||{},this.coordinates=P.geometry.coordinates,this.id=P.id||za(),this.type=P.geometry.type};Mn.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Mn.prototype.incomingCoords=function(w){this.setCoordinates(w)},Mn.prototype.setCoordinates=function(w){this.coordinates=w,this.changed()},Mn.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Mn.prototype.setProperty=function(w,P){this.properties[w]=P},Mn.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:wr,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Mn.prototype.internal=function(w){var P={id:this.id,meta:Wn,"meta:type":this.type,active:An,mode:w};if(this.ctx.options.userProperties)for(var F in this.properties)P["user_"+F]=this.properties[F];return{type:wr,properties:P,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Gi=function(w,P){Mn.call(this,w,P)};(Gi.prototype=Object.create(Mn.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Gi.prototype.updateCoordinate=function(w,P,F){this.coordinates=arguments.length===3?[P,F]:[w,P],this.changed()},Gi.prototype.getCoordinate=function(){return this.getCoordinates()};var Wi=function(w,P){Mn.call(this,w,P)};(Wi.prototype=Object.create(Mn.prototype)).isValid=function(){return this.coordinates.length>1},Wi.prototype.addCoordinate=function(w,P,F){this.changed();var le=parseInt(w,10);this.coordinates.splice(le,0,[P,F])},Wi.prototype.getCoordinate=function(w){var P=parseInt(w,10);return JSON.parse(JSON.stringify(this.coordinates[P]))},Wi.prototype.removeCoordinate=function(w){this.changed(),this.coordinates.splice(parseInt(w,10),1)},Wi.prototype.updateCoordinate=function(w,P,F){var le=parseInt(w,10);this.coordinates[le]=[P,F],this.changed()};var $n=function(w,P){Mn.call(this,w,P),this.coordinates=this.coordinates.map(function(F){return F.slice(0,-1)})};($n.prototype=Object.create(Mn.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(w){return w.length>2})},$n.prototype.incomingCoords=function(w){this.coordinates=w.map(function(P){return P.slice(0,-1)}),this.changed()},$n.prototype.setCoordinates=function(w){this.coordinates=w,this.changed()},$n.prototype.addCoordinate=function(w,P,F){this.changed();var le=w.split(".").map(function(ve){return parseInt(ve,10)});this.coordinates[le[0]].splice(le[1],0,[P,F])},$n.prototype.removeCoordinate=function(w){this.changed();var P=w.split(".").map(function(le){return parseInt(le,10)}),F=this.coordinates[P[0]];F&&(F.splice(P[1],1),F.length<3&&this.coordinates.splice(P[0],1))},$n.prototype.getCoordinate=function(w){var P=w.split(".").map(function(le){return parseInt(le,10)}),F=this.coordinates[P[0]];return JSON.parse(JSON.stringify(F[P[1]]))},$n.prototype.getCoordinates=function(){return this.coordinates.map(function(w){return w.concat([w[0]])})},$n.prototype.updateCoordinate=function(w,P,F){this.changed();var le=w.split("."),ve=parseInt(le[0],10),fe=parseInt(le[1],10);this.coordinates[ve]===void 0&&(this.coordinates[ve]=[]),this.coordinates[ve][fe]=[P,F]};var ks={MultiPoint:Gi,MultiLineString:Wi,MultiPolygon:$n},Ao=function(w,P,F,le,ve){var fe=F.split("."),_e=parseInt(fe[0],10),Ze=fe[1]?fe.slice(1).join("."):null;return w[_e][P](Ze,le,ve)},Fn=function(w,P){if(Mn.call(this,w,P),delete this.coordinates,this.model=ks[P.geometry.type],this.model===void 0)throw new TypeError(P.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(P.geometry.coordinates)};function Ht(w){this.map=w.map,this.drawConfig=JSON.parse(JSON.stringify(w.options||{})),this._ctx=w}(Fn.prototype=Object.create(Mn.prototype))._coordinatesToFeatures=function(w){var P=this,F=this.model.bind(this);return w.map(function(le){return new F(P.ctx,{id:za(),type:wr,properties:{},geometry:{coordinates:le,type:P.type.replace("Multi","")}})})},Fn.prototype.isValid=function(){return this.features.every(function(w){return w.isValid()})},Fn.prototype.setCoordinates=function(w){this.features=this._coordinatesToFeatures(w),this.changed()},Fn.prototype.getCoordinate=function(w){return Ao(this.features,"getCoordinate",w)},Fn.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(w){return w.type===Fr?w.getCoordinates():w.coordinates})))},Fn.prototype.updateCoordinate=function(w,P,F){Ao(this.features,"updateCoordinate",w,P,F),this.changed()},Fn.prototype.addCoordinate=function(w,P,F){Ao(this.features,"addCoordinate",w,P,F),this.changed()},Fn.prototype.removeCoordinate=function(w){Ao(this.features,"removeCoordinate",w),this.changed()},Fn.prototype.getFeatures=function(){return this.features},Ht.prototype.setSelected=function(w){return this._ctx.store.setSelected(w)},Ht.prototype.setSelectedCoordinates=function(w){var P=this;this._ctx.store.setSelectedCoordinates(w),w.reduce(function(F,le){return F[le.feature_id]===void 0&&(F[le.feature_id]=!0,P._ctx.store.get(le.feature_id).changed()),F},{})},Ht.prototype.getSelected=function(){return this._ctx.store.getSelected()},Ht.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Ht.prototype.isSelected=function(w){return this._ctx.store.isSelected(w)},Ht.prototype.getFeature=function(w){return this._ctx.store.get(w)},Ht.prototype.select=function(w){return this._ctx.store.select(w)},Ht.prototype.deselect=function(w){return this._ctx.store.deselect(w)},Ht.prototype.deleteFeature=function(w,P){return P===void 0&&(P={}),this._ctx.store.delete(w,P)},Ht.prototype.addFeature=function(w){return this._ctx.store.add(w)},Ht.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Ht.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Ht.prototype.setActionableState=function(w){w===void 0&&(w={});var P={trash:w.trash||!1,combineFeatures:w.combineFeatures||!1,uncombineFeatures:w.uncombineFeatures||!1};return this._ctx.events.actionable(P)},Ht.prototype.changeMode=function(w,P,F){return P===void 0&&(P={}),F===void 0&&(F={}),this._ctx.events.changeMode(w,P,F)},Ht.prototype.updateUIClasses=function(w){return this._ctx.ui.queueMapClasses(w)},Ht.prototype.activateUIButton=function(w){return this._ctx.ui.setActiveButton(w)},Ht.prototype.featuresAt=function(w,P,F){if(F===void 0&&(F="click"),F!=="click"&&F!=="touch")throw new Error("invalid buffer type");return ko[F](w,P,this._ctx)},Ht.prototype.newFeature=function(w){var P=w.geometry.type;return P===ir?new Gi(this._ctx,w):P===Ut?new Wi(this._ctx,w):P===Fr?new $n(this._ctx,w):new Fn(this._ctx,w)},Ht.prototype.isInstanceOf=function(w,P){if(w===ir)return P instanceof Gi;if(w===Ut)return P instanceof Wi;if(w===Fr)return P instanceof $n;if(w==="MultiFeature")return P instanceof Fn;throw new Error("Unknown feature class: "+w)},Ht.prototype.doRender=function(w){return this._ctx.store.featureChanged(w)},Ht.prototype.onSetup=function(){},Ht.prototype.onDrag=function(){},Ht.prototype.onClick=function(){},Ht.prototype.onMouseMove=function(){},Ht.prototype.onMouseDown=function(){},Ht.prototype.onMouseUp=function(){},Ht.prototype.onMouseOut=function(){},Ht.prototype.onKeyUp=function(){},Ht.prototype.onKeyDown=function(){},Ht.prototype.onTouchStart=function(){},Ht.prototype.onTouchMove=function(){},Ht.prototype.onTouchEnd=function(){},Ht.prototype.onTap=function(){},Ht.prototype.onStop=function(){},Ht.prototype.onTrash=function(){},Ht.prototype.onCombineFeature=function(){},Ht.prototype.onUncombineFeature=function(){},Ht.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var As={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},ou=Object.keys(As);function La(w){var P=Object.keys(w);return function(F,le){le===void 0&&(le={});var ve={},fe=P.reduce(function(_e,Ze){return _e[Ze]=w[Ze],_e},new Ht(F));return{start:function(){var _e=this;ve=fe.onSetup(le),ou.forEach(function(Ze){var Ve,ct=As[Ze],Ee=function(){return!1};w[ct]&&(Ee=function(){return!0}),_e.on(Ze,Ee,(Ve=ct,function(it){return fe[Ve](ve,it)}))})},stop:function(){fe.onStop(ve)},trash:function(){fe.onTrash(ve)},combineFeatures:function(){fe.onCombineFeatures(ve)},uncombineFeatures:function(){fe.onUncombineFeatures(ve)},render:function(_e,Ze){fe.toDisplayFeatures(ve,_e,Ze)}}}}function $i(w){return[].concat(w).filter(function(P){return P!==void 0})}function $o(){var w=this;if(!(w.ctx.map&&w.ctx.map.getSource(be)!==void 0))return Ve();var P=w.ctx.events.currentModeName();w.ctx.ui.queueMapClasses({mode:P});var F=[],le=[];w.isDirty?le=w.getAllIds():(F=w.getChangedIds().filter(function(ct){return w.get(ct)!==void 0}),le=w.sources.hot.filter(function(ct){return ct.properties.id&&F.indexOf(ct.properties.id)===-1&&w.get(ct.properties.id)!==void 0}).map(function(ct){return ct.properties.id})),w.sources.hot=[];var ve=w.sources.cold.length;w.sources.cold=w.isDirty?[]:w.sources.cold.filter(function(ct){var Ee=ct.properties.id||ct.properties.parent;return F.indexOf(Ee)===-1});var fe=ve!==w.sources.cold.length||le.length>0;function _e(ct,Ee){var it=w.get(ct).internal(P);w.ctx.events.currentModeRender(it,function(ht){w.sources[Ee].push(ht)})}if(F.forEach(function(ct){return _e(ct,"hot")}),le.forEach(function(ct){return _e(ct,"cold")}),fe&&w.ctx.map.getSource(De).setData({type:qr,features:w.sources.cold}),w.ctx.map.getSource(be).setData({type:qr,features:w.sources.hot}),w._emitSelectionChange&&(w.ctx.map.fire(Lr,{features:w.getSelected().map(function(ct){return ct.toGeoJSON()}),points:w.getSelectedCoordinates().map(function(ct){return{type:wr,properties:{},geometry:{type:ir,coordinates:ct.coordinates}}})}),w._emitSelectionChange=!1),w._deletedFeaturesToEmit.length){var Ze=w._deletedFeaturesToEmit.map(function(ct){return ct.toGeoJSON()});w._deletedFeaturesToEmit=[],w.ctx.map.fire(At,{features:Ze})}function Ve(){w.isDirty=!1,w.clearChangedIds()}Ve(),w.ctx.map.fire(Qr,{})}function Tr(w){var P,F=this;this._features={},this._featureIds=new ln,this._selectedFeatureIds=new ln,this._selectedCoordinates=[],this._changedFeatureIds=new ln,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=w,this.sources={hot:[],cold:[]},this.render=function(){P||(P=requestAnimationFrame(function(){P=null,$o.call(F)}))},this.isDirty=!1}function ns(w,P){var F=w._selectedCoordinates.filter(function(le){return w._selectedFeatureIds.has(le.feature_id)});w._selectedCoordinates.length===F.length||P.silent||(w._emitSelectionChange=!0),w._selectedCoordinates=F}Tr.prototype.createRenderBatch=function(){var w=this,P=this.render,F=0;return this.render=function(){F++},function(){w.render=P,F>0&&w.render()}},Tr.prototype.setDirty=function(){return this.isDirty=!0,this},Tr.prototype.featureChanged=function(w){return this._changedFeatureIds.add(w),this},Tr.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Tr.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Tr.prototype.getAllIds=function(){return this._featureIds.values()},Tr.prototype.add=function(w){return this.featureChanged(w.id),this._features[w.id]=w,this._featureIds.add(w.id),this},Tr.prototype.delete=function(w,P){var F=this;return P===void 0&&(P={}),$i(w).forEach(function(le){F._featureIds.has(le)&&(F._featureIds.delete(le),F._selectedFeatureIds.delete(le),P.silent||F._deletedFeaturesToEmit.indexOf(F._features[le])===-1&&F._deletedFeaturesToEmit.push(F._features[le]),delete F._features[le],F.isDirty=!0)}),ns(this,P),this},Tr.prototype.get=function(w){return this._features[w]},Tr.prototype.getAll=function(){var w=this;return Object.keys(this._features).map(function(P){return w._features[P]})},Tr.prototype.select=function(w,P){var F=this;return P===void 0&&(P={}),$i(w).forEach(function(le){F._selectedFeatureIds.has(le)||(F._selectedFeatureIds.add(le),F._changedFeatureIds.add(le),P.silent||(F._emitSelectionChange=!0))}),this},Tr.prototype.deselect=function(w,P){var F=this;return P===void 0&&(P={}),$i(w).forEach(function(le){F._selectedFeatureIds.has(le)&&(F._selectedFeatureIds.delete(le),F._changedFeatureIds.add(le),P.silent||(F._emitSelectionChange=!0))}),ns(this,P),this},Tr.prototype.clearSelected=function(w){return w===void 0&&(w={}),this.deselect(this._selectedFeatureIds.values(),{silent:w.silent}),this},Tr.prototype.setSelected=function(w,P){var F=this;return P===void 0&&(P={}),w=$i(w),this.deselect(this._selectedFeatureIds.values().filter(function(le){return w.indexOf(le)===-1}),{silent:P.silent}),this.select(w.filter(function(le){return!F._selectedFeatureIds.has(le)}),{silent:P.silent}),this},Tr.prototype.setSelectedCoordinates=function(w){return this._selectedCoordinates=w,this._emitSelectionChange=!0,this},Tr.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Tr.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Tr.prototype.getSelected=function(){var w=this;return this._selectedFeatureIds.values().map(function(P){return w.get(P)})},Tr.prototype.getSelectedCoordinates=function(){var w=this;return this._selectedCoordinates.map(function(P){return{coordinates:w.get(P.feature_id).getCoordinate(P.coord_path)}})},Tr.prototype.isSelected=function(w){return this._selectedFeatureIds.has(w)},Tr.prototype.setFeatureProperty=function(w,P,F){this.get(w).setProperty(P,F),this.featureChanged(w)},Tr.prototype.storeMapConfig=function(){var w=this;Wu.forEach(function(P){w.ctx.map[P]&&(w._mapInitialConfig[P]=w.ctx.map[P].isEnabled())})},Tr.prototype.restoreMapConfig=function(){var w=this;Object.keys(this._mapInitialConfig).forEach(function(P){w._mapInitialConfig[P]?w.ctx.map[P].enable():w.ctx.map[P].disable()})},Tr.prototype.getInitialConfigValue=function(w){return this._mapInitialConfig[w]===void 0||this._mapInitialConfig[w]};var Ir=function(){for(var w=arguments,P={},F=0;F<arguments.length;F++){var le=w[F];for(var ve in le)L.call(le,ve)&&(P[ve]=le[ve])}return P},L=Object.prototype.hasOwnProperty,O=["mode","feature","mouse"];function B(w){var P=null,F=null,le={onRemove:function(){return w.map.off("load",le.connect),clearInterval(F),le.removeLayers(),w.store.restoreMapConfig(),w.ui.removeButtons(),w.events.removeEventListeners(),w.ui.clearMapClasses(),w.map=null,w.container=null,w.store=null,P&&P.parentNode&&P.parentNode.removeChild(P),P=null,this},connect:function(){w.map.off("load",le.connect),clearInterval(F),le.addLayers(),w.store.storeMapConfig(),w.events.addEventListeners()},onAdd:function(ve){var fe=ve.fire;return ve.fire=function(_e,Ze){var Ve=arguments;return fe.length===1&&arguments.length!==1&&(Ve=[Ir({},{type:_e},Ze)]),fe.apply(ve,Ve)},w.map=ve,w.events=function(_e){var Ze=Object.keys(_e.options.modes).reduce(function(Re,yt){return Re[yt]=La(_e.options.modes[yt]),Re},{}),Ve={},ct={},Ee={},it=null,ht=null;Ee.drag=function(Re,yt){yt({point:Re.point,time:new Date().getTime()})?(_e.ui.queueMapClasses({mouse:Tt}),ht.drag(Re)):Re.originalEvent.stopPropagation()},Ee.mousedrag=function(Re){Ee.drag(Re,function(yt){return!Zi(Ve,yt)})},Ee.touchdrag=function(Re){Ee.drag(Re,function(yt){return!Is(ct,yt)})},Ee.mousemove=function(Re){if((Re.originalEvent.buttons!==void 0?Re.originalEvent.buttons:Re.originalEvent.which)===1)return Ee.mousedrag(Re);var yt=mi(Re,_e);Re.featureTarget=yt,ht.mousemove(Re)},Ee.mousedown=function(Re){Ve={time:new Date().getTime(),point:Re.point};var yt=mi(Re,_e);Re.featureTarget=yt,ht.mousedown(Re)},Ee.mouseup=function(Re){var yt=mi(Re,_e);Re.featureTarget=yt,Zi(Ve,{point:Re.point,time:new Date().getTime()})?ht.click(Re):ht.mouseup(Re)},Ee.mouseout=function(Re){ht.mouseout(Re)},Ee.touchstart=function(Re){if(Re.originalEvent.preventDefault(),_e.options.touchEnabled){ct={time:new Date().getTime(),point:Re.point};var yt=ko.touch(Re,null,_e)[0];Re.featureTarget=yt,ht.touchstart(Re)}},Ee.touchmove=function(Re){if(Re.originalEvent.preventDefault(),_e.options.touchEnabled)return ht.touchmove(Re),Ee.touchdrag(Re)},Ee.touchend=function(Re){if(Re.originalEvent.preventDefault(),_e.options.touchEnabled){var yt=ko.touch(Re,null,_e)[0];Re.featureTarget=yt,Is(ct,{time:new Date().getTime(),point:Re.point})?ht.tap(Re):ht.touchend(Re)}};var zt=function(Re){return!(Re===8||Re===46||Re>=48&&Re<=57)};function Ft(Re,yt,Sr){Sr===void 0&&(Sr={}),ht.stop();var rr=Ze[Re];if(rr===void 0)throw new Error(Re+" is not valid");it=Re;var kr=rr(_e,yt);ht=u(kr,_e),Sr.silent||_e.map.fire(Zr,{mode:Re}),_e.store.setDirty(),_e.store.render()}Ee.keydown=function(Re){(Re.srcElement||Re.target).classList[0]==="mapboxgl-canvas"&&(Re.keyCode!==8&&Re.keyCode!==46||!_e.options.controls.trash?zt(Re.keyCode)?ht.keydown(Re):Re.keyCode===49&&_e.options.controls.point?Ft(Vt.DRAW_POINT):Re.keyCode===50&&_e.options.controls.line_string?Ft(Vt.DRAW_LINE_STRING):Re.keyCode===51&&_e.options.controls.polygon&&Ft(Vt.DRAW_POLYGON):(Re.preventDefault(),ht.trash()))},Ee.keyup=function(Re){zt(Re.keyCode)&&ht.keyup(Re)},Ee.zoomend=function(){_e.store.changeZoom()},Ee.data=function(Re){if(Re.dataType==="style"){var yt=_e.setup,Sr=_e.map,rr=_e.options,kr=_e.store;rr.styles.some(function(St){return Sr.getLayer(St.id)})||(yt.addLayers(),kr.setDirty(),kr.render())}};var on={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){it=_e.options.defaultMode,ht=u(Ze[it](_e),_e)},changeMode:Ft,actionable:function(Re){var yt=!1;Object.keys(Re).forEach(function(Sr){if(on[Sr]===void 0)throw new Error("Invalid action type");on[Sr]!==Re[Sr]&&(yt=!0),on[Sr]=Re[Sr]}),yt&&_e.map.fire(fo,{actions:on})},currentModeName:function(){return it},currentModeRender:function(Re,yt){return ht.render(Re,yt)},fire:function(Re,yt){Ee[Re]&&Ee[Re](yt)},addEventListeners:function(){_e.map.on("mousemove",Ee.mousemove),_e.map.on("mousedown",Ee.mousedown),_e.map.on("mouseup",Ee.mouseup),_e.map.on("data",Ee.data),_e.map.on("touchmove",Ee.touchmove),_e.map.on("touchstart",Ee.touchstart),_e.map.on("touchend",Ee.touchend),_e.container.addEventListener("mouseout",Ee.mouseout),_e.options.keybindings&&(_e.container.addEventListener("keydown",Ee.keydown),_e.container.addEventListener("keyup",Ee.keyup))},removeEventListeners:function(){_e.map.off("mousemove",Ee.mousemove),_e.map.off("mousedown",Ee.mousedown),_e.map.off("mouseup",Ee.mouseup),_e.map.off("data",Ee.data),_e.map.off("touchmove",Ee.touchmove),_e.map.off("touchstart",Ee.touchstart),_e.map.off("touchend",Ee.touchend),_e.container.removeEventListener("mouseout",Ee.mouseout),_e.options.keybindings&&(_e.container.removeEventListener("keydown",Ee.keydown),_e.container.removeEventListener("keyup",Ee.keyup))},trash:function(Re){ht.trash(Re)},combineFeatures:function(){ht.combineFeatures()},uncombineFeatures:function(){ht.uncombineFeatures()},getMode:function(){return it}}}(w),w.ui=function(_e){var Ze={},Ve=null,ct={mode:null,feature:null,mouse:null},Ee={mode:null,feature:null,mouse:null};function it(Re){Ee=Ir(Ee,Re)}function ht(){var Re,yt;if(_e.container){var Sr=[],rr=[];O.forEach(function(kr){Ee[kr]!==ct[kr]&&(Sr.push(kr+"-"+ct[kr]),Ee[kr]!==null&&rr.push(kr+"-"+Ee[kr]))}),Sr.length>0&&(Re=_e.container.classList).remove.apply(Re,Sr),rr.length>0&&(yt=_e.container.classList).add.apply(yt,rr),ct=Ir(ct,Ee)}}function zt(Re,yt){yt===void 0&&(yt={});var Sr=document.createElement("button");return Sr.className=q+" "+yt.className,Sr.setAttribute("title",yt.title),yt.container.appendChild(Sr),Sr.addEventListener("click",function(rr){if(rr.preventDefault(),rr.stopPropagation(),rr.target===Ve)return Ft(),void yt.onDeactivate();on(Re),yt.onActivate()},!0),Sr}function Ft(){Ve&&(Ve.classList.remove(re),Ve=null)}function on(Re){Ft();var yt=Ze[Re];yt&&yt&&Re!=="trash"&&(yt.classList.add(re),Ve=yt)}return{setActiveButton:on,queueMapClasses:it,updateMapClasses:ht,clearMapClasses:function(){it({mode:null,feature:null,mouse:null}),ht()},addButtons:function(){var Re=_e.options.controls,yt=document.createElement("div");return yt.className=ue+" "+M,Re&&(Re[er.LINE]&&(Ze[er.LINE]=zt(er.LINE,{container:yt,className:ee,title:"LineString tool "+(_e.options.keybindings?"(l)":""),onActivate:function(){return _e.events.changeMode(Vt.DRAW_LINE_STRING)},onDeactivate:function(){return _e.events.trash()}})),Re[er.POLYGON]&&(Ze[er.POLYGON]=zt(er.POLYGON,{container:yt,className:ke,title:"Polygon tool "+(_e.options.keybindings?"(p)":""),onActivate:function(){return _e.events.changeMode(Vt.DRAW_POLYGON)},onDeactivate:function(){return _e.events.trash()}})),Re[er.POINT]&&(Ze[er.POINT]=zt(er.POINT,{container:yt,className:X,title:"Marker tool "+(_e.options.keybindings?"(m)":""),onActivate:function(){return _e.events.changeMode(Vt.DRAW_POINT)},onDeactivate:function(){return _e.events.trash()}})),Re.trash&&(Ze.trash=zt("trash",{container:yt,className:Se,title:"Delete",onActivate:function(){_e.events.trash()}})),Re.combine_features&&(Ze.combine_features=zt("combineFeatures",{container:yt,className:Me,title:"Combine",onActivate:function(){_e.events.combineFeatures()}})),Re.uncombine_features&&(Ze.uncombine_features=zt("uncombineFeatures",{container:yt,className:Le,title:"Uncombine",onActivate:function(){_e.events.uncombineFeatures()}}))),yt},removeButtons:function(){Object.keys(Ze).forEach(function(Re){var yt=Ze[Re];yt.parentNode&&yt.parentNode.removeChild(yt),delete Ze[Re]})}}}(w),w.container=ve.getContainer(),w.store=new Tr(w),P=w.ui.addButtons(),w.options.boxSelect&&(ve.boxZoom.disable(),ve.dragPan.disable(),ve.dragPan.enable()),ve.loaded()?le.connect():(ve.on("load",le.connect),F=setInterval(function(){ve.loaded()&&le.connect()},16)),w.events.start(),P},addLayers:function(){w.map.addSource(De,{data:{type:qr,features:[]},type:"geojson"}),w.map.addSource(be,{data:{type:qr,features:[]},type:"geojson"}),w.options.styles.forEach(function(ve){w.map.addLayer(ve)}),w.store.setDirty(!0),w.store.render()},removeLayers:function(){w.options.styles.forEach(function(ve){w.map.getLayer(ve.id)&&w.map.removeLayer(ve.id)}),w.map.getSource(De)&&w.map.removeSource(De),w.map.getSource(be)&&w.map.removeSource(be)}};return w.setup=le,le}function G(w){return function(P){var F=P.featureTarget;return!!F&&!!F.properties&&F.properties.meta===w}}function K(w){return!!w.featureTarget&&!!w.featureTarget.properties&&w.featureTarget.properties.active===nn&&w.featureTarget.properties.meta===Wn}function se(w){return!!w.featureTarget&&!!w.featureTarget.properties&&w.featureTarget.properties.active===An&&w.featureTarget.properties.meta===Wn}function pe(w){return w.featureTarget===void 0}function j(w){var P=w.featureTarget;return!!P&&!!P.properties&&P.properties.meta===Vi}function Q(w){return!!w.originalEvent&&w.originalEvent.shiftKey===!0}function me(w){return w.keyCode===27}function Fe(w){return w.keyCode===13}var Ne=Pe;function Pe(w,P){this.x=w,this.y=P}function Ue(w,P){var F=P.getBoundingClientRect();return new Ne(w.clientX-F.left-(P.clientLeft||0),w.clientY-F.top-(P.clientTop||0))}function st(w,P,F,le){return{type:wr,properties:{meta:Vi,parent:w,coord_path:F,active:le?nn:An},geometry:{type:ir,coordinates:P}}}function nt(w,P,F){P===void 0&&(P={}),F===void 0&&(F=null);var le,ve=w.geometry,fe=ve.type,_e=ve.coordinates,Ze=w.properties&&w.properties.id,Ve=[];function ct(it,ht){var zt="",Ft=null;it.forEach(function(on,Re){var yt=ht!=null?ht+"."+Re:String(Re),Sr=st(Ze,on,yt,Ee(yt));if(P.midpoints&&Ft){var rr=function(St,Mi,li){var ar=Mi.geometry.coordinates,yi=li.geometry.coordinates;if(ar[1]>85||ar[1]<-85||yi[1]>85||yi[1]<-85)return null;var jr={lng:(ar[0]+yi[0])/2,lat:(ar[1]+yi[1])/2};return{type:wr,properties:{meta:Kt,parent:St,lng:jr.lng,lat:jr.lat,coord_path:li.properties.coord_path},geometry:{type:ir,coordinates:[jr.lng,jr.lat]}}}(Ze,Ft,Sr);rr&&Ve.push(rr)}Ft=Sr;var kr=JSON.stringify(on);zt!==kr&&Ve.push(Sr),Re===0&&(zt=kr)})}function Ee(it){return!!P.selectedPaths&&P.selectedPaths.indexOf(it)!==-1}return fe===ir?Ve.push(st(Ze,_e,F,Ee(F))):fe===Fr?_e.forEach(function(it,ht){ct(it,F!==null?F+"."+ht:String(ht))}):fe===Ut?ct(_e,F):fe.indexOf(zr)===0&&(le=fe.replace(zr,""),_e.forEach(function(it,ht){var zt={type:wr,properties:w.properties,geometry:{type:le,coordinates:it}};Ve=Ve.concat(nt(zt,P,ht))})),Ve}Pe.prototype={clone:function(){return new Pe(this.x,this.y)},add:function(w){return this.clone()._add(w)},sub:function(w){return this.clone()._sub(w)},multByPoint:function(w){return this.clone()._multByPoint(w)},divByPoint:function(w){return this.clone()._divByPoint(w)},mult:function(w){return this.clone()._mult(w)},div:function(w){return this.clone()._div(w)},rotate:function(w){return this.clone()._rotate(w)},rotateAround:function(w,P){return this.clone()._rotateAround(w,P)},matMult:function(w){return this.clone()._matMult(w)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(w){return this.x===w.x&&this.y===w.y},dist:function(w){return Math.sqrt(this.distSqr(w))},distSqr:function(w){var P=w.x-this.x,F=w.y-this.y;return P*P+F*F},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(w){return Math.atan2(this.y-w.y,this.x-w.x)},angleWith:function(w){return this.angleWithSep(w.x,w.y)},angleWithSep:function(w,P){return Math.atan2(this.x*P-this.y*w,this.x*w+this.y*P)},_matMult:function(w){var P=w[0]*this.x+w[1]*this.y,F=w[2]*this.x+w[3]*this.y;return this.x=P,this.y=F,this},_add:function(w){return this.x+=w.x,this.y+=w.y,this},_sub:function(w){return this.x-=w.x,this.y-=w.y,this},_mult:function(w){return this.x*=w,this.y*=w,this},_div:function(w){return this.x/=w,this.y/=w,this},_multByPoint:function(w){return this.x*=w.x,this.y*=w.y,this},_divByPoint:function(w){return this.x/=w.x,this.y/=w.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var w=this.y;return this.y=this.x,this.x=-w,this},_rotate:function(w){var P=Math.cos(w),F=Math.sin(w),le=P*this.x-F*this.y,ve=F*this.x+P*this.y;return this.x=le,this.y=ve,this},_rotateAround:function(w,P){var F=Math.cos(w),le=Math.sin(w),ve=P.x+F*(this.x-P.x)-le*(this.y-P.y),fe=P.y+le*(this.x-P.x)+F*(this.y-P.y);return this.x=ve,this.y=fe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Pe.convert=function(w){return w instanceof Pe?w:Array.isArray(w)?new Pe(w[0],w[1]):w};var Ie=function(w){setTimeout(function(){w.map&&w.map.doubleClickZoom&&w._ctx&&w._ctx.store&&w._ctx.store.getInitialConfigValue&&w._ctx.store.getInitialConfigValue("doubleClickZoom")&&w.map.doubleClickZoom.enable()},0)},Je=function(w){setTimeout(function(){w.map&&w.map.doubleClickZoom&&w.map.doubleClickZoom.disable()},0)},Xe=function(w){if(!w||!w.type)return null;var P=Ke[w.type];if(!P)return null;if(P==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:w}]};if(P==="feature")return{type:"FeatureCollection",features:[w]};if(P==="featurecollection")return w},Ke={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function jt(w){switch(w&&w.type||null){case"FeatureCollection":return w.features=w.features.reduce(function(P,F){return P.concat(jt(F))},[]),w;case"Feature":return w.geometry?jt(w.geometry).map(function(P){var F={type:"Feature",properties:JSON.parse(JSON.stringify(w.properties)),geometry:P};return w.id!==void 0&&(F.id=w.id),F}):[w];case"MultiPoint":return w.coordinates.map(function(P){return{type:"Point",coordinates:P}});case"MultiPolygon":return w.coordinates.map(function(P){return{type:"Polygon",coordinates:P}});case"MultiLineString":return w.coordinates.map(function(P){return{type:"LineString",coordinates:P}});case"GeometryCollection":return w.geometries.map(jt).reduce(function(P,F){return P.concat(F)},[]);case"Point":case"Polygon":case"LineString":return[w]}}var Qe=function(w){if(!w)return[];var P=jt(Xe(w)),F=[];return P.features.forEach(function(le){le.geometry&&(F=F.concat(function ve(fe){return Array.isArray(fe)&&fe.length&&typeof fe[0]=="number"?[fe]:fe.reduce(function(_e,Ze){return Array.isArray(Ze)&&Array.isArray(Ze[0])?_e.concat(ve(Ze)):(_e.push(Ze),_e)},[])}(le.geometry.coordinates)))}),F},tr=rs(function(w){var P=w.exports=function(Ee){return new F(Ee)};function F(Ee){this.value=Ee}function le(Ee,it,ht){var zt=[],Ft=[],on=!0;return function Re(yt){var Sr=ht?ve(yt):yt,rr={},kr=!0,St={node:Sr,node_:yt,path:[].concat(zt),parent:Ft[Ft.length-1],parents:Ft,key:zt.slice(-1)[0],isRoot:zt.length===0,level:zt.length,circular:null,update:function(ar,yi){St.isRoot||(St.parent.node[St.key]=ar),St.node=ar,yi&&(kr=!1)},delete:function(ar){delete St.parent.node[St.key],ar&&(kr=!1)},remove:function(ar){Ze(St.parent.node)?St.parent.node.splice(St.key,1):delete St.parent.node[St.key],ar&&(kr=!1)},keys:null,before:function(ar){rr.before=ar},after:function(ar){rr.after=ar},pre:function(ar){rr.pre=ar},post:function(ar){rr.post=ar},stop:function(){on=!1},block:function(){kr=!1}};if(!on)return St;function Mi(){if(typeof St.node=="object"&&St.node!==null){St.keys&&St.node_===St.node||(St.keys=fe(St.node)),St.isLeaf=St.keys.length==0;for(var ar=0;ar<Ft.length;ar++)if(Ft[ar].node_===yt){St.circular=Ft[ar];break}}else St.isLeaf=!0,St.keys=null;St.notLeaf=!St.isLeaf,St.notRoot=!St.isRoot}Mi();var li=it.call(St,St.node);return li!==void 0&&St.update&&St.update(li),rr.before&&rr.before.call(St,St.node),kr&&(typeof St.node!="object"||St.node===null||St.circular||(Ft.push(St),Mi(),Ve(St.keys,function(ar,yi){zt.push(ar),rr.pre&&rr.pre.call(St,St.node[ar],ar);var jr=Re(St.node[ar]);ht&&ct.call(St.node,ar)&&(St.node[ar]=jr.node),jr.isLast=yi==St.keys.length-1,jr.isFirst=yi==0,rr.post&&rr.post.call(St,jr),zt.pop()}),Ft.pop()),rr.after&&rr.after.call(St,St.node)),St}(Ee).node}function ve(Ee){if(typeof Ee=="object"&&Ee!==null){var it;if(Ze(Ee))it=[];else if(_e(Ee)==="[object Date]")it=new Date(Ee.getTime?Ee.getTime():Ee);else if(function(Ft){return _e(Ft)==="[object RegExp]"}(Ee))it=new RegExp(Ee);else if(function(Ft){return _e(Ft)==="[object Error]"}(Ee))it={message:Ee.message};else if(function(Ft){return _e(Ft)==="[object Boolean]"}(Ee))it=new Boolean(Ee);else if(function(Ft){return _e(Ft)==="[object Number]"}(Ee))it=new Number(Ee);else if(function(Ft){return _e(Ft)==="[object String]"}(Ee))it=new String(Ee);else if(Object.create&&Object.getPrototypeOf)it=Object.create(Object.getPrototypeOf(Ee));else if(Ee.constructor===Object)it={};else{var ht=Ee.constructor&&Ee.constructor.prototype||Ee.__proto__||{},zt=function(){};zt.prototype=ht,it=new zt}return Ve(fe(Ee),function(Ft){it[Ft]=Ee[Ft]}),it}return Ee}F.prototype.get=function(Ee){for(var it=this.value,ht=0;ht<Ee.length;ht++){var zt=Ee[ht];if(!it||!ct.call(it,zt)){it=void 0;break}it=it[zt]}return it},F.prototype.has=function(Ee){for(var it=this.value,ht=0;ht<Ee.length;ht++){var zt=Ee[ht];if(!it||!ct.call(it,zt))return!1;it=it[zt]}return!0},F.prototype.set=function(Ee,it){for(var ht=this.value,zt=0;zt<Ee.length-1;zt++){var Ft=Ee[zt];ct.call(ht,Ft)||(ht[Ft]={}),ht=ht[Ft]}return ht[Ee[zt]]=it,it},F.prototype.map=function(Ee){return le(this.value,Ee,!0)},F.prototype.forEach=function(Ee){return this.value=le(this.value,Ee,!1),this.value},F.prototype.reduce=function(Ee,it){var ht=arguments.length===1,zt=ht?this.value:it;return this.forEach(function(Ft){this.isRoot&&ht||(zt=Ee.call(this,zt,Ft))}),zt},F.prototype.paths=function(){var Ee=[];return this.forEach(function(it){Ee.push(this.path)}),Ee},F.prototype.nodes=function(){var Ee=[];return this.forEach(function(it){Ee.push(this.node)}),Ee},F.prototype.clone=function(){var Ee=[],it=[];return function ht(zt){for(var Ft=0;Ft<Ee.length;Ft++)if(Ee[Ft]===zt)return it[Ft];if(typeof zt=="object"&&zt!==null){var on=ve(zt);return Ee.push(zt),it.push(on),Ve(fe(zt),function(Re){on[Re]=ht(zt[Re])}),Ee.pop(),it.pop(),on}return zt}(this.value)};var fe=Object.keys||function(Ee){var it=[];for(var ht in Ee)it.push(ht);return it};function _e(Ee){return Object.prototype.toString.call(Ee)}var Ze=Array.isArray||function(Ee){return Object.prototype.toString.call(Ee)==="[object Array]"},Ve=function(Ee,it){if(Ee.forEach)return Ee.forEach(it);for(var ht=0;ht<Ee.length;ht++)it(Ee[ht],ht,Ee)};Ve(fe(F.prototype),function(Ee){P[Ee]=function(it){var ht=[].slice.call(arguments,1),zt=new F(it);return zt[Ee].apply(zt,ht)}});var ct=Object.hasOwnProperty||function(Ee,it){return it in Ee}}),Cr=Mt;function Mt(w){if(!(this instanceof Mt))return new Mt(w);this._bbox=w||[1/0,1/0,-1/0,-1/0],this._valid=!!w}Mt.prototype.include=function(w){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],w[0]),this._bbox[1]=Math.min(this._bbox[1],w[1]),this._bbox[2]=Math.max(this._bbox[2],w[0]),this._bbox[3]=Math.max(this._bbox[3],w[1]),this},Mt.prototype.equals=function(w){var P;return P=w instanceof Mt?w.bbox():w,this._bbox[0]==P[0]&&this._bbox[1]==P[1]&&this._bbox[2]==P[2]&&this._bbox[3]==P[3]},Mt.prototype.center=function(w){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Mt.prototype.union=function(w){var P;return this._valid=!0,P=w instanceof Mt?w.bbox():w,this._bbox[0]=Math.min(this._bbox[0],P[0]),this._bbox[1]=Math.min(this._bbox[1],P[1]),this._bbox[2]=Math.max(this._bbox[2],P[2]),this._bbox[3]=Math.max(this._bbox[3],P[3]),this},Mt.prototype.bbox=function(){return this._valid?this._bbox:null},Mt.prototype.contains=function(w){if(!w)return this._fastContains();if(!this._valid)return null;var P=w[0],F=w[1];return this._bbox[0]<=P&&this._bbox[1]<=F&&this._bbox[2]>=P&&this._bbox[3]>=F},Mt.prototype.intersect=function(w){return this._valid?(P=w instanceof Mt?w.bbox():w,!(this._bbox[0]>P[2]||this._bbox[2]<P[0]||this._bbox[3]<P[1]||this._bbox[1]>P[3])):null;var P},Mt.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var w="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",w)},Mt.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var lr={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},or=Object.keys(lr),Bn=function(w){return dr(w).bbox()};function dr(w){for(var P=Cr(),F=Qe(w),le=0;le<F.length;le++)P.include(F[le]);return P}Bn.polygon=function(w){return dr(w).polygon()},Bn.bboxify=function(w){return tr(w).map(function(P){P&&or.some(function(F){return!!P[F]&&lr[F].indexOf(P.type)!==-1})&&(P.bbox=dr(P).bbox(),this.update(P))})};function en(w,P){var F=-90,le=90,ve=-90,fe=90,_e=270,Ze=-270;w.forEach(function(ct){var Ee=Bn(ct),it=Ee[1],ht=Ee[3],zt=Ee[0],Ft=Ee[2];it>F&&(F=it),ht<le&&(le=ht),ht>ve&&(ve=ht),it<fe&&(fe=it),zt<_e&&(_e=zt),Ft>Ze&&(Ze=Ft)});var Ve=P;return F+Ve.lat>85&&(Ve.lat=85-F),ve+Ve.lat>90&&(Ve.lat=90-ve),le+Ve.lat<-85&&(Ve.lat=-85-le),fe+Ve.lat<-90&&(Ve.lat=-90-fe),_e+Ve.lng<=-270&&(Ve.lng+=360*Math.ceil(Math.abs(Ve.lng)/360)),Ze+Ve.lng>=270&&(Ve.lng-=360*Math.ceil(Math.abs(Ve.lng)/360)),Ve}function xr(w,P){var F=en(w.map(function(le){return le.toGeoJSON()}),P);w.forEach(function(le){var ve,fe=le.getCoordinates(),_e=function(Ve){var ct={lng:Ve[0]+F.lng,lat:Ve[1]+F.lat};return[ct.lng,ct.lat]},Ze=function(Ve){return Ve.map(function(ct){return _e(ct)})};le.type===ir?ve=_e(fe):le.type===Ut||le.type===ri?ve=fe.map(_e):le.type===Fr||le.type===kn?ve=fe.map(Ze):le.type===ni&&(ve=fe.map(function(Ve){return Ve.map(function(ct){return Ze(ct)})})),le.incomingCoords(ve)})}var It={onSetup:function(w){var P=this,F={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:w.featureIds||[]};return this.setSelected(F.initiallySelectedFeatureIds.filter(function(le){return P.getFeature(le)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),F},fireUpdate:function(){this.map.fire($t,{action:Io,features:this.getSelected().map(function(w){return w.toGeoJSON()})})},fireActionable:function(){var w=this,P=this.getSelected(),F=P.filter(function(Ze){return w.isInstanceOf("MultiFeature",Ze)}),le=!1;if(P.length>1){le=!0;var ve=P[0].type.replace("Multi","");P.forEach(function(Ze){Ze.type.replace("Multi","")!==ve&&(le=!1)})}var fe=F.length>0,_e=P.length>0;this.setActionableState({combineFeatures:le,uncombineFeatures:fe,trash:_e})},getUniqueIds:function(w){return w.length?w.map(function(P){return P.properties.id}).filter(function(P){return P!==void 0}).reduce(function(P,F){return P.add(F),P},new ln).values():[]},stopExtendedInteractions:function(w){w.boxSelectElement&&(w.boxSelectElement.parentNode&&w.boxSelectElement.parentNode.removeChild(w.boxSelectElement),w.boxSelectElement=null),this.map.dragPan.enable(),w.boxSelecting=!1,w.canBoxSelect=!1,w.dragMoving=!1,w.canDragMove=!1},onStop:function(){Ie(this)},onMouseMove:function(w){return this.stopExtendedInteractions(w),!0},onMouseOut:function(w){return!w.dragMoving||this.fireUpdate()}};It.onTap=It.onClick=function(w,P){return pe(P)?this.clickAnywhere(w,P):G(Vi)(P)?this.clickOnVertex(w,P):function(F){return!!F.featureTarget&&!!F.featureTarget.properties&&F.featureTarget.properties.meta===Wn}(P)?this.clickOnFeature(w,P):void 0},It.clickAnywhere=function(w){var P=this,F=this.getSelectedIds();F.length&&(this.clearSelectedFeatures(),F.forEach(function(le){return P.doRender(le)})),Ie(this),this.stopExtendedInteractions(w)},It.clickOnVertex=function(w,P){this.changeMode(Vt.DIRECT_SELECT,{featureId:P.featureTarget.properties.parent,coordPath:P.featureTarget.properties.coord_path,startPos:P.lngLat}),this.updateUIClasses({mouse:We})},It.startOnActiveFeature=function(w,P){this.stopExtendedInteractions(w),this.map.dragPan.disable(),this.doRender(P.featureTarget.properties.id),w.canDragMove=!0,w.dragMoveLocation=P.lngLat},It.clickOnFeature=function(w,P){var F=this;Je(this),this.stopExtendedInteractions(w);var le=Q(P),ve=this.getSelectedIds(),fe=P.featureTarget.properties.id,_e=this.isSelected(fe);if(!le&&_e&&this.getFeature(fe).type!==ir)return this.changeMode(Vt.DIRECT_SELECT,{featureId:fe});_e&&le?(this.deselect(fe),this.updateUIClasses({mouse:Ot}),ve.length===1&&Ie(this)):!_e&&le?(this.select(fe),this.updateUIClasses({mouse:We})):_e||le||(ve.forEach(function(Ze){return F.doRender(Ze)}),this.setSelected(fe),this.updateUIClasses({mouse:We})),this.doRender(fe)},It.onMouseDown=function(w,P){return K(P)?this.startOnActiveFeature(w,P):this.drawConfig.boxSelect&&function(F){return!!F.originalEvent&&!!F.originalEvent.shiftKey&&F.originalEvent.button===0}(P)?this.startBoxSelect(w,P):void 0},It.startBoxSelect=function(w,P){this.stopExtendedInteractions(w),this.map.dragPan.disable(),w.boxSelectStartLocation=Ue(P.originalEvent,this.map.getContainer()),w.canBoxSelect=!0},It.onTouchStart=function(w,P){if(K(P))return this.startOnActiveFeature(w,P)},It.onDrag=function(w,P){return w.canDragMove?this.dragMove(w,P):this.drawConfig.boxSelect&&w.canBoxSelect?this.whileBoxSelect(w,P):void 0},It.whileBoxSelect=function(w,P){w.boxSelecting=!0,this.updateUIClasses({mouse:mt}),w.boxSelectElement||(w.boxSelectElement=document.createElement("div"),w.boxSelectElement.classList.add(ae),this.map.getContainer().appendChild(w.boxSelectElement));var F=Ue(P.originalEvent,this.map.getContainer()),le=Math.min(w.boxSelectStartLocation.x,F.x),ve=Math.max(w.boxSelectStartLocation.x,F.x),fe=Math.min(w.boxSelectStartLocation.y,F.y),_e=Math.max(w.boxSelectStartLocation.y,F.y),Ze="translate("+le+"px, "+fe+"px)";w.boxSelectElement.style.transform=Ze,w.boxSelectElement.style.WebkitTransform=Ze,w.boxSelectElement.style.width=ve-le+"px",w.boxSelectElement.style.height=_e-fe+"px"},It.dragMove=function(w,P){w.dragMoving=!0,P.originalEvent.stopPropagation();var F={lng:P.lngLat.lng-w.dragMoveLocation.lng,lat:P.lngLat.lat-w.dragMoveLocation.lat};xr(this.getSelected(),F),w.dragMoveLocation=P.lngLat},It.onMouseUp=function(w,P){var F=this;if(w.dragMoving)this.fireUpdate();else if(w.boxSelecting){var le=[w.boxSelectStartLocation,Ue(P.originalEvent,this.map.getContainer())],ve=this.featuresAt(null,le,"click"),fe=this.getUniqueIds(ve).filter(function(_e){return!F.isSelected(_e)});fe.length&&(this.select(fe),fe.forEach(function(_e){return F.doRender(_e)}),this.updateUIClasses({mouse:We}))}this.stopExtendedInteractions(w)},It.toDisplayFeatures=function(w,P,F){P.properties.active=this.isSelected(P.properties.id)?nn:An,F(P),this.fireActionable(),P.properties.active===nn&&P.geometry.type!==ir&&nt(P).forEach(F)},It.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},It.onCombineFeatures=function(){var w=this.getSelected();if(!(w.length===0||w.length<2)){for(var P=[],F=[],le=w[0].type.replace("Multi",""),ve=0;ve<w.length;ve++){var fe=w[ve];if(fe.type.replace("Multi","")!==le)return;fe.type.includes("Multi")?fe.getCoordinates().forEach(function(Ze){P.push(Ze)}):P.push(fe.getCoordinates()),F.push(fe.toGeoJSON())}if(F.length>1){var _e=this.newFeature({type:wr,properties:F[0].properties,geometry:{type:"Multi"+le,coordinates:P}});this.addFeature(_e),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([_e.id]),this.map.fire(si,{createdFeatures:[_e.toGeoJSON()],deletedFeatures:F})}this.fireActionable()}},It.onUncombineFeatures=function(){var w=this,P=this.getSelected();if(P.length!==0){for(var F=[],le=[],ve=function(_e){var Ze=P[_e];w.isInstanceOf("MultiFeature",Ze)&&(Ze.getFeatures().forEach(function(Ve){w.addFeature(Ve),Ve.properties=Ze.properties,F.push(Ve.toGeoJSON()),w.select([Ve.id])}),w.deleteFeature(Ze.id,{silent:!0}),le.push(Ze.toGeoJSON()))},fe=0;fe<P.length;fe++)ve(fe);F.length>1&&this.map.fire(sr,{createdFeatures:F,deletedFeatures:le}),this.fireActionable()}};var cr=G(Vi),ui=G(Kt),Xi={fireUpdate:function(){this.map.fire($t,{action:ts,features:this.getSelected().map(function(w){return w.toGeoJSON()})})},fireActionable:function(w){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:w.selectedCoordPaths.length>0})},startDragging:function(w,P){this.map.dragPan.disable(),w.canDragMove=!0,w.dragMoveLocation=P.lngLat},stopDragging:function(w){this.map.dragPan.enable(),w.dragMoving=!1,w.canDragMove=!1,w.dragMoveLocation=null},onVertex:function(w,P){this.startDragging(w,P);var F=P.featureTarget.properties,le=w.selectedCoordPaths.indexOf(F.coord_path);Q(P)||le!==-1?Q(P)&&le===-1&&w.selectedCoordPaths.push(F.coord_path):w.selectedCoordPaths=[F.coord_path];var ve=this.pathsToCoordinates(w.featureId,w.selectedCoordPaths);this.setSelectedCoordinates(ve)},onMidpoint:function(w,P){this.startDragging(w,P);var F=P.featureTarget.properties;w.feature.addCoordinate(F.coord_path,F.lng,F.lat),this.fireUpdate(),w.selectedCoordPaths=[F.coord_path]},pathsToCoordinates:function(w,P){return P.map(function(F){return{feature_id:w,coord_path:F}})},onFeature:function(w,P){w.selectedCoordPaths.length===0?this.startDragging(w,P):this.stopDragging(w)},dragFeature:function(w,P,F){xr(this.getSelected(),F),w.dragMoveLocation=P.lngLat},dragVertex:function(w,P,F){for(var le=w.selectedCoordPaths.map(function(Ze){return w.feature.getCoordinate(Ze)}),ve=en(le.map(function(Ze){return{type:wr,properties:{},geometry:{type:ir,coordinates:Ze}}}),F),fe=0;fe<le.length;fe++){var _e=le[fe];w.feature.updateCoordinate(w.selectedCoordPaths[fe],_e[0]+ve.lng,_e[1]+ve.lat)}},clickNoTarget:function(){this.changeMode(Vt.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(Vt.SIMPLE_SELECT)},clickActiveFeature:function(w){w.selectedCoordPaths=[],this.clearSelectedCoordinates(),w.feature.changed()},onSetup:function(w){var P=w.featureId,F=this.getFeature(P);if(!F)throw new Error("You must provide a featureId to enter direct_select mode");if(F.type===ir)throw new TypeError("direct_select mode doesn't handle point features");var le={featureId:P,feature:F,dragMoveLocation:w.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:w.coordPath?[w.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(P,le.selectedCoordPaths)),this.setSelected(P),Je(this),this.setActionableState({trash:!0}),le},onStop:function(){Ie(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(w,P,F){w.featureId===P.properties.id?(P.properties.active=nn,F(P),nt(P,{map:this.map,midpoints:!0,selectedPaths:w.selectedCoordPaths}).forEach(F)):(P.properties.active=An,F(P)),this.fireActionable(w)},onTrash:function(w){w.selectedCoordPaths.sort(function(P,F){return F.localeCompare(P,"en",{numeric:!0})}).forEach(function(P){return w.feature.removeCoordinate(P)}),this.fireUpdate(),w.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(w),w.feature.isValid()===!1&&(this.deleteFeature([w.featureId]),this.changeMode(Vt.SIMPLE_SELECT,{}))},onMouseMove:function(w,P){var F=K(P),le=cr(P),ve=w.selectedCoordPaths.length===0;return F&&ve||le&&!ve?this.updateUIClasses({mouse:We}):this.updateUIClasses({mouse:pt}),this.stopDragging(w),!0},onMouseOut:function(w){return w.dragMoving&&this.fireUpdate(),!0}};Xi.onTouchStart=Xi.onMouseDown=function(w,P){return cr(P)?this.onVertex(w,P):K(P)?this.onFeature(w,P):ui(P)?this.onMidpoint(w,P):void 0},Xi.onDrag=function(w,P){if(w.canDragMove===!0){w.dragMoving=!0,P.originalEvent.stopPropagation();var F={lng:P.lngLat.lng-w.dragMoveLocation.lng,lat:P.lngLat.lat-w.dragMoveLocation.lat};w.selectedCoordPaths.length>0?this.dragVertex(w,P,F):this.dragFeature(w,P,F),w.dragMoveLocation=P.lngLat}},Xi.onClick=function(w,P){return pe(P)?this.clickNoTarget(w,P):K(P)?this.clickActiveFeature(w,P):se(P)?this.clickInactive(w,P):void this.stopDragging(w)},Xi.onTap=function(w,P){return pe(P)?this.clickNoTarget(w,P):K(P)?this.clickActiveFeature(w,P):se(P)?this.clickInactive(w,P):void 0},Xi.onTouchEnd=Xi.onMouseUp=function(w){w.dragMoving&&this.fireUpdate(),this.stopDragging(w)};var Br={};function Xn(w,P){return!!w.lngLat&&w.lngLat.lng===P[0]&&w.lngLat.lat===P[1]}Br.onSetup=function(){var w=this.newFeature({type:wr,properties:{},geometry:{type:ir,coordinates:[]}});return this.addFeature(w),this.clearSelectedFeatures(),this.updateUIClasses({mouse:mt}),this.activateUIButton(er.POINT),this.setActionableState({trash:!0}),{point:w}},Br.stopDrawingAndRemove=function(w){this.deleteFeature([w.point.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT)},Br.onTap=Br.onClick=function(w,P){this.updateUIClasses({mouse:We}),w.point.updateCoordinate("",P.lngLat.lng,P.lngLat.lat),this.map.fire(Ye,{features:[w.point.toGeoJSON()]}),this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[w.point.id]})},Br.onStop=function(w){this.activateUIButton(),w.point.getCoordinate().length||this.deleteFeature([w.point.id],{silent:!0})},Br.toDisplayFeatures=function(w,P,F){var le=P.properties.id===w.point.id;if(P.properties.active=le?nn:An,!le)return F(P)},Br.onTrash=Br.stopDrawingAndRemove,Br.onKeyUp=function(w,P){if(me(P)||Fe(P))return this.stopDrawingAndRemove(w,P)};var Xo={onSetup:function(){var w=this.newFeature({type:wr,properties:{},geometry:{type:Fr,coordinates:[[]]}});return this.addFeature(w),this.clearSelectedFeatures(),Je(this),this.updateUIClasses({mouse:mt}),this.activateUIButton(er.POLYGON),this.setActionableState({trash:!0}),{polygon:w,currentVertexPosition:0}},clickAnywhere:function(w,P){if(w.currentVertexPosition>0&&Xn(P,w.polygon.coordinates[0][w.currentVertexPosition-1]))return this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[w.polygon.id]});this.updateUIClasses({mouse:mt}),w.polygon.updateCoordinate("0."+w.currentVertexPosition,P.lngLat.lng,P.lngLat.lat),w.currentVertexPosition++,w.polygon.updateCoordinate("0."+w.currentVertexPosition,P.lngLat.lng,P.lngLat.lat)},clickOnVertex:function(w){return this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[w.polygon.id]})},onMouseMove:function(w,P){w.polygon.updateCoordinate("0."+w.currentVertexPosition,P.lngLat.lng,P.lngLat.lat),j(P)&&this.updateUIClasses({mouse:Ot})}};Xo.onTap=Xo.onClick=function(w,P){return j(P)?this.clickOnVertex(w,P):this.clickAnywhere(w,P)},Xo.onKeyUp=function(w,P){me(P)?(this.deleteFeature([w.polygon.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT)):Fe(P)&&this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[w.polygon.id]})},Xo.onStop=function(w){this.updateUIClasses({mouse:pt}),Ie(this),this.activateUIButton(),this.getFeature(w.polygon.id)!==void 0&&(w.polygon.removeCoordinate("0."+w.currentVertexPosition),w.polygon.isValid()?this.map.fire(Ye,{features:[w.polygon.toGeoJSON()]}):(this.deleteFeature([w.polygon.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT,{},{silent:!0})))},Xo.toDisplayFeatures=function(w,P,F){var le=P.properties.id===w.polygon.id;if(P.properties.active=le?nn:An,!le)return F(P);if(P.geometry.coordinates.length!==0){var ve=P.geometry.coordinates[0].length;if(!(ve<3)){if(P.properties.meta=Wn,F(st(w.polygon.id,P.geometry.coordinates[0][0],"0.0",!1)),ve>3){var fe=P.geometry.coordinates[0].length-3;F(st(w.polygon.id,P.geometry.coordinates[0][fe],"0."+fe,!1))}if(ve<=4){var _e=[[P.geometry.coordinates[0][0][0],P.geometry.coordinates[0][0][1]],[P.geometry.coordinates[0][1][0],P.geometry.coordinates[0][1][1]]];if(F({type:wr,properties:P.properties,geometry:{coordinates:_e,type:Ut}}),ve===3)return}return F(P)}}},Xo.onTrash=function(w){this.deleteFeature([w.polygon.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT)};var mo={onSetup:function(w){var P,F,le=(w=w||{}).featureId,ve="forward";if(le){if(!(P=this.getFeature(le)))throw new Error("Could not find a feature with the provided featureId");var fe=w.from;if(fe&&fe.type==="Feature"&&fe.geometry&&fe.geometry.type==="Point"&&(fe=fe.geometry),fe&&fe.type==="Point"&&fe.coordinates&&fe.coordinates.length===2&&(fe=fe.coordinates),!fe||!Array.isArray(fe))throw new Error("Please use the `from` property to indicate which point to continue the line from");var _e=P.coordinates.length-1;if(P.coordinates[_e][0]===fe[0]&&P.coordinates[_e][1]===fe[1])F=_e+1,P.addCoordinate.apply(P,[F].concat(P.coordinates[_e]));else{if(P.coordinates[0][0]!==fe[0]||P.coordinates[0][1]!==fe[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");ve="backwards",F=0,P.addCoordinate.apply(P,[F].concat(P.coordinates[0]))}}else P=this.newFeature({type:wr,properties:{},geometry:{type:Ut,coordinates:[]}}),F=0,this.addFeature(P);return this.clearSelectedFeatures(),Je(this),this.updateUIClasses({mouse:mt}),this.activateUIButton(er.LINE),this.setActionableState({trash:!0}),{line:P,currentVertexPosition:F,direction:ve}},clickAnywhere:function(w,P){if(w.currentVertexPosition>0&&Xn(P,w.line.coordinates[w.currentVertexPosition-1])||w.direction==="backwards"&&Xn(P,w.line.coordinates[w.currentVertexPosition+1]))return this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[w.line.id]});this.updateUIClasses({mouse:mt}),w.line.updateCoordinate(w.currentVertexPosition,P.lngLat.lng,P.lngLat.lat),w.direction==="forward"?(w.currentVertexPosition++,w.line.updateCoordinate(w.currentVertexPosition,P.lngLat.lng,P.lngLat.lat)):w.line.addCoordinate(0,P.lngLat.lng,P.lngLat.lat)},clickOnVertex:function(w){return this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[w.line.id]})},onMouseMove:function(w,P){w.line.updateCoordinate(w.currentVertexPosition,P.lngLat.lng,P.lngLat.lat),j(P)&&this.updateUIClasses({mouse:Ot})}};mo.onTap=mo.onClick=function(w,P){if(j(P))return this.clickOnVertex(w,P);this.clickAnywhere(w,P)},mo.onKeyUp=function(w,P){Fe(P)?this.changeMode(Vt.SIMPLE_SELECT,{featureIds:[w.line.id]}):me(P)&&(this.deleteFeature([w.line.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT))},mo.onStop=function(w){Ie(this),this.activateUIButton(),this.getFeature(w.line.id)!==void 0&&(w.line.removeCoordinate(""+w.currentVertexPosition),w.line.isValid()?this.map.fire(Ye,{features:[w.line.toGeoJSON()]}):(this.deleteFeature([w.line.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT,{},{silent:!0})))},mo.onTrash=function(w){this.deleteFeature([w.line.id],{silent:!0}),this.changeMode(Vt.SIMPLE_SELECT)},mo.toDisplayFeatures=function(w,P,F){var le=P.properties.id===w.line.id;if(P.properties.active=le?nn:An,!le)return F(P);P.geometry.coordinates.length<2||(P.properties.meta=Wn,F(st(w.line.id,P.geometry.coordinates[w.direction==="forward"?P.geometry.coordinates.length-2:1],""+(w.direction==="forward"?P.geometry.coordinates.length-2:1),!1)),F(P))};var tn={simple_select:It,direct_select:Xi,draw_point:Br,draw_polygon:Xo,draw_line_string:mo},Ms={defaultMode:Vt.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:tn,controls:{},userProperties:!1},ii={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},zn={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Ii(w,P){return w.map(function(F){return F.source?F:Ir(F,{id:F.id+"."+P,source:P==="hot"?be:De})})}var Nr=rs(function(w,P){var F="[object Arguments]",le="[object Map]",ve="[object Object]",fe="[object Set]",_e=/^\[object .+?Constructor\]$/,Ze=/^(?:0|[1-9]\d*)$/,Ve={};Ve["[object Float32Array]"]=Ve["[object Float64Array]"]=Ve["[object Int8Array]"]=Ve["[object Int16Array]"]=Ve["[object Int32Array]"]=Ve["[object Uint8Array]"]=Ve["[object Uint8ClampedArray]"]=Ve["[object Uint16Array]"]=Ve["[object Uint32Array]"]=!0,Ve[F]=Ve["[object Array]"]=Ve["[object ArrayBuffer]"]=Ve["[object Boolean]"]=Ve["[object DataView]"]=Ve["[object Date]"]=Ve["[object Error]"]=Ve["[object Function]"]=Ve[le]=Ve["[object Number]"]=Ve[ve]=Ve["[object RegExp]"]=Ve[fe]=Ve["[object String]"]=Ve["[object WeakMap]"]=!1;var ct=typeof Ic=="object"&&Ic&&Ic.Object===Object&&Ic,Ee=typeof self=="object"&&self&&self.Object===Object&&self,it=ct||Ee||Function("return this")(),ht=P&&!P.nodeType&&P,zt=ht&&w&&!w.nodeType&&w,Ft=zt&&zt.exports===ht,on=Ft&&ct.process,Re=function(){try{return on&&on.binding&&on.binding("util")}catch{}}(),yt=Re&&Re.isTypedArray;function Sr(de,ze){for(var et=-1,gt=de==null?0:de.length;++et<gt;)if(ze(de[et],et,de))return!0;return!1}function rr(de){var ze=-1,et=Array(de.size);return de.forEach(function(gt,Gr){et[++ze]=[Gr,gt]}),et}function kr(de){var ze=-1,et=Array(de.size);return de.forEach(function(gt){et[++ze]=gt}),et}var St,Mi,li,ar=Array.prototype,yi=Function.prototype,jr=Object.prototype,rn=it["__core-js_shared__"],Da=yi.toString,vo=jr.hasOwnProperty,Ol=(St=/[^.]+$/.exec(rn&&rn.keys&&rn.keys.IE_PROTO||""))?"Symbol(src)_1."+St:"",Rl=jr.toString,$u=RegExp("^"+Da.call(vo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),au=Ft?it.Buffer:void 0,is=it.Symbol,su=it.Uint8Array,Xu=jr.propertyIsEnumerable,Fl=ar.splice,Oa=is?is.toStringTag:void 0,os=Object.getOwnPropertySymbols,zs=au?au.isBuffer:void 0,Bl=(Mi=Object.keys,li=Object,function(de){return Mi(li(de))}),En=Yi(it,"DataView"),Ra=Yi(it,"Map"),Mo=Yi(it,"Promise"),zo=Yi(it,"Set"),Ko=Yi(it,"WeakMap"),go=Yi(Object,"create"),pa=Oo(En),Fa=Oo(Ra),Ba=Oo(Mo),ha=Oo(zo),Ul=Oo(Ko),Ku=is?is.prototype:void 0,br=Ku?Ku.valueOf:void 0;function Ua(de){var ze=-1,et=de==null?0:de.length;for(this.clear();++ze<et;){var gt=de[ze];this.set(gt[0],gt[1])}}function Ki(de){var ze=-1,et=de==null?0:de.length;for(this.clear();++ze<et;){var gt=de[ze];this.set(gt[0],gt[1])}}function fa(de){var ze=-1,et=de==null?0:de.length;for(this.clear();++ze<et;){var gt=de[ze];this.set(gt[0],gt[1])}}function Ls(de){var ze=-1,et=de==null?0:de.length;for(this.__data__=new fa;++ze<et;)this.add(de[ze])}function Ho(de){var ze=this.__data__=new Ki(de);this.size=ze.size}function Nl(de,ze){var et=Ds(de),gt=!et&&as(de),Gr=!et&&!gt&&Qu(de),pr=!et&&!gt&&!Gr&&Rs(de),an=et||gt||Gr||pr,Wr=an?function(vn,zi){for(var Jo=-1,Un=Array(vn);++Jo<vn;)Un[Jo]=zi(Jo);return Un}(de.length,String):[],ci=Wr.length;for(var cn in de)!ze&&!vo.call(de,cn)||an&&(cn=="length"||Gr&&(cn=="offset"||cn=="parent")||pr&&(cn=="buffer"||cn=="byteLength"||cn=="byteOffset")||Dr(cn,ci))||Wr.push(cn);return Wr}function Lo(de,ze){for(var et=de.length;et--;)if(ql(de[et][0],ze))return et;return-1}function Hi(de){return de==null?de===void 0?"[object Undefined]":"[object Null]":Oa&&Oa in Object(de)?function(ze){var et=vo.call(ze,Oa),gt=ze[Oa];try{ze[Oa]=void 0;var Gr=!0}catch{}var pr=Rl.call(ze);return Gr&&(et?ze[Oa]=gt:delete ze[Oa]),pr}(de):function(ze){return Rl.call(ze)}(de)}function da(de){return Yo(de)&&Hi(de)==F}function Hu(de,ze,et,gt,Gr){return de===ze||(de==null||ze==null||!Yo(de)&&!Yo(ze)?de!=de&&ze!=ze:function(pr,an,Wr,ci,cn,vn){var zi=Ds(pr),Jo=Ds(an),Un=zi?"[object Array]":Ji(pr),_o=Jo?"[object Array]":Ji(an),ja=(Un=Un==F?ve:Un)==ve,Bs=(_o=_o==F?ve:_o)==ve,Qo=Un==_o;if(Qo&&Qu(pr)){if(!Qu(an))return!1;zi=!0,ja=!1}if(Qo&&!ja)return vn||(vn=new Ho),zi||Rs(pr)?ma(pr,an,Wr,ci,cn,vn):function(Ur,yr,Ar,xo,ea,Ln,qt){switch(Ar){case"[object DataView]":if(Ur.byteLength!=yr.byteLength||Ur.byteOffset!=yr.byteOffset)return!1;Ur=Ur.buffer,yr=yr.buffer;case"[object ArrayBuffer]":return!(Ur.byteLength!=yr.byteLength||!Ln(new su(Ur),new su(yr)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ql(+Ur,+yr);case"[object Error]":return Ur.name==yr.name&&Ur.message==yr.message;case"[object RegExp]":case"[object String]":return Ur==yr+"";case le:var mr=rr;case fe:var Kn=1&xo;if(mr||(mr=kr),Ur.size!=yr.size&&!Kn)return!1;var ya=qt.get(Ur);if(ya)return ya==yr;xo|=2,qt.set(Ur,yr);var bo=ma(mr(Ur),mr(yr),xo,ea,Ln,qt);return qt.delete(Ur),bo;case"[object Symbol]":if(br)return br.call(Ur)==br.call(yr)}return!1}(pr,an,Un,Wr,ci,cn,vn);if(!(1&Wr)){var Va=ja&&vo.call(pr,"__wrapped__"),uu=Bs&&vo.call(an,"__wrapped__");if(Va||uu){var tl=Va?pr.value():pr,Us=uu?an.value():an;return vn||(vn=new Ho),cn(tl,Us,Wr,ci,vn)}}return Qo?(vn||(vn=new Ho),function(Ur,yr,Ar,xo,ea,Ln){var qt=1&Ar,mr=Ju(Ur),Kn=mr.length,ya=Ju(yr).length;if(Kn!=ya&&!qt)return!1;for(var bo=Kn;bo--;){var Qi=mr[bo];if(!(qt?Qi in yr:vo.call(yr,Qi)))return!1}var Zl=Ln.get(Ur);if(Zl&&Ln.get(yr))return Zl==yr;var lu=!0;Ln.set(Ur,yr),Ln.set(yr,Ur);for(var qa=qt;++bo<Kn;){Qi=mr[bo];var va=Ur[Qi],eo=yr[Qi];if(xo)var pn=qt?xo(eo,va,Qi,yr,Ur,Ln):xo(va,eo,Qi,Ur,yr,Ln);if(!(pn===void 0?va===eo||ea(va,eo,Ar,xo,Ln):pn)){lu=!1;break}qa||(qa=Qi=="constructor")}if(lu&&!qa){var ga=Ur.constructor,Ns=yr.constructor;ga==Ns||!("constructor"in Ur)||!("constructor"in yr)||typeof ga=="function"&&ga instanceof ga&&typeof Ns=="function"&&Ns instanceof Ns||(lu=!1)}return Ln.delete(Ur),Ln.delete(yr),lu}(pr,an,Wr,ci,cn,vn)):!1}(de,ze,et,gt,Hu,Gr))}function jl(de){return!(!Na(de)||function(ze){return!!Ol&&Ol in ze}(de))&&(el(de)?$u:_e).test(Oo(de))}function Yu(de){if(et=(ze=de)&&ze.constructor,gt=typeof et=="function"&&et.prototype||jr,ze!==gt)return Bl(de);var ze,et,gt,Gr=[];for(var pr in Object(de))vo.call(de,pr)&&pr!="constructor"&&Gr.push(pr);return Gr}function ma(de,ze,et,gt,Gr,pr){var an=1&et,Wr=de.length,ci=ze.length;if(Wr!=ci&&!(an&&ci>Wr))return!1;var cn=pr.get(de);if(cn&&pr.get(ze))return cn==ze;var vn=-1,zi=!0,Jo=2&et?new Ls:void 0;for(pr.set(de,ze),pr.set(ze,de);++vn<Wr;){var Un=de[vn],_o=ze[vn];if(gt)var ja=an?gt(_o,Un,vn,ze,de,pr):gt(Un,_o,vn,de,ze,pr);if(ja!==void 0){if(ja)continue;zi=!1;break}if(Jo){if(!Sr(ze,function(Bs,Qo){if(Va=Qo,!Jo.has(Va)&&(Un===Bs||Gr(Un,Bs,et,gt,pr)))return Jo.push(Qo);var Va})){zi=!1;break}}else if(Un!==_o&&!Gr(Un,_o,et,gt,pr)){zi=!1;break}}return pr.delete(de),pr.delete(ze),zi}function Ju(de){return function(ze,et,gt){var Gr=et(ze);return Ds(ze)?Gr:function(pr,an){for(var Wr=-1,ci=an.length,cn=pr.length;++Wr<ci;)pr[cn+Wr]=an[Wr];return pr}(Gr,gt(ze))}(de,Fs,Vl)}function Do(de,ze){var et,gt,Gr=de.__data__;return((gt=typeof(et=ze))=="string"||gt=="number"||gt=="symbol"||gt=="boolean"?et!=="__proto__":et===null)?Gr[typeof ze=="string"?"string":"hash"]:Gr.map}function Yi(de,ze){var et=function(gt,Gr){return gt==null?void 0:gt[Gr]}(de,ze);return jl(et)?et:void 0}Ua.prototype.clear=function(){this.__data__=go?go(null):{},this.size=0},Ua.prototype.delete=function(de){var ze=this.has(de)&&delete this.__data__[de];return this.size-=ze?1:0,ze},Ua.prototype.get=function(de){var ze=this.__data__;if(go){var et=ze[de];return et==="__lodash_hash_undefined__"?void 0:et}return vo.call(ze,de)?ze[de]:void 0},Ua.prototype.has=function(de){var ze=this.__data__;return go?ze[de]!==void 0:vo.call(ze,de)},Ua.prototype.set=function(de,ze){var et=this.__data__;return this.size+=this.has(de)?0:1,et[de]=go&&ze===void 0?"__lodash_hash_undefined__":ze,this},Ki.prototype.clear=function(){this.__data__=[],this.size=0},Ki.prototype.delete=function(de){var ze=this.__data__,et=Lo(ze,de);return!(et<0)&&(et==ze.length-1?ze.pop():Fl.call(ze,et,1),--this.size,!0)},Ki.prototype.get=function(de){var ze=this.__data__,et=Lo(ze,de);return et<0?void 0:ze[et][1]},Ki.prototype.has=function(de){return Lo(this.__data__,de)>-1},Ki.prototype.set=function(de,ze){var et=this.__data__,gt=Lo(et,de);return gt<0?(++this.size,et.push([de,ze])):et[gt][1]=ze,this},fa.prototype.clear=function(){this.size=0,this.__data__={hash:new Ua,map:new(Ra||Ki),string:new Ua}},fa.prototype.delete=function(de){var ze=Do(this,de).delete(de);return this.size-=ze?1:0,ze},fa.prototype.get=function(de){return Do(this,de).get(de)},fa.prototype.has=function(de){return Do(this,de).has(de)},fa.prototype.set=function(de,ze){var et=Do(this,de),gt=et.size;return et.set(de,ze),this.size+=et.size==gt?0:1,this},Ls.prototype.add=Ls.prototype.push=function(de){return this.__data__.set(de,"__lodash_hash_undefined__"),this},Ls.prototype.has=function(de){return this.__data__.has(de)},Ho.prototype.clear=function(){this.__data__=new Ki,this.size=0},Ho.prototype.delete=function(de){var ze=this.__data__,et=ze.delete(de);return this.size=ze.size,et},Ho.prototype.get=function(de){return this.__data__.get(de)},Ho.prototype.has=function(de){return this.__data__.has(de)},Ho.prototype.set=function(de,ze){var et=this.__data__;if(et instanceof Ki){var gt=et.__data__;if(!Ra||gt.length<199)return gt.push([de,ze]),this.size=++et.size,this;et=this.__data__=new fa(gt)}return et.set(de,ze),this.size=et.size,this};var Vl=os?function(de){return de==null?[]:(de=Object(de),function(ze,et){for(var gt=-1,Gr=ze==null?0:ze.length,pr=0,an=[];++gt<Gr;){var Wr=ze[gt];et(Wr,gt,ze)&&(an[pr++]=Wr)}return an}(os(de),function(ze){return Xu.call(de,ze)}))}:function(){return[]},Ji=Hi;function Dr(de,ze){return!!(ze=ze==null?9007199254740991:ze)&&(typeof de=="number"||Ze.test(de))&&de>-1&&de%1==0&&de<ze}function Oo(de){if(de!=null){try{return Da.call(de)}catch{}try{return de+""}catch{}}return""}function ql(de,ze){return de===ze||de!=de&&ze!=ze}(En&&Ji(new En(new ArrayBuffer(1)))!="[object DataView]"||Ra&&Ji(new Ra)!=le||Mo&&Ji(Mo.resolve())!="[object Promise]"||zo&&Ji(new zo)!=fe||Ko&&Ji(new Ko)!="[object WeakMap]")&&(Ji=function(de){var ze=Hi(de),et=ze==ve?de.constructor:void 0,gt=et?Oo(et):"";if(gt)switch(gt){case pa:return"[object DataView]";case Fa:return le;case Ba:return"[object Promise]";case ha:return fe;case Ul:return"[object WeakMap]"}return ze});var as=da(function(){return arguments}())?da:function(de){return Yo(de)&&vo.call(de,"callee")&&!Xu.call(de,"callee")},Ds=Array.isArray,Qu=zs||function(){return!1};function el(de){if(!Na(de))return!1;var ze=Hi(de);return ze=="[object Function]"||ze=="[object GeneratorFunction]"||ze=="[object AsyncFunction]"||ze=="[object Proxy]"}function Os(de){return typeof de=="number"&&de>-1&&de%1==0&&de<=9007199254740991}function Na(de){var ze=typeof de;return de!=null&&(ze=="object"||ze=="function")}function Yo(de){return de!=null&&typeof de=="object"}var Rs=yt?function(de){return function(ze){return de(ze)}}(yt):function(de){return Yo(de)&&Os(de.length)&&!!Ve[Hi(de)]};function Fs(de){return(ze=de)!=null&&Os(ze.length)&&!el(ze)?Nl(de):Yu(de);var ze}w.exports=function(de,ze){return Hu(de,ze)}}),yo={Polygon:$n,LineString:Wi,Point:Gi,MultiPolygon:Fn,MultiLineString:Fn,MultiPoint:Fn};function ki(w,P){return P.modes=Vt,P.getFeatureIdsAt=function(F){return ko.click({point:F},null,w).map(function(le){return le.properties.id})},P.getSelectedIds=function(){return w.store.getSelectedIds()},P.getSelected=function(){return{type:qr,features:w.store.getSelectedIds().map(function(F){return w.store.get(F)}).map(function(F){return F.toGeoJSON()})}},P.getSelectedPoints=function(){return{type:qr,features:w.store.getSelectedCoordinates().map(function(F){return{type:wr,properties:{},geometry:{type:ir,coordinates:F.coordinates}}})}},P.set=function(F){if(F.type===void 0||F.type!==qr||!Array.isArray(F.features))throw new Error("Invalid FeatureCollection");var le=w.store.createRenderBatch(),ve=w.store.getAllIds().slice(),fe=P.add(F),_e=new ln(fe);return(ve=ve.filter(function(Ze){return!_e.has(Ze)})).length&&P.delete(ve),le(),fe},P.add=function(F){var le=JSON.parse(JSON.stringify(Xe(F))).features.map(function(ve){if(ve.id=ve.id||za(),ve.geometry===null)throw new Error("Invalid geometry: null");if(w.store.get(ve.id)===void 0||w.store.get(ve.id).type!==ve.geometry.type){var fe=yo[ve.geometry.type];if(fe===void 0)throw new Error("Invalid geometry type: "+ve.geometry.type+".");var _e=new fe(w,ve);w.store.add(_e)}else{var Ze=w.store.get(ve.id);Ze.properties=ve.properties,Nr(Ze.getCoordinates(),ve.geometry.coordinates)||Ze.incomingCoords(ve.geometry.coordinates)}return ve.id});return w.store.render(),le},P.get=function(F){var le=w.store.get(F);if(le)return le.toGeoJSON()},P.getAll=function(){return{type:qr,features:w.store.getAll().map(function(F){return F.toGeoJSON()})}},P.delete=function(F){return w.store.delete(F,{silent:!0}),P.getMode()!==Vt.DIRECT_SELECT||w.store.getSelectedIds().length?w.store.render():w.events.changeMode(Vt.SIMPLE_SELECT,void 0,{silent:!0}),P},P.deleteAll=function(){return w.store.delete(w.store.getAllIds(),{silent:!0}),P.getMode()===Vt.DIRECT_SELECT?w.events.changeMode(Vt.SIMPLE_SELECT,void 0,{silent:!0}):w.store.render(),P},P.changeMode=function(F,le){return le===void 0&&(le={}),F===Vt.SIMPLE_SELECT&&P.getMode()===Vt.SIMPLE_SELECT?(ve=le.featureIds||[],fe=w.store.getSelectedIds(),ve.length===fe.length&&JSON.stringify(ve.map(function(_e){return _e}).sort())===JSON.stringify(fe.map(function(_e){return _e}).sort())||(w.store.setSelected(le.featureIds,{silent:!0}),w.store.render()),P):(F===Vt.DIRECT_SELECT&&P.getMode()===Vt.DIRECT_SELECT&&le.featureId===w.store.getSelectedIds()[0]||w.events.changeMode(F,le,{silent:!0}),P);var ve,fe},P.getMode=function(){return w.events.getMode()},P.trash=function(){return w.events.trash({silent:!0}),P},P.combineFeatures=function(){return w.events.combineFeatures({silent:!0}),P},P.uncombineFeatures=function(){return w.events.uncombineFeatures({silent:!0}),P},P.setFeatureProperty=function(F,le,ve){return w.store.setFeatureProperty(F,le,ve),P},P}var Dl=function(w,P){var F={options:w=function(ve){ve===void 0&&(ve={});var fe=Ir(ve);return ve.controls||(fe.controls={}),ve.displayControlsDefault===!1?fe.controls=Ir(zn,ve.controls):fe.controls=Ir(ii,ve.controls),(fe=Ir(Ms,fe)).styles=Ii(fe.styles,"cold").concat(Ii(fe.styles,"hot")),fe}(w)};P=ki(F,P),F.api=P;var le=B(F);return P.onAdd=le.onAdd,P.onRemove=le.onRemove,P.types=er,P.options=w,P};function Ai(w){Dl(w,this)}return Ai.modes=tn,Ai})})(y0);var IP=y0.exports,v0={exports:{}};(function(r,i){(function(u,f){r.exports=f()})(Ic,function(){var u,f,y;function S(l,k){if(!u)u=k;else if(!f)f=k;else{var M="var sharedChunk = {}; ("+u+")(sharedChunk); ("+f+")(sharedChunk);",q={};u(q),y=k(q),typeof window!="undefined"&&(y.workerUrl=window.URL.createObjectURL(new Blob([M],{type:"text/javascript"})))}}return S(["exports"],function(l){function k(e,t){return e(t={exports:{}},t.exports),t.exports}var M=q;function q(e,t,n,c){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(c-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=c,this.p2x=n,this.p2y=c}q.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},q.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},q.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},q.prototype.solveCurveX=function(e,t){var n,c,h,d,v;for(t===void 0&&(t=1e-6),h=e,v=0;v<8;v++){if(d=this.sampleCurveX(h)-e,Math.abs(d)<t)return h;var b=this.sampleCurveDerivativeX(h);if(Math.abs(b)<1e-6)break;h-=d/b}if((h=e)<(n=0))return n;if(h>(c=1))return c;for(;n<c;){if(d=this.sampleCurveX(h),Math.abs(d-e)<t)return h;e>d?n=h:c=h,h=.5*(c-n)+n}return h},q.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var ee=ke;function ke(e,t){this.x=e,this.y=t}ke.prototype={clone:function(){return new ke(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),c=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=c,this},_rotateAround:function(e,t){var n=Math.cos(e),c=Math.sin(e),h=t.y+c*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-c*(this.y-t.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ke.convert=function(e){return e instanceof ke?e:Array.isArray(e)?new ke(e[0],e[1]):e};var X=typeof self!="undefined"?self:{},Se=Math.pow(2,53)-1;function Me(e,t,n,c){var h=new M(e,t,n,c);return function(d){return h.solve(d)}}var Le=Me(.25,.1,.25,1);function ue(e,t,n){return Math.min(n,Math.max(t,e))}function re(e,t,n){var c=n-t,h=((e-t)%c+c)%c+t;return h===t?n:h}function ae(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var c=0,h=t;c<h.length;c+=1){var d=h[c];for(var v in d)e[v]=d[v]}return e}var be=1;function De(){return be++}function mt(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function We(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Tt(e,t){e.forEach(function(n){t[n]&&(t[n]=t[n].bind(t))})}function Ot(e,t){return e.indexOf(t,e.length-t.length)!==-1}function pt(e,t,n){var c={};for(var h in e)c[h]=t.call(n||this,e[h],h,e);return c}function er(e,t,n){var c={};for(var h in e)t.call(n||this,e[h],h,e)&&(c[h]=e[h]);return c}function wr(e){return Array.isArray(e)?e.map(wr):typeof e=="object"&&e?pt(e,wr):e}var Fr={};function Ut(e){Fr[e]||(typeof console!="undefined"&&console.warn(e),Fr[e]=!0)}function ir(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function qr(e){for(var t=0,n=0,c=e.length,h=c-1,d=void 0,v=void 0;n<c;h=n++)t+=((v=e[h]).x-(d=e[n]).x)*(d.y+v.y);return t}function zr(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function ri(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(c,h,d,v){var b=d||v;return t[h]=!b||b.toLowerCase(),""}),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var kn=null;function ni(e){if(kn==null){var t=e.navigator?e.navigator.userAgent:null;kn=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return kn}function Vt(e){try{var t=X[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var Ye,At,$t,Lr,Zr=X.performance&&X.performance.now?X.performance.now.bind(X.performance):Date.now.bind(Date),fo=X.requestAnimationFrame||X.mozRequestAnimationFrame||X.webkitRequestAnimationFrame||X.msRequestAnimationFrame,Qr=X.cancelAnimationFrame||X.mozCancelAnimationFrame||X.webkitCancelAnimationFrame||X.msCancelAnimationFrame,si={now:Zr,frame:function(e){var t=fo(e);return{cancel:function(){return Qr(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var n=X.document.createElement("canvas"),c=n.getContext("2d");if(!c)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,c.drawImage(e,0,0,e.width,e.height),c.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return Ye||(Ye=X.document.createElement("a")),Ye.href=e,Ye.href},hardwareConcurrency:X.navigator&&X.navigator.hardwareConcurrency||4,get devicePixelRatio(){return X.devicePixelRatio},get prefersReducedMotion(){return!!X.matchMedia&&(At==null&&(At=X.matchMedia("(prefers-reduced-motion: reduce)")),At.matches)}},sr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Io={supported:!1,testSupport:function(e){!ts&&Lr&&(Wn?Kt(e):$t=e)}},ts=!1,Wn=!1;function Kt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Lr),e.isContextLost())return;Io.supported=!0}catch{}e.deleteTexture(t),ts=!0}X.document&&((Lr=X.document.createElement("img")).onload=function(){$t&&Kt($t),$t=null,Wn=!0},Lr.onerror=function(){ts=!0,$t=null},Lr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Vi="01",nn=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function An(e){return e.indexOf("mapbox:")===0}nn.prototype._createSkuToken=function(){var e=function(){for(var t="",n=0;n<10;n++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Vi,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},nn.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},nn.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},nn.prototype.normalizeStyleURL=function(e,t){if(!An(e))return e;var n=ln(e);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},nn.prototype.normalizeGlyphsURL=function(e,t){if(!An(e))return e;var n=ln(e);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},nn.prototype.normalizeSourceURL=function(e,t){if(!An(e))return e;var n=ln(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)},nn.prototype.normalizeSpriteURL=function(e,t,n,c){var h=ln(e);return An(e)?(h.path="/styles/v1"+h.path+"/sprite"+t+n,this._makeAPIURL(h,this._customAccessToken||c)):(h.path+=""+t+n,Ma(h))},nn.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!An(e))return e;var n=ln(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(si.devicePixelRatio>=2||t===512?"@2x":"")+(Io.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var c=this._customAccessToken||function(h){for(var d=0,v=h;d<v.length;d+=1){var b=v[d].match(/^access_token=(.*)$/);if(b)return b[1]}return null}(n.params)||sr.ACCESS_TOKEN;return sr.REQUIRE_ACCESS_TOKEN&&c&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,c)},nn.prototype.canonicalizeTileURL=function(e,t){var n=ln(e);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return e;var c="mapbox://tiles/";c+=n.path.replace("/v4/","");var h=n.params;return t&&(h=h.filter(function(d){return!d.match(/^access_token=/)})),h.length&&(c+="?"+h.join("&")),c},nn.prototype.canonicalizeTileset=function(e,t){for(var n=!!t&&An(t),c=[],h=0,d=e.tiles||[];h<d.length;h+=1){var v=d[h];qi(v)?c.push(this.canonicalizeTileURL(v,n)):c.push(v)}return c},nn.prototype._makeAPIURL=function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",c=ln(sr.API_URL);if(e.protocol=c.protocol,e.authority=c.authority,e.protocol==="http"){var h=e.params.indexOf("secure");h>=0&&e.params.splice(h,1)}if(c.path!=="/"&&(e.path=""+c.path+e.path),!sr.REQUIRE_ACCESS_TOKEN)return Ma(e);if(!(t=t||sr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),Ma(e)};var Wu=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function qi(e){return Wu.test(e)}var Ts=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ln(e){var t=e.match(Ts);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Ma(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function ko(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(X.atob(t[1]).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ti=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ti.prototype.getStorageKey=function(e){var t,n=ko(sr.ACCESS_TOKEN);return t=n&&n.u?X.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,function(c,h){return String.fromCharCode(Number("0x"+h))})):sr.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},Ti.prototype.fetchEventData=function(){var e=Vt("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var c=X.localStorage.getItem(t);c&&(this.eventData=JSON.parse(c));var h=X.localStorage.getItem(n);h&&(this.anonId=h)}catch{Ut("Unable to read from LocalStorage")}},Ti.prototype.saveEventData=function(){var e=Vt("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{X.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&X.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Ut("Unable to write to LocalStorage")}},Ti.prototype.processRequests=function(e){},Ti.prototype.postEvent=function(e,t,n,c){var h=this;if(sr.EVENTS_URL){var d=ln(sr.EVENTS_URL);d.params.push("access_token="+(c||sr.ACCESS_TOKEN||""));var v={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:Vi,userId:this.anonId},b=t?ae(v,t):v,C={url:Ma(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=Ir(C,function(T){h.pendingRequest=null,n(T),h.saveEventData(),h.processRequests(c)})}},Ti.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var mi,ca,Zi=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(n,c,h,d){this.skuToken=h,(sr.EVENTS_URL&&d||sr.ACCESS_TOKEN&&Array.isArray(n)&&n.some(function(v){return An(v)||qi(v)}))&&this.queueRequest({id:c,timestamp:Date.now()},d)},t.prototype.processRequests=function(n){var c=this;if(!this.pendingRequest&&this.queue.length!==0){var h=this.queue.shift(),d=h.id,v=h.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),We(this.anonId)||(this.anonId=mt()),this.postEvent(v,{skuToken:this.skuToken},function(b){b||d&&(c.success[d]=!0)},n))}},t}(Ti),Is=new(function(e){function t(n){e.call(this,"appUserTurnstile"),this._customAccessToken=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(n,c){sr.EVENTS_URL&&sr.ACCESS_TOKEN&&Array.isArray(n)&&n.some(function(h){return An(h)||qi(h)})&&this.queueRequest(Date.now(),c)},t.prototype.processRequests=function(n){var c=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var h=ko(sr.ACCESS_TOKEN),d=h?h.u:sr.ACCESS_TOKEN,v=d!==this.eventData.tokenU;We(this.anonId)||(this.anonId=mt(),v=!0);var b=this.queue.shift();if(this.eventData.lastSuccess){var C=new Date(this.eventData.lastSuccess),T=new Date(b),A=(b-this.eventData.lastSuccess)/864e5;v=v||A>=1||A<-1||C.getDate()!==T.getDate()}else v=!0;if(!v)return this.processRequests();this.postEvent(b,{"enabled.telemetry":!1},function(z){z||(c.eventData.lastSuccess=b,c.eventData.tokenU=d)},n)}},t}(Ti)),rs=Is.postTurnstileEvent.bind(Is),za=new Zi,Mn=za.postMapLoadEvent.bind(za),Gi=500,Wi=50;function $n(){X.caches&&!mi&&(mi=X.caches.open("mapbox-tiles"))}function ks(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var Ao,Fn=1/0;function Ht(){return Ao==null&&(Ao=X.OffscreenCanvas&&new X.OffscreenCanvas(1,1).getContext("2d")&&typeof X.createImageBitmap=="function"),Ao}var As={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(As);var ou=function(e){function t(n,c,h){c===401&&qi(h)&&(n+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,n),this.status=c,this.url=h,this.name=this.constructor.name,this.message=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),La=zr()?function(){return self.worker&&self.worker.referrer}:function(){return(X.location.protocol==="blob:"?X.parent:X).location.href},$i,$o,Tr=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(La())&&!/^\w+:/.test(n))){if(X.fetch&&X.Request&&X.AbortController&&X.Request.prototype.hasOwnProperty("signal"))return function(c,h){var d,v=new X.AbortController,b=new X.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:La(),signal:v.signal}),C=!1,T=!1,A=(d=b.url).indexOf("sku=")>0&&qi(d);c.type==="json"&&b.headers.set("Accept","application/json");var z=function(U,$,H){if(!T){if(U&&U.message!=="SecurityError"&&Ut(U),$&&H)return R($);var oe=Date.now();X.fetch(b).then(function(te){if(te.ok){var he=A?te.clone():null;return R(te,he,oe)}return h(new ou(te.statusText,te.status,c.url))}).catch(function(te){te.code!==20&&h(new Error(te.message))})}},R=function(U,$,H){(c.type==="arrayBuffer"?U.arrayBuffer():c.type==="json"?U.json():U.text()).then(function(oe){T||($&&H&&function(te,he,ge){if($n(),mi){var xe={status:he.status,statusText:he.statusText,headers:new X.Headers};he.headers.forEach(function(Oe,je){return xe.headers.set(je,Oe)});var Ce=ri(he.headers.get("Cache-Control")||"");Ce["no-store"]||(Ce["max-age"]&&xe.headers.set("Expires",new Date(ge+1e3*Ce["max-age"]).toUTCString()),new Date(xe.headers.get("Expires")).getTime()-ge<42e4||function(Oe,je){if(ca===void 0)try{new Response(new ReadableStream),ca=!0}catch{ca=!1}ca?je(Oe.body):Oe.blob().then(je)}(he,function(Oe){var je=new X.Response(Oe,xe);$n(),mi&&mi.then(function($e){return $e.put(ks(te.url),je)}).catch(function($e){return Ut($e.message)})}))}}(b,$,H),C=!0,h(null,oe,U.headers.get("Cache-Control"),U.headers.get("Expires")))}).catch(function(oe){T||h(new Error(oe.message))})};return A?function(U,$){if($n(),!mi)return $(null);var H=ks(U.url);mi.then(function(oe){oe.match(H).then(function(te){var he=function(ge){if(!ge)return!1;var xe=new Date(ge.headers.get("Expires")||0),Ce=ri(ge.headers.get("Cache-Control")||"");return xe>Date.now()&&!Ce["no-cache"]}(te);oe.delete(H),he&&oe.put(H,te.clone()),$(null,te,he)}).catch($)}).catch($)}(b,z):z(null,null),{cancel:function(){T=!0,C||v.abort()}}}(e,t);if(zr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(c,h){var d=new X.XMLHttpRequest;for(var v in d.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(d.responseType="arraybuffer"),c.headers)d.setRequestHeader(v,c.headers[v]);return c.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=c.credentials==="include",d.onerror=function(){h(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var b=d.response;if(c.type==="json")try{b=JSON.parse(d.response)}catch(C){return h(C)}h(null,b,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else h(new ou(d.statusText,d.status,c.url))},d.send(c.body),{cancel:function(){return d.abort()}}}(e,t)},ns=function(e,t){return Tr(ae(e,{type:"arrayBuffer"}),t)},Ir=function(e,t){return Tr(ae(e,{method:"POST"}),t)},L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";$i=[],$o=0;var O=function(e,t){if(Io.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),$o>=sr.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return $i.push(n),n}$o++;var c=!1,h=function(){if(!c)for(c=!0,$o--;$i.length&&$o<sr.MAX_PARALLEL_IMAGE_REQUESTS;){var v=$i.shift();v.cancelled||(v.cancel=O(v.requestParameters,v.callback).cancel)}},d=ns(e,function(v,b,C,T){h(),v?t(v):b&&(Ht()?function(A,z){var R=new X.Blob([new Uint8Array(A)],{type:"image/png"});X.createImageBitmap(R).then(function(U){z(null,U)}).catch(function(U){z(new Error("Could not load image because of "+U.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(b,t):function(A,z,R,U){var $=new X.Image,H=X.URL;$.onload=function(){z(null,$),H.revokeObjectURL($.src),$.onload=null,X.requestAnimationFrame(function(){$.src=L})},$.onerror=function(){return z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var oe=new X.Blob([new Uint8Array(A)],{type:"image/png"});$.cacheControl=R,$.expires=U,$.src=A.byteLength?H.createObjectURL(oe):L}(b,t,C,T))});return{cancel:function(){d.cancel(),h()}}};function B(e,t,n){n[e]&&n[e].indexOf(t)!==-1||(n[e]=n[e]||[],n[e].push(t))}function G(e,t,n){if(n&&n[e]){var c=n[e].indexOf(t);c!==-1&&n[e].splice(c,1)}}var K=function(e,t){t===void 0&&(t={}),ae(this,t),this.type=e},se=function(e){function t(n,c){c===void 0&&(c={}),e.call(this,"error",ae({error:n},c))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(K),pe=function(){};pe.prototype.on=function(e,t){return this._listeners=this._listeners||{},B(e,t,this._listeners),this},pe.prototype.off=function(e,t){return G(e,t,this._listeners),G(e,t,this._oneTimeListeners),this},pe.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},B(e,t,this._oneTimeListeners),this},pe.prototype.fire=function(e,t){typeof e=="string"&&(e=new K(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;for(var c=0,h=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];c<h.length;c+=1)h[c].call(this,e);for(var d=0,v=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];d<v.length;d+=1){var b=v[d];G(n,b,this._oneTimeListeners),b.call(this,e)}var C=this._eventedParent;C&&(ae(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(e))}else e instanceof se&&console.error(e.error);return this},pe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},pe.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var j={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Q=function(e,t,n,c){this.message=(e?e+": ":"")+n,c&&(this.identifier=c),t!=null&&t.__line__&&(this.line=t.__line__)};function me(e){var t=e.value;return t?[new Q(e.key,t,"constants have been deprecated as of v8")]:[]}function Fe(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var c=0,h=t;c<h.length;c+=1){var d=h[c];for(var v in d)e[v]=d[v]}return e}function Ne(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Pe(e){if(Array.isArray(e))return e.map(Pe);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=Pe(e[n]);return t}return Ne(e)}var Ue=function(e){function t(n,c){e.call(this,c),this.message=c,this.key=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),st=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var n=0,c=t;n<c.length;n+=1){var h=c[n];this.bindings[h[0]]=h[1]}};st.prototype.concat=function(e){return new st(this,e)},st.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},st.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var nt={kind:"null"},Ie={kind:"number"},Je={kind:"string"},Xe={kind:"boolean"},Ke={kind:"color"},jt={kind:"object"},Qe={kind:"value"},tr={kind:"collator"},Cr={kind:"formatted"},Mt={kind:"resolvedImage"};function lr(e,t){return{kind:"array",itemType:e,N:t}}function or(e){if(e.kind==="array"){var t=or(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var Bn=[nt,Ie,Je,Xe,Ke,Cr,jt,lr(Qe),Mt];function dr(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!dr(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var n=0,c=Bn;n<c.length;n+=1)if(!dr(c[n],t))return null}}return"Expected "+or(e)+" but found "+or(t)+" instead."}function en(e,t){return t.some(function(n){return n.kind===e.kind})}function xr(e,t){return t.some(function(n){return n==="null"?e===null:n==="array"?Array.isArray(e):n==="object"?e&&!Array.isArray(e)&&typeof e=="object":n===typeof e})}var It=k(function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function c(b){return(b=Math.round(b))<0?0:b>255?255:b}function h(b){return c(b[b.length-1]==="%"?parseFloat(b)/100*255:parseInt(b))}function d(b){return(C=b[b.length-1]==="%"?parseFloat(b)/100:parseFloat(b))<0?0:C>1?1:C;var C}function v(b,C,T){return T<0?T+=1:T>1&&(T-=1),6*T<1?b+(C-b)*T*6:2*T<1?C:3*T<2?b+(C-b)*(2/3-T)*6:b}try{t.parseCSSColor=function(b){var C,T=b.replace(/ /g,"").toLowerCase();if(T in n)return n[T].slice();if(T[0]==="#")return T.length===4?(C=parseInt(T.substr(1),16))>=0&&C<=4095?[(3840&C)>>4|(3840&C)>>8,240&C|(240&C)>>4,15&C|(15&C)<<4,1]:null:T.length===7&&(C=parseInt(T.substr(1),16))>=0&&C<=16777215?[(16711680&C)>>16,(65280&C)>>8,255&C,1]:null;var A=T.indexOf("("),z=T.indexOf(")");if(A!==-1&&z+1===T.length){var R=T.substr(0,A),U=T.substr(A+1,z-(A+1)).split(","),$=1;switch(R){case"rgba":if(U.length!==4)return null;$=d(U.pop());case"rgb":return U.length!==3?null:[h(U[0]),h(U[1]),h(U[2]),$];case"hsla":if(U.length!==4)return null;$=d(U.pop());case"hsl":if(U.length!==3)return null;var H=(parseFloat(U[0])%360+360)%360/360,oe=d(U[1]),te=d(U[2]),he=te<=.5?te*(oe+1):te+oe-te*oe,ge=2*te-he;return[c(255*v(ge,he,H+1/3)),c(255*v(ge,he,H)),c(255*v(ge,he,H-1/3)),$];default:return null}}return null}}catch{}}).parseCSSColor,cr=function(e,t,n,c){c===void 0&&(c=1),this.r=e,this.g=t,this.b=n,this.a=c};cr.parse=function(e){if(e){if(e instanceof cr)return e;if(typeof e=="string"){var t=It(e);if(t)return new cr(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},cr.prototype.toString=function(){var e=this.toArray(),t=e[1],n=e[2],c=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(n)+","+c+")"},cr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);var ui=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ui.prototype.compare=function(e,t){return this.collator.compare(e,t)},ui.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Xi=function(e,t,n,c,h){this.text=e,this.image=t,this.scale=n,this.fontStack=c,this.textColor=h},Br=function(e){this.sections=e};Br.fromString=function(e){return new Br([new Xi(e,null,null,null,null)])},Br.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Br.factory=function(e){return e instanceof Br?e:Br.fromString(e)},Br.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Br.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var c=n[t];if(c.image)e.push(["image",c.image.name]);else{e.push(c.text);var h={};c.fontStack&&(h["text-font"]=["literal",c.fontStack.split(",")]),c.scale&&(h["font-scale"]=c.scale),c.textColor&&(h["text-color"]=["rgba"].concat(c.textColor.toArray())),e.push(h)}}return e};var Xn=function(e){this.name=e.name,this.available=e.available};function Xo(e,t,n,c){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:"Invalid rgba value ["+[e,t,n,c].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof c=="number"?[e,t,n,c]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function mo(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof cr||e instanceof ui||e instanceof Br||e instanceof Xn)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!mo(n[t]))return!1;return!0}if(typeof e=="object"){for(var c in e)if(!mo(e[c]))return!1;return!0}return!1}function tn(e){if(e===null)return nt;if(typeof e=="string")return Je;if(typeof e=="boolean")return Xe;if(typeof e=="number")return Ie;if(e instanceof cr)return Ke;if(e instanceof ui)return tr;if(e instanceof Br)return Cr;if(e instanceof Xn)return Mt;if(Array.isArray(e)){for(var t,n=e.length,c=0,h=e;c<h.length;c+=1){var d=tn(h[c]);if(t){if(t===d)continue;t=Qe;break}t=d}return lr(t||Qe,n)}return jt}function Ms(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof cr||e instanceof Br||e instanceof Xn?e.toString():JSON.stringify(e)}Xn.prototype.toString=function(){return this.name},Xn.fromString=function(e){return e?new Xn({name:e,available:!1}):null},Xn.prototype.serialize=function(){return["image",this.name]};var ii=function(e,t){this.type=e,this.value=t};ii.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!mo(e[1]))return t.error("invalid value");var n=e[1],c=tn(n),h=t.expectedType;return c.kind!=="array"||c.N!==0||!h||h.kind!=="array"||typeof h.N=="number"&&h.N!==0||(c=h),new ii(c,n)},ii.prototype.evaluate=function(){return this.value},ii.prototype.eachChild=function(){},ii.prototype.outputDefined=function(){return!0},ii.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof cr?["rgba"].concat(this.value.toArray()):this.value instanceof Br?this.value.serialize():this.value};var zn=function(e){this.name="ExpressionEvaluationError",this.message=e};zn.prototype.toJSON=function(){return this.message};var Ii={string:Je,number:Ie,boolean:Xe,object:jt},Nr=function(e,t){this.type=e,this.args=t};Nr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,c=1,h=e[0];if(h==="array"){var d,v;if(e.length>2){var b=e[1];if(typeof b!="string"||!(b in Ii)||b==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=Ii[b],c++}else d=Qe;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);v=e[2],c++}n=lr(d,v)}else n=Ii[h];for(var C=[];c<e.length;c++){var T=t.parse(e[c],c,Qe);if(!T)return null;C.push(T)}return new Nr(n,C)},Nr.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!dr(this.type,tn(n)))return n;if(t===this.args.length-1)throw new zn("Expected value to be of type "+or(this.type)+", but found "+or(tn(n))+" instead.")}return null},Nr.prototype.eachChild=function(e){this.args.forEach(e)},Nr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Nr.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){t.push(n.kind);var c=e.N;(typeof c=="number"||this.args.length>1)&&t.push(c)}}return t.concat(this.args.map(function(h){return h.serialize()}))};var yo=function(e){this.type=Cr,this.sections=e};yo.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&typeof n=="object")return t.error("First argument must be an image or text section.");for(var c=[],h=!1,d=1;d<=e.length-1;++d){var v=e[d];if(h&&typeof v=="object"&&!Array.isArray(v)){h=!1;var b=null;if(v["font-scale"]&&!(b=t.parse(v["font-scale"],1,Ie)))return null;var C=null;if(v["text-font"]&&!(C=t.parse(v["text-font"],1,lr(Je))))return null;var T=null;if(v["text-color"]&&!(T=t.parse(v["text-color"],1,Ke)))return null;var A=c[c.length-1];A.scale=b,A.font=C,A.textColor=T}else{var z=t.parse(e[d],1,Qe);if(!z)return null;var R=z.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");h=!0,c.push({content:z,scale:null,font:null,textColor:null})}}return new yo(c)},yo.prototype.evaluate=function(e){return new Br(this.sections.map(function(t){var n=t.content.evaluate(e);return tn(n)===Mt?new Xi("",n,null,null,null):new Xi(Ms(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},yo.prototype.eachChild=function(e){for(var t=0,n=this.sections;t<n.length;t+=1){var c=n[t];e(c.content),c.scale&&e(c.scale),c.font&&e(c.font),c.textColor&&e(c.textColor)}},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var c=n[t];e.push(c.content.serialize());var h={};c.scale&&(h["font-scale"]=c.scale.serialize()),c.font&&(h["text-font"]=c.font.serialize()),c.textColor&&(h["text-color"]=c.textColor.serialize()),e.push(h)}return e};var ki=function(e){this.type=Mt,this.input=e};ki.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Je);return n?new ki(n):t.error("No image name provided.")},ki.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=Xn.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n},ki.prototype.eachChild=function(e){e(this.input)},ki.prototype.outputDefined=function(){return!1},ki.prototype.serialize=function(){return["image",this.input.serialize()]};var Dl={"to-boolean":Xe,"to-color":Ke,"to-number":Ie,"to-string":Je},Ai=function(e,t){this.type=e,this.args=t};Ai.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var c=Dl[n],h=[],d=1;d<e.length;d++){var v=t.parse(e[d],d,Qe);if(!v)return null;h.push(v)}return new Ai(c,h)},Ai.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var t,n,c=0,h=this.args;c<h.length;c+=1){if(n=null,(t=h[c].evaluate(e))instanceof cr)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Xo(t[0],t[1],t[2],t[3])))return new cr(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new zn(n||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var v=null,b=0,C=this.args;b<C.length;b+=1){if((v=C[b].evaluate(e))===null)return 0;var T=Number(v);if(!isNaN(T))return T}throw new zn("Could not convert "+JSON.stringify(v)+" to number.")}return this.type.kind==="formatted"?Br.fromString(Ms(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Xn.fromString(Ms(this.args[0].evaluate(e))):Ms(this.args[0].evaluate(e))},Ai.prototype.eachChild=function(e){this.args.forEach(e)},Ai.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ai.prototype.serialize=function(){if(this.type.kind==="formatted")return new yo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ki(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var w=["Unknown","Point","LineString","Polygon"],P=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};P.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},P.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?w[this.feature.type]:this.feature.type:null},P.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},P.prototype.canonicalID=function(){return this.canonical},P.prototype.properties=function(){return this.feature&&this.feature.properties||{}},P.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=cr.parse(e)),t};var F=function(e,t,n,c){this.name=e,this.type=t,this._evaluate=n,this.args=c};F.prototype.evaluate=function(e){return this._evaluate(e,this.args)},F.prototype.eachChild=function(e){this.args.forEach(e)},F.prototype.outputDefined=function(){return!1},F.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},F.parse=function(e,t){var n,c=e[0],h=F.definitions[c];if(!h)return t.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(h)?h[0]:h.type,v=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,b=v.filter(function(bt){var rt=bt[0];return!Array.isArray(rt)||rt.length===e.length-1}),C=null,T=0,A=b;T<A.length;T+=1){var z=A[T],R=z[0],U=z[1];C=new ar(t.registry,t.path,null,t.scope);for(var $=[],H=!1,oe=1;oe<e.length;oe++){var te=e[oe],he=Array.isArray(R)?R[oe-1]:R.type,ge=C.parse(te,1+$.length,he);if(!ge){H=!0;break}$.push(ge)}if(!H)if(Array.isArray(R)&&R.length!==$.length)C.error("Expected "+R.length+" arguments, but found "+$.length+" instead.");else{for(var xe=0;xe<$.length;xe++){var Ce=Array.isArray(R)?R[xe]:R.type,Oe=$[xe];C.concat(xe+1).checkSubtype(Ce,Oe.type)}if(C.errors.length===0)return new F(c,d,U,$)}}if(b.length===1)(n=t.errors).push.apply(n,C.errors);else{for(var je=(b.length?b:v).map(function(bt){var rt;return rt=bt[0],Array.isArray(rt)?"("+rt.map(or).join(", ")+")":"("+or(rt.type)+"...)"}).join(" | "),$e=[],vt=1;vt<e.length;vt++){var tt=t.parse(e[vt],1+$e.length);if(!tt)return null;$e.push(or(tt.type))}t.error("Expected arguments of type "+je+", but found ("+$e.join(", ")+") instead.")}return null},F.register=function(e,t){for(var n in F.definitions=t,t)e[n]=F};var le=function(e,t,n){this.type=tr,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};function ve(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function fe(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function _e(e,t){var n=(180+e[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,h=Math.pow(2,t.z);return[Math.round(n*h*8192),Math.round(c*h*8192)]}function Ze(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function Ve(e,t){for(var n,c,h,d,v,b,C,T=!1,A=0,z=t.length;A<z;A++)for(var R=t[A],U=0,$=R.length;U<$-1;U++){if((d=(n=e)[0]-(c=R[U])[0])*(C=n[1]-(h=R[U+1])[1])-(b=n[0]-h[0])*(v=n[1]-c[1])==0&&d*b<=0&&v*C<=0)return!1;Ze(e,R[U],R[U+1])&&(T=!T)}return T}function ct(e,t){for(var n=0;n<t.length;n++)if(Ve(e,t[n]))return!0;return!1}function Ee(e,t,n,c){var h=c[0]-n[0],d=c[1]-n[1],v=(e[0]-n[0])*d-h*(e[1]-n[1]),b=(t[0]-n[0])*d-h*(t[1]-n[1]);return v>0&&b<0||v<0&&b>0}function it(e,t,n){for(var c=0,h=n;c<h.length;c+=1)for(var d=h[c],v=0;v<d.length-1;++v)if((z=[(A=d[v+1])[0]-(T=d[v])[0],A[1]-T[1]])[0]*(R=[(C=t)[0]-(b=e)[0],C[1]-b[1]])[1]-z[1]*R[0]!=0&&Ee(b,C,T,A)&&Ee(T,A,b,C))return!0;var b,C,T,A,z,R;return!1}function ht(e,t){for(var n=0;n<e.length;++n)if(!Ve(e[n],t))return!1;for(var c=0;c<e.length-1;++c)if(it(e[c],e[c+1],t))return!1;return!0}function zt(e,t){for(var n=0;n<t.length;n++)if(ht(e,t[n]))return!0;return!1}function Ft(e,t,n){for(var c=[],h=0;h<e.length;h++){for(var d=[],v=0;v<e[h].length;v++){var b=_e(e[h][v],n);ve(t,b),d.push(b)}c.push(d)}return c}function on(e,t,n){for(var c=[],h=0;h<e.length;h++){var d=Ft(e[h],t,n);c.push(d)}return c}function Re(e,t,n,c){if(e[0]<n[0]||e[0]>n[2]){var h=.5*c,d=e[0]-n[0]>h?-c:n[0]-e[0]>h?c:0;d===0&&(d=e[0]-n[2]>h?-c:n[2]-e[0]>h?c:0),e[0]+=d}ve(t,e)}function yt(e,t,n,c){for(var h=8192*Math.pow(2,c.z),d=[8192*c.x,8192*c.y],v=[],b=0,C=e;b<C.length;b+=1)for(var T=0,A=C[b];T<A.length;T+=1){var z=A[T],R=[z.x+d[0],z.y+d[1]];Re(R,t,n,h),v.push(R)}return v}function Sr(e,t,n,c){for(var h,d=8192*Math.pow(2,c.z),v=[8192*c.x,8192*c.y],b=[],C=0,T=e;C<T.length;C+=1){for(var A=[],z=0,R=T[C];z<R.length;z+=1){var U=R[z],$=[U.x+v[0],U.y+v[1]];ve(t,$),A.push($)}b.push(A)}if(t[2]-t[0]<=d/2){(h=t)[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var H=0,oe=b;H<oe.length;H+=1)for(var te=0,he=oe[H];te<he.length;te+=1)Re(he[te],t,n,d)}return b}le.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var n=e[1];if(typeof n!="object"||Array.isArray(n))return t.error("Collator options argument must be an object.");var c=t.parse(n["case-sensitive"]!==void 0&&n["case-sensitive"],1,Xe);if(!c)return null;var h=t.parse(n["diacritic-sensitive"]!==void 0&&n["diacritic-sensitive"],1,Xe);if(!h)return null;var d=null;return n.locale&&!(d=t.parse(n.locale,1,Je))?null:new le(c,h,d)},le.prototype.evaluate=function(e){return new ui(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},le.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},le.prototype.outputDefined=function(){return!1},le.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var rr=function(e,t){this.type=Xe,this.geojson=e,this.geometries=t};function kr(e){if(e instanceof F&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof rr)return!1;var t=!0;return e.eachChild(function(n){t&&!kr(n)&&(t=!1)}),t}function St(e){if(e instanceof F&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(n){t&&!St(n)&&(t=!1)}),t}function Mi(e,t){if(e instanceof F&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(c){n&&!Mi(c,t)&&(n=!1)}),n}rr.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(mo(e[1])){var n=e[1];if(n.type==="FeatureCollection")for(var c=0;c<n.features.length;++c){var h=n.features[c].geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new rr(n,n.features[c].geometry)}else if(n.type==="Feature"){var d=n.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new rr(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new rr(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},rr.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,n){var c=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(n.type==="Polygon"){var v=Ft(n.coordinates,h,d),b=yt(t.geometry(),c,h,d);if(!fe(c,h))return!1;for(var C=0,T=b;C<T.length;C+=1)if(!Ve(T[C],v))return!1}if(n.type==="MultiPolygon"){var A=on(n.coordinates,h,d),z=yt(t.geometry(),c,h,d);if(!fe(c,h))return!1;for(var R=0,U=z;R<U.length;R+=1)if(!ct(U[R],A))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,n){var c=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(n.type==="Polygon"){var v=Ft(n.coordinates,h,d),b=Sr(t.geometry(),c,h,d);if(!fe(c,h))return!1;for(var C=0,T=b;C<T.length;C+=1)if(!ht(T[C],v))return!1}if(n.type==="MultiPolygon"){var A=on(n.coordinates,h,d),z=Sr(t.geometry(),c,h,d);if(!fe(c,h))return!1;for(var R=0,U=z;R<U.length;R+=1)if(!zt(U[R],A))return!1}return!0}(e,this.geometries)}return!1},rr.prototype.eachChild=function(){},rr.prototype.outputDefined=function(){return!0},rr.prototype.serialize=function(){return["within",this.geojson]};var li=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};li.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new li(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},li.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},li.prototype.eachChild=function(){},li.prototype.outputDefined=function(){return!1},li.prototype.serialize=function(){return["var",this.name]};var ar=function(e,t,n,c,h){t===void 0&&(t=[]),c===void 0&&(c=new st),h===void 0&&(h=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=c,this.errors=h,this.expectedType=n};function yi(e,t){for(var n,c=e.length-1,h=0,d=c,v=0;h<=d;)if((n=e[v=Math.floor((h+d)/2)])<=t){if(v===c||t<e[v+1])return v;h=v+1}else{if(!(n>t))throw new zn("Input is not a number.");d=v-1}return 0}ar.prototype.parse=function(e,t,n,c,h){return h===void 0&&(h={}),t?this.concat(t,n,c)._parse(e,h):this._parse(e,h)},ar.prototype._parse=function(e,t){function n(T,A,z){return z==="assert"?new Nr(A,[T]):z==="coerce"?new Ai(A,[T]):T}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var c=e[0];if(typeof c!="string")return this.error("Expression name must be a string, but found "+typeof c+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=this.registry[c];if(h){var d=h.parse(e,this);if(!d)return null;if(this.expectedType){var v=this.expectedType,b=d.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||b.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(v,b))return null}else d=n(d,v,t.typeAnnotation||"coerce");else d=n(d,v,t.typeAnnotation||"assert")}if(!(d instanceof ii)&&d.type.kind!=="resolvedImage"&&function T(A){if(A instanceof li)return T(A.boundExpression);if(A instanceof F&&A.name==="error"||A instanceof le||A instanceof rr)return!1;var z=A instanceof Ai||A instanceof Nr,R=!0;return A.eachChild(function(U){R=z?R&&T(U):R&&U instanceof ii}),!!R&&kr(A)&&Mi(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var C=new P;try{d=new ii(d.type,d.evaluate(C))}catch(T){return this.error(T.message),null}}return d}return this.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},ar.prototype.concat=function(e,t,n){var c=typeof e=="number"?this.path.concat(e):this.path,h=n?this.scope.concat(n):this.scope;return new ar(this.registry,c,t||null,h,this.errors)},ar.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var c=""+this.key+t.map(function(h){return"["+h+"]"}).join("");this.errors.push(new Ue(c,e))},ar.prototype.checkSubtype=function(e,t){var n=dr(e,t);return n&&this.error(n),n};var jr=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var c=0,h=n;c<h.length;c+=1){var d=h[c],v=d[1];this.labels.push(d[0]),this.outputs.push(v)}};function rn(e,t,n){return e*(1-n)+t*n}jr.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var n=t.parse(e[1],1,Ie);if(!n)return null;var c=[],h=null;t.expectedType&&t.expectedType.kind!=="value"&&(h=t.expectedType);for(var d=1;d<e.length;d+=2){var v=d===1?-1/0:e[d],b=e[d+1],C=d,T=d+1;if(typeof v!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(c.length&&c[c.length-1][0]>=v)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);var A=t.parse(b,T,h);if(!A)return null;h=h||A.type,c.push([v,A])}return new jr(h,n,c)},jr.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);var c=this.input.evaluate(e);if(c<=t[0])return n[0].evaluate(e);var h=t.length;return c>=t[h-1]?n[h-1].evaluate(e):n[yi(t,c)].evaluate(e)},jr.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},jr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},jr.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Da=Object.freeze({__proto__:null,number:rn,color:function(e,t,n){return new cr(rn(e.r,t.r,n),rn(e.g,t.g,n),rn(e.b,t.b,n),rn(e.a,t.a,n))},array:function(e,t,n){return e.map(function(c,h){return rn(c,t[h],n)})}}),vo=6/29*3*(6/29),Ol=Math.PI/180,Rl=180/Math.PI;function $u(e){return e>.008856451679035631?Math.pow(e,1/3):e/vo+4/29}function au(e){return e>6/29?e*e*e:vo*(e-4/29)}function is(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function su(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Xu(e){var t=su(e.r),n=su(e.g),c=su(e.b),h=$u((.4124564*t+.3575761*n+.1804375*c)/.95047),d=$u((.2126729*t+.7151522*n+.072175*c)/1);return{l:116*d-16,a:500*(h-d),b:200*(d-$u((.0193339*t+.119192*n+.9503041*c)/1.08883)),alpha:e.a}}function Fl(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,c=isNaN(e.b)?t:t-e.b/200;return t=1*au(t),n=.95047*au(n),c=1.08883*au(c),new cr(is(3.2404542*n-1.5371385*t-.4985314*c),is(-.969266*n+1.8760108*t+.041556*c),is(.0556434*n-.2040259*t+1.0572252*c),e.alpha)}function Oa(e,t,n){var c=t-e;return e+n*(c>180||c<-180?c-360*Math.round(c/360):c)}var os={forward:Xu,reverse:Fl,interpolate:function(e,t,n){return{l:rn(e.l,t.l,n),a:rn(e.a,t.a,n),b:rn(e.b,t.b,n),alpha:rn(e.alpha,t.alpha,n)}}},zs={forward:function(e){var t=Xu(e),n=t.l,c=t.a,h=t.b,d=Math.atan2(h,c)*Rl;return{h:d<0?d+360:d,c:Math.sqrt(c*c+h*h),l:n,alpha:e.a}},reverse:function(e){var t=e.h*Ol,n=e.c;return Fl({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Oa(e.h,t.h,n),c:rn(e.c,t.c,n),l:rn(e.l,t.l,n),alpha:rn(e.alpha,t.alpha,n)}}},Bl=Object.freeze({__proto__:null,lab:os,hcl:zs}),En=function(e,t,n,c,h){this.type=e,this.operator=t,this.interpolation=n,this.input=c,this.labels=[],this.outputs=[];for(var d=0,v=h;d<v.length;d+=1){var b=v[d],C=b[1];this.labels.push(b[0]),this.outputs.push(C)}};function Ra(e,t,n,c){var h=c-n,d=e-n;return h===0?0:t===1?d/h:(Math.pow(t,d)-1)/(Math.pow(t,h)-1)}En.interpolationFactor=function(e,t,n,c){var h=0;if(e.name==="exponential")h=Ra(t,e.base,n,c);else if(e.name==="linear")h=Ra(t,1,n,c);else if(e.name==="cubic-bezier"){var d=e.controlPoints;h=new M(d[0],d[1],d[2],d[3]).solve(Ra(t,1,n,c))}return h},En.parse=function(e,t){var n=e[0],c=e[1],h=e[2],d=e.slice(3);if(!Array.isArray(c)||c.length===0)return t.error("Expected an interpolation type expression.",1);if(c[0]==="linear")c={name:"linear"};else if(c[0]==="exponential"){var v=c[1];if(typeof v!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);c={name:"exponential",base:v}}else{if(c[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(c[0]),1,0);var b=c.slice(1);if(b.length!==4||b.some(function(oe){return typeof oe!="number"||oe<0||oe>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);c={name:"cubic-bezier",controlPoints:b}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(h=t.parse(h,2,Ie)))return null;var C=[],T=null;n==="interpolate-hcl"||n==="interpolate-lab"?T=Ke:t.expectedType&&t.expectedType.kind!=="value"&&(T=t.expectedType);for(var A=0;A<d.length;A+=2){var z=d[A],R=d[A+1],U=A+3,$=A+4;if(typeof z!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(C.length&&C[C.length-1][0]>=z)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);var H=t.parse(R,$,T);if(!H)return null;T=T||H.type,C.push([z,H])}return T.kind==="number"||T.kind==="color"||T.kind==="array"&&T.itemType.kind==="number"&&typeof T.N=="number"?new En(T,n,c,h,C):t.error("Type "+or(T)+" is not interpolatable.")},En.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);var c=this.input.evaluate(e);if(c<=t[0])return n[0].evaluate(e);var h=t.length;if(c>=t[h-1])return n[h-1].evaluate(e);var d=yi(t,c),v=En.interpolationFactor(this.interpolation,c,t[d],t[d+1]),b=n[d].evaluate(e),C=n[d+1].evaluate(e);return this.operator==="interpolate"?Da[this.type.kind.toLowerCase()](b,C,v):this.operator==="interpolate-hcl"?zs.reverse(zs.interpolate(zs.forward(b),zs.forward(C),v)):os.reverse(os.interpolate(os.forward(b),os.forward(C),v))},En.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},En.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},En.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var Mo=function(e,t){this.type=e,this.args=t};Mo.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,c=t.expectedType;c&&c.kind!=="value"&&(n=c);for(var h=[],d=0,v=e.slice(1);d<v.length;d+=1){var b=t.parse(v[d],1+h.length,n,void 0,{typeAnnotation:"omit"});if(!b)return null;n=n||b.type,h.push(b)}var C=c&&h.some(function(T){return dr(c,T.type)});return new Mo(C?Qe:n,h)},Mo.prototype.evaluate=function(e){for(var t,n=null,c=0,h=0,d=this.args;h<d.length&&(c++,(n=d[h].evaluate(e))&&n instanceof Xn&&!n.available&&(t||(t=n.name),n=null,c===this.args.length&&(n=t)),n===null);h+=1);return n},Mo.prototype.eachChild=function(e){this.args.forEach(e)},Mo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Mo.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var zo=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};zo.prototype.evaluate=function(e){return this.result.evaluate(e)},zo.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},zo.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],c=1;c<e.length-1;c+=2){var h=e[c];if(typeof h!="string")return t.error("Expected string, but found "+typeof h+" instead.",c);if(/[^a-zA-Z0-9_]/.test(h))return t.error("Variable names must contain only alphanumeric characters or '_'.",c);var d=t.parse(e[c+1],c+1);if(!d)return null;n.push([h,d])}var v=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return v?new zo(n,v):null},zo.prototype.outputDefined=function(){return this.result.outputDefined()},zo.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var c=n[t];e.push(c[0],c[1].serialize())}return e.push(this.result.serialize()),e};var Ko=function(e,t,n){this.type=e,this.index=t,this.input=n};Ko.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Ie),c=t.parse(e[2],2,lr(t.expectedType||Qe));return n&&c?new Ko(c.type.itemType,n,c):null},Ko.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new zn("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new zn("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new zn("Array index must be an integer, but found "+t+" instead.");return n[t]},Ko.prototype.eachChild=function(e){e(this.index),e(this.input)},Ko.prototype.outputDefined=function(){return!1},Ko.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var go=function(e,t){this.type=Xe,this.needle=e,this.haystack=t};go.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Qe),c=t.parse(e[2],2,Qe);return n&&c?en(n.type,[Xe,Je,Ie,nt,Qe])?new go(n,c):t.error("Expected first argument to be of type boolean, string, number or null, but found "+or(n.type)+" instead"):null},go.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!xr(t,["boolean","string","number","null"]))throw new zn("Expected first argument to be of type boolean, string, number or null, but found "+or(tn(t))+" instead.");if(!xr(n,["string","array"]))throw new zn("Expected second argument to be of type array or string, but found "+or(tn(n))+" instead.");return n.indexOf(t)>=0},go.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},go.prototype.outputDefined=function(){return!0},go.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var pa=function(e,t,n){this.type=Ie,this.needle=e,this.haystack=t,this.fromIndex=n};pa.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Qe),c=t.parse(e[2],2,Qe);if(!n||!c)return null;if(!en(n.type,[Xe,Je,Ie,nt,Qe]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+or(n.type)+" instead");if(e.length===4){var h=t.parse(e[3],3,Ie);return h?new pa(n,c,h):null}return new pa(n,c)},pa.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!xr(t,["boolean","string","number","null"]))throw new zn("Expected first argument to be of type boolean, string, number or null, but found "+or(tn(t))+" instead.");if(!xr(n,["string","array"]))throw new zn("Expected second argument to be of type array or string, but found "+or(tn(n))+" instead.");if(this.fromIndex){var c=this.fromIndex.evaluate(e);return n.indexOf(t,c)}return n.indexOf(t)},pa.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},pa.prototype.outputDefined=function(){return!1},pa.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Fa=function(e,t,n,c,h,d){this.inputType=e,this.type=t,this.input=n,this.cases=c,this.outputs=h,this.otherwise=d};Fa.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,c;t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(var h={},d=[],v=2;v<e.length-1;v+=2){var b=e[v],C=e[v+1];Array.isArray(b)||(b=[b]);var T=t.concat(v);if(b.length===0)return T.error("Expected at least one branch label.");for(var A=0,z=b;A<z.length;A+=1){var R=z[A];if(typeof R!="number"&&typeof R!="string")return T.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return T.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof R=="number"&&Math.floor(R)!==R)return T.error("Numeric branch labels must be integer values.");if(n){if(T.checkSubtype(n,tn(R)))return null}else n=tn(R);if(h[String(R)]!==void 0)return T.error("Branch labels must be unique.");h[String(R)]=d.length}var U=t.parse(C,v,c);if(!U)return null;c=c||U.type,d.push(U)}var $=t.parse(e[1],1,Qe);if(!$)return null;var H=t.parse(e[e.length-1],e.length-1,c);return H?$.type.kind!=="value"&&t.concat(1).checkSubtype(n,$.type)?null:new Fa(n,c,$,h,d,H):null},Fa.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(tn(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Fa.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Fa.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Fa.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],c={},h=0,d=Object.keys(this.cases).sort();h<d.length;h+=1){var v=d[h];(z=c[this.cases[v]])===void 0?(c[this.cases[v]]=n.length,n.push([this.cases[v],[v]])):n[z][1].push(v)}for(var b=function(U){return e.inputType.kind==="number"?Number(U):U},C=0,T=n;C<T.length;C+=1){var A=T[C],z=A[0],R=A[1];t.push(R.length===1?b(R[0]):R.map(b)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Ba=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};Ba.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&t.expectedType.kind!=="value"&&(n=t.expectedType);for(var c=[],h=1;h<e.length-1;h+=2){var d=t.parse(e[h],h,Xe);if(!d)return null;var v=t.parse(e[h+1],h+1,n);if(!v)return null;c.push([d,v]),n=n||v.type}var b=t.parse(e[e.length-1],e.length-1,n);return b?new Ba(n,c,b):null},Ba.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var c=n[t],h=c[1];if(c[0].evaluate(e))return h.evaluate(e)}return this.otherwise.evaluate(e)},Ba.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var c=n[t],h=c[1];e(c[0]),e(h)}e(this.otherwise)},Ba.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Ba.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ha=function(e,t,n,c){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=c};function Ul(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Ku(e,t,n,c){return c.compare(t,n)===0}function br(e,t,n){var c=e!=="=="&&e!=="!=";return function(){function h(d,v,b){this.type=Xe,this.lhs=d,this.rhs=v,this.collator=b,this.hasUntypedArgument=d.type.kind==="value"||v.type.kind==="value"}return h.parse=function(d,v){if(d.length!==3&&d.length!==4)return v.error("Expected two or three arguments.");var b=d[0],C=v.parse(d[1],1,Qe);if(!C)return null;if(!Ul(b,C.type))return v.concat(1).error('"'+b+`" comparisons are not supported for type '`+or(C.type)+"'.");var T=v.parse(d[2],2,Qe);if(!T)return null;if(!Ul(b,T.type))return v.concat(2).error('"'+b+`" comparisons are not supported for type '`+or(T.type)+"'.");if(C.type.kind!==T.type.kind&&C.type.kind!=="value"&&T.type.kind!=="value")return v.error("Cannot compare types '"+or(C.type)+"' and '"+or(T.type)+"'.");c&&(C.type.kind==="value"&&T.type.kind!=="value"?C=new Nr(T.type,[C]):C.type.kind!=="value"&&T.type.kind==="value"&&(T=new Nr(C.type,[T])));var A=null;if(d.length===4){if(C.type.kind!=="string"&&T.type.kind!=="string"&&C.type.kind!=="value"&&T.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(!(A=v.parse(d[3],3,tr)))return null}return new h(C,T,A)},h.prototype.evaluate=function(d){var v=this.lhs.evaluate(d),b=this.rhs.evaluate(d);if(c&&this.hasUntypedArgument){var C=tn(v),T=tn(b);if(C.kind!==T.kind||C.kind!=="string"&&C.kind!=="number")throw new zn('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+C.kind+", "+T.kind+") instead.")}if(this.collator&&!c&&this.hasUntypedArgument){var A=tn(v),z=tn(b);if(A.kind!=="string"||z.kind!=="string")return t(d,v,b)}return this.collator?n(d,v,b,this.collator.evaluate(d)):t(d,v,b)},h.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},h.prototype.outputDefined=function(){return!0},h.prototype.serialize=function(){var d=[e];return this.eachChild(function(v){d.push(v.serialize())}),d},h}()}ha.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Qe),c=t.parse(e[2],2,Ie);if(!n||!c)return null;if(!en(n.type,[lr(Qe),Je,Qe]))return t.error("Expected first argument to be of type array or string, but found "+or(n.type)+" instead");if(e.length===4){var h=t.parse(e[3],3,Ie);return h?new ha(n.type,n,c,h):null}return new ha(n.type,n,c)},ha.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!xr(t,["string","array"]))throw new zn("Expected first argument to be of type array or string, but found "+or(tn(t))+" instead.");if(this.endIndex){var c=this.endIndex.evaluate(e);return t.slice(n,c)}return t.slice(n)},ha.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},ha.prototype.outputDefined=function(){return!1},ha.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ua=br("==",function(e,t,n){return t===n},Ku),Ki=br("!=",function(e,t,n){return t!==n},function(e,t,n,c){return!Ku(0,t,n,c)}),fa=br("<",function(e,t,n){return t<n},function(e,t,n,c){return c.compare(t,n)<0}),Ls=br(">",function(e,t,n){return t>n},function(e,t,n,c){return c.compare(t,n)>0}),Ho=br("<=",function(e,t,n){return t<=n},function(e,t,n,c){return c.compare(t,n)<=0}),Nl=br(">=",function(e,t,n){return t>=n},function(e,t,n,c){return c.compare(t,n)>=0}),Lo=function(e,t,n,c,h){this.type=Je,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=c,this.maxFractionDigits=h};Lo.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Ie);if(!n)return null;var c=e[2];if(typeof c!="object"||Array.isArray(c))return t.error("NumberFormat options argument must be an object.");var h=null;if(c.locale&&!(h=t.parse(c.locale,1,Je)))return null;var d=null;if(c.currency&&!(d=t.parse(c.currency,1,Je)))return null;var v=null;if(c["min-fraction-digits"]&&!(v=t.parse(c["min-fraction-digits"],1,Ie)))return null;var b=null;return c["max-fraction-digits"]&&!(b=t.parse(c["max-fraction-digits"],1,Ie))?null:new Lo(n,h,d,v,b)},Lo.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Lo.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Lo.prototype.outputDefined=function(){return!1},Lo.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Hi=function(e){this.type=Ie,this.input=e};Hi.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+or(n.type)+" instead."):new Hi(n):null},Hi.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new zn("Expected value to be of type string or array, but found "+or(tn(t))+" instead.")},Hi.prototype.eachChild=function(e){e(this.input)},Hi.prototype.outputDefined=function(){return!1},Hi.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var da={"==":Ua,"!=":Ki,">":Ls,"<":fa,">=":Nl,"<=":Ho,array:Nr,at:Ko,boolean:Nr,case:Ba,coalesce:Mo,collator:le,format:yo,image:ki,in:go,"index-of":pa,interpolate:En,"interpolate-hcl":En,"interpolate-lab":En,length:Hi,let:zo,literal:ii,match:Fa,number:Nr,"number-format":Lo,object:Nr,slice:ha,step:jr,string:Nr,"to-boolean":Ai,"to-color":Ai,"to-number":Ai,"to-string":Ai,var:li,within:rr};function Hu(e,t){var n=t[0],c=t[1],h=t[2],d=t[3];n=n.evaluate(e),c=c.evaluate(e),h=h.evaluate(e);var v=d?d.evaluate(e):1,b=Xo(n,c,h,v);if(b)throw new zn(b);return new cr(n/255*v,c/255*v,h/255*v,v)}function jl(e,t){return e in t}function Yu(e,t){var n=t[e];return n===void 0?null:n}function ma(e){return{type:e}}function Ju(e){return{result:"success",value:e}}function Do(e){return{result:"error",value:e}}function Yi(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Vl(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Ji(e){return!!e.expression&&e.expression.interpolated}function Dr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Oo(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function ql(e){return e}function as(e,t,n){return e!==void 0?e:t!==void 0?t:n!==void 0?n:void 0}function Ds(e,t,n,c,h){return as(typeof n===h?c[n]:void 0,e.default,t.default)}function Qu(e,t,n){if(Dr(n)!=="number")return as(e.default,t.default);var c=e.stops.length;if(c===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[c-1][0])return e.stops[c-1][1];var h=yi(e.stops.map(function(d){return d[0]}),n);return e.stops[h][1]}function el(e,t,n){var c=e.base!==void 0?e.base:1;if(Dr(n)!=="number")return as(e.default,t.default);var h=e.stops.length;if(h===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[h-1][0])return e.stops[h-1][1];var d=yi(e.stops.map(function(z){return z[0]}),n),v=function(z,R,U,$){var H=$-U,oe=z-U;return H===0?0:R===1?oe/H:(Math.pow(R,oe)-1)/(Math.pow(R,H)-1)}(n,c,e.stops[d][0],e.stops[d+1][0]),b=e.stops[d][1],C=e.stops[d+1][1],T=Da[t.type]||ql;if(e.colorSpace&&e.colorSpace!=="rgb"){var A=Bl[e.colorSpace];T=function(z,R){return A.reverse(A.interpolate(A.forward(z),A.forward(R),v))}}return typeof b.evaluate=="function"?{evaluate:function(){for(var z=[],R=arguments.length;R--;)z[R]=arguments[R];var U=b.evaluate.apply(void 0,z),$=C.evaluate.apply(void 0,z);if(U!==void 0&&$!==void 0)return T(U,$,v)}}:T(b,C,v)}function Os(e,t,n){return t.type==="color"?n=cr.parse(n):t.type==="formatted"?n=Br.fromString(n.toString()):t.type==="resolvedImage"?n=Xn.fromString(n.toString()):Dr(n)===t.type||t.type==="enum"&&t.values[n]||(n=void 0),as(n,e.default,t.default)}F.register(da,{error:[{kind:"error"},[Je],function(e,t){throw new zn(t[0].evaluate(e))}],typeof:[Je,[Qe],function(e,t){return or(tn(t[0].evaluate(e)))}],"to-rgba":[lr(Ie,4),[Ke],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Ke,[Ie,Ie,Ie],Hu],rgba:[Ke,[Ie,Ie,Ie,Ie],Hu],has:{type:Xe,overloads:[[[Je],function(e,t){return jl(t[0].evaluate(e),e.properties())}],[[Je,jt],function(e,t){var n=t[1];return jl(t[0].evaluate(e),n.evaluate(e))}]]},get:{type:Qe,overloads:[[[Je],function(e,t){return Yu(t[0].evaluate(e),e.properties())}],[[Je,jt],function(e,t){var n=t[1];return Yu(t[0].evaluate(e),n.evaluate(e))}]]},"feature-state":[Qe,[Je],function(e,t){return Yu(t[0].evaluate(e),e.featureState||{})}],properties:[jt,[],function(e){return e.properties()}],"geometry-type":[Je,[],function(e){return e.geometryType()}],id:[Qe,[],function(e){return e.id()}],zoom:[Ie,[],function(e){return e.globals.zoom}],"heatmap-density":[Ie,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Ie,[],function(e){return e.globals.lineProgress||0}],accumulated:[Qe,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Ie,ma(Ie),function(e,t){for(var n=0,c=0,h=t;c<h.length;c+=1)n+=h[c].evaluate(e);return n}],"*":[Ie,ma(Ie),function(e,t){for(var n=1,c=0,h=t;c<h.length;c+=1)n*=h[c].evaluate(e);return n}],"-":{type:Ie,overloads:[[[Ie,Ie],function(e,t){var n=t[1];return t[0].evaluate(e)-n.evaluate(e)}],[[Ie],function(e,t){return-t[0].evaluate(e)}]]},"/":[Ie,[Ie,Ie],function(e,t){var n=t[1];return t[0].evaluate(e)/n.evaluate(e)}],"%":[Ie,[Ie,Ie],function(e,t){var n=t[1];return t[0].evaluate(e)%n.evaluate(e)}],ln2:[Ie,[],function(){return Math.LN2}],pi:[Ie,[],function(){return Math.PI}],e:[Ie,[],function(){return Math.E}],"^":[Ie,[Ie,Ie],function(e,t){var n=t[1];return Math.pow(t[0].evaluate(e),n.evaluate(e))}],sqrt:[Ie,[Ie],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Ie,[Ie],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Ie,[Ie],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Ie,[Ie],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Ie,[Ie],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Ie,[Ie],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Ie,[Ie],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Ie,[Ie],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Ie,[Ie],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Ie,[Ie],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Ie,ma(Ie),function(e,t){return Math.min.apply(Math,t.map(function(n){return n.evaluate(e)}))}],max:[Ie,ma(Ie),function(e,t){return Math.max.apply(Math,t.map(function(n){return n.evaluate(e)}))}],abs:[Ie,[Ie],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Ie,[Ie],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ie,[Ie],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Ie,[Ie],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Xe,[Je,Qe],function(e,t){var n=t[0],c=t[1];return e.properties()[n.value]===c.value}],"filter-id-==":[Xe,[Qe],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[Xe,[Je],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[Xe,[Je,Qe],function(e,t){var n=t[0],c=t[1],h=e.properties()[n.value],d=c.value;return typeof h==typeof d&&h<d}],"filter-id-<":[Xe,[Qe],function(e,t){var n=t[0],c=e.id(),h=n.value;return typeof c==typeof h&&c<h}],"filter->":[Xe,[Je,Qe],function(e,t){var n=t[0],c=t[1],h=e.properties()[n.value],d=c.value;return typeof h==typeof d&&h>d}],"filter-id->":[Xe,[Qe],function(e,t){var n=t[0],c=e.id(),h=n.value;return typeof c==typeof h&&c>h}],"filter-<=":[Xe,[Je,Qe],function(e,t){var n=t[0],c=t[1],h=e.properties()[n.value],d=c.value;return typeof h==typeof d&&h<=d}],"filter-id-<=":[Xe,[Qe],function(e,t){var n=t[0],c=e.id(),h=n.value;return typeof c==typeof h&&c<=h}],"filter->=":[Xe,[Je,Qe],function(e,t){var n=t[0],c=t[1],h=e.properties()[n.value],d=c.value;return typeof h==typeof d&&h>=d}],"filter-id->=":[Xe,[Qe],function(e,t){var n=t[0],c=e.id(),h=n.value;return typeof c==typeof h&&c>=h}],"filter-has":[Xe,[Qe],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Xe,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Xe,[lr(Je)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Xe,[lr(Qe)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Xe,[Je,lr(Qe)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[Xe,[Je,lr(Qe)],function(e,t){var n=t[0],c=t[1];return function(h,d,v,b){for(;v<=b;){var C=v+b>>1;if(d[C]===h)return!0;d[C]>h?b=C-1:v=C+1}return!1}(e.properties()[n.value],c.value,0,c.value.length-1)}],all:{type:Xe,overloads:[[[Xe,Xe],function(e,t){var n=t[1];return t[0].evaluate(e)&&n.evaluate(e)}],[ma(Xe),function(e,t){for(var n=0,c=t;n<c.length;n+=1)if(!c[n].evaluate(e))return!1;return!0}]]},any:{type:Xe,overloads:[[[Xe,Xe],function(e,t){var n=t[1];return t[0].evaluate(e)||n.evaluate(e)}],[ma(Xe),function(e,t){for(var n=0,c=t;n<c.length;n+=1)if(c[n].evaluate(e))return!0;return!1}]]},"!":[Xe,[Xe],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Xe,[Je],function(e,t){var n=e.globals&&e.globals.isSupportedScript;return!n||n(t[0].evaluate(e))}],upcase:[Je,[Je],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Je,[Je],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Je,ma(Qe),function(e,t){return t.map(function(n){return Ms(n.evaluate(e))}).join("")}],"resolved-locale":[Je,[tr],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Na=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new P,this._defaultValue=t?function(n){return n.type==="color"&&Oo(n.default)?new cr(0,0,0,0):n.type==="color"?cr.parse(n.default)||null:n.default===void 0?null:n.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function Yo(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in da}function Rs(e,t){var n=new ar(da,[],t?function(h){var d={color:Ke,string:Je,number:Ie,enum:Je,boolean:Xe,formatted:Cr,resolvedImage:Mt};return h.type==="array"?lr(d[h.value]||Qe,h.length):d[h.type]}(t):void 0),c=n.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?Ju(new Na(c,t)):Do(n.errors)}Na.prototype.evaluateWithoutErrorHandling=function(e,t,n,c,h,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=c,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},Na.prototype.evaluate=function(e,t,n,c,h,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=c,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d||null;try{var v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new zn("Expected value to be one of "+Object.keys(this._enumValues).map(function(b){return JSON.stringify(b)}).join(", ")+", but found "+JSON.stringify(v)+" instead.");return v}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console!="undefined"&&console.warn(b.message)),this._defaultValue}};var Fs=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!St(t.expression)};Fs.prototype.evaluateWithoutErrorHandling=function(e,t,n,c,h,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,c,h,d)},Fs.prototype.evaluate=function(e,t,n,c,h,d){return this._styleExpression.evaluate(e,t,n,c,h,d)};var de=function(e,t,n,c){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!St(t.expression),this.interpolationType=c};function ze(e,t){if((e=Rs(e,t)).result==="error")return e;var n=e.value.expression,c=kr(n);if(!c&&!Yi(t))return Do([new Ue("","data expressions not supported")]);var h=Mi(n,["zoom"]);if(!h&&!Vl(t))return Do([new Ue("","zoom expressions not supported")]);var d=function v(b){var C=null;if(b instanceof zo)C=v(b.result);else if(b instanceof Mo)for(var T=0,A=b.args;T<A.length&&!(C=v(A[T]));T+=1);else(b instanceof jr||b instanceof En)&&b.input instanceof F&&b.input.name==="zoom"&&(C=b);return C instanceof Ue||b.eachChild(function(z){var R=v(z);R instanceof Ue?C=R:!C&&R?C=new Ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&R&&C!==R&&(C=new Ue("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}(n);return d||h?d instanceof Ue?Do([d]):d instanceof En&&!Ji(t)?Do([new Ue("",'"interpolate" expressions cannot be used with this property')]):Ju(d?new de(c?"camera":"composite",e.value,d.labels,d instanceof En?d.interpolation:void 0):new Fs(c?"constant":"source",e.value)):Do([new Ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}de.prototype.evaluateWithoutErrorHandling=function(e,t,n,c,h,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,c,h,d)},de.prototype.evaluate=function(e,t,n,c,h,d){return this._styleExpression.evaluate(e,t,n,c,h,d)},de.prototype.interpolationFactor=function(e,t,n){return this.interpolationType?En.interpolationFactor(this.interpolationType,e,t,n):0};var et=function(e,t){this._parameters=e,this._specification=t,Fe(this,function n(c,h){var d,v,b,C=h.type==="color",T=c.stops&&typeof c.stops[0][0]=="object",A=T||!(T||c.property!==void 0),z=c.type||(Ji(h)?"exponential":"interval");if(C&&((c=Fe({},c)).stops&&(c.stops=c.stops.map(function(tt){return[tt[0],cr.parse(tt[1])]})),c.default=cr.parse(c.default?c.default:h.default)),c.colorSpace&&c.colorSpace!=="rgb"&&!Bl[c.colorSpace])throw new Error("Unknown color space: "+c.colorSpace);if(z==="exponential")d=el;else if(z==="interval")d=Qu;else if(z==="categorical"){d=Ds,v=Object.create(null);for(var R=0,U=c.stops;R<U.length;R+=1){var $=U[R];v[$[0]]=$[1]}b=typeof c.stops[0][0]}else{if(z!=="identity")throw new Error('Unknown function type "'+z+'"');d=Os}if(T){for(var H={},oe=[],te=0;te<c.stops.length;te++){var he=c.stops[te],ge=he[0].zoom;H[ge]===void 0&&(H[ge]={zoom:ge,type:c.type,property:c.property,default:c.default,stops:[]},oe.push(ge)),H[ge].stops.push([he[0].value,he[1]])}for(var xe=[],Ce=0,Oe=oe;Ce<Oe.length;Ce+=1){var je=Oe[Ce];xe.push([H[je].zoom,n(H[je],h)])}var $e={name:"linear"};return{kind:"composite",interpolationType:$e,interpolationFactor:En.interpolationFactor.bind(void 0,$e),zoomStops:xe.map(function(tt){return tt[0]}),evaluate:function(tt,bt){var rt=tt.zoom;return el({stops:xe,base:c.base},h,rt).evaluate(rt,bt)}}}if(A){var vt=z==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:vt,interpolationFactor:En.interpolationFactor.bind(void 0,vt),zoomStops:c.stops.map(function(tt){return tt[0]}),evaluate:function(tt){return d(c,h,tt.zoom,v,b)}}}return{kind:"source",evaluate:function(tt,bt){var rt=bt&&bt.properties?bt.properties[c.property]:void 0;return rt===void 0?as(c.default,h.default):d(c,h,rt,v,b)}}}(this._parameters,this._specification))};function gt(e){var t=e.key,n=e.value,c=e.valueSpec||{},h=e.objectElementValidators||{},d=e.style,v=e.styleSpec,b=[],C=Dr(n);if(C!=="object")return[new Q(t,n,"object expected, "+C+" found")];for(var T in n){var A=T.split(".")[0],z=c[A]||c["*"],R=void 0;if(h[A])R=h[A];else if(c[A])R=qt;else if(h["*"])R=h["*"];else{if(!c["*"]){b.push(new Q(t,n[T],'unknown property "'+T+'"'));continue}R=qt}b=b.concat(R({key:(t&&t+".")+T,value:n[T],valueSpec:z,style:d,styleSpec:v,object:n,objectKey:T},n))}for(var U in c)h[U]||c[U].required&&c[U].default===void 0&&n[U]===void 0&&b.push(new Q(t,n,'missing required property "'+U+'"'));return b}function Gr(e){var t=e.value,n=e.valueSpec,c=e.style,h=e.styleSpec,d=e.key,v=e.arrayElementValidator||qt;if(Dr(t)!=="array")return[new Q(d,t,"array expected, "+Dr(t)+" found")];if(n.length&&t.length!==n.length)return[new Q(d,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new Q(d,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var b={type:n.value,values:n.values};h.$version<7&&(b.function=n.function),Dr(n.value)==="object"&&(b=n.value);for(var C=[],T=0;T<t.length;T++)C=C.concat(v({array:t,arrayIndex:T,value:t[T],valueSpec:b,style:c,styleSpec:h,key:d+"["+T+"]"}));return C}function pr(e){var t=e.key,n=e.value,c=e.valueSpec,h=Dr(n);return h==="number"&&n!=n&&(h="NaN"),h!=="number"?[new Q(t,n,"number expected, "+h+" found")]:"minimum"in c&&n<c.minimum?[new Q(t,n,n+" is less than the minimum value "+c.minimum)]:"maximum"in c&&n>c.maximum?[new Q(t,n,n+" is greater than the maximum value "+c.maximum)]:[]}function an(e){var t,n,c,h=e.valueSpec,d=Ne(e.value.type),v={},b=d!=="categorical"&&e.value.property===void 0,C=!b,T=Dr(e.value.stops)==="array"&&Dr(e.value.stops[0])==="array"&&Dr(e.value.stops[0][0])==="object",A=gt({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(U){if(d==="identity")return[new Q(U.key,U.value,'identity function may not have a "stops" property')];var $=[],H=U.value;return $=$.concat(Gr({key:U.key,value:H,valueSpec:U.valueSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:z})),Dr(H)==="array"&&H.length===0&&$.push(new Q(U.key,H,"array must have at least one stop")),$},default:function(U){return qt({key:U.key,value:U.value,valueSpec:h,style:U.style,styleSpec:U.styleSpec})}}});return d==="identity"&&b&&A.push(new Q(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||A.push(new Q(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!Ji(e.valueSpec)&&A.push(new Q(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(C&&!Yi(e.valueSpec)?A.push(new Q(e.key,e.value,"property functions not supported")):b&&!Vl(e.valueSpec)&&A.push(new Q(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!T||e.value.property!==void 0||A.push(new Q(e.key,e.value,'"property" property is required')),A;function z(U){var $=[],H=U.value,oe=U.key;if(Dr(H)!=="array")return[new Q(oe,H,"array expected, "+Dr(H)+" found")];if(H.length!==2)return[new Q(oe,H,"array length 2 expected, length "+H.length+" found")];if(T){if(Dr(H[0])!=="object")return[new Q(oe,H,"object expected, "+Dr(H[0])+" found")];if(H[0].zoom===void 0)return[new Q(oe,H,"object stop key must have zoom")];if(H[0].value===void 0)return[new Q(oe,H,"object stop key must have value")];if(c&&c>Ne(H[0].zoom))return[new Q(oe,H[0].zoom,"stop zoom values must appear in ascending order")];Ne(H[0].zoom)!==c&&(c=Ne(H[0].zoom),n=void 0,v={}),$=$.concat(gt({key:oe+"[0]",value:H[0],valueSpec:{zoom:{}},style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:pr,value:R}}))}else $=$.concat(R({key:oe+"[0]",value:H[0],valueSpec:{},style:U.style,styleSpec:U.styleSpec},H));return Yo(Pe(H[1]))?$.concat([new Q(oe+"[1]",H[1],"expressions are not allowed in function stops.")]):$.concat(qt({key:oe+"[1]",value:H[1],valueSpec:h,style:U.style,styleSpec:U.styleSpec}))}function R(U,$){var H=Dr(U.value),oe=Ne(U.value),te=U.value!==null?U.value:$;if(t){if(H!==t)return[new Q(U.key,te,H+" stop domain type must match previous stop domain type "+t)]}else t=H;if(H!=="number"&&H!=="string"&&H!=="boolean")return[new Q(U.key,te,"stop domain value must be a number, string, or boolean")];if(H!=="number"&&d!=="categorical"){var he="number expected, "+H+" found";return Yi(h)&&d===void 0&&(he+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Q(U.key,te,he)]}return d!=="categorical"||H!=="number"||isFinite(oe)&&Math.floor(oe)===oe?d!=="categorical"&&H==="number"&&n!==void 0&&oe<n?[new Q(U.key,te,"stop domain values must appear in ascending order")]:(n=oe,d==="categorical"&&oe in v?[new Q(U.key,te,"stop domain values must be unique")]:(v[oe]=!0,[])):[new Q(U.key,te,"integer expected, found "+oe)]}}function Wr(e){var t=(e.expressionContext==="property"?ze:Rs)(Pe(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(c){return new Q(""+e.key+c.key,e.value,c.message)});var n=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!n.outputDefined())return[new Q(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!St(n))return[new Q(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!St(n))return[new Q(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Mi(n,["zoom","feature-state"]))return[new Q(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!kr(n))return[new Q(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ci(e){var t=e.key,n=e.value,c=e.valueSpec,h=[];return Array.isArray(c.values)?c.values.indexOf(Ne(n))===-1&&h.push(new Q(t,n,"expected one of ["+c.values.join(", ")+"], "+JSON.stringify(n)+" found")):Object.keys(c.values).indexOf(Ne(n))===-1&&h.push(new Q(t,n,"expected one of ["+Object.keys(c.values).join(", ")+"], "+JSON.stringify(n)+" found")),h}function cn(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var c=n[t];if(!cn(c)&&typeof c!="boolean")return!1}return!0;default:return!0}}et.deserialize=function(e){return new et(e._parameters,e._specification)},et.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var vn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zi(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};cn(e)||(e=Un(e));var t=Rs(e,vn);if(t.result==="error")throw new Error(t.value.map(function(n){return n.key+": "+n.message}).join(", "));return{filter:function(n,c,h){return t.value.evaluate(n,c,{},h)},needGeometry:function n(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(var h=1;h<c.length;h++)if(n(c[h]))return!0;return!1}(e)}}function Jo(e,t){return e<t?-1:e>t?1:0}function Un(e){if(!e)return!0;var t,n=e[0];return e.length<=1?n!=="any":n==="=="?_o(e[1],e[2],"=="):n==="!="?Qo(_o(e[1],e[2],"==")):n==="<"||n===">"||n==="<="||n===">="?_o(e[1],e[2],n):n==="any"?(t=e.slice(1),["any"].concat(t.map(Un))):n==="all"?["all"].concat(e.slice(1).map(Un)):n==="none"?["all"].concat(e.slice(1).map(Un).map(Qo)):n==="in"?ja(e[1],e.slice(2)):n==="!in"?Qo(ja(e[1],e.slice(2))):n==="has"?Bs(e[1]):n==="!has"?Qo(Bs(e[1])):n!=="within"||e}function _o(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function ja(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(n){return typeof n!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Jo)]]:["filter-in-small",e,["literal",t]]}}function Bs(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Qo(e){return["!",e]}function Va(e){return cn(Pe(e.value))?Wr(Fe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(n){var c=n.value,h=n.key;if(Dr(c)!=="array")return[new Q(h,c,"array expected, "+Dr(c)+" found")];var d,v=n.styleSpec,b=[];if(c.length<1)return[new Q(h,c,"filter array must have at least 1 element")];switch(b=b.concat(ci({key:h+"[0]",value:c[0],valueSpec:v.filter_operator,style:n.style,styleSpec:n.styleSpec})),Ne(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&Ne(c[1])==="$type"&&b.push(new Q(h,c,'"$type" cannot be use with operator "'+c[0]+'"'));case"==":case"!=":c.length!==3&&b.push(new Q(h,c,'filter array for operator "'+c[0]+'" must have 3 elements'));case"in":case"!in":c.length>=2&&(d=Dr(c[1]))!=="string"&&b.push(new Q(h+"[1]",c[1],"string expected, "+d+" found"));for(var C=2;C<c.length;C++)d=Dr(c[C]),Ne(c[1])==="$type"?b=b.concat(ci({key:h+"["+C+"]",value:c[C],valueSpec:v.geometry_type,style:n.style,styleSpec:n.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&b.push(new Q(h+"["+C+"]",c[C],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var T=1;T<c.length;T++)b=b.concat(t({key:h+"["+T+"]",value:c[T],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":d=Dr(c[1]),c.length!==2?b.push(new Q(h,c,'filter array for "'+c[0]+'" operator must have 2 elements')):d!=="string"&&b.push(new Q(h+"[1]",c[1],"string expected, "+d+" found"));break;case"within":d=Dr(c[1]),c.length!==2?b.push(new Q(h,c,'filter array for "'+c[0]+'" operator must have 2 elements')):d!=="object"&&b.push(new Q(h+"[1]",c[1],"object expected, "+d+" found"))}return b}(e)}function uu(e,t){var n=e.key,c=e.style,h=e.styleSpec,d=e.value,v=e.objectKey,b=h[t+"_"+e.layerType];if(!b)return[];var C=v.match(/^(.*)-transition$/);if(t==="paint"&&C&&b[C[1]]&&b[C[1]].transition)return qt({key:n,value:d,valueSpec:h.transition,style:c,styleSpec:h});var T,A=e.valueSpec||b[v];if(!A)return[new Q(n,d,'unknown property "'+v+'"')];if(Dr(d)==="string"&&Yi(A)&&!A.tokens&&(T=/^{([^}]+)}$/.exec(d)))return[new Q(n,d,'"'+v+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(T[1])+" }`.")];var z=[];return e.layerType==="symbol"&&(v==="text-field"&&c&&!c.glyphs&&z.push(new Q(n,d,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&Oo(Pe(d))&&Ne(d.type)==="identity"&&z.push(new Q(n,d,'"text-font" does not support identity functions'))),z.concat(qt({key:e.key,value:d,valueSpec:A,style:c,styleSpec:h,expressionContext:"property",propertyType:t,propertyKey:v}))}function tl(e){return uu(e,"paint")}function Us(e){return uu(e,"layout")}function Ur(e){var t=[],n=e.value,c=e.key,h=e.style,d=e.styleSpec;n.type||n.ref||t.push(new Q(c,n,'either "type" or "ref" is required'));var v,b=Ne(n.type),C=Ne(n.ref);if(n.id)for(var T=Ne(n.id),A=0;A<e.arrayIndex;A++){var z=h.layers[A];Ne(z.id)===T&&t.push(new Q(c,n.id,'duplicate layer id "'+n.id+'", previously used at line '+z.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function($){$ in n&&t.push(new Q(c,n[$],'"'+$+'" is prohibited for ref layers'))}),h.layers.forEach(function($){Ne($.id)===C&&(v=$)}),v?v.ref?t.push(new Q(c,n.ref,"ref cannot reference another ref layer")):b=Ne(v.type):t.push(new Q(c,n.ref,'ref layer "'+C+'" not found'));else if(b!=="background")if(n.source){var R=h.sources&&h.sources[n.source],U=R&&Ne(R.type);R?U==="vector"&&b==="raster"?t.push(new Q(c,n.source,'layer "'+n.id+'" requires a raster source')):U==="raster"&&b!=="raster"?t.push(new Q(c,n.source,'layer "'+n.id+'" requires a vector source')):U!=="vector"||n["source-layer"]?U==="raster-dem"&&b!=="hillshade"?t.push(new Q(c,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!n.paint||!n.paint["line-gradient"]||U==="geojson"&&R.lineMetrics||t.push(new Q(c,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Q(c,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new Q(c,n.source,'source "'+n.source+'" not found'))}else t.push(new Q(c,n,'missing required property "source"'));return t=t.concat(gt({key:c,value:n,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return qt({key:c+".type",value:n.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:Va,layout:function($){return gt({layer:n,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{"*":function(H){return Us(Fe({layerType:b},H))}}})},paint:function($){return gt({layer:n,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{"*":function(H){return tl(Fe({layerType:b},H))}}})}}}))}function yr(e){var t=e.value,n=e.key,c=Dr(t);return c!=="string"?[new Q(n,t,"string expected, "+c+" found")]:[]}var Ar={promoteId:function(e){var t=e.key,n=e.value;if(Dr(n)==="string")return yr({key:t,value:n});var c=[];for(var h in n)c.push.apply(c,yr({key:t+"."+h,value:n[h]}));return c}};function xo(e){var t=e.value,n=e.key,c=e.styleSpec,h=e.style;if(!t.type)return[new Q(n,t,'"type" is required')];var d,v=Ne(t.type);switch(v){case"vector":case"raster":case"raster-dem":return gt({key:n,value:t,valueSpec:c["source_"+v.replace("-","_")],style:e.style,styleSpec:c,objectElementValidators:Ar});case"geojson":if(d=gt({key:n,value:t,valueSpec:c.source_geojson,style:h,styleSpec:c,objectElementValidators:Ar}),t.cluster)for(var b in t.clusterProperties){var C=t.clusterProperties[b],T=C[0],A=typeof T=="string"?[T,["accumulated"],["get",b]]:T;d.push.apply(d,Wr({key:n+"."+b+".map",value:C[1],expressionContext:"cluster-map"})),d.push.apply(d,Wr({key:n+"."+b+".reduce",value:A,expressionContext:"cluster-reduce"}))}return d;case"video":return gt({key:n,value:t,valueSpec:c.source_video,style:h,styleSpec:c});case"image":return gt({key:n,value:t,valueSpec:c.source_image,style:h,styleSpec:c});case"canvas":return[new Q(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ci({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:c})}}function ea(e){var t=e.value,n=e.styleSpec,c=n.light,h=e.style,d=[],v=Dr(t);if(t===void 0)return d;if(v!=="object")return d.concat([new Q("light",t,"object expected, "+v+" found")]);for(var b in t){var C=b.match(/^(.*)-transition$/);d=d.concat(C&&c[C[1]]&&c[C[1]].transition?qt({key:b,value:t[b],valueSpec:n.transition,style:h,styleSpec:n}):c[b]?qt({key:b,value:t[b],valueSpec:c[b],style:h,styleSpec:n}):[new Q(b,t[b],'unknown property "'+b+'"')])}return d}var Ln={"*":function(){return[]},array:Gr,boolean:function(e){var t=e.value,n=e.key,c=Dr(t);return c!=="boolean"?[new Q(n,t,"boolean expected, "+c+" found")]:[]},number:pr,color:function(e){var t=e.key,n=e.value,c=Dr(n);return c!=="string"?[new Q(t,n,"color expected, "+c+" found")]:It(n)===null?[new Q(t,n,'color expected, "'+n+'" found')]:[]},constants:me,enum:ci,filter:Va,function:an,layer:Ur,object:gt,source:xo,light:ea,string:yr,formatted:function(e){return yr(e).length===0?[]:Wr(e)},resolvedImage:function(e){return yr(e).length===0?[]:Wr(e)}};function qt(e){var t=e.value,n=e.valueSpec,c=e.styleSpec;return n.expression&&Oo(Ne(t))?an(e):n.expression&&Yo(Pe(t))?Wr(e):n.type&&Ln[n.type]?Ln[n.type](e):gt(Fe({},e,{valueSpec:n.type?c[n.type]:n}))}function mr(e){var t=e.value,n=e.key,c=yr(e);return c.length||(t.indexOf("{fontstack}")===-1&&c.push(new Q(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&c.push(new Q(n,t,'"glyphs" url must include a "{range}" token'))),c}function Kn(e,t){t===void 0&&(t=j);var n=[];return n=n.concat(qt({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:mr,"*":function(){return[]}}})),e.constants&&(n=n.concat(me({key:"constants",value:e.constants,style:e,styleSpec:t}))),ya(n)}function ya(e){return[].concat(e).sort(function(t,n){return t.line-n.line})}function bo(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return ya(e.apply(this,t))}}Kn.source=bo(xo),Kn.light=bo(ea),Kn.layer=bo(Ur),Kn.filter=bo(Va),Kn.paintProperty=bo(tl),Kn.layoutProperty=bo(Us);var Qi=Kn,Zl=Qi.light,lu=Qi.paintProperty,qa=Qi.layoutProperty;function va(e,t){var n=!1;if(t&&t.length)for(var c=0,h=t;c<h.length;c+=1)e.fire(new se(new Error(h[c].message))),n=!0;return n}var eo=pn;function pn(e,t,n){var c=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var h=new Int32Array(this.arrayBuffer);e=h[0],this.d=(t=h[1])+2*(n=h[2]);for(var d=0;d<this.d*this.d;d++){var v=h[3+d],b=h[3+d+1];c.push(v===b?null:h.subarray(v,b))}var C=h[3+c.length+1];this.keys=h.subarray(h[3+c.length],C),this.bboxes=h.subarray(C),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var T=0;T<this.d*this.d;T++)c.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var A=n/t*e;this.min=-A,this.max=e+A}pn.prototype.insert=function(e,t,n,c,h){this._forEachCell(t,n,c,h,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(c),this.bboxes.push(h)},pn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},pn.prototype._insertCell=function(e,t,n,c,h,d){this.cells[h].push(d)},pn.prototype.query=function(e,t,n,c,h){var d=this.min,v=this.max;if(e<=d&&t<=d&&v<=n&&v<=c&&!h)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(e,t,n,c,this._queryCell,b,{},h),b},pn.prototype._queryCell=function(e,t,n,c,h,d,v,b){var C=this.cells[h];if(C!==null)for(var T=this.keys,A=this.bboxes,z=0;z<C.length;z++){var R=C[z];if(v[R]===void 0){var U=4*R;(b?b(A[U+0],A[U+1],A[U+2],A[U+3]):e<=A[U+2]&&t<=A[U+3]&&n>=A[U+0]&&c>=A[U+1])?(v[R]=!0,d.push(T[R])):v[R]=!1}}},pn.prototype._forEachCell=function(e,t,n,c,h,d,v,b){for(var C=this._convertToCellCoord(e),T=this._convertToCellCoord(t),A=this._convertToCellCoord(n),z=this._convertToCellCoord(c),R=C;R<=A;R++)for(var U=T;U<=z;U++){var $=this.d*U+R;if((!b||b(this._convertFromCellCoord(R),this._convertFromCellCoord(U),this._convertFromCellCoord(R+1),this._convertFromCellCoord(U+1)))&&h.call(this,e,t,n,c,$,d,v,b))return}},pn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},pn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},pn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,c=0;c<this.cells.length;c++)n+=this.cells[c].length;var h=new Int32Array(t+n+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var d=t,v=0;v<e.length;v++){var b=e[v];h[3+v]=d,h.set(b,d),d+=b.length}return h[3+e.length]=d,h.set(this.keys,d),h[3+e.length+1]=d+=this.keys.length,h.set(this.bboxes,d),d+=this.bboxes.length,h.buffer};var ga=X.ImageData,Ns=X.ImageBitmap,Cn={};function lt(e,t,n){n===void 0&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Cn[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var to in lt("Object",Object),eo.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},eo.deserialize=function(e){return new eo(e.buffer)},lt("Grid",eo),lt("Color",cr),lt("Error",Error),lt("ResolvedImage",Xn),lt("StylePropertyFunction",et),lt("StyleExpression",Na,{omit:["_evaluator"]}),lt("ZoomDependentExpression",de),lt("ZoomConstantExpression",Fs),lt("CompoundExpression",F,{omit:["_evaluate"]}),da)da[to]._classRegistryKey||lt("Expression_"+to,da[to]);function Gl(e){return e&&typeof ArrayBuffer!="undefined"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function cu(e){return Ns&&e instanceof Ns}function ta(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Gl(e)||cu(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof ga)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var c=[],h=0,d=e;h<d.length;h+=1)c.push(ta(d[h],t));return c}if(typeof e=="object"){var v=e.constructor,b=v._classRegistryKey;if(!b)throw new Error("can't serialize object of unregistered class");var C=v.serialize?v.serialize(e,t):{};if(!v.serialize){for(var T in e)if(e.hasOwnProperty(T)&&!(Cn[b].omit.indexOf(T)>=0)){var A=e[T];C[T]=Cn[b].shallow.indexOf(T)>=0?A:ta(A,t)}e instanceof Error&&(C.message=e.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return b!=="Object"&&(C.$name=b),C}throw new Error("can't serialize object of type "+typeof e)}function ro(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Gl(e)||cu(e)||ArrayBuffer.isView(e)||e instanceof ga)return e;if(Array.isArray(e))return e.map(ro);if(typeof e=="object"){var t=e.$name||"Object",n=Cn[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var c=Object.create(n.prototype),h=0,d=Object.keys(e);h<d.length;h+=1){var v=d[h];if(v!=="$name"){var b=e[v];c[v]=Cn[t].shallow.indexOf(v)>=0?b:ro(b)}}return c}throw new Error("can't deserialize object of type "+typeof e)}var lp=function(){this.first=!0};lp.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var He={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function cp(e){for(var t=0,n=e;t<n.length;t+=1)if(Wl(n[t].charCodeAt(0)))return!0;return!1}function Wl(e){return!(e!==746&&e!==747&&(e<4352||!(He["Bopomofo Extended"](e)||He.Bopomofo(e)||He["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||He["CJK Compatibility Ideographs"](e)||He["CJK Compatibility"](e)||He["CJK Radicals Supplement"](e)||He["CJK Strokes"](e)||!(!He["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||He["CJK Unified Ideographs Extension A"](e)||He["CJK Unified Ideographs"](e)||He["Enclosed CJK Letters and Months"](e)||He["Hangul Compatibility Jamo"](e)||He["Hangul Jamo Extended-A"](e)||He["Hangul Jamo Extended-B"](e)||He["Hangul Jamo"](e)||He["Hangul Syllables"](e)||He.Hiragana(e)||He["Ideographic Description Characters"](e)||He.Kanbun(e)||He["Kangxi Radicals"](e)||He["Katakana Phonetic Extensions"](e)||He.Katakana(e)&&e!==12540||!(!He["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!He["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||He["Unified Canadian Aboriginal Syllabics"](e)||He["Unified Canadian Aboriginal Syllabics Extended"](e)||He["Vertical Forms"](e)||He["Yijing Hexagram Symbols"](e)||He["Yi Syllables"](e)||He["Yi Radicals"](e))))}function pp(e){return!(Wl(e)||function(t){return!!(He["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||He["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||He["Letterlike Symbols"](t)||He["Number Forms"](t)||He["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||He["Control Pictures"](t)&&t!==9251||He["Optical Character Recognition"](t)||He["Enclosed Alphanumerics"](t)||He["Geometric Shapes"](t)||He["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||He["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||He["CJK Symbols and Punctuation"](t)||He.Katakana(t)||He["Private Use Area"](t)||He["CJK Compatibility Forms"](t)||He["Small Form Variants"](t)||He["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function Ro(e){return e>=1424&&e<=2303||He["Arabic Presentation Forms-A"](e)||He["Arabic Presentation Forms-B"](e)}function no(e,t){return!(!t&&Ro(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||He.Khmer(e))}function $l(e){for(var t=0,n=e;t<n.length;t+=1)if(Ro(n[t].charCodeAt(0)))return!0;return!1}var Xl=null,io="unavailable",Za=null,ef=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(io="error"),Xl&&Xl(e)};function rl(){hp.fire(new K("pluginStateChange",{pluginStatus:io,pluginURL:Za}))}var hp=new pe,fp=function(){return io},ra=function(){if(io!=="deferred"||!Za)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");io="loading",rl(),Za&&ns({url:Za},function(e){e?ef(e):(io="loaded",rl())})},wo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return io==="loaded"||wo.applyArabicShaping!=null},isLoading:function(){return io==="loading"},setState:function(e){io=e.pluginStatus,Za=e.pluginURL},isParsed:function(){return wo.applyArabicShaping!=null&&wo.processBidirectionalText!=null&&wo.processStyledBidirectionalText!=null},getPluginURL:function(){return Za}},Jt=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new lp,this.transition={})};Jt.prototype.isSupportedScript=function(e){return function(t,n){for(var c=0,h=t;c<h.length;c+=1)if(!no(h[c].charCodeAt(0),n))return!1;return!0}(e,wo.isLoaded())},Jt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Jt.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}};var _a=function(e,t){this.property=e,this.value=t,this.expression=function(n,c){if(Oo(n))return new et(n,c);if(Yo(n)){var h=ze(n,c);if(h.result==="error")throw new Error(h.value.map(function(v){return v.key+": "+v.message}).join(", "));return h.value}var d=n;return typeof n=="string"&&c.type==="color"&&(d=cr.parse(n)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};_a.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},_a.prototype.possiblyEvaluate=function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)};var Fo=function(e){this.property=e,this.value=new _a(e,void 0)};Fo.prototype.transitioned=function(e,t){return new js(this.property,this.value,t,ae({},e.transition,this.transition),e.now)},Fo.prototype.untransitioned=function(){return new js(this.property,this.value,null,{},0)};var oi=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};oi.prototype.getValue=function(e){return wr(this._values[e].value.value)},oi.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Fo(this._values[e].property)),this._values[e].value=new _a(this._values[e].property,t===null?void 0:wr(t))},oi.prototype.getTransition=function(e){return wr(this._values[e].transition)},oi.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Fo(this._values[e].property)),this._values[e].transition=wr(t)||void 0},oi.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var c=n[t],h=this.getValue(c);h!==void 0&&(e[c]=h);var d=this.getTransition(c);d!==void 0&&(e[c+"-transition"]=d)}return e},oi.prototype.transitioned=function(e,t){for(var n=new ss(this._properties),c=0,h=Object.keys(this._values);c<h.length;c+=1){var d=h[c];n._values[d]=this._values[d].transitioned(e,t._values[d])}return n},oi.prototype.untransitioned=function(){for(var e=new ss(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var c=n[t];e._values[c]=this._values[c].untransitioned()}return e};var js=function(e,t,n,c,h){this.property=e,this.value=t,this.begin=h+c.delay||0,this.end=this.begin+c.duration||0,e.specification.transition&&(c.delay||c.duration)&&(this.prior=n)};js.prototype.possiblyEvaluate=function(e,t,n){var c=e.now||0,h=this.value.possiblyEvaluate(e,t,n),d=this.prior;if(d){if(c>this.end)return this.prior=null,h;if(this.value.isDataDriven())return this.prior=null,h;if(c<this.begin)return d.possiblyEvaluate(e,t,n);var v=(c-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,n),h,function(b){if(b<=0)return 0;if(b>=1)return 1;var C=b*b,T=C*b;return 4*(b<.5?T:3*(b-C)+T-.75)}(v))}return h};var ss=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};ss.prototype.possiblyEvaluate=function(e,t,n){for(var c=new nl(this._properties),h=0,d=Object.keys(this._values);h<d.length;h+=1){var v=d[h];c._values[v]=this._values[v].possiblyEvaluate(e,t,n)}return c},ss.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var na=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};na.prototype.getValue=function(e){return wr(this._values[e].value)},na.prototype.setValue=function(e,t){this._values[e]=new _a(this._values[e].property,t===null?void 0:wr(t))},na.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var c=n[t],h=this.getValue(c);h!==void 0&&(e[c]=h)}return e},na.prototype.possiblyEvaluate=function(e,t,n){for(var c=new nl(this._properties),h=0,d=Object.keys(this._values);h<d.length;h+=1){var v=d[h];c._values[v]=this._values[v].possiblyEvaluate(e,t,n)}return c};var vi=function(e,t,n){this.property=e,this.value=t,this.parameters=n};vi.prototype.isConstant=function(){return this.value.kind==="constant"},vi.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},vi.prototype.evaluate=function(e,t,n,c){return this.property.evaluate(this.value,this.parameters,e,t,n,c)};var nl=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};nl.prototype.get=function(e){return this._values[e]};var _t=function(e){this.specification=e};_t.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},_t.prototype.interpolate=function(e,t,n){var c=Da[this.specification.type];return c?c(e,t,n):e};var ft=function(e,t){this.specification=e,this.overrides=t};ft.prototype.possiblyEvaluate=function(e,t,n,c){return new vi(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},n,c)}:e.expression,t)},ft.prototype.interpolate=function(e,t,n){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new vi(this,{kind:"constant",value:void 0},e.parameters);var c=Da[this.specification.type];return c?new vi(this,{kind:"constant",value:c(e.value.value,t.value.value,n)},e.parameters):e},ft.prototype.evaluate=function(e,t,n,c,h,d){return e.kind==="constant"?e.value:e.evaluate(t,n,c,h,d)};var Kl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(n,c,h,d){if(n.value===void 0)return new vi(this,{kind:"constant",value:void 0},c);if(n.expression.kind==="constant"){var v=n.expression.evaluate(c,null,{},h,d),b=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,C=this._calculate(b,b,b,c);return new vi(this,{kind:"constant",value:C},c)}if(n.expression.kind==="camera"){var T=this._calculate(n.expression.evaluate({zoom:c.zoom-1}),n.expression.evaluate({zoom:c.zoom}),n.expression.evaluate({zoom:c.zoom+1}),c);return new vi(this,{kind:"constant",value:T},c)}return new vi(this,n.expression,c)},t.prototype.evaluate=function(n,c,h,d,v,b){if(n.kind==="source"){var C=n.evaluate(c,h,d,v,b);return this._calculate(C,C,C,c)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(c.zoom)-1},h,d),n.evaluate({zoom:Math.floor(c.zoom)},h,d),n.evaluate({zoom:Math.floor(c.zoom)+1},h,d),c):n.value},t.prototype._calculate=function(n,c,h,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:n,to:c}:{from:h,to:c}},t.prototype.interpolate=function(n){return n},t}(ft),gi=function(e){this.specification=e};gi.prototype.possiblyEvaluate=function(e,t,n,c){if(e.value!==void 0){if(e.expression.kind==="constant"){var h=e.expression.evaluate(t,null,{},n,c);return this._calculate(h,h,h,t)}return this._calculate(e.expression.evaluate(new Jt(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Jt(Math.floor(t.zoom),t)),e.expression.evaluate(new Jt(Math.floor(t.zoom+1),t)),t)}},gi.prototype._calculate=function(e,t,n,c){return c.zoom>c.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},gi.prototype.interpolate=function(e){return e};var ia=function(e){this.specification=e};ia.prototype.possiblyEvaluate=function(e,t,n,c){return!!e.expression.evaluate(t,null,{},n,c)},ia.prototype.interpolate=function(){return!1};var ai=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var n=e[t];n.specification.overridable&&this.overridableProperties.push(t);var c=this.defaultPropertyValues[t]=new _a(n,void 0),h=this.defaultTransitionablePropertyValues[t]=new Fo(n);this.defaultTransitioningPropertyValues[t]=h.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=c.possiblyEvaluate({})}};lt("DataDrivenProperty",ft),lt("DataConstantProperty",_t),lt("CrossFadedDataDrivenProperty",Kl),lt("CrossFadedProperty",gi),lt("ColorRampProperty",ia);var xa=function(e){function t(n,c){if(e.call(this),this.id=n.id,this.type=n.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},n.type!=="custom"&&(this.metadata=(n=n).metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),c.layout&&(this._unevaluatedLayout=new na(c.layout)),c.paint)){for(var h in this._transitionablePaint=new oi(c.paint),n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(var d in n.layout)this.setLayoutProperty(d,n.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new nl(c.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)},t.prototype.setLayoutProperty=function(n,c,h){h===void 0&&(h={}),c!=null&&this._validate(qa,"layers."+this.id+".layout."+n,n,c,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,c):this.visibility=c)},t.prototype.getPaintProperty=function(n){return Ot(n,"-transition")?this._transitionablePaint.getTransition(n.slice(0,-"-transition".length)):this._transitionablePaint.getValue(n)},t.prototype.setPaintProperty=function(n,c,h){if(h===void 0&&(h={}),c!=null&&this._validate(lu,"layers."+this.id+".paint."+n,n,c,h))return!1;if(Ot(n,"-transition"))return this._transitionablePaint.setTransition(n.slice(0,-"-transition".length),c||void 0),!1;var d=this._transitionablePaint._values[n],v=d.property.specification["property-type"]==="cross-faded-data-driven",b=d.value.isDataDriven(),C=d.value;this._transitionablePaint.setValue(n,c),this._handleSpecialPaintPropertyUpdate(n);var T=this._transitionablePaint._values[n].value;return T.isDataDriven()||b||v||this._handleOverridablePaintPropertyUpdate(n,C,T)},t.prototype._handleSpecialPaintPropertyUpdate=function(n){},t.prototype._handleOverridablePaintPropertyUpdate=function(n,c,h){return!1},t.prototype.isHidden=function(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(n,c){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,c)},t.prototype.serialize=function(){var n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),er(n,function(c,h){return!(c===void 0||h==="layout"&&!Object.keys(c).length||h==="paint"&&!Object.keys(c).length)})},t.prototype._validate=function(n,c,h,d,v){return v===void 0&&(v={}),(!v||v.validate!==!1)&&va(this,n.call(Qi,{key:c,layerType:this.type,objectKey:h,value:d,styleSpec:j,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var n in this.paint._values){var c=this.paint.get(n);if(c instanceof vi&&Yi(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1},t}(pe),dp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Hl=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Er=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Hn(e,t){t===void 0&&(t=1);var n=0,c=0;return{members:e.map(function(h){var d=dp[h.type].BYTES_PER_ELEMENT,v=n=tf(n,Math.max(t,d)),b=h.components||1;return c=Math.max(c,d),n+=d*b,{name:h.name,type:h.type,components:b,offset:v}}),size:tf(n,Math.max(c,t)),alignment:t}}function tf(e,t){return Math.ceil(e/t)*t}Er.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Er.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Er.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Er.prototype.clear=function(){this.length=0},Er.prototype.resize=function(e){this.reserve(e),this.length=e},Er.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Er.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Vs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c){var h=this.length;return this.resize(h+1),this.emplace(h,n,c)},t.prototype.emplace=function(n,c,h){var d=2*n;return this.int16[d+0]=c,this.int16[d+1]=h,n},t}(Er);Vs.prototype.bytesPerElement=4,lt("StructArrayLayout2i4",Vs);var mp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,n,c,h,d)},t.prototype.emplace=function(n,c,h,d,v){var b=4*n;return this.int16[b+0]=c,this.int16[b+1]=h,this.int16[b+2]=d,this.int16[b+3]=v,n},t}(Er);mp.prototype.bytesPerElement=8,lt("StructArrayLayout4i8",mp);var Ga=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d,v,b){var C=this.length;return this.resize(C+1),this.emplace(C,n,c,h,d,v,b)},t.prototype.emplace=function(n,c,h,d,v,b,C){var T=6*n;return this.int16[T+0]=c,this.int16[T+1]=h,this.int16[T+2]=d,this.int16[T+3]=v,this.int16[T+4]=b,this.int16[T+5]=C,n},t}(Er);Ga.prototype.bytesPerElement=12,lt("StructArrayLayout2i4i12",Ga);var oo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d,v,b){var C=this.length;return this.resize(C+1),this.emplace(C,n,c,h,d,v,b)},t.prototype.emplace=function(n,c,h,d,v,b,C){var T=4*n,A=8*n;return this.int16[T+0]=c,this.int16[T+1]=h,this.uint8[A+4]=d,this.uint8[A+5]=v,this.uint8[A+6]=b,this.uint8[A+7]=C,n},t}(Er);oo.prototype.bytesPerElement=8,lt("StructArrayLayout2i4ub8",oo);var pu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c){var h=this.length;return this.resize(h+1),this.emplace(h,n,c)},t.prototype.emplace=function(n,c,h){var d=2*n;return this.float32[d+0]=c,this.float32[d+1]=h,n},t}(Er);pu.prototype.bytesPerElement=8,lt("StructArrayLayout2f8",pu);var ba=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d,v,b,C,T,A,z){var R=this.length;return this.resize(R+1),this.emplace(R,n,c,h,d,v,b,C,T,A,z)},t.prototype.emplace=function(n,c,h,d,v,b,C,T,A,z,R){var U=10*n;return this.uint16[U+0]=c,this.uint16[U+1]=h,this.uint16[U+2]=d,this.uint16[U+3]=v,this.uint16[U+4]=b,this.uint16[U+5]=C,this.uint16[U+6]=T,this.uint16[U+7]=A,this.uint16[U+8]=z,this.uint16[U+9]=R,n},t}(Er);ba.prototype.bytesPerElement=20,lt("StructArrayLayout10ui20",ba);var Yl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d,v,b,C,T,A,z,R,U){var $=this.length;return this.resize($+1),this.emplace($,n,c,h,d,v,b,C,T,A,z,R,U)},t.prototype.emplace=function(n,c,h,d,v,b,C,T,A,z,R,U,$){var H=12*n;return this.int16[H+0]=c,this.int16[H+1]=h,this.int16[H+2]=d,this.int16[H+3]=v,this.uint16[H+4]=b,this.uint16[H+5]=C,this.uint16[H+6]=T,this.uint16[H+7]=A,this.int16[H+8]=z,this.int16[H+9]=R,this.int16[H+10]=U,this.int16[H+11]=$,n},t}(Er);Yl.prototype.bytesPerElement=24,lt("StructArrayLayout4i4ui4i24",Yl);var hu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h){var d=this.length;return this.resize(d+1),this.emplace(d,n,c,h)},t.prototype.emplace=function(n,c,h,d){var v=3*n;return this.float32[v+0]=c,this.float32[v+1]=h,this.float32[v+2]=d,n},t}(Er);hu.prototype.bytesPerElement=12,lt("StructArrayLayout3f12",hu);var il=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var c=this.length;return this.resize(c+1),this.emplace(c,n)},t.prototype.emplace=function(n,c){return this.uint32[1*n+0]=c,n},t}(Er);il.prototype.bytesPerElement=4,lt("StructArrayLayout1ul4",il);var yp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d,v,b,C,T,A){var z=this.length;return this.resize(z+1),this.emplace(z,n,c,h,d,v,b,C,T,A)},t.prototype.emplace=function(n,c,h,d,v,b,C,T,A,z){var R=10*n,U=5*n;return this.int16[R+0]=c,this.int16[R+1]=h,this.int16[R+2]=d,this.int16[R+3]=v,this.int16[R+4]=b,this.int16[R+5]=C,this.uint32[U+3]=T,this.uint16[R+8]=A,this.uint16[R+9]=z,n},t}(Er);yp.prototype.bytesPerElement=20,lt("StructArrayLayout6i1ul2ui20",yp);var fu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d,v,b){var C=this.length;return this.resize(C+1),this.emplace(C,n,c,h,d,v,b)},t.prototype.emplace=function(n,c,h,d,v,b,C){var T=6*n;return this.int16[T+0]=c,this.int16[T+1]=h,this.int16[T+2]=d,this.int16[T+3]=v,this.int16[T+4]=b,this.int16[T+5]=C,n},t}(Er);fu.prototype.bytesPerElement=12,lt("StructArrayLayout2i2i2i12",fu);var qs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d,v){var b=this.length;return this.resize(b+1),this.emplace(b,n,c,h,d,v)},t.prototype.emplace=function(n,c,h,d,v,b){var C=4*n,T=8*n;return this.float32[C+0]=c,this.float32[C+1]=h,this.float32[C+2]=d,this.int16[T+6]=v,this.int16[T+7]=b,n},t}(Er);qs.prototype.bytesPerElement=16,lt("StructArrayLayout2f1f2i16",qs);var vp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,n,c,h,d)},t.prototype.emplace=function(n,c,h,d,v){var b=12*n,C=3*n;return this.uint8[b+0]=c,this.uint8[b+1]=h,this.float32[C+1]=d,this.float32[C+2]=v,n},t}(Er);vp.prototype.bytesPerElement=12,lt("StructArrayLayout2ub2f12",vp);var us=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h){var d=this.length;return this.resize(d+1),this.emplace(d,n,c,h)},t.prototype.emplace=function(n,c,h,d){var v=3*n;return this.uint16[v+0]=c,this.uint16[v+1]=h,this.uint16[v+2]=d,n},t}(Er);us.prototype.bytesPerElement=6,lt("StructArrayLayout3ui6",us);var ls=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d,v,b,C,T,A,z,R,U,$,H,oe,te,he){var ge=this.length;return this.resize(ge+1),this.emplace(ge,n,c,h,d,v,b,C,T,A,z,R,U,$,H,oe,te,he)},t.prototype.emplace=function(n,c,h,d,v,b,C,T,A,z,R,U,$,H,oe,te,he,ge){var xe=24*n,Ce=12*n,Oe=48*n;return this.int16[xe+0]=c,this.int16[xe+1]=h,this.uint16[xe+2]=d,this.uint16[xe+3]=v,this.uint32[Ce+2]=b,this.uint32[Ce+3]=C,this.uint32[Ce+4]=T,this.uint16[xe+10]=A,this.uint16[xe+11]=z,this.uint16[xe+12]=R,this.float32[Ce+7]=U,this.float32[Ce+8]=$,this.uint8[Oe+36]=H,this.uint8[Oe+37]=oe,this.uint8[Oe+38]=te,this.uint32[Ce+10]=he,this.int16[xe+22]=ge,n},t}(Er);ls.prototype.bytesPerElement=48,lt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ls);var Jl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d,v,b,C,T,A,z,R,U,$,H,oe,te,he,ge,xe,Ce,Oe,je,$e,vt,tt,bt,rt,Xt){var Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,n,c,h,d,v,b,C,T,A,z,R,U,$,H,oe,te,he,ge,xe,Ce,Oe,je,$e,vt,tt,bt,rt,Xt)},t.prototype.emplace=function(n,c,h,d,v,b,C,T,A,z,R,U,$,H,oe,te,he,ge,xe,Ce,Oe,je,$e,vt,tt,bt,rt,Xt,Lt){var dt=34*n,Yt=17*n;return this.int16[dt+0]=c,this.int16[dt+1]=h,this.int16[dt+2]=d,this.int16[dt+3]=v,this.int16[dt+4]=b,this.int16[dt+5]=C,this.int16[dt+6]=T,this.int16[dt+7]=A,this.uint16[dt+8]=z,this.uint16[dt+9]=R,this.uint16[dt+10]=U,this.uint16[dt+11]=$,this.uint16[dt+12]=H,this.uint16[dt+13]=oe,this.uint16[dt+14]=te,this.uint16[dt+15]=he,this.uint16[dt+16]=ge,this.uint16[dt+17]=xe,this.uint16[dt+18]=Ce,this.uint16[dt+19]=Oe,this.uint16[dt+20]=je,this.uint16[dt+21]=$e,this.uint16[dt+22]=vt,this.uint32[Yt+12]=tt,this.float32[Yt+13]=bt,this.float32[Yt+14]=rt,this.float32[Yt+15]=Xt,this.float32[Yt+16]=Lt,n},t}(Er);Jl.prototype.bytesPerElement=68,lt("StructArrayLayout8i15ui1ul4f68",Jl);var cs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var c=this.length;return this.resize(c+1),this.emplace(c,n)},t.prototype.emplace=function(n,c){return this.float32[1*n+0]=c,n},t}(Er);cs.prototype.bytesPerElement=4,lt("StructArrayLayout1f4",cs);var Bo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h){var d=this.length;return this.resize(d+1),this.emplace(d,n,c,h)},t.prototype.emplace=function(n,c,h,d){var v=3*n;return this.int16[v+0]=c,this.int16[v+1]=h,this.int16[v+2]=d,n},t}(Er);Bo.prototype.bytesPerElement=6,lt("StructArrayLayout3i6",Bo);var gp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h){var d=this.length;return this.resize(d+1),this.emplace(d,n,c,h)},t.prototype.emplace=function(n,c,h,d){var v=4*n;return this.uint32[2*n+0]=c,this.uint16[v+2]=h,this.uint16[v+3]=d,n},t}(Er);gp.prototype.bytesPerElement=8,lt("StructArrayLayout1ul2ui8",gp);var ol=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c){var h=this.length;return this.resize(h+1),this.emplace(h,n,c)},t.prototype.emplace=function(n,c,h){var d=2*n;return this.uint16[d+0]=c,this.uint16[d+1]=h,n},t}(Er);ol.prototype.bytesPerElement=4,lt("StructArrayLayout2ui4",ol);var _p=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var c=this.length;return this.resize(c+1),this.emplace(c,n)},t.prototype.emplace=function(n,c){return this.uint16[1*n+0]=c,n},t}(Er);_p.prototype.bytesPerElement=2,lt("StructArrayLayout1ui2",_p);var Ql=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,c,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,n,c,h,d)},t.prototype.emplace=function(n,c,h,d,v){var b=4*n;return this.float32[b+0]=c,this.float32[b+1]=h,this.float32[b+2]=d,this.float32[b+3]=v,n},t}(Er);Ql.prototype.bytesPerElement=16,lt("StructArrayLayout4f16",Ql);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new ee(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(Hl);o.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new o(this,n)},t}(yp);lt("CollisionBoxArray",s);var a=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(c){this._structArray.uint8[this._pos1+37]=c},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(c){this._structArray.uint8[this._pos1+38]=c},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(c){this._structArray.uint32[this._pos4+10]=c},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,n),t}(Hl);a.prototype.size=48;var p=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new a(this,n)},t}(ls);lt("PlacedSymbolArray",p);var m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(c){this._structArray.uint32[this._pos4+12]=c},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,n),t}(Hl);m.prototype.size=68;var g=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new m(this,n)},t}(Jl);lt("SymbolInstanceArray",g);var x=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(n){return this.float32[1*n+0]},t}(cs);lt("GlyphOffsetArray",x);var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(n){return this.int16[3*n+0]},t.prototype.gety=function(n){return this.int16[3*n+1]},t.prototype.gettileUnitDistanceFromAnchor=function(n){return this.int16[3*n+2]},t}(Bo);lt("SymbolLineVertexArray",E);var I=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,n),t}(Hl);I.prototype.size=8;var D=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new I(this,n)},t}(gp);lt("FeatureIndexArray",D);var N=Hn([{name:"a_pos",components:2,type:"Int16"}],4).members,V=function(e){e===void 0&&(e=[]),this.segments=e};function Z(e,t){return 256*(e=ue(Math.floor(e),0,255))+ue(Math.floor(t),0,255)}V.prototype.prepareSegment=function(e,t,n,c){var h=this.segments[this.segments.length-1];return e>V.MAX_VERTEX_ARRAY_LENGTH&&Ut("Max vertices per segment is "+V.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!h||h.vertexLength+e>V.MAX_VERTEX_ARRAY_LENGTH||h.sortKey!==c)&&(h={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},c!==void 0&&(h.sortKey=c),this.segments.push(h)),h},V.prototype.get=function(){return this.segments},V.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var c in n.vaos)n.vaos[c].destroy()}},V.simpleSegment=function(e,t,n,c){return new V([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:c,vaos:{},sortKey:0}])},V.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,lt("SegmentVector",V);var J=Hn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Y=k(function(e){e.exports=function(t,n){var c,h,d,v,b,C,T,A;for(h=t.length-(c=3&t.length),d=n,b=3432918353,C=461845907,A=0;A<h;)T=255&t.charCodeAt(A)|(255&t.charCodeAt(++A))<<8|(255&t.charCodeAt(++A))<<16|(255&t.charCodeAt(++A))<<24,++A,d=27492+(65535&(v=5*(65535&(d=(d^=T=(65535&(T=(T=(65535&T)*b+(((T>>>16)*b&65535)<<16)&4294967295)<<15|T>>>17))*C+(((T>>>16)*C&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(T=0,c){case 3:T^=(255&t.charCodeAt(A+2))<<16;case 2:T^=(255&t.charCodeAt(A+1))<<8;case 1:d^=T=(65535&(T=(T=(65535&(T^=255&t.charCodeAt(A)))*b+(((T>>>16)*b&65535)<<16)&4294967295)<<15|T>>>17))*C+(((T>>>16)*C&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),ie=k(function(e){e.exports=function(t,n){for(var c,h=t.length,d=n^h,v=0;h>=4;)c=1540483477*(65535&(c=255&t.charCodeAt(v)|(255&t.charCodeAt(++v))<<8|(255&t.charCodeAt(++v))<<16|(255&t.charCodeAt(++v))<<24))+((1540483477*(c>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:d^=(255&t.charCodeAt(v+2))<<16;case 2:d^=(255&t.charCodeAt(v+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(v)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),W=Y,ne=ie;W.murmur3=Y,W.murmur2=ne;var ce=function(){this.ids=[],this.positions=[],this.indexed=!1};ce.prototype.add=function(e,t,n,c){this.ids.push(Te(e)),this.positions.push(t,n,c)},ce.prototype.getPositions=function(e){for(var t=Te(e),n=0,c=this.ids.length-1;n<c;){var h=n+c>>1;this.ids[h]>=t?c=h:n=h+1}for(var d=[];this.ids[n]===t;)d.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return d},ce.serialize=function(e,t){var n=new Float64Array(e.ids),c=new Uint32Array(e.positions);return function h(d,v,b,C){for(;b<C;){for(var T=d[b+C>>1],A=b-1,z=C+1;;){do A++;while(d[A]<T);do z--;while(d[z]>T);if(A>=z)break;we(d,A,z),we(v,3*A,3*z),we(v,3*A+1,3*z+1),we(v,3*A+2,3*z+2)}z-b<C-z?(h(d,v,b,z),b=z+1):(h(d,v,z+1,C),C=z)}}(n,c,0,n.length-1),t&&t.push(n.buffer,c.buffer),{ids:n,positions:c}},ce.deserialize=function(e){var t=new ce;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var ye=Math.pow(2,53)-1;function Te(e){var t=+e;return!isNaN(t)&&t<=ye?t:W(String(e))}function we(e,t,n){var c=e[t];e[t]=e[n],e[n]=c}lt("FeaturePositionMap",ce);var Ae=function(e,t){this.gl=e.gl,this.location=t},Be=function(e){function t(n,c){e.call(this,n,c),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))},t}(Ae),Ge=function(e){function t(n,c){e.call(this,n,c),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))},t}(Ae),qe=function(e){function t(n,c){e.call(this,n,c),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))},t}(Ae),ot=function(e){function t(n,c){e.call(this,n,c),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))},t}(Ae),xt=function(e){function t(n,c){e.call(this,n,c),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))},t}(Ae),Ct=function(e){function t(n,c){e.call(this,n,c),this.current=cr.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))},t}(Ae),Et=new Float32Array(16),hr=function(e){function t(n,c){e.call(this,n,c),this.current=Et}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(var c=1;c<16;c++)if(n[c]!==this.current[c]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}},t}(Ae);function ut(e){return[Z(255*e.r,255*e.g),Z(255*e.b,255*e.a)]}var Nt=function(e,t,n){this.value=e,this.uniformNames=t.map(function(c){return"u_"+c}),this.type=n};Nt.prototype.setUniform=function(e,t,n){e.set(n.constantOr(this.value))},Nt.prototype.getBinding=function(e,t,n){return this.type==="color"?new Ct(e,t):new Ge(e,t)};var Wt=function(e,t){this.uniformNames=t.map(function(n){return"u_"+n}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Wt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Wt.prototype.setUniform=function(e,t,n,c){var h=c==="u_pattern_to"?this.patternTo:c==="u_pattern_from"?this.patternFrom:c==="u_pixel_ratio_to"?this.pixelRatioTo:c==="u_pixel_ratio_from"?this.pixelRatioFrom:null;h&&e.set(h)},Wt.prototype.getBinding=function(e,t,n){return n.substr(0,9)==="u_pattern"?new xt(e,t):new Ge(e,t)};var Bt=function(e,t,n,c){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map(function(h){return{name:"a_"+h,type:"Float32",components:n==="color"?2:1,offset:0}}),this.paintVertexArray=new c};Bt.prototype.populatePaintArray=function(e,t,n,c,h){var d=this.paintVertexArray.length,v=this.expression.evaluate(new Jt(0),t,{},c,[],h);this.paintVertexArray.resize(e),this._setPaintValue(d,e,v)},Bt.prototype.updatePaintArray=function(e,t,n,c){var h=this.expression.evaluate({zoom:0},n,c);this._setPaintValue(e,t,h)},Bt.prototype._setPaintValue=function(e,t,n){if(this.type==="color")for(var c=ut(n),h=e;h<t;h++)this.paintVertexArray.emplace(h,c[0],c[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},Bt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Bt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Rt=function(e,t,n,c,h,d){this.expression=e,this.uniformNames=t.map(function(v){return"u_"+v+"_t"}),this.type=n,this.useIntegerZoom=c,this.zoom=h,this.maxValue=0,this.paintVertexAttributes=t.map(function(v){return{name:"a_"+v,type:"Float32",components:n==="color"?4:2,offset:0}}),this.paintVertexArray=new d};Rt.prototype.populatePaintArray=function(e,t,n,c,h){var d=this.expression.evaluate(new Jt(this.zoom),t,{},c,[],h),v=this.expression.evaluate(new Jt(this.zoom+1),t,{},c,[],h),b=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(b,e,d,v)},Rt.prototype.updatePaintArray=function(e,t,n,c){var h=this.expression.evaluate({zoom:this.zoom},n,c),d=this.expression.evaluate({zoom:this.zoom+1},n,c);this._setPaintValue(e,t,h,d)},Rt.prototype._setPaintValue=function(e,t,n,c){if(this.type==="color")for(var h=ut(n),d=ut(c),v=e;v<t;v++)this.paintVertexArray.emplace(v,h[0],h[1],d[0],d[1]);else{for(var b=e;b<t;b++)this.paintVertexArray.emplace(b,n,c);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(c))}},Rt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Rt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Rt.prototype.setUniform=function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,c=ue(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(c)},Rt.prototype.getBinding=function(e,t,n){return new Ge(e,t)};var Gt=function(e,t,n,c,h,d){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=c,this.layerId=d,this.zoomInPaintVertexArray=new h,this.zoomOutPaintVertexArray=new h};Gt.prototype.populatePaintArray=function(e,t,n){var c=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(c,e,t.patterns&&t.patterns[this.layerId],n)},Gt.prototype.updatePaintArray=function(e,t,n,c,h){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],h)},Gt.prototype._setPaintValues=function(e,t,n,c){if(c&&n){var h=c[n.min],d=c[n.mid],v=c[n.max];if(h&&d&&v)for(var b=e;b<t;b++)this.zoomInPaintVertexArray.emplace(b,d.tl[0],d.tl[1],d.br[0],d.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],d.pixelRatio,h.pixelRatio),this.zoomOutPaintVertexArray.emplace(b,d.tl[0],d.tl[1],d.br[0],d.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],d.pixelRatio,v.pixelRatio)}},Gt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,J.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,J.members,this.expression.isStateDependent))},Gt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Dt=function(e,t,n){this.binders={},this._buffers=[];var c=[];for(var h in e.paint._values)if(n(h)){var d=e.paint.get(h);if(d instanceof vi&&Yi(d.property.specification)){var v=Nn(h,e.type),b=d.value,C=d.property.specification.type,T=d.property.useIntegerZoom,A=d.property.specification["property-type"],z=A==="cross-faded"||A==="cross-faded-data-driven";if(b.kind==="constant")this.binders[h]=z?new Wt(b.value,v):new Nt(b.value,v,C),c.push("/u_"+h);else if(b.kind==="source"||z){var R=hn(h,C,"source");this.binders[h]=z?new Gt(b,C,T,t,R,e.id):new Bt(b,v,C,R),c.push("/a_"+h)}else{var U=hn(h,C,"composite");this.binders[h]=new Rt(b,v,C,T,t,U),c.push("/z_"+h)}}}this.cacheKey=c.sort().join("")};Dt.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Bt||t instanceof Rt?t.maxValue:0},Dt.prototype.populatePaintArrays=function(e,t,n,c,h){for(var d in this.binders){var v=this.binders[d];(v instanceof Bt||v instanceof Rt||v instanceof Gt)&&v.populatePaintArray(e,t,n,c,h)}},Dt.prototype.setConstantPatternPositions=function(e,t){for(var n in this.binders){var c=this.binders[n];c instanceof Wt&&c.setConstantPatternPositions(e,t)}},Dt.prototype.updatePaintArrays=function(e,t,n,c,h){var d=!1;for(var v in e)for(var b=0,C=t.getPositions(v);b<C.length;b+=1){var T=C[b],A=n.feature(T.index);for(var z in this.binders){var R=this.binders[z];if((R instanceof Bt||R instanceof Rt||R instanceof Gt)&&R.expression.isStateDependent===!0){var U=c.paint.get(z);R.expression=U.value,R.updatePaintArray(T.start,T.end,A,e[v],h),d=!0}}}return d},Dt.prototype.defines=function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof Nt||n instanceof Wt)&&e.push.apply(e,n.uniformNames.map(function(c){return"#define HAS_UNIFORM_"+c}))}return e},Dt.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Bt||n instanceof Rt)for(var c=0;c<n.paintVertexAttributes.length;c++)e.push(n.paintVertexAttributes[c].name);else if(n instanceof Gt)for(var h=0;h<J.members.length;h++)e.push(J.members[h].name)}return e},Dt.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Nt||n instanceof Wt||n instanceof Rt)for(var c=0,h=n.uniformNames;c<h.length;c+=1)e.push(h[c])}return e},Dt.prototype.getPaintVertexBuffers=function(){return this._buffers},Dt.prototype.getUniforms=function(e,t){var n=[];for(var c in this.binders){var h=this.binders[c];if(h instanceof Nt||h instanceof Wt||h instanceof Rt)for(var d=0,v=h.uniformNames;d<v.length;d+=1){var b=v[d];if(t[b]){var C=h.getBinding(e,t[b],b);n.push({name:b,property:c,binding:C})}}}return n},Dt.prototype.setUniforms=function(e,t,n,c){for(var h=0,d=t;h<d.length;h+=1){var v=d[h],b=v.name,C=v.property;this.binders[C].setUniform(v.binding,c,n.get(C),b)}},Dt.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof Gt){var c=e.fromScale===2?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;c&&this._buffers.push(c)}else(n instanceof Bt||n instanceof Rt)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},Dt.prototype.upload=function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof Bt||n instanceof Rt||n instanceof Gt)&&n.upload(e)}this.updatePaintBuffers()},Dt.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Bt||t instanceof Rt||t instanceof Gt)&&t.destroy()}};var kt=function(e,t,n){n===void 0&&(n=function(){return!0}),this.programConfigurations={};for(var c=0,h=e;c<h.length;c+=1){var d=h[c];this.programConfigurations[d.id]=new Dt(d,t,n)}this.needsUpload=!1,this._featureMap=new ce,this._bufferOffset=0};function Nn(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function hn(e,t,n){var c={color:{source:pu,composite:Ql},number:{source:cs,composite:pu}},h=function(d){return{"line-pattern":{source:ba,composite:ba},"fill-pattern":{source:ba,composite:ba},"fill-extrusion-pattern":{source:ba,composite:ba}}[d]}(e);return h&&h[n]||c[t][n]}kt.prototype.populatePaintArrays=function(e,t,n,c,h,d){for(var v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,t,c,h,d);t.id!==void 0&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},kt.prototype.updatePaintArrays=function(e,t,n,c){for(var h=0,d=n;h<d.length;h+=1){var v=d[h];this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,t,v,c)||this.needsUpload}},kt.prototype.get=function(e){return this.programConfigurations[e]},kt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},kt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},lt("ConstantBinder",Nt),lt("CrossFadedConstantBinder",Wt),lt("SourceExpressionBinder",Bt),lt("CrossFadedCompositeBinder",Gt),lt("CompositeExpressionBinder",Rt),lt("ProgramConfiguration",Dt,{omit:["_buffers"]}),lt("ProgramConfigurationSet",kt);var pi=Math.pow(2,14)-1,Yn=-pi-1;function sn(e){for(var t=8192/e.extent,n=e.loadGeometry(),c=0;c<n.length;c++)for(var h=n[c],d=0;d<h.length;d++){var v=h[d],b=Math.round(v.x*t),C=Math.round(v.y*t);v.x=ue(b,Yn,pi),v.y=ue(C,Yn,pi),(b<v.x||b>v.x+1||C<v.y||C>v.y+1)&&Ut("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function gn(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?sn(e):[]}}function ao(e,t,n,c,h){e.emplaceBack(2*t+(c+1)/2,2*n+(h+1)/2)}var _i=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Vs,this.indexArray=new us,this.segments=new V,this.programConfigurations=new kt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function ps(e,t){for(var n=0;n<e.length;n++)if(wa(t,e[n]))return!0;for(var c=0;c<t.length;c++)if(wa(e,t[c]))return!0;return!!al(e,t)}function Li(e,t,n){return!!wa(e,t)||!!hs(t,e,n)}function oa(e,t){if(e.length===1)return sl(t,e[0]);for(var n=0;n<t.length;n++)for(var c=t[n],h=0;h<c.length;h++)if(wa(e,c[h]))return!0;for(var d=0;d<e.length;d++)if(sl(t,e[d]))return!0;for(var v=0;v<t.length;v++)if(al(e,t[v]))return!0;return!1}function Uo(e,t,n){if(e.length>1){if(al(e,t))return!0;for(var c=0;c<t.length;c++)if(hs(t[c],e,n))return!0}for(var h=0;h<e.length;h++)if(hs(e[h],t,n))return!0;return!1}function al(e,t){if(e.length===0||t.length===0)return!1;for(var n=0;n<e.length-1;n++)for(var c=e[n],h=e[n+1],d=0;d<t.length-1;d++)if(du(c,h,t[d],t[d+1]))return!0;return!1}function du(e,t,n,c){return ir(e,n,c)!==ir(t,n,c)&&ir(e,t,n)!==ir(e,t,c)}function hs(e,t,n){var c=n*n;if(t.length===1)return e.distSqr(t[0])<c;for(var h=1;h<t.length;h++)if(mu(e,t[h-1],t[h])<c)return!0;return!1}function mu(e,t,n){var c=t.distSqr(n);if(c===0)return e.distSqr(t);var h=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/c;return e.distSqr(h<0?t:h>1?n:n.sub(t)._mult(h)._add(t))}function sl(e,t){for(var n,c,h,d=!1,v=0;v<e.length;v++)for(var b=0,C=(n=e[v]).length-1;b<n.length;C=b++)(c=n[b]).y>t.y!=(h=n[C]).y>t.y&&t.x<(h.x-c.x)*(t.y-c.y)/(h.y-c.y)+c.x&&(d=!d);return d}function wa(e,t){for(var n=!1,c=0,h=e.length-1;c<e.length;h=c++){var d=e[c],v=e[h];d.y>t.y!=v.y>t.y&&t.x<(v.x-d.x)*(t.y-d.y)/(v.y-d.y)+d.x&&(n=!n)}return n}function ul(e,t,n){var c=n[0],h=n[2];if(e.x<c.x&&t.x<c.x||e.x>h.x&&t.x>h.x||e.y<c.y&&t.y<c.y||e.y>h.y&&t.y>h.y)return!1;var d=ir(e,t,n[0]);return d!==ir(e,t,n[1])||d!==ir(e,t,n[2])||d!==ir(e,t,n[3])}function Sa(e,t,n){var c=t.paint.get(e).value;return c.kind==="constant"?c.value:n.programConfigurations.get(t.id).getMaxValue(e)}function jn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Wa(e,t,n,c,h){if(!t[0]&&!t[1])return e;var d=ee.convert(t)._mult(h);n==="viewport"&&d._rotate(-c);for(var v=[],b=0;b<e.length;b++)v.push(e[b].sub(d));return v}_i.prototype.populate=function(e,t,n){var c=this.layers[0],h=[],d=null;c.type==="circle"&&(d=c.layout.get("circle-sort-key"));for(var v=0,b=e;v<b.length;v+=1){var C=b[v],T=C.feature,A=C.id,z=C.index,R=C.sourceLayerIndex,U=this.layers[0]._featureFilter.needGeometry,$=gn(T,U);if(this.layers[0]._featureFilter.filter(new Jt(this.zoom),$,n)){var H=d?d.evaluate($,{},n):void 0,oe={id:A,properties:T.properties,type:T.type,sourceLayerIndex:R,index:z,geometry:U?$.geometry:sn(T),patterns:{},sortKey:H};h.push(oe)}}d&&h.sort(function($e,vt){return $e.sortKey-vt.sortKey});for(var te=0,he=h;te<he.length;te+=1){var ge=he[te],xe=ge.geometry,Ce=ge.index,Oe=ge.sourceLayerIndex,je=e[Ce].feature;this.addFeature(ge,xe,Ce,n),t.featureIndex.insert(je,xe,Ce,Oe,this.index)}},_i.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},_i.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},_i.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_i.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,N),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},_i.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_i.prototype.addFeature=function(e,t,n,c){for(var h=0,d=t;h<d.length;h+=1)for(var v=0,b=d[h];v<b.length;v+=1){var C=b[v],T=C.x,A=C.y;if(!(T<0||T>=8192||A<0||A>=8192)){var z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),R=z.vertexLength;ao(this.layoutVertexArray,T,A,-1,-1),ao(this.layoutVertexArray,T,A,1,-1),ao(this.layoutVertexArray,T,A,1,1),ao(this.layoutVertexArray,T,A,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),z.vertexLength+=4,z.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},c)},lt("CircleBucket",_i,{omit:["layers"]});var fs=new ai({"circle-sort-key":new ft(j.layout_circle["circle-sort-key"])}),Zs={paint:new ai({"circle-radius":new ft(j.paint_circle["circle-radius"]),"circle-color":new ft(j.paint_circle["circle-color"]),"circle-blur":new ft(j.paint_circle["circle-blur"]),"circle-opacity":new ft(j.paint_circle["circle-opacity"]),"circle-translate":new _t(j.paint_circle["circle-translate"]),"circle-translate-anchor":new _t(j.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new _t(j.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new _t(j.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ft(j.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ft(j.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ft(j.paint_circle["circle-stroke-opacity"])}),layout:fs},_r=typeof Float32Array!="undefined"?Float32Array:Array;function So(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Di(e,t,n){var c=t[0],h=t[1],d=t[2],v=t[3],b=t[4],C=t[5],T=t[6],A=t[7],z=t[8],R=t[9],U=t[10],$=t[11],H=t[12],oe=t[13],te=t[14],he=t[15],ge=n[0],xe=n[1],Ce=n[2],Oe=n[3];return e[0]=ge*c+xe*b+Ce*z+Oe*H,e[1]=ge*h+xe*C+Ce*R+Oe*oe,e[2]=ge*d+xe*T+Ce*U+Oe*te,e[3]=ge*v+xe*A+Ce*$+Oe*he,e[4]=(ge=n[4])*c+(xe=n[5])*b+(Ce=n[6])*z+(Oe=n[7])*H,e[5]=ge*h+xe*C+Ce*R+Oe*oe,e[6]=ge*d+xe*T+Ce*U+Oe*te,e[7]=ge*v+xe*A+Ce*$+Oe*he,e[8]=(ge=n[8])*c+(xe=n[9])*b+(Ce=n[10])*z+(Oe=n[11])*H,e[9]=ge*h+xe*C+Ce*R+Oe*oe,e[10]=ge*d+xe*T+Ce*U+Oe*te,e[11]=ge*v+xe*A+Ce*$+Oe*he,e[12]=(ge=n[12])*c+(xe=n[13])*b+(Ce=n[14])*z+(Oe=n[15])*H,e[13]=ge*h+xe*C+Ce*R+Oe*oe,e[14]=ge*d+xe*T+Ce*U+Oe*te,e[15]=ge*v+xe*A+Ce*$+Oe*he,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,n=arguments.length;n--;)t+=e[n]*e[n];return Math.sqrt(t)});var Gs,ym=Di;function ec(e,t,n){var c=t[0],h=t[1],d=t[2],v=t[3];return e[0]=n[0]*c+n[4]*h+n[8]*d+n[12]*v,e[1]=n[1]*c+n[5]*h+n[9]*d+n[13]*v,e[2]=n[2]*c+n[6]*h+n[10]*d+n[14]*v,e[3]=n[3]*c+n[7]*h+n[11]*d+n[15]*v,e}Gs=new _r(3),_r!=Float32Array&&(Gs[0]=0,Gs[1]=0,Gs[2]=0),function(){var e=new _r(4);_r!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var vm=(function(){var e=new _r(2);_r!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(n){e.call(this,n,Zs)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new _i(n)},t.prototype.queryRadius=function(n){var c=n;return Sa("circle-radius",this,c)+Sa("circle-stroke-width",this,c)+jn(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(n,c,h,d,v,b,C,T){for(var A=Wa(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,C),z=this.paint.get("circle-radius").evaluate(c,h)+this.paint.get("circle-stroke-width").evaluate(c,h),R=this.paint.get("circle-pitch-alignment")==="map",U=R?A:function(je,$e){return je.map(function(vt){return ll(vt,$e)})}(A,T),$=R?z*C:z,H=0,oe=d;H<oe.length;H+=1)for(var te=0,he=oe[H];te<he.length;te+=1){var ge=he[te],xe=R?ge:ll(ge,T),Ce=$,Oe=ec([],[ge.x,ge.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ce*=Oe[3]/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ce*=b.cameraToCenterDistance/Oe[3]),Li(U,xe,Ce))return!0}return!1},t}(xa));function ll(e,t){var n=ec([],[e.x,e.y,0,1],t);return new ee(n[0]/n[3],n[1]/n[3])}var rf=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(_i);function yu(e,t,n,c){var h=t.width,d=t.height;if(c){if(c instanceof Uint8ClampedArray)c=new Uint8Array(c.buffer);else if(c.length!==h*d*n)throw new RangeError("mismatched image size")}else c=new Uint8Array(h*d*n);return e.width=h,e.height=d,e.data=c,e}function tc(e,t,n){var c=t.width,h=t.height;if(c!==e.width||h!==e.height){var d=yu({},{width:c,height:h},n);gm(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,c),height:Math.min(e.height,h)},n),e.width=c,e.height=h,e.data=d.data}}function gm(e,t,n,c,h,d){if(h.width===0||h.height===0)return t;if(h.width>e.width||h.height>e.height||n.x>e.width-h.width||n.y>e.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>t.width||h.height>t.height||c.x>t.width-h.width||c.y>t.height-h.height)throw new RangeError("out of range destination coordinates for image copy");for(var v=e.data,b=t.data,C=0;C<h.height;C++)for(var T=((n.y+C)*e.width+n.x)*d,A=((c.y+C)*t.width+c.x)*d,z=0;z<h.width*d;z++)b[A+z]=v[T+z];return t}lt("HeatmapBucket",rf,{omit:["layers"]});var cl=function(e,t){yu(this,e,1,t)};cl.prototype.resize=function(e){tc(this,e,1)},cl.prototype.clone=function(){return new cl({width:this.width,height:this.height},new Uint8Array(this.data))},cl.copy=function(e,t,n,c,h){gm(e,t,n,c,h,1)};var so=function(e,t){yu(this,e,4,t)};so.prototype.resize=function(e){tc(this,e,4)},so.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},so.prototype.clone=function(){return new so({width:this.width,height:this.height},new Uint8Array(this.data))},so.copy=function(e,t,n,c,h){gm(e,t,n,c,h,4)},lt("AlphaImage",cl),lt("RGBAImage",so);var sw={paint:new ai({"heatmap-radius":new ft(j.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ft(j.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new _t(j.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ia(j.paint_heatmap["heatmap-color"]),"heatmap-opacity":new _t(j.paint_heatmap["heatmap-opacity"])})};function Ag(e){var t={},n=e.resolution||256,c=e.clips?e.clips.length:1,h=e.image||new so({width:n,height:c}),d=function($,H,oe){t[e.evaluationKey]=oe;var te=e.expression.evaluate(t);h.data[$+H+0]=Math.floor(255*te.r/te.a),h.data[$+H+1]=Math.floor(255*te.g/te.a),h.data[$+H+2]=Math.floor(255*te.b/te.a),h.data[$+H+3]=Math.floor(255*te.a)};if(e.clips)for(var v=0,b=0;v<c;++v,b+=4*n)for(var C=0,T=0;C<n;C++,T+=4){var A=C/(n-1),z=e.clips[v];d(b,T,z.start*(1-A)+z.end*A)}else for(var R=0,U=0;R<n;R++,U+=4)d(0,U,R/(n-1));return h}var uw=function(e){function t(n){e.call(this,n,sw),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new rf(n)},t.prototype._handleSpecialPaintPropertyUpdate=function(n){n==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=Ag({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(xa),lw={paint:new ai({"hillshade-illumination-direction":new _t(j.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new _t(j.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new _t(j.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new _t(j.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new _t(j.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new _t(j.paint_hillshade["hillshade-accent-color"])})},cw=function(e){function t(n){e.call(this,n,lw)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(xa),pw=Hn([{name:"a_pos",components:2,type:"Int16"}],4).members,_m=nf,hw=nf;function nf(e,t,n){n=n||2;var c,h,d,v,b,C,T,A=t&&t.length,z=A?t[0]*n:e.length,R=Mg(e,0,z,n,!0),U=[];if(!R||R.next===R.prev)return U;if(A&&(R=function(H,oe,te,he){var ge,xe,Ce,Oe=[];for(ge=0,xe=oe.length;ge<xe;ge++)(Ce=Mg(H,oe[ge]*he,ge<xe-1?oe[ge+1]*he:H.length,he,!1))===Ce.next&&(Ce.steiner=!0),Oe.push(xw(Ce));for(Oe.sort(vw),ge=0;ge<Oe.length;ge++)gw(Oe[ge],te),te=vu(te,te.next);return te}(e,t,R,n)),e.length>80*n){c=d=e[0],h=v=e[1];for(var $=n;$<z;$+=n)(b=e[$])<c&&(c=b),(C=e[$+1])<h&&(h=C),b>d&&(d=b),C>v&&(v=C);T=(T=Math.max(d-c,v-h))!==0?1/T:0}return xp(R,U,n,c,h,T),U}function Mg(e,t,n,c,h){var d,v;if(h===wm(e,t,n,c)>0)for(d=t;d<n;d+=c)v=Dg(d,e[d],e[d+1],v);else for(d=n-c;d>=t;d-=c)v=Dg(d,e[d],e[d+1],v);return v&&of(v,v.next)&&(wp(v),v=v.next),v}function vu(e,t){if(!e)return e;t||(t=e);var n,c=e;do if(n=!1,c.steiner||!of(c,c.next)&&Dn(c.prev,c,c.next)!==0)c=c.next;else{if(wp(c),(c=t=c.prev)===c.next)break;n=!0}while(n||c!==t);return t}function xp(e,t,n,c,h,d,v){if(e){!v&&d&&function(A,z,R,U){var $=A;do $.z===null&&($.z=xm($.x,$.y,z,R,U)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==A);$.prevZ.nextZ=null,$.prevZ=null,function(H){var oe,te,he,ge,xe,Ce,Oe,je,$e=1;do{for(te=H,H=null,xe=null,Ce=0;te;){for(Ce++,he=te,Oe=0,oe=0;oe<$e&&(Oe++,he=he.nextZ);oe++);for(je=$e;Oe>0||je>0&&he;)Oe!==0&&(je===0||!he||te.z<=he.z)?(ge=te,te=te.nextZ,Oe--):(ge=he,he=he.nextZ,je--),xe?xe.nextZ=ge:H=ge,ge.prevZ=xe,xe=ge;te=he}xe.nextZ=null,$e*=2}while(Ce>1)}($)}(e,c,h,d);for(var b,C,T=e;e.prev!==e.next;)if(b=e.prev,C=e.next,d?dw(e,c,h,d):fw(e))t.push(b.i/n),t.push(e.i/n),t.push(C.i/n),wp(e),e=C.next,T=C.next;else if((e=C)===T){v?v===1?xp(e=mw(vu(e),t,n),t,n,c,h,d,2):v===2&&yw(e,t,n,c,h,d):xp(vu(e),t,n,c,h,d,1);break}}}function fw(e){var t=e.prev,n=e,c=e.next;if(Dn(t,n,c)>=0)return!1;for(var h=e.next.next;h!==e.prev;){if(rc(t.x,t.y,n.x,n.y,c.x,c.y,h.x,h.y)&&Dn(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function dw(e,t,n,c){var h=e.prev,d=e,v=e.next;if(Dn(h,d,v)>=0)return!1;for(var b=h.x>d.x?h.x>v.x?h.x:v.x:d.x>v.x?d.x:v.x,C=h.y>d.y?h.y>v.y?h.y:v.y:d.y>v.y?d.y:v.y,T=xm(h.x<d.x?h.x<v.x?h.x:v.x:d.x<v.x?d.x:v.x,h.y<d.y?h.y<v.y?h.y:v.y:d.y<v.y?d.y:v.y,t,n,c),A=xm(b,C,t,n,c),z=e.prevZ,R=e.nextZ;z&&z.z>=T&&R&&R.z<=A;){if(z!==e.prev&&z!==e.next&&rc(h.x,h.y,d.x,d.y,v.x,v.y,z.x,z.y)&&Dn(z.prev,z,z.next)>=0||(z=z.prevZ,R!==e.prev&&R!==e.next&&rc(h.x,h.y,d.x,d.y,v.x,v.y,R.x,R.y)&&Dn(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;z&&z.z>=T;){if(z!==e.prev&&z!==e.next&&rc(h.x,h.y,d.x,d.y,v.x,v.y,z.x,z.y)&&Dn(z.prev,z,z.next)>=0)return!1;z=z.prevZ}for(;R&&R.z<=A;){if(R!==e.prev&&R!==e.next&&rc(h.x,h.y,d.x,d.y,v.x,v.y,R.x,R.y)&&Dn(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function mw(e,t,n){var c=e;do{var h=c.prev,d=c.next.next;!of(h,d)&&zg(h,c,c.next,d)&&bp(h,d)&&bp(d,h)&&(t.push(h.i/n),t.push(c.i/n),t.push(d.i/n),wp(c),wp(c.next),c=e=d),c=c.next}while(c!==e);return vu(c)}function yw(e,t,n,c,h,d){var v=e;do{for(var b=v.next.next;b!==v.prev;){if(v.i!==b.i&&bw(v,b)){var C=Lg(v,b);return v=vu(v,v.next),C=vu(C,C.next),xp(v,t,n,c,h,d),void xp(C,t,n,c,h,d)}b=b.next}v=v.next}while(v!==e)}function vw(e,t){return e.x-t.x}function gw(e,t){if(t=function(c,h){var d,v=h,b=c.x,C=c.y,T=-1/0;do{if(C<=v.y&&C>=v.next.y&&v.next.y!==v.y){var A=v.x+(C-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(A<=b&&A>T){if(T=A,A===b){if(C===v.y)return v;if(C===v.next.y)return v.next}d=v.x<v.next.x?v:v.next}}v=v.next}while(v!==h);if(!d)return null;if(b===T)return d;var z,R=d,U=d.x,$=d.y,H=1/0;v=d;do b>=v.x&&v.x>=U&&b!==v.x&&rc(C<$?b:T,C,U,$,C<$?T:b,C,v.x,v.y)&&(z=Math.abs(C-v.y)/(b-v.x),bp(v,c)&&(z<H||z===H&&(v.x>d.x||v.x===d.x&&_w(d,v)))&&(d=v,H=z)),v=v.next;while(v!==R);return d}(e,t)){var n=Lg(t,e);vu(t,t.next),vu(n,n.next)}}function _w(e,t){return Dn(e.prev,e,t.prev)<0&&Dn(t.next,e,e.next)<0}function xm(e,t,n,c,h){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*h)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-c)*h)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function xw(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function rc(e,t,n,c,h,d,v,b){return(h-v)*(t-b)-(e-v)*(d-b)>=0&&(e-v)*(c-b)-(n-v)*(t-b)>=0&&(n-v)*(d-b)-(h-v)*(c-b)>=0}function bw(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(n,c){var h=n;do{if(h.i!==n.i&&h.next.i!==n.i&&h.i!==c.i&&h.next.i!==c.i&&zg(h,h.next,n,c))return!0;h=h.next}while(h!==n);return!1}(e,t)&&(bp(e,t)&&bp(t,e)&&function(n,c){var h=n,d=!1,v=(n.x+c.x)/2,b=(n.y+c.y)/2;do h.y>b!=h.next.y>b&&h.next.y!==h.y&&v<(h.next.x-h.x)*(b-h.y)/(h.next.y-h.y)+h.x&&(d=!d),h=h.next;while(h!==n);return d}(e,t)&&(Dn(e.prev,e,t.prev)||Dn(e,t.prev,t))||of(e,t)&&Dn(e.prev,e,e.next)>0&&Dn(t.prev,t,t.next)>0)}function Dn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function of(e,t){return e.x===t.x&&e.y===t.y}function zg(e,t,n,c){var h=sf(Dn(e,t,n)),d=sf(Dn(e,t,c)),v=sf(Dn(n,c,e)),b=sf(Dn(n,c,t));return h!==d&&v!==b||!(h!==0||!af(e,n,t))||!(d!==0||!af(e,c,t))||!(v!==0||!af(n,e,c))||!(b!==0||!af(n,t,c))}function af(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function sf(e){return e>0?1:e<0?-1:0}function bp(e,t){return Dn(e.prev,e,e.next)<0?Dn(e,t,e.next)>=0&&Dn(e,e.prev,t)>=0:Dn(e,t,e.prev)<0||Dn(e,e.next,t)<0}function Lg(e,t){var n=new bm(e.i,e.x,e.y),c=new bm(t.i,t.x,t.y),h=e.next,d=t.prev;return e.next=t,t.prev=e,n.next=h,h.prev=n,c.next=n,n.prev=c,d.next=c,c.prev=d,c}function Dg(e,t,n,c){var h=new bm(e,t,n);return c?(h.next=c.next,h.prev=c,c.next.prev=h,c.next=h):(h.prev=h,h.next=h),h}function wp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function bm(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wm(e,t,n,c){for(var h=0,d=t,v=n-c;d<n;d+=c)h+=(e[v]-e[d])*(e[d+1]+e[v+1]),v=d;return h}function ww(e,t,n,c,h){(function d(v,b,C,T,A){for(;T>C;){if(T-C>600){var z=T-C+1,R=b-C+1,U=Math.log(z),$=.5*Math.exp(2*U/3),H=.5*Math.sqrt(U*$*(z-$)/z)*(R-z/2<0?-1:1);d(v,b,Math.max(C,Math.floor(b-R*$/z+H)),Math.min(T,Math.floor(b+(z-R)*$/z+H)),A)}var oe=v[b],te=C,he=T;for(Sp(v,C,b),A(v[T],oe)>0&&Sp(v,C,T);te<he;){for(Sp(v,te,he),te++,he--;A(v[te],oe)<0;)te++;for(;A(v[he],oe)>0;)he--}A(v[C],oe)===0?Sp(v,C,he):Sp(v,++he,T),he<=b&&(C=he+1),b<=he&&(T=he-1)}})(e,t,n||0,c||e.length-1,h||Sw)}function Sp(e,t,n){var c=e[t];e[t]=e[n],e[n]=c}function Sw(e,t){return e<t?-1:e>t?1:0}function Sm(e,t){var n=e.length;if(n<=1)return[e];for(var c,h,d=[],v=0;v<n;v++){var b=qr(e[v]);b!==0&&(e[v].area=Math.abs(b),h===void 0&&(h=b<0),h===b<0?(c&&d.push(c),c=[e[v]]):c.push(e[v]))}if(c&&d.push(c),t>1)for(var C=0;C<d.length;C++)d[C].length<=t||(ww(d[C],t,1,d[C].length-1,Ew),d[C]=d[C].slice(0,t));return d}function Ew(e,t){return t.area-e.area}function Em(e,t,n){for(var c=n.patternDependencies,h=!1,d=0,v=t;d<v.length;d+=1){var b=v[d].paint.get(e+"-pattern");b.isConstant()||(h=!0);var C=b.constantOr(null);C&&(h=!0,c[C.to]=!0,c[C.from]=!0)}return h}function Cm(e,t,n,c,h){for(var d=h.patternDependencies,v=0,b=t;v<b.length;v+=1){var C=b[v],T=C.paint.get(e+"-pattern").value;if(T.kind!=="constant"){var A=T.evaluate({zoom:c-1},n,{},h.availableImages),z=T.evaluate({zoom:c},n,{},h.availableImages),R=T.evaluate({zoom:c+1},n,{},h.availableImages);z=z&&z.name?z.name:z,R=R&&R.name?R.name:R,d[A=A&&A.name?A.name:A]=!0,d[z]=!0,d[R]=!0,n.patterns[C.id]={min:A,mid:z,max:R}}}return n}nf.deviation=function(e,t,n,c){var h=t&&t.length,d=Math.abs(wm(e,0,h?t[0]*n:e.length,n));if(h)for(var v=0,b=t.length;v<b;v++)d-=Math.abs(wm(e,t[v]*n,v<b-1?t[v+1]*n:e.length,n));var C=0;for(v=0;v<c.length;v+=3){var T=c[v]*n,A=c[v+1]*n,z=c[v+2]*n;C+=Math.abs((e[T]-e[z])*(e[A+1]-e[T+1])-(e[T]-e[A])*(e[z+1]-e[T+1]))}return d===0&&C===0?0:Math.abs((C-d)/d)},nf.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},c=0,h=0;h<e.length;h++){for(var d=0;d<e[h].length;d++)for(var v=0;v<t;v++)n.vertices.push(e[h][d][v]);h>0&&n.holes.push(c+=e[h-1].length)}return n},_m.default=hw;var $a=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Vs,this.indexArray=new us,this.indexArray2=new ol,this.programConfigurations=new kt(e.layers,e.zoom),this.segments=new V,this.segments2=new V,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};$a.prototype.populate=function(e,t,n){this.hasPattern=Em("fill",this.layers,t);for(var c=this.layers[0].layout.get("fill-sort-key"),h=[],d=0,v=e;d<v.length;d+=1){var b=v[d],C=b.feature,T=b.id,A=b.index,z=b.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,U=gn(C,R);if(this.layers[0]._featureFilter.filter(new Jt(this.zoom),U,n)){var $=c?c.evaluate(U,{},n,t.availableImages):void 0,H={id:T,properties:C.properties,type:C.type,sourceLayerIndex:z,index:A,geometry:R?U.geometry:sn(C),patterns:{},sortKey:$};h.push(H)}}c&&h.sort(function(je,$e){return je.sortKey-$e.sortKey});for(var oe=0,te=h;oe<te.length;oe+=1){var he=te[oe],ge=he.geometry,xe=he.index,Ce=he.sourceLayerIndex;if(this.hasPattern){var Oe=Cm("fill",this.layers,he,this.zoom,t);this.patternFeatures.push(Oe)}else this.addFeature(he,ge,xe,n,{});t.featureIndex.insert(e[xe].feature,ge,xe,Ce,this.index)}},$a.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},$a.prototype.addFeatures=function(e,t,n){for(var c=0,h=this.patternFeatures;c<h.length;c+=1){var d=h[c];this.addFeature(d,d.geometry,d.index,t,n)}},$a.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},$a.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},$a.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pw),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},$a.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},$a.prototype.addFeature=function(e,t,n,c,h){for(var d=0,v=Sm(t,500);d<v.length;d+=1){for(var b=v[d],C=0,T=0,A=b;T<A.length;T+=1)C+=A[T].length;for(var z=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),R=z.vertexLength,U=[],$=[],H=0,oe=b;H<oe.length;H+=1){var te=oe[H];if(te.length!==0){te!==b[0]&&$.push(U.length/2);var he=this.segments2.prepareSegment(te.length,this.layoutVertexArray,this.indexArray2),ge=he.vertexLength;this.layoutVertexArray.emplaceBack(te[0].x,te[0].y),this.indexArray2.emplaceBack(ge+te.length-1,ge),U.push(te[0].x),U.push(te[0].y);for(var xe=1;xe<te.length;xe++)this.layoutVertexArray.emplaceBack(te[xe].x,te[xe].y),this.indexArray2.emplaceBack(ge+xe-1,ge+xe),U.push(te[xe].x),U.push(te[xe].y);he.vertexLength+=te.length,he.primitiveLength+=te.length}}for(var Ce=_m(U,$),Oe=0;Oe<Ce.length;Oe+=3)this.indexArray.emplaceBack(R+Ce[Oe],R+Ce[Oe+1],R+Ce[Oe+2]);z.vertexLength+=C,z.primitiveLength+=Ce.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,c)},lt("FillBucket",$a,{omit:["layers","patternFeatures"]});var Cw=new ai({"fill-sort-key":new ft(j.layout_fill["fill-sort-key"])}),Pw={paint:new ai({"fill-antialias":new _t(j.paint_fill["fill-antialias"]),"fill-opacity":new ft(j.paint_fill["fill-opacity"]),"fill-color":new ft(j.paint_fill["fill-color"]),"fill-outline-color":new ft(j.paint_fill["fill-outline-color"]),"fill-translate":new _t(j.paint_fill["fill-translate"]),"fill-translate-anchor":new _t(j.paint_fill["fill-translate-anchor"]),"fill-pattern":new Kl(j.paint_fill["fill-pattern"])}),layout:Cw},Tw=function(e){function t(n){e.call(this,n,Pw)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(n,c){e.prototype.recalculate.call(this,n,c);var h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(n){return new $a(n)},t.prototype.queryRadius=function(){return jn(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(n,c,h,d,v,b,C){return oa(Wa(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,C),d)},t.prototype.isTileClipped=function(){return!0},t}(xa),Iw=Hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Og=nc;function nc(e,t,n,c,h){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=c,this._values=h,e.readFields(kw,this,t)}function kw(e,t,n){e==1?t.id=n.readVarint():e==2?function(c,h){for(var d=c.readVarint()+c.pos;c.pos<d;){var v=h._keys[c.readVarint()],b=h._values[c.readVarint()];h.properties[v]=b}}(n,t):e==3?t.type=n.readVarint():e==4&&(t._geometry=n.pos)}function Aw(e){for(var t,n,c=0,h=0,d=e.length,v=d-1;h<d;v=h++)c+=((n=e[v]).x-(t=e[h]).x)*(t.y+n.y);return c}nc.types=["Unknown","Point","LineString","Polygon"],nc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,c=1,h=0,d=0,v=0,b=[];e.pos<n;){if(h<=0){var C=e.readVarint();c=7&C,h=C>>3}if(h--,c===1||c===2)d+=e.readSVarint(),v+=e.readSVarint(),c===1&&(t&&b.push(t),t=[]),t.push(new ee(d,v));else{if(c!==7)throw new Error("unknown command "+c);t&&t.push(t[0].clone())}}return t&&b.push(t),b},nc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,c=0,h=0,d=0,v=1/0,b=-1/0,C=1/0,T=-1/0;e.pos<t;){if(c<=0){var A=e.readVarint();n=7&A,c=A>>3}if(c--,n===1||n===2)(h+=e.readSVarint())<v&&(v=h),h>b&&(b=h),(d+=e.readSVarint())<C&&(C=d),d>T&&(T=d);else if(n!==7)throw new Error("unknown command "+n)}return[v,C,b,T]},nc.prototype.toGeoJSON=function(e,t,n){var c,h,d=this.extent*Math.pow(2,n),v=this.extent*e,b=this.extent*t,C=this.loadGeometry(),T=nc.types[this.type];function A(U){for(var $=0;$<U.length;$++){var H=U[$];U[$]=[360*(H.x+v)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(H.y+b)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(c=0;c<C.length;c++)z[c]=C[c][0];A(C=z);break;case 2:for(c=0;c<C.length;c++)A(C[c]);break;case 3:for(C=function(U){var $=U.length;if($<=1)return[U];for(var H,oe,te=[],he=0;he<$;he++){var ge=Aw(U[he]);ge!==0&&(oe===void 0&&(oe=ge<0),oe===ge<0?(H&&te.push(H),H=[U[he]]):H.push(U[he]))}return H&&te.push(H),te}(C),c=0;c<C.length;c++)for(h=0;h<C[c].length;h++)A(C[c][h])}C.length===1?C=C[0]:T="Multi"+T;var R={type:"Feature",geometry:{type:T,coordinates:C},properties:this.properties};return"id"in this&&(R.id=this.id),R};var Rg=Fg;function Fg(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Mw,this,t),this.length=this._features.length}function Mw(e,t,n){e===15?t.version=n.readVarint():e===1?t.name=n.readString():e===5?t.extent=n.readVarint():e===2?t._features.push(n.pos):e===3?t._keys.push(n.readString()):e===4&&t._values.push(function(c){for(var h=null,d=c.readVarint()+c.pos;c.pos<d;){var v=c.readVarint()>>3;h=v===1?c.readString():v===2?c.readFloat():v===3?c.readDouble():v===4?c.readVarint64():v===5?c.readVarint():v===6?c.readSVarint():v===7?c.readBoolean():null}return h}(n))}function zw(e,t,n){if(e===3){var c=new Rg(n,n.readVarint()+n.pos);c.length&&(t[c.name]=c)}}Fg.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Og(this._pbf,t,this.extent,this._keys,this._values)};var ic={VectorTile:function(e,t){this.layers=e.readFields(zw,{},t)},VectorTileFeature:Og,VectorTileLayer:Rg},Lw=ic.VectorTileFeature.types,Pm=Math.pow(2,13);function Ep(e,t,n,c,h,d,v,b){e.emplaceBack(t,n,2*Math.floor(c*Pm)+v,h*Pm*2,d*Pm*2,Math.round(b))}var Xa=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ga,this.indexArray=new us,this.programConfigurations=new kt(e.layers,e.zoom),this.segments=new V,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Dw(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Xa.prototype.populate=function(e,t,n){this.features=[],this.hasPattern=Em("fill-extrusion",this.layers,t);for(var c=0,h=e;c<h.length;c+=1){var d=h[c],v=d.feature,b=d.id,C=d.index,T=d.sourceLayerIndex,A=this.layers[0]._featureFilter.needGeometry,z=gn(v,A);if(this.layers[0]._featureFilter.filter(new Jt(this.zoom),z,n)){var R={id:b,sourceLayerIndex:T,index:C,geometry:A?z.geometry:sn(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Cm("fill-extrusion",this.layers,R,this.zoom,t)):this.addFeature(R,R.geometry,C,n,{}),t.featureIndex.insert(v,R.geometry,C,T,this.index,!0)}}},Xa.prototype.addFeatures=function(e,t,n){for(var c=0,h=this.features;c<h.length;c+=1){var d=h[c];this.addFeature(d,d.geometry,d.index,t,n)}},Xa.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Xa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Xa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xa.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Iw),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Xa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xa.prototype.addFeature=function(e,t,n,c,h){for(var d=0,v=Sm(t,500);d<v.length;d+=1){for(var b=v[d],C=0,T=0,A=b;T<A.length;T+=1)C+=A[T].length;for(var z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),R=0,U=b;R<U.length;R+=1){var $=U[R];if($.length!==0&&!((Yt=$).every(function(Zt){return Zt.x<0})||Yt.every(function(Zt){return Zt.x>8192})||Yt.every(function(Zt){return Zt.y<0})||Yt.every(function(Zt){return Zt.y>8192})))for(var H=0,oe=0;oe<$.length;oe++){var te=$[oe];if(oe>=1){var he=$[oe-1];if(!Dw(te,he)){z.vertexLength+4>V.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ge=te.sub(he)._perp()._unit(),xe=he.dist(te);H+xe>32768&&(H=0),Ep(this.layoutVertexArray,te.x,te.y,ge.x,ge.y,0,0,H),Ep(this.layoutVertexArray,te.x,te.y,ge.x,ge.y,0,1,H),Ep(this.layoutVertexArray,he.x,he.y,ge.x,ge.y,0,0,H+=xe),Ep(this.layoutVertexArray,he.x,he.y,ge.x,ge.y,0,1,H);var Ce=z.vertexLength;this.indexArray.emplaceBack(Ce,Ce+2,Ce+1),this.indexArray.emplaceBack(Ce+1,Ce+2,Ce+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+C>V.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),Lw[e.type]==="Polygon"){for(var Oe=[],je=[],$e=z.vertexLength,vt=0,tt=b;vt<tt.length;vt+=1){var bt=tt[vt];if(bt.length!==0){bt!==b[0]&&je.push(Oe.length/2);for(var rt=0;rt<bt.length;rt++){var Xt=bt[rt];Ep(this.layoutVertexArray,Xt.x,Xt.y,0,0,1,1,0),Oe.push(Xt.x),Oe.push(Xt.y)}}}for(var Lt=_m(Oe,je),dt=0;dt<Lt.length;dt+=3)this.indexArray.emplaceBack($e+Lt[dt],$e+Lt[dt+2],$e+Lt[dt+1]);z.primitiveLength+=Lt.length/3,z.vertexLength+=C}}var Yt;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,c)},lt("FillExtrusionBucket",Xa,{omit:["layers","features"]});var Ow={paint:new ai({"fill-extrusion-opacity":new _t(j["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ft(j["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new _t(j["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new _t(j["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Kl(j["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ft(j["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ft(j["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new _t(j["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Rw=function(e){function t(n){e.call(this,n,Ow)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new Xa(n)},t.prototype.queryRadius=function(){return jn(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(n,c,h,d,v,b,C,T){var A=Wa(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,C),z=this.paint.get("fill-extrusion-height").evaluate(c,h),R=this.paint.get("fill-extrusion-base").evaluate(c,h),U=function(H,oe,te,he){for(var ge=[],xe=0,Ce=H;xe<Ce.length;xe+=1){var Oe=Ce[xe],je=[Oe.x,Oe.y,0,1];ec(je,je,oe),ge.push(new ee(je[0]/je[3],je[1]/je[3]))}return ge}(A,T),$=function(H,oe,te,he){for(var ge=[],xe=[],Ce=he[8]*oe,Oe=he[9]*oe,je=he[10]*oe,$e=he[11]*oe,vt=he[8]*te,tt=he[9]*te,bt=he[10]*te,rt=he[11]*te,Xt=0,Lt=H;Xt<Lt.length;Xt+=1){for(var dt=[],Yt=[],Zt=0,ur=Lt[Xt];Zt<ur.length;Zt+=1){var wt=ur[Zt],vr=wt.x,Kr=wt.y,fn=he[0]*vr+he[4]*Kr+he[12],un=he[1]*vr+he[5]*Kr+he[13],Hr=he[2]*vr+he[6]*Kr+he[14],dn=he[3]*vr+he[7]*Kr+he[15],Vn=Hr+je,qn=dn+$e,bi=fn+vt,Qn=un+tt,wi=Hr+bt,_n=dn+rt,ei=new ee((fn+Ce)/qn,(un+Oe)/qn);ei.z=Vn/qn,dt.push(ei);var nr=new ee(bi/_n,Qn/_n);nr.z=wi/_n,Yt.push(nr)}ge.push(dt),xe.push(Yt)}return[ge,xe]}(d,R,z,T);return function(H,oe,te){var he=1/0;oa(te,oe)&&(he=Bg(te,oe[0]));for(var ge=0;ge<oe.length;ge++)for(var xe=oe[ge],Ce=H[ge],Oe=0;Oe<xe.length-1;Oe++){var je=xe[Oe],$e=[je,xe[Oe+1],Ce[Oe+1],Ce[Oe],je];ps(te,$e)&&(he=Math.min(he,Bg(te,$e)))}return he!==1/0&&he}($[0],$[1],U)},t}(xa);function Cp(e,t){return e.x*t.x+e.y*t.y}function Bg(e,t){if(e.length===1){for(var n,c=0,h=t[c++];!n||h.equals(n);)if(!(n=t[c++]))return 1/0;for(;c<t.length;c++){var d=t[c],v=e[0],b=n.sub(h),C=d.sub(h),T=v.sub(h),A=Cp(b,b),z=Cp(b,C),R=Cp(C,C),U=Cp(T,b),$=Cp(T,C),H=A*R-z*z,oe=(R*U-z*$)/H,te=(A*$-z*U)/H,he=h.z*(1-oe-te)+n.z*oe+d.z*te;if(isFinite(he))return he}return 1/0}for(var ge=1/0,xe=0,Ce=t;xe<Ce.length;xe+=1)ge=Math.min(ge,Ce[xe].z);return ge}var Fw=Hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Bw=Hn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Uw=ic.VectorTileFeature.types,Nw=Math.cos(Math.PI/180*37.5),Ug=Math.pow(2,14)/.5,Oi=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(n){return n.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(n){t.gradients[n.id]={}}),this.layoutVertexArray=new oo,this.layoutVertexArray2=new pu,this.indexArray=new us,this.programConfigurations=new kt(e.layers,e.zoom),this.segments=new V,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(n){return n.isStateDependent()}).map(function(n){return n.id})};Oi.prototype.populate=function(e,t,n){this.hasPattern=Em("line",this.layers,t);for(var c=this.layers[0].layout.get("line-sort-key"),h=[],d=0,v=e;d<v.length;d+=1){var b=v[d],C=b.feature,T=b.id,A=b.index,z=b.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,U=gn(C,R);if(this.layers[0]._featureFilter.filter(new Jt(this.zoom),U,n)){var $=c?c.evaluate(U,{},n):void 0,H={id:T,properties:C.properties,type:C.type,sourceLayerIndex:z,index:A,geometry:R?U.geometry:sn(C),patterns:{},sortKey:$};h.push(H)}}c&&h.sort(function(je,$e){return je.sortKey-$e.sortKey});for(var oe=0,te=h;oe<te.length;oe+=1){var he=te[oe],ge=he.geometry,xe=he.index,Ce=he.sourceLayerIndex;if(this.hasPattern){var Oe=Cm("line",this.layers,he,this.zoom,t);this.patternFeatures.push(Oe)}else this.addFeature(he,ge,xe,n,{});t.featureIndex.insert(e[xe].feature,ge,xe,Ce,this.index)}},Oi.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Oi.prototype.addFeatures=function(e,t,n){for(var c=0,h=this.patternFeatures;c<h.length;c+=1){var d=h[c];this.addFeature(d,d.geometry,d.index,t,n)}},Oi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Oi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Oi.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Bw)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Fw),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Oi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Oi.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Oi.prototype.addFeature=function(e,t,n,c,h){var d=this.layers[0].layout,v=d.get("line-join").evaluate(e,{}),b=d.get("line-cap"),C=d.get("line-miter-limit"),T=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var A=0,z=t;A<z.length;A+=1)this.addLine(z[A],e,v,b,C,T);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,c)},Oi.prototype.addLine=function(e,t,n,c,h,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var v=0;v<e.length-1;v++)this.totalDistance+=e[v].dist(e[v+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var b=Uw[t.type]==="Polygon",C=e.length;C>=2&&e[C-1].equals(e[C-2]);)C--;for(var T=0;T<C-1&&e[T].equals(e[T+1]);)T++;if(!(C<(b?3:2))){n==="bevel"&&(h=1.05);var A,z=this.overscaling<=16?122880/(512*this.overscaling):0,R=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),U=void 0,$=void 0,H=void 0,oe=void 0;this.e1=this.e2=-1,b&&(oe=e[T].sub(A=e[C-2])._unit()._perp());for(var te=T;te<C;te++)if(!($=te===C-1?b?e[T+1]:void 0:e[te+1])||!e[te].equals($)){oe&&(H=oe),A&&(U=A),A=e[te],oe=$?$.sub(A)._unit()._perp():H;var he=(H=H||oe).add(oe);he.x===0&&he.y===0||he._unit();var ge=H.x*oe.x+H.y*oe.y,xe=he.x*oe.x+he.y*oe.y,Ce=xe!==0?1/xe:1/0,Oe=2*Math.sqrt(2-2*xe),je=xe<Nw&&U&&$,$e=H.x*oe.y-H.y*oe.x>0;if(je&&te>T){var vt=A.dist(U);if(vt>2*z){var tt=A.sub(A.sub(U)._mult(z/vt)._round());this.updateDistance(U,tt),this.addCurrentVertex(tt,H,0,0,R),U=tt}}var bt=U&&$,rt=bt?n:b?"butt":c;if(bt&&rt==="round"&&(Ce<d?rt="miter":Ce<=2&&(rt="fakeround")),rt==="miter"&&Ce>h&&(rt="bevel"),rt==="bevel"&&(Ce>2&&(rt="flipbevel"),Ce<h&&(rt="miter")),U&&this.updateDistance(U,A),rt==="miter")he._mult(Ce),this.addCurrentVertex(A,he,0,0,R);else if(rt==="flipbevel"){if(Ce>100)he=oe.mult(-1);else{var Xt=Ce*H.add(oe).mag()/H.sub(oe).mag();he._perp()._mult(Xt*($e?-1:1))}this.addCurrentVertex(A,he,0,0,R),this.addCurrentVertex(A,he.mult(-1),0,0,R)}else if(rt==="bevel"||rt==="fakeround"){var Lt=-Math.sqrt(Ce*Ce-1),dt=$e?Lt:0,Yt=$e?0:Lt;if(U&&this.addCurrentVertex(A,H,dt,Yt,R),rt==="fakeround")for(var Zt=Math.round(180*Oe/Math.PI/20),ur=1;ur<Zt;ur++){var wt=ur/Zt;if(wt!==.5){var vr=wt-.5;wt+=wt*vr*(wt-1)*((1.0904+ge*(ge*(3.55645-1.43519*ge)-3.2452))*vr*vr+(.848013+ge*(.215638*ge-1.06021)))}var Kr=oe.sub(H)._mult(wt)._add(H)._unit()._mult($e?-1:1);this.addHalfVertex(A,Kr.x,Kr.y,!1,$e,0,R)}$&&this.addCurrentVertex(A,oe,-dt,-Yt,R)}else if(rt==="butt")this.addCurrentVertex(A,he,0,0,R);else if(rt==="square"){var fn=U?1:-1;this.addCurrentVertex(A,he,fn,fn,R)}else rt==="round"&&(U&&(this.addCurrentVertex(A,H,0,0,R),this.addCurrentVertex(A,H,1,1,R,!0)),$&&(this.addCurrentVertex(A,oe,-1,-1,R,!0),this.addCurrentVertex(A,oe,0,0,R)));if(je&&te<C-1){var un=A.dist($);if(un>2*z){var Hr=A.add($.sub(A)._mult(z/un)._round());this.updateDistance(A,Hr),this.addCurrentVertex(Hr,oe,0,0,R),A=Hr}}}}},Oi.prototype.addCurrentVertex=function(e,t,n,c,h,d){d===void 0&&(d=!1);var v=t.y*c-t.x,b=-t.y-t.x*c;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,d,!1,n,h),this.addHalfVertex(e,v,b,d,!0,-c,h),this.distance>Ug/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,n,c,h,d))},Oi.prototype.addHalfVertex=function(e,t,n,c,h,d,v){var b=.5*(this.lineClips?this.scaledDistance*(Ug-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(c?1:0),(e.y<<1)+(h?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(d===0?0:d<0?-1:1)|(63&b)<<2,b>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var C=v.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),v.primitiveLength++),h?this.e2=C:this.e1=C},Oi.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Oi.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},lt("LineBucket",Oi,{omit:["layers","patternFeatures"]});var jw=new ai({"line-cap":new _t(j.layout_line["line-cap"]),"line-join":new ft(j.layout_line["line-join"]),"line-miter-limit":new _t(j.layout_line["line-miter-limit"]),"line-round-limit":new _t(j.layout_line["line-round-limit"]),"line-sort-key":new ft(j.layout_line["line-sort-key"])}),Ng={paint:new ai({"line-opacity":new ft(j.paint_line["line-opacity"]),"line-color":new ft(j.paint_line["line-color"]),"line-translate":new _t(j.paint_line["line-translate"]),"line-translate-anchor":new _t(j.paint_line["line-translate-anchor"]),"line-width":new ft(j.paint_line["line-width"]),"line-gap-width":new ft(j.paint_line["line-gap-width"]),"line-offset":new ft(j.paint_line["line-offset"]),"line-blur":new ft(j.paint_line["line-blur"]),"line-dasharray":new gi(j.paint_line["line-dasharray"]),"line-pattern":new Kl(j.paint_line["line-pattern"]),"line-gradient":new ia(j.paint_line["line-gradient"])}),layout:jw},jg=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(n,c){return c=new Jt(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),e.prototype.possiblyEvaluate.call(this,n,c)},t.prototype.evaluate=function(n,c,h,d){return c=ae({},c,{zoom:Math.floor(c.zoom)}),e.prototype.evaluate.call(this,n,c,h,d)},t}(ft))(Ng.paint.properties["line-width"].specification);jg.useIntegerZoom=!0;var Vw=function(e){function t(n){e.call(this,n,Ng),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(n){n==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof jr,this.gradientVersion=(this.gradientVersion+1)%Se)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(n,c){e.prototype.recalculate.call(this,n,c),this.paint._values["line-floorwidth"]=jg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)},t.prototype.createBucket=function(n){return new Oi(n)},t.prototype.queryRadius=function(n){var c=n,h=Vg(Sa("line-width",this,c),Sa("line-gap-width",this,c)),d=Sa("line-offset",this,c);return h/2+Math.abs(d)+jn(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(n,c,h,d,v,b,C){var T=Wa(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,C),A=C/2*Vg(this.paint.get("line-width").evaluate(c,h),this.paint.get("line-gap-width").evaluate(c,h)),z=this.paint.get("line-offset").evaluate(c,h);return z&&(d=function(R,U){for(var $=[],H=new ee(0,0),oe=0;oe<R.length;oe++){for(var te=R[oe],he=[],ge=0;ge<te.length;ge++){var xe=te[ge],Ce=te[ge+1],Oe=ge===0?H:xe.sub(te[ge-1])._unit()._perp(),je=ge===te.length-1?H:Ce.sub(xe)._unit()._perp(),$e=Oe._add(je)._unit();$e._mult(1/($e.x*je.x+$e.y*je.y)),he.push($e._mult(U)._add(xe))}$.push(he)}return $}(d,z*C)),function(R,U,$){for(var H=0;H<U.length;H++){var oe=U[H];if(R.length>=3){for(var te=0;te<oe.length;te++)if(wa(R,oe[te]))return!0}if(Uo(R,oe,$))return!0}return!1}(T,d,A)},t.prototype.isTileClipped=function(){return!0},t}(xa);function Vg(e,t){return t>0?t+2*e:e}var qw=Hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Zw=Hn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Gw=(Hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),qg=(Hn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ww=Hn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $w(e,t,n){return e.sections.forEach(function(c){c.text=function(h,d,v){var b=d.layout.get("text-transform").evaluate(v,{});return b==="uppercase"?h=h.toLocaleUpperCase():b==="lowercase"&&(h=h.toLocaleLowerCase()),wo.applyArabicShaping&&(h=wo.applyArabicShaping(h)),h}(c.text,t,n)}),e}Hn([{name:"triangle",components:3,type:"Uint16"}]),Hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Hn([{type:"Float32",name:"offsetX"}]),Hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Pp={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Zg=function(e,t,n,c,h){var d,v,b=8*h-c-1,C=(1<<b)-1,T=C>>1,A=-7,z=n?h-1:0,R=n?-1:1,U=e[t+z];for(z+=R,d=U&(1<<-A)-1,U>>=-A,A+=b;A>0;d=256*d+e[t+z],z+=R,A-=8);for(v=d&(1<<-A)-1,d>>=-A,A+=c;A>0;v=256*v+e[t+z],z+=R,A-=8);if(d===0)d=1-T;else{if(d===C)return v?NaN:1/0*(U?-1:1);v+=Math.pow(2,c),d-=T}return(U?-1:1)*v*Math.pow(2,d-c)},Gg=function(e,t,n,c,h,d){var v,b,C,T=8*d-h-1,A=(1<<T)-1,z=A>>1,R=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=c?0:d-1,$=c?1:-1,H=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,v=A):(v=Math.floor(Math.log(t)/Math.LN2),t*(C=Math.pow(2,-v))<1&&(v--,C*=2),(t+=v+z>=1?R/C:R*Math.pow(2,1-z))*C>=2&&(v++,C/=2),v+z>=A?(b=0,v=A):v+z>=1?(b=(t*C-1)*Math.pow(2,h),v+=z):(b=t*Math.pow(2,z-1)*Math.pow(2,h),v=0));h>=8;e[n+U]=255&b,U+=$,b/=256,h-=8);for(v=v<<h|b,T+=h;T>0;e[n+U]=255&v,U+=$,v/=256,T-=8);e[n+U-$]|=128*H},uf=Vr;function Vr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Vr.Varint=0,Vr.Fixed64=1,Vr.Bytes=2,Vr.Fixed32=5;var Wg=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Ws(e){return e.type===Vr.Bytes?e.readVarint()+e.pos:e.pos+1}function oc(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function $g(e,t,n){var c=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(c);for(var h=n.pos-1;h>=e;h--)n.buf[h+c]=n.buf[h]}function Xw(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Kw(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Hw(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Yw(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Jw(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Qw(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function e2(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function t2(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function r2(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function lf(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function ac(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Xg(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function n2(e,t,n){e===1&&n.readMessage(i2,t)}function i2(e,t,n){if(e===3){var c=n.readMessage(o2,{}),h=c.width,d=c.height,v=c.left,b=c.top,C=c.advance;t.push({id:c.id,bitmap:new cl({width:h+6,height:d+6},c.bitmap),metrics:{width:h,height:d,left:v,top:b,advance:C}})}}function o2(e,t,n){e===1?t.id=n.readVarint():e===2?t.bitmap=n.readBytes():e===3?t.width=n.readVarint():e===4?t.height=n.readVarint():e===5?t.left=n.readSVarint():e===6?t.top=n.readSVarint():e===7&&(t.advance=n.readVarint())}function Kg(e){for(var t=0,n=0,c=0,h=e;c<h.length;c+=1){var d=h[c];t+=d.w*d.h,n=Math.max(n,d.w)}e.sort(function(H,oe){return oe.h-H.h});for(var v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],b=0,C=0,T=0,A=e;T<A.length;T+=1)for(var z=A[T],R=v.length-1;R>=0;R--){var U=v[R];if(!(z.w>U.w||z.h>U.h)){if(z.x=U.x,z.y=U.y,C=Math.max(C,z.y+z.h),b=Math.max(b,z.x+z.w),z.w===U.w&&z.h===U.h){var $=v.pop();R<v.length&&(v[R]=$)}else z.h===U.h?(U.x+=z.w,U.w-=z.w):z.w===U.w?(U.y+=z.h,U.h-=z.h):(v.push({x:U.x+z.w,y:U.y,w:U.w-z.w,h:z.h}),U.y+=z.h,U.h-=z.h);break}}return{w:b,h:C,fill:t/(b*C)||0}}Vr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var c=this.readVarint(),h=c>>3,d=this.pos;this.type=7&c,e(h,t,this),this.pos===d&&this.skip(c)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=lf(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Xg(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=lf(this.buf,this.pos)+4294967296*lf(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=lf(this.buf,this.pos)+4294967296*Xg(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Zg(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Zg(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,c=this.buf;return t=127&(n=c[this.pos++]),n<128?t:(t|=(127&(n=c[this.pos++]))<<7,n<128?t:(t|=(127&(n=c[this.pos++]))<<14,n<128?t:(t|=(127&(n=c[this.pos++]))<<21,n<128?t:function(h,d,v){var b,C,T=v.buf;if(b=(112&(C=T[v.pos++]))>>4,C<128||(b|=(127&(C=T[v.pos++]))<<3,C<128)||(b|=(127&(C=T[v.pos++]))<<10,C<128)||(b|=(127&(C=T[v.pos++]))<<17,C<128)||(b|=(127&(C=T[v.pos++]))<<24,C<128)||(b|=(1&(C=T[v.pos++]))<<31,C<128))return oc(h,b,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=c[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Wg?function(n,c,h){return Wg.decode(n.subarray(c,h))}(this.buf,t,e):function(n,c,h){for(var d="",v=c;v<h;){var b,C,T,A=n[v],z=null,R=A>239?4:A>223?3:A>191?2:1;if(v+R>h)break;R===1?A<128&&(z=A):R===2?(192&(b=n[v+1]))==128&&(z=(31&A)<<6|63&b)<=127&&(z=null):R===3?(C=n[v+2],(192&(b=n[v+1]))==128&&(192&C)==128&&((z=(15&A)<<12|(63&b)<<6|63&C)<=2047||z>=55296&&z<=57343)&&(z=null)):R===4&&(C=n[v+2],T=n[v+3],(192&(b=n[v+1]))==128&&(192&C)==128&&(192&T)==128&&((z=(15&A)<<18|(63&b)<<12|(63&C)<<6|63&T)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,R=1):z>65535&&(z-=65536,d+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),d+=String.fromCharCode(z),v+=R}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Vr.Bytes)return e.push(this.readVarint(t));var n=Ws(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Vr.Bytes)return e.push(this.readSVarint());var t=Ws(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Vr.Bytes)return e.push(this.readBoolean());var t=Ws(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Vr.Bytes)return e.push(this.readFloat());var t=Ws(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Vr.Bytes)return e.push(this.readDouble());var t=Ws(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Vr.Bytes)return e.push(this.readFixed32());var t=Ws(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Vr.Bytes)return e.push(this.readSFixed32());var t=Ws(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Vr.Bytes)return e.push(this.readFixed64());var t=Ws(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Vr.Bytes)return e.push(this.readSFixed64());var t=Ws(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Vr.Varint)for(;this.buf[this.pos++]>127;);else if(t===Vr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Vr.Fixed32)this.pos+=4;else{if(t!==Vr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),ac(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),ac(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),ac(this.buf,-1&e,this.pos),ac(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),ac(this.buf,-1&e,this.pos),ac(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,n){var c,h;if(t>=0?(c=t%4294967296|0,h=t/4294967296|0):(h=~(-t/4294967296),4294967295^(c=~(-t%4294967296))?c=c+1|0:(c=0,h=h+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(d,v,b){b.buf[b.pos++]=127&d|128,d>>>=7,b.buf[b.pos++]=127&d|128,d>>>=7,b.buf[b.pos++]=127&d|128,d>>>=7,b.buf[b.pos++]=127&d|128,b.buf[b.pos]=127&(d>>>=7)}(c,0,n),function(d,v){var b=(7&d)<<4;v.buf[v.pos++]|=b|((d>>>=3)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d)))))}(h,n)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(c,h,d){for(var v,b,C=0;C<h.length;C++){if((v=h.charCodeAt(C))>55295&&v<57344){if(!b){v>56319||C+1===h.length?(c[d++]=239,c[d++]=191,c[d++]=189):b=v;continue}if(v<56320){c[d++]=239,c[d++]=191,c[d++]=189,b=v;continue}v=b-55296<<10|v-56320|65536,b=null}else b&&(c[d++]=239,c[d++]=191,c[d++]=189,b=null);v<128?c[d++]=v:(v<2048?c[d++]=v>>6|192:(v<65536?c[d++]=v>>12|224:(c[d++]=v>>18|240,c[d++]=v>>12&63|128),c[d++]=v>>6&63|128),c[d++]=63&v|128)}return d}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&$g(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Gg(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Gg(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var c=this.pos-n;c>=128&&$g(n,c,this),this.pos=n-1,this.writeVarint(c),this.pos+=c},writeMessage:function(e,t,n){this.writeTag(e,Vr.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Xw,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Kw,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Jw,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Hw,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Yw,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Qw,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,e2,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,t2,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,r2,t)},writeBytesField:function(e,t){this.writeTag(e,Vr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Vr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Vr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Vr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Vr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Vr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Vr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Vr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Vr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Vr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var cf=function(e,t){var n=t.pixelRatio,c=t.version,h=t.stretchX,d=t.stretchY,v=t.content;this.paddedRect=e,this.pixelRatio=n,this.stretchX=h,this.stretchY=d,this.content=v,this.version=c},Tp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Tp.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Tp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Tp.tlbr.get=function(){return this.tl.concat(this.br)},Tp.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(cf.prototype,Tp);var Ip=function(e,t){var n={},c={};this.haveRenderCallbacks=[];var h=[];this.addImages(e,n,h),this.addImages(t,c,h);var d=Kg(h),v=new so({width:d.w||1,height:d.h||1});for(var b in e){var C=e[b],T=n[b].paddedRect;so.copy(C.data,v,{x:0,y:0},{x:T.x+1,y:T.y+1},C.data)}for(var A in t){var z=t[A],R=c[A].paddedRect,U=R.x+1,$=R.y+1,H=z.data.width,oe=z.data.height;so.copy(z.data,v,{x:0,y:0},{x:U,y:$},z.data),so.copy(z.data,v,{x:0,y:oe-1},{x:U,y:$-1},{width:H,height:1}),so.copy(z.data,v,{x:0,y:0},{x:U,y:$+oe},{width:H,height:1}),so.copy(z.data,v,{x:H-1,y:0},{x:U-1,y:$},{width:1,height:oe}),so.copy(z.data,v,{x:0,y:0},{x:U+H,y:$},{width:1,height:oe})}this.image=v,this.iconPositions=n,this.patternPositions=c};Ip.prototype.addImages=function(e,t,n){for(var c in e){var h=e[c],d={x:0,y:0,w:h.data.width+2,h:h.data.height+2};n.push(d),t[c]=new cf(d,h),h.hasRenderCallback&&this.haveRenderCallbacks.push(c)}},Ip.prototype.patchUpdatedImages=function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)},Ip.prototype.patchUpdatedImage=function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var c=e.tl;n.update(t.data,void 0,{x:c[0],y:c[1]})}},lt("ImagePosition",cf),lt("ImageAtlas",Ip);var No={horizontal:1,vertical:2,horizontalOnly:3},sc=function(){this.scale=1,this.fontStack="",this.imageName=null};sc.forText=function(e,t){var n=new sc;return n.scale=e||1,n.fontStack=t,n},sc.forImage=function(e){var t=new sc;return t.imageName=e,t};var xi=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function pf(e,t,n,c,h,d,v,b,C,T,A,z,R,U,$,H){var oe,te=xi.fromFeature(e,h);z===No.vertical&&te.verticalizePunctuation();var he=wo.processBidirectionalText,ge=wo.processStyledBidirectionalText;if(he&&te.sections.length===1){oe=[];for(var xe=0,Ce=he(te.toString(),Tm(te,T,d,t,c,U,$));xe<Ce.length;xe+=1){var Oe=Ce[xe],je=new xi;je.text=Oe,je.sections=te.sections;for(var $e=0;$e<Oe.length;$e++)je.sectionIndex.push(0);oe.push(je)}}else if(ge){oe=[];for(var vt=0,tt=ge(te.text,te.sectionIndex,Tm(te,T,d,t,c,U,$));vt<tt.length;vt+=1){var bt=tt[vt],rt=new xi;rt.text=bt[0],rt.sectionIndex=bt[1],rt.sections=te.sections,oe.push(rt)}}else oe=function(dt,Yt){for(var Zt=[],ur=dt.text,wt=0,vr=0,Kr=Yt;vr<Kr.length;vr+=1){var fn=Kr[vr];Zt.push(dt.substring(wt,fn)),wt=fn}return wt<ur.length&&Zt.push(dt.substring(wt,ur.length)),Zt}(te,Tm(te,T,d,t,c,U,$));var Xt=[],Lt={positionedLines:Xt,text:te.toString(),top:A[1],bottom:A[1],left:A[0],right:A[0],writingMode:z,iconsInText:!1,verticalizable:!1};return function(dt,Yt,Zt,ur,wt,vr,Kr,fn,un,Hr,dn,Vn){for(var qn=0,bi=-17,Qn=0,wi=0,_n=fn==="right"?1:fn==="left"?0:.5,ei=0,nr=0,Or=wt;nr<Or.length;nr+=1){var Pr=Or[nr];Pr.trim();var fr=Pr.getMaxScale(),Ri=24*(fr-1),hi={positionedGlyphs:[],lineOffset:0};dt.positionedLines[ei]=hi;var $r=hi.positionedGlyphs,Pn=0;if(Pr.length()){for(var fi=0;fi<Pr.length();fi++){var gr=Pr.getSection(fi),ds=Pr.getSectionIndex(fi),jo=Pr.getCharCode(fi),ms=0,xn=null,ys=null,Ea=null,mc=24,dl=!(un===No.horizontal||!dn&&!Wl(jo)||dn&&(hf[jo]||(Hs=jo,He.Arabic(Hs)||He["Arabic Supplement"](Hs)||He["Arabic Extended-A"](Hs)||He["Arabic Presentation Forms-A"](Hs)||He["Arabic Presentation Forms-B"](Hs))));if(gr.imageName){var yc=ur[gr.imageName];if(!yc)continue;Ea=gr.imageName,dt.iconsInText=dt.iconsInText||!0,ys=yc.paddedRect;var Ks=yc.displaySize;gr.scale=24*gr.scale/Vn,ms=Ri+(24-Ks[1]*gr.scale),mc=(xn={width:Ks[0],height:Ks[1],left:1,top:-3,advance:dl?Ks[1]:Ks[0]}).advance;var vc=dl?Ks[0]*gr.scale-24*fr:Ks[1]*gr.scale-24*fr;vc>0&&vc>Pn&&(Pn=vc)}else{var bf=Zt[gr.fontStack],gc=bf&&bf[jo];if(gc&&gc.rect)ys=gc.rect,xn=gc.metrics;else{var Mp=Yt[gr.fontStack],wf=Mp&&Mp[jo];if(!wf)continue;xn=wf.metrics}ms=24*(fr-gr.scale)}dl?(dt.verticalizable=!0,$r.push({glyph:jo,imageName:Ea,x:qn,y:bi+ms,vertical:dl,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:ds,metrics:xn,rect:ys}),qn+=mc*gr.scale+Hr):($r.push({glyph:jo,imageName:Ea,x:qn,y:bi+ms,vertical:dl,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:ds,metrics:xn,rect:ys}),qn+=xn.advance*gr.scale+Hr)}$r.length!==0&&(Qn=Math.max(qn-Hr,Qn),s2($r,0,$r.length-1,_n,Pn)),qn=0;var Sf=vr*fr+Pn;hi.lineOffset=Math.max(Pn,Ri),bi+=Sf,wi=Math.max(Sf,wi),++ei}else bi+=vr,++ei}var Hs,zp=bi- -17,_c=Im(Kr),_u=_c.horizontalAlign,xc=_c.verticalAlign;(function(Ef,Cf,Lp,Dp,Pf,Op,Rp,Fp,Tf){var bc,If=(Cf-Lp)*Pf;bc=Op!==Rp?-Fp*Dp- -17:(-Dp*Tf+.5)*Rp;for(var wc=0,Bp=Ef;wc<Bp.length;wc+=1)for(var ml=0,Up=Bp[wc].positionedGlyphs;ml<Up.length;ml+=1){var Sc=Up[ml];Sc.x+=If,Sc.y+=bc}})(dt.positionedLines,_n,_u,xc,Qn,wi,vr,zp,wt.length),dt.top+=-xc*zp,dt.bottom=dt.top+zp,dt.left+=-_u*Qn,dt.right=dt.left+Qn}(Lt,t,n,c,oe,v,b,C,z,T,R,H),!function(dt){for(var Yt=0,Zt=dt;Yt<Zt.length;Yt+=1)if(Zt[Yt].positionedGlyphs.length!==0)return!1;return!0}(Xt)&&Lt}xi.fromFeature=function(e,t){for(var n=new xi,c=0;c<e.sections.length;c++){var h=e.sections[c];h.image?n.addImageSection(h):n.addTextSection(h,t)}return n},xi.prototype.length=function(){return this.text.length},xi.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},xi.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},xi.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},xi.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var c=e.charCodeAt(n+1)||null,h=e.charCodeAt(n-1)||null;t+=c&&pp(c)&&!Pp[e[n+1]]||h&&pp(h)&&!Pp[e[n-1]]||!Pp[e[n]]?e[n]:Pp[e[n]]}return t}(this.text)},xi.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&hf[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,c=this.text.length-1;c>=0&&c>=e&&hf[this.text.charCodeAt(c)];c--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},xi.prototype.substring=function(e,t){var n=new xi;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},xi.prototype.toString=function(){return this.text},xi.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,n){return Math.max(t,e.sections[n].scale)},0)},xi.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(sc.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,c=0;c<e.text.length;++c)this.sectionIndex.push(n)},xi.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(sc.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Ut("Reached maximum number of images 6401")}else Ut("Can't add FormattedSection with an empty image.")},xi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var hf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Eo={};function Hg(e,t,n,c,h,d){if(t.imageName){var v=c[t.imageName];return v?v.displaySize[0]*t.scale*24/d+h:0}var b=n[t.fontStack],C=b&&b[e];return C?C.metrics.advance*t.scale+h:0}function Yg(e,t,n,c){var h=Math.pow(e-t,2);return c?e<t?h/2:2*h:h+Math.abs(n)*n}function a2(e,t,n){var c=0;return e===10&&(c-=1e4),n&&(c+=150),e!==40&&e!==65288||(c+=50),t!==41&&t!==65289||(c+=50),c}function Jg(e,t,n,c,h,d){for(var v=null,b=Yg(t,n,h,d),C=0,T=c;C<T.length;C+=1){var A=T[C],z=Yg(t-A.x,n,h,d)+A.badness;z<=b&&(v=A,b=z)}return{index:e,x:t,priorBreak:v,badness:b}}function Tm(e,t,n,c,h,d,v){if(d!=="point")return[];if(!e)return[];for(var b,C=[],T=function(oe,te,he,ge,xe,Ce){for(var Oe=0,je=0;je<oe.length();je++){var $e=oe.getSection(je);Oe+=Hg(oe.getCharCode(je),$e,ge,xe,te,Ce)}return Oe/Math.max(1,Math.ceil(Oe/he))}(e,t,n,c,h,v),A=e.text.indexOf("\u200B")>=0,z=0,R=0;R<e.length();R++){var U=e.getSection(R),$=e.getCharCode(R);if(hf[$]||(z+=Hg($,U,c,h,t,v)),R<e.length()-1){var H=!((b=$)<11904||!(He["Bopomofo Extended"](b)||He.Bopomofo(b)||He["CJK Compatibility Forms"](b)||He["CJK Compatibility Ideographs"](b)||He["CJK Compatibility"](b)||He["CJK Radicals Supplement"](b)||He["CJK Strokes"](b)||He["CJK Symbols and Punctuation"](b)||He["CJK Unified Ideographs Extension A"](b)||He["CJK Unified Ideographs"](b)||He["Enclosed CJK Letters and Months"](b)||He["Halfwidth and Fullwidth Forms"](b)||He.Hiragana(b)||He["Ideographic Description Characters"](b)||He["Kangxi Radicals"](b)||He["Katakana Phonetic Extensions"](b)||He.Katakana(b)||He["Vertical Forms"](b)||He["Yi Radicals"](b)||He["Yi Syllables"](b)));(Eo[$]||H||U.imageName)&&C.push(Jg(R+1,z,T,C,a2($,e.getCharCode(R+1),H&&A),!1))}}return function oe(te){return te?oe(te.priorBreak).concat(te.index):[]}(Jg(e.length(),z,T,C,0,!0))}function Im(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function s2(e,t,n,c,h){if(c||h)for(var d=e[n],v=(e[n].x+d.metrics.advance*d.scale)*c,b=t;b<=n;b++)e[b].x-=v,e[b].y+=h}function Qg(e,t,n,c,h,d){var v,b=e.image;if(b.content){var C=b.content,T=b.pixelRatio||1;v=[C[0]/T,C[1]/T,b.displaySize[0]-C[2]/T,b.displaySize[1]-C[3]/T]}var A,z,R,U,$=t.left*d,H=t.right*d;n==="width"||n==="both"?(U=h[0]+$-c[3],z=h[0]+H+c[1]):z=(U=h[0]+($+H-b.displaySize[0])/2)+b.displaySize[0];var oe=t.top*d,te=t.bottom*d;return n==="height"||n==="both"?(A=h[1]+oe-c[0],R=h[1]+te+c[2]):R=(A=h[1]+(oe+te-b.displaySize[1])/2)+b.displaySize[1],{image:b,top:A,right:z,bottom:R,left:U,collisionPadding:v}}Eo[10]=!0,Eo[32]=!0,Eo[38]=!0,Eo[40]=!0,Eo[41]=!0,Eo[43]=!0,Eo[45]=!0,Eo[47]=!0,Eo[173]=!0,Eo[183]=!0,Eo[8203]=!0,Eo[8208]=!0,Eo[8211]=!0,Eo[8231]=!0;var uc=function(e){function t(n,c,h,d){e.call(this,n,c),this.angle=h,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(ee);function km(e,t){var n=t.expression;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new Jt(e+1))};if(n.kind==="source")return{kind:"source"};for(var c=n.zoomStops,h=n.interpolationType,d=0;d<c.length&&c[d]<=e;)d++;for(var v=d=Math.max(0,d-1);v<c.length&&c[v]<e+1;)v++;v=Math.min(c.length-1,v);var b=c[d],C=c[v];return n.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:C,interpolationType:h}:{kind:"camera",minZoom:b,maxZoom:C,minSize:n.evaluate(new Jt(b)),maxSize:n.evaluate(new Jt(C)),interpolationType:h}}function e_(e,t,n){var c=t.uSize,h=n.lowerSize;return e.kind==="source"?h/128:e.kind==="composite"?rn(h/128,n.upperSize/128,t.uSizeT):c}function t_(e,t){var n=0,c=0;if(e.kind==="constant")c=e.layoutSize;else if(e.kind!=="source"){var h=e.interpolationType,d=h?ue(En.interpolationFactor(h,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?c=rn(e.minSize,e.maxSize,d):n=d}return{uSizeT:n,uSize:c}}lt("Anchor",uc);var u2=Object.freeze({__proto__:null,getSizeData:km,evaluateSizeForFeature:e_,evaluateSizeForZoom:t_,SIZE_PACK_FACTOR:128});function r_(e,t,n,c,h){if(t.segment===void 0)return!0;for(var d=t,v=t.segment+1,b=0;b>-n/2;){if(--v<0)return!1;b-=e[v].dist(d),d=e[v]}b+=e[v].dist(e[v+1]),v++;for(var C=[],T=0;b<n/2;){var A=e[v],z=e[v+1];if(!z)return!1;var R=e[v-1].angleTo(A)-A.angleTo(z);for(R=Math.abs((R+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:b,angleDelta:R}),T+=R;b-C[0].distance>c;)T-=C.shift().angleDelta;if(T>h)return!1;v++,b+=A.dist(z)}return!0}function n_(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function i_(e,t,n){return e?.6*t*n:0}function o_(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function l2(e,t,n,c,h,d){for(var v=i_(n,h,d),b=o_(n,c)*d,C=0,T=n_(e)/2,A=0;A<e.length-1;A++){var z=e[A],R=e[A+1],U=z.dist(R);if(C+U>T){var $=(T-C)/U,H=rn(z.x,R.x,$),oe=rn(z.y,R.y,$),te=new uc(H,oe,R.angleTo(z),A);return te._round(),!v||r_(e,te,b,v,t)?te:void 0}C+=U}}function c2(e,t,n,c,h,d,v,b,C){var T=i_(c,d,v),A=o_(c,h),z=A*v,R=e[0].x===0||e[0].x===C||e[0].y===0||e[0].y===C;return t-z<t/4&&(t=z+t/4),function U($,H,oe,te,he,ge,xe,Ce,Oe){for(var je=ge/2,$e=n_($),vt=0,tt=H-oe,bt=[],rt=0;rt<$.length-1;rt++){for(var Xt=$[rt],Lt=$[rt+1],dt=Xt.dist(Lt),Yt=Lt.angleTo(Xt);tt+oe<vt+dt;){var Zt=((tt+=oe)-vt)/dt,ur=rn(Xt.x,Lt.x,Zt),wt=rn(Xt.y,Lt.y,Zt);if(ur>=0&&ur<Oe&&wt>=0&&wt<Oe&&tt-je>=0&&tt+je<=$e){var vr=new uc(ur,wt,Yt,rt);vr._round(),te&&!r_($,vr,ge,te,he)||bt.push(vr)}}vt+=dt}return Ce||bt.length||xe||(bt=U($,vt/2,oe,te,he,ge,xe,!0,Oe)),bt}(e,R?t/2*b%t:(A/2+2*d)*v*b%t,t,T,n,z,R,!1,C)}function a_(e,t,n,c,h){for(var d=[],v=0;v<e.length;v++)for(var b=e[v],C=void 0,T=0;T<b.length-1;T++){var A=b[T],z=b[T+1];A.x<t&&z.x<t||(A.x<t?A=new ee(t,A.y+(t-A.x)/(z.x-A.x)*(z.y-A.y))._round():z.x<t&&(z=new ee(t,A.y+(t-A.x)/(z.x-A.x)*(z.y-A.y))._round()),A.y<n&&z.y<n||(A.y<n?A=new ee(A.x+(n-A.y)/(z.y-A.y)*(z.x-A.x),n)._round():z.y<n&&(z=new ee(A.x+(n-A.y)/(z.y-A.y)*(z.x-A.x),n)._round()),A.x>=c&&z.x>=c||(A.x>=c?A=new ee(c,A.y+(c-A.x)/(z.x-A.x)*(z.y-A.y))._round():z.x>=c&&(z=new ee(c,A.y+(c-A.x)/(z.x-A.x)*(z.y-A.y))._round()),A.y>=h&&z.y>=h||(A.y>=h?A=new ee(A.x+(h-A.y)/(z.y-A.y)*(z.x-A.x),h)._round():z.y>=h&&(z=new ee(A.x+(h-A.y)/(z.y-A.y)*(z.x-A.x),h)._round()),C&&A.equals(C[C.length-1])||d.push(C=[A]),C.push(z)))))}return d}function s_(e,t,n,c){var h=[],d=e.image,v=d.pixelRatio,b=d.paddedRect.w-2,C=d.paddedRect.h-2,T=e.right-e.left,A=e.bottom-e.top,z=d.stretchX||[[0,b]],R=d.stretchY||[[0,C]],U=function(ur,wt){return ur+wt[1]-wt[0]},$=z.reduce(U,0),H=R.reduce(U,0),oe=b-$,te=C-H,he=0,ge=$,xe=0,Ce=H,Oe=0,je=oe,$e=0,vt=te;if(d.content&&c){var tt=d.content;he=ff(z,0,tt[0]),xe=ff(R,0,tt[1]),ge=ff(z,tt[0],tt[2]),Ce=ff(R,tt[1],tt[3]),Oe=tt[0]-he,$e=tt[1]-xe,je=tt[2]-tt[0]-ge,vt=tt[3]-tt[1]-Ce}var bt=function(ur,wt,vr,Kr){var fn=df(ur.stretch-he,ge,T,e.left),un=mf(ur.fixed-Oe,je,ur.stretch,$),Hr=df(wt.stretch-xe,Ce,A,e.top),dn=mf(wt.fixed-$e,vt,wt.stretch,H),Vn=df(vr.stretch-he,ge,T,e.left),qn=mf(vr.fixed-Oe,je,vr.stretch,$),bi=df(Kr.stretch-xe,Ce,A,e.top),Qn=mf(Kr.fixed-$e,vt,Kr.stretch,H),wi=new ee(fn,Hr),_n=new ee(Vn,Hr),ei=new ee(Vn,bi),nr=new ee(fn,bi),Or=new ee(un/v,dn/v),Pr=new ee(qn/v,Qn/v),fr=t*Math.PI/180;if(fr){var Ri=Math.sin(fr),hi=Math.cos(fr),$r=[hi,-Ri,Ri,hi];wi._matMult($r),_n._matMult($r),nr._matMult($r),ei._matMult($r)}var Pn=ur.stretch+ur.fixed,fi=wt.stretch+wt.fixed;return{tl:wi,tr:_n,bl:nr,br:ei,tex:{x:d.paddedRect.x+1+Pn,y:d.paddedRect.y+1+fi,w:vr.stretch+vr.fixed-Pn,h:Kr.stretch+Kr.fixed-fi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Or,pixelOffsetBR:Pr,minFontScaleX:je/v/T,minFontScaleY:vt/v/A,isSDF:n}};if(c&&(d.stretchX||d.stretchY))for(var rt=u_(z,oe,$),Xt=u_(R,te,H),Lt=0;Lt<rt.length-1;Lt++)for(var dt=rt[Lt],Yt=rt[Lt+1],Zt=0;Zt<Xt.length-1;Zt++)h.push(bt(dt,Xt[Zt],Yt,Xt[Zt+1]));else h.push(bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:C+1}));return h}function ff(e,t,n){for(var c=0,h=0,d=e;h<d.length;h+=1){var v=d[h];c+=Math.max(t,Math.min(n,v[1]))-Math.max(t,Math.min(n,v[0]))}return c}function u_(e,t,n){for(var c=[{fixed:-1,stretch:0}],h=0,d=e;h<d.length;h+=1){var v=d[h],b=v[0],C=v[1],T=c[c.length-1];c.push({fixed:b-T.stretch,stretch:T.stretch}),c.push({fixed:b-T.stretch,stretch:T.stretch+(C-b)})}return c.push({fixed:t+1,stretch:n}),c}function df(e,t,n,c){return e/t*n+c}function mf(e,t,n,c){return e-t*n/c}var yf=function(e,t,n,c,h,d,v,b,C,T){if(this.boxStartIndex=e.length,C){var A=d.top,z=d.bottom,R=d.collisionPadding;R&&(A-=R[1],z+=R[3]);var U=z-A;U>0&&(U=Math.max(10,U),this.circleDiameter=U)}else{var $=d.top*v-b,H=d.bottom*v+b,oe=d.left*v-b,te=d.right*v+b,he=d.collisionPadding;if(he&&(oe-=he[0]*v,$-=he[1]*v,te+=he[2]*v,H+=he[3]*v),T){var ge=new ee(oe,$),xe=new ee(te,$),Ce=new ee(oe,H),Oe=new ee(te,H),je=T*Math.PI/180;ge._rotate(je),xe._rotate(je),Ce._rotate(je),Oe._rotate(je),oe=Math.min(ge.x,xe.x,Ce.x,Oe.x),te=Math.max(ge.x,xe.x,Ce.x,Oe.x),$=Math.min(ge.y,xe.y,Ce.y,Oe.y),H=Math.max(ge.y,xe.y,Ce.y,Oe.y)}e.emplaceBack(t.x,t.y,oe,$,te,H,n,c,h)}this.boxEndIndex=e.length},lc=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=p2),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function p2(e,t){return e<t?-1:e>t?1:0}function h2(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!1);for(var c=1/0,h=1/0,d=-1/0,v=-1/0,b=e[0],C=0;C<b.length;C++){var T=b[C];(!C||T.x<c)&&(c=T.x),(!C||T.y<h)&&(h=T.y),(!C||T.x>d)&&(d=T.x),(!C||T.y>v)&&(v=T.y)}var A=Math.min(d-c,v-h),z=A/2,R=new lc([],f2);if(A===0)return new ee(c,h);for(var U=c;U<d;U+=A)for(var $=h;$<v;$+=A)R.push(new cc(U+z,$+z,z,e));for(var H=function(he){for(var ge=0,xe=0,Ce=0,Oe=he[0],je=0,$e=Oe.length,vt=$e-1;je<$e;vt=je++){var tt=Oe[je],bt=Oe[vt],rt=tt.x*bt.y-bt.x*tt.y;xe+=(tt.x+bt.x)*rt,Ce+=(tt.y+bt.y)*rt,ge+=3*rt}return new cc(xe/ge,Ce/ge,0,he)}(e),oe=R.length;R.length;){var te=R.pop();(te.d>H.d||!H.d)&&(H=te,n&&console.log("found best %d after %d probes",Math.round(1e4*te.d)/1e4,oe)),te.max-H.d<=t||(R.push(new cc(te.p.x-(z=te.h/2),te.p.y-z,z,e)),R.push(new cc(te.p.x+z,te.p.y-z,z,e)),R.push(new cc(te.p.x-z,te.p.y+z,z,e)),R.push(new cc(te.p.x+z,te.p.y+z,z,e)),oe+=4)}return n&&(console.log("num probes: "+oe),console.log("best distance: "+H.d)),H.p}function f2(e,t){return t.max-e.max}function cc(e,t,n,c){this.p=new ee(e,t),this.h=n,this.d=function(h,d){for(var v=!1,b=1/0,C=0;C<d.length;C++)for(var T=d[C],A=0,z=T.length,R=z-1;A<z;R=A++){var U=T[A],$=T[R];U.y>h.y!=$.y>h.y&&h.x<($.x-U.x)*(h.y-U.y)/($.y-U.y)+U.x&&(v=!v),b=Math.min(b,mu(h,U,$))}return(v?1:-1)*Math.sqrt(b)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}lc.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},lc.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},lc.prototype.peek=function(){return this.data[0]},lc.prototype._up=function(e){for(var t=this.data,n=this.compare,c=t[e];e>0;){var h=e-1>>1,d=t[h];if(n(c,d)>=0)break;t[e]=d,e=h}t[e]=c},lc.prototype._down=function(e){for(var t=this.data,n=this.compare,c=this.length>>1,h=t[e];e<c;){var d=1+(e<<1),v=t[d],b=d+1;if(b<this.length&&n(t[b],v)<0&&(d=b,v=t[b]),n(v,h)>=0)break;t[e]=v,e=d}t[e]=h};var Am=Number.POSITIVE_INFINITY;function l_(e,t){return t[1]!==Am?function(n,c,h){var d=0,v=0;switch(c=Math.abs(c),h=Math.abs(h),n){case"top-right":case"top-left":case"top":v=h-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-h}switch(n){case"top-right":case"bottom-right":case"right":d=-c;break;case"top-left":case"bottom-left":case"left":d=c}return[d,v]}(e,t[0],t[1]):function(n,c){var h=0,d=0;c<0&&(c=0);var v=c/Math.sqrt(2);switch(n){case"top-right":case"top-left":d=v-7;break;case"bottom-right":case"bottom-left":d=7-v;break;case"bottom":d=7-c;break;case"top":d=c-7}switch(n){case"top-right":case"bottom-right":h=-v;break;case"top-left":case"bottom-left":h=v;break;case"left":h=c;break;case"right":h=-c}return[h,d]}(e,t[0])}function Mm(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function c_(e,t,n,c,h,d,v,b,C,T,A,z,R,U,$){var H=function(xe,Ce,Oe,je,$e,vt,tt,bt){for(var rt=je.layout.get("text-rotate").evaluate(vt,{})*Math.PI/180,Xt=[],Lt=0,dt=Ce.positionedLines;Lt<dt.length;Lt+=1)for(var Yt=dt[Lt],Zt=0,ur=Yt.positionedGlyphs;Zt<ur.length;Zt+=1){var wt=ur[Zt];if(wt.rect){var vr=wt.rect||{},Kr=4,fn=!0,un=1,Hr=0,dn=($e||bt)&&wt.vertical,Vn=wt.metrics.advance*wt.scale/2;if(bt&&Ce.verticalizable&&(Hr=Yt.lineOffset/2-(wt.imageName?-(24-wt.metrics.width*wt.scale)/2:24*(wt.scale-1))),wt.imageName){var qn=tt[wt.imageName];fn=qn.sdf,Kr=1/(un=qn.pixelRatio)}var bi=$e?[wt.x+Vn,wt.y]:[0,0],Qn=$e?[0,0]:[wt.x+Vn+Oe[0],wt.y+Oe[1]-Hr],wi=[0,0];dn&&(wi=Qn,Qn=[0,0]);var _n=(wt.metrics.left-Kr)*wt.scale-Vn+Qn[0],ei=(-wt.metrics.top-Kr)*wt.scale+Qn[1],nr=_n+vr.w*wt.scale/un,Or=ei+vr.h*wt.scale/un,Pr=new ee(_n,ei),fr=new ee(nr,ei),Ri=new ee(_n,Or),hi=new ee(nr,Or);if(dn){var $r=new ee(-Vn,Vn- -17),Pn=-Math.PI/2,fi=12-Vn,gr=new ee(22-fi,-(wt.imageName?fi:0)),ds=new(Function.prototype.bind.apply(ee,[null].concat(wi)));Pr._rotateAround(Pn,$r)._add(gr)._add(ds),fr._rotateAround(Pn,$r)._add(gr)._add(ds),Ri._rotateAround(Pn,$r)._add(gr)._add(ds),hi._rotateAround(Pn,$r)._add(gr)._add(ds)}if(rt){var jo=Math.sin(rt),ms=Math.cos(rt),xn=[ms,-jo,jo,ms];Pr._matMult(xn),fr._matMult(xn),Ri._matMult(xn),hi._matMult(xn)}var ys=new ee(0,0),Ea=new ee(0,0);Xt.push({tl:Pr,tr:fr,bl:Ri,br:hi,tex:vr,writingMode:Ce.writingMode,glyphOffset:bi,sectionIndex:wt.sectionIndex,isSDF:fn,pixelOffsetTL:ys,pixelOffsetBR:Ea,minFontScaleX:0,minFontScaleY:0})}}return Xt}(0,n,b,h,d,v,c,e.allowVerticalPlacement),oe=e.textSizeData,te=null;oe.kind==="source"?(te=[128*h.layout.get("text-size").evaluate(v,{})])[0]>32640&&Ut(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):oe.kind==="composite"&&((te=[128*U.compositeTextSizes[0].evaluate(v,{},$),128*U.compositeTextSizes[1].evaluate(v,{},$)])[0]>32640||te[1]>32640)&&Ut(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,H,te,b,d,v,T,t,C.lineStartIndex,C.lineLength,R,$);for(var he=0,ge=A;he<ge.length;he+=1)z[ge[he]]=e.text.placedSymbolArray.length-1;return 4*H.length}function p_(e){for(var t in e)return e[t];return null}function d2(e,t,n,c){var h=e.compareText;if(t in h){for(var d=h[t],v=d.length-1;v>=0;v--)if(c.dist(d[v])<n)return!0}else h[t]=[];return h[t].push(c),!1}var m2=ic.VectorTileFeature.types,y2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vf(e,t,n,c,h,d,v,b,C,T,A,z,R){var U=b?Math.min(32640,Math.round(b[0])):0,$=b?Math.min(32640,Math.round(b[1])):0;e.emplaceBack(t,n,Math.round(32*c),Math.round(32*h),d,v,(U<<1)+(C?1:0),$,16*T,16*A,256*z,256*R)}function zm(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function v2(e){for(var t=0,n=e.sections;t<n.length;t+=1)if($l(n[t].text))return!0;return!1}var pc=function(e){this.layoutVertexArray=new Yl,this.indexArray=new us,this.programConfigurations=e,this.segments=new V,this.dynamicLayoutVertexArray=new hu,this.opacityVertexArray=new il,this.placedSymbolArray=new p};pc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},pc.prototype.upload=function(e,t,n,c){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,qw.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Zw.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,y2,!0),this.opacityVertexBuffer.itemSize=1),(n||c)&&this.programConfigurations.upload(e))},pc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},lt("SymbolBuffers",pc);var kp=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new V,this.collisionVertexArray=new vp};kp.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Gw.members,!0)},kp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},lt("CollisionBuffers",kp);var Mr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=So([]),this.placementViewportMatrix=So([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=km(this.zoom,t["text-size"]),this.iconSizeData=km(this.zoom,t["icon-size"]);var n=this.layers[0].layout,c=n.get("symbol-sort-key"),h=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey=h!=="viewport-y"&&c.constantOr(1)!==void 0,this.sortFeaturesByY=(h==="viewport-y"||h==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,n.get("symbol-placement")==="point"&&(this.writingModes=n.get("text-writing-mode").map(function(d){return No[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};Mr.prototype.createArrays=function(){this.text=new pc(new kt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new pc(new kt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new x,this.lineVertexArray=new E,this.symbolInstances=new g},Mr.prototype.calculateGlyphDependencies=function(e,t,n,c,h){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(n||c)&&h){var v=Pp[e.charAt(d)];v&&(t[v.charCodeAt(0)]=!0)}},Mr.prototype.populate=function(e,t,n){var c=this.layers[0],h=c.layout,d=h.get("text-font"),v=h.get("text-field"),b=h.get("icon-image"),C=(v.value.kind!=="constant"||v.value.value instanceof Br&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),T=b.value.kind!=="constant"||!!b.value.value||Object.keys(b.parameters).length>0,A=h.get("symbol-sort-key");if(this.features=[],C||T){for(var z=t.iconDependencies,R=t.glyphDependencies,U=t.availableImages,$=new Jt(this.zoom),H=0,oe=e;H<oe.length;H+=1){var te=oe[H],he=te.feature,ge=te.id,xe=te.index,Ce=te.sourceLayerIndex,Oe=c._featureFilter.needGeometry,je=gn(he,Oe);if(c._featureFilter.filter($,je,n)){Oe||(je.geometry=sn(he));var $e=void 0;if(C){var vt=c.getValueAndResolveTokens("text-field",je,n,U),tt=Br.factory(vt);v2(tt)&&(this.hasRTLText=!0),(!this.hasRTLText||fp()==="unavailable"||this.hasRTLText&&wo.isParsed())&&($e=$w(tt,c,je))}var bt=void 0;if(T){var rt=c.getValueAndResolveTokens("icon-image",je,n,U);bt=rt instanceof Xn?rt:Xn.fromString(rt)}if($e||bt){var Xt=this.sortFeaturesByKey?A.evaluate(je,{},n):void 0;if(this.features.push({id:ge,text:$e,icon:bt,index:xe,sourceLayerIndex:Ce,geometry:je.geometry,properties:he.properties,type:m2[he.type],sortKey:Xt}),bt&&(z[bt.name]=!0),$e){var Lt=d.evaluate(je,{},n).join(","),dt=h.get("text-rotation-alignment")==="map"&&h.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(No.vertical)>=0;for(var Yt=0,Zt=$e.sections;Yt<Zt.length;Yt+=1){var ur=Zt[Yt];if(ur.image)z[ur.image.name]=!0;else{var wt=cp($e.toString()),vr=ur.fontStack||Lt,Kr=R[vr]=R[vr]||{};this.calculateGlyphDependencies(ur.text,Kr,dt,this.allowVerticalPlacement,wt)}}}}}}h.get("symbol-placement")==="line"&&(this.features=function(fn){var un={},Hr={},dn=[],Vn=0;function qn($r){dn.push(fn[$r]),Vn++}function bi($r,Pn,fi){var gr=Hr[$r];return delete Hr[$r],Hr[Pn]=gr,dn[gr].geometry[0].pop(),dn[gr].geometry[0]=dn[gr].geometry[0].concat(fi[0]),gr}function Qn($r,Pn,fi){var gr=un[Pn];return delete un[Pn],un[$r]=gr,dn[gr].geometry[0].shift(),dn[gr].geometry[0]=fi[0].concat(dn[gr].geometry[0]),gr}function wi($r,Pn,fi){var gr=fi?Pn[0][Pn[0].length-1]:Pn[0][0];return $r+":"+gr.x+":"+gr.y}for(var _n=0;_n<fn.length;_n++){var ei=fn[_n],nr=ei.geometry,Or=ei.text?ei.text.toString():null;if(Or){var Pr=wi(Or,nr),fr=wi(Or,nr,!0);if(Pr in Hr&&fr in un&&Hr[Pr]!==un[fr]){var Ri=Qn(Pr,fr,nr),hi=bi(Pr,fr,dn[Ri].geometry);delete un[Pr],delete Hr[fr],Hr[wi(Or,dn[hi].geometry,!0)]=hi,dn[Ri].geometry=null}else Pr in Hr?bi(Pr,fr,nr):fr in un?Qn(Pr,fr,nr):(qn(_n),un[Pr]=Vn-1,Hr[fr]=Vn-1)}else qn(_n)}return dn.filter(function($r){return $r.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(fn,un){return fn.sortKey-un.sortKey})}},Mr.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},Mr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Mr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Mr.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Mr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Mr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Mr.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(e.segment!==void 0){for(var c=e.dist(t[e.segment+1]),h=e.dist(t[e.segment]),d={},v=e.segment+1;v<t.length;v++)d[v]={x:t[v].x,y:t[v].y,tileUnitDistanceFromAnchor:c},v<t.length-1&&(c+=t[v+1].dist(t[v]));for(var b=e.segment||0;b>=0;b--)d[b]={x:t[b].x,y:t[b].y,tileUnitDistanceFromAnchor:h},b>0&&(h+=t[b-1].dist(t[b]));for(var C=0;C<t.length;C++){var T=d[C];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Mr.prototype.addSymbols=function(e,t,n,c,h,d,v,b,C,T,A,z){for(var R=e.indexArray,U=e.layoutVertexArray,$=e.segments.prepareSegment(4*t.length,U,R,this.canOverlap?d.sortKey:void 0),H=this.glyphOffsetArray.length,oe=$.vertexLength,te=this.allowVerticalPlacement&&v===No.vertical?Math.PI/2:0,he=d.text&&d.text.sections,ge=0;ge<t.length;ge++){var xe=t[ge],Ce=xe.tl,Oe=xe.tr,je=xe.bl,$e=xe.br,vt=xe.tex,tt=xe.pixelOffsetTL,bt=xe.pixelOffsetBR,rt=xe.minFontScaleX,Xt=xe.minFontScaleY,Lt=xe.glyphOffset,dt=xe.isSDF,Yt=xe.sectionIndex,Zt=$.vertexLength,ur=Lt[1];vf(U,b.x,b.y,Ce.x,ur+Ce.y,vt.x,vt.y,n,dt,tt.x,tt.y,rt,Xt),vf(U,b.x,b.y,Oe.x,ur+Oe.y,vt.x+vt.w,vt.y,n,dt,bt.x,tt.y,rt,Xt),vf(U,b.x,b.y,je.x,ur+je.y,vt.x,vt.y+vt.h,n,dt,tt.x,bt.y,rt,Xt),vf(U,b.x,b.y,$e.x,ur+$e.y,vt.x+vt.w,vt.y+vt.h,n,dt,bt.x,bt.y,rt,Xt),zm(e.dynamicLayoutVertexArray,b,te),R.emplaceBack(Zt,Zt+1,Zt+2),R.emplaceBack(Zt+1,Zt+2,Zt+3),$.vertexLength+=4,$.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lt[0]),ge!==t.length-1&&Yt===t[ge+1].sectionIndex||e.programConfigurations.populatePaintArrays(U.length,d,d.index,{},z,he&&he[Yt])}e.placedSymbolArray.emplaceBack(b.x,b.y,H,this.glyphOffsetArray.length-H,oe,C,T,b.segment,n?n[0]:0,n?n[1]:0,c[0],c[1],v,0,!1,0,A)},Mr.prototype._addCollisionDebugVertex=function(e,t,n,c,h,d){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,c,h,Math.round(d.x),Math.round(d.y))},Mr.prototype.addCollisionDebugVertices=function(e,t,n,c,h,d,v){var b=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),C=b.vertexLength,T=h.layoutVertexArray,A=h.collisionVertexArray,z=v.anchorX,R=v.anchorY;this._addCollisionDebugVertex(T,A,d,z,R,new ee(e,t)),this._addCollisionDebugVertex(T,A,d,z,R,new ee(n,t)),this._addCollisionDebugVertex(T,A,d,z,R,new ee(n,c)),this._addCollisionDebugVertex(T,A,d,z,R,new ee(e,c)),b.vertexLength+=4;var U=h.indexArray;U.emplaceBack(C,C+1),U.emplaceBack(C+1,C+2),U.emplaceBack(C+2,C+3),U.emplaceBack(C+3,C),b.primitiveLength+=4},Mr.prototype.addDebugCollisionBoxes=function(e,t,n,c){for(var h=e;h<t;h++){var d=this.collisionBoxArray.get(h);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,c?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,n)}},Mr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new kp(fu,qg.members,ol),this.iconCollisionBox=new kp(fu,qg.members,ol);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Mr.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,c,h,d,v,b,C){for(var T={},A=t;A<n;A++){var z=e.get(A);T.textBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},T.textFeatureIndex=z.featureIndex;break}for(var R=c;R<h;R++){var U=e.get(R);T.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},T.verticalTextFeatureIndex=U.featureIndex;break}for(var $=d;$<v;$++){var H=e.get($);T.iconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},T.iconFeatureIndex=H.featureIndex;break}for(var oe=b;oe<C;oe++){var te=e.get(oe);T.verticalIconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},T.verticalIconFeatureIndex=te.featureIndex;break}return T},Mr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},Mr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Mr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Mr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Mr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Mr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Mr.prototype.addIndicesForPlacedSymbol=function(e,t){for(var n=e.placedSymbolArray.get(t),c=n.vertexStartIndex+4*n.numGlyphs,h=n.vertexStartIndex;h<c;h+=4)e.indexArray.emplaceBack(h,h+1,h+2),e.indexArray.emplaceBack(h+1,h+2,h+3)},Mr.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),c=[],h=[],d=[],v=0;v<this.symbolInstances.length;++v){d.push(v);var b=this.symbolInstances.get(v);c.push(0|Math.round(t*b.anchorX+n*b.anchorY)),h.push(b.featureIndex)}return d.sort(function(C,T){return c[C]-c[T]||h[T]-h[C]}),d},Mr.prototype.addToSortKeyRanges=function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Mr.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,c=this.symbolInstanceIndexes;n<c.length;n+=1){var h=this.symbolInstances.get(c[n]);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach(function(d,v,b){d>=0&&b.indexOf(d)===v&&t.addIndicesForPlacedSymbol(t.text,d)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},lt("SymbolBucket",Mr,{omit:["layers","collisionBoxArray","features","compareText"]}),Mr.MAX_GLYPHS=65535,Mr.addDynamicAttributes=zm;var g2=new ai({"symbol-placement":new _t(j.layout_symbol["symbol-placement"]),"symbol-spacing":new _t(j.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new _t(j.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ft(j.layout_symbol["symbol-sort-key"]),"symbol-z-order":new _t(j.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new _t(j.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new _t(j.layout_symbol["icon-ignore-placement"]),"icon-optional":new _t(j.layout_symbol["icon-optional"]),"icon-rotation-alignment":new _t(j.layout_symbol["icon-rotation-alignment"]),"icon-size":new ft(j.layout_symbol["icon-size"]),"icon-text-fit":new _t(j.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new _t(j.layout_symbol["icon-text-fit-padding"]),"icon-image":new ft(j.layout_symbol["icon-image"]),"icon-rotate":new ft(j.layout_symbol["icon-rotate"]),"icon-padding":new _t(j.layout_symbol["icon-padding"]),"icon-keep-upright":new _t(j.layout_symbol["icon-keep-upright"]),"icon-offset":new ft(j.layout_symbol["icon-offset"]),"icon-anchor":new ft(j.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new _t(j.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new _t(j.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new _t(j.layout_symbol["text-rotation-alignment"]),"text-field":new ft(j.layout_symbol["text-field"]),"text-font":new ft(j.layout_symbol["text-font"]),"text-size":new ft(j.layout_symbol["text-size"]),"text-max-width":new ft(j.layout_symbol["text-max-width"]),"text-line-height":new _t(j.layout_symbol["text-line-height"]),"text-letter-spacing":new ft(j.layout_symbol["text-letter-spacing"]),"text-justify":new ft(j.layout_symbol["text-justify"]),"text-radial-offset":new ft(j.layout_symbol["text-radial-offset"]),"text-variable-anchor":new _t(j.layout_symbol["text-variable-anchor"]),"text-anchor":new ft(j.layout_symbol["text-anchor"]),"text-max-angle":new _t(j.layout_symbol["text-max-angle"]),"text-writing-mode":new _t(j.layout_symbol["text-writing-mode"]),"text-rotate":new ft(j.layout_symbol["text-rotate"]),"text-padding":new _t(j.layout_symbol["text-padding"]),"text-keep-upright":new _t(j.layout_symbol["text-keep-upright"]),"text-transform":new ft(j.layout_symbol["text-transform"]),"text-offset":new ft(j.layout_symbol["text-offset"]),"text-allow-overlap":new _t(j.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new _t(j.layout_symbol["text-ignore-placement"]),"text-optional":new _t(j.layout_symbol["text-optional"])}),Lm={paint:new ai({"icon-opacity":new ft(j.paint_symbol["icon-opacity"]),"icon-color":new ft(j.paint_symbol["icon-color"]),"icon-halo-color":new ft(j.paint_symbol["icon-halo-color"]),"icon-halo-width":new ft(j.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ft(j.paint_symbol["icon-halo-blur"]),"icon-translate":new _t(j.paint_symbol["icon-translate"]),"icon-translate-anchor":new _t(j.paint_symbol["icon-translate-anchor"]),"text-opacity":new ft(j.paint_symbol["text-opacity"]),"text-color":new ft(j.paint_symbol["text-color"],{runtimeType:Ke,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new ft(j.paint_symbol["text-halo-color"]),"text-halo-width":new ft(j.paint_symbol["text-halo-width"]),"text-halo-blur":new ft(j.paint_symbol["text-halo-blur"]),"text-translate":new _t(j.paint_symbol["text-translate"]),"text-translate-anchor":new _t(j.paint_symbol["text-translate-anchor"])}),layout:g2},hc=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:nt,this.defaultValue=e};hc.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},hc.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},hc.prototype.outputDefined=function(){return!1},hc.prototype.serialize=function(){return null},lt("FormatSectionOverride",hc,{omit:["defaultValue"]});var _2=function(e){function t(n){e.call(this,n,Lm)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(n,c){if(e.prototype.recalculate.call(this,n,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var h=this.layout.get("text-writing-mode");if(h){for(var d=[],v=0,b=h;v<b.length;v+=1){var C=b[v];d.indexOf(C)<0&&d.push(C)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(n,c,h,d){var v=this.layout.get(n).evaluate(c,{},h,d),b=this._unevaluatedLayout._values[n];return b.isDataDriven()||Yo(b.value)||!v?v:function(C,T){return T.replace(/{([^{}]+)}/g,function(A,z){return z in C?String(C[z]):""})}(c.properties,v)},t.prototype.createBucket=function(n){return new Mr(n)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var n=0,c=Lm.paint.overridableProperties;n<c.length;n+=1){var h=c[n];if(t.hasPaintOverride(this.layout,h)){var d,v=this.paint.get(h),b=new hc(v),C=new Na(b,v.property.specification);d=v.value.kind==="constant"||v.value.kind==="source"?new Fs("source",C):new de("composite",C,v.value.zoomStops,v.value._interpolationType),this.paint._values[h]=new vi(v.property,d,v.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(n,c,h){return!(!this.layout||c.isDataDriven()||h.isDataDriven())&&t.hasPaintOverride(this.layout,n)},t.hasPaintOverride=function(n,c){var h=n.get("text-field"),d=Lm.paint.properties[c],v=!1,b=function(A){for(var z=0,R=A;z<R.length;z+=1)if(d.overrides&&d.overrides.hasOverride(R[z]))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Br)b(h.value.value.sections);else if(h.value.kind==="source"){var C=function(A){v||(A instanceof ii&&tn(A.value)===Cr?b(A.value.sections):A instanceof yo?b(A.sections):A.eachChild(C))},T=h.value;T._styleExpression&&C(T._styleExpression.expression)}return v},t}(xa),x2={paint:new ai({"background-color":new _t(j.paint_background["background-color"]),"background-pattern":new gi(j.paint_background["background-pattern"]),"background-opacity":new _t(j.paint_background["background-opacity"])})},b2=function(e){function t(n){e.call(this,n,x2)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(xa),w2={paint:new ai({"raster-opacity":new _t(j.paint_raster["raster-opacity"]),"raster-hue-rotate":new _t(j.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new _t(j.paint_raster["raster-brightness-min"]),"raster-brightness-max":new _t(j.paint_raster["raster-brightness-max"]),"raster-saturation":new _t(j.paint_raster["raster-saturation"]),"raster-contrast":new _t(j.paint_raster["raster-contrast"]),"raster-resampling":new _t(j.paint_raster["raster-resampling"]),"raster-fade-duration":new _t(j.paint_raster["raster-fade-duration"])})},S2=function(e){function t(n){e.call(this,n,w2)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(xa),E2=function(e){function t(n){e.call(this,n,{}),this.implementation=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},t.prototype.onRemove=function(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},t}(xa),C2={circle:vm,heatmap:uw,hillshade:cw,fill:Tw,"fill-extrusion":Rw,line:Vw,symbol:_2,background:b2,raster:S2},h_=X.HTMLImageElement,f_=X.HTMLCanvasElement,d_=X.HTMLVideoElement,m_=X.ImageData,gf=X.ImageBitmap,pl=function(e,t,n,c){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,c)};pl.prototype.update=function(e,t,n){var c=e.width,h=e.height,d=!(this.size&&this.size[0]===c&&this.size[1]===h||n),v=this.context,b=v.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),b.bindTexture(b.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[c,h],e instanceof h_||e instanceof f_||e instanceof d_||e instanceof m_||gf&&e instanceof gf?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,e):b.texImage2D(b.TEXTURE_2D,0,this.format,c,h,0,this.format,b.UNSIGNED_BYTE,e.data);else{var C=n||{x:0,y:0},T=C.x,A=C.y;e instanceof h_||e instanceof f_||e instanceof d_||e instanceof m_||gf&&e instanceof gf?b.texSubImage2D(b.TEXTURE_2D,0,T,A,b.RGBA,b.UNSIGNED_BYTE,e):b.texSubImage2D(b.TEXTURE_2D,0,T,A,c,h,b.RGBA,b.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&b.generateMipmap(b.TEXTURE_2D)},pl.prototype.bind=function(e,t,n){var c=this.context.gl;c.bindTexture(c.TEXTURE_2D,this.texture),n!==c.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=c.LINEAR),e!==this.filter&&(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,e),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,t),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,t),this.wrap=t)},pl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},pl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Dm=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Dm.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Dm.prototype.remove=function(){delete this._channel,this._callback=function(){}};var fc=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Tt(["receive","process"],this),this.invoker=new Dm(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=zr()?e:X};function y_(e,t,n){var c=2*Math.PI*6378137/256/Math.pow(2,n);return[e*c-2*Math.PI*6378137/2,t*c-2*Math.PI*6378137/2]}fc.prototype.send=function(e,t,n,c,h){var d=this;h===void 0&&(h=!1);var v=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[v]=n);var b=ni(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:e,hasCallback:!!n,targetMapId:c,mustQueue:h,sourceMapId:this.mapId,data:ta(t,b)},b),{cancel:function(){n&&delete d.callbacks[v],d.target.postMessage({id:v,type:"<cancel>",targetMapId:c,sourceMapId:d.mapId})}}},fc.prototype.receive=function(e){var t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[n];var c=this.cancelCallbacks[n];delete this.cancelCallbacks[n],c&&c()}else zr()||t.mustQueue?(this.tasks[n]=t,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,t)},fc.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},fc.prototype.processTask=function(e,t){var n=this;if(t.type==="<response>"){var c=this.callbacks[e];delete this.callbacks[e],c&&(t.error?c(ro(t.error)):c(null,ro(t.data)))}else{var h=!1,d=ni(this.globalScope)?void 0:[],v=t.hasCallback?function(A,z){h=!0,delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:A?ta(A):null,data:ta(z,d)},d)}:function(A){h=!0},b=null,C=ro(t.data);if(this.parent[t.type])b=this.parent[t.type](t.sourceMapId,C,v);else if(this.parent.getWorkerSource){var T=t.type.split(".");b=this.parent.getWorkerSource(t.sourceMapId,T[0],C.source)[T[1]](C,v)}else v(new Error("Could not find function "+t.type));!h&&b&&b.cancel&&(this.cancelCallbacks[e]=b.cancel)}},fc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var On=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};On.prototype.setNorthEast=function(e){return this._ne=e instanceof Xr?new Xr(e.lng,e.lat):Xr.convert(e),this},On.prototype.setSouthWest=function(e){return this._sw=e instanceof Xr?new Xr(e.lng,e.lat):Xr.convert(e),this},On.prototype.extend=function(e){var t,n,c=this._sw,h=this._ne;if(e instanceof Xr)t=e,n=e;else{if(!(e instanceof On))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(On.convert(e)):this.extend(Xr.convert(e)):this;if(n=e._ne,!(t=e._sw)||!n)return this}return c||h?(c.lng=Math.min(t.lng,c.lng),c.lat=Math.min(t.lat,c.lat),h.lng=Math.max(n.lng,h.lng),h.lat=Math.max(n.lat,h.lat)):(this._sw=new Xr(t.lng,t.lat),this._ne=new Xr(n.lng,n.lat)),this},On.prototype.getCenter=function(){return new Xr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},On.prototype.getSouthWest=function(){return this._sw},On.prototype.getNorthEast=function(){return this._ne},On.prototype.getNorthWest=function(){return new Xr(this.getWest(),this.getNorth())},On.prototype.getSouthEast=function(){return new Xr(this.getEast(),this.getSouth())},On.prototype.getWest=function(){return this._sw.lng},On.prototype.getSouth=function(){return this._sw.lat},On.prototype.getEast=function(){return this._ne.lng},On.prototype.getNorth=function(){return this._ne.lat},On.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},On.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},On.prototype.isEmpty=function(){return!(this._sw&&this._ne)},On.prototype.contains=function(e){var t=Xr.convert(e),n=t.lng,c=t.lat,h=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&h},On.convert=function(e){return!e||e instanceof On?e:new On(e)};var Xr=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Xr.prototype.wrap=function(){return new Xr(re(this.lng,-180,180),this.lat)},Xr.prototype.toArray=function(){return[this.lng,this.lat]},Xr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Xr.prototype.distanceTo=function(e){var t=Math.PI/180,n=this.lat*t,c=e.lat*t,h=Math.sin(n)*Math.sin(c)+Math.cos(n)*Math.cos(c)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(h,1))},Xr.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new On(new Xr(this.lng-n,this.lat-t),new Xr(this.lng+n,this.lat+t))},Xr.convert=function(e){if(e instanceof Xr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Xr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Xr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var v_=2*Math.PI*63710088e-1;function g_(e){return v_*Math.cos(e*Math.PI/180)}function __(e){return(180+e)/360}function x_(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function b_(e,t){return e/g_(t)}function Om(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var hl=function(e,t,n){n===void 0&&(n=0),this.x=+e,this.y=+t,this.z=+n};hl.fromLngLat=function(e,t){t===void 0&&(t=0);var n=Xr.convert(e);return new hl(__(n.lng),x_(n.lat),b_(t,n.lat))},hl.prototype.toLngLat=function(){return new Xr(360*this.x-180,Om(this.y))},hl.prototype.toAltitude=function(){return this.z*g_(Om(this.y))},hl.prototype.meterInMercatorCoordinateUnits=function(){return 1/v_*(e=Om(this.y),1/Math.cos(e*Math.PI/180));var e};var fl=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=Ap(0,e,e,t,n)};fl.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},fl.prototype.url=function(e,t){var n,c,h,d,v,b=(c=this.y,h=this.z,d=y_(256*(n=this.x),256*(c=Math.pow(2,h)-c-1),h),v=y_(256*(n+1),256*(c+1),h),d[0]+","+d[1]+","+v[0]+","+v[1]),C=function(T,A,z){for(var R,U="",$=T;$>0;$--)U+=(A&(R=1<<$-1)?1:0)+(z&R?2:0);return U}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",C).replace("{bbox-epsg-3857}",b)},fl.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new ee(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},fl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var w_=function(e,t){this.wrap=e,this.canonical=t,this.key=Ap(e,t.z,t.z,t.x,t.y)},Rn=function(e,t,n,c,h){this.overscaledZ=e,this.wrap=t,this.canonical=new fl(n,+c,+h),this.key=Ap(t,e,n,c,h)};function Ap(e,t,n,c,h){(e*=2)<0&&(e=-1*e-1);var d=1<<n;return(d*d*e+d*h+c).toString(36)+n.toString(36)+t.toString(36)}Rn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Rn.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Rn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Rn(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Rn.prototype.calculateScaledKey=function(e,t){var n=this.canonical.z-e;return e>this.canonical.z?Ap(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Ap(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)},Rn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Rn.prototype.children=function(e){if(this.overscaledZ>=e)return[new Rn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,c=2*this.canonical.y;return[new Rn(t,this.wrap,t,n,c),new Rn(t,this.wrap,t,n+1,c),new Rn(t,this.wrap,t,n,c+1),new Rn(t,this.wrap,t,n+1,c+1)]},Rn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Rn.prototype.wrapped=function(){return new Rn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Rn.prototype.unwrapTo=function(e){return new Rn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Rn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Rn.prototype.toUnwrapped=function(){return new w_(this.wrap,this.canonical)},Rn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Rn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new hl(e.x-this.wrap,e.y))},lt("CanonicalTileID",fl),lt("OverscaledTileID",Rn,{omit:["posMatrix"]});var $s=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&n!=="mapbox"&&n!=="terrarium")return Ut('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var c=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox";for(var h=0;h<c;h++)this.data[this._idx(-1,h)]=this.data[this._idx(0,h)],this.data[this._idx(c,h)]=this.data[this._idx(c-1,h)],this.data[this._idx(h,-1)]=this.data[this._idx(h,0)],this.data[this._idx(h,c)]=this.data[this._idx(h,c-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(c,-1)]=this.data[this._idx(c-1,0)],this.data[this._idx(-1,c)]=this.data[this._idx(0,c-1)],this.data[this._idx(c,c)]=this.data[this._idx(c-1,c-1)]};$s.prototype.get=function(e,t){var n=new Uint8Array(this.data.buffer),c=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(n[c],n[c+1],n[c+2])},$s.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},$s.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},$s.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},$s.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},$s.prototype.getPixels=function(){return new so({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},$s.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var c=t*this.dim,h=t*this.dim+this.dim,d=n*this.dim,v=n*this.dim+this.dim;switch(t){case-1:c=h-1;break;case 1:h=c+1}switch(n){case-1:d=v-1;break;case 1:v=d+1}for(var b=-t*this.dim,C=-n*this.dim,T=d;T<v;T++)for(var A=c;A<h;A++)this.data[this._idx(A,T)]=e.data[this._idx(A+b,T+C)]},lt("DEMData",$s);var _f=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};_f.prototype.encode=function(e){return this._stringToNumber[e]},_f.prototype.decode=function(e){return this._numberToString[e]};var xf=function(e,t,n,c,h){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=c,this.properties=e.properties,this.id=h},Rm={geometry:{configurable:!0}};Rm.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Rm.geometry.set=function(e){this._geometry=e},xf.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(xf.prototype,Rm);var dc=function(){this.state={},this.stateChanges={},this.deletedStates={}};dc.prototype.updateState=function(e,t,n){var c=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][c]=this.stateChanges[e][c]||{},ae(this.stateChanges[e][c],n),this.deletedStates[e]===null)for(var h in this.deletedStates[e]={},this.state[e])h!==c&&(this.deletedStates[e][h]=null);else if(this.deletedStates[e]&&this.deletedStates[e][c]===null)for(var d in this.deletedStates[e][c]={},this.state[e][c])n[d]||(this.deletedStates[e][c][d]=null);else for(var v in n)this.deletedStates[e]&&this.deletedStates[e][c]&&this.deletedStates[e][c][v]===null&&delete this.deletedStates[e][c][v]},dc.prototype.removeFeatureState=function(e,t,n){if(this.deletedStates[e]!==null){var c=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&t!==void 0)this.deletedStates[e][c]!==null&&(this.deletedStates[e][c]=this.deletedStates[e][c]||{},this.deletedStates[e][c][n]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][c])for(n in this.deletedStates[e][c]={},this.stateChanges[e][c])this.deletedStates[e][c][n]=null;else this.deletedStates[e][c]=null;else this.deletedStates[e]=null}},dc.prototype.getState=function(e,t){var n=String(t),c=ae({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var h=this.deletedStates[e][t];if(h===null)return{};for(var d in h)delete c[d]}return c},dc.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},dc.prototype.coalesceChanges=function(e,t){var n={};for(var c in this.stateChanges){this.state[c]=this.state[c]||{};var h={};for(var d in this.stateChanges[c])this.state[c][d]||(this.state[c][d]={}),ae(this.state[c][d],this.stateChanges[c][d]),h[d]=this.state[c][d];n[c]=h}for(var v in this.deletedStates){this.state[v]=this.state[v]||{};var b={};if(this.deletedStates[v]===null)for(var C in this.state[v])b[C]={},this.state[v][C]={};else for(var T in this.deletedStates[v]){if(this.deletedStates[v][T]===null)this.state[v][T]={};else for(var A=0,z=Object.keys(this.deletedStates[v][T]);A<z.length;A+=1)delete this.state[v][T][z[A]];b[T]=this.state[v][T]}n[v]=n[v]||{},ae(n[v],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(n).length!==0)for(var R in e)e[R].setFeatureState(n,t)};var Xs=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new eo(8192,16,0),this.grid3D=new eo(8192,16,0),this.featureIndexArray=new D,this.promoteId=t};function S_(e,t,n,c,h){return pt(e,function(d,v){var b=t instanceof nl?t.get(v):null;return b&&b.evaluate?b.evaluate(n,c,h):b})}function E_(e){for(var t=1/0,n=1/0,c=-1/0,h=-1/0,d=0,v=e;d<v.length;d+=1){var b=v[d];t=Math.min(t,b.x),n=Math.min(n,b.y),c=Math.max(c,b.x),h=Math.max(h,b.y)}return{minX:t,minY:n,maxX:c,maxY:h}}function P2(e,t){return t-e}Xs.prototype.insert=function(e,t,n,c,h,d){var v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,c,h);for(var b=d?this.grid3D:this.grid,C=0;C<t.length;C++){for(var T=t[C],A=[1/0,1/0,-1/0,-1/0],z=0;z<T.length;z++){var R=T[z];A[0]=Math.min(A[0],R.x),A[1]=Math.min(A[1],R.y),A[2]=Math.max(A[2],R.x),A[3]=Math.max(A[3],R.y)}A[0]<8192&&A[1]<8192&&A[2]>=0&&A[3]>=0&&b.insert(v,A[0],A[1],A[2],A[3])}},Xs.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ic.VectorTile(new uf(this.rawTileData)).layers,this.sourceLayerCoder=new _f(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Xs.prototype.query=function(e,t,n,c){var h=this;this.loadVTLayers();for(var d=e.params||{},v=8192/e.tileSize/e.scale,b=zi(d.filter),C=e.queryGeometry,T=e.queryPadding*v,A=E_(C),z=this.grid.query(A.minX-T,A.minY-T,A.maxX+T,A.maxY+T),R=E_(e.cameraQueryGeometry),U=this.grid3D.query(R.minX-T,R.minY-T,R.maxX+T,R.maxY+T,function(xe,Ce,Oe,je){return function($e,vt,tt,bt,rt){for(var Xt=0,Lt=$e;Xt<Lt.length;Xt+=1){var dt=Lt[Xt];if(vt<=dt.x&&tt<=dt.y&&bt>=dt.x&&rt>=dt.y)return!0}var Yt=[new ee(vt,tt),new ee(vt,rt),new ee(bt,rt),new ee(bt,tt)];if($e.length>2){for(var Zt=0,ur=Yt;Zt<ur.length;Zt+=1)if(wa($e,ur[Zt]))return!0}for(var wt=0;wt<$e.length-1;wt++)if(ul($e[wt],$e[wt+1],Yt))return!0;return!1}(e.cameraQueryGeometry,xe-T,Ce-T,Oe+T,je+T)}),$=0,H=U;$<H.length;$+=1)z.push(H[$]);z.sort(P2);for(var oe,te={},he=function(xe){var Ce=z[xe];if(Ce!==oe){oe=Ce;var Oe=h.featureIndexArray.get(Ce),je=null;h.loadMatchingFeature(te,Oe.bucketIndex,Oe.sourceLayerIndex,Oe.featureIndex,b,d.layers,d.availableImages,t,n,c,function($e,vt,tt){return je||(je=sn($e)),vt.queryIntersectsFeature(C,$e,tt,je,h.z,e.transform,v,e.pixelPosMatrix)})}},ge=0;ge<z.length;ge++)he(ge);return te},Xs.prototype.loadMatchingFeature=function(e,t,n,c,h,d,v,b,C,T,A){var z=this.bucketLayerIDs[t];if(!d||function($e,vt){for(var tt=0;tt<$e.length;tt++)if(vt.indexOf($e[tt])>=0)return!0;return!1}(d,z)){var R=this.sourceLayerCoder.decode(n),U=this.vtLayers[R].feature(c);if(h.needGeometry){var $=gn(U,!0);if(!h.filter(new Jt(this.tileID.overscaledZ),$,this.tileID.canonical))return}else if(!h.filter(new Jt(this.tileID.overscaledZ),U))return;for(var H=this.getId(U,R),oe=0;oe<z.length;oe++){var te=z[oe];if(!(d&&d.indexOf(te)<0)){var he=b[te];if(he){var ge={};H!==void 0&&T&&(ge=T.getState(he.sourceLayer||"_geojsonTileLayer",H));var xe=ae({},C[te]);xe.paint=S_(xe.paint,he.paint,U,ge,v),xe.layout=S_(xe.layout,he.layout,U,ge,v);var Ce=!A||A(U,he,ge);if(Ce){var Oe=new xf(U,this.z,this.x,this.y,H);Oe.layer=xe;var je=e[te];je===void 0&&(je=e[te]=[]),je.push({featureIndex:c,feature:Oe,intersectionZ:Ce})}}}}}},Xs.prototype.lookupSymbolFeatures=function(e,t,n,c,h,d,v,b){var C={};this.loadVTLayers();for(var T=zi(h),A=0,z=e;A<z.length;A+=1)this.loadMatchingFeature(C,n,c,z[A],T,d,v,b,t);return C},Xs.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var c=0,h=n[t];c<h.length;c+=1)if(e===h[c])return!0;return!1},Xs.prototype.getId=function(e,t){var n=e.id;return this.promoteId&&typeof(n=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(n=Number(n)),n},lt("FeatureIndex",Xs,{omit:["rawTileData","sourceLayerCoder"]});var Jn=function(e,t){this.tileID=e,this.uid=De(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Jn.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<si.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Jn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Jn.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var c in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(T,A){var z={};if(!A)return z;for(var R=function(){var H=$[U],oe=H.layerIds.map(function(ge){return A.getLayer(ge)}).filter(Boolean);if(oe.length!==0){H.layers=oe,H.stateDependentLayerIds&&(H.stateDependentLayers=H.stateDependentLayerIds.map(function(ge){return oe.filter(function(xe){return xe.id===ge})[0]}));for(var te=0,he=oe;te<he.length;te+=1)z[he[te].id]=H}},U=0,$=T;U<$.length;U+=1)R();return z}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var h=this.buckets[c];if(h instanceof Mr){if(this.hasSymbolBuckets=!0,!n)break;h.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var v=this.buckets[d];if(v instanceof Mr&&v.hasRTLText){this.hasRTLText=!0,wo.isLoading()||wo.isLoaded()||fp()!=="deferred"||ra();break}}for(var b in this.queryPadding=0,this.buckets){var C=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(b).queryRadius(C))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},Jn.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Jn.prototype.getBucket=function(e){return this.buckets[e.id]},Jn.prototype.upload=function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var c=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new pl(e,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new pl(e,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)},Jn.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Jn.prototype.queryRenderedFeatures=function(e,t,n,c,h,d,v,b,C,T){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:c,cameraQueryGeometry:h,scale:d,tileSize:this.tileSize,pixelPosMatrix:T,transform:b,params:v,queryPadding:this.queryPadding*C},e,t,n):{}},Jn.prototype.querySourceFeatures=function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var c=n.loadVTLayers(),h=t?t.sourceLayer:"",d=c._geojsonTileLayer||c[h];if(d)for(var v=zi(t&&t.filter),b=this.tileID.canonical,C=b.z,T=b.x,A=b.y,z={z:C,x:T,y:A},R=0;R<d.length;R++){var U=d.feature(R);if(v.needGeometry){var $=gn(U,!0);if(!v.filter(new Jt(this.tileID.overscaledZ),$,this.tileID.canonical))continue}else if(!v.filter(new Jt(this.tileID.overscaledZ),U))continue;var H=n.getId(U,h),oe=new xf(U,C,T,A,H);oe.tile=z,e.push(oe)}}},Jn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Jn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Jn.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=ri(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var c=Date.now(),h=!1;if(this.expirationTime>c)h=!1;else if(t)if(this.expirationTime<t)h=!0;else{var d=this.expirationTime-t;d?this.expirationTime=c+Math.max(d,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Jn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Jn.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var n=this.latestFeatureIndex.loadVTLayers();for(var c in this.buckets)if(t.style.hasLayer(c)){var h=this.buckets[c],d=h.layers[0].sourceLayer||"_geojsonTileLayer",v=n[d],b=e[d];if(v&&b&&Object.keys(b).length!==0){h.update(b,v,this.imageAtlas&&this.imageAtlas.patternPositions||{});var C=t&&t.style&&t.style.getLayer(c);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(h)))}}}},Jn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Jn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<si.now()},Jn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Jn.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=si.now()+e},Jn.prototype.setDependencies=function(e,t){for(var n={},c=0,h=t;c<h.length;c+=1)n[h[c]]=!0;this.dependencies[e]=n},Jn.prototype.hasDependency=function(e,t){for(var n=0,c=e;n<c.length;n+=1){var h=this.dependencies[c[n]];if(h){for(var d=0,v=t;d<v.length;d+=1)if(h[v[d]])return!0}}return!1};var gu=X.performance,C_=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},gu.mark(this._marks.start)};C_.prototype.finish=function(){gu.mark(this._marks.end);var e=gu.getEntriesByName(this._marks.measure);return e.length===0&&(gu.measure(this._marks.measure,this._marks.start,this._marks.end),e=gu.getEntriesByName(this._marks.measure),gu.clearMarks(this._marks.start),gu.clearMarks(this._marks.end),gu.clearMeasures(this._marks.measure)),e},l.Actor=fc,l.AlphaImage=cl,l.CanonicalTileID=fl,l.CollisionBoxArray=s,l.Color=cr,l.DEMData=$s,l.DataConstantProperty=_t,l.DictionaryCoder=_f,l.EXTENT=8192,l.ErrorEvent=se,l.EvaluationParameters=Jt,l.Event=K,l.Evented=pe,l.FeatureIndex=Xs,l.FillBucket=$a,l.FillExtrusionBucket=Xa,l.ImageAtlas=Ip,l.ImagePosition=cf,l.LineBucket=Oi,l.LngLat=Xr,l.LngLatBounds=On,l.MercatorCoordinate=hl,l.ONE_EM=24,l.OverscaledTileID=Rn,l.Point=ee,l.Point$1=ee,l.Properties=ai,l.Protobuf=uf,l.RGBAImage=so,l.RequestManager=nn,l.RequestPerformance=C_,l.ResourceType=As,l.SegmentVector=V,l.SourceFeatureState=dc,l.StructArrayLayout1ui2=_p,l.StructArrayLayout2f1f2i16=qs,l.StructArrayLayout2i4=Vs,l.StructArrayLayout3ui6=us,l.StructArrayLayout4i8=mp,l.SymbolBucket=Mr,l.Texture=pl,l.Tile=Jn,l.Transitionable=oi,l.Uniform1f=Ge,l.Uniform1i=Be,l.Uniform2f=qe,l.Uniform3f=ot,l.Uniform4f=xt,l.UniformColor=Ct,l.UniformMatrix4f=hr,l.UnwrappedTileID=w_,l.ValidationError=Q,l.WritingMode=No,l.ZoomHistory=lp,l.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},l.addDynamicAttributes=zm,l.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var c=e.length,h=new Array(e.length),d=null;e.forEach(function(v,b){t(v,function(C,T){C&&(d=C),h[b]=T,--c==0&&n(d,h)})})},l.bezier=Me,l.bindAll=Tt,l.browser=si,l.cacheEntryPossiblyAdded=function(e){++Fn>Wi&&(e.getActor().send("enforceCacheSizeLimit",Gi),Fn=0)},l.clamp=ue,l.clearTileCache=function(e){var t=X.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},l.clipLine=a_,l.clone=function(e){var t=new _r(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},l.clone$1=wr,l.clone$2=function(e){var t=new _r(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},l.collisionCircleLayout=Ww,l.config=sr,l.create=function(){var e=new _r(16);return _r!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},l.create$1=function(){var e=new _r(9);return _r!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},l.create$2=function(){var e=new _r(4);return _r!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},l.createCommonjsModule=k,l.createExpression=Rs,l.createLayout=Hn,l.createStyleLayer=function(e){return e.type==="custom"?new E2(e):new C2[e.type](e)},l.cross=function(e,t,n){var c=t[0],h=t[1],d=t[2],v=n[0],b=n[1],C=n[2];return e[0]=h*C-d*b,e[1]=d*v-c*C,e[2]=c*b-h*v,e},l.deepEqual=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var c=0;c<t.length;c++)if(!e(t[c],n[c]))return!1;return!0}if(typeof t=="object"&&t!==null&&n!==null){if(typeof n!="object"||Object.keys(t).length!==Object.keys(n).length)return!1;for(var h in t)if(!e(t[h],n[h]))return!1;return!0}return t===n},l.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},l.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},l.ease=Le,l.emitValidationErrors=va,l.endsWith=Ot,l.enforceCacheSizeLimit=function(e){$n(),mi&&mi.then(function(t){t.keys().then(function(n){for(var c=0;c<n.length-e;c++)t.delete(n[c])})})},l.evaluateSizeForFeature=e_,l.evaluateSizeForZoom=t_,l.evaluateVariableOffset=l_,l.evented=hp,l.extend=ae,l.featureFilter=zi,l.filterObject=er,l.fromRotation=function(e,t){var n=Math.sin(t),c=Math.cos(t);return e[0]=c,e[1]=n,e[2]=0,e[3]=-n,e[4]=c,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},l.getAnchorAlignment=Im,l.getAnchorJustification=Mm,l.getArrayBuffer=ns,l.getImage=O,l.getJSON=function(e,t){return Tr(ae(e,{type:"json"}),t)},l.getRTLTextPluginStatus=fp,l.getReferrer=La,l.getVideo=function(e,t){var n,c,h=X.document.createElement("video");h.muted=!0,h.onloadstart=function(){t(null,h)};for(var d=0;d<e.length;d++){var v=X.document.createElement("source");n=e[d],c=void 0,(c=X.document.createElement("a")).href=n,(c.protocol!==X.document.location.protocol||c.host!==X.document.location.host)&&(h.crossOrigin="Anonymous"),v.src=e[d],h.appendChild(v)}return{cancel:function(){}}},l.identity=So,l.invert=function(e,t){var n=t[0],c=t[1],h=t[2],d=t[3],v=t[4],b=t[5],C=t[6],T=t[7],A=t[8],z=t[9],R=t[10],U=t[11],$=t[12],H=t[13],oe=t[14],te=t[15],he=n*b-c*v,ge=n*C-h*v,xe=n*T-d*v,Ce=c*C-h*b,Oe=c*T-d*b,je=h*T-d*C,$e=A*H-z*$,vt=A*oe-R*$,tt=A*te-U*$,bt=z*oe-R*H,rt=z*te-U*H,Xt=R*te-U*oe,Lt=he*Xt-ge*rt+xe*bt+Ce*tt-Oe*vt+je*$e;return Lt?(e[0]=(b*Xt-C*rt+T*bt)*(Lt=1/Lt),e[1]=(h*rt-c*Xt-d*bt)*Lt,e[2]=(H*je-oe*Oe+te*Ce)*Lt,e[3]=(R*Oe-z*je-U*Ce)*Lt,e[4]=(C*tt-v*Xt-T*vt)*Lt,e[5]=(n*Xt-h*tt+d*vt)*Lt,e[6]=(oe*xe-$*je-te*ge)*Lt,e[7]=(A*je-R*xe+U*ge)*Lt,e[8]=(v*rt-b*tt+T*$e)*Lt,e[9]=(c*tt-n*rt-d*$e)*Lt,e[10]=($*Oe-H*xe+te*he)*Lt,e[11]=(z*xe-A*Oe-U*he)*Lt,e[12]=(b*vt-v*bt-C*$e)*Lt,e[13]=(n*bt-c*vt+h*$e)*Lt,e[14]=(H*ge-$*Ce-oe*he)*Lt,e[15]=(A*Ce-z*ge+R*he)*Lt,e):null},l.isChar=He,l.isMapboxURL=An,l.keysDifference=function(e,t){var n=[];for(var c in e)c in t||n.push(c);return n},l.makeRequest=Tr,l.mapObject=pt,l.mercatorXfromLng=__,l.mercatorYfromLat=x_,l.mercatorZfromAltitude=b_,l.mul=ym,l.multiply=Di,l.mvt=ic,l.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},l.normalize=function(e,t){var n=t[0],c=t[1],h=t[2],d=n*n+c*c+h*h;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},l.number=rn,l.offscreenCanvasSupported=Ht,l.ortho=function(e,t,n,c,h,d,v){var b=1/(t-n),C=1/(c-h),T=1/(d-v);return e[0]=-2*b,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*C,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*T,e[11]=0,e[12]=(t+n)*b,e[13]=(h+c)*C,e[14]=(v+d)*T,e[15]=1,e},l.parseGlyphPBF=function(e){return new uf(e).readFields(n2,[])},l.pbf=uf,l.performSymbolLayout=function(e,t,n,c,h,d,v){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var b=e.layers[0].layout,C=e.layers[0]._unevaluatedLayout._values,T={};if(e.textSizeData.kind==="composite"){var A=e.textSizeData,z=A.maxZoom;T.compositeTextSizes=[C["text-size"].possiblyEvaluate(new Jt(A.minZoom),v),C["text-size"].possiblyEvaluate(new Jt(z),v)]}if(e.iconSizeData.kind==="composite"){var R=e.iconSizeData,U=R.maxZoom;T.compositeIconSizes=[C["icon-size"].possiblyEvaluate(new Jt(R.minZoom),v),C["icon-size"].possiblyEvaluate(new Jt(U),v)]}T.layoutTextSize=C["text-size"].possiblyEvaluate(new Jt(e.zoom+1),v),T.layoutIconSize=C["icon-size"].possiblyEvaluate(new Jt(e.zoom+1),v),T.textMaxSize=C["text-size"].possiblyEvaluate(new Jt(18));for(var $=24*b.get("text-line-height"),H=b.get("text-rotation-alignment")==="map"&&b.get("symbol-placement")!=="point",oe=b.get("text-keep-upright"),te=b.get("text-size"),he=function(){var Ce=xe[ge],Oe=b.get("text-font").evaluate(Ce,{},v).join(","),je=te.evaluate(Ce,{},v),$e=T.layoutTextSize.evaluate(Ce,{},v),vt=T.layoutIconSize.evaluate(Ce,{},v),tt={horizontal:{},vertical:void 0},bt=Ce.text,rt=[0,0];if(bt){var Xt=bt.toString(),Lt=24*b.get("text-letter-spacing").evaluate(Ce,{},v),dt=function(nr){for(var Or=0,Pr=nr;Or<Pr.length;Or+=1)if(fr=Pr[Or].charCodeAt(0),He.Arabic(fr)||He["Arabic Supplement"](fr)||He["Arabic Extended-A"](fr)||He["Arabic Presentation Forms-A"](fr)||He["Arabic Presentation Forms-B"](fr))return!1;var fr;return!0}(Xt)?Lt:0,Yt=b.get("text-anchor").evaluate(Ce,{},v),Zt=b.get("text-variable-anchor");if(!Zt){var ur=b.get("text-radial-offset").evaluate(Ce,{},v);rt=ur?l_(Yt,[24*ur,Am]):b.get("text-offset").evaluate(Ce,{},v).map(function(nr){return 24*nr})}var wt=H?"center":b.get("text-justify").evaluate(Ce,{},v),vr=b.get("symbol-placement"),Kr=vr==="point"?24*b.get("text-max-width").evaluate(Ce,{},v):0,fn=function(){e.allowVerticalPlacement&&cp(Xt)&&(tt.vertical=pf(bt,t,n,h,Oe,Kr,$,Yt,"left",dt,rt,No.vertical,!0,vr,$e,je))};if(!H&&Zt){for(var un=wt==="auto"?Zt.map(function(nr){return Mm(nr)}):[wt],Hr=!1,dn=0;dn<un.length;dn++){var Vn=un[dn];if(!tt.horizontal[Vn])if(Hr)tt.horizontal[Vn]=tt.horizontal[0];else{var qn=pf(bt,t,n,h,Oe,Kr,$,"center",Vn,dt,rt,No.horizontal,!1,vr,$e,je);qn&&(tt.horizontal[Vn]=qn,Hr=qn.positionedLines.length===1)}}fn()}else{wt==="auto"&&(wt=Mm(Yt));var bi=pf(bt,t,n,h,Oe,Kr,$,Yt,wt,dt,rt,No.horizontal,!1,vr,$e,je);bi&&(tt.horizontal[wt]=bi),fn(),cp(Xt)&&H&&oe&&(tt.vertical=pf(bt,t,n,h,Oe,Kr,$,Yt,wt,dt,rt,No.vertical,!1,vr,$e,je))}}var Qn=void 0,wi=!1;if(Ce.icon&&Ce.icon.name){var _n=c[Ce.icon.name];_n&&(Qn=function(nr,Or,Pr){var fr=Im(Pr),Ri=Or[0]-nr.displaySize[0]*fr.horizontalAlign,hi=Or[1]-nr.displaySize[1]*fr.verticalAlign;return{image:nr,top:hi,bottom:hi+nr.displaySize[1],left:Ri,right:Ri+nr.displaySize[0]}}(h[Ce.icon.name],b.get("icon-offset").evaluate(Ce,{},v),b.get("icon-anchor").evaluate(Ce,{},v)),wi=_n.sdf,e.sdfIcons===void 0?e.sdfIcons=_n.sdf:e.sdfIcons!==_n.sdf&&Ut("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(_n.pixelRatio!==e.pixelRatio||b.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var ei=p_(tt.horizontal)||tt.vertical;e.iconsInText=!!ei&&ei.iconsInText,(ei||Qn)&&function(nr,Or,Pr,fr,Ri,hi,$r,Pn,fi,gr,ds){var jo=hi.textMaxSize.evaluate(Or,{});jo===void 0&&(jo=$r);var ms,xn=nr.layers[0].layout,ys=xn.get("icon-offset").evaluate(Or,{},ds),Ea=p_(Pr.horizontal),mc=$r/24,dl=nr.tilePixelRatio*mc,yc=nr.tilePixelRatio*jo/24,Ks=nr.tilePixelRatio*Pn,vc=nr.tilePixelRatio*xn.get("symbol-spacing"),bf=xn.get("text-padding")*nr.tilePixelRatio,gc=xn.get("icon-padding")*nr.tilePixelRatio,Mp=xn.get("text-max-angle")/180*Math.PI,wf=xn.get("text-rotation-alignment")==="map"&&xn.get("symbol-placement")!=="point",Sf=xn.get("icon-rotation-alignment")==="map"&&xn.get("symbol-placement")!=="point",Hs=xn.get("symbol-placement"),zp=vc/2,_c=xn.get("icon-text-fit");fr&&_c!=="none"&&(nr.allowVerticalPlacement&&Pr.vertical&&(ms=Qg(fr,Pr.vertical,_c,xn.get("icon-text-fit-padding"),ys,mc)),Ea&&(fr=Qg(fr,Ea,_c,xn.get("icon-text-fit-padding"),ys,mc)));var _u=function(T2,Np){Np.x<0||Np.x>=8192||Np.y<0||Np.y>=8192||function(bn,Ka,I2,xu,Nm,I_,kf,vs,Af,jp,Mf,zf,jm,k_,Vp,A_,M_,z_,L_,D_,Vo,Lf,O_,gs,k2){var R_,yl,Ec,Cc,Pc,Tc=bn.addToLineVertexArray(Ka,I2),F_=0,B_=0,U_=0,N_=0,Vm=-1,qm=-1,Ys={},j_=W(""),Zm=0,Gm=0;if(vs._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Zm=(R_=vs.layout.get("text-offset").evaluate(Vo,{},gs).map(function(Zp){return 24*Zp}))[0],Gm=R_[1]):(Zm=24*vs.layout.get("text-radial-offset").evaluate(Vo,{},gs),Gm=Am),bn.allowVerticalPlacement&&xu.vertical){var V_=vs.layout.get("text-rotate").evaluate(Vo,{},gs)+90;Cc=new yf(Af,Ka,jp,Mf,zf,xu.vertical,jm,k_,Vp,V_),kf&&(Pc=new yf(Af,Ka,jp,Mf,zf,kf,M_,z_,Vp,V_))}if(Nm){var Wm=vs.layout.get("icon-rotate").evaluate(Vo,{}),q_=vs.layout.get("icon-text-fit")!=="none",Z_=s_(Nm,Wm,O_,q_),$m=kf?s_(kf,Wm,O_,q_):void 0;Ec=new yf(Af,Ka,jp,Mf,zf,Nm,M_,z_,!1,Wm),F_=4*Z_.length;var G_=bn.iconSizeData,qp=null;G_.kind==="source"?(qp=[128*vs.layout.get("icon-size").evaluate(Vo,{})])[0]>32640&&Ut(bn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):G_.kind==="composite"&&((qp=[128*Lf.compositeIconSizes[0].evaluate(Vo,{},gs),128*Lf.compositeIconSizes[1].evaluate(Vo,{},gs)])[0]>32640||qp[1]>32640)&&Ut(bn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),bn.addSymbols(bn.icon,Z_,qp,D_,L_,Vo,!1,Ka,Tc.lineStartIndex,Tc.lineLength,-1,gs),Vm=bn.icon.placedSymbolArray.length-1,$m&&(B_=4*$m.length,bn.addSymbols(bn.icon,$m,qp,D_,L_,Vo,No.vertical,Ka,Tc.lineStartIndex,Tc.lineLength,-1,gs),qm=bn.icon.placedSymbolArray.length-1)}for(var W_ in xu.horizontal){var Df=xu.horizontal[W_];if(!yl){j_=W(Df.text);var A2=vs.layout.get("text-rotate").evaluate(Vo,{},gs);yl=new yf(Af,Ka,jp,Mf,zf,Df,jm,k_,Vp,A2)}var $_=Df.positionedLines.length===1;if(U_+=c_(bn,Ka,Df,I_,vs,Vp,Vo,A_,Tc,xu.vertical?No.horizontal:No.horizontalOnly,$_?Object.keys(xu.horizontal):[W_],Ys,Vm,Lf,gs),$_)break}xu.vertical&&(N_+=c_(bn,Ka,xu.vertical,I_,vs,Vp,Vo,A_,Tc,No.vertical,["vertical"],Ys,qm,Lf,gs));var M2=yl?yl.boxStartIndex:bn.collisionBoxArray.length,z2=yl?yl.boxEndIndex:bn.collisionBoxArray.length,L2=Cc?Cc.boxStartIndex:bn.collisionBoxArray.length,D2=Cc?Cc.boxEndIndex:bn.collisionBoxArray.length,O2=Ec?Ec.boxStartIndex:bn.collisionBoxArray.length,R2=Ec?Ec.boxEndIndex:bn.collisionBoxArray.length,F2=Pc?Pc.boxStartIndex:bn.collisionBoxArray.length,B2=Pc?Pc.boxEndIndex:bn.collisionBoxArray.length,_s=-1,Of=function(Zp,K_){return Zp&&Zp.circleDiameter?Math.max(Zp.circleDiameter,K_):K_};_s=Of(yl,_s),_s=Of(Cc,_s),_s=Of(Ec,_s);var X_=(_s=Of(Pc,_s))>-1?1:0;X_&&(_s*=k2/24),bn.glyphOffsetArray.length>=Mr.MAX_GLYPHS&&Ut("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vo.sortKey!==void 0&&bn.addToSortKeyRanges(bn.symbolInstances.length,Vo.sortKey),bn.symbolInstances.emplaceBack(Ka.x,Ka.y,Ys.right>=0?Ys.right:-1,Ys.center>=0?Ys.center:-1,Ys.left>=0?Ys.left:-1,Ys.vertical||-1,Vm,qm,j_,M2,z2,L2,D2,O2,R2,F2,B2,jp,U_,N_,F_,B_,X_,0,jm,Zm,Gm,_s)}(nr,Np,T2,Pr,fr,Ri,ms,nr.layers[0],nr.collisionBoxArray,Or.index,Or.sourceLayerIndex,nr.index,dl,bf,wf,fi,Ks,gc,Sf,ys,Or,hi,gr,ds,$r)};if(Hs==="line")for(var xc=0,Ef=a_(Or.geometry,0,0,8192,8192);xc<Ef.length;xc+=1)for(var Cf=Ef[xc],Lp=0,Dp=c2(Cf,vc,Mp,Pr.vertical||Ea,fr,24,yc,nr.overscaling,8192);Lp<Dp.length;Lp+=1){var Pf=Dp[Lp];Ea&&d2(nr,Ea.text,zp,Pf)||_u(Cf,Pf)}else if(Hs==="line-center")for(var Op=0,Rp=Or.geometry;Op<Rp.length;Op+=1){var Fp=Rp[Op];if(Fp.length>1){var Tf=l2(Fp,Mp,Pr.vertical||Ea,fr,24,yc);Tf&&_u(Fp,Tf)}}else if(Or.type==="Polygon")for(var bc=0,If=Sm(Or.geometry,0);bc<If.length;bc+=1){var wc=If[bc],Bp=h2(wc,16);_u(wc[0],new uc(Bp.x,Bp.y,0))}else if(Or.type==="LineString")for(var ml=0,Up=Or.geometry;ml<Up.length;ml+=1){var Sc=Up[ml];_u(Sc,new uc(Sc[0].x,Sc[0].y,0))}else if(Or.type==="Point")for(var Fm=0,P_=Or.geometry;Fm<P_.length;Fm+=1)for(var Bm=0,T_=P_[Fm];Bm<T_.length;Bm+=1){var Um=T_[Bm];_u([Um],new uc(Um.x,Um.y,0))}}(e,Ce,tt,Qn,c,T,$e,vt,rt,wi,v)},ge=0,xe=e.features;ge<xe.length;ge+=1)he();d&&e.generateCollisionDebugBuffers()},l.perspective=function(e,t,n,c,h){var d,v=1/Math.tan(t/2);return e[0]=v/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,h!=null&&h!==1/0?(e[10]=(h+c)*(d=1/(c-h)),e[14]=2*h*c*d):(e[10]=-1,e[14]=-2*c),e},l.pick=function(e,t){for(var n={},c=0;c<t.length;c++){var h=t[c];h in e&&(n[h]=e[h])}return n},l.plugin=wo,l.polygonIntersectsPolygon=ps,l.postMapLoadEvent=Mn,l.postTurnstileEvent=rs,l.potpack=Kg,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=lt,l.registerForPluginStateChange=function(e){return e({pluginStatus:io,pluginURL:Za}),hp.on("pluginStateChange",e),e},l.renderColorRamp=Ag,l.rotate=function(e,t,n){var c=t[0],h=t[1],d=t[2],v=t[3],b=Math.sin(n),C=Math.cos(n);return e[0]=c*C+d*b,e[1]=h*C+v*b,e[2]=c*-b+d*C,e[3]=h*-b+v*C,e},l.rotateX=function(e,t,n){var c=Math.sin(n),h=Math.cos(n),d=t[4],v=t[5],b=t[6],C=t[7],T=t[8],A=t[9],z=t[10],R=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*h+T*c,e[5]=v*h+A*c,e[6]=b*h+z*c,e[7]=C*h+R*c,e[8]=T*h-d*c,e[9]=A*h-v*c,e[10]=z*h-b*c,e[11]=R*h-C*c,e},l.rotateZ=function(e,t,n){var c=Math.sin(n),h=Math.cos(n),d=t[0],v=t[1],b=t[2],C=t[3],T=t[4],A=t[5],z=t[6],R=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*h+T*c,e[1]=v*h+A*c,e[2]=b*h+z*c,e[3]=C*h+R*c,e[4]=T*h-d*c,e[5]=A*h-v*c,e[6]=z*h-b*c,e[7]=R*h-C*c,e},l.scale=function(e,t,n){var c=n[0],h=n[1],d=n[2];return e[0]=t[0]*c,e[1]=t[1]*c,e[2]=t[2]*c,e[3]=t[3]*c,e[4]=t[4]*h,e[5]=t[5]*h,e[6]=t[6]*h,e[7]=t[7]*h,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},l.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},l.scale$2=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},l.setCacheLimits=function(e,t){Gi=e,Wi=t},l.setRTLTextPlugin=function(e,t,n){if(n===void 0&&(n=!1),io==="deferred"||io==="loading"||io==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Za=si.resolveURL(e),io="deferred",Xl=t,rl(),n||ra()},l.sphericalToCartesian=function(e){var t=e[0],n=e[1],c=e[2];return n+=90,n*=Math.PI/180,c*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(c),y:t*Math.sin(n)*Math.sin(c),z:t*Math.cos(c)}},l.sqrLen=function(e){var t=e[0],n=e[1];return t*t+n*n},l.styleSpec=j,l.sub=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},l.symbolSize=u2,l.transformMat3=function(e,t,n){var c=t[0],h=t[1],d=t[2];return e[0]=c*n[0]+h*n[3]+d*n[6],e[1]=c*n[1]+h*n[4]+d*n[7],e[2]=c*n[2]+h*n[5]+d*n[8],e},l.transformMat4=ec,l.translate=function(e,t,n){var c,h,d,v,b,C,T,A,z,R,U,$,H=n[0],oe=n[1],te=n[2];return t===e?(e[12]=t[0]*H+t[4]*oe+t[8]*te+t[12],e[13]=t[1]*H+t[5]*oe+t[9]*te+t[13],e[14]=t[2]*H+t[6]*oe+t[10]*te+t[14],e[15]=t[3]*H+t[7]*oe+t[11]*te+t[15]):(h=t[1],d=t[2],v=t[3],b=t[4],C=t[5],T=t[6],A=t[7],z=t[8],R=t[9],U=t[10],$=t[11],e[0]=c=t[0],e[1]=h,e[2]=d,e[3]=v,e[4]=b,e[5]=C,e[6]=T,e[7]=A,e[8]=z,e[9]=R,e[10]=U,e[11]=$,e[12]=c*H+b*oe+z*te+t[12],e[13]=h*H+C*oe+R*te+t[13],e[14]=d*H+T*oe+U*te+t[14],e[15]=v*H+A*oe+$*te+t[15]),e},l.triggerPluginCompletionEvent=ef,l.uniqueId=De,l.validateCustomStyleLayer=function(e){var t=[],n=e.id;return n===void 0&&t.push({message:"layers."+n+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},l.validateLight=Zl,l.validateStyle=Qi,l.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},l.vectorTile=ic,l.version="1.13.2",l.warnOnce=Ut,l.webpSupported=Io,l.window=X,l.wrap=re}),S(["./shared"],function(l){function k(L){var O=typeof L;if(O==="number"||O==="boolean"||O==="string"||L==null)return JSON.stringify(L);if(Array.isArray(L)){for(var B="[",G=0,K=L;G<K.length;G+=1)B+=k(K[G])+",";return B+"]"}for(var se=Object.keys(L).sort(),pe="{",j=0;j<se.length;j++)pe+=JSON.stringify(se[j])+":"+k(L[se[j]])+",";return pe+"}"}function M(L){for(var O="",B=0,G=l.refProperties;B<G.length;B+=1)O+="/"+k(L[G[B]]);return O}var q=function(L){this.keyCache={},L&&this.replace(L)};q.prototype.replace=function(L){this._layerConfigs={},this._layers={},this.update(L,[])},q.prototype.update=function(L,O){for(var B=this,G=0,K=L;G<K.length;G+=1){var se=K[G];this._layerConfigs[se.id]=se;var pe=this._layers[se.id]=l.createStyleLayer(se);pe._featureFilter=l.featureFilter(pe.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(var j=0,Q=O;j<Q.length;j+=1){var me=Q[j];delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me]}this.familiesBySource={};for(var Fe=0,Ne=function(Xe,Ke){for(var jt={},Qe=0;Qe<Xe.length;Qe++){var tr=Ke&&Ke[Xe[Qe].id]||M(Xe[Qe]);Ke&&(Ke[Xe[Qe].id]=tr);var Cr=jt[tr];Cr||(Cr=jt[tr]=[]),Cr.push(Xe[Qe])}var Mt=[];for(var lr in jt)Mt.push(jt[lr]);return Mt}(l.values(this._layerConfigs),this.keyCache);Fe<Ne.length;Fe+=1){var Pe=Ne[Fe].map(function(Xe){return B._layers[Xe.id]}),Ue=Pe[0];if(Ue.visibility!=="none"){var st=Ue.source||"",nt=this.familiesBySource[st];nt||(nt=this.familiesBySource[st]={});var Ie=Ue.sourceLayer||"_geojsonTileLayer",Je=nt[Ie];Je||(Je=nt[Ie]=[]),Je.push(Pe)}}};var ee=function(L){var O={},B=[];for(var G in L){var K=L[G],se=O[G]={};for(var pe in K){var j=K[+pe];if(j&&j.bitmap.width!==0&&j.bitmap.height!==0){var Q={x:0,y:0,w:j.bitmap.width+2,h:j.bitmap.height+2};B.push(Q),se[pe]={rect:Q,metrics:j.metrics}}}}var me=l.potpack(B),Fe=new l.AlphaImage({width:me.w||1,height:me.h||1});for(var Ne in L){var Pe=L[Ne];for(var Ue in Pe){var st=Pe[+Ue];if(st&&st.bitmap.width!==0&&st.bitmap.height!==0){var nt=O[Ne][Ue].rect;l.AlphaImage.copy(st.bitmap,Fe,{x:0,y:0},{x:nt.x+1,y:nt.y+1},st.bitmap)}}}this.image=Fe,this.positions=O};l.register("GlyphAtlas",ee);var ke=function(L){this.tileID=new l.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId};function X(L,O,B){for(var G=new l.EvaluationParameters(O),K=0,se=L;K<se.length;K+=1)se[K].recalculate(G,B)}function Se(L,O){var B=l.getArrayBuffer(L.request,function(G,K,se,pe){G?O(G):K&&O(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(K)),rawData:K,cacheControl:se,expires:pe})});return function(){B.cancel(),O()}}ke.prototype.parse=function(L,O,B,G,K){var se=this;this.status="parsing",this.data=L,this.collisionBoxArray=new l.CollisionBoxArray;var pe=new l.DictionaryCoder(Object.keys(L.layers).sort()),j=new l.FeatureIndex(this.tileID,this.promoteId);j.bucketLayerIDs=[];var Q,me,Fe,Ne,Pe={},Ue={featureIndex:j,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:B},st=O.familiesBySource[this.source];for(var nt in st){var Ie=L.layers[nt];if(Ie){Ie.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+nt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Je=pe.encode(nt),Xe=[],Ke=0;Ke<Ie.length;Ke++){var jt=Ie.feature(Ke),Qe=j.getId(jt,nt);Xe.push({feature:jt,id:Qe,index:Ke,sourceLayerIndex:Je})}for(var tr=0,Cr=st[nt];tr<Cr.length;tr+=1){var Mt=Cr[tr],lr=Mt[0];lr.minzoom&&this.zoom<Math.floor(lr.minzoom)||lr.maxzoom&&this.zoom>=lr.maxzoom||lr.visibility!=="none"&&(X(Mt,this.zoom,B),(Pe[lr.id]=lr.createBucket({index:j.bucketLayerIDs.length,layers:Mt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Je,sourceID:this.source})).populate(Xe,Ue,this.tileID.canonical),j.bucketLayerIDs.push(Mt.map(function(xr){return xr.id})))}}}var or=l.mapObject(Ue.glyphDependencies,function(xr){return Object.keys(xr).map(Number)});Object.keys(or).length?G.send("getGlyphs",{uid:this.uid,stacks:or},function(xr,It){Q||(Q=xr,me=It,en.call(se))}):me={};var Bn=Object.keys(Ue.iconDependencies);Bn.length?G.send("getImages",{icons:Bn,source:this.source,tileID:this.tileID,type:"icons"},function(xr,It){Q||(Q=xr,Fe=It,en.call(se))}):Fe={};var dr=Object.keys(Ue.patternDependencies);function en(){if(Q)return K(Q);if(me&&Fe&&Ne){var xr=new ee(me),It=new l.ImageAtlas(Fe,Ne);for(var cr in Pe){var ui=Pe[cr];ui instanceof l.SymbolBucket?(X(ui.layers,this.zoom,B),l.performSymbolLayout(ui,me,xr.positions,Fe,It.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ui.hasPattern&&(ui instanceof l.LineBucket||ui instanceof l.FillBucket||ui instanceof l.FillExtrusionBucket)&&(X(ui.layers,this.zoom,B),ui.addFeatures(Ue,this.tileID.canonical,It.patternPositions))}this.status="done",K(null,{buckets:l.values(Pe).filter(function(Xi){return!Xi.isEmpty()}),featureIndex:j,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xr.image,imageAtlas:It,glyphMap:this.returnDependencies?me:null,iconMap:this.returnDependencies?Fe:null,glyphPositions:this.returnDependencies?xr.positions:null})}}dr.length?G.send("getImages",{icons:dr,source:this.source,tileID:this.tileID,type:"patterns"},function(xr,It){Q||(Q=xr,Ne=It,en.call(se))}):Ne={},en.call(this)};var Me=function(L,O,B,G){this.actor=L,this.layerIndex=O,this.availableImages=B,this.loadVectorData=G||Se,this.loading={},this.loaded={}};Me.prototype.loadTile=function(L,O){var B=this,G=L.uid;this.loading||(this.loading={});var K=!!(L&&L.request&&L.request.collectResourceTiming)&&new l.RequestPerformance(L.request),se=this.loading[G]=new ke(L);se.abort=this.loadVectorData(L,function(pe,j){if(delete B.loading[G],pe||!j)return se.status="done",B.loaded[G]=se,O(pe);var Q=j.rawData,me={};j.expires&&(me.expires=j.expires),j.cacheControl&&(me.cacheControl=j.cacheControl);var Fe={};if(K){var Ne=K.finish();Ne&&(Fe.resourceTiming=JSON.parse(JSON.stringify(Ne)))}se.vectorTile=j.vectorTile,se.parse(j.vectorTile,B.layerIndex,B.availableImages,B.actor,function(Pe,Ue){if(Pe||!Ue)return O(Pe);O(null,l.extend({rawTileData:Q.slice(0)},Ue,me,Fe))}),B.loaded=B.loaded||{},B.loaded[G]=se})},Me.prototype.reloadTile=function(L,O){var B=this,G=this.loaded,K=L.uid,se=this;if(G&&G[K]){var pe=G[K];pe.showCollisionBoxes=L.showCollisionBoxes;var j=function(Q,me){var Fe=pe.reloadCallback;Fe&&(delete pe.reloadCallback,pe.parse(pe.vectorTile,se.layerIndex,B.availableImages,se.actor,Fe)),O(Q,me)};pe.status==="parsing"?pe.reloadCallback=j:pe.status==="done"&&(pe.vectorTile?pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,j):j())}},Me.prototype.abortTile=function(L,O){var B=this.loading,G=L.uid;B&&B[G]&&B[G].abort&&(B[G].abort(),delete B[G]),O()},Me.prototype.removeTile=function(L,O){var B=this.loaded,G=L.uid;B&&B[G]&&delete B[G],O()};var Le=l.window.ImageBitmap,ue=function(){this.loaded={}};function re(L,O){if(L.length!==0){ae(L[0],O);for(var B=1;B<L.length;B++)ae(L[B],!O)}}function ae(L,O){for(var B=0,G=0,K=L.length,se=K-1;G<K;se=G++)B+=(L[G][0]-L[se][0])*(L[se][1]+L[G][1]);B>=0!=!!O&&L.reverse()}ue.prototype.loadTile=function(L,O){var B=L.uid,G=L.encoding,K=L.rawImageData,se=Le&&K instanceof Le?this.getImageData(K):K,pe=new l.DEMData(B,se,G);this.loaded=this.loaded||{},this.loaded[B]=pe,O(null,pe)},ue.prototype.getImageData=function(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);var O=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:O.width,height:O.height},O.data)},ue.prototype.removeTile=function(L){var O=this.loaded,B=L.uid;O&&O[B]&&delete O[B]};var be=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,De=function(L){this._feature=L,this.extent=l.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))};De.prototype.loadGeometry=function(){if(this._feature.type===1){for(var L=[],O=0,B=this._feature.geometry;O<B.length;O+=1){var G=B[O];L.push([new l.Point$1(G[0],G[1])])}return L}for(var K=[],se=0,pe=this._feature.geometry;se<pe.length;se+=1){for(var j=[],Q=0,me=pe[se];Q<me.length;Q+=1){var Fe=me[Q];j.push(new l.Point$1(Fe[0],Fe[1]))}K.push(j)}return K},De.prototype.toGeoJSON=function(L,O,B){return be.call(this,L,O,B)};var mt=function(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=L.length,this._features=L};mt.prototype.feature=function(L){return new De(this._features[L])};var We=l.vectorTile.VectorTileFeature,Tt=Ot;function Ot(L,O){this.options=O||{},this.features=L,this.length=L.length}function pt(L,O){this.id=typeof L.id=="number"?L.id:void 0,this.type=L.type,this.rawGeometry=L.type===1?[L.geometry]:L.geometry,this.properties=L.tags,this.extent=O||4096}Ot.prototype.feature=function(L){return new pt(this.features[L],this.options.extent)},pt.prototype.loadGeometry=function(){var L=this.rawGeometry;this.geometry=[];for(var O=0;O<L.length;O++){for(var B=L[O],G=[],K=0;K<B.length;K++)G.push(new l.Point$1(B[K][0],B[K][1]));this.geometry.push(G)}return this.geometry},pt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var L=this.geometry,O=1/0,B=-1/0,G=1/0,K=-1/0,se=0;se<L.length;se++)for(var pe=L[se],j=0;j<pe.length;j++){var Q=pe[j];O=Math.min(O,Q.x),B=Math.max(B,Q.x),G=Math.min(G,Q.y),K=Math.max(K,Q.y)}return[O,G,B,K]},pt.prototype.toGeoJSON=We.prototype.toGeoJSON;var er=Fr,wr=Tt;function Fr(L){var O=new l.pbf;return function(B,G){for(var K in B.layers)G.writeMessage(3,Ut,B.layers[K])}(L,O),O.finish()}function Ut(L,O){var B;O.writeVarintField(15,L.version||1),O.writeStringField(1,L.name||""),O.writeVarintField(5,L.extent||4096);var G={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<L.length;B++)G.feature=L.feature(B),O.writeMessage(2,ir,G);var K=G.keys;for(B=0;B<K.length;B++)O.writeStringField(3,K[B]);var se=G.values;for(B=0;B<se.length;B++)O.writeMessage(4,ni,se[B])}function ir(L,O){var B=L.feature;B.id!==void 0&&O.writeVarintField(1,B.id),O.writeMessage(2,qr,L),O.writeVarintField(3,B.type),O.writeMessage(4,kn,B)}function qr(L,O){var B=L.feature,G=L.keys,K=L.values,se=L.keycache,pe=L.valuecache;for(var j in B.properties){var Q=se[j];Q===void 0&&(G.push(j),se[j]=Q=G.length-1),O.writeVarint(Q);var me=B.properties[j],Fe=typeof me;Fe!=="string"&&Fe!=="boolean"&&Fe!=="number"&&(me=JSON.stringify(me));var Ne=Fe+":"+me,Pe=pe[Ne];Pe===void 0&&(K.push(me),pe[Ne]=Pe=K.length-1),O.writeVarint(Pe)}}function zr(L,O){return(O<<3)+(7&L)}function ri(L){return L<<1^L>>31}function kn(L,O){for(var B=L.loadGeometry(),G=L.type,K=0,se=0,pe=B.length,j=0;j<pe;j++){var Q=B[j],me=1;G===1&&(me=Q.length),O.writeVarint(zr(1,me));for(var Fe=G===3?Q.length-1:Q.length,Ne=0;Ne<Fe;Ne++){Ne===1&&G!==1&&O.writeVarint(zr(2,Fe-1));var Pe=Q[Ne].x-K,Ue=Q[Ne].y-se;O.writeVarint(ri(Pe)),O.writeVarint(ri(Ue)),K+=Pe,se+=Ue}G===3&&O.writeVarint(zr(7,1))}}function ni(L,O){var B=typeof L;B==="string"?O.writeStringField(1,L):B==="boolean"?O.writeBooleanField(7,L):B==="number"&&(L%1!=0?O.writeDoubleField(3,L):L<0?O.writeSVarintField(6,L):O.writeVarintField(5,L))}function Vt(L,O,B,G){Ye(L,B,G),Ye(O,2*B,2*G),Ye(O,2*B+1,2*G+1)}function Ye(L,O,B){var G=L[O];L[O]=L[B],L[B]=G}function At(L,O,B,G){var K=L-B,se=O-G;return K*K+se*se}er.fromVectorTileJs=Fr,er.fromGeojsonVt=function(L,O){O=O||{};var B={};for(var G in L)B[G]=new Tt(L[G].features,O),B[G].name=G,B[G].version=O.version,B[G].extent=O.extent;return Fr({layers:B})},er.GeoJSONWrapper=wr;var $t=function(L){return L[0]},Lr=function(L){return L[1]},Zr=function(L,O,B,G,K){O===void 0&&(O=$t),B===void 0&&(B=Lr),G===void 0&&(G=64),K===void 0&&(K=Float64Array),this.nodeSize=G,this.points=L;for(var se=L.length<65536?Uint16Array:Uint32Array,pe=this.ids=new se(L.length),j=this.coords=new K(2*L.length),Q=0;Q<L.length;Q++)pe[Q]=Q,j[2*Q]=O(L[Q]),j[2*Q+1]=B(L[Q]);(function me(Fe,Ne,Pe,Ue,st,nt){if(!(st-Ue<=Pe)){var Ie=Ue+st>>1;(function Je(Xe,Ke,jt,Qe,tr,Cr){for(;tr>Qe;){if(tr-Qe>600){var Mt=tr-Qe+1,lr=jt-Qe+1,or=Math.log(Mt),Bn=.5*Math.exp(2*or/3),dr=.5*Math.sqrt(or*Bn*(Mt-Bn)/Mt)*(lr-Mt/2<0?-1:1);Je(Xe,Ke,jt,Math.max(Qe,Math.floor(jt-lr*Bn/Mt+dr)),Math.min(tr,Math.floor(jt+(Mt-lr)*Bn/Mt+dr)),Cr)}var en=Ke[2*jt+Cr],xr=Qe,It=tr;for(Vt(Xe,Ke,Qe,jt),Ke[2*tr+Cr]>en&&Vt(Xe,Ke,Qe,tr);xr<It;){for(Vt(Xe,Ke,xr,It),xr++,It--;Ke[2*xr+Cr]<en;)xr++;for(;Ke[2*It+Cr]>en;)It--}Ke[2*Qe+Cr]===en?Vt(Xe,Ke,Qe,It):Vt(Xe,Ke,++It,tr),It<=jt&&(Qe=It+1),jt<=It&&(tr=It-1)}})(Fe,Ne,Ie,Ue,st,nt%2),me(Fe,Ne,Pe,Ue,Ie-1,nt+1),me(Fe,Ne,Pe,Ie+1,st,nt+1)}})(pe,j,G,0,pe.length-1,0)};Zr.prototype.range=function(L,O,B,G){return function(K,se,pe,j,Q,me,Fe){for(var Ne,Pe,Ue=[0,K.length-1,0],st=[];Ue.length;){var nt=Ue.pop(),Ie=Ue.pop(),Je=Ue.pop();if(Ie-Je<=Fe)for(var Xe=Je;Xe<=Ie;Xe++)Pe=se[2*Xe+1],(Ne=se[2*Xe])>=pe&&Ne<=Q&&Pe>=j&&Pe<=me&&st.push(K[Xe]);else{var Ke=Math.floor((Je+Ie)/2);Pe=se[2*Ke+1],(Ne=se[2*Ke])>=pe&&Ne<=Q&&Pe>=j&&Pe<=me&&st.push(K[Ke]);var jt=(nt+1)%2;(nt===0?pe<=Ne:j<=Pe)&&(Ue.push(Je),Ue.push(Ke-1),Ue.push(jt)),(nt===0?Q>=Ne:me>=Pe)&&(Ue.push(Ke+1),Ue.push(Ie),Ue.push(jt))}}return st}(this.ids,this.coords,L,O,B,G,this.nodeSize)},Zr.prototype.within=function(L,O,B){return function(G,K,se,pe,j,Q){for(var me=[0,G.length-1,0],Fe=[],Ne=j*j;me.length;){var Pe=me.pop(),Ue=me.pop(),st=me.pop();if(Ue-st<=Q)for(var nt=st;nt<=Ue;nt++)At(K[2*nt],K[2*nt+1],se,pe)<=Ne&&Fe.push(G[nt]);else{var Ie=Math.floor((st+Ue)/2),Je=K[2*Ie],Xe=K[2*Ie+1];At(Je,Xe,se,pe)<=Ne&&Fe.push(G[Ie]);var Ke=(Pe+1)%2;(Pe===0?se-j<=Je:pe-j<=Xe)&&(me.push(st),me.push(Ie-1),me.push(Ke)),(Pe===0?se+j>=Je:pe+j>=Xe)&&(me.push(Ie+1),me.push(Ue),me.push(Ke))}}return Fe}(this.ids,this.coords,L,O,B,this.nodeSize)};var fo={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(L){return L}},Qr=function(L){this.options=Vi(Object.create(fo),L),this.trees=new Array(this.options.maxZoom+1)};function si(L,O,B,G,K){return{x:L,y:O,zoom:1/0,id:B,parentId:-1,numPoints:G,properties:K}}function sr(L,O){var B=L.geometry.coordinates,G=B[1];return{x:Wn(B[0]),y:Kt(G),zoom:1/0,index:O,parentId:-1}}function Io(L){return{type:"Feature",id:L.id,properties:ts(L),geometry:{type:"Point",coordinates:[(G=L.x,360*(G-.5)),(O=L.y,B=(180-360*O)*Math.PI/180,360*Math.atan(Math.exp(B))/Math.PI-90)]}};var O,B,G}function ts(L){var O=L.numPoints,B=O>=1e4?Math.round(O/1e3)+"k":O>=1e3?Math.round(O/100)/10+"k":O;return Vi(Vi({},L.properties),{cluster:!0,cluster_id:L.id,point_count:O,point_count_abbreviated:B})}function Wn(L){return L/360+.5}function Kt(L){var O=Math.sin(L*Math.PI/180),B=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return B<0?0:B>1?1:B}function Vi(L,O){for(var B in O)L[B]=O[B];return L}function nn(L){return L.x}function An(L){return L.y}function Wu(L,O,B,G,K,se){var pe=K-B,j=se-G;if(pe!==0||j!==0){var Q=((L-B)*pe+(O-G)*j)/(pe*pe+j*j);Q>1?(B=K,G=se):Q>0&&(B+=pe*Q,G+=j*Q)}return(pe=L-B)*pe+(j=O-G)*j}function qi(L,O,B,G){var K={id:L===void 0?null:L,type:O,geometry:B,tags:G,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(se){var pe=se.geometry,j=se.type;if(j==="Point"||j==="MultiPoint"||j==="LineString")Ts(se,pe);else if(j==="Polygon"||j==="MultiLineString")for(var Q=0;Q<pe.length;Q++)Ts(se,pe[Q]);else if(j==="MultiPolygon")for(Q=0;Q<pe.length;Q++)for(var me=0;me<pe[Q].length;me++)Ts(se,pe[Q][me])}(K),K}function Ts(L,O){for(var B=0;B<O.length;B+=3)L.minX=Math.min(L.minX,O[B]),L.minY=Math.min(L.minY,O[B+1]),L.maxX=Math.max(L.maxX,O[B]),L.maxY=Math.max(L.maxY,O[B+1])}function ln(L,O,B,G){if(O.geometry){var K=O.geometry.coordinates,se=O.geometry.type,pe=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),j=[],Q=O.id;if(B.promoteId?Q=O.properties[B.promoteId]:B.generateId&&(Q=G||0),se==="Point")Ma(K,j);else if(se==="MultiPoint")for(var me=0;me<K.length;me++)Ma(K[me],j);else if(se==="LineString")ko(K,j,pe,!1);else if(se==="MultiLineString"){if(B.lineMetrics){for(me=0;me<K.length;me++)ko(K[me],j=[],pe,!1),L.push(qi(Q,"LineString",j,O.properties));return}Ti(K,j,pe,!1)}else if(se==="Polygon")Ti(K,j,pe,!0);else{if(se!=="MultiPolygon"){if(se==="GeometryCollection"){for(me=0;me<O.geometry.geometries.length;me++)ln(L,{id:Q,geometry:O.geometry.geometries[me],properties:O.properties},B,G);return}throw new Error("Input data is not a valid GeoJSON object.")}for(me=0;me<K.length;me++){var Fe=[];Ti(K[me],Fe,pe,!0),j.push(Fe)}}L.push(qi(Q,se,j,O.properties))}}function Ma(L,O){O.push(mi(L[0])),O.push(ca(L[1])),O.push(0)}function ko(L,O,B,G){for(var K,se,pe=0,j=0;j<L.length;j++){var Q=mi(L[j][0]),me=ca(L[j][1]);O.push(Q),O.push(me),O.push(0),j>0&&(pe+=G?(K*me-Q*se)/2:Math.sqrt(Math.pow(Q-K,2)+Math.pow(me-se,2))),K=Q,se=me}var Fe=O.length-3;O[2]=1,function Ne(Pe,Ue,st,nt){for(var Ie,Je=nt,Xe=st-Ue>>1,Ke=st-Ue,jt=Pe[Ue],Qe=Pe[Ue+1],tr=Pe[st],Cr=Pe[st+1],Mt=Ue+3;Mt<st;Mt+=3){var lr=Wu(Pe[Mt],Pe[Mt+1],jt,Qe,tr,Cr);if(lr>Je)Ie=Mt,Je=lr;else if(lr===Je){var or=Math.abs(Mt-Xe);or<Ke&&(Ie=Mt,Ke=or)}}Je>nt&&(Ie-Ue>3&&Ne(Pe,Ue,Ie,nt),Pe[Ie+2]=Je,st-Ie>3&&Ne(Pe,Ie,st,nt))}(O,0,Fe,B),O[Fe+2]=1,O.size=Math.abs(pe),O.start=0,O.end=O.size}function Ti(L,O,B,G){for(var K=0;K<L.length;K++){var se=[];ko(L[K],se,B,G),O.push(se)}}function mi(L){return L/360+.5}function ca(L){var O=Math.sin(L*Math.PI/180),B=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return B<0?0:B>1?1:B}function Zi(L,O,B,G,K,se,pe,j){if(G/=O,se>=(B/=O)&&pe<G)return L;if(pe<B||se>=G)return null;for(var Q=[],me=0;me<L.length;me++){var Fe=L[me],Ne=Fe.geometry,Pe=Fe.type,Ue=K===0?Fe.minX:Fe.minY,st=K===0?Fe.maxX:Fe.maxY;if(Ue>=B&&st<G)Q.push(Fe);else if(!(st<B||Ue>=G)){var nt=[];if(Pe==="Point"||Pe==="MultiPoint")Is(Ne,nt,B,G,K);else if(Pe==="LineString")rs(Ne,nt,B,G,K,!1,j.lineMetrics);else if(Pe==="MultiLineString")Mn(Ne,nt,B,G,K,!1);else if(Pe==="Polygon")Mn(Ne,nt,B,G,K,!0);else if(Pe==="MultiPolygon")for(var Ie=0;Ie<Ne.length;Ie++){var Je=[];Mn(Ne[Ie],Je,B,G,K,!0),Je.length&&nt.push(Je)}if(nt.length){if(j.lineMetrics&&Pe==="LineString"){for(Ie=0;Ie<nt.length;Ie++)Q.push(qi(Fe.id,Pe,nt[Ie],Fe.tags));continue}Pe!=="LineString"&&Pe!=="MultiLineString"||(nt.length===1?(Pe="LineString",nt=nt[0]):Pe="MultiLineString"),Pe!=="Point"&&Pe!=="MultiPoint"||(Pe=nt.length===3?"Point":"MultiPoint"),Q.push(qi(Fe.id,Pe,nt,Fe.tags))}}}return Q.length?Q:null}function Is(L,O,B,G,K){for(var se=0;se<L.length;se+=3){var pe=L[se+K];pe>=B&&pe<=G&&(O.push(L[se]),O.push(L[se+1]),O.push(L[se+2]))}}function rs(L,O,B,G,K,se,pe){for(var j,Q,me=za(L),Fe=K===0?Wi:$n,Ne=L.start,Pe=0;Pe<L.length-3;Pe+=3){var Ue=L[Pe],st=L[Pe+1],nt=L[Pe+2],Ie=L[Pe+3],Je=L[Pe+4],Xe=K===0?Ue:st,Ke=K===0?Ie:Je,jt=!1;pe&&(j=Math.sqrt(Math.pow(Ue-Ie,2)+Math.pow(st-Je,2))),Xe<B?Ke>B&&(Q=Fe(me,Ue,st,Ie,Je,B),pe&&(me.start=Ne+j*Q)):Xe>G?Ke<G&&(Q=Fe(me,Ue,st,Ie,Je,G),pe&&(me.start=Ne+j*Q)):Gi(me,Ue,st,nt),Ke<B&&Xe>=B&&(Q=Fe(me,Ue,st,Ie,Je,B),jt=!0),Ke>G&&Xe<=G&&(Q=Fe(me,Ue,st,Ie,Je,G),jt=!0),!se&&jt&&(pe&&(me.end=Ne+j*Q),O.push(me),me=za(L)),pe&&(Ne+=j)}var Qe=L.length-3;Ue=L[Qe],st=L[Qe+1],nt=L[Qe+2],(Xe=K===0?Ue:st)>=B&&Xe<=G&&Gi(me,Ue,st,nt),Qe=me.length-3,se&&Qe>=3&&(me[Qe]!==me[0]||me[Qe+1]!==me[1])&&Gi(me,me[0],me[1],me[2]),me.length&&O.push(me)}function za(L){var O=[];return O.size=L.size,O.start=L.start,O.end=L.end,O}function Mn(L,O,B,G,K,se){for(var pe=0;pe<L.length;pe++)rs(L[pe],O,B,G,K,se,!1)}function Gi(L,O,B,G){L.push(O),L.push(B),L.push(G)}function Wi(L,O,B,G,K,se){var pe=(se-O)/(G-O);return L.push(se),L.push(B+(K-B)*pe),L.push(1),pe}function $n(L,O,B,G,K,se){var pe=(se-B)/(K-B);return L.push(O+(G-O)*pe),L.push(se),L.push(1),pe}function ks(L,O){for(var B=[],G=0;G<L.length;G++){var K,se=L[G],pe=se.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")K=Ao(se.geometry,O);else if(pe==="MultiLineString"||pe==="Polygon"){K=[];for(var j=0;j<se.geometry.length;j++)K.push(Ao(se.geometry[j],O))}else if(pe==="MultiPolygon")for(K=[],j=0;j<se.geometry.length;j++){for(var Q=[],me=0;me<se.geometry[j].length;me++)Q.push(Ao(se.geometry[j][me],O));K.push(Q)}B.push(qi(se.id,pe,K,se.tags))}return B}function Ao(L,O){var B=[];B.size=L.size,L.start!==void 0&&(B.start=L.start,B.end=L.end);for(var G=0;G<L.length;G+=3)B.push(L[G]+O,L[G+1],L[G+2]);return B}function Fn(L,O){if(L.transformed)return L;var B,G,K,se=1<<L.z,pe=L.x,j=L.y;for(B=0;B<L.features.length;B++){var Q=L.features[B],me=Q.geometry,Fe=Q.type;if(Q.geometry=[],Fe===1)for(G=0;G<me.length;G+=2)Q.geometry.push(Ht(me[G],me[G+1],O,se,pe,j));else for(G=0;G<me.length;G++){var Ne=[];for(K=0;K<me[G].length;K+=2)Ne.push(Ht(me[G][K],me[G][K+1],O,se,pe,j));Q.geometry.push(Ne)}}return L.transformed=!0,L}function Ht(L,O,B,G,K,se){return[Math.round(B*(L*G-K)),Math.round(B*(O*G-se))]}function As(L,O,B,G,K){for(var se=O===K.maxZoom?0:K.tolerance/((1<<O)*K.extent),pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:G,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},j=0;j<L.length;j++){pe.numFeatures++,ou(pe,L[j],se,K);var Q=L[j].minX,me=L[j].minY,Fe=L[j].maxX,Ne=L[j].maxY;Q<pe.minX&&(pe.minX=Q),me<pe.minY&&(pe.minY=me),Fe>pe.maxX&&(pe.maxX=Fe),Ne>pe.maxY&&(pe.maxY=Ne)}return pe}function ou(L,O,B,G){var K=O.geometry,se=O.type,pe=[];if(se==="Point"||se==="MultiPoint")for(var j=0;j<K.length;j+=3)pe.push(K[j]),pe.push(K[j+1]),L.numPoints++,L.numSimplified++;else if(se==="LineString")La(pe,K,L,B,!1,!1);else if(se==="MultiLineString"||se==="Polygon")for(j=0;j<K.length;j++)La(pe,K[j],L,B,se==="Polygon",j===0);else if(se==="MultiPolygon")for(var Q=0;Q<K.length;Q++){var me=K[Q];for(j=0;j<me.length;j++)La(pe,me[j],L,B,!0,j===0)}if(pe.length){var Fe=O.tags||null;if(se==="LineString"&&G.lineMetrics){for(var Ne in Fe={},O.tags)Fe[Ne]=O.tags[Ne];Fe.mapbox_clip_start=K.start/K.size,Fe.mapbox_clip_end=K.end/K.size}var Pe={geometry:pe,type:se==="Polygon"||se==="MultiPolygon"?3:se==="LineString"||se==="MultiLineString"?2:1,tags:Fe};O.id!==null&&(Pe.id=O.id),L.features.push(Pe)}}function La(L,O,B,G,K,se){var pe=G*G;if(G>0&&O.size<(K?pe:G))B.numPoints+=O.length/3;else{for(var j=[],Q=0;Q<O.length;Q+=3)(G===0||O[Q+2]>pe)&&(B.numSimplified++,j.push(O[Q]),j.push(O[Q+1])),B.numPoints++;K&&function(me,Fe){for(var Ne=0,Pe=0,Ue=me.length,st=Ue-2;Pe<Ue;st=Pe,Pe+=2)Ne+=(me[Pe]-me[st])*(me[Pe+1]+me[st+1]);if(Ne>0===Fe)for(Pe=0,Ue=me.length;Pe<Ue/2;Pe+=2){var nt=me[Pe],Ie=me[Pe+1];me[Pe]=me[Ue-2-Pe],me[Pe+1]=me[Ue-1-Pe],me[Ue-2-Pe]=nt,me[Ue-1-Pe]=Ie}}(j,se),L.push(j)}}function $i(L,O){var B=(O=this.options=function(K,se){for(var pe in se)K[pe]=se[pe];return K}(Object.create(this.options),O)).debug;if(B&&console.time("preprocess data"),O.maxZoom<0||O.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(O.promoteId&&O.generateId)throw new Error("promoteId and generateId cannot be used together.");var G=function(K,se){var pe=[];if(K.type==="FeatureCollection")for(var j=0;j<K.features.length;j++)ln(pe,K.features[j],se,j);else ln(pe,K.type==="Feature"?K:{geometry:K},se);return pe}(L,O);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",O.indexMaxZoom,O.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(G=function(K,se){var pe=se.buffer/se.extent,j=K,Q=Zi(K,1,-1-pe,pe,0,-1,2,se),me=Zi(K,1,1-pe,2+pe,0,-1,2,se);return(Q||me)&&(j=Zi(K,1,-pe,1+pe,0,-1,2,se)||[],Q&&(j=ks(Q,1).concat(j)),me&&(j=j.concat(ks(me,-1)))),j}(G,O)).length&&this.splitTile(G,0,0,0),B&&(G.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function $o(L,O,B){return 32*((1<<L)*B+O)+L}function Tr(L,O){var B=L.tileID.canonical;if(!this._geoJSONIndex)return O(null,null);var G=this._geoJSONIndex.getTile(B.z,B.x,B.y);if(!G)return O(null,null);var K=new mt(G.features),se=er(K);se.byteOffset===0&&se.byteLength===se.buffer.byteLength||(se=new Uint8Array(se)),O(null,{vectorTile:K,rawData:se.buffer})}Qr.prototype.load=function(L){var O=this.options,B=O.log,G=O.minZoom,K=O.maxZoom,se=O.nodeSize;B&&console.time("total time");var pe="prepare "+L.length+" points";B&&console.time(pe),this.points=L;for(var j=[],Q=0;Q<L.length;Q++)L[Q].geometry&&j.push(sr(L[Q],Q));this.trees[K+1]=new Zr(j,nn,An,se,Float32Array),B&&console.timeEnd(pe);for(var me=K;me>=G;me--){var Fe=+Date.now();j=this._cluster(j,me),this.trees[me]=new Zr(j,nn,An,se,Float32Array),B&&console.log("z%d: %d clusters in %dms",me,j.length,+Date.now()-Fe)}return B&&console.timeEnd("total time"),this},Qr.prototype.getClusters=function(L,O){var B=((L[0]+180)%360+360)%360-180,G=Math.max(-90,Math.min(90,L[1])),K=L[2]===180?180:((L[2]+180)%360+360)%360-180,se=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)B=-180,K=180;else if(B>K){var pe=this.getClusters([B,G,180,se],O),j=this.getClusters([-180,G,K,se],O);return pe.concat(j)}for(var Q=this.trees[this._limitZoom(O)],me=[],Fe=0,Ne=Q.range(Wn(B),Kt(se),Wn(K),Kt(G));Fe<Ne.length;Fe+=1){var Pe=Q.points[Ne[Fe]];me.push(Pe.numPoints?Io(Pe):this.points[Pe.index])}return me},Qr.prototype.getChildren=function(L){var O=this._getOriginId(L),B=this._getOriginZoom(L),G="No cluster with the specified id.",K=this.trees[B];if(!K)throw new Error(G);var se=K.points[O];if(!se)throw new Error(G);for(var pe=this.options.radius/(this.options.extent*Math.pow(2,B-1)),j=[],Q=0,me=K.within(se.x,se.y,pe);Q<me.length;Q+=1){var Fe=K.points[me[Q]];Fe.parentId===L&&j.push(Fe.numPoints?Io(Fe):this.points[Fe.index])}if(j.length===0)throw new Error(G);return j},Qr.prototype.getLeaves=function(L,O,B){var G=[];return this._appendLeaves(G,L,O=O||10,B=B||0,0),G},Qr.prototype.getTile=function(L,O,B){var G=this.trees[this._limitZoom(L)],K=Math.pow(2,L),se=this.options,pe=se.radius/se.extent,j=(B-pe)/K,Q=(B+1+pe)/K,me={features:[]};return this._addTileFeatures(G.range((O-pe)/K,j,(O+1+pe)/K,Q),G.points,O,B,K,me),O===0&&this._addTileFeatures(G.range(1-pe/K,j,1,Q),G.points,K,B,K,me),O===K-1&&this._addTileFeatures(G.range(0,j,pe/K,Q),G.points,-1,B,K,me),me.features.length?me:null},Qr.prototype.getClusterExpansionZoom=function(L){for(var O=this._getOriginZoom(L)-1;O<=this.options.maxZoom;){var B=this.getChildren(L);if(O++,B.length!==1)break;L=B[0].properties.cluster_id}return O},Qr.prototype._appendLeaves=function(L,O,B,G,K){for(var se=0,pe=this.getChildren(O);se<pe.length;se+=1){var j=pe[se],Q=j.properties;if(Q&&Q.cluster?K+Q.point_count<=G?K+=Q.point_count:K=this._appendLeaves(L,Q.cluster_id,B,G,K):K<G?K++:L.push(j),L.length===B)break}return K},Qr.prototype._addTileFeatures=function(L,O,B,G,K,se){for(var pe=0,j=L;pe<j.length;pe+=1){var Q=O[j[pe]],me=Q.numPoints,Fe={type:1,geometry:[[Math.round(this.options.extent*(Q.x*K-B)),Math.round(this.options.extent*(Q.y*K-G))]],tags:me?ts(Q):this.points[Q.index].properties},Ne=void 0;me?Ne=Q.id:this.options.generateId?Ne=Q.index:this.points[Q.index].id&&(Ne=this.points[Q.index].id),Ne!==void 0&&(Fe.id=Ne),se.features.push(Fe)}},Qr.prototype._limitZoom=function(L){return Math.max(this.options.minZoom,Math.min(+L,this.options.maxZoom+1))},Qr.prototype._cluster=function(L,O){for(var B=[],G=this.options,K=G.reduce,se=G.minPoints,pe=G.radius/(G.extent*Math.pow(2,O)),j=0;j<L.length;j++){var Q=L[j];if(!(Q.zoom<=O)){Q.zoom=O;for(var me=this.trees[O+1],Fe=me.within(Q.x,Q.y,pe),Ne=Q.numPoints||1,Pe=Ne,Ue=0,st=Fe;Ue<st.length;Ue+=1){var nt=me.points[st[Ue]];nt.zoom>O&&(Pe+=nt.numPoints||1)}if(Pe>=se){for(var Ie=Q.x*Ne,Je=Q.y*Ne,Xe=K&&Ne>1?this._map(Q,!0):null,Ke=(j<<5)+(O+1)+this.points.length,jt=0,Qe=Fe;jt<Qe.length;jt+=1){var tr=me.points[Qe[jt]];if(!(tr.zoom<=O)){tr.zoom=O;var Cr=tr.numPoints||1;Ie+=tr.x*Cr,Je+=tr.y*Cr,tr.parentId=Ke,K&&(Xe||(Xe=this._map(Q,!0)),K(Xe,this._map(tr)))}}Q.parentId=Ke,B.push(si(Ie/Pe,Je/Pe,Ke,Pe,Xe))}else if(B.push(Q),Pe>1)for(var Mt=0,lr=Fe;Mt<lr.length;Mt+=1){var or=me.points[lr[Mt]];or.zoom<=O||(or.zoom=O,B.push(or))}}}return B},Qr.prototype._getOriginId=function(L){return L-this.points.length>>5},Qr.prototype._getOriginZoom=function(L){return(L-this.points.length)%32},Qr.prototype._map=function(L,O){if(L.numPoints)return O?Vi({},L.properties):L.properties;var B=this.points[L.index].properties,G=this.options.map(B);return O&&G===B?Vi({},G):G},$i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$i.prototype.splitTile=function(L,O,B,G,K,se,pe){for(var j=[L,O,B,G],Q=this.options,me=Q.debug;j.length;){G=j.pop(),B=j.pop(),O=j.pop(),L=j.pop();var Fe=1<<O,Ne=$o(O,B,G),Pe=this.tiles[Ne];if(!Pe&&(me>1&&console.time("creation"),Pe=this.tiles[Ne]=As(L,O,B,G,Q),this.tileCoords.push({z:O,x:B,y:G}),me)){me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",O,B,G,Pe.numFeatures,Pe.numPoints,Pe.numSimplified),console.timeEnd("creation"));var Ue="z"+O;this.stats[Ue]=(this.stats[Ue]||0)+1,this.total++}if(Pe.source=L,K){if(O===Q.maxZoom||O===K)continue;var st=1<<K-O;if(B!==Math.floor(se/st)||G!==Math.floor(pe/st))continue}else if(O===Q.indexMaxZoom||Pe.numPoints<=Q.indexMaxPoints)continue;if(Pe.source=null,L.length!==0){me>1&&console.time("clipping");var nt,Ie,Je,Xe,Ke,jt,Qe=.5*Q.buffer/Q.extent,tr=.5-Qe,Cr=.5+Qe,Mt=1+Qe;nt=Ie=Je=Xe=null,Ke=Zi(L,Fe,B-Qe,B+Cr,0,Pe.minX,Pe.maxX,Q),jt=Zi(L,Fe,B+tr,B+Mt,0,Pe.minX,Pe.maxX,Q),L=null,Ke&&(nt=Zi(Ke,Fe,G-Qe,G+Cr,1,Pe.minY,Pe.maxY,Q),Ie=Zi(Ke,Fe,G+tr,G+Mt,1,Pe.minY,Pe.maxY,Q),Ke=null),jt&&(Je=Zi(jt,Fe,G-Qe,G+Cr,1,Pe.minY,Pe.maxY,Q),Xe=Zi(jt,Fe,G+tr,G+Mt,1,Pe.minY,Pe.maxY,Q),jt=null),me>1&&console.timeEnd("clipping"),j.push(nt||[],O+1,2*B,2*G),j.push(Ie||[],O+1,2*B,2*G+1),j.push(Je||[],O+1,2*B+1,2*G),j.push(Xe||[],O+1,2*B+1,2*G+1)}}},$i.prototype.getTile=function(L,O,B){var G=this.options,K=G.extent,se=G.debug;if(L<0||L>24)return null;var pe=1<<L,j=$o(L,O=(O%pe+pe)%pe,B);if(this.tiles[j])return Fn(this.tiles[j],K);se>1&&console.log("drilling down to z%d-%d-%d",L,O,B);for(var Q,me=L,Fe=O,Ne=B;!Q&&me>0;)me--,Fe=Math.floor(Fe/2),Ne=Math.floor(Ne/2),Q=this.tiles[$o(me,Fe,Ne)];return Q&&Q.source?(se>1&&console.log("found parent tile z%d-%d-%d",me,Fe,Ne),se>1&&console.time("drilling down"),this.splitTile(Q.source,me,Fe,Ne,L,O,B),se>1&&console.timeEnd("drilling down"),this.tiles[j]?Fn(this.tiles[j],K):null):null};var ns=function(L){function O(B,G,K,se){L.call(this,B,G,K,Tr),se&&(this.loadGeoJSON=se)}return L&&(O.__proto__=L),(O.prototype=Object.create(L&&L.prototype)).constructor=O,O.prototype.loadData=function(B,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=G,this._pendingLoadDataParams=B,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},O.prototype._loadData=function(){var B=this;if(this._pendingCallback&&this._pendingLoadDataParams){var G=this._pendingCallback,K=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var se=!!(K&&K.request&&K.request.collectResourceTiming)&&new l.RequestPerformance(K.request);this.loadGeoJSON(K,function(pe,j){if(pe||!j)return G(pe);if(typeof j!="object")return G(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."));(function Pe(Ue,st){var nt,Ie=Ue&&Ue.type;if(Ie==="FeatureCollection")for(nt=0;nt<Ue.features.length;nt++)Pe(Ue.features[nt],st);else if(Ie==="GeometryCollection")for(nt=0;nt<Ue.geometries.length;nt++)Pe(Ue.geometries[nt],st);else if(Ie==="Feature")Pe(Ue.geometry,st);else if(Ie==="Polygon")re(Ue.coordinates,st);else if(Ie==="MultiPolygon")for(nt=0;nt<Ue.coordinates.length;nt++)re(Ue.coordinates[nt],st);return Ue})(j,!0);try{if(K.filter){var Q=l.createExpression(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Q.result==="error")throw new Error(Q.value.map(function(Pe){return Pe.key+": "+Pe.message}).join(", "));var me=j.features.filter(function(Pe){return Q.value.evaluate({zoom:0},Pe)});j={type:"FeatureCollection",features:me}}B._geoJSONIndex=K.cluster?new Qr(function(Pe){var Ue=Pe.superclusterOptions,st=Pe.clusterProperties;if(!st||!Ue)return Ue;for(var nt={},Ie={},Je={accumulated:null,zoom:0},Xe={properties:null},Ke=Object.keys(st),jt=0,Qe=Ke;jt<Qe.length;jt+=1){var tr=Qe[jt],Cr=st[tr],Mt=Cr[0],lr=l.createExpression(Cr[1]),or=l.createExpression(typeof Mt=="string"?[Mt,["accumulated"],["get",tr]]:Mt);nt[tr]=lr.value,Ie[tr]=or.value}return Ue.map=function(Bn){Xe.properties=Bn;for(var dr={},en=0,xr=Ke;en<xr.length;en+=1){var It=xr[en];dr[It]=nt[It].evaluate(Je,Xe)}return dr},Ue.reduce=function(Bn,dr){Xe.properties=dr;for(var en=0,xr=Ke;en<xr.length;en+=1){var It=xr[en];Je.accumulated=Bn[It],Bn[It]=Ie[It].evaluate(Je,Xe)}},Ue}(K)).load(j.features):function(Pe,Ue){return new $i(Pe,Ue)}(j,K.geojsonVtOptions)}catch(Pe){return G(Pe)}B.loaded={};var Fe={};if(se){var Ne=se.finish();Ne&&(Fe.resourceTiming={},Fe.resourceTiming[K.source]=JSON.parse(JSON.stringify(Ne)))}G(null,Fe)})}},O.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},O.prototype.reloadTile=function(B,G){var K=this.loaded;return K&&K[B.uid]?L.prototype.reloadTile.call(this,B,G):this.loadTile(B,G)},O.prototype.loadGeoJSON=function(B,G){if(B.request)l.getJSON(B.request,G);else{if(typeof B.data!="string")return G(new Error("Input data given to '"+B.source+"' is not a valid GeoJSON object."));try{return G(null,JSON.parse(B.data))}catch{return G(new Error("Input data given to '"+B.source+"' is not a valid GeoJSON object."))}}},O.prototype.removeSource=function(B,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),G()},O.prototype.getClusterExpansionZoom=function(B,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(B.clusterId))}catch(K){G(K)}},O.prototype.getClusterChildren=function(B,G){try{G(null,this._geoJSONIndex.getChildren(B.clusterId))}catch(K){G(K)}},O.prototype.getClusterLeaves=function(B,G){try{G(null,this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset))}catch(K){G(K)}},O}(Me),Ir=function(L){var O=this;this.self=L,this.actor=new l.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Me,geojson:ns},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(B,G){if(O.workerSourceTypes[B])throw new Error('Worker source with name "'+B+'" already registered.');O.workerSourceTypes[B]=G},this.self.registerRTLTextPlugin=function(B){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=B.applyArabicShaping,l.plugin.processBidirectionalText=B.processBidirectionalText,l.plugin.processStyledBidirectionalText=B.processStyledBidirectionalText}};return Ir.prototype.setReferrer=function(L,O){this.referrer=O},Ir.prototype.setImages=function(L,O,B){for(var G in this.availableImages[L]=O,this.workerSources[L]){var K=this.workerSources[L][G];for(var se in K)K[se].availableImages=O}B()},Ir.prototype.setLayers=function(L,O,B){this.getLayerIndex(L).replace(O),B()},Ir.prototype.updateLayers=function(L,O,B){this.getLayerIndex(L).update(O.layers,O.removedIds),B()},Ir.prototype.loadTile=function(L,O,B){this.getWorkerSource(L,O.type,O.source).loadTile(O,B)},Ir.prototype.loadDEMTile=function(L,O,B){this.getDEMWorkerSource(L,O.source).loadTile(O,B)},Ir.prototype.reloadTile=function(L,O,B){this.getWorkerSource(L,O.type,O.source).reloadTile(O,B)},Ir.prototype.abortTile=function(L,O,B){this.getWorkerSource(L,O.type,O.source).abortTile(O,B)},Ir.prototype.removeTile=function(L,O,B){this.getWorkerSource(L,O.type,O.source).removeTile(O,B)},Ir.prototype.removeDEMTile=function(L,O){this.getDEMWorkerSource(L,O.source).removeTile(O)},Ir.prototype.removeSource=function(L,O,B){if(this.workerSources[L]&&this.workerSources[L][O.type]&&this.workerSources[L][O.type][O.source]){var G=this.workerSources[L][O.type][O.source];delete this.workerSources[L][O.type][O.source],G.removeSource!==void 0?G.removeSource(O,B):B()}},Ir.prototype.loadWorkerSource=function(L,O,B){try{this.self.importScripts(O.url),B()}catch(G){B(G.toString())}},Ir.prototype.syncRTLPluginState=function(L,O,B){try{l.plugin.setState(O);var G=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&G!=null){this.self.importScripts(G);var K=l.plugin.isParsed();B(K?void 0:new Error("RTL Text Plugin failed to import scripts from "+G),K)}}catch(se){B(se.toString())}},Ir.prototype.getAvailableImages=function(L){var O=this.availableImages[L];return O||(O=[]),O},Ir.prototype.getLayerIndex=function(L){var O=this.layerIndexes[L];return O||(O=this.layerIndexes[L]=new q),O},Ir.prototype.getWorkerSource=function(L,O,B){var G=this;return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][O]||(this.workerSources[L][O]={}),this.workerSources[L][O][B]||(this.workerSources[L][O][B]=new this.workerSourceTypes[O]({send:function(K,se,pe){G.actor.send(K,se,pe,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][O][B]},Ir.prototype.getDEMWorkerSource=function(L,O){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][O]||(this.demWorkerSources[L][O]=new ue),this.demWorkerSources[L][O]},Ir.prototype.enforceCacheSizeLimit=function(L,O){l.enforceCacheSizeLimit(O)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Ir(self)),Ir}),S(["./shared"],function(l){var k=l.createCommonjsModule(function(o){function s(m){return!a(m)}function a(m){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var x,E,I=new Blob([""],{type:"text/javascript"}),D=URL.createObjectURL(I);try{E=new Worker(D),x=!0}catch{x=!1}return E&&E.terminate(),URL.revokeObjectURL(D),x}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var x=document.createElement("canvas");x.width=x.height=1;var E=x.getContext("2d");if(!E)return!1;var I=E.getImageData(0,0,1,1);return I&&I.width===x.width}()?(p[g=m&&m.failIfMajorPerformanceCaveat]===void 0&&(p[g]=function(x){var E=function(D){var N=document.createElement("canvas"),V=Object.create(s.webGLContextAttributes);return V.failIfMajorPerformanceCaveat=D,N.probablySupportsContext?N.probablySupportsContext("webgl",V)||N.probablySupportsContext("experimental-webgl",V):N.supportsContext?N.supportsContext("webgl",V)||N.supportsContext("experimental-webgl",V):N.getContext("webgl",V)||N.getContext("experimental-webgl",V)}(x);if(!E)return!1;var I=E.createShader(E.VERTEX_SHADER);return!(!I||E.isContextLost())&&(E.shaderSource(I,"void main() {}"),E.compileShader(I),E.getShaderParameter(I,E.COMPILE_STATUS)===!0)}(g)),p[g]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var g}o.exports?o.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=a);var p={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),M={create:function(o,s,a){var p=l.window.document.createElement(o);return s!==void 0&&(p.className=s),a&&a.appendChild(p),p},createNS:function(o,s){return l.window.document.createElementNS(o,s)}},q=l.window.document&&l.window.document.documentElement.style;function ee(o){if(!q)return o[0];for(var s=0;s<o.length;s++)if(o[s]in q)return o[s];return o[0]}var ke,X=ee(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);M.disableDrag=function(){q&&X&&(ke=q[X],q[X]="none")},M.enableDrag=function(){q&&X&&(q[X]=ke)};var Se=ee(["transform","WebkitTransform"]);M.setTransform=function(o,s){o.style[Se]=s};var Me=!1;try{var Le=Object.defineProperty({},"passive",{get:function(){Me=!0}});l.window.addEventListener("test",Le,Le),l.window.removeEventListener("test",Le,Le)}catch{Me=!1}M.addEventListener=function(o,s,a,p){p===void 0&&(p={}),o.addEventListener(s,a,"passive"in p&&Me?p:p.capture)},M.removeEventListener=function(o,s,a,p){p===void 0&&(p={}),o.removeEventListener(s,a,"passive"in p&&Me?p:p.capture)};var ue=function(o){o.preventDefault(),o.stopPropagation(),l.window.removeEventListener("click",ue,!0)};function re(o){var s=o.userImage;return!!(s&&s.render&&s.render())&&(o.data.replace(new Uint8Array(s.data.buffer)),!0)}M.suppressClick=function(){l.window.addEventListener("click",ue,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",ue,!0)},0)},M.mousePos=function(o,s){var a=o.getBoundingClientRect();return new l.Point(s.clientX-a.left-o.clientLeft,s.clientY-a.top-o.clientTop)},M.touchPos=function(o,s){for(var a=o.getBoundingClientRect(),p=[],m=0;m<s.length;m++)p.push(new l.Point(s[m].clientX-a.left-o.clientLeft,s[m].clientY-a.top-o.clientTop));return p},M.mouseButton=function(o){return l.window.InstallTrigger!==void 0&&o.button===2&&o.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:o.button},M.remove=function(o){o.parentNode&&o.parentNode.removeChild(o)};var ae=function(o){function s(){o.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var p=0,m=this.requestors;p<m.length;p+=1){var g=m[p];this._notify(g.ids,g.callback)}this.requestors=[]}},s.prototype.getImage=function(a){return this.images[a]},s.prototype.addImage=function(a,p){this._validate(a,p)&&(this.images[a]=p)},s.prototype._validate=function(a,p){var m=!0;return this._validateStretch(p.stretchX,p.data&&p.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(p.stretchY,p.data&&p.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),m=!1),this._validateContent(p.content,p)||(this.fire(new l.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),m=!1),m},s.prototype._validateStretch=function(a,p){if(!a)return!0;for(var m=0,g=0,x=a;g<x.length;g+=1){var E=x[g];if(E[0]<m||E[1]<E[0]||p<E[1])return!1;m=E[1]}return!0},s.prototype._validateContent=function(a,p){return!(a&&(a.length!==4||a[0]<0||p.data.width<a[0]||a[1]<0||p.data.height<a[1]||a[2]<0||p.data.width<a[2]||a[3]<0||p.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},s.prototype.updateImage=function(a,p){p.version=this.images[a].version+1,this.images[a]=p,this.updatedImages[a]=!0},s.prototype.removeImage=function(a){var p=this.images[a];delete this.images[a],delete this.patterns[a],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(a,p){var m=!0;if(!this.isLoaded())for(var g=0,x=a;g<x.length;g+=1)this.images[x[g]]||(m=!1);this.isLoaded()||m?this._notify(a,p):this.requestors.push({ids:a,callback:p})},s.prototype._notify=function(a,p){for(var m={},g=0,x=a;g<x.length;g+=1){var E=x[g];this.images[E]||this.fire(new l.Event("styleimagemissing",{id:E}));var I=this.images[E];I?m[E]={data:I.data.clone(),pixelRatio:I.pixelRatio,sdf:I.sdf,version:I.version,stretchX:I.stretchX,stretchY:I.stretchY,content:I.content,hasRenderCallback:Boolean(I.userImage&&I.userImage.render)}:l.warnOnce('Image "'+E+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}p(null,m)},s.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},s.prototype.getPattern=function(a){var p=this.patterns[a],m=this.getImage(a);if(!m)return null;if(p&&p.position.version===m.version)return p.position;if(p)p.position.version=m.version;else{var g={w:m.data.width+2,h:m.data.height+2,x:0,y:0},x=new l.ImagePosition(g,m);this.patterns[a]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[a].position},s.prototype.bind=function(a){var p=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(a,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var a=[];for(var p in this.patterns)a.push(this.patterns[p].bin);var m=l.potpack(a),g=m.w,x=m.h,E=this.atlasImage;for(var I in E.resize({width:g||1,height:x||1}),this.patterns){var D=this.patterns[I].bin,N=D.x+1,V=D.y+1,Z=this.images[I].data,J=Z.width,Y=Z.height;l.RGBAImage.copy(Z,E,{x:0,y:0},{x:N,y:V},{width:J,height:Y}),l.RGBAImage.copy(Z,E,{x:0,y:Y-1},{x:N,y:V-1},{width:J,height:1}),l.RGBAImage.copy(Z,E,{x:0,y:0},{x:N,y:V+Y},{width:J,height:1}),l.RGBAImage.copy(Z,E,{x:J-1,y:0},{x:N-1,y:V},{width:1,height:Y}),l.RGBAImage.copy(Z,E,{x:0,y:0},{x:N+J,y:V},{width:1,height:Y})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(a){for(var p=0,m=a;p<m.length;p+=1){var g=m[p];if(!this.callbackDispatchedThisFrame[g]){this.callbackDispatchedThisFrame[g]=!0;var x=this.images[g];re(x)&&this.updateImage(g,x)}}},s}(l.Evented),be=We,De=We,mt=1e20;function We(o,s,a,p,m,g){this.fontSize=o||24,this.buffer=s===void 0?3:s,this.cutoff=p||.25,this.fontFamily=m||"sans-serif",this.fontWeight=g||"normal",this.radius=a||8;var x=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=x,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.d=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Int16Array(x),this.middle=Math.round(x/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Tt(o,s,a,p,m,g,x){for(var E=0;E<s;E++){for(var I=0;I<a;I++)p[I]=o[I*s+E];for(Ot(p,m,g,x,a),I=0;I<a;I++)o[I*s+E]=m[I]}for(I=0;I<a;I++){for(E=0;E<s;E++)p[E]=o[I*s+E];for(Ot(p,m,g,x,s),E=0;E<s;E++)o[I*s+E]=Math.sqrt(m[E])}}function Ot(o,s,a,p,m){a[0]=0,p[0]=-mt,p[1]=+mt;for(var g=1,x=0;g<m;g++){for(var E=(o[g]+g*g-(o[a[x]]+a[x]*a[x]))/(2*g-2*a[x]);E<=p[x];)x--,E=(o[g]+g*g-(o[a[x]]+a[x]*a[x]))/(2*g-2*a[x]);a[++x]=g,p[x]=E,p[x+1]=+mt}for(g=0,x=0;g<m;g++){for(;p[x+1]<g;)x++;s[g]=(g-a[x])*(g-a[x])+o[a[x]]}}We.prototype.draw=function(o){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(o,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),p=0;p<this.size*this.size;p++){var m=s.data[4*p+3]/255;this.gridOuter[p]=m===1?0:m===0?mt:Math.pow(Math.max(0,.5-m),2),this.gridInner[p]=m===1?mt:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(Tt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Tt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),p=0;p<this.size*this.size;p++)a[p]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[p]-this.gridInner[p])/this.radius+this.cutoff))));return a},be.default=De;var pt=function(o,s){this.requestManager=o,this.localIdeographFontFamily=s,this.entries={}};pt.prototype.setURL=function(o){this.url=o},pt.prototype.getGlyphs=function(o,s){var a=this,p=[];for(var m in o)for(var g=0,x=o[m];g<x.length;g+=1)p.push({stack:m,id:x[g]});l.asyncAll(p,function(E,I){var D=E.stack,N=E.id,V=a.entries[D];V||(V=a.entries[D]={glyphs:{},requests:{},ranges:{}});var Z=V.glyphs[N];if(Z===void 0){if(Z=a._tinySDF(V,D,N))return V.glyphs[N]=Z,void I(null,{stack:D,id:N,glyph:Z});var J=Math.floor(N/256);if(256*J>65535)I(new Error("glyphs > 65535 not supported"));else if(V.ranges[J])I(null,{stack:D,id:N,glyph:Z});else{var Y=V.requests[J];Y||(Y=V.requests[J]=[],pt.loadGlyphRange(D,J,a.url,a.requestManager,function(ie,W){if(W){for(var ne in W)a._doesCharSupportLocalGlyph(+ne)||(V.glyphs[+ne]=W[+ne]);V.ranges[J]=!0}for(var ce=0,ye=Y;ce<ye.length;ce+=1)(0,ye[ce])(ie,W);delete V.requests[J]})),Y.push(function(ie,W){ie?I(ie):W&&I(null,{stack:D,id:N,glyph:W[N]||null})})}}else I(null,{stack:D,id:N,glyph:Z})},function(E,I){if(E)s(E);else if(I){for(var D={},N=0,V=I;N<V.length;N+=1){var Z=V[N],J=Z.stack,Y=Z.id,ie=Z.glyph;(D[J]||(D[J]={}))[Y]=ie&&{id:ie.id,bitmap:ie.bitmap.clone(),metrics:ie.metrics}}s(null,D)}})},pt.prototype._doesCharSupportLocalGlyph=function(o){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](o)||l.isChar["Hangul Syllables"](o)||l.isChar.Hiragana(o)||l.isChar.Katakana(o))},pt.prototype._tinySDF=function(o,s,a){var p=this.localIdeographFontFamily;if(p&&this._doesCharSupportLocalGlyph(a)){var m=o.tinySDF;if(!m){var g="400";/bold/i.test(s)?g="900":/medium/i.test(s)?g="500":/light/i.test(s)&&(g="200"),m=o.tinySDF=new pt.TinySDF(24,3,8,.25,p,g)}return{id:a,bitmap:new l.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},pt.loadGlyphRange=function(o,s,a,p,m){var g=256*s,x=g+255,E=p.transformRequest(p.normalizeGlyphsURL(a).replace("{fontstack}",o).replace("{range}",g+"-"+x),l.ResourceType.Glyphs);l.getArrayBuffer(E,function(I,D){if(I)m(I);else if(D){for(var N={},V=0,Z=l.parseGlyphPBF(D);V<Z.length;V+=1){var J=Z[V];N[J.id]=J}m(null,N)}})},pt.TinySDF=be;var er=function(){this.specification=l.styleSpec.light.position};er.prototype.possiblyEvaluate=function(o,s){return l.sphericalToCartesian(o.expression.evaluate(s))},er.prototype.interpolate=function(o,s,a){return{x:l.number(o.x,s.x,a),y:l.number(o.y,s.y,a),z:l.number(o.z,s.z,a)}};var wr=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new er,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),Fr=function(o){function s(a){o.call(this),this._transitionable=new l.Transitionable(wr),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(a,p){if(p===void 0&&(p={}),!this._validate(l.validateLight,a,p))for(var m in a){var g=a[m];l.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-"-transition".length),g):this._transitionable.setValue(m,g)}},s.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},s.prototype._validate=function(a,p,m){return(!m||m.validate!==!1)&&l.emitValidationErrors(this,a.call(l.validateStyle,l.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},s}(l.Evented),Ut=function(o,s){this.width=o,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ut.prototype.getDash=function(o,s){var a=o.join(",")+String(s);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(o,s)),this.dashEntry[a]},Ut.prototype.getDashRanges=function(o,s,a){var p=[],m=o.length%2==1?-o[o.length-1]*a:0,g=o[0]*a,x=!0;p.push({left:m,right:g,isDash:x,zeroLength:o[0]===0});for(var E=o[0],I=1;I<o.length;I++){var D=o[I];p.push({left:m=E*a,right:g=(E+=D)*a,isDash:x=!x,zeroLength:D===0})}return p},Ut.prototype.addRoundDash=function(o,s,a){for(var p=s/2,m=-a;m<=a;m++)for(var g=this.width*(this.nextRow+a+m),x=0,E=o[x],I=0;I<this.width;I++){I/E.right>1&&(E=o[++x]);var D=Math.abs(I-E.left),N=Math.abs(I-E.right),V=Math.min(D,N),Z=void 0,J=m/a*(p+1);if(E.isDash){var Y=p-Math.abs(J);Z=Math.sqrt(V*V+Y*Y)}else Z=p-Math.sqrt(V*V+J*J);this.data[g+I]=Math.max(0,Math.min(255,Z+128))}},Ut.prototype.addRegularDash=function(o){for(var s=o.length-1;s>=0;--s){var a=o[s],p=o[s+1];a.zeroLength?o.splice(s,1):p&&p.isDash===a.isDash&&(p.left=a.left,o.splice(s,1))}var m=o[0],g=o[o.length-1];m.isDash===g.isDash&&(m.left=g.left-this.width,g.right=m.right+this.width);for(var x=this.width*this.nextRow,E=0,I=o[E],D=0;D<this.width;D++){D/I.right>1&&(I=o[++E]);var N=Math.abs(D-I.left),V=Math.abs(D-I.right),Z=Math.min(N,V);this.data[x+D]=Math.max(0,Math.min(255,(I.isDash?Z:-Z)+128))}},Ut.prototype.addDash=function(o,s){var a=s?7:0,p=2*a+1;if(this.nextRow+p>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var m=0,g=0;g<o.length;g++)m+=o[g];if(m!==0){var x=this.width/m,E=this.getDashRanges(o,this.width,x);s?this.addRoundDash(E,x,a):this.addRegularDash(E)}var I={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:m};return this.nextRow+=p,this.dirty=!0,I},Ut.prototype.bind=function(o){var s=o.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var ir=function o(s,a){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var p=this.workerPool.acquire(this.id),m=0;m<p.length;m++){var g=new o.Actor(p[m],a,this.id);g.name="Worker "+m,this.actors.push(g)}};function qr(o,s,a){var p=function(m,g){if(m)return a(m);if(g){var x=l.pick(l.extend(g,o),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);g.vector_layers&&(x.vectorLayers=g.vector_layers,x.vectorLayerIds=x.vectorLayers.map(function(E){return E.id})),x.tiles=s.canonicalizeTileset(x,o.url),a(null,x)}};return o.url?l.getJSON(s.transformRequest(s.normalizeSourceURL(o.url),l.ResourceType.Source),p):l.browser.frame(function(){return p(null,o)})}ir.prototype.broadcast=function(o,s,a){l.asyncAll(this.actors,function(p,m){p.send(o,s,m)},a=a||function(){})},ir.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},ir.prototype.remove=function(){this.actors.forEach(function(o){o.remove()}),this.actors=[],this.workerPool.release(this.id)},ir.Actor=l.Actor;var zr=function(o,s,a){this.bounds=l.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=s||0,this.maxzoom=a||24};zr.prototype.validateBounds=function(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]},zr.prototype.contains=function(o){var s=Math.pow(2,o.z),a=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*s),p=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*s),m=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*s),g=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*s);return o.x>=a&&o.x<m&&o.y>=p&&o.y<g};var ri=function(o){function s(a,p,m,g){if(o.call(this),this.id=a,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(p,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qr(this._options,this.map._requestManager,function(p,m){a._tileJSONRequest=null,a._loaded=!0,p?a.fire(new l.ErrorEvent(p)):m&&(l.extend(a,m),m.bounds&&(a.tileBounds=new zr(m.bounds,a.minzoom,a.maxzoom)),l.postTurnstileEvent(m.tiles,a.map._requestManager._customAccessToken),l.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(a){var p=this;return this.setSourceProperty(function(){p._options.tiles=a}),this},s.prototype.setUrl=function(a){var p=this;return this.setSourceProperty(function(){p.url=a,p._options.url=a}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return l.extend({},this._options)},s.prototype.loadTile=function(a,p){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(m,l.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(E,I){return delete a.request,a.aborted?p(null):E&&E.status!==404?p(E):(I&&I.resourceTiming&&(a.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&a.setExpiryData(I),a.loadVectorData(I,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),p(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=p:a.request=a.actor.send("reloadTile",g,x.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",g,x.bind(this)))},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(l.Evented),kn=function(o){function s(a,p,m,g){o.call(this),this.id=a,this.dispatcher=m,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},p),l.extend(this,l.pick(p,["url","scheme","tileSize"]))}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qr(this._options,this.map._requestManager,function(p,m){a._tileJSONRequest=null,a._loaded=!0,p?a.fire(new l.ErrorEvent(p)):m&&(l.extend(a,m),m.bounds&&(a.tileBounds=new zr(m.bounds,a.minzoom,a.maxzoom)),l.postTurnstileEvent(m.tiles),l.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return l.extend({},this._options)},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.loadTile=function(a,p){var m=this,g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=l.getImage(this.map._requestManager.transformRequest(g,l.ResourceType.Tile),function(x,E){if(delete a.request,a.aborted)a.state="unloaded",p(null);else if(x)a.state="errored",p(x);else if(E){m.map._refreshExpiredTiles&&a.setExpiryData(E),delete E.cacheControl,delete E.expires;var I=m.map.painter.context,D=I.gl;a.texture=m.map.painter.getTileTexture(E.width),a.texture?a.texture.update(E,{useMipmap:!0}):(a.texture=new l.Texture(I,E,D.RGBA,{useMipmap:!0}),a.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&D.texParameterf(D.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),a.state="loaded",l.cacheEntryPossiblyAdded(m.dispatcher),p(null)}})},s.prototype.abortTile=function(a,p){a.request&&(a.request.cancel(),delete a.request),p()},s.prototype.unloadTile=function(a,p){a.texture&&this.map.painter.saveTileTexture(a.texture),p()},s.prototype.hasTransition=function(){return!1},s}(l.Evented),ni=function(o){function s(a,p,m,g){o.call(this,a,p,m,g),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox"}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(a,p){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function g(x,E){x&&(a.state="errored",p(x)),E&&(a.dem=E,a.needsHillshadePrepare=!0,a.state="loaded",p(null))}a.request=l.getImage(this.map._requestManager.transformRequest(m,l.ResourceType.Tile),function(x,E){if(delete a.request,a.aborted)a.state="unloaded",p(null);else if(x)a.state="errored",p(x);else if(E){this.map._refreshExpiredTiles&&a.setExpiryData(E),delete E.cacheControl,delete E.expires;var I=l.window.ImageBitmap&&E instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?E:l.browser.getImageData(E,1),D={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:I,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",D,g.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},s.prototype._getNeighboringTiles=function(a){var p=a.canonical,m=Math.pow(2,p.z),g=(p.x-1+m)%m,x=p.x===0?a.wrap-1:a.wrap,E=(p.x+1+m)%m,I=p.x+1===m?a.wrap+1:a.wrap,D={};return D[new l.OverscaledTileID(a.overscaledZ,x,p.z,g,p.y).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,I,p.z,E,p.y).key]={backfilled:!1},p.y>0&&(D[new l.OverscaledTileID(a.overscaledZ,x,p.z,g,p.y-1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,a.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,I,p.z,E,p.y-1).key]={backfilled:!1}),p.y+1<m&&(D[new l.OverscaledTileID(a.overscaledZ,x,p.z,g,p.y+1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,a.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,I,p.z,E,p.y+1).key]={backfilled:!1}),D},s.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},s}(kn),Vt=function(o){function s(a,p,m,g){o.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(g),this._data=p.data,this._options=l.extend({},p),this._collectResourceTiming=p.collectResourceTiming,this._resourceTiming=[],p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;var x=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*x,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*x,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?Math.min(p.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:l.EXTENT,radius:(p.clusterRadius||50)*x,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(p){if(p)a.fire(new l.ErrorEvent(p));else{var m={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(m.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new l.Event("data",m))}})},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setData=function(a){var p=this;return this._data=a,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)p.fire(new l.ErrorEvent(m));else{var g={dataType:"source",sourceDataType:"content"};p._collectResourceTiming&&p._resourceTiming&&p._resourceTiming.length>0&&(g.resourceTiming=p._resourceTiming,p._resourceTiming=[]),p.fire(new l.Event("data",g))}}),this},s.prototype.getClusterExpansionZoom=function(a,p){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},p),this},s.prototype.getClusterChildren=function(a,p){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},p),this},s.prototype.getClusterLeaves=function(a,p,m,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:p,offset:m},g),this},s.prototype._updateWorkerData=function(a){var p=this;this._loaded=!1;var m=l.extend({},this.workerOptions),g=this._data;typeof g=="string"?(m.request=this.map._requestManager.transformRequest(l.browser.resolveURL(g),l.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(g),this.actor.send(this.type+".loadData",m,function(x,E){p._removed||E&&E.abandoned||(p._loaded=!0,E&&E.resourceTiming&&E.resourceTiming[p.id]&&(p._resourceTiming=E.resourceTiming[p.id].slice(0)),p.actor.send(p.type+".coalesce",{source:m.source},null),a(x))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(a,p){var m=this,g=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(g,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(x,E){return delete a.request,a.unloadVectorData(),a.aborted?p(null):x?p(x):(a.loadVectorData(E,m.map.painter,g==="reloadTile"),p(null))})},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},s.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(l.Evented),Ye=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),At=function(o){function s(a,p,m,g){o.call(this),this.id=a,this.dispatcher=m,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=p}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(a,p){var m=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(g,x){m._loaded=!0,g?m.fire(new l.ErrorEvent(g)):x&&(m.image=x,a&&(m.coordinates=a),p&&p(),m._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(a){var p=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){p.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setCoordinates=function(a){var p=this;this.coordinates=a;var m=a.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(x){for(var E=1/0,I=1/0,D=-1/0,N=-1/0,V=0,Z=x;V<Z.length;V+=1){var J=Z[V];E=Math.min(E,J.x),I=Math.min(I,J.y),D=Math.max(D,J.x),N=Math.max(N,J.y)}var Y=Math.max(D-E,N-I),ie=Math.max(0,Math.floor(-Math.log(Y)/Math.LN2)),W=Math.pow(2,ie);return new l.CanonicalTileID(ie,Math.floor((E+D)/2*W),Math.floor((I+N)/2*W))}(m),this.minzoom=this.maxzoom=this.tileID.z;var g=m.map(function(x){return p.tileID.getTilePoint(x)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(g[2].x,g[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,p=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(a,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[m];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},s.prototype.loadTile=function(a,p){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},p(null)):(a.state="errored",p(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(l.Evented),$t=function(o){function s(a,p,m,g){o.call(this,a,p,m,g),this.roundZoom=!0,this.type="video",this.options=p}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1;var p=this.options;this.urls=[];for(var m=0,g=p.urls;m<g.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(g[m],l.ResourceType.Source).url);l.getVideo(this.urls,function(x,E){a._loaded=!0,x?a.fire(new l.ErrorEvent(x)):E&&(a.video=E,a.video.loop=!0,a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(a){if(this.video){var p=this.video.seekable;a<p.start(0)||a>p.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+p.start(0)+" and "+p.end(0)+"-second mark."))):this.video.currentTime=a}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,p=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(a,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[m];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(At),Lr=function(o){function s(a,p,m,g){o.call(this,a,p,m,g),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(function(x){return!Array.isArray(x)||x.length!==2||x.some(function(E){return typeof E!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var p=this.map.painter.context,m=p.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(p,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var a=0,p=[this.canvas.width,this.canvas.height];a<p.length;a+=1){var m=p[a];if(isNaN(m)||m<=0)return!0}return!1},s}(At),Zr={vector:ri,raster:kn,"raster-dem":ni,geojson:Vt,video:$t,image:At,canvas:Lr};function fo(o,s){var a=l.identity([]);return l.translate(a,a,[1,1,0]),l.scale(a,a,[.5*o.width,.5*o.height,1]),l.multiply(a,a,o.calculatePosMatrix(s.toUnwrapped()))}function Qr(o,s,a,p,m,g){var x=function(ie,W,ne){if(ie)for(var ce=0,ye=ie;ce<ye.length;ce+=1){var Te=W[ye[ce]];if(Te&&Te.source===ne&&Te.type==="fill-extrusion")return!0}else for(var we in W){var Ae=W[we];if(Ae.source===ne&&Ae.type==="fill-extrusion")return!0}return!1}(m&&m.layers,s,o.id),E=g.maxPitchScaleFactor(),I=o.tilesIn(p,E,x);I.sort(si);for(var D=[],N=0,V=I;N<V.length;N+=1){var Z=V[N];D.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(s,a,o._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,m,g,E,fo(o.transform,Z.tileID))})}var J=function(ie){for(var W={},ne={},ce=0,ye=ie;ce<ye.length;ce+=1){var Te=ye[ce],we=Te.queryResults,Ae=Te.wrappedTileID,Be=ne[Ae]=ne[Ae]||{};for(var Ge in we)for(var qe=we[Ge],ot=Be[Ge]=Be[Ge]||{},xt=W[Ge]=W[Ge]||[],Ct=0,Et=qe;Ct<Et.length;Ct+=1){var hr=Et[Ct];ot[hr.featureIndex]||(ot[hr.featureIndex]=!0,xt.push(hr))}}return W}(D);for(var Y in J)J[Y].forEach(function(ie){var W=ie.feature,ne=o.getFeatureState(W.layer["source-layer"],W.id);W.source=W.layer.source,W.layer["source-layer"]&&(W.sourceLayer=W.layer["source-layer"]),W.state=ne});return J}function si(o,s){var a=o.tileID,p=s.tileID;return a.overscaledZ-p.overscaledZ||a.canonical.y-p.canonical.y||a.wrap-p.wrap||a.canonical.x-p.canonical.x}var sr=function(o,s){this.max=o,this.onRemove=s,this.reset()};sr.prototype.reset=function(){for(var o in this.data)for(var s=0,a=this.data[o];s<a.length;s+=1){var p=a[s];p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value)}return this.data={},this.order=[],this},sr.prototype.add=function(o,s,a){var p=this,m=o.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var g={value:s,timeout:void 0};if(a!==void 0&&(g.timeout=setTimeout(function(){p.remove(o,g)},a)),this.data[m].push(g),this.order.push(m),this.order.length>this.max){var x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this},sr.prototype.has=function(o){return o.wrapped().key in this.data},sr.prototype.getAndRemove=function(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null},sr.prototype._getAndRemoveByKey=function(o){var s=this.data[o].shift();return s.timeout&&clearTimeout(s.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),s.value},sr.prototype.getByKey=function(o){var s=this.data[o];return s?s[0].value:null},sr.prototype.get=function(o){return this.has(o)?this.data[o.wrapped().key][0].value:null},sr.prototype.remove=function(o,s){if(!this.has(o))return this;var a=o.wrapped().key,p=s===void 0?0:this.data[a].indexOf(s),m=this.data[a][p];return this.data[a].splice(p,1),m.timeout&&clearTimeout(m.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(m.value),this.order.splice(this.order.indexOf(a),1),this},sr.prototype.setMaxSize=function(o){for(this.max=o;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},sr.prototype.filter=function(o){var s=[];for(var a in this.data)for(var p=0,m=this.data[a];p<m.length;p+=1){var g=m[p];o(g.value)||s.push(g)}for(var x=0,E=s;x<E.length;x+=1){var I=E[x];this.remove(I.value.tileID,I)}};var Io=function(o,s,a){this.context=o;var p=o.gl;this.buffer=p.createBuffer(),this.dynamicDraw=Boolean(a),this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Io.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Io.prototype.updateData=function(o){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)},Io.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ts={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Wn=function(o,s,a,p){this.length=s.length,this.attributes=a,this.itemSize=s.bytesPerElement,this.dynamicDraw=p,this.context=o;var m=o.gl;this.buffer=m.createBuffer(),o.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Wn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Wn.prototype.updateData=function(o){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,o.arrayBuffer)},Wn.prototype.enableAttributes=function(o,s){for(var a=0;a<this.attributes.length;a++){var p=s.attributes[this.attributes[a].name];p!==void 0&&o.enableVertexAttribArray(p)}},Wn.prototype.setVertexAttribPointers=function(o,s,a){for(var p=0;p<this.attributes.length;p++){var m=this.attributes[p],g=s.attributes[m.name];g!==void 0&&o.vertexAttribPointer(g,m.components,o[ts[m.type]],!1,this.itemSize,m.offset+this.itemSize*(a||0))}},Wn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Kt=function(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Kt.prototype.get=function(){return this.current},Kt.prototype.set=function(o){},Kt.prototype.getDefault=function(){return this.default},Kt.prototype.setDefault=function(){this.set(this.default)};var Vi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return l.Color.transparent},s.prototype.set=function(a){var p=this.current;(a.r!==p.r||a.g!==p.g||a.b!==p.b||a.a!==p.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(Kt),nn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},s}(Kt),An=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},s}(Kt),Wu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||a[3]!==p[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(Kt),qi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},s}(Kt),Ts=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},s}(Kt),ln=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(a){var p=this.current;(a.func!==p.func||a.ref!==p.ref||a.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},s}(Kt),Ma=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},s.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},s}(Kt),ko=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=a,this.dirty=!1}},s}(Kt),Ti=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},s}(Kt),mi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=a,this.dirty=!1}},s}(Kt),ca=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},s}(Kt),Zi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.BLEND):p.disable(p.BLEND),this.current=a,this.dirty=!1}},s}(Kt),Is=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},s.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},s}(Kt),rs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return l.Color.transparent},s.prototype.set=function(a){var p=this.current;(a.r!==p.r||a.g!==p.g||a.b!==p.b||a.a!==p.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(Kt),za=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},s}(Kt),Mn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=a,this.dirty=!1}},s}(Kt),Gi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},s}(Kt),Wi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},s}(Kt),$n=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},s}(Kt),ks=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},s}(Kt),Ao=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},s.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||a[3]!==p[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(Kt),Fn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},s}(Kt),Ht=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Kt),As=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindTexture(p.TEXTURE_2D,a),this.current=a,this.dirty=!1}},s}(Kt),ou=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},s}(Kt),La=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){var p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},s}(Kt),$i=function(o){function s(a){o.call(this,a),this.vao=a.extVertexArrayObject}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},s}(Kt),$o=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},s}(Kt),Tr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},s}(Kt),ns=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},s}(Kt),Ir=function(o){function s(a,p){o.call(this,a),this.context=a,this.parent=p}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Kt),L=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},s}(Ir),O=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Ir),B=function(o,s,a,p){this.context=o,this.width=s,this.height=a;var m=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new L(o,m),p&&(this.depthAttachment=new O(o,m))};B.prototype.destroy=function(){var o=this.context.gl,s=this.colorAttachment.get();if(s&&o.deleteTexture(s),this.depthAttachment){var a=this.depthAttachment.get();a&&o.deleteRenderbuffer(a)}o.deleteFramebuffer(this.framebuffer)};var G=function(o,s,a){this.func=o,this.mask=s,this.range=a};G.ReadOnly=!1,G.ReadWrite=!0,G.disabled=new G(519,G.ReadOnly,[0,1]);var K=function(o,s,a,p,m,g){this.test=o,this.ref=s,this.mask=a,this.fail=p,this.depthFail=m,this.pass=g};K.disabled=new K({func:519,mask:0},0,0,7680,7680,7680);var se=function(o,s,a){this.blendFunction=o,this.blendColor=s,this.mask=a};se.disabled=new se(se.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),se.unblended=new se(se.Replace,l.Color.transparent,[!0,!0,!0,!0]),se.alphaBlended=new se([1,771],l.Color.transparent,[!0,!0,!0,!0]);var pe=function(o,s,a){this.enable=o,this.mode=s,this.frontFace=a};pe.disabled=new pe(!1,1029,2305),pe.backCCW=new pe(!0,1029,2305);var j=function(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Vi(this),this.clearDepth=new nn(this),this.clearStencil=new An(this),this.colorMask=new Wu(this),this.depthMask=new qi(this),this.stencilMask=new Ts(this),this.stencilFunc=new ln(this),this.stencilOp=new Ma(this),this.stencilTest=new ko(this),this.depthRange=new Ti(this),this.depthTest=new mi(this),this.depthFunc=new ca(this),this.blend=new Zi(this),this.blendFunc=new Is(this),this.blendColor=new rs(this),this.blendEquation=new za(this),this.cullFace=new Mn(this),this.cullFaceSide=new Gi(this),this.frontFace=new Wi(this),this.program=new $n(this),this.activeTexture=new ks(this),this.viewport=new Ao(this),this.bindFramebuffer=new Fn(this),this.bindRenderbuffer=new Ht(this),this.bindTexture=new As(this),this.bindVertexBuffer=new ou(this),this.bindElementBuffer=new La(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new $i(this),this.pixelStoreUnpack=new $o(this),this.pixelStoreUnpackPremultiplyAlpha=new Tr(this),this.pixelStoreUnpackFlipY=new ns(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)};j.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},j.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},j.prototype.createIndexBuffer=function(o,s){return new Io(this,o,s)},j.prototype.createVertexBuffer=function(o,s,a){return new Wn(this,o,s,a)},j.prototype.createRenderbuffer=function(o,s,a){var p=this.gl,m=p.createRenderbuffer();return this.bindRenderbuffer.set(m),p.renderbufferStorage(p.RENDERBUFFER,o,s,a),this.bindRenderbuffer.set(null),m},j.prototype.createFramebuffer=function(o,s,a){return new B(this,o,s,a)},j.prototype.clear=function(o){var s=o.color,a=o.depth,p=this.gl,m=0;s&&(m|=p.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(m|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),p.clear(m)},j.prototype.setCullFace=function(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))},j.prototype.setDepthMode=function(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)},j.prototype.setStencilMode=function(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)},j.prototype.setColorMode=function(o){l.deepEqual(o.blendFunction,se.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)},j.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Q=function(o){function s(a,p,m){var g=this;o.call(this),this.id=a,this.dispatcher=m,this.on("data",function(x){x.dataType==="source"&&x.sourceDataType==="metadata"&&(g._sourceLoaded=!0),g._sourceLoaded&&!g._paused&&x.dataType==="source"&&x.sourceDataType==="content"&&(g.reload(),g.transform&&g.update(g.transform))}),this.on("error",function(){g._sourceErrored=!0}),this._source=function(x,E,I,D){var N=new Zr[E.type](x,E,I,D);if(N.id!==x)throw new Error("Expected Source id to be "+x+" instead of "+N.id);return l.bindAll(["load","abort","unload","serialize","prepare"],N),N}(a,p,m,this),this._tiles={},this._cache=new sr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},s.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var p=this._tiles[a];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(a,p){return this._source.loadTile(a,p)},s.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},s.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(a){for(var p in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[p];m.upload(a),m.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return l.values(this._tiles).map(function(a){return a.tileID}).sort(me).map(function(a){return a.key})},s.prototype.getRenderableIds=function(a){var p=this,m=[];for(var g in this._tiles)this._isIdRenderable(g,a)&&m.push(this._tiles[g]);return a?m.sort(function(x,E){var I=x.tileID,D=E.tileID,N=new l.Point(I.canonical.x,I.canonical.y)._rotate(p.transform.angle),V=new l.Point(D.canonical.x,D.canonical.y)._rotate(p.transform.angle);return I.overscaledZ-D.overscaledZ||V.y-N.y||V.x-N.x}).map(function(x){return x.tileID.key}):m.map(function(x){return x.tileID}).sort(me).map(function(x){return x.key})},s.prototype.hasRenderableParent=function(a){var p=this.findLoadedParent(a,0);return!!p&&this._isIdRenderable(p.tileID.key)},s.prototype._isIdRenderable=function(a,p){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(p||!this._tiles[a].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},s.prototype._reloadTile=function(a,p){var m=this._tiles[a];m&&(m.state!=="loading"&&(m.state=p),this._loadTile(m,this._tileLoaded.bind(this,m,a,p)))},s.prototype._tileLoaded=function(a,p,m,g){if(g)return a.state="errored",void(g.status!==404?this._source.fire(new l.ErrorEvent(g,{tile:a})):this.update(this.transform));a.timeAdded=l.browser.now(),m==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(p,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},s.prototype._backfillDEM=function(a){for(var p=this.getRenderableIds(),m=0;m<p.length;m++){var g=p[m];if(a.neighboringTiles&&a.neighboringTiles[g]){var x=this.getTileByID(g);E(a,x),E(x,a)}}function E(I,D){I.needsHillshadePrepare=!0;var N=D.tileID.canonical.x-I.tileID.canonical.x,V=D.tileID.canonical.y-I.tileID.canonical.y,Z=Math.pow(2,I.tileID.canonical.z),J=D.tileID.key;N===0&&V===0||Math.abs(V)>1||(Math.abs(N)>1&&(Math.abs(N+Z)===1?N+=Z:Math.abs(N-Z)===1&&(N-=Z)),D.dem&&I.dem&&(I.dem.backfillBorder(D.dem,N,V),I.neighboringTiles&&I.neighboringTiles[J]&&(I.neighboringTiles[J].backfilled=!0)))}},s.prototype.getTile=function(a){return this.getTileByID(a.key)},s.prototype.getTileByID=function(a){return this._tiles[a]},s.prototype._retainLoadedChildren=function(a,p,m,g){for(var x in this._tiles){var E=this._tiles[x];if(!(g[x]||!E.hasData()||E.tileID.overscaledZ<=p||E.tileID.overscaledZ>m)){for(var I=E.tileID;E&&E.tileID.overscaledZ>p+1;){var D=E.tileID.scaledTo(E.tileID.overscaledZ-1);(E=this._tiles[D.key])&&E.hasData()&&(I=D)}for(var N=I;N.overscaledZ>p;)if(a[(N=N.scaledTo(N.overscaledZ-1)).key]){g[I.key]=I;break}}}},s.prototype.findLoadedParent=function(a,p){if(a.key in this._loadedParentTiles){var m=this._loadedParentTiles[a.key];return m&&m.tileID.overscaledZ>=p?m:null}for(var g=a.overscaledZ-1;g>=p;g--){var x=a.scaledTo(g),E=this._getLoadedTile(x);if(E)return E}},s.prototype._getLoadedTile=function(a){var p=this._tiles[a.key];return p&&p.hasData()?p:this._cache.getByKey(a.wrapped().key)},s.prototype.updateCacheSize=function(a){var p=Math.ceil(a.width/this._source.tileSize)+1,m=Math.ceil(a.height/this._source.tileSize)+1,g=Math.floor(p*m*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)},s.prototype.handleWrapJump=function(a){var p=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,p){var m={};for(var g in this._tiles){var x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+p),m[x.tileID.key]=x}for(var E in this._tiles=m,this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(var I in this._tiles)this._setTileReloadTimer(I,this._tiles[I])}},s.prototype.update=function(a){var p=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Be){return new l.OverscaledTileID(Be.canonical.z,Be.wrap,Be.canonical.z,Be.canonical.x,Be.canonical.y)}):(m=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(Be){return p._source.hasTile(Be)}))):m=[];var g=a.coveringZoomLevel(this._source),x=Math.max(g-s.maxOverzooming,this._source.minzoom),E=Math.max(g+s.maxUnderzooming,this._source.minzoom),I=this._updateRetainedTiles(m,g);if(Fe(this._source.type)){for(var D={},N={},V=0,Z=Object.keys(I);V<Z.length;V+=1){var J=Z[V],Y=I[J],ie=this._tiles[J];if(ie&&!(ie.fadeEndTime&&ie.fadeEndTime<=l.browser.now())){var W=this.findLoadedParent(Y,x);W&&(this._addTile(W.tileID),D[W.tileID.key]=W.tileID),N[J]=Y}}for(var ne in this._retainLoadedChildren(N,g,E,I),D)I[ne]||(this._coveredTiles[ne]=!0,I[ne]=D[ne])}for(var ce in I)this._tiles[ce].clearFadeHold();for(var ye=0,Te=l.keysDifference(this._tiles,I);ye<Te.length;ye+=1){var we=Te[ye],Ae=this._tiles[we];Ae.hasSymbolBuckets&&!Ae.holdingForFade()?Ae.setHoldDuration(this.map._fadeDuration):Ae.hasSymbolBuckets&&!Ae.symbolFadeFinished()||this._removeTile(we)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},s.prototype._updateRetainedTiles=function(a,p){for(var m={},g={},x=Math.max(p-s.maxOverzooming,this._source.minzoom),E=Math.max(p+s.maxUnderzooming,this._source.minzoom),I={},D=0,N=a;D<N.length;D+=1){var V=N[D],Z=this._addTile(V);m[V.key]=V,Z.hasData()||p<this._source.maxzoom&&(I[V.key]=V)}this._retainLoadedChildren(I,p,E,m);for(var J=0,Y=a;J<Y.length;J+=1){var ie=Y[J],W=this._tiles[ie.key];if(!W.hasData()){if(p+1>this._source.maxzoom){var ne=ie.children(this._source.maxzoom)[0],ce=this.getTile(ne);if(ce&&ce.hasData()){m[ne.key]=ne;continue}}else{var ye=ie.children(this._source.maxzoom);if(m[ye[0].key]&&m[ye[1].key]&&m[ye[2].key]&&m[ye[3].key])continue}for(var Te=W.wasRequested(),we=ie.overscaledZ-1;we>=x;--we){var Ae=ie.scaledTo(we);if(g[Ae.key]||(g[Ae.key]=!0,!(W=this.getTile(Ae))&&Te&&(W=this._addTile(Ae)),W&&(m[Ae.key]=Ae,Te=W.wasRequested(),W.hasData())))break}}}return m},s.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var p=[],m=void 0,g=this._tiles[a].tileID;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){m=this._loadedParentTiles[g.key];break}p.push(g.key);var x=g.scaledTo(g.overscaledZ-1);if(m=this._getLoadedTile(x))break;g=x}for(var E=0,I=p;E<I.length;E+=1)this._loadedParentTiles[I[E]]=m}},s.prototype._addTile=function(a){var p=this._tiles[a.key];if(p)return p;(p=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,p),p.tileID=a,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,p)));var m=Boolean(p);return m||(p=new l.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(p,this._tileLoaded.bind(this,p,a.key,p.state))),p?(p.uses++,this._tiles[a.key]=p,m||this._source.fire(new l.Event("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p):null},s.prototype._setTileReloadTimer=function(a,p){var m=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var g=p.getExpiryTimeout();g&&(this._timers[a]=setTimeout(function(){m._reloadTile(a,"expired"),delete m._timers[a]},g))},s.prototype._removeTile=function(a){var p=this._tiles[a];p&&(p.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))},s.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},s.prototype.tilesIn=function(a,p,m){var g=this,x=[],E=this.transform;if(!E)return x;for(var I=m?E.getCameraQueryGeometry(a):a,D=a.map(function(we){return E.pointCoordinate(we)}),N=I.map(function(we){return E.pointCoordinate(we)}),V=this.getIds(),Z=1/0,J=1/0,Y=-1/0,ie=-1/0,W=0,ne=N;W<ne.length;W+=1){var ce=ne[W];Z=Math.min(Z,ce.x),J=Math.min(J,ce.y),Y=Math.max(Y,ce.x),ie=Math.max(ie,ce.y)}for(var ye=function(we){var Ae=g._tiles[V[we]];if(!Ae.holdingForFade()){var Be=Ae.tileID,Ge=Math.pow(2,E.zoom-Ae.tileID.overscaledZ),qe=p*Ae.queryPadding*l.EXTENT/Ae.tileSize/Ge,ot=[Be.getTilePoint(new l.MercatorCoordinate(Z,J)),Be.getTilePoint(new l.MercatorCoordinate(Y,ie))];if(ot[0].x-qe<l.EXTENT&&ot[0].y-qe<l.EXTENT&&ot[1].x+qe>=0&&ot[1].y+qe>=0){var xt=D.map(function(Et){return Be.getTilePoint(Et)}),Ct=N.map(function(Et){return Be.getTilePoint(Et)});x.push({tile:Ae,tileID:Be,queryGeometry:xt,cameraQueryGeometry:Ct,scale:Ge})}}},Te=0;Te<V.length;Te++)ye(Te);return x},s.prototype.getVisibleCoordinates=function(a){for(var p=this,m=this.getRenderableIds(a).map(function(I){return p._tiles[I].tileID}),g=0,x=m;g<x.length;g+=1){var E=x[g];E.posMatrix=this.transform.calculatePosMatrix(E.toUnwrapped())}return m},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Fe(this._source.type))for(var a in this._tiles){var p=this._tiles[a];if(p.fadeEndTime!==void 0&&p.fadeEndTime>=l.browser.now())return!0}return!1},s.prototype.setFeatureState=function(a,p,m){this._state.updateState(a=a||"_geojsonTileLayer",p,m)},s.prototype.removeFeatureState=function(a,p,m){this._state.removeFeatureState(a=a||"_geojsonTileLayer",p,m)},s.prototype.getFeatureState=function(a,p){return this._state.getState(a=a||"_geojsonTileLayer",p)},s.prototype.setDependencies=function(a,p,m){var g=this._tiles[a];g&&g.setDependencies(p,m)},s.prototype.reloadTilesForDependencies=function(a,p){for(var m in this._tiles)this._tiles[m].hasDependency(a,p)&&this._reloadTile(m,"reloading");this._cache.filter(function(g){return!g.hasDependency(a,p)})},s}(l.Evented);function me(o,s){var a=Math.abs(2*o.wrap)-+(o.wrap<0),p=Math.abs(2*s.wrap)-+(s.wrap<0);return o.overscaledZ-s.overscaledZ||p-a||s.canonical.y-o.canonical.y||s.canonical.x-o.canonical.x}function Fe(o){return o==="raster"||o==="image"||o==="video"}function Ne(){return new l.window.Worker(Ql.workerUrl)}Q.maxOverzooming=10,Q.maxUnderzooming=3;var Pe="mapboxgl_preloaded_worker_pool",Ue=function(){this.active={}};Ue.prototype.acquire=function(o){if(!this.workers)for(this.workers=[];this.workers.length<Ue.workerCount;)this.workers.push(new Ne);return this.active[o]=!0,this.workers.slice()},Ue.prototype.release=function(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Ue.prototype.isPreloaded=function(){return!!this.active[Pe]},Ue.prototype.numActive=function(){return Object.keys(this.active).length};var st,nt=Math.floor(l.browser.hardwareConcurrency/2);function Ie(){return st||(st=new Ue),st}function Je(o,s){var a={};for(var p in o)p!=="ref"&&(a[p]=o[p]);return l.refProperties.forEach(function(m){m in s&&(a[m]=s[m])}),a}function Xe(o){o=o.slice();for(var s=Object.create(null),a=0;a<o.length;a++)s[o[a].id]=o[a];for(var p=0;p<o.length;p++)"ref"in o[p]&&(o[p]=Je(o[p],s[o[p].ref]));return o}Ue.workerCount=Math.max(Math.min(nt,6),1);var Ke={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jt(o,s,a){a.push({command:Ke.addSource,args:[o,s[o]]})}function Qe(o,s,a){s.push({command:Ke.removeSource,args:[o]}),a[o]=!0}function tr(o,s,a,p){Qe(o,a,p),jt(o,s,a)}function Cr(o,s,a){var p;for(p in o[a])if(o[a].hasOwnProperty(p)&&p!=="data"&&!l.deepEqual(o[a][p],s[a][p]))return!1;for(p in s[a])if(s[a].hasOwnProperty(p)&&p!=="data"&&!l.deepEqual(o[a][p],s[a][p]))return!1;return!0}function Mt(o,s,a,p,m,g){var x;for(x in s=s||{},o=o||{})o.hasOwnProperty(x)&&(l.deepEqual(o[x],s[x])||a.push({command:g,args:[p,x,s[x],m]}));for(x in s)s.hasOwnProperty(x)&&!o.hasOwnProperty(x)&&(l.deepEqual(o[x],s[x])||a.push({command:g,args:[p,x,s[x],m]}))}function lr(o){return o.id}function or(o,s){return o[s.id]=s,o}var Bn=function(o,s){this.reset(o,s)};Bn.prototype.reset=function(o,s){this.points=o||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Bn.prototype.lerp=function(o){if(this.points.length===1)return this.points[0];o=l.clamp(o,0,1);for(var s=1,a=this._distances[s],p=o*this.paddedLength+this.padding;a<p&&s<this._distances.length;)a=this._distances[++s];var m=s-1,g=this._distances[m],x=a-g,E=x>0?(p-g)/x:0;return this.points[m].mult(1-E).add(this.points[s].mult(E))};var dr=function(o,s,a){var p=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(o/a),this.yCellCount=Math.ceil(s/a);for(var g=0;g<this.xCellCount*this.yCellCount;g++)p.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=s,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function en(o,s,a,p,m){var g=l.create();return s?(l.scale(g,g,[1/m,1/m,1]),a||l.rotateZ(g,g,p.angle)):l.multiply(g,p.labelPlaneMatrix,o),g}function xr(o,s,a,p,m){if(s){var g=l.clone(o);return l.scale(g,g,[m,m,1]),a||l.rotateZ(g,g,-p.angle),g}return p.glCoordMatrix}function It(o,s){var a=[o.x,o.y,0,1];zn(a,a,s);var p=a[3];return{point:new l.Point(a[0]/p,a[1]/p),signedDistanceFromCamera:p}}function cr(o,s){return .5+o/s*.5}function ui(o,s){var a=o[0]/o[3],p=o[1]/o[3];return a>=-s[0]&&a<=s[0]&&p>=-s[1]&&p<=s[1]}function Xi(o,s,a,p,m,g,x,E){var I=p?o.textSizeData:o.iconSizeData,D=l.evaluateSizeForZoom(I,a.transform.zoom),N=[256/a.width*2+1,256/a.height*2+1],V=p?o.text.dynamicLayoutVertexArray:o.icon.dynamicLayoutVertexArray;V.clear();for(var Z=o.lineVertexArray,J=p?o.text.placedSymbolArray:o.icon.placedSymbolArray,Y=a.transform.width/a.transform.height,ie=!1,W=0;W<J.length;W++){var ne=J.get(W);if(ne.hidden||ne.writingMode===l.WritingMode.vertical&&!ie)ii(ne.numGlyphs,V);else{ie=!1;var ce=[ne.anchorX,ne.anchorY,0,1];if(l.transformMat4(ce,ce,s),ui(ce,N)){var ye=cr(a.transform.cameraToCenterDistance,ce[3]),Te=l.evaluateSizeForFeature(I,D,ne),we=x?Te/ye:Te*ye,Ae=new l.Point(ne.anchorX,ne.anchorY),Be=It(Ae,m).point,Ge={},qe=Xo(ne,we,!1,E,s,m,g,o.glyphOffsetArray,Z,V,Be,Ae,Ge,Y);ie=qe.useVertical,(qe.notEnoughRoom||ie||qe.needsFlipping&&Xo(ne,we,!0,E,s,m,g,o.glyphOffsetArray,Z,V,Be,Ae,Ge,Y).notEnoughRoom)&&ii(ne.numGlyphs,V)}else ii(ne.numGlyphs,V)}}p?o.text.dynamicLayoutVertexBuffer.updateData(V):o.icon.dynamicLayoutVertexBuffer.updateData(V)}function Br(o,s,a,p,m,g,x,E,I,D,N){var V=E.glyphStartIndex+E.numGlyphs,Z=E.lineStartIndex,J=E.lineStartIndex+E.lineLength,Y=s.getoffsetX(E.glyphStartIndex),ie=s.getoffsetX(V-1),W=tn(o*Y,a,p,m,g,x,E.segment,Z,J,I,D,N);if(!W)return null;var ne=tn(o*ie,a,p,m,g,x,E.segment,Z,J,I,D,N);return ne?{first:W,last:ne}:null}function Xn(o,s,a,p){return o===l.WritingMode.horizontal&&Math.abs(a.y-s.y)>Math.abs(a.x-s.x)*p?{useVertical:!0}:(o===l.WritingMode.vertical?s.y<a.y:s.x>a.x)?{needsFlipping:!0}:null}function Xo(o,s,a,p,m,g,x,E,I,D,N,V,Z,J){var Y,ie=s/24,W=o.lineOffsetX*ie,ne=o.lineOffsetY*ie;if(o.numGlyphs>1){var ce=o.glyphStartIndex+o.numGlyphs,ye=o.lineStartIndex,Te=o.lineStartIndex+o.lineLength,we=Br(ie,E,W,ne,a,N,V,o,I,g,Z);if(!we)return{notEnoughRoom:!0};var Ae=It(we.first.point,x).point,Be=It(we.last.point,x).point;if(p&&!a){var Ge=Xn(o.writingMode,Ae,Be,J);if(Ge)return Ge}Y=[we.first];for(var qe=o.glyphStartIndex+1;qe<ce-1;qe++)Y.push(tn(ie*E.getoffsetX(qe),W,ne,a,N,V,o.segment,ye,Te,I,g,Z));Y.push(we.last)}else{if(p&&!a){var ot=It(V,m).point,xt=o.lineStartIndex+o.segment+1,Ct=new l.Point(I.getx(xt),I.gety(xt)),Et=It(Ct,m),hr=Et.signedDistanceFromCamera>0?Et.point:mo(V,Ct,ot,1,m),ut=Xn(o.writingMode,ot,hr,J);if(ut)return ut}var Nt=tn(ie*E.getoffsetX(o.glyphStartIndex),W,ne,a,N,V,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,I,g,Z);if(!Nt)return{notEnoughRoom:!0};Y=[Nt]}for(var Wt=0,Bt=Y;Wt<Bt.length;Wt+=1){var Rt=Bt[Wt];l.addDynamicAttributes(D,Rt.point,Rt.angle)}return{}}function mo(o,s,a,p,m){var g=It(o.add(o.sub(s)._unit()),m).point,x=a.sub(g);return a.add(x._mult(p/x.mag()))}function tn(o,s,a,p,m,g,x,E,I,D,N,V){var Z=p?o-s:o+s,J=Z>0?1:-1,Y=0;p&&(J*=-1,Y=Math.PI),J<0&&(Y+=Math.PI);for(var ie=J>0?E+x:E+x+1,W=m,ne=m,ce=0,ye=0,Te=Math.abs(Z),we=[];ce+ye<=Te;){if((ie+=J)<E||ie>=I)return null;if(ne=W,we.push(W),(W=V[ie])===void 0){var Ae=new l.Point(D.getx(ie),D.gety(ie)),Be=It(Ae,N);if(Be.signedDistanceFromCamera>0)W=V[ie]=Be.point;else{var Ge=ie-J;W=mo(ce===0?g:new l.Point(D.getx(Ge),D.gety(Ge)),Ae,ne,Te-ce+1,N)}}ce+=ye,ye=ne.dist(W)}var qe=(Te-ce)/ye,ot=W.sub(ne),xt=ot.mult(qe)._add(ne);xt._add(ot._unit()._perp()._mult(a*J));var Ct=Y+Math.atan2(W.y-ne.y,W.x-ne.x);return we.push(xt),{point:xt,angle:Ct,path:we}}dr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},dr.prototype.insert=function(o,s,a,p,m){this._forEachCell(s,a,p,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(s),this.bboxes.push(a),this.bboxes.push(p),this.bboxes.push(m)},dr.prototype.insertCircle=function(o,s,a,p){this._forEachCell(s-p,a-p,s+p,a+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(s),this.circles.push(a),this.circles.push(p)},dr.prototype._insertBoxCell=function(o,s,a,p,m,g){this.boxCells[m].push(g)},dr.prototype._insertCircleCell=function(o,s,a,p,m,g){this.circleCells[m].push(g)},dr.prototype._query=function(o,s,a,p,m,g){if(a<0||o>this.width||p<0||s>this.height)return!m&&[];var x=[];if(o<=0&&s<=0&&this.width<=a&&this.height<=p){if(m)return!0;for(var E=0;E<this.boxKeys.length;E++)x.push({key:this.boxKeys[E],x1:this.bboxes[4*E],y1:this.bboxes[4*E+1],x2:this.bboxes[4*E+2],y2:this.bboxes[4*E+3]});for(var I=0;I<this.circleKeys.length;I++){var D=this.circles[3*I],N=this.circles[3*I+1],V=this.circles[3*I+2];x.push({key:this.circleKeys[I],x1:D-V,y1:N-V,x2:D+V,y2:N+V})}return g?x.filter(g):x}return this._forEachCell(o,s,a,p,this._queryCell,x,{hitTest:m,seenUids:{box:{},circle:{}}},g),m?x.length>0:x},dr.prototype._queryCircle=function(o,s,a,p,m){var g=o-a,x=o+a,E=s-a,I=s+a;if(x<0||g>this.width||I<0||E>this.height)return!p&&[];var D=[];return this._forEachCell(g,E,x,I,this._queryCellCircle,D,{hitTest:p,circle:{x:o,y:s,radius:a},seenUids:{box:{},circle:{}}},m),p?D.length>0:D},dr.prototype.query=function(o,s,a,p,m){return this._query(o,s,a,p,!1,m)},dr.prototype.hitTest=function(o,s,a,p,m){return this._query(o,s,a,p,!0,m)},dr.prototype.hitTestCircle=function(o,s,a,p){return this._queryCircle(o,s,a,!0,p)},dr.prototype._queryCell=function(o,s,a,p,m,g,x,E){var I=x.seenUids,D=this.boxCells[m];if(D!==null)for(var N=this.bboxes,V=0,Z=D;V<Z.length;V+=1){var J=Z[V];if(!I.box[J]){I.box[J]=!0;var Y=4*J;if(o<=N[Y+2]&&s<=N[Y+3]&&a>=N[Y+0]&&p>=N[Y+1]&&(!E||E(this.boxKeys[J]))){if(x.hitTest)return g.push(!0),!0;g.push({key:this.boxKeys[J],x1:N[Y],y1:N[Y+1],x2:N[Y+2],y2:N[Y+3]})}}}var ie=this.circleCells[m];if(ie!==null)for(var W=this.circles,ne=0,ce=ie;ne<ce.length;ne+=1){var ye=ce[ne];if(!I.circle[ye]){I.circle[ye]=!0;var Te=3*ye;if(this._circleAndRectCollide(W[Te],W[Te+1],W[Te+2],o,s,a,p)&&(!E||E(this.circleKeys[ye]))){if(x.hitTest)return g.push(!0),!0;var we=W[Te],Ae=W[Te+1],Be=W[Te+2];g.push({key:this.circleKeys[ye],x1:we-Be,y1:Ae-Be,x2:we+Be,y2:Ae+Be})}}}},dr.prototype._queryCellCircle=function(o,s,a,p,m,g,x,E){var I=x.circle,D=x.seenUids,N=this.boxCells[m];if(N!==null)for(var V=this.bboxes,Z=0,J=N;Z<J.length;Z+=1){var Y=J[Z];if(!D.box[Y]){D.box[Y]=!0;var ie=4*Y;if(this._circleAndRectCollide(I.x,I.y,I.radius,V[ie+0],V[ie+1],V[ie+2],V[ie+3])&&(!E||E(this.boxKeys[Y])))return g.push(!0),!0}}var W=this.circleCells[m];if(W!==null)for(var ne=this.circles,ce=0,ye=W;ce<ye.length;ce+=1){var Te=ye[ce];if(!D.circle[Te]){D.circle[Te]=!0;var we=3*Te;if(this._circlesCollide(ne[we],ne[we+1],ne[we+2],I.x,I.y,I.radius)&&(!E||E(this.circleKeys[Te])))return g.push(!0),!0}}},dr.prototype._forEachCell=function(o,s,a,p,m,g,x,E){for(var I=this._convertToXCellCoord(o),D=this._convertToYCellCoord(s),N=this._convertToXCellCoord(a),V=this._convertToYCellCoord(p),Z=I;Z<=N;Z++)for(var J=D;J<=V;J++)if(m.call(this,o,s,a,p,this.xCellCount*J+Z,g,x,E))return},dr.prototype._convertToXCellCoord=function(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))},dr.prototype._convertToYCellCoord=function(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))},dr.prototype._circlesCollide=function(o,s,a,p,m,g){var x=p-o,E=m-s,I=a+g;return I*I>x*x+E*E},dr.prototype._circleAndRectCollide=function(o,s,a,p,m,g,x){var E=(g-p)/2,I=Math.abs(o-(p+E));if(I>E+a)return!1;var D=(x-m)/2,N=Math.abs(s-(m+D));if(N>D+a)return!1;if(I<=E||N<=D)return!0;var V=I-E,Z=N-D;return V*V+Z*Z<=a*a};var Ms=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ii(o,s){for(var a=0;a<o;a++){var p=s.length;s.resize(p+4),s.float32.set(Ms,3*p)}}function zn(o,s,a){var p=s[0],m=s[1];return o[0]=a[0]*p+a[4]*m+a[12],o[1]=a[1]*p+a[5]*m+a[13],o[3]=a[3]*p+a[7]*m+a[15],o}var Ii=function(o,s,a){s===void 0&&(s=new dr(o.width+200,o.height+200,25)),a===void 0&&(a=new dr(o.width+200,o.height+200,25)),this.transform=o,this.grid=s,this.ignoredGrid=a,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+100,this.screenBottomBoundary=o.height+100,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200};function Nr(o,s,a){return s*(l.EXTENT/(o.tileSize*Math.pow(2,a-o.tileID.overscaledZ)))}Ii.prototype.placeCollisionBox=function(o,s,a,p,m){var g=this.projectAndGetPerspectiveRatio(p,o.anchorPointX,o.anchorPointY),x=a*g.perspectiveRatio,E=o.x1*x+g.point.x,I=o.y1*x+g.point.y,D=o.x2*x+g.point.x,N=o.y2*x+g.point.y;return!this.isInsideGrid(E,I,D,N)||!s&&this.grid.hitTest(E,I,D,N,m)?{box:[],offscreen:!1}:{box:[E,I,D,N],offscreen:this.isOffscreen(E,I,D,N)}},Ii.prototype.placeCollisionCircles=function(o,s,a,p,m,g,x,E,I,D,N,V,Z){var J=[],Y=new l.Point(s.anchorX,s.anchorY),ie=It(Y,g),W=cr(this.transform.cameraToCenterDistance,ie.signedDistanceFromCamera),ne=(D?m/W:m*W)/l.ONE_EM,ce=It(Y,x).point,ye=Br(ne,p,s.lineOffsetX*ne,s.lineOffsetY*ne,!1,ce,Y,s,a,x,{}),Te=!1,we=!1,Ae=!0;if(ye){for(var Be=.5*V*W+Z,Ge=new l.Point(-100,-100),qe=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),ot=new Bn,xt=ye.first,Ct=ye.last,Et=[],hr=xt.path.length-1;hr>=1;hr--)Et.push(xt.path[hr]);for(var ut=1;ut<Ct.path.length;ut++)Et.push(Ct.path[ut]);var Nt=2.5*Be;if(E){var Wt=Et.map(function(Uo){return It(Uo,E)});Et=Wt.some(function(Uo){return Uo.signedDistanceFromCamera<=0})?[]:Wt.map(function(Uo){return Uo.point})}var Bt=[];if(Et.length>0){for(var Rt=Et[0].clone(),Gt=Et[0].clone(),Dt=1;Dt<Et.length;Dt++)Rt.x=Math.min(Rt.x,Et[Dt].x),Rt.y=Math.min(Rt.y,Et[Dt].y),Gt.x=Math.max(Gt.x,Et[Dt].x),Gt.y=Math.max(Gt.y,Et[Dt].y);Bt=Rt.x>=Ge.x&&Gt.x<=qe.x&&Rt.y>=Ge.y&&Gt.y<=qe.y?[Et]:Gt.x<Ge.x||Rt.x>qe.x||Gt.y<Ge.y||Rt.y>qe.y?[]:l.clipLine([Et],Ge.x,Ge.y,qe.x,qe.y)}for(var kt=0,Nn=Bt;kt<Nn.length;kt+=1){var hn;ot.reset(Nn[kt],.25*Be),hn=ot.length<=.5*Be?1:Math.ceil(ot.paddedLength/Nt)+1;for(var pi=0;pi<hn;pi++){var Yn=pi/Math.max(hn-1,1),sn=ot.lerp(Yn),gn=sn.x+100,ao=sn.y+100;J.push(gn,ao,Be,0);var _i=gn-Be,ps=ao-Be,Li=gn+Be,oa=ao+Be;if(Ae=Ae&&this.isOffscreen(_i,ps,Li,oa),we=we||this.isInsideGrid(_i,ps,Li,oa),!o&&this.grid.hitTestCircle(gn,ao,Be,N)&&(Te=!0,!I))return{circles:[],offscreen:!1,collisionDetected:Te}}}}return{circles:!I&&Te||!we?[]:J,offscreen:Ae,collisionDetected:Te}},Ii.prototype.queryRenderedSymbols=function(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],a=1/0,p=1/0,m=-1/0,g=-1/0,x=0,E=o;x<E.length;x+=1){var I=E[x],D=new l.Point(I.x+100,I.y+100);a=Math.min(a,D.x),p=Math.min(p,D.y),m=Math.max(m,D.x),g=Math.max(g,D.y),s.push(D)}for(var N={},V={},Z=0,J=this.grid.query(a,p,m,g).concat(this.ignoredGrid.query(a,p,m,g));Z<J.length;Z+=1){var Y=J[Z],ie=Y.key;if(N[ie.bucketInstanceId]===void 0&&(N[ie.bucketInstanceId]={}),!N[ie.bucketInstanceId][ie.featureIndex]){var W=[new l.Point(Y.x1,Y.y1),new l.Point(Y.x2,Y.y1),new l.Point(Y.x2,Y.y2),new l.Point(Y.x1,Y.y2)];l.polygonIntersectsPolygon(s,W)&&(N[ie.bucketInstanceId][ie.featureIndex]=!0,V[ie.bucketInstanceId]===void 0&&(V[ie.bucketInstanceId]=[]),V[ie.bucketInstanceId].push(ie.featureIndex))}}return V},Ii.prototype.insertCollisionBox=function(o,s,a,p,m){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:p,collisionGroupID:m},o[0],o[1],o[2],o[3])},Ii.prototype.insertCollisionCircles=function(o,s,a,p,m){for(var g=s?this.ignoredGrid:this.grid,x={bucketInstanceId:a,featureIndex:p,collisionGroupID:m},E=0;E<o.length;E+=4)g.insertCircle(x,o[E],o[E+1],o[E+2])},Ii.prototype.projectAndGetPerspectiveRatio=function(o,s,a){var p=[s,a,0,1];return zn(p,p,o),{point:new l.Point((p[0]/p[3]+1)/2*this.transform.width+100,(-p[1]/p[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/p[3]*.5}},Ii.prototype.isOffscreen=function(o,s,a,p){return a<100||o>=this.screenRightBoundary||p<100||s>this.screenBottomBoundary},Ii.prototype.isInsideGrid=function(o,s,a,p){return a>=0&&o<this.gridRightBoundary&&p>=0&&s<this.gridBottomBoundary},Ii.prototype.getViewportMatrix=function(){var o=l.identity([]);return l.translate(o,o,[-100,-100,0]),o};var yo=function(o,s,a,p){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?s:-s))):p&&a?1:0,this.placed=a};yo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ki=function(o,s,a,p,m){this.text=new yo(o?o.text:null,s,a,m),this.icon=new yo(o?o.icon:null,s,p,m)};ki.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Dl=function(o,s,a){this.text=o,this.icon=s,this.skipFade=a},Ai=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},w=function(o,s,a,p,m){this.bucketInstanceId=o,this.featureIndex=s,this.sourceLayerIndex=a,this.bucketIndex=p,this.tileID=m},P=function(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}};function F(o,s,a,p,m){var g=l.getAnchorAlignment(o),x=-(g.horizontalAlign-.5)*s,E=-(g.verticalAlign-.5)*a,I=l.evaluateVariableOffset(o,p);return new l.Point(x+I[0]*m,E+I[1]*m)}function le(o,s,a,p,m,g){var x=o.x1,E=o.x2,I=o.y1,D=o.y2,N=o.anchorPointX,V=o.anchorPointY,Z=new l.Point(s,a);return p&&Z._rotate(m?g:-g),{x1:x+Z.x,y1:I+Z.y,x2:E+Z.x,y2:D+Z.y,anchorPointX:N,anchorPointY:V}}P.prototype.get=function(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){var s=++this.maxGroupID;this.collisionGroups[o]={ID:s,predicate:function(a){return a.collisionGroupID===s}}}return this.collisionGroups[o]};var ve=function(o,s,a,p){this.transform=o.clone(),this.collisionIndex=new Ii(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new P(a),this.collisionCircleArrays={},this.prevPlacement=p,p&&(p.prevPlacement=void 0),this.placedOrientations={}};function fe(o,s,a,p,m){o.emplaceBack(s?1:0,a?1:0,p||0,m||0),o.emplaceBack(s?1:0,a?1:0,p||0,m||0),o.emplaceBack(s?1:0,a?1:0,p||0,m||0),o.emplaceBack(s?1:0,a?1:0,p||0,m||0)}ve.prototype.getBucketParts=function(o,s,a,p){var m=a.getBucket(s),g=a.latestFeatureIndex;if(m&&g&&s.id===m.layerIds[0]){var x=a.collisionBoxArray,E=m.layers[0].layout,I=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),D=a.tileSize/l.EXTENT,N=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),V=E.get("text-pitch-alignment")==="map",Z=E.get("text-rotation-alignment")==="map",J=Nr(a,1,this.transform.zoom),Y=en(N,V,Z,this.transform,J),ie=null;if(V){var W=xr(N,V,Z,this.transform,J);ie=l.multiply([],this.transform.labelPlaneMatrix,W)}this.retainedQueryData[m.bucketInstanceId]=new w(m.bucketInstanceId,g,m.sourceLayerIndex,m.index,a.tileID);var ne={bucket:m,layout:E,posMatrix:N,textLabelPlaneMatrix:Y,labelToScreenMatrix:ie,scale:I,textPixelRatio:D,holdingForFade:a.holdingForFade(),collisionBoxArray:x,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(p)for(var ce=0,ye=m.sortKeyRanges;ce<ye.length;ce+=1){var Te=ye[ce];o.push({sortKey:Te.sortKey,symbolInstanceStart:Te.symbolInstanceStart,symbolInstanceEnd:Te.symbolInstanceEnd,parameters:ne})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:ne})}},ve.prototype.attemptAnchorPlacement=function(o,s,a,p,m,g,x,E,I,D,N,V,Z,J,Y){var ie,W=[V.textOffset0,V.textOffset1],ne=F(o,a,p,W,m),ce=this.collisionIndex.placeCollisionBox(le(s,ne.x,ne.y,g,x,this.transform.angle),N,E,I,D.predicate);if(!Y||this.collisionIndex.placeCollisionBox(le(Y,ne.x,ne.y,g,x,this.transform.angle),N,E,I,D.predicate).box.length!==0)return ce.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID].text&&(ie=this.prevPlacement.variableOffsets[V.crossTileID].anchor),this.variableOffsets[V.crossTileID]={textOffset:W,width:a,height:p,anchor:o,textBoxScale:m,prevAnchor:ie},this.markUsedJustification(Z,o,V,J),Z.allowVerticalPlacement&&(this.markUsedOrientation(Z,J,V),this.placedOrientations[V.crossTileID]=J),{shift:ne,placedGlyphBoxes:ce}):void 0},ve.prototype.placeLayerBucketPart=function(o,s,a){var p=this,m=o.parameters,g=m.bucket,x=m.layout,E=m.posMatrix,I=m.textLabelPlaneMatrix,D=m.labelToScreenMatrix,N=m.textPixelRatio,V=m.holdingForFade,Z=m.collisionBoxArray,J=m.partiallyEvaluatedTextSize,Y=m.collisionGroup,ie=x.get("text-optional"),W=x.get("icon-optional"),ne=x.get("text-allow-overlap"),ce=x.get("icon-allow-overlap"),ye=x.get("text-rotation-alignment")==="map",Te=x.get("text-pitch-alignment")==="map",we=x.get("icon-text-fit")!=="none",Ae=x.get("symbol-z-order")==="viewport-y",Be=ne&&(ce||!g.hasIconData()||W),Ge=ce&&(ne||!g.hasTextData()||ie);!g.collisionArrays&&Z&&g.deserializeCollisionBoxes(Z);var qe=function(ut,Nt){if(!s[ut.crossTileID])if(V)p.placements[ut.crossTileID]=new Dl(!1,!1,!1);else{var Wt,Bt=!1,Rt=!1,Gt=!0,Dt=null,kt={box:null,offscreen:null},Nn={box:null,offscreen:null},hn=null,pi=null,Yn=0,sn=0,gn=0;Nt.textFeatureIndex?Yn=Nt.textFeatureIndex:ut.useRuntimeCollisionCircles&&(Yn=ut.featureIndex),Nt.verticalTextFeatureIndex&&(sn=Nt.verticalTextFeatureIndex);var ao=Nt.textBox;if(ao){var _i=function(_r){var So=l.WritingMode.horizontal;if(g.allowVerticalPlacement&&!_r&&p.prevPlacement){var Di=p.prevPlacement.placedOrientations[ut.crossTileID];Di&&(p.placedOrientations[ut.crossTileID]=Di,p.markUsedOrientation(g,So=Di,ut))}return So},ps=function(_r,So){if(g.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&Nt.verticalTextBox)for(var Di=0,Gs=g.writingModes;Di<Gs.length&&(Gs[Di]===l.WritingMode.vertical?(kt=So(),Nn=kt):kt=_r(),!(kt&&kt.box&&kt.box.length));Di+=1);else kt=_r()};if(x.get("text-variable-anchor")){var Li=x.get("text-variable-anchor");if(p.prevPlacement&&p.prevPlacement.variableOffsets[ut.crossTileID]){var oa=p.prevPlacement.variableOffsets[ut.crossTileID];Li.indexOf(oa.anchor)>0&&(Li=Li.filter(function(_r){return _r!==oa.anchor})).unshift(oa.anchor)}var Uo=function(_r,So,Di){for(var Gs=_r.x2-_r.x1,ym=_r.y2-_r.y1,ec=ut.textBoxScale,vm=we&&!ce?So:null,ll={box:[],offscreen:!1},rf=ne?2*Li.length:Li.length,yu=0;yu<rf;++yu){var tc=p.attemptAnchorPlacement(Li[yu%Li.length],_r,Gs,ym,ec,ye,Te,N,E,Y,yu>=Li.length,ut,g,Di,vm);if(tc&&(ll=tc.placedGlyphBoxes)&&ll.box&&ll.box.length){Bt=!0,Dt=tc.shift;break}}return ll};ps(function(){return Uo(ao,Nt.iconBox,l.WritingMode.horizontal)},function(){var _r=Nt.verticalTextBox;return g.allowVerticalPlacement&&!(kt&&kt.box&&kt.box.length)&&ut.numVerticalGlyphVertices>0&&_r?Uo(_r,Nt.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),kt&&(Bt=kt.box,Gt=kt.offscreen);var al=_i(kt&&kt.box);if(!Bt&&p.prevPlacement){var du=p.prevPlacement.variableOffsets[ut.crossTileID];du&&(p.variableOffsets[ut.crossTileID]=du,p.markUsedJustification(g,du.anchor,ut,al))}}else{var hs=function(_r,So){var Di=p.collisionIndex.placeCollisionBox(_r,ne,N,E,Y.predicate);return Di&&Di.box&&Di.box.length&&(p.markUsedOrientation(g,So,ut),p.placedOrientations[ut.crossTileID]=So),Di};ps(function(){return hs(ao,l.WritingMode.horizontal)},function(){var _r=Nt.verticalTextBox;return g.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&_r?hs(_r,l.WritingMode.vertical):{box:null,offscreen:null}}),_i(kt&&kt.box&&kt.box.length)}}if(Bt=(Wt=kt)&&Wt.box&&Wt.box.length>0,Gt=Wt&&Wt.offscreen,ut.useRuntimeCollisionCircles){var mu=g.text.placedSymbolArray.get(ut.centerJustifiedTextSymbolIndex),sl=l.evaluateSizeForFeature(g.textSizeData,J,mu),wa=x.get("text-padding");hn=p.collisionIndex.placeCollisionCircles(ne,mu,g.lineVertexArray,g.glyphOffsetArray,sl,E,I,D,a,Te,Y.predicate,ut.collisionCircleDiameter,wa),Bt=ne||hn.circles.length>0&&!hn.collisionDetected,Gt=Gt&&hn.offscreen}if(Nt.iconFeatureIndex&&(gn=Nt.iconFeatureIndex),Nt.iconBox){var ul=function(_r){var So=we&&Dt?le(_r,Dt.x,Dt.y,ye,Te,p.transform.angle):_r;return p.collisionIndex.placeCollisionBox(So,ce,N,E,Y.predicate)};Rt=Nn&&Nn.box&&Nn.box.length&&Nt.verticalIconBox?(pi=ul(Nt.verticalIconBox)).box.length>0:(pi=ul(Nt.iconBox)).box.length>0,Gt=Gt&&pi.offscreen}var Sa=ie||ut.numHorizontalGlyphVertices===0&&ut.numVerticalGlyphVertices===0,jn=W||ut.numIconVertices===0;if(Sa||jn?jn?Sa||(Rt=Rt&&Bt):Bt=Rt&&Bt:Rt=Bt=Rt&&Bt,Bt&&Wt&&Wt.box&&p.collisionIndex.insertCollisionBox(Wt.box,x.get("text-ignore-placement"),g.bucketInstanceId,Nn&&Nn.box&&sn?sn:Yn,Y.ID),Rt&&pi&&p.collisionIndex.insertCollisionBox(pi.box,x.get("icon-ignore-placement"),g.bucketInstanceId,gn,Y.ID),hn&&(Bt&&p.collisionIndex.insertCollisionCircles(hn.circles,x.get("text-ignore-placement"),g.bucketInstanceId,Yn,Y.ID),a)){var Wa=g.bucketInstanceId,fs=p.collisionCircleArrays[Wa];fs===void 0&&(fs=p.collisionCircleArrays[Wa]=new Ai);for(var Zs=0;Zs<hn.circles.length;Zs+=4)fs.circles.push(hn.circles[Zs+0]),fs.circles.push(hn.circles[Zs+1]),fs.circles.push(hn.circles[Zs+2]),fs.circles.push(hn.collisionDetected?1:0)}p.placements[ut.crossTileID]=new Dl(Bt||Be,Rt||Ge,Gt||g.justReloaded),s[ut.crossTileID]=!0}};if(Ae)for(var ot=g.getSortedSymbolIndexes(this.transform.angle),xt=ot.length-1;xt>=0;--xt){var Ct=ot[xt];qe(g.symbolInstances.get(Ct),g.collisionArrays[Ct])}else for(var Et=o.symbolInstanceStart;Et<o.symbolInstanceEnd;Et++)qe(g.symbolInstances.get(Et),g.collisionArrays[Et]);if(a&&g.bucketInstanceId in this.collisionCircleArrays){var hr=this.collisionCircleArrays[g.bucketInstanceId];l.invert(hr.invProjMatrix,E),hr.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1},ve.prototype.markUsedJustification=function(o,s,a,p){var m;m=p===l.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(s)];for(var g=0,x=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];g<x.length;g+=1){var E=x[g];E>=0&&(o.text.placedSymbolArray.get(E).crossTileID=m>=0&&E!==m?0:a.crossTileID)}},ve.prototype.markUsedOrientation=function(o,s,a){for(var p=s===l.WritingMode.horizontal||s===l.WritingMode.horizontalOnly?s:0,m=s===l.WritingMode.vertical?s:0,g=0,x=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];g<x.length;g+=1)o.text.placedSymbolArray.get(x[g]).placedOrientation=p;a.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=m)},ve.prototype.commit=function(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,a=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var p=s?s.symbolFadeChange(o):1,m=s?s.opacities:{},g=s?s.variableOffsets:{},x=s?s.placedOrientations:{};for(var E in this.placements){var I=this.placements[E],D=m[E];D?(this.opacities[E]=new ki(D,p,I.text,I.icon),a=a||I.text!==D.text.placed||I.icon!==D.icon.placed):(this.opacities[E]=new ki(null,p,I.text,I.icon,I.skipFade),a=a||I.text||I.icon)}for(var N in m){var V=m[N];if(!this.opacities[N]){var Z=new ki(V,p,!1,!1);Z.isHidden()||(this.opacities[N]=Z,a=a||V.text.placed||V.icon.placed)}}for(var J in g)this.variableOffsets[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.variableOffsets[J]=g[J]);for(var Y in x)this.placedOrientations[Y]||!this.opacities[Y]||this.opacities[Y].isHidden()||(this.placedOrientations[Y]=x[Y]);a?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:o)},ve.prototype.updateLayerOpacities=function(o,s){for(var a={},p=0,m=s;p<m.length;p+=1){var g=m[p],x=g.getBucket(o);x&&g.latestFeatureIndex&&o.id===x.layerIds[0]&&this.updateBucketOpacities(x,a,g.collisionBoxArray)}},ve.prototype.updateBucketOpacities=function(o,s,a){var p=this;o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();var m=o.layers[0].layout,g=new ki(null,0,!1,!1,!0),x=m.get("text-allow-overlap"),E=m.get("icon-allow-overlap"),I=m.get("text-variable-anchor"),D=m.get("text-rotation-alignment")==="map",N=m.get("text-pitch-alignment")==="map",V=m.get("icon-text-fit")!=="none",Z=new ki(null,0,x&&(E||!o.hasIconData()||m.get("icon-optional")),E&&(x||!o.hasTextData()||m.get("text-optional")),!0);!o.collisionArrays&&a&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(a);for(var J=function(ne,ce,ye){for(var Te=0;Te<ce/4;Te++)ne.opacityVertexArray.emplaceBack(ye)},Y=function(ne){var ce=o.symbolInstances.get(ne),ye=ce.numHorizontalGlyphVertices,Te=ce.numVerticalGlyphVertices,we=ce.crossTileID,Ae=p.opacities[we];s[we]?Ae=g:Ae||(p.opacities[we]=Ae=Z),s[we]=!0;var Be=ce.numIconVertices>0,Ge=p.placedOrientations[ce.crossTileID],qe=Ge===l.WritingMode.vertical,ot=Ge===l.WritingMode.horizontal||Ge===l.WritingMode.horizontalOnly;if(ye>0||Te>0){var xt=zt(Ae.text);J(o.text,ye,qe?Ft:xt),J(o.text,Te,ot?Ft:xt);var Ct=Ae.text.isHidden();[ce.rightJustifiedTextSymbolIndex,ce.centerJustifiedTextSymbolIndex,ce.leftJustifiedTextSymbolIndex].forEach(function(kt){kt>=0&&(o.text.placedSymbolArray.get(kt).hidden=Ct||qe?1:0)}),ce.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(ce.verticalPlacedTextSymbolIndex).hidden=Ct||ot?1:0);var Et=p.variableOffsets[ce.crossTileID];Et&&p.markUsedJustification(o,Et.anchor,ce,Ge);var hr=p.placedOrientations[ce.crossTileID];hr&&(p.markUsedJustification(o,"left",ce,hr),p.markUsedOrientation(o,hr,ce))}if(Be){var ut=zt(Ae.icon),Nt=!(V&&ce.verticalPlacedIconSymbolIndex&&qe);ce.placedIconSymbolIndex>=0&&(J(o.icon,ce.numIconVertices,Nt?ut:Ft),o.icon.placedSymbolArray.get(ce.placedIconSymbolIndex).hidden=Ae.icon.isHidden()),ce.verticalPlacedIconSymbolIndex>=0&&(J(o.icon,ce.numVerticalIconVertices,Nt?Ft:ut),o.icon.placedSymbolArray.get(ce.verticalPlacedIconSymbolIndex).hidden=Ae.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){var Wt=o.collisionArrays[ne];if(Wt){var Bt=new l.Point(0,0);if(Wt.textBox||Wt.verticalTextBox){var Rt=!0;if(I){var Gt=p.variableOffsets[we];Gt?(Bt=F(Gt.anchor,Gt.width,Gt.height,Gt.textOffset,Gt.textBoxScale),D&&Bt._rotate(N?p.transform.angle:-p.transform.angle)):Rt=!1}Wt.textBox&&fe(o.textCollisionBox.collisionVertexArray,Ae.text.placed,!Rt||qe,Bt.x,Bt.y),Wt.verticalTextBox&&fe(o.textCollisionBox.collisionVertexArray,Ae.text.placed,!Rt||ot,Bt.x,Bt.y)}var Dt=Boolean(!ot&&Wt.verticalIconBox);Wt.iconBox&&fe(o.iconCollisionBox.collisionVertexArray,Ae.icon.placed,Dt,V?Bt.x:0,V?Bt.y:0),Wt.verticalIconBox&&fe(o.iconCollisionBox.collisionVertexArray,Ae.icon.placed,!Dt,V?Bt.x:0,V?Bt.y:0)}}},ie=0;ie<o.symbolInstances.length;ie++)Y(ie);if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){var W=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=W.invProjMatrix,o.placementViewportMatrix=W.viewportMatrix,o.collisionCircleArray=W.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}},ve.prototype.symbolFadeChange=function(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ve.prototype.zoomAdjustment=function(o){return Math.max(0,(this.transform.zoom-o)/1.5)},ve.prototype.hasTransitions=function(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration},ve.prototype.stillRecent=function(o,s){var a=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*a>o},ve.prototype.setStale=function(){this.stale=!0};var _e=Math.pow(2,25),Ze=Math.pow(2,24),Ve=Math.pow(2,17),ct=Math.pow(2,16),Ee=Math.pow(2,9),it=Math.pow(2,8),ht=Math.pow(2,1);function zt(o){if(o.opacity===0&&!o.placed)return 0;if(o.opacity===1&&o.placed)return 4294967295;var s=o.placed?1:0,a=Math.floor(127*o.opacity);return a*_e+s*Ze+a*Ve+s*ct+a*Ee+s*it+a*ht+s}var Ft=0,on=function(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};on.prototype.continuePlacement=function(o,s,a,p,m){for(var g=this._bucketParts;this._currentTileIndex<o.length;)if(s.getBucketParts(g,p,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,g.sort(function(x,E){return x.sortKey-E.sortKey}));this._currentPartIndex<g.length;)if(s.placeLayerBucketPart(g[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,m())return!0;return!1};var Re=function(o,s,a,p,m,g,x){this.placement=new ve(o,m,g,x),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=p,this._done=!1};Re.prototype.isDone=function(){return this._done},Re.prototype.continuePlacement=function(o,s,a){for(var p=this,m=l.browser.now(),g=function(){var I=l.browser.now()-m;return!p._forceFullPlacement&&I>2};this._currentPlacementIndex>=0;){var x=s[o[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=E)&&(!x.maxzoom||x.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new on(x)),this._inProgressLayer.continuePlacement(a[x.source],this.placement,this._showCollisionBoxes,x,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Re.prototype.commit=function(o){return this.placement.commit(o),this.placement};var yt=512/l.EXTENT/2,Sr=function(o,s,a){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var p=0;p<s.length;p++){var m=s.get(p),g=m.key;this.indexedSymbolInstances[g]||(this.indexedSymbolInstances[g]=[]),this.indexedSymbolInstances[g].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,o)})}};Sr.prototype.getScaledCoordinates=function(o,s){var a=yt/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*l.EXTENT+o.anchorX)*a),y:Math.floor((s.canonical.y*l.EXTENT+o.anchorY)*a)}},Sr.prototype.findMatches=function(o,s,a){for(var p=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),m=0;m<o.length;m++){var g=o.get(m);if(!g.crossTileID){var x=this.indexedSymbolInstances[g.key];if(x)for(var E=this.getScaledCoordinates(g,s),I=0,D=x;I<D.length;I+=1){var N=D[I];if(Math.abs(N.coord.x-E.x)<=p&&Math.abs(N.coord.y-E.y)<=p&&!a[N.crossTileID]){a[N.crossTileID]=!0,g.crossTileID=N.crossTileID;break}}}}};var rr=function(){this.maxCrossTileID=0};rr.prototype.generate=function(){return++this.maxCrossTileID};var kr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};kr.prototype.handleWrapJump=function(o){var s=Math.round((o-this.lng)/360);if(s!==0)for(var a in this.indexes){var p=this.indexes[a],m={};for(var g in p){var x=p[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+s),m[x.tileID.key]=x}this.indexes[a]=m}this.lng=o},kr.prototype.addBucket=function(o,s,a){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(var p=0;p<s.symbolInstances.length;p++)s.symbolInstances.get(p).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});var m=this.usedCrossTileIDs[o.overscaledZ];for(var g in this.indexes){var x=this.indexes[g];if(Number(g)>o.overscaledZ)for(var E in x){var I=x[E];I.tileID.isChildOf(o)&&I.findMatches(s.symbolInstances,o,m)}else{var D=x[o.scaledTo(Number(g)).key];D&&D.findMatches(s.symbolInstances,o,m)}}for(var N=0;N<s.symbolInstances.length;N++){var V=s.symbolInstances.get(N);V.crossTileID||(V.crossTileID=a.generate(),m[V.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Sr(o,s.symbolInstances,s.bucketInstanceId),!0},kr.prototype.removeBucketCrossTileIDs=function(o,s){for(var a in s.indexedSymbolInstances)for(var p=0,m=s.indexedSymbolInstances[a];p<m.length;p+=1)delete this.usedCrossTileIDs[o][m[p].crossTileID]},kr.prototype.removeStaleBuckets=function(o){var s=!1;for(var a in this.indexes){var p=this.indexes[a];for(var m in p)o[p[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,p[m]),delete p[m],s=!0)}return s};var St=function(){this.layerIndexes={},this.crossTileIDs=new rr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};St.prototype.addLayer=function(o,s,a){var p=this.layerIndexes[o.id];p===void 0&&(p=this.layerIndexes[o.id]=new kr);var m=!1,g={};p.handleWrapJump(a);for(var x=0,E=s;x<E.length;x+=1){var I=E[x],D=I.getBucket(o);D&&o.id===D.layerIds[0]&&(D.bucketInstanceId||(D.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(I.tileID,D,this.crossTileIDs)&&(m=!0),g[D.bucketInstanceId]=!0)}return p.removeStaleBuckets(g)&&(m=!0),m},St.prototype.pruneUnusedLayers=function(o){var s={};for(var a in o.forEach(function(p){s[p]=!0}),this.layerIndexes)s[a]||delete this.layerIndexes[a]};var Mi=function(o,s){return l.emitValidationErrors(o,s&&s.filter(function(a){return a.identifier!=="source.canvas"}))},li=l.pick(Ke,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ar=l.pick(Ke,["setCenter","setZoom","setBearing","setPitch"]),yi=function(){var o={},s=l.styleSpec.$version;for(var a in l.styleSpec.$root){var p,m=l.styleSpec.$root[a];m.required&&(p=a==="version"?s:m.type==="array"?[]:{})!=null&&(o[a]=p)}return o}(),jr=function(o){function s(a,p){var m=this;p===void 0&&(p={}),o.call(this),this.map=a,this.dispatcher=new ir(Ie(),this),this.imageManager=new ae,this.imageManager.setEventedParent(this),this.glyphManager=new pt(a._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Ut(256,512),this.crossTileSymbolIndex=new St,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var g=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(x){g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},function(E,I){if(l.triggerPluginCompletionEvent(E),I&&I.every(function(N){return N}))for(var D in g.sourceCaches)g.sourceCaches[D].reload()})}),this.on("data",function(x){if(x.dataType==="source"&&x.sourceDataType==="metadata"){var E=m.sourceCaches[x.sourceId];if(E){var I=E.getSource();if(I&&I.vectorLayerIds)for(var D in m._layers){var N=m._layers[D];N.source===I.id&&m._validateLayer(N)}}}})}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.loadURL=function(a,p){var m=this;p===void 0&&(p={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var g=typeof p.validate=="boolean"?p.validate:!l.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,p.accessToken);var x=this.map._requestManager.transformRequest(a,l.ResourceType.Style);this._request=l.getJSON(x,function(E,I){m._request=null,E?m.fire(new l.ErrorEvent(E)):I&&m._load(I,g)})},s.prototype.loadJSON=function(a,p){var m=this;p===void 0&&(p={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){m._request=null,m._load(a,p.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(yi,!1)},s.prototype._load=function(a,p){if(!p||!Mi(this,l.validateStyle(a))){for(var m in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(m,a.sources[m],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var g=Xe(this.stylesheet.layers);this._order=g.map(function(D){return D.id}),this._layers={},this._serializedLayers={};for(var x=0,E=g;x<E.length;x+=1){var I=E[x];(I=l.createStyleLayer(I)).setEventedParent(this,{layer:{id:I.id}}),this._layers[I.id]=I,this._serializedLayers[I.id]=I.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Fr(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},s.prototype._loadSprite=function(a){var p=this;this._spriteRequest=function(m,g,x){var E,I,D,N=l.browser.devicePixelRatio>1?"@2x":"",V=l.getJSON(g.transformRequest(g.normalizeSpriteURL(m,N,".json"),l.ResourceType.SpriteJSON),function(Y,ie){V=null,D||(D=Y,E=ie,J())}),Z=l.getImage(g.transformRequest(g.normalizeSpriteURL(m,N,".png"),l.ResourceType.SpriteImage),function(Y,ie){Z=null,D||(D=Y,I=ie,J())});function J(){if(D)x(D);else if(E&&I){var Y=l.browser.getImageData(I),ie={};for(var W in E){var ne=E[W],ce=ne.width,ye=ne.height,Te=ne.x,we=ne.y,Ae=ne.sdf,Be=ne.pixelRatio,Ge=ne.stretchX,qe=ne.stretchY,ot=ne.content,xt=new l.RGBAImage({width:ce,height:ye});l.RGBAImage.copy(Y,xt,{x:Te,y:we},{x:0,y:0},{width:ce,height:ye}),ie[W]={data:xt,pixelRatio:Be,sdf:Ae,stretchX:Ge,stretchY:qe,content:ot}}x(null,ie)}}return{cancel:function(){V&&(V.cancel(),V=null),Z&&(Z.cancel(),Z=null)}}}(a,this.map._requestManager,function(m,g){if(p._spriteRequest=null,m)p.fire(new l.ErrorEvent(m));else if(g)for(var x in g)p.imageManager.addImage(x,g[x]);p.imageManager.setLoaded(!0),p._availableImages=p.imageManager.listImages(),p.dispatcher.broadcast("setImages",p._availableImages),p.fire(new l.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(a){var p=this.sourceCaches[a.source];if(p){var m=a.sourceLayer;if(m){var g=p.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(m)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+g.id+'" as specified by style layer "'+a.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var p=[],m=0,g=a;m<g.length;m+=1){var x=this._layers[g[m]];x.type!=="custom"&&p.push(x.serialize())}return p},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var p in this._layers)if(this._layers[p].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(a){if(this._loaded){var p=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);for(var x in(m.length||g.length)&&this._updateWorkerLayers(m,g),this._updatedSources){var E=this._updatedSources[x];E==="reload"?this._reloadSource(x):E==="clear"&&this._clearSource(x)}for(var I in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[I].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var D={};for(var N in this.sourceCaches){var V=this.sourceCaches[N];D[N]=V.used,V.used=!1}for(var Z=0,J=this._order;Z<J.length;Z+=1){var Y=this._layers[J[Z]];Y.recalculate(a,this._availableImages),!Y.isHidden(a.zoom)&&Y.source&&(this.sourceCaches[Y.source].used=!0)}for(var ie in D){var W=this.sourceCaches[ie];D[ie]!==W.used&&W.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ie}))}this.light.recalculate(a),this.z=a.zoom,p&&this.fire(new l.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},s.prototype._updateWorkerLayers=function(a,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:p})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(a){var p=this;if(this._checkLoaded(),Mi(this,l.validateStyle(a)))return!1;(a=l.clone$1(a)).layers=Xe(a.layers);var m=function(x,E){if(!x)return[{command:Ke.setStyle,args:[E]}];var I=[];try{if(!l.deepEqual(x.version,E.version))return[{command:Ke.setStyle,args:[E]}];l.deepEqual(x.center,E.center)||I.push({command:Ke.setCenter,args:[E.center]}),l.deepEqual(x.zoom,E.zoom)||I.push({command:Ke.setZoom,args:[E.zoom]}),l.deepEqual(x.bearing,E.bearing)||I.push({command:Ke.setBearing,args:[E.bearing]}),l.deepEqual(x.pitch,E.pitch)||I.push({command:Ke.setPitch,args:[E.pitch]}),l.deepEqual(x.sprite,E.sprite)||I.push({command:Ke.setSprite,args:[E.sprite]}),l.deepEqual(x.glyphs,E.glyphs)||I.push({command:Ke.setGlyphs,args:[E.glyphs]}),l.deepEqual(x.transition,E.transition)||I.push({command:Ke.setTransition,args:[E.transition]}),l.deepEqual(x.light,E.light)||I.push({command:Ke.setLight,args:[E.light]});var D={},N=[];(function(Z,J,Y,ie){var W;for(W in J=J||{},Z=Z||{})Z.hasOwnProperty(W)&&(J.hasOwnProperty(W)||Qe(W,Y,ie));for(W in J)J.hasOwnProperty(W)&&(Z.hasOwnProperty(W)?l.deepEqual(Z[W],J[W])||(Z[W].type==="geojson"&&J[W].type==="geojson"&&Cr(Z,J,W)?Y.push({command:Ke.setGeoJSONSourceData,args:[W,J[W].data]}):tr(W,J,Y,ie)):jt(W,J,Y))})(x.sources,E.sources,N,D);var V=[];x.layers&&x.layers.forEach(function(Z){D[Z.source]?I.push({command:Ke.removeLayer,args:[Z.id]}):V.push(Z)}),I=I.concat(N),function(Z,J,Y){J=J||[];var ie,W,ne,ce,ye,Te,we,Ae=(Z=Z||[]).map(lr),Be=J.map(lr),Ge=Z.reduce(or,{}),qe=J.reduce(or,{}),ot=Ae.slice(),xt=Object.create(null);for(ie=0,W=0;ie<Ae.length;ie++)qe.hasOwnProperty(ne=Ae[ie])?W++:(Y.push({command:Ke.removeLayer,args:[ne]}),ot.splice(ot.indexOf(ne,W),1));for(ie=0,W=0;ie<Be.length;ie++)ot[ot.length-1-ie]!==(ne=Be[Be.length-1-ie])&&(Ge.hasOwnProperty(ne)?(Y.push({command:Ke.removeLayer,args:[ne]}),ot.splice(ot.lastIndexOf(ne,ot.length-W),1)):W++,Y.push({command:Ke.addLayer,args:[qe[ne],Te=ot[ot.length-ie]]}),ot.splice(ot.length-ie,0,ne),xt[ne]=!0);for(ie=0;ie<Be.length;ie++)if(ce=Ge[ne=Be[ie]],ye=qe[ne],!xt[ne]&&!l.deepEqual(ce,ye))if(l.deepEqual(ce.source,ye.source)&&l.deepEqual(ce["source-layer"],ye["source-layer"])&&l.deepEqual(ce.type,ye.type)){for(we in Mt(ce.layout,ye.layout,Y,ne,null,Ke.setLayoutProperty),Mt(ce.paint,ye.paint,Y,ne,null,Ke.setPaintProperty),l.deepEqual(ce.filter,ye.filter)||Y.push({command:Ke.setFilter,args:[ne,ye.filter]}),l.deepEqual(ce.minzoom,ye.minzoom)&&l.deepEqual(ce.maxzoom,ye.maxzoom)||Y.push({command:Ke.setLayerZoomRange,args:[ne,ye.minzoom,ye.maxzoom]}),ce)ce.hasOwnProperty(we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?Mt(ce[we],ye[we],Y,ne,we.slice(6),Ke.setPaintProperty):l.deepEqual(ce[we],ye[we])||Y.push({command:Ke.setLayerProperty,args:[ne,we,ye[we]]}));for(we in ye)ye.hasOwnProperty(we)&&!ce.hasOwnProperty(we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?Mt(ce[we],ye[we],Y,ne,we.slice(6),Ke.setPaintProperty):l.deepEqual(ce[we],ye[we])||Y.push({command:Ke.setLayerProperty,args:[ne,we,ye[we]]}))}else Y.push({command:Ke.removeLayer,args:[ne]}),Te=ot[ot.lastIndexOf(ne)+1],Y.push({command:Ke.addLayer,args:[ye,Te]})}(V,E.layers,I)}catch(Z){console.warn("Unable to compute style diff:",Z),I=[{command:Ke.setStyle,args:[E]}]}return I}(this.serialize(),a).filter(function(x){return!(x.command in ar)});if(m.length===0)return!1;var g=m.filter(function(x){return!(x.command in li)});if(g.length>0)throw new Error("Unimplemented: "+g.map(function(x){return x.command}).join(", ")+".");return m.forEach(function(x){x.command!=="setTransition"&&p[x.command].apply(p,x.args)}),this.stylesheet=a,!0},s.prototype.addImage=function(a,p){if(this.getImage(a))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,p),this._afterImageUpdated(a)},s.prototype.updateImage=function(a,p){this.imageManager.updateImage(a,p)},s.prototype.getImage=function(a){return this.imageManager.getImage(a)},s.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},s.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(a,p,m){var g=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!p.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(p).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(l.validateStyle.source,"sources."+a,p,null,m))){this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);var x=this.sourceCaches[a]=new Q(a,p,this.dispatcher);x.style=this,x.setEventedParent(this,function(){return{isSourceLoaded:g.loaded(),source:x.serialize(),sourceId:a}}),x.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var p in this._layers)if(this._layers[p].source===a)return this.fire(new l.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+p+'" is using it.')));var m=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],m.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(a,p){this._checkLoaded(),this.sourceCaches[a].getSource().setData(p),this._changed=!0},s.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},s.prototype.addLayer=function(a,p,m){m===void 0&&(m={}),this._checkLoaded();var g=a.id;if(this.getLayer(g))this.fire(new l.ErrorEvent(new Error('Layer with id "'+g+'" already exists on this map')));else{var x;if(a.type==="custom"){if(Mi(this,l.validateCustomStyleLayer(a)))return;x=l.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(g,a.source),a=l.clone$1(a),a=l.extend(a,{source:g})),this._validate(l.validateStyle.layer,"layers."+g,a,{arrayIndex:-1},m))return;x=l.createStyleLayer(a),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[x.id]=x.serialize()}var E=p?this._order.indexOf(p):this._order.length;if(p&&E===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+p+'" does not exist on this map.')));else{if(this._order.splice(E,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){var I=this._removedLayers[g];delete this._removedLayers[g],I.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}},s.prototype.moveLayer=function(a,p){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==p){var m=this._order.indexOf(a);this._order.splice(m,1);var g=p?this._order.indexOf(p):this._order.length;p&&g===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+p+'" does not exist on this map.'))):(this._order.splice(g,0,a),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(a){this._checkLoaded();var p=this._layers[a];if(p){p.setEventedParent(null);var m=this._order.indexOf(a);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=p,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],p.onRemove&&p.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(a){return this._layers[a]},s.prototype.hasLayer=function(a){return a in this._layers},s.prototype.setLayerZoomRange=function(a,p,m){this._checkLoaded();var g=this.getLayer(a);g?g.minzoom===p&&g.maxzoom===m||(p!=null&&(g.minzoom=p),m!=null&&(g.maxzoom=m),this._updateLayer(g)):this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(a,p,m){m===void 0&&(m={}),this._checkLoaded();var g=this.getLayer(a);if(g){if(!l.deepEqual(g.filter,p))return p==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.validateStyle.filter,"layers."+g.id+".filter",p,null,m)||(g.filter=l.clone$1(p),this._updateLayer(g)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(a){return l.clone$1(this.getLayer(a).filter)},s.prototype.setLayoutProperty=function(a,p,m,g){g===void 0&&(g={}),this._checkLoaded();var x=this.getLayer(a);x?l.deepEqual(x.getLayoutProperty(p),m)||(x.setLayoutProperty(p,m,g),this._updateLayer(x)):this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(a,p){var m=this.getLayer(a);if(m)return m.getLayoutProperty(p);this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(a,p,m,g){g===void 0&&(g={}),this._checkLoaded();var x=this.getLayer(a);x?l.deepEqual(x.getPaintProperty(p),m)||(x.setPaintProperty(p,m,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(a,p){return this.getLayer(a).getPaintProperty(p)},s.prototype.setFeatureState=function(a,p){this._checkLoaded();var m=a.source,g=a.sourceLayer,x=this.sourceCaches[m];if(x!==void 0){var E=x.getSource().type;E==="geojson"&&g?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||g?(a.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,a.id,p)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(a,p){this._checkLoaded();var m=a.source,g=this.sourceCaches[m];if(g!==void 0){var x=g.getSource().type,E=x==="vector"?a.sourceLayer:void 0;x!=="vector"||E?p&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(E,a.id,p):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(a){this._checkLoaded();var p=a.source,m=a.sourceLayer,g=this.sourceCaches[p];if(g!==void 0){if(g.getSource().type!=="vector"||m)return a.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(m,a.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+p+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},s.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(a){for(var p=this,m=function(Ge){return p._layers[Ge].type==="fill-extrusion"},g={},x=[],E=this._order.length-1;E>=0;E--){var I=this._order[E];if(m(I)){g[I]=E;for(var D=0,N=a;D<N.length;D+=1){var V=N[D][I];if(V)for(var Z=0,J=V;Z<J.length;Z+=1)x.push(J[Z])}}}x.sort(function(Ge,qe){return qe.intersectionZ-Ge.intersectionZ});for(var Y=[],ie=this._order.length-1;ie>=0;ie--){var W=this._order[ie];if(m(W))for(var ne=x.length-1;ne>=0;ne--){var ce=x[ne].feature;if(g[ce.layer.id]<ie)break;Y.push(ce),x.pop()}else for(var ye=0,Te=a;ye<Te.length;ye+=1){var we=Te[ye][W];if(we)for(var Ae=0,Be=we;Ae<Be.length;Ae+=1)Y.push(Be[Ae].feature)}}return Y},s.prototype.queryRenderedFeatures=function(a,p,m){p&&p.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",p.filter,null,p);var g={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var x=0,E=p.layers;x<E.length;x+=1){var I=E[x],D=this._layers[I];if(!D)return this.fire(new l.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be queried for features."))),[];g[D.source]=!0}}var N=[];for(var V in p.availableImages=this._availableImages,this.sourceCaches)p.layers&&!g[V]||N.push(Qr(this.sourceCaches[V],this._layers,this._serializedLayers,a,p,m));return this.placement&&N.push(function(Z,J,Y,ie,W,ne,ce){for(var ye={},Te=ne.queryRenderedSymbols(ie),we=[],Ae=0,Be=Object.keys(Te).map(Number);Ae<Be.length;Ae+=1)we.push(ce[Be[Ae]]);we.sort(si);for(var Ge=function(){var Et=ot[qe],hr=Et.featureIndex.lookupSymbolFeatures(Te[Et.bucketInstanceId],J,Et.bucketIndex,Et.sourceLayerIndex,W.filter,W.layers,W.availableImages,Z);for(var ut in hr){var Nt=ye[ut]=ye[ut]||[],Wt=hr[ut];Wt.sort(function(Gt,Dt){var kt=Et.featureSortOrder;if(kt){var Nn=kt.indexOf(Gt.featureIndex);return kt.indexOf(Dt.featureIndex)-Nn}return Dt.featureIndex-Gt.featureIndex});for(var Bt=0,Rt=Wt;Bt<Rt.length;Bt+=1)Nt.push(Rt[Bt])}},qe=0,ot=we;qe<ot.length;qe+=1)Ge();var xt=function(Et){ye[Et].forEach(function(hr){var ut=hr.feature,Nt=Y[Z[Et].source].getFeatureState(ut.layer["source-layer"],ut.id);ut.source=ut.layer.source,ut.layer["source-layer"]&&(ut.sourceLayer=ut.layer["source-layer"]),ut.state=Nt})};for(var Ct in ye)xt(Ct);return ye}(this._layers,this._serializedLayers,this.sourceCaches,a,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(N)},s.prototype.querySourceFeatures=function(a,p){p&&p.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",p.filter,null,p);var m=this.sourceCaches[a];return m?function(g,x){for(var E=g.getRenderableIds().map(function(J){return g.getTileByID(J)}),I=[],D={},N=0;N<E.length;N++){var V=E[N],Z=V.tileID.canonical.key;D[Z]||(D[Z]=!0,V.querySourceFeatures(I,x))}return I}(m,p):[]},s.prototype.addSourceType=function(a,p,m){return s.getSourceType(a)?m(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:p.workerSourceURL},m):m(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(a,p){p===void 0&&(p={}),this._checkLoaded();var m=this.light.getLight(),g=!1;for(var x in a)if(!l.deepEqual(a[x],m[x])){g=!0;break}if(g){var E={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,p),this.light.updateTransitions(E)}},s.prototype._validate=function(a,p,m,g,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&Mi(this,a.call(l.validateStyle,l.extend({key:p,style:this.serialize(),value:m,styleSpec:l.styleSpec},g)))},s.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var p in this.sourceCaches)this.sourceCaches[p].clearTiles(),this.sourceCaches[p].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},s.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},s.prototype._updateSources=function(a){for(var p in this.sourceCaches)this.sourceCaches[p].update(a)},s.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},s.prototype._updatePlacement=function(a,p,m,g,x){x===void 0&&(x=!1);for(var E=!1,I=!1,D={},N=0,V=this._order;N<V.length;N+=1){var Z=this._layers[V[N]];if(Z.type==="symbol"){if(!D[Z.source]){var J=this.sourceCaches[Z.source];D[Z.source]=J.getRenderableIds(!0).map(function(ce){return J.getTileByID(ce)}).sort(function(ce,ye){return ye.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(ye.tileID)?-1:1)})}var Y=this.crossTileSymbolIndex.addLayer(Z,D[Z.source],a.center.lng);E=E||Y}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),a.zoom))&&(this.pauseablePlacement=new Re(a,this._order,x,p,m,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),I=!0),E&&this.pauseablePlacement.placement.setStale()),I||E)for(var ie=0,W=this._order;ie<W.length;ie+=1){var ne=this._layers[W[ie]];ne.type==="symbol"&&this.placement.updateLayerOpacities(ne,D[ne.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,p,m){this.imageManager.getImages(p.icons,m),this._updateTilesForChangedImages();var g=this.sourceCaches[p.source];g&&g.setDependencies(p.tileID.key,p.type,p.icons)},s.prototype.getGlyphs=function(a,p,m){this.glyphManager.getGlyphs(p.stacks,m)},s.prototype.getResource=function(a,p,m){return l.makeRequest(p,m)},s}(l.Evented);jr.getSourceType=function(o){return Zr[o]},jr.setSourceType=function(o,s){Zr[o]=s},jr.registerForPluginStateChange=l.registerForPluginStateChange;var rn=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),Da=br(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),vo=br(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ol=br(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Rl=br(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),$u=br("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),au=br(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),is=br(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),su=br("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Xu=br("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Fl=br("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Oa=br(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),os=br(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),zs=br(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Bl=br(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),En=br(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ra=br(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Mo=br(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),zo=br(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ko=br(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),go=br(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),pa=br(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Fa=br(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ba=br(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ha=br(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Ul=br(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ku=br(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function br(o,s){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=s.match(/attribute ([\w]+) ([\w]+)/g),m=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=g?g.concat(m):m,E={};return{fragmentSource:o=o.replace(a,function(I,D,N,V,Z){return E[Z]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_`+Z+`
varying `+N+" "+V+" "+Z+`;
#else
uniform `+N+" "+V+" u_"+Z+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Z+`
    `+N+" "+V+" "+Z+" = u_"+Z+`;
#endif
`}),vertexSource:s=s.replace(a,function(I,D,N,V,Z){var J=V==="float"?"vec2":"vec4",Y=Z.match(/color/)?"color":J;return E[Z]?D==="define"?`
#ifndef HAS_UNIFORM_u_`+Z+`
uniform lowp float u_`+Z+`_t;
attribute `+N+" "+J+" a_"+Z+`;
varying `+N+" "+V+" "+Z+`;
#else
uniform `+N+" "+V+" u_"+Z+`;
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+Z+" = a_"+Z+`;
#else
    `+N+" "+V+" "+Z+" = u_"+Z+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+Z+" = unpack_mix_"+Y+"(a_"+Z+", u_"+Z+`_t);
#else
    `+N+" "+V+" "+Z+" = u_"+Z+`;
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_`+Z+`
uniform lowp float u_`+Z+`_t;
attribute `+N+" "+J+" a_"+Z+`;
#else
uniform `+N+" "+V+" u_"+Z+`;
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+N+" "+V+" "+Z+" = a_"+Z+`;
#else
    `+N+" "+V+" "+Z+" = u_"+Z+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+N+" "+V+" "+Z+" = unpack_mix_"+Y+"(a_"+Z+", u_"+Z+`_t);
#else
    `+N+" "+V+" "+Z+" = u_"+Z+`;
#endif
`}),staticAttributes:p,staticUniforms:x}}var Ua=Object.freeze({__proto__:null,prelude:Da,background:vo,backgroundPattern:Ol,circle:Rl,clippingMask:$u,heatmap:au,heatmapTexture:is,collisionBox:su,collisionCircle:Xu,debug:Fl,fill:Oa,fillOutline:os,fillOutlinePattern:zs,fillPattern:Bl,fillExtrusion:En,fillExtrusionPattern:Ra,hillshadePrepare:Mo,hillshade:zo,line:Ko,lineGradient:go,linePattern:pa,lineSDF:Fa,raster:Ba,symbolIcon:ha,symbolSDF:Ul,symbolTextAndIcon:Ku}),Ki=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function fa(o){for(var s=[],a=0;a<o.length;a++)if(o[a]!==null){var p=o[a].split(" ");s.push(p.pop())}return s}Ki.prototype.bind=function(o,s,a,p,m,g,x,E){this.context=o;for(var I=this.boundPaintVertexBuffers.length!==p.length,D=0;!I&&D<p.length;D++)this.boundPaintVertexBuffers[D]!==p[D]&&(I=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===a&&!I&&this.boundIndexBuffer===m&&this.boundVertexOffset===g&&this.boundDynamicVertexBuffer===x&&this.boundDynamicVertexBuffer2===E?(o.bindVertexArrayOES.set(this.vao),x&&x.bind(),m&&m.dynamicDraw&&m.bind(),E&&E.bind()):this.freshBind(s,a,p,m,g,x,E)},Ki.prototype.freshBind=function(o,s,a,p,m,g,x){var E,I=o.numAttributes,D=this.context,N=D.gl;if(D.extVertexArrayObject)this.vao&&this.destroy(),this.vao=D.extVertexArrayObject.createVertexArrayOES(),D.bindVertexArrayOES.set(this.vao),E=0,this.boundProgram=o,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=p,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=g,this.boundDynamicVertexBuffer2=x;else{E=D.currentNumAttributes||0;for(var V=I;V<E;V++)N.disableVertexAttribArray(V)}s.enableAttributes(N,o);for(var Z=0,J=a;Z<J.length;Z+=1)J[Z].enableAttributes(N,o);g&&g.enableAttributes(N,o),x&&x.enableAttributes(N,o),s.bind(),s.setVertexAttribPointers(N,o,m);for(var Y=0,ie=a;Y<ie.length;Y+=1){var W=ie[Y];W.bind(),W.setVertexAttribPointers(N,o,m)}g&&(g.bind(),g.setVertexAttribPointers(N,o,m)),p&&p.bind(),x&&(x.bind(),x.setVertexAttribPointers(N,o,m)),D.currentNumAttributes=I},Ki.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ls=function(o,s,a,p,m,g){var x=o.gl;this.program=x.createProgram();for(var E=fa(a.staticAttributes),I=p?p.getBinderAttributes():[],D=E.concat(I),N=a.staticUniforms?fa(a.staticUniforms):[],V=p?p.getBinderUniforms():[],Z=[],J=0,Y=N.concat(V);J<Y.length;J+=1){var ie=Y[J];Z.indexOf(ie)<0&&Z.push(ie)}var W=p?p.defines():[];g&&W.push("#define OVERDRAW_INSPECTOR;");var ne=W.concat(Da.fragmentSource,a.fragmentSource).join(`
`),ce=W.concat(Da.vertexSource,a.vertexSource).join(`
`),ye=x.createShader(x.FRAGMENT_SHADER);if(x.isContextLost())this.failedToCreate=!0;else{x.shaderSource(ye,ne),x.compileShader(ye),x.attachShader(this.program,ye);var Te=x.createShader(x.VERTEX_SHADER);if(x.isContextLost())this.failedToCreate=!0;else{x.shaderSource(Te,ce),x.compileShader(Te),x.attachShader(this.program,Te),this.attributes={};var we={};this.numAttributes=D.length;for(var Ae=0;Ae<this.numAttributes;Ae++)D[Ae]&&(x.bindAttribLocation(this.program,Ae,D[Ae]),this.attributes[D[Ae]]=Ae);x.linkProgram(this.program),x.deleteShader(Te),x.deleteShader(ye);for(var Be=0;Be<Z.length;Be++){var Ge=Z[Be];if(Ge&&!we[Ge]){var qe=x.getUniformLocation(this.program,Ge);qe&&(we[Ge]=qe)}}this.fixedUniforms=m(o,we),this.binderUniforms=p?p.getUniforms(o,we):[]}}};function Ho(o,s,a){var p=1/Nr(a,1,s.transform.tileZoom),m=Math.pow(2,a.tileID.overscaledZ),g=a.tileSize*Math.pow(2,s.transform.tileZoom)/m,x=g*(a.tileID.canonical.x+a.tileID.wrap*m),E=g*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[p,o.fromScale,o.toScale],u_fade:o.t,u_pixel_coord_upper:[x>>16,E>>16],u_pixel_coord_lower:[65535&x,65535&E]}}Ls.prototype.draw=function(o,s,a,p,m,g,x,E,I,D,N,V,Z,J,Y,ie){var W,ne=o.gl;if(!this.failedToCreate){for(var ce in o.program.set(this.program),o.setDepthMode(a),o.setStencilMode(p),o.setColorMode(m),o.setCullFace(g),this.fixedUniforms)this.fixedUniforms[ce].set(x[ce]);J&&J.setUniforms(o,this.binderUniforms,V,{zoom:Z});for(var ye=(W={},W[ne.LINES]=2,W[ne.TRIANGLES]=3,W[ne.LINE_STRIP]=1,W)[s],Te=0,we=N.get();Te<we.length;Te+=1){var Ae=we[Te],Be=Ae.vaos||(Ae.vaos={});(Be[E]||(Be[E]=new Ki)).bind(o,this,I,J?J.getPaintVertexBuffers():[],D,Ae.vertexOffset,Y,ie),ne.drawElements(s,Ae.primitiveLength*ye,ne.UNSIGNED_SHORT,Ae.primitiveOffset*ye*2)}}};var Nl=function(o,s,a,p){var m=s.style.light,g=m.properties.get("position"),x=[g.x,g.y,g.z],E=l.create$1();m.properties.get("anchor")==="viewport"&&l.fromRotation(E,-s.transform.angle),l.transformMat3(x,x,E);var I=m.properties.get("color");return{u_matrix:o,u_lightpos:x,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+a,u_opacity:p}},Lo=function(o,s,a,p,m,g,x){return l.extend(Nl(o,s,a,p),Ho(g,s,x),{u_height_factor:-Math.pow(2,m.overscaledZ)/x.tileSize/8})},Hi=function(o){return{u_matrix:o}},da=function(o,s,a,p){return l.extend(Hi(o),Ho(a,s,p))},Hu=function(o,s){return{u_matrix:o,u_world:s}},jl=function(o,s,a,p,m){return l.extend(da(o,s,a,p),{u_world:m})},Yu=function(o,s,a,p){var m,g,x=o.transform;if(p.paint.get("circle-pitch-alignment")==="map"){var E=Nr(a,1,x.zoom);m=!0,g=[E,E]}else m=!1,g=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:o.translatePosMatrix(s.posMatrix,a,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:g}},ma=function(o,s,a){var p=Nr(a,1,s.zoom),m=Math.pow(2,s.zoom-a.tileID.overscaledZ),g=a.tileID.overscaleFactor();return{u_matrix:o,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[s.pixelsToGLUnits[0]/(p*m),s.pixelsToGLUnits[1]/(p*m)],u_overscale_factor:g}},Ju=function(o,s,a){return{u_matrix:o,u_inv_matrix:s,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},Do=function(o,s,a){return a===void 0&&(a=1),{u_matrix:o,u_color:s,u_overlay:0,u_overlay_scale:a}},Yi=function(o){return{u_matrix:o}},Vl=function(o,s,a,p){return{u_matrix:o,u_extrude_scale:Nr(s,1,a),u_intensity:p}},Ji=function(o,s,a){var p=o.transform;return{u_matrix:Ds(o,s,a),u_ratio:1/Nr(s,1,p.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Dr=function(o,s,a,p){return l.extend(Ji(o,s,a),{u_image:0,u_image_height:p})},Oo=function(o,s,a,p){var m=o.transform,g=as(s,m);return{u_matrix:Ds(o,s,a),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Nr(s,1,m.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[g,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},ql=function(o,s,a,p,m){var g=o.lineAtlas,x=as(s,o.transform),E=a.layout.get("line-cap")==="round",I=g.getDash(p.from,E),D=g.getDash(p.to,E),N=I.width*m.fromScale,V=D.width*m.toScale;return l.extend(Ji(o,s,a),{u_patternscale_a:[x/N,-I.height/2],u_patternscale_b:[x/V,-D.height/2],u_sdfgamma:g.width/(256*Math.min(N,V)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:D.y,u_mix:m.t})};function as(o,s){return 1/Nr(o,1,s.tileZoom)}function Ds(o,s,a){return o.translatePosMatrix(s.tileID.posMatrix,s,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var Qu=function(o,s,a,p,m){return{u_matrix:o,u_tl_parent:s,u_scale_parent:a,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(x=m.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(g=m.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:el(m.paint.get("raster-hue-rotate"))};var g,x};function el(o){o*=Math.PI/180;var s=Math.sin(o),a=Math.cos(o);return[(2*a+1)/3,(-Math.sqrt(3)*s-a+1)/3,(Math.sqrt(3)*s-a+1)/3]}var Os,Na=function(o,s,a,p,m,g,x,E,I,D){var N=m.transform;return{u_is_size_zoom_constant:+(o==="constant"||o==="source"),u_is_size_feature_constant:+(o==="constant"||o==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:N.cameraToCenterDistance,u_pitch:N.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:N.width/N.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:g,u_label_plane_matrix:x,u_coord_matrix:E,u_is_text:+I,u_pitch_with_map:+p,u_texsize:D,u_texture:0}},Yo=function(o,s,a,p,m,g,x,E,I,D,N){var V=m.transform;return l.extend(Na(o,s,a,p,m,g,x,E,I,D),{u_gamma_scale:p?Math.cos(V._pitch)*V.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+N})},Rs=function(o,s,a,p,m,g,x,E,I,D){return l.extend(Yo(o,s,a,p,m,g,x,E,!0,I,!0),{u_texsize_icon:D,u_texture_icon:1})},Fs=function(o,s,a){return{u_matrix:o,u_opacity:s,u_color:a}},de=function(o,s,a,p,m,g){return l.extend(function(x,E,I,D){var N=I.imageManager.getPattern(x.from.toString()),V=I.imageManager.getPattern(x.to.toString()),Z=I.imageManager.getPixelSize(),J=Z.width,Y=Z.height,ie=Math.pow(2,D.tileID.overscaledZ),W=D.tileSize*Math.pow(2,I.transform.tileZoom)/ie,ne=W*(D.tileID.canonical.x+D.tileID.wrap*ie),ce=W*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[J,Y],u_mix:E.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Nr(D,1,I.transform.tileZoom),u_pixel_coord_upper:[ne>>16,ce>>16],u_pixel_coord_lower:[65535&ne,65535&ce]}}(p,g,a,m),{u_matrix:o,u_opacity:s})},ze={fillExtrusion:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_lightpos:new l.Uniform3f(o,s.u_lightpos),u_lightintensity:new l.Uniform1f(o,s.u_lightintensity),u_lightcolor:new l.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new l.Uniform1f(o,s.u_vertical_gradient),u_opacity:new l.Uniform1f(o,s.u_opacity)}},fillExtrusionPattern:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_lightpos:new l.Uniform3f(o,s.u_lightpos),u_lightintensity:new l.Uniform1f(o,s.u_lightintensity),u_lightcolor:new l.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new l.Uniform1f(o,s.u_vertical_gradient),u_height_factor:new l.Uniform1f(o,s.u_height_factor),u_image:new l.Uniform1i(o,s.u_image),u_texsize:new l.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,s.u_scale),u_fade:new l.Uniform1f(o,s.u_fade),u_opacity:new l.Uniform1f(o,s.u_opacity)}},fill:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix)}},fillPattern:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_image:new l.Uniform1i(o,s.u_image),u_texsize:new l.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,s.u_scale),u_fade:new l.Uniform1f(o,s.u_fade)}},fillOutline:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_world:new l.Uniform2f(o,s.u_world)}},fillOutlinePattern:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_world:new l.Uniform2f(o,s.u_world),u_image:new l.Uniform1i(o,s.u_image),u_texsize:new l.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,s.u_scale),u_fade:new l.Uniform1f(o,s.u_fade)}},circle:function(o,s){return{u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(o,s.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(o,s.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(o,s.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(o,s.u_matrix)}},collisionBox:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(o,s.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(o,s.u_extrude_scale),u_overscale_factor:new l.Uniform1f(o,s.u_overscale_factor)}},collisionCircle:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_inv_matrix:new l.UniformMatrix4f(o,s.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(o,s.u_viewport_size)}},debug:function(o,s){return{u_color:new l.UniformColor(o,s.u_color),u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_overlay:new l.Uniform1i(o,s.u_overlay),u_overlay_scale:new l.Uniform1f(o,s.u_overlay_scale)}},clippingMask:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix)}},heatmap:function(o,s){return{u_extrude_scale:new l.Uniform1f(o,s.u_extrude_scale),u_intensity:new l.Uniform1f(o,s.u_intensity),u_matrix:new l.UniformMatrix4f(o,s.u_matrix)}},heatmapTexture:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_world:new l.Uniform2f(o,s.u_world),u_image:new l.Uniform1i(o,s.u_image),u_color_ramp:new l.Uniform1i(o,s.u_color_ramp),u_opacity:new l.Uniform1f(o,s.u_opacity)}},hillshade:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_image:new l.Uniform1i(o,s.u_image),u_latrange:new l.Uniform2f(o,s.u_latrange),u_light:new l.Uniform2f(o,s.u_light),u_shadow:new l.UniformColor(o,s.u_shadow),u_highlight:new l.UniformColor(o,s.u_highlight),u_accent:new l.UniformColor(o,s.u_accent)}},hillshadePrepare:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_image:new l.Uniform1i(o,s.u_image),u_dimension:new l.Uniform2f(o,s.u_dimension),u_zoom:new l.Uniform1f(o,s.u_zoom),u_unpack:new l.Uniform4f(o,s.u_unpack)}},line:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_ratio:new l.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,s.u_units_to_pixels)}},lineGradient:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_ratio:new l.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,s.u_units_to_pixels),u_image:new l.Uniform1i(o,s.u_image),u_image_height:new l.Uniform1f(o,s.u_image_height)}},linePattern:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_texsize:new l.Uniform2f(o,s.u_texsize),u_ratio:new l.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_image:new l.Uniform1i(o,s.u_image),u_units_to_pixels:new l.Uniform2f(o,s.u_units_to_pixels),u_scale:new l.Uniform3f(o,s.u_scale),u_fade:new l.Uniform1f(o,s.u_fade)}},lineSDF:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_ratio:new l.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,s.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(o,s.u_patternscale_a),u_patternscale_b:new l.Uniform2f(o,s.u_patternscale_b),u_sdfgamma:new l.Uniform1f(o,s.u_sdfgamma),u_image:new l.Uniform1i(o,s.u_image),u_tex_y_a:new l.Uniform1f(o,s.u_tex_y_a),u_tex_y_b:new l.Uniform1f(o,s.u_tex_y_b),u_mix:new l.Uniform1f(o,s.u_mix)}},raster:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_tl_parent:new l.Uniform2f(o,s.u_tl_parent),u_scale_parent:new l.Uniform1f(o,s.u_scale_parent),u_buffer_scale:new l.Uniform1f(o,s.u_buffer_scale),u_fade_t:new l.Uniform1f(o,s.u_fade_t),u_opacity:new l.Uniform1f(o,s.u_opacity),u_image0:new l.Uniform1i(o,s.u_image0),u_image1:new l.Uniform1i(o,s.u_image1),u_brightness_low:new l.Uniform1f(o,s.u_brightness_low),u_brightness_high:new l.Uniform1f(o,s.u_brightness_high),u_saturation_factor:new l.Uniform1f(o,s.u_saturation_factor),u_contrast_factor:new l.Uniform1f(o,s.u_contrast_factor),u_spin_weights:new l.Uniform3f(o,s.u_spin_weights)}},symbolIcon:function(o,s){return{u_is_size_zoom_constant:new l.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,s.u_size_t),u_size:new l.Uniform1f(o,s.u_size),u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,s.u_pitch),u_rotate_symbol:new l.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,s.u_fade_change),u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new l.Uniform1i(o,s.u_is_text),u_pitch_with_map:new l.Uniform1i(o,s.u_pitch_with_map),u_texsize:new l.Uniform2f(o,s.u_texsize),u_texture:new l.Uniform1i(o,s.u_texture)}},symbolSDF:function(o,s){return{u_is_size_zoom_constant:new l.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,s.u_size_t),u_size:new l.Uniform1f(o,s.u_size),u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,s.u_pitch),u_rotate_symbol:new l.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,s.u_fade_change),u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new l.Uniform1i(o,s.u_is_text),u_pitch_with_map:new l.Uniform1i(o,s.u_pitch_with_map),u_texsize:new l.Uniform2f(o,s.u_texsize),u_texture:new l.Uniform1i(o,s.u_texture),u_gamma_scale:new l.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(o,s.u_is_halo)}},symbolTextAndIcon:function(o,s){return{u_is_size_zoom_constant:new l.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,s.u_size_t),u_size:new l.Uniform1f(o,s.u_size),u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,s.u_pitch),u_rotate_symbol:new l.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,s.u_fade_change),u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new l.Uniform1i(o,s.u_is_text),u_pitch_with_map:new l.Uniform1i(o,s.u_pitch_with_map),u_texsize:new l.Uniform2f(o,s.u_texsize),u_texsize_icon:new l.Uniform2f(o,s.u_texsize_icon),u_texture:new l.Uniform1i(o,s.u_texture),u_texture_icon:new l.Uniform1i(o,s.u_texture_icon),u_gamma_scale:new l.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(o,s.u_is_halo)}},background:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_opacity:new l.Uniform1f(o,s.u_opacity),u_color:new l.UniformColor(o,s.u_color)}},backgroundPattern:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_opacity:new l.Uniform1f(o,s.u_opacity),u_image:new l.Uniform1i(o,s.u_image),u_pattern_tl_a:new l.Uniform2f(o,s.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(o,s.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(o,s.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(o,s.u_pattern_br_b),u_texsize:new l.Uniform2f(o,s.u_texsize),u_mix:new l.Uniform1f(o,s.u_mix),u_pattern_size_a:new l.Uniform2f(o,s.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(o,s.u_pattern_size_b),u_scale_a:new l.Uniform1f(o,s.u_scale_a),u_scale_b:new l.Uniform1f(o,s.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,s.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(o,s.u_tile_units_to_pixels)}}};function et(o,s,a,p,m,g,x){for(var E=o.context,I=E.gl,D=o.useProgram("collisionBox"),N=[],V=0,Z=0,J=0;J<p.length;J++){var Y=p[J],ie=s.getTile(Y),W=ie.getBucket(a);if(W){var ne=Y.posMatrix;m[0]===0&&m[1]===0||(ne=o.translatePosMatrix(Y.posMatrix,ie,m,g));var ce=x?W.textCollisionBox:W.iconCollisionBox,ye=W.collisionCircleArray;if(ye.length>0){var Te=l.create(),we=ne;l.mul(Te,W.placementInvProjMatrix,o.transform.glCoordMatrix),l.mul(Te,Te,W.placementViewportMatrix),N.push({circleArray:ye,circleOffset:Z,transform:we,invTransform:Te}),Z=V+=ye.length/4}ce&&D.draw(E,I.LINES,G.disabled,K.disabled,o.colorModeForRenderPass(),pe.disabled,ma(ne,o.transform,ie),a.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,null,o.transform.zoom,null,null,ce.collisionVertexBuffer)}}if(x&&N.length){var Ae=o.useProgram("collisionCircle"),Be=new l.StructArrayLayout2f1f2i16;Be.resize(4*V),Be._trim();for(var Ge=0,qe=0,ot=N;qe<ot.length;qe+=1)for(var xt=ot[qe],Ct=0;Ct<xt.circleArray.length/4;Ct++){var Et=4*Ct,hr=xt.circleArray[Et+0],ut=xt.circleArray[Et+1],Nt=xt.circleArray[Et+2],Wt=xt.circleArray[Et+3];Be.emplace(Ge++,hr,ut,Nt,Wt,0),Be.emplace(Ge++,hr,ut,Nt,Wt,1),Be.emplace(Ge++,hr,ut,Nt,Wt,2),Be.emplace(Ge++,hr,ut,Nt,Wt,3)}(!Os||Os.length<2*V)&&(Os=function(hn){var pi=2*hn,Yn=new l.StructArrayLayout3ui6;Yn.resize(pi),Yn._trim();for(var sn=0;sn<pi;sn++){var gn=6*sn;Yn.uint16[gn+0]=4*sn+0,Yn.uint16[gn+1]=4*sn+1,Yn.uint16[gn+2]=4*sn+2,Yn.uint16[gn+3]=4*sn+2,Yn.uint16[gn+4]=4*sn+3,Yn.uint16[gn+5]=4*sn+0}return Yn}(V));for(var Bt=E.createIndexBuffer(Os,!0),Rt=E.createVertexBuffer(Be,l.collisionCircleLayout.members,!0),Gt=0,Dt=N;Gt<Dt.length;Gt+=1){var kt=Dt[Gt],Nn=Ju(kt.transform,kt.invTransform,o.transform);Ae.draw(E,I.TRIANGLES,G.disabled,K.disabled,o.colorModeForRenderPass(),pe.disabled,Nn,a.id,Rt,Bt,l.SegmentVector.simpleSegment(0,2*kt.circleOffset,kt.circleArray.length,kt.circleArray.length/2),null,o.transform.zoom,null,null,null)}Rt.destroy(),Bt.destroy()}}var gt=l.identity(new Float32Array(16));function Gr(o,s,a,p,m,g){var x=l.getAnchorAlignment(o),E=-(x.horizontalAlign-.5)*s,I=-(x.verticalAlign-.5)*a,D=l.evaluateVariableOffset(o,p);return new l.Point((E/m+D[0])*g,(I/m+D[1])*g)}function pr(o,s,a,p,m,g,x,E,I,D,N){var V=o.text.placedSymbolArray,Z=o.text.dynamicLayoutVertexArray,J=o.icon.dynamicLayoutVertexArray,Y={};Z.clear();for(var ie=0;ie<V.length;ie++){var W=V.get(ie),ne=W.hidden||!W.crossTileID||o.allowVerticalPlacement&&!W.placedOrientation?null:p[W.crossTileID];if(ne){var ce=new l.Point(W.anchorX,W.anchorY),ye=It(ce,a?E:x),Te=cr(g.cameraToCenterDistance,ye.signedDistanceFromCamera),we=m.evaluateSizeForFeature(o.textSizeData,D,W)*Te/l.ONE_EM;a&&(we*=o.tilePixelRatio/I);for(var Ae=Gr(ne.anchor,ne.width,ne.height,ne.textOffset,ne.textBoxScale,we),Be=a?It(ce.add(Ae),x).point:ye.point.add(s?Ae.rotate(-g.angle):Ae),Ge=o.allowVerticalPlacement&&W.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,qe=0;qe<W.numGlyphs;qe++)l.addDynamicAttributes(Z,Be,Ge);N&&W.associatedIconIndex>=0&&(Y[W.associatedIconIndex]={shiftedAnchor:Be,angle:Ge})}else ii(W.numGlyphs,Z)}if(N){J.clear();for(var ot=o.icon.placedSymbolArray,xt=0;xt<ot.length;xt++){var Ct=ot.get(xt);if(Ct.hidden)ii(Ct.numGlyphs,J);else{var Et=Y[xt];if(Et)for(var hr=0;hr<Ct.numGlyphs;hr++)l.addDynamicAttributes(J,Et.shiftedAnchor,Et.angle);else ii(Ct.numGlyphs,J)}}o.icon.dynamicLayoutVertexBuffer.updateData(J)}o.text.dynamicLayoutVertexBuffer.updateData(Z)}function an(o,s,a){return a.iconsInText&&s?"symbolTextAndIcon":o?"symbolSDF":"symbolIcon"}function Wr(o,s,a,p,m,g,x,E,I,D,N,V){for(var Z=o.context,J=Z.gl,Y=o.transform,ie=E==="map",W=I==="map",ne=ie&&a.layout.get("symbol-placement")!=="point",ce=ie&&!W&&!ne,ye=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,Te=!1,we=o.depthModeForSublayer(0,G.ReadOnly),Ae=a.layout.get("text-variable-anchor"),Be=[],Ge=0,qe=p;Ge<qe.length;Ge+=1){var ot=qe[Ge],xt=s.getTile(ot),Ct=xt.getBucket(a);if(Ct){var Et=m?Ct.text:Ct.icon;if(Et&&Et.segments.get().length){var hr=Et.programConfigurations.get(a.id),ut=m||Ct.sdfIcons,Nt=m?Ct.textSizeData:Ct.iconSizeData,Wt=W||Y.pitch!==0,Bt=o.useProgram(an(ut,m,Ct),hr),Rt=l.evaluateSizeForZoom(Nt,Y.zoom),Gt=void 0,Dt=[0,0],kt=void 0,Nn=void 0,hn=null,pi=void 0;if(m)kt=xt.glyphAtlasTexture,Nn=J.LINEAR,Gt=xt.glyphAtlasTexture.size,Ct.iconsInText&&(Dt=xt.imageAtlasTexture.size,hn=xt.imageAtlasTexture,pi=Wt||o.options.rotating||o.options.zooming||Nt.kind==="composite"||Nt.kind==="camera"?J.LINEAR:J.NEAREST);else{var Yn=a.layout.get("icon-size").constantOr(0)!==1||Ct.iconsNeedLinear;kt=xt.imageAtlasTexture,Nn=ut||o.options.rotating||o.options.zooming||Yn||Wt?J.LINEAR:J.NEAREST,Gt=xt.imageAtlasTexture.size}var sn=Nr(xt,1,o.transform.zoom),gn=en(ot.posMatrix,W,ie,o.transform,sn),ao=xr(ot.posMatrix,W,ie,o.transform,sn),_i=Ae&&Ct.hasTextData(),ps=a.layout.get("icon-text-fit")!=="none"&&_i&&Ct.hasIconData();ne&&Xi(Ct,ot.posMatrix,o,m,gn,ao,W,D);var Li=o.translatePosMatrix(ot.posMatrix,xt,g,x),oa=ne||m&&Ae||ps?gt:gn,Uo=o.translatePosMatrix(ao,xt,g,x,!0),al=ut&&a.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,du={program:Bt,buffers:Et,uniformValues:ut?Ct.iconsInText?Rs(Nt.kind,Rt,ce,W,o,Li,oa,Uo,Gt,Dt):Yo(Nt.kind,Rt,ce,W,o,Li,oa,Uo,m,Gt,!0):Na(Nt.kind,Rt,ce,W,o,Li,oa,Uo,m,Gt),atlasTexture:kt,atlasTextureIcon:hn,atlasInterpolation:Nn,atlasInterpolationIcon:pi,isSDF:ut,hasHalo:al};if(ye&&Ct.canOverlap){Te=!0;for(var hs=0,mu=Et.segments.get();hs<mu.length;hs+=1){var sl=mu[hs];Be.push({segments:new l.SegmentVector([sl]),sortKey:sl.sortKey,state:du})}}else Be.push({segments:Et.segments,sortKey:0,state:du})}}}Te&&Be.sort(function(fs,Zs){return fs.sortKey-Zs.sortKey});for(var wa=0,ul=Be;wa<ul.length;wa+=1){var Sa=ul[wa],jn=Sa.state;if(Z.activeTexture.set(J.TEXTURE0),jn.atlasTexture.bind(jn.atlasInterpolation,J.CLAMP_TO_EDGE),jn.atlasTextureIcon&&(Z.activeTexture.set(J.TEXTURE1),jn.atlasTextureIcon&&jn.atlasTextureIcon.bind(jn.atlasInterpolationIcon,J.CLAMP_TO_EDGE)),jn.isSDF){var Wa=jn.uniformValues;jn.hasHalo&&(Wa.u_is_halo=1,ci(jn.buffers,Sa.segments,a,o,jn.program,we,N,V,Wa)),Wa.u_is_halo=0}ci(jn.buffers,Sa.segments,a,o,jn.program,we,N,V,jn.uniformValues)}}function ci(o,s,a,p,m,g,x,E,I){var D=p.context;m.draw(D,D.gl.TRIANGLES,g,x,E,pe.disabled,I,a.id,o.layoutVertexBuffer,o.indexBuffer,s,a.paint,p.transform.zoom,o.programConfigurations.get(a.id),o.dynamicLayoutVertexBuffer,o.opacityVertexBuffer)}function cn(o,s,a,p,m,g,x){var E,I,D,N,V,Z=o.context.gl,J=a.paint.get("fill-pattern"),Y=J&&J.constantOr(1),ie=a.getCrossfadeParameters();x?(I=Y&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",E=Z.LINES):(I=Y?"fillPattern":"fill",E=Z.TRIANGLES);for(var W=0,ne=p;W<ne.length;W+=1){var ce=ne[W],ye=s.getTile(ce);if(!Y||ye.patternsLoaded()){var Te=ye.getBucket(a);if(Te){var we=Te.programConfigurations.get(a.id),Ae=o.useProgram(I,we);Y&&(o.context.activeTexture.set(Z.TEXTURE0),ye.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),we.updatePaintBuffers(ie));var Be=J.constantOr(null);if(Be&&ye.imageAtlas){var Ge=ye.imageAtlas,qe=Ge.patternPositions[Be.to.toString()],ot=Ge.patternPositions[Be.from.toString()];qe&&ot&&we.setConstantPatternPositions(qe,ot)}var xt=o.translatePosMatrix(ce.posMatrix,ye,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(x){N=Te.indexBuffer2,V=Te.segments2;var Ct=[Z.drawingBufferWidth,Z.drawingBufferHeight];D=I==="fillOutlinePattern"&&Y?jl(xt,o,ie,ye,Ct):Hu(xt,Ct)}else N=Te.indexBuffer,V=Te.segments,D=Y?da(xt,o,ie,ye):Hi(xt);Ae.draw(o.context,E,m,o.stencilModeForClipping(ce),g,pe.disabled,D,a.id,Te.layoutVertexBuffer,N,V,a.paint,o.transform.zoom,we)}}}}function vn(o,s,a,p,m,g,x){for(var E=o.context,I=E.gl,D=a.paint.get("fill-extrusion-pattern"),N=D.constantOr(1),V=a.getCrossfadeParameters(),Z=a.paint.get("fill-extrusion-opacity"),J=0,Y=p;J<Y.length;J+=1){var ie=Y[J],W=s.getTile(ie),ne=W.getBucket(a);if(ne){var ce=ne.programConfigurations.get(a.id),ye=o.useProgram(N?"fillExtrusionPattern":"fillExtrusion",ce);N&&(o.context.activeTexture.set(I.TEXTURE0),W.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ce.updatePaintBuffers(V));var Te=D.constantOr(null);if(Te&&W.imageAtlas){var we=W.imageAtlas,Ae=we.patternPositions[Te.to.toString()],Be=we.patternPositions[Te.from.toString()];Ae&&Be&&ce.setConstantPatternPositions(Ae,Be)}var Ge=o.translatePosMatrix(ie.posMatrix,W,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),qe=a.paint.get("fill-extrusion-vertical-gradient"),ot=N?Lo(Ge,o,qe,Z,ie,V,W):Nl(Ge,o,qe,Z);ye.draw(E,E.gl.TRIANGLES,m,g,x,pe.backCCW,ot,a.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,a.paint,o.transform.zoom,ce)}}}function zi(o,s,a,p,m,g){var x=o.context,E=x.gl,I=s.fbo;if(I){var D=o.useProgram("hillshade");x.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,I.colorAttachment.get());var N=function(V,Z,J){var Y=J.paint.get("hillshade-shadow-color"),ie=J.paint.get("hillshade-highlight-color"),W=J.paint.get("hillshade-accent-color"),ne=J.paint.get("hillshade-illumination-direction")*(Math.PI/180);J.paint.get("hillshade-illumination-anchor")==="viewport"&&(ne-=V.transform.angle);var ce,ye,Te,we=!V.options.moving;return{u_matrix:V.transform.calculatePosMatrix(Z.tileID.toUnwrapped(),we),u_image:0,u_latrange:(ce=Z.tileID,ye=Math.pow(2,ce.canonical.z),Te=ce.canonical.y,[new l.MercatorCoordinate(0,Te/ye).toLngLat().lat,new l.MercatorCoordinate(0,(Te+1)/ye).toLngLat().lat]),u_light:[J.paint.get("hillshade-exaggeration"),ne],u_shadow:Y,u_highlight:ie,u_accent:W}}(o,s,a);D.draw(x,E.TRIANGLES,p,m,g,pe.disabled,N,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}}function Jo(o,s,a,p,m,g){var x=o.context,E=x.gl,I=s.dem;if(I&&I.data){var D=I.dim,N=I.stride,V=I.getPixels();if(x.activeTexture.set(E.TEXTURE1),x.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||o.getTileTexture(N),s.demTexture){var Z=s.demTexture;Z.update(V,{premultiply:!1}),Z.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else s.demTexture=new l.Texture(x,V,E.RGBA,{premultiply:!1}),s.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);x.activeTexture.set(E.TEXTURE0);var J=s.fbo;if(!J){var Y=new l.Texture(x,{width:D,height:D,data:null},E.RGBA);Y.bind(E.LINEAR,E.CLAMP_TO_EDGE),(J=s.fbo=x.createFramebuffer(D,D,!0)).colorAttachment.set(Y.texture)}x.bindFramebuffer.set(J.framebuffer),x.viewport.set([0,0,D,D]),o.useProgram("hillshadePrepare").draw(x,E.TRIANGLES,p,m,g,pe.disabled,function(ie,W){var ne=W.stride,ce=l.create();return l.ortho(ce,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ce,ce,[0,-l.EXTENT,0]),{u_matrix:ce,u_image:1,u_dimension:[ne,ne],u_zoom:ie.overscaledZ,u_unpack:W.getUnpackVector()}}(s.tileID,I),a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Un(o,s,a,p,m){var g=p.paint.get("raster-fade-duration");if(g>0){var x=l.browser.now(),E=(x-o.timeAdded)/g,I=s?(x-s.timeAdded)/g:-1,D=a.getSource(),N=m.coveringZoomLevel({tileSize:D.tileSize,roundZoom:D.roundZoom}),V=!s||Math.abs(s.tileID.overscaledZ-N)>Math.abs(o.tileID.overscaledZ-N),Z=V&&o.refreshedUponExpiration?1:l.clamp(V?E:1-I,0,1);return o.refreshedUponExpiration&&E>=1&&(o.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}var _o=new l.Color(1,0,0,1),ja=new l.Color(0,1,0,1),Bs=new l.Color(0,0,1,1),Qo=new l.Color(1,0,1,1),Va=new l.Color(0,1,1,1);function uu(o,s,a,p){Us(o,0,s+a/2,o.transform.width,a,p)}function tl(o,s,a,p){Us(o,s-a/2,0,a,o.transform.height,p)}function Us(o,s,a,p,m,g){var x=o.context,E=x.gl;E.enable(E.SCISSOR_TEST),E.scissor(s*l.browser.devicePixelRatio,a*l.browser.devicePixelRatio,p*l.browser.devicePixelRatio,m*l.browser.devicePixelRatio),x.clear({color:g}),E.disable(E.SCISSOR_TEST)}function Ur(o,s,a){var p=o.context,m=p.gl,g=a.posMatrix,x=o.useProgram("debug"),E=G.disabled,I=K.disabled,D=o.colorModeForRenderPass();p.activeTexture.set(m.TEXTURE0),o.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),x.draw(p,m.LINE_STRIP,E,I,D,pe.disabled,Do(g,l.Color.red),"$debug",o.debugBuffer,o.tileBorderIndexBuffer,o.debugSegments);var N=s.getTileByID(a.key).latestRawTileData,V=Math.floor((N&&N.byteLength||0)/1024),Z=s.getTile(a).tileSize,J=512/Math.min(Z,512)*(a.overscaledZ/o.transform.zoom)*.5,Y=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(Y+=" => "+a.overscaledZ),function(ie,W){ie.initDebugOverlayCanvas();var ne=ie.debugOverlayCanvas,ce=ie.context.gl,ye=ie.debugOverlayCanvas.getContext("2d");ye.clearRect(0,0,ne.width,ne.height),ye.shadowColor="white",ye.shadowBlur=2,ye.lineWidth=1.5,ye.strokeStyle="white",ye.textBaseline="top",ye.font="bold 36px Open Sans, sans-serif",ye.fillText(W,5,5),ye.strokeText(W,5,5),ie.debugOverlayTexture.update(ne),ie.debugOverlayTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)}(o,Y+" "+V+"kb"),x.draw(p,m.TRIANGLES,E,I,se.alphaBlended,pe.disabled,Do(g,l.Color.transparent,J),"$debug",o.debugBuffer,o.quadTriangleIndexBuffer,o.debugSegments)}var yr={symbol:function(o,s,a,p,m){if(o.renderPass==="translucent"){var g=K.disabled,x=o.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(E,I,D,N,V,Z,J){for(var Y=I.transform,ie=V==="map",W=Z==="map",ne=0,ce=E;ne<ce.length;ne+=1){var ye=ce[ne],Te=N.getTile(ye),we=Te.getBucket(D);if(we&&we.text&&we.text.segments.get().length){var Ae=l.evaluateSizeForZoom(we.textSizeData,Y.zoom),Be=Nr(Te,1,I.transform.zoom),Ge=en(ye.posMatrix,W,ie,I.transform,Be),qe=D.layout.get("icon-text-fit")!=="none"&&we.hasIconData();if(Ae){var ot=Math.pow(2,Y.zoom-Te.tileID.overscaledZ);pr(we,ie,W,J,l.symbolSize,Y,Ge,ye.posMatrix,ot,Ae,qe)}}}}(p,o,a,s,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),m),a.paint.get("icon-opacity").constantOr(1)!==0&&Wr(o,s,a,p,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),g,x),a.paint.get("text-opacity").constantOr(1)!==0&&Wr(o,s,a,p,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),g,x),s.map.showCollisionBoxes&&(et(o,s,a,p,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),et(o,s,a,p,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(o,s,a,p){if(o.renderPass==="translucent"){var m=a.paint.get("circle-opacity"),g=a.paint.get("circle-stroke-width"),x=a.paint.get("circle-stroke-opacity"),E=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||g.constantOr(1)!==0&&x.constantOr(1)!==0){for(var I=o.context,D=I.gl,N=o.depthModeForSublayer(0,G.ReadOnly),V=K.disabled,Z=o.colorModeForRenderPass(),J=[],Y=0;Y<p.length;Y++){var ie=p[Y],W=s.getTile(ie),ne=W.getBucket(a);if(ne){var ce=ne.programConfigurations.get(a.id),ye={programConfiguration:ce,program:o.useProgram("circle",ce),layoutVertexBuffer:ne.layoutVertexBuffer,indexBuffer:ne.indexBuffer,uniformValues:Yu(o,ie,W,a)};if(E)for(var Te=0,we=ne.segments.get();Te<we.length;Te+=1){var Ae=we[Te];J.push({segments:new l.SegmentVector([Ae]),sortKey:Ae.sortKey,state:ye})}else J.push({segments:ne.segments,sortKey:0,state:ye})}}E&&J.sort(function(xt,Ct){return xt.sortKey-Ct.sortKey});for(var Be=0,Ge=J;Be<Ge.length;Be+=1){var qe=Ge[Be],ot=qe.state;ot.program.draw(I,D.TRIANGLES,N,V,Z,pe.disabled,ot.uniformValues,a.id,ot.layoutVertexBuffer,ot.indexBuffer,qe.segments,a.paint,o.transform.zoom,ot.programConfiguration)}}}},heatmap:function(o,s,a,p){if(a.paint.get("heatmap-opacity")!==0)if(o.renderPass==="offscreen"){var m=o.context,g=m.gl,x=K.disabled,E=new se([g.ONE,g.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(J,Y,ie){var W=J.gl;J.activeTexture.set(W.TEXTURE1),J.viewport.set([0,0,Y.width/4,Y.height/4]);var ne=ie.heatmapFbo;if(ne)W.bindTexture(W.TEXTURE_2D,ne.colorAttachment.get()),J.bindFramebuffer.set(ne.framebuffer);else{var ce=W.createTexture();W.bindTexture(W.TEXTURE_2D,ce),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.LINEAR),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.LINEAR),ne=ie.heatmapFbo=J.createFramebuffer(Y.width/4,Y.height/4,!1),function(ye,Te,we,Ae){var Be=ye.gl;Be.texImage2D(Be.TEXTURE_2D,0,Be.RGBA,Te.width/4,Te.height/4,0,Be.RGBA,ye.extRenderToTextureHalfFloat?ye.extTextureHalfFloat.HALF_FLOAT_OES:Be.UNSIGNED_BYTE,null),Ae.colorAttachment.set(we)}(J,Y,ce,ne)}})(m,o,a),m.clear({color:l.Color.transparent});for(var I=0;I<p.length;I++){var D=p[I];if(!s.hasRenderableParent(D)){var N=s.getTile(D),V=N.getBucket(a);if(V){var Z=V.programConfigurations.get(a.id);o.useProgram("heatmap",Z).draw(m,g.TRIANGLES,G.disabled,x,E,pe.disabled,Vl(D.posMatrix,N,o.transform.zoom,a.paint.get("heatmap-intensity")),a.id,V.layoutVertexBuffer,V.indexBuffer,V.segments,a.paint,o.transform.zoom,Z)}}}m.viewport.set([0,0,o.width,o.height])}else o.renderPass==="translucent"&&(o.context.setColorMode(o.colorModeForRenderPass()),function(J,Y){var ie=J.context,W=ie.gl,ne=Y.heatmapFbo;if(ne){ie.activeTexture.set(W.TEXTURE0),W.bindTexture(W.TEXTURE_2D,ne.colorAttachment.get()),ie.activeTexture.set(W.TEXTURE1);var ce=Y.colorRampTexture;ce||(ce=Y.colorRampTexture=new l.Texture(ie,Y.colorRamp,W.RGBA)),ce.bind(W.LINEAR,W.CLAMP_TO_EDGE),J.useProgram("heatmapTexture").draw(ie,W.TRIANGLES,G.disabled,K.disabled,J.colorModeForRenderPass(),pe.disabled,function(ye,Te,we,Ae){var Be=l.create();l.ortho(Be,0,ye.width,ye.height,0,0,1);var Ge=ye.context.gl;return{u_matrix:Be,u_world:[Ge.drawingBufferWidth,Ge.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Te.paint.get("heatmap-opacity")}}(J,Y),Y.id,J.viewportBuffer,J.quadTriangleIndexBuffer,J.viewportSegments,Y.paint,J.transform.zoom)}}(o,a))},line:function(o,s,a,p){if(o.renderPass==="translucent"){var m=a.paint.get("line-opacity"),g=a.paint.get("line-width");if(m.constantOr(1)!==0&&g.constantOr(1)!==0)for(var x=o.depthModeForSublayer(0,G.ReadOnly),E=o.colorModeForRenderPass(),I=a.paint.get("line-dasharray"),D=a.paint.get("line-pattern"),N=D.constantOr(1),V=a.paint.get("line-gradient"),Z=a.getCrossfadeParameters(),J=N?"linePattern":I?"lineSDF":V?"lineGradient":"line",Y=o.context,ie=Y.gl,W=!0,ne=0,ce=p;ne<ce.length;ne+=1){var ye=ce[ne],Te=s.getTile(ye);if(!N||Te.patternsLoaded()){var we=Te.getBucket(a);if(we){var Ae=we.programConfigurations.get(a.id),Be=o.context.program.get(),Ge=o.useProgram(J,Ae),qe=W||Ge.program!==Be,ot=D.constantOr(null);if(ot&&Te.imageAtlas){var xt=Te.imageAtlas,Ct=xt.patternPositions[ot.to.toString()],Et=xt.patternPositions[ot.from.toString()];Ct&&Et&&Ae.setConstantPatternPositions(Ct,Et)}var hr=N?Oo(o,Te,a,Z):I?ql(o,Te,a,I,Z):V?Dr(o,Te,a,we.lineClipsArray.length):Ji(o,Te,a);if(N)Y.activeTexture.set(ie.TEXTURE0),Te.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),Ae.updatePaintBuffers(Z);else if(I&&(qe||o.lineAtlas.dirty))Y.activeTexture.set(ie.TEXTURE0),o.lineAtlas.bind(Y);else if(V){var ut=we.gradients[a.id],Nt=ut.texture;if(a.gradientVersion!==ut.version){var Wt=256;if(a.stepInterpolant){var Bt=s.getSource().maxzoom,Rt=ye.canonical.z===Bt?Math.ceil(1<<o.transform.maxZoom-ye.canonical.z):1;Wt=l.clamp(l.nextPowerOfTwo(we.maxLineLength/l.EXTENT*1024*Rt),256,Y.maxTextureSize)}ut.gradient=l.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Wt,image:ut.gradient||void 0,clips:we.lineClipsArray}),ut.texture?ut.texture.update(ut.gradient):ut.texture=new l.Texture(Y,ut.gradient,ie.RGBA),ut.version=a.gradientVersion,Nt=ut.texture}Y.activeTexture.set(ie.TEXTURE0),Nt.bind(a.stepInterpolant?ie.NEAREST:ie.LINEAR,ie.CLAMP_TO_EDGE)}Ge.draw(Y,ie.TRIANGLES,x,o.stencilModeForClipping(ye),E,pe.disabled,hr,a.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,a.paint,o.transform.zoom,Ae,we.layoutVertexBuffer2),W=!1}}}}},fill:function(o,s,a,p){var m=a.paint.get("fill-color"),g=a.paint.get("fill-opacity");if(g.constantOr(1)!==0){var x=o.colorModeForRenderPass(),E=a.paint.get("fill-pattern"),I=o.opaquePassEnabledForLayer()&&!E.constantOr(1)&&m.constantOr(l.Color.transparent).a===1&&g.constantOr(0)===1?"opaque":"translucent";if(o.renderPass===I){var D=o.depthModeForSublayer(1,o.renderPass==="opaque"?G.ReadWrite:G.ReadOnly);cn(o,s,a,p,D,x,!1)}if(o.renderPass==="translucent"&&a.paint.get("fill-antialias")){var N=o.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,G.ReadOnly);cn(o,s,a,p,N,x,!0)}}},"fill-extrusion":function(o,s,a,p){var m=a.paint.get("fill-extrusion-opacity");if(m!==0&&o.renderPass==="translucent"){var g=new G(o.context.gl.LEQUAL,G.ReadWrite,o.depthRangeFor3D);if(m!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))vn(o,s,a,p,g,K.disabled,se.disabled),vn(o,s,a,p,g,o.stencilModeFor3D(),o.colorModeForRenderPass());else{var x=o.colorModeForRenderPass();vn(o,s,a,p,g,K.disabled,x)}}},hillshade:function(o,s,a,p){if(o.renderPass==="offscreen"||o.renderPass==="translucent"){for(var m=o.context,g=o.depthModeForSublayer(0,G.ReadOnly),x=o.colorModeForRenderPass(),E=o.renderPass==="translucent"?o.stencilConfigForOverlap(p):[{},p],I=E[0],D=0,N=E[1];D<N.length;D+=1){var V=N[D],Z=s.getTile(V);Z.needsHillshadePrepare&&o.renderPass==="offscreen"?Jo(o,Z,a,g,K.disabled,x):o.renderPass==="translucent"&&zi(o,Z,a,g,I[V.overscaledZ],x)}m.viewport.set([0,0,o.width,o.height])}},raster:function(o,s,a,p){if(o.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&p.length)for(var m=o.context,g=m.gl,x=s.getSource(),E=o.useProgram("raster"),I=o.colorModeForRenderPass(),D=x instanceof At?[{},p]:o.stencilConfigForOverlap(p),N=D[0],V=D[1],Z=V[V.length-1].overscaledZ,J=!o.options.moving,Y=0,ie=V;Y<ie.length;Y+=1){var W=ie[Y],ne=o.depthModeForSublayer(W.overscaledZ-Z,a.paint.get("raster-opacity")===1?G.ReadWrite:G.ReadOnly,g.LESS),ce=s.getTile(W),ye=o.transform.calculatePosMatrix(W.toUnwrapped(),J);ce.registerFadeDuration(a.paint.get("raster-fade-duration"));var Te=s.findLoadedParent(W,0),we=Un(ce,Te,s,a,o.transform),Ae=void 0,Be=void 0,Ge=a.paint.get("raster-resampling")==="nearest"?g.NEAREST:g.LINEAR;m.activeTexture.set(g.TEXTURE0),ce.texture.bind(Ge,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(g.TEXTURE1),Te?(Te.texture.bind(Ge,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),Ae=Math.pow(2,Te.tileID.overscaledZ-ce.tileID.overscaledZ),Be=[ce.tileID.canonical.x*Ae%1,ce.tileID.canonical.y*Ae%1]):ce.texture.bind(Ge,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST);var qe=Qu(ye,Be||[0,0],Ae||1,we,a);x instanceof At?E.draw(m,g.TRIANGLES,ne,K.disabled,I,pe.disabled,qe,a.id,x.boundsBuffer,o.quadTriangleIndexBuffer,x.boundsSegments):E.draw(m,g.TRIANGLES,ne,N[W.overscaledZ],I,pe.disabled,qe,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}},background:function(o,s,a){var p=a.paint.get("background-color"),m=a.paint.get("background-opacity");if(m!==0){var g=o.context,x=g.gl,E=o.transform,I=E.tileSize,D=a.paint.get("background-pattern");if(!o.isPatternMissing(D)){var N=!D&&p.a===1&&m===1&&o.opaquePassEnabledForLayer()?"opaque":"translucent";if(o.renderPass===N){var V=K.disabled,Z=o.depthModeForSublayer(0,N==="opaque"?G.ReadWrite:G.ReadOnly),J=o.colorModeForRenderPass(),Y=o.useProgram(D?"backgroundPattern":"background"),ie=E.coveringTiles({tileSize:I});D&&(g.activeTexture.set(x.TEXTURE0),o.imageManager.bind(o.context));for(var W=a.getCrossfadeParameters(),ne=0,ce=ie;ne<ce.length;ne+=1){var ye=ce[ne],Te=o.transform.calculatePosMatrix(ye.toUnwrapped()),we=D?de(Te,m,o,D,{tileID:ye,tileSize:I},W):Fs(Te,m,p);Y.draw(g,x.TRIANGLES,Z,V,J,pe.disabled,we,a.id,o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}}}},debug:function(o,s,a){for(var p=0;p<a.length;p++)Ur(o,s,a[p])},custom:function(o,s,a){var p=o.context,m=a.implementation;if(o.renderPass==="offscreen"){var g=m.prerender;g&&(o.setCustomLayerDefaults(),p.setColorMode(o.colorModeForRenderPass()),g.call(m,p.gl,o.transform.customLayerMatrix()),p.setDirty(),o.setBaseState())}else if(o.renderPass==="translucent"){o.setCustomLayerDefaults(),p.setColorMode(o.colorModeForRenderPass()),p.setStencilMode(K.disabled);var x=m.renderingMode==="3d"?new G(o.context.gl.LEQUAL,G.ReadWrite,o.depthRangeFor3D):o.depthModeForSublayer(0,G.ReadOnly);p.setDepthMode(x),m.render(p.gl,o.transform.customLayerMatrix()),p.setDirty(),o.setBaseState(),p.bindFramebuffer.set(null)}}},Ar=function(o,s){this.context=new j(o),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=Q.maxUnderzooming+Q.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new St,this.gpuTimers={}};Ar.prototype.resize=function(o,s){if(this.width=o*l.browser.devicePixelRatio,this.height=s*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,p=this.style._order;a<p.length;a+=1)this.style._layers[p[a]].resize()},Ar.prototype.setup=function(){var o=this.context,s=new l.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(l.EXTENT,0),s.emplaceBack(0,l.EXTENT),s.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(s,rn.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var a=new l.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(l.EXTENT,0),a.emplaceBack(0,l.EXTENT),a.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=o.createVertexBuffer(a,rn.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var p=new l.StructArrayLayout4i8;p.emplaceBack(0,0,0,0),p.emplaceBack(l.EXTENT,0,l.EXTENT,0),p.emplaceBack(0,l.EXTENT,0,l.EXTENT),p.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(p,Ye.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var m=new l.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(m,rn.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var g=new l.StructArrayLayout1ui2;g.emplaceBack(0),g.emplaceBack(1),g.emplaceBack(3),g.emplaceBack(2),g.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(g);var x=new l.StructArrayLayout3ui6;x.emplaceBack(0,1,2),x.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(x),this.emptyTexture=new l.Texture(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);var E=this.context.gl;this.stencilClearMode=new K({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)},Ar.prototype.clearStencil=function(){var o=this.context,s=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=l.create();l.ortho(a,0,this.width,this.height,0,0,1),l.scale(a,a,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,s.TRIANGLES,G.disabled,this.stencilClearMode,se.disabled,pe.disabled,Yi(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ar.prototype._renderTileClippingMasks=function(o,s){if(this.currentStencilSource!==o.source&&o.isTileClipped()&&s&&s.length){this.currentStencilSource=o.source;var a=this.context,p=a.gl;this.nextStencilID+s.length>256&&this.clearStencil(),a.setColorMode(se.disabled),a.setDepthMode(G.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var g=0,x=s;g<x.length;g+=1){var E=x[g],I=this._tileClippingMaskIDs[E.key]=this.nextStencilID++;m.draw(a,p.TRIANGLES,G.disabled,new K({func:p.ALWAYS,mask:0},I,255,p.KEEP,p.KEEP,p.REPLACE),se.disabled,pe.disabled,Yi(E.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ar.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var o=this.nextStencilID++,s=this.context.gl;return new K({func:s.NOTEQUAL,mask:255},o,255,s.KEEP,s.KEEP,s.REPLACE)},Ar.prototype.stencilModeForClipping=function(o){var s=this.context.gl;return new K({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,s.KEEP,s.KEEP,s.REPLACE)},Ar.prototype.stencilConfigForOverlap=function(o){var s,a=this.context.gl,p=o.sort(function(I,D){return D.overscaledZ-I.overscaledZ}),m=p[p.length-1].overscaledZ,g=p[0].overscaledZ-m+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();for(var x={},E=0;E<g;E++)x[E+m]=new K({func:a.GEQUAL,mask:255},E+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=g,[x,p]}return[(s={},s[m]=K.disabled,s),p]},Ar.prototype.colorModeForRenderPass=function(){var o=this.context.gl;return this._showOverdrawInspector?new se([o.CONSTANT_COLOR,o.ONE],new l.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?se.unblended:se.alphaBlended},Ar.prototype.depthModeForSublayer=function(o,s,a){if(!this.opaquePassEnabledForLayer())return G.disabled;var p=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new G(a||this.context.gl.LEQUAL,s,[p,p])},Ar.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ar.prototype.render=function(o,s){var a=this;this.style=o,this.options=s,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var p=this.style._order,m=this.style.sourceCaches;for(var g in m){var x=m[g];x.used&&x.prepare(this.context)}var E,I,D={},N={},V={};for(var Z in m){var J=m[Z];D[Z]=J.getVisibleCoordinates(),N[Z]=D[Z].slice().reverse(),V[Z]=J.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Y=0;Y<p.length;Y++)if(this.style._layers[p[Y]].is3D()){this.opaquePassCutoff=Y;break}this.renderPass="offscreen";for(var ie=0,W=p;ie<W.length;ie+=1){var ne=this.style._layers[W[ie]];if(ne.hasOffscreenPass()&&!ne.isHidden(this.transform.zoom)){var ce=N[ne.source];(ne.type==="custom"||ce.length)&&this.renderLayer(this,m[ne.source],ne,ce)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){var ye=this.style._layers[p[this.currentLayer]],Te=m[ye.source],we=D[ye.source];this._renderTileClippingMasks(ye,we),this.renderLayer(this,Te,ye,we)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){var Ae=this.style._layers[p[this.currentLayer]],Be=m[Ae.source],Ge=(Ae.type==="symbol"?V:N)[Ae.source];this._renderTileClippingMasks(Ae,D[Ae.source]),this.renderLayer(this,Be,Ae,Ge)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(qe){qe.source&&!qe.isHidden(a.transform.zoom)&&(qe.source!==(I&&I.id)&&(I=a.style.sourceCaches[qe.source]),(!E||E.getSource().maxzoom<I.getSource().maxzoom)&&(E=I))}),E&&yr.debug(this,E,E.getVisibleCoordinates())),this.options.showPadding&&function(qe){var ot=qe.transform.padding;uu(qe,qe.transform.height-(ot.top||0),3,_o),uu(qe,ot.bottom||0,3,ja),tl(qe,ot.left||0,3,Bs),tl(qe,qe.transform.width-(ot.right||0),3,Qo);var xt=qe.transform.centerPoint;(function(Ct,Et,hr,ut){Us(Ct,Et-1,hr-10,2,20,ut),Us(Ct,Et-10,hr-1,20,2,ut)})(qe,xt.x,qe.transform.height-xt.y,Va)}(this),this.context.setDefault()},Ar.prototype.renderLayer=function(o,s,a,p){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||p.length)&&(this.id=a.id,this.gpuTimingStart(a),yr[a.type](o,s,a,p,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ar.prototype.gpuTimingStart=function(o){if(this.options.gpuTiming){var s=this.context.extTimerQuery,a=this.gpuTimers[o.id];a||(a=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),a.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,a.query)}},Ar.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}},Ar.prototype.collectGpuTimers=function(){var o=this.gpuTimers;return this.gpuTimers={},o},Ar.prototype.queryGpuTimers=function(o){var s={};for(var a in o){var p=o[a],m=this.context.extTimerQuery,g=m.getQueryObjectEXT(p.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(p.query),s[a]=g}return s},Ar.prototype.translatePosMatrix=function(o,s,a,p,m){if(!a[0]&&!a[1])return o;var g=m?p==="map"?this.transform.angle:0:p==="viewport"?-this.transform.angle:0;if(g){var x=Math.sin(g),E=Math.cos(g);a=[a[0]*E-a[1]*x,a[0]*x+a[1]*E]}var I=[m?a[0]:Nr(s,a[0],this.transform.zoom),m?a[1]:Nr(s,a[1],this.transform.zoom),0],D=new Float32Array(16);return l.translate(D,o,I),D},Ar.prototype.saveTileTexture=function(o){var s=this._tileTextures[o.size[0]];s?s.push(o):this._tileTextures[o.size[0]]=[o]},Ar.prototype.getTileTexture=function(o){var s=this._tileTextures[o];return s&&s.length>0?s.pop():null},Ar.prototype.isPatternMissing=function(o){if(!o)return!1;if(!o.from||!o.to)return!0;var s=this.imageManager.getPattern(o.from.toString()),a=this.imageManager.getPattern(o.to.toString());return!s||!a},Ar.prototype.useProgram=function(o,s){this.cache=this.cache||{};var a=""+o+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new Ls(this.context,o,Ua[o],s,ze[o],this._showOverdrawInspector)),this.cache[a]},Ar.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ar.prototype.setBaseState=function(){var o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)},Ar.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ar.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var xo=function(o,s){this.points=o,this.planes=s};xo.fromInvProjectionMatrix=function(o,s,a){var p=Math.pow(2,a),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(x){return l.transformMat4([],x,o)}).map(function(x){return l.scale$1([],x,1/x[3]/s*p)}),g=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(x){var E=l.sub([],m[x[0]],m[x[1]]),I=l.sub([],m[x[2]],m[x[1]]),D=l.normalize([],l.cross([],E,I)),N=-l.dot(D,m[x[1]]);return D.concat(N)});return new xo(m,g)};var ea=function(o,s){this.min=o,this.max=s,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};ea.prototype.quadrant=function(o){for(var s=[o%2==0,o<2],a=l.clone$2(this.min),p=l.clone$2(this.max),m=0;m<s.length;m++)a[m]=s[m]?this.min[m]:this.center[m],p[m]=s[m]?this.center[m]:this.max[m];return p[2]=this.max[2],new ea(a,p)},ea.prototype.distanceX=function(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]},ea.prototype.distanceY=function(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]},ea.prototype.intersects=function(o){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,p=0;p<o.planes.length;p++){for(var m=o.planes[p],g=0,x=0;x<s.length;x++)g+=l.dot$1(m,s[x])>=0;if(g===0)return 0;g!==s.length&&(a=!1)}if(a)return 2;for(var E=0;E<3;E++){for(var I=Number.MAX_VALUE,D=-Number.MAX_VALUE,N=0;N<o.points.length;N++){var V=o.points[N][E]-this.min[E];I=Math.min(I,V),D=Math.max(D,V)}if(D<0||I>this.max[E]-this.min[E])return 0}return 1};var Ln=function(o,s,a,p){if(o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),p===void 0&&(p=0),isNaN(o)||o<0||isNaN(s)||s<0||isNaN(a)||a<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=s,this.left=a,this.right=p};Ln.prototype.interpolate=function(o,s,a){return s.top!=null&&o.top!=null&&(this.top=l.number(o.top,s.top,a)),s.bottom!=null&&o.bottom!=null&&(this.bottom=l.number(o.bottom,s.bottom,a)),s.left!=null&&o.left!=null&&(this.left=l.number(o.left,s.left,a)),s.right!=null&&o.right!=null&&(this.right=l.number(o.right,s.right,a)),this},Ln.prototype.getCenter=function(o,s){var a=l.clamp((this.left+o-this.right)/2,0,o),p=l.clamp((this.top+s-this.bottom)/2,0,s);return new l.Point(a,p)},Ln.prototype.equals=function(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right},Ln.prototype.clone=function(){return new Ln(this.top,this.bottom,this.left,this.right)},Ln.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var qt=function(o,s,a,p,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=o||0,this._maxZoom=s||22,this._minPitch=a==null?0:a,this._maxPitch=p==null?60:p,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ln,this._posMatrixCache={},this._alignedPosMatrixCache={}},mr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};qt.prototype.clone=function(){var o=new qt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o},mr.minZoom.get=function(){return this._minZoom},mr.minZoom.set=function(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))},mr.maxZoom.get=function(){return this._maxZoom},mr.maxZoom.set=function(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))},mr.minPitch.get=function(){return this._minPitch},mr.minPitch.set=function(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))},mr.maxPitch.get=function(){return this._maxPitch},mr.maxPitch.set=function(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))},mr.renderWorldCopies.get=function(){return this._renderWorldCopies},mr.renderWorldCopies.set=function(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o},mr.worldSize.get=function(){return this.tileSize*this.scale},mr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},mr.size.get=function(){return new l.Point(this.width,this.height)},mr.bearing.get=function(){return-this.angle/Math.PI*180},mr.bearing.set=function(o){var s=-l.wrap(o,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},mr.pitch.get=function(){return this._pitch/Math.PI*180},mr.pitch.set=function(o){var s=l.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},mr.fov.get=function(){return this._fov/Math.PI*180},mr.fov.set=function(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())},mr.zoom.get=function(){return this._zoom},mr.zoom.set=function(o){var s=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},mr.center.get=function(){return this._center},mr.center.set=function(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())},mr.padding.get=function(){return this._edgeInsets.toJSON()},mr.padding.set=function(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())},mr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},qt.prototype.isPaddingEqual=function(o){return this._edgeInsets.equals(o)},qt.prototype.interpolatePadding=function(o,s,a){this._unmodified=!1,this._edgeInsets.interpolate(o,s,a),this._constrain(),this._calcMatrices()},qt.prototype.coveringZoomLevel=function(o){var s=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,s)},qt.prototype.getVisibleUnwrappedCoordinates=function(o){var s=[new l.UnwrappedTileID(0,o)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new l.Point(0,0)),p=this.pointCoordinate(new l.Point(this.width,0)),m=this.pointCoordinate(new l.Point(this.width,this.height)),g=this.pointCoordinate(new l.Point(0,this.height)),x=Math.floor(Math.min(a.x,p.x,m.x,g.x)),E=Math.floor(Math.max(a.x,p.x,m.x,g.x)),I=x-1;I<=E+1;I++)I!==0&&s.push(new l.UnwrappedTileID(I,o));return s},qt.prototype.coveringTiles=function(o){var s=this.coveringZoomLevel(o),a=s;if(o.minzoom!==void 0&&s<o.minzoom)return[];o.maxzoom!==void 0&&s>o.maxzoom&&(s=o.maxzoom);var p=l.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,s),g=[m*p.x,m*p.y,0],x=xo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),E=o.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(E=s);var I=function(qe){return{aabb:new ea([qe*m,0,0],[(qe+1)*m,m,0]),zoom:0,x:0,y:0,wrap:qe,fullyVisible:!1}},D=[],N=[],V=s,Z=o.reparseOverscaled?a:s;if(this._renderWorldCopies)for(var J=1;J<=3;J++)D.push(I(-J)),D.push(I(J));for(D.push(I(0));D.length>0;){var Y=D.pop(),ie=Y.x,W=Y.y,ne=Y.fullyVisible;if(!ne){var ce=Y.aabb.intersects(x);if(ce===0)continue;ne=ce===2}var ye=Y.aabb.distanceX(g),Te=Y.aabb.distanceY(g),we=Math.max(Math.abs(ye),Math.abs(Te));if(Y.zoom===V||we>3+(1<<V-Y.zoom)-2&&Y.zoom>=E)N.push({tileID:new l.OverscaledTileID(Y.zoom===V?Z:Y.zoom,Y.wrap,Y.zoom,ie,W),distanceSq:l.sqrLen([g[0]-.5-ie,g[1]-.5-W])});else for(var Ae=0;Ae<4;Ae++){var Be=(ie<<1)+Ae%2,Ge=(W<<1)+(Ae>>1);D.push({aabb:Y.aabb.quadrant(Ae),zoom:Y.zoom+1,x:Be,y:Ge,wrap:Y.wrap,fullyVisible:ne})}}return N.sort(function(qe,ot){return qe.distanceSq-ot.distanceSq}).map(function(qe){return qe.tileID})},qt.prototype.resize=function(o,s){this.width=o,this.height=s,this.pixelsToGLUnits=[2/o,-2/s],this._constrain(),this._calcMatrices()},mr.unmodified.get=function(){return this._unmodified},qt.prototype.zoomScale=function(o){return Math.pow(2,o)},qt.prototype.scaleZoom=function(o){return Math.log(o)/Math.LN2},qt.prototype.project=function(o){var s=l.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(o.lng)*this.worldSize,l.mercatorYfromLat(s)*this.worldSize)},qt.prototype.unproject=function(o){return new l.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()},mr.point.get=function(){return this.project(this.center)},qt.prototype.setLocationAtPoint=function(o,s){var a=this.pointCoordinate(s),p=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(o),g=new l.MercatorCoordinate(m.x-(a.x-p.x),m.y-(a.y-p.y));this.center=this.coordinateLocation(g),this._renderWorldCopies&&(this.center=this.center.wrap())},qt.prototype.locationPoint=function(o){return this.coordinatePoint(this.locationCoordinate(o))},qt.prototype.pointLocation=function(o){return this.coordinateLocation(this.pointCoordinate(o))},qt.prototype.locationCoordinate=function(o){return l.MercatorCoordinate.fromLngLat(o)},qt.prototype.coordinateLocation=function(o){return o.toLngLat()},qt.prototype.pointCoordinate=function(o){var s=[o.x,o.y,0,1],a=[o.x,o.y,1,1];l.transformMat4(s,s,this.pixelMatrixInverse),l.transformMat4(a,a,this.pixelMatrixInverse);var p=s[3],m=a[3],g=s[1]/p,x=a[1]/m,E=s[2]/p,I=a[2]/m,D=E===I?0:(0-E)/(I-E);return new l.MercatorCoordinate(l.number(s[0]/p,a[0]/m,D)/this.worldSize,l.number(g,x,D)/this.worldSize)},qt.prototype.coordinatePoint=function(o){var s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(s,s,this.pixelMatrix),new l.Point(s[0]/s[3],s[1]/s[3])},qt.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},qt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},qt.prototype.setMaxBounds=function(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},qt.prototype.calculatePosMatrix=function(o,s){s===void 0&&(s=!1);var a=o.key,p=s?this._alignedPosMatrixCache:this._posMatrixCache;if(p[a])return p[a];var m=o.canonical,g=this.worldSize/this.zoomScale(m.z),x=m.x+Math.pow(2,m.z)*o.wrap,E=l.identity(new Float64Array(16));return l.translate(E,E,[x*g,m.y*g,0]),l.scale(E,E,[g/l.EXTENT,g/l.EXTENT,1]),l.multiply(E,s?this.alignedProjMatrix:this.projMatrix,E),p[a]=new Float32Array(E),p[a]},qt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},qt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var o,s,a,p,m=-90,g=90,x=-180,E=180,I=this.size,D=this._unmodified;if(this.latRange){var N=this.latRange;m=l.mercatorYfromLat(N[1])*this.worldSize,o=(g=l.mercatorYfromLat(N[0])*this.worldSize)-m<I.y?I.y/(g-m):0}if(this.lngRange){var V=this.lngRange;x=l.mercatorXfromLng(V[0])*this.worldSize,s=(E=l.mercatorXfromLng(V[1])*this.worldSize)-x<I.x?I.x/(E-x):0}var Z=this.point,J=Math.max(s||0,o||0);if(J)return this.center=this.unproject(new l.Point(s?(E+x)/2:Z.x,o?(g+m)/2:Z.y)),this.zoom+=this.scaleZoom(J),this._unmodified=D,void(this._constraining=!1);if(this.latRange){var Y=Z.y,ie=I.y/2;Y-ie<m&&(p=m+ie),Y+ie>g&&(p=g-ie)}if(this.lngRange){var W=Z.x,ne=I.x/2;W-ne<x&&(a=x+ne),W+ne>E&&(a=E-ne)}a===void 0&&p===void 0||(this.center=this.unproject(new l.Point(a!==void 0?a:Z.x,p!==void 0?p:Z.y))),this._unmodified=D,this._constraining=!1}},qt.prototype._calcMatrices=function(){if(this.height){var o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,a=this._fov*(.5+o.y/this.height),p=Math.sin(a)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-s-a,.01,Math.PI-.01)),m=this.point,g=m.x,x=m.y,E=1.01*(Math.cos(Math.PI/2-this._pitch)*p+this.cameraToCenterDistance),I=this.height/50,D=new Float64Array(16);l.perspective(D,this._fov,this.width/this.height,I,E),D[8]=2*-o.x/this.width,D[9]=2*o.y/this.height,l.scale(D,D,[1,-1,1]),l.translate(D,D,[0,0,-this.cameraToCenterDistance]),l.rotateX(D,D,this._pitch),l.rotateZ(D,D,this.angle),l.translate(D,D,[-g,-x,0]),this.mercatorMatrix=l.scale([],D,[this.worldSize,this.worldSize,this.worldSize]),l.scale(D,D,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=D,this.invProjMatrix=l.invert([],this.projMatrix);var N=this.width%2/2,V=this.height%2/2,Z=Math.cos(this.angle),J=Math.sin(this.angle),Y=g-Math.round(g)+Z*N+J*V,ie=x-Math.round(x)+Z*V+J*N,W=new Float64Array(D);if(l.translate(W,W,[Y>.5?Y-1:Y,ie>.5?ie-1:ie,0]),this.alignedProjMatrix=W,D=l.create(),l.scale(D,D,[this.width/2,-this.height/2,1]),l.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=l.create(),l.scale(D,D,[1,-1,1]),l.translate(D,D,[-1,-1,0]),l.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(D=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=D,this._posMatrixCache={},this._alignedPosMatrixCache={}}},qt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var o=this.pointCoordinate(new l.Point(0,0)),s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},qt.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,o))},qt.prototype.getCameraQueryGeometry=function(o){var s=this.getCameraPoint();if(o.length===1)return[o[0],s];for(var a=s.x,p=s.y,m=s.x,g=s.y,x=0,E=o;x<E.length;x+=1){var I=E[x];a=Math.min(a,I.x),p=Math.min(p,I.y),m=Math.max(m,I.x),g=Math.max(g,I.y)}return[new l.Point(a,p),new l.Point(m,p),new l.Point(m,g),new l.Point(a,g),new l.Point(a,p)]},Object.defineProperties(qt.prototype,mr);var Kn=function(o){var s,a,p,m;this._hashName=o&&encodeURIComponent(o),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),a=!1,p=null,m=function(){p=null,a&&(s(),p=setTimeout(m,300),a=!1)},function(){return a=!0,p||m(),p})};Kn.prototype.addTo=function(o){return this._map=o,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Kn.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Kn.prototype.getHashString=function(o){var s=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,p=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,p),g=Math.round(s.lng*m)/m,x=Math.round(s.lat*m)/m,E=this._map.getBearing(),I=this._map.getPitch(),D="";if(D+=o?"/"+g+"/"+x+"/"+a:a+"/"+x+"/"+g,(E||I)&&(D+="/"+Math.round(10*E)/10),I&&(D+="/"+Math.round(I)),this._hashName){var N=this._hashName,V=!1,Z=l.window.location.hash.slice(1).split("&").map(function(J){var Y=J.split("=")[0];return Y===N?(V=!0,Y+"="+D):J}).filter(function(J){return J});return V||Z.push(N+"="+D),"#"+Z.join("&")}return"#"+D},Kn.prototype._getCurrentHash=function(){var o,s=this,a=l.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(p){return p.split("=")}).forEach(function(p){p[0]===s._hashName&&(o=p)}),(o&&o[1]||"").split("/")):a.split("/")},Kn.prototype._onHashChange=function(){var o=this._getCurrentHash();if(o.length>=3&&!o.some(function(a){return isNaN(a)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:s,pitch:+(o[4]||0)}),!0}return!1},Kn.prototype._updateHashUnthrottled=function(){var o=l.window.location.href.replace(/(#.+)?$/,this.getHashString());try{l.window.history.replaceState(l.window.history.state,null,o)}catch{}};var ya={linearity:.3,easing:l.bezier(0,0,.3,1)},bo=l.extend({deceleration:2500,maxSpeed:1400},ya),Qi=l.extend({deceleration:20,maxSpeed:1400},ya),Zl=l.extend({deceleration:1e3,maxSpeed:360},ya),lu=l.extend({deceleration:1e3,maxSpeed:90},ya),qa=function(o){this._map=o,this.clear()};function va(o,s){(!o.duration||o.duration<s.duration)&&(o.duration=s.duration,o.easing=s.easing)}function eo(o,s,a){var p=a.maxSpeed,m=a.linearity,g=a.deceleration,x=l.clamp(o*m/(s/1e3),-p,p),E=Math.abs(x)/(g*m);return{easing:a.easing,duration:1e3*E,amount:x*(E/2)}}qa.prototype.clear=function(){this._inertiaBuffer=[]},qa.prototype.record=function(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:o})},qa.prototype._drainInertiaBuffer=function(){for(var o=this._inertiaBuffer,s=l.browser.now();o.length>0&&s-o[0].time>160;)o.shift()},qa.prototype._onMoveEnd=function(o){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},a=0,p=this._inertiaBuffer;a<p.length;a+=1){var m=p[a].settings;s.zoom+=m.zoomDelta||0,s.bearing+=m.bearingDelta||0,s.pitch+=m.pitchDelta||0,m.panDelta&&s.pan._add(m.panDelta),m.around&&(s.around=m.around),m.pinchAround&&(s.pinchAround=m.pinchAround)}var g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(s.pan.mag()){var E=eo(s.pan.mag(),g,l.extend({},bo,o||{}));x.offset=s.pan.mult(E.amount/s.pan.mag()),x.center=this._map.transform.center,va(x,E)}if(s.zoom){var I=eo(s.zoom,g,Qi);x.zoom=this._map.transform.zoom+I.amount,va(x,I)}if(s.bearing){var D=eo(s.bearing,g,Zl);x.bearing=this._map.transform.bearing+l.clamp(D.amount,-179,179),va(x,D)}if(s.pitch){var N=eo(s.pitch,g,lu);x.pitch=this._map.transform.pitch+N.amount,va(x,N)}if(x.zoom||x.bearing){var V=s.pinchAround===void 0?s.around:s.pinchAround;x.around=V?this._map.unproject(V):this._map.getCenter()}return this.clear(),l.extend(x,{noMoveStart:!0})}};var pn=function(o){function s(p,m,g,x){x===void 0&&(x={});var E=M.mousePos(m.getCanvasContainer(),g),I=m.unproject(E);o.call(this,p,l.extend({point:E,lngLat:I,originalEvent:g},x)),this._defaultPrevented=!1,this.target=m}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(l.Event),ga=function(o){function s(p,m,g){var x=p==="touchend"?g.changedTouches:g.touches,E=M.touchPos(m.getCanvasContainer(),x),I=E.map(function(V){return m.unproject(V)}),D=E.reduce(function(V,Z,J,Y){return V.add(Z.div(Y.length))},new l.Point(0,0)),N=m.unproject(D);o.call(this,p,{points:E,point:D,lngLats:I,lngLat:N,originalEvent:g}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(l.Event),Ns=function(o){function s(p,m,g){o.call(this,p,{originalEvent:g}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(l.Event),Cn=function(o,s){this._map=o,this._clickTolerance=s.clickTolerance};Cn.prototype.reset=function(){delete this._mousedownPos},Cn.prototype.wheel=function(o){return this._firePreventable(new Ns(o.type,this._map,o))},Cn.prototype.mousedown=function(o,s){return this._mousedownPos=s,this._firePreventable(new pn(o.type,this._map,o))},Cn.prototype.mouseup=function(o){this._map.fire(new pn(o.type,this._map,o))},Cn.prototype.click=function(o,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new pn(o.type,this._map,o))},Cn.prototype.dblclick=function(o){return this._firePreventable(new pn(o.type,this._map,o))},Cn.prototype.mouseover=function(o){this._map.fire(new pn(o.type,this._map,o))},Cn.prototype.mouseout=function(o){this._map.fire(new pn(o.type,this._map,o))},Cn.prototype.touchstart=function(o){return this._firePreventable(new ga(o.type,this._map,o))},Cn.prototype.touchmove=function(o){this._map.fire(new ga(o.type,this._map,o))},Cn.prototype.touchend=function(o){this._map.fire(new ga(o.type,this._map,o))},Cn.prototype.touchcancel=function(o){this._map.fire(new ga(o.type,this._map,o))},Cn.prototype._firePreventable=function(o){if(this._map.fire(o),o.defaultPrevented)return{}},Cn.prototype.isEnabled=function(){return!0},Cn.prototype.isActive=function(){return!1},Cn.prototype.enable=function(){},Cn.prototype.disable=function(){};var lt=function(o){this._map=o};lt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},lt.prototype.mousemove=function(o){this._map.fire(new pn(o.type,this._map,o))},lt.prototype.mousedown=function(){this._delayContextMenu=!0},lt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},lt.prototype.contextmenu=function(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new pn(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()},lt.prototype.isEnabled=function(){return!0},lt.prototype.isActive=function(){return!1},lt.prototype.enable=function(){},lt.prototype.disable=function(){};var to=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=s.clickTolerance||1};function Gl(o,s){for(var a={},p=0;p<o.length;p++)a[o[p].identifier]=s[p];return a}to.prototype.isEnabled=function(){return!!this._enabled},to.prototype.isActive=function(){return!!this._active},to.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},to.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},to.prototype.mousedown=function(o,s){this.isEnabled()&&o.shiftKey&&o.button===0&&(M.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},to.prototype.mousemoveWindow=function(o,s){if(this._active){var a=s;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var p=this._startPos;this._lastPos=a,this._box||(this._box=M.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));var m=Math.min(p.x,a.x),g=Math.max(p.x,a.x),x=Math.min(p.y,a.y),E=Math.max(p.y,a.y);M.setTransform(this._box,"translate("+m+"px,"+x+"px)"),this._box.style.width=g-m+"px",this._box.style.height=E-x+"px"}}},to.prototype.mouseupWindow=function(o,s){var a=this;if(this._active&&o.button===0){var p=this._startPos,m=s;if(this.reset(),M.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:function(g){return g.fitScreenCoordinates(p,m,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",o)}},to.prototype.keydown=function(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))},to.prototype.blur=function(){this.reset()},to.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos},to.prototype._fireEvent=function(o,s){return this._map.fire(new l.Event(o,{originalEvent:s}))};var cu=function(o){this.reset(),this.numTouches=o.numTouches};cu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},cu.prototype.touchstart=function(o,s,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),a.length===this.numTouches&&(this.centroid=function(p){for(var m=new l.Point(0,0),g=0,x=p;g<x.length;g+=1)m._add(x[g]);return m.div(p.length)}(s),this.touches=Gl(a,s)))},cu.prototype.touchmove=function(o,s,a){if(!this.aborted&&this.centroid){var p=Gl(a,s);for(var m in this.touches){var g=p[m];(!g||g.dist(this.touches[m])>30)&&(this.aborted=!0)}}},cu.prototype.touchend=function(o,s,a){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var p=!this.aborted&&this.centroid;if(this.reset(),p)return p}};var ta=function(o){this.singleTap=new cu(o),this.numTaps=o.numTaps,this.reset()};ta.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ta.prototype.touchstart=function(o,s,a){this.singleTap.touchstart(o,s,a)},ta.prototype.touchmove=function(o,s,a){this.singleTap.touchmove(o,s,a)},ta.prototype.touchend=function(o,s,a){var p=this.singleTap.touchend(o,s,a);if(p){var m=o.timeStamp-this.lastTime<500,g=!this.lastTap||this.lastTap.dist(p)<30;if(m&&g||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}};var ro=function(){this._zoomIn=new ta({numTouches:1,numTaps:2}),this._zoomOut=new ta({numTouches:2,numTaps:1}),this.reset()};ro.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ro.prototype.touchstart=function(o,s,a){this._zoomIn.touchstart(o,s,a),this._zoomOut.touchstart(o,s,a)},ro.prototype.touchmove=function(o,s,a){this._zoomIn.touchmove(o,s,a),this._zoomOut.touchmove(o,s,a)},ro.prototype.touchend=function(o,s,a){var p=this,m=this._zoomIn.touchend(o,s,a),g=this._zoomOut.touchend(o,s,a);return m?(this._active=!0,o.preventDefault(),setTimeout(function(){return p.reset()},0),{cameraAnimation:function(x){return x.easeTo({duration:300,zoom:x.getZoom()+1,around:x.unproject(m)},{originalEvent:o})}}):g?(this._active=!0,o.preventDefault(),setTimeout(function(){return p.reset()},0),{cameraAnimation:function(x){return x.easeTo({duration:300,zoom:x.getZoom()-1,around:x.unproject(g)},{originalEvent:o})}}):void 0},ro.prototype.touchcancel=function(){this.reset()},ro.prototype.enable=function(){this._enabled=!0},ro.prototype.disable=function(){this._enabled=!1,this.reset()},ro.prototype.isEnabled=function(){return this._enabled},ro.prototype.isActive=function(){return this._active};var lp={0:1,2:2},He=function(o){this.reset(),this._clickTolerance=o.clickTolerance||1};He.prototype.blur=function(){this.reset()},He.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},He.prototype._correctButton=function(o,s){return!1},He.prototype._move=function(o,s){return{}},He.prototype.mousedown=function(o,s){if(!this._lastPoint){var a=M.mouseButton(o);this._correctButton(o,a)&&(this._lastPoint=s,this._eventButton=a)}},He.prototype.mousemoveWindow=function(o,s){var a=this._lastPoint;if(a){if(o.preventDefault(),function(p,m){var g=lp[m];return p.buttons===void 0||(p.buttons&g)!==g}(o,this._eventButton))this.reset();else if(this._moved||!(s.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(a,s)}},He.prototype.mouseupWindow=function(o){this._lastPoint&&M.mouseButton(o)===this._eventButton&&(this._moved&&M.suppressClick(),this.reset())},He.prototype.enable=function(){this._enabled=!0},He.prototype.disable=function(){this._enabled=!1,this.reset()},He.prototype.isEnabled=function(){return this._enabled},He.prototype.isActive=function(){return this._active};var cp=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.mousedown=function(a,p){o.prototype.mousedown.call(this,a,p),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(a,p){return p===0&&!a.ctrlKey},s.prototype._move=function(a,p){return{around:p,panDelta:p.sub(a)}},s}(He),Wl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,p){return p===0&&a.ctrlKey||p===2},s.prototype._move=function(a,p){var m=.8*(p.x-a.x);if(m)return this._active=!0,{bearingDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(He),pp=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,p){return p===0&&a.ctrlKey||p===2},s.prototype._move=function(a,p){var m=-.5*(p.y-a.y);if(m)return this._active=!0,{pitchDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(He),Ro=function(o){this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset()};Ro.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},Ro.prototype.touchstart=function(o,s,a){return this._calculateTransform(o,s,a)},Ro.prototype.touchmove=function(o,s,a){if(this._active&&!(a.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,s,a)},Ro.prototype.touchend=function(o,s,a){this._calculateTransform(o,s,a),this._active&&a.length<this._minTouches&&this.reset()},Ro.prototype.touchcancel=function(){this.reset()},Ro.prototype._calculateTransform=function(o,s,a){a.length>0&&(this._active=!0);var p=Gl(a,s),m=new l.Point(0,0),g=new l.Point(0,0),x=0;for(var E in p){var I=p[E],D=this._touches[E];D&&(m._add(I),g._add(I.sub(D)),x++,p[E]=I)}if(this._touches=p,!(x<this._minTouches)&&g.mag()){var N=g.div(x);if(this._sum._add(N),!(this._sum.mag()<this._clickTolerance))return{around:m.div(x),panDelta:N}}},Ro.prototype.enable=function(){this._enabled=!0},Ro.prototype.disable=function(){this._enabled=!1,this.reset()},Ro.prototype.isEnabled=function(){return this._enabled},Ro.prototype.isActive=function(){return this._active};var no=function(){this.reset()};function $l(o,s,a){for(var p=0;p<o.length;p++)if(o[p].identifier===a)return s[p]}function Xl(o,s){return Math.log(o/s)/Math.LN2}no.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},no.prototype._start=function(o){},no.prototype._move=function(o,s,a){return{}},no.prototype.touchstart=function(o,s,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([s[0],s[1]]))},no.prototype.touchmove=function(o,s,a){if(this._firstTwoTouches){o.preventDefault();var p=this._firstTwoTouches,m=p[1],g=$l(a,s,p[0]),x=$l(a,s,m);if(g&&x){var E=this._aroundCenter?null:g.add(x).div(2);return this._move([g,x],E,o)}}},no.prototype.touchend=function(o,s,a){if(this._firstTwoTouches){var p=this._firstTwoTouches,m=p[1],g=$l(a,s,p[0]),x=$l(a,s,m);g&&x||(this._active&&M.suppressClick(),this.reset())}},no.prototype.touchcancel=function(){this.reset()},no.prototype.enable=function(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"},no.prototype.disable=function(){this._enabled=!1,this.reset()},no.prototype.isEnabled=function(){return this._enabled},no.prototype.isActive=function(){return this._active};var io=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},s.prototype._move=function(a,p){var m=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Xl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xl(this._distance,m),pinchAround:p}},s}(no);function Za(o,s){return 180*o.angleWith(s)/Math.PI}var ef=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},s.prototype._move=function(a,p){var m=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Za(this._vector,m),pinchAround:p}},s.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var p=25/(Math.PI*this._minDiameter)*360,m=Za(a,this._startVector);return Math.abs(m)<p},s}(no);function rl(o){return Math.abs(o.y)>Math.abs(o.x)}var hp=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(a){this._lastPoints=a,rl(a[0].sub(a[1]))&&(this._valid=!1)},s.prototype._move=function(a,p,m){var g=a[0].sub(this._lastPoints[0]),x=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(g,x,m.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(a,p,m){if(this._valid!==void 0)return this._valid;var g=a.mag()>=2,x=p.mag()>=2;if(g||x){if(!g||!x)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var E=a.y>0==p.y>0;return rl(a)&&rl(p)&&E}},s}(no),fp={panStep:100,bearingStep:15,pitchStep:10},ra=function(){var o=fp;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1};function wo(o){return o*(2-o)}ra.prototype.blur=function(){this.reset()},ra.prototype.reset=function(){this._active=!1},ra.prototype.keydown=function(o){var s=this;if(!(o.altKey||o.ctrlKey||o.metaKey)){var a=0,p=0,m=0,g=0,x=0;switch(o.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:o.shiftKey?p=-1:(o.preventDefault(),g=-1);break;case 39:o.shiftKey?p=1:(o.preventDefault(),g=1);break;case 38:o.shiftKey?m=1:(o.preventDefault(),x=-1);break;case 40:o.shiftKey?m=-1:(o.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:function(E){var I=E.getZoom();E.easeTo({duration:300,easeId:"keyboardHandler",easing:wo,zoom:a?Math.round(I)+a*(o.shiftKey?2:1):I,bearing:E.getBearing()+p*s._bearingStep,pitch:E.getPitch()+m*s._pitchStep,offset:[-g*s._panStep,-x*s._panStep],center:E.getCenter()},{originalEvent:o})}}}},ra.prototype.enable=function(){this._enabled=!0},ra.prototype.disable=function(){this._enabled=!1,this.reset()},ra.prototype.isEnabled=function(){return this._enabled},ra.prototype.isActive=function(){return this._active},ra.prototype.disableRotation=function(){this._rotationDisabled=!0},ra.prototype.enableRotation=function(){this._rotationDisabled=!1};var Jt=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,l.bindAll(["_onTimeout"],this)};Jt.prototype.setZoomRate=function(o){this._defaultZoomRate=o},Jt.prototype.setWheelZoomRate=function(o){this._wheelZoomRate=o},Jt.prototype.isEnabled=function(){return!!this._enabled},Jt.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Jt.prototype.isZooming=function(){return!!this._zooming},Jt.prototype.enable=function(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")},Jt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Jt.prototype.wheel=function(o){if(this.isEnabled()){var s=o.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,a=l.browser.now(),p=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(p*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),o.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=o,this._delta-=s,this._active||this._start(o)),o.preventDefault()}},Jt.prototype._onTimeout=function(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)},Jt.prototype._start=function(o){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=M.mousePos(this._el,o);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Jt.prototype.renderFrame=function(){var o=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,p=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&p!==0&&(p=1/p);var m=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(m*p))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var g,x=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,E=this._startZoom,I=this._easing,D=!1;if(this._type==="wheel"&&E&&I){var N=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),V=I(N);g=l.number(E,x,V),N<1?this._frameId||(this._frameId=!0):D=!0}else g=x,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(function(){o._zooming=!1,o._handler._triggerRenderFrame(),delete o._targetZoom,delete o._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:g-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Jt.prototype._smoothOutEasing=function(o){var s=l.ease;if(this._prevEase){var a=this._prevEase,p=(l.browser.now()-a.start)/a.duration,m=a.easing(p+.01)-a.easing(p),g=.27/Math.sqrt(m*m+1e-4)*.01,x=Math.sqrt(.0729-g*g);s=l.bezier(g,x,.25,1)}return this._prevEase={start:l.browser.now(),duration:o,easing:s},s},Jt.prototype.blur=function(){this.reset()},Jt.prototype.reset=function(){this._active=!1};var _a=function(o,s){this._clickZoom=o,this._tapZoom=s};_a.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},_a.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},_a.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},_a.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Fo=function(){this.reset()};Fo.prototype.reset=function(){this._active=!1},Fo.prototype.blur=function(){this.reset()},Fo.prototype.dblclick=function(o,s){return o.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(o.shiftKey?-1:1),around:a.unproject(s)},{originalEvent:o})}}},Fo.prototype.enable=function(){this._enabled=!0},Fo.prototype.disable=function(){this._enabled=!1,this.reset()},Fo.prototype.isEnabled=function(){return this._enabled},Fo.prototype.isActive=function(){return this._active};var oi=function(){this._tap=new ta({numTouches:1,numTaps:1}),this.reset()};oi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},oi.prototype.touchstart=function(o,s,a){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=s[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(o,s,a))},oi.prototype.touchmove=function(o,s,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var p=s[0],m=p.y-this._swipePoint.y;return this._swipePoint=p,o.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(o,s,a)},oi.prototype.touchend=function(o,s,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(o,s,a)&&(this._tapTime=o.timeStamp)},oi.prototype.touchcancel=function(){this.reset()},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active};var js=function(o,s,a){this._el=o,this._mousePan=s,this._touchPan=a};js.prototype.enable=function(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},js.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},js.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},js.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ss=function(o,s,a){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=s,this._mousePitch=a};ss.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ss.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ss.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ss.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var na=function(o,s,a,p){this._el=o,this._touchZoom=s,this._touchRotate=a,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0};na.prototype.enable=function(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},na.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},na.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},na.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},na.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},na.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var vi=function(o){return o.zoom||o.drag||o.pitch||o.rotate},nl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s}(l.Event);function _t(o){return o.panDelta&&o.panDelta.mag()||o.zoomDelta||o.bearingDelta||o.pitchDelta}var ft=function(o,s){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new qa(o),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),l.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[l.window,"blur",void 0]];for(var p=0,m=this._listeners;p<m.length;p+=1){var g=m[p],x=g[0];M.addEventListener(x,g[1],x===l.window.document?this.handleWindowEvent:this.handleEvent,g[2])}};ft.prototype.destroy=function(){for(var o=0,s=this._listeners;o<s.length;o+=1){var a=s[o],p=a[0];M.removeEventListener(p,a[1],p===l.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},ft.prototype._addDefaultHandlers=function(o){var s=this._map,a=s.getCanvasContainer();this._add("mapEvent",new Cn(s,o));var p=s.boxZoom=new to(s,o);this._add("boxZoom",p);var m=new ro,g=new Fo;s.doubleClickZoom=new _a(g,m),this._add("tapZoom",m),this._add("clickZoom",g);var x=new oi;this._add("tapDragZoom",x);var E=s.touchPitch=new hp;this._add("touchPitch",E);var I=new Wl(o),D=new pp(o);s.dragRotate=new ss(o,I,D),this._add("mouseRotate",I,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]);var N=new cp(o),V=new Ro(o);s.dragPan=new js(a,N,V),this._add("mousePan",N),this._add("touchPan",V,["touchZoom","touchRotate"]);var Z=new ef,J=new io;s.touchZoomRotate=new na(a,J,Z,x),this._add("touchRotate",Z,["touchPan","touchZoom"]),this._add("touchZoom",J,["touchPan","touchRotate"]);var Y=s.scrollZoom=new Jt(s,this);this._add("scrollZoom",Y,["mousePan"]);var ie=s.keyboard=new ra;this._add("keyboard",ie),this._add("blockableMapEvent",new lt(s));for(var W=0,ne=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];W<ne.length;W+=1){var ce=ne[W];o.interactive&&o[ce]&&s[ce].enable(o[ce])}},ft.prototype._add=function(o,s,a){this._handlers.push({handlerName:o,handler:s,allowed:a}),this._handlersById[o]=s},ft.prototype.stop=function(o){if(!this._updatingCamera){for(var s=0,a=this._handlers;s<a.length;s+=1)a[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}},ft.prototype.isActive=function(){for(var o=0,s=this._handlers;o<s.length;o+=1)if(s[o].handler.isActive())return!0;return!1},ft.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ft.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ft.prototype.isMoving=function(){return Boolean(vi(this._eventsInProgress))||this.isZooming()},ft.prototype._blockedByActive=function(o,s,a){for(var p in o)if(p!==a&&(!s||s.indexOf(p)<0))return!0;return!1},ft.prototype.handleWindowEvent=function(o){this.handleEvent(o,o.type+"Window")},ft.prototype._getMapTouches=function(o){for(var s=[],a=0,p=o;a<p.length;a+=1){var m=p[a];this._el.contains(m.target)&&s.push(m)}return s},ft.prototype.handleEvent=function(o,s){this._updatingCamera=!0;for(var a=o.type==="renderFrame"?void 0:o,p={needsRenderFrame:!1},m={},g={},x=o.touches?this._getMapTouches(o.touches):void 0,E=x?M.touchPos(this._el,x):M.mousePos(this._el,o),I=0,D=this._handlers;I<D.length;I+=1){var N=D[I],V=N.handlerName,Z=N.handler,J=N.allowed;if(Z.isEnabled()){var Y=void 0;this._blockedByActive(g,J,V)?Z.reset():Z[s||o.type]&&(Y=Z[s||o.type](o,E,x),this.mergeHandlerResult(p,m,Y,V,a),Y&&Y.needsRenderFrame&&this._triggerRenderFrame()),(Y||Z.isActive())&&(g[V]=Z)}}var ie={};for(var W in this._previousActiveHandlers)g[W]||(ie[W]=a);this._previousActiveHandlers=g,(Object.keys(ie).length||_t(p))&&(this._changes.push([p,m,ie]),this._triggerRenderFrame()),(Object.keys(g).length||_t(p))&&this._map._stop(!0),this._updatingCamera=!1;var ne=p.cameraAnimation;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},ft.prototype.mergeHandlerResult=function(o,s,a,p,m){if(a){l.extend(o,a);var g={handlerName:p,originalEvent:a.originalEvent||m};a.zoomDelta!==void 0&&(s.zoom=g),a.panDelta!==void 0&&(s.drag=g),a.pitchDelta!==void 0&&(s.pitch=g),a.bearingDelta!==void 0&&(s.rotate=g)}},ft.prototype._applyChanges=function(){for(var o={},s={},a={},p=0,m=this._changes;p<m.length;p+=1){var g=m[p],x=g[0],E=g[1],I=g[2];x.panDelta&&(o.panDelta=(o.panDelta||new l.Point(0,0))._add(x.panDelta)),x.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(o.around=x.around),x.pinchAround!==void 0&&(o.pinchAround=x.pinchAround),x.noInertia&&(o.noInertia=x.noInertia),l.extend(s,E),l.extend(a,I)}this._updateMapTransform(o,s,a),this._changes=[]},ft.prototype._updateMapTransform=function(o,s,a){var p=this._map,m=p.transform;if(!_t(o))return this._fireEvents(s,a,!0);var g=o.panDelta,x=o.zoomDelta,E=o.bearingDelta,I=o.pitchDelta,D=o.around,N=o.pinchAround;N!==void 0&&(D=N),p._stop(!0),D=D||p.transform.centerPoint;var V=m.pointLocation(g?D.sub(g):D);E&&(m.bearing+=E),I&&(m.pitch+=I),x&&(m.zoom+=x),m.setLocationAtPoint(V,D),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(s,a,!0)},ft.prototype._fireEvents=function(o,s,a){var p=this,m=vi(this._eventsInProgress),g=vi(o),x={};for(var E in o)this._eventsInProgress[E]||(x[E+"start"]=o[E].originalEvent),this._eventsInProgress[E]=o[E];for(var I in!m&&g&&this._fireEvent("movestart",g.originalEvent),x)this._fireEvent(I,x[I]);for(var D in g&&this._fireEvent("move",g.originalEvent),o)this._fireEvent(D,o[D].originalEvent);var N,V={};for(var Z in this._eventsInProgress){var J=this._eventsInProgress[Z],Y=J.handlerName,ie=J.originalEvent;this._handlersById[Y].isActive()||(delete this._eventsInProgress[Z],V[Z+"end"]=N=s[Y]||ie)}for(var W in V)this._fireEvent(W,V[W]);var ne=vi(this._eventsInProgress);if(a&&(m||g)&&!ne){this._updatingCamera=!0;var ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ye=function(Te){return Te!==0&&-p._bearingSnap<Te&&Te<p._bearingSnap};ce?(ye(ce.bearing||this._map.getBearing())&&(ce.bearing=0),this._map.easeTo(ce,{originalEvent:N})):(this._map.fire(new l.Event("moveend",{originalEvent:N})),ye(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ft.prototype._fireEvent=function(o,s){this._map.fire(new l.Event(o,s?{originalEvent:s}:{}))},ft.prototype._requestFrame=function(){var o=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete o._frameId,o.handleEvent(new nl("renderFrame",{timeStamp:s})),o._applyChanges()})},ft.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Kl=function(o){function s(a,p){o.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=p.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(a,p){return this.jumpTo({center:a},p)},s.prototype.panBy=function(a,p,m){return a=l.Point.convert(a).mult(-1),this.panTo(this.transform.center,l.extend({offset:a},p),m)},s.prototype.panTo=function(a,p,m){return this.easeTo(l.extend({center:a},p),m)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(a,p){return this.jumpTo({zoom:a},p),this},s.prototype.zoomTo=function(a,p,m){return this.easeTo(l.extend({zoom:a},p),m)},s.prototype.zoomIn=function(a,p){return this.zoomTo(this.getZoom()+1,a,p),this},s.prototype.zoomOut=function(a,p){return this.zoomTo(this.getZoom()-1,a,p),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(a,p){return this.jumpTo({bearing:a},p),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(a,p){return this.jumpTo({padding:a},p),this},s.prototype.rotateTo=function(a,p,m){return this.easeTo(l.extend({bearing:a},p),m)},s.prototype.resetNorth=function(a,p){return this.rotateTo(0,l.extend({duration:1e3},a),p),this},s.prototype.resetNorthPitch=function(a,p){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},a),p),this},s.prototype.snapToNorth=function(a,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,p):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(a,p){return this.jumpTo({pitch:a},p),this},s.prototype.cameraForBounds=function(a,p){a=l.LngLatBounds.convert(a);var m=p&&p.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),m,p)},s.prototype._cameraForBoxAndBearing=function(a,p,m,g){var x={top:0,bottom:0,right:0,left:0};if(typeof(g=l.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){var E=g.padding;g.padding={top:E,bottom:E,right:E,left:E}}g.padding=l.extend(x,g.padding);var I=this.transform,D=I.padding,N=I.project(l.LngLat.convert(a)),V=I.project(l.LngLat.convert(p)),Z=N.rotate(-m*Math.PI/180),J=V.rotate(-m*Math.PI/180),Y=new l.Point(Math.max(Z.x,J.x),Math.max(Z.y,J.y)),ie=new l.Point(Math.min(Z.x,J.x),Math.min(Z.y,J.y)),W=Y.sub(ie),ne=(I.width-(D.left+D.right+g.padding.left+g.padding.right))/W.x,ce=(I.height-(D.top+D.bottom+g.padding.top+g.padding.bottom))/W.y;if(!(ce<0||ne<0)){var ye=Math.min(I.scaleZoom(I.scale*Math.min(ne,ce)),g.maxZoom),Te=typeof g.offset.x=="number"?new l.Point(g.offset.x,g.offset.y):l.Point.convert(g.offset),we=new l.Point((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(m*Math.PI/180),Ae=Te.add(we).mult(I.scale/I.zoomScale(ye));return{center:I.unproject(N.add(V).div(2).sub(Ae)),zoom:ye,bearing:m}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(a,p,m){return this._fitInternal(this.cameraForBounds(a,p),p,m)},s.prototype.fitScreenCoordinates=function(a,p,m,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(a)),this.transform.pointLocation(l.Point.convert(p)),m,g),g,x)},s.prototype._fitInternal=function(a,p,m){return a?(delete(p=l.extend(a,p)).padding,p.linear?this.easeTo(p,m):this.flyTo(p,m)):this},s.prototype.jumpTo=function(a,p){this.stop();var m=this.transform,g=!1,x=!1,E=!1;return"zoom"in a&&m.zoom!==+a.zoom&&(g=!0,m.zoom=+a.zoom),a.center!==void 0&&(m.center=l.LngLat.convert(a.center)),"bearing"in a&&m.bearing!==+a.bearing&&(x=!0,m.bearing=+a.bearing),"pitch"in a&&m.pitch!==+a.pitch&&(E=!0,m.pitch=+a.pitch),a.padding==null||m.isPaddingEqual(a.padding)||(m.padding=a.padding),this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p)),g&&this.fire(new l.Event("zoomstart",p)).fire(new l.Event("zoom",p)).fire(new l.Event("zoomend",p)),x&&this.fire(new l.Event("rotatestart",p)).fire(new l.Event("rotate",p)).fire(new l.Event("rotateend",p)),E&&this.fire(new l.Event("pitchstart",p)).fire(new l.Event("pitch",p)).fire(new l.Event("pitchend",p)),this.fire(new l.Event("moveend",p))},s.prototype.easeTo=function(a,p){var m=this;this._stop(!1,a.easeId),((a=l.extend({offset:[0,0],duration:500,easing:l.ease},a)).animate===!1||!a.essential&&l.browser.prefersReducedMotion)&&(a.duration=0);var g=this.transform,x=this.getZoom(),E=this.getBearing(),I=this.getPitch(),D=this.getPadding(),N="zoom"in a?+a.zoom:x,V="bearing"in a?this._normalizeBearing(a.bearing,E):E,Z="pitch"in a?+a.pitch:I,J="padding"in a?a.padding:g.padding,Y=l.Point.convert(a.offset),ie=g.centerPoint.add(Y),W=g.pointLocation(ie),ne=l.LngLat.convert(a.center||W);this._normalizeCenter(ne);var ce,ye,Te=g.project(W),we=g.project(ne).sub(Te),Ae=g.zoomScale(N-x);a.around&&(ce=l.LngLat.convert(a.around),ye=g.locationPoint(ce));var Be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||N!==x,this._rotating=this._rotating||E!==V,this._pitching=this._pitching||Z!==I,this._padding=!g.isPaddingEqual(J),this._easeId=a.easeId,this._prepareEase(p,a.noMoveStart,Be),this._ease(function(Ge){if(m._zooming&&(g.zoom=l.number(x,N,Ge)),m._rotating&&(g.bearing=l.number(E,V,Ge)),m._pitching&&(g.pitch=l.number(I,Z,Ge)),m._padding&&(g.interpolatePadding(D,J,Ge),ie=g.centerPoint.add(Y)),ce)g.setLocationAtPoint(ce,ye);else{var qe=g.zoomScale(g.zoom-x),ot=N>x?Math.min(2,Ae):Math.max(.5,Ae),xt=Math.pow(ot,1-Ge),Ct=g.unproject(Te.add(we.mult(Ge*xt)).mult(qe));g.setLocationAtPoint(g.renderWorldCopies?Ct.wrap():Ct,ie)}m._fireMoveEvents(p)},function(Ge){m._afterEase(p,Ge)},a),this},s.prototype._prepareEase=function(a,p,m){m===void 0&&(m={}),this._moving=!0,p||m.moving||this.fire(new l.Event("movestart",a)),this._zooming&&!m.zooming&&this.fire(new l.Event("zoomstart",a)),this._rotating&&!m.rotating&&this.fire(new l.Event("rotatestart",a)),this._pitching&&!m.pitching&&this.fire(new l.Event("pitchstart",a))},s.prototype._fireMoveEvents=function(a){this.fire(new l.Event("move",a)),this._zooming&&this.fire(new l.Event("zoom",a)),this._rotating&&this.fire(new l.Event("rotate",a)),this._pitching&&this.fire(new l.Event("pitch",a))},s.prototype._afterEase=function(a,p){if(!this._easeId||!p||this._easeId!==p){delete this._easeId;var m=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new l.Event("zoomend",a)),g&&this.fire(new l.Event("rotateend",a)),x&&this.fire(new l.Event("pitchend",a)),this.fire(new l.Event("moveend",a))}},s.prototype.flyTo=function(a,p){var m=this;if(!a.essential&&l.browser.prefersReducedMotion){var g=l.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,p)}this.stop(),a=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},a);var x=this.transform,E=this.getZoom(),I=this.getBearing(),D=this.getPitch(),N=this.getPadding(),V="zoom"in a?l.clamp(+a.zoom,x.minZoom,x.maxZoom):E,Z="bearing"in a?this._normalizeBearing(a.bearing,I):I,J="pitch"in a?+a.pitch:D,Y="padding"in a?a.padding:x.padding,ie=x.zoomScale(V-E),W=l.Point.convert(a.offset),ne=x.centerPoint.add(W),ce=x.pointLocation(ne),ye=l.LngLat.convert(a.center||ce);this._normalizeCenter(ye);var Te=x.project(ce),we=x.project(ye).sub(Te),Ae=a.curve,Be=Math.max(x.width,x.height),Ge=Be/ie,qe=we.mag();if("minZoom"in a){var ot=l.clamp(Math.min(a.minZoom,E,V),x.minZoom,x.maxZoom),xt=Be/x.zoomScale(ot-E);Ae=Math.sqrt(xt/qe*2)}var Ct=Ae*Ae;function Et(Dt){var kt=(Ge*Ge-Be*Be+(Dt?-1:1)*Ct*Ct*qe*qe)/(2*(Dt?Ge:Be)*Ct*qe);return Math.log(Math.sqrt(kt*kt+1)-kt)}function hr(Dt){return(Math.exp(Dt)-Math.exp(-Dt))/2}function ut(Dt){return(Math.exp(Dt)+Math.exp(-Dt))/2}var Nt=Et(0),Wt=function(Dt){return ut(Nt)/ut(Nt+Ae*Dt)},Bt=function(Dt){return Be*((ut(Nt)*(hr(kt=Nt+Ae*Dt)/ut(kt))-hr(Nt))/Ct)/qe;var kt},Rt=(Et(1)-Nt)/Ae;if(Math.abs(qe)<1e-6||!isFinite(Rt)){if(Math.abs(Be-Ge)<1e-6)return this.easeTo(a,p);var Gt=Ge<Be?-1:1;Rt=Math.abs(Math.log(Ge/Be))/Ae,Bt=function(){return 0},Wt=function(Dt){return Math.exp(Gt*Ae*Dt)}}return a.duration="duration"in a?+a.duration:1e3*Rt/("screenSpeed"in a?+a.screenSpeed/Ae:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=I!==Z,this._pitching=J!==D,this._padding=!x.isPaddingEqual(Y),this._prepareEase(p,!1),this._ease(function(Dt){var kt=Dt*Rt,Nn=1/Wt(kt);x.zoom=Dt===1?V:E+x.scaleZoom(Nn),m._rotating&&(x.bearing=l.number(I,Z,Dt)),m._pitching&&(x.pitch=l.number(D,J,Dt)),m._padding&&(x.interpolatePadding(N,Y,Dt),ne=x.centerPoint.add(W));var hn=Dt===1?ye:x.unproject(Te.add(we.mult(Bt(kt))).mult(Nn));x.setLocationAtPoint(x.renderWorldCopies?hn.wrap():hn,ne),m._fireMoveEvents(p)},function(){return m._afterEase(p)},a),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(a,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,p)}if(!a){var g=this.handlers;g&&g.stop(!1)}return this},s.prototype._ease=function(a,p,m){m.animate===!1||m.duration===0?(a(1),p()):(this._easeStart=l.browser.now(),this._easeOptions=m,this._onEaseFrame=a,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var a=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(a,p){a=l.wrap(a,-180,180);var m=Math.abs(a-p);return Math.abs(a-360-p)<m&&(a-=360),Math.abs(a+360-p)<m&&(a+=360),a},s.prototype._normalizeCenter=function(a){var p=this.transform;if(p.renderWorldCopies&&!p.lngRange){var m=a.lng-p.center.lng;a.lng+=m>180?-360:m<-180?360:0}},s}(l.Evented),gi=function(o){o===void 0&&(o={}),this.options=o,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};gi.prototype.getDefaultPosition=function(){return"bottom-right"},gi.prototype.onAdd=function(o){var s=this.options&&this.options.compact;return this._map=o,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=M.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},gi.prototype.onRemove=function(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},gi.prototype._setElementTitle=function(o,s){var a=this._map._getUIString("AttributionControl."+s);o.title=a,o.setAttribute("aria-label",a)},gi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},gi.prototype._updateEditLink=function(){var o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(o){var a=s.reduce(function(p,m,g){return m.value&&(p+=m.key+"="+m.value+(g<s.length-1?"&":"")),p},"?");o.href=l.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}},gi.prototype._updateData=function(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},gi.prototype._updateAttributions=function(){if(this._map.style){var o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(function(E){return typeof E!="string"?"":E})):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var a=this._map.style.sourceCaches;for(var p in a){var m=a[p];if(m.used){var g=m.getSource();g.attribution&&o.indexOf(g.attribution)<0&&o.push(g.attribution)}}o.sort(function(E,I){return E.length-I.length});var x=(o=o.filter(function(E,I){for(var D=I+1;D<o.length;D++)if(o[D].indexOf(E)>=0)return!1;return!0})).join(" | ");x!==this._attribHTML&&(this._attribHTML=x,o.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},gi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ia=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};ia.prototype.onAdd=function(o){this._map=o,this._container=M.create("div","mapboxgl-ctrl");var s=M.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ia.prototype.onRemove=function(){M.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ia.prototype.getDefaultPosition=function(){return"bottom-left"},ia.prototype._updateLogo=function(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ia.prototype._logoRequired=function(){if(this._map.style){var o=this._map.style.sourceCaches;for(var s in o)if(o[s].getSource().mapbox_logo)return!0;return!1}},ia.prototype._updateCompact=function(){var o=this._container.children;if(o.length){var s=o[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var ai=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ai.prototype.add=function(o){var s=++this._id;return this._queue.push({callback:o,id:s,cancelled:!1}),s},ai.prototype.remove=function(o){for(var s=this._currentlyRunning,a=0,p=s?this._queue.concat(s):this._queue;a<p.length;a+=1){var m=p[a];if(m.id===o)return void(m.cancelled=!0)}},ai.prototype.run=function(o){o===void 0&&(o=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,p=s;a<p.length;a+=1){var m=p[a];if(!m.cancelled&&(m.callback(o),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ai.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var xa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},dp=l.window.HTMLImageElement,Hl=l.window.HTMLElement,Er=l.window.ImageBitmap,Hn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},tf=function(o){function s(p){var m=this;if((p=l.extend({},Hn,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var g=new qt(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies);if(o.call(this,g,p),this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new ai,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},xa,p.locale),this._clickTolerance=p.clickTolerance,this._requestManager=new l.RequestManager(p.transformRequest,p.accessToken),typeof p.container=="string"){if(this._container=l.window.document.getElementById(p.container),!this._container)throw new Error("Container '"+p.container+"' not found.")}else{if(!(p.container instanceof Hl))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ft(this,p),this._hash=p.hash&&new Kn(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new gi({customAttribution:p.customAttribution})),this.addControl(new ia,p.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(x){m._update(x.dataType==="style"),m.fire(new l.Event(x.dataType+"data",x))}),this.on("dataloading",function(x){m.fire(new l.Event(x.dataType+"dataloading",x))})}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(p,m){if(m===void 0&&(m=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var g=p.onAdd(this);this._controls.push(p);var x=this._controlPositions[m];return m.indexOf("bottom")!==-1?x.insertBefore(g,x.firstChild):x.appendChild(g),this},s.prototype.removeControl=function(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(p);return m>-1&&this._controls.splice(m,1),p.onRemove(this),this},s.prototype.hasControl=function(p){return this._controls.indexOf(p)>-1},s.prototype.resize=function(p){var m=this._containerDimensions(),g=m[0],x=m[1];if(g===this.transform.width&&x===this.transform.height)return this;this._resizeCanvas(g,x),this.transform.resize(g,x),this.painter.resize(g,x);var E=!this._moving;return E&&this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p)),this.fire(new l.Event("resize",p)),E&&this.fire(new l.Event("moveend",p)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()},s.prototype.setMinZoom=function(p){if((p=p==null?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(p){if((p=p==null?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(p){if((p=p==null?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(p){if((p=p==null?60:p)>60)throw new Error("maxPitch must be less than or equal to 60");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(p){return this.transform.renderWorldCopies=p,this._update()},s.prototype.project=function(p){return this.transform.locationPoint(l.LngLat.convert(p))},s.prototype.unproject=function(p){return this.transform.pointLocation(l.Point.convert(p))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(p,m,g){var x,E=this;if(p==="mouseenter"||p==="mouseover"){var I=!1;return{layer:m,listener:g,delegates:{mousemove:function(N){var V=E.getLayer(m)?E.queryRenderedFeatures(N.point,{layers:[m]}):[];V.length?I||(I=!0,g.call(E,new pn(p,E,N.originalEvent,{features:V}))):I=!1},mouseout:function(){I=!1}}}}if(p==="mouseleave"||p==="mouseout"){var D=!1;return{layer:m,listener:g,delegates:{mousemove:function(N){(E.getLayer(m)?E.queryRenderedFeatures(N.point,{layers:[m]}):[]).length?D=!0:D&&(D=!1,g.call(E,new pn(p,E,N.originalEvent)))},mouseout:function(N){D&&(D=!1,g.call(E,new pn(p,E,N.originalEvent)))}}}}return{layer:m,listener:g,delegates:(x={},x[p]=function(N){var V=E.getLayer(m)?E.queryRenderedFeatures(N.point,{layers:[m]}):[];V.length&&(N.features=V,g.call(E,N),delete N.features)},x)}},s.prototype.on=function(p,m,g){if(g===void 0)return o.prototype.on.call(this,p,m);var x=this._createDelegatedListener(p,m,g);for(var E in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(x),x.delegates)this.on(E,x.delegates[E]);return this},s.prototype.once=function(p,m,g){if(g===void 0)return o.prototype.once.call(this,p,m);var x=this._createDelegatedListener(p,m,g);for(var E in x.delegates)this.once(E,x.delegates[E]);return this},s.prototype.off=function(p,m,g){var x=this;return g===void 0?o.prototype.off.call(this,p,m):(this._delegatedListeners&&this._delegatedListeners[p]&&function(E){for(var I=E[p],D=0;D<I.length;D++){var N=I[D];if(N.layer===m&&N.listener===g){for(var V in N.delegates)x.off(V,N.delegates[V]);return I.splice(D,1),x}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(p,m){if(!this.style)return[];var g;if(m!==void 0||p===void 0||p instanceof l.Point||Array.isArray(p)||(m=p,p=void 0),m=m||{},(p=p||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof p[0]=="number")g=[l.Point.convert(p)];else{var x=l.Point.convert(p[0]),E=l.Point.convert(p[1]);g=[x,new l.Point(E.x,x.y),E,new l.Point(x.x,E.y),x]}return this.style.queryRenderedFeatures(g,m,this.transform)},s.prototype.querySourceFeatures=function(p,m){return this.style.querySourceFeatures(p,m)},s.prototype.setStyle=function(p,m){return(m=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(p,m))},s.prototype._getUIString=function(p){var m=this._locale[p];if(m==null)throw new Error("Missing UI string '"+p+"'");return m},s.prototype._updateStyle=function(p,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),p?(this.style=new jr(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new jr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(p,m){var g=this;if(typeof p=="string"){var x=this._requestManager.normalizeStyleURL(p),E=this._requestManager.transformRequest(x,l.ResourceType.Style);l.getJSON(E,function(I,D){I?g.fire(new l.ErrorEvent(I)):D&&g._updateDiff(D,m)})}else typeof p=="object"&&this._updateDiff(p,m)},s.prototype._updateDiff=function(p,m){try{this.style.setState(p)&&this._update(!0)}catch(g){l.warnOnce("Unable to perform style diff: "+(g.message||g.error||g)+".  Rebuilding the style from scratch."),this._updateStyle(p,m)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(p,m){return this._lazyInitEmptyStyle(),this.style.addSource(p,m),this._update(!0)},s.prototype.isSourceLoaded=function(p){var m=this.style&&this.style.sourceCaches[p];if(m!==void 0)return m.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+p+"'")))},s.prototype.areTilesLoaded=function(){var p=this.style&&this.style.sourceCaches;for(var m in p){var g=p[m]._tiles;for(var x in g){var E=g[x];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(p,m,g){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,m,g)},s.prototype.removeSource=function(p){return this.style.removeSource(p),this._update(!0)},s.prototype.getSource=function(p){return this.style.getSource(p)},s.prototype.addImage=function(p,m,g){g===void 0&&(g={});var x=g.pixelRatio;x===void 0&&(x=1);var E=g.sdf;E===void 0&&(E=!1);var I=g.stretchX,D=g.stretchY,N=g.content;if(this._lazyInitEmptyStyle(),m instanceof dp||Er&&m instanceof Er){var V=l.browser.getImageData(m);this.style.addImage(p,{data:new l.RGBAImage({width:V.width,height:V.height},V.data),pixelRatio:x,stretchX:I,stretchY:D,content:N,sdf:E,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Z=m;this.style.addImage(p,{data:new l.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:x,stretchX:I,stretchY:D,content:N,sdf:E,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,p)}},s.prototype.updateImage=function(p,m){var g=this.style.getImage(p);if(!g)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var x=m instanceof dp||Er&&m instanceof Er?l.browser.getImageData(m):m,E=x.width,I=x.height,D=x.data;return E===void 0||I===void 0?this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):E!==g.data.width||I!==g.data.height?this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(g.data.replace(D,!(m instanceof dp||Er&&m instanceof Er)),void this.style.updateImage(p,g))},s.prototype.hasImage=function(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(p){this.style.removeImage(p)},s.prototype.loadImage=function(p,m){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),m)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(p,m){return this._lazyInitEmptyStyle(),this.style.addLayer(p,m),this._update(!0)},s.prototype.moveLayer=function(p,m){return this.style.moveLayer(p,m),this._update(!0)},s.prototype.removeLayer=function(p){return this.style.removeLayer(p),this._update(!0)},s.prototype.getLayer=function(p){return this.style.getLayer(p)},s.prototype.setLayerZoomRange=function(p,m,g){return this.style.setLayerZoomRange(p,m,g),this._update(!0)},s.prototype.setFilter=function(p,m,g){return g===void 0&&(g={}),this.style.setFilter(p,m,g),this._update(!0)},s.prototype.getFilter=function(p){return this.style.getFilter(p)},s.prototype.setPaintProperty=function(p,m,g,x){return x===void 0&&(x={}),this.style.setPaintProperty(p,m,g,x),this._update(!0)},s.prototype.getPaintProperty=function(p,m){return this.style.getPaintProperty(p,m)},s.prototype.setLayoutProperty=function(p,m,g,x){return x===void 0&&(x={}),this.style.setLayoutProperty(p,m,g,x),this._update(!0)},s.prototype.getLayoutProperty=function(p,m){return this.style.getLayoutProperty(p,m)},s.prototype.setLight=function(p,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(p,m),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(p,m){return this.style.setFeatureState(p,m),this._update()},s.prototype.removeFeatureState=function(p,m){return this.style.removeFeatureState(p,m),this._update()},s.prototype.getFeatureState=function(p){return this.style.getFeatureState(p)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var p=0,m=0;return this._container&&(p=this._container.clientWidth||400,m=this._container.clientHeight||300),[p,m]},s.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=M.create("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=M.create("div","mapboxgl-canvas-container",p);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=M.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var g=this._containerDimensions();this._resizeCanvas(g[0],g[1]);var x=this._controlContainer=M.create("div","mapboxgl-control-container",p),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(I){E[I]=M.create("div","mapboxgl-ctrl-"+I,x)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(p,m){var g=l.browser.devicePixelRatio||1;this._canvas.width=g*p,this._canvas.height=g*m,this._canvas.style.width=p+"px",this._canvas.style.height=m+"px"},s.prototype._setupPainter=function(){var p=l.extend({},k.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);m?(this.painter=new Ar(m,this.transform),l.webpSupported.testSupport(m)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))},s.prototype._contextRestored=function(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))},s.prototype._onMapScroll=function(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(p){return this._update(),this._renderTaskQueue.add(p)},s.prototype._cancelRenderFrame=function(p){this._renderTaskQueue.remove(p)},s.prototype._render=function(p){var m,g=this,x=0,E=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=E.createQueryEXT(),E.beginQueryEXT(E.TIME_ELAPSED_EXT,m),x=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),!this._removed){var I=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var D=this.transform.zoom,N=l.browser.now();this.style.zoomHistory.update(D,N);var V=new l.EvaluationParameters(D,{now:N,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Z=V.crossFadingFactor();Z===1&&Z===this._crossFadingFactor||(I=!0,this._crossFadingFactor=Z),this.style.update(V)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||I)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var J=l.browser.now()-x;E.endQueryEXT(E.TIME_ELAPSED_EXT,m),setTimeout(function(){var W=E.getQueryObjectEXT(m,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(m),g.fire(new l.Event("gpu-timing-frame",{cpuTime:J,gpuTime:W}))},50)}if(this.listens("gpu-timing-layer")){var Y=this.painter.collectGpuTimers();setTimeout(function(){var W=g.painter.queryGpuTimers(Y);g.fire(new l.Event("gpu-timing-layer",{layerTimes:W}))},50)}var ie=this._sourcesDirty||this._styleDirty||this._placementDirty;return ie||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||ie||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var p=0,m=this._controls;p<m.length;p+=1)m[p].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),Vs(this._canvasContainer),Vs(this._controlContainer),Vs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},s.prototype.triggerRepaint=function(){var p=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(m){p._frame=null,p._render(m)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(p){this._trackResize&&this.resize({originalEvent:p})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(p){this._showPadding!==p&&(this._showPadding=p,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(p){this._vertices=p,this._update()},s.prototype._setCacheLimits=function(p,m){l.setCacheLimits(p,m)},a.version.get=function(){return l.version},Object.defineProperties(s.prototype,a),s}(Kl);function Vs(o){o.parentNode&&o.parentNode.removeChild(o)}var mp={showCompass:!0,showZoom:!0,visualizePitch:!1},Ga=function(o){var s=this;this.options=l.extend({},mp,o),this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return s._map.zoomIn({},{originalEvent:a})}),M.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return s._map.zoomOut({},{originalEvent:a})}),M.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:a}):s._map.resetNorth({},{originalEvent:a})}),this._compassIcon=M.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ga.prototype._updateZoomButtons=function(){var o=this._map.getZoom(),s=o===this._map.getMaxZoom(),a=o===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},Ga.prototype._rotateCompassArrow=function(){var o=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=o},Ga.prototype.onAdd=function(o){return this._map=o,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new oo(this._map,this._compass,this.options.visualizePitch)),this._container},Ga.prototype.onRemove=function(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ga.prototype._createButton=function(o,s){var a=M.create("button",o,this._container);return a.type="button",a.addEventListener("click",s),a},Ga.prototype._setButtonTitle=function(o,s){var a=this._map._getUIString("NavigationControl."+s);o.title=a,o.setAttribute("aria-label",a)};var oo=function(o,s,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new Wl({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,a&&(this.mousePitch=new pp({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),M.addEventListener(s,"mousedown",this.mousedown),M.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(s,"touchmove",this.touchmove),M.addEventListener(s,"touchend",this.touchend),M.addEventListener(s,"touchcancel",this.reset)};function pu(o,s,a){if(o=new l.LngLat(o.lng,o.lat),s){var p=new l.LngLat(o.lng-360,o.lat),m=new l.LngLat(o.lng+360,o.lat),g=a.locationPoint(o).distSqr(s);a.locationPoint(p).distSqr(s)<g?o=p:a.locationPoint(m).distSqr(s)<g&&(o=m)}for(;Math.abs(o.lng-a.center.lng)>180;){var x=a.locationPoint(o);if(x.x>=0&&x.y>=0&&x.x<=a.width&&x.y<=a.height)break;o.lng>a.center.lng?o.lng-=360:o.lng+=360}return o}oo.prototype.down=function(o,s){this.mouseRotate.mousedown(o,s),this.mousePitch&&this.mousePitch.mousedown(o,s),M.disableDrag()},oo.prototype.move=function(o,s){var a=this.map,p=this.mouseRotate.mousemoveWindow(o,s);if(p&&p.bearingDelta&&a.setBearing(a.getBearing()+p.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(o,s);m&&m.pitchDelta&&a.setPitch(a.getPitch()+m.pitchDelta)}},oo.prototype.off=function(){var o=this.element;M.removeEventListener(o,"mousedown",this.mousedown),M.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(o,"touchmove",this.touchmove),M.removeEventListener(o,"touchend",this.touchend),M.removeEventListener(o,"touchcancel",this.reset),this.offTemp()},oo.prototype.offTemp=function(){M.enableDrag(),M.removeEventListener(l.window,"mousemove",this.mousemove),M.removeEventListener(l.window,"mouseup",this.mouseup)},oo.prototype.mousedown=function(o){this.down(l.extend({},o,{ctrlKey:!0,preventDefault:function(){return o.preventDefault()}}),M.mousePos(this.element,o)),M.addEventListener(l.window,"mousemove",this.mousemove),M.addEventListener(l.window,"mouseup",this.mouseup)},oo.prototype.mousemove=function(o){this.move(o,M.mousePos(this.element,o))},oo.prototype.mouseup=function(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()},oo.prototype.touchstart=function(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return o.preventDefault()}},this._startPos))},oo.prototype.touchmove=function(o){o.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:function(){return o.preventDefault()}},this._lastPos))},oo.prototype.touchend=function(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},oo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ba={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Yl(o,s,a){var p=o.classList;for(var m in ba)p.remove("mapboxgl-"+a+"-anchor-"+m);p.add("mapboxgl-"+a+"-anchor-"+s)}var hu,il=function(o){function s(a,p){if(o.call(this),(a instanceof l.window.HTMLElement||p)&&(a=l.extend({element:a},p)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=l.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div"),this._element.setAttribute("aria-label","Map marker");var m=M.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var g=M.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");var x=M.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"fill-rule","nonzero");var E=M.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");for(var I=0,D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];I<D.length;I+=1){var N=D[I],V=M.createNS("http://www.w3.org/2000/svg","ellipse");V.setAttributeNS(null,"opacity","0.04"),V.setAttributeNS(null,"cx","10.5"),V.setAttributeNS(null,"cy","5.80029008"),V.setAttributeNS(null,"rx",N.rx),V.setAttributeNS(null,"ry",N.ry),E.appendChild(V)}var Z=M.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"fill",this._color);var J=M.createNS("http://www.w3.org/2000/svg","path");J.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Z.appendChild(J);var Y=M.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");var ie=M.createNS("http://www.w3.org/2000/svg","path");ie.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild(ie);var W=M.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(6.0, 7.0)"),W.setAttributeNS(null,"fill","#FFFFFF");var ne=M.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");var ce=M.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");var ye=M.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#FFFFFF"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962"),ne.appendChild(ce),ne.appendChild(ye),x.appendChild(E),x.appendChild(Z),x.appendChild(Y),x.appendChild(W),x.appendChild(ne),m.appendChild(x),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=l.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Te){Te.preventDefault()}),this._element.addEventListener("mousedown",function(Te){Te.preventDefault()}),Yl(this._element,this._anchor,"marker"),this._popup=null}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=l.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var p=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(24.6+p)],"bottom-right":[-p,-1*(24.6+p)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(a){var p=a.code,m=a.charCode||a.keyCode;p!=="Space"&&p!=="Enter"&&m!==32&&m!==13||this.togglePopup()},s.prototype._onMapClick=function(a){var p=a.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},s.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=pu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(p="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,ba[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+p)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(a){return this._offset=l.Point.convert(a),this._update(),this},s.prototype._onMove=function(a){if(!this._isDragging){var p=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(l.Evented),yp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},fu=0,qs=!1,vp=function(o){function s(a){o.call(this),this.options=l.extend({},yp,a),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){var p;return this._map=a,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),p=this._setupUI,hu!==void 0?p(hu):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(m){p(hu=m.state!=="denied")}):p(hu=!!l.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,fu=0,qs=!1},s.prototype._isOutOfMapMaxBounds=function(a){var p=this._map.getMaxBounds(),m=a.coords;return p&&(m.longitude<p.getWest()||m.longitude>p.getEast()||m.latitude<p.getSouth()||m.latitude>p.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",a)),this._finish()}},s.prototype._updateCamera=function(a){var p=new l.LngLat(a.coords.longitude,a.coords.latitude),m=a.coords.accuracy,g=this._map.getBearing(),x=l.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(p.toBounds(m),x,{geolocateSource:!0})},s.prototype._updateMarker=function(a){if(a){var p=new l.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,p=this._map.unproject([0,a]),m=this._map.unproject([1,a]),g=p.distanceTo(m),x=Math.ceil(2*this._accuracy/g);this._circleElement.style.width=x+"px",this._circleElement.style.height=x+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&qs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",a)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(a){var p=this;if(this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this._geolocateButton=M.create("button","mapboxgl-ctrl-geolocate",this._container),M.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var g=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new il(this._dotElement),this._circleElement=M.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new il({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(x){x.geolocateSource||p._watchState!=="ACTIVE_LOCK"||x.originalEvent&&x.originalEvent.type==="resize"||(p._watchState="BACKGROUND",p._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),p._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),p.fire(new l.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":fu--,qs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++fu>1?(a={maximumAge:6e5,timeout:0},qs=!0):(a=this.options.positionOptions,qs=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(l.Evented),us={maxWidth:100,unit:"metric"},ls=function(o){this.options=l.extend({},us,o),l.bindAll(["_onMove","setUnit"],this)};function Jl(o,s,a){var p=a&&a.maxWidth||100,m=o._container.clientHeight/2,g=o.unproject([0,m]),x=o.unproject([p,m]),E=g.distanceTo(x);if(a&&a.unit==="imperial"){var I=3.2808*E;I>5280?cs(s,p,I/5280,o._getUIString("ScaleControl.Miles")):cs(s,p,I,o._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?cs(s,p,E/1852,o._getUIString("ScaleControl.NauticalMiles")):E>=1e3?cs(s,p,E/1e3,o._getUIString("ScaleControl.Kilometers")):cs(s,p,E,o._getUIString("ScaleControl.Meters"))}function cs(o,s,a,p){var m,g,x,E=(m=a,(g=Math.pow(10,(""+Math.floor(m)).length-1))*(x=(x=m/g)>=10?10:x>=5?5:x>=3?3:x>=2?2:x>=1?1:function(I){var D=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*D)/D}(x)));o.style.width=s*(E/a)+"px",o.innerHTML=E+"&nbsp;"+p}ls.prototype.getDefaultPosition=function(){return"bottom-left"},ls.prototype._onMove=function(){Jl(this._map,this._container,this.options)},ls.prototype.onAdd=function(o){return this._map=o,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",o.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ls.prototype.onRemove=function(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ls.prototype.setUnit=function(o){this.options.unit=o,Jl(this._map,this._container,this.options)};var Bo=function(o){this._fullscreen=!1,o&&o.container&&(o.container instanceof l.window.HTMLElement?this._container=o.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};Bo.prototype.onAdd=function(o){return this._map=o,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Bo.prototype.onRemove=function(){M.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Bo.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},Bo.prototype._setupUI=function(){var o=this._fullscreenButton=M.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);M.create("span","mapboxgl-ctrl-icon",o).setAttribute("aria-hidden",!0),o.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Bo.prototype._updateTitle=function(){var o=this._getTitle();this._fullscreenButton.setAttribute("aria-label",o),this._fullscreenButton.title=o},Bo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Bo.prototype._isFullscreen=function(){return this._fullscreen},Bo.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Bo.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var gp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ol=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),_p=function(o){function s(a){o.call(this),this.options=l.extend(Object.create(gp),a),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=l.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(a){return this.setDOMContent(l.window.document.createTextNode(a))},s.prototype.setHTML=function(a){var p,m=l.window.document.createDocumentFragment(),g=l.window.document.createElement("body");for(g.innerHTML=a;p=g.firstChild;)m.appendChild(p);return this.setDOMContent(m)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},s.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},s.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},s.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},s.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=M.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(a){this._update(a.point)},s.prototype._onMouseMove=function(a){this._update(a.point)},s.prototype._onDrag=function(a){this._update(a.point)},s.prototype._update=function(a){var p=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=M.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=M.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(V){return p._container.classList.add(V)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=pu(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var m=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),g=this.options.anchor,x=function V(Z){if(Z){if(typeof Z=="number"){var J=Math.round(Math.sqrt(.5*Math.pow(Z,2)));return{center:new l.Point(0,0),top:new l.Point(0,Z),"top-left":new l.Point(J,J),"top-right":new l.Point(-J,J),bottom:new l.Point(0,-Z),"bottom-left":new l.Point(J,-J),"bottom-right":new l.Point(-J,-J),left:new l.Point(Z,0),right:new l.Point(-Z,0)}}if(Z instanceof l.Point||Array.isArray(Z)){var Y=l.Point.convert(Z);return{center:Y,top:Y,"top-left":Y,"top-right":Y,bottom:Y,"bottom-left":Y,"bottom-right":Y,left:Y,right:Y}}return{center:l.Point.convert(Z.center||[0,0]),top:l.Point.convert(Z.top||[0,0]),"top-left":l.Point.convert(Z["top-left"]||[0,0]),"top-right":l.Point.convert(Z["top-right"]||[0,0]),bottom:l.Point.convert(Z.bottom||[0,0]),"bottom-left":l.Point.convert(Z["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(Z["bottom-right"]||[0,0]),left:l.Point.convert(Z.left||[0,0]),right:l.Point.convert(Z.right||[0,0])}}return V(new l.Point(0,0))}(this.options.offset);if(!g){var E,I=this._container.offsetWidth,D=this._container.offsetHeight;E=m.y+x.bottom.y<D?["top"]:m.y>this._map.transform.height-D?["bottom"]:[],m.x<I/2?E.push("left"):m.x>this._map.transform.width-I/2&&E.push("right"),g=E.length===0?"bottom":E.join("-")}var N=m.add(x[g]).round();M.setTransform(this._container,ba[g]+" translate("+N.x+"px,"+N.y+"px)"),Yl(this._container,g,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(ol);a&&a.focus()}},s.prototype._onClose=function(){this.remove()},s}(l.Evented),Ql={version:l.version,supported:k,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:tf,NavigationControl:Ga,GeolocateControl:vp,AttributionControl:gi,ScaleControl:ls,FullscreenControl:Bo,Popup:_p,Marker:il,Style:jr,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){Ie().acquire(Pe)},clearPrewarmedResources:function(){var o=st;o&&(o.isPreloaded()&&o.numActive()===1?(o.release(Pe),st=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(o){l.config.ACCESS_TOKEN=o},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(o){l.config.API_URL=o},get workerCount(){return Ue.workerCount},set workerCount(o){Ue.workerCount=o},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(o){l.config.MAX_PARALLEL_IMAGE_REQUESTS=o},clearStorage:function(o){l.clearTileCache(o)},workerUrl:""};return Ql}),y})})(v0);var kP=v0.exports,Q2="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",eS=Q2,tS=eS;function g0(){}function _0(){}_0.resetWarningCache=g0;var rS=function(){function r(f,y,S,l,k,M){if(M!==tS){var q=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw q.name="Invariant Violation",q}}r.isRequired=r;function i(){return r}var u={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:_0,resetWarningCache:g0};return u.PropTypes=u,u};rS();var bu=Mc.createContext(null);function nS(r){r()}var x0=nS,iS=function(i){return x0=i},oS=function(){return x0};function aS(){var r=oS(),i=null,u=null;return{clear:function(){i=null,u=null},notify:function(){r(function(){for(var y=i;y;)y.callback(),y=y.next})},get:function(){for(var y=[],S=i;S;)y.push(S),S=S.next;return y},subscribe:function(y){var S=!0,l=u={callback:y,next:null,prev:u};return l.prev?l.prev.next=l:i=l,function(){!S||i===null||(S=!1,l.next?l.next.prev=l.prev:u=l.prev,l.prev?l.prev.next=l.next:i=l.next)}}}}var b0={notify:function(){},get:function(){return[]}};function w0(r,i){var u,f=b0;function y(ke){return M(),f.subscribe(ke)}function S(){f.notify()}function l(){ee.onStateChange&&ee.onStateChange()}function k(){return Boolean(u)}function M(){u||(u=i?i.addNestedSub(l):r.subscribe(l),f=aS())}function q(){u&&(u(),u=void 0,f.clear(),f=b0)}var ee={addNestedSub:y,notifyNestedSubs:S,handleChangeWrapper:l,isSubscribed:k,trySubscribe:M,tryUnsubscribe:q,getListeners:function(){return f}};return ee}var ey=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?Si.exports.useLayoutEffect:Si.exports.useEffect;function AP(r){var i=r.store,u=r.context,f=r.children,y=Si.exports.useMemo(function(){var k=w0(i);return k.onStateChange=k.notifyNestedSubs,{store:i,subscription:k}},[i]),S=Si.exports.useMemo(function(){return i.getState()},[i]);ey(function(){var k=y.subscription;return k.trySubscribe(),S!==i.getState()&&k.notifyNestedSubs(),function(){k.tryUnsubscribe(),k.onStateChange=null}},[y,S]);var l=u||bu;return J2(l.Provider,{value:y,children:f})}function Yr(){return Yr=Object.assign||function(r){for(var i=1;i<arguments.length;i++){var u=arguments[i];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(r[f]=u[f])}return r},Yr.apply(this,arguments)}var S0={exports:{}},Jr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ei=typeof Symbol=="function"&&Symbol.for,ty=Ei?Symbol.for("react.element"):60103,ry=Ei?Symbol.for("react.portal"):60106,Uf=Ei?Symbol.for("react.fragment"):60107,Nf=Ei?Symbol.for("react.strict_mode"):60108,jf=Ei?Symbol.for("react.profiler"):60114,Vf=Ei?Symbol.for("react.provider"):60109,qf=Ei?Symbol.for("react.context"):60110,ny=Ei?Symbol.for("react.async_mode"):60111,Zf=Ei?Symbol.for("react.concurrent_mode"):60111,Gf=Ei?Symbol.for("react.forward_ref"):60112,Wf=Ei?Symbol.for("react.suspense"):60113,sS=Ei?Symbol.for("react.suspense_list"):60120,$f=Ei?Symbol.for("react.memo"):60115,Xf=Ei?Symbol.for("react.lazy"):60116,uS=Ei?Symbol.for("react.block"):60121,lS=Ei?Symbol.for("react.fundamental"):60117,cS=Ei?Symbol.for("react.responder"):60118,pS=Ei?Symbol.for("react.scope"):60119;function aa(r){if(typeof r=="object"&&r!==null){var i=r.$$typeof;switch(i){case ty:switch(r=r.type,r){case ny:case Zf:case Uf:case jf:case Nf:case Wf:return r;default:switch(r=r&&r.$$typeof,r){case qf:case Gf:case Xf:case $f:case Vf:return r;default:return i}}case ry:return i}}}function E0(r){return aa(r)===Zf}Jr.AsyncMode=ny;Jr.ConcurrentMode=Zf;Jr.ContextConsumer=qf;Jr.ContextProvider=Vf;Jr.Element=ty;Jr.ForwardRef=Gf;Jr.Fragment=Uf;Jr.Lazy=Xf;Jr.Memo=$f;Jr.Portal=ry;Jr.Profiler=jf;Jr.StrictMode=Nf;Jr.Suspense=Wf;Jr.isAsyncMode=function(r){return E0(r)||aa(r)===ny};Jr.isConcurrentMode=E0;Jr.isContextConsumer=function(r){return aa(r)===qf};Jr.isContextProvider=function(r){return aa(r)===Vf};Jr.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===ty};Jr.isForwardRef=function(r){return aa(r)===Gf};Jr.isFragment=function(r){return aa(r)===Uf};Jr.isLazy=function(r){return aa(r)===Xf};Jr.isMemo=function(r){return aa(r)===$f};Jr.isPortal=function(r){return aa(r)===ry};Jr.isProfiler=function(r){return aa(r)===jf};Jr.isStrictMode=function(r){return aa(r)===Nf};Jr.isSuspense=function(r){return aa(r)===Wf};Jr.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===Uf||r===Zf||r===jf||r===Nf||r===Wf||r===sS||typeof r=="object"&&r!==null&&(r.$$typeof===Xf||r.$$typeof===$f||r.$$typeof===Vf||r.$$typeof===qf||r.$$typeof===Gf||r.$$typeof===lS||r.$$typeof===cS||r.$$typeof===pS||r.$$typeof===uS)};Jr.typeOf=aa;S0.exports=Jr;var C0=S0.exports,hS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},P0={};P0[C0.ForwardRef]=hS;P0[C0.Memo]=fS;var mn={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf=60103,Hf=60106,$p=60107,Xp=60108,Kp=60114,Hp=60109,Yp=60110,Jp=60112,Qp=60113,iy=60120,eh=60115,th=60116,T0=60121,I0=60122,k0=60117,A0=60129,M0=60131;if(typeof Symbol=="function"&&Symbol.for){var Fi=Symbol.for;Kf=Fi("react.element"),Hf=Fi("react.portal"),$p=Fi("react.fragment"),Xp=Fi("react.strict_mode"),Kp=Fi("react.profiler"),Hp=Fi("react.provider"),Yp=Fi("react.context"),Jp=Fi("react.forward_ref"),Qp=Fi("react.suspense"),iy=Fi("react.suspense_list"),eh=Fi("react.memo"),th=Fi("react.lazy"),T0=Fi("react.block"),I0=Fi("react.server.block"),k0=Fi("react.fundamental"),A0=Fi("react.debug_trace_mode"),M0=Fi("react.legacy_hidden")}function Ya(r){if(typeof r=="object"&&r!==null){var i=r.$$typeof;switch(i){case Kf:switch(r=r.type,r){case $p:case Kp:case Xp:case Qp:case iy:return r;default:switch(r=r&&r.$$typeof,r){case Yp:case Jp:case th:case eh:case Hp:return r;default:return i}}case Hf:return i}}}var dS=Hp,mS=Kf,yS=Jp,vS=$p,gS=th,_S=eh,xS=Hf,bS=Kp,wS=Xp,SS=Qp;mn.ContextConsumer=Yp;mn.ContextProvider=dS;mn.Element=mS;mn.ForwardRef=yS;mn.Fragment=vS;mn.Lazy=gS;mn.Memo=_S;mn.Portal=xS;mn.Profiler=bS;mn.StrictMode=wS;mn.Suspense=SS;mn.isAsyncMode=function(){return!1};mn.isConcurrentMode=function(){return!1};mn.isContextConsumer=function(r){return Ya(r)===Yp};mn.isContextProvider=function(r){return Ya(r)===Hp};mn.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===Kf};mn.isForwardRef=function(r){return Ya(r)===Jp};mn.isFragment=function(r){return Ya(r)===$p};mn.isLazy=function(r){return Ya(r)===th};mn.isMemo=function(r){return Ya(r)===eh};mn.isPortal=function(r){return Ya(r)===Hf};mn.isProfiler=function(r){return Ya(r)===Kp};mn.isStrictMode=function(r){return Ya(r)===Xp};mn.isSuspense=function(r){return Ya(r)===Qp};mn.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===$p||r===Kp||r===A0||r===Xp||r===Qp||r===iy||r===M0||typeof r=="object"&&r!==null&&(r.$$typeof===th||r.$$typeof===eh||r.$$typeof===Hp||r.$$typeof===Yp||r.$$typeof===Jp||r.$$typeof===k0||r.$$typeof===T0||r[0]===I0)};mn.typeOf=Ya;function z0(){var r=Si.exports.useContext(bu);return r}function L0(r){r===void 0&&(r=bu);var i=r===bu?z0:function(){return Si.exports.useContext(r)};return function(){var f=i(),y=f.store;return y}}var ES=L0();function CS(r){r===void 0&&(r=bu);var i=r===bu?ES:L0(r);return function(){var f=i();return f.dispatch}}var MP=CS(),PS=function(i,u){return i===u};function TS(r,i,u,f){var y=Si.exports.useReducer(function(Me){return Me+1},0),S=y[1],l=Si.exports.useMemo(function(){return w0(u,f)},[u,f]),k=Si.exports.useRef(),M=Si.exports.useRef(),q=Si.exports.useRef(),ee=Si.exports.useRef(),ke=u.getState(),X;try{if(r!==M.current||ke!==q.current||k.current){var Se=r(ke);ee.current===void 0||!i(Se,ee.current)?X=Se:X=ee.current}else X=ee.current}catch(Me){throw k.current&&(Me.message+=`
The error may be correlated with this previous error:
`+k.current.stack+`

`),Me}return ey(function(){M.current=r,q.current=ke,ee.current=X,k.current=void 0}),ey(function(){function Me(){try{var Le=u.getState();if(Le===q.current)return;var ue=M.current(Le);if(i(ue,ee.current))return;ee.current=ue,q.current=Le}catch(re){k.current=re}S()}return l.onStateChange=Me,l.trySubscribe(),Me(),function(){return l.tryUnsubscribe()}},[u,l]),X}function IS(r){r===void 0&&(r=bu);var i=r===bu?z0:function(){return Si.exports.useContext(r)};return function(f,y){y===void 0&&(y=PS);var S=i(),l=S.store,k=S.subscription,M=TS(f,y,l,k);return Si.exports.useDebugValue(M),M}}var zP=IS(),oy={exports:{}},Ca={},D0={exports:{}},O0={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){var i,u,f,y;if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;r.unstable_now=function(){return S.now()}}else{var l=Date,k=l.now();r.unstable_now=function(){return l.now()-k}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var M=null,q=null,ee=function(){if(M!==null)try{var Ye=r.unstable_now();M(!0,Ye),M=null}catch(At){throw setTimeout(ee,0),At}};i=function(Ye){M!==null?setTimeout(i,0,Ye):(M=Ye,setTimeout(ee,0))},u=function(Ye,At){q=setTimeout(Ye,At)},f=function(){clearTimeout(q)},r.unstable_shouldYield=function(){return!1},y=r.unstable_forceFrameRate=function(){}}else{var ke=window.setTimeout,X=window.clearTimeout;if(typeof console!="undefined"){var Se=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof Se!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var Me=!1,Le=null,ue=-1,re=5,ae=0;r.unstable_shouldYield=function(){return r.unstable_now()>=ae},y=function(){},r.unstable_forceFrameRate=function(Ye){0>Ye||125<Ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<Ye?Math.floor(1e3/Ye):5};var be=new MessageChannel,De=be.port2;be.port1.onmessage=function(){if(Le!==null){var Ye=r.unstable_now();ae=Ye+re;try{Le(!0,Ye)?De.postMessage(null):(Me=!1,Le=null)}catch(At){throw De.postMessage(null),At}}else Me=!1},i=function(Ye){Le=Ye,Me||(Me=!0,De.postMessage(null))},u=function(Ye,At){ue=ke(function(){Ye(r.unstable_now())},At)},f=function(){X(ue),ue=-1}}function mt(Ye,At){var $t=Ye.length;Ye.push(At);e:for(;;){var Lr=$t-1>>>1,Zr=Ye[Lr];if(Zr!==void 0&&0<Ot(Zr,At))Ye[Lr]=At,Ye[$t]=Zr,$t=Lr;else break e}}function We(Ye){return Ye=Ye[0],Ye===void 0?null:Ye}function Tt(Ye){var At=Ye[0];if(At!==void 0){var $t=Ye.pop();if($t!==At){Ye[0]=$t;e:for(var Lr=0,Zr=Ye.length;Lr<Zr;){var fo=2*(Lr+1)-1,Qr=Ye[fo],si=fo+1,sr=Ye[si];if(Qr!==void 0&&0>Ot(Qr,$t))sr!==void 0&&0>Ot(sr,Qr)?(Ye[Lr]=sr,Ye[si]=$t,Lr=si):(Ye[Lr]=Qr,Ye[fo]=$t,Lr=fo);else if(sr!==void 0&&0>Ot(sr,$t))Ye[Lr]=sr,Ye[si]=$t,Lr=si;else break e}}return At}return null}function Ot(Ye,At){var $t=Ye.sortIndex-At.sortIndex;return $t!==0?$t:Ye.id-At.id}var pt=[],er=[],wr=1,Fr=null,Ut=3,ir=!1,qr=!1,zr=!1;function ri(Ye){for(var At=We(er);At!==null;){if(At.callback===null)Tt(er);else if(At.startTime<=Ye)Tt(er),At.sortIndex=At.expirationTime,mt(pt,At);else break;At=We(er)}}function kn(Ye){if(zr=!1,ri(Ye),!qr)if(We(pt)!==null)qr=!0,i(ni);else{var At=We(er);At!==null&&u(kn,At.startTime-Ye)}}function ni(Ye,At){qr=!1,zr&&(zr=!1,f()),ir=!0;var $t=Ut;try{for(ri(At),Fr=We(pt);Fr!==null&&(!(Fr.expirationTime>At)||Ye&&!r.unstable_shouldYield());){var Lr=Fr.callback;if(typeof Lr=="function"){Fr.callback=null,Ut=Fr.priorityLevel;var Zr=Lr(Fr.expirationTime<=At);At=r.unstable_now(),typeof Zr=="function"?Fr.callback=Zr:Fr===We(pt)&&Tt(pt),ri(At)}else Tt(pt);Fr=We(pt)}if(Fr!==null)var fo=!0;else{var Qr=We(er);Qr!==null&&u(kn,Qr.startTime-At),fo=!1}return fo}finally{Fr=null,Ut=$t,ir=!1}}var Vt=y;r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ye){Ye.callback=null},r.unstable_continueExecution=function(){qr||ir||(qr=!0,i(ni))},r.unstable_getCurrentPriorityLevel=function(){return Ut},r.unstable_getFirstCallbackNode=function(){return We(pt)},r.unstable_next=function(Ye){switch(Ut){case 1:case 2:case 3:var At=3;break;default:At=Ut}var $t=Ut;Ut=At;try{return Ye()}finally{Ut=$t}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=Vt,r.unstable_runWithPriority=function(Ye,At){switch(Ye){case 1:case 2:case 3:case 4:case 5:break;default:Ye=3}var $t=Ut;Ut=Ye;try{return At()}finally{Ut=$t}},r.unstable_scheduleCallback=function(Ye,At,$t){var Lr=r.unstable_now();switch(typeof $t=="object"&&$t!==null?($t=$t.delay,$t=typeof $t=="number"&&0<$t?Lr+$t:Lr):$t=Lr,Ye){case 1:var Zr=-1;break;case 2:Zr=250;break;case 5:Zr=1073741823;break;case 4:Zr=1e4;break;default:Zr=5e3}return Zr=$t+Zr,Ye={id:wr++,callback:At,priorityLevel:Ye,startTime:$t,expirationTime:Zr,sortIndex:-1},$t>Lr?(Ye.sortIndex=$t,mt(er,Ye),We(pt)===null&&Ye===We(er)&&(zr?f():zr=!0,u(kn,$t-Lr))):(Ye.sortIndex=Zr,mt(pt,Ye),qr||ir||(qr=!0,i(ni))),Ye},r.unstable_wrapCallback=function(Ye){var At=Ut;return function(){var $t=Ut;Ut=At;try{return Ye.apply(this,arguments)}finally{Ut=$t}}}})(O0);D0.exports=O0;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf=Si.exports,Tn=Y_,Ci=D0.exports;function at(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)i+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Yf)throw Error(at(227));var R0=new Set,rh={};function vl(r,i){zc(r,i),zc(r+"Capture",i)}function zc(r,i){for(rh[r]=i,r=0;r<i.length;r++)R0.add(i[r])}var Qs=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),kS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F0=Object.prototype.hasOwnProperty,B0={},U0={};function AS(r){return F0.call(U0,r)?!0:F0.call(B0,r)?!1:kS.test(r)?U0[r]=!0:(B0[r]=!0,!1)}function MS(r,i,u,f){if(u!==null&&u.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function zS(r,i,u,f){if(i===null||typeof i=="undefined"||MS(r,i,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function Co(r,i,u,f,y,S,l){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=u,this.propertyName=r,this.type=i,this.sanitizeURL=S,this.removeEmptyString=l}var Bi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Bi[r]=new Co(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];Bi[i]=new Co(i,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Bi[r]=new Co(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Bi[r]=new Co(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Bi[r]=new Co(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Bi[r]=new Co(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Bi[r]=new Co(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Bi[r]=new Co(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Bi[r]=new Co(r,5,!1,r.toLowerCase(),null,!1,!1)});var ay=/[\-:]([a-z])/g;function sy(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(ay,sy);Bi[i]=new Co(i,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(ay,sy);Bi[i]=new Co(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(ay,sy);Bi[i]=new Co(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Bi[r]=new Co(r,1,!1,r.toLowerCase(),null,!1,!1)});Bi.xlinkHref=new Co("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Bi[r]=new Co(r,1,!1,r.toLowerCase(),null,!0,!0)});function uy(r,i,u,f){var y=Bi.hasOwnProperty(i)?Bi[i]:null,S=y!==null?y.type===0:f?!1:!(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N");S||(zS(i,u,y,f)&&(u=null),f||y===null?AS(i)&&(u===null?r.removeAttribute(i):r.setAttribute(i,""+u)):y.mustUseProperty?r[y.propertyName]=u===null?y.type===3?!1:"":u:(i=y.attributeName,f=y.attributeNamespace,u===null?r.removeAttribute(i):(y=y.type,u=y===3||y===4&&u===!0?"":""+u,f?r.setAttributeNS(f,i,u):r.setAttribute(i,u))))}var gl=Yf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nh=60103,_l=60106,wu=60107,ly=60108,ih=60114,cy=60109,py=60110,Jf=60112,oh=60113,Qf=60120,ed=60115,hy=60116,fy=60121,dy=60128,N0=60129,my=60130,yy=60131;if(typeof Symbol=="function"&&Symbol.for){var Pi=Symbol.for;nh=Pi("react.element"),_l=Pi("react.portal"),wu=Pi("react.fragment"),ly=Pi("react.strict_mode"),ih=Pi("react.profiler"),cy=Pi("react.provider"),py=Pi("react.context"),Jf=Pi("react.forward_ref"),oh=Pi("react.suspense"),Qf=Pi("react.suspense_list"),ed=Pi("react.memo"),hy=Pi("react.lazy"),fy=Pi("react.block"),Pi("react.scope"),dy=Pi("react.opaque.id"),N0=Pi("react.debug_trace_mode"),my=Pi("react.offscreen"),yy=Pi("react.legacy_hidden")}var j0=typeof Symbol=="function"&&Symbol.iterator;function ah(r){return r===null||typeof r!="object"?null:(r=j0&&r[j0]||r["@@iterator"],typeof r=="function"?r:null)}var vy;function sh(r){if(vy===void 0)try{throw Error()}catch(u){var i=u.stack.trim().match(/\n( *(at )?)/);vy=i&&i[1]||""}return`
`+vy+r}var gy=!1;function td(r,i){if(!r||gy)return"";gy=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(M){var f=M}Reflect.construct(r,[],i)}else{try{i.call()}catch(M){f=M}r.call(i.prototype)}else{try{throw Error()}catch(M){f=M}r()}}catch(M){if(M&&f&&typeof M.stack=="string"){for(var y=M.stack.split(`
`),S=f.stack.split(`
`),l=y.length-1,k=S.length-1;1<=l&&0<=k&&y[l]!==S[k];)k--;for(;1<=l&&0<=k;l--,k--)if(y[l]!==S[k]){if(l!==1||k!==1)do if(l--,k--,0>k||y[l]!==S[k])return`
`+y[l].replace(" at new "," at ");while(1<=l&&0<=k);break}}}finally{gy=!1,Error.prepareStackTrace=u}return(r=r?r.displayName||r.name:"")?sh(r):""}function LS(r){switch(r.tag){case 5:return sh(r.type);case 16:return sh("Lazy");case 13:return sh("Suspense");case 19:return sh("SuspenseList");case 0:case 2:case 15:return r=td(r.type,!1),r;case 11:return r=td(r.type.render,!1),r;case 22:return r=td(r.type._render,!1),r;case 1:return r=td(r.type,!0),r;default:return""}}function Lc(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case wu:return"Fragment";case _l:return"Portal";case ih:return"Profiler";case ly:return"StrictMode";case oh:return"Suspense";case Qf:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case py:return(r.displayName||"Context")+".Consumer";case cy:return(r._context.displayName||"Context")+".Provider";case Jf:var i=r.render;return i=i.displayName||i.name||"",r.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case ed:return Lc(r.type);case fy:return Lc(r._render);case hy:i=r._payload,r=r._init;try{return Lc(r(i))}catch{}}return null}function Su(r){switch(typeof r){case"boolean":case"number":case"object":case"string":case"undefined":return r;default:return""}}function V0(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function DS(r){var i=V0(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),f=""+r[i];if(!r.hasOwnProperty(i)&&typeof u!="undefined"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,S=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return y.call(this)},set:function(l){f=""+l,S.call(this,l)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(l){f=""+l},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function rd(r){r._valueTracker||(r._valueTracker=DS(r))}function q0(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var u=i.getValue(),f="";return r&&(f=V0(r)?r.checked?"true":"false":r.value),r=f,r!==u?(i.setValue(r),!0):!1}function nd(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch{return r.body}}function _y(r,i){var u=i.checked;return Tn({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u!=null?u:r._wrapperState.initialChecked})}function Z0(r,i){var u=i.defaultValue==null?"":i.defaultValue,f=i.checked!=null?i.checked:i.defaultChecked;u=Su(i.value!=null?i.value:u),r._wrapperState={initialChecked:f,initialValue:u,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function G0(r,i){i=i.checked,i!=null&&uy(r,"checked",i,!1)}function xy(r,i){G0(r,i);var u=Su(i.value),f=i.type;if(u!=null)f==="number"?(u===0&&r.value===""||r.value!=u)&&(r.value=""+u):r.value!==""+u&&(r.value=""+u);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?by(r,i.type,u):i.hasOwnProperty("defaultValue")&&by(r,i.type,Su(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function W0(r,i,u){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var f=i.type;if(!(f!=="submit"&&f!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,u||i===r.value||(r.value=i),r.defaultValue=i}u=r.name,u!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,u!==""&&(r.name=u)}function by(r,i,u){(i!=="number"||nd(r.ownerDocument)!==r)&&(u==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+u&&(r.defaultValue=""+u))}function OS(r){var i="";return Yf.Children.forEach(r,function(u){u!=null&&(i+=u)}),i}function wy(r,i){return r=Tn({children:void 0},i),(i=OS(i.children))&&(r.children=i),r}function Dc(r,i,u,f){if(r=r.options,i){i={};for(var y=0;y<u.length;y++)i["$"+u[y]]=!0;for(u=0;u<r.length;u++)y=i.hasOwnProperty("$"+r[u].value),r[u].selected!==y&&(r[u].selected=y),y&&f&&(r[u].defaultSelected=!0)}else{for(u=""+Su(u),i=null,y=0;y<r.length;y++){if(r[y].value===u){r[y].selected=!0,f&&(r[y].defaultSelected=!0);return}i!==null||r[y].disabled||(i=r[y])}i!==null&&(i.selected=!0)}}function Sy(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(at(91));return Tn({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function $0(r,i){var u=i.value;if(u==null){if(u=i.children,i=i.defaultValue,u!=null){if(i!=null)throw Error(at(92));if(Array.isArray(u)){if(!(1>=u.length))throw Error(at(93));u=u[0]}i=u}i==null&&(i=""),u=i}r._wrapperState={initialValue:Su(u)}}function X0(r,i){var u=Su(i.value),f=Su(i.defaultValue);u!=null&&(u=""+u,u!==r.value&&(r.value=u),i.defaultValue==null&&r.defaultValue!==u&&(r.defaultValue=u)),f!=null&&(r.defaultValue=""+f)}function K0(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}var Ey={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function H0(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cy(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?H0(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var id,Y0=function(r){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(i,u,f,y){MSApp.execUnsafeLocalFunction(function(){return r(i,u,f,y)})}:r}(function(r,i){if(r.namespaceURI!==Ey.svg||"innerHTML"in r)r.innerHTML=i;else{for(id=id||document.createElement("div"),id.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=id.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function uh(r,i){if(i){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=i;return}}r.textContent=i}var lh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RS=["Webkit","ms","Moz","O"];Object.keys(lh).forEach(function(r){RS.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),lh[i]=lh[r]})});function J0(r,i,u){return i==null||typeof i=="boolean"||i===""?"":u||typeof i!="number"||i===0||lh.hasOwnProperty(r)&&lh[r]?(""+i).trim():i+"px"}function Q0(r,i){r=r.style;for(var u in i)if(i.hasOwnProperty(u)){var f=u.indexOf("--")===0,y=J0(u,i[u],f);u==="float"&&(u="cssFloat"),f?r.setProperty(u,y):r[u]=y}}var FS=Tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Py(r,i){if(i){if(FS[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(at(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(at(60));if(!(typeof i.dangerouslySetInnerHTML=="object"&&"__html"in i.dangerouslySetInnerHTML))throw Error(at(61))}if(i.style!=null&&typeof i.style!="object")throw Error(at(62))}}function Ty(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Iy(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ky=null,Oc=null,Rc=null;function ex(r){if(r=Ih(r)){if(typeof ky!="function")throw Error(at(280));var i=r.stateNode;i&&(i=wd(i),ky(r.stateNode,r.type,i))}}function tx(r){Oc?Rc?Rc.push(r):Rc=[r]:Oc=r}function rx(){if(Oc){var r=Oc,i=Rc;if(Rc=Oc=null,ex(r),i)for(r=0;r<i.length;r++)ex(i[r])}}function Ay(r,i){return r(i)}function nx(r,i,u,f,y){return r(i,u,f,y)}function My(){}var ix=Ay,xl=!1,zy=!1;function Ly(){(Oc!==null||Rc!==null)&&(My(),rx())}function BS(r,i,u){if(zy)return r(i,u);zy=!0;try{return ix(r,i,u)}finally{zy=!1,Ly()}}function ch(r,i){var u=r.stateNode;if(u===null)return null;var f=wd(u);if(f===null)return null;u=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(at(231,i,typeof u));return u}var Dy=!1;if(Qs)try{var ph={};Object.defineProperty(ph,"passive",{get:function(){Dy=!0}}),window.addEventListener("test",ph,ph),window.removeEventListener("test",ph,ph)}catch{Dy=!1}function US(r,i,u,f,y,S,l,k,M){var q=Array.prototype.slice.call(arguments,3);try{i.apply(u,q)}catch(ee){this.onError(ee)}}var hh=!1,od=null,ad=!1,Oy=null,NS={onError:function(r){hh=!0,od=r}};function jS(r,i,u,f,y,S,l,k,M){hh=!1,od=null,US.apply(NS,arguments)}function VS(r,i,u,f,y,S,l,k,M){if(jS.apply(this,arguments),hh){if(hh){var q=od;hh=!1,od=null}else throw Error(at(198));ad||(ad=!0,Oy=q)}}function bl(r){var i=r,u=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&1026)!=0&&(u=i.return),r=i.return;while(r)}return i.tag===3?u:null}function ox(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function ax(r){if(bl(r)!==r)throw Error(at(188))}function qS(r){var i=r.alternate;if(!i){if(i=bl(r),i===null)throw Error(at(188));return i!==r?null:r}for(var u=r,f=i;;){var y=u.return;if(y===null)break;var S=y.alternate;if(S===null){if(f=y.return,f!==null){u=f;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===u)return ax(y),r;if(S===f)return ax(y),i;S=S.sibling}throw Error(at(188))}if(u.return!==f.return)u=y,f=S;else{for(var l=!1,k=y.child;k;){if(k===u){l=!0,u=y,f=S;break}if(k===f){l=!0,f=y,u=S;break}k=k.sibling}if(!l){for(k=S.child;k;){if(k===u){l=!0,u=S,f=y;break}if(k===f){l=!0,f=S,u=y;break}k=k.sibling}if(!l)throw Error(at(189))}}if(u.alternate!==f)throw Error(at(190))}if(u.tag!==3)throw Error(at(188));return u.stateNode.current===u?r:i}function sx(r){if(r=qS(r),!r)return null;for(var i=r;;){if(i.tag===5||i.tag===6)return i;if(i.child)i.child.return=i,i=i.child;else{if(i===r)break;for(;!i.sibling;){if(!i.return||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}}return null}function ux(r,i){for(var u=r.alternate;i!==null;){if(i===r||i===u)return!0;i=i.return}return!1}var lx,Ry,cx,px,Fy=!1,xs=[],Eu=null,Cu=null,Pu=null,fh=new Map,dh=new Map,mh=[],hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function By(r,i,u,f,y){return{blockedOn:r,domEventName:i,eventSystemFlags:u|16,nativeEvent:y,targetContainers:[f]}}function fx(r,i){switch(r){case"focusin":case"focusout":Eu=null;break;case"dragenter":case"dragleave":Cu=null;break;case"mouseover":case"mouseout":Pu=null;break;case"pointerover":case"pointerout":fh.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dh.delete(i.pointerId)}}function yh(r,i,u,f,y,S){return r===null||r.nativeEvent!==S?(r=By(i,u,f,y,S),i!==null&&(i=Ih(i),i!==null&&Ry(i)),r):(r.eventSystemFlags|=f,i=r.targetContainers,y!==null&&i.indexOf(y)===-1&&i.push(y),r)}function ZS(r,i,u,f,y){switch(i){case"focusin":return Eu=yh(Eu,r,i,u,f,y),!0;case"dragenter":return Cu=yh(Cu,r,i,u,f,y),!0;case"mouseover":return Pu=yh(Pu,r,i,u,f,y),!0;case"pointerover":var S=y.pointerId;return fh.set(S,yh(fh.get(S)||null,r,i,u,f,y)),!0;case"gotpointercapture":return S=y.pointerId,dh.set(S,yh(dh.get(S)||null,r,i,u,f,y)),!0}return!1}function GS(r){var i=wl(r.target);if(i!==null){var u=bl(i);if(u!==null){if(i=u.tag,i===13){if(i=ox(u),i!==null){r.blockedOn=i,px(r.lanePriority,function(){Ci.unstable_runWithPriority(r.priority,function(){cx(u)})});return}}else if(i===3&&u.stateNode.hydrate){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function sd(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var u=Zy(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(u!==null)return i=Ih(u),i!==null&&Ry(i),r.blockedOn=u,!1;i.shift()}return!0}function dx(r,i,u){sd(r)&&u.delete(i)}function WS(){for(Fy=!1;0<xs.length;){var r=xs[0];if(r.blockedOn!==null){r=Ih(r.blockedOn),r!==null&&lx(r);break}for(var i=r.targetContainers;0<i.length;){var u=Zy(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(u!==null){r.blockedOn=u;break}i.shift()}r.blockedOn===null&&xs.shift()}Eu!==null&&sd(Eu)&&(Eu=null),Cu!==null&&sd(Cu)&&(Cu=null),Pu!==null&&sd(Pu)&&(Pu=null),fh.forEach(dx),dh.forEach(dx)}function vh(r,i){r.blockedOn===i&&(r.blockedOn=null,Fy||(Fy=!0,Ci.unstable_scheduleCallback(Ci.unstable_NormalPriority,WS)))}function mx(r){function i(y){return vh(y,r)}if(0<xs.length){vh(xs[0],r);for(var u=1;u<xs.length;u++){var f=xs[u];f.blockedOn===r&&(f.blockedOn=null)}}for(Eu!==null&&vh(Eu,r),Cu!==null&&vh(Cu,r),Pu!==null&&vh(Pu,r),fh.forEach(i),dh.forEach(i),u=0;u<mh.length;u++)f=mh[u],f.blockedOn===r&&(f.blockedOn=null);for(;0<mh.length&&(u=mh[0],u.blockedOn===null);)GS(u),u.blockedOn===null&&mh.shift()}function ud(r,i){var u={};return u[r.toLowerCase()]=i.toLowerCase(),u["Webkit"+r]="webkit"+i,u["Moz"+r]="moz"+i,u}var Fc={animationend:ud("Animation","AnimationEnd"),animationiteration:ud("Animation","AnimationIteration"),animationstart:ud("Animation","AnimationStart"),transitionend:ud("Transition","TransitionEnd")},Uy={},yx={};Qs&&(yx=document.createElement("div").style,"AnimationEvent"in window||(delete Fc.animationend.animation,delete Fc.animationiteration.animation,delete Fc.animationstart.animation),"TransitionEvent"in window||delete Fc.transitionend.transition);function ld(r){if(Uy[r])return Uy[r];if(!Fc[r])return r;var i=Fc[r],u;for(u in i)if(i.hasOwnProperty(u)&&u in yx)return Uy[r]=i[u];return r}var vx=ld("animationend"),gx=ld("animationiteration"),_x=ld("animationstart"),xx=ld("transitionend"),bx=new Map,Ny=new Map,$S=["abort","abort",vx,"animationEnd",gx,"animationIteration",_x,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",xx,"transitionEnd","waiting","waiting"];function jy(r,i){for(var u=0;u<r.length;u+=2){var f=r[u],y=r[u+1];y="on"+(y[0].toUpperCase()+y.slice(1)),Ny.set(f,i),bx.set(f,y),vl(y,[f])}}var XS=Ci.unstable_now;XS();var yn=8;function Bc(r){if((1&r)!=0)return yn=15,1;if((2&r)!=0)return yn=14,2;if((4&r)!=0)return yn=13,4;var i=24&r;return i!==0?(yn=12,i):(r&32)!=0?(yn=11,32):(i=192&r,i!==0?(yn=10,i):(r&256)!=0?(yn=9,256):(i=3584&r,i!==0?(yn=8,i):(r&4096)!=0?(yn=7,4096):(i=4186112&r,i!==0?(yn=6,i):(i=62914560&r,i!==0?(yn=5,i):r&67108864?(yn=4,67108864):(r&134217728)!=0?(yn=3,134217728):(i=805306368&r,i!==0?(yn=2,i):(1073741824&r)!=0?(yn=1,1073741824):(yn=8,r))))))}function KS(r){switch(r){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function HS(r){switch(r){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(at(358,r))}}function gh(r,i){var u=r.pendingLanes;if(u===0)return yn=0;var f=0,y=0,S=r.expiredLanes,l=r.suspendedLanes,k=r.pingedLanes;if(S!==0)f=S,y=yn=15;else if(S=u&134217727,S!==0){var M=S&~l;M!==0?(f=Bc(M),y=yn):(k&=S,k!==0&&(f=Bc(k),y=yn))}else S=u&~l,S!==0?(f=Bc(S),y=yn):k!==0&&(f=Bc(k),y=yn);if(f===0)return 0;if(f=31-Tu(f),f=u&((0>f?0:1<<f)<<1)-1,i!==0&&i!==f&&(i&l)==0){if(Bc(i),y<=yn)return i;yn=y}if(i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=f;0<i;)u=31-Tu(i),y=1<<u,f|=r[u],i&=~y;return f}function wx(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function cd(r,i){switch(r){case 15:return 1;case 14:return 2;case 12:return r=Uc(24&~i),r===0?cd(10,i):r;case 10:return r=Uc(192&~i),r===0?cd(8,i):r;case 8:return r=Uc(3584&~i),r===0&&(r=Uc(4186112&~i),r===0&&(r=512)),r;case 2:return i=Uc(805306368&~i),i===0&&(i=268435456),i}throw Error(at(358,r))}function Uc(r){return r&-r}function Vy(r){for(var i=[],u=0;31>u;u++)i.push(r);return i}function pd(r,i,u){r.pendingLanes|=i;var f=i-1;r.suspendedLanes&=f,r.pingedLanes&=f,r=r.eventTimes,i=31-Tu(i),r[i]=u}var Tu=Math.clz32?Math.clz32:QS,YS=Math.log,JS=Math.LN2;function QS(r){return r===0?32:31-(YS(r)/JS|0)|0}var eE=Ci.unstable_UserBlockingPriority,tE=Ci.unstable_runWithPriority,hd=!0;function rE(r,i,u,f){xl||My();var y=qy,S=xl;xl=!0;try{nx(y,r,i,u,f)}finally{(xl=S)||Ly()}}function nE(r,i,u,f){tE(eE,qy.bind(null,r,i,u,f))}function qy(r,i,u,f){if(hd){var y;if((y=(i&4)==0)&&0<xs.length&&-1<hx.indexOf(r))r=By(null,r,i,u,f),xs.push(r);else{var S=Zy(r,i,u,f);if(S===null)y&&fx(r,f);else{if(y){if(-1<hx.indexOf(r)){r=By(S,r,i,u,f),xs.push(r);return}if(ZS(S,r,i,u,f))return;fx(r,f)}Jx(r,i,f,null,u)}}}}function Zy(r,i,u,f){var y=Iy(f);if(y=wl(y),y!==null){var S=bl(y);if(S===null)y=null;else{var l=S.tag;if(l===13){if(y=ox(S),y!==null)return y;y=null}else if(l===3){if(S.stateNode.hydrate)return S.tag===3?S.stateNode.containerInfo:null;y=null}else S!==y&&(y=null)}}return Jx(r,i,f,y,u),null}var Iu=null,Gy=null,fd=null;function Sx(){if(fd)return fd;var r,i=Gy,u=i.length,f,y="value"in Iu?Iu.value:Iu.textContent,S=y.length;for(r=0;r<u&&i[r]===y[r];r++);var l=u-r;for(f=1;f<=l&&i[u-f]===y[S-f];f++);return fd=y.slice(r,1<f?1-f:void 0)}function dd(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function md(){return!0}function Ex(){return!1}function sa(r){function i(u,f,y,S,l){this._reactName=u,this._targetInst=y,this.type=f,this.nativeEvent=S,this.target=l,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(u=r[k],this[k]=u?u(S):S[k]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?md:Ex,this.isPropagationStopped=Ex,this}return Tn(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=md)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=md)},persist:function(){},isPersistent:md}),i}var Nc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=sa(Nc),_h=Tn({},Nc,{view:0,detail:0}),iE=sa(_h),$y,Xy,xh,yd=Tn({},_h,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hy,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==xh&&(xh&&r.type==="mousemove"?($y=r.screenX-xh.screenX,Xy=r.screenY-xh.screenY):Xy=$y=0,xh=r),$y)},movementY:function(r){return"movementY"in r?r.movementY:Xy}}),Cx=sa(yd),oE=Tn({},yd,{dataTransfer:0}),aE=sa(oE),sE=Tn({},_h,{relatedTarget:0}),Ky=sa(sE),uE=Tn({},Nc,{animationName:0,elapsedTime:0,pseudoElement:0}),lE=sa(uE),cE=Tn({},Nc,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),pE=sa(cE),hE=Tn({},Nc,{data:0}),Px=sa(hE),fE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yE(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=mE[r])?!!i[r]:!1}function Hy(){return yE}var vE=Tn({},_h,{key:function(r){if(r.key){var i=fE[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=dd(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?dE[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hy,charCode:function(r){return r.type==="keypress"?dd(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?dd(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),gE=sa(vE),_E=Tn({},yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tx=sa(_E),xE=Tn({},_h,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hy}),bE=sa(xE),wE=Tn({},Nc,{propertyName:0,elapsedTime:0,pseudoElement:0}),SE=sa(wE),EE=Tn({},yd,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),CE=sa(EE),PE=[9,13,27,32],Yy=Qs&&"CompositionEvent"in window,bh=null;Qs&&"documentMode"in document&&(bh=document.documentMode);var TE=Qs&&"TextEvent"in window&&!bh,Ix=Qs&&(!Yy||bh&&8<bh&&11>=bh),kx=String.fromCharCode(32),Ax=!1;function Mx(r,i){switch(r){case"keyup":return PE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zx(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var jc=!1;function IE(r,i){switch(r){case"compositionend":return zx(i);case"keypress":return i.which!==32?null:(Ax=!0,kx);case"textInput":return r=i.data,r===kx&&Ax?null:r;default:return null}}function kE(r,i){if(jc)return r==="compositionend"||!Yy&&Mx(r,i)?(r=Sx(),fd=Gy=Iu=null,jc=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ix&&i.locale!=="ko"?null:i.data;default:return null}}var AE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lx(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!AE[r.type]:i==="textarea"}function Dx(r,i,u,f){tx(f),i=gd(i,"onChange"),0<i.length&&(u=new Wy("onChange","change",null,u,f),r.push({event:u,listeners:i}))}var wh=null,Sh=null;function ME(r){$x(r,0)}function vd(r){var i=Wc(r);if(q0(i))return r}function zE(r,i){if(r==="change")return i}var Ox=!1;if(Qs){var Jy;if(Qs){var Qy="oninput"in document;if(!Qy){var Rx=document.createElement("div");Rx.setAttribute("oninput","return;"),Qy=typeof Rx.oninput=="function"}Jy=Qy}else Jy=!1;Ox=Jy&&(!document.documentMode||9<document.documentMode)}function Fx(){wh&&(wh.detachEvent("onpropertychange",Bx),Sh=wh=null)}function Bx(r){if(r.propertyName==="value"&&vd(Sh)){var i=[];if(Dx(i,Sh,r,Iy(r)),r=ME,xl)r(i);else{xl=!0;try{Ay(r,i)}finally{xl=!1,Ly()}}}}function LE(r,i,u){r==="focusin"?(Fx(),wh=i,Sh=u,wh.attachEvent("onpropertychange",Bx)):r==="focusout"&&Fx()}function DE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vd(Sh)}function OE(r,i){if(r==="click")return vd(i)}function RE(r,i){if(r==="input"||r==="change")return vd(i)}function FE(r,i){return r===i&&(r!==0||1/r==1/i)||r!==r&&i!==i}var Pa=typeof Object.is=="function"?Object.is:FE,BE=Object.prototype.hasOwnProperty;function Eh(r,i){if(Pa(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var u=Object.keys(r),f=Object.keys(i);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++)if(!BE.call(i,u[f])||!Pa(r[u[f]],i[u[f]]))return!1;return!0}function Ux(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Nx(r,i){var u=Ux(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=i&&f>=i)return{node:u,offset:i-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Ux(u)}}function jx(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?jx(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Vx(){for(var r=window,i=nd();i instanceof r.HTMLIFrameElement;){try{var u=typeof i.contentWindow.location.href=="string"}catch{u=!1}if(u)r=i.contentWindow;else break;i=nd(r.document)}return i}function ev(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var UE=Qs&&"documentMode"in document&&11>=document.documentMode,Vc=null,tv=null,Ch=null,rv=!1;function qx(r,i,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;rv||Vc==null||Vc!==nd(f)||(f=Vc,"selectionStart"in f&&ev(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ch&&Eh(Ch,f)||(Ch=f,f=gd(tv,"onSelect"),0<f.length&&(i=new Wy("onSelect","select",null,i,u),r.push({event:i,listeners:f}),i.target=Vc)))}jy("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);jy("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);jy($S,2);for(var Zx="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),nv=0;nv<Zx.length;nv++)Ny.set(Zx[nv],0);zc("onMouseEnter",["mouseout","mouseover"]);zc("onMouseLeave",["mouseout","mouseover"]);zc("onPointerEnter",["pointerout","pointerover"]);zc("onPointerLeave",["pointerout","pointerover"]);vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ph));function Wx(r,i,u){var f=r.type||"unknown-event";r.currentTarget=u,VS(f,i,void 0,r),r.currentTarget=null}function $x(r,i){i=(i&4)!=0;for(var u=0;u<r.length;u++){var f=r[u],y=f.event;f=f.listeners;e:{var S=void 0;if(i)for(var l=f.length-1;0<=l;l--){var k=f[l],M=k.instance,q=k.currentTarget;if(k=k.listener,M!==S&&y.isPropagationStopped())break e;Wx(y,k,q),S=M}else for(l=0;l<f.length;l++){if(k=f[l],M=k.instance,q=k.currentTarget,k=k.listener,M!==S&&y.isPropagationStopped())break e;Wx(y,k,q),S=M}}}if(ad)throw r=Oy,ad=!1,Oy=null,r}function wn(r,i){var u=i1(i),f=r+"__bubble";u.has(f)||(Yx(i,r,2,!1),u.add(f))}var Xx="_reactListening"+Math.random().toString(36).slice(2);function Kx(r){r[Xx]||(r[Xx]=!0,R0.forEach(function(i){Gx.has(i)||Hx(i,!1,r,null),Hx(i,!0,r,null)}))}function Hx(r,i,u,f){var y=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,S=u;if(r==="selectionchange"&&u.nodeType!==9&&(S=u.ownerDocument),f!==null&&!i&&Gx.has(r)){if(r!=="scroll")return;y|=2,S=f}var l=i1(S),k=r+"__"+(i?"capture":"bubble");l.has(k)||(i&&(y|=4),Yx(S,r,y,i),l.add(k))}function Yx(r,i,u,f){var y=Ny.get(i);switch(y===void 0?2:y){case 0:y=rE;break;case 1:y=nE;break;default:y=qy}u=y.bind(null,i,u,r),y=void 0,!Dy||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(y=!0),f?y!==void 0?r.addEventListener(i,u,{capture:!0,passive:y}):r.addEventListener(i,u,!0):y!==void 0?r.addEventListener(i,u,{passive:y}):r.addEventListener(i,u,!1)}function Jx(r,i,u,f,y){var S=f;if((i&1)==0&&(i&2)==0&&f!==null)e:for(;;){if(f===null)return;var l=f.tag;if(l===3||l===4){var k=f.stateNode.containerInfo;if(k===y||k.nodeType===8&&k.parentNode===y)break;if(l===4)for(l=f.return;l!==null;){var M=l.tag;if((M===3||M===4)&&(M=l.stateNode.containerInfo,M===y||M.nodeType===8&&M.parentNode===y))return;l=l.return}for(;k!==null;){if(l=wl(k),l===null)return;if(M=l.tag,M===5||M===6){f=S=l;continue e}k=k.parentNode}}f=f.return}BS(function(){var q=S,ee=Iy(u),ke=[];e:{var X=bx.get(r);if(X!==void 0){var Se=Wy,Me=r;switch(r){case"keypress":if(dd(u)===0)break e;case"keydown":case"keyup":Se=gE;break;case"focusin":Me="focus",Se=Ky;break;case"focusout":Me="blur",Se=Ky;break;case"beforeblur":case"afterblur":Se=Ky;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Cx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=aE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=bE;break;case vx:case gx:case _x:Se=lE;break;case xx:Se=SE;break;case"scroll":Se=iE;break;case"wheel":Se=CE;break;case"copy":case"cut":case"paste":Se=pE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Tx}var Le=(i&4)!=0,ue=!Le&&r==="scroll",re=Le?X!==null?X+"Capture":null:X;Le=[];for(var ae=q,be;ae!==null;){be=ae;var De=be.stateNode;if(be.tag===5&&De!==null&&(be=De,re!==null&&(De=ch(ae,re),De!=null&&Le.push(Th(ae,De,be)))),ue)break;ae=ae.return}0<Le.length&&(X=new Se(X,Me,null,u,ee),ke.push({event:X,listeners:Le}))}}if((i&7)==0){e:{if(X=r==="mouseover"||r==="pointerover",Se=r==="mouseout"||r==="pointerout",X&&(i&16)==0&&(Me=u.relatedTarget||u.fromElement)&&(wl(Me)||Me[Gc]))break e;if((Se||X)&&(X=ee.window===ee?ee:(X=ee.ownerDocument)?X.defaultView||X.parentWindow:window,Se?(Me=u.relatedTarget||u.toElement,Se=q,Me=Me?wl(Me):null,Me!==null&&(ue=bl(Me),Me!==ue||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Se=null,Me=q),Se!==Me)){if(Le=Cx,De="onMouseLeave",re="onMouseEnter",ae="mouse",(r==="pointerout"||r==="pointerover")&&(Le=Tx,De="onPointerLeave",re="onPointerEnter",ae="pointer"),ue=Se==null?X:Wc(Se),be=Me==null?X:Wc(Me),X=new Le(De,ae+"leave",Se,u,ee),X.target=ue,X.relatedTarget=be,De=null,wl(ee)===q&&(Le=new Le(re,ae+"enter",Me,u,ee),Le.target=be,Le.relatedTarget=ue,De=Le),ue=De,Se&&Me)t:{for(Le=Se,re=Me,ae=0,be=Le;be;be=qc(be))ae++;for(be=0,De=re;De;De=qc(De))be++;for(;0<ae-be;)Le=qc(Le),ae--;for(;0<be-ae;)re=qc(re),be--;for(;ae--;){if(Le===re||re!==null&&Le===re.alternate)break t;Le=qc(Le),re=qc(re)}Le=null}else Le=null;Se!==null&&Qx(ke,X,Se,Le,!1),Me!==null&&ue!==null&&Qx(ke,ue,Me,Le,!0)}}e:{if(X=q?Wc(q):window,Se=X.nodeName&&X.nodeName.toLowerCase(),Se==="select"||Se==="input"&&X.type==="file")var mt=zE;else if(Lx(X))if(Ox)mt=RE;else{mt=DE;var We=LE}else(Se=X.nodeName)&&Se.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(mt=OE);if(mt&&(mt=mt(r,q))){Dx(ke,mt,u,ee);break e}We&&We(r,X,q),r==="focusout"&&(We=X._wrapperState)&&We.controlled&&X.type==="number"&&by(X,"number",X.value)}switch(We=q?Wc(q):window,r){case"focusin":(Lx(We)||We.contentEditable==="true")&&(Vc=We,tv=q,Ch=null);break;case"focusout":Ch=tv=Vc=null;break;case"mousedown":rv=!0;break;case"contextmenu":case"mouseup":case"dragend":rv=!1,qx(ke,u,ee);break;case"selectionchange":if(UE)break;case"keydown":case"keyup":qx(ke,u,ee)}var Tt;if(Yy)e:{switch(r){case"compositionstart":var Ot="onCompositionStart";break e;case"compositionend":Ot="onCompositionEnd";break e;case"compositionupdate":Ot="onCompositionUpdate";break e}Ot=void 0}else jc?Mx(r,u)&&(Ot="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Ot="onCompositionStart");Ot&&(Ix&&u.locale!=="ko"&&(jc||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&jc&&(Tt=Sx()):(Iu=ee,Gy="value"in Iu?Iu.value:Iu.textContent,jc=!0)),We=gd(q,Ot),0<We.length&&(Ot=new Px(Ot,r,null,u,ee),ke.push({event:Ot,listeners:We}),Tt?Ot.data=Tt:(Tt=zx(u),Tt!==null&&(Ot.data=Tt)))),(Tt=TE?IE(r,u):kE(r,u))&&(q=gd(q,"onBeforeInput"),0<q.length&&(ee=new Px("onBeforeInput","beforeinput",null,u,ee),ke.push({event:ee,listeners:q}),ee.data=Tt))}$x(ke,i)})}function Th(r,i,u){return{instance:r,listener:i,currentTarget:u}}function gd(r,i){for(var u=i+"Capture",f=[];r!==null;){var y=r,S=y.stateNode;y.tag===5&&S!==null&&(y=S,S=ch(r,u),S!=null&&f.unshift(Th(r,S,y)),S=ch(r,i),S!=null&&f.push(Th(r,S,y))),r=r.return}return f}function qc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Qx(r,i,u,f,y){for(var S=i._reactName,l=[];u!==null&&u!==f;){var k=u,M=k.alternate,q=k.stateNode;if(M!==null&&M===f)break;k.tag===5&&q!==null&&(k=q,y?(M=ch(u,S),M!=null&&l.unshift(Th(u,M,k))):y||(M=ch(u,S),M!=null&&l.push(Th(u,M,k)))),u=u.return}l.length!==0&&r.push({event:i,listeners:l})}function _d(){}var iv=null,ov=null;function e1(r,i){switch(r){case"button":case"input":case"select":case"textarea":return!!i.autoFocus}return!1}function av(r,i){return r==="textarea"||r==="option"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var t1=typeof setTimeout=="function"?setTimeout:void 0,NE=typeof clearTimeout=="function"?clearTimeout:void 0;function sv(r){r.nodeType===1?r.textContent="":r.nodeType===9&&(r=r.body,r!=null&&(r.textContent=""))}function Zc(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break}return r}function r1(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(i===0)return r;i--}else u==="/$"&&i++}r=r.previousSibling}return null}var uv=0;function jE(r){return{$$typeof:dy,toString:r,valueOf:r}}var xd=Math.random().toString(36).slice(2),ku="__reactFiber$"+xd,bd="__reactProps$"+xd,Gc="__reactContainer$"+xd,n1="__reactEvents$"+xd;function wl(r){var i=r[ku];if(i)return i;for(var u=r.parentNode;u;){if(i=u[Gc]||u[ku]){if(u=i.alternate,i.child!==null||u!==null&&u.child!==null)for(r=r1(r);r!==null;){if(u=r[ku])return u;r=r1(r)}return i}r=u,u=r.parentNode}return null}function Ih(r){return r=r[ku]||r[Gc],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Wc(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(at(33))}function wd(r){return r[bd]||null}function i1(r){var i=r[n1];return i===void 0&&(i=r[n1]=new Set),i}var lv=[],$c=-1;function Au(r){return{current:r}}function Sn(r){0>$c||(r.current=lv[$c],lv[$c]=null,$c--)}function Zn(r,i){$c++,lv[$c]=r.current,r.current=i}var Mu={},uo=Au(Mu),qo=Au(!1),Sl=Mu;function Xc(r,i){var u=r.type.contextTypes;if(!u)return Mu;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===i)return f.__reactInternalMemoizedMaskedChildContext;var y={},S;for(S in u)y[S]=i[S];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=y),y}function Zo(r){return r=r.childContextTypes,r!=null}function Sd(){Sn(qo),Sn(uo)}function o1(r,i,u){if(uo.current!==Mu)throw Error(at(168));Zn(uo,i),Zn(qo,u)}function a1(r,i,u){var f=r.stateNode;if(r=i.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var y in f)if(!(y in r))throw Error(at(108,Lc(i)||"Unknown",y));return Tn({},u,f)}function Ed(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Mu,Sl=uo.current,Zn(uo,r),Zn(qo,qo.current),!0}function s1(r,i,u){var f=r.stateNode;if(!f)throw Error(at(169));u?(r=a1(r,i,Sl),f.__reactInternalMemoizedMergedChildContext=r,Sn(qo),Sn(uo),Zn(uo,r)):Sn(qo),Zn(qo,u)}var cv=null,El=null,VE=Ci.unstable_runWithPriority,pv=Ci.unstable_scheduleCallback,hv=Ci.unstable_cancelCallback,qE=Ci.unstable_shouldYield,u1=Ci.unstable_requestPaint,fv=Ci.unstable_now,ZE=Ci.unstable_getCurrentPriorityLevel,Cd=Ci.unstable_ImmediatePriority,l1=Ci.unstable_UserBlockingPriority,c1=Ci.unstable_NormalPriority,p1=Ci.unstable_LowPriority,h1=Ci.unstable_IdlePriority,dv={},GE=u1!==void 0?u1:function(){},eu=null,Pd=null,mv=!1,f1=fv(),lo=1e4>f1?fv:function(){return fv()-f1};function Kc(){switch(ZE()){case Cd:return 99;case l1:return 98;case c1:return 97;case p1:return 96;case h1:return 95;default:throw Error(at(332))}}function d1(r){switch(r){case 99:return Cd;case 98:return l1;case 97:return c1;case 96:return p1;case 95:return h1;default:throw Error(at(332))}}function Cl(r,i){return r=d1(r),VE(r,i)}function kh(r,i,u){return r=d1(r),pv(r,i,u)}function bs(){if(Pd!==null){var r=Pd;Pd=null,hv(r)}m1()}function m1(){if(!mv&&eu!==null){mv=!0;var r=0;try{var i=eu;Cl(99,function(){for(;r<i.length;r++){var u=i[r];do u=u(!0);while(u!==null)}}),eu=null}catch(u){throw eu!==null&&(eu=eu.slice(r+1)),pv(Cd,bs),u}finally{mv=!1}}}var WE=gl.ReactCurrentBatchConfig;function Ja(r,i){if(r&&r.defaultProps){i=Tn({},i),r=r.defaultProps;for(var u in r)i[u]===void 0&&(i[u]=r[u]);return i}return i}var Td=Au(null),Id=null,Hc=null,kd=null;function yv(){kd=Hc=Id=null}function vv(r){var i=Td.current;Sn(Td),r.type._context._currentValue=i}function y1(r,i){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)===i){if(u===null||(u.childLanes&i)===i)break;u.childLanes|=i}else r.childLanes|=i,u!==null&&(u.childLanes|=i);r=r.return}}function Yc(r,i){Id=r,kd=Hc=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!=0&&(Qa=!0),r.firstContext=null)}function Ta(r,i){if(kd!==r&&i!==!1&&i!==0)if((typeof i!="number"||i===1073741823)&&(kd=r,i=1073741823),i={context:r,observedBits:i,next:null},Hc===null){if(Id===null)throw Error(at(308));Hc=i,Id.dependencies={lanes:0,firstContext:i,responders:null}}else Hc=Hc.next=i;return r._currentValue}var zu=!1;function gv(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function v1(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Lu(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Du(r,i){if(r=r.updateQueue,r!==null){r=r.shared;var u=r.pending;u===null?i.next=i:(i.next=u.next,u.next=i),r.pending=i}}function g1(r,i){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var y=null,S=null;if(u=u.firstBaseUpdate,u!==null){do{var l={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};S===null?y=S=l:S=S.next=l,u=u.next}while(u!==null);S===null?y=S=i:S=S.next=i}else y=S=i;u={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:f.shared,effects:f.effects},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=i:r.next=i,u.lastBaseUpdate=i}function Ah(r,i,u,f){var y=r.updateQueue;zu=!1;var S=y.firstBaseUpdate,l=y.lastBaseUpdate,k=y.shared.pending;if(k!==null){y.shared.pending=null;var M=k,q=M.next;M.next=null,l===null?S=q:l.next=q,l=M;var ee=r.alternate;if(ee!==null){ee=ee.updateQueue;var ke=ee.lastBaseUpdate;ke!==l&&(ke===null?ee.firstBaseUpdate=q:ke.next=q,ee.lastBaseUpdate=M)}}if(S!==null){ke=y.baseState,l=0,ee=q=M=null;do{k=S.lane;var X=S.eventTime;if((f&k)===k){ee!==null&&(ee=ee.next={eventTime:X,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var Se=r,Me=S;switch(k=i,X=u,Me.tag){case 1:if(Se=Me.payload,typeof Se=="function"){ke=Se.call(X,ke,k);break e}ke=Se;break e;case 3:Se.flags=Se.flags&-4097|64;case 0:if(Se=Me.payload,k=typeof Se=="function"?Se.call(X,ke,k):Se,k==null)break e;ke=Tn({},ke,k);break e;case 2:zu=!0}}S.callback!==null&&(r.flags|=32,k=y.effects,k===null?y.effects=[S]:k.push(S))}else X={eventTime:X,lane:k,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ee===null?(q=ee=X,M=ke):ee=ee.next=X,l|=k;if(S=S.next,S===null){if(k=y.shared.pending,k===null)break;S=k.next,k.next=null,y.lastBaseUpdate=k,y.shared.pending=null}}while(1);ee===null&&(M=ke),y.baseState=M,y.firstBaseUpdate=q,y.lastBaseUpdate=ee,Vh|=l,r.lanes=l,r.memoizedState=ke}}function _1(r,i,u){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var f=r[i],y=f.callback;if(y!==null){if(f.callback=null,f=u,typeof y!="function")throw Error(at(191,y));y.call(f)}}}var x1=new Yf.Component().refs;function Ad(r,i,u,f){i=r.memoizedState,u=u(f,i),u=u==null?i:Tn({},i,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Md={isMounted:function(r){return(r=r._reactInternals)?bl(r)===r:!1},enqueueSetState:function(r,i,u){r=r._reactInternals;var f=ua(),y=Fu(r),S=Lu(f,y);S.payload=i,u!=null&&(S.callback=u),Du(r,S),Bu(r,y,f)},enqueueReplaceState:function(r,i,u){r=r._reactInternals;var f=ua(),y=Fu(r),S=Lu(f,y);S.tag=1,S.payload=i,u!=null&&(S.callback=u),Du(r,S),Bu(r,y,f)},enqueueForceUpdate:function(r,i){r=r._reactInternals;var u=ua(),f=Fu(r),y=Lu(u,f);y.tag=2,i!=null&&(y.callback=i),Du(r,y),Bu(r,f,u)}};function b1(r,i,u,f,y,S,l){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,S,l):i.prototype&&i.prototype.isPureReactComponent?!Eh(u,f)||!Eh(y,S):!0}function w1(r,i,u){var f=!1,y=Mu,S=i.contextType;return typeof S=="object"&&S!==null?S=Ta(S):(y=Zo(i)?Sl:uo.current,f=i.contextTypes,S=(f=f!=null)?Xc(r,y):Mu),i=new i(u,S),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Md,r.stateNode=i,i._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=y,r.__reactInternalMemoizedMaskedChildContext=S),i}function S1(r,i,u,f){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(u,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(u,f),i.state!==r&&Md.enqueueReplaceState(i,i.state,null)}function _v(r,i,u,f){var y=r.stateNode;y.props=u,y.state=r.memoizedState,y.refs=x1,gv(r);var S=i.contextType;typeof S=="object"&&S!==null?y.context=Ta(S):(S=Zo(i)?Sl:uo.current,y.context=Xc(r,S)),Ah(r,u,y,f),y.state=r.memoizedState,S=i.getDerivedStateFromProps,typeof S=="function"&&(Ad(r,i,S,u),y.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(i=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),i!==y.state&&Md.enqueueReplaceState(y,y.state,null),Ah(r,u,y,f),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4)}var zd=Array.isArray;function Mh(r,i,u){if(r=u.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(at(309));var f=u.stateNode}if(!f)throw Error(at(147,r));var y=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(S){var l=f.refs;l===x1&&(l=f.refs={}),S===null?delete l[y]:l[y]=S},i._stringRef=y,i)}if(typeof r!="string")throw Error(at(284));if(!u._owner)throw Error(at(290,r))}return r}function Ld(r,i){if(r.type!=="textarea")throw Error(at(31,Object.prototype.toString.call(i)==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":i))}function E1(r){function i(ue,re){if(r){var ae=ue.lastEffect;ae!==null?(ae.nextEffect=re,ue.lastEffect=re):ue.firstEffect=ue.lastEffect=re,re.nextEffect=null,re.flags=8}}function u(ue,re){if(!r)return null;for(;re!==null;)i(ue,re),re=re.sibling;return null}function f(ue,re){for(ue=new Map;re!==null;)re.key!==null?ue.set(re.key,re):ue.set(re.index,re),re=re.sibling;return ue}function y(ue,re){return ue=ju(ue,re),ue.index=0,ue.sibling=null,ue}function S(ue,re,ae){return ue.index=ae,r?(ae=ue.alternate,ae!==null?(ae=ae.index,ae<re?(ue.flags=2,re):ae):(ue.flags=2,re)):re}function l(ue){return r&&ue.alternate===null&&(ue.flags=2),ue}function k(ue,re,ae,be){return re===null||re.tag!==6?(re=tg(ae,ue.mode,be),re.return=ue,re):(re=y(re,ae),re.return=ue,re)}function M(ue,re,ae,be){return re!==null&&re.elementType===ae.type?(be=y(re,ae.props),be.ref=Mh(ue,re,ae),be.return=ue,be):(be=Yd(ae.type,ae.key,ae.props,null,ue.mode,be),be.ref=Mh(ue,re,ae),be.return=ue,be)}function q(ue,re,ae,be){return re===null||re.tag!==4||re.stateNode.containerInfo!==ae.containerInfo||re.stateNode.implementation!==ae.implementation?(re=rg(ae,ue.mode,be),re.return=ue,re):(re=y(re,ae.children||[]),re.return=ue,re)}function ee(ue,re,ae,be,De){return re===null||re.tag!==7?(re=op(ae,ue.mode,be,De),re.return=ue,re):(re=y(re,ae),re.return=ue,re)}function ke(ue,re,ae){if(typeof re=="string"||typeof re=="number")return re=tg(""+re,ue.mode,ae),re.return=ue,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case nh:return ae=Yd(re.type,re.key,re.props,null,ue.mode,ae),ae.ref=Mh(ue,null,re),ae.return=ue,ae;case _l:return re=rg(re,ue.mode,ae),re.return=ue,re}if(zd(re)||ah(re))return re=op(re,ue.mode,ae,null),re.return=ue,re;Ld(ue,re)}return null}function X(ue,re,ae,be){var De=re!==null?re.key:null;if(typeof ae=="string"||typeof ae=="number")return De!==null?null:k(ue,re,""+ae,be);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case nh:return ae.key===De?ae.type===wu?ee(ue,re,ae.props.children,be,De):M(ue,re,ae,be):null;case _l:return ae.key===De?q(ue,re,ae,be):null}if(zd(ae)||ah(ae))return De!==null?null:ee(ue,re,ae,be,null);Ld(ue,ae)}return null}function Se(ue,re,ae,be,De){if(typeof be=="string"||typeof be=="number")return ue=ue.get(ae)||null,k(re,ue,""+be,De);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case nh:return ue=ue.get(be.key===null?ae:be.key)||null,be.type===wu?ee(re,ue,be.props.children,De,be.key):M(re,ue,be,De);case _l:return ue=ue.get(be.key===null?ae:be.key)||null,q(re,ue,be,De)}if(zd(be)||ah(be))return ue=ue.get(ae)||null,ee(re,ue,be,De,null);Ld(re,be)}return null}function Me(ue,re,ae,be){for(var De=null,mt=null,We=re,Tt=re=0,Ot=null;We!==null&&Tt<ae.length;Tt++){We.index>Tt?(Ot=We,We=null):Ot=We.sibling;var pt=X(ue,We,ae[Tt],be);if(pt===null){We===null&&(We=Ot);break}r&&We&&pt.alternate===null&&i(ue,We),re=S(pt,re,Tt),mt===null?De=pt:mt.sibling=pt,mt=pt,We=Ot}if(Tt===ae.length)return u(ue,We),De;if(We===null){for(;Tt<ae.length;Tt++)We=ke(ue,ae[Tt],be),We!==null&&(re=S(We,re,Tt),mt===null?De=We:mt.sibling=We,mt=We);return De}for(We=f(ue,We);Tt<ae.length;Tt++)Ot=Se(We,ue,Tt,ae[Tt],be),Ot!==null&&(r&&Ot.alternate!==null&&We.delete(Ot.key===null?Tt:Ot.key),re=S(Ot,re,Tt),mt===null?De=Ot:mt.sibling=Ot,mt=Ot);return r&&We.forEach(function(er){return i(ue,er)}),De}function Le(ue,re,ae,be){var De=ah(ae);if(typeof De!="function")throw Error(at(150));if(ae=De.call(ae),ae==null)throw Error(at(151));for(var mt=De=null,We=re,Tt=re=0,Ot=null,pt=ae.next();We!==null&&!pt.done;Tt++,pt=ae.next()){We.index>Tt?(Ot=We,We=null):Ot=We.sibling;var er=X(ue,We,pt.value,be);if(er===null){We===null&&(We=Ot);break}r&&We&&er.alternate===null&&i(ue,We),re=S(er,re,Tt),mt===null?De=er:mt.sibling=er,mt=er,We=Ot}if(pt.done)return u(ue,We),De;if(We===null){for(;!pt.done;Tt++,pt=ae.next())pt=ke(ue,pt.value,be),pt!==null&&(re=S(pt,re,Tt),mt===null?De=pt:mt.sibling=pt,mt=pt);return De}for(We=f(ue,We);!pt.done;Tt++,pt=ae.next())pt=Se(We,ue,Tt,pt.value,be),pt!==null&&(r&&pt.alternate!==null&&We.delete(pt.key===null?Tt:pt.key),re=S(pt,re,Tt),mt===null?De=pt:mt.sibling=pt,mt=pt);return r&&We.forEach(function(wr){return i(ue,wr)}),De}return function(ue,re,ae,be){var De=typeof ae=="object"&&ae!==null&&ae.type===wu&&ae.key===null;De&&(ae=ae.props.children);var mt=typeof ae=="object"&&ae!==null;if(mt)switch(ae.$$typeof){case nh:e:{for(mt=ae.key,De=re;De!==null;){if(De.key===mt){switch(De.tag){case 7:if(ae.type===wu){u(ue,De.sibling),re=y(De,ae.props.children),re.return=ue,ue=re;break e}break;default:if(De.elementType===ae.type){u(ue,De.sibling),re=y(De,ae.props),re.ref=Mh(ue,De,ae),re.return=ue,ue=re;break e}}u(ue,De);break}else i(ue,De);De=De.sibling}ae.type===wu?(re=op(ae.props.children,ue.mode,be,ae.key),re.return=ue,ue=re):(be=Yd(ae.type,ae.key,ae.props,null,ue.mode,be),be.ref=Mh(ue,re,ae),be.return=ue,ue=be)}return l(ue);case _l:e:{for(De=ae.key;re!==null;){if(re.key===De)if(re.tag===4&&re.stateNode.containerInfo===ae.containerInfo&&re.stateNode.implementation===ae.implementation){u(ue,re.sibling),re=y(re,ae.children||[]),re.return=ue,ue=re;break e}else{u(ue,re);break}else i(ue,re);re=re.sibling}re=rg(ae,ue.mode,be),re.return=ue,ue=re}return l(ue)}if(typeof ae=="string"||typeof ae=="number")return ae=""+ae,re!==null&&re.tag===6?(u(ue,re.sibling),re=y(re,ae),re.return=ue,ue=re):(u(ue,re),re=tg(ae,ue.mode,be),re.return=ue,ue=re),l(ue);if(zd(ae))return Me(ue,re,ae,be);if(ah(ae))return Le(ue,re,ae,be);if(mt&&Ld(ue,ae),typeof ae=="undefined"&&!De)switch(ue.tag){case 1:case 22:case 0:case 11:case 15:throw Error(at(152,Lc(ue.type)||"Component"))}return u(ue,re)}}var Dd=E1(!0),C1=E1(!1),zh={},ws=Au(zh),Lh=Au(zh),Dh=Au(zh);function Pl(r){if(r===zh)throw Error(at(174));return r}function xv(r,i){switch(Zn(Dh,i),Zn(Lh,r),Zn(ws,zh),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Cy(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Cy(i,r)}Sn(ws),Zn(ws,i)}function Jc(){Sn(ws),Sn(Lh),Sn(Dh)}function P1(r){Pl(Dh.current);var i=Pl(ws.current),u=Cy(i,r.type);i!==u&&(Zn(Lh,r),Zn(ws,u))}function bv(r){Lh.current===r&&(Sn(ws),Sn(Lh))}var Gn=Au(0);function Od(r){for(var i=r;i!==null;){if(i.tag===13){var u=i.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&64)!=0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var tu=null,Ou=null,Ss=!1;function T1(r,i){var u=Aa(5,null,null,0);u.elementType="DELETED",u.type="DELETED",u.stateNode=i,u.return=r,u.flags=8,r.lastEffect!==null?(r.lastEffect.nextEffect=u,r.lastEffect=u):r.firstEffect=r.lastEffect=u}function I1(r,i){switch(r.tag){case 5:var u=r.type;return i=i.nodeType!==1||u.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,!0):!1;case 13:return!1;default:return!1}}function wv(r){if(Ss){var i=Ou;if(i){var u=i;if(!I1(r,i)){if(i=Zc(u.nextSibling),!i||!I1(r,i)){r.flags=r.flags&-1025|2,Ss=!1,tu=r;return}T1(tu,u)}tu=r,Ou=Zc(i.firstChild)}else r.flags=r.flags&-1025|2,Ss=!1,tu=r}}function k1(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;tu=r}function Rd(r){if(r!==tu)return!1;if(!Ss)return k1(r),Ss=!0,!1;var i=r.type;if(r.tag!==5||i!=="head"&&i!=="body"&&!av(i,r.memoizedProps))for(i=Ou;i;)T1(r,i),i=Zc(i.nextSibling);if(k1(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(at(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"){if(i===0){Ou=Zc(r.nextSibling);break e}i--}else u!=="$"&&u!=="$!"&&u!=="$?"||i++}r=r.nextSibling}Ou=null}}else Ou=tu?Zc(r.stateNode.nextSibling):null;return!0}function Sv(){Ou=tu=null,Ss=!1}var Qc=[];function Ev(){for(var r=0;r<Qc.length;r++)Qc[r]._workInProgressVersionPrimary=null;Qc.length=0}var Oh=gl.ReactCurrentDispatcher,Ia=gl.ReactCurrentBatchConfig,Rh=0,ti=null,co=null,Ui=null,Fd=!1,Fh=!1;function Go(){throw Error(at(321))}function Cv(r,i){if(i===null)return!1;for(var u=0;u<i.length&&u<r.length;u++)if(!Pa(r[u],i[u]))return!1;return!0}function Pv(r,i,u,f,y,S){if(Rh=S,ti=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Oh.current=r===null||r.memoizedState===null?XE:KE,r=u(f,y),Fh){S=0;do{if(Fh=!1,!(25>S))throw Error(at(301));S+=1,Ui=co=null,i.updateQueue=null,Oh.current=HE,r=u(f,y)}while(Fh)}if(Oh.current=jd,i=co!==null&&co.next!==null,Rh=0,Ui=co=ti=null,Fd=!1,i)throw Error(at(300));return r}function Tl(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ui===null?ti.memoizedState=Ui=r:Ui=Ui.next=r,Ui}function Il(){if(co===null){var r=ti.alternate;r=r!==null?r.memoizedState:null}else r=co.next;var i=Ui===null?ti.memoizedState:Ui.next;if(i!==null)Ui=i,co=r;else{if(r===null)throw Error(at(310));co=r,r={memoizedState:co.memoizedState,baseState:co.baseState,baseQueue:co.baseQueue,queue:co.queue,next:null},Ui===null?ti.memoizedState=Ui=r:Ui=Ui.next=r}return Ui}function Es(r,i){return typeof i=="function"?i(r):i}function Bh(r){var i=Il(),u=i.queue;if(u===null)throw Error(at(311));u.lastRenderedReducer=r;var f=co,y=f.baseQueue,S=u.pending;if(S!==null){if(y!==null){var l=y.next;y.next=S.next,S.next=l}f.baseQueue=y=S,u.pending=null}if(y!==null){y=y.next,f=f.baseState;var k=l=S=null,M=y;do{var q=M.lane;if((Rh&q)===q)k!==null&&(k=k.next={lane:0,action:M.action,eagerReducer:M.eagerReducer,eagerState:M.eagerState,next:null}),f=M.eagerReducer===r?M.eagerState:r(f,M.action);else{var ee={lane:q,action:M.action,eagerReducer:M.eagerReducer,eagerState:M.eagerState,next:null};k===null?(l=k=ee,S=f):k=k.next=ee,ti.lanes|=q,Vh|=q}M=M.next}while(M!==null&&M!==y);k===null?S=f:k.next=l,Pa(f,i.memoizedState)||(Qa=!0),i.memoizedState=f,i.baseState=S,i.baseQueue=k,u.lastRenderedState=f}return[i.memoizedState,u.dispatch]}function Uh(r){var i=Il(),u=i.queue;if(u===null)throw Error(at(311));u.lastRenderedReducer=r;var f=u.dispatch,y=u.pending,S=i.memoizedState;if(y!==null){u.pending=null;var l=y=y.next;do S=r(S,l.action),l=l.next;while(l!==y);Pa(S,i.memoizedState)||(Qa=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),u.lastRenderedState=S}return[S,f]}function A1(r,i,u){var f=i._getVersion;f=f(i._source);var y=i._workInProgressVersionPrimary;if(y!==null?r=y===f:(r=r.mutableReadLanes,(r=(Rh&r)===r)&&(i._workInProgressVersionPrimary=f,Qc.push(i))),r)return u(i._source);throw Qc.push(i),Error(at(350))}function M1(r,i,u,f){var y=Po;if(y===null)throw Error(at(349));var S=i._getVersion,l=S(i._source),k=Oh.current,M=k.useState(function(){return A1(y,i,u)}),q=M[1],ee=M[0];M=Ui;var ke=r.memoizedState,X=ke.refs,Se=X.getSnapshot,Me=ke.source;ke=ke.subscribe;var Le=ti;return r.memoizedState={refs:X,source:i,subscribe:f},k.useEffect(function(){X.getSnapshot=u,X.setSnapshot=q;var ue=S(i._source);if(!Pa(l,ue)){ue=u(i._source),Pa(ee,ue)||(q(ue),ue=Fu(Le),y.mutableReadLanes|=ue&y.pendingLanes),ue=y.mutableReadLanes,y.entangledLanes|=ue;for(var re=y.entanglements,ae=ue;0<ae;){var be=31-Tu(ae),De=1<<be;re[be]|=ue,ae&=~De}}},[u,i,f]),k.useEffect(function(){return f(i._source,function(){var ue=X.getSnapshot,re=X.setSnapshot;try{re(ue(i._source));var ae=Fu(Le);y.mutableReadLanes|=ae&y.pendingLanes}catch(be){re(function(){throw be})}})},[i,f]),Pa(Se,u)&&Pa(Me,i)&&Pa(ke,f)||(r={pending:null,dispatch:null,lastRenderedReducer:Es,lastRenderedState:ee},r.dispatch=q=Av.bind(null,ti,r),M.queue=r,M.baseQueue=null,ee=A1(y,i,u),M.memoizedState=M.baseState=ee),ee}function z1(r,i,u){var f=Il();return M1(f,r,i,u)}function Nh(r){var i=Tl();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r=i.queue={pending:null,dispatch:null,lastRenderedReducer:Es,lastRenderedState:r},r=r.dispatch=Av.bind(null,ti,r),[i.memoizedState,r]}function Bd(r,i,u,f){return r={tag:r,create:i,destroy:u,deps:f,next:null},i=ti.updateQueue,i===null?(i={lastEffect:null},ti.updateQueue=i,i.lastEffect=r.next=r):(u=i.lastEffect,u===null?i.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,i.lastEffect=r)),r}function L1(r){var i=Tl();return r={current:r},i.memoizedState=r}function Ud(){return Il().memoizedState}function Tv(r,i,u,f){var y=Tl();ti.flags|=r,y.memoizedState=Bd(1|i,u,void 0,f===void 0?null:f)}function Iv(r,i,u,f){var y=Il();f=f===void 0?null:f;var S=void 0;if(co!==null){var l=co.memoizedState;if(S=l.destroy,f!==null&&Cv(f,l.deps)){Bd(i,u,S,f);return}}ti.flags|=r,y.memoizedState=Bd(1|i,u,S,f)}function D1(r,i){return Tv(516,4,r,i)}function Nd(r,i){return Iv(516,4,r,i)}function O1(r,i){return Iv(4,2,r,i)}function R1(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function F1(r,i,u){return u=u!=null?u.concat([r]):null,Iv(4,2,R1.bind(null,i,r),u)}function kv(){}function B1(r,i){var u=Il();i=i===void 0?null:i;var f=u.memoizedState;return f!==null&&i!==null&&Cv(i,f[1])?f[0]:(u.memoizedState=[r,i],r)}function U1(r,i){var u=Il();i=i===void 0?null:i;var f=u.memoizedState;return f!==null&&i!==null&&Cv(i,f[1])?f[0]:(r=r(),u.memoizedState=[r,i],r)}function $E(r,i){var u=Kc();Cl(98>u?98:u,function(){r(!0)}),Cl(97<u?97:u,function(){var f=Ia.transition;Ia.transition=1;try{r(!1),i()}finally{Ia.transition=f}})}function Av(r,i,u){var f=ua(),y=Fu(r),S={lane:y,action:u,eagerReducer:null,eagerState:null,next:null},l=i.pending;if(l===null?S.next=S:(S.next=l.next,l.next=S),i.pending=S,l=r.alternate,r===ti||l!==null&&l===ti)Fh=Fd=!0;else{if(r.lanes===0&&(l===null||l.lanes===0)&&(l=i.lastRenderedReducer,l!==null))try{var k=i.lastRenderedState,M=l(k,u);if(S.eagerReducer=l,S.eagerState=M,Pa(M,k))return}catch{}finally{}Bu(r,y,f)}}var jd={readContext:Ta,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useOpaqueIdentifier:Go,unstable_isNewReconciler:!1},XE={readContext:Ta,useCallback:function(r,i){return Tl().memoizedState=[r,i===void 0?null:i],r},useContext:Ta,useEffect:D1,useImperativeHandle:function(r,i,u){return u=u!=null?u.concat([r]):null,Tv(4,2,R1.bind(null,i,r),u)},useLayoutEffect:function(r,i){return Tv(4,2,r,i)},useMemo:function(r,i){var u=Tl();return i=i===void 0?null:i,r=r(),u.memoizedState=[r,i],r},useReducer:function(r,i,u){var f=Tl();return i=u!==void 0?u(i):i,f.memoizedState=f.baseState=i,r=f.queue={pending:null,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},r=r.dispatch=Av.bind(null,ti,r),[f.memoizedState,r]},useRef:L1,useState:Nh,useDebugValue:kv,useDeferredValue:function(r){var i=Nh(r),u=i[0],f=i[1];return D1(function(){var y=Ia.transition;Ia.transition=1;try{f(r)}finally{Ia.transition=y}},[r]),u},useTransition:function(){var r=Nh(!1),i=r[0];return r=$E.bind(null,r[1]),L1(r),[r,i]},useMutableSource:function(r,i,u){var f=Tl();return f.memoizedState={refs:{getSnapshot:i,setSnapshot:null},source:r,subscribe:u},M1(f,r,i,u)},useOpaqueIdentifier:function(){if(Ss){var r=!1,i=jE(function(){throw r||(r=!0,u("r:"+(uv++).toString(36))),Error(at(355))}),u=Nh(i)[1];return(ti.mode&2)==0&&(ti.flags|=516,Bd(5,function(){u("r:"+(uv++).toString(36))},void 0,null)),i}return i="r:"+(uv++).toString(36),Nh(i),i},unstable_isNewReconciler:!1},KE={readContext:Ta,useCallback:B1,useContext:Ta,useEffect:Nd,useImperativeHandle:F1,useLayoutEffect:O1,useMemo:U1,useReducer:Bh,useRef:Ud,useState:function(){return Bh(Es)},useDebugValue:kv,useDeferredValue:function(r){var i=Bh(Es),u=i[0],f=i[1];return Nd(function(){var y=Ia.transition;Ia.transition=1;try{f(r)}finally{Ia.transition=y}},[r]),u},useTransition:function(){var r=Bh(Es)[0];return[Ud().current,r]},useMutableSource:z1,useOpaqueIdentifier:function(){return Bh(Es)[0]},unstable_isNewReconciler:!1},HE={readContext:Ta,useCallback:B1,useContext:Ta,useEffect:Nd,useImperativeHandle:F1,useLayoutEffect:O1,useMemo:U1,useReducer:Uh,useRef:Ud,useState:function(){return Uh(Es)},useDebugValue:kv,useDeferredValue:function(r){var i=Uh(Es),u=i[0],f=i[1];return Nd(function(){var y=Ia.transition;Ia.transition=1;try{f(r)}finally{Ia.transition=y}},[r]),u},useTransition:function(){var r=Uh(Es)[0];return[Ud().current,r]},useMutableSource:z1,useOpaqueIdentifier:function(){return Uh(Es)[0]},unstable_isNewReconciler:!1},YE=gl.ReactCurrentOwner,Qa=!1;function Wo(r,i,u,f){i.child=r===null?C1(i,null,u,f):Dd(i,r.child,u,f)}function N1(r,i,u,f,y){u=u.render;var S=i.ref;return Yc(i,y),f=Pv(r,i,u,f,S,y),r!==null&&!Qa?(i.updateQueue=r.updateQueue,i.flags&=-517,r.lanes&=~y,ru(r,i,y)):(i.flags|=1,Wo(r,i,f,y),i.child)}function j1(r,i,u,f,y,S){if(r===null){var l=u.type;return typeof l=="function"&&!Qv(l)&&l.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(i.tag=15,i.type=l,V1(r,i,l,f,y,S)):(r=Yd(u.type,null,f,i,i.mode,S),r.ref=i.ref,r.return=i,i.child=r)}return l=r.child,(y&S)==0&&(y=l.memoizedProps,u=u.compare,u=u!==null?u:Eh,u(y,f)&&r.ref===i.ref)?ru(r,i,S):(i.flags|=1,r=ju(l,f),r.ref=i.ref,r.return=i,i.child=r)}function V1(r,i,u,f,y,S){if(r!==null&&Eh(r.memoizedProps,f)&&r.ref===i.ref)if(Qa=!1,(S&y)!=0)(r.flags&16384)!=0&&(Qa=!0);else return i.lanes=r.lanes,ru(r,i,S);return zv(r,i,u,f,S)}function Mv(r,i,u){var f=i.pendingProps,y=f.children,S=r!==null?r.memoizedState:null;if(f.mode==="hidden"||f.mode==="unstable-defer-without-hiding")if((i.mode&4)==0)i.memoizedState={baseLanes:0},Hd(i,u);else if((u&1073741824)!=0)i.memoizedState={baseLanes:0},Hd(i,S!==null?S.baseLanes:u);else return r=S!==null?S.baseLanes|u:u,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r},Hd(i,r),null;else S!==null?(f=S.baseLanes|u,i.memoizedState=null):f=u,Hd(i,f);return Wo(r,i,y,u),i.child}function q1(r,i){var u=i.ref;(r===null&&u!==null||r!==null&&r.ref!==u)&&(i.flags|=128)}function zv(r,i,u,f,y){var S=Zo(u)?Sl:uo.current;return S=Xc(i,S),Yc(i,y),u=Pv(r,i,u,f,S,y),r!==null&&!Qa?(i.updateQueue=r.updateQueue,i.flags&=-517,r.lanes&=~y,ru(r,i,y)):(i.flags|=1,Wo(r,i,u,y),i.child)}function Z1(r,i,u,f,y){if(Zo(u)){var S=!0;Ed(i)}else S=!1;if(Yc(i,y),i.stateNode===null)r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2),w1(i,u,f),_v(i,u,f,y),f=!0;else if(r===null){var l=i.stateNode,k=i.memoizedProps;l.props=k;var M=l.context,q=u.contextType;typeof q=="object"&&q!==null?q=Ta(q):(q=Zo(u)?Sl:uo.current,q=Xc(i,q));var ee=u.getDerivedStateFromProps,ke=typeof ee=="function"||typeof l.getSnapshotBeforeUpdate=="function";ke||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(k!==f||M!==q)&&S1(i,l,f,q),zu=!1;var X=i.memoizedState;l.state=X,Ah(i,f,l,y),M=i.memoizedState,k!==f||X!==M||qo.current||zu?(typeof ee=="function"&&(Ad(i,u,ee,f),M=i.memoizedState),(k=zu||b1(i,u,k,f,X,M,q))?(ke||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(i.flags|=4)):(typeof l.componentDidMount=="function"&&(i.flags|=4),i.memoizedProps=f,i.memoizedState=M),l.props=f,l.state=M,l.context=q,f=k):(typeof l.componentDidMount=="function"&&(i.flags|=4),f=!1)}else{l=i.stateNode,v1(r,i),k=i.memoizedProps,q=i.type===i.elementType?k:Ja(i.type,k),l.props=q,ke=i.pendingProps,X=l.context,M=u.contextType,typeof M=="object"&&M!==null?M=Ta(M):(M=Zo(u)?Sl:uo.current,M=Xc(i,M));var Se=u.getDerivedStateFromProps;(ee=typeof Se=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(k!==ke||X!==M)&&S1(i,l,f,M),zu=!1,X=i.memoizedState,l.state=X,Ah(i,f,l,y);var Me=i.memoizedState;k!==ke||X!==Me||qo.current||zu?(typeof Se=="function"&&(Ad(i,u,Se,f),Me=i.memoizedState),(q=zu||b1(i,u,q,f,X,Me,M))?(ee||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(f,Me,M),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(f,Me,M)),typeof l.componentDidUpdate=="function"&&(i.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(i.flags|=256)):(typeof l.componentDidUpdate!="function"||k===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&X===r.memoizedState||(i.flags|=256),i.memoizedProps=f,i.memoizedState=Me),l.props=f,l.state=Me,l.context=M,f=q):(typeof l.componentDidUpdate!="function"||k===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&X===r.memoizedState||(i.flags|=256),f=!1)}return Lv(r,i,u,f,S,y)}function Lv(r,i,u,f,y,S){q1(r,i);var l=(i.flags&64)!=0;if(!f&&!l)return y&&s1(i,u,!1),ru(r,i,S);f=i.stateNode,YE.current=i;var k=l&&typeof u.getDerivedStateFromError!="function"?null:f.render();return i.flags|=1,r!==null&&l?(i.child=Dd(i,r.child,null,S),i.child=Dd(i,null,k,S)):Wo(r,i,k,S),i.memoizedState=f.state,y&&s1(i,u,!0),i.child}function G1(r){var i=r.stateNode;i.pendingContext?o1(r,i.pendingContext,i.pendingContext!==i.context):i.context&&o1(r,i.context,!1),xv(r,i.containerInfo)}var Vd={dehydrated:null,retryLane:0};function W1(r,i,u){var f=i.pendingProps,y=Gn.current,S=!1,l;return(l=(i.flags&64)!=0)||(l=r!==null&&r.memoizedState===null?!1:(y&2)!=0),l?(S=!0,i.flags&=-65):r!==null&&r.memoizedState===null||f.fallback===void 0||f.unstable_avoidThisFallback===!0||(y|=1),Zn(Gn,y&1),r===null?(f.fallback!==void 0&&wv(i),r=f.children,y=f.fallback,S?(r=$1(i,r,y,u),i.child.memoizedState={baseLanes:u},i.memoizedState=Vd,r):typeof f.unstable_expectedLoadTime=="number"?(r=$1(i,r,y,u),i.child.memoizedState={baseLanes:u},i.memoizedState=Vd,i.lanes=33554432,r):(u=eg({mode:"visible",children:r},i.mode,u,null),u.return=i,i.child=u)):r.memoizedState!==null?S?(f=K1(r,i,f.children,f.fallback,u),S=i.child,y=r.child.memoizedState,S.memoizedState=y===null?{baseLanes:u}:{baseLanes:y.baseLanes|u},S.childLanes=r.childLanes&~u,i.memoizedState=Vd,f):(u=X1(r,i,f.children,u),i.memoizedState=null,u):S?(f=K1(r,i,f.children,f.fallback,u),S=i.child,y=r.child.memoizedState,S.memoizedState=y===null?{baseLanes:u}:{baseLanes:y.baseLanes|u},S.childLanes=r.childLanes&~u,i.memoizedState=Vd,f):(u=X1(r,i,f.children,u),i.memoizedState=null,u)}function $1(r,i,u,f){var y=r.mode,S=r.child;return i={mode:"hidden",children:i},(y&2)==0&&S!==null?(S.childLanes=0,S.pendingProps=i):S=eg(i,y,0,null),u=op(u,y,f,null),S.return=r,u.return=r,S.sibling=u,r.child=S,u}function X1(r,i,u,f){var y=r.child;return r=y.sibling,u=ju(y,{mode:"visible",children:u}),(i.mode&2)==0&&(u.lanes=f),u.return=i,u.sibling=null,r!==null&&(r.nextEffect=null,r.flags=8,i.firstEffect=i.lastEffect=r),i.child=u}function K1(r,i,u,f,y){var S=i.mode,l=r.child;r=l.sibling;var k={mode:"hidden",children:u};return(S&2)==0&&i.child!==l?(u=i.child,u.childLanes=0,u.pendingProps=k,l=u.lastEffect,l!==null?(i.firstEffect=u.firstEffect,i.lastEffect=l,l.nextEffect=null):i.firstEffect=i.lastEffect=null):u=ju(l,k),r!==null?f=ju(r,f):(f=op(f,S,y,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,f}function H1(r,i){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),y1(r.return,i)}function Dv(r,i,u,f,y,S){var l=r.memoizedState;l===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:y,lastEffect:S}:(l.isBackwards=i,l.rendering=null,l.renderingStartTime=0,l.last=f,l.tail=u,l.tailMode=y,l.lastEffect=S)}function Y1(r,i,u){var f=i.pendingProps,y=f.revealOrder,S=f.tail;if(Wo(r,i,f.children,u),f=Gn.current,(f&2)!=0)f=f&1|2,i.flags|=64;else{if(r!==null&&(r.flags&64)!=0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&H1(r,u);else if(r.tag===19)H1(r,u);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(Zn(Gn,f),(i.mode&2)==0)i.memoizedState=null;else switch(y){case"forwards":for(u=i.child,y=null;u!==null;)r=u.alternate,r!==null&&Od(r)===null&&(y=u),u=u.sibling;u=y,u===null?(y=i.child,i.child=null):(y=u.sibling,u.sibling=null),Dv(i,!1,y,u,S,i.lastEffect);break;case"backwards":for(u=null,y=i.child,i.child=null;y!==null;){if(r=y.alternate,r!==null&&Od(r)===null){i.child=y;break}r=y.sibling,y.sibling=u,u=y,y=r}Dv(i,!0,u,null,S,i.lastEffect);break;case"together":Dv(i,!1,null,null,void 0,i.lastEffect);break;default:i.memoizedState=null}return i.child}function ru(r,i,u){if(r!==null&&(i.dependencies=r.dependencies),Vh|=i.lanes,(u&i.childLanes)!=0){if(r!==null&&i.child!==r.child)throw Error(at(153));if(i.child!==null){for(r=i.child,u=ju(r,r.pendingProps),i.child=u,u.return=i;r.sibling!==null;)r=r.sibling,u=u.sibling=ju(r,r.pendingProps),u.return=i;u.sibling=null}return i.child}return null}var J1,Ov,Q1,eb;J1=function(r,i){for(var u=i.child;u!==null;){if(u.tag===5||u.tag===6)r.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return;u=u.return}u.sibling.return=u.return,u=u.sibling}};Ov=function(){};Q1=function(r,i,u,f){var y=r.memoizedProps;if(y!==f){r=i.stateNode,Pl(ws.current);var S=null;switch(u){case"input":y=_y(r,y),f=_y(r,f),S=[];break;case"option":y=wy(r,y),f=wy(r,f),S=[];break;case"select":y=Tn({},y,{value:void 0}),f=Tn({},f,{value:void 0}),S=[];break;case"textarea":y=Sy(r,y),f=Sy(r,f),S=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=_d)}Py(u,f);var l;u=null;for(q in y)if(!f.hasOwnProperty(q)&&y.hasOwnProperty(q)&&y[q]!=null)if(q==="style"){var k=y[q];for(l in k)k.hasOwnProperty(l)&&(u||(u={}),u[l]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(rh.hasOwnProperty(q)?S||(S=[]):(S=S||[]).push(q,null));for(q in f){var M=f[q];if(k=y!=null?y[q]:void 0,f.hasOwnProperty(q)&&M!==k&&(M!=null||k!=null))if(q==="style")if(k){for(l in k)!k.hasOwnProperty(l)||M&&M.hasOwnProperty(l)||(u||(u={}),u[l]="");for(l in M)M.hasOwnProperty(l)&&k[l]!==M[l]&&(u||(u={}),u[l]=M[l])}else u||(S||(S=[]),S.push(q,u)),u=M;else q==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,k=k?k.__html:void 0,M!=null&&k!==M&&(S=S||[]).push(q,M)):q==="children"?typeof M!="string"&&typeof M!="number"||(S=S||[]).push(q,""+M):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(rh.hasOwnProperty(q)?(M!=null&&q==="onScroll"&&wn("scroll",r),S||k===M||(S=[])):typeof M=="object"&&M!==null&&M.$$typeof===dy?M.toString():(S=S||[]).push(q,M))}u&&(S=S||[]).push("style",u);var q=S;(i.updateQueue=q)&&(i.flags|=4)}};eb=function(r,i,u,f){u!==f&&(i.flags|=4)};function jh(r,i){if(!Ss)switch(r.tailMode){case"hidden":i=r.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function JE(r,i,u){var f=i.pendingProps;switch(i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Zo(i.type)&&Sd(),null;case 3:return Jc(),Sn(qo),Sn(uo),Ev(),f=i.stateNode,f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Rd(i)?i.flags|=4:f.hydrate||(i.flags|=256)),Ov(i),null;case 5:bv(i);var y=Pl(Dh.current);if(u=i.type,r!==null&&i.stateNode!=null)Q1(r,i,u,f,y),r.ref!==i.ref&&(i.flags|=128);else{if(!f){if(i.stateNode===null)throw Error(at(166));return null}if(r=Pl(ws.current),Rd(i)){f=i.stateNode,u=i.type;var S=i.memoizedProps;switch(f[ku]=i,f[bd]=S,u){case"dialog":wn("cancel",f),wn("close",f);break;case"iframe":case"object":case"embed":wn("load",f);break;case"video":case"audio":for(r=0;r<Ph.length;r++)wn(Ph[r],f);break;case"source":wn("error",f);break;case"img":case"image":case"link":wn("error",f),wn("load",f);break;case"details":wn("toggle",f);break;case"input":Z0(f,S),wn("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!S.multiple},wn("invalid",f);break;case"textarea":$0(f,S),wn("invalid",f)}Py(u,S),r=null;for(var l in S)S.hasOwnProperty(l)&&(y=S[l],l==="children"?typeof y=="string"?f.textContent!==y&&(r=["children",y]):typeof y=="number"&&f.textContent!==""+y&&(r=["children",""+y]):rh.hasOwnProperty(l)&&y!=null&&l==="onScroll"&&wn("scroll",f));switch(u){case"input":rd(f),W0(f,S,!0);break;case"textarea":rd(f),K0(f);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(f.onclick=_d)}f=r,i.updateQueue=f,f!==null&&(i.flags|=4)}else{switch(l=y.nodeType===9?y:y.ownerDocument,r===Ey.html&&(r=H0(u)),r===Ey.html?u==="script"?(r=l.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=l.createElement(u,{is:f.is}):(r=l.createElement(u),u==="select"&&(l=r,f.multiple?l.multiple=!0:f.size&&(l.size=f.size))):r=l.createElementNS(r,u),r[ku]=i,r[bd]=f,J1(r,i,!1,!1),i.stateNode=r,l=Ty(u,f),u){case"dialog":wn("cancel",r),wn("close",r),y=f;break;case"iframe":case"object":case"embed":wn("load",r),y=f;break;case"video":case"audio":for(y=0;y<Ph.length;y++)wn(Ph[y],r);y=f;break;case"source":wn("error",r),y=f;break;case"img":case"image":case"link":wn("error",r),wn("load",r),y=f;break;case"details":wn("toggle",r),y=f;break;case"input":Z0(r,f),y=_y(r,f),wn("invalid",r);break;case"option":y=wy(r,f);break;case"select":r._wrapperState={wasMultiple:!!f.multiple},y=Tn({},f,{value:void 0}),wn("invalid",r);break;case"textarea":$0(r,f),y=Sy(r,f),wn("invalid",r);break;default:y=f}Py(u,y);var k=y;for(S in k)if(k.hasOwnProperty(S)){var M=k[S];S==="style"?Q0(r,M):S==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&Y0(r,M)):S==="children"?typeof M=="string"?(u!=="textarea"||M!=="")&&uh(r,M):typeof M=="number"&&uh(r,""+M):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(rh.hasOwnProperty(S)?M!=null&&S==="onScroll"&&wn("scroll",r):M!=null&&uy(r,S,M,l))}switch(u){case"input":rd(r),W0(r,f,!1);break;case"textarea":rd(r),K0(r);break;case"option":f.value!=null&&r.setAttribute("value",""+Su(f.value));break;case"select":r.multiple=!!f.multiple,S=f.value,S!=null?Dc(r,!!f.multiple,S,!1):f.defaultValue!=null&&Dc(r,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(r.onclick=_d)}e1(u,f)&&(i.flags|=4)}i.ref!==null&&(i.flags|=128)}return null;case 6:if(r&&i.stateNode!=null)eb(r,i,r.memoizedProps,f);else{if(typeof f!="string"&&i.stateNode===null)throw Error(at(166));u=Pl(Dh.current),Pl(ws.current),Rd(i)?(f=i.stateNode,u=i.memoizedProps,f[ku]=i,f.nodeValue!==u&&(i.flags|=4)):(f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[ku]=i,i.stateNode=f)}return null;case 13:return Sn(Gn),f=i.memoizedState,(i.flags&64)!=0?(i.lanes=u,i):(f=f!==null,u=!1,r===null?i.memoizedProps.fallback!==void 0&&Rd(i):u=r.memoizedState!==null,f&&!u&&(i.mode&2)!=0&&(r===null&&i.memoizedProps.unstable_avoidThisFallback!==!0||(Gn.current&1)!=0?Ni===0&&(Ni=3):((Ni===0||Ni===3)&&(Ni=4),Po===null||(Vh&134217727)==0&&(tp&134217727)==0||np(Po,po))),(f||u)&&(i.flags|=4),null);case 4:return Jc(),Ov(i),r===null&&Kx(i.stateNode.containerInfo),null;case 10:return vv(i),null;case 17:return Zo(i.type)&&Sd(),null;case 19:if(Sn(Gn),f=i.memoizedState,f===null)return null;if(S=(i.flags&64)!=0,l=f.rendering,l===null)if(S)jh(f,!1);else{if(Ni!==0||r!==null&&(r.flags&64)!=0)for(r=i.child;r!==null;){if(l=Od(r),l!==null){for(i.flags|=64,jh(f,!1),S=l.updateQueue,S!==null&&(i.updateQueue=S,i.flags|=4),f.lastEffect===null&&(i.firstEffect=null),i.lastEffect=f.lastEffect,f=u,u=i.child;u!==null;)S=u,r=f,S.flags&=2,S.nextEffect=null,S.firstEffect=null,S.lastEffect=null,l=S.alternate,l===null?(S.childLanes=0,S.lanes=r,S.child=null,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=l.childLanes,S.lanes=l.lanes,S.child=l.child,S.memoizedProps=l.memoizedProps,S.memoizedState=l.memoizedState,S.updateQueue=l.updateQueue,S.type=l.type,r=l.dependencies,S.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),u=u.sibling;return Zn(Gn,Gn.current&1|2),i.child}r=r.sibling}f.tail!==null&&lo()>Wv&&(i.flags|=64,S=!0,jh(f,!1),i.lanes=33554432)}else{if(!S)if(r=Od(l),r!==null){if(i.flags|=64,S=!0,u=r.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),jh(f,!0),f.tail===null&&f.tailMode==="hidden"&&!l.alternate&&!Ss)return i=i.lastEffect=f.lastEffect,i!==null&&(i.nextEffect=null),null}else 2*lo()-f.renderingStartTime>Wv&&u!==1073741824&&(i.flags|=64,S=!0,jh(f,!1),i.lanes=33554432);f.isBackwards?(l.sibling=i.child,i.child=l):(u=f.last,u!==null?u.sibling=l:i.child=l,f.last=l)}return f.tail!==null?(u=f.tail,f.rendering=u,f.tail=u.sibling,f.lastEffect=i.lastEffect,f.renderingStartTime=lo(),u.sibling=null,i=Gn.current,Zn(Gn,S?i&1|2:i&1),u):null;case 23:case 24:return Jv(),r!==null&&r.memoizedState!==null!=(i.memoizedState!==null)&&f.mode!=="unstable-defer-without-hiding"&&(i.flags|=4),null}throw Error(at(156,i.tag))}function QE(r){switch(r.tag){case 1:Zo(r.type)&&Sd();var i=r.flags;return i&4096?(r.flags=i&-4097|64,r):null;case 3:if(Jc(),Sn(qo),Sn(uo),Ev(),i=r.flags,(i&64)!=0)throw Error(at(285));return r.flags=i&-4097|64,r;case 5:return bv(r),null;case 13:return Sn(Gn),i=r.flags,i&4096?(r.flags=i&-4097|64,r):null;case 19:return Sn(Gn),null;case 4:return Jc(),null;case 10:return vv(r),null;case 23:case 24:return Jv(),null;default:return null}}function Rv(r,i){try{var u="",f=i;do u+=LS(f),f=f.return;while(f);var y=u}catch(S){y=`
Error generating stack: `+S.message+`
`+S.stack}return{value:r,source:i,stack:y}}function Fv(r,i){try{console.error(i.value)}catch(u){setTimeout(function(){throw u})}}var eC=typeof WeakMap=="function"?WeakMap:Map;function tb(r,i,u){u=Lu(-1,u),u.tag=3,u.payload={element:null};var f=i.value;return u.callback=function(){Gd||(Gd=!0,$v=f),Fv(r,i)},u}function rb(r,i,u){u=Lu(-1,u),u.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var y=i.value;u.payload=function(){return Fv(r,i),f(y)}}var S=r.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(u.callback=function(){typeof f!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this),Fv(r,i));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})}),u}var tC=typeof WeakSet=="function"?WeakSet:Set;function nb(r){var i=r.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(u){Nu(r,u)}else i.current=null}function rC(r,i){switch(i.tag){case 0:case 11:case 15:case 22:return;case 1:if(i.flags&256&&r!==null){var u=r.memoizedProps,f=r.memoizedState;r=i.stateNode,i=r.getSnapshotBeforeUpdate(i.elementType===i.type?u:Ja(i.type,u),f),r.__reactInternalSnapshotBeforeUpdate=i}return;case 3:i.flags&256&&sv(i.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(at(163))}function nC(r,i,u){switch(u.tag){case 0:case 11:case 15:case 22:if(i=u.updateQueue,i=i!==null?i.lastEffect:null,i!==null){r=i=i.next;do{if((r.tag&3)==3){var f=r.create;r.destroy=f()}r=r.next}while(r!==i)}if(i=u.updateQueue,i=i!==null?i.lastEffect:null,i!==null){r=i=i.next;do{var y=r;f=y.next,y=y.tag,(y&4)!=0&&(y&1)!=0&&(gb(u,r),pC(u,r)),r=f}while(r!==i)}return;case 1:r=u.stateNode,u.flags&4&&(i===null?r.componentDidMount():(f=u.elementType===u.type?i.memoizedProps:Ja(u.type,i.memoizedProps),r.componentDidUpdate(f,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate))),i=u.updateQueue,i!==null&&_1(u,i,r);return;case 3:if(i=u.updateQueue,i!==null){if(r=null,u.child!==null)switch(u.child.tag){case 5:r=u.child.stateNode;break;case 1:r=u.child.stateNode}_1(u,i,r)}return;case 5:r=u.stateNode,i===null&&u.flags&4&&e1(u.type,u.memoizedProps)&&r.focus();return;case 6:return;case 4:return;case 12:return;case 13:u.memoizedState===null&&(u=u.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&mx(u))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(at(163))}function ib(r,i){for(var u=r;;){if(u.tag===5){var f=u.stateNode;if(i)f=f.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{f=u.stateNode;var y=u.memoizedProps.style;y=y!=null&&y.hasOwnProperty("display")?y.display:null,f.style.display=J0("display",y)}}else if(u.tag===6)u.stateNode.nodeValue=i?"":u.memoizedProps;else if((u.tag!==23&&u.tag!==24||u.memoizedState===null||u===r)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break;for(;u.sibling===null;){if(u.return===null||u.return===r)return;u=u.return}u.sibling.return=u.return,u=u.sibling}}function ob(r,i){if(El&&typeof El.onCommitFiberUnmount=="function")try{El.onCommitFiberUnmount(cv,i)}catch{}switch(i.tag){case 0:case 11:case 14:case 15:case 22:if(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null)){var u=r=r.next;do{var f=u,y=f.destroy;if(f=f.tag,y!==void 0)if((f&4)!=0)gb(i,u);else{f=i;try{y()}catch(S){Nu(f,S)}}u=u.next}while(u!==r)}break;case 1:if(nb(i),r=i.stateNode,typeof r.componentWillUnmount=="function")try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(S){Nu(i,S)}break;case 5:nb(i);break;case 4:lb(r,i)}}function ab(r){r.alternate=null,r.child=null,r.dependencies=null,r.firstEffect=null,r.lastEffect=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.return=null,r.updateQueue=null}function sb(r){return r.tag===5||r.tag===3||r.tag===4}function ub(r){e:{for(var i=r.return;i!==null;){if(sb(i))break e;i=i.return}throw Error(at(160))}var u=i;switch(i=u.stateNode,u.tag){case 5:var f=!1;break;case 3:i=i.containerInfo,f=!0;break;case 4:i=i.containerInfo,f=!0;break;default:throw Error(at(161))}u.flags&16&&(uh(i,""),u.flags&=-17);e:t:for(u=r;;){for(;u.sibling===null;){if(u.return===null||sb(u.return)){u=null;break e}u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue t;u.child.return=u,u=u.child}if(!(u.flags&2)){u=u.stateNode;break e}}f?Bv(r,u,i):Uv(r,u,i)}function Bv(r,i,u){var f=r.tag,y=f===5||f===6;if(y)r=y?r.stateNode:r.stateNode.instance,i?u.nodeType===8?u.parentNode.insertBefore(r,i):u.insertBefore(r,i):(u.nodeType===8?(i=u.parentNode,i.insertBefore(r,u)):(i=u,i.appendChild(r)),u=u._reactRootContainer,u!=null||i.onclick!==null||(i.onclick=_d));else if(f!==4&&(r=r.child,r!==null))for(Bv(r,i,u),r=r.sibling;r!==null;)Bv(r,i,u),r=r.sibling}function Uv(r,i,u){var f=r.tag,y=f===5||f===6;if(y)r=y?r.stateNode:r.stateNode.instance,i?u.insertBefore(r,i):u.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(Uv(r,i,u),r=r.sibling;r!==null;)Uv(r,i,u),r=r.sibling}function lb(r,i){for(var u=i,f=!1,y,S;;){if(!f){f=u.return;e:for(;;){if(f===null)throw Error(at(160));switch(y=f.stateNode,f.tag){case 5:S=!1;break e;case 3:y=y.containerInfo,S=!0;break e;case 4:y=y.containerInfo,S=!0;break e}f=f.return}f=!0}if(u.tag===5||u.tag===6){e:for(var l=r,k=u,M=k;;)if(ob(l,M),M.child!==null&&M.tag!==4)M.child.return=M,M=M.child;else{if(M===k)break e;for(;M.sibling===null;){if(M.return===null||M.return===k)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}S?(l=y,k=u.stateNode,l.nodeType===8?l.parentNode.removeChild(k):l.removeChild(k)):y.removeChild(u.stateNode)}else if(u.tag===4){if(u.child!==null){y=u.stateNode.containerInfo,S=!0,u.child.return=u,u=u.child;continue}}else if(ob(r,u),u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return;u=u.return,u.tag===4&&(f=!1)}u.sibling.return=u.return,u=u.sibling}}function Nv(r,i){switch(i.tag){case 0:case 11:case 14:case 15:case 22:var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do(f.tag&3)==3&&(r=f.destroy,f.destroy=void 0,r!==void 0&&r()),f=f.next;while(f!==u)}return;case 1:return;case 5:if(u=i.stateNode,u!=null){f=i.memoizedProps;var y=r!==null?r.memoizedProps:f;r=i.type;var S=i.updateQueue;if(i.updateQueue=null,S!==null){for(u[bd]=f,r==="input"&&f.type==="radio"&&f.name!=null&&G0(u,f),Ty(r,y),i=Ty(r,f),y=0;y<S.length;y+=2){var l=S[y],k=S[y+1];l==="style"?Q0(u,k):l==="dangerouslySetInnerHTML"?Y0(u,k):l==="children"?uh(u,k):uy(u,l,k,i)}switch(r){case"input":xy(u,f);break;case"textarea":X0(u,f);break;case"select":r=u._wrapperState.wasMultiple,u._wrapperState.wasMultiple=!!f.multiple,S=f.value,S!=null?Dc(u,!!f.multiple,S,!1):r!==!!f.multiple&&(f.defaultValue!=null?Dc(u,!!f.multiple,f.defaultValue,!0):Dc(u,!!f.multiple,f.multiple?[]:"",!1))}}}return;case 6:if(i.stateNode===null)throw Error(at(162));i.stateNode.nodeValue=i.memoizedProps;return;case 3:u=i.stateNode,u.hydrate&&(u.hydrate=!1,mx(u.containerInfo));return;case 12:return;case 13:i.memoizedState!==null&&(Gv=lo(),ib(i.child,!0)),cb(i);return;case 19:cb(i);return;case 17:return;case 23:case 24:ib(i,i.memoizedState!==null);return}throw Error(at(163))}function cb(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var u=r.stateNode;u===null&&(u=r.stateNode=new tC),i.forEach(function(f){var y=dC.bind(null,r,f);u.has(f)||(u.add(f),f.then(y,y))})}}function iC(r,i){return r!==null&&(r=r.memoizedState,r===null||r.dehydrated!==null)?(i=i.memoizedState,i!==null&&i.dehydrated===null):!1}var oC=Math.ceil,qd=gl.ReactCurrentDispatcher,jv=gl.ReactCurrentOwner,Qt=0,Po=null,di=null,po=0,kl=0,Vv=Au(0),Ni=0,Zd=null,ep=0,Vh=0,tp=0,qv=0,Zv=null,Gv=0,Wv=1/0;function rp(){Wv=lo()+500}var Pt=null,Gd=!1,$v=null,Cs=null,Ru=!1,qh=null,Zh=90,Xv=[],Kv=[],nu=null,Gh=0,Hv=null,Wd=-1,iu=0,$d=0,Wh=null,Xd=!1;function ua(){return(Qt&48)!=0?lo():Wd!==-1?Wd:Wd=lo()}function Fu(r){if(r=r.mode,(r&2)==0)return 1;if((r&4)==0)return Kc()===99?1:2;if(iu===0&&(iu=ep),WE.transition!==0){$d!==0&&($d=Zv!==null?Zv.pendingLanes:0),r=iu;var i=4186112&~$d;return i&=-i,i===0&&(r=4186112&~r,i=r&-r,i===0&&(i=8192)),i}return r=Kc(),(Qt&4)!=0&&r===98?r=cd(12,iu):(r=KS(r),r=cd(r,iu)),r}function Bu(r,i,u){if(50<Gh)throw Gh=0,Hv=null,Error(at(185));if(r=Kd(r,i),r===null)return null;pd(r,i,u),r===Po&&(tp|=i,Ni===4&&np(r,po));var f=Kc();i===1?(Qt&8)!=0&&(Qt&48)==0?Yv(r):(ka(r,u),Qt===0&&(rp(),bs())):((Qt&4)==0||f!==98&&f!==99||(nu===null?nu=new Set([r]):nu.add(r)),ka(r,u)),Zv=r}function Kd(r,i){r.lanes|=i;var u=r.alternate;for(u!==null&&(u.lanes|=i),u=r,r=r.return;r!==null;)r.childLanes|=i,u=r.alternate,u!==null&&(u.childLanes|=i),u=r,r=r.return;return u.tag===3?u.stateNode:null}function ka(r,i){for(var u=r.callbackNode,f=r.suspendedLanes,y=r.pingedLanes,S=r.expirationTimes,l=r.pendingLanes;0<l;){var k=31-Tu(l),M=1<<k,q=S[k];if(q===-1){if((M&f)==0||(M&y)!=0){q=i,Bc(M);var ee=yn;S[k]=10<=ee?q+250:6<=ee?q+5e3:-1}}else q<=i&&(r.expiredLanes|=M);l&=~M}if(f=gh(r,r===Po?po:0),i=yn,f===0)u!==null&&(u!==dv&&hv(u),r.callbackNode=null,r.callbackPriority=0);else{if(u!==null){if(r.callbackPriority===i)return;u!==dv&&hv(u)}i===15?(u=Yv.bind(null,r),eu===null?(eu=[u],Pd=pv(Cd,m1)):eu.push(u),u=dv):i===14?u=kh(99,Yv.bind(null,r)):(u=HS(i),u=kh(u,pb.bind(null,r))),r.callbackPriority=i,r.callbackNode=u}}function pb(r){if(Wd=-1,$d=iu=0,(Qt&48)!=0)throw Error(at(327));var i=r.callbackNode;if(Uu()&&r.callbackNode!==i)return null;var u=gh(r,r===Po?po:0);if(u===0)return null;var f=u,y=Qt;Qt|=16;var S=mb();(Po!==r||po!==f)&&(rp(),ip(r,f));do try{uC();break}catch(k){db(r,k)}while(1);if(yv(),qd.current=S,Qt=y,di!==null?f=0:(Po=null,po=0,f=Ni),(ep&tp)!=0)ip(r,0);else if(f!==0){if(f===2&&(Qt|=64,r.hydrate&&(r.hydrate=!1,sv(r.containerInfo)),u=wx(r),u!==0&&(f=$h(r,u))),f===1)throw i=Zd,ip(r,0),np(r,u),ka(r,lo()),i;switch(r.finishedWork=r.current.alternate,r.finishedLanes=u,f){case 0:case 1:throw Error(at(345));case 2:Al(r);break;case 3:if(np(r,u),(u&62914560)===u&&(f=Gv+500-lo(),10<f)){if(gh(r,0)!==0)break;if(y=r.suspendedLanes,(y&u)!==u){ua(),r.pingedLanes|=r.suspendedLanes&y;break}r.timeoutHandle=t1(Al.bind(null,r),f);break}Al(r);break;case 4:if(np(r,u),(u&4186112)===u)break;for(f=r.eventTimes,y=-1;0<u;){var l=31-Tu(u);S=1<<l,l=f[l],l>y&&(y=l),u&=~S}if(u=y,u=lo()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*oC(u/1960))-u,10<u){r.timeoutHandle=t1(Al.bind(null,r),u);break}Al(r);break;case 5:Al(r);break;default:throw Error(at(329))}}return ka(r,lo()),r.callbackNode===i?pb.bind(null,r):null}function np(r,i){for(i&=~qv,i&=~tp,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var u=31-Tu(i),f=1<<u;r[u]=-1,i&=~f}}function Yv(r){if((Qt&48)!=0)throw Error(at(327));if(Uu(),r===Po&&(r.expiredLanes&po)!=0){var i=po,u=$h(r,i);(ep&tp)!=0&&(i=gh(r,i),u=$h(r,i))}else i=gh(r,0),u=$h(r,i);if(r.tag!==0&&u===2&&(Qt|=64,r.hydrate&&(r.hydrate=!1,sv(r.containerInfo)),i=wx(r),i!==0&&(u=$h(r,i))),u===1)throw u=Zd,ip(r,0),np(r,i),ka(r,lo()),u;return r.finishedWork=r.current.alternate,r.finishedLanes=i,Al(r),ka(r,lo()),null}function aC(){if(nu!==null){var r=nu;nu=null,r.forEach(function(i){i.expiredLanes|=24&i.pendingLanes,ka(i,lo())})}bs()}function hb(r,i){var u=Qt;Qt|=1;try{return r(i)}finally{Qt=u,Qt===0&&(rp(),bs())}}function fb(r,i){var u=Qt;Qt&=-2,Qt|=8;try{return r(i)}finally{Qt=u,Qt===0&&(rp(),bs())}}function Hd(r,i){Zn(Vv,kl),kl|=i,ep|=i}function Jv(){kl=Vv.current,Sn(Vv)}function ip(r,i){r.finishedWork=null,r.finishedLanes=0;var u=r.timeoutHandle;if(u!==-1&&(r.timeoutHandle=-1,NE(u)),di!==null)for(u=di.return;u!==null;){var f=u;switch(f.tag){case 1:f=f.type.childContextTypes,f!=null&&Sd();break;case 3:Jc(),Sn(qo),Sn(uo),Ev();break;case 5:bv(f);break;case 4:Jc();break;case 13:Sn(Gn);break;case 19:Sn(Gn);break;case 10:vv(f);break;case 23:case 24:Jv()}u=u.return}Po=r,di=ju(r.current,null),po=kl=ep=i,Ni=0,Zd=null,qv=tp=Vh=0}function db(r,i){do{var u=di;try{if(yv(),Oh.current=jd,Fd){for(var f=ti.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}Fd=!1}if(Rh=0,Ui=co=ti=null,Fh=!1,jv.current=null,u===null||u.return===null){Ni=1,Zd=i,di=null;break}e:{var S=r,l=u.return,k=u,M=i;if(i=po,k.flags|=2048,k.firstEffect=k.lastEffect=null,M!==null&&typeof M=="object"&&typeof M.then=="function"){var q=M;if((k.mode&2)==0){var ee=k.alternate;ee?(k.updateQueue=ee.updateQueue,k.memoizedState=ee.memoizedState,k.lanes=ee.lanes):(k.updateQueue=null,k.memoizedState=null)}var ke=(Gn.current&1)!=0,X=l;do{var Se;if(Se=X.tag===13){var Me=X.memoizedState;if(Me!==null)Se=Me.dehydrated!==null;else{var Le=X.memoizedProps;Se=Le.fallback===void 0?!1:Le.unstable_avoidThisFallback!==!0?!0:!ke}}if(Se){var ue=X.updateQueue;if(ue===null){var re=new Set;re.add(q),X.updateQueue=re}else ue.add(q);if((X.mode&2)==0){if(X.flags|=64,k.flags|=16384,k.flags&=-2981,k.tag===1)if(k.alternate===null)k.tag=17;else{var ae=Lu(-1,1);ae.tag=2,Du(k,ae)}k.lanes|=1;break e}M=void 0,k=i;var be=S.pingCache;if(be===null?(be=S.pingCache=new eC,M=new Set,be.set(q,M)):(M=be.get(q),M===void 0&&(M=new Set,be.set(q,M))),!M.has(k)){M.add(k);var De=fC.bind(null,S,q,k);q.then(De,De)}X.flags|=4096,X.lanes=i;break e}X=X.return}while(X!==null);M=Error((Lc(k.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ni!==5&&(Ni=2),M=Rv(M,k),X=l;do{switch(X.tag){case 3:S=M,X.flags|=4096,i&=-i,X.lanes|=i;var mt=tb(X,S,i);g1(X,mt);break e;case 1:S=M;var We=X.type,Tt=X.stateNode;if((X.flags&64)==0&&(typeof We.getDerivedStateFromError=="function"||Tt!==null&&typeof Tt.componentDidCatch=="function"&&(Cs===null||!Cs.has(Tt)))){X.flags|=4096,i&=-i,X.lanes|=i;var Ot=rb(X,S,i);g1(X,Ot);break e}}X=X.return}while(X!==null)}vb(u)}catch(pt){i=pt,di===u&&u!==null&&(di=u=u.return);continue}break}while(1)}function mb(){var r=qd.current;return qd.current=jd,r===null?jd:r}function $h(r,i){var u=Qt;Qt|=16;var f=mb();Po===r&&po===i||ip(r,i);do try{sC();break}catch(y){db(r,y)}while(1);if(yv(),Qt=u,qd.current=f,di!==null)throw Error(at(261));return Po=null,po=0,Ni}function sC(){for(;di!==null;)yb(di)}function uC(){for(;di!==null&&!qE();)yb(di)}function yb(r){var i=xb(r.alternate,r,kl);r.memoizedProps=r.pendingProps,i===null?vb(r):di=i,jv.current=null}function vb(r){var i=r;do{var u=i.alternate;if(r=i.return,(i.flags&2048)==0){if(u=JE(u,i,kl),u!==null){di=u;return}if(u=i,u.tag!==24&&u.tag!==23||u.memoizedState===null||(kl&1073741824)!=0||(u.mode&4)==0){for(var f=0,y=u.child;y!==null;)f|=y.lanes|y.childLanes,y=y.sibling;u.childLanes=f}r!==null&&(r.flags&2048)==0&&(r.firstEffect===null&&(r.firstEffect=i.firstEffect),i.lastEffect!==null&&(r.lastEffect!==null&&(r.lastEffect.nextEffect=i.firstEffect),r.lastEffect=i.lastEffect),1<i.flags&&(r.lastEffect!==null?r.lastEffect.nextEffect=i:r.firstEffect=i,r.lastEffect=i))}else{if(u=QE(i),u!==null){u.flags&=2047,di=u;return}r!==null&&(r.firstEffect=r.lastEffect=null,r.flags|=2048)}if(i=i.sibling,i!==null){di=i;return}di=i=r}while(i!==null);Ni===0&&(Ni=5)}function Al(r){var i=Kc();return Cl(99,lC.bind(null,r,i)),null}function lC(r,i){do Uu();while(qh!==null);if((Qt&48)!=0)throw Error(at(327));var u=r.finishedWork;if(u===null)return null;if(r.finishedWork=null,r.finishedLanes=0,u===r.current)throw Error(at(177));r.callbackNode=null;var f=u.lanes|u.childLanes,y=f,S=r.pendingLanes&~y;r.pendingLanes=y,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=y,r.mutableReadLanes&=y,r.entangledLanes&=y,y=r.entanglements;for(var l=r.eventTimes,k=r.expirationTimes;0<S;){var M=31-Tu(S),q=1<<M;y[M]=0,l[M]=-1,k[M]=-1,S&=~q}if(nu!==null&&(f&24)==0&&nu.has(r)&&nu.delete(r),r===Po&&(di=Po=null,po=0),1<u.flags?u.lastEffect!==null?(u.lastEffect.nextEffect=u,f=u.firstEffect):f=u:f=u.firstEffect,f!==null){if(y=Qt,Qt|=32,jv.current=null,iv=hd,l=Vx(),ev(l)){if("selectionStart"in l)k={start:l.selectionStart,end:l.selectionEnd};else e:if(k=(k=l.ownerDocument)&&k.defaultView||window,(q=k.getSelection&&k.getSelection())&&q.rangeCount!==0){k=q.anchorNode,S=q.anchorOffset,M=q.focusNode,q=q.focusOffset;try{k.nodeType,M.nodeType}catch{k=null;break e}var ee=0,ke=-1,X=-1,Se=0,Me=0,Le=l,ue=null;t:for(;;){for(var re;Le!==k||S!==0&&Le.nodeType!==3||(ke=ee+S),Le!==M||q!==0&&Le.nodeType!==3||(X=ee+q),Le.nodeType===3&&(ee+=Le.nodeValue.length),(re=Le.firstChild)!==null;)ue=Le,Le=re;for(;;){if(Le===l)break t;if(ue===k&&++Se===S&&(ke=ee),ue===M&&++Me===q&&(X=ee),(re=Le.nextSibling)!==null)break;Le=ue,ue=Le.parentNode}Le=re}k=ke===-1||X===-1?null:{start:ke,end:X}}else k=null;k=k||{start:0,end:0}}else k=null;ov={focusedElem:l,selectionRange:k},hd=!1,Wh=null,Xd=!1,Pt=f;do try{cC()}catch(pt){if(Pt===null)throw Error(at(330));Nu(Pt,pt),Pt=Pt.nextEffect}while(Pt!==null);Wh=null,Pt=f;do try{for(l=r;Pt!==null;){var ae=Pt.flags;if(ae&16&&uh(Pt.stateNode,""),ae&128){var be=Pt.alternate;if(be!==null){var De=be.ref;De!==null&&(typeof De=="function"?De(null):De.current=null)}}switch(ae&1038){case 2:ub(Pt),Pt.flags&=-3;break;case 6:ub(Pt),Pt.flags&=-3,Nv(Pt.alternate,Pt);break;case 1024:Pt.flags&=-1025;break;case 1028:Pt.flags&=-1025,Nv(Pt.alternate,Pt);break;case 4:Nv(Pt.alternate,Pt);break;case 8:k=Pt,lb(l,k);var mt=k.alternate;ab(k),mt!==null&&ab(mt)}Pt=Pt.nextEffect}}catch(pt){if(Pt===null)throw Error(at(330));Nu(Pt,pt),Pt=Pt.nextEffect}while(Pt!==null);if(De=ov,be=Vx(),ae=De.focusedElem,l=De.selectionRange,be!==ae&&ae&&ae.ownerDocument&&jx(ae.ownerDocument.documentElement,ae)){for(l!==null&&ev(ae)&&(be=l.start,De=l.end,De===void 0&&(De=be),"selectionStart"in ae?(ae.selectionStart=be,ae.selectionEnd=Math.min(De,ae.value.length)):(De=(be=ae.ownerDocument||document)&&be.defaultView||window,De.getSelection&&(De=De.getSelection(),k=ae.textContent.length,mt=Math.min(l.start,k),l=l.end===void 0?mt:Math.min(l.end,k),!De.extend&&mt>l&&(k=l,l=mt,mt=k),k=Nx(ae,mt),S=Nx(ae,l),k&&S&&(De.rangeCount!==1||De.anchorNode!==k.node||De.anchorOffset!==k.offset||De.focusNode!==S.node||De.focusOffset!==S.offset)&&(be=be.createRange(),be.setStart(k.node,k.offset),De.removeAllRanges(),mt>l?(De.addRange(be),De.extend(S.node,S.offset)):(be.setEnd(S.node,S.offset),De.addRange(be)))))),be=[],De=ae;De=De.parentNode;)De.nodeType===1&&be.push({element:De,left:De.scrollLeft,top:De.scrollTop});for(typeof ae.focus=="function"&&ae.focus(),ae=0;ae<be.length;ae++)De=be[ae],De.element.scrollLeft=De.left,De.element.scrollTop=De.top}hd=!!iv,ov=iv=null,r.current=u,Pt=f;do try{for(ae=r;Pt!==null;){var We=Pt.flags;if(We&36&&nC(ae,Pt.alternate,Pt),We&128){be=void 0;var Tt=Pt.ref;if(Tt!==null){var Ot=Pt.stateNode;switch(Pt.tag){case 5:be=Ot;break;default:be=Ot}typeof Tt=="function"?Tt(be):Tt.current=be}}Pt=Pt.nextEffect}}catch(pt){if(Pt===null)throw Error(at(330));Nu(Pt,pt),Pt=Pt.nextEffect}while(Pt!==null);Pt=null,GE(),Qt=y}else r.current=u;if(Ru)Ru=!1,qh=r,Zh=i;else for(Pt=f;Pt!==null;)i=Pt.nextEffect,Pt.nextEffect=null,Pt.flags&8&&(We=Pt,We.sibling=null,We.stateNode=null),Pt=i;if(f=r.pendingLanes,f===0&&(Cs=null),f===1?r===Hv?Gh++:(Gh=0,Hv=r):Gh=0,u=u.stateNode,El&&typeof El.onCommitFiberRoot=="function")try{El.onCommitFiberRoot(cv,u,void 0,(u.current.flags&64)==64)}catch{}if(ka(r,lo()),Gd)throw Gd=!1,r=$v,$v=null,r;return(Qt&8)!=0||bs(),null}function cC(){for(;Pt!==null;){var r=Pt.alternate;Xd||Wh===null||((Pt.flags&8)!=0?ux(Pt,Wh)&&(Xd=!0):Pt.tag===13&&iC(r,Pt)&&ux(Pt,Wh)&&(Xd=!0));var i=Pt.flags;(i&256)!=0&&rC(r,Pt),(i&512)==0||Ru||(Ru=!0,kh(97,function(){return Uu(),null})),Pt=Pt.nextEffect}}function Uu(){if(Zh!==90){var r=97<Zh?97:Zh;return Zh=90,Cl(r,hC)}return!1}function pC(r,i){Xv.push(i,r),Ru||(Ru=!0,kh(97,function(){return Uu(),null}))}function gb(r,i){Kv.push(i,r),Ru||(Ru=!0,kh(97,function(){return Uu(),null}))}function hC(){if(qh===null)return!1;var r=qh;if(qh=null,(Qt&48)!=0)throw Error(at(331));var i=Qt;Qt|=32;var u=Kv;Kv=[];for(var f=0;f<u.length;f+=2){var y=u[f],S=u[f+1],l=y.destroy;if(y.destroy=void 0,typeof l=="function")try{l()}catch(M){if(S===null)throw Error(at(330));Nu(S,M)}}for(u=Xv,Xv=[],f=0;f<u.length;f+=2){y=u[f],S=u[f+1];try{var k=y.create;y.destroy=k()}catch(M){if(S===null)throw Error(at(330));Nu(S,M)}}for(k=r.current.firstEffect;k!==null;)r=k.nextEffect,k.nextEffect=null,k.flags&8&&(k.sibling=null,k.stateNode=null),k=r;return Qt=i,bs(),!0}function _b(r,i,u){i=Rv(u,i),i=tb(r,i,1),Du(r,i),i=ua(),r=Kd(r,1),r!==null&&(pd(r,1,i),ka(r,i))}function Nu(r,i){if(r.tag===3)_b(r,r,i);else for(var u=r.return;u!==null;){if(u.tag===3){_b(u,r,i);break}else if(u.tag===1){var f=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Cs===null||!Cs.has(f))){r=Rv(i,r);var y=rb(u,r,1);if(Du(u,y),y=ua(),u=Kd(u,1),u!==null)pd(u,1,y),ka(u,y);else if(typeof f.componentDidCatch=="function"&&(Cs===null||!Cs.has(f)))try{f.componentDidCatch(i,r)}catch{}break}}u=u.return}}function fC(r,i,u){var f=r.pingCache;f!==null&&f.delete(i),i=ua(),r.pingedLanes|=r.suspendedLanes&u,Po===r&&(po&u)===u&&(Ni===4||Ni===3&&(po&62914560)===po&&500>lo()-Gv?ip(r,0):qv|=u),ka(r,i)}function dC(r,i){var u=r.stateNode;u!==null&&u.delete(i),i=0,i===0&&(i=r.mode,(i&2)==0?i=1:(i&4)==0?i=Kc()===99?1:2:(iu===0&&(iu=ep),i=Uc(62914560&~iu),i===0&&(i=4194304))),u=ua(),r=Kd(r,i),r!==null&&(pd(r,i,u),ka(r,u))}var xb;xb=function(r,i,u){var f=i.lanes;if(r!==null)if(r.memoizedProps!==i.pendingProps||qo.current)Qa=!0;else if((u&f)!=0)Qa=(r.flags&16384)!=0;else{switch(Qa=!1,i.tag){case 3:G1(i),Sv();break;case 5:P1(i);break;case 1:Zo(i.type)&&Ed(i);break;case 4:xv(i,i.stateNode.containerInfo);break;case 10:f=i.memoizedProps.value;var y=i.type._context;Zn(Td,y._currentValue),y._currentValue=f;break;case 13:if(i.memoizedState!==null)return(u&i.child.childLanes)!=0?W1(r,i,u):(Zn(Gn,Gn.current&1),i=ru(r,i,u),i!==null?i.sibling:null);Zn(Gn,Gn.current&1);break;case 19:if(f=(u&i.childLanes)!=0,(r.flags&64)!=0){if(f)return Y1(r,i,u);i.flags|=64}if(y=i.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Zn(Gn,Gn.current),f)break;return null;case 23:case 24:return i.lanes=0,Mv(r,i,u)}return ru(r,i,u)}else Qa=!1;switch(i.lanes=0,i.tag){case 2:if(f=i.type,r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2),r=i.pendingProps,y=Xc(i,uo.current),Yc(i,u),y=Pv(null,i,f,r,y,u),i.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0){if(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zo(f)){var S=!0;Ed(i)}else S=!1;i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,gv(i);var l=f.getDerivedStateFromProps;typeof l=="function"&&Ad(i,f,l,r),y.updater=Md,i.stateNode=y,y._reactInternals=i,_v(i,f,r,u),i=Lv(null,i,f,!0,S,u)}else i.tag=0,Wo(null,i,y,u),i=i.child;return i;case 16:y=i.elementType;e:{switch(r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2),r=i.pendingProps,S=y._init,y=S(y._payload),i.type=y,S=i.tag=yC(y),r=Ja(y,r),S){case 0:i=zv(null,i,y,r,u);break e;case 1:i=Z1(null,i,y,r,u);break e;case 11:i=N1(null,i,y,r,u);break e;case 14:i=j1(null,i,y,Ja(y.type,r),f,u);break e}throw Error(at(306,y,""))}return i;case 0:return f=i.type,y=i.pendingProps,y=i.elementType===f?y:Ja(f,y),zv(r,i,f,y,u);case 1:return f=i.type,y=i.pendingProps,y=i.elementType===f?y:Ja(f,y),Z1(r,i,f,y,u);case 3:if(G1(i),f=i.updateQueue,r===null||f===null)throw Error(at(282));if(f=i.pendingProps,y=i.memoizedState,y=y!==null?y.element:null,v1(r,i),Ah(i,f,null,u),f=i.memoizedState.element,f===y)Sv(),i=ru(r,i,u);else{if(y=i.stateNode,(S=y.hydrate)&&(Ou=Zc(i.stateNode.containerInfo.firstChild),tu=i,S=Ss=!0),S){if(r=y.mutableSourceEagerHydrationData,r!=null)for(y=0;y<r.length;y+=2)S=r[y],S._workInProgressVersionPrimary=r[y+1],Qc.push(S);for(u=C1(i,null,f,u),i.child=u;u;)u.flags=u.flags&-3|1024,u=u.sibling}else Wo(r,i,f,u),Sv();i=i.child}return i;case 5:return P1(i),r===null&&wv(i),f=i.type,y=i.pendingProps,S=r!==null?r.memoizedProps:null,l=y.children,av(f,y)?l=null:S!==null&&av(f,S)&&(i.flags|=16),q1(r,i),Wo(r,i,l,u),i.child;case 6:return r===null&&wv(i),null;case 13:return W1(r,i,u);case 4:return xv(i,i.stateNode.containerInfo),f=i.pendingProps,r===null?i.child=Dd(i,null,f,u):Wo(r,i,f,u),i.child;case 11:return f=i.type,y=i.pendingProps,y=i.elementType===f?y:Ja(f,y),N1(r,i,f,y,u);case 7:return Wo(r,i,i.pendingProps,u),i.child;case 8:return Wo(r,i,i.pendingProps.children,u),i.child;case 12:return Wo(r,i,i.pendingProps.children,u),i.child;case 10:e:{f=i.type._context,y=i.pendingProps,l=i.memoizedProps,S=y.value;var k=i.type._context;if(Zn(Td,k._currentValue),k._currentValue=S,l!==null)if(k=l.value,S=Pa(k,S)?0:(typeof f._calculateChangedBits=="function"?f._calculateChangedBits(k,S):1073741823)|0,S===0){if(l.children===y.children&&!qo.current){i=ru(r,i,u);break e}}else for(k=i.child,k!==null&&(k.return=i);k!==null;){var M=k.dependencies;if(M!==null){l=k.child;for(var q=M.firstContext;q!==null;){if(q.context===f&&(q.observedBits&S)!=0){k.tag===1&&(q=Lu(-1,u&-u),q.tag=2,Du(k,q)),k.lanes|=u,q=k.alternate,q!==null&&(q.lanes|=u),y1(k.return,u),M.lanes|=u;break}q=q.next}}else l=k.tag===10&&k.type===i.type?null:k.child;if(l!==null)l.return=k;else for(l=k;l!==null;){if(l===i){l=null;break}if(k=l.sibling,k!==null){k.return=l.return,l=k;break}l=l.return}k=l}Wo(r,i,y.children,u),i=i.child}return i;case 9:return y=i.type,S=i.pendingProps,f=S.children,Yc(i,u),y=Ta(y,S.unstable_observedBits),f=f(y),i.flags|=1,Wo(r,i,f,u),i.child;case 14:return y=i.type,S=Ja(y,i.pendingProps),S=Ja(y.type,S),j1(r,i,y,S,f,u);case 15:return V1(r,i,i.type,i.pendingProps,f,u);case 17:return f=i.type,y=i.pendingProps,y=i.elementType===f?y:Ja(f,y),r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2),i.tag=1,Zo(f)?(r=!0,Ed(i)):r=!1,Yc(i,u),w1(i,f,y),_v(i,f,y,u),Lv(null,i,f,!0,r,u);case 19:return Y1(r,i,u);case 23:return Mv(r,i,u);case 24:return Mv(r,i,u)}throw Error(at(156,i.tag))};function mC(r,i,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Aa(r,i,u,f){return new mC(r,i,u,f)}function Qv(r){return r=r.prototype,!(!r||!r.isReactComponent)}function yC(r){if(typeof r=="function")return Qv(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Jf)return 11;if(r===ed)return 14}return 2}function ju(r,i){var u=r.alternate;return u===null?(u=Aa(r.tag,i,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=i,u.type=r.type,u.flags=0,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null),u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,i=r.dependencies,u.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u}function Yd(r,i,u,f,y,S){var l=2;if(f=r,typeof r=="function")Qv(r)&&(l=1);else if(typeof r=="string")l=5;else e:switch(r){case wu:return op(u.children,y,S,i);case N0:l=8,y|=16;break;case ly:l=8,y|=1;break;case ih:return r=Aa(12,u,i,y|8),r.elementType=ih,r.type=ih,r.lanes=S,r;case oh:return r=Aa(13,u,i,y),r.type=oh,r.elementType=oh,r.lanes=S,r;case Qf:return r=Aa(19,u,i,y),r.elementType=Qf,r.lanes=S,r;case my:return eg(u,y,S,i);case yy:return r=Aa(24,u,i,y),r.elementType=yy,r.lanes=S,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case cy:l=10;break e;case py:l=9;break e;case Jf:l=11;break e;case ed:l=14;break e;case hy:l=16,f=null;break e;case fy:l=22;break e}throw Error(at(130,r==null?r:typeof r,""))}return i=Aa(l,u,i,y),i.elementType=r,i.type=f,i.lanes=S,i}function op(r,i,u,f){return r=Aa(7,r,f,i),r.lanes=u,r}function eg(r,i,u,f){return r=Aa(23,r,f,i),r.elementType=my,r.lanes=u,r}function tg(r,i,u){return r=Aa(6,r,null,i),r.lanes=u,r}function rg(r,i,u){return i=Aa(4,r.children!==null?r.children:[],r.key,i),i.lanes=u,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function vC(r,i,u){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=u,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vy(0),this.expirationTimes=Vy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vy(0),this.mutableSourceEagerHydrationData=null}function gC(r,i,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_l,key:f==null?null:""+f,children:r,containerInfo:i,implementation:u}}function Jd(r,i,u,f){var y=i.current,S=ua(),l=Fu(y);e:if(u){u=u._reactInternals;t:{if(bl(u)!==u||u.tag!==1)throw Error(at(170));var k=u;do{switch(k.tag){case 3:k=k.stateNode.context;break t;case 1:if(Zo(k.type)){k=k.stateNode.__reactInternalMemoizedMergedChildContext;break t}}k=k.return}while(k!==null);throw Error(at(171))}if(u.tag===1){var M=u.type;if(Zo(M)){u=a1(u,M,k);break e}}u=k}else u=Mu;return i.context===null?i.context=u:i.pendingContext=u,i=Lu(S,l),i.payload={element:r},f=f===void 0?null:f,f!==null&&(i.callback=f),Du(y,i),Bu(y,l,S),l}function ng(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function bb(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<i?u:i}}function ig(r,i){bb(r,i),(r=r.alternate)&&bb(r,i)}function _C(){return null}function og(r,i,u){var f=u!=null&&u.hydrationOptions!=null&&u.hydrationOptions.mutableSources||null;if(u=new vC(r,i,u!=null&&u.hydrate===!0),i=Aa(3,null,null,i===2?7:i===1?3:0),u.current=i,i.stateNode=u,gv(i),r[Gc]=u.current,Kx(r.nodeType===8?r.parentNode:r),f)for(r=0;r<f.length;r++){i=f[r];var y=i._getVersion;y=y(i._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[i,y]:u.mutableSourceEagerHydrationData.push(i,y)}this._internalRoot=u}og.prototype.render=function(r){Jd(r,this._internalRoot,null,null)};og.prototype.unmount=function(){var r=this._internalRoot,i=r.containerInfo;Jd(null,r,null,function(){i[Gc]=null})};function Xh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function xC(r,i){if(i||(i=r?r.nodeType===9?r.documentElement:r.firstChild:null,i=!(!i||i.nodeType!==1||!i.hasAttribute("data-reactroot"))),!i)for(var u;u=r.lastChild;)r.removeChild(u);return new og(r,0,i?{hydrate:!0}:void 0)}function Qd(r,i,u,f,y){var S=u._reactRootContainer;if(S){var l=S._internalRoot;if(typeof y=="function"){var k=y;y=function(){var q=ng(l);k.call(q)}}Jd(i,l,r,y)}else{if(S=u._reactRootContainer=xC(u,f),l=S._internalRoot,typeof y=="function"){var M=y;y=function(){var q=ng(l);M.call(q)}}fb(function(){Jd(i,l,r,y)})}return ng(l)}lx=function(r){if(r.tag===13){var i=ua();Bu(r,4,i),ig(r,4)}};Ry=function(r){if(r.tag===13){var i=ua();Bu(r,67108864,i),ig(r,67108864)}};cx=function(r){if(r.tag===13){var i=ua(),u=Fu(r);Bu(r,u,i),ig(r,u)}};px=function(r,i){return i()};ky=function(r,i,u){switch(i){case"input":if(xy(r,u),i=u.name,u.type==="radio"&&i!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<u.length;i++){var f=u[i];if(f!==r&&f.form===r.form){var y=wd(f);if(!y)throw Error(at(90));q0(f),xy(f,y)}}}break;case"textarea":X0(r,u);break;case"select":i=u.value,i!=null&&Dc(r,!!u.multiple,i,!1)}};Ay=hb;nx=function(r,i,u,f,y){var S=Qt;Qt|=4;try{return Cl(98,r.bind(null,i,u,f,y))}finally{Qt=S,Qt===0&&(rp(),bs())}};My=function(){(Qt&49)==0&&(aC(),Uu())};ix=function(r,i){var u=Qt;Qt|=2;try{return r(i)}finally{Qt=u,Qt===0&&(rp(),bs())}};function wb(r,i){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xh(i))throw Error(at(200));return gC(r,i,null,u)}var bC={Events:[Ih,Wc,wd,tx,rx,Uu,{current:!1}]},Kh={findFiberByHostInstance:wl,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},wC={bundleType:Kh.bundleType,version:Kh.version,rendererPackageName:Kh.rendererPackageName,rendererConfig:Kh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gl.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=sx(r),r===null?null:r.stateNode},findFiberByHostInstance:Kh.findFiberByHostInstance||_C,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var em=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!em.isDisabled&&em.supportsFiber)try{cv=em.inject(wC),El=em}catch{}}Ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bC;Ca.createPortal=wb;Ca.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(at(188)):Error(at(268,Object.keys(r)));return r=sx(i),r=r===null?null:r.stateNode,r};Ca.flushSync=function(r,i){var u=Qt;if((u&48)!=0)return r(i);Qt|=1;try{if(r)return Cl(99,r.bind(null,i))}finally{Qt=u,bs()}};Ca.hydrate=function(r,i,u){if(!Xh(i))throw Error(at(200));return Qd(null,r,i,!0,u)};Ca.render=function(r,i,u){if(!Xh(i))throw Error(at(200));return Qd(null,r,i,!1,u)};Ca.unmountComponentAtNode=function(r){if(!Xh(r))throw Error(at(40));return r._reactRootContainer?(fb(function(){Qd(null,null,r,!1,function(){r._reactRootContainer=null,r[Gc]=null})}),!0):!1};Ca.unstable_batchedUpdates=hb;Ca.unstable_createPortal=function(r,i){return wb(r,i,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ca.unstable_renderSubtreeIntoContainer=function(r,i,u,f){if(!Xh(u))throw Error(at(200));if(r==null||r._reactInternals===void 0)throw Error(at(38));return Qd(r,i,u,!1,f)};Ca.version="17.0.2";function Sb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sb)}catch(r){console.error(r)}}Sb(),oy.exports=Ca;var SC=oy.exports;iS(oy.exports.unstable_batchedUpdates);function es(r){for(var i=arguments.length,u=Array(i>1?i-1:0),f=1;f<i;f++)u[f-1]=arguments[f];throw Error("[Immer] minified error nr: "+r+(u.length?" "+u.map(function(y){return"'"+y+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Vu(r){return!!r&&!!r[In]}function qu(r){return!!r&&(function(i){if(!i||typeof i!="object")return!1;var u=Object.getPrototypeOf(i);if(u===null)return!0;var f=Object.hasOwnProperty.call(u,"constructor")&&u.constructor;return f===Object||typeof f=="function"&&Function.toString.call(f)===zC}(r)||Array.isArray(r)||!!r[Lb]||!!r.constructor[Lb]||ag(r)||sg(r))}function Ml(r,i,u){u===void 0&&(u=!1),ap(r)===0?(u?Object.keys:up)(r).forEach(function(f){u&&typeof f=="symbol"||i(f,r[f],r)}):r.forEach(function(f,y){return i(y,f,r)})}function ap(r){var i=r[In];return i?i.i>3?i.i-4:i.i:Array.isArray(r)?1:ag(r)?2:sg(r)?3:0}function sp(r,i){return ap(r)===2?r.has(i):Object.prototype.hasOwnProperty.call(r,i)}function EC(r,i){return ap(r)===2?r.get(i):r[i]}function Eb(r,i,u){var f=ap(r);f===2?r.set(i,u):f===3?(r.delete(i),r.add(u)):r[i]=u}function Cb(r,i){return r===i?r!==0||1/r==1/i:r!=r&&i!=i}function ag(r){return AC&&r instanceof Map}function sg(r){return MC&&r instanceof Set}function zl(r){return r.o||r.t}function ug(r){if(Array.isArray(r))return Array.prototype.slice.call(r);var i=Db(r);delete i[In];for(var u=up(i),f=0;f<u.length;f++){var y=u[f],S=i[y];S.writable===!1&&(S.writable=!0,S.configurable=!0),(S.get||S.set)&&(i[y]={configurable:!0,writable:!0,enumerable:S.enumerable,value:r[y]})}return Object.create(Object.getPrototypeOf(r),i)}function lg(r,i){return i===void 0&&(i=!1),cg(r)||Vu(r)||!qu(r)||(ap(r)>1&&(r.set=r.add=r.clear=r.delete=CC),Object.freeze(r),i&&Ml(r,function(u,f){return lg(f,!0)},!0)),r}function CC(){es(2)}function cg(r){return r==null||typeof r!="object"||Object.isFrozen(r)}function Ps(r){var i=_g[r];return i||es(18,r),i}function PC(r,i){_g[r]||(_g[r]=i)}function pg(){return Hh}function hg(r,i){i&&(Ps("Patches"),r.u=[],r.s=[],r.v=i)}function tm(r){fg(r),r.p.forEach(TC),r.p=null}function fg(r){r===Hh&&(Hh=r.l)}function Pb(r){return Hh={p:[],l:Hh,h:r,m:!0,_:0}}function TC(r){var i=r[In];i.i===0||i.i===1?i.j():i.O=!0}function dg(r,i){i._=i.p.length;var u=i.p[0],f=r!==void 0&&r!==u;return i.h.g||Ps("ES5").S(i,r,f),f?(u[In].P&&(tm(i),es(4)),qu(r)&&(r=rm(i,r),i.l||nm(i,r)),i.u&&Ps("Patches").M(u[In].t,r,i.u,i.s)):r=rm(i,u,[]),tm(i),i.u&&i.v(i.u,i.s),r!==zb?r:void 0}function rm(r,i,u){if(cg(i))return i;var f=i[In];if(!f)return Ml(i,function(S,l){return Tb(r,f,i,S,l,u)},!0),i;if(f.A!==r)return i;if(!f.P)return nm(r,f.t,!0),f.t;if(!f.I){f.I=!0,f.A._--;var y=f.i===4||f.i===5?f.o=ug(f.k):f.o;Ml(f.i===3?new Set(y):y,function(S,l){return Tb(r,f,y,S,l,u)}),nm(r,y,!1),u&&r.u&&Ps("Patches").R(f,u,r.u,r.s)}return f.o}function Tb(r,i,u,f,y,S){if(Vu(y)){var l=rm(r,y,S&&i&&i.i!==3&&!sp(i.D,f)?S.concat(f):void 0);if(Eb(u,f,l),!Vu(l))return;r.m=!1}if(qu(y)&&!cg(y)){if(!r.h.F&&r._<1)return;rm(r,y),i&&i.A.l||nm(r,y)}}function nm(r,i,u){u===void 0&&(u=!1),r.h.F&&r.m&&lg(i,u)}function mg(r,i){var u=r[In];return(u?zl(u):r)[i]}function Ib(r,i){if(i in r)for(var u=Object.getPrototypeOf(r);u;){var f=Object.getOwnPropertyDescriptor(u,i);if(f)return f;u=Object.getPrototypeOf(u)}}function Zu(r){r.P||(r.P=!0,r.l&&Zu(r.l))}function yg(r){r.o||(r.o=ug(r.t))}function vg(r,i,u){var f=ag(i)?Ps("MapSet").N(i,u):sg(i)?Ps("MapSet").T(i,u):r.g?function(y,S){var l=Array.isArray(y),k={i:l?1:0,A:S?S.A:pg(),P:!1,I:!1,D:{},l:S,t:y,k:null,o:null,j:null,C:!1},M=k,q=Yh;l&&(M=[k],q=Jh);var ee=Proxy.revocable(M,q),ke=ee.revoke,X=ee.proxy;return k.k=X,k.j=ke,X}(i,u):Ps("ES5").J(i,u);return(u?u.A:pg()).p.push(f),f}function IC(r){return Vu(r)||es(22,r),function i(u){if(!qu(u))return u;var f,y=u[In],S=ap(u);if(y){if(!y.P&&(y.i<4||!Ps("ES5").K(y)))return y.t;y.I=!0,f=kb(u,S),y.I=!1}else f=kb(u,S);return Ml(f,function(l,k){y&&EC(y.t,l)===k||Eb(f,l,i(k))}),S===3?new Set(f):f}(r)}function kb(r,i){switch(i){case 2:return new Map(r);case 3:return Array.from(r)}return ug(r)}function kC(){function r(S,l){var k=y[S];return k?k.enumerable=l:y[S]=k={configurable:!0,enumerable:l,get:function(){var M=this[In];return Yh.get(M,S)},set:function(M){var q=this[In];Yh.set(q,S,M)}},k}function i(S){for(var l=S.length-1;l>=0;l--){var k=S[l][In];if(!k.P)switch(k.i){case 5:f(k)&&Zu(k);break;case 4:u(k)&&Zu(k)}}}function u(S){for(var l=S.t,k=S.k,M=up(k),q=M.length-1;q>=0;q--){var ee=M[q];if(ee!==In){var ke=l[ee];if(ke===void 0&&!sp(l,ee))return!0;var X=k[ee],Se=X&&X[In];if(Se?Se.t!==ke:!Cb(X,ke))return!0}}var Me=!!l[In];return M.length!==up(l).length+(Me?0:1)}function f(S){var l=S.k;if(l.length!==S.t.length)return!0;var k=Object.getOwnPropertyDescriptor(l,l.length-1);if(k&&!k.get)return!0;for(var M=0;M<l.length;M++)if(!l.hasOwnProperty(M))return!0;return!1}var y={};PC("ES5",{J:function(S,l){var k=Array.isArray(S),M=function(ee,ke){if(ee){for(var X=Array(ke.length),Se=0;Se<ke.length;Se++)Object.defineProperty(X,""+Se,r(Se,!0));return X}var Me=Db(ke);delete Me[In];for(var Le=up(Me),ue=0;ue<Le.length;ue++){var re=Le[ue];Me[re]=r(re,ee||!!Me[re].enumerable)}return Object.create(Object.getPrototypeOf(ke),Me)}(k,S),q={i:k?5:4,A:l?l.A:pg(),P:!1,I:!1,D:{},l,t:S,k:M,o:null,O:!1,C:!1};return Object.defineProperty(M,In,{value:q,writable:!0}),M},S:function(S,l,k){k?Vu(l)&&l[In].A===S&&i(S.p):(S.u&&function M(q){if(q&&typeof q=="object"){var ee=q[In];if(ee){var ke=ee.t,X=ee.k,Se=ee.D,Me=ee.i;if(Me===4)Ml(X,function(be){be!==In&&(ke[be]!==void 0||sp(ke,be)?Se[be]||M(X[be]):(Se[be]=!0,Zu(ee)))}),Ml(ke,function(be){X[be]!==void 0||sp(X,be)||(Se[be]=!1,Zu(ee))});else if(Me===5){if(f(ee)&&(Zu(ee),Se.length=!0),X.length<ke.length)for(var Le=X.length;Le<ke.length;Le++)Se[Le]=!1;else for(var ue=ke.length;ue<X.length;ue++)Se[ue]=!0;for(var re=Math.min(X.length,ke.length),ae=0;ae<re;ae++)X.hasOwnProperty(ae)||(Se[ae]=!0),Se[ae]===void 0&&M(X[ae])}}}}(S.p[0]),i(S.p))},K:function(S){return S.i===4?u(S):f(S)}})}var Ab,Hh,gg=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",AC=typeof Map!="undefined",MC=typeof Set!="undefined",Mb=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",zb=gg?Symbol.for("immer-nothing"):((Ab={})["immer-nothing"]=!0,Ab),Lb=gg?Symbol.for("immer-draftable"):"__$immer_draftable",In=gg?Symbol.for("immer-state"):"__$immer_state",zC=""+Object.prototype.constructor,up=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames,Db=Object.getOwnPropertyDescriptors||function(r){var i={};return up(r).forEach(function(u){i[u]=Object.getOwnPropertyDescriptor(r,u)}),i},_g={},Yh={get:function(r,i){if(i===In)return r;var u=zl(r);if(!sp(u,i))return function(y,S,l){var k,M=Ib(S,l);return M?"value"in M?M.value:(k=M.get)===null||k===void 0?void 0:k.call(y.k):void 0}(r,u,i);var f=u[i];return r.I||!qu(f)?f:f===mg(r.t,i)?(yg(r),r.o[i]=vg(r.A.h,f,r)):f},has:function(r,i){return i in zl(r)},ownKeys:function(r){return Reflect.ownKeys(zl(r))},set:function(r,i,u){var f=Ib(zl(r),i);if(f==null?void 0:f.set)return f.set.call(r.k,u),!0;if(!r.P){var y=mg(zl(r),i),S=y==null?void 0:y[In];if(S&&S.t===u)return r.o[i]=u,r.D[i]=!1,!0;if(Cb(u,y)&&(u!==void 0||sp(r.t,i)))return!0;yg(r),Zu(r)}return r.o[i]===u&&typeof u!="number"&&(u!==void 0||i in r.o)||(r.o[i]=u,r.D[i]=!0,!0)},deleteProperty:function(r,i){return mg(r.t,i)!==void 0||i in r.t?(r.D[i]=!1,yg(r),Zu(r)):delete r.D[i],r.o&&delete r.o[i],!0},getOwnPropertyDescriptor:function(r,i){var u=zl(r),f=Reflect.getOwnPropertyDescriptor(u,i);return f&&{writable:!0,configurable:r.i!==1||i!=="length",enumerable:f.enumerable,value:u[i]}},defineProperty:function(){es(11)},getPrototypeOf:function(r){return Object.getPrototypeOf(r.t)},setPrototypeOf:function(){es(12)}},Jh={};Ml(Yh,function(r,i){Jh[r]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),Jh.deleteProperty=function(r,i){return Jh.set.call(this,r,i,void 0)},Jh.set=function(r,i,u){return Yh.set.call(this,r[0],i,u,r[0])};var LC=function(){function r(u){var f=this;this.g=Mb,this.F=!0,this.produce=function(y,S,l){if(typeof y=="function"&&typeof S!="function"){var k=S;S=y;var M=f;return function(Le){var ue=this;Le===void 0&&(Le=k);for(var re=arguments.length,ae=Array(re>1?re-1:0),be=1;be<re;be++)ae[be-1]=arguments[be];return M.produce(Le,function(De){var mt;return(mt=S).call.apply(mt,[ue,De].concat(ae))})}}var q;if(typeof S!="function"&&es(6),l!==void 0&&typeof l!="function"&&es(7),qu(y)){var ee=Pb(f),ke=vg(f,y,void 0),X=!0;try{q=S(ke),X=!1}finally{X?tm(ee):fg(ee)}return typeof Promise!="undefined"&&q instanceof Promise?q.then(function(Le){return hg(ee,l),dg(Le,ee)},function(Le){throw tm(ee),Le}):(hg(ee,l),dg(q,ee))}if(!y||typeof y!="object"){if((q=S(y))===void 0&&(q=y),q===zb&&(q=void 0),f.F&&lg(q,!0),l){var Se=[],Me=[];Ps("Patches").M(y,q,Se,Me),l(Se,Me)}return q}es(21,y)},this.produceWithPatches=function(y,S){if(typeof y=="function")return function(q){for(var ee=arguments.length,ke=Array(ee>1?ee-1:0),X=1;X<ee;X++)ke[X-1]=arguments[X];return f.produceWithPatches(q,function(Se){return y.apply(void 0,[Se].concat(ke))})};var l,k,M=f.produce(y,S,function(q,ee){l=q,k=ee});return typeof Promise!="undefined"&&M instanceof Promise?M.then(function(q){return[q,l,k]}):[M,l,k]},typeof(u==null?void 0:u.useProxies)=="boolean"&&this.setUseProxies(u.useProxies),typeof(u==null?void 0:u.autoFreeze)=="boolean"&&this.setAutoFreeze(u.autoFreeze)}var i=r.prototype;return i.createDraft=function(u){qu(u)||es(8),Vu(u)&&(u=IC(u));var f=Pb(this),y=vg(this,u,void 0);return y[In].C=!0,fg(f),y},i.finishDraft=function(u,f){var y=u&&u[In],S=y.A;return hg(S,f),dg(void 0,S)},i.setAutoFreeze=function(u){this.F=u},i.setUseProxies=function(u){u&&!Mb&&es(20),this.g=u},i.applyPatches=function(u,f){var y;for(y=f.length-1;y>=0;y--){var S=f[y];if(S.path.length===0&&S.op==="replace"){u=S.value;break}}y>-1&&(f=f.slice(y+1));var l=Ps("Patches").$;return Vu(u)?l(u,f):this.produce(u,function(k){return l(k,f)})},r}(),la=new LC,DC=la.produce;la.produceWithPatches.bind(la);la.setAutoFreeze.bind(la);la.setUseProxies.bind(la);la.applyPatches.bind(la);la.createDraft.bind(la);la.finishDraft.bind(la);var xg=DC;function OC(r,i,u){return i in r?Object.defineProperty(r,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[i]=u,r}function Ob(r,i){var u=Object.keys(r);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(r);i&&(f=f.filter(function(y){return Object.getOwnPropertyDescriptor(r,y).enumerable})),u.push.apply(u,f)}return u}function Rb(r){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?arguments[i]:{};i%2?Ob(Object(u),!0).forEach(function(f){OC(r,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):Ob(Object(u)).forEach(function(f){Object.defineProperty(r,f,Object.getOwnPropertyDescriptor(u,f))})}return r}function ho(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var Fb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),bg=function(){return Math.random().toString(36).substring(7).split("").join(".")},im={INIT:"@@redux/INIT"+bg(),REPLACE:"@@redux/REPLACE"+bg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+bg()}};function RC(r){if(typeof r!="object"||r===null)return!1;for(var i=r;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(r)===i}function Bb(r,i,u){var f;if(typeof i=="function"&&typeof u=="function"||typeof u=="function"&&typeof arguments[3]=="function")throw new Error(ho(0));if(typeof i=="function"&&typeof u=="undefined"&&(u=i,i=void 0),typeof u!="undefined"){if(typeof u!="function")throw new Error(ho(1));return u(Bb)(r,i)}if(typeof r!="function")throw new Error(ho(2));var y=r,S=i,l=[],k=l,M=!1;function q(){k===l&&(k=l.slice())}function ee(){if(M)throw new Error(ho(3));return S}function ke(Le){if(typeof Le!="function")throw new Error(ho(4));if(M)throw new Error(ho(5));var ue=!0;return q(),k.push(Le),function(){if(!!ue){if(M)throw new Error(ho(6));ue=!1,q();var ae=k.indexOf(Le);k.splice(ae,1),l=null}}}function X(Le){if(!RC(Le))throw new Error(ho(7));if(typeof Le.type=="undefined")throw new Error(ho(8));if(M)throw new Error(ho(9));try{M=!0,S=y(S,Le)}finally{M=!1}for(var ue=l=k,re=0;re<ue.length;re++){var ae=ue[re];ae()}return Le}function Se(Le){if(typeof Le!="function")throw new Error(ho(10));y=Le,X({type:im.REPLACE})}function Me(){var Le,ue=ke;return Le={subscribe:function(ae){if(typeof ae!="object"||ae===null)throw new Error(ho(11));function be(){ae.next&&ae.next(ee())}be();var De=ue(be);return{unsubscribe:De}}},Le[Fb]=function(){return this},Le}return X({type:im.INIT}),f={dispatch:X,subscribe:ke,getState:ee,replaceReducer:Se},f[Fb]=Me,f}function FC(r){Object.keys(r).forEach(function(i){var u=r[i],f=u(void 0,{type:im.INIT});if(typeof f=="undefined")throw new Error(ho(12));if(typeof u(void 0,{type:im.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(ho(13))})}function BC(r){for(var i=Object.keys(r),u={},f=0;f<i.length;f++){var y=i[f];typeof r[y]=="function"&&(u[y]=r[y])}var S=Object.keys(u),l;try{FC(u)}catch(k){l=k}return function(M,q){if(M===void 0&&(M={}),l)throw l;for(var ee=!1,ke={},X=0;X<S.length;X++){var Se=S[X],Me=u[Se],Le=M[Se],ue=Me(Le,q);if(typeof ue=="undefined")throw q&&q.type,new Error(ho(14));ke[Se]=ue,ee=ee||ue!==Le}return ee=ee||S.length!==Object.keys(M).length,ee?ke:M}}function om(){for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return i.length===0?function(f){return f}:i.length===1?i[0]:i.reduce(function(f,y){return function(){return f(y.apply(void 0,arguments))}})}function UC(){for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return function(f){return function(){var y=f.apply(void 0,arguments),S=function(){throw new Error(ho(15))},l={getState:y.getState,dispatch:function(){return S.apply(void 0,arguments)}},k=i.map(function(M){return M(l)});return S=om.apply(void 0,k)(y.dispatch),Rb(Rb({},y),{},{dispatch:S})}}}function Ub(r){var i=function(f){var y=f.dispatch,S=f.getState;return function(l){return function(k){return typeof k=="function"?k(y,S,r):l(k)}}};return i}var Nb=Ub();Nb.withExtraArgument=Ub;var jb=Nb,NC=globalThis&&globalThis.__extends||function(){var r=function(i,u){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&(f[S]=y[S])},r(i,u)};return function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");r(i,u);function f(){this.constructor=i}i.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();globalThis&&globalThis.__generator;var am=globalThis&&globalThis.__spreadArray||function(r,i){for(var u=0,f=i.length,y=r.length;u<f;u++,y++)r[y]=i[u];return r},jC=Object.defineProperty,Vb=Object.getOwnPropertySymbols,VC=Object.prototype.hasOwnProperty,qC=Object.prototype.propertyIsEnumerable,qb=function(r,i,u){return i in r?jC(r,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[i]=u},wg=function(r,i){for(var u in i||(i={}))VC.call(i,u)&&qb(r,u,i[u]);if(Vb)for(var f=0,y=Vb(i);f<y.length;f++){var u=y[f];qC.call(i,u)&&qb(r,u,i[u])}return r},ZC=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?om:om.apply(null,arguments)};function GC(r){if(typeof r!="object"||r===null)return!1;var i=Object.getPrototypeOf(r);if(i===null)return!0;for(var u=i;Object.getPrototypeOf(u)!==null;)u=Object.getPrototypeOf(u);return i===u}var WC=function(r){NC(i,r);function i(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var y=r.apply(this,u)||this;return Object.setPrototypeOf(y,i.prototype),y}return Object.defineProperty(i,Symbol.species,{get:function(){return i},enumerable:!1,configurable:!0}),i.prototype.concat=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return r.prototype.concat.apply(this,u)},i.prototype.prepend=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return u.length===1&&Array.isArray(u[0])?new(i.bind.apply(i,am([void 0],u[0].concat(this)))):new(i.bind.apply(i,am([void 0],u.concat(this))))},i}(Array);function $C(r){return typeof r=="boolean"}function XC(){return function(i){return KC(i)}}function KC(r){r===void 0&&(r={});var i=r.thunk,u=i===void 0?!0:i;r.immutableCheck,r.serializableCheck;var f=new WC;return u&&($C(u)?f.push(jb):f.push(jb.withExtraArgument(u.extraArgument))),f}var HC=!0;function LP(r){var i=XC(),u=r||{},f=u.reducer,y=f===void 0?void 0:f,S=u.middleware,l=S===void 0?i():S,k=u.devTools,M=k===void 0?!0:k,q=u.preloadedState,ee=q===void 0?void 0:q,ke=u.enhancers,X=ke===void 0?void 0:ke,Se;if(typeof y=="function")Se=y;else if(GC(y))Se=BC(y);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var Me=l;typeof Me=="function"&&(Me=Me(i));var Le=UC.apply(void 0,Me),ue=om;M&&(ue=ZC(wg({trace:!HC},typeof M=="object"&&M)));var re=[Le];Array.isArray(X)?re=am([Le],X):typeof X=="function"&&(re=X(re));var ae=ue.apply(void 0,re);return Bb(Se,ee,ae)}function DP(r,i){function u(){for(var f=[],y=0;y<arguments.length;y++)f[y]=arguments[y];if(i){var S=i.apply(void 0,f);if(!S)throw new Error("prepareAction did not return an object");return wg(wg({type:r,payload:S.payload},"meta"in S&&{meta:S.meta}),"error"in S&&{error:S.error})}return{type:r,payload:f[0]}}return u.toString=function(){return""+r},u.type=r,u.match=function(f){return f.type===r},u}function YC(r){var i={},u=[],f,y={addCase:function(S,l){var k=typeof S=="string"?S:S.type;if(k in i)throw new Error("addCase cannot be called with two reducers for the same action type");return i[k]=l,y},addMatcher:function(S,l){return u.push({matcher:S,reducer:l}),y},addDefaultCase:function(S){return f=S,y}};return r(y),[i,u,f]}function JC(r){return typeof r=="function"}function OP(r,i,u,f){u===void 0&&(u=[]);var y=typeof i=="function"?YC(i):[i,u,f],S=y[0],l=y[1],k=y[2],M;if(JC(r))M=function(){return xg(r(),function(){})};else{var q=xg(r,function(){});M=function(){return q}}function ee(ke,X){ke===void 0&&(ke=M());var Se=am([S[X.type]],l.filter(function(Me){var Le=Me.matcher;return Le(X)}).map(function(Me){var Le=Me.reducer;return Le}));return Se.filter(function(Me){return!!Me}).length===0&&(Se=[k]),Se.reduce(function(Me,Le){if(Le)if(Vu(Me)){var ue=Me,re=Le(ue,X);return typeof re=="undefined"?Me:re}else{if(qu(Me))return xg(Me,function(ae){return Le(ae,X)});var re=Le(Me,X);if(typeof re=="undefined"){if(Me===null)return Me;throw Error("A case reducer on a non-draftable value must not return undefined")}return re}return Me},ke)}return ee.getInitialState=M,ee}kC();function Sg(r,i){return Sg=Object.setPrototypeOf||function(f,y){return f.__proto__=y,f},Sg(r,i)}function sm(r,i){r.prototype=Object.create(i.prototype),r.prototype.constructor=r,Sg(r,i)}var um=function(){function r(){this.listeners=[]}var i=r.prototype;return i.subscribe=function(f){var y=this,S=f||function(){};return this.listeners.push(S),this.onSubscribe(),function(){y.listeners=y.listeners.filter(function(l){return l!==S}),y.onUnsubscribe()}},i.hasListeners=function(){return this.listeners.length>0},i.onSubscribe=function(){},i.onUnsubscribe=function(){},r}(),Zb=typeof window=="undefined";function To(){}function QC(r,i){return typeof r=="function"?r(i):r}function eP(r){return typeof r=="number"&&r>=0&&r!==1/0}function lm(r){return Array.isArray(r)?r:[r]}function tP(r,i){return Math.max(r+(i||0)-Date.now(),0)}function Eg(r,i,u){return pm(r)?typeof i=="function"?Yr({},u,{queryKey:r,queryFn:i}):Yr({},i,{queryKey:r}):r}function Gu(r,i,u){return pm(r)?[Yr({},i,{queryKey:r}),u]:[r||{},i]}function rP(r,i){if(r===!0&&i===!0||r==null&&i==null)return"all";if(r===!1&&i===!1)return"none";var u=r!=null?r:!i;return u?"active":"inactive"}function Gb(r,i){var u=r.active,f=r.exact,y=r.fetching,S=r.inactive,l=r.predicate,k=r.queryKey,M=r.stale;if(pm(k)){if(f){if(i.queryHash!==Cg(k,i.options))return!1}else if(!cm(i.queryKey,k))return!1}var q=rP(u,S);if(q==="none")return!1;if(q!=="all"){var ee=i.isActive();if(q==="active"&&!ee||q==="inactive"&&ee)return!1}return!(typeof M=="boolean"&&i.isStale()!==M||typeof y=="boolean"&&i.isFetching()!==y||l&&!l(i))}function Wb(r,i){var u=r.exact,f=r.fetching,y=r.predicate,S=r.mutationKey;if(pm(S)){if(!i.options.mutationKey)return!1;if(u){if(Ll(i.options.mutationKey)!==Ll(S))return!1}else if(!cm(i.options.mutationKey,S))return!1}return!(typeof f=="boolean"&&i.state.status==="loading"!==f||y&&!y(i))}function Cg(r,i){var u=(i==null?void 0:i.queryKeyHashFn)||Ll;return u(r)}function Ll(r){var i=lm(r);return nP(i)}function nP(r){return JSON.stringify(r,function(i,u){return Pg(u)?Object.keys(u).sort().reduce(function(f,y){return f[y]=u[y],f},{}):u})}function cm(r,i){return $b(lm(r),lm(i))}function $b(r,i){return r===i?!0:typeof r!=typeof i?!1:r&&i&&typeof r=="object"&&typeof i=="object"?!Object.keys(i).some(function(u){return!$b(r[u],i[u])}):!1}function Xb(r,i){if(r===i)return r;var u=Array.isArray(r)&&Array.isArray(i);if(u||Pg(r)&&Pg(i)){for(var f=u?r.length:Object.keys(r).length,y=u?i:Object.keys(i),S=y.length,l=u?[]:{},k=0,M=0;M<S;M++){var q=u?M:y[M];l[q]=Xb(r[q],i[q]),l[q]===r[q]&&k++}return f===S&&k===f?r:l}return i}function Pg(r){if(!Kb(r))return!1;var i=r.constructor;if(typeof i=="undefined")return!0;var u=i.prototype;return!(!Kb(u)||!u.hasOwnProperty("isPrototypeOf"))}function Kb(r){return Object.prototype.toString.call(r)==="[object Object]"}function pm(r){return typeof r=="string"||Array.isArray(r)}function iP(r){return new Promise(function(i){setTimeout(i,r)})}function Hb(r){Promise.resolve().then(r).catch(function(i){return setTimeout(function(){throw i})})}function Yb(){if(typeof AbortController=="function")return new AbortController}var oP=function(r){sm(i,r);function i(){return r.apply(this,arguments)||this}var u=i.prototype;return u.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},u.setEventListener=function(y){var S=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=y(function(l){typeof l=="boolean"?S.setFocused(l):S.onFocus()})},u.setFocused=function(y){this.focused=y,y&&this.onFocus()},u.onFocus=function(){this.listeners.forEach(function(y){y()})},u.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document=="undefined"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},u.setDefaultEventListener=function(){var y;!Zb&&((y=window)==null?void 0:y.addEventListener)&&this.setEventListener(function(S){var l=function(){return S()};return window.addEventListener("visibilitychange",l,!1),window.addEventListener("focus",l,!1),function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("focus",l)}})},i}(um),hm=new oP,aP=function(r){sm(i,r);function i(){return r.apply(this,arguments)||this}var u=i.prototype;return u.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},u.setEventListener=function(y){var S=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=y(function(l){typeof l=="boolean"?S.setOnline(l):S.onOnline()})},u.setOnline=function(y){this.online=y,y&&this.onOnline()},u.onOnline=function(){this.listeners.forEach(function(y){y()})},u.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator=="undefined"||typeof navigator.onLine=="undefined"?!0:navigator.onLine},u.setDefaultEventListener=function(){var y;!Zb&&((y=window)==null?void 0:y.addEventListener)&&this.setEventListener(function(S){var l=function(){return S()};return window.addEventListener("online",l,!1),window.addEventListener("offline",l,!1),function(){window.removeEventListener("online",l),window.removeEventListener("offline",l)}})},i}(um),fm=new aP;function sP(r){return Math.min(1e3*Math.pow(2,r),3e4)}function dm(r){return typeof(r==null?void 0:r.cancel)=="function"}var Jb=function(i){this.revert=i==null?void 0:i.revert,this.silent=i==null?void 0:i.silent};function Tg(r){return r instanceof Jb}var Qb=function(i){var u=this,f=!1,y,S,l,k;this.abort=i.abort,this.cancel=function(X){return y==null?void 0:y(X)},this.cancelRetry=function(){f=!0},this.continueRetry=function(){f=!1},this.continue=function(){return S==null?void 0:S()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(X,Se){l=X,k=Se});var M=function(Se){u.isResolved||(u.isResolved=!0,i.onSuccess==null||i.onSuccess(Se),S==null||S(),l(Se))},q=function(Se){u.isResolved||(u.isResolved=!0,i.onError==null||i.onError(Se),S==null||S(),k(Se))},ee=function(){return new Promise(function(Se){S=Se,u.isPaused=!0,i.onPause==null||i.onPause()}).then(function(){S=void 0,u.isPaused=!1,i.onContinue==null||i.onContinue()})},ke=function X(){if(!u.isResolved){var Se;try{Se=i.fn()}catch(Me){Se=Promise.reject(Me)}y=function(Le){if(!u.isResolved&&(q(new Jb(Le)),u.abort==null||u.abort(),dm(Se)))try{Se.cancel()}catch{}},u.isTransportCancelable=dm(Se),Promise.resolve(Se).then(M).catch(function(Me){var Le,ue;if(!u.isResolved){var re=(Le=i.retry)!=null?Le:3,ae=(ue=i.retryDelay)!=null?ue:sP,be=typeof ae=="function"?ae(u.failureCount,Me):ae,De=re===!0||typeof re=="number"&&u.failureCount<re||typeof re=="function"&&re(u.failureCount,Me);if(f||!De){q(Me);return}u.failureCount++,i.onFail==null||i.onFail(u.failureCount,Me),iP(be).then(function(){if(!hm.isFocused()||!fm.isOnline())return ee()}).then(function(){f?q(Me):X()})}})}};ke()},uP=function(){function r(){this.queue=[],this.transactions=0,this.notifyFn=function(u){u()},this.batchNotifyFn=function(u){u()}}var i=r.prototype;return i.batch=function(f){this.transactions++;var y=f();return this.transactions--,this.transactions||this.flush(),y},i.schedule=function(f){var y=this;this.transactions?this.queue.push(f):Hb(function(){y.notifyFn(f)})},i.batchCalls=function(f){var y=this;return function(){for(var S=arguments.length,l=new Array(S),k=0;k<S;k++)l[k]=arguments[k];y.schedule(function(){f.apply(void 0,l)})}},i.flush=function(){var f=this,y=this.queue;this.queue=[],y.length&&Hb(function(){f.batchNotifyFn(function(){y.forEach(function(S){f.notifyFn(S)})})})},i.setNotifyFunction=function(f){this.notifyFn=f},i.setBatchNotifyFunction=function(f){this.batchNotifyFn=f},r}(),ji=new uP,ew=console;function tw(){return ew}function lP(r){ew=r}var cP=function(){function r(u){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=u.defaultOptions,this.setOptions(u.options),this.observers=[],this.cache=u.cache,this.queryKey=u.queryKey,this.queryHash=u.queryHash,this.initialState=u.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=u.meta,this.scheduleGc()}var i=r.prototype;return i.setOptions=function(f){var y;this.options=Yr({},this.defaultOptions,f),this.meta=f==null?void 0:f.meta,this.cacheTime=Math.max(this.cacheTime||0,(y=this.options.cacheTime)!=null?y:5*60*1e3)},i.setDefaultOptions=function(f){this.defaultOptions=f},i.scheduleGc=function(){var f=this;this.clearGcTimeout(),eP(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){f.optionalRemove()},this.cacheTime))},i.clearGcTimeout=function(){clearTimeout(this.gcTimeout),this.gcTimeout=void 0},i.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},i.setData=function(f,y){var S,l,k=this.state.data,M=QC(f,k);return((S=(l=this.options).isDataEqual)==null?void 0:S.call(l,k,M))?M=k:this.options.structuralSharing!==!1&&(M=Xb(k,M)),this.dispatch({data:M,type:"success",dataUpdatedAt:y==null?void 0:y.updatedAt}),M},i.setState=function(f,y){this.dispatch({type:"setState",state:f,setStateOptions:y})},i.cancel=function(f){var y,S=this.promise;return(y=this.retryer)==null||y.cancel(f),S?S.then(To).catch(To):Promise.resolve()},i.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},i.reset=function(){this.destroy(),this.setState(this.initialState)},i.isActive=function(){return this.observers.some(function(f){return f.options.enabled!==!1})},i.isFetching=function(){return this.state.isFetching},i.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(f){return f.getCurrentResult().isStale})},i.isStaleByTime=function(f){return f===void 0&&(f=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!tP(this.state.dataUpdatedAt,f)},i.onFocus=function(){var f,y=this.observers.find(function(S){return S.shouldFetchOnWindowFocus()});y&&y.refetch(),(f=this.retryer)==null||f.continue()},i.onOnline=function(){var f,y=this.observers.find(function(S){return S.shouldFetchOnReconnect()});y&&y.refetch(),(f=this.retryer)==null||f.continue()},i.addObserver=function(f){this.observers.indexOf(f)===-1&&(this.observers.push(f),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:f}))},i.removeObserver=function(f){this.observers.indexOf(f)!==-1&&(this.observers=this.observers.filter(function(y){return y!==f}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:f}))},i.getObserversCount=function(){return this.observers.length},i.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},i.fetch=function(f,y){var S=this,l,k,M;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(y==null?void 0:y.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var q;return(q=this.retryer)==null||q.continueRetry(),this.promise}}if(f&&this.setOptions(f),!this.options.queryFn){var ee=this.observers.find(function(ae){return ae.options.queryFn});ee&&this.setOptions(ee.options)}var ke=lm(this.queryKey),X=Yb(),Se={queryKey:ke,pageParam:void 0,meta:this.meta};Object.defineProperty(Se,"signal",{enumerable:!0,get:function(){if(X)return S.abortSignalConsumed=!0,X.signal}});var Me=function(){return S.options.queryFn?(S.abortSignalConsumed=!1,S.options.queryFn(Se)):Promise.reject("Missing queryFn")},Le={fetchOptions:y,options:this.options,queryKey:ke,state:this.state,fetchFn:Me,meta:this.meta};if((l=this.options.behavior)==null?void 0:l.onFetch){var ue;(ue=this.options.behavior)==null||ue.onFetch(Le)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((k=Le.fetchOptions)==null?void 0:k.meta)){var re;this.dispatch({type:"fetch",meta:(re=Le.fetchOptions)==null?void 0:re.meta})}return this.retryer=new Qb({fn:Le.fetchFn,abort:X==null||(M=X.abort)==null?void 0:M.bind(X),onSuccess:function(be){S.setData(be),S.cache.config.onSuccess==null||S.cache.config.onSuccess(be,S),S.cacheTime===0&&S.optionalRemove()},onError:function(be){Tg(be)&&be.silent||S.dispatch({type:"error",error:be}),Tg(be)||(S.cache.config.onError==null||S.cache.config.onError(be,S),tw().error(be)),S.cacheTime===0&&S.optionalRemove()},onFail:function(){S.dispatch({type:"failed"})},onPause:function(){S.dispatch({type:"pause"})},onContinue:function(){S.dispatch({type:"continue"})},retry:Le.options.retry,retryDelay:Le.options.retryDelay}),this.promise=this.retryer.promise,this.promise},i.dispatch=function(f){var y=this;this.state=this.reducer(this.state,f),ji.batch(function(){y.observers.forEach(function(S){S.onQueryUpdate(f)}),y.cache.notify({query:y,type:"queryUpdated",action:f})})},i.getDefaultState=function(f){var y=typeof f.initialData=="function"?f.initialData():f.initialData,S=typeof f.initialData!="undefined",l=S?typeof f.initialDataUpdatedAt=="function"?f.initialDataUpdatedAt():f.initialDataUpdatedAt:0,k=typeof y!="undefined";return{data:y,dataUpdateCount:0,dataUpdatedAt:k?l!=null?l:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:k?"success":"idle"}},i.reducer=function(f,y){var S,l;switch(y.type){case"failed":return Yr({},f,{fetchFailureCount:f.fetchFailureCount+1});case"pause":return Yr({},f,{isPaused:!0});case"continue":return Yr({},f,{isPaused:!1});case"fetch":return Yr({},f,{fetchFailureCount:0,fetchMeta:(S=y.meta)!=null?S:null,isFetching:!0,isPaused:!1,status:f.dataUpdatedAt?f.status:"loading"});case"success":return Yr({},f,{data:y.data,dataUpdateCount:f.dataUpdateCount+1,dataUpdatedAt:(l=y.dataUpdatedAt)!=null?l:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var k=y.error;return Tg(k)&&k.revert&&this.revertState?Yr({},this.revertState):Yr({},f,{error:k,errorUpdateCount:f.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:f.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return Yr({},f,{isInvalidated:!0});case"setState":return Yr({},f,y.state);default:return f}},r}(),pP=function(r){sm(i,r);function i(f){var y;return y=r.call(this)||this,y.config=f||{},y.queries=[],y.queriesMap={},y}var u=i.prototype;return u.build=function(y,S,l){var k,M=S.queryKey,q=(k=S.queryHash)!=null?k:Cg(M,S),ee=this.get(q);return ee||(ee=new cP({cache:this,queryKey:M,queryHash:q,options:y.defaultQueryOptions(S),state:l,defaultOptions:y.getQueryDefaults(M),meta:S.meta}),this.add(ee)),ee},u.add=function(y){this.queriesMap[y.queryHash]||(this.queriesMap[y.queryHash]=y,this.queries.push(y),this.notify({type:"queryAdded",query:y}))},u.remove=function(y){var S=this.queriesMap[y.queryHash];S&&(y.destroy(),this.queries=this.queries.filter(function(l){return l!==y}),S===y&&delete this.queriesMap[y.queryHash],this.notify({type:"queryRemoved",query:y}))},u.clear=function(){var y=this;ji.batch(function(){y.queries.forEach(function(S){y.remove(S)})})},u.get=function(y){return this.queriesMap[y]},u.getAll=function(){return this.queries},u.find=function(y,S){var l=Gu(y,S),k=l[0];return typeof k.exact=="undefined"&&(k.exact=!0),this.queries.find(function(M){return Gb(k,M)})},u.findAll=function(y,S){var l=Gu(y,S),k=l[0];return Object.keys(k).length>0?this.queries.filter(function(M){return Gb(k,M)}):this.queries},u.notify=function(y){var S=this;ji.batch(function(){S.listeners.forEach(function(l){l(y)})})},u.onFocus=function(){var y=this;ji.batch(function(){y.queries.forEach(function(S){S.onFocus()})})},u.onOnline=function(){var y=this;ji.batch(function(){y.queries.forEach(function(S){S.onOnline()})})},i}(um),hP=function(){function r(u){this.options=Yr({},u.defaultOptions,u.options),this.mutationId=u.mutationId,this.mutationCache=u.mutationCache,this.observers=[],this.state=u.state||fP(),this.meta=u.meta}var i=r.prototype;return i.setState=function(f){this.dispatch({type:"setState",state:f})},i.addObserver=function(f){this.observers.indexOf(f)===-1&&this.observers.push(f)},i.removeObserver=function(f){this.observers=this.observers.filter(function(y){return y!==f})},i.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(To).catch(To)):Promise.resolve()},i.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},i.execute=function(){var f=this,y,S=this.state.status==="loading",l=Promise.resolve();return S||(this.dispatch({type:"loading",variables:this.options.variables}),l=l.then(function(){f.mutationCache.config.onMutate==null||f.mutationCache.config.onMutate(f.state.variables,f)}).then(function(){return f.options.onMutate==null?void 0:f.options.onMutate(f.state.variables)}).then(function(k){k!==f.state.context&&f.dispatch({type:"loading",context:k,variables:f.state.variables})})),l.then(function(){return f.executeMutation()}).then(function(k){y=k,f.mutationCache.config.onSuccess==null||f.mutationCache.config.onSuccess(y,f.state.variables,f.state.context,f)}).then(function(){return f.options.onSuccess==null?void 0:f.options.onSuccess(y,f.state.variables,f.state.context)}).then(function(){return f.options.onSettled==null?void 0:f.options.onSettled(y,null,f.state.variables,f.state.context)}).then(function(){return f.dispatch({type:"success",data:y}),y}).catch(function(k){return f.mutationCache.config.onError==null||f.mutationCache.config.onError(k,f.state.variables,f.state.context,f),tw().error(k),Promise.resolve().then(function(){return f.options.onError==null?void 0:f.options.onError(k,f.state.variables,f.state.context)}).then(function(){return f.options.onSettled==null?void 0:f.options.onSettled(void 0,k,f.state.variables,f.state.context)}).then(function(){throw f.dispatch({type:"error",error:k}),k})})},i.executeMutation=function(){var f=this,y;return this.retryer=new Qb({fn:function(){return f.options.mutationFn?f.options.mutationFn(f.state.variables):Promise.reject("No mutationFn found")},onFail:function(){f.dispatch({type:"failed"})},onPause:function(){f.dispatch({type:"pause"})},onContinue:function(){f.dispatch({type:"continue"})},retry:(y=this.options.retry)!=null?y:0,retryDelay:this.options.retryDelay}),this.retryer.promise},i.dispatch=function(f){var y=this;this.state=dP(this.state,f),ji.batch(function(){y.observers.forEach(function(S){S.onMutationUpdate(f)}),y.mutationCache.notify(y)})},r}();function fP(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function dP(r,i){switch(i.type){case"failed":return Yr({},r,{failureCount:r.failureCount+1});case"pause":return Yr({},r,{isPaused:!0});case"continue":return Yr({},r,{isPaused:!1});case"loading":return Yr({},r,{context:i.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:i.variables});case"success":return Yr({},r,{data:i.data,error:null,status:"success",isPaused:!1});case"error":return Yr({},r,{data:void 0,error:i.error,failureCount:r.failureCount+1,isPaused:!1,status:"error"});case"setState":return Yr({},r,i.state);default:return r}}var mP=function(r){sm(i,r);function i(f){var y;return y=r.call(this)||this,y.config=f||{},y.mutations=[],y.mutationId=0,y}var u=i.prototype;return u.build=function(y,S,l){var k=new hP({mutationCache:this,mutationId:++this.mutationId,options:y.defaultMutationOptions(S),state:l,defaultOptions:S.mutationKey?y.getMutationDefaults(S.mutationKey):void 0,meta:S.meta});return this.add(k),k},u.add=function(y){this.mutations.push(y),this.notify(y)},u.remove=function(y){this.mutations=this.mutations.filter(function(S){return S!==y}),y.cancel(),this.notify(y)},u.clear=function(){var y=this;ji.batch(function(){y.mutations.forEach(function(S){y.remove(S)})})},u.getAll=function(){return this.mutations},u.find=function(y){return typeof y.exact=="undefined"&&(y.exact=!0),this.mutations.find(function(S){return Wb(y,S)})},u.findAll=function(y){return this.mutations.filter(function(S){return Wb(y,S)})},u.notify=function(y){var S=this;ji.batch(function(){S.listeners.forEach(function(l){l(y)})})},u.onFocus=function(){this.resumePausedMutations()},u.onOnline=function(){this.resumePausedMutations()},u.resumePausedMutations=function(){var y=this.mutations.filter(function(S){return S.state.isPaused});return ji.batch(function(){return y.reduce(function(S,l){return S.then(function(){return l.continue().catch(To)})},Promise.resolve())})},i}(um);function yP(){return{onFetch:function(i){i.fetchFn=function(){var u,f,y,S,l,k,M=(u=i.fetchOptions)==null||(f=u.meta)==null?void 0:f.refetchPage,q=(y=i.fetchOptions)==null||(S=y.meta)==null?void 0:S.fetchMore,ee=q==null?void 0:q.pageParam,ke=(q==null?void 0:q.direction)==="forward",X=(q==null?void 0:q.direction)==="backward",Se=((l=i.state.data)==null?void 0:l.pages)||[],Me=((k=i.state.data)==null?void 0:k.pageParams)||[],Le=Yb(),ue=Le==null?void 0:Le.signal,re=Me,ae=!1,be=i.options.queryFn||function(){return Promise.reject("Missing queryFn")},De=function(ir,qr,zr,ri){return re=ri?[qr].concat(re):[].concat(re,[qr]),ri?[zr].concat(ir):[].concat(ir,[zr])},mt=function(ir,qr,zr,ri){if(ae)return Promise.reject("Cancelled");if(typeof zr=="undefined"&&!qr&&ir.length)return Promise.resolve(ir);var kn={queryKey:i.queryKey,signal:ue,pageParam:zr,meta:i.meta},ni=be(kn),Vt=Promise.resolve(ni).then(function(At){return De(ir,zr,At,ri)});if(dm(ni)){var Ye=Vt;Ye.cancel=ni.cancel}return Vt},We;if(!Se.length)We=mt([]);else if(ke){var Tt=typeof ee!="undefined",Ot=Tt?ee:rw(i.options,Se);We=mt(Se,Tt,Ot)}else if(X){var pt=typeof ee!="undefined",er=pt?ee:vP(i.options,Se);We=mt(Se,pt,er,!0)}else(function(){re=[];var Ut=typeof i.options.getNextPageParam=="undefined",ir=M&&Se[0]?M(Se[0],0,Se):!0;We=ir?mt([],Ut,Me[0]):Promise.resolve(De([],Me[0],Se[0]));for(var qr=function(kn){We=We.then(function(ni){var Vt=M&&Se[kn]?M(Se[kn],kn,Se):!0;if(Vt){var Ye=Ut?Me[kn]:rw(i.options,ni);return mt(ni,Ut,Ye)}return Promise.resolve(De(ni,Me[kn],Se[kn]))})},zr=1;zr<Se.length;zr++)qr(zr)})();var wr=We.then(function(Ut){return{pages:Ut,pageParams:re}}),Fr=wr;return Fr.cancel=function(){ae=!0,Le==null||Le.abort(),dm(We)&&We.cancel()},wr}}}}function rw(r,i){return r.getNextPageParam==null?void 0:r.getNextPageParam(i[i.length-1],i)}function vP(r,i){return r.getPreviousPageParam==null?void 0:r.getPreviousPageParam(i[0],i)}var RP=function(){function r(u){u===void 0&&(u={}),this.queryCache=u.queryCache||new pP,this.mutationCache=u.mutationCache||new mP,this.defaultOptions=u.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var i=r.prototype;return i.mount=function(){var f=this;this.unsubscribeFocus=hm.subscribe(function(){hm.isFocused()&&fm.isOnline()&&(f.mutationCache.onFocus(),f.queryCache.onFocus())}),this.unsubscribeOnline=fm.subscribe(function(){hm.isFocused()&&fm.isOnline()&&(f.mutationCache.onOnline(),f.queryCache.onOnline())})},i.unmount=function(){var f,y;(f=this.unsubscribeFocus)==null||f.call(this),(y=this.unsubscribeOnline)==null||y.call(this)},i.isFetching=function(f,y){var S=Gu(f,y),l=S[0];return l.fetching=!0,this.queryCache.findAll(l).length},i.isMutating=function(f){return this.mutationCache.findAll(Yr({},f,{fetching:!0})).length},i.getQueryData=function(f,y){var S;return(S=this.queryCache.find(f,y))==null?void 0:S.state.data},i.getQueriesData=function(f){return this.getQueryCache().findAll(f).map(function(y){var S=y.queryKey,l=y.state,k=l.data;return[S,k]})},i.setQueryData=function(f,y,S){var l=Eg(f),k=this.defaultQueryOptions(l);return this.queryCache.build(this,k).setData(y,S)},i.setQueriesData=function(f,y,S){var l=this;return ji.batch(function(){return l.getQueryCache().findAll(f).map(function(k){var M=k.queryKey;return[M,l.setQueryData(M,y,S)]})})},i.getQueryState=function(f,y){var S;return(S=this.queryCache.find(f,y))==null?void 0:S.state},i.removeQueries=function(f,y){var S=Gu(f,y),l=S[0],k=this.queryCache;ji.batch(function(){k.findAll(l).forEach(function(M){k.remove(M)})})},i.resetQueries=function(f,y,S){var l=this,k=Gu(f,y,S),M=k[0],q=k[1],ee=this.queryCache,ke=Yr({},M,{active:!0});return ji.batch(function(){return ee.findAll(M).forEach(function(X){X.reset()}),l.refetchQueries(ke,q)})},i.cancelQueries=function(f,y,S){var l=this,k=Gu(f,y,S),M=k[0],q=k[1],ee=q===void 0?{}:q;typeof ee.revert=="undefined"&&(ee.revert=!0);var ke=ji.batch(function(){return l.queryCache.findAll(M).map(function(X){return X.cancel(ee)})});return Promise.all(ke).then(To).catch(To)},i.invalidateQueries=function(f,y,S){var l,k,M,q=this,ee=Gu(f,y,S),ke=ee[0],X=ee[1],Se=Yr({},ke,{active:(l=(k=ke.refetchActive)!=null?k:ke.active)!=null?l:!0,inactive:(M=ke.refetchInactive)!=null?M:!1});return ji.batch(function(){return q.queryCache.findAll(ke).forEach(function(Me){Me.invalidate()}),q.refetchQueries(Se,X)})},i.refetchQueries=function(f,y,S){var l=this,k=Gu(f,y,S),M=k[0],q=k[1],ee=ji.batch(function(){return l.queryCache.findAll(M).map(function(X){return X.fetch(void 0,Yr({},q,{meta:{refetchPage:M==null?void 0:M.refetchPage}}))})}),ke=Promise.all(ee).then(To);return(q==null?void 0:q.throwOnError)||(ke=ke.catch(To)),ke},i.fetchQuery=function(f,y,S){var l=Eg(f,y,S),k=this.defaultQueryOptions(l);typeof k.retry=="undefined"&&(k.retry=!1);var M=this.queryCache.build(this,k);return M.isStaleByTime(k.staleTime)?M.fetch(k):Promise.resolve(M.state.data)},i.prefetchQuery=function(f,y,S){return this.fetchQuery(f,y,S).then(To).catch(To)},i.fetchInfiniteQuery=function(f,y,S){var l=Eg(f,y,S);return l.behavior=yP(),this.fetchQuery(l)},i.prefetchInfiniteQuery=function(f,y,S){return this.fetchInfiniteQuery(f,y,S).then(To).catch(To)},i.cancelMutations=function(){var f=this,y=ji.batch(function(){return f.mutationCache.getAll().map(function(S){return S.cancel()})});return Promise.all(y).then(To).catch(To)},i.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},i.executeMutation=function(f){return this.mutationCache.build(this,f).execute()},i.getQueryCache=function(){return this.queryCache},i.getMutationCache=function(){return this.mutationCache},i.getDefaultOptions=function(){return this.defaultOptions},i.setDefaultOptions=function(f){this.defaultOptions=f},i.setQueryDefaults=function(f,y){var S=this.queryDefaults.find(function(l){return Ll(f)===Ll(l.queryKey)});S?S.defaultOptions=y:this.queryDefaults.push({queryKey:f,defaultOptions:y})},i.getQueryDefaults=function(f){var y;return f?(y=this.queryDefaults.find(function(S){return cm(f,S.queryKey)}))==null?void 0:y.defaultOptions:void 0},i.setMutationDefaults=function(f,y){var S=this.mutationDefaults.find(function(l){return Ll(f)===Ll(l.mutationKey)});S?S.defaultOptions=y:this.mutationDefaults.push({mutationKey:f,defaultOptions:y})},i.getMutationDefaults=function(f){var y;return f?(y=this.mutationDefaults.find(function(S){return cm(f,S.mutationKey)}))==null?void 0:y.defaultOptions:void 0},i.defaultQueryOptions=function(f){if(f==null?void 0:f._defaulted)return f;var y=Yr({},this.defaultOptions.queries,this.getQueryDefaults(f==null?void 0:f.queryKey),f,{_defaulted:!0});return!y.queryHash&&y.queryKey&&(y.queryHash=Cg(y.queryKey,y)),y},i.defaultQueryObserverOptions=function(f){return this.defaultQueryOptions(f)},i.defaultMutationOptions=function(f){return(f==null?void 0:f._defaulted)?f:Yr({},this.defaultOptions.mutations,this.getMutationDefaults(f==null?void 0:f.mutationKey),f,{_defaulted:!0})},i.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},r}(),gP=SC.unstable_batchedUpdates;ji.setBatchNotifyFunction(gP);var _P=console;lP(_P);var nw=Mc.createContext(void 0),xP=Mc.createContext(!1);function bP(r){return r&&typeof window!="undefined"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=nw),window.ReactQueryClientContext):nw}var FP=function(i){var u=i.client,f=i.contextSharing,y=f===void 0?!1:f,S=i.children;Mc.useEffect(function(){return u.mount(),function(){u.unmount()}},[u]);var l=bP(y);return Mc.createElement(xP.Provider,{value:y},Mc.createElement(l.Provider,{value:u},S))};try{self["workbox:window:6.4.1"]&&_()}catch{}function iw(r,i){return new Promise(function(u){var f=new MessageChannel;f.port1.onmessage=function(y){u(y.data)},r.postMessage(i,[f.port2])})}function wP(r,i){for(var u=0;u<i.length;u++){var f=i[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(r,f.key,f)}}function ow(r,i){(i==null||i>r.length)&&(i=r.length);for(var u=0,f=new Array(i);u<i;u++)f[u]=r[u];return f}function SP(r,i){var u;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(u=function(y,S){if(y){if(typeof y=="string")return ow(y,S);var l=Object.prototype.toString.call(y).slice(8,-1);return l==="Object"&&y.constructor&&(l=y.constructor.name),l==="Map"||l==="Set"?Array.from(y):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?ow(y,S):void 0}}(r))||i&&r&&typeof r.length=="number"){u&&(r=u);var f=0;return function(){return f>=r.length?{done:!0}:{done:!1,value:r[f++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(u=r[Symbol.iterator]()).next.bind(u)}try{self["workbox:core:6.4.1"]&&_()}catch{}var Ig=function(){var r=this;this.promise=new Promise(function(i,u){r.resolve=i,r.reject=u})};function kg(r,i){var u=location.href;return new URL(r,u).href===new URL(i,u).href}var Qh=function(r,i){this.type=r,Object.assign(this,i)};function mm(r,i,u){return u?i?i(r):r:(r&&r.then||(r=Promise.resolve(r)),i?r.then(i):r)}function EP(){}var CP={type:"SKIP_WAITING"};function aw(r,i){if(!i)return r&&r.then?r.then(EP):Promise.resolve()}var BP=function(r){var i,u;function f(k,M){var q,ee;return M===void 0&&(M={}),(q=r.call(this)||this).nn={},q.tn=0,q.rn=new Ig,q.en=new Ig,q.on=new Ig,q.un=0,q.an=new Set,q.cn=function(){var ke=q.fn,X=ke.installing;q.tn>0||!kg(X.scriptURL,q.sn.toString())||performance.now()>q.un+6e4?(q.vn=X,ke.removeEventListener("updatefound",q.cn)):(q.hn=X,q.an.add(X),q.rn.resolve(X)),++q.tn,X.addEventListener("statechange",q.ln)},q.ln=function(ke){var X=q.fn,Se=ke.target,Me=Se.state,Le=Se===q.vn,ue={sw:Se,isExternal:Le,originalEvent:ke};!Le&&q.mn&&(ue.isUpdate=!0),q.dispatchEvent(new Qh(Me,ue)),Me==="installed"?q.wn=self.setTimeout(function(){Me==="installed"&&X.waiting===Se&&q.dispatchEvent(new Qh("waiting",ue))},200):Me==="activating"&&(clearTimeout(q.wn),Le||q.en.resolve(Se))},q.dn=function(ke){var X=q.hn,Se=X!==navigator.serviceWorker.controller;q.dispatchEvent(new Qh("controlling",{isExternal:Se,originalEvent:ke,sw:X,isUpdate:q.mn})),Se||q.on.resolve(X)},q.gn=(ee=function(ke){var X=ke.data,Se=ke.ports,Me=ke.source;return mm(q.getSW(),function(){q.an.has(Me)&&q.dispatchEvent(new Qh("message",{data:X,originalEvent:ke,ports:Se,sw:Me}))})},function(){for(var ke=[],X=0;X<arguments.length;X++)ke[X]=arguments[X];try{return Promise.resolve(ee.apply(this,ke))}catch(Se){return Promise.reject(Se)}}),q.sn=k,q.nn=M,navigator.serviceWorker.addEventListener("message",q.gn),q}u=r,(i=f).prototype=Object.create(u.prototype),i.prototype.constructor=i,i.__proto__=u;var y,S,l=f.prototype;return l.register=function(k){var M=(k===void 0?{}:k).immediate,q=M!==void 0&&M;try{var ee=this;return function(ke,X){var Se=ke();return Se&&Se.then?Se.then(X):X(Se)}(function(){if(!q&&document.readyState!=="complete")return aw(new Promise(function(ke){return window.addEventListener("load",ke)}))},function(){return ee.mn=Boolean(navigator.serviceWorker.controller),ee.yn=ee.pn(),mm(ee.bn(),function(ke){ee.fn=ke,ee.yn&&(ee.hn=ee.yn,ee.en.resolve(ee.yn),ee.on.resolve(ee.yn),ee.yn.addEventListener("statechange",ee.ln,{once:!0}));var X=ee.fn.waiting;return X&&kg(X.scriptURL,ee.sn.toString())&&(ee.hn=X,Promise.resolve().then(function(){ee.dispatchEvent(new Qh("waiting",{sw:X,wasWaitingBeforeRegister:!0}))}).then(function(){})),ee.hn&&(ee.rn.resolve(ee.hn),ee.an.add(ee.hn)),ee.fn.addEventListener("updatefound",ee.cn),navigator.serviceWorker.addEventListener("controllerchange",ee.dn),ee.fn})})}catch(ke){return Promise.reject(ke)}},l.update=function(){try{return this.fn?aw(this.fn.update()):void 0}catch(k){return Promise.reject(k)}},l.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},l.messageSW=function(k){try{return mm(this.getSW(),function(M){return iw(M,k)})}catch(M){return Promise.reject(M)}},l.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&iw(this.fn.waiting,CP)},l.pn=function(){var k=navigator.serviceWorker.controller;return k&&kg(k.scriptURL,this.sn.toString())?k:void 0},l.bn=function(){try{var k=this;return function(M,q){try{var ee=M()}catch(ke){return q(ke)}return ee&&ee.then?ee.then(void 0,q):ee}(function(){return mm(navigator.serviceWorker.register(k.sn,k.nn),function(M){return k.un=performance.now(),M})},function(M){throw M})}catch(M){return Promise.reject(M)}},y=f,(S=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&wP(y.prototype,S),f}(function(){function r(){this.Pn=new Map}var i=r.prototype;return i.addEventListener=function(u,f){this.Sn(u).add(f)},i.removeEventListener=function(u,f){this.Sn(u).delete(f)},i.dispatchEvent=function(u){u.target=this;for(var f,y=SP(this.Sn(u.type));!(f=y()).done;)(0,f.value)(u)},i.Sn=function(u){return this.Pn.has(u)||this.Pn.set(u,new Set),this.Pn.get(u)},r}());export{TP as F,IP as M,AP as P,RP as Q,SC as R,PP as a,v0 as b,zP as c,OP as d,DP as e,LP as f,FP as g,J2 as j,kP as m,Si as r,MP as u,BP as v};
