var Lc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function J2(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Si={exports:{}},Ur={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var a0=Object.getOwnPropertySymbols,Y2=Object.prototype.hasOwnProperty,Q2=Object.prototype.propertyIsEnumerable;function eS(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function tS(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var n={},u=0;u<10;u++)n["_"+String.fromCharCode(u)]=u;var f=Object.getOwnPropertyNames(n).map(function(w){return n[w]});if(f.join("")!=="0123456789")return!1;var y={};return"abcdefghijklmnopqrst".split("").forEach(function(w){y[w]=w}),Object.keys(Object.assign({},y)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var s0=tS()?Object.assign:function(r,n){for(var u,f=eS(r),y,w=1;w<arguments.length;w++){u=Object(arguments[w]);for(var l in u)Y2.call(u,l)&&(f[l]=u[l]);if(a0){y=a0(u);for(var I=0;I<y.length;I++)Q2.call(u,y[I])&&(f[y[I]]=u[y[I]])}}return f};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry=s0,Dc=60103,u0=60106;Ur.Fragment=60107;Ur.StrictMode=60108;Ur.Profiler=60114;var l0=60109,c0=60110,p0=60112;Ur.Suspense=60113;var h0=60115,f0=60116;if(typeof Symbol=="function"&&Symbol.for){var Ja=Symbol.for;Dc=Ja("react.element"),u0=Ja("react.portal"),Ur.Fragment=Ja("react.fragment"),Ur.StrictMode=Ja("react.strict_mode"),Ur.Profiler=Ja("react.profiler"),l0=Ja("react.provider"),c0=Ja("react.context"),p0=Ja("react.forward_ref"),Ur.Suspense=Ja("react.suspense"),h0=Ja("react.memo"),f0=Ja("react.lazy")}var d0=typeof Symbol=="function"&&Symbol.iterator;function rS(r){return r===null||typeof r!="object"?null:(r=d0&&r[d0]||r["@@iterator"],typeof r=="function"?r:null)}function Jp(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)n+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y0={};function Oc(r,n,u){this.props=r,this.context=n,this.refs=y0,this.updater=u||m0}Oc.prototype.isReactComponent={};Oc.prototype.setState=function(r,n){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error(Jp(85));this.updater.enqueueSetState(this,r,n,"setState")};Oc.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function v0(){}v0.prototype=Oc.prototype;function ny(r,n,u){this.props=r,this.context=n,this.refs=y0,this.updater=u||m0}var iy=ny.prototype=new v0;iy.constructor=ny;ry(iy,Oc.prototype);iy.isPureReactComponent=!0;var oy={current:null},g0=Object.prototype.hasOwnProperty,_0={key:!0,ref:!0,__self:!0,__source:!0};function x0(r,n,u){var f,y={},w=null,l=null;if(n!=null)for(f in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(w=""+n.key),n)g0.call(n,f)&&!_0.hasOwnProperty(f)&&(y[f]=n[f]);var I=arguments.length-2;if(I===1)y.children=u;else if(1<I){for(var M=Array(I),j=0;j<I;j++)M[j]=arguments[j+2];y.children=M}if(r&&r.defaultProps)for(f in I=r.defaultProps,I)y[f]===void 0&&(y[f]=I[f]);return{$$typeof:Dc,type:r,key:w,ref:l,props:y,_owner:oy.current}}function nS(r,n){return{$$typeof:Dc,type:r.type,key:n,ref:r.ref,props:r.props,_owner:r._owner}}function ay(r){return typeof r=="object"&&r!==null&&r.$$typeof===Dc}function iS(r){var n={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(u){return n[u]})}var b0=/\/+/g;function sy(r,n){return typeof r=="object"&&r!==null&&r.key!=null?iS(""+r.key):n.toString(36)}function Vf(r,n,u,f,y){var w=typeof r;(w==="undefined"||w==="boolean")&&(r=null);var l=!1;if(r===null)l=!0;else switch(w){case"string":case"number":l=!0;break;case"object":switch(r.$$typeof){case Dc:case u0:l=!0}}if(l)return l=r,y=y(l),r=f===""?"."+sy(l,0):f,Array.isArray(y)?(u="",r!=null&&(u=r.replace(b0,"$&/")+"/"),Vf(y,n,u,"",function(j){return j})):y!=null&&(ay(y)&&(y=nS(y,u+(!y.key||l&&l.key===y.key?"":(""+y.key).replace(b0,"$&/")+"/")+r)),n.push(y)),1;if(l=0,f=f===""?".":f+":",Array.isArray(r))for(var I=0;I<r.length;I++){w=r[I];var M=f+sy(w,I);l+=Vf(w,n,u,M,y)}else if(M=rS(r),typeof M=="function")for(r=M.call(r),I=0;!(w=r.next()).done;)w=w.value,M=f+sy(w,I++),l+=Vf(w,n,u,M,y);else if(w==="object")throw n=""+r,Error(Jp(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n));return l}function qf(r,n,u){if(r==null)return r;var f=[],y=0;return Vf(r,f,"","",function(w){return n.call(u,w,y++)}),f}function oS(r){if(r._status===-1){var n=r._result;n=n(),r._status=0,r._result=n,n.then(function(u){r._status===0&&(u=u.default,r._status=1,r._result=u)},function(u){r._status===0&&(r._status=2,r._result=u)})}if(r._status===1)return r._result;throw r._result}var w0={current:null};function tu(){var r=w0.current;if(r===null)throw Error(Jp(321));return r}var aS={ReactCurrentDispatcher:w0,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:oy,IsSomeRendererActing:{current:!1},assign:ry};Ur.Children={map:qf,forEach:function(r,n,u){qf(r,function(){n.apply(this,arguments)},u)},count:function(r){var n=0;return qf(r,function(){n++}),n},toArray:function(r){return qf(r,function(n){return n})||[]},only:function(r){if(!ay(r))throw Error(Jp(143));return r}};Ur.Component=Oc;Ur.PureComponent=ny;Ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aS;Ur.cloneElement=function(r,n,u){if(r==null)throw Error(Jp(267,r));var f=ry({},r.props),y=r.key,w=r.ref,l=r._owner;if(n!=null){if(n.ref!==void 0&&(w=n.ref,l=oy.current),n.key!==void 0&&(y=""+n.key),r.type&&r.type.defaultProps)var I=r.type.defaultProps;for(M in n)g0.call(n,M)&&!_0.hasOwnProperty(M)&&(f[M]=n[M]===void 0&&I!==void 0?I[M]:n[M])}var M=arguments.length-2;if(M===1)f.children=u;else if(1<M){I=Array(M);for(var j=0;j<M;j++)I[j]=arguments[j+2];f.children=I}return{$$typeof:Dc,type:r.type,key:y,ref:w,props:f,_owner:l}};Ur.createContext=function(r,n){return n===void 0&&(n=null),r={$$typeof:c0,_calculateChangedBits:n,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null},r.Provider={$$typeof:l0,_context:r},r.Consumer=r};Ur.createElement=x0;Ur.createFactory=function(r){var n=x0.bind(null,r);return n.type=r,n};Ur.createRef=function(){return{current:null}};Ur.forwardRef=function(r){return{$$typeof:p0,render:r}};Ur.isValidElement=ay;Ur.lazy=function(r){return{$$typeof:f0,_payload:{_status:-1,_result:r},_init:oS}};Ur.memo=function(r,n){return{$$typeof:h0,type:r,compare:n===void 0?null:n}};Ur.useCallback=function(r,n){return tu().useCallback(r,n)};Ur.useContext=function(r,n){return tu().useContext(r,n)};Ur.useDebugValue=function(){};Ur.useEffect=function(r,n){return tu().useEffect(r,n)};Ur.useImperativeHandle=function(r,n,u){return tu().useImperativeHandle(r,n,u)};Ur.useLayoutEffect=function(r,n){return tu().useLayoutEffect(r,n)};Ur.useMemo=function(r,n){return tu().useMemo(r,n)};Ur.useReducer=function(r,n,u){return tu().useReducer(r,n,u)};Ur.useRef=function(r){return tu().useRef(r)};Ur.useState=function(r){return tu().useState(r)};Ur.version="17.0.2";Si.exports=Ur;var Rc=Si.exports,Zf={exports:{}},Yp={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sS=Si.exports,S0=60103;Yp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var E0=Symbol.for;S0=E0("react.element"),Yp.Fragment=E0("react.fragment")}var uS=sS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lS=Object.prototype.hasOwnProperty,cS={key:!0,ref:!0,__self:!0,__source:!0};function T0(r,n,u){var f,y={},w=null,l=null;u!==void 0&&(w=""+u),n.key!==void 0&&(w=""+n.key),n.ref!==void 0&&(l=n.ref);for(f in n)lS.call(n,f)&&!cS.hasOwnProperty(f)&&(y[f]=n[f]);if(r&&r.defaultProps)for(f in n=r.defaultProps,n)y[f]===void 0&&(y[f]=n[f]);return{$$typeof:S0,type:r,key:w,ref:l,props:y,_owner:uS.current}}Yp.jsx=T0;Yp.jsxs=T0;Zf.exports=Yp;const pS=Zf.exports.jsx,tC=Zf.exports.jsxs,rC=Zf.exports.Fragment;var P0={exports:{}};(function(r,n){(function(u,f){r.exports=f()})(Lc,function(){var u,f,y;function w(l,I){if(!u)u=I;else if(!f)f=I;else{var M="var sharedChunk = {}; ("+u+")(sharedChunk); ("+f+")(sharedChunk);",j={};u(j),y=I(j),typeof window!="undefined"&&(y.workerUrl=window.URL.createObjectURL(new Blob([M],{type:"text/javascript"})))}}return w(["exports"],function(l){function I(e,t){return e(t={exports:{}},t.exports),t.exports}var M=j;function j(e,t,i,c){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(c-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=c,this.p2x=i,this.p2y=c}j.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},j.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},j.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},j.prototype.solveCurveX=function(e,t){var i,c,h,d,v;for(t===void 0&&(t=1e-6),h=e,v=0;v<8;v++){if(d=this.sampleCurveX(h)-e,Math.abs(d)<t)return h;var b=this.sampleCurveDerivativeX(h);if(Math.abs(b)<1e-6)break;h-=d/b}if((h=e)<(i=0))return i;if(h>(c=1))return c;for(;i<c;){if(d=this.sampleCurveX(h),Math.abs(d-e)<t)return h;e>d?i=h:c=h,h=.5*(c-i)+i}return h},j.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var ee=Ce;function Ce(e,t){this.x=e,this.y=t}Ce.prototype={clone:function(){return new Ce(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),c=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),c=Math.sin(e),h=t.y+c*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-c*(this.y-t.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ce.convert=function(e){return e instanceof Ce?e:Array.isArray(e)?new Ce(e[0],e[1]):e};var W=typeof self!="undefined"?self:{},xe=Math.pow(2,53)-1;function Le(e,t,i,c){var h=new M(e,t,i,c);return function(d){return h.solve(d)}}var De=Le(.25,.1,.25,1);function se(e,t,i){return Math.min(i,Math.max(t,e))}function re(e,t,i){var c=i-t,h=((e-t)%c+c)%c+t;return h===t?i:h}function oe(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var c=0,h=t;c<h.length;c+=1){var d=h[c];for(var v in d)e[v]=d[v]}return e}var be=1;function Re(){return be++}function Me(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Ie(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function je(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function at(e,t){return e.indexOf(t,e.length-t.length)!==-1}function Xe(e,t,i){var c={};for(var h in e)c[h]=t.call(i||this,e[h],h,e);return c}function _t(e,t,i){var c={};for(var h in e)t.call(i||this,e[h],h,e)&&(c[h]=e[h]);return c}function Mt(e){return Array.isArray(e)?e.map(Mt):typeof e=="object"&&e?Xe(e,Mt):e}var bt={};function Ct(e){bt[e]||(typeof console!="undefined"&&console.warn(e),bt[e]=!0)}function Ut(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function Cr(e){for(var t=0,i=0,c=e.length,h=c-1,d=void 0,v=void 0;i<c;h=i++)t+=((v=e[h]).x-(d=e[i]).x)*(d.y+v.y);return t}function Ir(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Fn(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(c,h,d,v){var b=d||v;return t[h]=!b||b.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var Qt=null;function Bn(e){if(Qt==null){var t=e.navigator?e.navigator.userAgent:null;Qt=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Qt}function Gt(e){try{var t=W[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var Ye,zt,Xt,Rr,Gr=W.performance&&W.performance.now?W.performance.now.bind(W.performance):Date.now.bind(Date),fo=W.requestAnimationFrame||W.mozRequestAnimationFrame||W.webkitRequestAnimationFrame||W.msRequestAnimationFrame,en=W.cancelAnimationFrame||W.mozCancelAnimationFrame||W.webkitCancelAnimationFrame||W.msCancelAnimationFrame,si={now:Gr,frame:function(e){var t=fo(e);return{cancel:function(){return en(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=W.document.createElement("canvas"),c=i.getContext("2d");if(!c)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,c.drawImage(e,0,0,e.width,e.height),c.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return Ye||(Ye=W.document.createElement("a")),Ye.href=e,Ye.href},hardwareConcurrency:W.navigator&&W.navigator.hardwareConcurrency||4,get devicePixelRatio(){return W.devicePixelRatio},get prefersReducedMotion(){return!!W.matchMedia&&(zt==null&&(zt=W.matchMedia("(prefers-reduced-motion: reduce)")),zt.matches)}},cr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Io={supported:!1,testSupport:function(e){!rs&&Rr&&(Hn?er(e):Xt=e)}},rs=!1,Hn=!1;function er(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Rr),e.isContextLost())return;Io.supported=!0}catch{}e.deleteTexture(t),rs=!0}W.document&&((Rr=W.document.createElement("img")).onload=function(){Xt&&er(Xt),Xt=null,Hn=!0},Rr.onerror=function(){rs=!0,Xt=null},Rr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Vi="01",on=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function An(e){return e.indexOf("mapbox:")===0}on.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Vi,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},on.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},on.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},on.prototype.normalizeStyleURL=function(e,t){if(!An(e))return e;var i=cn(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},on.prototype.normalizeGlyphsURL=function(e,t){if(!An(e))return e;var i=cn(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},on.prototype.normalizeSourceURL=function(e,t){if(!An(e))return e;var i=cn(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},on.prototype.normalizeSpriteURL=function(e,t,i,c){var h=cn(e);return An(e)?(h.path="/styles/v1"+h.path+"/sprite"+t+i,this._makeAPIURL(h,this._customAccessToken||c)):(h.path+=""+t+i,za(h))},on.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!An(e))return e;var i=cn(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(si.devicePixelRatio>=2||t===512?"@2x":"")+(Io.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var c=this._customAccessToken||function(h){for(var d=0,v=h;d<v.length;d+=1){var b=v[d].match(/^access_token=(.*)$/);if(b)return b[1]}return null}(i.params)||cr.ACCESS_TOKEN;return cr.REQUIRE_ACCESS_TOKEN&&c&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,c)},on.prototype.canonicalizeTileURL=function(e,t){var i=cn(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var c="mapbox://tiles/";c+=i.path.replace("/v4/","");var h=i.params;return t&&(h=h.filter(function(d){return!d.match(/^access_token=/)})),h.length&&(c+="?"+h.join("&")),c},on.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&An(t),c=[],h=0,d=e.tiles||[];h<d.length;h+=1){var v=d[h];qi(v)?c.push(this.canonicalizeTileURL(v,i)):c.push(v)}return c},on.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",c=cn(cr.API_URL);if(e.protocol=c.protocol,e.authority=c.authority,e.protocol==="http"){var h=e.params.indexOf("secure");h>=0&&e.params.splice(h,1)}if(c.path!=="/"&&(e.path=""+c.path+e.path),!cr.REQUIRE_ACCESS_TOKEN)return za(e);if(!(t=t||cr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),za(e)};var Xu=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function qi(e){return Xu.test(e)}var As=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function cn(e){var t=e.match(As);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function za(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function ko(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(W.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ci=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ci.prototype.getStorageKey=function(e){var t,i=ko(cr.ACCESS_TOKEN);return t=i&&i.u?W.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(c,h){return String.fromCharCode(Number("0x"+h))})):cr.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},Ci.prototype.fetchEventData=function(){var e=Gt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var c=W.localStorage.getItem(t);c&&(this.eventData=JSON.parse(c));var h=W.localStorage.getItem(i);h&&(this.anonId=h)}catch{Ct("Unable to read from LocalStorage")}},Ci.prototype.saveEventData=function(){var e=Gt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{W.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&W.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Ct("Unable to write to LocalStorage")}},Ci.prototype.processRequests=function(e){},Ci.prototype.postEvent=function(e,t,i,c){var h=this;if(cr.EVENTS_URL){var d=cn(cr.EVENTS_URL);d.params.push("access_token="+(c||cr.ACCESS_TOKEN||""));var v={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:Vi,userId:this.anonId},b=t?oe(v,t):v,T={url:za(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=zr(T,function(C){h.pendingRequest=null,i(C),h.saveEventData(),h.processRequests(c)})}},Ci.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var mi,ca,Zi=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,c,h,d){this.skuToken=h,(cr.EVENTS_URL&&d||cr.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(v){return An(v)||qi(v)}))&&this.queueRequest({id:c,timestamp:Date.now()},d)},t.prototype.processRequests=function(i){var c=this;if(!this.pendingRequest&&this.queue.length!==0){var h=this.queue.shift(),d=h.id,v=h.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),Ie(this.anonId)||(this.anonId=Me()),this.postEvent(v,{skuToken:this.skuToken},function(b){b||d&&(c.success[d]=!0)},i))}},t}(Ci),Ms=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,c){cr.EVENTS_URL&&cr.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(h){return An(h)||qi(h)})&&this.queueRequest(Date.now(),c)},t.prototype.processRequests=function(i){var c=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var h=ko(cr.ACCESS_TOKEN),d=h?h.u:cr.ACCESS_TOKEN,v=d!==this.eventData.tokenU;Ie(this.anonId)||(this.anonId=Me(),v=!0);var b=this.queue.shift();if(this.eventData.lastSuccess){var T=new Date(this.eventData.lastSuccess),C=new Date(b),A=(b-this.eventData.lastSuccess)/864e5;v=v||A>=1||A<-1||T.getDate()!==C.getDate()}else v=!0;if(!v)return this.processRequests();this.postEvent(b,{"enabled.telemetry":!1},function(z){z||(c.eventData.lastSuccess=b,c.eventData.tokenU=d)},i)}},t}(Ci)),ns=Ms.postTurnstileEvent.bind(Ms),La=new Zi,Mn=La.postMapLoadEvent.bind(La),Gi=500,Wi=50;function Xn(){W.caches&&!mi&&(mi=W.caches.open("mapbox-tiles"))}function zs(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var Ao,Un=1/0;function tr(){return Ao==null&&(Ao=W.OffscreenCanvas&&new W.OffscreenCanvas(1,1).getContext("2d")&&typeof W.createImageBitmap=="function"),Ao}var Ls={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ls);var uu=function(e){function t(i,c,h){c===401&&qi(h)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=c,this.url=h,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Da=Ir()?function(){return self.worker&&self.worker.referrer}:function(){return(W.location.protocol==="blob:"?W.parent:W).location.href},$i,$o,Mr=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Da())&&!/^\w+:/.test(i))){if(W.fetch&&W.Request&&W.AbortController&&W.Request.prototype.hasOwnProperty("signal"))return function(c,h){var d,v=new W.AbortController,b=new W.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:Da(),signal:v.signal}),T=!1,C=!1,A=(d=b.url).indexOf("sku=")>0&&qi(d);c.type==="json"&&b.headers.set("Accept","application/json");var z=function(U,H,K){if(!C){if(U&&U.message!=="SecurityError"&&Ct(U),H&&K)return R(H);var ae=Date.now();W.fetch(b).then(function(te){if(te.ok){var he=A?te.clone():null;return R(te,he,ae)}return h(new uu(te.statusText,te.status,c.url))}).catch(function(te){te.code!==20&&h(new Error(te.message))})}},R=function(U,H,K){(c.type==="arrayBuffer"?U.arrayBuffer():c.type==="json"?U.json():U.text()).then(function(ae){C||(H&&K&&function(te,he,ge){if(Xn(),mi){var we={status:he.status,statusText:he.statusText,headers:new W.Headers};he.headers.forEach(function(Fe,Ze){return we.headers.set(Ze,Fe)});var Te=Fn(he.headers.get("Cache-Control")||"");Te["no-store"]||(Te["max-age"]&&we.headers.set("Expires",new Date(ge+1e3*Te["max-age"]).toUTCString()),new Date(we.headers.get("Expires")).getTime()-ge<42e4||function(Fe,Ze){if(ca===void 0)try{new Response(new ReadableStream),ca=!0}catch{ca=!1}ca?Ze(Fe.body):Fe.blob().then(Ze)}(he,function(Fe){var Ze=new W.Response(Fe,we);Xn(),mi&&mi.then(function(Ke){return Ke.put(zs(te.url),Ze)}).catch(function(Ke){return Ct(Ke.message)})}))}}(b,H,K),T=!0,h(null,ae,U.headers.get("Cache-Control"),U.headers.get("Expires")))}).catch(function(ae){C||h(new Error(ae.message))})};return A?function(U,H){if(Xn(),!mi)return H(null);var K=zs(U.url);mi.then(function(ae){ae.match(K).then(function(te){var he=function(ge){if(!ge)return!1;var we=new Date(ge.headers.get("Expires")||0),Te=Fn(ge.headers.get("Cache-Control")||"");return we>Date.now()&&!Te["no-cache"]}(te);ae.delete(K),he&&ae.put(K,te.clone()),H(null,te,he)}).catch(H)}).catch(H)}(b,z):z(null,null),{cancel:function(){C=!0,T||v.abort()}}}(e,t);if(Ir()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(c,h){var d=new W.XMLHttpRequest;for(var v in d.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(d.responseType="arraybuffer"),c.headers)d.setRequestHeader(v,c.headers[v]);return c.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=c.credentials==="include",d.onerror=function(){h(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var b=d.response;if(c.type==="json")try{b=JSON.parse(d.response)}catch(T){return h(T)}h(null,b,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else h(new uu(d.statusText,d.status,c.url))},d.send(c.body),{cancel:function(){return d.abort()}}}(e,t)},is=function(e,t){return Mr(oe(e,{type:"arrayBuffer"}),t)},zr=function(e,t){return Mr(oe(e,{method:"POST"}),t)},L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";$i=[],$o=0;var O=function(e,t){if(Io.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),$o>=cr.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return $i.push(i),i}$o++;var c=!1,h=function(){if(!c)for(c=!0,$o--;$i.length&&$o<cr.MAX_PARALLEL_IMAGE_REQUESTS;){var v=$i.shift();v.cancelled||(v.cancel=O(v.requestParameters,v.callback).cancel)}},d=is(e,function(v,b,T,C){h(),v?t(v):b&&(tr()?function(A,z){var R=new W.Blob([new Uint8Array(A)],{type:"image/png"});W.createImageBitmap(R).then(function(U){z(null,U)}).catch(function(U){z(new Error("Could not load image because of "+U.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(b,t):function(A,z,R,U){var H=new W.Image,K=W.URL;H.onload=function(){z(null,H),K.revokeObjectURL(H.src),H.onload=null,W.requestAnimationFrame(function(){H.src=L})},H.onerror=function(){return z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ae=new W.Blob([new Uint8Array(A)],{type:"image/png"});H.cacheControl=R,H.expires=U,H.src=A.byteLength?K.createObjectURL(ae):L}(b,t,T,C))});return{cancel:function(){d.cancel(),h()}}};function B(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function G(e,t,i){if(i&&i[e]){var c=i[e].indexOf(t);c!==-1&&i[e].splice(c,1)}}var X=function(e,t){t===void 0&&(t={}),oe(this,t),this.type=e},ue=function(e){function t(i,c){c===void 0&&(c={}),e.call(this,"error",oe({error:i},c))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(X),pe=function(){};pe.prototype.on=function(e,t){return this._listeners=this._listeners||{},B(e,t,this._listeners),this},pe.prototype.off=function(e,t){return G(e,t,this._listeners),G(e,t,this._oneTimeListeners),this},pe.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},B(e,t,this._oneTimeListeners),this},pe.prototype.fire=function(e,t){typeof e=="string"&&(e=new X(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var c=0,h=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];c<h.length;c+=1)h[c].call(this,e);for(var d=0,v=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<v.length;d+=1){var b=v[d];G(i,b,this._oneTimeListeners),b.call(this,e)}var T=this._eventedParent;T&&(oe(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(e))}else e instanceof ue&&console.error(e.error);return this},pe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},pe.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var V={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Q=function(e,t,i,c){this.message=(e?e+": ":"")+i,c&&(this.identifier=c),t!=null&&t.__line__&&(this.line=t.__line__)};function me(e){var t=e.value;return t?[new Q(e.key,t,"constants have been deprecated as of v8")]:[]}function Ue(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var c=0,h=t;c<h.length;c+=1){var d=h[c];for(var v in d)e[v]=d[v]}return e}function qe(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Pe(e){if(Array.isArray(e))return e.map(Pe);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=Pe(e[i]);return t}return qe(e)}var Ve=function(e){function t(i,c){e.call(this,c),this.message=c,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),pt=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,c=t;i<c.length;i+=1){var h=c[i];this.bindings[h[0]]=h[1]}};pt.prototype.concat=function(e){return new pt(this,e)},pt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},pt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var st={kind:"null"},Ae={kind:"number"},tt={kind:"string"},Je={kind:"boolean"},Qe={kind:"color"},Wt={kind:"object"},rt={kind:"value"},or={kind:"collator"},kr={kind:"formatted"},Rt={kind:"resolvedImage"};function hr(e,t){return{kind:"array",itemType:e,N:t}}function ur(e){if(e.kind==="array"){var t=ur(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var Nn=[st,Ae,tt,Je,Qe,kr,Wt,hr(rt),Rt];function vr(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!vr(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,c=Nn;i<c.length;i+=1)if(!vr(c[i],t))return null}}return"Expected "+ur(e)+" but found "+ur(t)+" instead."}function tn(e,t){return t.some(function(i){return i.kind===e.kind})}function Sr(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Dt=I(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function c(b){return(b=Math.round(b))<0?0:b>255?255:b}function h(b){return c(b[b.length-1]==="%"?parseFloat(b)/100*255:parseInt(b))}function d(b){return(T=b[b.length-1]==="%"?parseFloat(b)/100:parseFloat(b))<0?0:T>1?1:T;var T}function v(b,T,C){return C<0?C+=1:C>1&&(C-=1),6*C<1?b+(T-b)*C*6:2*C<1?T:3*C<2?b+(T-b)*(2/3-C)*6:b}try{t.parseCSSColor=function(b){var T,C=b.replace(/ /g,"").toLowerCase();if(C in i)return i[C].slice();if(C[0]==="#")return C.length===4?(T=parseInt(C.substr(1),16))>=0&&T<=4095?[(3840&T)>>4|(3840&T)>>8,240&T|(240&T)>>4,15&T|(15&T)<<4,1]:null:C.length===7&&(T=parseInt(C.substr(1),16))>=0&&T<=16777215?[(16711680&T)>>16,(65280&T)>>8,255&T,1]:null;var A=C.indexOf("("),z=C.indexOf(")");if(A!==-1&&z+1===C.length){var R=C.substr(0,A),U=C.substr(A+1,z-(A+1)).split(","),H=1;switch(R){case"rgba":if(U.length!==4)return null;H=d(U.pop());case"rgb":return U.length!==3?null:[h(U[0]),h(U[1]),h(U[2]),H];case"hsla":if(U.length!==4)return null;H=d(U.pop());case"hsl":if(U.length!==3)return null;var K=(parseFloat(U[0])%360+360)%360/360,ae=d(U[1]),te=d(U[2]),he=te<=.5?te*(ae+1):te+ae-te*ae,ge=2*te-he;return[c(255*v(ge,he,K+1/3)),c(255*v(ge,he,K)),c(255*v(ge,he,K-1/3)),H];default:return null}}return null}}catch{}}).parseCSSColor,fr=function(e,t,i,c){c===void 0&&(c=1),this.r=e,this.g=t,this.b=i,this.a=c};fr.parse=function(e){if(e){if(e instanceof fr)return e;if(typeof e=="string"){var t=Dt(e);if(t)return new fr(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},fr.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],c=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+c+")"},fr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},fr.black=new fr(0,0,0,1),fr.white=new fr(1,1,1,1),fr.transparent=new fr(0,0,0,0),fr.red=new fr(1,0,0,1);var ui=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ui.prototype.compare=function(e,t){return this.collator.compare(e,t)},ui.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Hi=function(e,t,i,c,h){this.text=e,this.image=t,this.scale=i,this.fontStack=c,this.textColor=h},Nr=function(e){this.sections=e};Nr.fromString=function(e){return new Nr([new Hi(e,null,null,null,null)])},Nr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Nr.factory=function(e){return e instanceof Nr?e:Nr.fromString(e)},Nr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Nr.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var c=i[t];if(c.image)e.push(["image",c.image.name]);else{e.push(c.text);var h={};c.fontStack&&(h["text-font"]=["literal",c.fontStack.split(",")]),c.scale&&(h["font-scale"]=c.scale),c.textColor&&(h["text-color"]=["rgba"].concat(c.textColor.toArray())),e.push(h)}}return e};var Kn=function(e){this.name=e.name,this.available=e.available};function Ho(e,t,i,c){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:"Invalid rgba value ["+[e,t,i,c].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof c=="number"?[e,t,i,c]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function mo(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof fr||e instanceof ui||e instanceof Nr||e instanceof Kn)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!mo(i[t]))return!1;return!0}if(typeof e=="object"){for(var c in e)if(!mo(e[c]))return!1;return!0}return!1}function rn(e){if(e===null)return st;if(typeof e=="string")return tt;if(typeof e=="boolean")return Je;if(typeof e=="number")return Ae;if(e instanceof fr)return Qe;if(e instanceof ui)return or;if(e instanceof Nr)return kr;if(e instanceof Kn)return Rt;if(Array.isArray(e)){for(var t,i=e.length,c=0,h=e;c<h.length;c+=1){var d=rn(h[c]);if(t){if(t===d)continue;t=rt;break}t=d}return hr(t||rt,i)}return Wt}function Ds(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof fr||e instanceof Nr||e instanceof Kn?e.toString():JSON.stringify(e)}Kn.prototype.toString=function(){return this.name},Kn.fromString=function(e){return e?new Kn({name:e,available:!1}):null},Kn.prototype.serialize=function(){return["image",this.name]};var ii=function(e,t){this.type=e,this.value=t};ii.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!mo(e[1]))return t.error("invalid value");var i=e[1],c=rn(i),h=t.expectedType;return c.kind!=="array"||c.N!==0||!h||h.kind!=="array"||typeof h.N=="number"&&h.N!==0||(c=h),new ii(c,i)},ii.prototype.evaluate=function(){return this.value},ii.prototype.eachChild=function(){},ii.prototype.outputDefined=function(){return!0},ii.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof fr?["rgba"].concat(this.value.toArray()):this.value instanceof Nr?this.value.serialize():this.value};var zn=function(e){this.name="ExpressionEvaluationError",this.message=e};zn.prototype.toJSON=function(){return this.message};var Ii={string:tt,number:Ae,boolean:Je,object:Wt},Vr=function(e,t){this.type=e,this.args=t};Vr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,c=1,h=e[0];if(h==="array"){var d,v;if(e.length>2){var b=e[1];if(typeof b!="string"||!(b in Ii)||b==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=Ii[b],c++}else d=rt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);v=e[2],c++}i=hr(d,v)}else i=Ii[h];for(var T=[];c<e.length;c++){var C=t.parse(e[c],c,rt);if(!C)return null;T.push(C)}return new Vr(i,T)},Vr.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!vr(this.type,rn(i)))return i;if(t===this.args.length-1)throw new zn("Expected value to be of type "+ur(this.type)+", but found "+ur(rn(i))+" instead.")}return null},Vr.prototype.eachChild=function(e){this.args.forEach(e)},Vr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Vr.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var c=e.N;(typeof c=="number"||this.args.length>1)&&t.push(c)}}return t.concat(this.args.map(function(h){return h.serialize()}))};var yo=function(e){this.type=kr,this.sections=e};yo.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var c=[],h=!1,d=1;d<=e.length-1;++d){var v=e[d];if(h&&typeof v=="object"&&!Array.isArray(v)){h=!1;var b=null;if(v["font-scale"]&&!(b=t.parse(v["font-scale"],1,Ae)))return null;var T=null;if(v["text-font"]&&!(T=t.parse(v["text-font"],1,hr(tt))))return null;var C=null;if(v["text-color"]&&!(C=t.parse(v["text-color"],1,Qe)))return null;var A=c[c.length-1];A.scale=b,A.font=T,A.textColor=C}else{var z=t.parse(e[d],1,rt);if(!z)return null;var R=z.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");h=!0,c.push({content:z,scale:null,font:null,textColor:null})}}return new yo(c)},yo.prototype.evaluate=function(e){return new Nr(this.sections.map(function(t){var i=t.content.evaluate(e);return rn(i)===Rt?new Hi("",i,null,null,null):new Hi(Ds(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},yo.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var c=i[t];e(c.content),c.scale&&e(c.scale),c.font&&e(c.font),c.textColor&&e(c.textColor)}},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var c=i[t];e.push(c.content.serialize());var h={};c.scale&&(h["font-scale"]=c.scale.serialize()),c.font&&(h["text-font"]=c.font.serialize()),c.textColor&&(h["text-color"]=c.textColor.serialize()),e.push(h)}return e};var ki=function(e){this.type=Rt,this.input=e};ki.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,tt);return i?new ki(i):t.error("No image name provided.")},ki.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=Kn.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},ki.prototype.eachChild=function(e){e(this.input)},ki.prototype.outputDefined=function(){return!1},ki.prototype.serialize=function(){return["image",this.input.serialize()]};var Ul={"to-boolean":Je,"to-color":Qe,"to-number":Ae,"to-string":tt},Ai=function(e,t){this.type=e,this.args=t};Ai.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var c=Ul[i],h=[],d=1;d<e.length;d++){var v=t.parse(e[d],d,rt);if(!v)return null;h.push(v)}return new Ai(c,h)},Ai.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var t,i,c=0,h=this.args;c<h.length;c+=1){if(i=null,(t=h[c].evaluate(e))instanceof fr)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Ho(t[0],t[1],t[2],t[3])))return new fr(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new zn(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var v=null,b=0,T=this.args;b<T.length;b+=1){if((v=T[b].evaluate(e))===null)return 0;var C=Number(v);if(!isNaN(C))return C}throw new zn("Could not convert "+JSON.stringify(v)+" to number.")}return this.type.kind==="formatted"?Nr.fromString(Ds(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Kn.fromString(Ds(this.args[0].evaluate(e))):Ds(this.args[0].evaluate(e))},Ai.prototype.eachChild=function(e){this.args.forEach(e)},Ai.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ai.prototype.serialize=function(){if(this.type.kind==="formatted")return new yo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ki(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var S=["Unknown","Point","LineString","Polygon"],P=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};P.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},P.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?S[this.feature.type]:this.feature.type:null},P.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},P.prototype.canonicalID=function(){return this.canonical},P.prototype.properties=function(){return this.feature&&this.feature.properties||{}},P.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=fr.parse(e)),t};var F=function(e,t,i,c){this.name=e,this.type=t,this._evaluate=i,this.args=c};F.prototype.evaluate=function(e){return this._evaluate(e,this.args)},F.prototype.eachChild=function(e){this.args.forEach(e)},F.prototype.outputDefined=function(){return!1},F.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},F.parse=function(e,t){var i,c=e[0],h=F.definitions[c];if(!h)return t.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(h)?h[0]:h.type,v=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,b=v.filter(function(Tt){var ot=Tt[0];return!Array.isArray(ot)||ot.length===e.length-1}),T=null,C=0,A=b;C<A.length;C+=1){var z=A[C],R=z[0],U=z[1];T=new lr(t.registry,t.path,null,t.scope);for(var H=[],K=!1,ae=1;ae<e.length;ae++){var te=e[ae],he=Array.isArray(R)?R[ae-1]:R.type,ge=T.parse(te,1+H.length,he);if(!ge){K=!0;break}H.push(ge)}if(!K)if(Array.isArray(R)&&R.length!==H.length)T.error("Expected "+R.length+" arguments, but found "+H.length+" instead.");else{for(var we=0;we<H.length;we++){var Te=Array.isArray(R)?R[we]:R.type,Fe=H[we];T.concat(we+1).checkSubtype(Te,Fe.type)}if(T.errors.length===0)return new F(c,d,U,H)}}if(b.length===1)(i=t.errors).push.apply(i,T.errors);else{for(var Ze=(b.length?b:v).map(function(Tt){var ot;return ot=Tt[0],Array.isArray(ot)?"("+ot.map(ur).join(", ")+")":"("+ur(ot.type)+"...)"}).join(" | "),Ke=[],xt=1;xt<e.length;xt++){var it=t.parse(e[xt],1+Ke.length);if(!it)return null;Ke.push(ur(it.type))}t.error("Expected arguments of type "+Ze+", but found ("+Ke.join(", ")+") instead.")}return null},F.register=function(e,t){for(var i in F.definitions=t,t)e[i]=F};var le=function(e,t,i){this.type=or,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function ve(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function fe(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function _e(e,t){var i=(180+e[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,h=Math.pow(2,t.z);return[Math.round(i*h*8192),Math.round(c*h*8192)]}function $e(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function Ge(e,t){for(var i,c,h,d,v,b,T,C=!1,A=0,z=t.length;A<z;A++)for(var R=t[A],U=0,H=R.length;U<H-1;U++){if((d=(i=e)[0]-(c=R[U])[0])*(T=i[1]-(h=R[U+1])[1])-(b=i[0]-h[0])*(v=i[1]-c[1])==0&&d*b<=0&&v*T<=0)return!1;$e(e,R[U],R[U+1])&&(C=!C)}return C}function dt(e,t){for(var i=0;i<t.length;i++)if(Ge(e,t[i]))return!0;return!1}function Ee(e,t,i,c){var h=c[0]-i[0],d=c[1]-i[1],v=(e[0]-i[0])*d-h*(e[1]-i[1]),b=(t[0]-i[0])*d-h*(t[1]-i[1]);return v>0&&b<0||v<0&&b>0}function ut(e,t,i){for(var c=0,h=i;c<h.length;c+=1)for(var d=h[c],v=0;v<d.length-1;++v)if((z=[(A=d[v+1])[0]-(C=d[v])[0],A[1]-C[1]])[0]*(R=[(T=t)[0]-(b=e)[0],T[1]-b[1]])[1]-z[1]*R[0]!=0&&Ee(b,T,C,A)&&Ee(C,A,b,T))return!0;var b,T,C,A,z,R;return!1}function mt(e,t){for(var i=0;i<e.length;++i)if(!Ge(e[i],t))return!1;for(var c=0;c<e.length-1;++c)if(ut(e[c],e[c+1],t))return!1;return!0}function Ft(e,t){for(var i=0;i<t.length;i++)if(mt(e,t[i]))return!0;return!1}function Vt(e,t,i){for(var c=[],h=0;h<e.length;h++){for(var d=[],v=0;v<e[h].length;v++){var b=_e(e[h][v],i);ve(t,b),d.push(b)}c.push(d)}return c}function an(e,t,i){for(var c=[],h=0;h<e.length;h++){var d=Vt(e[h],t,i);c.push(d)}return c}function Be(e,t,i,c){if(e[0]<i[0]||e[0]>i[2]){var h=.5*c,d=e[0]-i[0]>h?-c:i[0]-e[0]>h?c:0;d===0&&(d=e[0]-i[2]>h?-c:i[2]-e[0]>h?c:0),e[0]+=d}ve(t,e)}function gt(e,t,i,c){for(var h=8192*Math.pow(2,c.z),d=[8192*c.x,8192*c.y],v=[],b=0,T=e;b<T.length;b+=1)for(var C=0,A=T[b];C<A.length;C+=1){var z=A[C],R=[z.x+d[0],z.y+d[1]];Be(R,t,i,h),v.push(R)}return v}function Tr(e,t,i,c){for(var h,d=8192*Math.pow(2,c.z),v=[8192*c.x,8192*c.y],b=[],T=0,C=e;T<C.length;T+=1){for(var A=[],z=0,R=C[T];z<R.length;z+=1){var U=R[z],H=[U.x+v[0],U.y+v[1]];ve(t,H),A.push(H)}b.push(A)}if(t[2]-t[0]<=d/2){(h=t)[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var K=0,ae=b;K<ae.length;K+=1)for(var te=0,he=ae[K];te<he.length;te+=1)Be(he[te],t,i,d)}return b}le.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var c=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,Je);if(!c)return null;var h=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,Je);if(!h)return null;var d=null;return i.locale&&!(d=t.parse(i.locale,1,tt))?null:new le(c,h,d)},le.prototype.evaluate=function(e){return new ui(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},le.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},le.prototype.outputDefined=function(){return!1},le.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var ar=function(e,t){this.type=Je,this.geojson=e,this.geometries=t};function Lr(e){if(e instanceof F&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof ar)return!1;var t=!0;return e.eachChild(function(i){t&&!Lr(i)&&(t=!1)}),t}function It(e){if(e instanceof F&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!It(i)&&(t=!1)}),t}function Mi(e,t){if(e instanceof F&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(c){i&&!Mi(c,t)&&(i=!1)}),i}ar.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(mo(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var c=0;c<i.features.length;++c){var h=i.features[c].geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new ar(i,i.features[c].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new ar(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new ar(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ar.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var c=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var v=Vt(i.coordinates,h,d),b=gt(t.geometry(),c,h,d);if(!fe(c,h))return!1;for(var T=0,C=b;T<C.length;T+=1)if(!Ge(C[T],v))return!1}if(i.type==="MultiPolygon"){var A=an(i.coordinates,h,d),z=gt(t.geometry(),c,h,d);if(!fe(c,h))return!1;for(var R=0,U=z;R<U.length;R+=1)if(!dt(U[R],A))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var c=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var v=Vt(i.coordinates,h,d),b=Tr(t.geometry(),c,h,d);if(!fe(c,h))return!1;for(var T=0,C=b;T<C.length;T+=1)if(!mt(C[T],v))return!1}if(i.type==="MultiPolygon"){var A=an(i.coordinates,h,d),z=Tr(t.geometry(),c,h,d);if(!fe(c,h))return!1;for(var R=0,U=z;R<U.length;R+=1)if(!Ft(U[R],A))return!1}return!0}(e,this.geometries)}return!1},ar.prototype.eachChild=function(){},ar.prototype.outputDefined=function(){return!0},ar.prototype.serialize=function(){return["within",this.geojson]};var li=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};li.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new li(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},li.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},li.prototype.eachChild=function(){},li.prototype.outputDefined=function(){return!1},li.prototype.serialize=function(){return["var",this.name]};var lr=function(e,t,i,c,h){t===void 0&&(t=[]),c===void 0&&(c=new pt),h===void 0&&(h=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=c,this.errors=h,this.expectedType=i};function yi(e,t){for(var i,c=e.length-1,h=0,d=c,v=0;h<=d;)if((i=e[v=Math.floor((h+d)/2)])<=t){if(v===c||t<e[v+1])return v;h=v+1}else{if(!(i>t))throw new zn("Input is not a number.");d=v-1}return 0}lr.prototype.parse=function(e,t,i,c,h){return h===void 0&&(h={}),t?this.concat(t,i,c)._parse(e,h):this._parse(e,h)},lr.prototype._parse=function(e,t){function i(C,A,z){return z==="assert"?new Vr(A,[C]):z==="coerce"?new Ai(A,[C]):C}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var c=e[0];if(typeof c!="string")return this.error("Expression name must be a string, but found "+typeof c+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=this.registry[c];if(h){var d=h.parse(e,this);if(!d)return null;if(this.expectedType){var v=this.expectedType,b=d.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||b.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(v,b))return null}else d=i(d,v,t.typeAnnotation||"coerce");else d=i(d,v,t.typeAnnotation||"assert")}if(!(d instanceof ii)&&d.type.kind!=="resolvedImage"&&function C(A){if(A instanceof li)return C(A.boundExpression);if(A instanceof F&&A.name==="error"||A instanceof le||A instanceof ar)return!1;var z=A instanceof Ai||A instanceof Vr,R=!0;return A.eachChild(function(U){R=z?R&&C(U):R&&U instanceof ii}),!!R&&Lr(A)&&Mi(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var T=new P;try{d=new ii(d.type,d.evaluate(T))}catch(C){return this.error(C.message),null}}return d}return this.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},lr.prototype.concat=function(e,t,i){var c=typeof e=="number"?this.path.concat(e):this.path,h=i?this.scope.concat(i):this.scope;return new lr(this.registry,c,t||null,h,this.errors)},lr.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var c=""+this.key+t.map(function(h){return"["+h+"]"}).join("");this.errors.push(new Ve(c,e))},lr.prototype.checkSubtype=function(e,t){var i=vr(e,t);return i&&this.error(i),i};var qr=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var c=0,h=i;c<h.length;c+=1){var d=h[c],v=d[1];this.labels.push(d[0]),this.outputs.push(v)}};function nn(e,t,i){return e*(1-i)+t*i}qr.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Ae);if(!i)return null;var c=[],h=null;t.expectedType&&t.expectedType.kind!=="value"&&(h=t.expectedType);for(var d=1;d<e.length;d+=2){var v=d===1?-1/0:e[d],b=e[d+1],T=d,C=d+1;if(typeof v!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(c.length&&c[c.length-1][0]>=v)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);var A=t.parse(b,C,h);if(!A)return null;h=h||A.type,c.push([v,A])}return new qr(h,i,c)},qr.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var c=this.input.evaluate(e);if(c<=t[0])return i[0].evaluate(e);var h=t.length;return c>=t[h-1]?i[h-1].evaluate(e):i[yi(t,c)].evaluate(e)},qr.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},qr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},qr.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Oa=Object.freeze({__proto__:null,number:nn,color:function(e,t,i){return new fr(nn(e.r,t.r,i),nn(e.g,t.g,i),nn(e.b,t.b,i),nn(e.a,t.a,i))},array:function(e,t,i){return e.map(function(c,h){return nn(c,t[h],i)})}}),vo=6/29*3*(6/29),Nl=Math.PI/180,jl=180/Math.PI;function Ku(e){return e>.008856451679035631?Math.pow(e,1/3):e/vo+4/29}function lu(e){return e>6/29?e*e*e:vo*(e-4/29)}function os(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function cu(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ju(e){var t=cu(e.r),i=cu(e.g),c=cu(e.b),h=Ku((.4124564*t+.3575761*i+.1804375*c)/.95047),d=Ku((.2126729*t+.7151522*i+.072175*c)/1);return{l:116*d-16,a:500*(h-d),b:200*(d-Ku((.0193339*t+.119192*i+.9503041*c)/1.08883)),alpha:e.a}}function Vl(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,c=isNaN(e.b)?t:t-e.b/200;return t=1*lu(t),i=.95047*lu(i),c=1.08883*lu(c),new fr(os(3.2404542*i-1.5371385*t-.4985314*c),os(-.969266*i+1.8760108*t+.041556*c),os(.0556434*i-.2040259*t+1.0572252*c),e.alpha)}function Ra(e,t,i){var c=t-e;return e+i*(c>180||c<-180?c-360*Math.round(c/360):c)}var as={forward:Ju,reverse:Vl,interpolate:function(e,t,i){return{l:nn(e.l,t.l,i),a:nn(e.a,t.a,i),b:nn(e.b,t.b,i),alpha:nn(e.alpha,t.alpha,i)}}},Os={forward:function(e){var t=Ju(e),i=t.l,c=t.a,h=t.b,d=Math.atan2(h,c)*jl;return{h:d<0?d+360:d,c:Math.sqrt(c*c+h*h),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Nl,i=e.c;return Vl({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Ra(e.h,t.h,i),c:nn(e.c,t.c,i),l:nn(e.l,t.l,i),alpha:nn(e.alpha,t.alpha,i)}}},ql=Object.freeze({__proto__:null,lab:as,hcl:Os}),Tn=function(e,t,i,c,h){this.type=e,this.operator=t,this.interpolation=i,this.input=c,this.labels=[],this.outputs=[];for(var d=0,v=h;d<v.length;d+=1){var b=v[d],T=b[1];this.labels.push(b[0]),this.outputs.push(T)}};function Fa(e,t,i,c){var h=c-i,d=e-i;return h===0?0:t===1?d/h:(Math.pow(t,d)-1)/(Math.pow(t,h)-1)}Tn.interpolationFactor=function(e,t,i,c){var h=0;if(e.name==="exponential")h=Fa(t,e.base,i,c);else if(e.name==="linear")h=Fa(t,1,i,c);else if(e.name==="cubic-bezier"){var d=e.controlPoints;h=new M(d[0],d[1],d[2],d[3]).solve(Fa(t,1,i,c))}return h},Tn.parse=function(e,t){var i=e[0],c=e[1],h=e[2],d=e.slice(3);if(!Array.isArray(c)||c.length===0)return t.error("Expected an interpolation type expression.",1);if(c[0]==="linear")c={name:"linear"};else if(c[0]==="exponential"){var v=c[1];if(typeof v!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);c={name:"exponential",base:v}}else{if(c[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(c[0]),1,0);var b=c.slice(1);if(b.length!==4||b.some(function(ae){return typeof ae!="number"||ae<0||ae>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);c={name:"cubic-bezier",controlPoints:b}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(h=t.parse(h,2,Ae)))return null;var T=[],C=null;i==="interpolate-hcl"||i==="interpolate-lab"?C=Qe:t.expectedType&&t.expectedType.kind!=="value"&&(C=t.expectedType);for(var A=0;A<d.length;A+=2){var z=d[A],R=d[A+1],U=A+3,H=A+4;if(typeof z!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(T.length&&T[T.length-1][0]>=z)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);var K=t.parse(R,H,C);if(!K)return null;C=C||K.type,T.push([z,K])}return C.kind==="number"||C.kind==="color"||C.kind==="array"&&C.itemType.kind==="number"&&typeof C.N=="number"?new Tn(C,i,c,h,T):t.error("Type "+ur(C)+" is not interpolatable.")},Tn.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var c=this.input.evaluate(e);if(c<=t[0])return i[0].evaluate(e);var h=t.length;if(c>=t[h-1])return i[h-1].evaluate(e);var d=yi(t,c),v=Tn.interpolationFactor(this.interpolation,c,t[d],t[d+1]),b=i[d].evaluate(e),T=i[d+1].evaluate(e);return this.operator==="interpolate"?Oa[this.type.kind.toLowerCase()](b,T,v):this.operator==="interpolate-hcl"?Os.reverse(Os.interpolate(Os.forward(b),Os.forward(T),v)):as.reverse(as.interpolate(as.forward(b),as.forward(T),v))},Tn.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Tn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Tn.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var Mo=function(e,t){this.type=e,this.args=t};Mo.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,c=t.expectedType;c&&c.kind!=="value"&&(i=c);for(var h=[],d=0,v=e.slice(1);d<v.length;d+=1){var b=t.parse(v[d],1+h.length,i,void 0,{typeAnnotation:"omit"});if(!b)return null;i=i||b.type,h.push(b)}var T=c&&h.some(function(C){return vr(c,C.type)});return new Mo(T?rt:i,h)},Mo.prototype.evaluate=function(e){for(var t,i=null,c=0,h=0,d=this.args;h<d.length&&(c++,(i=d[h].evaluate(e))&&i instanceof Kn&&!i.available&&(t||(t=i.name),i=null,c===this.args.length&&(i=t)),i===null);h+=1);return i},Mo.prototype.eachChild=function(e){this.args.forEach(e)},Mo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Mo.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var zo=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};zo.prototype.evaluate=function(e){return this.result.evaluate(e)},zo.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},zo.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],c=1;c<e.length-1;c+=2){var h=e[c];if(typeof h!="string")return t.error("Expected string, but found "+typeof h+" instead.",c);if(/[^a-zA-Z0-9_]/.test(h))return t.error("Variable names must contain only alphanumeric characters or '_'.",c);var d=t.parse(e[c+1],c+1);if(!d)return null;i.push([h,d])}var v=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return v?new zo(i,v):null},zo.prototype.outputDefined=function(){return this.result.outputDefined()},zo.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var c=i[t];e.push(c[0],c[1].serialize())}return e.push(this.result.serialize()),e};var Xo=function(e,t,i){this.type=e,this.index=t,this.input=i};Xo.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ae),c=t.parse(e[2],2,hr(t.expectedType||rt));return i&&c?new Xo(c.type.itemType,i,c):null},Xo.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new zn("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new zn("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new zn("Array index must be an integer, but found "+t+" instead.");return i[t]},Xo.prototype.eachChild=function(e){e(this.index),e(this.input)},Xo.prototype.outputDefined=function(){return!1},Xo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var go=function(e,t){this.type=Je,this.needle=e,this.haystack=t};go.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,rt),c=t.parse(e[2],2,rt);return i&&c?tn(i.type,[Je,tt,Ae,st,rt])?new go(i,c):t.error("Expected first argument to be of type boolean, string, number or null, but found "+ur(i.type)+" instead"):null},go.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Sr(t,["boolean","string","number","null"]))throw new zn("Expected first argument to be of type boolean, string, number or null, but found "+ur(rn(t))+" instead.");if(!Sr(i,["string","array"]))throw new zn("Expected second argument to be of type array or string, but found "+ur(rn(i))+" instead.");return i.indexOf(t)>=0},go.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},go.prototype.outputDefined=function(){return!0},go.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var pa=function(e,t,i){this.type=Ae,this.needle=e,this.haystack=t,this.fromIndex=i};pa.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,rt),c=t.parse(e[2],2,rt);if(!i||!c)return null;if(!tn(i.type,[Je,tt,Ae,st,rt]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+ur(i.type)+" instead");if(e.length===4){var h=t.parse(e[3],3,Ae);return h?new pa(i,c,h):null}return new pa(i,c)},pa.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Sr(t,["boolean","string","number","null"]))throw new zn("Expected first argument to be of type boolean, string, number or null, but found "+ur(rn(t))+" instead.");if(!Sr(i,["string","array"]))throw new zn("Expected second argument to be of type array or string, but found "+ur(rn(i))+" instead.");if(this.fromIndex){var c=this.fromIndex.evaluate(e);return i.indexOf(t,c)}return i.indexOf(t)},pa.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},pa.prototype.outputDefined=function(){return!1},pa.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ba=function(e,t,i,c,h,d){this.inputType=e,this.type=t,this.input=i,this.cases=c,this.outputs=h,this.otherwise=d};Ba.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,c;t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(var h={},d=[],v=2;v<e.length-1;v+=2){var b=e[v],T=e[v+1];Array.isArray(b)||(b=[b]);var C=t.concat(v);if(b.length===0)return C.error("Expected at least one branch label.");for(var A=0,z=b;A<z.length;A+=1){var R=z[A];if(typeof R!="number"&&typeof R!="string")return C.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return C.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof R=="number"&&Math.floor(R)!==R)return C.error("Numeric branch labels must be integer values.");if(i){if(C.checkSubtype(i,rn(R)))return null}else i=rn(R);if(h[String(R)]!==void 0)return C.error("Branch labels must be unique.");h[String(R)]=d.length}var U=t.parse(T,v,c);if(!U)return null;c=c||U.type,d.push(U)}var H=t.parse(e[1],1,rt);if(!H)return null;var K=t.parse(e[e.length-1],e.length-1,c);return K?H.type.kind!=="value"&&t.concat(1).checkSubtype(i,H.type)?null:new Ba(i,c,H,h,d,K):null},Ba.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(rn(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Ba.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Ba.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Ba.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],c={},h=0,d=Object.keys(this.cases).sort();h<d.length;h+=1){var v=d[h];(z=c[this.cases[v]])===void 0?(c[this.cases[v]]=i.length,i.push([this.cases[v],[v]])):i[z][1].push(v)}for(var b=function(U){return e.inputType.kind==="number"?Number(U):U},T=0,C=i;T<C.length;T+=1){var A=C[T],z=A[0],R=A[1];t.push(R.length===1?b(R[0]):R.map(b)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Ua=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};Ua.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var c=[],h=1;h<e.length-1;h+=2){var d=t.parse(e[h],h,Je);if(!d)return null;var v=t.parse(e[h+1],h+1,i);if(!v)return null;c.push([d,v]),i=i||v.type}var b=t.parse(e[e.length-1],e.length-1,i);return b?new Ua(i,c,b):null},Ua.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var c=i[t],h=c[1];if(c[0].evaluate(e))return h.evaluate(e)}return this.otherwise.evaluate(e)},Ua.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var c=i[t],h=c[1];e(c[0]),e(h)}e(this.otherwise)},Ua.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Ua.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ha=function(e,t,i,c){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=c};function Zl(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Yu(e,t,i,c){return c.compare(t,i)===0}function Er(e,t,i){var c=e!=="=="&&e!=="!=";return function(){function h(d,v,b){this.type=Je,this.lhs=d,this.rhs=v,this.collator=b,this.hasUntypedArgument=d.type.kind==="value"||v.type.kind==="value"}return h.parse=function(d,v){if(d.length!==3&&d.length!==4)return v.error("Expected two or three arguments.");var b=d[0],T=v.parse(d[1],1,rt);if(!T)return null;if(!Zl(b,T.type))return v.concat(1).error('"'+b+`" comparisons are not supported for type '`+ur(T.type)+"'.");var C=v.parse(d[2],2,rt);if(!C)return null;if(!Zl(b,C.type))return v.concat(2).error('"'+b+`" comparisons are not supported for type '`+ur(C.type)+"'.");if(T.type.kind!==C.type.kind&&T.type.kind!=="value"&&C.type.kind!=="value")return v.error("Cannot compare types '"+ur(T.type)+"' and '"+ur(C.type)+"'.");c&&(T.type.kind==="value"&&C.type.kind!=="value"?T=new Vr(C.type,[T]):T.type.kind!=="value"&&C.type.kind==="value"&&(C=new Vr(T.type,[C])));var A=null;if(d.length===4){if(T.type.kind!=="string"&&C.type.kind!=="string"&&T.type.kind!=="value"&&C.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(!(A=v.parse(d[3],3,or)))return null}return new h(T,C,A)},h.prototype.evaluate=function(d){var v=this.lhs.evaluate(d),b=this.rhs.evaluate(d);if(c&&this.hasUntypedArgument){var T=rn(v),C=rn(b);if(T.kind!==C.kind||T.kind!=="string"&&T.kind!=="number")throw new zn('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+T.kind+", "+C.kind+") instead.")}if(this.collator&&!c&&this.hasUntypedArgument){var A=rn(v),z=rn(b);if(A.kind!=="string"||z.kind!=="string")return t(d,v,b)}return this.collator?i(d,v,b,this.collator.evaluate(d)):t(d,v,b)},h.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},h.prototype.outputDefined=function(){return!0},h.prototype.serialize=function(){var d=[e];return this.eachChild(function(v){d.push(v.serialize())}),d},h}()}ha.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,rt),c=t.parse(e[2],2,Ae);if(!i||!c)return null;if(!tn(i.type,[hr(rt),tt,rt]))return t.error("Expected first argument to be of type array or string, but found "+ur(i.type)+" instead");if(e.length===4){var h=t.parse(e[3],3,Ae);return h?new ha(i.type,i,c,h):null}return new ha(i.type,i,c)},ha.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!Sr(t,["string","array"]))throw new zn("Expected first argument to be of type array or string, but found "+ur(rn(t))+" instead.");if(this.endIndex){var c=this.endIndex.evaluate(e);return t.slice(i,c)}return t.slice(i)},ha.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},ha.prototype.outputDefined=function(){return!1},ha.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Na=Er("==",function(e,t,i){return t===i},Yu),Xi=Er("!=",function(e,t,i){return t!==i},function(e,t,i,c){return!Yu(0,t,i,c)}),fa=Er("<",function(e,t,i){return t<i},function(e,t,i,c){return c.compare(t,i)<0}),Rs=Er(">",function(e,t,i){return t>i},function(e,t,i,c){return c.compare(t,i)>0}),Ko=Er("<=",function(e,t,i){return t<=i},function(e,t,i,c){return c.compare(t,i)<=0}),Gl=Er(">=",function(e,t,i){return t>=i},function(e,t,i,c){return c.compare(t,i)>=0}),Lo=function(e,t,i,c,h){this.type=tt,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=c,this.maxFractionDigits=h};Lo.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Ae);if(!i)return null;var c=e[2];if(typeof c!="object"||Array.isArray(c))return t.error("NumberFormat options argument must be an object.");var h=null;if(c.locale&&!(h=t.parse(c.locale,1,tt)))return null;var d=null;if(c.currency&&!(d=t.parse(c.currency,1,tt)))return null;var v=null;if(c["min-fraction-digits"]&&!(v=t.parse(c["min-fraction-digits"],1,Ae)))return null;var b=null;return c["max-fraction-digits"]&&!(b=t.parse(c["max-fraction-digits"],1,Ae))?null:new Lo(i,h,d,v,b)},Lo.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Lo.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Lo.prototype.outputDefined=function(){return!1},Lo.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Ki=function(e){this.type=Ae,this.input=e};Ki.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+ur(i.type)+" instead."):new Ki(i):null},Ki.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new zn("Expected value to be of type string or array, but found "+ur(rn(t))+" instead.")},Ki.prototype.eachChild=function(e){e(this.input)},Ki.prototype.outputDefined=function(){return!1},Ki.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var da={"==":Na,"!=":Xi,">":Rs,"<":fa,">=":Gl,"<=":Ko,array:Vr,at:Xo,boolean:Vr,case:Ua,coalesce:Mo,collator:le,format:yo,image:ki,in:go,"index-of":pa,interpolate:Tn,"interpolate-hcl":Tn,"interpolate-lab":Tn,length:Ki,let:zo,literal:ii,match:Ba,number:Vr,"number-format":Lo,object:Vr,slice:ha,step:qr,string:Vr,"to-boolean":Ai,"to-color":Ai,"to-number":Ai,"to-string":Ai,var:li,within:ar};function Qu(e,t){var i=t[0],c=t[1],h=t[2],d=t[3];i=i.evaluate(e),c=c.evaluate(e),h=h.evaluate(e);var v=d?d.evaluate(e):1,b=Ho(i,c,h,v);if(b)throw new zn(b);return new fr(i/255*v,c/255*v,h/255*v,v)}function Wl(e,t){return e in t}function el(e,t){var i=t[e];return i===void 0?null:i}function ma(e){return{type:e}}function tl(e){return{result:"success",value:e}}function Do(e){return{result:"error",value:e}}function Ji(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function $l(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Yi(e){return!!e.expression&&e.expression.interpolated}function Fr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Oo(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Hl(e){return e}function ss(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function Fs(e,t,i,c,h){return ss(typeof i===h?c[i]:void 0,e.default,t.default)}function rl(e,t,i){if(Fr(i)!=="number")return ss(e.default,t.default);var c=e.stops.length;if(c===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[c-1][0])return e.stops[c-1][1];var h=yi(e.stops.map(function(d){return d[0]}),i);return e.stops[h][1]}function nl(e,t,i){var c=e.base!==void 0?e.base:1;if(Fr(i)!=="number")return ss(e.default,t.default);var h=e.stops.length;if(h===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[h-1][0])return e.stops[h-1][1];var d=yi(e.stops.map(function(z){return z[0]}),i),v=function(z,R,U,H){var K=H-U,ae=z-U;return K===0?0:R===1?ae/K:(Math.pow(R,ae)-1)/(Math.pow(R,K)-1)}(i,c,e.stops[d][0],e.stops[d+1][0]),b=e.stops[d][1],T=e.stops[d+1][1],C=Oa[t.type]||Hl;if(e.colorSpace&&e.colorSpace!=="rgb"){var A=ql[e.colorSpace];C=function(z,R){return A.reverse(A.interpolate(A.forward(z),A.forward(R),v))}}return typeof b.evaluate=="function"?{evaluate:function(){for(var z=[],R=arguments.length;R--;)z[R]=arguments[R];var U=b.evaluate.apply(void 0,z),H=T.evaluate.apply(void 0,z);if(U!==void 0&&H!==void 0)return C(U,H,v)}}:C(b,T,v)}function Bs(e,t,i){return t.type==="color"?i=fr.parse(i):t.type==="formatted"?i=Nr.fromString(i.toString()):t.type==="resolvedImage"?i=Kn.fromString(i.toString()):Fr(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),ss(i,e.default,t.default)}F.register(da,{error:[{kind:"error"},[tt],function(e,t){throw new zn(t[0].evaluate(e))}],typeof:[tt,[rt],function(e,t){return ur(rn(t[0].evaluate(e)))}],"to-rgba":[hr(Ae,4),[Qe],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Qe,[Ae,Ae,Ae],Qu],rgba:[Qe,[Ae,Ae,Ae,Ae],Qu],has:{type:Je,overloads:[[[tt],function(e,t){return Wl(t[0].evaluate(e),e.properties())}],[[tt,Wt],function(e,t){var i=t[1];return Wl(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:rt,overloads:[[[tt],function(e,t){return el(t[0].evaluate(e),e.properties())}],[[tt,Wt],function(e,t){var i=t[1];return el(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[rt,[tt],function(e,t){return el(t[0].evaluate(e),e.featureState||{})}],properties:[Wt,[],function(e){return e.properties()}],"geometry-type":[tt,[],function(e){return e.geometryType()}],id:[rt,[],function(e){return e.id()}],zoom:[Ae,[],function(e){return e.globals.zoom}],"heatmap-density":[Ae,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Ae,[],function(e){return e.globals.lineProgress||0}],accumulated:[rt,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Ae,ma(Ae),function(e,t){for(var i=0,c=0,h=t;c<h.length;c+=1)i+=h[c].evaluate(e);return i}],"*":[Ae,ma(Ae),function(e,t){for(var i=1,c=0,h=t;c<h.length;c+=1)i*=h[c].evaluate(e);return i}],"-":{type:Ae,overloads:[[[Ae,Ae],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Ae],function(e,t){return-t[0].evaluate(e)}]]},"/":[Ae,[Ae,Ae],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Ae,[Ae,Ae],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Ae,[],function(){return Math.LN2}],pi:[Ae,[],function(){return Math.PI}],e:[Ae,[],function(){return Math.E}],"^":[Ae,[Ae,Ae],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Ae,[Ae],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Ae,[Ae],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Ae,[Ae],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Ae,[Ae],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Ae,[Ae],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Ae,[Ae],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Ae,[Ae],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Ae,[Ae],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Ae,[Ae],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Ae,[Ae],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Ae,ma(Ae),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Ae,ma(Ae),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Ae,[Ae],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Ae,[Ae],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Ae,[Ae],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Ae,[Ae],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Je,[tt,rt],function(e,t){var i=t[0],c=t[1];return e.properties()[i.value]===c.value}],"filter-id-==":[Je,[rt],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[Je,[tt],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[Je,[tt,rt],function(e,t){var i=t[0],c=t[1],h=e.properties()[i.value],d=c.value;return typeof h==typeof d&&h<d}],"filter-id-<":[Je,[rt],function(e,t){var i=t[0],c=e.id(),h=i.value;return typeof c==typeof h&&c<h}],"filter->":[Je,[tt,rt],function(e,t){var i=t[0],c=t[1],h=e.properties()[i.value],d=c.value;return typeof h==typeof d&&h>d}],"filter-id->":[Je,[rt],function(e,t){var i=t[0],c=e.id(),h=i.value;return typeof c==typeof h&&c>h}],"filter-<=":[Je,[tt,rt],function(e,t){var i=t[0],c=t[1],h=e.properties()[i.value],d=c.value;return typeof h==typeof d&&h<=d}],"filter-id-<=":[Je,[rt],function(e,t){var i=t[0],c=e.id(),h=i.value;return typeof c==typeof h&&c<=h}],"filter->=":[Je,[tt,rt],function(e,t){var i=t[0],c=t[1],h=e.properties()[i.value],d=c.value;return typeof h==typeof d&&h>=d}],"filter-id->=":[Je,[rt],function(e,t){var i=t[0],c=e.id(),h=i.value;return typeof c==typeof h&&c>=h}],"filter-has":[Je,[rt],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Je,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Je,[hr(tt)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Je,[hr(rt)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Je,[tt,hr(rt)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[Je,[tt,hr(rt)],function(e,t){var i=t[0],c=t[1];return function(h,d,v,b){for(;v<=b;){var T=v+b>>1;if(d[T]===h)return!0;d[T]>h?b=T-1:v=T+1}return!1}(e.properties()[i.value],c.value,0,c.value.length-1)}],all:{type:Je,overloads:[[[Je,Je],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[ma(Je),function(e,t){for(var i=0,c=t;i<c.length;i+=1)if(!c[i].evaluate(e))return!1;return!0}]]},any:{type:Je,overloads:[[[Je,Je],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[ma(Je),function(e,t){for(var i=0,c=t;i<c.length;i+=1)if(c[i].evaluate(e))return!0;return!1}]]},"!":[Je,[Je],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Je,[tt],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[tt,[tt],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[tt,[tt],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[tt,ma(rt),function(e,t){return t.map(function(i){return Ds(i.evaluate(e))}).join("")}],"resolved-locale":[tt,[or],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var ja=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new P,this._defaultValue=t?function(i){return i.type==="color"&&Oo(i.default)?new fr(0,0,0,0):i.type==="color"?fr.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function Jo(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in da}function Us(e,t){var i=new lr(da,[],t?function(h){var d={color:Qe,string:tt,number:Ae,enum:tt,boolean:Je,formatted:kr,resolvedImage:Rt};return h.type==="array"?hr(d[h.value]||rt,h.length):d[h.type]}(t):void 0),c=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?tl(new ja(c,t)):Do(i.errors)}ja.prototype.evaluateWithoutErrorHandling=function(e,t,i,c,h,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=c,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},ja.prototype.evaluate=function(e,t,i,c,h,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=c,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d||null;try{var v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new zn("Expected value to be one of "+Object.keys(this._enumValues).map(function(b){return JSON.stringify(b)}).join(", ")+", but found "+JSON.stringify(v)+" instead.");return v}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console!="undefined"&&console.warn(b.message)),this._defaultValue}};var Ns=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!It(t.expression)};Ns.prototype.evaluateWithoutErrorHandling=function(e,t,i,c,h,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,c,h,d)},Ns.prototype.evaluate=function(e,t,i,c,h,d){return this._styleExpression.evaluate(e,t,i,c,h,d)};var de=function(e,t,i,c){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!It(t.expression),this.interpolationType=c};function Oe(e,t){if((e=Us(e,t)).result==="error")return e;var i=e.value.expression,c=Lr(i);if(!c&&!Ji(t))return Do([new Ve("","data expressions not supported")]);var h=Mi(i,["zoom"]);if(!h&&!$l(t))return Do([new Ve("","zoom expressions not supported")]);var d=function v(b){var T=null;if(b instanceof zo)T=v(b.result);else if(b instanceof Mo)for(var C=0,A=b.args;C<A.length&&!(T=v(A[C]));C+=1);else(b instanceof qr||b instanceof Tn)&&b.input instanceof F&&b.input.name==="zoom"&&(T=b);return T instanceof Ve||b.eachChild(function(z){var R=v(z);R instanceof Ve?T=R:!T&&R?T=new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):T&&R&&T!==R&&(T=new Ve("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),T}(i);return d||h?d instanceof Ve?Do([d]):d instanceof Tn&&!Yi(t)?Do([new Ve("",'"interpolate" expressions cannot be used with this property')]):tl(d?new de(c?"camera":"composite",e.value,d.labels,d instanceof Tn?d.interpolation:void 0):new Ns(c?"constant":"source",e.value)):Do([new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}de.prototype.evaluateWithoutErrorHandling=function(e,t,i,c,h,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,c,h,d)},de.prototype.evaluate=function(e,t,i,c,h,d){return this._styleExpression.evaluate(e,t,i,c,h,d)},de.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?Tn.interpolationFactor(this.interpolationType,e,t,i):0};var nt=function(e,t){this._parameters=e,this._specification=t,Ue(this,function i(c,h){var d,v,b,T=h.type==="color",C=c.stops&&typeof c.stops[0][0]=="object",A=C||!(C||c.property!==void 0),z=c.type||(Yi(h)?"exponential":"interval");if(T&&((c=Ue({},c)).stops&&(c.stops=c.stops.map(function(it){return[it[0],fr.parse(it[1])]})),c.default=fr.parse(c.default?c.default:h.default)),c.colorSpace&&c.colorSpace!=="rgb"&&!ql[c.colorSpace])throw new Error("Unknown color space: "+c.colorSpace);if(z==="exponential")d=nl;else if(z==="interval")d=rl;else if(z==="categorical"){d=Fs,v=Object.create(null);for(var R=0,U=c.stops;R<U.length;R+=1){var H=U[R];v[H[0]]=H[1]}b=typeof c.stops[0][0]}else{if(z!=="identity")throw new Error('Unknown function type "'+z+'"');d=Bs}if(C){for(var K={},ae=[],te=0;te<c.stops.length;te++){var he=c.stops[te],ge=he[0].zoom;K[ge]===void 0&&(K[ge]={zoom:ge,type:c.type,property:c.property,default:c.default,stops:[]},ae.push(ge)),K[ge].stops.push([he[0].value,he[1]])}for(var we=[],Te=0,Fe=ae;Te<Fe.length;Te+=1){var Ze=Fe[Te];we.push([K[Ze].zoom,i(K[Ze],h)])}var Ke={name:"linear"};return{kind:"composite",interpolationType:Ke,interpolationFactor:Tn.interpolationFactor.bind(void 0,Ke),zoomStops:we.map(function(it){return it[0]}),evaluate:function(it,Tt){var ot=it.zoom;return nl({stops:we,base:c.base},h,ot).evaluate(ot,Tt)}}}if(A){var xt=z==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:xt,interpolationFactor:Tn.interpolationFactor.bind(void 0,xt),zoomStops:c.stops.map(function(it){return it[0]}),evaluate:function(it){return d(c,h,it.zoom,v,b)}}}return{kind:"source",evaluate:function(it,Tt){var ot=Tt&&Tt.properties?Tt.properties[c.property]:void 0;return ot===void 0?ss(c.default,h.default):d(c,h,ot,v,b)}}}(this._parameters,this._specification))};function wt(e){var t=e.key,i=e.value,c=e.valueSpec||{},h=e.objectElementValidators||{},d=e.style,v=e.styleSpec,b=[],T=Fr(i);if(T!=="object")return[new Q(t,i,"object expected, "+T+" found")];for(var C in i){var A=C.split(".")[0],z=c[A]||c["*"],R=void 0;if(h[A])R=h[A];else if(c[A])R=$t;else if(h["*"])R=h["*"];else{if(!c["*"]){b.push(new Q(t,i[C],'unknown property "'+C+'"'));continue}R=$t}b=b.concat(R({key:(t&&t+".")+C,value:i[C],valueSpec:z,style:d,styleSpec:v,object:i,objectKey:C},i))}for(var U in c)h[U]||c[U].required&&c[U].default===void 0&&i[U]===void 0&&b.push(new Q(t,i,'missing required property "'+U+'"'));return b}function Wr(e){var t=e.value,i=e.valueSpec,c=e.style,h=e.styleSpec,d=e.key,v=e.arrayElementValidator||$t;if(Fr(t)!=="array")return[new Q(d,t,"array expected, "+Fr(t)+" found")];if(i.length&&t.length!==i.length)return[new Q(d,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new Q(d,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var b={type:i.value,values:i.values};h.$version<7&&(b.function=i.function),Fr(i.value)==="object"&&(b=i.value);for(var T=[],C=0;C<t.length;C++)T=T.concat(v({array:t,arrayIndex:C,value:t[C],valueSpec:b,style:c,styleSpec:h,key:d+"["+C+"]"}));return T}function dr(e){var t=e.key,i=e.value,c=e.valueSpec,h=Fr(i);return h==="number"&&i!=i&&(h="NaN"),h!=="number"?[new Q(t,i,"number expected, "+h+" found")]:"minimum"in c&&i<c.minimum?[new Q(t,i,i+" is less than the minimum value "+c.minimum)]:"maximum"in c&&i>c.maximum?[new Q(t,i,i+" is greater than the maximum value "+c.maximum)]:[]}function sn(e){var t,i,c,h=e.valueSpec,d=qe(e.value.type),v={},b=d!=="categorical"&&e.value.property===void 0,T=!b,C=Fr(e.value.stops)==="array"&&Fr(e.value.stops[0])==="array"&&Fr(e.value.stops[0][0])==="object",A=wt({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(U){if(d==="identity")return[new Q(U.key,U.value,'identity function may not have a "stops" property')];var H=[],K=U.value;return H=H.concat(Wr({key:U.key,value:K,valueSpec:U.valueSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:z})),Fr(K)==="array"&&K.length===0&&H.push(new Q(U.key,K,"array must have at least one stop")),H},default:function(U){return $t({key:U.key,value:U.value,valueSpec:h,style:U.style,styleSpec:U.styleSpec})}}});return d==="identity"&&b&&A.push(new Q(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||A.push(new Q(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!Yi(e.valueSpec)&&A.push(new Q(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(T&&!Ji(e.valueSpec)?A.push(new Q(e.key,e.value,"property functions not supported")):b&&!$l(e.valueSpec)&&A.push(new Q(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!C||e.value.property!==void 0||A.push(new Q(e.key,e.value,'"property" property is required')),A;function z(U){var H=[],K=U.value,ae=U.key;if(Fr(K)!=="array")return[new Q(ae,K,"array expected, "+Fr(K)+" found")];if(K.length!==2)return[new Q(ae,K,"array length 2 expected, length "+K.length+" found")];if(C){if(Fr(K[0])!=="object")return[new Q(ae,K,"object expected, "+Fr(K[0])+" found")];if(K[0].zoom===void 0)return[new Q(ae,K,"object stop key must have zoom")];if(K[0].value===void 0)return[new Q(ae,K,"object stop key must have value")];if(c&&c>qe(K[0].zoom))return[new Q(ae,K[0].zoom,"stop zoom values must appear in ascending order")];qe(K[0].zoom)!==c&&(c=qe(K[0].zoom),i=void 0,v={}),H=H.concat(wt({key:ae+"[0]",value:K[0],valueSpec:{zoom:{}},style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:dr,value:R}}))}else H=H.concat(R({key:ae+"[0]",value:K[0],valueSpec:{},style:U.style,styleSpec:U.styleSpec},K));return Jo(Pe(K[1]))?H.concat([new Q(ae+"[1]",K[1],"expressions are not allowed in function stops.")]):H.concat($t({key:ae+"[1]",value:K[1],valueSpec:h,style:U.style,styleSpec:U.styleSpec}))}function R(U,H){var K=Fr(U.value),ae=qe(U.value),te=U.value!==null?U.value:H;if(t){if(K!==t)return[new Q(U.key,te,K+" stop domain type must match previous stop domain type "+t)]}else t=K;if(K!=="number"&&K!=="string"&&K!=="boolean")return[new Q(U.key,te,"stop domain value must be a number, string, or boolean")];if(K!=="number"&&d!=="categorical"){var he="number expected, "+K+" found";return Ji(h)&&d===void 0&&(he+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Q(U.key,te,he)]}return d!=="categorical"||K!=="number"||isFinite(ae)&&Math.floor(ae)===ae?d!=="categorical"&&K==="number"&&i!==void 0&&ae<i?[new Q(U.key,te,"stop domain values must appear in ascending order")]:(i=ae,d==="categorical"&&ae in v?[new Q(U.key,te,"stop domain values must be unique")]:(v[ae]=!0,[])):[new Q(U.key,te,"integer expected, found "+ae)]}}function $r(e){var t=(e.expressionContext==="property"?Oe:Us)(Pe(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(c){return new Q(""+e.key+c.key,e.value,c.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new Q(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!It(i))return[new Q(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!It(i))return[new Q(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Mi(i,["zoom","feature-state"]))return[new Q(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Lr(i))return[new Q(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ci(e){var t=e.key,i=e.value,c=e.valueSpec,h=[];return Array.isArray(c.values)?c.values.indexOf(qe(i))===-1&&h.push(new Q(t,i,"expected one of ["+c.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(c.values).indexOf(qe(i))===-1&&h.push(new Q(t,i,"expected one of ["+Object.keys(c.values).join(", ")+"], "+JSON.stringify(i)+" found")),h}function pn(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var c=i[t];if(!pn(c)&&typeof c!="boolean")return!1}return!0;default:return!0}}nt.deserialize=function(e){return new nt(e._parameters,e._specification)},nt.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var gn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zi(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};pn(e)||(e=jn(e));var t=Us(e,gn);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,c,h){return t.value.evaluate(i,c,{},h)},needGeometry:function i(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(var h=1;h<c.length;h++)if(i(c[h]))return!0;return!1}(e)}}function Yo(e,t){return e<t?-1:e>t?1:0}function jn(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?_o(e[1],e[2],"=="):i==="!="?Qo(_o(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?_o(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(jn))):i==="all"?["all"].concat(e.slice(1).map(jn)):i==="none"?["all"].concat(e.slice(1).map(jn).map(Qo)):i==="in"?Va(e[1],e.slice(2)):i==="!in"?Qo(Va(e[1],e.slice(2))):i==="has"?js(e[1]):i==="!has"?Qo(js(e[1])):i!=="within"||e}function _o(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function Va(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Yo)]]:["filter-in-small",e,["literal",t]]}}function js(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Qo(e){return["!",e]}function qa(e){return pn(Pe(e.value))?$r(Ue({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var c=i.value,h=i.key;if(Fr(c)!=="array")return[new Q(h,c,"array expected, "+Fr(c)+" found")];var d,v=i.styleSpec,b=[];if(c.length<1)return[new Q(h,c,"filter array must have at least 1 element")];switch(b=b.concat(ci({key:h+"[0]",value:c[0],valueSpec:v.filter_operator,style:i.style,styleSpec:i.styleSpec})),qe(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&qe(c[1])==="$type"&&b.push(new Q(h,c,'"$type" cannot be use with operator "'+c[0]+'"'));case"==":case"!=":c.length!==3&&b.push(new Q(h,c,'filter array for operator "'+c[0]+'" must have 3 elements'));case"in":case"!in":c.length>=2&&(d=Fr(c[1]))!=="string"&&b.push(new Q(h+"[1]",c[1],"string expected, "+d+" found"));for(var T=2;T<c.length;T++)d=Fr(c[T]),qe(c[1])==="$type"?b=b.concat(ci({key:h+"["+T+"]",value:c[T],valueSpec:v.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&b.push(new Q(h+"["+T+"]",c[T],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var C=1;C<c.length;C++)b=b.concat(t({key:h+"["+C+"]",value:c[C],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=Fr(c[1]),c.length!==2?b.push(new Q(h,c,'filter array for "'+c[0]+'" operator must have 2 elements')):d!=="string"&&b.push(new Q(h+"[1]",c[1],"string expected, "+d+" found"));break;case"within":d=Fr(c[1]),c.length!==2?b.push(new Q(h,c,'filter array for "'+c[0]+'" operator must have 2 elements')):d!=="object"&&b.push(new Q(h+"[1]",c[1],"object expected, "+d+" found"))}return b}(e)}function pu(e,t){var i=e.key,c=e.style,h=e.styleSpec,d=e.value,v=e.objectKey,b=h[t+"_"+e.layerType];if(!b)return[];var T=v.match(/^(.*)-transition$/);if(t==="paint"&&T&&b[T[1]]&&b[T[1]].transition)return $t({key:i,value:d,valueSpec:h.transition,style:c,styleSpec:h});var C,A=e.valueSpec||b[v];if(!A)return[new Q(i,d,'unknown property "'+v+'"')];if(Fr(d)==="string"&&Ji(A)&&!A.tokens&&(C=/^{([^}]+)}$/.exec(d)))return[new Q(i,d,'"'+v+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(C[1])+" }`.")];var z=[];return e.layerType==="symbol"&&(v==="text-field"&&c&&!c.glyphs&&z.push(new Q(i,d,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&Oo(Pe(d))&&qe(d.type)==="identity"&&z.push(new Q(i,d,'"text-font" does not support identity functions'))),z.concat($t({key:e.key,value:d,valueSpec:A,style:c,styleSpec:h,expressionContext:"property",propertyType:t,propertyKey:v}))}function il(e){return pu(e,"paint")}function Vs(e){return pu(e,"layout")}function jr(e){var t=[],i=e.value,c=e.key,h=e.style,d=e.styleSpec;i.type||i.ref||t.push(new Q(c,i,'either "type" or "ref" is required'));var v,b=qe(i.type),T=qe(i.ref);if(i.id)for(var C=qe(i.id),A=0;A<e.arrayIndex;A++){var z=h.layers[A];qe(z.id)===C&&t.push(new Q(c,i.id,'duplicate layer id "'+i.id+'", previously used at line '+z.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(H){H in i&&t.push(new Q(c,i[H],'"'+H+'" is prohibited for ref layers'))}),h.layers.forEach(function(H){qe(H.id)===T&&(v=H)}),v?v.ref?t.push(new Q(c,i.ref,"ref cannot reference another ref layer")):b=qe(v.type):t.push(new Q(c,i.ref,'ref layer "'+T+'" not found'));else if(b!=="background")if(i.source){var R=h.sources&&h.sources[i.source],U=R&&qe(R.type);R?U==="vector"&&b==="raster"?t.push(new Q(c,i.source,'layer "'+i.id+'" requires a raster source')):U==="raster"&&b!=="raster"?t.push(new Q(c,i.source,'layer "'+i.id+'" requires a vector source')):U!=="vector"||i["source-layer"]?U==="raster-dem"&&b!=="hillshade"?t.push(new Q(c,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!i.paint||!i.paint["line-gradient"]||U==="geojson"&&R.lineMetrics||t.push(new Q(c,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Q(c,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new Q(c,i.source,'source "'+i.source+'" not found'))}else t.push(new Q(c,i,'missing required property "source"'));return t=t.concat(wt({key:c,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return $t({key:c+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:qa,layout:function(H){return wt({layer:i,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{"*":function(K){return Vs(Ue({layerType:b},K))}}})},paint:function(H){return wt({layer:i,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{"*":function(K){return il(Ue({layerType:b},K))}}})}}}))}function _r(e){var t=e.value,i=e.key,c=Fr(t);return c!=="string"?[new Q(i,t,"string expected, "+c+" found")]:[]}var Dr={promoteId:function(e){var t=e.key,i=e.value;if(Fr(i)==="string")return _r({key:t,value:i});var c=[];for(var h in i)c.push.apply(c,_r({key:t+"."+h,value:i[h]}));return c}};function xo(e){var t=e.value,i=e.key,c=e.styleSpec,h=e.style;if(!t.type)return[new Q(i,t,'"type" is required')];var d,v=qe(t.type);switch(v){case"vector":case"raster":case"raster-dem":return wt({key:i,value:t,valueSpec:c["source_"+v.replace("-","_")],style:e.style,styleSpec:c,objectElementValidators:Dr});case"geojson":if(d=wt({key:i,value:t,valueSpec:c.source_geojson,style:h,styleSpec:c,objectElementValidators:Dr}),t.cluster)for(var b in t.clusterProperties){var T=t.clusterProperties[b],C=T[0],A=typeof C=="string"?[C,["accumulated"],["get",b]]:C;d.push.apply(d,$r({key:i+"."+b+".map",value:T[1],expressionContext:"cluster-map"})),d.push.apply(d,$r({key:i+"."+b+".reduce",value:A,expressionContext:"cluster-reduce"}))}return d;case"video":return wt({key:i,value:t,valueSpec:c.source_video,style:h,styleSpec:c});case"image":return wt({key:i,value:t,valueSpec:c.source_image,style:h,styleSpec:c});case"canvas":return[new Q(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ci({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:c})}}function ea(e){var t=e.value,i=e.styleSpec,c=i.light,h=e.style,d=[],v=Fr(t);if(t===void 0)return d;if(v!=="object")return d.concat([new Q("light",t,"object expected, "+v+" found")]);for(var b in t){var T=b.match(/^(.*)-transition$/);d=d.concat(T&&c[T[1]]&&c[T[1]].transition?$t({key:b,value:t[b],valueSpec:i.transition,style:h,styleSpec:i}):c[b]?$t({key:b,value:t[b],valueSpec:c[b],style:h,styleSpec:i}):[new Q(b,t[b],'unknown property "'+b+'"')])}return d}var Ln={"*":function(){return[]},array:Wr,boolean:function(e){var t=e.value,i=e.key,c=Fr(t);return c!=="boolean"?[new Q(i,t,"boolean expected, "+c+" found")]:[]},number:dr,color:function(e){var t=e.key,i=e.value,c=Fr(i);return c!=="string"?[new Q(t,i,"color expected, "+c+" found")]:Dt(i)===null?[new Q(t,i,'color expected, "'+i+'" found')]:[]},constants:me,enum:ci,filter:qa,function:sn,layer:jr,object:wt,source:xo,light:ea,string:_r,formatted:function(e){return _r(e).length===0?[]:$r(e)},resolvedImage:function(e){return _r(e).length===0?[]:$r(e)}};function $t(e){var t=e.value,i=e.valueSpec,c=e.styleSpec;return i.expression&&Oo(qe(t))?sn(e):i.expression&&Jo(Pe(t))?$r(e):i.type&&Ln[i.type]?Ln[i.type](e):wt(Ue({},e,{valueSpec:i.type?c[i.type]:i}))}function gr(e){var t=e.value,i=e.key,c=_r(e);return c.length||(t.indexOf("{fontstack}")===-1&&c.push(new Q(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&c.push(new Q(i,t,'"glyphs" url must include a "{range}" token'))),c}function Jn(e,t){t===void 0&&(t=V);var i=[];return i=i.concat($t({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:gr,"*":function(){return[]}}})),e.constants&&(i=i.concat(me({key:"constants",value:e.constants,style:e,styleSpec:t}))),ya(i)}function ya(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function bo(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return ya(e.apply(this,t))}}Jn.source=bo(xo),Jn.light=bo(ea),Jn.layer=bo(jr),Jn.filter=bo(qa),Jn.paintProperty=bo(il),Jn.layoutProperty=bo(Vs);var Qi=Jn,Xl=Qi.light,hu=Qi.paintProperty,Za=Qi.layoutProperty;function va(e,t){var i=!1;if(t&&t.length)for(var c=0,h=t;c<h.length;c+=1)e.fire(new ue(new Error(h[c].message))),i=!0;return i}var eo=hn;function hn(e,t,i){var c=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var h=new Int32Array(this.arrayBuffer);e=h[0],this.d=(t=h[1])+2*(i=h[2]);for(var d=0;d<this.d*this.d;d++){var v=h[3+d],b=h[3+d+1];c.push(v===b?null:h.subarray(v,b))}var T=h[3+c.length+1];this.keys=h.subarray(h[3+c.length],T),this.bboxes=h.subarray(T),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var C=0;C<this.d*this.d;C++)c.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var A=i/t*e;this.min=-A,this.max=e+A}hn.prototype.insert=function(e,t,i,c,h){this._forEachCell(t,i,c,h,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(c),this.bboxes.push(h)},hn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},hn.prototype._insertCell=function(e,t,i,c,h,d){this.cells[h].push(d)},hn.prototype.query=function(e,t,i,c,h){var d=this.min,v=this.max;if(e<=d&&t<=d&&v<=i&&v<=c&&!h)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(e,t,i,c,this._queryCell,b,{},h),b},hn.prototype._queryCell=function(e,t,i,c,h,d,v,b){var T=this.cells[h];if(T!==null)for(var C=this.keys,A=this.bboxes,z=0;z<T.length;z++){var R=T[z];if(v[R]===void 0){var U=4*R;(b?b(A[U+0],A[U+1],A[U+2],A[U+3]):e<=A[U+2]&&t<=A[U+3]&&i>=A[U+0]&&c>=A[U+1])?(v[R]=!0,d.push(C[R])):v[R]=!1}}},hn.prototype._forEachCell=function(e,t,i,c,h,d,v,b){for(var T=this._convertToCellCoord(e),C=this._convertToCellCoord(t),A=this._convertToCellCoord(i),z=this._convertToCellCoord(c),R=T;R<=A;R++)for(var U=C;U<=z;U++){var H=this.d*U+R;if((!b||b(this._convertFromCellCoord(R),this._convertFromCellCoord(U),this._convertFromCellCoord(R+1),this._convertFromCellCoord(U+1)))&&h.call(this,e,t,i,c,H,d,v,b))return}},hn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},hn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},hn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,c=0;c<this.cells.length;c++)i+=this.cells[c].length;var h=new Int32Array(t+i+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var d=t,v=0;v<e.length;v++){var b=e[v];h[3+v]=d,h.set(b,d),d+=b.length}return h[3+e.length]=d,h.set(this.keys,d),h[3+e.length+1]=d+=this.keys.length,h.set(this.bboxes,d),d+=this.bboxes.length,h.buffer};var ga=W.ImageData,qs=W.ImageBitmap,Pn={};function ft(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Pn[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var to in ft("Object",Object),eo.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},eo.deserialize=function(e){return new eo(e.buffer)},ft("Grid",eo),ft("Color",fr),ft("Error",Error),ft("ResolvedImage",Kn),ft("StylePropertyFunction",nt),ft("StyleExpression",ja,{omit:["_evaluator"]}),ft("ZoomDependentExpression",de),ft("ZoomConstantExpression",Ns),ft("CompoundExpression",F,{omit:["_evaluate"]}),da)da[to]._classRegistryKey||ft("Expression_"+to,da[to]);function Kl(e){return e&&typeof ArrayBuffer!="undefined"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function fu(e){return qs&&e instanceof qs}function ta(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Kl(e)||fu(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof ga)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var c=[],h=0,d=e;h<d.length;h+=1)c.push(ta(d[h],t));return c}if(typeof e=="object"){var v=e.constructor,b=v._classRegistryKey;if(!b)throw new Error("can't serialize object of unregistered class");var T=v.serialize?v.serialize(e,t):{};if(!v.serialize){for(var C in e)if(e.hasOwnProperty(C)&&!(Pn[b].omit.indexOf(C)>=0)){var A=e[C];T[C]=Pn[b].shallow.indexOf(C)>=0?A:ta(A,t)}e instanceof Error&&(T.message=e.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return b!=="Object"&&(T.$name=b),T}throw new Error("can't serialize object of type "+typeof e)}function ro(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Kl(e)||fu(e)||ArrayBuffer.isView(e)||e instanceof ga)return e;if(Array.isArray(e))return e.map(ro);if(typeof e=="object"){var t=e.$name||"Object",i=Pn[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var c=Object.create(i.prototype),h=0,d=Object.keys(e);h<d.length;h+=1){var v=d[h];if(v!=="$name"){var b=e[v];c[v]=Pn[t].shallow.indexOf(v)>=0?b:ro(b)}}return c}throw new Error("can't deserialize object of type "+typeof e)}var mp=function(){this.first=!0};mp.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var et={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function yp(e){for(var t=0,i=e;t<i.length;t+=1)if(Jl(i[t].charCodeAt(0)))return!0;return!1}function Jl(e){return!(e!==746&&e!==747&&(e<4352||!(et["Bopomofo Extended"](e)||et.Bopomofo(e)||et["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||et["CJK Compatibility Ideographs"](e)||et["CJK Compatibility"](e)||et["CJK Radicals Supplement"](e)||et["CJK Strokes"](e)||!(!et["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||et["CJK Unified Ideographs Extension A"](e)||et["CJK Unified Ideographs"](e)||et["Enclosed CJK Letters and Months"](e)||et["Hangul Compatibility Jamo"](e)||et["Hangul Jamo Extended-A"](e)||et["Hangul Jamo Extended-B"](e)||et["Hangul Jamo"](e)||et["Hangul Syllables"](e)||et.Hiragana(e)||et["Ideographic Description Characters"](e)||et.Kanbun(e)||et["Kangxi Radicals"](e)||et["Katakana Phonetic Extensions"](e)||et.Katakana(e)&&e!==12540||!(!et["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!et["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||et["Unified Canadian Aboriginal Syllabics"](e)||et["Unified Canadian Aboriginal Syllabics Extended"](e)||et["Vertical Forms"](e)||et["Yijing Hexagram Symbols"](e)||et["Yi Syllables"](e)||et["Yi Radicals"](e))))}function vp(e){return!(Jl(e)||function(t){return!!(et["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||et["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||et["Letterlike Symbols"](t)||et["Number Forms"](t)||et["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||et["Control Pictures"](t)&&t!==9251||et["Optical Character Recognition"](t)||et["Enclosed Alphanumerics"](t)||et["Geometric Shapes"](t)||et["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||et["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||et["CJK Symbols and Punctuation"](t)||et.Katakana(t)||et["Private Use Area"](t)||et["CJK Compatibility Forms"](t)||et["Small Form Variants"](t)||et["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function Ro(e){return e>=1424&&e<=2303||et["Arabic Presentation Forms-A"](e)||et["Arabic Presentation Forms-B"](e)}function no(e,t){return!(!t&&Ro(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||et.Khmer(e))}function Yl(e){for(var t=0,i=e;t<i.length;t+=1)if(Ro(i[t].charCodeAt(0)))return!0;return!1}var Ql=null,io="unavailable",Ga=null,sf=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(io="error"),Ql&&Ql(e)};function ol(){gp.fire(new X("pluginStateChange",{pluginStatus:io,pluginURL:Ga}))}var gp=new pe,_p=function(){return io},ra=function(){if(io!=="deferred"||!Ga)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");io="loading",ol(),Ga&&is({url:Ga},function(e){e?sf(e):(io="loaded",ol())})},wo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return io==="loaded"||wo.applyArabicShaping!=null},isLoading:function(){return io==="loading"},setState:function(e){io=e.pluginStatus,Ga=e.pluginURL},isParsed:function(){return wo.applyArabicShaping!=null&&wo.processBidirectionalText!=null&&wo.processStyledBidirectionalText!=null},getPluginURL:function(){return Ga}},nr=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new mp,this.transition={})};nr.prototype.isSupportedScript=function(e){return function(t,i){for(var c=0,h=t;c<h.length;c+=1)if(!no(h[c].charCodeAt(0),i))return!1;return!0}(e,wo.isLoaded())},nr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},nr.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var _a=function(e,t){this.property=e,this.value=t,this.expression=function(i,c){if(Oo(i))return new nt(i,c);if(Jo(i)){var h=Oe(i,c);if(h.result==="error")throw new Error(h.value.map(function(v){return v.key+": "+v.message}).join(", "));return h.value}var d=i;return typeof i=="string"&&c.type==="color"&&(d=fr.parse(i)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};_a.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},_a.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var Fo=function(e){this.property=e,this.value=new _a(e,void 0)};Fo.prototype.transitioned=function(e,t){return new Zs(this.property,this.value,t,oe({},e.transition,this.transition),e.now)},Fo.prototype.untransitioned=function(){return new Zs(this.property,this.value,null,{},0)};var oi=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};oi.prototype.getValue=function(e){return Mt(this._values[e].value.value)},oi.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Fo(this._values[e].property)),this._values[e].value=new _a(this._values[e].property,t===null?void 0:Mt(t))},oi.prototype.getTransition=function(e){return Mt(this._values[e].transition)},oi.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Fo(this._values[e].property)),this._values[e].transition=Mt(t)||void 0},oi.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var c=i[t],h=this.getValue(c);h!==void 0&&(e[c]=h);var d=this.getTransition(c);d!==void 0&&(e[c+"-transition"]=d)}return e},oi.prototype.transitioned=function(e,t){for(var i=new us(this._properties),c=0,h=Object.keys(this._values);c<h.length;c+=1){var d=h[c];i._values[d]=this._values[d].transitioned(e,t._values[d])}return i},oi.prototype.untransitioned=function(){for(var e=new us(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var c=i[t];e._values[c]=this._values[c].untransitioned()}return e};var Zs=function(e,t,i,c,h){this.property=e,this.value=t,this.begin=h+c.delay||0,this.end=this.begin+c.duration||0,e.specification.transition&&(c.delay||c.duration)&&(this.prior=i)};Zs.prototype.possiblyEvaluate=function(e,t,i){var c=e.now||0,h=this.value.possiblyEvaluate(e,t,i),d=this.prior;if(d){if(c>this.end)return this.prior=null,h;if(this.value.isDataDriven())return this.prior=null,h;if(c<this.begin)return d.possiblyEvaluate(e,t,i);var v=(c-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,i),h,function(b){if(b<=0)return 0;if(b>=1)return 1;var T=b*b,C=T*b;return 4*(b<.5?C:3*(b-T)+C-.75)}(v))}return h};var us=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};us.prototype.possiblyEvaluate=function(e,t,i){for(var c=new al(this._properties),h=0,d=Object.keys(this._values);h<d.length;h+=1){var v=d[h];c._values[v]=this._values[v].possiblyEvaluate(e,t,i)}return c},us.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var na=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};na.prototype.getValue=function(e){return Mt(this._values[e].value)},na.prototype.setValue=function(e,t){this._values[e]=new _a(this._values[e].property,t===null?void 0:Mt(t))},na.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var c=i[t],h=this.getValue(c);h!==void 0&&(e[c]=h)}return e},na.prototype.possiblyEvaluate=function(e,t,i){for(var c=new al(this._properties),h=0,d=Object.keys(this._values);h<d.length;h+=1){var v=d[h];c._values[v]=this._values[v].possiblyEvaluate(e,t,i)}return c};var vi=function(e,t,i){this.property=e,this.value=t,this.parameters=i};vi.prototype.isConstant=function(){return this.value.kind==="constant"},vi.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},vi.prototype.evaluate=function(e,t,i,c){return this.property.evaluate(this.value,this.parameters,e,t,i,c)};var al=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};al.prototype.get=function(e){return this._values[e]};var St=function(e){this.specification=e};St.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},St.prototype.interpolate=function(e,t,i){var c=Oa[this.specification.type];return c?c(e,t,i):e};var yt=function(e,t){this.specification=e,this.overrides=t};yt.prototype.possiblyEvaluate=function(e,t,i,c){return new vi(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,c)}:e.expression,t)},yt.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new vi(this,{kind:"constant",value:void 0},e.parameters);var c=Oa[this.specification.type];return c?new vi(this,{kind:"constant",value:c(e.value.value,t.value.value,i)},e.parameters):e},yt.prototype.evaluate=function(e,t,i,c,h,d){return e.kind==="constant"?e.value:e.evaluate(t,i,c,h,d)};var ec=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,c,h,d){if(i.value===void 0)return new vi(this,{kind:"constant",value:void 0},c);if(i.expression.kind==="constant"){var v=i.expression.evaluate(c,null,{},h,d),b=i.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,T=this._calculate(b,b,b,c);return new vi(this,{kind:"constant",value:T},c)}if(i.expression.kind==="camera"){var C=this._calculate(i.expression.evaluate({zoom:c.zoom-1}),i.expression.evaluate({zoom:c.zoom}),i.expression.evaluate({zoom:c.zoom+1}),c);return new vi(this,{kind:"constant",value:C},c)}return new vi(this,i.expression,c)},t.prototype.evaluate=function(i,c,h,d,v,b){if(i.kind==="source"){var T=i.evaluate(c,h,d,v,b);return this._calculate(T,T,T,c)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(c.zoom)-1},h,d),i.evaluate({zoom:Math.floor(c.zoom)},h,d),i.evaluate({zoom:Math.floor(c.zoom)+1},h,d),c):i.value},t.prototype._calculate=function(i,c,h,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:c}:{from:h,to:c}},t.prototype.interpolate=function(i){return i},t}(yt),gi=function(e){this.specification=e};gi.prototype.possiblyEvaluate=function(e,t,i,c){if(e.value!==void 0){if(e.expression.kind==="constant"){var h=e.expression.evaluate(t,null,{},i,c);return this._calculate(h,h,h,t)}return this._calculate(e.expression.evaluate(new nr(Math.floor(t.zoom-1),t)),e.expression.evaluate(new nr(Math.floor(t.zoom),t)),e.expression.evaluate(new nr(Math.floor(t.zoom+1),t)),t)}},gi.prototype._calculate=function(e,t,i,c){return c.zoom>c.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},gi.prototype.interpolate=function(e){return e};var ia=function(e){this.specification=e};ia.prototype.possiblyEvaluate=function(e,t,i,c){return!!e.expression.evaluate(t,null,{},i,c)},ia.prototype.interpolate=function(){return!1};var ai=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var c=this.defaultPropertyValues[t]=new _a(i,void 0),h=this.defaultTransitionablePropertyValues[t]=new Fo(i);this.defaultTransitioningPropertyValues[t]=h.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=c.possiblyEvaluate({})}};ft("DataDrivenProperty",yt),ft("DataConstantProperty",St),ft("CrossFadedDataDrivenProperty",ec),ft("CrossFadedProperty",gi),ft("ColorRampProperty",ia);var xa=function(e){function t(i,c){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),c.layout&&(this._unevaluatedLayout=new na(c.layout)),c.paint)){for(var h in this._transitionablePaint=new oi(c.paint),i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new al(c.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,c,h){h===void 0&&(h={}),c!=null&&this._validate(Za,"layers."+this.id+".layout."+i,i,c,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,c):this.visibility=c)},t.prototype.getPaintProperty=function(i){return at(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-"-transition".length)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,c,h){if(h===void 0&&(h={}),c!=null&&this._validate(hu,"layers."+this.id+".paint."+i,i,c,h))return!1;if(at(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-"-transition".length),c||void 0),!1;var d=this._transitionablePaint._values[i],v=d.property.specification["property-type"]==="cross-faded-data-driven",b=d.value.isDataDriven(),T=d.value;this._transitionablePaint.setValue(i,c),this._handleSpecialPaintPropertyUpdate(i);var C=this._transitionablePaint._values[i].value;return C.isDataDriven()||b||v||this._handleOverridablePaintPropertyUpdate(i,T,C)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,c,h){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,c){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,c)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),_t(i,function(c,h){return!(c===void 0||h==="layout"&&!Object.keys(c).length||h==="paint"&&!Object.keys(c).length)})},t.prototype._validate=function(i,c,h,d,v){return v===void 0&&(v={}),(!v||v.validate!==!1)&&va(this,i.call(Qi,{key:c,layerType:this.type,objectKey:h,value:d,styleSpec:V,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var c=this.paint.get(i);if(c instanceof vi&&Ji(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1},t}(pe),xp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},tc=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Pr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Yn(e,t){t===void 0&&(t=1);var i=0,c=0;return{members:e.map(function(h){var d=xp[h.type].BYTES_PER_ELEMENT,v=i=uf(i,Math.max(t,d)),b=h.components||1;return c=Math.max(c,d),i+=d*b,{name:h.name,type:h.type,components:b,offset:v}}),size:uf(i,Math.max(c,t)),alignment:t}}function uf(e,t){return Math.ceil(e/t)*t}Pr.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Pr.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Pr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Pr.prototype.clear=function(){this.length=0},Pr.prototype.resize=function(e){this.reserve(e),this.length=e},Pr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Pr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Gs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c){var h=this.length;return this.resize(h+1),this.emplace(h,i,c)},t.prototype.emplace=function(i,c,h){var d=2*i;return this.int16[d+0]=c,this.int16[d+1]=h,i},t}(Pr);Gs.prototype.bytesPerElement=4,ft("StructArrayLayout2i4",Gs);var bp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,c,h,d)},t.prototype.emplace=function(i,c,h,d,v){var b=4*i;return this.int16[b+0]=c,this.int16[b+1]=h,this.int16[b+2]=d,this.int16[b+3]=v,i},t}(Pr);bp.prototype.bytesPerElement=8,ft("StructArrayLayout4i8",bp);var Wa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d,v,b){var T=this.length;return this.resize(T+1),this.emplace(T,i,c,h,d,v,b)},t.prototype.emplace=function(i,c,h,d,v,b,T){var C=6*i;return this.int16[C+0]=c,this.int16[C+1]=h,this.int16[C+2]=d,this.int16[C+3]=v,this.int16[C+4]=b,this.int16[C+5]=T,i},t}(Pr);Wa.prototype.bytesPerElement=12,ft("StructArrayLayout2i4i12",Wa);var oo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d,v,b){var T=this.length;return this.resize(T+1),this.emplace(T,i,c,h,d,v,b)},t.prototype.emplace=function(i,c,h,d,v,b,T){var C=4*i,A=8*i;return this.int16[C+0]=c,this.int16[C+1]=h,this.uint8[A+4]=d,this.uint8[A+5]=v,this.uint8[A+6]=b,this.uint8[A+7]=T,i},t}(Pr);oo.prototype.bytesPerElement=8,ft("StructArrayLayout2i4ub8",oo);var du=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c){var h=this.length;return this.resize(h+1),this.emplace(h,i,c)},t.prototype.emplace=function(i,c,h){var d=2*i;return this.float32[d+0]=c,this.float32[d+1]=h,i},t}(Pr);du.prototype.bytesPerElement=8,ft("StructArrayLayout2f8",du);var ba=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d,v,b,T,C,A,z){var R=this.length;return this.resize(R+1),this.emplace(R,i,c,h,d,v,b,T,C,A,z)},t.prototype.emplace=function(i,c,h,d,v,b,T,C,A,z,R){var U=10*i;return this.uint16[U+0]=c,this.uint16[U+1]=h,this.uint16[U+2]=d,this.uint16[U+3]=v,this.uint16[U+4]=b,this.uint16[U+5]=T,this.uint16[U+6]=C,this.uint16[U+7]=A,this.uint16[U+8]=z,this.uint16[U+9]=R,i},t}(Pr);ba.prototype.bytesPerElement=20,ft("StructArrayLayout10ui20",ba);var rc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d,v,b,T,C,A,z,R,U){var H=this.length;return this.resize(H+1),this.emplace(H,i,c,h,d,v,b,T,C,A,z,R,U)},t.prototype.emplace=function(i,c,h,d,v,b,T,C,A,z,R,U,H){var K=12*i;return this.int16[K+0]=c,this.int16[K+1]=h,this.int16[K+2]=d,this.int16[K+3]=v,this.uint16[K+4]=b,this.uint16[K+5]=T,this.uint16[K+6]=C,this.uint16[K+7]=A,this.int16[K+8]=z,this.int16[K+9]=R,this.int16[K+10]=U,this.int16[K+11]=H,i},t}(Pr);rc.prototype.bytesPerElement=24,ft("StructArrayLayout4i4ui4i24",rc);var mu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,c,h)},t.prototype.emplace=function(i,c,h,d){var v=3*i;return this.float32[v+0]=c,this.float32[v+1]=h,this.float32[v+2]=d,i},t}(Pr);mu.prototype.bytesPerElement=12,ft("StructArrayLayout3f12",mu);var sl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var c=this.length;return this.resize(c+1),this.emplace(c,i)},t.prototype.emplace=function(i,c){return this.uint32[1*i+0]=c,i},t}(Pr);sl.prototype.bytesPerElement=4,ft("StructArrayLayout1ul4",sl);var wp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d,v,b,T,C,A){var z=this.length;return this.resize(z+1),this.emplace(z,i,c,h,d,v,b,T,C,A)},t.prototype.emplace=function(i,c,h,d,v,b,T,C,A,z){var R=10*i,U=5*i;return this.int16[R+0]=c,this.int16[R+1]=h,this.int16[R+2]=d,this.int16[R+3]=v,this.int16[R+4]=b,this.int16[R+5]=T,this.uint32[U+3]=C,this.uint16[R+8]=A,this.uint16[R+9]=z,i},t}(Pr);wp.prototype.bytesPerElement=20,ft("StructArrayLayout6i1ul2ui20",wp);var yu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d,v,b){var T=this.length;return this.resize(T+1),this.emplace(T,i,c,h,d,v,b)},t.prototype.emplace=function(i,c,h,d,v,b,T){var C=6*i;return this.int16[C+0]=c,this.int16[C+1]=h,this.int16[C+2]=d,this.int16[C+3]=v,this.int16[C+4]=b,this.int16[C+5]=T,i},t}(Pr);yu.prototype.bytesPerElement=12,ft("StructArrayLayout2i2i2i12",yu);var Ws=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d,v){var b=this.length;return this.resize(b+1),this.emplace(b,i,c,h,d,v)},t.prototype.emplace=function(i,c,h,d,v,b){var T=4*i,C=8*i;return this.float32[T+0]=c,this.float32[T+1]=h,this.float32[T+2]=d,this.int16[C+6]=v,this.int16[C+7]=b,i},t}(Pr);Ws.prototype.bytesPerElement=16,ft("StructArrayLayout2f1f2i16",Ws);var Sp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,c,h,d)},t.prototype.emplace=function(i,c,h,d,v){var b=12*i,T=3*i;return this.uint8[b+0]=c,this.uint8[b+1]=h,this.float32[T+1]=d,this.float32[T+2]=v,i},t}(Pr);Sp.prototype.bytesPerElement=12,ft("StructArrayLayout2ub2f12",Sp);var ls=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,c,h)},t.prototype.emplace=function(i,c,h,d){var v=3*i;return this.uint16[v+0]=c,this.uint16[v+1]=h,this.uint16[v+2]=d,i},t}(Pr);ls.prototype.bytesPerElement=6,ft("StructArrayLayout3ui6",ls);var cs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d,v,b,T,C,A,z,R,U,H,K,ae,te,he){var ge=this.length;return this.resize(ge+1),this.emplace(ge,i,c,h,d,v,b,T,C,A,z,R,U,H,K,ae,te,he)},t.prototype.emplace=function(i,c,h,d,v,b,T,C,A,z,R,U,H,K,ae,te,he,ge){var we=24*i,Te=12*i,Fe=48*i;return this.int16[we+0]=c,this.int16[we+1]=h,this.uint16[we+2]=d,this.uint16[we+3]=v,this.uint32[Te+2]=b,this.uint32[Te+3]=T,this.uint32[Te+4]=C,this.uint16[we+10]=A,this.uint16[we+11]=z,this.uint16[we+12]=R,this.float32[Te+7]=U,this.float32[Te+8]=H,this.uint8[Fe+36]=K,this.uint8[Fe+37]=ae,this.uint8[Fe+38]=te,this.uint32[Te+10]=he,this.int16[we+22]=ge,i},t}(Pr);cs.prototype.bytesPerElement=48,ft("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",cs);var nc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d,v,b,T,C,A,z,R,U,H,K,ae,te,he,ge,we,Te,Fe,Ze,Ke,xt,it,Tt,ot,Yt){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,i,c,h,d,v,b,T,C,A,z,R,U,H,K,ae,te,he,ge,we,Te,Fe,Ze,Ke,xt,it,Tt,ot,Yt)},t.prototype.emplace=function(i,c,h,d,v,b,T,C,A,z,R,U,H,K,ae,te,he,ge,we,Te,Fe,Ze,Ke,xt,it,Tt,ot,Yt,Bt){var vt=34*i,rr=17*i;return this.int16[vt+0]=c,this.int16[vt+1]=h,this.int16[vt+2]=d,this.int16[vt+3]=v,this.int16[vt+4]=b,this.int16[vt+5]=T,this.int16[vt+6]=C,this.int16[vt+7]=A,this.uint16[vt+8]=z,this.uint16[vt+9]=R,this.uint16[vt+10]=U,this.uint16[vt+11]=H,this.uint16[vt+12]=K,this.uint16[vt+13]=ae,this.uint16[vt+14]=te,this.uint16[vt+15]=he,this.uint16[vt+16]=ge,this.uint16[vt+17]=we,this.uint16[vt+18]=Te,this.uint16[vt+19]=Fe,this.uint16[vt+20]=Ze,this.uint16[vt+21]=Ke,this.uint16[vt+22]=xt,this.uint32[rr+12]=it,this.float32[rr+13]=Tt,this.float32[rr+14]=ot,this.float32[rr+15]=Yt,this.float32[rr+16]=Bt,i},t}(Pr);nc.prototype.bytesPerElement=68,ft("StructArrayLayout8i15ui1ul4f68",nc);var ps=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var c=this.length;return this.resize(c+1),this.emplace(c,i)},t.prototype.emplace=function(i,c){return this.float32[1*i+0]=c,i},t}(Pr);ps.prototype.bytesPerElement=4,ft("StructArrayLayout1f4",ps);var Bo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,c,h)},t.prototype.emplace=function(i,c,h,d){var v=3*i;return this.int16[v+0]=c,this.int16[v+1]=h,this.int16[v+2]=d,i},t}(Pr);Bo.prototype.bytesPerElement=6,ft("StructArrayLayout3i6",Bo);var Ep=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,c,h)},t.prototype.emplace=function(i,c,h,d){var v=4*i;return this.uint32[2*i+0]=c,this.uint16[v+2]=h,this.uint16[v+3]=d,i},t}(Pr);Ep.prototype.bytesPerElement=8,ft("StructArrayLayout1ul2ui8",Ep);var ul=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c){var h=this.length;return this.resize(h+1),this.emplace(h,i,c)},t.prototype.emplace=function(i,c,h){var d=2*i;return this.uint16[d+0]=c,this.uint16[d+1]=h,i},t}(Pr);ul.prototype.bytesPerElement=4,ft("StructArrayLayout2ui4",ul);var Tp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var c=this.length;return this.resize(c+1),this.emplace(c,i)},t.prototype.emplace=function(i,c){return this.uint16[1*i+0]=c,i},t}(Pr);Tp.prototype.bytesPerElement=2,ft("StructArrayLayout1ui2",Tp);var ic=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,c,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,c,h,d)},t.prototype.emplace=function(i,c,h,d,v){var b=4*i;return this.float32[b+0]=c,this.float32[b+1]=h,this.float32[b+2]=d,this.float32[b+3]=v,i},t}(Pr);ic.prototype.bytesPerElement=16,ft("StructArrayLayout4f16",ic);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new ee(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(tc);o.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new o(this,i)},t}(wp);ft("CollisionBoxArray",s);var a=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(c){this._structArray.uint8[this._pos1+37]=c},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(c){this._structArray.uint8[this._pos1+38]=c},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(c){this._structArray.uint32[this._pos4+10]=c},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(tc);a.prototype.size=48;var p=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new a(this,i)},t}(cs);ft("PlacedSymbolArray",p);var m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(c){this._structArray.uint32[this._pos4+12]=c},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(tc);m.prototype.size=68;var g=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new m(this,i)},t}(nc);ft("SymbolInstanceArray",g);var x=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(ps);ft("GlyphOffsetArray",x);var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(Bo);ft("SymbolLineVertexArray",E);var k=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(tc);k.prototype.size=8;var D=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new k(this,i)},t}(Ep);ft("FeatureIndexArray",D);var N=Yn([{name:"a_pos",components:2,type:"Int16"}],4).members,q=function(e){e===void 0&&(e=[]),this.segments=e};function Z(e,t){return 256*(e=se(Math.floor(e),0,255))+se(Math.floor(t),0,255)}q.prototype.prepareSegment=function(e,t,i,c){var h=this.segments[this.segments.length-1];return e>q.MAX_VERTEX_ARRAY_LENGTH&&Ct("Max vertices per segment is "+q.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!h||h.vertexLength+e>q.MAX_VERTEX_ARRAY_LENGTH||h.sortKey!==c)&&(h={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},c!==void 0&&(h.sortKey=c),this.segments.push(h)),h},q.prototype.get=function(){return this.segments},q.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var c in i.vaos)i.vaos[c].destroy()}},q.simpleSegment=function(e,t,i,c){return new q([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:c,vaos:{},sortKey:0}])},q.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ft("SegmentVector",q);var Y=Yn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),J=I(function(e){e.exports=function(t,i){var c,h,d,v,b,T,C,A;for(h=t.length-(c=3&t.length),d=i,b=3432918353,T=461845907,A=0;A<h;)C=255&t.charCodeAt(A)|(255&t.charCodeAt(++A))<<8|(255&t.charCodeAt(++A))<<16|(255&t.charCodeAt(++A))<<24,++A,d=27492+(65535&(v=5*(65535&(d=(d^=C=(65535&(C=(C=(65535&C)*b+(((C>>>16)*b&65535)<<16)&4294967295)<<15|C>>>17))*T+(((C>>>16)*T&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(C=0,c){case 3:C^=(255&t.charCodeAt(A+2))<<16;case 2:C^=(255&t.charCodeAt(A+1))<<8;case 1:d^=C=(65535&(C=(C=(65535&(C^=255&t.charCodeAt(A)))*b+(((C>>>16)*b&65535)<<16)&4294967295)<<15|C>>>17))*T+(((C>>>16)*T&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),ie=I(function(e){e.exports=function(t,i){for(var c,h=t.length,d=i^h,v=0;h>=4;)c=1540483477*(65535&(c=255&t.charCodeAt(v)|(255&t.charCodeAt(++v))<<8|(255&t.charCodeAt(++v))<<16|(255&t.charCodeAt(++v))<<24))+((1540483477*(c>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:d^=(255&t.charCodeAt(v+2))<<16;case 2:d^=(255&t.charCodeAt(v+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(v)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),$=J,ne=ie;$.murmur3=J,$.murmur2=ne;var ce=function(){this.ids=[],this.positions=[],this.indexed=!1};ce.prototype.add=function(e,t,i,c){this.ids.push(ke(e)),this.positions.push(t,i,c)},ce.prototype.getPositions=function(e){for(var t=ke(e),i=0,c=this.ids.length-1;i<c;){var h=i+c>>1;this.ids[h]>=t?c=h:i=h+1}for(var d=[];this.ids[i]===t;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},ce.serialize=function(e,t){var i=new Float64Array(e.ids),c=new Uint32Array(e.positions);return function h(d,v,b,T){for(;b<T;){for(var C=d[b+T>>1],A=b-1,z=T+1;;){do A++;while(d[A]<C);do z--;while(d[z]>C);if(A>=z)break;Se(d,A,z),Se(v,3*A,3*z),Se(v,3*A+1,3*z+1),Se(v,3*A+2,3*z+2)}z-b<T-z?(h(d,v,b,z),b=z+1):(h(d,v,z+1,T),T=z)}}(i,c,0,i.length-1),t&&t.push(i.buffer,c.buffer),{ids:i,positions:c}},ce.deserialize=function(e){var t=new ce;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var ye=Math.pow(2,53)-1;function ke(e){var t=+e;return!isNaN(t)&&t<=ye?t:$(String(e))}function Se(e,t,i){var c=e[t];e[t]=e[i],e[i]=c}ft("FeaturePositionMap",ce);var ze=function(e,t){this.gl=e.gl,this.location=t},Ne=function(e){function t(i,c){e.call(this,i,c),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(ze),He=function(e){function t(i,c){e.call(this,i,c),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(ze),We=function(e){function t(i,c){e.call(this,i,c),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(ze),lt=function(e){function t(i,c){e.call(this,i,c),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(ze),Et=function(e){function t(i,c){e.call(this,i,c),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(ze),At=function(e){function t(i,c){e.call(this,i,c),this.current=fr.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(ze),kt=new Float32Array(16),mr=function(e){function t(i,c){e.call(this,i,c),this.current=kt}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var c=1;c<16;c++)if(i[c]!==this.current[c]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(ze);function ht(e){return[Z(255*e.r,255*e.g),Z(255*e.b,255*e.a)]}var Zt=function(e,t,i){this.value=e,this.uniformNames=t.map(function(c){return"u_"+c}),this.type=i};Zt.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Zt.prototype.getBinding=function(e,t,i){return this.type==="color"?new At(e,t):new He(e,t)};var Jt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Jt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Jt.prototype.setUniform=function(e,t,i,c){var h=c==="u_pattern_to"?this.patternTo:c==="u_pattern_from"?this.patternFrom:c==="u_pixel_ratio_to"?this.pixelRatioTo:c==="u_pixel_ratio_from"?this.pixelRatioFrom:null;h&&e.set(h)},Jt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new Et(e,t):new He(e,t)};var qt=function(e,t,i,c){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(h){return{name:"a_"+h,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new c};qt.prototype.populatePaintArray=function(e,t,i,c,h){var d=this.paintVertexArray.length,v=this.expression.evaluate(new nr(0),t,{},c,[],h);this.paintVertexArray.resize(e),this._setPaintValue(d,e,v)},qt.prototype.updatePaintArray=function(e,t,i,c){var h=this.expression.evaluate({zoom:0},i,c);this._setPaintValue(e,t,h)},qt.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var c=ht(i),h=e;h<t;h++)this.paintVertexArray.emplace(h,c[0],c[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},qt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var jt=function(e,t,i,c,h,d){this.expression=e,this.uniformNames=t.map(function(v){return"u_"+v+"_t"}),this.type=i,this.useIntegerZoom=c,this.zoom=h,this.maxValue=0,this.paintVertexAttributes=t.map(function(v){return{name:"a_"+v,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};jt.prototype.populatePaintArray=function(e,t,i,c,h){var d=this.expression.evaluate(new nr(this.zoom),t,{},c,[],h),v=this.expression.evaluate(new nr(this.zoom+1),t,{},c,[],h),b=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(b,e,d,v)},jt.prototype.updatePaintArray=function(e,t,i,c){var h=this.expression.evaluate({zoom:this.zoom},i,c),d=this.expression.evaluate({zoom:this.zoom+1},i,c);this._setPaintValue(e,t,h,d)},jt.prototype._setPaintValue=function(e,t,i,c){if(this.type==="color")for(var h=ht(i),d=ht(c),v=e;v<t;v++)this.paintVertexArray.emplace(v,h[0],h[1],d[0],d[1]);else{for(var b=e;b<t;b++)this.paintVertexArray.emplace(b,i,c);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(c))}},jt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},jt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},jt.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,c=se(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(c)},jt.prototype.getBinding=function(e,t,i){return new He(e,t)};var Kt=function(e,t,i,c,h,d){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=c,this.layerId=d,this.zoomInPaintVertexArray=new h,this.zoomOutPaintVertexArray=new h};Kt.prototype.populatePaintArray=function(e,t,i){var c=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(c,e,t.patterns&&t.patterns[this.layerId],i)},Kt.prototype.updatePaintArray=function(e,t,i,c,h){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],h)},Kt.prototype._setPaintValues=function(e,t,i,c){if(c&&i){var h=c[i.min],d=c[i.mid],v=c[i.max];if(h&&d&&v)for(var b=e;b<t;b++)this.zoomInPaintVertexArray.emplace(b,d.tl[0],d.tl[1],d.br[0],d.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],d.pixelRatio,h.pixelRatio),this.zoomOutPaintVertexArray.emplace(b,d.tl[0],d.tl[1],d.br[0],d.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],d.pixelRatio,v.pixelRatio)}},Kt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Y.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Y.members,this.expression.isStateDependent))},Kt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Nt=function(e,t,i){this.binders={},this._buffers=[];var c=[];for(var h in e.paint._values)if(i(h)){var d=e.paint.get(h);if(d instanceof vi&&Ji(d.property.specification)){var v=Vn(h,e.type),b=d.value,T=d.property.specification.type,C=d.property.useIntegerZoom,A=d.property.specification["property-type"],z=A==="cross-faded"||A==="cross-faded-data-driven";if(b.kind==="constant")this.binders[h]=z?new Jt(b.value,v):new Zt(b.value,v,T),c.push("/u_"+h);else if(b.kind==="source"||z){var R=fn(h,T,"source");this.binders[h]=z?new Kt(b,T,C,t,R,e.id):new qt(b,v,T,R),c.push("/a_"+h)}else{var U=fn(h,T,"composite");this.binders[h]=new jt(b,v,T,C,t,U),c.push("/z_"+h)}}}this.cacheKey=c.sort().join("")};Nt.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof qt||t instanceof jt?t.maxValue:0},Nt.prototype.populatePaintArrays=function(e,t,i,c,h){for(var d in this.binders){var v=this.binders[d];(v instanceof qt||v instanceof jt||v instanceof Kt)&&v.populatePaintArray(e,t,i,c,h)}},Nt.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var c=this.binders[i];c instanceof Jt&&c.setConstantPatternPositions(e,t)}},Nt.prototype.updatePaintArrays=function(e,t,i,c,h){var d=!1;for(var v in e)for(var b=0,T=t.getPositions(v);b<T.length;b+=1){var C=T[b],A=i.feature(C.index);for(var z in this.binders){var R=this.binders[z];if((R instanceof qt||R instanceof jt||R instanceof Kt)&&R.expression.isStateDependent===!0){var U=c.paint.get(z);R.expression=U.value,R.updatePaintArray(C.start,C.end,A,e[v],h),d=!0}}}return d},Nt.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Zt||i instanceof Jt)&&e.push.apply(e,i.uniformNames.map(function(c){return"#define HAS_UNIFORM_"+c}))}return e},Nt.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof qt||i instanceof jt)for(var c=0;c<i.paintVertexAttributes.length;c++)e.push(i.paintVertexAttributes[c].name);else if(i instanceof Kt)for(var h=0;h<Y.members.length;h++)e.push(Y.members[h].name)}return e},Nt.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Zt||i instanceof Jt||i instanceof jt)for(var c=0,h=i.uniformNames;c<h.length;c+=1)e.push(h[c])}return e},Nt.prototype.getPaintVertexBuffers=function(){return this._buffers},Nt.prototype.getUniforms=function(e,t){var i=[];for(var c in this.binders){var h=this.binders[c];if(h instanceof Zt||h instanceof Jt||h instanceof jt)for(var d=0,v=h.uniformNames;d<v.length;d+=1){var b=v[d];if(t[b]){var T=h.getBinding(e,t[b],b);i.push({name:b,property:c,binding:T})}}}return i},Nt.prototype.setUniforms=function(e,t,i,c){for(var h=0,d=t;h<d.length;h+=1){var v=d[h],b=v.name,T=v.property;this.binders[T].setUniform(v.binding,c,i.get(T),b)}},Nt.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Kt){var c=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;c&&this._buffers.push(c)}else(i instanceof qt||i instanceof jt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Nt.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof qt||i instanceof jt||i instanceof Kt)&&i.upload(e)}this.updatePaintBuffers()},Nt.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof qt||t instanceof jt||t instanceof Kt)&&t.destroy()}};var Ot=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var c=0,h=e;c<h.length;c+=1){var d=h[c];this.programConfigurations[d.id]=new Nt(d,t,i)}this.needsUpload=!1,this._featureMap=new ce,this._bufferOffset=0};function Vn(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function fn(e,t,i){var c={color:{source:du,composite:ic},number:{source:ps,composite:du}},h=function(d){return{"line-pattern":{source:ba,composite:ba},"fill-pattern":{source:ba,composite:ba},"fill-extrusion-pattern":{source:ba,composite:ba}}[d]}(e);return h&&h[i]||c[t][i]}Ot.prototype.populatePaintArrays=function(e,t,i,c,h,d){for(var v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,t,c,h,d);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Ot.prototype.updatePaintArrays=function(e,t,i,c){for(var h=0,d=i;h<d.length;h+=1){var v=d[h];this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,t,v,c)||this.needsUpload}},Ot.prototype.get=function(e){return this.programConfigurations[e]},Ot.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Ot.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ft("ConstantBinder",Zt),ft("CrossFadedConstantBinder",Jt),ft("SourceExpressionBinder",qt),ft("CrossFadedCompositeBinder",Kt),ft("CompositeExpressionBinder",jt),ft("ProgramConfiguration",Nt,{omit:["_buffers"]}),ft("ProgramConfigurationSet",Ot);var pi=Math.pow(2,14)-1,Qn=-pi-1;function un(e){for(var t=8192/e.extent,i=e.loadGeometry(),c=0;c<i.length;c++)for(var h=i[c],d=0;d<h.length;d++){var v=h[d],b=Math.round(v.x*t),T=Math.round(v.y*t);v.x=se(b,Qn,pi),v.y=se(T,Qn,pi),(b<v.x||b>v.x+1||T<v.y||T>v.y+1)&&Ct("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function _n(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?un(e):[]}}function ao(e,t,i,c,h){e.emplaceBack(2*t+(c+1)/2,2*i+(h+1)/2)}var _i=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Gs,this.indexArray=new ls,this.segments=new q,this.programConfigurations=new Ot(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function hs(e,t){for(var i=0;i<e.length;i++)if(wa(t,e[i]))return!0;for(var c=0;c<t.length;c++)if(wa(e,t[c]))return!0;return!!ll(e,t)}function Li(e,t,i){return!!wa(e,t)||!!fs(t,e,i)}function oa(e,t){if(e.length===1)return cl(t,e[0]);for(var i=0;i<t.length;i++)for(var c=t[i],h=0;h<c.length;h++)if(wa(e,c[h]))return!0;for(var d=0;d<e.length;d++)if(cl(t,e[d]))return!0;for(var v=0;v<t.length;v++)if(ll(e,t[v]))return!0;return!1}function Uo(e,t,i){if(e.length>1){if(ll(e,t))return!0;for(var c=0;c<t.length;c++)if(fs(t[c],e,i))return!0}for(var h=0;h<e.length;h++)if(fs(e[h],t,i))return!0;return!1}function ll(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var c=e[i],h=e[i+1],d=0;d<t.length-1;d++)if(vu(c,h,t[d],t[d+1]))return!0;return!1}function vu(e,t,i,c){return Ut(e,i,c)!==Ut(t,i,c)&&Ut(e,t,i)!==Ut(e,t,c)}function fs(e,t,i){var c=i*i;if(t.length===1)return e.distSqr(t[0])<c;for(var h=1;h<t.length;h++)if(gu(e,t[h-1],t[h])<c)return!0;return!1}function gu(e,t,i){var c=t.distSqr(i);if(c===0)return e.distSqr(t);var h=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/c;return e.distSqr(h<0?t:h>1?i:i.sub(t)._mult(h)._add(t))}function cl(e,t){for(var i,c,h,d=!1,v=0;v<e.length;v++)for(var b=0,T=(i=e[v]).length-1;b<i.length;T=b++)(c=i[b]).y>t.y!=(h=i[T]).y>t.y&&t.x<(h.x-c.x)*(t.y-c.y)/(h.y-c.y)+c.x&&(d=!d);return d}function wa(e,t){for(var i=!1,c=0,h=e.length-1;c<e.length;h=c++){var d=e[c],v=e[h];d.y>t.y!=v.y>t.y&&t.x<(v.x-d.x)*(t.y-d.y)/(v.y-d.y)+d.x&&(i=!i)}return i}function pl(e,t,i){var c=i[0],h=i[2];if(e.x<c.x&&t.x<c.x||e.x>h.x&&t.x>h.x||e.y<c.y&&t.y<c.y||e.y>h.y&&t.y>h.y)return!1;var d=Ut(e,t,i[0]);return d!==Ut(e,t,i[1])||d!==Ut(e,t,i[2])||d!==Ut(e,t,i[3])}function Sa(e,t,i){var c=t.paint.get(e).value;return c.kind==="constant"?c.value:i.programConfigurations.get(t.id).getMaxValue(e)}function qn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function $a(e,t,i,c,h){if(!t[0]&&!t[1])return e;var d=ee.convert(t)._mult(h);i==="viewport"&&d._rotate(-c);for(var v=[],b=0;b<e.length;b++)v.push(e[b].sub(d));return v}_i.prototype.populate=function(e,t,i){var c=this.layers[0],h=[],d=null;c.type==="circle"&&(d=c.layout.get("circle-sort-key"));for(var v=0,b=e;v<b.length;v+=1){var T=b[v],C=T.feature,A=T.id,z=T.index,R=T.sourceLayerIndex,U=this.layers[0]._featureFilter.needGeometry,H=_n(C,U);if(this.layers[0]._featureFilter.filter(new nr(this.zoom),H,i)){var K=d?d.evaluate(H,{},i):void 0,ae={id:A,properties:C.properties,type:C.type,sourceLayerIndex:R,index:z,geometry:U?H.geometry:un(C),patterns:{},sortKey:K};h.push(ae)}}d&&h.sort(function(Ke,xt){return Ke.sortKey-xt.sortKey});for(var te=0,he=h;te<he.length;te+=1){var ge=he[te],we=ge.geometry,Te=ge.index,Fe=ge.sourceLayerIndex,Ze=e[Te].feature;this.addFeature(ge,we,Te,i),t.featureIndex.insert(Ze,we,Te,Fe,this.index)}},_i.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},_i.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},_i.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_i.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,N),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},_i.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_i.prototype.addFeature=function(e,t,i,c){for(var h=0,d=t;h<d.length;h+=1)for(var v=0,b=d[h];v<b.length;v+=1){var T=b[v],C=T.x,A=T.y;if(!(C<0||C>=8192||A<0||A>=8192)){var z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),R=z.vertexLength;ao(this.layoutVertexArray,C,A,-1,-1),ao(this.layoutVertexArray,C,A,1,-1),ao(this.layoutVertexArray,C,A,1,1),ao(this.layoutVertexArray,C,A,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),z.vertexLength+=4,z.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},c)},ft("CircleBucket",_i,{omit:["layers"]});var ds=new ai({"circle-sort-key":new yt(V.layout_circle["circle-sort-key"])}),$s={paint:new ai({"circle-radius":new yt(V.paint_circle["circle-radius"]),"circle-color":new yt(V.paint_circle["circle-color"]),"circle-blur":new yt(V.paint_circle["circle-blur"]),"circle-opacity":new yt(V.paint_circle["circle-opacity"]),"circle-translate":new St(V.paint_circle["circle-translate"]),"circle-translate-anchor":new St(V.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new St(V.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new St(V.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(V.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(V.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(V.paint_circle["circle-stroke-opacity"])}),layout:ds},wr=typeof Float32Array!="undefined"?Float32Array:Array;function So(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Di(e,t,i){var c=t[0],h=t[1],d=t[2],v=t[3],b=t[4],T=t[5],C=t[6],A=t[7],z=t[8],R=t[9],U=t[10],H=t[11],K=t[12],ae=t[13],te=t[14],he=t[15],ge=i[0],we=i[1],Te=i[2],Fe=i[3];return e[0]=ge*c+we*b+Te*z+Fe*K,e[1]=ge*h+we*T+Te*R+Fe*ae,e[2]=ge*d+we*C+Te*U+Fe*te,e[3]=ge*v+we*A+Te*H+Fe*he,e[4]=(ge=i[4])*c+(we=i[5])*b+(Te=i[6])*z+(Fe=i[7])*K,e[5]=ge*h+we*T+Te*R+Fe*ae,e[6]=ge*d+we*C+Te*U+Fe*te,e[7]=ge*v+we*A+Te*H+Fe*he,e[8]=(ge=i[8])*c+(we=i[9])*b+(Te=i[10])*z+(Fe=i[11])*K,e[9]=ge*h+we*T+Te*R+Fe*ae,e[10]=ge*d+we*C+Te*U+Fe*te,e[11]=ge*v+we*A+Te*H+Fe*he,e[12]=(ge=i[12])*c+(we=i[13])*b+(Te=i[14])*z+(Fe=i[15])*K,e[13]=ge*h+we*T+Te*R+Fe*ae,e[14]=ge*d+we*C+Te*U+Fe*te,e[15]=ge*v+we*A+Te*H+Fe*he,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var Hs,Em=Di;function oc(e,t,i){var c=t[0],h=t[1],d=t[2],v=t[3];return e[0]=i[0]*c+i[4]*h+i[8]*d+i[12]*v,e[1]=i[1]*c+i[5]*h+i[9]*d+i[13]*v,e[2]=i[2]*c+i[6]*h+i[10]*d+i[14]*v,e[3]=i[3]*c+i[7]*h+i[11]*d+i[15]*v,e}Hs=new wr(3),wr!=Float32Array&&(Hs[0]=0,Hs[1]=0,Hs[2]=0),function(){var e=new wr(4);wr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var Tm=(function(){var e=new wr(2);wr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,$s)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new _i(i)},t.prototype.queryRadius=function(i){var c=i;return Sa("circle-radius",this,c)+Sa("circle-stroke-width",this,c)+qn(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,c,h,d,v,b,T,C){for(var A=$a(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,T),z=this.paint.get("circle-radius").evaluate(c,h)+this.paint.get("circle-stroke-width").evaluate(c,h),R=this.paint.get("circle-pitch-alignment")==="map",U=R?A:function(Ze,Ke){return Ze.map(function(xt){return hl(xt,Ke)})}(A,C),H=R?z*T:z,K=0,ae=d;K<ae.length;K+=1)for(var te=0,he=ae[K];te<he.length;te+=1){var ge=he[te],we=R?ge:hl(ge,C),Te=H,Fe=oc([],[ge.x,ge.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Te*=Fe[3]/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Te*=b.cameraToCenterDistance/Fe[3]),Li(U,we,Te))return!0}return!1},t}(xa));function hl(e,t){var i=oc([],[e.x,e.y,0,1],t);return new ee(i[0]/i[3],i[1]/i[3])}var lf=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(_i);function _u(e,t,i,c){var h=t.width,d=t.height;if(c){if(c instanceof Uint8ClampedArray)c=new Uint8Array(c.buffer);else if(c.length!==h*d*i)throw new RangeError("mismatched image size")}else c=new Uint8Array(h*d*i);return e.width=h,e.height=d,e.data=c,e}function ac(e,t,i){var c=t.width,h=t.height;if(c!==e.width||h!==e.height){var d=_u({},{width:c,height:h},i);Pm(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,c),height:Math.min(e.height,h)},i),e.width=c,e.height=h,e.data=d.data}}function Pm(e,t,i,c,h,d){if(h.width===0||h.height===0)return t;if(h.width>e.width||h.height>e.height||i.x>e.width-h.width||i.y>e.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>t.width||h.height>t.height||c.x>t.width-h.width||c.y>t.height-h.height)throw new RangeError("out of range destination coordinates for image copy");for(var v=e.data,b=t.data,T=0;T<h.height;T++)for(var C=((i.y+T)*e.width+i.x)*d,A=((c.y+T)*t.width+c.x)*d,z=0;z<h.width*d;z++)b[A+z]=v[C+z];return t}ft("HeatmapBucket",lf,{omit:["layers"]});var fl=function(e,t){_u(this,e,1,t)};fl.prototype.resize=function(e){ac(this,e,1)},fl.prototype.clone=function(){return new fl({width:this.width,height:this.height},new Uint8Array(this.data))},fl.copy=function(e,t,i,c,h){Pm(e,t,i,c,h,1)};var so=function(e,t){_u(this,e,4,t)};so.prototype.resize=function(e){ac(this,e,4)},so.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},so.prototype.clone=function(){return new so({width:this.width,height:this.height},new Uint8Array(this.data))},so.copy=function(e,t,i,c,h){Pm(e,t,i,c,h,4)},ft("AlphaImage",fl),ft("RGBAImage",so);var _w={paint:new ai({"heatmap-radius":new yt(V.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(V.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new St(V.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ia(V.paint_heatmap["heatmap-color"]),"heatmap-opacity":new St(V.paint_heatmap["heatmap-opacity"])})};function Ng(e){var t={},i=e.resolution||256,c=e.clips?e.clips.length:1,h=e.image||new so({width:i,height:c}),d=function(H,K,ae){t[e.evaluationKey]=ae;var te=e.expression.evaluate(t);h.data[H+K+0]=Math.floor(255*te.r/te.a),h.data[H+K+1]=Math.floor(255*te.g/te.a),h.data[H+K+2]=Math.floor(255*te.b/te.a),h.data[H+K+3]=Math.floor(255*te.a)};if(e.clips)for(var v=0,b=0;v<c;++v,b+=4*i)for(var T=0,C=0;T<i;T++,C+=4){var A=T/(i-1),z=e.clips[v];d(b,C,z.start*(1-A)+z.end*A)}else for(var R=0,U=0;R<i;R++,U+=4)d(0,U,R/(i-1));return h}var xw=function(e){function t(i){e.call(this,i,_w),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new lf(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=Ng({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(xa),bw={paint:new ai({"hillshade-illumination-direction":new St(V.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new St(V.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new St(V.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new St(V.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new St(V.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new St(V.paint_hillshade["hillshade-accent-color"])})},ww=function(e){function t(i){e.call(this,i,bw)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(xa),Sw=Yn([{name:"a_pos",components:2,type:"Int16"}],4).members,Cm=cf,Ew=cf;function cf(e,t,i){i=i||2;var c,h,d,v,b,T,C,A=t&&t.length,z=A?t[0]*i:e.length,R=jg(e,0,z,i,!0),U=[];if(!R||R.next===R.prev)return U;if(A&&(R=function(K,ae,te,he){var ge,we,Te,Fe=[];for(ge=0,we=ae.length;ge<we;ge++)(Te=jg(K,ae[ge]*he,ge<we-1?ae[ge+1]*he:K.length,he,!1))===Te.next&&(Te.steiner=!0),Fe.push(zw(Te));for(Fe.sort(kw),ge=0;ge<Fe.length;ge++)Aw(Fe[ge],te),te=xu(te,te.next);return te}(e,t,R,i)),e.length>80*i){c=d=e[0],h=v=e[1];for(var H=i;H<z;H+=i)(b=e[H])<c&&(c=b),(T=e[H+1])<h&&(h=T),b>d&&(d=b),T>v&&(v=T);C=(C=Math.max(d-c,v-h))!==0?1/C:0}return Pp(R,U,i,c,h,C),U}function jg(e,t,i,c,h){var d,v;if(h===Am(e,t,i,c)>0)for(d=t;d<i;d+=c)v=Zg(d,e[d],e[d+1],v);else for(d=i-c;d>=t;d-=c)v=Zg(d,e[d],e[d+1],v);return v&&pf(v,v.next)&&(Ip(v),v=v.next),v}function xu(e,t){if(!e)return e;t||(t=e);var i,c=e;do if(i=!1,c.steiner||!pf(c,c.next)&&Dn(c.prev,c,c.next)!==0)c=c.next;else{if(Ip(c),(c=t=c.prev)===c.next)break;i=!0}while(i||c!==t);return t}function Pp(e,t,i,c,h,d,v){if(e){!v&&d&&function(A,z,R,U){var H=A;do H.z===null&&(H.z=Im(H.x,H.y,z,R,U)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==A);H.prevZ.nextZ=null,H.prevZ=null,function(K){var ae,te,he,ge,we,Te,Fe,Ze,Ke=1;do{for(te=K,K=null,we=null,Te=0;te;){for(Te++,he=te,Fe=0,ae=0;ae<Ke&&(Fe++,he=he.nextZ);ae++);for(Ze=Ke;Fe>0||Ze>0&&he;)Fe!==0&&(Ze===0||!he||te.z<=he.z)?(ge=te,te=te.nextZ,Fe--):(ge=he,he=he.nextZ,Ze--),we?we.nextZ=ge:K=ge,ge.prevZ=we,we=ge;te=he}we.nextZ=null,Ke*=2}while(Te>1)}(H)}(e,c,h,d);for(var b,T,C=e;e.prev!==e.next;)if(b=e.prev,T=e.next,d?Pw(e,c,h,d):Tw(e))t.push(b.i/i),t.push(e.i/i),t.push(T.i/i),Ip(e),e=T.next,C=T.next;else if((e=T)===C){v?v===1?Pp(e=Cw(xu(e),t,i),t,i,c,h,d,2):v===2&&Iw(e,t,i,c,h,d):Pp(xu(e),t,i,c,h,d,1);break}}}function Tw(e){var t=e.prev,i=e,c=e.next;if(Dn(t,i,c)>=0)return!1;for(var h=e.next.next;h!==e.prev;){if(sc(t.x,t.y,i.x,i.y,c.x,c.y,h.x,h.y)&&Dn(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function Pw(e,t,i,c){var h=e.prev,d=e,v=e.next;if(Dn(h,d,v)>=0)return!1;for(var b=h.x>d.x?h.x>v.x?h.x:v.x:d.x>v.x?d.x:v.x,T=h.y>d.y?h.y>v.y?h.y:v.y:d.y>v.y?d.y:v.y,C=Im(h.x<d.x?h.x<v.x?h.x:v.x:d.x<v.x?d.x:v.x,h.y<d.y?h.y<v.y?h.y:v.y:d.y<v.y?d.y:v.y,t,i,c),A=Im(b,T,t,i,c),z=e.prevZ,R=e.nextZ;z&&z.z>=C&&R&&R.z<=A;){if(z!==e.prev&&z!==e.next&&sc(h.x,h.y,d.x,d.y,v.x,v.y,z.x,z.y)&&Dn(z.prev,z,z.next)>=0||(z=z.prevZ,R!==e.prev&&R!==e.next&&sc(h.x,h.y,d.x,d.y,v.x,v.y,R.x,R.y)&&Dn(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;z&&z.z>=C;){if(z!==e.prev&&z!==e.next&&sc(h.x,h.y,d.x,d.y,v.x,v.y,z.x,z.y)&&Dn(z.prev,z,z.next)>=0)return!1;z=z.prevZ}for(;R&&R.z<=A;){if(R!==e.prev&&R!==e.next&&sc(h.x,h.y,d.x,d.y,v.x,v.y,R.x,R.y)&&Dn(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function Cw(e,t,i){var c=e;do{var h=c.prev,d=c.next.next;!pf(h,d)&&Vg(h,c,c.next,d)&&Cp(h,d)&&Cp(d,h)&&(t.push(h.i/i),t.push(c.i/i),t.push(d.i/i),Ip(c),Ip(c.next),c=e=d),c=c.next}while(c!==e);return xu(c)}function Iw(e,t,i,c,h,d){var v=e;do{for(var b=v.next.next;b!==v.prev;){if(v.i!==b.i&&Lw(v,b)){var T=qg(v,b);return v=xu(v,v.next),T=xu(T,T.next),Pp(v,t,i,c,h,d),void Pp(T,t,i,c,h,d)}b=b.next}v=v.next}while(v!==e)}function kw(e,t){return e.x-t.x}function Aw(e,t){if(t=function(c,h){var d,v=h,b=c.x,T=c.y,C=-1/0;do{if(T<=v.y&&T>=v.next.y&&v.next.y!==v.y){var A=v.x+(T-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(A<=b&&A>C){if(C=A,A===b){if(T===v.y)return v;if(T===v.next.y)return v.next}d=v.x<v.next.x?v:v.next}}v=v.next}while(v!==h);if(!d)return null;if(b===C)return d;var z,R=d,U=d.x,H=d.y,K=1/0;v=d;do b>=v.x&&v.x>=U&&b!==v.x&&sc(T<H?b:C,T,U,H,T<H?C:b,T,v.x,v.y)&&(z=Math.abs(T-v.y)/(b-v.x),Cp(v,c)&&(z<K||z===K&&(v.x>d.x||v.x===d.x&&Mw(d,v)))&&(d=v,K=z)),v=v.next;while(v!==R);return d}(e,t)){var i=qg(t,e);xu(t,t.next),xu(i,i.next)}}function Mw(e,t){return Dn(e.prev,e,t.prev)<0&&Dn(t.next,e,e.next)<0}function Im(e,t,i,c,h){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*h)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-c)*h)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function zw(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function sc(e,t,i,c,h,d,v,b){return(h-v)*(t-b)-(e-v)*(d-b)>=0&&(e-v)*(c-b)-(i-v)*(t-b)>=0&&(i-v)*(d-b)-(h-v)*(c-b)>=0}function Lw(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,c){var h=i;do{if(h.i!==i.i&&h.next.i!==i.i&&h.i!==c.i&&h.next.i!==c.i&&Vg(h,h.next,i,c))return!0;h=h.next}while(h!==i);return!1}(e,t)&&(Cp(e,t)&&Cp(t,e)&&function(i,c){var h=i,d=!1,v=(i.x+c.x)/2,b=(i.y+c.y)/2;do h.y>b!=h.next.y>b&&h.next.y!==h.y&&v<(h.next.x-h.x)*(b-h.y)/(h.next.y-h.y)+h.x&&(d=!d),h=h.next;while(h!==i);return d}(e,t)&&(Dn(e.prev,e,t.prev)||Dn(e,t.prev,t))||pf(e,t)&&Dn(e.prev,e,e.next)>0&&Dn(t.prev,t,t.next)>0)}function Dn(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function pf(e,t){return e.x===t.x&&e.y===t.y}function Vg(e,t,i,c){var h=ff(Dn(e,t,i)),d=ff(Dn(e,t,c)),v=ff(Dn(i,c,e)),b=ff(Dn(i,c,t));return h!==d&&v!==b||!(h!==0||!hf(e,i,t))||!(d!==0||!hf(e,c,t))||!(v!==0||!hf(i,e,c))||!(b!==0||!hf(i,t,c))}function hf(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function ff(e){return e>0?1:e<0?-1:0}function Cp(e,t){return Dn(e.prev,e,e.next)<0?Dn(e,t,e.next)>=0&&Dn(e,e.prev,t)>=0:Dn(e,t,e.prev)<0||Dn(e,e.next,t)<0}function qg(e,t){var i=new km(e.i,e.x,e.y),c=new km(t.i,t.x,t.y),h=e.next,d=t.prev;return e.next=t,t.prev=e,i.next=h,h.prev=i,c.next=i,i.prev=c,d.next=c,c.prev=d,c}function Zg(e,t,i,c){var h=new km(e,t,i);return c?(h.next=c.next,h.prev=c,c.next.prev=h,c.next=h):(h.prev=h,h.next=h),h}function Ip(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function km(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Am(e,t,i,c){for(var h=0,d=t,v=i-c;d<i;d+=c)h+=(e[v]-e[d])*(e[d+1]+e[v+1]),v=d;return h}function Dw(e,t,i,c,h){(function d(v,b,T,C,A){for(;C>T;){if(C-T>600){var z=C-T+1,R=b-T+1,U=Math.log(z),H=.5*Math.exp(2*U/3),K=.5*Math.sqrt(U*H*(z-H)/z)*(R-z/2<0?-1:1);d(v,b,Math.max(T,Math.floor(b-R*H/z+K)),Math.min(C,Math.floor(b+(z-R)*H/z+K)),A)}var ae=v[b],te=T,he=C;for(kp(v,T,b),A(v[C],ae)>0&&kp(v,T,C);te<he;){for(kp(v,te,he),te++,he--;A(v[te],ae)<0;)te++;for(;A(v[he],ae)>0;)he--}A(v[T],ae)===0?kp(v,T,he):kp(v,++he,C),he<=b&&(T=he+1),b<=he&&(C=he-1)}})(e,t,i||0,c||e.length-1,h||Ow)}function kp(e,t,i){var c=e[t];e[t]=e[i],e[i]=c}function Ow(e,t){return e<t?-1:e>t?1:0}function Mm(e,t){var i=e.length;if(i<=1)return[e];for(var c,h,d=[],v=0;v<i;v++){var b=Cr(e[v]);b!==0&&(e[v].area=Math.abs(b),h===void 0&&(h=b<0),h===b<0?(c&&d.push(c),c=[e[v]]):c.push(e[v]))}if(c&&d.push(c),t>1)for(var T=0;T<d.length;T++)d[T].length<=t||(Dw(d[T],t,1,d[T].length-1,Rw),d[T]=d[T].slice(0,t));return d}function Rw(e,t){return t.area-e.area}function zm(e,t,i){for(var c=i.patternDependencies,h=!1,d=0,v=t;d<v.length;d+=1){var b=v[d].paint.get(e+"-pattern");b.isConstant()||(h=!0);var T=b.constantOr(null);T&&(h=!0,c[T.to]=!0,c[T.from]=!0)}return h}function Lm(e,t,i,c,h){for(var d=h.patternDependencies,v=0,b=t;v<b.length;v+=1){var T=b[v],C=T.paint.get(e+"-pattern").value;if(C.kind!=="constant"){var A=C.evaluate({zoom:c-1},i,{},h.availableImages),z=C.evaluate({zoom:c},i,{},h.availableImages),R=C.evaluate({zoom:c+1},i,{},h.availableImages);z=z&&z.name?z.name:z,R=R&&R.name?R.name:R,d[A=A&&A.name?A.name:A]=!0,d[z]=!0,d[R]=!0,i.patterns[T.id]={min:A,mid:z,max:R}}}return i}cf.deviation=function(e,t,i,c){var h=t&&t.length,d=Math.abs(Am(e,0,h?t[0]*i:e.length,i));if(h)for(var v=0,b=t.length;v<b;v++)d-=Math.abs(Am(e,t[v]*i,v<b-1?t[v+1]*i:e.length,i));var T=0;for(v=0;v<c.length;v+=3){var C=c[v]*i,A=c[v+1]*i,z=c[v+2]*i;T+=Math.abs((e[C]-e[z])*(e[A+1]-e[C+1])-(e[C]-e[A])*(e[z+1]-e[C+1]))}return d===0&&T===0?0:Math.abs((T-d)/d)},cf.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},c=0,h=0;h<e.length;h++){for(var d=0;d<e[h].length;d++)for(var v=0;v<t;v++)i.vertices.push(e[h][d][v]);h>0&&i.holes.push(c+=e[h-1].length)}return i},Cm.default=Ew;var Ha=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Gs,this.indexArray=new ls,this.indexArray2=new ul,this.programConfigurations=new Ot(e.layers,e.zoom),this.segments=new q,this.segments2=new q,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Ha.prototype.populate=function(e,t,i){this.hasPattern=zm("fill",this.layers,t);for(var c=this.layers[0].layout.get("fill-sort-key"),h=[],d=0,v=e;d<v.length;d+=1){var b=v[d],T=b.feature,C=b.id,A=b.index,z=b.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,U=_n(T,R);if(this.layers[0]._featureFilter.filter(new nr(this.zoom),U,i)){var H=c?c.evaluate(U,{},i,t.availableImages):void 0,K={id:C,properties:T.properties,type:T.type,sourceLayerIndex:z,index:A,geometry:R?U.geometry:un(T),patterns:{},sortKey:H};h.push(K)}}c&&h.sort(function(Ze,Ke){return Ze.sortKey-Ke.sortKey});for(var ae=0,te=h;ae<te.length;ae+=1){var he=te[ae],ge=he.geometry,we=he.index,Te=he.sourceLayerIndex;if(this.hasPattern){var Fe=Lm("fill",this.layers,he,this.zoom,t);this.patternFeatures.push(Fe)}else this.addFeature(he,ge,we,i,{});t.featureIndex.insert(e[we].feature,ge,we,Te,this.index)}},Ha.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ha.prototype.addFeatures=function(e,t,i){for(var c=0,h=this.patternFeatures;c<h.length;c+=1){var d=h[c];this.addFeature(d,d.geometry,d.index,t,i)}},Ha.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ha.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ha.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Sw),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Ha.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ha.prototype.addFeature=function(e,t,i,c,h){for(var d=0,v=Mm(t,500);d<v.length;d+=1){for(var b=v[d],T=0,C=0,A=b;C<A.length;C+=1)T+=A[C].length;for(var z=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),R=z.vertexLength,U=[],H=[],K=0,ae=b;K<ae.length;K+=1){var te=ae[K];if(te.length!==0){te!==b[0]&&H.push(U.length/2);var he=this.segments2.prepareSegment(te.length,this.layoutVertexArray,this.indexArray2),ge=he.vertexLength;this.layoutVertexArray.emplaceBack(te[0].x,te[0].y),this.indexArray2.emplaceBack(ge+te.length-1,ge),U.push(te[0].x),U.push(te[0].y);for(var we=1;we<te.length;we++)this.layoutVertexArray.emplaceBack(te[we].x,te[we].y),this.indexArray2.emplaceBack(ge+we-1,ge+we),U.push(te[we].x),U.push(te[we].y);he.vertexLength+=te.length,he.primitiveLength+=te.length}}for(var Te=Cm(U,H),Fe=0;Fe<Te.length;Fe+=3)this.indexArray.emplaceBack(R+Te[Fe],R+Te[Fe+1],R+Te[Fe+2]);z.vertexLength+=T,z.primitiveLength+=Te.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,c)},ft("FillBucket",Ha,{omit:["layers","patternFeatures"]});var Fw=new ai({"fill-sort-key":new yt(V.layout_fill["fill-sort-key"])}),Bw={paint:new ai({"fill-antialias":new St(V.paint_fill["fill-antialias"]),"fill-opacity":new yt(V.paint_fill["fill-opacity"]),"fill-color":new yt(V.paint_fill["fill-color"]),"fill-outline-color":new yt(V.paint_fill["fill-outline-color"]),"fill-translate":new St(V.paint_fill["fill-translate"]),"fill-translate-anchor":new St(V.paint_fill["fill-translate-anchor"]),"fill-pattern":new ec(V.paint_fill["fill-pattern"])}),layout:Fw},Uw=function(e){function t(i){e.call(this,i,Bw)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,c){e.prototype.recalculate.call(this,i,c);var h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new Ha(i)},t.prototype.queryRadius=function(){return qn(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,c,h,d,v,b,T){return oa($a(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,T),d)},t.prototype.isTileClipped=function(){return!0},t}(xa),Nw=Yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Gg=uc;function uc(e,t,i,c,h){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=c,this._values=h,e.readFields(jw,this,t)}function jw(e,t,i){e==1?t.id=i.readVarint():e==2?function(c,h){for(var d=c.readVarint()+c.pos;c.pos<d;){var v=h._keys[c.readVarint()],b=h._values[c.readVarint()];h.properties[v]=b}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function Vw(e){for(var t,i,c=0,h=0,d=e.length,v=d-1;h<d;v=h++)c+=((i=e[v]).x-(t=e[h]).x)*(t.y+i.y);return c}uc.types=["Unknown","Point","LineString","Polygon"],uc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,c=1,h=0,d=0,v=0,b=[];e.pos<i;){if(h<=0){var T=e.readVarint();c=7&T,h=T>>3}if(h--,c===1||c===2)d+=e.readSVarint(),v+=e.readSVarint(),c===1&&(t&&b.push(t),t=[]),t.push(new ee(d,v));else{if(c!==7)throw new Error("unknown command "+c);t&&t.push(t[0].clone())}}return t&&b.push(t),b},uc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,c=0,h=0,d=0,v=1/0,b=-1/0,T=1/0,C=-1/0;e.pos<t;){if(c<=0){var A=e.readVarint();i=7&A,c=A>>3}if(c--,i===1||i===2)(h+=e.readSVarint())<v&&(v=h),h>b&&(b=h),(d+=e.readSVarint())<T&&(T=d),d>C&&(C=d);else if(i!==7)throw new Error("unknown command "+i)}return[v,T,b,C]},uc.prototype.toGeoJSON=function(e,t,i){var c,h,d=this.extent*Math.pow(2,i),v=this.extent*e,b=this.extent*t,T=this.loadGeometry(),C=uc.types[this.type];function A(U){for(var H=0;H<U.length;H++){var K=U[H];U[H]=[360*(K.x+v)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(K.y+b)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(c=0;c<T.length;c++)z[c]=T[c][0];A(T=z);break;case 2:for(c=0;c<T.length;c++)A(T[c]);break;case 3:for(T=function(U){var H=U.length;if(H<=1)return[U];for(var K,ae,te=[],he=0;he<H;he++){var ge=Vw(U[he]);ge!==0&&(ae===void 0&&(ae=ge<0),ae===ge<0?(K&&te.push(K),K=[U[he]]):K.push(U[he]))}return K&&te.push(K),te}(T),c=0;c<T.length;c++)for(h=0;h<T[c].length;h++)A(T[c][h])}T.length===1?T=T[0]:C="Multi"+C;var R={type:"Feature",geometry:{type:C,coordinates:T},properties:this.properties};return"id"in this&&(R.id=this.id),R};var Wg=$g;function $g(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(qw,this,t),this.length=this._features.length}function qw(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(c){for(var h=null,d=c.readVarint()+c.pos;c.pos<d;){var v=c.readVarint()>>3;h=v===1?c.readString():v===2?c.readFloat():v===3?c.readDouble():v===4?c.readVarint64():v===5?c.readVarint():v===6?c.readSVarint():v===7?c.readBoolean():null}return h}(i))}function Zw(e,t,i){if(e===3){var c=new Wg(i,i.readVarint()+i.pos);c.length&&(t[c.name]=c)}}$g.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Gg(this._pbf,t,this.extent,this._keys,this._values)};var lc={VectorTile:function(e,t){this.layers=e.readFields(Zw,{},t)},VectorTileFeature:Gg,VectorTileLayer:Wg},Gw=lc.VectorTileFeature.types,Dm=Math.pow(2,13);function Ap(e,t,i,c,h,d,v,b){e.emplaceBack(t,i,2*Math.floor(c*Dm)+v,h*Dm*2,d*Dm*2,Math.round(b))}var Xa=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Wa,this.indexArray=new ls,this.programConfigurations=new Ot(e.layers,e.zoom),this.segments=new q,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Ww(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Xa.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=zm("fill-extrusion",this.layers,t);for(var c=0,h=e;c<h.length;c+=1){var d=h[c],v=d.feature,b=d.id,T=d.index,C=d.sourceLayerIndex,A=this.layers[0]._featureFilter.needGeometry,z=_n(v,A);if(this.layers[0]._featureFilter.filter(new nr(this.zoom),z,i)){var R={id:b,sourceLayerIndex:C,index:T,geometry:A?z.geometry:un(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Lm("fill-extrusion",this.layers,R,this.zoom,t)):this.addFeature(R,R.geometry,T,i,{}),t.featureIndex.insert(v,R.geometry,T,C,this.index,!0)}}},Xa.prototype.addFeatures=function(e,t,i){for(var c=0,h=this.features;c<h.length;c+=1){var d=h[c];this.addFeature(d,d.geometry,d.index,t,i)}},Xa.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Xa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Xa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xa.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Nw),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Xa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xa.prototype.addFeature=function(e,t,i,c,h){for(var d=0,v=Mm(t,500);d<v.length;d+=1){for(var b=v[d],T=0,C=0,A=b;C<A.length;C+=1)T+=A[C].length;for(var z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),R=0,U=b;R<U.length;R+=1){var H=U[R];if(H.length!==0&&!((rr=H).every(function(Ht){return Ht.x<0})||rr.every(function(Ht){return Ht.x>8192})||rr.every(function(Ht){return Ht.y<0})||rr.every(function(Ht){return Ht.y>8192})))for(var K=0,ae=0;ae<H.length;ae++){var te=H[ae];if(ae>=1){var he=H[ae-1];if(!Ww(te,he)){z.vertexLength+4>q.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ge=te.sub(he)._perp()._unit(),we=he.dist(te);K+we>32768&&(K=0),Ap(this.layoutVertexArray,te.x,te.y,ge.x,ge.y,0,0,K),Ap(this.layoutVertexArray,te.x,te.y,ge.x,ge.y,0,1,K),Ap(this.layoutVertexArray,he.x,he.y,ge.x,ge.y,0,0,K+=we),Ap(this.layoutVertexArray,he.x,he.y,ge.x,ge.y,0,1,K);var Te=z.vertexLength;this.indexArray.emplaceBack(Te,Te+2,Te+1),this.indexArray.emplaceBack(Te+1,Te+2,Te+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+T>q.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),Gw[e.type]==="Polygon"){for(var Fe=[],Ze=[],Ke=z.vertexLength,xt=0,it=b;xt<it.length;xt+=1){var Tt=it[xt];if(Tt.length!==0){Tt!==b[0]&&Ze.push(Fe.length/2);for(var ot=0;ot<Tt.length;ot++){var Yt=Tt[ot];Ap(this.layoutVertexArray,Yt.x,Yt.y,0,0,1,1,0),Fe.push(Yt.x),Fe.push(Yt.y)}}}for(var Bt=Cm(Fe,Ze),vt=0;vt<Bt.length;vt+=3)this.indexArray.emplaceBack(Ke+Bt[vt],Ke+Bt[vt+2],Ke+Bt[vt+1]);z.primitiveLength+=Bt.length/3,z.vertexLength+=T}}var rr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,c)},ft("FillExtrusionBucket",Xa,{omit:["layers","features"]});var $w={paint:new ai({"fill-extrusion-opacity":new St(V["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(V["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new St(V["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new St(V["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ec(V["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(V["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(V["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new St(V["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Hw=function(e){function t(i){e.call(this,i,$w)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Xa(i)},t.prototype.queryRadius=function(){return qn(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,c,h,d,v,b,T,C){var A=$a(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,T),z=this.paint.get("fill-extrusion-height").evaluate(c,h),R=this.paint.get("fill-extrusion-base").evaluate(c,h),U=function(K,ae,te,he){for(var ge=[],we=0,Te=K;we<Te.length;we+=1){var Fe=Te[we],Ze=[Fe.x,Fe.y,0,1];oc(Ze,Ze,ae),ge.push(new ee(Ze[0]/Ze[3],Ze[1]/Ze[3]))}return ge}(A,C),H=function(K,ae,te,he){for(var ge=[],we=[],Te=he[8]*ae,Fe=he[9]*ae,Ze=he[10]*ae,Ke=he[11]*ae,xt=he[8]*te,it=he[9]*te,Tt=he[10]*te,ot=he[11]*te,Yt=0,Bt=K;Yt<Bt.length;Yt+=1){for(var vt=[],rr=[],Ht=0,pr=Bt[Yt];Ht<pr.length;Ht+=1){var Pt=pr[Ht],xr=Pt.x,Kr=Pt.y,dn=he[0]*xr+he[4]*Kr+he[12],ln=he[1]*xr+he[5]*Kr+he[13],Jr=he[2]*xr+he[6]*Kr+he[14],mn=he[3]*xr+he[7]*Kr+he[15],Zn=Jr+Ze,Gn=mn+Ke,bi=dn+xt,ti=ln+it,wi=Jr+Tt,xn=mn+ot,ri=new ee((dn+Te)/Gn,(ln+Fe)/Gn);ri.z=Zn/Gn,vt.push(ri);var sr=new ee(bi/xn,ti/xn);sr.z=wi/xn,rr.push(sr)}ge.push(vt),we.push(rr)}return[ge,we]}(d,R,z,C);return function(K,ae,te){var he=1/0;oa(te,ae)&&(he=Hg(te,ae[0]));for(var ge=0;ge<ae.length;ge++)for(var we=ae[ge],Te=K[ge],Fe=0;Fe<we.length-1;Fe++){var Ze=we[Fe],Ke=[Ze,we[Fe+1],Te[Fe+1],Te[Fe],Ze];hs(te,Ke)&&(he=Math.min(he,Hg(te,Ke)))}return he!==1/0&&he}(H[0],H[1],U)},t}(xa);function Mp(e,t){return e.x*t.x+e.y*t.y}function Hg(e,t){if(e.length===1){for(var i,c=0,h=t[c++];!i||h.equals(i);)if(!(i=t[c++]))return 1/0;for(;c<t.length;c++){var d=t[c],v=e[0],b=i.sub(h),T=d.sub(h),C=v.sub(h),A=Mp(b,b),z=Mp(b,T),R=Mp(T,T),U=Mp(C,b),H=Mp(C,T),K=A*R-z*z,ae=(R*U-z*H)/K,te=(A*H-z*U)/K,he=h.z*(1-ae-te)+i.z*ae+d.z*te;if(isFinite(he))return he}return 1/0}for(var ge=1/0,we=0,Te=t;we<Te.length;we+=1)ge=Math.min(ge,Te[we].z);return ge}var Xw=Yn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Kw=Yn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Jw=lc.VectorTileFeature.types,Yw=Math.cos(Math.PI/180*37.5),Xg=Math.pow(2,14)/.5,Oi=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new oo,this.layoutVertexArray2=new du,this.indexArray=new ls,this.programConfigurations=new Ot(e.layers,e.zoom),this.segments=new q,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};Oi.prototype.populate=function(e,t,i){this.hasPattern=zm("line",this.layers,t);for(var c=this.layers[0].layout.get("line-sort-key"),h=[],d=0,v=e;d<v.length;d+=1){var b=v[d],T=b.feature,C=b.id,A=b.index,z=b.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,U=_n(T,R);if(this.layers[0]._featureFilter.filter(new nr(this.zoom),U,i)){var H=c?c.evaluate(U,{},i):void 0,K={id:C,properties:T.properties,type:T.type,sourceLayerIndex:z,index:A,geometry:R?U.geometry:un(T),patterns:{},sortKey:H};h.push(K)}}c&&h.sort(function(Ze,Ke){return Ze.sortKey-Ke.sortKey});for(var ae=0,te=h;ae<te.length;ae+=1){var he=te[ae],ge=he.geometry,we=he.index,Te=he.sourceLayerIndex;if(this.hasPattern){var Fe=Lm("line",this.layers,he,this.zoom,t);this.patternFeatures.push(Fe)}else this.addFeature(he,ge,we,i,{});t.featureIndex.insert(e[we].feature,ge,we,Te,this.index)}},Oi.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Oi.prototype.addFeatures=function(e,t,i){for(var c=0,h=this.patternFeatures;c<h.length;c+=1){var d=h[c];this.addFeature(d,d.geometry,d.index,t,i)}},Oi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Oi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Oi.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Kw)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Xw),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Oi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Oi.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Oi.prototype.addFeature=function(e,t,i,c,h){var d=this.layers[0].layout,v=d.get("line-join").evaluate(e,{}),b=d.get("line-cap"),T=d.get("line-miter-limit"),C=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var A=0,z=t;A<z.length;A+=1)this.addLine(z[A],e,v,b,T,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,c)},Oi.prototype.addLine=function(e,t,i,c,h,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var v=0;v<e.length-1;v++)this.totalDistance+=e[v].dist(e[v+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var b=Jw[t.type]==="Polygon",T=e.length;T>=2&&e[T-1].equals(e[T-2]);)T--;for(var C=0;C<T-1&&e[C].equals(e[C+1]);)C++;if(!(T<(b?3:2))){i==="bevel"&&(h=1.05);var A,z=this.overscaling<=16?122880/(512*this.overscaling):0,R=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray),U=void 0,H=void 0,K=void 0,ae=void 0;this.e1=this.e2=-1,b&&(ae=e[C].sub(A=e[T-2])._unit()._perp());for(var te=C;te<T;te++)if(!(H=te===T-1?b?e[C+1]:void 0:e[te+1])||!e[te].equals(H)){ae&&(K=ae),A&&(U=A),A=e[te],ae=H?H.sub(A)._unit()._perp():K;var he=(K=K||ae).add(ae);he.x===0&&he.y===0||he._unit();var ge=K.x*ae.x+K.y*ae.y,we=he.x*ae.x+he.y*ae.y,Te=we!==0?1/we:1/0,Fe=2*Math.sqrt(2-2*we),Ze=we<Yw&&U&&H,Ke=K.x*ae.y-K.y*ae.x>0;if(Ze&&te>C){var xt=A.dist(U);if(xt>2*z){var it=A.sub(A.sub(U)._mult(z/xt)._round());this.updateDistance(U,it),this.addCurrentVertex(it,K,0,0,R),U=it}}var Tt=U&&H,ot=Tt?i:b?"butt":c;if(Tt&&ot==="round"&&(Te<d?ot="miter":Te<=2&&(ot="fakeround")),ot==="miter"&&Te>h&&(ot="bevel"),ot==="bevel"&&(Te>2&&(ot="flipbevel"),Te<h&&(ot="miter")),U&&this.updateDistance(U,A),ot==="miter")he._mult(Te),this.addCurrentVertex(A,he,0,0,R);else if(ot==="flipbevel"){if(Te>100)he=ae.mult(-1);else{var Yt=Te*K.add(ae).mag()/K.sub(ae).mag();he._perp()._mult(Yt*(Ke?-1:1))}this.addCurrentVertex(A,he,0,0,R),this.addCurrentVertex(A,he.mult(-1),0,0,R)}else if(ot==="bevel"||ot==="fakeround"){var Bt=-Math.sqrt(Te*Te-1),vt=Ke?Bt:0,rr=Ke?0:Bt;if(U&&this.addCurrentVertex(A,K,vt,rr,R),ot==="fakeround")for(var Ht=Math.round(180*Fe/Math.PI/20),pr=1;pr<Ht;pr++){var Pt=pr/Ht;if(Pt!==.5){var xr=Pt-.5;Pt+=Pt*xr*(Pt-1)*((1.0904+ge*(ge*(3.55645-1.43519*ge)-3.2452))*xr*xr+(.848013+ge*(.215638*ge-1.06021)))}var Kr=ae.sub(K)._mult(Pt)._add(K)._unit()._mult(Ke?-1:1);this.addHalfVertex(A,Kr.x,Kr.y,!1,Ke,0,R)}H&&this.addCurrentVertex(A,ae,-vt,-rr,R)}else if(ot==="butt")this.addCurrentVertex(A,he,0,0,R);else if(ot==="square"){var dn=U?1:-1;this.addCurrentVertex(A,he,dn,dn,R)}else ot==="round"&&(U&&(this.addCurrentVertex(A,K,0,0,R),this.addCurrentVertex(A,K,1,1,R,!0)),H&&(this.addCurrentVertex(A,ae,-1,-1,R,!0),this.addCurrentVertex(A,ae,0,0,R)));if(Ze&&te<T-1){var ln=A.dist(H);if(ln>2*z){var Jr=A.add(H.sub(A)._mult(z/ln)._round());this.updateDistance(A,Jr),this.addCurrentVertex(Jr,ae,0,0,R),A=Jr}}}}},Oi.prototype.addCurrentVertex=function(e,t,i,c,h,d){d===void 0&&(d=!1);var v=t.y*c-t.x,b=-t.y-t.x*c;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,d,!1,i,h),this.addHalfVertex(e,v,b,d,!0,-c,h),this.distance>Xg/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,c,h,d))},Oi.prototype.addHalfVertex=function(e,t,i,c,h,d,v){var b=.5*(this.lineClips?this.scaledDistance*(Xg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(c?1:0),(e.y<<1)+(h?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&b)<<2,b>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var T=v.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),v.primitiveLength++),h?this.e2=T:this.e1=T},Oi.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Oi.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},ft("LineBucket",Oi,{omit:["layers","patternFeatures"]});var Qw=new ai({"line-cap":new St(V.layout_line["line-cap"]),"line-join":new yt(V.layout_line["line-join"]),"line-miter-limit":new St(V.layout_line["line-miter-limit"]),"line-round-limit":new St(V.layout_line["line-round-limit"]),"line-sort-key":new yt(V.layout_line["line-sort-key"])}),Kg={paint:new ai({"line-opacity":new yt(V.paint_line["line-opacity"]),"line-color":new yt(V.paint_line["line-color"]),"line-translate":new St(V.paint_line["line-translate"]),"line-translate-anchor":new St(V.paint_line["line-translate-anchor"]),"line-width":new yt(V.paint_line["line-width"]),"line-gap-width":new yt(V.paint_line["line-gap-width"]),"line-offset":new yt(V.paint_line["line-offset"]),"line-blur":new yt(V.paint_line["line-blur"]),"line-dasharray":new gi(V.paint_line["line-dasharray"]),"line-pattern":new ec(V.paint_line["line-pattern"]),"line-gradient":new ia(V.paint_line["line-gradient"])}),layout:Qw},Jg=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,c){return c=new nr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),e.prototype.possiblyEvaluate.call(this,i,c)},t.prototype.evaluate=function(i,c,h,d){return c=oe({},c,{zoom:Math.floor(c.zoom)}),e.prototype.evaluate.call(this,i,c,h,d)},t}(yt))(Kg.paint.properties["line-width"].specification);Jg.useIntegerZoom=!0;var e2=function(e){function t(i){e.call(this,i,Kg),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qr,this.gradientVersion=(this.gradientVersion+1)%xe)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,c){e.prototype.recalculate.call(this,i,c),this.paint._values["line-floorwidth"]=Jg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new Oi(i)},t.prototype.queryRadius=function(i){var c=i,h=Yg(Sa("line-width",this,c),Sa("line-gap-width",this,c)),d=Sa("line-offset",this,c);return h/2+Math.abs(d)+qn(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,c,h,d,v,b,T){var C=$a(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,T),A=T/2*Yg(this.paint.get("line-width").evaluate(c,h),this.paint.get("line-gap-width").evaluate(c,h)),z=this.paint.get("line-offset").evaluate(c,h);return z&&(d=function(R,U){for(var H=[],K=new ee(0,0),ae=0;ae<R.length;ae++){for(var te=R[ae],he=[],ge=0;ge<te.length;ge++){var we=te[ge],Te=te[ge+1],Fe=ge===0?K:we.sub(te[ge-1])._unit()._perp(),Ze=ge===te.length-1?K:Te.sub(we)._unit()._perp(),Ke=Fe._add(Ze)._unit();Ke._mult(1/(Ke.x*Ze.x+Ke.y*Ze.y)),he.push(Ke._mult(U)._add(we))}H.push(he)}return H}(d,z*T)),function(R,U,H){for(var K=0;K<U.length;K++){var ae=U[K];if(R.length>=3){for(var te=0;te<ae.length;te++)if(wa(R,ae[te]))return!0}if(Uo(R,ae,H))return!0}return!1}(C,d,A)},t.prototype.isTileClipped=function(){return!0},t}(xa);function Yg(e,t){return t>0?t+2*e:e}var t2=Yn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),r2=Yn([{name:"a_projected_pos",components:3,type:"Float32"}],4),n2=(Yn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Yn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Qg=(Yn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),i2=Yn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function o2(e,t,i){return e.sections.forEach(function(c){c.text=function(h,d,v){var b=d.layout.get("text-transform").evaluate(v,{});return b==="uppercase"?h=h.toLocaleUpperCase():b==="lowercase"&&(h=h.toLocaleLowerCase()),wo.applyArabicShaping&&(h=wo.applyArabicShaping(h)),h}(c.text,t,i)}),e}Yn([{name:"triangle",components:3,type:"Uint16"}]),Yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Yn([{type:"Float32",name:"offsetX"}]),Yn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var zp={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},e_=function(e,t,i,c,h){var d,v,b=8*h-c-1,T=(1<<b)-1,C=T>>1,A=-7,z=i?h-1:0,R=i?-1:1,U=e[t+z];for(z+=R,d=U&(1<<-A)-1,U>>=-A,A+=b;A>0;d=256*d+e[t+z],z+=R,A-=8);for(v=d&(1<<-A)-1,d>>=-A,A+=c;A>0;v=256*v+e[t+z],z+=R,A-=8);if(d===0)d=1-C;else{if(d===T)return v?NaN:1/0*(U?-1:1);v+=Math.pow(2,c),d-=C}return(U?-1:1)*v*Math.pow(2,d-c)},t_=function(e,t,i,c,h,d){var v,b,T,C=8*d-h-1,A=(1<<C)-1,z=A>>1,R=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=c?0:d-1,H=c?1:-1,K=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,v=A):(v=Math.floor(Math.log(t)/Math.LN2),t*(T=Math.pow(2,-v))<1&&(v--,T*=2),(t+=v+z>=1?R/T:R*Math.pow(2,1-z))*T>=2&&(v++,T/=2),v+z>=A?(b=0,v=A):v+z>=1?(b=(t*T-1)*Math.pow(2,h),v+=z):(b=t*Math.pow(2,z-1)*Math.pow(2,h),v=0));h>=8;e[i+U]=255&b,U+=H,b/=256,h-=8);for(v=v<<h|b,C+=h;C>0;e[i+U]=255&v,U+=H,v/=256,C-=8);e[i+U-H]|=128*K},df=Zr;function Zr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Zr.Varint=0,Zr.Fixed64=1,Zr.Bytes=2,Zr.Fixed32=5;var r_=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Xs(e){return e.type===Zr.Bytes?e.readVarint()+e.pos:e.pos+1}function cc(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function n_(e,t,i){var c=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(c);for(var h=i.pos-1;h>=e;h--)i.buf[h+c]=i.buf[h]}function a2(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function s2(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function u2(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function l2(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function c2(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function p2(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function h2(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function f2(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function d2(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function mf(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function pc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function i_(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function m2(e,t,i){e===1&&i.readMessage(y2,t)}function y2(e,t,i){if(e===3){var c=i.readMessage(v2,{}),h=c.width,d=c.height,v=c.left,b=c.top,T=c.advance;t.push({id:c.id,bitmap:new fl({width:h+6,height:d+6},c.bitmap),metrics:{width:h,height:d,left:v,top:b,advance:T}})}}function v2(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function o_(e){for(var t=0,i=0,c=0,h=e;c<h.length;c+=1){var d=h[c];t+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(K,ae){return ae.h-K.h});for(var v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],b=0,T=0,C=0,A=e;C<A.length;C+=1)for(var z=A[C],R=v.length-1;R>=0;R--){var U=v[R];if(!(z.w>U.w||z.h>U.h)){if(z.x=U.x,z.y=U.y,T=Math.max(T,z.y+z.h),b=Math.max(b,z.x+z.w),z.w===U.w&&z.h===U.h){var H=v.pop();R<v.length&&(v[R]=H)}else z.h===U.h?(U.x+=z.w,U.w-=z.w):z.w===U.w?(U.y+=z.h,U.h-=z.h):(v.push({x:U.x+z.w,y:U.y,w:U.w-z.w,h:z.h}),U.y+=z.h,U.h-=z.h);break}}return{w:b,h:T,fill:t/(b*T)||0}}Zr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var c=this.readVarint(),h=c>>3,d=this.pos;this.type=7&c,e(h,t,this),this.pos===d&&this.skip(c)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=mf(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=i_(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=mf(this.buf,this.pos)+4294967296*mf(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=mf(this.buf,this.pos)+4294967296*i_(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=e_(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=e_(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,c=this.buf;return t=127&(i=c[this.pos++]),i<128?t:(t|=(127&(i=c[this.pos++]))<<7,i<128?t:(t|=(127&(i=c[this.pos++]))<<14,i<128?t:(t|=(127&(i=c[this.pos++]))<<21,i<128?t:function(h,d,v){var b,T,C=v.buf;if(b=(112&(T=C[v.pos++]))>>4,T<128||(b|=(127&(T=C[v.pos++]))<<3,T<128)||(b|=(127&(T=C[v.pos++]))<<10,T<128)||(b|=(127&(T=C[v.pos++]))<<17,T<128)||(b|=(127&(T=C[v.pos++]))<<24,T<128)||(b|=(1&(T=C[v.pos++]))<<31,T<128))return cc(h,b,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=c[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&r_?function(i,c,h){return r_.decode(i.subarray(c,h))}(this.buf,t,e):function(i,c,h){for(var d="",v=c;v<h;){var b,T,C,A=i[v],z=null,R=A>239?4:A>223?3:A>191?2:1;if(v+R>h)break;R===1?A<128&&(z=A):R===2?(192&(b=i[v+1]))==128&&(z=(31&A)<<6|63&b)<=127&&(z=null):R===3?(T=i[v+2],(192&(b=i[v+1]))==128&&(192&T)==128&&((z=(15&A)<<12|(63&b)<<6|63&T)<=2047||z>=55296&&z<=57343)&&(z=null)):R===4&&(T=i[v+2],C=i[v+3],(192&(b=i[v+1]))==128&&(192&T)==128&&(192&C)==128&&((z=(15&A)<<18|(63&b)<<12|(63&T)<<6|63&C)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,R=1):z>65535&&(z-=65536,d+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),d+=String.fromCharCode(z),v+=R}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Zr.Bytes)return e.push(this.readVarint(t));var i=Xs(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Zr.Bytes)return e.push(this.readSVarint());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Zr.Bytes)return e.push(this.readBoolean());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Zr.Bytes)return e.push(this.readFloat());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Zr.Bytes)return e.push(this.readDouble());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Zr.Bytes)return e.push(this.readFixed32());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Zr.Bytes)return e.push(this.readSFixed32());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Zr.Bytes)return e.push(this.readFixed64());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Zr.Bytes)return e.push(this.readSFixed64());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Zr.Varint)for(;this.buf[this.pos++]>127;);else if(t===Zr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Zr.Fixed32)this.pos+=4;else{if(t!==Zr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),pc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),pc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),pc(this.buf,-1&e,this.pos),pc(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),pc(this.buf,-1&e,this.pos),pc(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var c,h;if(t>=0?(c=t%4294967296|0,h=t/4294967296|0):(h=~(-t/4294967296),4294967295^(c=~(-t%4294967296))?c=c+1|0:(c=0,h=h+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,v,b){b.buf[b.pos++]=127&d|128,d>>>=7,b.buf[b.pos++]=127&d|128,d>>>=7,b.buf[b.pos++]=127&d|128,d>>>=7,b.buf[b.pos++]=127&d|128,b.buf[b.pos]=127&(d>>>=7)}(c,0,i),function(d,v){var b=(7&d)<<4;v.buf[v.pos++]|=b|((d>>>=3)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d)))))}(h,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(c,h,d){for(var v,b,T=0;T<h.length;T++){if((v=h.charCodeAt(T))>55295&&v<57344){if(!b){v>56319||T+1===h.length?(c[d++]=239,c[d++]=191,c[d++]=189):b=v;continue}if(v<56320){c[d++]=239,c[d++]=191,c[d++]=189,b=v;continue}v=b-55296<<10|v-56320|65536,b=null}else b&&(c[d++]=239,c[d++]=191,c[d++]=189,b=null);v<128?c[d++]=v:(v<2048?c[d++]=v>>6|192:(v<65536?c[d++]=v>>12|224:(c[d++]=v>>18|240,c[d++]=v>>12&63|128),c[d++]=v>>6&63|128),c[d++]=63&v|128)}return d}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&n_(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),t_(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),t_(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var c=this.pos-i;c>=128&&n_(i,c,this),this.pos=i-1,this.writeVarint(c),this.pos+=c},writeMessage:function(e,t,i){this.writeTag(e,Zr.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,a2,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,s2,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,c2,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,u2,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,l2,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,p2,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,h2,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,f2,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,d2,t)},writeBytesField:function(e,t){this.writeTag(e,Zr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Zr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Zr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Zr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Zr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Zr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Zr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Zr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Zr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Zr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var yf=function(e,t){var i=t.pixelRatio,c=t.version,h=t.stretchX,d=t.stretchY,v=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=h,this.stretchY=d,this.content=v,this.version=c},Lp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Lp.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Lp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Lp.tlbr.get=function(){return this.tl.concat(this.br)},Lp.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(yf.prototype,Lp);var Dp=function(e,t){var i={},c={};this.haveRenderCallbacks=[];var h=[];this.addImages(e,i,h),this.addImages(t,c,h);var d=o_(h),v=new so({width:d.w||1,height:d.h||1});for(var b in e){var T=e[b],C=i[b].paddedRect;so.copy(T.data,v,{x:0,y:0},{x:C.x+1,y:C.y+1},T.data)}for(var A in t){var z=t[A],R=c[A].paddedRect,U=R.x+1,H=R.y+1,K=z.data.width,ae=z.data.height;so.copy(z.data,v,{x:0,y:0},{x:U,y:H},z.data),so.copy(z.data,v,{x:0,y:ae-1},{x:U,y:H-1},{width:K,height:1}),so.copy(z.data,v,{x:0,y:0},{x:U,y:H+ae},{width:K,height:1}),so.copy(z.data,v,{x:K-1,y:0},{x:U-1,y:H},{width:1,height:ae}),so.copy(z.data,v,{x:0,y:0},{x:U+K,y:H},{width:1,height:ae})}this.image=v,this.iconPositions=i,this.patternPositions=c};Dp.prototype.addImages=function(e,t,i){for(var c in e){var h=e[c],d={x:0,y:0,w:h.data.width+2,h:h.data.height+2};i.push(d),t[c]=new yf(d,h),h.hasRenderCallback&&this.haveRenderCallbacks.push(c)}},Dp.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},Dp.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var c=e.tl;i.update(t.data,void 0,{x:c[0],y:c[1]})}},ft("ImagePosition",yf),ft("ImageAtlas",Dp);var No={horizontal:1,vertical:2,horizontalOnly:3},hc=function(){this.scale=1,this.fontStack="",this.imageName=null};hc.forText=function(e,t){var i=new hc;return i.scale=e||1,i.fontStack=t,i},hc.forImage=function(e){var t=new hc;return t.imageName=e,t};var xi=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function vf(e,t,i,c,h,d,v,b,T,C,A,z,R,U,H,K){var ae,te=xi.fromFeature(e,h);z===No.vertical&&te.verticalizePunctuation();var he=wo.processBidirectionalText,ge=wo.processStyledBidirectionalText;if(he&&te.sections.length===1){ae=[];for(var we=0,Te=he(te.toString(),Om(te,C,d,t,c,U,H));we<Te.length;we+=1){var Fe=Te[we],Ze=new xi;Ze.text=Fe,Ze.sections=te.sections;for(var Ke=0;Ke<Fe.length;Ke++)Ze.sectionIndex.push(0);ae.push(Ze)}}else if(ge){ae=[];for(var xt=0,it=ge(te.text,te.sectionIndex,Om(te,C,d,t,c,U,H));xt<it.length;xt+=1){var Tt=it[xt],ot=new xi;ot.text=Tt[0],ot.sectionIndex=Tt[1],ot.sections=te.sections,ae.push(ot)}}else ae=function(vt,rr){for(var Ht=[],pr=vt.text,Pt=0,xr=0,Kr=rr;xr<Kr.length;xr+=1){var dn=Kr[xr];Ht.push(vt.substring(Pt,dn)),Pt=dn}return Pt<pr.length&&Ht.push(vt.substring(Pt,pr.length)),Ht}(te,Om(te,C,d,t,c,U,H));var Yt=[],Bt={positionedLines:Yt,text:te.toString(),top:A[1],bottom:A[1],left:A[0],right:A[0],writingMode:z,iconsInText:!1,verticalizable:!1};return function(vt,rr,Ht,pr,Pt,xr,Kr,dn,ln,Jr,mn,Zn){for(var Gn=0,bi=-17,ti=0,wi=0,xn=dn==="right"?1:dn==="left"?0:.5,ri=0,sr=0,Br=Pt;sr<Br.length;sr+=1){var Ar=Br[sr];Ar.trim();var yr=Ar.getMaxScale(),Ri=24*(yr-1),hi={positionedGlyphs:[],lineOffset:0};vt.positionedLines[ri]=hi;var Hr=hi.positionedGlyphs,Cn=0;if(Ar.length()){for(var fi=0;fi<Ar.length();fi++){var br=Ar.getSection(fi),ms=Ar.getSectionIndex(fi),jo=Ar.getCharCode(fi),ys=0,bn=null,vs=null,Ea=null,xc=24,vl=!(ln===No.horizontal||!mn&&!Jl(jo)||mn&&(gf[jo]||(Qs=jo,et.Arabic(Qs)||et["Arabic Supplement"](Qs)||et["Arabic Extended-A"](Qs)||et["Arabic Presentation Forms-A"](Qs)||et["Arabic Presentation Forms-B"](Qs))));if(br.imageName){var bc=pr[br.imageName];if(!bc)continue;Ea=br.imageName,vt.iconsInText=vt.iconsInText||!0,vs=bc.paddedRect;var Ys=bc.displaySize;br.scale=24*br.scale/Zn,ys=Ri+(24-Ys[1]*br.scale),xc=(bn={width:Ys[0],height:Ys[1],left:1,top:-3,advance:vl?Ys[1]:Ys[0]}).advance;var wc=vl?Ys[0]*br.scale-24*yr:Ys[1]*br.scale-24*yr;wc>0&&wc>Cn&&(Cn=wc)}else{var Cf=Ht[br.fontStack],Sc=Cf&&Cf[jo];if(Sc&&Sc.rect)vs=Sc.rect,bn=Sc.metrics;else{var Fp=rr[br.fontStack],If=Fp&&Fp[jo];if(!If)continue;bn=If.metrics}ys=24*(yr-br.scale)}vl?(vt.verticalizable=!0,Hr.push({glyph:jo,imageName:Ea,x:Gn,y:bi+ys,vertical:vl,scale:br.scale,fontStack:br.fontStack,sectionIndex:ms,metrics:bn,rect:vs}),Gn+=xc*br.scale+Jr):(Hr.push({glyph:jo,imageName:Ea,x:Gn,y:bi+ys,vertical:vl,scale:br.scale,fontStack:br.fontStack,sectionIndex:ms,metrics:bn,rect:vs}),Gn+=bn.advance*br.scale+Jr)}Hr.length!==0&&(ti=Math.max(Gn-Jr,ti),_2(Hr,0,Hr.length-1,xn,Cn)),Gn=0;var kf=xr*yr+Cn;hi.lineOffset=Math.max(Cn,Ri),bi+=kf,wi=Math.max(kf,wi),++ri}else bi+=xr,++ri}var Qs,Bp=bi- -17,Ec=Rm(Kr),wu=Ec.horizontalAlign,Tc=Ec.verticalAlign;(function(Af,Mf,Up,Np,zf,jp,Vp,qp,Lf){var Pc,Df=(Mf-Up)*zf;Pc=jp!==Vp?-qp*Np- -17:(-Np*Lf+.5)*Vp;for(var Cc=0,Zp=Af;Cc<Zp.length;Cc+=1)for(var gl=0,Gp=Zp[Cc].positionedGlyphs;gl<Gp.length;gl+=1){var Ic=Gp[gl];Ic.x+=Df,Ic.y+=Pc}})(vt.positionedLines,xn,wu,Tc,ti,wi,xr,Bp,Pt.length),vt.top+=-Tc*Bp,vt.bottom=vt.top+Bp,vt.left+=-wu*ti,vt.right=vt.left+ti}(Bt,t,i,c,ae,v,b,T,z,C,R,K),!function(vt){for(var rr=0,Ht=vt;rr<Ht.length;rr+=1)if(Ht[rr].positionedGlyphs.length!==0)return!1;return!0}(Yt)&&Bt}xi.fromFeature=function(e,t){for(var i=new xi,c=0;c<e.sections.length;c++){var h=e.sections[c];h.image?i.addImageSection(h):i.addTextSection(h,t)}return i},xi.prototype.length=function(){return this.text.length},xi.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},xi.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},xi.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},xi.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var c=e.charCodeAt(i+1)||null,h=e.charCodeAt(i-1)||null;t+=c&&vp(c)&&!zp[e[i+1]]||h&&vp(h)&&!zp[e[i-1]]||!zp[e[i]]?e[i]:zp[e[i]]}return t}(this.text)},xi.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&gf[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,c=this.text.length-1;c>=0&&c>=e&&gf[this.text.charCodeAt(c)];c--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},xi.prototype.substring=function(e,t){var i=new xi;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},xi.prototype.toString=function(){return this.text},xi.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},xi.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(hc.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,c=0;c<e.text.length;++c)this.sectionIndex.push(i)},xi.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(hc.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Ct("Reached maximum number of images 6401")}else Ct("Can't add FormattedSection with an empty image.")},xi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var gf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Eo={};function a_(e,t,i,c,h,d){if(t.imageName){var v=c[t.imageName];return v?v.displaySize[0]*t.scale*24/d+h:0}var b=i[t.fontStack],T=b&&b[e];return T?T.metrics.advance*t.scale+h:0}function s_(e,t,i,c){var h=Math.pow(e-t,2);return c?e<t?h/2:2*h:h+Math.abs(i)*i}function g2(e,t,i){var c=0;return e===10&&(c-=1e4),i&&(c+=150),e!==40&&e!==65288||(c+=50),t!==41&&t!==65289||(c+=50),c}function u_(e,t,i,c,h,d){for(var v=null,b=s_(t,i,h,d),T=0,C=c;T<C.length;T+=1){var A=C[T],z=s_(t-A.x,i,h,d)+A.badness;z<=b&&(v=A,b=z)}return{index:e,x:t,priorBreak:v,badness:b}}function Om(e,t,i,c,h,d,v){if(d!=="point")return[];if(!e)return[];for(var b,T=[],C=function(ae,te,he,ge,we,Te){for(var Fe=0,Ze=0;Ze<ae.length();Ze++){var Ke=ae.getSection(Ze);Fe+=a_(ae.getCharCode(Ze),Ke,ge,we,te,Te)}return Fe/Math.max(1,Math.ceil(Fe/he))}(e,t,i,c,h,v),A=e.text.indexOf("\u200B")>=0,z=0,R=0;R<e.length();R++){var U=e.getSection(R),H=e.getCharCode(R);if(gf[H]||(z+=a_(H,U,c,h,t,v)),R<e.length()-1){var K=!((b=H)<11904||!(et["Bopomofo Extended"](b)||et.Bopomofo(b)||et["CJK Compatibility Forms"](b)||et["CJK Compatibility Ideographs"](b)||et["CJK Compatibility"](b)||et["CJK Radicals Supplement"](b)||et["CJK Strokes"](b)||et["CJK Symbols and Punctuation"](b)||et["CJK Unified Ideographs Extension A"](b)||et["CJK Unified Ideographs"](b)||et["Enclosed CJK Letters and Months"](b)||et["Halfwidth and Fullwidth Forms"](b)||et.Hiragana(b)||et["Ideographic Description Characters"](b)||et["Kangxi Radicals"](b)||et["Katakana Phonetic Extensions"](b)||et.Katakana(b)||et["Vertical Forms"](b)||et["Yi Radicals"](b)||et["Yi Syllables"](b)));(Eo[H]||K||U.imageName)&&T.push(u_(R+1,z,C,T,g2(H,e.getCharCode(R+1),K&&A),!1))}}return function ae(te){return te?ae(te.priorBreak).concat(te.index):[]}(u_(e.length(),z,C,T,0,!0))}function Rm(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function _2(e,t,i,c,h){if(c||h)for(var d=e[i],v=(e[i].x+d.metrics.advance*d.scale)*c,b=t;b<=i;b++)e[b].x-=v,e[b].y+=h}function l_(e,t,i,c,h,d){var v,b=e.image;if(b.content){var T=b.content,C=b.pixelRatio||1;v=[T[0]/C,T[1]/C,b.displaySize[0]-T[2]/C,b.displaySize[1]-T[3]/C]}var A,z,R,U,H=t.left*d,K=t.right*d;i==="width"||i==="both"?(U=h[0]+H-c[3],z=h[0]+K+c[1]):z=(U=h[0]+(H+K-b.displaySize[0])/2)+b.displaySize[0];var ae=t.top*d,te=t.bottom*d;return i==="height"||i==="both"?(A=h[1]+ae-c[0],R=h[1]+te+c[2]):R=(A=h[1]+(ae+te-b.displaySize[1])/2)+b.displaySize[1],{image:b,top:A,right:z,bottom:R,left:U,collisionPadding:v}}Eo[10]=!0,Eo[32]=!0,Eo[38]=!0,Eo[40]=!0,Eo[41]=!0,Eo[43]=!0,Eo[45]=!0,Eo[47]=!0,Eo[173]=!0,Eo[183]=!0,Eo[8203]=!0,Eo[8208]=!0,Eo[8211]=!0,Eo[8231]=!0;var fc=function(e){function t(i,c,h,d){e.call(this,i,c),this.angle=h,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(ee);function Fm(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new nr(e+1))};if(i.kind==="source")return{kind:"source"};for(var c=i.zoomStops,h=i.interpolationType,d=0;d<c.length&&c[d]<=e;)d++;for(var v=d=Math.max(0,d-1);v<c.length&&c[v]<e+1;)v++;v=Math.min(c.length-1,v);var b=c[d],T=c[v];return i.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:T,interpolationType:h}:{kind:"camera",minZoom:b,maxZoom:T,minSize:i.evaluate(new nr(b)),maxSize:i.evaluate(new nr(T)),interpolationType:h}}function c_(e,t,i){var c=t.uSize,h=i.lowerSize;return e.kind==="source"?h/128:e.kind==="composite"?nn(h/128,i.upperSize/128,t.uSizeT):c}function p_(e,t){var i=0,c=0;if(e.kind==="constant")c=e.layoutSize;else if(e.kind!=="source"){var h=e.interpolationType,d=h?se(Tn.interpolationFactor(h,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?c=nn(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:c}}ft("Anchor",fc);var x2=Object.freeze({__proto__:null,getSizeData:Fm,evaluateSizeForFeature:c_,evaluateSizeForZoom:p_,SIZE_PACK_FACTOR:128});function h_(e,t,i,c,h){if(t.segment===void 0)return!0;for(var d=t,v=t.segment+1,b=0;b>-i/2;){if(--v<0)return!1;b-=e[v].dist(d),d=e[v]}b+=e[v].dist(e[v+1]),v++;for(var T=[],C=0;b<i/2;){var A=e[v],z=e[v+1];if(!z)return!1;var R=e[v-1].angleTo(A)-A.angleTo(z);for(R=Math.abs((R+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:b,angleDelta:R}),C+=R;b-T[0].distance>c;)C-=T.shift().angleDelta;if(C>h)return!1;v++,b+=A.dist(z)}return!0}function f_(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function d_(e,t,i){return e?.6*t*i:0}function m_(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function b2(e,t,i,c,h,d){for(var v=d_(i,h,d),b=m_(i,c)*d,T=0,C=f_(e)/2,A=0;A<e.length-1;A++){var z=e[A],R=e[A+1],U=z.dist(R);if(T+U>C){var H=(C-T)/U,K=nn(z.x,R.x,H),ae=nn(z.y,R.y,H),te=new fc(K,ae,R.angleTo(z),A);return te._round(),!v||h_(e,te,b,v,t)?te:void 0}T+=U}}function w2(e,t,i,c,h,d,v,b,T){var C=d_(c,d,v),A=m_(c,h),z=A*v,R=e[0].x===0||e[0].x===T||e[0].y===0||e[0].y===T;return t-z<t/4&&(t=z+t/4),function U(H,K,ae,te,he,ge,we,Te,Fe){for(var Ze=ge/2,Ke=f_(H),xt=0,it=K-ae,Tt=[],ot=0;ot<H.length-1;ot++){for(var Yt=H[ot],Bt=H[ot+1],vt=Yt.dist(Bt),rr=Bt.angleTo(Yt);it+ae<xt+vt;){var Ht=((it+=ae)-xt)/vt,pr=nn(Yt.x,Bt.x,Ht),Pt=nn(Yt.y,Bt.y,Ht);if(pr>=0&&pr<Fe&&Pt>=0&&Pt<Fe&&it-Ze>=0&&it+Ze<=Ke){var xr=new fc(pr,Pt,rr,ot);xr._round(),te&&!h_(H,xr,ge,te,he)||Tt.push(xr)}}xt+=vt}return Te||Tt.length||we||(Tt=U(H,xt/2,ae,te,he,ge,we,!0,Fe)),Tt}(e,R?t/2*b%t:(A/2+2*d)*v*b%t,t,C,i,z,R,!1,T)}function y_(e,t,i,c,h){for(var d=[],v=0;v<e.length;v++)for(var b=e[v],T=void 0,C=0;C<b.length-1;C++){var A=b[C],z=b[C+1];A.x<t&&z.x<t||(A.x<t?A=new ee(t,A.y+(t-A.x)/(z.x-A.x)*(z.y-A.y))._round():z.x<t&&(z=new ee(t,A.y+(t-A.x)/(z.x-A.x)*(z.y-A.y))._round()),A.y<i&&z.y<i||(A.y<i?A=new ee(A.x+(i-A.y)/(z.y-A.y)*(z.x-A.x),i)._round():z.y<i&&(z=new ee(A.x+(i-A.y)/(z.y-A.y)*(z.x-A.x),i)._round()),A.x>=c&&z.x>=c||(A.x>=c?A=new ee(c,A.y+(c-A.x)/(z.x-A.x)*(z.y-A.y))._round():z.x>=c&&(z=new ee(c,A.y+(c-A.x)/(z.x-A.x)*(z.y-A.y))._round()),A.y>=h&&z.y>=h||(A.y>=h?A=new ee(A.x+(h-A.y)/(z.y-A.y)*(z.x-A.x),h)._round():z.y>=h&&(z=new ee(A.x+(h-A.y)/(z.y-A.y)*(z.x-A.x),h)._round()),T&&A.equals(T[T.length-1])||d.push(T=[A]),T.push(z)))))}return d}function v_(e,t,i,c){var h=[],d=e.image,v=d.pixelRatio,b=d.paddedRect.w-2,T=d.paddedRect.h-2,C=e.right-e.left,A=e.bottom-e.top,z=d.stretchX||[[0,b]],R=d.stretchY||[[0,T]],U=function(pr,Pt){return pr+Pt[1]-Pt[0]},H=z.reduce(U,0),K=R.reduce(U,0),ae=b-H,te=T-K,he=0,ge=H,we=0,Te=K,Fe=0,Ze=ae,Ke=0,xt=te;if(d.content&&c){var it=d.content;he=_f(z,0,it[0]),we=_f(R,0,it[1]),ge=_f(z,it[0],it[2]),Te=_f(R,it[1],it[3]),Fe=it[0]-he,Ke=it[1]-we,Ze=it[2]-it[0]-ge,xt=it[3]-it[1]-Te}var Tt=function(pr,Pt,xr,Kr){var dn=xf(pr.stretch-he,ge,C,e.left),ln=bf(pr.fixed-Fe,Ze,pr.stretch,H),Jr=xf(Pt.stretch-we,Te,A,e.top),mn=bf(Pt.fixed-Ke,xt,Pt.stretch,K),Zn=xf(xr.stretch-he,ge,C,e.left),Gn=bf(xr.fixed-Fe,Ze,xr.stretch,H),bi=xf(Kr.stretch-we,Te,A,e.top),ti=bf(Kr.fixed-Ke,xt,Kr.stretch,K),wi=new ee(dn,Jr),xn=new ee(Zn,Jr),ri=new ee(Zn,bi),sr=new ee(dn,bi),Br=new ee(ln/v,mn/v),Ar=new ee(Gn/v,ti/v),yr=t*Math.PI/180;if(yr){var Ri=Math.sin(yr),hi=Math.cos(yr),Hr=[hi,-Ri,Ri,hi];wi._matMult(Hr),xn._matMult(Hr),sr._matMult(Hr),ri._matMult(Hr)}var Cn=pr.stretch+pr.fixed,fi=Pt.stretch+Pt.fixed;return{tl:wi,tr:xn,bl:sr,br:ri,tex:{x:d.paddedRect.x+1+Cn,y:d.paddedRect.y+1+fi,w:xr.stretch+xr.fixed-Cn,h:Kr.stretch+Kr.fixed-fi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Br,pixelOffsetBR:Ar,minFontScaleX:Ze/v/C,minFontScaleY:xt/v/A,isSDF:i}};if(c&&(d.stretchX||d.stretchY))for(var ot=g_(z,ae,H),Yt=g_(R,te,K),Bt=0;Bt<ot.length-1;Bt++)for(var vt=ot[Bt],rr=ot[Bt+1],Ht=0;Ht<Yt.length-1;Ht++)h.push(Tt(vt,Yt[Ht],rr,Yt[Ht+1]));else h.push(Tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:T+1}));return h}function _f(e,t,i){for(var c=0,h=0,d=e;h<d.length;h+=1){var v=d[h];c+=Math.max(t,Math.min(i,v[1]))-Math.max(t,Math.min(i,v[0]))}return c}function g_(e,t,i){for(var c=[{fixed:-1,stretch:0}],h=0,d=e;h<d.length;h+=1){var v=d[h],b=v[0],T=v[1],C=c[c.length-1];c.push({fixed:b-C.stretch,stretch:C.stretch}),c.push({fixed:b-C.stretch,stretch:C.stretch+(T-b)})}return c.push({fixed:t+1,stretch:i}),c}function xf(e,t,i,c){return e/t*i+c}function bf(e,t,i,c){return e-t*i/c}var wf=function(e,t,i,c,h,d,v,b,T,C){if(this.boxStartIndex=e.length,T){var A=d.top,z=d.bottom,R=d.collisionPadding;R&&(A-=R[1],z+=R[3]);var U=z-A;U>0&&(U=Math.max(10,U),this.circleDiameter=U)}else{var H=d.top*v-b,K=d.bottom*v+b,ae=d.left*v-b,te=d.right*v+b,he=d.collisionPadding;if(he&&(ae-=he[0]*v,H-=he[1]*v,te+=he[2]*v,K+=he[3]*v),C){var ge=new ee(ae,H),we=new ee(te,H),Te=new ee(ae,K),Fe=new ee(te,K),Ze=C*Math.PI/180;ge._rotate(Ze),we._rotate(Ze),Te._rotate(Ze),Fe._rotate(Ze),ae=Math.min(ge.x,we.x,Te.x,Fe.x),te=Math.max(ge.x,we.x,Te.x,Fe.x),H=Math.min(ge.y,we.y,Te.y,Fe.y),K=Math.max(ge.y,we.y,Te.y,Fe.y)}e.emplaceBack(t.x,t.y,ae,H,te,K,i,c,h)}this.boxEndIndex=e.length},dc=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=S2),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function S2(e,t){return e<t?-1:e>t?1:0}function E2(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var c=1/0,h=1/0,d=-1/0,v=-1/0,b=e[0],T=0;T<b.length;T++){var C=b[T];(!T||C.x<c)&&(c=C.x),(!T||C.y<h)&&(h=C.y),(!T||C.x>d)&&(d=C.x),(!T||C.y>v)&&(v=C.y)}var A=Math.min(d-c,v-h),z=A/2,R=new dc([],T2);if(A===0)return new ee(c,h);for(var U=c;U<d;U+=A)for(var H=h;H<v;H+=A)R.push(new mc(U+z,H+z,z,e));for(var K=function(he){for(var ge=0,we=0,Te=0,Fe=he[0],Ze=0,Ke=Fe.length,xt=Ke-1;Ze<Ke;xt=Ze++){var it=Fe[Ze],Tt=Fe[xt],ot=it.x*Tt.y-Tt.x*it.y;we+=(it.x+Tt.x)*ot,Te+=(it.y+Tt.y)*ot,ge+=3*ot}return new mc(we/ge,Te/ge,0,he)}(e),ae=R.length;R.length;){var te=R.pop();(te.d>K.d||!K.d)&&(K=te,i&&console.log("found best %d after %d probes",Math.round(1e4*te.d)/1e4,ae)),te.max-K.d<=t||(R.push(new mc(te.p.x-(z=te.h/2),te.p.y-z,z,e)),R.push(new mc(te.p.x+z,te.p.y-z,z,e)),R.push(new mc(te.p.x-z,te.p.y+z,z,e)),R.push(new mc(te.p.x+z,te.p.y+z,z,e)),ae+=4)}return i&&(console.log("num probes: "+ae),console.log("best distance: "+K.d)),K.p}function T2(e,t){return t.max-e.max}function mc(e,t,i,c){this.p=new ee(e,t),this.h=i,this.d=function(h,d){for(var v=!1,b=1/0,T=0;T<d.length;T++)for(var C=d[T],A=0,z=C.length,R=z-1;A<z;R=A++){var U=C[A],H=C[R];U.y>h.y!=H.y>h.y&&h.x<(H.x-U.x)*(h.y-U.y)/(H.y-U.y)+U.x&&(v=!v),b=Math.min(b,gu(h,U,H))}return(v?1:-1)*Math.sqrt(b)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}dc.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},dc.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},dc.prototype.peek=function(){return this.data[0]},dc.prototype._up=function(e){for(var t=this.data,i=this.compare,c=t[e];e>0;){var h=e-1>>1,d=t[h];if(i(c,d)>=0)break;t[e]=d,e=h}t[e]=c},dc.prototype._down=function(e){for(var t=this.data,i=this.compare,c=this.length>>1,h=t[e];e<c;){var d=1+(e<<1),v=t[d],b=d+1;if(b<this.length&&i(t[b],v)<0&&(d=b,v=t[b]),i(v,h)>=0)break;t[e]=v,e=d}t[e]=h};var Bm=Number.POSITIVE_INFINITY;function __(e,t){return t[1]!==Bm?function(i,c,h){var d=0,v=0;switch(c=Math.abs(c),h=Math.abs(h),i){case"top-right":case"top-left":case"top":v=h-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-h}switch(i){case"top-right":case"bottom-right":case"right":d=-c;break;case"top-left":case"bottom-left":case"left":d=c}return[d,v]}(e,t[0],t[1]):function(i,c){var h=0,d=0;c<0&&(c=0);var v=c/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=v-7;break;case"bottom-right":case"bottom-left":d=7-v;break;case"bottom":d=7-c;break;case"top":d=c-7}switch(i){case"top-right":case"bottom-right":h=-v;break;case"top-left":case"bottom-left":h=v;break;case"left":h=c;break;case"right":h=-c}return[h,d]}(e,t[0])}function Um(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function x_(e,t,i,c,h,d,v,b,T,C,A,z,R,U,H){var K=function(we,Te,Fe,Ze,Ke,xt,it,Tt){for(var ot=Ze.layout.get("text-rotate").evaluate(xt,{})*Math.PI/180,Yt=[],Bt=0,vt=Te.positionedLines;Bt<vt.length;Bt+=1)for(var rr=vt[Bt],Ht=0,pr=rr.positionedGlyphs;Ht<pr.length;Ht+=1){var Pt=pr[Ht];if(Pt.rect){var xr=Pt.rect||{},Kr=4,dn=!0,ln=1,Jr=0,mn=(Ke||Tt)&&Pt.vertical,Zn=Pt.metrics.advance*Pt.scale/2;if(Tt&&Te.verticalizable&&(Jr=rr.lineOffset/2-(Pt.imageName?-(24-Pt.metrics.width*Pt.scale)/2:24*(Pt.scale-1))),Pt.imageName){var Gn=it[Pt.imageName];dn=Gn.sdf,Kr=1/(ln=Gn.pixelRatio)}var bi=Ke?[Pt.x+Zn,Pt.y]:[0,0],ti=Ke?[0,0]:[Pt.x+Zn+Fe[0],Pt.y+Fe[1]-Jr],wi=[0,0];mn&&(wi=ti,ti=[0,0]);var xn=(Pt.metrics.left-Kr)*Pt.scale-Zn+ti[0],ri=(-Pt.metrics.top-Kr)*Pt.scale+ti[1],sr=xn+xr.w*Pt.scale/ln,Br=ri+xr.h*Pt.scale/ln,Ar=new ee(xn,ri),yr=new ee(sr,ri),Ri=new ee(xn,Br),hi=new ee(sr,Br);if(mn){var Hr=new ee(-Zn,Zn- -17),Cn=-Math.PI/2,fi=12-Zn,br=new ee(22-fi,-(Pt.imageName?fi:0)),ms=new(Function.prototype.bind.apply(ee,[null].concat(wi)));Ar._rotateAround(Cn,Hr)._add(br)._add(ms),yr._rotateAround(Cn,Hr)._add(br)._add(ms),Ri._rotateAround(Cn,Hr)._add(br)._add(ms),hi._rotateAround(Cn,Hr)._add(br)._add(ms)}if(ot){var jo=Math.sin(ot),ys=Math.cos(ot),bn=[ys,-jo,jo,ys];Ar._matMult(bn),yr._matMult(bn),Ri._matMult(bn),hi._matMult(bn)}var vs=new ee(0,0),Ea=new ee(0,0);Yt.push({tl:Ar,tr:yr,bl:Ri,br:hi,tex:xr,writingMode:Te.writingMode,glyphOffset:bi,sectionIndex:Pt.sectionIndex,isSDF:dn,pixelOffsetTL:vs,pixelOffsetBR:Ea,minFontScaleX:0,minFontScaleY:0})}}return Yt}(0,i,b,h,d,v,c,e.allowVerticalPlacement),ae=e.textSizeData,te=null;ae.kind==="source"?(te=[128*h.layout.get("text-size").evaluate(v,{})])[0]>32640&&Ct(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ae.kind==="composite"&&((te=[128*U.compositeTextSizes[0].evaluate(v,{},H),128*U.compositeTextSizes[1].evaluate(v,{},H)])[0]>32640||te[1]>32640)&&Ct(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,K,te,b,d,v,C,t,T.lineStartIndex,T.lineLength,R,H);for(var he=0,ge=A;he<ge.length;he+=1)z[ge[he]]=e.text.placedSymbolArray.length-1;return 4*K.length}function b_(e){for(var t in e)return e[t];return null}function P2(e,t,i,c){var h=e.compareText;if(t in h){for(var d=h[t],v=d.length-1;v>=0;v--)if(c.dist(d[v])<i)return!0}else h[t]=[];return h[t].push(c),!1}var C2=lc.VectorTileFeature.types,I2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Sf(e,t,i,c,h,d,v,b,T,C,A,z,R){var U=b?Math.min(32640,Math.round(b[0])):0,H=b?Math.min(32640,Math.round(b[1])):0;e.emplaceBack(t,i,Math.round(32*c),Math.round(32*h),d,v,(U<<1)+(T?1:0),H,16*C,16*A,256*z,256*R)}function Nm(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function k2(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(Yl(i[t].text))return!0;return!1}var yc=function(e){this.layoutVertexArray=new rc,this.indexArray=new ls,this.programConfigurations=e,this.segments=new q,this.dynamicLayoutVertexArray=new mu,this.opacityVertexArray=new sl,this.placedSymbolArray=new p};yc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},yc.prototype.upload=function(e,t,i,c){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,t2.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,r2.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,I2,!0),this.opacityVertexBuffer.itemSize=1),(i||c)&&this.programConfigurations.upload(e))},yc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ft("SymbolBuffers",yc);var Op=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new q,this.collisionVertexArray=new Sp};Op.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,n2.members,!0)},Op.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ft("CollisionBuffers",Op);var Or=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=So([]),this.placementViewportMatrix=So([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fm(this.zoom,t["text-size"]),this.iconSizeData=Fm(this.zoom,t["icon-size"]);var i=this.layers[0].layout,c=i.get("symbol-sort-key"),h=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=h!=="viewport-y"&&c.constantOr(1)!==void 0,this.sortFeaturesByY=(h==="viewport-y"||h==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return No[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};Or.prototype.createArrays=function(){this.text=new yc(new Ot(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new yc(new Ot(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new x,this.lineVertexArray=new E,this.symbolInstances=new g},Or.prototype.calculateGlyphDependencies=function(e,t,i,c,h){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(i||c)&&h){var v=zp[e.charAt(d)];v&&(t[v.charCodeAt(0)]=!0)}},Or.prototype.populate=function(e,t,i){var c=this.layers[0],h=c.layout,d=h.get("text-font"),v=h.get("text-field"),b=h.get("icon-image"),T=(v.value.kind!=="constant"||v.value.value instanceof Nr&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),C=b.value.kind!=="constant"||!!b.value.value||Object.keys(b.parameters).length>0,A=h.get("symbol-sort-key");if(this.features=[],T||C){for(var z=t.iconDependencies,R=t.glyphDependencies,U=t.availableImages,H=new nr(this.zoom),K=0,ae=e;K<ae.length;K+=1){var te=ae[K],he=te.feature,ge=te.id,we=te.index,Te=te.sourceLayerIndex,Fe=c._featureFilter.needGeometry,Ze=_n(he,Fe);if(c._featureFilter.filter(H,Ze,i)){Fe||(Ze.geometry=un(he));var Ke=void 0;if(T){var xt=c.getValueAndResolveTokens("text-field",Ze,i,U),it=Nr.factory(xt);k2(it)&&(this.hasRTLText=!0),(!this.hasRTLText||_p()==="unavailable"||this.hasRTLText&&wo.isParsed())&&(Ke=o2(it,c,Ze))}var Tt=void 0;if(C){var ot=c.getValueAndResolveTokens("icon-image",Ze,i,U);Tt=ot instanceof Kn?ot:Kn.fromString(ot)}if(Ke||Tt){var Yt=this.sortFeaturesByKey?A.evaluate(Ze,{},i):void 0;if(this.features.push({id:ge,text:Ke,icon:Tt,index:we,sourceLayerIndex:Te,geometry:Ze.geometry,properties:he.properties,type:C2[he.type],sortKey:Yt}),Tt&&(z[Tt.name]=!0),Ke){var Bt=d.evaluate(Ze,{},i).join(","),vt=h.get("text-rotation-alignment")==="map"&&h.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(No.vertical)>=0;for(var rr=0,Ht=Ke.sections;rr<Ht.length;rr+=1){var pr=Ht[rr];if(pr.image)z[pr.image.name]=!0;else{var Pt=yp(Ke.toString()),xr=pr.fontStack||Bt,Kr=R[xr]=R[xr]||{};this.calculateGlyphDependencies(pr.text,Kr,vt,this.allowVerticalPlacement,Pt)}}}}}}h.get("symbol-placement")==="line"&&(this.features=function(dn){var ln={},Jr={},mn=[],Zn=0;function Gn(Hr){mn.push(dn[Hr]),Zn++}function bi(Hr,Cn,fi){var br=Jr[Hr];return delete Jr[Hr],Jr[Cn]=br,mn[br].geometry[0].pop(),mn[br].geometry[0]=mn[br].geometry[0].concat(fi[0]),br}function ti(Hr,Cn,fi){var br=ln[Cn];return delete ln[Cn],ln[Hr]=br,mn[br].geometry[0].shift(),mn[br].geometry[0]=fi[0].concat(mn[br].geometry[0]),br}function wi(Hr,Cn,fi){var br=fi?Cn[0][Cn[0].length-1]:Cn[0][0];return Hr+":"+br.x+":"+br.y}for(var xn=0;xn<dn.length;xn++){var ri=dn[xn],sr=ri.geometry,Br=ri.text?ri.text.toString():null;if(Br){var Ar=wi(Br,sr),yr=wi(Br,sr,!0);if(Ar in Jr&&yr in ln&&Jr[Ar]!==ln[yr]){var Ri=ti(Ar,yr,sr),hi=bi(Ar,yr,mn[Ri].geometry);delete ln[Ar],delete Jr[yr],Jr[wi(Br,mn[hi].geometry,!0)]=hi,mn[Ri].geometry=null}else Ar in Jr?bi(Ar,yr,sr):yr in ln?ti(Ar,yr,sr):(Gn(xn),ln[Ar]=Zn-1,Jr[yr]=Zn-1)}else Gn(xn)}return mn.filter(function(Hr){return Hr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(dn,ln){return dn.sortKey-ln.sortKey})}},Or.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},Or.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Or.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Or.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Or.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Or.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Or.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var c=e.dist(t[e.segment+1]),h=e.dist(t[e.segment]),d={},v=e.segment+1;v<t.length;v++)d[v]={x:t[v].x,y:t[v].y,tileUnitDistanceFromAnchor:c},v<t.length-1&&(c+=t[v+1].dist(t[v]));for(var b=e.segment||0;b>=0;b--)d[b]={x:t[b].x,y:t[b].y,tileUnitDistanceFromAnchor:h},b>0&&(h+=t[b-1].dist(t[b]));for(var T=0;T<t.length;T++){var C=d[T];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Or.prototype.addSymbols=function(e,t,i,c,h,d,v,b,T,C,A,z){for(var R=e.indexArray,U=e.layoutVertexArray,H=e.segments.prepareSegment(4*t.length,U,R,this.canOverlap?d.sortKey:void 0),K=this.glyphOffsetArray.length,ae=H.vertexLength,te=this.allowVerticalPlacement&&v===No.vertical?Math.PI/2:0,he=d.text&&d.text.sections,ge=0;ge<t.length;ge++){var we=t[ge],Te=we.tl,Fe=we.tr,Ze=we.bl,Ke=we.br,xt=we.tex,it=we.pixelOffsetTL,Tt=we.pixelOffsetBR,ot=we.minFontScaleX,Yt=we.minFontScaleY,Bt=we.glyphOffset,vt=we.isSDF,rr=we.sectionIndex,Ht=H.vertexLength,pr=Bt[1];Sf(U,b.x,b.y,Te.x,pr+Te.y,xt.x,xt.y,i,vt,it.x,it.y,ot,Yt),Sf(U,b.x,b.y,Fe.x,pr+Fe.y,xt.x+xt.w,xt.y,i,vt,Tt.x,it.y,ot,Yt),Sf(U,b.x,b.y,Ze.x,pr+Ze.y,xt.x,xt.y+xt.h,i,vt,it.x,Tt.y,ot,Yt),Sf(U,b.x,b.y,Ke.x,pr+Ke.y,xt.x+xt.w,xt.y+xt.h,i,vt,Tt.x,Tt.y,ot,Yt),Nm(e.dynamicLayoutVertexArray,b,te),R.emplaceBack(Ht,Ht+1,Ht+2),R.emplaceBack(Ht+1,Ht+2,Ht+3),H.vertexLength+=4,H.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Bt[0]),ge!==t.length-1&&rr===t[ge+1].sectionIndex||e.programConfigurations.populatePaintArrays(U.length,d,d.index,{},z,he&&he[rr])}e.placedSymbolArray.emplaceBack(b.x,b.y,K,this.glyphOffsetArray.length-K,ae,T,C,b.segment,i?i[0]:0,i?i[1]:0,c[0],c[1],v,0,!1,0,A)},Or.prototype._addCollisionDebugVertex=function(e,t,i,c,h,d){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,c,h,Math.round(d.x),Math.round(d.y))},Or.prototype.addCollisionDebugVertices=function(e,t,i,c,h,d,v){var b=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),T=b.vertexLength,C=h.layoutVertexArray,A=h.collisionVertexArray,z=v.anchorX,R=v.anchorY;this._addCollisionDebugVertex(C,A,d,z,R,new ee(e,t)),this._addCollisionDebugVertex(C,A,d,z,R,new ee(i,t)),this._addCollisionDebugVertex(C,A,d,z,R,new ee(i,c)),this._addCollisionDebugVertex(C,A,d,z,R,new ee(e,c)),b.vertexLength+=4;var U=h.indexArray;U.emplaceBack(T,T+1),U.emplaceBack(T+1,T+2),U.emplaceBack(T+2,T+3),U.emplaceBack(T+3,T),b.primitiveLength+=4},Or.prototype.addDebugCollisionBoxes=function(e,t,i,c){for(var h=e;h<t;h++){var d=this.collisionBoxArray.get(h);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,c?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},Or.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Op(yu,Qg.members,ul),this.iconCollisionBox=new Op(yu,Qg.members,ul);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Or.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,c,h,d,v,b,T){for(var C={},A=t;A<i;A++){var z=e.get(A);C.textBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},C.textFeatureIndex=z.featureIndex;break}for(var R=c;R<h;R++){var U=e.get(R);C.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},C.verticalTextFeatureIndex=U.featureIndex;break}for(var H=d;H<v;H++){var K=e.get(H);C.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},C.iconFeatureIndex=K.featureIndex;break}for(var ae=b;ae<T;ae++){var te=e.get(ae);C.verticalIconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},C.verticalIconFeatureIndex=te.featureIndex;break}return C},Or.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Or.prototype.hasTextData=function(){return this.text.segments.get().length>0},Or.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Or.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Or.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Or.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Or.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),c=i.vertexStartIndex+4*i.numGlyphs,h=i.vertexStartIndex;h<c;h+=4)e.indexArray.emplaceBack(h,h+1,h+2),e.indexArray.emplaceBack(h+1,h+2,h+3)},Or.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),c=[],h=[],d=[],v=0;v<this.symbolInstances.length;++v){d.push(v);var b=this.symbolInstances.get(v);c.push(0|Math.round(t*b.anchorX+i*b.anchorY)),h.push(b.featureIndex)}return d.sort(function(T,C){return c[T]-c[C]||h[C]-h[T]}),d},Or.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Or.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,c=this.symbolInstanceIndexes;i<c.length;i+=1){var h=this.symbolInstances.get(c[i]);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach(function(d,v,b){d>=0&&b.indexOf(d)===v&&t.addIndicesForPlacedSymbol(t.text,d)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ft("SymbolBucket",Or,{omit:["layers","collisionBoxArray","features","compareText"]}),Or.MAX_GLYPHS=65535,Or.addDynamicAttributes=Nm;var A2=new ai({"symbol-placement":new St(V.layout_symbol["symbol-placement"]),"symbol-spacing":new St(V.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new St(V.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(V.layout_symbol["symbol-sort-key"]),"symbol-z-order":new St(V.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new St(V.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new St(V.layout_symbol["icon-ignore-placement"]),"icon-optional":new St(V.layout_symbol["icon-optional"]),"icon-rotation-alignment":new St(V.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(V.layout_symbol["icon-size"]),"icon-text-fit":new St(V.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new St(V.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(V.layout_symbol["icon-image"]),"icon-rotate":new yt(V.layout_symbol["icon-rotate"]),"icon-padding":new St(V.layout_symbol["icon-padding"]),"icon-keep-upright":new St(V.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(V.layout_symbol["icon-offset"]),"icon-anchor":new yt(V.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new St(V.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new St(V.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new St(V.layout_symbol["text-rotation-alignment"]),"text-field":new yt(V.layout_symbol["text-field"]),"text-font":new yt(V.layout_symbol["text-font"]),"text-size":new yt(V.layout_symbol["text-size"]),"text-max-width":new yt(V.layout_symbol["text-max-width"]),"text-line-height":new St(V.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(V.layout_symbol["text-letter-spacing"]),"text-justify":new yt(V.layout_symbol["text-justify"]),"text-radial-offset":new yt(V.layout_symbol["text-radial-offset"]),"text-variable-anchor":new St(V.layout_symbol["text-variable-anchor"]),"text-anchor":new yt(V.layout_symbol["text-anchor"]),"text-max-angle":new St(V.layout_symbol["text-max-angle"]),"text-writing-mode":new St(V.layout_symbol["text-writing-mode"]),"text-rotate":new yt(V.layout_symbol["text-rotate"]),"text-padding":new St(V.layout_symbol["text-padding"]),"text-keep-upright":new St(V.layout_symbol["text-keep-upright"]),"text-transform":new yt(V.layout_symbol["text-transform"]),"text-offset":new yt(V.layout_symbol["text-offset"]),"text-allow-overlap":new St(V.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new St(V.layout_symbol["text-ignore-placement"]),"text-optional":new St(V.layout_symbol["text-optional"])}),jm={paint:new ai({"icon-opacity":new yt(V.paint_symbol["icon-opacity"]),"icon-color":new yt(V.paint_symbol["icon-color"]),"icon-halo-color":new yt(V.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(V.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(V.paint_symbol["icon-halo-blur"]),"icon-translate":new St(V.paint_symbol["icon-translate"]),"icon-translate-anchor":new St(V.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(V.paint_symbol["text-opacity"]),"text-color":new yt(V.paint_symbol["text-color"],{runtimeType:Qe,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new yt(V.paint_symbol["text-halo-color"]),"text-halo-width":new yt(V.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(V.paint_symbol["text-halo-blur"]),"text-translate":new St(V.paint_symbol["text-translate"]),"text-translate-anchor":new St(V.paint_symbol["text-translate-anchor"])}),layout:A2},vc=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:st,this.defaultValue=e};vc.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},vc.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},vc.prototype.outputDefined=function(){return!1},vc.prototype.serialize=function(){return null},ft("FormatSectionOverride",vc,{omit:["defaultValue"]});var M2=function(e){function t(i){e.call(this,i,jm)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,c){if(e.prototype.recalculate.call(this,i,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var h=this.layout.get("text-writing-mode");if(h){for(var d=[],v=0,b=h;v<b.length;v+=1){var T=b[v];d.indexOf(T)<0&&d.push(T)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,c,h,d){var v=this.layout.get(i).evaluate(c,{},h,d),b=this._unevaluatedLayout._values[i];return b.isDataDriven()||Jo(b.value)||!v?v:function(T,C){return C.replace(/{([^{}]+)}/g,function(A,z){return z in T?String(T[z]):""})}(c.properties,v)},t.prototype.createBucket=function(i){return new Or(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,c=jm.paint.overridableProperties;i<c.length;i+=1){var h=c[i];if(t.hasPaintOverride(this.layout,h)){var d,v=this.paint.get(h),b=new vc(v),T=new ja(b,v.property.specification);d=v.value.kind==="constant"||v.value.kind==="source"?new Ns("source",T):new de("composite",T,v.value.zoomStops,v.value._interpolationType),this.paint._values[h]=new vi(v.property,d,v.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,c,h){return!(!this.layout||c.isDataDriven()||h.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,c){var h=i.get("text-field"),d=jm.paint.properties[c],v=!1,b=function(A){for(var z=0,R=A;z<R.length;z+=1)if(d.overrides&&d.overrides.hasOverride(R[z]))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Nr)b(h.value.value.sections);else if(h.value.kind==="source"){var T=function(A){v||(A instanceof ii&&rn(A.value)===kr?b(A.value.sections):A instanceof yo?b(A.sections):A.eachChild(T))},C=h.value;C._styleExpression&&T(C._styleExpression.expression)}return v},t}(xa),z2={paint:new ai({"background-color":new St(V.paint_background["background-color"]),"background-pattern":new gi(V.paint_background["background-pattern"]),"background-opacity":new St(V.paint_background["background-opacity"])})},L2=function(e){function t(i){e.call(this,i,z2)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(xa),D2={paint:new ai({"raster-opacity":new St(V.paint_raster["raster-opacity"]),"raster-hue-rotate":new St(V.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new St(V.paint_raster["raster-brightness-min"]),"raster-brightness-max":new St(V.paint_raster["raster-brightness-max"]),"raster-saturation":new St(V.paint_raster["raster-saturation"]),"raster-contrast":new St(V.paint_raster["raster-contrast"]),"raster-resampling":new St(V.paint_raster["raster-resampling"]),"raster-fade-duration":new St(V.paint_raster["raster-fade-duration"])})},O2=function(e){function t(i){e.call(this,i,D2)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(xa),R2=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(xa),F2={circle:Tm,heatmap:xw,hillshade:ww,fill:Uw,"fill-extrusion":Hw,line:e2,symbol:M2,background:L2,raster:O2},w_=W.HTMLImageElement,S_=W.HTMLCanvasElement,E_=W.HTMLVideoElement,T_=W.ImageData,Ef=W.ImageBitmap,dl=function(e,t,i,c){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,c)};dl.prototype.update=function(e,t,i){var c=e.width,h=e.height,d=!(this.size&&this.size[0]===c&&this.size[1]===h||i),v=this.context,b=v.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),b.bindTexture(b.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[c,h],e instanceof w_||e instanceof S_||e instanceof E_||e instanceof T_||Ef&&e instanceof Ef?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,e):b.texImage2D(b.TEXTURE_2D,0,this.format,c,h,0,this.format,b.UNSIGNED_BYTE,e.data);else{var T=i||{x:0,y:0},C=T.x,A=T.y;e instanceof w_||e instanceof S_||e instanceof E_||e instanceof T_||Ef&&e instanceof Ef?b.texSubImage2D(b.TEXTURE_2D,0,C,A,b.RGBA,b.UNSIGNED_BYTE,e):b.texSubImage2D(b.TEXTURE_2D,0,C,A,c,h,b.RGBA,b.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&b.generateMipmap(b.TEXTURE_2D)},dl.prototype.bind=function(e,t,i){var c=this.context.gl;c.bindTexture(c.TEXTURE_2D,this.texture),i!==c.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=c.LINEAR),e!==this.filter&&(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,e),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,t),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,t),this.wrap=t)},dl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},dl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Vm=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Vm.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Vm.prototype.remove=function(){delete this._channel,this._callback=function(){}};var gc=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},je(["receive","process"],this),this.invoker=new Vm(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ir()?e:W};function P_(e,t,i){var c=2*Math.PI*6378137/256/Math.pow(2,i);return[e*c-2*Math.PI*6378137/2,t*c-2*Math.PI*6378137/2]}gc.prototype.send=function(e,t,i,c,h){var d=this;h===void 0&&(h=!1);var v=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[v]=i);var b=Bn(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:e,hasCallback:!!i,targetMapId:c,mustQueue:h,sourceMapId:this.mapId,data:ta(t,b)},b),{cancel:function(){i&&delete d.callbacks[v],d.target.postMessage({id:v,type:"<cancel>",targetMapId:c,sourceMapId:d.mapId})}}},gc.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var c=this.cancelCallbacks[i];delete this.cancelCallbacks[i],c&&c()}else Ir()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},gc.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},gc.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var c=this.callbacks[e];delete this.callbacks[e],c&&(t.error?c(ro(t.error)):c(null,ro(t.data)))}else{var h=!1,d=Bn(this.globalScope)?void 0:[],v=t.hasCallback?function(A,z){h=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:A?ta(A):null,data:ta(z,d)},d)}:function(A){h=!0},b=null,T=ro(t.data);if(this.parent[t.type])b=this.parent[t.type](t.sourceMapId,T,v);else if(this.parent.getWorkerSource){var C=t.type.split(".");b=this.parent.getWorkerSource(t.sourceMapId,C[0],T.source)[C[1]](T,v)}else v(new Error("Could not find function "+t.type));!h&&b&&b.cancel&&(this.cancelCallbacks[e]=b.cancel)}},gc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var On=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};On.prototype.setNorthEast=function(e){return this._ne=e instanceof Xr?new Xr(e.lng,e.lat):Xr.convert(e),this},On.prototype.setSouthWest=function(e){return this._sw=e instanceof Xr?new Xr(e.lng,e.lat):Xr.convert(e),this},On.prototype.extend=function(e){var t,i,c=this._sw,h=this._ne;if(e instanceof Xr)t=e,i=e;else{if(!(e instanceof On))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(On.convert(e)):this.extend(Xr.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return c||h?(c.lng=Math.min(t.lng,c.lng),c.lat=Math.min(t.lat,c.lat),h.lng=Math.max(i.lng,h.lng),h.lat=Math.max(i.lat,h.lat)):(this._sw=new Xr(t.lng,t.lat),this._ne=new Xr(i.lng,i.lat)),this},On.prototype.getCenter=function(){return new Xr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},On.prototype.getSouthWest=function(){return this._sw},On.prototype.getNorthEast=function(){return this._ne},On.prototype.getNorthWest=function(){return new Xr(this.getWest(),this.getNorth())},On.prototype.getSouthEast=function(){return new Xr(this.getEast(),this.getSouth())},On.prototype.getWest=function(){return this._sw.lng},On.prototype.getSouth=function(){return this._sw.lat},On.prototype.getEast=function(){return this._ne.lng},On.prototype.getNorth=function(){return this._ne.lat},On.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},On.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},On.prototype.isEmpty=function(){return!(this._sw&&this._ne)},On.prototype.contains=function(e){var t=Xr.convert(e),i=t.lng,c=t.lat,h=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&h},On.convert=function(e){return!e||e instanceof On?e:new On(e)};var Xr=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Xr.prototype.wrap=function(){return new Xr(re(this.lng,-180,180),this.lat)},Xr.prototype.toArray=function(){return[this.lng,this.lat]},Xr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Xr.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,c=e.lat*t,h=Math.sin(i)*Math.sin(c)+Math.cos(i)*Math.cos(c)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(h,1))},Xr.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new On(new Xr(this.lng-i,this.lat-t),new Xr(this.lng+i,this.lat+t))},Xr.convert=function(e){if(e instanceof Xr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Xr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Xr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var C_=2*Math.PI*63710088e-1;function I_(e){return C_*Math.cos(e*Math.PI/180)}function k_(e){return(180+e)/360}function A_(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function M_(e,t){return e/I_(t)}function qm(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var ml=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};ml.fromLngLat=function(e,t){t===void 0&&(t=0);var i=Xr.convert(e);return new ml(k_(i.lng),A_(i.lat),M_(t,i.lat))},ml.prototype.toLngLat=function(){return new Xr(360*this.x-180,qm(this.y))},ml.prototype.toAltitude=function(){return this.z*I_(qm(this.y))},ml.prototype.meterInMercatorCoordinateUnits=function(){return 1/C_*(e=qm(this.y),1/Math.cos(e*Math.PI/180));var e};var yl=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=Rp(0,e,e,t,i)};yl.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},yl.prototype.url=function(e,t){var i,c,h,d,v,b=(c=this.y,h=this.z,d=P_(256*(i=this.x),256*(c=Math.pow(2,h)-c-1),h),v=P_(256*(i+1),256*(c+1),h),d[0]+","+d[1]+","+v[0]+","+v[1]),T=function(C,A,z){for(var R,U="",H=C;H>0;H--)U+=(A&(R=1<<H-1)?1:0)+(z&R?2:0);return U}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",T).replace("{bbox-epsg-3857}",b)},yl.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new ee(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},yl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var z_=function(e,t){this.wrap=e,this.canonical=t,this.key=Rp(e,t.z,t.z,t.x,t.y)},Rn=function(e,t,i,c,h){this.overscaledZ=e,this.wrap=t,this.canonical=new yl(i,+c,+h),this.key=Rp(t,e,i,c,h)};function Rp(e,t,i,c,h){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*h+c).toString(36)+i.toString(36)+t.toString(36)}Rn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Rn.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Rn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Rn(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Rn.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?Rp(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Rp(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},Rn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Rn.prototype.children=function(e){if(this.overscaledZ>=e)return[new Rn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,c=2*this.canonical.y;return[new Rn(t,this.wrap,t,i,c),new Rn(t,this.wrap,t,i+1,c),new Rn(t,this.wrap,t,i,c+1),new Rn(t,this.wrap,t,i+1,c+1)]},Rn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Rn.prototype.wrapped=function(){return new Rn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Rn.prototype.unwrapTo=function(e){return new Rn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Rn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Rn.prototype.toUnwrapped=function(){return new z_(this.wrap,this.canonical)},Rn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Rn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new ml(e.x-this.wrap,e.y))},ft("CanonicalTileID",yl),ft("OverscaledTileID",Rn,{omit:["posMatrix"]});var Ks=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Ct('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var c=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var h=0;h<c;h++)this.data[this._idx(-1,h)]=this.data[this._idx(0,h)],this.data[this._idx(c,h)]=this.data[this._idx(c-1,h)],this.data[this._idx(h,-1)]=this.data[this._idx(h,0)],this.data[this._idx(h,c)]=this.data[this._idx(h,c-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(c,-1)]=this.data[this._idx(c-1,0)],this.data[this._idx(-1,c)]=this.data[this._idx(0,c-1)],this.data[this._idx(c,c)]=this.data[this._idx(c-1,c-1)]};Ks.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),c=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[c],i[c+1],i[c+2])},Ks.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ks.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Ks.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},Ks.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},Ks.prototype.getPixels=function(){return new so({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ks.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var c=t*this.dim,h=t*this.dim+this.dim,d=i*this.dim,v=i*this.dim+this.dim;switch(t){case-1:c=h-1;break;case 1:h=c+1}switch(i){case-1:d=v-1;break;case 1:v=d+1}for(var b=-t*this.dim,T=-i*this.dim,C=d;C<v;C++)for(var A=c;A<h;A++)this.data[this._idx(A,C)]=e.data[this._idx(A+b,C+T)]},ft("DEMData",Ks);var Tf=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};Tf.prototype.encode=function(e){return this._stringToNumber[e]},Tf.prototype.decode=function(e){return this._numberToString[e]};var Pf=function(e,t,i,c,h){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=c,this.properties=e.properties,this.id=h},Zm={geometry:{configurable:!0}};Zm.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Zm.geometry.set=function(e){this._geometry=e},Pf.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(Pf.prototype,Zm);var _c=function(){this.state={},this.stateChanges={},this.deletedStates={}};_c.prototype.updateState=function(e,t,i){var c=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][c]=this.stateChanges[e][c]||{},oe(this.stateChanges[e][c],i),this.deletedStates[e]===null)for(var h in this.deletedStates[e]={},this.state[e])h!==c&&(this.deletedStates[e][h]=null);else if(this.deletedStates[e]&&this.deletedStates[e][c]===null)for(var d in this.deletedStates[e][c]={},this.state[e][c])i[d]||(this.deletedStates[e][c][d]=null);else for(var v in i)this.deletedStates[e]&&this.deletedStates[e][c]&&this.deletedStates[e][c][v]===null&&delete this.deletedStates[e][c][v]},_c.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var c=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][c]!==null&&(this.deletedStates[e][c]=this.deletedStates[e][c]||{},this.deletedStates[e][c][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][c])for(i in this.deletedStates[e][c]={},this.stateChanges[e][c])this.deletedStates[e][c][i]=null;else this.deletedStates[e][c]=null;else this.deletedStates[e]=null}},_c.prototype.getState=function(e,t){var i=String(t),c=oe({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var h=this.deletedStates[e][t];if(h===null)return{};for(var d in h)delete c[d]}return c},_c.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},_c.prototype.coalesceChanges=function(e,t){var i={};for(var c in this.stateChanges){this.state[c]=this.state[c]||{};var h={};for(var d in this.stateChanges[c])this.state[c][d]||(this.state[c][d]={}),oe(this.state[c][d],this.stateChanges[c][d]),h[d]=this.state[c][d];i[c]=h}for(var v in this.deletedStates){this.state[v]=this.state[v]||{};var b={};if(this.deletedStates[v]===null)for(var T in this.state[v])b[T]={},this.state[v][T]={};else for(var C in this.deletedStates[v]){if(this.deletedStates[v][C]===null)this.state[v][C]={};else for(var A=0,z=Object.keys(this.deletedStates[v][C]);A<z.length;A+=1)delete this.state[v][C][z[A]];b[C]=this.state[v][C]}i[v]=i[v]||{},oe(i[v],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var R in e)e[R].setFeatureState(i,t)};var Js=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new eo(8192,16,0),this.grid3D=new eo(8192,16,0),this.featureIndexArray=new D,this.promoteId=t};function L_(e,t,i,c,h){return Xe(e,function(d,v){var b=t instanceof al?t.get(v):null;return b&&b.evaluate?b.evaluate(i,c,h):b})}function D_(e){for(var t=1/0,i=1/0,c=-1/0,h=-1/0,d=0,v=e;d<v.length;d+=1){var b=v[d];t=Math.min(t,b.x),i=Math.min(i,b.y),c=Math.max(c,b.x),h=Math.max(h,b.y)}return{minX:t,minY:i,maxX:c,maxY:h}}function B2(e,t){return t-e}Js.prototype.insert=function(e,t,i,c,h,d){var v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,c,h);for(var b=d?this.grid3D:this.grid,T=0;T<t.length;T++){for(var C=t[T],A=[1/0,1/0,-1/0,-1/0],z=0;z<C.length;z++){var R=C[z];A[0]=Math.min(A[0],R.x),A[1]=Math.min(A[1],R.y),A[2]=Math.max(A[2],R.x),A[3]=Math.max(A[3],R.y)}A[0]<8192&&A[1]<8192&&A[2]>=0&&A[3]>=0&&b.insert(v,A[0],A[1],A[2],A[3])}},Js.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new lc.VectorTile(new df(this.rawTileData)).layers,this.sourceLayerCoder=new Tf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Js.prototype.query=function(e,t,i,c){var h=this;this.loadVTLayers();for(var d=e.params||{},v=8192/e.tileSize/e.scale,b=zi(d.filter),T=e.queryGeometry,C=e.queryPadding*v,A=D_(T),z=this.grid.query(A.minX-C,A.minY-C,A.maxX+C,A.maxY+C),R=D_(e.cameraQueryGeometry),U=this.grid3D.query(R.minX-C,R.minY-C,R.maxX+C,R.maxY+C,function(we,Te,Fe,Ze){return function(Ke,xt,it,Tt,ot){for(var Yt=0,Bt=Ke;Yt<Bt.length;Yt+=1){var vt=Bt[Yt];if(xt<=vt.x&&it<=vt.y&&Tt>=vt.x&&ot>=vt.y)return!0}var rr=[new ee(xt,it),new ee(xt,ot),new ee(Tt,ot),new ee(Tt,it)];if(Ke.length>2){for(var Ht=0,pr=rr;Ht<pr.length;Ht+=1)if(wa(Ke,pr[Ht]))return!0}for(var Pt=0;Pt<Ke.length-1;Pt++)if(pl(Ke[Pt],Ke[Pt+1],rr))return!0;return!1}(e.cameraQueryGeometry,we-C,Te-C,Fe+C,Ze+C)}),H=0,K=U;H<K.length;H+=1)z.push(K[H]);z.sort(B2);for(var ae,te={},he=function(we){var Te=z[we];if(Te!==ae){ae=Te;var Fe=h.featureIndexArray.get(Te),Ze=null;h.loadMatchingFeature(te,Fe.bucketIndex,Fe.sourceLayerIndex,Fe.featureIndex,b,d.layers,d.availableImages,t,i,c,function(Ke,xt,it){return Ze||(Ze=un(Ke)),xt.queryIntersectsFeature(T,Ke,it,Ze,h.z,e.transform,v,e.pixelPosMatrix)})}},ge=0;ge<z.length;ge++)he(ge);return te},Js.prototype.loadMatchingFeature=function(e,t,i,c,h,d,v,b,T,C,A){var z=this.bucketLayerIDs[t];if(!d||function(Ke,xt){for(var it=0;it<Ke.length;it++)if(xt.indexOf(Ke[it])>=0)return!0;return!1}(d,z)){var R=this.sourceLayerCoder.decode(i),U=this.vtLayers[R].feature(c);if(h.needGeometry){var H=_n(U,!0);if(!h.filter(new nr(this.tileID.overscaledZ),H,this.tileID.canonical))return}else if(!h.filter(new nr(this.tileID.overscaledZ),U))return;for(var K=this.getId(U,R),ae=0;ae<z.length;ae++){var te=z[ae];if(!(d&&d.indexOf(te)<0)){var he=b[te];if(he){var ge={};K!==void 0&&C&&(ge=C.getState(he.sourceLayer||"_geojsonTileLayer",K));var we=oe({},T[te]);we.paint=L_(we.paint,he.paint,U,ge,v),we.layout=L_(we.layout,he.layout,U,ge,v);var Te=!A||A(U,he,ge);if(Te){var Fe=new Pf(U,this.z,this.x,this.y,K);Fe.layer=we;var Ze=e[te];Ze===void 0&&(Ze=e[te]=[]),Ze.push({featureIndex:c,feature:Fe,intersectionZ:Te})}}}}}},Js.prototype.lookupSymbolFeatures=function(e,t,i,c,h,d,v,b){var T={};this.loadVTLayers();for(var C=zi(h),A=0,z=e;A<z.length;A+=1)this.loadMatchingFeature(T,i,c,z[A],C,d,v,b,t);return T},Js.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var c=0,h=i[t];c<h.length;c+=1)if(e===h[c])return!0;return!1},Js.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},ft("FeatureIndex",Js,{omit:["rawTileData","sourceLayerCoder"]});var ei=function(e,t){this.tileID=e,this.uid=Re(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ei.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<si.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},ei.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ei.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var c in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(C,A){var z={};if(!A)return z;for(var R=function(){var K=H[U],ae=K.layerIds.map(function(ge){return A.getLayer(ge)}).filter(Boolean);if(ae.length!==0){K.layers=ae,K.stateDependentLayerIds&&(K.stateDependentLayers=K.stateDependentLayerIds.map(function(ge){return ae.filter(function(we){return we.id===ge})[0]}));for(var te=0,he=ae;te<he.length;te+=1)z[he[te].id]=K}},U=0,H=C;U<H.length;U+=1)R();return z}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var h=this.buckets[c];if(h instanceof Or){if(this.hasSymbolBuckets=!0,!i)break;h.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var v=this.buckets[d];if(v instanceof Or&&v.hasRTLText){this.hasRTLText=!0,wo.isLoading()||wo.isLoaded()||_p()!=="deferred"||ra();break}}for(var b in this.queryPadding=0,this.buckets){var T=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(b).queryRadius(T))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},ei.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ei.prototype.getBucket=function(e){return this.buckets[e.id]},ei.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var c=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new dl(e,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new dl(e,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)},ei.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},ei.prototype.queryRenderedFeatures=function(e,t,i,c,h,d,v,b,T,C){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:c,cameraQueryGeometry:h,scale:d,tileSize:this.tileSize,pixelPosMatrix:C,transform:b,params:v,queryPadding:this.queryPadding*T},e,t,i):{}},ei.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var c=i.loadVTLayers(),h=t?t.sourceLayer:"",d=c._geojsonTileLayer||c[h];if(d)for(var v=zi(t&&t.filter),b=this.tileID.canonical,T=b.z,C=b.x,A=b.y,z={z:T,x:C,y:A},R=0;R<d.length;R++){var U=d.feature(R);if(v.needGeometry){var H=_n(U,!0);if(!v.filter(new nr(this.tileID.overscaledZ),H,this.tileID.canonical))continue}else if(!v.filter(new nr(this.tileID.overscaledZ),U))continue;var K=i.getId(U,h),ae=new Pf(U,T,C,A,K);ae.tile=z,e.push(ae)}}},ei.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ei.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ei.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=Fn(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var c=Date.now(),h=!1;if(this.expirationTime>c)h=!1;else if(t)if(this.expirationTime<t)h=!0;else{var d=this.expirationTime-t;d?this.expirationTime=c+Math.max(d,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ei.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ei.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var c in this.buckets)if(t.style.hasLayer(c)){var h=this.buckets[c],d=h.layers[0].sourceLayer||"_geojsonTileLayer",v=i[d],b=e[d];if(v&&b&&Object.keys(b).length!==0){h.update(b,v,this.imageAtlas&&this.imageAtlas.patternPositions||{});var T=t&&t.style&&t.style.getLayer(c);T&&(this.queryPadding=Math.max(this.queryPadding,T.queryRadius(h)))}}}},ei.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ei.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<si.now()},ei.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ei.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=si.now()+e},ei.prototype.setDependencies=function(e,t){for(var i={},c=0,h=t;c<h.length;c+=1)i[h[c]]=!0;this.dependencies[e]=i},ei.prototype.hasDependency=function(e,t){for(var i=0,c=e;i<c.length;i+=1){var h=this.dependencies[c[i]];if(h){for(var d=0,v=t;d<v.length;d+=1)if(h[v[d]])return!0}}return!1};var bu=W.performance,O_=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},bu.mark(this._marks.start)};O_.prototype.finish=function(){bu.mark(this._marks.end);var e=bu.getEntriesByName(this._marks.measure);return e.length===0&&(bu.measure(this._marks.measure,this._marks.start,this._marks.end),e=bu.getEntriesByName(this._marks.measure),bu.clearMarks(this._marks.start),bu.clearMarks(this._marks.end),bu.clearMeasures(this._marks.measure)),e},l.Actor=gc,l.AlphaImage=fl,l.CanonicalTileID=yl,l.CollisionBoxArray=s,l.Color=fr,l.DEMData=Ks,l.DataConstantProperty=St,l.DictionaryCoder=Tf,l.EXTENT=8192,l.ErrorEvent=ue,l.EvaluationParameters=nr,l.Event=X,l.Evented=pe,l.FeatureIndex=Js,l.FillBucket=Ha,l.FillExtrusionBucket=Xa,l.ImageAtlas=Dp,l.ImagePosition=yf,l.LineBucket=Oi,l.LngLat=Xr,l.LngLatBounds=On,l.MercatorCoordinate=ml,l.ONE_EM=24,l.OverscaledTileID=Rn,l.Point=ee,l.Point$1=ee,l.Properties=ai,l.Protobuf=df,l.RGBAImage=so,l.RequestManager=on,l.RequestPerformance=O_,l.ResourceType=Ls,l.SegmentVector=q,l.SourceFeatureState=_c,l.StructArrayLayout1ui2=Tp,l.StructArrayLayout2f1f2i16=Ws,l.StructArrayLayout2i4=Gs,l.StructArrayLayout3ui6=ls,l.StructArrayLayout4i8=bp,l.SymbolBucket=Or,l.Texture=dl,l.Tile=ei,l.Transitionable=oi,l.Uniform1f=He,l.Uniform1i=Ne,l.Uniform2f=We,l.Uniform3f=lt,l.Uniform4f=Et,l.UniformColor=At,l.UniformMatrix4f=mr,l.UnwrappedTileID=z_,l.ValidationError=Q,l.WritingMode=No,l.ZoomHistory=mp,l.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},l.addDynamicAttributes=Nm,l.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var c=e.length,h=new Array(e.length),d=null;e.forEach(function(v,b){t(v,function(T,C){T&&(d=T),h[b]=C,--c==0&&i(d,h)})})},l.bezier=Le,l.bindAll=je,l.browser=si,l.cacheEntryPossiblyAdded=function(e){++Un>Wi&&(e.getActor().send("enforceCacheSizeLimit",Gi),Un=0)},l.clamp=se,l.clearTileCache=function(e){var t=W.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},l.clipLine=y_,l.clone=function(e){var t=new wr(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},l.clone$1=Mt,l.clone$2=function(e){var t=new wr(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},l.collisionCircleLayout=i2,l.config=cr,l.create=function(){var e=new wr(16);return wr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},l.create$1=function(){var e=new wr(9);return wr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},l.create$2=function(){var e=new wr(4);return wr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},l.createCommonjsModule=I,l.createExpression=Us,l.createLayout=Yn,l.createStyleLayer=function(e){return e.type==="custom"?new R2(e):new F2[e.type](e)},l.cross=function(e,t,i){var c=t[0],h=t[1],d=t[2],v=i[0],b=i[1],T=i[2];return e[0]=h*T-d*b,e[1]=d*v-c*T,e[2]=c*b-h*v,e},l.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var c=0;c<t.length;c++)if(!e(t[c],i[c]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var h in t)if(!e(t[h],i[h]))return!1;return!0}return t===i},l.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},l.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},l.ease=De,l.emitValidationErrors=va,l.endsWith=at,l.enforceCacheSizeLimit=function(e){Xn(),mi&&mi.then(function(t){t.keys().then(function(i){for(var c=0;c<i.length-e;c++)t.delete(i[c])})})},l.evaluateSizeForFeature=c_,l.evaluateSizeForZoom=p_,l.evaluateVariableOffset=__,l.evented=gp,l.extend=oe,l.featureFilter=zi,l.filterObject=_t,l.fromRotation=function(e,t){var i=Math.sin(t),c=Math.cos(t);return e[0]=c,e[1]=i,e[2]=0,e[3]=-i,e[4]=c,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},l.getAnchorAlignment=Rm,l.getAnchorJustification=Um,l.getArrayBuffer=is,l.getImage=O,l.getJSON=function(e,t){return Mr(oe(e,{type:"json"}),t)},l.getRTLTextPluginStatus=_p,l.getReferrer=Da,l.getVideo=function(e,t){var i,c,h=W.document.createElement("video");h.muted=!0,h.onloadstart=function(){t(null,h)};for(var d=0;d<e.length;d++){var v=W.document.createElement("source");i=e[d],c=void 0,(c=W.document.createElement("a")).href=i,(c.protocol!==W.document.location.protocol||c.host!==W.document.location.host)&&(h.crossOrigin="Anonymous"),v.src=e[d],h.appendChild(v)}return{cancel:function(){}}},l.identity=So,l.invert=function(e,t){var i=t[0],c=t[1],h=t[2],d=t[3],v=t[4],b=t[5],T=t[6],C=t[7],A=t[8],z=t[9],R=t[10],U=t[11],H=t[12],K=t[13],ae=t[14],te=t[15],he=i*b-c*v,ge=i*T-h*v,we=i*C-d*v,Te=c*T-h*b,Fe=c*C-d*b,Ze=h*C-d*T,Ke=A*K-z*H,xt=A*ae-R*H,it=A*te-U*H,Tt=z*ae-R*K,ot=z*te-U*K,Yt=R*te-U*ae,Bt=he*Yt-ge*ot+we*Tt+Te*it-Fe*xt+Ze*Ke;return Bt?(e[0]=(b*Yt-T*ot+C*Tt)*(Bt=1/Bt),e[1]=(h*ot-c*Yt-d*Tt)*Bt,e[2]=(K*Ze-ae*Fe+te*Te)*Bt,e[3]=(R*Fe-z*Ze-U*Te)*Bt,e[4]=(T*it-v*Yt-C*xt)*Bt,e[5]=(i*Yt-h*it+d*xt)*Bt,e[6]=(ae*we-H*Ze-te*ge)*Bt,e[7]=(A*Ze-R*we+U*ge)*Bt,e[8]=(v*ot-b*it+C*Ke)*Bt,e[9]=(c*it-i*ot-d*Ke)*Bt,e[10]=(H*Fe-K*we+te*he)*Bt,e[11]=(z*we-A*Fe-U*he)*Bt,e[12]=(b*xt-v*Tt-T*Ke)*Bt,e[13]=(i*Tt-c*xt+h*Ke)*Bt,e[14]=(K*ge-H*Te-ae*he)*Bt,e[15]=(A*Te-z*ge+R*he)*Bt,e):null},l.isChar=et,l.isMapboxURL=An,l.keysDifference=function(e,t){var i=[];for(var c in e)c in t||i.push(c);return i},l.makeRequest=Mr,l.mapObject=Xe,l.mercatorXfromLng=k_,l.mercatorYfromLat=A_,l.mercatorZfromAltitude=M_,l.mul=Em,l.multiply=Di,l.mvt=lc,l.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},l.normalize=function(e,t){var i=t[0],c=t[1],h=t[2],d=i*i+c*c+h*h;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},l.number=nn,l.offscreenCanvasSupported=tr,l.ortho=function(e,t,i,c,h,d,v){var b=1/(t-i),T=1/(c-h),C=1/(d-v);return e[0]=-2*b,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*T,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*C,e[11]=0,e[12]=(t+i)*b,e[13]=(h+c)*T,e[14]=(v+d)*C,e[15]=1,e},l.parseGlyphPBF=function(e){return new df(e).readFields(m2,[])},l.pbf=df,l.performSymbolLayout=function(e,t,i,c,h,d,v){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var b=e.layers[0].layout,T=e.layers[0]._unevaluatedLayout._values,C={};if(e.textSizeData.kind==="composite"){var A=e.textSizeData,z=A.maxZoom;C.compositeTextSizes=[T["text-size"].possiblyEvaluate(new nr(A.minZoom),v),T["text-size"].possiblyEvaluate(new nr(z),v)]}if(e.iconSizeData.kind==="composite"){var R=e.iconSizeData,U=R.maxZoom;C.compositeIconSizes=[T["icon-size"].possiblyEvaluate(new nr(R.minZoom),v),T["icon-size"].possiblyEvaluate(new nr(U),v)]}C.layoutTextSize=T["text-size"].possiblyEvaluate(new nr(e.zoom+1),v),C.layoutIconSize=T["icon-size"].possiblyEvaluate(new nr(e.zoom+1),v),C.textMaxSize=T["text-size"].possiblyEvaluate(new nr(18));for(var H=24*b.get("text-line-height"),K=b.get("text-rotation-alignment")==="map"&&b.get("symbol-placement")!=="point",ae=b.get("text-keep-upright"),te=b.get("text-size"),he=function(){var Te=we[ge],Fe=b.get("text-font").evaluate(Te,{},v).join(","),Ze=te.evaluate(Te,{},v),Ke=C.layoutTextSize.evaluate(Te,{},v),xt=C.layoutIconSize.evaluate(Te,{},v),it={horizontal:{},vertical:void 0},Tt=Te.text,ot=[0,0];if(Tt){var Yt=Tt.toString(),Bt=24*b.get("text-letter-spacing").evaluate(Te,{},v),vt=function(sr){for(var Br=0,Ar=sr;Br<Ar.length;Br+=1)if(yr=Ar[Br].charCodeAt(0),et.Arabic(yr)||et["Arabic Supplement"](yr)||et["Arabic Extended-A"](yr)||et["Arabic Presentation Forms-A"](yr)||et["Arabic Presentation Forms-B"](yr))return!1;var yr;return!0}(Yt)?Bt:0,rr=b.get("text-anchor").evaluate(Te,{},v),Ht=b.get("text-variable-anchor");if(!Ht){var pr=b.get("text-radial-offset").evaluate(Te,{},v);ot=pr?__(rr,[24*pr,Bm]):b.get("text-offset").evaluate(Te,{},v).map(function(sr){return 24*sr})}var Pt=K?"center":b.get("text-justify").evaluate(Te,{},v),xr=b.get("symbol-placement"),Kr=xr==="point"?24*b.get("text-max-width").evaluate(Te,{},v):0,dn=function(){e.allowVerticalPlacement&&yp(Yt)&&(it.vertical=vf(Tt,t,i,h,Fe,Kr,H,rr,"left",vt,ot,No.vertical,!0,xr,Ke,Ze))};if(!K&&Ht){for(var ln=Pt==="auto"?Ht.map(function(sr){return Um(sr)}):[Pt],Jr=!1,mn=0;mn<ln.length;mn++){var Zn=ln[mn];if(!it.horizontal[Zn])if(Jr)it.horizontal[Zn]=it.horizontal[0];else{var Gn=vf(Tt,t,i,h,Fe,Kr,H,"center",Zn,vt,ot,No.horizontal,!1,xr,Ke,Ze);Gn&&(it.horizontal[Zn]=Gn,Jr=Gn.positionedLines.length===1)}}dn()}else{Pt==="auto"&&(Pt=Um(rr));var bi=vf(Tt,t,i,h,Fe,Kr,H,rr,Pt,vt,ot,No.horizontal,!1,xr,Ke,Ze);bi&&(it.horizontal[Pt]=bi),dn(),yp(Yt)&&K&&ae&&(it.vertical=vf(Tt,t,i,h,Fe,Kr,H,rr,Pt,vt,ot,No.vertical,!1,xr,Ke,Ze))}}var ti=void 0,wi=!1;if(Te.icon&&Te.icon.name){var xn=c[Te.icon.name];xn&&(ti=function(sr,Br,Ar){var yr=Rm(Ar),Ri=Br[0]-sr.displaySize[0]*yr.horizontalAlign,hi=Br[1]-sr.displaySize[1]*yr.verticalAlign;return{image:sr,top:hi,bottom:hi+sr.displaySize[1],left:Ri,right:Ri+sr.displaySize[0]}}(h[Te.icon.name],b.get("icon-offset").evaluate(Te,{},v),b.get("icon-anchor").evaluate(Te,{},v)),wi=xn.sdf,e.sdfIcons===void 0?e.sdfIcons=xn.sdf:e.sdfIcons!==xn.sdf&&Ct("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xn.pixelRatio!==e.pixelRatio||b.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var ri=b_(it.horizontal)||it.vertical;e.iconsInText=!!ri&&ri.iconsInText,(ri||ti)&&function(sr,Br,Ar,yr,Ri,hi,Hr,Cn,fi,br,ms){var jo=hi.textMaxSize.evaluate(Br,{});jo===void 0&&(jo=Hr);var ys,bn=sr.layers[0].layout,vs=bn.get("icon-offset").evaluate(Br,{},ms),Ea=b_(Ar.horizontal),xc=Hr/24,vl=sr.tilePixelRatio*xc,bc=sr.tilePixelRatio*jo/24,Ys=sr.tilePixelRatio*Cn,wc=sr.tilePixelRatio*bn.get("symbol-spacing"),Cf=bn.get("text-padding")*sr.tilePixelRatio,Sc=bn.get("icon-padding")*sr.tilePixelRatio,Fp=bn.get("text-max-angle")/180*Math.PI,If=bn.get("text-rotation-alignment")==="map"&&bn.get("symbol-placement")!=="point",kf=bn.get("icon-rotation-alignment")==="map"&&bn.get("symbol-placement")!=="point",Qs=bn.get("symbol-placement"),Bp=wc/2,Ec=bn.get("icon-text-fit");yr&&Ec!=="none"&&(sr.allowVerticalPlacement&&Ar.vertical&&(ys=l_(yr,Ar.vertical,Ec,bn.get("icon-text-fit-padding"),vs,xc)),Ea&&(yr=l_(yr,Ea,Ec,bn.get("icon-text-fit-padding"),vs,xc)));var wu=function(U2,Wp){Wp.x<0||Wp.x>=8192||Wp.y<0||Wp.y>=8192||function(wn,Ka,N2,Su,Hm,B_,Of,gs,Rf,$p,Ff,Bf,Xm,U_,Hp,N_,j_,V_,q_,Z_,Vo,Uf,G_,_s,j2){var W_,_l,kc,Ac,Mc,zc=wn.addToLineVertexArray(Ka,N2),$_=0,H_=0,X_=0,K_=0,Km=-1,Jm=-1,eu={},J_=$(""),Ym=0,Qm=0;if(gs._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ym=(W_=gs.layout.get("text-offset").evaluate(Vo,{},_s).map(function(Kp){return 24*Kp}))[0],Qm=W_[1]):(Ym=24*gs.layout.get("text-radial-offset").evaluate(Vo,{},_s),Qm=Bm),wn.allowVerticalPlacement&&Su.vertical){var Y_=gs.layout.get("text-rotate").evaluate(Vo,{},_s)+90;Ac=new wf(Rf,Ka,$p,Ff,Bf,Su.vertical,Xm,U_,Hp,Y_),Of&&(Mc=new wf(Rf,Ka,$p,Ff,Bf,Of,j_,V_,Hp,Y_))}if(Hm){var ey=gs.layout.get("icon-rotate").evaluate(Vo,{}),Q_=gs.layout.get("icon-text-fit")!=="none",e0=v_(Hm,ey,G_,Q_),ty=Of?v_(Of,ey,G_,Q_):void 0;kc=new wf(Rf,Ka,$p,Ff,Bf,Hm,j_,V_,!1,ey),$_=4*e0.length;var t0=wn.iconSizeData,Xp=null;t0.kind==="source"?(Xp=[128*gs.layout.get("icon-size").evaluate(Vo,{})])[0]>32640&&Ct(wn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):t0.kind==="composite"&&((Xp=[128*Uf.compositeIconSizes[0].evaluate(Vo,{},_s),128*Uf.compositeIconSizes[1].evaluate(Vo,{},_s)])[0]>32640||Xp[1]>32640)&&Ct(wn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),wn.addSymbols(wn.icon,e0,Xp,Z_,q_,Vo,!1,Ka,zc.lineStartIndex,zc.lineLength,-1,_s),Km=wn.icon.placedSymbolArray.length-1,ty&&(H_=4*ty.length,wn.addSymbols(wn.icon,ty,Xp,Z_,q_,Vo,No.vertical,Ka,zc.lineStartIndex,zc.lineLength,-1,_s),Jm=wn.icon.placedSymbolArray.length-1)}for(var r0 in Su.horizontal){var Nf=Su.horizontal[r0];if(!_l){J_=$(Nf.text);var V2=gs.layout.get("text-rotate").evaluate(Vo,{},_s);_l=new wf(Rf,Ka,$p,Ff,Bf,Nf,Xm,U_,Hp,V2)}var n0=Nf.positionedLines.length===1;if(X_+=x_(wn,Ka,Nf,B_,gs,Hp,Vo,N_,zc,Su.vertical?No.horizontal:No.horizontalOnly,n0?Object.keys(Su.horizontal):[r0],eu,Km,Uf,_s),n0)break}Su.vertical&&(K_+=x_(wn,Ka,Su.vertical,B_,gs,Hp,Vo,N_,zc,No.vertical,["vertical"],eu,Jm,Uf,_s));var q2=_l?_l.boxStartIndex:wn.collisionBoxArray.length,Z2=_l?_l.boxEndIndex:wn.collisionBoxArray.length,G2=Ac?Ac.boxStartIndex:wn.collisionBoxArray.length,W2=Ac?Ac.boxEndIndex:wn.collisionBoxArray.length,$2=kc?kc.boxStartIndex:wn.collisionBoxArray.length,H2=kc?kc.boxEndIndex:wn.collisionBoxArray.length,X2=Mc?Mc.boxStartIndex:wn.collisionBoxArray.length,K2=Mc?Mc.boxEndIndex:wn.collisionBoxArray.length,xs=-1,jf=function(Kp,o0){return Kp&&Kp.circleDiameter?Math.max(Kp.circleDiameter,o0):o0};xs=jf(_l,xs),xs=jf(Ac,xs),xs=jf(kc,xs);var i0=(xs=jf(Mc,xs))>-1?1:0;i0&&(xs*=j2/24),wn.glyphOffsetArray.length>=Or.MAX_GLYPHS&&Ct("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vo.sortKey!==void 0&&wn.addToSortKeyRanges(wn.symbolInstances.length,Vo.sortKey),wn.symbolInstances.emplaceBack(Ka.x,Ka.y,eu.right>=0?eu.right:-1,eu.center>=0?eu.center:-1,eu.left>=0?eu.left:-1,eu.vertical||-1,Km,Jm,J_,q2,Z2,G2,W2,$2,H2,X2,K2,$p,X_,K_,$_,H_,i0,0,Xm,Ym,Qm,xs)}(sr,Wp,U2,Ar,yr,Ri,ys,sr.layers[0],sr.collisionBoxArray,Br.index,Br.sourceLayerIndex,sr.index,vl,Cf,If,fi,Ys,Sc,kf,vs,Br,hi,br,ms,Hr)};if(Qs==="line")for(var Tc=0,Af=y_(Br.geometry,0,0,8192,8192);Tc<Af.length;Tc+=1)for(var Mf=Af[Tc],Up=0,Np=w2(Mf,wc,Fp,Ar.vertical||Ea,yr,24,bc,sr.overscaling,8192);Up<Np.length;Up+=1){var zf=Np[Up];Ea&&P2(sr,Ea.text,Bp,zf)||wu(Mf,zf)}else if(Qs==="line-center")for(var jp=0,Vp=Br.geometry;jp<Vp.length;jp+=1){var qp=Vp[jp];if(qp.length>1){var Lf=b2(qp,Fp,Ar.vertical||Ea,yr,24,bc);Lf&&wu(qp,Lf)}}else if(Br.type==="Polygon")for(var Pc=0,Df=Mm(Br.geometry,0);Pc<Df.length;Pc+=1){var Cc=Df[Pc],Zp=E2(Cc,16);wu(Cc[0],new fc(Zp.x,Zp.y,0))}else if(Br.type==="LineString")for(var gl=0,Gp=Br.geometry;gl<Gp.length;gl+=1){var Ic=Gp[gl];wu(Ic,new fc(Ic[0].x,Ic[0].y,0))}else if(Br.type==="Point")for(var Gm=0,R_=Br.geometry;Gm<R_.length;Gm+=1)for(var Wm=0,F_=R_[Gm];Wm<F_.length;Wm+=1){var $m=F_[Wm];wu([$m],new fc($m.x,$m.y,0))}}(e,Te,it,ti,c,C,Ke,xt,ot,wi,v)},ge=0,we=e.features;ge<we.length;ge+=1)he();d&&e.generateCollisionDebugBuffers()},l.perspective=function(e,t,i,c,h){var d,v=1/Math.tan(t/2);return e[0]=v/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,h!=null&&h!==1/0?(e[10]=(h+c)*(d=1/(c-h)),e[14]=2*h*c*d):(e[10]=-1,e[14]=-2*c),e},l.pick=function(e,t){for(var i={},c=0;c<t.length;c++){var h=t[c];h in e&&(i[h]=e[h])}return i},l.plugin=wo,l.polygonIntersectsPolygon=hs,l.postMapLoadEvent=Mn,l.postTurnstileEvent=ns,l.potpack=o_,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=ft,l.registerForPluginStateChange=function(e){return e({pluginStatus:io,pluginURL:Ga}),gp.on("pluginStateChange",e),e},l.renderColorRamp=Ng,l.rotate=function(e,t,i){var c=t[0],h=t[1],d=t[2],v=t[3],b=Math.sin(i),T=Math.cos(i);return e[0]=c*T+d*b,e[1]=h*T+v*b,e[2]=c*-b+d*T,e[3]=h*-b+v*T,e},l.rotateX=function(e,t,i){var c=Math.sin(i),h=Math.cos(i),d=t[4],v=t[5],b=t[6],T=t[7],C=t[8],A=t[9],z=t[10],R=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*h+C*c,e[5]=v*h+A*c,e[6]=b*h+z*c,e[7]=T*h+R*c,e[8]=C*h-d*c,e[9]=A*h-v*c,e[10]=z*h-b*c,e[11]=R*h-T*c,e},l.rotateZ=function(e,t,i){var c=Math.sin(i),h=Math.cos(i),d=t[0],v=t[1],b=t[2],T=t[3],C=t[4],A=t[5],z=t[6],R=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*h+C*c,e[1]=v*h+A*c,e[2]=b*h+z*c,e[3]=T*h+R*c,e[4]=C*h-d*c,e[5]=A*h-v*c,e[6]=z*h-b*c,e[7]=R*h-T*c,e},l.scale=function(e,t,i){var c=i[0],h=i[1],d=i[2];return e[0]=t[0]*c,e[1]=t[1]*c,e[2]=t[2]*c,e[3]=t[3]*c,e[4]=t[4]*h,e[5]=t[5]*h,e[6]=t[6]*h,e[7]=t[7]*h,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},l.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},l.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},l.setCacheLimits=function(e,t){Gi=e,Wi=t},l.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),io==="deferred"||io==="loading"||io==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ga=si.resolveURL(e),io="deferred",Ql=t,ol(),i||ra()},l.sphericalToCartesian=function(e){var t=e[0],i=e[1],c=e[2];return i+=90,i*=Math.PI/180,c*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(c),y:t*Math.sin(i)*Math.sin(c),z:t*Math.cos(c)}},l.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},l.styleSpec=V,l.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},l.symbolSize=x2,l.transformMat3=function(e,t,i){var c=t[0],h=t[1],d=t[2];return e[0]=c*i[0]+h*i[3]+d*i[6],e[1]=c*i[1]+h*i[4]+d*i[7],e[2]=c*i[2]+h*i[5]+d*i[8],e},l.transformMat4=oc,l.translate=function(e,t,i){var c,h,d,v,b,T,C,A,z,R,U,H,K=i[0],ae=i[1],te=i[2];return t===e?(e[12]=t[0]*K+t[4]*ae+t[8]*te+t[12],e[13]=t[1]*K+t[5]*ae+t[9]*te+t[13],e[14]=t[2]*K+t[6]*ae+t[10]*te+t[14],e[15]=t[3]*K+t[7]*ae+t[11]*te+t[15]):(h=t[1],d=t[2],v=t[3],b=t[4],T=t[5],C=t[6],A=t[7],z=t[8],R=t[9],U=t[10],H=t[11],e[0]=c=t[0],e[1]=h,e[2]=d,e[3]=v,e[4]=b,e[5]=T,e[6]=C,e[7]=A,e[8]=z,e[9]=R,e[10]=U,e[11]=H,e[12]=c*K+b*ae+z*te+t[12],e[13]=h*K+T*ae+R*te+t[13],e[14]=d*K+C*ae+U*te+t[14],e[15]=v*K+A*ae+H*te+t[15]),e},l.triggerPluginCompletionEvent=sf,l.uniqueId=Re,l.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},l.validateLight=Xl,l.validateStyle=Qi,l.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},l.vectorTile=lc,l.version="1.13.2",l.warnOnce=Ct,l.webpSupported=Io,l.window=W,l.wrap=re}),w(["./shared"],function(l){function I(L){var O=typeof L;if(O==="number"||O==="boolean"||O==="string"||L==null)return JSON.stringify(L);if(Array.isArray(L)){for(var B="[",G=0,X=L;G<X.length;G+=1)B+=I(X[G])+",";return B+"]"}for(var ue=Object.keys(L).sort(),pe="{",V=0;V<ue.length;V++)pe+=JSON.stringify(ue[V])+":"+I(L[ue[V]])+",";return pe+"}"}function M(L){for(var O="",B=0,G=l.refProperties;B<G.length;B+=1)O+="/"+I(L[G[B]]);return O}var j=function(L){this.keyCache={},L&&this.replace(L)};j.prototype.replace=function(L){this._layerConfigs={},this._layers={},this.update(L,[])},j.prototype.update=function(L,O){for(var B=this,G=0,X=L;G<X.length;G+=1){var ue=X[G];this._layerConfigs[ue.id]=ue;var pe=this._layers[ue.id]=l.createStyleLayer(ue);pe._featureFilter=l.featureFilter(pe.filter),this.keyCache[ue.id]&&delete this.keyCache[ue.id]}for(var V=0,Q=O;V<Q.length;V+=1){var me=Q[V];delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me]}this.familiesBySource={};for(var Ue=0,qe=function(Je,Qe){for(var Wt={},rt=0;rt<Je.length;rt++){var or=Qe&&Qe[Je[rt].id]||M(Je[rt]);Qe&&(Qe[Je[rt].id]=or);var kr=Wt[or];kr||(kr=Wt[or]=[]),kr.push(Je[rt])}var Rt=[];for(var hr in Wt)Rt.push(Wt[hr]);return Rt}(l.values(this._layerConfigs),this.keyCache);Ue<qe.length;Ue+=1){var Pe=qe[Ue].map(function(Je){return B._layers[Je.id]}),Ve=Pe[0];if(Ve.visibility!=="none"){var pt=Ve.source||"",st=this.familiesBySource[pt];st||(st=this.familiesBySource[pt]={});var Ae=Ve.sourceLayer||"_geojsonTileLayer",tt=st[Ae];tt||(tt=st[Ae]=[]),tt.push(Pe)}}};var ee=function(L){var O={},B=[];for(var G in L){var X=L[G],ue=O[G]={};for(var pe in X){var V=X[+pe];if(V&&V.bitmap.width!==0&&V.bitmap.height!==0){var Q={x:0,y:0,w:V.bitmap.width+2,h:V.bitmap.height+2};B.push(Q),ue[pe]={rect:Q,metrics:V.metrics}}}}var me=l.potpack(B),Ue=new l.AlphaImage({width:me.w||1,height:me.h||1});for(var qe in L){var Pe=L[qe];for(var Ve in Pe){var pt=Pe[+Ve];if(pt&&pt.bitmap.width!==0&&pt.bitmap.height!==0){var st=O[qe][Ve].rect;l.AlphaImage.copy(pt.bitmap,Ue,{x:0,y:0},{x:st.x+1,y:st.y+1},pt.bitmap)}}}this.image=Ue,this.positions=O};l.register("GlyphAtlas",ee);var Ce=function(L){this.tileID=new l.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId};function W(L,O,B){for(var G=new l.EvaluationParameters(O),X=0,ue=L;X<ue.length;X+=1)ue[X].recalculate(G,B)}function xe(L,O){var B=l.getArrayBuffer(L.request,function(G,X,ue,pe){G?O(G):X&&O(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(X)),rawData:X,cacheControl:ue,expires:pe})});return function(){B.cancel(),O()}}Ce.prototype.parse=function(L,O,B,G,X){var ue=this;this.status="parsing",this.data=L,this.collisionBoxArray=new l.CollisionBoxArray;var pe=new l.DictionaryCoder(Object.keys(L.layers).sort()),V=new l.FeatureIndex(this.tileID,this.promoteId);V.bucketLayerIDs=[];var Q,me,Ue,qe,Pe={},Ve={featureIndex:V,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:B},pt=O.familiesBySource[this.source];for(var st in pt){var Ae=L.layers[st];if(Ae){Ae.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+st+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var tt=pe.encode(st),Je=[],Qe=0;Qe<Ae.length;Qe++){var Wt=Ae.feature(Qe),rt=V.getId(Wt,st);Je.push({feature:Wt,id:rt,index:Qe,sourceLayerIndex:tt})}for(var or=0,kr=pt[st];or<kr.length;or+=1){var Rt=kr[or],hr=Rt[0];hr.minzoom&&this.zoom<Math.floor(hr.minzoom)||hr.maxzoom&&this.zoom>=hr.maxzoom||hr.visibility!=="none"&&(W(Rt,this.zoom,B),(Pe[hr.id]=hr.createBucket({index:V.bucketLayerIDs.length,layers:Rt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:tt,sourceID:this.source})).populate(Je,Ve,this.tileID.canonical),V.bucketLayerIDs.push(Rt.map(function(Sr){return Sr.id})))}}}var ur=l.mapObject(Ve.glyphDependencies,function(Sr){return Object.keys(Sr).map(Number)});Object.keys(ur).length?G.send("getGlyphs",{uid:this.uid,stacks:ur},function(Sr,Dt){Q||(Q=Sr,me=Dt,tn.call(ue))}):me={};var Nn=Object.keys(Ve.iconDependencies);Nn.length?G.send("getImages",{icons:Nn,source:this.source,tileID:this.tileID,type:"icons"},function(Sr,Dt){Q||(Q=Sr,Ue=Dt,tn.call(ue))}):Ue={};var vr=Object.keys(Ve.patternDependencies);function tn(){if(Q)return X(Q);if(me&&Ue&&qe){var Sr=new ee(me),Dt=new l.ImageAtlas(Ue,qe);for(var fr in Pe){var ui=Pe[fr];ui instanceof l.SymbolBucket?(W(ui.layers,this.zoom,B),l.performSymbolLayout(ui,me,Sr.positions,Ue,Dt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ui.hasPattern&&(ui instanceof l.LineBucket||ui instanceof l.FillBucket||ui instanceof l.FillExtrusionBucket)&&(W(ui.layers,this.zoom,B),ui.addFeatures(Ve,this.tileID.canonical,Dt.patternPositions))}this.status="done",X(null,{buckets:l.values(Pe).filter(function(Hi){return!Hi.isEmpty()}),featureIndex:V,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Sr.image,imageAtlas:Dt,glyphMap:this.returnDependencies?me:null,iconMap:this.returnDependencies?Ue:null,glyphPositions:this.returnDependencies?Sr.positions:null})}}vr.length?G.send("getImages",{icons:vr,source:this.source,tileID:this.tileID,type:"patterns"},function(Sr,Dt){Q||(Q=Sr,qe=Dt,tn.call(ue))}):qe={},tn.call(this)};var Le=function(L,O,B,G){this.actor=L,this.layerIndex=O,this.availableImages=B,this.loadVectorData=G||xe,this.loading={},this.loaded={}};Le.prototype.loadTile=function(L,O){var B=this,G=L.uid;this.loading||(this.loading={});var X=!!(L&&L.request&&L.request.collectResourceTiming)&&new l.RequestPerformance(L.request),ue=this.loading[G]=new Ce(L);ue.abort=this.loadVectorData(L,function(pe,V){if(delete B.loading[G],pe||!V)return ue.status="done",B.loaded[G]=ue,O(pe);var Q=V.rawData,me={};V.expires&&(me.expires=V.expires),V.cacheControl&&(me.cacheControl=V.cacheControl);var Ue={};if(X){var qe=X.finish();qe&&(Ue.resourceTiming=JSON.parse(JSON.stringify(qe)))}ue.vectorTile=V.vectorTile,ue.parse(V.vectorTile,B.layerIndex,B.availableImages,B.actor,function(Pe,Ve){if(Pe||!Ve)return O(Pe);O(null,l.extend({rawTileData:Q.slice(0)},Ve,me,Ue))}),B.loaded=B.loaded||{},B.loaded[G]=ue})},Le.prototype.reloadTile=function(L,O){var B=this,G=this.loaded,X=L.uid,ue=this;if(G&&G[X]){var pe=G[X];pe.showCollisionBoxes=L.showCollisionBoxes;var V=function(Q,me){var Ue=pe.reloadCallback;Ue&&(delete pe.reloadCallback,pe.parse(pe.vectorTile,ue.layerIndex,B.availableImages,ue.actor,Ue)),O(Q,me)};pe.status==="parsing"?pe.reloadCallback=V:pe.status==="done"&&(pe.vectorTile?pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,V):V())}},Le.prototype.abortTile=function(L,O){var B=this.loading,G=L.uid;B&&B[G]&&B[G].abort&&(B[G].abort(),delete B[G]),O()},Le.prototype.removeTile=function(L,O){var B=this.loaded,G=L.uid;B&&B[G]&&delete B[G],O()};var De=l.window.ImageBitmap,se=function(){this.loaded={}};function re(L,O){if(L.length!==0){oe(L[0],O);for(var B=1;B<L.length;B++)oe(L[B],!O)}}function oe(L,O){for(var B=0,G=0,X=L.length,ue=X-1;G<X;ue=G++)B+=(L[G][0]-L[ue][0])*(L[ue][1]+L[G][1]);B>=0!=!!O&&L.reverse()}se.prototype.loadTile=function(L,O){var B=L.uid,G=L.encoding,X=L.rawImageData,ue=De&&X instanceof De?this.getImageData(X):X,pe=new l.DEMData(B,ue,G);this.loaded=this.loaded||{},this.loaded[B]=pe,O(null,pe)},se.prototype.getImageData=function(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);var O=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:O.width,height:O.height},O.data)},se.prototype.removeTile=function(L){var O=this.loaded,B=L.uid;O&&O[B]&&delete O[B]};var be=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,Re=function(L){this._feature=L,this.extent=l.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))};Re.prototype.loadGeometry=function(){if(this._feature.type===1){for(var L=[],O=0,B=this._feature.geometry;O<B.length;O+=1){var G=B[O];L.push([new l.Point$1(G[0],G[1])])}return L}for(var X=[],ue=0,pe=this._feature.geometry;ue<pe.length;ue+=1){for(var V=[],Q=0,me=pe[ue];Q<me.length;Q+=1){var Ue=me[Q];V.push(new l.Point$1(Ue[0],Ue[1]))}X.push(V)}return X},Re.prototype.toGeoJSON=function(L,O,B){return be.call(this,L,O,B)};var Me=function(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=L.length,this._features=L};Me.prototype.feature=function(L){return new Re(this._features[L])};var Ie=l.vectorTile.VectorTileFeature,je=at;function at(L,O){this.options=O||{},this.features=L,this.length=L.length}function Xe(L,O){this.id=typeof L.id=="number"?L.id:void 0,this.type=L.type,this.rawGeometry=L.type===1?[L.geometry]:L.geometry,this.properties=L.tags,this.extent=O||4096}at.prototype.feature=function(L){return new Xe(this.features[L],this.options.extent)},Xe.prototype.loadGeometry=function(){var L=this.rawGeometry;this.geometry=[];for(var O=0;O<L.length;O++){for(var B=L[O],G=[],X=0;X<B.length;X++)G.push(new l.Point$1(B[X][0],B[X][1]));this.geometry.push(G)}return this.geometry},Xe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var L=this.geometry,O=1/0,B=-1/0,G=1/0,X=-1/0,ue=0;ue<L.length;ue++)for(var pe=L[ue],V=0;V<pe.length;V++){var Q=pe[V];O=Math.min(O,Q.x),B=Math.max(B,Q.x),G=Math.min(G,Q.y),X=Math.max(X,Q.y)}return[O,G,B,X]},Xe.prototype.toGeoJSON=Ie.prototype.toGeoJSON;var _t=bt,Mt=je;function bt(L){var O=new l.pbf;return function(B,G){for(var X in B.layers)G.writeMessage(3,Ct,B.layers[X])}(L,O),O.finish()}function Ct(L,O){var B;O.writeVarintField(15,L.version||1),O.writeStringField(1,L.name||""),O.writeVarintField(5,L.extent||4096);var G={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<L.length;B++)G.feature=L.feature(B),O.writeMessage(2,Ut,G);var X=G.keys;for(B=0;B<X.length;B++)O.writeStringField(3,X[B]);var ue=G.values;for(B=0;B<ue.length;B++)O.writeMessage(4,Bn,ue[B])}function Ut(L,O){var B=L.feature;B.id!==void 0&&O.writeVarintField(1,B.id),O.writeMessage(2,Cr,L),O.writeVarintField(3,B.type),O.writeMessage(4,Qt,B)}function Cr(L,O){var B=L.feature,G=L.keys,X=L.values,ue=L.keycache,pe=L.valuecache;for(var V in B.properties){var Q=ue[V];Q===void 0&&(G.push(V),ue[V]=Q=G.length-1),O.writeVarint(Q);var me=B.properties[V],Ue=typeof me;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(me=JSON.stringify(me));var qe=Ue+":"+me,Pe=pe[qe];Pe===void 0&&(X.push(me),pe[qe]=Pe=X.length-1),O.writeVarint(Pe)}}function Ir(L,O){return(O<<3)+(7&L)}function Fn(L){return L<<1^L>>31}function Qt(L,O){for(var B=L.loadGeometry(),G=L.type,X=0,ue=0,pe=B.length,V=0;V<pe;V++){var Q=B[V],me=1;G===1&&(me=Q.length),O.writeVarint(Ir(1,me));for(var Ue=G===3?Q.length-1:Q.length,qe=0;qe<Ue;qe++){qe===1&&G!==1&&O.writeVarint(Ir(2,Ue-1));var Pe=Q[qe].x-X,Ve=Q[qe].y-ue;O.writeVarint(Fn(Pe)),O.writeVarint(Fn(Ve)),X+=Pe,ue+=Ve}G===3&&O.writeVarint(Ir(7,1))}}function Bn(L,O){var B=typeof L;B==="string"?O.writeStringField(1,L):B==="boolean"?O.writeBooleanField(7,L):B==="number"&&(L%1!=0?O.writeDoubleField(3,L):L<0?O.writeSVarintField(6,L):O.writeVarintField(5,L))}function Gt(L,O,B,G){Ye(L,B,G),Ye(O,2*B,2*G),Ye(O,2*B+1,2*G+1)}function Ye(L,O,B){var G=L[O];L[O]=L[B],L[B]=G}function zt(L,O,B,G){var X=L-B,ue=O-G;return X*X+ue*ue}_t.fromVectorTileJs=bt,_t.fromGeojsonVt=function(L,O){O=O||{};var B={};for(var G in L)B[G]=new je(L[G].features,O),B[G].name=G,B[G].version=O.version,B[G].extent=O.extent;return bt({layers:B})},_t.GeoJSONWrapper=Mt;var Xt=function(L){return L[0]},Rr=function(L){return L[1]},Gr=function(L,O,B,G,X){O===void 0&&(O=Xt),B===void 0&&(B=Rr),G===void 0&&(G=64),X===void 0&&(X=Float64Array),this.nodeSize=G,this.points=L;for(var ue=L.length<65536?Uint16Array:Uint32Array,pe=this.ids=new ue(L.length),V=this.coords=new X(2*L.length),Q=0;Q<L.length;Q++)pe[Q]=Q,V[2*Q]=O(L[Q]),V[2*Q+1]=B(L[Q]);(function me(Ue,qe,Pe,Ve,pt,st){if(!(pt-Ve<=Pe)){var Ae=Ve+pt>>1;(function tt(Je,Qe,Wt,rt,or,kr){for(;or>rt;){if(or-rt>600){var Rt=or-rt+1,hr=Wt-rt+1,ur=Math.log(Rt),Nn=.5*Math.exp(2*ur/3),vr=.5*Math.sqrt(ur*Nn*(Rt-Nn)/Rt)*(hr-Rt/2<0?-1:1);tt(Je,Qe,Wt,Math.max(rt,Math.floor(Wt-hr*Nn/Rt+vr)),Math.min(or,Math.floor(Wt+(Rt-hr)*Nn/Rt+vr)),kr)}var tn=Qe[2*Wt+kr],Sr=rt,Dt=or;for(Gt(Je,Qe,rt,Wt),Qe[2*or+kr]>tn&&Gt(Je,Qe,rt,or);Sr<Dt;){for(Gt(Je,Qe,Sr,Dt),Sr++,Dt--;Qe[2*Sr+kr]<tn;)Sr++;for(;Qe[2*Dt+kr]>tn;)Dt--}Qe[2*rt+kr]===tn?Gt(Je,Qe,rt,Dt):Gt(Je,Qe,++Dt,or),Dt<=Wt&&(rt=Dt+1),Wt<=Dt&&(or=Dt-1)}})(Ue,qe,Ae,Ve,pt,st%2),me(Ue,qe,Pe,Ve,Ae-1,st+1),me(Ue,qe,Pe,Ae+1,pt,st+1)}})(pe,V,G,0,pe.length-1,0)};Gr.prototype.range=function(L,O,B,G){return function(X,ue,pe,V,Q,me,Ue){for(var qe,Pe,Ve=[0,X.length-1,0],pt=[];Ve.length;){var st=Ve.pop(),Ae=Ve.pop(),tt=Ve.pop();if(Ae-tt<=Ue)for(var Je=tt;Je<=Ae;Je++)Pe=ue[2*Je+1],(qe=ue[2*Je])>=pe&&qe<=Q&&Pe>=V&&Pe<=me&&pt.push(X[Je]);else{var Qe=Math.floor((tt+Ae)/2);Pe=ue[2*Qe+1],(qe=ue[2*Qe])>=pe&&qe<=Q&&Pe>=V&&Pe<=me&&pt.push(X[Qe]);var Wt=(st+1)%2;(st===0?pe<=qe:V<=Pe)&&(Ve.push(tt),Ve.push(Qe-1),Ve.push(Wt)),(st===0?Q>=qe:me>=Pe)&&(Ve.push(Qe+1),Ve.push(Ae),Ve.push(Wt))}}return pt}(this.ids,this.coords,L,O,B,G,this.nodeSize)},Gr.prototype.within=function(L,O,B){return function(G,X,ue,pe,V,Q){for(var me=[0,G.length-1,0],Ue=[],qe=V*V;me.length;){var Pe=me.pop(),Ve=me.pop(),pt=me.pop();if(Ve-pt<=Q)for(var st=pt;st<=Ve;st++)zt(X[2*st],X[2*st+1],ue,pe)<=qe&&Ue.push(G[st]);else{var Ae=Math.floor((pt+Ve)/2),tt=X[2*Ae],Je=X[2*Ae+1];zt(tt,Je,ue,pe)<=qe&&Ue.push(G[Ae]);var Qe=(Pe+1)%2;(Pe===0?ue-V<=tt:pe-V<=Je)&&(me.push(pt),me.push(Ae-1),me.push(Qe)),(Pe===0?ue+V>=tt:pe+V>=Je)&&(me.push(Ae+1),me.push(Ve),me.push(Qe))}}return Ue}(this.ids,this.coords,L,O,B,this.nodeSize)};var fo={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(L){return L}},en=function(L){this.options=Vi(Object.create(fo),L),this.trees=new Array(this.options.maxZoom+1)};function si(L,O,B,G,X){return{x:L,y:O,zoom:1/0,id:B,parentId:-1,numPoints:G,properties:X}}function cr(L,O){var B=L.geometry.coordinates,G=B[1];return{x:Hn(B[0]),y:er(G),zoom:1/0,index:O,parentId:-1}}function Io(L){return{type:"Feature",id:L.id,properties:rs(L),geometry:{type:"Point",coordinates:[(G=L.x,360*(G-.5)),(O=L.y,B=(180-360*O)*Math.PI/180,360*Math.atan(Math.exp(B))/Math.PI-90)]}};var O,B,G}function rs(L){var O=L.numPoints,B=O>=1e4?Math.round(O/1e3)+"k":O>=1e3?Math.round(O/100)/10+"k":O;return Vi(Vi({},L.properties),{cluster:!0,cluster_id:L.id,point_count:O,point_count_abbreviated:B})}function Hn(L){return L/360+.5}function er(L){var O=Math.sin(L*Math.PI/180),B=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return B<0?0:B>1?1:B}function Vi(L,O){for(var B in O)L[B]=O[B];return L}function on(L){return L.x}function An(L){return L.y}function Xu(L,O,B,G,X,ue){var pe=X-B,V=ue-G;if(pe!==0||V!==0){var Q=((L-B)*pe+(O-G)*V)/(pe*pe+V*V);Q>1?(B=X,G=ue):Q>0&&(B+=pe*Q,G+=V*Q)}return(pe=L-B)*pe+(V=O-G)*V}function qi(L,O,B,G){var X={id:L===void 0?null:L,type:O,geometry:B,tags:G,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ue){var pe=ue.geometry,V=ue.type;if(V==="Point"||V==="MultiPoint"||V==="LineString")As(ue,pe);else if(V==="Polygon"||V==="MultiLineString")for(var Q=0;Q<pe.length;Q++)As(ue,pe[Q]);else if(V==="MultiPolygon")for(Q=0;Q<pe.length;Q++)for(var me=0;me<pe[Q].length;me++)As(ue,pe[Q][me])}(X),X}function As(L,O){for(var B=0;B<O.length;B+=3)L.minX=Math.min(L.minX,O[B]),L.minY=Math.min(L.minY,O[B+1]),L.maxX=Math.max(L.maxX,O[B]),L.maxY=Math.max(L.maxY,O[B+1])}function cn(L,O,B,G){if(O.geometry){var X=O.geometry.coordinates,ue=O.geometry.type,pe=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),V=[],Q=O.id;if(B.promoteId?Q=O.properties[B.promoteId]:B.generateId&&(Q=G||0),ue==="Point")za(X,V);else if(ue==="MultiPoint")for(var me=0;me<X.length;me++)za(X[me],V);else if(ue==="LineString")ko(X,V,pe,!1);else if(ue==="MultiLineString"){if(B.lineMetrics){for(me=0;me<X.length;me++)ko(X[me],V=[],pe,!1),L.push(qi(Q,"LineString",V,O.properties));return}Ci(X,V,pe,!1)}else if(ue==="Polygon")Ci(X,V,pe,!0);else{if(ue!=="MultiPolygon"){if(ue==="GeometryCollection"){for(me=0;me<O.geometry.geometries.length;me++)cn(L,{id:Q,geometry:O.geometry.geometries[me],properties:O.properties},B,G);return}throw new Error("Input data is not a valid GeoJSON object.")}for(me=0;me<X.length;me++){var Ue=[];Ci(X[me],Ue,pe,!0),V.push(Ue)}}L.push(qi(Q,ue,V,O.properties))}}function za(L,O){O.push(mi(L[0])),O.push(ca(L[1])),O.push(0)}function ko(L,O,B,G){for(var X,ue,pe=0,V=0;V<L.length;V++){var Q=mi(L[V][0]),me=ca(L[V][1]);O.push(Q),O.push(me),O.push(0),V>0&&(pe+=G?(X*me-Q*ue)/2:Math.sqrt(Math.pow(Q-X,2)+Math.pow(me-ue,2))),X=Q,ue=me}var Ue=O.length-3;O[2]=1,function qe(Pe,Ve,pt,st){for(var Ae,tt=st,Je=pt-Ve>>1,Qe=pt-Ve,Wt=Pe[Ve],rt=Pe[Ve+1],or=Pe[pt],kr=Pe[pt+1],Rt=Ve+3;Rt<pt;Rt+=3){var hr=Xu(Pe[Rt],Pe[Rt+1],Wt,rt,or,kr);if(hr>tt)Ae=Rt,tt=hr;else if(hr===tt){var ur=Math.abs(Rt-Je);ur<Qe&&(Ae=Rt,Qe=ur)}}tt>st&&(Ae-Ve>3&&qe(Pe,Ve,Ae,st),Pe[Ae+2]=tt,pt-Ae>3&&qe(Pe,Ae,pt,st))}(O,0,Ue,B),O[Ue+2]=1,O.size=Math.abs(pe),O.start=0,O.end=O.size}function Ci(L,O,B,G){for(var X=0;X<L.length;X++){var ue=[];ko(L[X],ue,B,G),O.push(ue)}}function mi(L){return L/360+.5}function ca(L){var O=Math.sin(L*Math.PI/180),B=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return B<0?0:B>1?1:B}function Zi(L,O,B,G,X,ue,pe,V){if(G/=O,ue>=(B/=O)&&pe<G)return L;if(pe<B||ue>=G)return null;for(var Q=[],me=0;me<L.length;me++){var Ue=L[me],qe=Ue.geometry,Pe=Ue.type,Ve=X===0?Ue.minX:Ue.minY,pt=X===0?Ue.maxX:Ue.maxY;if(Ve>=B&&pt<G)Q.push(Ue);else if(!(pt<B||Ve>=G)){var st=[];if(Pe==="Point"||Pe==="MultiPoint")Ms(qe,st,B,G,X);else if(Pe==="LineString")ns(qe,st,B,G,X,!1,V.lineMetrics);else if(Pe==="MultiLineString")Mn(qe,st,B,G,X,!1);else if(Pe==="Polygon")Mn(qe,st,B,G,X,!0);else if(Pe==="MultiPolygon")for(var Ae=0;Ae<qe.length;Ae++){var tt=[];Mn(qe[Ae],tt,B,G,X,!0),tt.length&&st.push(tt)}if(st.length){if(V.lineMetrics&&Pe==="LineString"){for(Ae=0;Ae<st.length;Ae++)Q.push(qi(Ue.id,Pe,st[Ae],Ue.tags));continue}Pe!=="LineString"&&Pe!=="MultiLineString"||(st.length===1?(Pe="LineString",st=st[0]):Pe="MultiLineString"),Pe!=="Point"&&Pe!=="MultiPoint"||(Pe=st.length===3?"Point":"MultiPoint"),Q.push(qi(Ue.id,Pe,st,Ue.tags))}}}return Q.length?Q:null}function Ms(L,O,B,G,X){for(var ue=0;ue<L.length;ue+=3){var pe=L[ue+X];pe>=B&&pe<=G&&(O.push(L[ue]),O.push(L[ue+1]),O.push(L[ue+2]))}}function ns(L,O,B,G,X,ue,pe){for(var V,Q,me=La(L),Ue=X===0?Wi:Xn,qe=L.start,Pe=0;Pe<L.length-3;Pe+=3){var Ve=L[Pe],pt=L[Pe+1],st=L[Pe+2],Ae=L[Pe+3],tt=L[Pe+4],Je=X===0?Ve:pt,Qe=X===0?Ae:tt,Wt=!1;pe&&(V=Math.sqrt(Math.pow(Ve-Ae,2)+Math.pow(pt-tt,2))),Je<B?Qe>B&&(Q=Ue(me,Ve,pt,Ae,tt,B),pe&&(me.start=qe+V*Q)):Je>G?Qe<G&&(Q=Ue(me,Ve,pt,Ae,tt,G),pe&&(me.start=qe+V*Q)):Gi(me,Ve,pt,st),Qe<B&&Je>=B&&(Q=Ue(me,Ve,pt,Ae,tt,B),Wt=!0),Qe>G&&Je<=G&&(Q=Ue(me,Ve,pt,Ae,tt,G),Wt=!0),!ue&&Wt&&(pe&&(me.end=qe+V*Q),O.push(me),me=La(L)),pe&&(qe+=V)}var rt=L.length-3;Ve=L[rt],pt=L[rt+1],st=L[rt+2],(Je=X===0?Ve:pt)>=B&&Je<=G&&Gi(me,Ve,pt,st),rt=me.length-3,ue&&rt>=3&&(me[rt]!==me[0]||me[rt+1]!==me[1])&&Gi(me,me[0],me[1],me[2]),me.length&&O.push(me)}function La(L){var O=[];return O.size=L.size,O.start=L.start,O.end=L.end,O}function Mn(L,O,B,G,X,ue){for(var pe=0;pe<L.length;pe++)ns(L[pe],O,B,G,X,ue,!1)}function Gi(L,O,B,G){L.push(O),L.push(B),L.push(G)}function Wi(L,O,B,G,X,ue){var pe=(ue-O)/(G-O);return L.push(ue),L.push(B+(X-B)*pe),L.push(1),pe}function Xn(L,O,B,G,X,ue){var pe=(ue-B)/(X-B);return L.push(O+(G-O)*pe),L.push(ue),L.push(1),pe}function zs(L,O){for(var B=[],G=0;G<L.length;G++){var X,ue=L[G],pe=ue.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")X=Ao(ue.geometry,O);else if(pe==="MultiLineString"||pe==="Polygon"){X=[];for(var V=0;V<ue.geometry.length;V++)X.push(Ao(ue.geometry[V],O))}else if(pe==="MultiPolygon")for(X=[],V=0;V<ue.geometry.length;V++){for(var Q=[],me=0;me<ue.geometry[V].length;me++)Q.push(Ao(ue.geometry[V][me],O));X.push(Q)}B.push(qi(ue.id,pe,X,ue.tags))}return B}function Ao(L,O){var B=[];B.size=L.size,L.start!==void 0&&(B.start=L.start,B.end=L.end);for(var G=0;G<L.length;G+=3)B.push(L[G]+O,L[G+1],L[G+2]);return B}function Un(L,O){if(L.transformed)return L;var B,G,X,ue=1<<L.z,pe=L.x,V=L.y;for(B=0;B<L.features.length;B++){var Q=L.features[B],me=Q.geometry,Ue=Q.type;if(Q.geometry=[],Ue===1)for(G=0;G<me.length;G+=2)Q.geometry.push(tr(me[G],me[G+1],O,ue,pe,V));else for(G=0;G<me.length;G++){var qe=[];for(X=0;X<me[G].length;X+=2)qe.push(tr(me[G][X],me[G][X+1],O,ue,pe,V));Q.geometry.push(qe)}}return L.transformed=!0,L}function tr(L,O,B,G,X,ue){return[Math.round(B*(L*G-X)),Math.round(B*(O*G-ue))]}function Ls(L,O,B,G,X){for(var ue=O===X.maxZoom?0:X.tolerance/((1<<O)*X.extent),pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:G,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},V=0;V<L.length;V++){pe.numFeatures++,uu(pe,L[V],ue,X);var Q=L[V].minX,me=L[V].minY,Ue=L[V].maxX,qe=L[V].maxY;Q<pe.minX&&(pe.minX=Q),me<pe.minY&&(pe.minY=me),Ue>pe.maxX&&(pe.maxX=Ue),qe>pe.maxY&&(pe.maxY=qe)}return pe}function uu(L,O,B,G){var X=O.geometry,ue=O.type,pe=[];if(ue==="Point"||ue==="MultiPoint")for(var V=0;V<X.length;V+=3)pe.push(X[V]),pe.push(X[V+1]),L.numPoints++,L.numSimplified++;else if(ue==="LineString")Da(pe,X,L,B,!1,!1);else if(ue==="MultiLineString"||ue==="Polygon")for(V=0;V<X.length;V++)Da(pe,X[V],L,B,ue==="Polygon",V===0);else if(ue==="MultiPolygon")for(var Q=0;Q<X.length;Q++){var me=X[Q];for(V=0;V<me.length;V++)Da(pe,me[V],L,B,!0,V===0)}if(pe.length){var Ue=O.tags||null;if(ue==="LineString"&&G.lineMetrics){for(var qe in Ue={},O.tags)Ue[qe]=O.tags[qe];Ue.mapbox_clip_start=X.start/X.size,Ue.mapbox_clip_end=X.end/X.size}var Pe={geometry:pe,type:ue==="Polygon"||ue==="MultiPolygon"?3:ue==="LineString"||ue==="MultiLineString"?2:1,tags:Ue};O.id!==null&&(Pe.id=O.id),L.features.push(Pe)}}function Da(L,O,B,G,X,ue){var pe=G*G;if(G>0&&O.size<(X?pe:G))B.numPoints+=O.length/3;else{for(var V=[],Q=0;Q<O.length;Q+=3)(G===0||O[Q+2]>pe)&&(B.numSimplified++,V.push(O[Q]),V.push(O[Q+1])),B.numPoints++;X&&function(me,Ue){for(var qe=0,Pe=0,Ve=me.length,pt=Ve-2;Pe<Ve;pt=Pe,Pe+=2)qe+=(me[Pe]-me[pt])*(me[Pe+1]+me[pt+1]);if(qe>0===Ue)for(Pe=0,Ve=me.length;Pe<Ve/2;Pe+=2){var st=me[Pe],Ae=me[Pe+1];me[Pe]=me[Ve-2-Pe],me[Pe+1]=me[Ve-1-Pe],me[Ve-2-Pe]=st,me[Ve-1-Pe]=Ae}}(V,ue),L.push(V)}}function $i(L,O){var B=(O=this.options=function(X,ue){for(var pe in ue)X[pe]=ue[pe];return X}(Object.create(this.options),O)).debug;if(B&&console.time("preprocess data"),O.maxZoom<0||O.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(O.promoteId&&O.generateId)throw new Error("promoteId and generateId cannot be used together.");var G=function(X,ue){var pe=[];if(X.type==="FeatureCollection")for(var V=0;V<X.features.length;V++)cn(pe,X.features[V],ue,V);else cn(pe,X.type==="Feature"?X:{geometry:X},ue);return pe}(L,O);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",O.indexMaxZoom,O.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(G=function(X,ue){var pe=ue.buffer/ue.extent,V=X,Q=Zi(X,1,-1-pe,pe,0,-1,2,ue),me=Zi(X,1,1-pe,2+pe,0,-1,2,ue);return(Q||me)&&(V=Zi(X,1,-pe,1+pe,0,-1,2,ue)||[],Q&&(V=zs(Q,1).concat(V)),me&&(V=V.concat(zs(me,-1)))),V}(G,O)).length&&this.splitTile(G,0,0,0),B&&(G.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function $o(L,O,B){return 32*((1<<L)*B+O)+L}function Mr(L,O){var B=L.tileID.canonical;if(!this._geoJSONIndex)return O(null,null);var G=this._geoJSONIndex.getTile(B.z,B.x,B.y);if(!G)return O(null,null);var X=new Me(G.features),ue=_t(X);ue.byteOffset===0&&ue.byteLength===ue.buffer.byteLength||(ue=new Uint8Array(ue)),O(null,{vectorTile:X,rawData:ue.buffer})}en.prototype.load=function(L){var O=this.options,B=O.log,G=O.minZoom,X=O.maxZoom,ue=O.nodeSize;B&&console.time("total time");var pe="prepare "+L.length+" points";B&&console.time(pe),this.points=L;for(var V=[],Q=0;Q<L.length;Q++)L[Q].geometry&&V.push(cr(L[Q],Q));this.trees[X+1]=new Gr(V,on,An,ue,Float32Array),B&&console.timeEnd(pe);for(var me=X;me>=G;me--){var Ue=+Date.now();V=this._cluster(V,me),this.trees[me]=new Gr(V,on,An,ue,Float32Array),B&&console.log("z%d: %d clusters in %dms",me,V.length,+Date.now()-Ue)}return B&&console.timeEnd("total time"),this},en.prototype.getClusters=function(L,O){var B=((L[0]+180)%360+360)%360-180,G=Math.max(-90,Math.min(90,L[1])),X=L[2]===180?180:((L[2]+180)%360+360)%360-180,ue=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)B=-180,X=180;else if(B>X){var pe=this.getClusters([B,G,180,ue],O),V=this.getClusters([-180,G,X,ue],O);return pe.concat(V)}for(var Q=this.trees[this._limitZoom(O)],me=[],Ue=0,qe=Q.range(Hn(B),er(ue),Hn(X),er(G));Ue<qe.length;Ue+=1){var Pe=Q.points[qe[Ue]];me.push(Pe.numPoints?Io(Pe):this.points[Pe.index])}return me},en.prototype.getChildren=function(L){var O=this._getOriginId(L),B=this._getOriginZoom(L),G="No cluster with the specified id.",X=this.trees[B];if(!X)throw new Error(G);var ue=X.points[O];if(!ue)throw new Error(G);for(var pe=this.options.radius/(this.options.extent*Math.pow(2,B-1)),V=[],Q=0,me=X.within(ue.x,ue.y,pe);Q<me.length;Q+=1){var Ue=X.points[me[Q]];Ue.parentId===L&&V.push(Ue.numPoints?Io(Ue):this.points[Ue.index])}if(V.length===0)throw new Error(G);return V},en.prototype.getLeaves=function(L,O,B){var G=[];return this._appendLeaves(G,L,O=O||10,B=B||0,0),G},en.prototype.getTile=function(L,O,B){var G=this.trees[this._limitZoom(L)],X=Math.pow(2,L),ue=this.options,pe=ue.radius/ue.extent,V=(B-pe)/X,Q=(B+1+pe)/X,me={features:[]};return this._addTileFeatures(G.range((O-pe)/X,V,(O+1+pe)/X,Q),G.points,O,B,X,me),O===0&&this._addTileFeatures(G.range(1-pe/X,V,1,Q),G.points,X,B,X,me),O===X-1&&this._addTileFeatures(G.range(0,V,pe/X,Q),G.points,-1,B,X,me),me.features.length?me:null},en.prototype.getClusterExpansionZoom=function(L){for(var O=this._getOriginZoom(L)-1;O<=this.options.maxZoom;){var B=this.getChildren(L);if(O++,B.length!==1)break;L=B[0].properties.cluster_id}return O},en.prototype._appendLeaves=function(L,O,B,G,X){for(var ue=0,pe=this.getChildren(O);ue<pe.length;ue+=1){var V=pe[ue],Q=V.properties;if(Q&&Q.cluster?X+Q.point_count<=G?X+=Q.point_count:X=this._appendLeaves(L,Q.cluster_id,B,G,X):X<G?X++:L.push(V),L.length===B)break}return X},en.prototype._addTileFeatures=function(L,O,B,G,X,ue){for(var pe=0,V=L;pe<V.length;pe+=1){var Q=O[V[pe]],me=Q.numPoints,Ue={type:1,geometry:[[Math.round(this.options.extent*(Q.x*X-B)),Math.round(this.options.extent*(Q.y*X-G))]],tags:me?rs(Q):this.points[Q.index].properties},qe=void 0;me?qe=Q.id:this.options.generateId?qe=Q.index:this.points[Q.index].id&&(qe=this.points[Q.index].id),qe!==void 0&&(Ue.id=qe),ue.features.push(Ue)}},en.prototype._limitZoom=function(L){return Math.max(this.options.minZoom,Math.min(+L,this.options.maxZoom+1))},en.prototype._cluster=function(L,O){for(var B=[],G=this.options,X=G.reduce,ue=G.minPoints,pe=G.radius/(G.extent*Math.pow(2,O)),V=0;V<L.length;V++){var Q=L[V];if(!(Q.zoom<=O)){Q.zoom=O;for(var me=this.trees[O+1],Ue=me.within(Q.x,Q.y,pe),qe=Q.numPoints||1,Pe=qe,Ve=0,pt=Ue;Ve<pt.length;Ve+=1){var st=me.points[pt[Ve]];st.zoom>O&&(Pe+=st.numPoints||1)}if(Pe>=ue){for(var Ae=Q.x*qe,tt=Q.y*qe,Je=X&&qe>1?this._map(Q,!0):null,Qe=(V<<5)+(O+1)+this.points.length,Wt=0,rt=Ue;Wt<rt.length;Wt+=1){var or=me.points[rt[Wt]];if(!(or.zoom<=O)){or.zoom=O;var kr=or.numPoints||1;Ae+=or.x*kr,tt+=or.y*kr,or.parentId=Qe,X&&(Je||(Je=this._map(Q,!0)),X(Je,this._map(or)))}}Q.parentId=Qe,B.push(si(Ae/Pe,tt/Pe,Qe,Pe,Je))}else if(B.push(Q),Pe>1)for(var Rt=0,hr=Ue;Rt<hr.length;Rt+=1){var ur=me.points[hr[Rt]];ur.zoom<=O||(ur.zoom=O,B.push(ur))}}}return B},en.prototype._getOriginId=function(L){return L-this.points.length>>5},en.prototype._getOriginZoom=function(L){return(L-this.points.length)%32},en.prototype._map=function(L,O){if(L.numPoints)return O?Vi({},L.properties):L.properties;var B=this.points[L.index].properties,G=this.options.map(B);return O&&G===B?Vi({},G):G},$i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$i.prototype.splitTile=function(L,O,B,G,X,ue,pe){for(var V=[L,O,B,G],Q=this.options,me=Q.debug;V.length;){G=V.pop(),B=V.pop(),O=V.pop(),L=V.pop();var Ue=1<<O,qe=$o(O,B,G),Pe=this.tiles[qe];if(!Pe&&(me>1&&console.time("creation"),Pe=this.tiles[qe]=Ls(L,O,B,G,Q),this.tileCoords.push({z:O,x:B,y:G}),me)){me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",O,B,G,Pe.numFeatures,Pe.numPoints,Pe.numSimplified),console.timeEnd("creation"));var Ve="z"+O;this.stats[Ve]=(this.stats[Ve]||0)+1,this.total++}if(Pe.source=L,X){if(O===Q.maxZoom||O===X)continue;var pt=1<<X-O;if(B!==Math.floor(ue/pt)||G!==Math.floor(pe/pt))continue}else if(O===Q.indexMaxZoom||Pe.numPoints<=Q.indexMaxPoints)continue;if(Pe.source=null,L.length!==0){me>1&&console.time("clipping");var st,Ae,tt,Je,Qe,Wt,rt=.5*Q.buffer/Q.extent,or=.5-rt,kr=.5+rt,Rt=1+rt;st=Ae=tt=Je=null,Qe=Zi(L,Ue,B-rt,B+kr,0,Pe.minX,Pe.maxX,Q),Wt=Zi(L,Ue,B+or,B+Rt,0,Pe.minX,Pe.maxX,Q),L=null,Qe&&(st=Zi(Qe,Ue,G-rt,G+kr,1,Pe.minY,Pe.maxY,Q),Ae=Zi(Qe,Ue,G+or,G+Rt,1,Pe.minY,Pe.maxY,Q),Qe=null),Wt&&(tt=Zi(Wt,Ue,G-rt,G+kr,1,Pe.minY,Pe.maxY,Q),Je=Zi(Wt,Ue,G+or,G+Rt,1,Pe.minY,Pe.maxY,Q),Wt=null),me>1&&console.timeEnd("clipping"),V.push(st||[],O+1,2*B,2*G),V.push(Ae||[],O+1,2*B,2*G+1),V.push(tt||[],O+1,2*B+1,2*G),V.push(Je||[],O+1,2*B+1,2*G+1)}}},$i.prototype.getTile=function(L,O,B){var G=this.options,X=G.extent,ue=G.debug;if(L<0||L>24)return null;var pe=1<<L,V=$o(L,O=(O%pe+pe)%pe,B);if(this.tiles[V])return Un(this.tiles[V],X);ue>1&&console.log("drilling down to z%d-%d-%d",L,O,B);for(var Q,me=L,Ue=O,qe=B;!Q&&me>0;)me--,Ue=Math.floor(Ue/2),qe=Math.floor(qe/2),Q=this.tiles[$o(me,Ue,qe)];return Q&&Q.source?(ue>1&&console.log("found parent tile z%d-%d-%d",me,Ue,qe),ue>1&&console.time("drilling down"),this.splitTile(Q.source,me,Ue,qe,L,O,B),ue>1&&console.timeEnd("drilling down"),this.tiles[V]?Un(this.tiles[V],X):null):null};var is=function(L){function O(B,G,X,ue){L.call(this,B,G,X,Mr),ue&&(this.loadGeoJSON=ue)}return L&&(O.__proto__=L),(O.prototype=Object.create(L&&L.prototype)).constructor=O,O.prototype.loadData=function(B,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=G,this._pendingLoadDataParams=B,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},O.prototype._loadData=function(){var B=this;if(this._pendingCallback&&this._pendingLoadDataParams){var G=this._pendingCallback,X=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ue=!!(X&&X.request&&X.request.collectResourceTiming)&&new l.RequestPerformance(X.request);this.loadGeoJSON(X,function(pe,V){if(pe||!V)return G(pe);if(typeof V!="object")return G(new Error("Input data given to '"+X.source+"' is not a valid GeoJSON object."));(function Pe(Ve,pt){var st,Ae=Ve&&Ve.type;if(Ae==="FeatureCollection")for(st=0;st<Ve.features.length;st++)Pe(Ve.features[st],pt);else if(Ae==="GeometryCollection")for(st=0;st<Ve.geometries.length;st++)Pe(Ve.geometries[st],pt);else if(Ae==="Feature")Pe(Ve.geometry,pt);else if(Ae==="Polygon")re(Ve.coordinates,pt);else if(Ae==="MultiPolygon")for(st=0;st<Ve.coordinates.length;st++)re(Ve.coordinates[st],pt);return Ve})(V,!0);try{if(X.filter){var Q=l.createExpression(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Q.result==="error")throw new Error(Q.value.map(function(Pe){return Pe.key+": "+Pe.message}).join(", "));var me=V.features.filter(function(Pe){return Q.value.evaluate({zoom:0},Pe)});V={type:"FeatureCollection",features:me}}B._geoJSONIndex=X.cluster?new en(function(Pe){var Ve=Pe.superclusterOptions,pt=Pe.clusterProperties;if(!pt||!Ve)return Ve;for(var st={},Ae={},tt={accumulated:null,zoom:0},Je={properties:null},Qe=Object.keys(pt),Wt=0,rt=Qe;Wt<rt.length;Wt+=1){var or=rt[Wt],kr=pt[or],Rt=kr[0],hr=l.createExpression(kr[1]),ur=l.createExpression(typeof Rt=="string"?[Rt,["accumulated"],["get",or]]:Rt);st[or]=hr.value,Ae[or]=ur.value}return Ve.map=function(Nn){Je.properties=Nn;for(var vr={},tn=0,Sr=Qe;tn<Sr.length;tn+=1){var Dt=Sr[tn];vr[Dt]=st[Dt].evaluate(tt,Je)}return vr},Ve.reduce=function(Nn,vr){Je.properties=vr;for(var tn=0,Sr=Qe;tn<Sr.length;tn+=1){var Dt=Sr[tn];tt.accumulated=Nn[Dt],Nn[Dt]=Ae[Dt].evaluate(tt,Je)}},Ve}(X)).load(V.features):function(Pe,Ve){return new $i(Pe,Ve)}(V,X.geojsonVtOptions)}catch(Pe){return G(Pe)}B.loaded={};var Ue={};if(ue){var qe=ue.finish();qe&&(Ue.resourceTiming={},Ue.resourceTiming[X.source]=JSON.parse(JSON.stringify(qe)))}G(null,Ue)})}},O.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},O.prototype.reloadTile=function(B,G){var X=this.loaded;return X&&X[B.uid]?L.prototype.reloadTile.call(this,B,G):this.loadTile(B,G)},O.prototype.loadGeoJSON=function(B,G){if(B.request)l.getJSON(B.request,G);else{if(typeof B.data!="string")return G(new Error("Input data given to '"+B.source+"' is not a valid GeoJSON object."));try{return G(null,JSON.parse(B.data))}catch{return G(new Error("Input data given to '"+B.source+"' is not a valid GeoJSON object."))}}},O.prototype.removeSource=function(B,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),G()},O.prototype.getClusterExpansionZoom=function(B,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(B.clusterId))}catch(X){G(X)}},O.prototype.getClusterChildren=function(B,G){try{G(null,this._geoJSONIndex.getChildren(B.clusterId))}catch(X){G(X)}},O.prototype.getClusterLeaves=function(B,G){try{G(null,this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset))}catch(X){G(X)}},O}(Le),zr=function(L){var O=this;this.self=L,this.actor=new l.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Le,geojson:is},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(B,G){if(O.workerSourceTypes[B])throw new Error('Worker source with name "'+B+'" already registered.');O.workerSourceTypes[B]=G},this.self.registerRTLTextPlugin=function(B){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=B.applyArabicShaping,l.plugin.processBidirectionalText=B.processBidirectionalText,l.plugin.processStyledBidirectionalText=B.processStyledBidirectionalText}};return zr.prototype.setReferrer=function(L,O){this.referrer=O},zr.prototype.setImages=function(L,O,B){for(var G in this.availableImages[L]=O,this.workerSources[L]){var X=this.workerSources[L][G];for(var ue in X)X[ue].availableImages=O}B()},zr.prototype.setLayers=function(L,O,B){this.getLayerIndex(L).replace(O),B()},zr.prototype.updateLayers=function(L,O,B){this.getLayerIndex(L).update(O.layers,O.removedIds),B()},zr.prototype.loadTile=function(L,O,B){this.getWorkerSource(L,O.type,O.source).loadTile(O,B)},zr.prototype.loadDEMTile=function(L,O,B){this.getDEMWorkerSource(L,O.source).loadTile(O,B)},zr.prototype.reloadTile=function(L,O,B){this.getWorkerSource(L,O.type,O.source).reloadTile(O,B)},zr.prototype.abortTile=function(L,O,B){this.getWorkerSource(L,O.type,O.source).abortTile(O,B)},zr.prototype.removeTile=function(L,O,B){this.getWorkerSource(L,O.type,O.source).removeTile(O,B)},zr.prototype.removeDEMTile=function(L,O){this.getDEMWorkerSource(L,O.source).removeTile(O)},zr.prototype.removeSource=function(L,O,B){if(this.workerSources[L]&&this.workerSources[L][O.type]&&this.workerSources[L][O.type][O.source]){var G=this.workerSources[L][O.type][O.source];delete this.workerSources[L][O.type][O.source],G.removeSource!==void 0?G.removeSource(O,B):B()}},zr.prototype.loadWorkerSource=function(L,O,B){try{this.self.importScripts(O.url),B()}catch(G){B(G.toString())}},zr.prototype.syncRTLPluginState=function(L,O,B){try{l.plugin.setState(O);var G=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&G!=null){this.self.importScripts(G);var X=l.plugin.isParsed();B(X?void 0:new Error("RTL Text Plugin failed to import scripts from "+G),X)}}catch(ue){B(ue.toString())}},zr.prototype.getAvailableImages=function(L){var O=this.availableImages[L];return O||(O=[]),O},zr.prototype.getLayerIndex=function(L){var O=this.layerIndexes[L];return O||(O=this.layerIndexes[L]=new j),O},zr.prototype.getWorkerSource=function(L,O,B){var G=this;return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][O]||(this.workerSources[L][O]={}),this.workerSources[L][O][B]||(this.workerSources[L][O][B]=new this.workerSourceTypes[O]({send:function(X,ue,pe){G.actor.send(X,ue,pe,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][O][B]},zr.prototype.getDEMWorkerSource=function(L,O){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][O]||(this.demWorkerSources[L][O]=new se),this.demWorkerSources[L][O]},zr.prototype.enforceCacheSizeLimit=function(L,O){l.enforceCacheSizeLimit(O)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new zr(self)),zr}),w(["./shared"],function(l){var I=l.createCommonjsModule(function(o){function s(m){return!a(m)}function a(m){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var x,E,k=new Blob([""],{type:"text/javascript"}),D=URL.createObjectURL(k);try{E=new Worker(D),x=!0}catch{x=!1}return E&&E.terminate(),URL.revokeObjectURL(D),x}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var x=document.createElement("canvas");x.width=x.height=1;var E=x.getContext("2d");if(!E)return!1;var k=E.getImageData(0,0,1,1);return k&&k.width===x.width}()?(p[g=m&&m.failIfMajorPerformanceCaveat]===void 0&&(p[g]=function(x){var E=function(D){var N=document.createElement("canvas"),q=Object.create(s.webGLContextAttributes);return q.failIfMajorPerformanceCaveat=D,N.probablySupportsContext?N.probablySupportsContext("webgl",q)||N.probablySupportsContext("experimental-webgl",q):N.supportsContext?N.supportsContext("webgl",q)||N.supportsContext("experimental-webgl",q):N.getContext("webgl",q)||N.getContext("experimental-webgl",q)}(x);if(!E)return!1;var k=E.createShader(E.VERTEX_SHADER);return!(!k||E.isContextLost())&&(E.shaderSource(k,"void main() {}"),E.compileShader(k),E.getShaderParameter(k,E.COMPILE_STATUS)===!0)}(g)),p[g]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var g}o.exports?o.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=a);var p={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),M={create:function(o,s,a){var p=l.window.document.createElement(o);return s!==void 0&&(p.className=s),a&&a.appendChild(p),p},createNS:function(o,s){return l.window.document.createElementNS(o,s)}},j=l.window.document&&l.window.document.documentElement.style;function ee(o){if(!j)return o[0];for(var s=0;s<o.length;s++)if(o[s]in j)return o[s];return o[0]}var Ce,W=ee(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);M.disableDrag=function(){j&&W&&(Ce=j[W],j[W]="none")},M.enableDrag=function(){j&&W&&(j[W]=Ce)};var xe=ee(["transform","WebkitTransform"]);M.setTransform=function(o,s){o.style[xe]=s};var Le=!1;try{var De=Object.defineProperty({},"passive",{get:function(){Le=!0}});l.window.addEventListener("test",De,De),l.window.removeEventListener("test",De,De)}catch{Le=!1}M.addEventListener=function(o,s,a,p){p===void 0&&(p={}),o.addEventListener(s,a,"passive"in p&&Le?p:p.capture)},M.removeEventListener=function(o,s,a,p){p===void 0&&(p={}),o.removeEventListener(s,a,"passive"in p&&Le?p:p.capture)};var se=function(o){o.preventDefault(),o.stopPropagation(),l.window.removeEventListener("click",se,!0)};function re(o){var s=o.userImage;return!!(s&&s.render&&s.render())&&(o.data.replace(new Uint8Array(s.data.buffer)),!0)}M.suppressClick=function(){l.window.addEventListener("click",se,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",se,!0)},0)},M.mousePos=function(o,s){var a=o.getBoundingClientRect();return new l.Point(s.clientX-a.left-o.clientLeft,s.clientY-a.top-o.clientTop)},M.touchPos=function(o,s){for(var a=o.getBoundingClientRect(),p=[],m=0;m<s.length;m++)p.push(new l.Point(s[m].clientX-a.left-o.clientLeft,s[m].clientY-a.top-o.clientTop));return p},M.mouseButton=function(o){return l.window.InstallTrigger!==void 0&&o.button===2&&o.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:o.button},M.remove=function(o){o.parentNode&&o.parentNode.removeChild(o)};var oe=function(o){function s(){o.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var p=0,m=this.requestors;p<m.length;p+=1){var g=m[p];this._notify(g.ids,g.callback)}this.requestors=[]}},s.prototype.getImage=function(a){return this.images[a]},s.prototype.addImage=function(a,p){this._validate(a,p)&&(this.images[a]=p)},s.prototype._validate=function(a,p){var m=!0;return this._validateStretch(p.stretchX,p.data&&p.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(p.stretchY,p.data&&p.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),m=!1),this._validateContent(p.content,p)||(this.fire(new l.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),m=!1),m},s.prototype._validateStretch=function(a,p){if(!a)return!0;for(var m=0,g=0,x=a;g<x.length;g+=1){var E=x[g];if(E[0]<m||E[1]<E[0]||p<E[1])return!1;m=E[1]}return!0},s.prototype._validateContent=function(a,p){return!(a&&(a.length!==4||a[0]<0||p.data.width<a[0]||a[1]<0||p.data.height<a[1]||a[2]<0||p.data.width<a[2]||a[3]<0||p.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},s.prototype.updateImage=function(a,p){p.version=this.images[a].version+1,this.images[a]=p,this.updatedImages[a]=!0},s.prototype.removeImage=function(a){var p=this.images[a];delete this.images[a],delete this.patterns[a],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(a,p){var m=!0;if(!this.isLoaded())for(var g=0,x=a;g<x.length;g+=1)this.images[x[g]]||(m=!1);this.isLoaded()||m?this._notify(a,p):this.requestors.push({ids:a,callback:p})},s.prototype._notify=function(a,p){for(var m={},g=0,x=a;g<x.length;g+=1){var E=x[g];this.images[E]||this.fire(new l.Event("styleimagemissing",{id:E}));var k=this.images[E];k?m[E]={data:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,hasRenderCallback:Boolean(k.userImage&&k.userImage.render)}:l.warnOnce('Image "'+E+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}p(null,m)},s.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},s.prototype.getPattern=function(a){var p=this.patterns[a],m=this.getImage(a);if(!m)return null;if(p&&p.position.version===m.version)return p.position;if(p)p.position.version=m.version;else{var g={w:m.data.width+2,h:m.data.height+2,x:0,y:0},x=new l.ImagePosition(g,m);this.patterns[a]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[a].position},s.prototype.bind=function(a){var p=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(a,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var a=[];for(var p in this.patterns)a.push(this.patterns[p].bin);var m=l.potpack(a),g=m.w,x=m.h,E=this.atlasImage;for(var k in E.resize({width:g||1,height:x||1}),this.patterns){var D=this.patterns[k].bin,N=D.x+1,q=D.y+1,Z=this.images[k].data,Y=Z.width,J=Z.height;l.RGBAImage.copy(Z,E,{x:0,y:0},{x:N,y:q},{width:Y,height:J}),l.RGBAImage.copy(Z,E,{x:0,y:J-1},{x:N,y:q-1},{width:Y,height:1}),l.RGBAImage.copy(Z,E,{x:0,y:0},{x:N,y:q+J},{width:Y,height:1}),l.RGBAImage.copy(Z,E,{x:Y-1,y:0},{x:N-1,y:q},{width:1,height:J}),l.RGBAImage.copy(Z,E,{x:0,y:0},{x:N+Y,y:q},{width:1,height:J})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(a){for(var p=0,m=a;p<m.length;p+=1){var g=m[p];if(!this.callbackDispatchedThisFrame[g]){this.callbackDispatchedThisFrame[g]=!0;var x=this.images[g];re(x)&&this.updateImage(g,x)}}},s}(l.Evented),be=Ie,Re=Ie,Me=1e20;function Ie(o,s,a,p,m,g){this.fontSize=o||24,this.buffer=s===void 0?3:s,this.cutoff=p||.25,this.fontFamily=m||"sans-serif",this.fontWeight=g||"normal",this.radius=a||8;var x=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=x,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.d=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Int16Array(x),this.middle=Math.round(x/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function je(o,s,a,p,m,g,x){for(var E=0;E<s;E++){for(var k=0;k<a;k++)p[k]=o[k*s+E];for(at(p,m,g,x,a),k=0;k<a;k++)o[k*s+E]=m[k]}for(k=0;k<a;k++){for(E=0;E<s;E++)p[E]=o[k*s+E];for(at(p,m,g,x,s),E=0;E<s;E++)o[k*s+E]=Math.sqrt(m[E])}}function at(o,s,a,p,m){a[0]=0,p[0]=-Me,p[1]=+Me;for(var g=1,x=0;g<m;g++){for(var E=(o[g]+g*g-(o[a[x]]+a[x]*a[x]))/(2*g-2*a[x]);E<=p[x];)x--,E=(o[g]+g*g-(o[a[x]]+a[x]*a[x]))/(2*g-2*a[x]);a[++x]=g,p[x]=E,p[x+1]=+Me}for(g=0,x=0;g<m;g++){for(;p[x+1]<g;)x++;s[g]=(g-a[x])*(g-a[x])+o[a[x]]}}Ie.prototype.draw=function(o){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(o,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),p=0;p<this.size*this.size;p++){var m=s.data[4*p+3]/255;this.gridOuter[p]=m===1?0:m===0?Me:Math.pow(Math.max(0,.5-m),2),this.gridInner[p]=m===1?Me:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(je(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),je(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),p=0;p<this.size*this.size;p++)a[p]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[p]-this.gridInner[p])/this.radius+this.cutoff))));return a},be.default=Re;var Xe=function(o,s){this.requestManager=o,this.localIdeographFontFamily=s,this.entries={}};Xe.prototype.setURL=function(o){this.url=o},Xe.prototype.getGlyphs=function(o,s){var a=this,p=[];for(var m in o)for(var g=0,x=o[m];g<x.length;g+=1)p.push({stack:m,id:x[g]});l.asyncAll(p,function(E,k){var D=E.stack,N=E.id,q=a.entries[D];q||(q=a.entries[D]={glyphs:{},requests:{},ranges:{}});var Z=q.glyphs[N];if(Z===void 0){if(Z=a._tinySDF(q,D,N))return q.glyphs[N]=Z,void k(null,{stack:D,id:N,glyph:Z});var Y=Math.floor(N/256);if(256*Y>65535)k(new Error("glyphs > 65535 not supported"));else if(q.ranges[Y])k(null,{stack:D,id:N,glyph:Z});else{var J=q.requests[Y];J||(J=q.requests[Y]=[],Xe.loadGlyphRange(D,Y,a.url,a.requestManager,function(ie,$){if($){for(var ne in $)a._doesCharSupportLocalGlyph(+ne)||(q.glyphs[+ne]=$[+ne]);q.ranges[Y]=!0}for(var ce=0,ye=J;ce<ye.length;ce+=1)(0,ye[ce])(ie,$);delete q.requests[Y]})),J.push(function(ie,$){ie?k(ie):$&&k(null,{stack:D,id:N,glyph:$[N]||null})})}}else k(null,{stack:D,id:N,glyph:Z})},function(E,k){if(E)s(E);else if(k){for(var D={},N=0,q=k;N<q.length;N+=1){var Z=q[N],Y=Z.stack,J=Z.id,ie=Z.glyph;(D[Y]||(D[Y]={}))[J]=ie&&{id:ie.id,bitmap:ie.bitmap.clone(),metrics:ie.metrics}}s(null,D)}})},Xe.prototype._doesCharSupportLocalGlyph=function(o){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](o)||l.isChar["Hangul Syllables"](o)||l.isChar.Hiragana(o)||l.isChar.Katakana(o))},Xe.prototype._tinySDF=function(o,s,a){var p=this.localIdeographFontFamily;if(p&&this._doesCharSupportLocalGlyph(a)){var m=o.tinySDF;if(!m){var g="400";/bold/i.test(s)?g="900":/medium/i.test(s)?g="500":/light/i.test(s)&&(g="200"),m=o.tinySDF=new Xe.TinySDF(24,3,8,.25,p,g)}return{id:a,bitmap:new l.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Xe.loadGlyphRange=function(o,s,a,p,m){var g=256*s,x=g+255,E=p.transformRequest(p.normalizeGlyphsURL(a).replace("{fontstack}",o).replace("{range}",g+"-"+x),l.ResourceType.Glyphs);l.getArrayBuffer(E,function(k,D){if(k)m(k);else if(D){for(var N={},q=0,Z=l.parseGlyphPBF(D);q<Z.length;q+=1){var Y=Z[q];N[Y.id]=Y}m(null,N)}})},Xe.TinySDF=be;var _t=function(){this.specification=l.styleSpec.light.position};_t.prototype.possiblyEvaluate=function(o,s){return l.sphericalToCartesian(o.expression.evaluate(s))},_t.prototype.interpolate=function(o,s,a){return{x:l.number(o.x,s.x,a),y:l.number(o.y,s.y,a),z:l.number(o.z,s.z,a)}};var Mt=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new _t,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),bt=function(o){function s(a){o.call(this),this._transitionable=new l.Transitionable(Mt),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(a,p){if(p===void 0&&(p={}),!this._validate(l.validateLight,a,p))for(var m in a){var g=a[m];l.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-"-transition".length),g):this._transitionable.setValue(m,g)}},s.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},s.prototype._validate=function(a,p,m){return(!m||m.validate!==!1)&&l.emitValidationErrors(this,a.call(l.validateStyle,l.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},s}(l.Evented),Ct=function(o,s){this.width=o,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ct.prototype.getDash=function(o,s){var a=o.join(",")+String(s);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(o,s)),this.dashEntry[a]},Ct.prototype.getDashRanges=function(o,s,a){var p=[],m=o.length%2==1?-o[o.length-1]*a:0,g=o[0]*a,x=!0;p.push({left:m,right:g,isDash:x,zeroLength:o[0]===0});for(var E=o[0],k=1;k<o.length;k++){var D=o[k];p.push({left:m=E*a,right:g=(E+=D)*a,isDash:x=!x,zeroLength:D===0})}return p},Ct.prototype.addRoundDash=function(o,s,a){for(var p=s/2,m=-a;m<=a;m++)for(var g=this.width*(this.nextRow+a+m),x=0,E=o[x],k=0;k<this.width;k++){k/E.right>1&&(E=o[++x]);var D=Math.abs(k-E.left),N=Math.abs(k-E.right),q=Math.min(D,N),Z=void 0,Y=m/a*(p+1);if(E.isDash){var J=p-Math.abs(Y);Z=Math.sqrt(q*q+J*J)}else Z=p-Math.sqrt(q*q+Y*Y);this.data[g+k]=Math.max(0,Math.min(255,Z+128))}},Ct.prototype.addRegularDash=function(o){for(var s=o.length-1;s>=0;--s){var a=o[s],p=o[s+1];a.zeroLength?o.splice(s,1):p&&p.isDash===a.isDash&&(p.left=a.left,o.splice(s,1))}var m=o[0],g=o[o.length-1];m.isDash===g.isDash&&(m.left=g.left-this.width,g.right=m.right+this.width);for(var x=this.width*this.nextRow,E=0,k=o[E],D=0;D<this.width;D++){D/k.right>1&&(k=o[++E]);var N=Math.abs(D-k.left),q=Math.abs(D-k.right),Z=Math.min(N,q);this.data[x+D]=Math.max(0,Math.min(255,(k.isDash?Z:-Z)+128))}},Ct.prototype.addDash=function(o,s){var a=s?7:0,p=2*a+1;if(this.nextRow+p>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var m=0,g=0;g<o.length;g++)m+=o[g];if(m!==0){var x=this.width/m,E=this.getDashRanges(o,this.width,x);s?this.addRoundDash(E,x,a):this.addRegularDash(E)}var k={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:m};return this.nextRow+=p,this.dirty=!0,k},Ct.prototype.bind=function(o){var s=o.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var Ut=function o(s,a){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var p=this.workerPool.acquire(this.id),m=0;m<p.length;m++){var g=new o.Actor(p[m],a,this.id);g.name="Worker "+m,this.actors.push(g)}};function Cr(o,s,a){var p=function(m,g){if(m)return a(m);if(g){var x=l.pick(l.extend(g,o),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);g.vector_layers&&(x.vectorLayers=g.vector_layers,x.vectorLayerIds=x.vectorLayers.map(function(E){return E.id})),x.tiles=s.canonicalizeTileset(x,o.url),a(null,x)}};return o.url?l.getJSON(s.transformRequest(s.normalizeSourceURL(o.url),l.ResourceType.Source),p):l.browser.frame(function(){return p(null,o)})}Ut.prototype.broadcast=function(o,s,a){l.asyncAll(this.actors,function(p,m){p.send(o,s,m)},a=a||function(){})},Ut.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ut.prototype.remove=function(){this.actors.forEach(function(o){o.remove()}),this.actors=[],this.workerPool.release(this.id)},Ut.Actor=l.Actor;var Ir=function(o,s,a){this.bounds=l.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=s||0,this.maxzoom=a||24};Ir.prototype.validateBounds=function(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]},Ir.prototype.contains=function(o){var s=Math.pow(2,o.z),a=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*s),p=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*s),m=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*s),g=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*s);return o.x>=a&&o.x<m&&o.y>=p&&o.y<g};var Fn=function(o){function s(a,p,m,g){if(o.call(this),this.id=a,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(p,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Cr(this._options,this.map._requestManager,function(p,m){a._tileJSONRequest=null,a._loaded=!0,p?a.fire(new l.ErrorEvent(p)):m&&(l.extend(a,m),m.bounds&&(a.tileBounds=new Ir(m.bounds,a.minzoom,a.maxzoom)),l.postTurnstileEvent(m.tiles,a.map._requestManager._customAccessToken),l.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(a){var p=this;return this.setSourceProperty(function(){p._options.tiles=a}),this},s.prototype.setUrl=function(a){var p=this;return this.setSourceProperty(function(){p.url=a,p._options.url=a}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return l.extend({},this._options)},s.prototype.loadTile=function(a,p){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(m,l.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(E,k){return delete a.request,a.aborted?p(null):E&&E.status!==404?p(E):(k&&k.resourceTiming&&(a.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&a.setExpiryData(k),a.loadVectorData(k,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),p(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=p:a.request=a.actor.send("reloadTile",g,x.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",g,x.bind(this)))},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(l.Evented),Qt=function(o){function s(a,p,m,g){o.call(this),this.id=a,this.dispatcher=m,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},p),l.extend(this,l.pick(p,["url","scheme","tileSize"]))}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Cr(this._options,this.map._requestManager,function(p,m){a._tileJSONRequest=null,a._loaded=!0,p?a.fire(new l.ErrorEvent(p)):m&&(l.extend(a,m),m.bounds&&(a.tileBounds=new Ir(m.bounds,a.minzoom,a.maxzoom)),l.postTurnstileEvent(m.tiles),l.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return l.extend({},this._options)},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.loadTile=function(a,p){var m=this,g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=l.getImage(this.map._requestManager.transformRequest(g,l.ResourceType.Tile),function(x,E){if(delete a.request,a.aborted)a.state="unloaded",p(null);else if(x)a.state="errored",p(x);else if(E){m.map._refreshExpiredTiles&&a.setExpiryData(E),delete E.cacheControl,delete E.expires;var k=m.map.painter.context,D=k.gl;a.texture=m.map.painter.getTileTexture(E.width),a.texture?a.texture.update(E,{useMipmap:!0}):(a.texture=new l.Texture(k,E,D.RGBA,{useMipmap:!0}),a.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&D.texParameterf(D.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),a.state="loaded",l.cacheEntryPossiblyAdded(m.dispatcher),p(null)}})},s.prototype.abortTile=function(a,p){a.request&&(a.request.cancel(),delete a.request),p()},s.prototype.unloadTile=function(a,p){a.texture&&this.map.painter.saveTileTexture(a.texture),p()},s.prototype.hasTransition=function(){return!1},s}(l.Evented),Bn=function(o){function s(a,p,m,g){o.call(this,a,p,m,g),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox"}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(a,p){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function g(x,E){x&&(a.state="errored",p(x)),E&&(a.dem=E,a.needsHillshadePrepare=!0,a.state="loaded",p(null))}a.request=l.getImage(this.map._requestManager.transformRequest(m,l.ResourceType.Tile),function(x,E){if(delete a.request,a.aborted)a.state="unloaded",p(null);else if(x)a.state="errored",p(x);else if(E){this.map._refreshExpiredTiles&&a.setExpiryData(E),delete E.cacheControl,delete E.expires;var k=l.window.ImageBitmap&&E instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?E:l.browser.getImageData(E,1),D={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:k,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",D,g.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},s.prototype._getNeighboringTiles=function(a){var p=a.canonical,m=Math.pow(2,p.z),g=(p.x-1+m)%m,x=p.x===0?a.wrap-1:a.wrap,E=(p.x+1+m)%m,k=p.x+1===m?a.wrap+1:a.wrap,D={};return D[new l.OverscaledTileID(a.overscaledZ,x,p.z,g,p.y).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,k,p.z,E,p.y).key]={backfilled:!1},p.y>0&&(D[new l.OverscaledTileID(a.overscaledZ,x,p.z,g,p.y-1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,a.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,k,p.z,E,p.y-1).key]={backfilled:!1}),p.y+1<m&&(D[new l.OverscaledTileID(a.overscaledZ,x,p.z,g,p.y+1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,a.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,k,p.z,E,p.y+1).key]={backfilled:!1}),D},s.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},s}(Qt),Gt=function(o){function s(a,p,m,g){o.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(g),this._data=p.data,this._options=l.extend({},p),this._collectResourceTiming=p.collectResourceTiming,this._resourceTiming=[],p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;var x=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*x,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*x,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?Math.min(p.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:l.EXTENT,radius:(p.clusterRadius||50)*x,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(p){if(p)a.fire(new l.ErrorEvent(p));else{var m={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(m.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new l.Event("data",m))}})},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setData=function(a){var p=this;return this._data=a,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)p.fire(new l.ErrorEvent(m));else{var g={dataType:"source",sourceDataType:"content"};p._collectResourceTiming&&p._resourceTiming&&p._resourceTiming.length>0&&(g.resourceTiming=p._resourceTiming,p._resourceTiming=[]),p.fire(new l.Event("data",g))}}),this},s.prototype.getClusterExpansionZoom=function(a,p){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},p),this},s.prototype.getClusterChildren=function(a,p){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},p),this},s.prototype.getClusterLeaves=function(a,p,m,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:p,offset:m},g),this},s.prototype._updateWorkerData=function(a){var p=this;this._loaded=!1;var m=l.extend({},this.workerOptions),g=this._data;typeof g=="string"?(m.request=this.map._requestManager.transformRequest(l.browser.resolveURL(g),l.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(g),this.actor.send(this.type+".loadData",m,function(x,E){p._removed||E&&E.abandoned||(p._loaded=!0,E&&E.resourceTiming&&E.resourceTiming[p.id]&&(p._resourceTiming=E.resourceTiming[p.id].slice(0)),p.actor.send(p.type+".coalesce",{source:m.source},null),a(x))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(a,p){var m=this,g=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(g,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(x,E){return delete a.request,a.unloadVectorData(),a.aborted?p(null):x?p(x):(a.loadVectorData(E,m.map.painter,g==="reloadTile"),p(null))})},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},s.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(l.Evented),Ye=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),zt=function(o){function s(a,p,m,g){o.call(this),this.id=a,this.dispatcher=m,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=p}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(a,p){var m=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(g,x){m._loaded=!0,g?m.fire(new l.ErrorEvent(g)):x&&(m.image=x,a&&(m.coordinates=a),p&&p(),m._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(a){var p=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){p.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setCoordinates=function(a){var p=this;this.coordinates=a;var m=a.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(x){for(var E=1/0,k=1/0,D=-1/0,N=-1/0,q=0,Z=x;q<Z.length;q+=1){var Y=Z[q];E=Math.min(E,Y.x),k=Math.min(k,Y.y),D=Math.max(D,Y.x),N=Math.max(N,Y.y)}var J=Math.max(D-E,N-k),ie=Math.max(0,Math.floor(-Math.log(J)/Math.LN2)),$=Math.pow(2,ie);return new l.CanonicalTileID(ie,Math.floor((E+D)/2*$),Math.floor((k+N)/2*$))}(m),this.minzoom=this.maxzoom=this.tileID.z;var g=m.map(function(x){return p.tileID.getTilePoint(x)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(g[2].x,g[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,p=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(a,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[m];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},s.prototype.loadTile=function(a,p){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},p(null)):(a.state="errored",p(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(l.Evented),Xt=function(o){function s(a,p,m,g){o.call(this,a,p,m,g),this.roundZoom=!0,this.type="video",this.options=p}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1;var p=this.options;this.urls=[];for(var m=0,g=p.urls;m<g.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(g[m],l.ResourceType.Source).url);l.getVideo(this.urls,function(x,E){a._loaded=!0,x?a.fire(new l.ErrorEvent(x)):E&&(a.video=E,a.video.loop=!0,a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(a){if(this.video){var p=this.video.seekable;a<p.start(0)||a>p.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+p.start(0)+" and "+p.end(0)+"-second mark."))):this.video.currentTime=a}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,p=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(a,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[m];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(zt),Rr=function(o){function s(a,p,m,g){o.call(this,a,p,m,g),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(function(x){return!Array.isArray(x)||x.length!==2||x.some(function(E){return typeof E!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var p=this.map.painter.context,m=p.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(p,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var a=0,p=[this.canvas.width,this.canvas.height];a<p.length;a+=1){var m=p[a];if(isNaN(m)||m<=0)return!0}return!1},s}(zt),Gr={vector:Fn,raster:Qt,"raster-dem":Bn,geojson:Gt,video:Xt,image:zt,canvas:Rr};function fo(o,s){var a=l.identity([]);return l.translate(a,a,[1,1,0]),l.scale(a,a,[.5*o.width,.5*o.height,1]),l.multiply(a,a,o.calculatePosMatrix(s.toUnwrapped()))}function en(o,s,a,p,m,g){var x=function(ie,$,ne){if(ie)for(var ce=0,ye=ie;ce<ye.length;ce+=1){var ke=$[ye[ce]];if(ke&&ke.source===ne&&ke.type==="fill-extrusion")return!0}else for(var Se in $){var ze=$[Se];if(ze.source===ne&&ze.type==="fill-extrusion")return!0}return!1}(m&&m.layers,s,o.id),E=g.maxPitchScaleFactor(),k=o.tilesIn(p,E,x);k.sort(si);for(var D=[],N=0,q=k;N<q.length;N+=1){var Z=q[N];D.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(s,a,o._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,m,g,E,fo(o.transform,Z.tileID))})}var Y=function(ie){for(var $={},ne={},ce=0,ye=ie;ce<ye.length;ce+=1){var ke=ye[ce],Se=ke.queryResults,ze=ke.wrappedTileID,Ne=ne[ze]=ne[ze]||{};for(var He in Se)for(var We=Se[He],lt=Ne[He]=Ne[He]||{},Et=$[He]=$[He]||[],At=0,kt=We;At<kt.length;At+=1){var mr=kt[At];lt[mr.featureIndex]||(lt[mr.featureIndex]=!0,Et.push(mr))}}return $}(D);for(var J in Y)Y[J].forEach(function(ie){var $=ie.feature,ne=o.getFeatureState($.layer["source-layer"],$.id);$.source=$.layer.source,$.layer["source-layer"]&&($.sourceLayer=$.layer["source-layer"]),$.state=ne});return Y}function si(o,s){var a=o.tileID,p=s.tileID;return a.overscaledZ-p.overscaledZ||a.canonical.y-p.canonical.y||a.wrap-p.wrap||a.canonical.x-p.canonical.x}var cr=function(o,s){this.max=o,this.onRemove=s,this.reset()};cr.prototype.reset=function(){for(var o in this.data)for(var s=0,a=this.data[o];s<a.length;s+=1){var p=a[s];p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value)}return this.data={},this.order=[],this},cr.prototype.add=function(o,s,a){var p=this,m=o.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var g={value:s,timeout:void 0};if(a!==void 0&&(g.timeout=setTimeout(function(){p.remove(o,g)},a)),this.data[m].push(g),this.order.push(m),this.order.length>this.max){var x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this},cr.prototype.has=function(o){return o.wrapped().key in this.data},cr.prototype.getAndRemove=function(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null},cr.prototype._getAndRemoveByKey=function(o){var s=this.data[o].shift();return s.timeout&&clearTimeout(s.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),s.value},cr.prototype.getByKey=function(o){var s=this.data[o];return s?s[0].value:null},cr.prototype.get=function(o){return this.has(o)?this.data[o.wrapped().key][0].value:null},cr.prototype.remove=function(o,s){if(!this.has(o))return this;var a=o.wrapped().key,p=s===void 0?0:this.data[a].indexOf(s),m=this.data[a][p];return this.data[a].splice(p,1),m.timeout&&clearTimeout(m.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(m.value),this.order.splice(this.order.indexOf(a),1),this},cr.prototype.setMaxSize=function(o){for(this.max=o;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},cr.prototype.filter=function(o){var s=[];for(var a in this.data)for(var p=0,m=this.data[a];p<m.length;p+=1){var g=m[p];o(g.value)||s.push(g)}for(var x=0,E=s;x<E.length;x+=1){var k=E[x];this.remove(k.value.tileID,k)}};var Io=function(o,s,a){this.context=o;var p=o.gl;this.buffer=p.createBuffer(),this.dynamicDraw=Boolean(a),this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Io.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Io.prototype.updateData=function(o){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)},Io.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var rs={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Hn=function(o,s,a,p){this.length=s.length,this.attributes=a,this.itemSize=s.bytesPerElement,this.dynamicDraw=p,this.context=o;var m=o.gl;this.buffer=m.createBuffer(),o.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Hn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Hn.prototype.updateData=function(o){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,o.arrayBuffer)},Hn.prototype.enableAttributes=function(o,s){for(var a=0;a<this.attributes.length;a++){var p=s.attributes[this.attributes[a].name];p!==void 0&&o.enableVertexAttribArray(p)}},Hn.prototype.setVertexAttribPointers=function(o,s,a){for(var p=0;p<this.attributes.length;p++){var m=this.attributes[p],g=s.attributes[m.name];g!==void 0&&o.vertexAttribPointer(g,m.components,o[rs[m.type]],!1,this.itemSize,m.offset+this.itemSize*(a||0))}},Hn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var er=function(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};er.prototype.get=function(){return this.current},er.prototype.set=function(o){},er.prototype.getDefault=function(){return this.default},er.prototype.setDefault=function(){this.set(this.default)};var Vi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return l.Color.transparent},s.prototype.set=function(a){var p=this.current;(a.r!==p.r||a.g!==p.g||a.b!==p.b||a.a!==p.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(er),on=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},s}(er),An=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},s}(er),Xu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||a[3]!==p[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(er),qi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},s}(er),As=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},s}(er),cn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(a){var p=this.current;(a.func!==p.func||a.ref!==p.ref||a.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},s}(er),za=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},s.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},s}(er),ko=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=a,this.dirty=!1}},s}(er),Ci=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},s}(er),mi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=a,this.dirty=!1}},s}(er),ca=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},s}(er),Zi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.BLEND):p.disable(p.BLEND),this.current=a,this.dirty=!1}},s}(er),Ms=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},s.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},s}(er),ns=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return l.Color.transparent},s.prototype.set=function(a){var p=this.current;(a.r!==p.r||a.g!==p.g||a.b!==p.b||a.a!==p.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(er),La=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},s}(er),Mn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=a,this.dirty=!1}},s}(er),Gi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},s}(er),Wi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},s}(er),Xn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},s}(er),zs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},s}(er),Ao=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},s.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||a[3]!==p[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(er),Un=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},s}(er),tr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(er),Ls=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindTexture(p.TEXTURE_2D,a),this.current=a,this.dirty=!1}},s}(er),uu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},s}(er),Da=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){var p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},s}(er),$i=function(o){function s(a){o.call(this,a),this.vao=a.extVertexArrayObject}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},s}(er),$o=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},s}(er),Mr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},s}(er),is=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},s}(er),zr=function(o){function s(a,p){o.call(this,a),this.context=a,this.parent=p}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(er),L=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},s}(zr),O=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(zr),B=function(o,s,a,p){this.context=o,this.width=s,this.height=a;var m=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new L(o,m),p&&(this.depthAttachment=new O(o,m))};B.prototype.destroy=function(){var o=this.context.gl,s=this.colorAttachment.get();if(s&&o.deleteTexture(s),this.depthAttachment){var a=this.depthAttachment.get();a&&o.deleteRenderbuffer(a)}o.deleteFramebuffer(this.framebuffer)};var G=function(o,s,a){this.func=o,this.mask=s,this.range=a};G.ReadOnly=!1,G.ReadWrite=!0,G.disabled=new G(519,G.ReadOnly,[0,1]);var X=function(o,s,a,p,m,g){this.test=o,this.ref=s,this.mask=a,this.fail=p,this.depthFail=m,this.pass=g};X.disabled=new X({func:519,mask:0},0,0,7680,7680,7680);var ue=function(o,s,a){this.blendFunction=o,this.blendColor=s,this.mask=a};ue.disabled=new ue(ue.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),ue.unblended=new ue(ue.Replace,l.Color.transparent,[!0,!0,!0,!0]),ue.alphaBlended=new ue([1,771],l.Color.transparent,[!0,!0,!0,!0]);var pe=function(o,s,a){this.enable=o,this.mode=s,this.frontFace=a};pe.disabled=new pe(!1,1029,2305),pe.backCCW=new pe(!0,1029,2305);var V=function(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Vi(this),this.clearDepth=new on(this),this.clearStencil=new An(this),this.colorMask=new Xu(this),this.depthMask=new qi(this),this.stencilMask=new As(this),this.stencilFunc=new cn(this),this.stencilOp=new za(this),this.stencilTest=new ko(this),this.depthRange=new Ci(this),this.depthTest=new mi(this),this.depthFunc=new ca(this),this.blend=new Zi(this),this.blendFunc=new Ms(this),this.blendColor=new ns(this),this.blendEquation=new La(this),this.cullFace=new Mn(this),this.cullFaceSide=new Gi(this),this.frontFace=new Wi(this),this.program=new Xn(this),this.activeTexture=new zs(this),this.viewport=new Ao(this),this.bindFramebuffer=new Un(this),this.bindRenderbuffer=new tr(this),this.bindTexture=new Ls(this),this.bindVertexBuffer=new uu(this),this.bindElementBuffer=new Da(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new $i(this),this.pixelStoreUnpack=new $o(this),this.pixelStoreUnpackPremultiplyAlpha=new Mr(this),this.pixelStoreUnpackFlipY=new is(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)};V.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},V.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},V.prototype.createIndexBuffer=function(o,s){return new Io(this,o,s)},V.prototype.createVertexBuffer=function(o,s,a){return new Hn(this,o,s,a)},V.prototype.createRenderbuffer=function(o,s,a){var p=this.gl,m=p.createRenderbuffer();return this.bindRenderbuffer.set(m),p.renderbufferStorage(p.RENDERBUFFER,o,s,a),this.bindRenderbuffer.set(null),m},V.prototype.createFramebuffer=function(o,s,a){return new B(this,o,s,a)},V.prototype.clear=function(o){var s=o.color,a=o.depth,p=this.gl,m=0;s&&(m|=p.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(m|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),p.clear(m)},V.prototype.setCullFace=function(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))},V.prototype.setDepthMode=function(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)},V.prototype.setStencilMode=function(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)},V.prototype.setColorMode=function(o){l.deepEqual(o.blendFunction,ue.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)},V.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Q=function(o){function s(a,p,m){var g=this;o.call(this),this.id=a,this.dispatcher=m,this.on("data",function(x){x.dataType==="source"&&x.sourceDataType==="metadata"&&(g._sourceLoaded=!0),g._sourceLoaded&&!g._paused&&x.dataType==="source"&&x.sourceDataType==="content"&&(g.reload(),g.transform&&g.update(g.transform))}),this.on("error",function(){g._sourceErrored=!0}),this._source=function(x,E,k,D){var N=new Gr[E.type](x,E,k,D);if(N.id!==x)throw new Error("Expected Source id to be "+x+" instead of "+N.id);return l.bindAll(["load","abort","unload","serialize","prepare"],N),N}(a,p,m,this),this._tiles={},this._cache=new cr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},s.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var p=this._tiles[a];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(a,p){return this._source.loadTile(a,p)},s.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},s.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(a){for(var p in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[p];m.upload(a),m.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return l.values(this._tiles).map(function(a){return a.tileID}).sort(me).map(function(a){return a.key})},s.prototype.getRenderableIds=function(a){var p=this,m=[];for(var g in this._tiles)this._isIdRenderable(g,a)&&m.push(this._tiles[g]);return a?m.sort(function(x,E){var k=x.tileID,D=E.tileID,N=new l.Point(k.canonical.x,k.canonical.y)._rotate(p.transform.angle),q=new l.Point(D.canonical.x,D.canonical.y)._rotate(p.transform.angle);return k.overscaledZ-D.overscaledZ||q.y-N.y||q.x-N.x}).map(function(x){return x.tileID.key}):m.map(function(x){return x.tileID}).sort(me).map(function(x){return x.key})},s.prototype.hasRenderableParent=function(a){var p=this.findLoadedParent(a,0);return!!p&&this._isIdRenderable(p.tileID.key)},s.prototype._isIdRenderable=function(a,p){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(p||!this._tiles[a].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},s.prototype._reloadTile=function(a,p){var m=this._tiles[a];m&&(m.state!=="loading"&&(m.state=p),this._loadTile(m,this._tileLoaded.bind(this,m,a,p)))},s.prototype._tileLoaded=function(a,p,m,g){if(g)return a.state="errored",void(g.status!==404?this._source.fire(new l.ErrorEvent(g,{tile:a})):this.update(this.transform));a.timeAdded=l.browser.now(),m==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(p,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},s.prototype._backfillDEM=function(a){for(var p=this.getRenderableIds(),m=0;m<p.length;m++){var g=p[m];if(a.neighboringTiles&&a.neighboringTiles[g]){var x=this.getTileByID(g);E(a,x),E(x,a)}}function E(k,D){k.needsHillshadePrepare=!0;var N=D.tileID.canonical.x-k.tileID.canonical.x,q=D.tileID.canonical.y-k.tileID.canonical.y,Z=Math.pow(2,k.tileID.canonical.z),Y=D.tileID.key;N===0&&q===0||Math.abs(q)>1||(Math.abs(N)>1&&(Math.abs(N+Z)===1?N+=Z:Math.abs(N-Z)===1&&(N-=Z)),D.dem&&k.dem&&(k.dem.backfillBorder(D.dem,N,q),k.neighboringTiles&&k.neighboringTiles[Y]&&(k.neighboringTiles[Y].backfilled=!0)))}},s.prototype.getTile=function(a){return this.getTileByID(a.key)},s.prototype.getTileByID=function(a){return this._tiles[a]},s.prototype._retainLoadedChildren=function(a,p,m,g){for(var x in this._tiles){var E=this._tiles[x];if(!(g[x]||!E.hasData()||E.tileID.overscaledZ<=p||E.tileID.overscaledZ>m)){for(var k=E.tileID;E&&E.tileID.overscaledZ>p+1;){var D=E.tileID.scaledTo(E.tileID.overscaledZ-1);(E=this._tiles[D.key])&&E.hasData()&&(k=D)}for(var N=k;N.overscaledZ>p;)if(a[(N=N.scaledTo(N.overscaledZ-1)).key]){g[k.key]=k;break}}}},s.prototype.findLoadedParent=function(a,p){if(a.key in this._loadedParentTiles){var m=this._loadedParentTiles[a.key];return m&&m.tileID.overscaledZ>=p?m:null}for(var g=a.overscaledZ-1;g>=p;g--){var x=a.scaledTo(g),E=this._getLoadedTile(x);if(E)return E}},s.prototype._getLoadedTile=function(a){var p=this._tiles[a.key];return p&&p.hasData()?p:this._cache.getByKey(a.wrapped().key)},s.prototype.updateCacheSize=function(a){var p=Math.ceil(a.width/this._source.tileSize)+1,m=Math.ceil(a.height/this._source.tileSize)+1,g=Math.floor(p*m*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)},s.prototype.handleWrapJump=function(a){var p=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,p){var m={};for(var g in this._tiles){var x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+p),m[x.tileID.key]=x}for(var E in this._tiles=m,this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(var k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}},s.prototype.update=function(a){var p=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ne){return new l.OverscaledTileID(Ne.canonical.z,Ne.wrap,Ne.canonical.z,Ne.canonical.x,Ne.canonical.y)}):(m=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(Ne){return p._source.hasTile(Ne)}))):m=[];var g=a.coveringZoomLevel(this._source),x=Math.max(g-s.maxOverzooming,this._source.minzoom),E=Math.max(g+s.maxUnderzooming,this._source.minzoom),k=this._updateRetainedTiles(m,g);if(Ue(this._source.type)){for(var D={},N={},q=0,Z=Object.keys(k);q<Z.length;q+=1){var Y=Z[q],J=k[Y],ie=this._tiles[Y];if(ie&&!(ie.fadeEndTime&&ie.fadeEndTime<=l.browser.now())){var $=this.findLoadedParent(J,x);$&&(this._addTile($.tileID),D[$.tileID.key]=$.tileID),N[Y]=J}}for(var ne in this._retainLoadedChildren(N,g,E,k),D)k[ne]||(this._coveredTiles[ne]=!0,k[ne]=D[ne])}for(var ce in k)this._tiles[ce].clearFadeHold();for(var ye=0,ke=l.keysDifference(this._tiles,k);ye<ke.length;ye+=1){var Se=ke[ye],ze=this._tiles[Se];ze.hasSymbolBuckets&&!ze.holdingForFade()?ze.setHoldDuration(this.map._fadeDuration):ze.hasSymbolBuckets&&!ze.symbolFadeFinished()||this._removeTile(Se)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},s.prototype._updateRetainedTiles=function(a,p){for(var m={},g={},x=Math.max(p-s.maxOverzooming,this._source.minzoom),E=Math.max(p+s.maxUnderzooming,this._source.minzoom),k={},D=0,N=a;D<N.length;D+=1){var q=N[D],Z=this._addTile(q);m[q.key]=q,Z.hasData()||p<this._source.maxzoom&&(k[q.key]=q)}this._retainLoadedChildren(k,p,E,m);for(var Y=0,J=a;Y<J.length;Y+=1){var ie=J[Y],$=this._tiles[ie.key];if(!$.hasData()){if(p+1>this._source.maxzoom){var ne=ie.children(this._source.maxzoom)[0],ce=this.getTile(ne);if(ce&&ce.hasData()){m[ne.key]=ne;continue}}else{var ye=ie.children(this._source.maxzoom);if(m[ye[0].key]&&m[ye[1].key]&&m[ye[2].key]&&m[ye[3].key])continue}for(var ke=$.wasRequested(),Se=ie.overscaledZ-1;Se>=x;--Se){var ze=ie.scaledTo(Se);if(g[ze.key]||(g[ze.key]=!0,!($=this.getTile(ze))&&ke&&($=this._addTile(ze)),$&&(m[ze.key]=ze,ke=$.wasRequested(),$.hasData())))break}}}return m},s.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var p=[],m=void 0,g=this._tiles[a].tileID;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){m=this._loadedParentTiles[g.key];break}p.push(g.key);var x=g.scaledTo(g.overscaledZ-1);if(m=this._getLoadedTile(x))break;g=x}for(var E=0,k=p;E<k.length;E+=1)this._loadedParentTiles[k[E]]=m}},s.prototype._addTile=function(a){var p=this._tiles[a.key];if(p)return p;(p=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,p),p.tileID=a,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,p)));var m=Boolean(p);return m||(p=new l.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(p,this._tileLoaded.bind(this,p,a.key,p.state))),p?(p.uses++,this._tiles[a.key]=p,m||this._source.fire(new l.Event("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p):null},s.prototype._setTileReloadTimer=function(a,p){var m=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var g=p.getExpiryTimeout();g&&(this._timers[a]=setTimeout(function(){m._reloadTile(a,"expired"),delete m._timers[a]},g))},s.prototype._removeTile=function(a){var p=this._tiles[a];p&&(p.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))},s.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},s.prototype.tilesIn=function(a,p,m){var g=this,x=[],E=this.transform;if(!E)return x;for(var k=m?E.getCameraQueryGeometry(a):a,D=a.map(function(Se){return E.pointCoordinate(Se)}),N=k.map(function(Se){return E.pointCoordinate(Se)}),q=this.getIds(),Z=1/0,Y=1/0,J=-1/0,ie=-1/0,$=0,ne=N;$<ne.length;$+=1){var ce=ne[$];Z=Math.min(Z,ce.x),Y=Math.min(Y,ce.y),J=Math.max(J,ce.x),ie=Math.max(ie,ce.y)}for(var ye=function(Se){var ze=g._tiles[q[Se]];if(!ze.holdingForFade()){var Ne=ze.tileID,He=Math.pow(2,E.zoom-ze.tileID.overscaledZ),We=p*ze.queryPadding*l.EXTENT/ze.tileSize/He,lt=[Ne.getTilePoint(new l.MercatorCoordinate(Z,Y)),Ne.getTilePoint(new l.MercatorCoordinate(J,ie))];if(lt[0].x-We<l.EXTENT&&lt[0].y-We<l.EXTENT&&lt[1].x+We>=0&&lt[1].y+We>=0){var Et=D.map(function(kt){return Ne.getTilePoint(kt)}),At=N.map(function(kt){return Ne.getTilePoint(kt)});x.push({tile:ze,tileID:Ne,queryGeometry:Et,cameraQueryGeometry:At,scale:He})}}},ke=0;ke<q.length;ke++)ye(ke);return x},s.prototype.getVisibleCoordinates=function(a){for(var p=this,m=this.getRenderableIds(a).map(function(k){return p._tiles[k].tileID}),g=0,x=m;g<x.length;g+=1){var E=x[g];E.posMatrix=this.transform.calculatePosMatrix(E.toUnwrapped())}return m},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ue(this._source.type))for(var a in this._tiles){var p=this._tiles[a];if(p.fadeEndTime!==void 0&&p.fadeEndTime>=l.browser.now())return!0}return!1},s.prototype.setFeatureState=function(a,p,m){this._state.updateState(a=a||"_geojsonTileLayer",p,m)},s.prototype.removeFeatureState=function(a,p,m){this._state.removeFeatureState(a=a||"_geojsonTileLayer",p,m)},s.prototype.getFeatureState=function(a,p){return this._state.getState(a=a||"_geojsonTileLayer",p)},s.prototype.setDependencies=function(a,p,m){var g=this._tiles[a];g&&g.setDependencies(p,m)},s.prototype.reloadTilesForDependencies=function(a,p){for(var m in this._tiles)this._tiles[m].hasDependency(a,p)&&this._reloadTile(m,"reloading");this._cache.filter(function(g){return!g.hasDependency(a,p)})},s}(l.Evented);function me(o,s){var a=Math.abs(2*o.wrap)-+(o.wrap<0),p=Math.abs(2*s.wrap)-+(s.wrap<0);return o.overscaledZ-s.overscaledZ||p-a||s.canonical.y-o.canonical.y||s.canonical.x-o.canonical.x}function Ue(o){return o==="raster"||o==="image"||o==="video"}function qe(){return new l.window.Worker(ic.workerUrl)}Q.maxOverzooming=10,Q.maxUnderzooming=3;var Pe="mapboxgl_preloaded_worker_pool",Ve=function(){this.active={}};Ve.prototype.acquire=function(o){if(!this.workers)for(this.workers=[];this.workers.length<Ve.workerCount;)this.workers.push(new qe);return this.active[o]=!0,this.workers.slice()},Ve.prototype.release=function(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Ve.prototype.isPreloaded=function(){return!!this.active[Pe]},Ve.prototype.numActive=function(){return Object.keys(this.active).length};var pt,st=Math.floor(l.browser.hardwareConcurrency/2);function Ae(){return pt||(pt=new Ve),pt}function tt(o,s){var a={};for(var p in o)p!=="ref"&&(a[p]=o[p]);return l.refProperties.forEach(function(m){m in s&&(a[m]=s[m])}),a}function Je(o){o=o.slice();for(var s=Object.create(null),a=0;a<o.length;a++)s[o[a].id]=o[a];for(var p=0;p<o.length;p++)"ref"in o[p]&&(o[p]=tt(o[p],s[o[p].ref]));return o}Ve.workerCount=Math.max(Math.min(st,6),1);var Qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Wt(o,s,a){a.push({command:Qe.addSource,args:[o,s[o]]})}function rt(o,s,a){s.push({command:Qe.removeSource,args:[o]}),a[o]=!0}function or(o,s,a,p){rt(o,a,p),Wt(o,s,a)}function kr(o,s,a){var p;for(p in o[a])if(o[a].hasOwnProperty(p)&&p!=="data"&&!l.deepEqual(o[a][p],s[a][p]))return!1;for(p in s[a])if(s[a].hasOwnProperty(p)&&p!=="data"&&!l.deepEqual(o[a][p],s[a][p]))return!1;return!0}function Rt(o,s,a,p,m,g){var x;for(x in s=s||{},o=o||{})o.hasOwnProperty(x)&&(l.deepEqual(o[x],s[x])||a.push({command:g,args:[p,x,s[x],m]}));for(x in s)s.hasOwnProperty(x)&&!o.hasOwnProperty(x)&&(l.deepEqual(o[x],s[x])||a.push({command:g,args:[p,x,s[x],m]}))}function hr(o){return o.id}function ur(o,s){return o[s.id]=s,o}var Nn=function(o,s){this.reset(o,s)};Nn.prototype.reset=function(o,s){this.points=o||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Nn.prototype.lerp=function(o){if(this.points.length===1)return this.points[0];o=l.clamp(o,0,1);for(var s=1,a=this._distances[s],p=o*this.paddedLength+this.padding;a<p&&s<this._distances.length;)a=this._distances[++s];var m=s-1,g=this._distances[m],x=a-g,E=x>0?(p-g)/x:0;return this.points[m].mult(1-E).add(this.points[s].mult(E))};var vr=function(o,s,a){var p=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(o/a),this.yCellCount=Math.ceil(s/a);for(var g=0;g<this.xCellCount*this.yCellCount;g++)p.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=s,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function tn(o,s,a,p,m){var g=l.create();return s?(l.scale(g,g,[1/m,1/m,1]),a||l.rotateZ(g,g,p.angle)):l.multiply(g,p.labelPlaneMatrix,o),g}function Sr(o,s,a,p,m){if(s){var g=l.clone(o);return l.scale(g,g,[m,m,1]),a||l.rotateZ(g,g,-p.angle),g}return p.glCoordMatrix}function Dt(o,s){var a=[o.x,o.y,0,1];zn(a,a,s);var p=a[3];return{point:new l.Point(a[0]/p,a[1]/p),signedDistanceFromCamera:p}}function fr(o,s){return .5+o/s*.5}function ui(o,s){var a=o[0]/o[3],p=o[1]/o[3];return a>=-s[0]&&a<=s[0]&&p>=-s[1]&&p<=s[1]}function Hi(o,s,a,p,m,g,x,E){var k=p?o.textSizeData:o.iconSizeData,D=l.evaluateSizeForZoom(k,a.transform.zoom),N=[256/a.width*2+1,256/a.height*2+1],q=p?o.text.dynamicLayoutVertexArray:o.icon.dynamicLayoutVertexArray;q.clear();for(var Z=o.lineVertexArray,Y=p?o.text.placedSymbolArray:o.icon.placedSymbolArray,J=a.transform.width/a.transform.height,ie=!1,$=0;$<Y.length;$++){var ne=Y.get($);if(ne.hidden||ne.writingMode===l.WritingMode.vertical&&!ie)ii(ne.numGlyphs,q);else{ie=!1;var ce=[ne.anchorX,ne.anchorY,0,1];if(l.transformMat4(ce,ce,s),ui(ce,N)){var ye=fr(a.transform.cameraToCenterDistance,ce[3]),ke=l.evaluateSizeForFeature(k,D,ne),Se=x?ke/ye:ke*ye,ze=new l.Point(ne.anchorX,ne.anchorY),Ne=Dt(ze,m).point,He={},We=Ho(ne,Se,!1,E,s,m,g,o.glyphOffsetArray,Z,q,Ne,ze,He,J);ie=We.useVertical,(We.notEnoughRoom||ie||We.needsFlipping&&Ho(ne,Se,!0,E,s,m,g,o.glyphOffsetArray,Z,q,Ne,ze,He,J).notEnoughRoom)&&ii(ne.numGlyphs,q)}else ii(ne.numGlyphs,q)}}p?o.text.dynamicLayoutVertexBuffer.updateData(q):o.icon.dynamicLayoutVertexBuffer.updateData(q)}function Nr(o,s,a,p,m,g,x,E,k,D,N){var q=E.glyphStartIndex+E.numGlyphs,Z=E.lineStartIndex,Y=E.lineStartIndex+E.lineLength,J=s.getoffsetX(E.glyphStartIndex),ie=s.getoffsetX(q-1),$=rn(o*J,a,p,m,g,x,E.segment,Z,Y,k,D,N);if(!$)return null;var ne=rn(o*ie,a,p,m,g,x,E.segment,Z,Y,k,D,N);return ne?{first:$,last:ne}:null}function Kn(o,s,a,p){return o===l.WritingMode.horizontal&&Math.abs(a.y-s.y)>Math.abs(a.x-s.x)*p?{useVertical:!0}:(o===l.WritingMode.vertical?s.y<a.y:s.x>a.x)?{needsFlipping:!0}:null}function Ho(o,s,a,p,m,g,x,E,k,D,N,q,Z,Y){var J,ie=s/24,$=o.lineOffsetX*ie,ne=o.lineOffsetY*ie;if(o.numGlyphs>1){var ce=o.glyphStartIndex+o.numGlyphs,ye=o.lineStartIndex,ke=o.lineStartIndex+o.lineLength,Se=Nr(ie,E,$,ne,a,N,q,o,k,g,Z);if(!Se)return{notEnoughRoom:!0};var ze=Dt(Se.first.point,x).point,Ne=Dt(Se.last.point,x).point;if(p&&!a){var He=Kn(o.writingMode,ze,Ne,Y);if(He)return He}J=[Se.first];for(var We=o.glyphStartIndex+1;We<ce-1;We++)J.push(rn(ie*E.getoffsetX(We),$,ne,a,N,q,o.segment,ye,ke,k,g,Z));J.push(Se.last)}else{if(p&&!a){var lt=Dt(q,m).point,Et=o.lineStartIndex+o.segment+1,At=new l.Point(k.getx(Et),k.gety(Et)),kt=Dt(At,m),mr=kt.signedDistanceFromCamera>0?kt.point:mo(q,At,lt,1,m),ht=Kn(o.writingMode,lt,mr,Y);if(ht)return ht}var Zt=rn(ie*E.getoffsetX(o.glyphStartIndex),$,ne,a,N,q,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,k,g,Z);if(!Zt)return{notEnoughRoom:!0};J=[Zt]}for(var Jt=0,qt=J;Jt<qt.length;Jt+=1){var jt=qt[Jt];l.addDynamicAttributes(D,jt.point,jt.angle)}return{}}function mo(o,s,a,p,m){var g=Dt(o.add(o.sub(s)._unit()),m).point,x=a.sub(g);return a.add(x._mult(p/x.mag()))}function rn(o,s,a,p,m,g,x,E,k,D,N,q){var Z=p?o-s:o+s,Y=Z>0?1:-1,J=0;p&&(Y*=-1,J=Math.PI),Y<0&&(J+=Math.PI);for(var ie=Y>0?E+x:E+x+1,$=m,ne=m,ce=0,ye=0,ke=Math.abs(Z),Se=[];ce+ye<=ke;){if((ie+=Y)<E||ie>=k)return null;if(ne=$,Se.push($),($=q[ie])===void 0){var ze=new l.Point(D.getx(ie),D.gety(ie)),Ne=Dt(ze,N);if(Ne.signedDistanceFromCamera>0)$=q[ie]=Ne.point;else{var He=ie-Y;$=mo(ce===0?g:new l.Point(D.getx(He),D.gety(He)),ze,ne,ke-ce+1,N)}}ce+=ye,ye=ne.dist($)}var We=(ke-ce)/ye,lt=$.sub(ne),Et=lt.mult(We)._add(ne);Et._add(lt._unit()._perp()._mult(a*Y));var At=J+Math.atan2($.y-ne.y,$.x-ne.x);return Se.push(Et),{point:Et,angle:At,path:Se}}vr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},vr.prototype.insert=function(o,s,a,p,m){this._forEachCell(s,a,p,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(s),this.bboxes.push(a),this.bboxes.push(p),this.bboxes.push(m)},vr.prototype.insertCircle=function(o,s,a,p){this._forEachCell(s-p,a-p,s+p,a+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(s),this.circles.push(a),this.circles.push(p)},vr.prototype._insertBoxCell=function(o,s,a,p,m,g){this.boxCells[m].push(g)},vr.prototype._insertCircleCell=function(o,s,a,p,m,g){this.circleCells[m].push(g)},vr.prototype._query=function(o,s,a,p,m,g){if(a<0||o>this.width||p<0||s>this.height)return!m&&[];var x=[];if(o<=0&&s<=0&&this.width<=a&&this.height<=p){if(m)return!0;for(var E=0;E<this.boxKeys.length;E++)x.push({key:this.boxKeys[E],x1:this.bboxes[4*E],y1:this.bboxes[4*E+1],x2:this.bboxes[4*E+2],y2:this.bboxes[4*E+3]});for(var k=0;k<this.circleKeys.length;k++){var D=this.circles[3*k],N=this.circles[3*k+1],q=this.circles[3*k+2];x.push({key:this.circleKeys[k],x1:D-q,y1:N-q,x2:D+q,y2:N+q})}return g?x.filter(g):x}return this._forEachCell(o,s,a,p,this._queryCell,x,{hitTest:m,seenUids:{box:{},circle:{}}},g),m?x.length>0:x},vr.prototype._queryCircle=function(o,s,a,p,m){var g=o-a,x=o+a,E=s-a,k=s+a;if(x<0||g>this.width||k<0||E>this.height)return!p&&[];var D=[];return this._forEachCell(g,E,x,k,this._queryCellCircle,D,{hitTest:p,circle:{x:o,y:s,radius:a},seenUids:{box:{},circle:{}}},m),p?D.length>0:D},vr.prototype.query=function(o,s,a,p,m){return this._query(o,s,a,p,!1,m)},vr.prototype.hitTest=function(o,s,a,p,m){return this._query(o,s,a,p,!0,m)},vr.prototype.hitTestCircle=function(o,s,a,p){return this._queryCircle(o,s,a,!0,p)},vr.prototype._queryCell=function(o,s,a,p,m,g,x,E){var k=x.seenUids,D=this.boxCells[m];if(D!==null)for(var N=this.bboxes,q=0,Z=D;q<Z.length;q+=1){var Y=Z[q];if(!k.box[Y]){k.box[Y]=!0;var J=4*Y;if(o<=N[J+2]&&s<=N[J+3]&&a>=N[J+0]&&p>=N[J+1]&&(!E||E(this.boxKeys[Y]))){if(x.hitTest)return g.push(!0),!0;g.push({key:this.boxKeys[Y],x1:N[J],y1:N[J+1],x2:N[J+2],y2:N[J+3]})}}}var ie=this.circleCells[m];if(ie!==null)for(var $=this.circles,ne=0,ce=ie;ne<ce.length;ne+=1){var ye=ce[ne];if(!k.circle[ye]){k.circle[ye]=!0;var ke=3*ye;if(this._circleAndRectCollide($[ke],$[ke+1],$[ke+2],o,s,a,p)&&(!E||E(this.circleKeys[ye]))){if(x.hitTest)return g.push(!0),!0;var Se=$[ke],ze=$[ke+1],Ne=$[ke+2];g.push({key:this.circleKeys[ye],x1:Se-Ne,y1:ze-Ne,x2:Se+Ne,y2:ze+Ne})}}}},vr.prototype._queryCellCircle=function(o,s,a,p,m,g,x,E){var k=x.circle,D=x.seenUids,N=this.boxCells[m];if(N!==null)for(var q=this.bboxes,Z=0,Y=N;Z<Y.length;Z+=1){var J=Y[Z];if(!D.box[J]){D.box[J]=!0;var ie=4*J;if(this._circleAndRectCollide(k.x,k.y,k.radius,q[ie+0],q[ie+1],q[ie+2],q[ie+3])&&(!E||E(this.boxKeys[J])))return g.push(!0),!0}}var $=this.circleCells[m];if($!==null)for(var ne=this.circles,ce=0,ye=$;ce<ye.length;ce+=1){var ke=ye[ce];if(!D.circle[ke]){D.circle[ke]=!0;var Se=3*ke;if(this._circlesCollide(ne[Se],ne[Se+1],ne[Se+2],k.x,k.y,k.radius)&&(!E||E(this.circleKeys[ke])))return g.push(!0),!0}}},vr.prototype._forEachCell=function(o,s,a,p,m,g,x,E){for(var k=this._convertToXCellCoord(o),D=this._convertToYCellCoord(s),N=this._convertToXCellCoord(a),q=this._convertToYCellCoord(p),Z=k;Z<=N;Z++)for(var Y=D;Y<=q;Y++)if(m.call(this,o,s,a,p,this.xCellCount*Y+Z,g,x,E))return},vr.prototype._convertToXCellCoord=function(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))},vr.prototype._convertToYCellCoord=function(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))},vr.prototype._circlesCollide=function(o,s,a,p,m,g){var x=p-o,E=m-s,k=a+g;return k*k>x*x+E*E},vr.prototype._circleAndRectCollide=function(o,s,a,p,m,g,x){var E=(g-p)/2,k=Math.abs(o-(p+E));if(k>E+a)return!1;var D=(x-m)/2,N=Math.abs(s-(m+D));if(N>D+a)return!1;if(k<=E||N<=D)return!0;var q=k-E,Z=N-D;return q*q+Z*Z<=a*a};var Ds=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ii(o,s){for(var a=0;a<o;a++){var p=s.length;s.resize(p+4),s.float32.set(Ds,3*p)}}function zn(o,s,a){var p=s[0],m=s[1];return o[0]=a[0]*p+a[4]*m+a[12],o[1]=a[1]*p+a[5]*m+a[13],o[3]=a[3]*p+a[7]*m+a[15],o}var Ii=function(o,s,a){s===void 0&&(s=new vr(o.width+200,o.height+200,25)),a===void 0&&(a=new vr(o.width+200,o.height+200,25)),this.transform=o,this.grid=s,this.ignoredGrid=a,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+100,this.screenBottomBoundary=o.height+100,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200};function Vr(o,s,a){return s*(l.EXTENT/(o.tileSize*Math.pow(2,a-o.tileID.overscaledZ)))}Ii.prototype.placeCollisionBox=function(o,s,a,p,m){var g=this.projectAndGetPerspectiveRatio(p,o.anchorPointX,o.anchorPointY),x=a*g.perspectiveRatio,E=o.x1*x+g.point.x,k=o.y1*x+g.point.y,D=o.x2*x+g.point.x,N=o.y2*x+g.point.y;return!this.isInsideGrid(E,k,D,N)||!s&&this.grid.hitTest(E,k,D,N,m)?{box:[],offscreen:!1}:{box:[E,k,D,N],offscreen:this.isOffscreen(E,k,D,N)}},Ii.prototype.placeCollisionCircles=function(o,s,a,p,m,g,x,E,k,D,N,q,Z){var Y=[],J=new l.Point(s.anchorX,s.anchorY),ie=Dt(J,g),$=fr(this.transform.cameraToCenterDistance,ie.signedDistanceFromCamera),ne=(D?m/$:m*$)/l.ONE_EM,ce=Dt(J,x).point,ye=Nr(ne,p,s.lineOffsetX*ne,s.lineOffsetY*ne,!1,ce,J,s,a,x,{}),ke=!1,Se=!1,ze=!0;if(ye){for(var Ne=.5*q*$+Z,He=new l.Point(-100,-100),We=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),lt=new Nn,Et=ye.first,At=ye.last,kt=[],mr=Et.path.length-1;mr>=1;mr--)kt.push(Et.path[mr]);for(var ht=1;ht<At.path.length;ht++)kt.push(At.path[ht]);var Zt=2.5*Ne;if(E){var Jt=kt.map(function(Uo){return Dt(Uo,E)});kt=Jt.some(function(Uo){return Uo.signedDistanceFromCamera<=0})?[]:Jt.map(function(Uo){return Uo.point})}var qt=[];if(kt.length>0){for(var jt=kt[0].clone(),Kt=kt[0].clone(),Nt=1;Nt<kt.length;Nt++)jt.x=Math.min(jt.x,kt[Nt].x),jt.y=Math.min(jt.y,kt[Nt].y),Kt.x=Math.max(Kt.x,kt[Nt].x),Kt.y=Math.max(Kt.y,kt[Nt].y);qt=jt.x>=He.x&&Kt.x<=We.x&&jt.y>=He.y&&Kt.y<=We.y?[kt]:Kt.x<He.x||jt.x>We.x||Kt.y<He.y||jt.y>We.y?[]:l.clipLine([kt],He.x,He.y,We.x,We.y)}for(var Ot=0,Vn=qt;Ot<Vn.length;Ot+=1){var fn;lt.reset(Vn[Ot],.25*Ne),fn=lt.length<=.5*Ne?1:Math.ceil(lt.paddedLength/Zt)+1;for(var pi=0;pi<fn;pi++){var Qn=pi/Math.max(fn-1,1),un=lt.lerp(Qn),_n=un.x+100,ao=un.y+100;Y.push(_n,ao,Ne,0);var _i=_n-Ne,hs=ao-Ne,Li=_n+Ne,oa=ao+Ne;if(ze=ze&&this.isOffscreen(_i,hs,Li,oa),Se=Se||this.isInsideGrid(_i,hs,Li,oa),!o&&this.grid.hitTestCircle(_n,ao,Ne,N)&&(ke=!0,!k))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!k&&ke||!Se?[]:Y,offscreen:ze,collisionDetected:ke}},Ii.prototype.queryRenderedSymbols=function(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],a=1/0,p=1/0,m=-1/0,g=-1/0,x=0,E=o;x<E.length;x+=1){var k=E[x],D=new l.Point(k.x+100,k.y+100);a=Math.min(a,D.x),p=Math.min(p,D.y),m=Math.max(m,D.x),g=Math.max(g,D.y),s.push(D)}for(var N={},q={},Z=0,Y=this.grid.query(a,p,m,g).concat(this.ignoredGrid.query(a,p,m,g));Z<Y.length;Z+=1){var J=Y[Z],ie=J.key;if(N[ie.bucketInstanceId]===void 0&&(N[ie.bucketInstanceId]={}),!N[ie.bucketInstanceId][ie.featureIndex]){var $=[new l.Point(J.x1,J.y1),new l.Point(J.x2,J.y1),new l.Point(J.x2,J.y2),new l.Point(J.x1,J.y2)];l.polygonIntersectsPolygon(s,$)&&(N[ie.bucketInstanceId][ie.featureIndex]=!0,q[ie.bucketInstanceId]===void 0&&(q[ie.bucketInstanceId]=[]),q[ie.bucketInstanceId].push(ie.featureIndex))}}return q},Ii.prototype.insertCollisionBox=function(o,s,a,p,m){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:p,collisionGroupID:m},o[0],o[1],o[2],o[3])},Ii.prototype.insertCollisionCircles=function(o,s,a,p,m){for(var g=s?this.ignoredGrid:this.grid,x={bucketInstanceId:a,featureIndex:p,collisionGroupID:m},E=0;E<o.length;E+=4)g.insertCircle(x,o[E],o[E+1],o[E+2])},Ii.prototype.projectAndGetPerspectiveRatio=function(o,s,a){var p=[s,a,0,1];return zn(p,p,o),{point:new l.Point((p[0]/p[3]+1)/2*this.transform.width+100,(-p[1]/p[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/p[3]*.5}},Ii.prototype.isOffscreen=function(o,s,a,p){return a<100||o>=this.screenRightBoundary||p<100||s>this.screenBottomBoundary},Ii.prototype.isInsideGrid=function(o,s,a,p){return a>=0&&o<this.gridRightBoundary&&p>=0&&s<this.gridBottomBoundary},Ii.prototype.getViewportMatrix=function(){var o=l.identity([]);return l.translate(o,o,[-100,-100,0]),o};var yo=function(o,s,a,p){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?s:-s))):p&&a?1:0,this.placed=a};yo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ki=function(o,s,a,p,m){this.text=new yo(o?o.text:null,s,a,m),this.icon=new yo(o?o.icon:null,s,p,m)};ki.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ul=function(o,s,a){this.text=o,this.icon=s,this.skipFade=a},Ai=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},S=function(o,s,a,p,m){this.bucketInstanceId=o,this.featureIndex=s,this.sourceLayerIndex=a,this.bucketIndex=p,this.tileID=m},P=function(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}};function F(o,s,a,p,m){var g=l.getAnchorAlignment(o),x=-(g.horizontalAlign-.5)*s,E=-(g.verticalAlign-.5)*a,k=l.evaluateVariableOffset(o,p);return new l.Point(x+k[0]*m,E+k[1]*m)}function le(o,s,a,p,m,g){var x=o.x1,E=o.x2,k=o.y1,D=o.y2,N=o.anchorPointX,q=o.anchorPointY,Z=new l.Point(s,a);return p&&Z._rotate(m?g:-g),{x1:x+Z.x,y1:k+Z.y,x2:E+Z.x,y2:D+Z.y,anchorPointX:N,anchorPointY:q}}P.prototype.get=function(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){var s=++this.maxGroupID;this.collisionGroups[o]={ID:s,predicate:function(a){return a.collisionGroupID===s}}}return this.collisionGroups[o]};var ve=function(o,s,a,p){this.transform=o.clone(),this.collisionIndex=new Ii(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new P(a),this.collisionCircleArrays={},this.prevPlacement=p,p&&(p.prevPlacement=void 0),this.placedOrientations={}};function fe(o,s,a,p,m){o.emplaceBack(s?1:0,a?1:0,p||0,m||0),o.emplaceBack(s?1:0,a?1:0,p||0,m||0),o.emplaceBack(s?1:0,a?1:0,p||0,m||0),o.emplaceBack(s?1:0,a?1:0,p||0,m||0)}ve.prototype.getBucketParts=function(o,s,a,p){var m=a.getBucket(s),g=a.latestFeatureIndex;if(m&&g&&s.id===m.layerIds[0]){var x=a.collisionBoxArray,E=m.layers[0].layout,k=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),D=a.tileSize/l.EXTENT,N=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),q=E.get("text-pitch-alignment")==="map",Z=E.get("text-rotation-alignment")==="map",Y=Vr(a,1,this.transform.zoom),J=tn(N,q,Z,this.transform,Y),ie=null;if(q){var $=Sr(N,q,Z,this.transform,Y);ie=l.multiply([],this.transform.labelPlaneMatrix,$)}this.retainedQueryData[m.bucketInstanceId]=new S(m.bucketInstanceId,g,m.sourceLayerIndex,m.index,a.tileID);var ne={bucket:m,layout:E,posMatrix:N,textLabelPlaneMatrix:J,labelToScreenMatrix:ie,scale:k,textPixelRatio:D,holdingForFade:a.holdingForFade(),collisionBoxArray:x,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(p)for(var ce=0,ye=m.sortKeyRanges;ce<ye.length;ce+=1){var ke=ye[ce];o.push({sortKey:ke.sortKey,symbolInstanceStart:ke.symbolInstanceStart,symbolInstanceEnd:ke.symbolInstanceEnd,parameters:ne})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:ne})}},ve.prototype.attemptAnchorPlacement=function(o,s,a,p,m,g,x,E,k,D,N,q,Z,Y,J){var ie,$=[q.textOffset0,q.textOffset1],ne=F(o,a,p,$,m),ce=this.collisionIndex.placeCollisionBox(le(s,ne.x,ne.y,g,x,this.transform.angle),N,E,k,D.predicate);if(!J||this.collisionIndex.placeCollisionBox(le(J,ne.x,ne.y,g,x,this.transform.angle),N,E,k,D.predicate).box.length!==0)return ce.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(ie=this.prevPlacement.variableOffsets[q.crossTileID].anchor),this.variableOffsets[q.crossTileID]={textOffset:$,width:a,height:p,anchor:o,textBoxScale:m,prevAnchor:ie},this.markUsedJustification(Z,o,q,Y),Z.allowVerticalPlacement&&(this.markUsedOrientation(Z,Y,q),this.placedOrientations[q.crossTileID]=Y),{shift:ne,placedGlyphBoxes:ce}):void 0},ve.prototype.placeLayerBucketPart=function(o,s,a){var p=this,m=o.parameters,g=m.bucket,x=m.layout,E=m.posMatrix,k=m.textLabelPlaneMatrix,D=m.labelToScreenMatrix,N=m.textPixelRatio,q=m.holdingForFade,Z=m.collisionBoxArray,Y=m.partiallyEvaluatedTextSize,J=m.collisionGroup,ie=x.get("text-optional"),$=x.get("icon-optional"),ne=x.get("text-allow-overlap"),ce=x.get("icon-allow-overlap"),ye=x.get("text-rotation-alignment")==="map",ke=x.get("text-pitch-alignment")==="map",Se=x.get("icon-text-fit")!=="none",ze=x.get("symbol-z-order")==="viewport-y",Ne=ne&&(ce||!g.hasIconData()||$),He=ce&&(ne||!g.hasTextData()||ie);!g.collisionArrays&&Z&&g.deserializeCollisionBoxes(Z);var We=function(ht,Zt){if(!s[ht.crossTileID])if(q)p.placements[ht.crossTileID]=new Ul(!1,!1,!1);else{var Jt,qt=!1,jt=!1,Kt=!0,Nt=null,Ot={box:null,offscreen:null},Vn={box:null,offscreen:null},fn=null,pi=null,Qn=0,un=0,_n=0;Zt.textFeatureIndex?Qn=Zt.textFeatureIndex:ht.useRuntimeCollisionCircles&&(Qn=ht.featureIndex),Zt.verticalTextFeatureIndex&&(un=Zt.verticalTextFeatureIndex);var ao=Zt.textBox;if(ao){var _i=function(wr){var So=l.WritingMode.horizontal;if(g.allowVerticalPlacement&&!wr&&p.prevPlacement){var Di=p.prevPlacement.placedOrientations[ht.crossTileID];Di&&(p.placedOrientations[ht.crossTileID]=Di,p.markUsedOrientation(g,So=Di,ht))}return So},hs=function(wr,So){if(g.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&Zt.verticalTextBox)for(var Di=0,Hs=g.writingModes;Di<Hs.length&&(Hs[Di]===l.WritingMode.vertical?(Ot=So(),Vn=Ot):Ot=wr(),!(Ot&&Ot.box&&Ot.box.length));Di+=1);else Ot=wr()};if(x.get("text-variable-anchor")){var Li=x.get("text-variable-anchor");if(p.prevPlacement&&p.prevPlacement.variableOffsets[ht.crossTileID]){var oa=p.prevPlacement.variableOffsets[ht.crossTileID];Li.indexOf(oa.anchor)>0&&(Li=Li.filter(function(wr){return wr!==oa.anchor})).unshift(oa.anchor)}var Uo=function(wr,So,Di){for(var Hs=wr.x2-wr.x1,Em=wr.y2-wr.y1,oc=ht.textBoxScale,Tm=Se&&!ce?So:null,hl={box:[],offscreen:!1},lf=ne?2*Li.length:Li.length,_u=0;_u<lf;++_u){var ac=p.attemptAnchorPlacement(Li[_u%Li.length],wr,Hs,Em,oc,ye,ke,N,E,J,_u>=Li.length,ht,g,Di,Tm);if(ac&&(hl=ac.placedGlyphBoxes)&&hl.box&&hl.box.length){qt=!0,Nt=ac.shift;break}}return hl};hs(function(){return Uo(ao,Zt.iconBox,l.WritingMode.horizontal)},function(){var wr=Zt.verticalTextBox;return g.allowVerticalPlacement&&!(Ot&&Ot.box&&Ot.box.length)&&ht.numVerticalGlyphVertices>0&&wr?Uo(wr,Zt.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Ot&&(qt=Ot.box,Kt=Ot.offscreen);var ll=_i(Ot&&Ot.box);if(!qt&&p.prevPlacement){var vu=p.prevPlacement.variableOffsets[ht.crossTileID];vu&&(p.variableOffsets[ht.crossTileID]=vu,p.markUsedJustification(g,vu.anchor,ht,ll))}}else{var fs=function(wr,So){var Di=p.collisionIndex.placeCollisionBox(wr,ne,N,E,J.predicate);return Di&&Di.box&&Di.box.length&&(p.markUsedOrientation(g,So,ht),p.placedOrientations[ht.crossTileID]=So),Di};hs(function(){return fs(ao,l.WritingMode.horizontal)},function(){var wr=Zt.verticalTextBox;return g.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&wr?fs(wr,l.WritingMode.vertical):{box:null,offscreen:null}}),_i(Ot&&Ot.box&&Ot.box.length)}}if(qt=(Jt=Ot)&&Jt.box&&Jt.box.length>0,Kt=Jt&&Jt.offscreen,ht.useRuntimeCollisionCircles){var gu=g.text.placedSymbolArray.get(ht.centerJustifiedTextSymbolIndex),cl=l.evaluateSizeForFeature(g.textSizeData,Y,gu),wa=x.get("text-padding");fn=p.collisionIndex.placeCollisionCircles(ne,gu,g.lineVertexArray,g.glyphOffsetArray,cl,E,k,D,a,ke,J.predicate,ht.collisionCircleDiameter,wa),qt=ne||fn.circles.length>0&&!fn.collisionDetected,Kt=Kt&&fn.offscreen}if(Zt.iconFeatureIndex&&(_n=Zt.iconFeatureIndex),Zt.iconBox){var pl=function(wr){var So=Se&&Nt?le(wr,Nt.x,Nt.y,ye,ke,p.transform.angle):wr;return p.collisionIndex.placeCollisionBox(So,ce,N,E,J.predicate)};jt=Vn&&Vn.box&&Vn.box.length&&Zt.verticalIconBox?(pi=pl(Zt.verticalIconBox)).box.length>0:(pi=pl(Zt.iconBox)).box.length>0,Kt=Kt&&pi.offscreen}var Sa=ie||ht.numHorizontalGlyphVertices===0&&ht.numVerticalGlyphVertices===0,qn=$||ht.numIconVertices===0;if(Sa||qn?qn?Sa||(jt=jt&&qt):qt=jt&&qt:jt=qt=jt&&qt,qt&&Jt&&Jt.box&&p.collisionIndex.insertCollisionBox(Jt.box,x.get("text-ignore-placement"),g.bucketInstanceId,Vn&&Vn.box&&un?un:Qn,J.ID),jt&&pi&&p.collisionIndex.insertCollisionBox(pi.box,x.get("icon-ignore-placement"),g.bucketInstanceId,_n,J.ID),fn&&(qt&&p.collisionIndex.insertCollisionCircles(fn.circles,x.get("text-ignore-placement"),g.bucketInstanceId,Qn,J.ID),a)){var $a=g.bucketInstanceId,ds=p.collisionCircleArrays[$a];ds===void 0&&(ds=p.collisionCircleArrays[$a]=new Ai);for(var $s=0;$s<fn.circles.length;$s+=4)ds.circles.push(fn.circles[$s+0]),ds.circles.push(fn.circles[$s+1]),ds.circles.push(fn.circles[$s+2]),ds.circles.push(fn.collisionDetected?1:0)}p.placements[ht.crossTileID]=new Ul(qt||Ne,jt||He,Kt||g.justReloaded),s[ht.crossTileID]=!0}};if(ze)for(var lt=g.getSortedSymbolIndexes(this.transform.angle),Et=lt.length-1;Et>=0;--Et){var At=lt[Et];We(g.symbolInstances.get(At),g.collisionArrays[At])}else for(var kt=o.symbolInstanceStart;kt<o.symbolInstanceEnd;kt++)We(g.symbolInstances.get(kt),g.collisionArrays[kt]);if(a&&g.bucketInstanceId in this.collisionCircleArrays){var mr=this.collisionCircleArrays[g.bucketInstanceId];l.invert(mr.invProjMatrix,E),mr.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1},ve.prototype.markUsedJustification=function(o,s,a,p){var m;m=p===l.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(s)];for(var g=0,x=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];g<x.length;g+=1){var E=x[g];E>=0&&(o.text.placedSymbolArray.get(E).crossTileID=m>=0&&E!==m?0:a.crossTileID)}},ve.prototype.markUsedOrientation=function(o,s,a){for(var p=s===l.WritingMode.horizontal||s===l.WritingMode.horizontalOnly?s:0,m=s===l.WritingMode.vertical?s:0,g=0,x=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];g<x.length;g+=1)o.text.placedSymbolArray.get(x[g]).placedOrientation=p;a.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=m)},ve.prototype.commit=function(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,a=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var p=s?s.symbolFadeChange(o):1,m=s?s.opacities:{},g=s?s.variableOffsets:{},x=s?s.placedOrientations:{};for(var E in this.placements){var k=this.placements[E],D=m[E];D?(this.opacities[E]=new ki(D,p,k.text,k.icon),a=a||k.text!==D.text.placed||k.icon!==D.icon.placed):(this.opacities[E]=new ki(null,p,k.text,k.icon,k.skipFade),a=a||k.text||k.icon)}for(var N in m){var q=m[N];if(!this.opacities[N]){var Z=new ki(q,p,!1,!1);Z.isHidden()||(this.opacities[N]=Z,a=a||q.text.placed||q.icon.placed)}}for(var Y in g)this.variableOffsets[Y]||!this.opacities[Y]||this.opacities[Y].isHidden()||(this.variableOffsets[Y]=g[Y]);for(var J in x)this.placedOrientations[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.placedOrientations[J]=x[J]);a?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:o)},ve.prototype.updateLayerOpacities=function(o,s){for(var a={},p=0,m=s;p<m.length;p+=1){var g=m[p],x=g.getBucket(o);x&&g.latestFeatureIndex&&o.id===x.layerIds[0]&&this.updateBucketOpacities(x,a,g.collisionBoxArray)}},ve.prototype.updateBucketOpacities=function(o,s,a){var p=this;o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();var m=o.layers[0].layout,g=new ki(null,0,!1,!1,!0),x=m.get("text-allow-overlap"),E=m.get("icon-allow-overlap"),k=m.get("text-variable-anchor"),D=m.get("text-rotation-alignment")==="map",N=m.get("text-pitch-alignment")==="map",q=m.get("icon-text-fit")!=="none",Z=new ki(null,0,x&&(E||!o.hasIconData()||m.get("icon-optional")),E&&(x||!o.hasTextData()||m.get("text-optional")),!0);!o.collisionArrays&&a&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(a);for(var Y=function(ne,ce,ye){for(var ke=0;ke<ce/4;ke++)ne.opacityVertexArray.emplaceBack(ye)},J=function(ne){var ce=o.symbolInstances.get(ne),ye=ce.numHorizontalGlyphVertices,ke=ce.numVerticalGlyphVertices,Se=ce.crossTileID,ze=p.opacities[Se];s[Se]?ze=g:ze||(p.opacities[Se]=ze=Z),s[Se]=!0;var Ne=ce.numIconVertices>0,He=p.placedOrientations[ce.crossTileID],We=He===l.WritingMode.vertical,lt=He===l.WritingMode.horizontal||He===l.WritingMode.horizontalOnly;if(ye>0||ke>0){var Et=Ft(ze.text);Y(o.text,ye,We?Vt:Et),Y(o.text,ke,lt?Vt:Et);var At=ze.text.isHidden();[ce.rightJustifiedTextSymbolIndex,ce.centerJustifiedTextSymbolIndex,ce.leftJustifiedTextSymbolIndex].forEach(function(Ot){Ot>=0&&(o.text.placedSymbolArray.get(Ot).hidden=At||We?1:0)}),ce.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(ce.verticalPlacedTextSymbolIndex).hidden=At||lt?1:0);var kt=p.variableOffsets[ce.crossTileID];kt&&p.markUsedJustification(o,kt.anchor,ce,He);var mr=p.placedOrientations[ce.crossTileID];mr&&(p.markUsedJustification(o,"left",ce,mr),p.markUsedOrientation(o,mr,ce))}if(Ne){var ht=Ft(ze.icon),Zt=!(q&&ce.verticalPlacedIconSymbolIndex&&We);ce.placedIconSymbolIndex>=0&&(Y(o.icon,ce.numIconVertices,Zt?ht:Vt),o.icon.placedSymbolArray.get(ce.placedIconSymbolIndex).hidden=ze.icon.isHidden()),ce.verticalPlacedIconSymbolIndex>=0&&(Y(o.icon,ce.numVerticalIconVertices,Zt?Vt:ht),o.icon.placedSymbolArray.get(ce.verticalPlacedIconSymbolIndex).hidden=ze.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){var Jt=o.collisionArrays[ne];if(Jt){var qt=new l.Point(0,0);if(Jt.textBox||Jt.verticalTextBox){var jt=!0;if(k){var Kt=p.variableOffsets[Se];Kt?(qt=F(Kt.anchor,Kt.width,Kt.height,Kt.textOffset,Kt.textBoxScale),D&&qt._rotate(N?p.transform.angle:-p.transform.angle)):jt=!1}Jt.textBox&&fe(o.textCollisionBox.collisionVertexArray,ze.text.placed,!jt||We,qt.x,qt.y),Jt.verticalTextBox&&fe(o.textCollisionBox.collisionVertexArray,ze.text.placed,!jt||lt,qt.x,qt.y)}var Nt=Boolean(!lt&&Jt.verticalIconBox);Jt.iconBox&&fe(o.iconCollisionBox.collisionVertexArray,ze.icon.placed,Nt,q?qt.x:0,q?qt.y:0),Jt.verticalIconBox&&fe(o.iconCollisionBox.collisionVertexArray,ze.icon.placed,!Nt,q?qt.x:0,q?qt.y:0)}}},ie=0;ie<o.symbolInstances.length;ie++)J(ie);if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){var $=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=$.invProjMatrix,o.placementViewportMatrix=$.viewportMatrix,o.collisionCircleArray=$.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}},ve.prototype.symbolFadeChange=function(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ve.prototype.zoomAdjustment=function(o){return Math.max(0,(this.transform.zoom-o)/1.5)},ve.prototype.hasTransitions=function(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration},ve.prototype.stillRecent=function(o,s){var a=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*a>o},ve.prototype.setStale=function(){this.stale=!0};var _e=Math.pow(2,25),$e=Math.pow(2,24),Ge=Math.pow(2,17),dt=Math.pow(2,16),Ee=Math.pow(2,9),ut=Math.pow(2,8),mt=Math.pow(2,1);function Ft(o){if(o.opacity===0&&!o.placed)return 0;if(o.opacity===1&&o.placed)return 4294967295;var s=o.placed?1:0,a=Math.floor(127*o.opacity);return a*_e+s*$e+a*Ge+s*dt+a*Ee+s*ut+a*mt+s}var Vt=0,an=function(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};an.prototype.continuePlacement=function(o,s,a,p,m){for(var g=this._bucketParts;this._currentTileIndex<o.length;)if(s.getBucketParts(g,p,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,g.sort(function(x,E){return x.sortKey-E.sortKey}));this._currentPartIndex<g.length;)if(s.placeLayerBucketPart(g[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,m())return!0;return!1};var Be=function(o,s,a,p,m,g,x){this.placement=new ve(o,m,g,x),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=p,this._done=!1};Be.prototype.isDone=function(){return this._done},Be.prototype.continuePlacement=function(o,s,a){for(var p=this,m=l.browser.now(),g=function(){var k=l.browser.now()-m;return!p._forceFullPlacement&&k>2};this._currentPlacementIndex>=0;){var x=s[o[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=E)&&(!x.maxzoom||x.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new an(x)),this._inProgressLayer.continuePlacement(a[x.source],this.placement,this._showCollisionBoxes,x,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Be.prototype.commit=function(o){return this.placement.commit(o),this.placement};var gt=512/l.EXTENT/2,Tr=function(o,s,a){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var p=0;p<s.length;p++){var m=s.get(p),g=m.key;this.indexedSymbolInstances[g]||(this.indexedSymbolInstances[g]=[]),this.indexedSymbolInstances[g].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,o)})}};Tr.prototype.getScaledCoordinates=function(o,s){var a=gt/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*l.EXTENT+o.anchorX)*a),y:Math.floor((s.canonical.y*l.EXTENT+o.anchorY)*a)}},Tr.prototype.findMatches=function(o,s,a){for(var p=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),m=0;m<o.length;m++){var g=o.get(m);if(!g.crossTileID){var x=this.indexedSymbolInstances[g.key];if(x)for(var E=this.getScaledCoordinates(g,s),k=0,D=x;k<D.length;k+=1){var N=D[k];if(Math.abs(N.coord.x-E.x)<=p&&Math.abs(N.coord.y-E.y)<=p&&!a[N.crossTileID]){a[N.crossTileID]=!0,g.crossTileID=N.crossTileID;break}}}}};var ar=function(){this.maxCrossTileID=0};ar.prototype.generate=function(){return++this.maxCrossTileID};var Lr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Lr.prototype.handleWrapJump=function(o){var s=Math.round((o-this.lng)/360);if(s!==0)for(var a in this.indexes){var p=this.indexes[a],m={};for(var g in p){var x=p[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+s),m[x.tileID.key]=x}this.indexes[a]=m}this.lng=o},Lr.prototype.addBucket=function(o,s,a){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(var p=0;p<s.symbolInstances.length;p++)s.symbolInstances.get(p).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});var m=this.usedCrossTileIDs[o.overscaledZ];for(var g in this.indexes){var x=this.indexes[g];if(Number(g)>o.overscaledZ)for(var E in x){var k=x[E];k.tileID.isChildOf(o)&&k.findMatches(s.symbolInstances,o,m)}else{var D=x[o.scaledTo(Number(g)).key];D&&D.findMatches(s.symbolInstances,o,m)}}for(var N=0;N<s.symbolInstances.length;N++){var q=s.symbolInstances.get(N);q.crossTileID||(q.crossTileID=a.generate(),m[q.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Tr(o,s.symbolInstances,s.bucketInstanceId),!0},Lr.prototype.removeBucketCrossTileIDs=function(o,s){for(var a in s.indexedSymbolInstances)for(var p=0,m=s.indexedSymbolInstances[a];p<m.length;p+=1)delete this.usedCrossTileIDs[o][m[p].crossTileID]},Lr.prototype.removeStaleBuckets=function(o){var s=!1;for(var a in this.indexes){var p=this.indexes[a];for(var m in p)o[p[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,p[m]),delete p[m],s=!0)}return s};var It=function(){this.layerIndexes={},this.crossTileIDs=new ar,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};It.prototype.addLayer=function(o,s,a){var p=this.layerIndexes[o.id];p===void 0&&(p=this.layerIndexes[o.id]=new Lr);var m=!1,g={};p.handleWrapJump(a);for(var x=0,E=s;x<E.length;x+=1){var k=E[x],D=k.getBucket(o);D&&o.id===D.layerIds[0]&&(D.bucketInstanceId||(D.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(k.tileID,D,this.crossTileIDs)&&(m=!0),g[D.bucketInstanceId]=!0)}return p.removeStaleBuckets(g)&&(m=!0),m},It.prototype.pruneUnusedLayers=function(o){var s={};for(var a in o.forEach(function(p){s[p]=!0}),this.layerIndexes)s[a]||delete this.layerIndexes[a]};var Mi=function(o,s){return l.emitValidationErrors(o,s&&s.filter(function(a){return a.identifier!=="source.canvas"}))},li=l.pick(Qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),lr=l.pick(Qe,["setCenter","setZoom","setBearing","setPitch"]),yi=function(){var o={},s=l.styleSpec.$version;for(var a in l.styleSpec.$root){var p,m=l.styleSpec.$root[a];m.required&&(p=a==="version"?s:m.type==="array"?[]:{})!=null&&(o[a]=p)}return o}(),qr=function(o){function s(a,p){var m=this;p===void 0&&(p={}),o.call(this),this.map=a,this.dispatcher=new Ut(Ae(),this),this.imageManager=new oe,this.imageManager.setEventedParent(this),this.glyphManager=new Xe(a._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Ct(256,512),this.crossTileSymbolIndex=new It,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var g=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(x){g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},function(E,k){if(l.triggerPluginCompletionEvent(E),k&&k.every(function(N){return N}))for(var D in g.sourceCaches)g.sourceCaches[D].reload()})}),this.on("data",function(x){if(x.dataType==="source"&&x.sourceDataType==="metadata"){var E=m.sourceCaches[x.sourceId];if(E){var k=E.getSource();if(k&&k.vectorLayerIds)for(var D in m._layers){var N=m._layers[D];N.source===k.id&&m._validateLayer(N)}}}})}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.loadURL=function(a,p){var m=this;p===void 0&&(p={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var g=typeof p.validate=="boolean"?p.validate:!l.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,p.accessToken);var x=this.map._requestManager.transformRequest(a,l.ResourceType.Style);this._request=l.getJSON(x,function(E,k){m._request=null,E?m.fire(new l.ErrorEvent(E)):k&&m._load(k,g)})},s.prototype.loadJSON=function(a,p){var m=this;p===void 0&&(p={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){m._request=null,m._load(a,p.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(yi,!1)},s.prototype._load=function(a,p){if(!p||!Mi(this,l.validateStyle(a))){for(var m in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(m,a.sources[m],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var g=Je(this.stylesheet.layers);this._order=g.map(function(D){return D.id}),this._layers={},this._serializedLayers={};for(var x=0,E=g;x<E.length;x+=1){var k=E[x];(k=l.createStyleLayer(k)).setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k,this._serializedLayers[k.id]=k.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new bt(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},s.prototype._loadSprite=function(a){var p=this;this._spriteRequest=function(m,g,x){var E,k,D,N=l.browser.devicePixelRatio>1?"@2x":"",q=l.getJSON(g.transformRequest(g.normalizeSpriteURL(m,N,".json"),l.ResourceType.SpriteJSON),function(J,ie){q=null,D||(D=J,E=ie,Y())}),Z=l.getImage(g.transformRequest(g.normalizeSpriteURL(m,N,".png"),l.ResourceType.SpriteImage),function(J,ie){Z=null,D||(D=J,k=ie,Y())});function Y(){if(D)x(D);else if(E&&k){var J=l.browser.getImageData(k),ie={};for(var $ in E){var ne=E[$],ce=ne.width,ye=ne.height,ke=ne.x,Se=ne.y,ze=ne.sdf,Ne=ne.pixelRatio,He=ne.stretchX,We=ne.stretchY,lt=ne.content,Et=new l.RGBAImage({width:ce,height:ye});l.RGBAImage.copy(J,Et,{x:ke,y:Se},{x:0,y:0},{width:ce,height:ye}),ie[$]={data:Et,pixelRatio:Ne,sdf:ze,stretchX:He,stretchY:We,content:lt}}x(null,ie)}}return{cancel:function(){q&&(q.cancel(),q=null),Z&&(Z.cancel(),Z=null)}}}(a,this.map._requestManager,function(m,g){if(p._spriteRequest=null,m)p.fire(new l.ErrorEvent(m));else if(g)for(var x in g)p.imageManager.addImage(x,g[x]);p.imageManager.setLoaded(!0),p._availableImages=p.imageManager.listImages(),p.dispatcher.broadcast("setImages",p._availableImages),p.fire(new l.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(a){var p=this.sourceCaches[a.source];if(p){var m=a.sourceLayer;if(m){var g=p.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(m)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+g.id+'" as specified by style layer "'+a.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var p=[],m=0,g=a;m<g.length;m+=1){var x=this._layers[g[m]];x.type!=="custom"&&p.push(x.serialize())}return p},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var p in this._layers)if(this._layers[p].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(a){if(this._loaded){var p=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);for(var x in(m.length||g.length)&&this._updateWorkerLayers(m,g),this._updatedSources){var E=this._updatedSources[x];E==="reload"?this._reloadSource(x):E==="clear"&&this._clearSource(x)}for(var k in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[k].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var D={};for(var N in this.sourceCaches){var q=this.sourceCaches[N];D[N]=q.used,q.used=!1}for(var Z=0,Y=this._order;Z<Y.length;Z+=1){var J=this._layers[Y[Z]];J.recalculate(a,this._availableImages),!J.isHidden(a.zoom)&&J.source&&(this.sourceCaches[J.source].used=!0)}for(var ie in D){var $=this.sourceCaches[ie];D[ie]!==$.used&&$.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ie}))}this.light.recalculate(a),this.z=a.zoom,p&&this.fire(new l.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},s.prototype._updateWorkerLayers=function(a,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:p})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(a){var p=this;if(this._checkLoaded(),Mi(this,l.validateStyle(a)))return!1;(a=l.clone$1(a)).layers=Je(a.layers);var m=function(x,E){if(!x)return[{command:Qe.setStyle,args:[E]}];var k=[];try{if(!l.deepEqual(x.version,E.version))return[{command:Qe.setStyle,args:[E]}];l.deepEqual(x.center,E.center)||k.push({command:Qe.setCenter,args:[E.center]}),l.deepEqual(x.zoom,E.zoom)||k.push({command:Qe.setZoom,args:[E.zoom]}),l.deepEqual(x.bearing,E.bearing)||k.push({command:Qe.setBearing,args:[E.bearing]}),l.deepEqual(x.pitch,E.pitch)||k.push({command:Qe.setPitch,args:[E.pitch]}),l.deepEqual(x.sprite,E.sprite)||k.push({command:Qe.setSprite,args:[E.sprite]}),l.deepEqual(x.glyphs,E.glyphs)||k.push({command:Qe.setGlyphs,args:[E.glyphs]}),l.deepEqual(x.transition,E.transition)||k.push({command:Qe.setTransition,args:[E.transition]}),l.deepEqual(x.light,E.light)||k.push({command:Qe.setLight,args:[E.light]});var D={},N=[];(function(Z,Y,J,ie){var $;for($ in Y=Y||{},Z=Z||{})Z.hasOwnProperty($)&&(Y.hasOwnProperty($)||rt($,J,ie));for($ in Y)Y.hasOwnProperty($)&&(Z.hasOwnProperty($)?l.deepEqual(Z[$],Y[$])||(Z[$].type==="geojson"&&Y[$].type==="geojson"&&kr(Z,Y,$)?J.push({command:Qe.setGeoJSONSourceData,args:[$,Y[$].data]}):or($,Y,J,ie)):Wt($,Y,J))})(x.sources,E.sources,N,D);var q=[];x.layers&&x.layers.forEach(function(Z){D[Z.source]?k.push({command:Qe.removeLayer,args:[Z.id]}):q.push(Z)}),k=k.concat(N),function(Z,Y,J){Y=Y||[];var ie,$,ne,ce,ye,ke,Se,ze=(Z=Z||[]).map(hr),Ne=Y.map(hr),He=Z.reduce(ur,{}),We=Y.reduce(ur,{}),lt=ze.slice(),Et=Object.create(null);for(ie=0,$=0;ie<ze.length;ie++)We.hasOwnProperty(ne=ze[ie])?$++:(J.push({command:Qe.removeLayer,args:[ne]}),lt.splice(lt.indexOf(ne,$),1));for(ie=0,$=0;ie<Ne.length;ie++)lt[lt.length-1-ie]!==(ne=Ne[Ne.length-1-ie])&&(He.hasOwnProperty(ne)?(J.push({command:Qe.removeLayer,args:[ne]}),lt.splice(lt.lastIndexOf(ne,lt.length-$),1)):$++,J.push({command:Qe.addLayer,args:[We[ne],ke=lt[lt.length-ie]]}),lt.splice(lt.length-ie,0,ne),Et[ne]=!0);for(ie=0;ie<Ne.length;ie++)if(ce=He[ne=Ne[ie]],ye=We[ne],!Et[ne]&&!l.deepEqual(ce,ye))if(l.deepEqual(ce.source,ye.source)&&l.deepEqual(ce["source-layer"],ye["source-layer"])&&l.deepEqual(ce.type,ye.type)){for(Se in Rt(ce.layout,ye.layout,J,ne,null,Qe.setLayoutProperty),Rt(ce.paint,ye.paint,J,ne,null,Qe.setPaintProperty),l.deepEqual(ce.filter,ye.filter)||J.push({command:Qe.setFilter,args:[ne,ye.filter]}),l.deepEqual(ce.minzoom,ye.minzoom)&&l.deepEqual(ce.maxzoom,ye.maxzoom)||J.push({command:Qe.setLayerZoomRange,args:[ne,ye.minzoom,ye.maxzoom]}),ce)ce.hasOwnProperty(Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?Rt(ce[Se],ye[Se],J,ne,Se.slice(6),Qe.setPaintProperty):l.deepEqual(ce[Se],ye[Se])||J.push({command:Qe.setLayerProperty,args:[ne,Se,ye[Se]]}));for(Se in ye)ye.hasOwnProperty(Se)&&!ce.hasOwnProperty(Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?Rt(ce[Se],ye[Se],J,ne,Se.slice(6),Qe.setPaintProperty):l.deepEqual(ce[Se],ye[Se])||J.push({command:Qe.setLayerProperty,args:[ne,Se,ye[Se]]}))}else J.push({command:Qe.removeLayer,args:[ne]}),ke=lt[lt.lastIndexOf(ne)+1],J.push({command:Qe.addLayer,args:[ye,ke]})}(q,E.layers,k)}catch(Z){console.warn("Unable to compute style diff:",Z),k=[{command:Qe.setStyle,args:[E]}]}return k}(this.serialize(),a).filter(function(x){return!(x.command in lr)});if(m.length===0)return!1;var g=m.filter(function(x){return!(x.command in li)});if(g.length>0)throw new Error("Unimplemented: "+g.map(function(x){return x.command}).join(", ")+".");return m.forEach(function(x){x.command!=="setTransition"&&p[x.command].apply(p,x.args)}),this.stylesheet=a,!0},s.prototype.addImage=function(a,p){if(this.getImage(a))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,p),this._afterImageUpdated(a)},s.prototype.updateImage=function(a,p){this.imageManager.updateImage(a,p)},s.prototype.getImage=function(a){return this.imageManager.getImage(a)},s.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},s.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(a,p,m){var g=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!p.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(p).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(l.validateStyle.source,"sources."+a,p,null,m))){this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);var x=this.sourceCaches[a]=new Q(a,p,this.dispatcher);x.style=this,x.setEventedParent(this,function(){return{isSourceLoaded:g.loaded(),source:x.serialize(),sourceId:a}}),x.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var p in this._layers)if(this._layers[p].source===a)return this.fire(new l.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+p+'" is using it.')));var m=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],m.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(a,p){this._checkLoaded(),this.sourceCaches[a].getSource().setData(p),this._changed=!0},s.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},s.prototype.addLayer=function(a,p,m){m===void 0&&(m={}),this._checkLoaded();var g=a.id;if(this.getLayer(g))this.fire(new l.ErrorEvent(new Error('Layer with id "'+g+'" already exists on this map')));else{var x;if(a.type==="custom"){if(Mi(this,l.validateCustomStyleLayer(a)))return;x=l.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(g,a.source),a=l.clone$1(a),a=l.extend(a,{source:g})),this._validate(l.validateStyle.layer,"layers."+g,a,{arrayIndex:-1},m))return;x=l.createStyleLayer(a),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[x.id]=x.serialize()}var E=p?this._order.indexOf(p):this._order.length;if(p&&E===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+p+'" does not exist on this map.')));else{if(this._order.splice(E,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){var k=this._removedLayers[g];delete this._removedLayers[g],k.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}},s.prototype.moveLayer=function(a,p){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==p){var m=this._order.indexOf(a);this._order.splice(m,1);var g=p?this._order.indexOf(p):this._order.length;p&&g===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+p+'" does not exist on this map.'))):(this._order.splice(g,0,a),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(a){this._checkLoaded();var p=this._layers[a];if(p){p.setEventedParent(null);var m=this._order.indexOf(a);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=p,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],p.onRemove&&p.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(a){return this._layers[a]},s.prototype.hasLayer=function(a){return a in this._layers},s.prototype.setLayerZoomRange=function(a,p,m){this._checkLoaded();var g=this.getLayer(a);g?g.minzoom===p&&g.maxzoom===m||(p!=null&&(g.minzoom=p),m!=null&&(g.maxzoom=m),this._updateLayer(g)):this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(a,p,m){m===void 0&&(m={}),this._checkLoaded();var g=this.getLayer(a);if(g){if(!l.deepEqual(g.filter,p))return p==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.validateStyle.filter,"layers."+g.id+".filter",p,null,m)||(g.filter=l.clone$1(p),this._updateLayer(g)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(a){return l.clone$1(this.getLayer(a).filter)},s.prototype.setLayoutProperty=function(a,p,m,g){g===void 0&&(g={}),this._checkLoaded();var x=this.getLayer(a);x?l.deepEqual(x.getLayoutProperty(p),m)||(x.setLayoutProperty(p,m,g),this._updateLayer(x)):this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(a,p){var m=this.getLayer(a);if(m)return m.getLayoutProperty(p);this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(a,p,m,g){g===void 0&&(g={}),this._checkLoaded();var x=this.getLayer(a);x?l.deepEqual(x.getPaintProperty(p),m)||(x.setPaintProperty(p,m,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(a,p){return this.getLayer(a).getPaintProperty(p)},s.prototype.setFeatureState=function(a,p){this._checkLoaded();var m=a.source,g=a.sourceLayer,x=this.sourceCaches[m];if(x!==void 0){var E=x.getSource().type;E==="geojson"&&g?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||g?(a.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,a.id,p)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(a,p){this._checkLoaded();var m=a.source,g=this.sourceCaches[m];if(g!==void 0){var x=g.getSource().type,E=x==="vector"?a.sourceLayer:void 0;x!=="vector"||E?p&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(E,a.id,p):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(a){this._checkLoaded();var p=a.source,m=a.sourceLayer,g=this.sourceCaches[p];if(g!==void 0){if(g.getSource().type!=="vector"||m)return a.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(m,a.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+p+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},s.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(a){for(var p=this,m=function(He){return p._layers[He].type==="fill-extrusion"},g={},x=[],E=this._order.length-1;E>=0;E--){var k=this._order[E];if(m(k)){g[k]=E;for(var D=0,N=a;D<N.length;D+=1){var q=N[D][k];if(q)for(var Z=0,Y=q;Z<Y.length;Z+=1)x.push(Y[Z])}}}x.sort(function(He,We){return We.intersectionZ-He.intersectionZ});for(var J=[],ie=this._order.length-1;ie>=0;ie--){var $=this._order[ie];if(m($))for(var ne=x.length-1;ne>=0;ne--){var ce=x[ne].feature;if(g[ce.layer.id]<ie)break;J.push(ce),x.pop()}else for(var ye=0,ke=a;ye<ke.length;ye+=1){var Se=ke[ye][$];if(Se)for(var ze=0,Ne=Se;ze<Ne.length;ze+=1)J.push(Ne[ze].feature)}}return J},s.prototype.queryRenderedFeatures=function(a,p,m){p&&p.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",p.filter,null,p);var g={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var x=0,E=p.layers;x<E.length;x+=1){var k=E[x],D=this._layers[k];if(!D)return this.fire(new l.ErrorEvent(new Error("The layer '"+k+"' does not exist in the map's style and cannot be queried for features."))),[];g[D.source]=!0}}var N=[];for(var q in p.availableImages=this._availableImages,this.sourceCaches)p.layers&&!g[q]||N.push(en(this.sourceCaches[q],this._layers,this._serializedLayers,a,p,m));return this.placement&&N.push(function(Z,Y,J,ie,$,ne,ce){for(var ye={},ke=ne.queryRenderedSymbols(ie),Se=[],ze=0,Ne=Object.keys(ke).map(Number);ze<Ne.length;ze+=1)Se.push(ce[Ne[ze]]);Se.sort(si);for(var He=function(){var kt=lt[We],mr=kt.featureIndex.lookupSymbolFeatures(ke[kt.bucketInstanceId],Y,kt.bucketIndex,kt.sourceLayerIndex,$.filter,$.layers,$.availableImages,Z);for(var ht in mr){var Zt=ye[ht]=ye[ht]||[],Jt=mr[ht];Jt.sort(function(Kt,Nt){var Ot=kt.featureSortOrder;if(Ot){var Vn=Ot.indexOf(Kt.featureIndex);return Ot.indexOf(Nt.featureIndex)-Vn}return Nt.featureIndex-Kt.featureIndex});for(var qt=0,jt=Jt;qt<jt.length;qt+=1)Zt.push(jt[qt])}},We=0,lt=Se;We<lt.length;We+=1)He();var Et=function(kt){ye[kt].forEach(function(mr){var ht=mr.feature,Zt=J[Z[kt].source].getFeatureState(ht.layer["source-layer"],ht.id);ht.source=ht.layer.source,ht.layer["source-layer"]&&(ht.sourceLayer=ht.layer["source-layer"]),ht.state=Zt})};for(var At in ye)Et(At);return ye}(this._layers,this._serializedLayers,this.sourceCaches,a,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(N)},s.prototype.querySourceFeatures=function(a,p){p&&p.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",p.filter,null,p);var m=this.sourceCaches[a];return m?function(g,x){for(var E=g.getRenderableIds().map(function(Y){return g.getTileByID(Y)}),k=[],D={},N=0;N<E.length;N++){var q=E[N],Z=q.tileID.canonical.key;D[Z]||(D[Z]=!0,q.querySourceFeatures(k,x))}return k}(m,p):[]},s.prototype.addSourceType=function(a,p,m){return s.getSourceType(a)?m(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:p.workerSourceURL},m):m(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(a,p){p===void 0&&(p={}),this._checkLoaded();var m=this.light.getLight(),g=!1;for(var x in a)if(!l.deepEqual(a[x],m[x])){g=!0;break}if(g){var E={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,p),this.light.updateTransitions(E)}},s.prototype._validate=function(a,p,m,g,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&Mi(this,a.call(l.validateStyle,l.extend({key:p,style:this.serialize(),value:m,styleSpec:l.styleSpec},g)))},s.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var p in this.sourceCaches)this.sourceCaches[p].clearTiles(),this.sourceCaches[p].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},s.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},s.prototype._updateSources=function(a){for(var p in this.sourceCaches)this.sourceCaches[p].update(a)},s.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},s.prototype._updatePlacement=function(a,p,m,g,x){x===void 0&&(x=!1);for(var E=!1,k=!1,D={},N=0,q=this._order;N<q.length;N+=1){var Z=this._layers[q[N]];if(Z.type==="symbol"){if(!D[Z.source]){var Y=this.sourceCaches[Z.source];D[Z.source]=Y.getRenderableIds(!0).map(function(ce){return Y.getTileByID(ce)}).sort(function(ce,ye){return ye.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(ye.tileID)?-1:1)})}var J=this.crossTileSymbolIndex.addLayer(Z,D[Z.source],a.center.lng);E=E||J}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),a.zoom))&&(this.pauseablePlacement=new Be(a,this._order,x,p,m,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),k=!0),E&&this.pauseablePlacement.placement.setStale()),k||E)for(var ie=0,$=this._order;ie<$.length;ie+=1){var ne=this._layers[$[ie]];ne.type==="symbol"&&this.placement.updateLayerOpacities(ne,D[ne.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,p,m){this.imageManager.getImages(p.icons,m),this._updateTilesForChangedImages();var g=this.sourceCaches[p.source];g&&g.setDependencies(p.tileID.key,p.type,p.icons)},s.prototype.getGlyphs=function(a,p,m){this.glyphManager.getGlyphs(p.stacks,m)},s.prototype.getResource=function(a,p,m){return l.makeRequest(p,m)},s}(l.Evented);qr.getSourceType=function(o){return Gr[o]},qr.setSourceType=function(o,s){Gr[o]=s},qr.registerForPluginStateChange=l.registerForPluginStateChange;var nn=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),Oa=Er(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),vo=Er(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Nl=Er(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),jl=Er(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Ku=Er("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),lu=Er(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),os=Er(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),cu=Er("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ju=Er("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Vl=Er("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ra=Er(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),as=Er(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Os=Er(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ql=Er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Tn=Er(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Fa=Er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Mo=Er(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),zo=Er(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Xo=Er(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),go=Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),pa=Er(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ba=Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ua=Er(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ha=Er(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Zl=Er(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Yu=Er(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Er(o,s){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=s.match(/attribute ([\w]+) ([\w]+)/g),m=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=g?g.concat(m):m,E={};return{fragmentSource:o=o.replace(a,function(k,D,N,q,Z){return E[Z]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_`+Z+`
varying `+N+" "+q+" "+Z+`;
#else
uniform `+N+" "+q+" u_"+Z+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Z+`
    `+N+" "+q+" "+Z+" = u_"+Z+`;
#endif
`}),vertexSource:s=s.replace(a,function(k,D,N,q,Z){var Y=q==="float"?"vec2":"vec4",J=Z.match(/color/)?"color":Y;return E[Z]?D==="define"?`
#ifndef HAS_UNIFORM_u_`+Z+`
uniform lowp float u_`+Z+`_t;
attribute `+N+" "+Y+" a_"+Z+`;
varying `+N+" "+q+" "+Z+`;
#else
uniform `+N+" "+q+" u_"+Z+`;
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+Z+" = a_"+Z+`;
#else
    `+N+" "+q+" "+Z+" = u_"+Z+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+Z+" = unpack_mix_"+J+"(a_"+Z+", u_"+Z+`_t);
#else
    `+N+" "+q+" "+Z+" = u_"+Z+`;
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_`+Z+`
uniform lowp float u_`+Z+`_t;
attribute `+N+" "+Y+" a_"+Z+`;
#else
uniform `+N+" "+q+" u_"+Z+`;
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+N+" "+q+" "+Z+" = a_"+Z+`;
#else
    `+N+" "+q+" "+Z+" = u_"+Z+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+N+" "+q+" "+Z+" = unpack_mix_"+J+"(a_"+Z+", u_"+Z+`_t);
#else
    `+N+" "+q+" "+Z+" = u_"+Z+`;
#endif
`}),staticAttributes:p,staticUniforms:x}}var Na=Object.freeze({__proto__:null,prelude:Oa,background:vo,backgroundPattern:Nl,circle:jl,clippingMask:Ku,heatmap:lu,heatmapTexture:os,collisionBox:cu,collisionCircle:Ju,debug:Vl,fill:Ra,fillOutline:as,fillOutlinePattern:Os,fillPattern:ql,fillExtrusion:Tn,fillExtrusionPattern:Fa,hillshadePrepare:Mo,hillshade:zo,line:Xo,lineGradient:go,linePattern:pa,lineSDF:Ba,raster:Ua,symbolIcon:ha,symbolSDF:Zl,symbolTextAndIcon:Yu}),Xi=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function fa(o){for(var s=[],a=0;a<o.length;a++)if(o[a]!==null){var p=o[a].split(" ");s.push(p.pop())}return s}Xi.prototype.bind=function(o,s,a,p,m,g,x,E){this.context=o;for(var k=this.boundPaintVertexBuffers.length!==p.length,D=0;!k&&D<p.length;D++)this.boundPaintVertexBuffers[D]!==p[D]&&(k=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===a&&!k&&this.boundIndexBuffer===m&&this.boundVertexOffset===g&&this.boundDynamicVertexBuffer===x&&this.boundDynamicVertexBuffer2===E?(o.bindVertexArrayOES.set(this.vao),x&&x.bind(),m&&m.dynamicDraw&&m.bind(),E&&E.bind()):this.freshBind(s,a,p,m,g,x,E)},Xi.prototype.freshBind=function(o,s,a,p,m,g,x){var E,k=o.numAttributes,D=this.context,N=D.gl;if(D.extVertexArrayObject)this.vao&&this.destroy(),this.vao=D.extVertexArrayObject.createVertexArrayOES(),D.bindVertexArrayOES.set(this.vao),E=0,this.boundProgram=o,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=p,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=g,this.boundDynamicVertexBuffer2=x;else{E=D.currentNumAttributes||0;for(var q=k;q<E;q++)N.disableVertexAttribArray(q)}s.enableAttributes(N,o);for(var Z=0,Y=a;Z<Y.length;Z+=1)Y[Z].enableAttributes(N,o);g&&g.enableAttributes(N,o),x&&x.enableAttributes(N,o),s.bind(),s.setVertexAttribPointers(N,o,m);for(var J=0,ie=a;J<ie.length;J+=1){var $=ie[J];$.bind(),$.setVertexAttribPointers(N,o,m)}g&&(g.bind(),g.setVertexAttribPointers(N,o,m)),p&&p.bind(),x&&(x.bind(),x.setVertexAttribPointers(N,o,m)),D.currentNumAttributes=k},Xi.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Rs=function(o,s,a,p,m,g){var x=o.gl;this.program=x.createProgram();for(var E=fa(a.staticAttributes),k=p?p.getBinderAttributes():[],D=E.concat(k),N=a.staticUniforms?fa(a.staticUniforms):[],q=p?p.getBinderUniforms():[],Z=[],Y=0,J=N.concat(q);Y<J.length;Y+=1){var ie=J[Y];Z.indexOf(ie)<0&&Z.push(ie)}var $=p?p.defines():[];g&&$.push("#define OVERDRAW_INSPECTOR;");var ne=$.concat(Oa.fragmentSource,a.fragmentSource).join(`
`),ce=$.concat(Oa.vertexSource,a.vertexSource).join(`
`),ye=x.createShader(x.FRAGMENT_SHADER);if(x.isContextLost())this.failedToCreate=!0;else{x.shaderSource(ye,ne),x.compileShader(ye),x.attachShader(this.program,ye);var ke=x.createShader(x.VERTEX_SHADER);if(x.isContextLost())this.failedToCreate=!0;else{x.shaderSource(ke,ce),x.compileShader(ke),x.attachShader(this.program,ke),this.attributes={};var Se={};this.numAttributes=D.length;for(var ze=0;ze<this.numAttributes;ze++)D[ze]&&(x.bindAttribLocation(this.program,ze,D[ze]),this.attributes[D[ze]]=ze);x.linkProgram(this.program),x.deleteShader(ke),x.deleteShader(ye);for(var Ne=0;Ne<Z.length;Ne++){var He=Z[Ne];if(He&&!Se[He]){var We=x.getUniformLocation(this.program,He);We&&(Se[He]=We)}}this.fixedUniforms=m(o,Se),this.binderUniforms=p?p.getUniforms(o,Se):[]}}};function Ko(o,s,a){var p=1/Vr(a,1,s.transform.tileZoom),m=Math.pow(2,a.tileID.overscaledZ),g=a.tileSize*Math.pow(2,s.transform.tileZoom)/m,x=g*(a.tileID.canonical.x+a.tileID.wrap*m),E=g*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[p,o.fromScale,o.toScale],u_fade:o.t,u_pixel_coord_upper:[x>>16,E>>16],u_pixel_coord_lower:[65535&x,65535&E]}}Rs.prototype.draw=function(o,s,a,p,m,g,x,E,k,D,N,q,Z,Y,J,ie){var $,ne=o.gl;if(!this.failedToCreate){for(var ce in o.program.set(this.program),o.setDepthMode(a),o.setStencilMode(p),o.setColorMode(m),o.setCullFace(g),this.fixedUniforms)this.fixedUniforms[ce].set(x[ce]);Y&&Y.setUniforms(o,this.binderUniforms,q,{zoom:Z});for(var ye=($={},$[ne.LINES]=2,$[ne.TRIANGLES]=3,$[ne.LINE_STRIP]=1,$)[s],ke=0,Se=N.get();ke<Se.length;ke+=1){var ze=Se[ke],Ne=ze.vaos||(ze.vaos={});(Ne[E]||(Ne[E]=new Xi)).bind(o,this,k,Y?Y.getPaintVertexBuffers():[],D,ze.vertexOffset,J,ie),ne.drawElements(s,ze.primitiveLength*ye,ne.UNSIGNED_SHORT,ze.primitiveOffset*ye*2)}}};var Gl=function(o,s,a,p){var m=s.style.light,g=m.properties.get("position"),x=[g.x,g.y,g.z],E=l.create$1();m.properties.get("anchor")==="viewport"&&l.fromRotation(E,-s.transform.angle),l.transformMat3(x,x,E);var k=m.properties.get("color");return{u_matrix:o,u_lightpos:x,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+a,u_opacity:p}},Lo=function(o,s,a,p,m,g,x){return l.extend(Gl(o,s,a,p),Ko(g,s,x),{u_height_factor:-Math.pow(2,m.overscaledZ)/x.tileSize/8})},Ki=function(o){return{u_matrix:o}},da=function(o,s,a,p){return l.extend(Ki(o),Ko(a,s,p))},Qu=function(o,s){return{u_matrix:o,u_world:s}},Wl=function(o,s,a,p,m){return l.extend(da(o,s,a,p),{u_world:m})},el=function(o,s,a,p){var m,g,x=o.transform;if(p.paint.get("circle-pitch-alignment")==="map"){var E=Vr(a,1,x.zoom);m=!0,g=[E,E]}else m=!1,g=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:o.translatePosMatrix(s.posMatrix,a,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:g}},ma=function(o,s,a){var p=Vr(a,1,s.zoom),m=Math.pow(2,s.zoom-a.tileID.overscaledZ),g=a.tileID.overscaleFactor();return{u_matrix:o,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[s.pixelsToGLUnits[0]/(p*m),s.pixelsToGLUnits[1]/(p*m)],u_overscale_factor:g}},tl=function(o,s,a){return{u_matrix:o,u_inv_matrix:s,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},Do=function(o,s,a){return a===void 0&&(a=1),{u_matrix:o,u_color:s,u_overlay:0,u_overlay_scale:a}},Ji=function(o){return{u_matrix:o}},$l=function(o,s,a,p){return{u_matrix:o,u_extrude_scale:Vr(s,1,a),u_intensity:p}},Yi=function(o,s,a){var p=o.transform;return{u_matrix:Fs(o,s,a),u_ratio:1/Vr(s,1,p.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Fr=function(o,s,a,p){return l.extend(Yi(o,s,a),{u_image:0,u_image_height:p})},Oo=function(o,s,a,p){var m=o.transform,g=ss(s,m);return{u_matrix:Fs(o,s,a),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Vr(s,1,m.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[g,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Hl=function(o,s,a,p,m){var g=o.lineAtlas,x=ss(s,o.transform),E=a.layout.get("line-cap")==="round",k=g.getDash(p.from,E),D=g.getDash(p.to,E),N=k.width*m.fromScale,q=D.width*m.toScale;return l.extend(Yi(o,s,a),{u_patternscale_a:[x/N,-k.height/2],u_patternscale_b:[x/q,-D.height/2],u_sdfgamma:g.width/(256*Math.min(N,q)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:D.y,u_mix:m.t})};function ss(o,s){return 1/Vr(o,1,s.tileZoom)}function Fs(o,s,a){return o.translatePosMatrix(s.tileID.posMatrix,s,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var rl=function(o,s,a,p,m){return{u_matrix:o,u_tl_parent:s,u_scale_parent:a,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(x=m.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(g=m.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:nl(m.paint.get("raster-hue-rotate"))};var g,x};function nl(o){o*=Math.PI/180;var s=Math.sin(o),a=Math.cos(o);return[(2*a+1)/3,(-Math.sqrt(3)*s-a+1)/3,(Math.sqrt(3)*s-a+1)/3]}var Bs,ja=function(o,s,a,p,m,g,x,E,k,D){var N=m.transform;return{u_is_size_zoom_constant:+(o==="constant"||o==="source"),u_is_size_feature_constant:+(o==="constant"||o==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:N.cameraToCenterDistance,u_pitch:N.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:N.width/N.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:g,u_label_plane_matrix:x,u_coord_matrix:E,u_is_text:+k,u_pitch_with_map:+p,u_texsize:D,u_texture:0}},Jo=function(o,s,a,p,m,g,x,E,k,D,N){var q=m.transform;return l.extend(ja(o,s,a,p,m,g,x,E,k,D),{u_gamma_scale:p?Math.cos(q._pitch)*q.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+N})},Us=function(o,s,a,p,m,g,x,E,k,D){return l.extend(Jo(o,s,a,p,m,g,x,E,!0,k,!0),{u_texsize_icon:D,u_texture_icon:1})},Ns=function(o,s,a){return{u_matrix:o,u_opacity:s,u_color:a}},de=function(o,s,a,p,m,g){return l.extend(function(x,E,k,D){var N=k.imageManager.getPattern(x.from.toString()),q=k.imageManager.getPattern(x.to.toString()),Z=k.imageManager.getPixelSize(),Y=Z.width,J=Z.height,ie=Math.pow(2,D.tileID.overscaledZ),$=D.tileSize*Math.pow(2,k.transform.tileZoom)/ie,ne=$*(D.tileID.canonical.x+D.tileID.wrap*ie),ce=$*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[Y,J],u_mix:E.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Vr(D,1,k.transform.tileZoom),u_pixel_coord_upper:[ne>>16,ce>>16],u_pixel_coord_lower:[65535&ne,65535&ce]}}(p,g,a,m),{u_matrix:o,u_opacity:s})},Oe={fillExtrusion:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_lightpos:new l.Uniform3f(o,s.u_lightpos),u_lightintensity:new l.Uniform1f(o,s.u_lightintensity),u_lightcolor:new l.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new l.Uniform1f(o,s.u_vertical_gradient),u_opacity:new l.Uniform1f(o,s.u_opacity)}},fillExtrusionPattern:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_lightpos:new l.Uniform3f(o,s.u_lightpos),u_lightintensity:new l.Uniform1f(o,s.u_lightintensity),u_lightcolor:new l.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new l.Uniform1f(o,s.u_vertical_gradient),u_height_factor:new l.Uniform1f(o,s.u_height_factor),u_image:new l.Uniform1i(o,s.u_image),u_texsize:new l.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,s.u_scale),u_fade:new l.Uniform1f(o,s.u_fade),u_opacity:new l.Uniform1f(o,s.u_opacity)}},fill:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix)}},fillPattern:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_image:new l.Uniform1i(o,s.u_image),u_texsize:new l.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,s.u_scale),u_fade:new l.Uniform1f(o,s.u_fade)}},fillOutline:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_world:new l.Uniform2f(o,s.u_world)}},fillOutlinePattern:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_world:new l.Uniform2f(o,s.u_world),u_image:new l.Uniform1i(o,s.u_image),u_texsize:new l.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,s.u_scale),u_fade:new l.Uniform1f(o,s.u_fade)}},circle:function(o,s){return{u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(o,s.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(o,s.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(o,s.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(o,s.u_matrix)}},collisionBox:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(o,s.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(o,s.u_extrude_scale),u_overscale_factor:new l.Uniform1f(o,s.u_overscale_factor)}},collisionCircle:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_inv_matrix:new l.UniformMatrix4f(o,s.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(o,s.u_viewport_size)}},debug:function(o,s){return{u_color:new l.UniformColor(o,s.u_color),u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_overlay:new l.Uniform1i(o,s.u_overlay),u_overlay_scale:new l.Uniform1f(o,s.u_overlay_scale)}},clippingMask:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix)}},heatmap:function(o,s){return{u_extrude_scale:new l.Uniform1f(o,s.u_extrude_scale),u_intensity:new l.Uniform1f(o,s.u_intensity),u_matrix:new l.UniformMatrix4f(o,s.u_matrix)}},heatmapTexture:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_world:new l.Uniform2f(o,s.u_world),u_image:new l.Uniform1i(o,s.u_image),u_color_ramp:new l.Uniform1i(o,s.u_color_ramp),u_opacity:new l.Uniform1f(o,s.u_opacity)}},hillshade:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_image:new l.Uniform1i(o,s.u_image),u_latrange:new l.Uniform2f(o,s.u_latrange),u_light:new l.Uniform2f(o,s.u_light),u_shadow:new l.UniformColor(o,s.u_shadow),u_highlight:new l.UniformColor(o,s.u_highlight),u_accent:new l.UniformColor(o,s.u_accent)}},hillshadePrepare:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_image:new l.Uniform1i(o,s.u_image),u_dimension:new l.Uniform2f(o,s.u_dimension),u_zoom:new l.Uniform1f(o,s.u_zoom),u_unpack:new l.Uniform4f(o,s.u_unpack)}},line:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_ratio:new l.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,s.u_units_to_pixels)}},lineGradient:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_ratio:new l.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,s.u_units_to_pixels),u_image:new l.Uniform1i(o,s.u_image),u_image_height:new l.Uniform1f(o,s.u_image_height)}},linePattern:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_texsize:new l.Uniform2f(o,s.u_texsize),u_ratio:new l.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_image:new l.Uniform1i(o,s.u_image),u_units_to_pixels:new l.Uniform2f(o,s.u_units_to_pixels),u_scale:new l.Uniform3f(o,s.u_scale),u_fade:new l.Uniform1f(o,s.u_fade)}},lineSDF:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_ratio:new l.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,s.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(o,s.u_patternscale_a),u_patternscale_b:new l.Uniform2f(o,s.u_patternscale_b),u_sdfgamma:new l.Uniform1f(o,s.u_sdfgamma),u_image:new l.Uniform1i(o,s.u_image),u_tex_y_a:new l.Uniform1f(o,s.u_tex_y_a),u_tex_y_b:new l.Uniform1f(o,s.u_tex_y_b),u_mix:new l.Uniform1f(o,s.u_mix)}},raster:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_tl_parent:new l.Uniform2f(o,s.u_tl_parent),u_scale_parent:new l.Uniform1f(o,s.u_scale_parent),u_buffer_scale:new l.Uniform1f(o,s.u_buffer_scale),u_fade_t:new l.Uniform1f(o,s.u_fade_t),u_opacity:new l.Uniform1f(o,s.u_opacity),u_image0:new l.Uniform1i(o,s.u_image0),u_image1:new l.Uniform1i(o,s.u_image1),u_brightness_low:new l.Uniform1f(o,s.u_brightness_low),u_brightness_high:new l.Uniform1f(o,s.u_brightness_high),u_saturation_factor:new l.Uniform1f(o,s.u_saturation_factor),u_contrast_factor:new l.Uniform1f(o,s.u_contrast_factor),u_spin_weights:new l.Uniform3f(o,s.u_spin_weights)}},symbolIcon:function(o,s){return{u_is_size_zoom_constant:new l.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,s.u_size_t),u_size:new l.Uniform1f(o,s.u_size),u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,s.u_pitch),u_rotate_symbol:new l.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,s.u_fade_change),u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new l.Uniform1i(o,s.u_is_text),u_pitch_with_map:new l.Uniform1i(o,s.u_pitch_with_map),u_texsize:new l.Uniform2f(o,s.u_texsize),u_texture:new l.Uniform1i(o,s.u_texture)}},symbolSDF:function(o,s){return{u_is_size_zoom_constant:new l.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,s.u_size_t),u_size:new l.Uniform1f(o,s.u_size),u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,s.u_pitch),u_rotate_symbol:new l.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,s.u_fade_change),u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new l.Uniform1i(o,s.u_is_text),u_pitch_with_map:new l.Uniform1i(o,s.u_pitch_with_map),u_texsize:new l.Uniform2f(o,s.u_texsize),u_texture:new l.Uniform1i(o,s.u_texture),u_gamma_scale:new l.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(o,s.u_is_halo)}},symbolTextAndIcon:function(o,s){return{u_is_size_zoom_constant:new l.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,s.u_size_t),u_size:new l.Uniform1f(o,s.u_size),u_camera_to_center_distance:new l.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,s.u_pitch),u_rotate_symbol:new l.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,s.u_fade_change),u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new l.Uniform1i(o,s.u_is_text),u_pitch_with_map:new l.Uniform1i(o,s.u_pitch_with_map),u_texsize:new l.Uniform2f(o,s.u_texsize),u_texsize_icon:new l.Uniform2f(o,s.u_texsize_icon),u_texture:new l.Uniform1i(o,s.u_texture),u_texture_icon:new l.Uniform1i(o,s.u_texture_icon),u_gamma_scale:new l.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(o,s.u_is_halo)}},background:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_opacity:new l.Uniform1f(o,s.u_opacity),u_color:new l.UniformColor(o,s.u_color)}},backgroundPattern:function(o,s){return{u_matrix:new l.UniformMatrix4f(o,s.u_matrix),u_opacity:new l.Uniform1f(o,s.u_opacity),u_image:new l.Uniform1i(o,s.u_image),u_pattern_tl_a:new l.Uniform2f(o,s.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(o,s.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(o,s.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(o,s.u_pattern_br_b),u_texsize:new l.Uniform2f(o,s.u_texsize),u_mix:new l.Uniform1f(o,s.u_mix),u_pattern_size_a:new l.Uniform2f(o,s.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(o,s.u_pattern_size_b),u_scale_a:new l.Uniform1f(o,s.u_scale_a),u_scale_b:new l.Uniform1f(o,s.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,s.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(o,s.u_tile_units_to_pixels)}}};function nt(o,s,a,p,m,g,x){for(var E=o.context,k=E.gl,D=o.useProgram("collisionBox"),N=[],q=0,Z=0,Y=0;Y<p.length;Y++){var J=p[Y],ie=s.getTile(J),$=ie.getBucket(a);if($){var ne=J.posMatrix;m[0]===0&&m[1]===0||(ne=o.translatePosMatrix(J.posMatrix,ie,m,g));var ce=x?$.textCollisionBox:$.iconCollisionBox,ye=$.collisionCircleArray;if(ye.length>0){var ke=l.create(),Se=ne;l.mul(ke,$.placementInvProjMatrix,o.transform.glCoordMatrix),l.mul(ke,ke,$.placementViewportMatrix),N.push({circleArray:ye,circleOffset:Z,transform:Se,invTransform:ke}),Z=q+=ye.length/4}ce&&D.draw(E,k.LINES,G.disabled,X.disabled,o.colorModeForRenderPass(),pe.disabled,ma(ne,o.transform,ie),a.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,null,o.transform.zoom,null,null,ce.collisionVertexBuffer)}}if(x&&N.length){var ze=o.useProgram("collisionCircle"),Ne=new l.StructArrayLayout2f1f2i16;Ne.resize(4*q),Ne._trim();for(var He=0,We=0,lt=N;We<lt.length;We+=1)for(var Et=lt[We],At=0;At<Et.circleArray.length/4;At++){var kt=4*At,mr=Et.circleArray[kt+0],ht=Et.circleArray[kt+1],Zt=Et.circleArray[kt+2],Jt=Et.circleArray[kt+3];Ne.emplace(He++,mr,ht,Zt,Jt,0),Ne.emplace(He++,mr,ht,Zt,Jt,1),Ne.emplace(He++,mr,ht,Zt,Jt,2),Ne.emplace(He++,mr,ht,Zt,Jt,3)}(!Bs||Bs.length<2*q)&&(Bs=function(fn){var pi=2*fn,Qn=new l.StructArrayLayout3ui6;Qn.resize(pi),Qn._trim();for(var un=0;un<pi;un++){var _n=6*un;Qn.uint16[_n+0]=4*un+0,Qn.uint16[_n+1]=4*un+1,Qn.uint16[_n+2]=4*un+2,Qn.uint16[_n+3]=4*un+2,Qn.uint16[_n+4]=4*un+3,Qn.uint16[_n+5]=4*un+0}return Qn}(q));for(var qt=E.createIndexBuffer(Bs,!0),jt=E.createVertexBuffer(Ne,l.collisionCircleLayout.members,!0),Kt=0,Nt=N;Kt<Nt.length;Kt+=1){var Ot=Nt[Kt],Vn=tl(Ot.transform,Ot.invTransform,o.transform);ze.draw(E,k.TRIANGLES,G.disabled,X.disabled,o.colorModeForRenderPass(),pe.disabled,Vn,a.id,jt,qt,l.SegmentVector.simpleSegment(0,2*Ot.circleOffset,Ot.circleArray.length,Ot.circleArray.length/2),null,o.transform.zoom,null,null,null)}jt.destroy(),qt.destroy()}}var wt=l.identity(new Float32Array(16));function Wr(o,s,a,p,m,g){var x=l.getAnchorAlignment(o),E=-(x.horizontalAlign-.5)*s,k=-(x.verticalAlign-.5)*a,D=l.evaluateVariableOffset(o,p);return new l.Point((E/m+D[0])*g,(k/m+D[1])*g)}function dr(o,s,a,p,m,g,x,E,k,D,N){var q=o.text.placedSymbolArray,Z=o.text.dynamicLayoutVertexArray,Y=o.icon.dynamicLayoutVertexArray,J={};Z.clear();for(var ie=0;ie<q.length;ie++){var $=q.get(ie),ne=$.hidden||!$.crossTileID||o.allowVerticalPlacement&&!$.placedOrientation?null:p[$.crossTileID];if(ne){var ce=new l.Point($.anchorX,$.anchorY),ye=Dt(ce,a?E:x),ke=fr(g.cameraToCenterDistance,ye.signedDistanceFromCamera),Se=m.evaluateSizeForFeature(o.textSizeData,D,$)*ke/l.ONE_EM;a&&(Se*=o.tilePixelRatio/k);for(var ze=Wr(ne.anchor,ne.width,ne.height,ne.textOffset,ne.textBoxScale,Se),Ne=a?Dt(ce.add(ze),x).point:ye.point.add(s?ze.rotate(-g.angle):ze),He=o.allowVerticalPlacement&&$.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,We=0;We<$.numGlyphs;We++)l.addDynamicAttributes(Z,Ne,He);N&&$.associatedIconIndex>=0&&(J[$.associatedIconIndex]={shiftedAnchor:Ne,angle:He})}else ii($.numGlyphs,Z)}if(N){Y.clear();for(var lt=o.icon.placedSymbolArray,Et=0;Et<lt.length;Et++){var At=lt.get(Et);if(At.hidden)ii(At.numGlyphs,Y);else{var kt=J[Et];if(kt)for(var mr=0;mr<At.numGlyphs;mr++)l.addDynamicAttributes(Y,kt.shiftedAnchor,kt.angle);else ii(At.numGlyphs,Y)}}o.icon.dynamicLayoutVertexBuffer.updateData(Y)}o.text.dynamicLayoutVertexBuffer.updateData(Z)}function sn(o,s,a){return a.iconsInText&&s?"symbolTextAndIcon":o?"symbolSDF":"symbolIcon"}function $r(o,s,a,p,m,g,x,E,k,D,N,q){for(var Z=o.context,Y=Z.gl,J=o.transform,ie=E==="map",$=k==="map",ne=ie&&a.layout.get("symbol-placement")!=="point",ce=ie&&!$&&!ne,ye=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,ke=!1,Se=o.depthModeForSublayer(0,G.ReadOnly),ze=a.layout.get("text-variable-anchor"),Ne=[],He=0,We=p;He<We.length;He+=1){var lt=We[He],Et=s.getTile(lt),At=Et.getBucket(a);if(At){var kt=m?At.text:At.icon;if(kt&&kt.segments.get().length){var mr=kt.programConfigurations.get(a.id),ht=m||At.sdfIcons,Zt=m?At.textSizeData:At.iconSizeData,Jt=$||J.pitch!==0,qt=o.useProgram(sn(ht,m,At),mr),jt=l.evaluateSizeForZoom(Zt,J.zoom),Kt=void 0,Nt=[0,0],Ot=void 0,Vn=void 0,fn=null,pi=void 0;if(m)Ot=Et.glyphAtlasTexture,Vn=Y.LINEAR,Kt=Et.glyphAtlasTexture.size,At.iconsInText&&(Nt=Et.imageAtlasTexture.size,fn=Et.imageAtlasTexture,pi=Jt||o.options.rotating||o.options.zooming||Zt.kind==="composite"||Zt.kind==="camera"?Y.LINEAR:Y.NEAREST);else{var Qn=a.layout.get("icon-size").constantOr(0)!==1||At.iconsNeedLinear;Ot=Et.imageAtlasTexture,Vn=ht||o.options.rotating||o.options.zooming||Qn||Jt?Y.LINEAR:Y.NEAREST,Kt=Et.imageAtlasTexture.size}var un=Vr(Et,1,o.transform.zoom),_n=tn(lt.posMatrix,$,ie,o.transform,un),ao=Sr(lt.posMatrix,$,ie,o.transform,un),_i=ze&&At.hasTextData(),hs=a.layout.get("icon-text-fit")!=="none"&&_i&&At.hasIconData();ne&&Hi(At,lt.posMatrix,o,m,_n,ao,$,D);var Li=o.translatePosMatrix(lt.posMatrix,Et,g,x),oa=ne||m&&ze||hs?wt:_n,Uo=o.translatePosMatrix(ao,Et,g,x,!0),ll=ht&&a.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,vu={program:qt,buffers:kt,uniformValues:ht?At.iconsInText?Us(Zt.kind,jt,ce,$,o,Li,oa,Uo,Kt,Nt):Jo(Zt.kind,jt,ce,$,o,Li,oa,Uo,m,Kt,!0):ja(Zt.kind,jt,ce,$,o,Li,oa,Uo,m,Kt),atlasTexture:Ot,atlasTextureIcon:fn,atlasInterpolation:Vn,atlasInterpolationIcon:pi,isSDF:ht,hasHalo:ll};if(ye&&At.canOverlap){ke=!0;for(var fs=0,gu=kt.segments.get();fs<gu.length;fs+=1){var cl=gu[fs];Ne.push({segments:new l.SegmentVector([cl]),sortKey:cl.sortKey,state:vu})}}else Ne.push({segments:kt.segments,sortKey:0,state:vu})}}}ke&&Ne.sort(function(ds,$s){return ds.sortKey-$s.sortKey});for(var wa=0,pl=Ne;wa<pl.length;wa+=1){var Sa=pl[wa],qn=Sa.state;if(Z.activeTexture.set(Y.TEXTURE0),qn.atlasTexture.bind(qn.atlasInterpolation,Y.CLAMP_TO_EDGE),qn.atlasTextureIcon&&(Z.activeTexture.set(Y.TEXTURE1),qn.atlasTextureIcon&&qn.atlasTextureIcon.bind(qn.atlasInterpolationIcon,Y.CLAMP_TO_EDGE)),qn.isSDF){var $a=qn.uniformValues;qn.hasHalo&&($a.u_is_halo=1,ci(qn.buffers,Sa.segments,a,o,qn.program,Se,N,q,$a)),$a.u_is_halo=0}ci(qn.buffers,Sa.segments,a,o,qn.program,Se,N,q,qn.uniformValues)}}function ci(o,s,a,p,m,g,x,E,k){var D=p.context;m.draw(D,D.gl.TRIANGLES,g,x,E,pe.disabled,k,a.id,o.layoutVertexBuffer,o.indexBuffer,s,a.paint,p.transform.zoom,o.programConfigurations.get(a.id),o.dynamicLayoutVertexBuffer,o.opacityVertexBuffer)}function pn(o,s,a,p,m,g,x){var E,k,D,N,q,Z=o.context.gl,Y=a.paint.get("fill-pattern"),J=Y&&Y.constantOr(1),ie=a.getCrossfadeParameters();x?(k=J&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",E=Z.LINES):(k=J?"fillPattern":"fill",E=Z.TRIANGLES);for(var $=0,ne=p;$<ne.length;$+=1){var ce=ne[$],ye=s.getTile(ce);if(!J||ye.patternsLoaded()){var ke=ye.getBucket(a);if(ke){var Se=ke.programConfigurations.get(a.id),ze=o.useProgram(k,Se);J&&(o.context.activeTexture.set(Z.TEXTURE0),ye.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Se.updatePaintBuffers(ie));var Ne=Y.constantOr(null);if(Ne&&ye.imageAtlas){var He=ye.imageAtlas,We=He.patternPositions[Ne.to.toString()],lt=He.patternPositions[Ne.from.toString()];We&&lt&&Se.setConstantPatternPositions(We,lt)}var Et=o.translatePosMatrix(ce.posMatrix,ye,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(x){N=ke.indexBuffer2,q=ke.segments2;var At=[Z.drawingBufferWidth,Z.drawingBufferHeight];D=k==="fillOutlinePattern"&&J?Wl(Et,o,ie,ye,At):Qu(Et,At)}else N=ke.indexBuffer,q=ke.segments,D=J?da(Et,o,ie,ye):Ki(Et);ze.draw(o.context,E,m,o.stencilModeForClipping(ce),g,pe.disabled,D,a.id,ke.layoutVertexBuffer,N,q,a.paint,o.transform.zoom,Se)}}}}function gn(o,s,a,p,m,g,x){for(var E=o.context,k=E.gl,D=a.paint.get("fill-extrusion-pattern"),N=D.constantOr(1),q=a.getCrossfadeParameters(),Z=a.paint.get("fill-extrusion-opacity"),Y=0,J=p;Y<J.length;Y+=1){var ie=J[Y],$=s.getTile(ie),ne=$.getBucket(a);if(ne){var ce=ne.programConfigurations.get(a.id),ye=o.useProgram(N?"fillExtrusionPattern":"fillExtrusion",ce);N&&(o.context.activeTexture.set(k.TEXTURE0),$.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ce.updatePaintBuffers(q));var ke=D.constantOr(null);if(ke&&$.imageAtlas){var Se=$.imageAtlas,ze=Se.patternPositions[ke.to.toString()],Ne=Se.patternPositions[ke.from.toString()];ze&&Ne&&ce.setConstantPatternPositions(ze,Ne)}var He=o.translatePosMatrix(ie.posMatrix,$,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),We=a.paint.get("fill-extrusion-vertical-gradient"),lt=N?Lo(He,o,We,Z,ie,q,$):Gl(He,o,We,Z);ye.draw(E,E.gl.TRIANGLES,m,g,x,pe.backCCW,lt,a.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,a.paint,o.transform.zoom,ce)}}}function zi(o,s,a,p,m,g){var x=o.context,E=x.gl,k=s.fbo;if(k){var D=o.useProgram("hillshade");x.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,k.colorAttachment.get());var N=function(q,Z,Y){var J=Y.paint.get("hillshade-shadow-color"),ie=Y.paint.get("hillshade-highlight-color"),$=Y.paint.get("hillshade-accent-color"),ne=Y.paint.get("hillshade-illumination-direction")*(Math.PI/180);Y.paint.get("hillshade-illumination-anchor")==="viewport"&&(ne-=q.transform.angle);var ce,ye,ke,Se=!q.options.moving;return{u_matrix:q.transform.calculatePosMatrix(Z.tileID.toUnwrapped(),Se),u_image:0,u_latrange:(ce=Z.tileID,ye=Math.pow(2,ce.canonical.z),ke=ce.canonical.y,[new l.MercatorCoordinate(0,ke/ye).toLngLat().lat,new l.MercatorCoordinate(0,(ke+1)/ye).toLngLat().lat]),u_light:[Y.paint.get("hillshade-exaggeration"),ne],u_shadow:J,u_highlight:ie,u_accent:$}}(o,s,a);D.draw(x,E.TRIANGLES,p,m,g,pe.disabled,N,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}}function Yo(o,s,a,p,m,g){var x=o.context,E=x.gl,k=s.dem;if(k&&k.data){var D=k.dim,N=k.stride,q=k.getPixels();if(x.activeTexture.set(E.TEXTURE1),x.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||o.getTileTexture(N),s.demTexture){var Z=s.demTexture;Z.update(q,{premultiply:!1}),Z.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else s.demTexture=new l.Texture(x,q,E.RGBA,{premultiply:!1}),s.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);x.activeTexture.set(E.TEXTURE0);var Y=s.fbo;if(!Y){var J=new l.Texture(x,{width:D,height:D,data:null},E.RGBA);J.bind(E.LINEAR,E.CLAMP_TO_EDGE),(Y=s.fbo=x.createFramebuffer(D,D,!0)).colorAttachment.set(J.texture)}x.bindFramebuffer.set(Y.framebuffer),x.viewport.set([0,0,D,D]),o.useProgram("hillshadePrepare").draw(x,E.TRIANGLES,p,m,g,pe.disabled,function(ie,$){var ne=$.stride,ce=l.create();return l.ortho(ce,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ce,ce,[0,-l.EXTENT,0]),{u_matrix:ce,u_image:1,u_dimension:[ne,ne],u_zoom:ie.overscaledZ,u_unpack:$.getUnpackVector()}}(s.tileID,k),a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function jn(o,s,a,p,m){var g=p.paint.get("raster-fade-duration");if(g>0){var x=l.browser.now(),E=(x-o.timeAdded)/g,k=s?(x-s.timeAdded)/g:-1,D=a.getSource(),N=m.coveringZoomLevel({tileSize:D.tileSize,roundZoom:D.roundZoom}),q=!s||Math.abs(s.tileID.overscaledZ-N)>Math.abs(o.tileID.overscaledZ-N),Z=q&&o.refreshedUponExpiration?1:l.clamp(q?E:1-k,0,1);return o.refreshedUponExpiration&&E>=1&&(o.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}var _o=new l.Color(1,0,0,1),Va=new l.Color(0,1,0,1),js=new l.Color(0,0,1,1),Qo=new l.Color(1,0,1,1),qa=new l.Color(0,1,1,1);function pu(o,s,a,p){Vs(o,0,s+a/2,o.transform.width,a,p)}function il(o,s,a,p){Vs(o,s-a/2,0,a,o.transform.height,p)}function Vs(o,s,a,p,m,g){var x=o.context,E=x.gl;E.enable(E.SCISSOR_TEST),E.scissor(s*l.browser.devicePixelRatio,a*l.browser.devicePixelRatio,p*l.browser.devicePixelRatio,m*l.browser.devicePixelRatio),x.clear({color:g}),E.disable(E.SCISSOR_TEST)}function jr(o,s,a){var p=o.context,m=p.gl,g=a.posMatrix,x=o.useProgram("debug"),E=G.disabled,k=X.disabled,D=o.colorModeForRenderPass();p.activeTexture.set(m.TEXTURE0),o.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),x.draw(p,m.LINE_STRIP,E,k,D,pe.disabled,Do(g,l.Color.red),"$debug",o.debugBuffer,o.tileBorderIndexBuffer,o.debugSegments);var N=s.getTileByID(a.key).latestRawTileData,q=Math.floor((N&&N.byteLength||0)/1024),Z=s.getTile(a).tileSize,Y=512/Math.min(Z,512)*(a.overscaledZ/o.transform.zoom)*.5,J=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(J+=" => "+a.overscaledZ),function(ie,$){ie.initDebugOverlayCanvas();var ne=ie.debugOverlayCanvas,ce=ie.context.gl,ye=ie.debugOverlayCanvas.getContext("2d");ye.clearRect(0,0,ne.width,ne.height),ye.shadowColor="white",ye.shadowBlur=2,ye.lineWidth=1.5,ye.strokeStyle="white",ye.textBaseline="top",ye.font="bold 36px Open Sans, sans-serif",ye.fillText($,5,5),ye.strokeText($,5,5),ie.debugOverlayTexture.update(ne),ie.debugOverlayTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)}(o,J+" "+q+"kb"),x.draw(p,m.TRIANGLES,E,k,ue.alphaBlended,pe.disabled,Do(g,l.Color.transparent,Y),"$debug",o.debugBuffer,o.quadTriangleIndexBuffer,o.debugSegments)}var _r={symbol:function(o,s,a,p,m){if(o.renderPass==="translucent"){var g=X.disabled,x=o.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(E,k,D,N,q,Z,Y){for(var J=k.transform,ie=q==="map",$=Z==="map",ne=0,ce=E;ne<ce.length;ne+=1){var ye=ce[ne],ke=N.getTile(ye),Se=ke.getBucket(D);if(Se&&Se.text&&Se.text.segments.get().length){var ze=l.evaluateSizeForZoom(Se.textSizeData,J.zoom),Ne=Vr(ke,1,k.transform.zoom),He=tn(ye.posMatrix,$,ie,k.transform,Ne),We=D.layout.get("icon-text-fit")!=="none"&&Se.hasIconData();if(ze){var lt=Math.pow(2,J.zoom-ke.tileID.overscaledZ);dr(Se,ie,$,Y,l.symbolSize,J,He,ye.posMatrix,lt,ze,We)}}}}(p,o,a,s,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),m),a.paint.get("icon-opacity").constantOr(1)!==0&&$r(o,s,a,p,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),g,x),a.paint.get("text-opacity").constantOr(1)!==0&&$r(o,s,a,p,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),g,x),s.map.showCollisionBoxes&&(nt(o,s,a,p,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),nt(o,s,a,p,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(o,s,a,p){if(o.renderPass==="translucent"){var m=a.paint.get("circle-opacity"),g=a.paint.get("circle-stroke-width"),x=a.paint.get("circle-stroke-opacity"),E=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||g.constantOr(1)!==0&&x.constantOr(1)!==0){for(var k=o.context,D=k.gl,N=o.depthModeForSublayer(0,G.ReadOnly),q=X.disabled,Z=o.colorModeForRenderPass(),Y=[],J=0;J<p.length;J++){var ie=p[J],$=s.getTile(ie),ne=$.getBucket(a);if(ne){var ce=ne.programConfigurations.get(a.id),ye={programConfiguration:ce,program:o.useProgram("circle",ce),layoutVertexBuffer:ne.layoutVertexBuffer,indexBuffer:ne.indexBuffer,uniformValues:el(o,ie,$,a)};if(E)for(var ke=0,Se=ne.segments.get();ke<Se.length;ke+=1){var ze=Se[ke];Y.push({segments:new l.SegmentVector([ze]),sortKey:ze.sortKey,state:ye})}else Y.push({segments:ne.segments,sortKey:0,state:ye})}}E&&Y.sort(function(Et,At){return Et.sortKey-At.sortKey});for(var Ne=0,He=Y;Ne<He.length;Ne+=1){var We=He[Ne],lt=We.state;lt.program.draw(k,D.TRIANGLES,N,q,Z,pe.disabled,lt.uniformValues,a.id,lt.layoutVertexBuffer,lt.indexBuffer,We.segments,a.paint,o.transform.zoom,lt.programConfiguration)}}}},heatmap:function(o,s,a,p){if(a.paint.get("heatmap-opacity")!==0)if(o.renderPass==="offscreen"){var m=o.context,g=m.gl,x=X.disabled,E=new ue([g.ONE,g.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Y,J,ie){var $=Y.gl;Y.activeTexture.set($.TEXTURE1),Y.viewport.set([0,0,J.width/4,J.height/4]);var ne=ie.heatmapFbo;if(ne)$.bindTexture($.TEXTURE_2D,ne.colorAttachment.get()),Y.bindFramebuffer.set(ne.framebuffer);else{var ce=$.createTexture();$.bindTexture($.TEXTURE_2D,ce),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.LINEAR),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.LINEAR),ne=ie.heatmapFbo=Y.createFramebuffer(J.width/4,J.height/4,!1),function(ye,ke,Se,ze){var Ne=ye.gl;Ne.texImage2D(Ne.TEXTURE_2D,0,Ne.RGBA,ke.width/4,ke.height/4,0,Ne.RGBA,ye.extRenderToTextureHalfFloat?ye.extTextureHalfFloat.HALF_FLOAT_OES:Ne.UNSIGNED_BYTE,null),ze.colorAttachment.set(Se)}(Y,J,ce,ne)}})(m,o,a),m.clear({color:l.Color.transparent});for(var k=0;k<p.length;k++){var D=p[k];if(!s.hasRenderableParent(D)){var N=s.getTile(D),q=N.getBucket(a);if(q){var Z=q.programConfigurations.get(a.id);o.useProgram("heatmap",Z).draw(m,g.TRIANGLES,G.disabled,x,E,pe.disabled,$l(D.posMatrix,N,o.transform.zoom,a.paint.get("heatmap-intensity")),a.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,a.paint,o.transform.zoom,Z)}}}m.viewport.set([0,0,o.width,o.height])}else o.renderPass==="translucent"&&(o.context.setColorMode(o.colorModeForRenderPass()),function(Y,J){var ie=Y.context,$=ie.gl,ne=J.heatmapFbo;if(ne){ie.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,ne.colorAttachment.get()),ie.activeTexture.set($.TEXTURE1);var ce=J.colorRampTexture;ce||(ce=J.colorRampTexture=new l.Texture(ie,J.colorRamp,$.RGBA)),ce.bind($.LINEAR,$.CLAMP_TO_EDGE),Y.useProgram("heatmapTexture").draw(ie,$.TRIANGLES,G.disabled,X.disabled,Y.colorModeForRenderPass(),pe.disabled,function(ye,ke,Se,ze){var Ne=l.create();l.ortho(Ne,0,ye.width,ye.height,0,0,1);var He=ye.context.gl;return{u_matrix:Ne,u_world:[He.drawingBufferWidth,He.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ke.paint.get("heatmap-opacity")}}(Y,J),J.id,Y.viewportBuffer,Y.quadTriangleIndexBuffer,Y.viewportSegments,J.paint,Y.transform.zoom)}}(o,a))},line:function(o,s,a,p){if(o.renderPass==="translucent"){var m=a.paint.get("line-opacity"),g=a.paint.get("line-width");if(m.constantOr(1)!==0&&g.constantOr(1)!==0)for(var x=o.depthModeForSublayer(0,G.ReadOnly),E=o.colorModeForRenderPass(),k=a.paint.get("line-dasharray"),D=a.paint.get("line-pattern"),N=D.constantOr(1),q=a.paint.get("line-gradient"),Z=a.getCrossfadeParameters(),Y=N?"linePattern":k?"lineSDF":q?"lineGradient":"line",J=o.context,ie=J.gl,$=!0,ne=0,ce=p;ne<ce.length;ne+=1){var ye=ce[ne],ke=s.getTile(ye);if(!N||ke.patternsLoaded()){var Se=ke.getBucket(a);if(Se){var ze=Se.programConfigurations.get(a.id),Ne=o.context.program.get(),He=o.useProgram(Y,ze),We=$||He.program!==Ne,lt=D.constantOr(null);if(lt&&ke.imageAtlas){var Et=ke.imageAtlas,At=Et.patternPositions[lt.to.toString()],kt=Et.patternPositions[lt.from.toString()];At&&kt&&ze.setConstantPatternPositions(At,kt)}var mr=N?Oo(o,ke,a,Z):k?Hl(o,ke,a,k,Z):q?Fr(o,ke,a,Se.lineClipsArray.length):Yi(o,ke,a);if(N)J.activeTexture.set(ie.TEXTURE0),ke.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),ze.updatePaintBuffers(Z);else if(k&&(We||o.lineAtlas.dirty))J.activeTexture.set(ie.TEXTURE0),o.lineAtlas.bind(J);else if(q){var ht=Se.gradients[a.id],Zt=ht.texture;if(a.gradientVersion!==ht.version){var Jt=256;if(a.stepInterpolant){var qt=s.getSource().maxzoom,jt=ye.canonical.z===qt?Math.ceil(1<<o.transform.maxZoom-ye.canonical.z):1;Jt=l.clamp(l.nextPowerOfTwo(Se.maxLineLength/l.EXTENT*1024*jt),256,J.maxTextureSize)}ht.gradient=l.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Jt,image:ht.gradient||void 0,clips:Se.lineClipsArray}),ht.texture?ht.texture.update(ht.gradient):ht.texture=new l.Texture(J,ht.gradient,ie.RGBA),ht.version=a.gradientVersion,Zt=ht.texture}J.activeTexture.set(ie.TEXTURE0),Zt.bind(a.stepInterpolant?ie.NEAREST:ie.LINEAR,ie.CLAMP_TO_EDGE)}He.draw(J,ie.TRIANGLES,x,o.stencilModeForClipping(ye),E,pe.disabled,mr,a.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,a.paint,o.transform.zoom,ze,Se.layoutVertexBuffer2),$=!1}}}}},fill:function(o,s,a,p){var m=a.paint.get("fill-color"),g=a.paint.get("fill-opacity");if(g.constantOr(1)!==0){var x=o.colorModeForRenderPass(),E=a.paint.get("fill-pattern"),k=o.opaquePassEnabledForLayer()&&!E.constantOr(1)&&m.constantOr(l.Color.transparent).a===1&&g.constantOr(0)===1?"opaque":"translucent";if(o.renderPass===k){var D=o.depthModeForSublayer(1,o.renderPass==="opaque"?G.ReadWrite:G.ReadOnly);pn(o,s,a,p,D,x,!1)}if(o.renderPass==="translucent"&&a.paint.get("fill-antialias")){var N=o.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,G.ReadOnly);pn(o,s,a,p,N,x,!0)}}},"fill-extrusion":function(o,s,a,p){var m=a.paint.get("fill-extrusion-opacity");if(m!==0&&o.renderPass==="translucent"){var g=new G(o.context.gl.LEQUAL,G.ReadWrite,o.depthRangeFor3D);if(m!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))gn(o,s,a,p,g,X.disabled,ue.disabled),gn(o,s,a,p,g,o.stencilModeFor3D(),o.colorModeForRenderPass());else{var x=o.colorModeForRenderPass();gn(o,s,a,p,g,X.disabled,x)}}},hillshade:function(o,s,a,p){if(o.renderPass==="offscreen"||o.renderPass==="translucent"){for(var m=o.context,g=o.depthModeForSublayer(0,G.ReadOnly),x=o.colorModeForRenderPass(),E=o.renderPass==="translucent"?o.stencilConfigForOverlap(p):[{},p],k=E[0],D=0,N=E[1];D<N.length;D+=1){var q=N[D],Z=s.getTile(q);Z.needsHillshadePrepare&&o.renderPass==="offscreen"?Yo(o,Z,a,g,X.disabled,x):o.renderPass==="translucent"&&zi(o,Z,a,g,k[q.overscaledZ],x)}m.viewport.set([0,0,o.width,o.height])}},raster:function(o,s,a,p){if(o.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&p.length)for(var m=o.context,g=m.gl,x=s.getSource(),E=o.useProgram("raster"),k=o.colorModeForRenderPass(),D=x instanceof zt?[{},p]:o.stencilConfigForOverlap(p),N=D[0],q=D[1],Z=q[q.length-1].overscaledZ,Y=!o.options.moving,J=0,ie=q;J<ie.length;J+=1){var $=ie[J],ne=o.depthModeForSublayer($.overscaledZ-Z,a.paint.get("raster-opacity")===1?G.ReadWrite:G.ReadOnly,g.LESS),ce=s.getTile($),ye=o.transform.calculatePosMatrix($.toUnwrapped(),Y);ce.registerFadeDuration(a.paint.get("raster-fade-duration"));var ke=s.findLoadedParent($,0),Se=jn(ce,ke,s,a,o.transform),ze=void 0,Ne=void 0,He=a.paint.get("raster-resampling")==="nearest"?g.NEAREST:g.LINEAR;m.activeTexture.set(g.TEXTURE0),ce.texture.bind(He,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(g.TEXTURE1),ke?(ke.texture.bind(He,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),ze=Math.pow(2,ke.tileID.overscaledZ-ce.tileID.overscaledZ),Ne=[ce.tileID.canonical.x*ze%1,ce.tileID.canonical.y*ze%1]):ce.texture.bind(He,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST);var We=rl(ye,Ne||[0,0],ze||1,Se,a);x instanceof zt?E.draw(m,g.TRIANGLES,ne,X.disabled,k,pe.disabled,We,a.id,x.boundsBuffer,o.quadTriangleIndexBuffer,x.boundsSegments):E.draw(m,g.TRIANGLES,ne,N[$.overscaledZ],k,pe.disabled,We,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}},background:function(o,s,a){var p=a.paint.get("background-color"),m=a.paint.get("background-opacity");if(m!==0){var g=o.context,x=g.gl,E=o.transform,k=E.tileSize,D=a.paint.get("background-pattern");if(!o.isPatternMissing(D)){var N=!D&&p.a===1&&m===1&&o.opaquePassEnabledForLayer()?"opaque":"translucent";if(o.renderPass===N){var q=X.disabled,Z=o.depthModeForSublayer(0,N==="opaque"?G.ReadWrite:G.ReadOnly),Y=o.colorModeForRenderPass(),J=o.useProgram(D?"backgroundPattern":"background"),ie=E.coveringTiles({tileSize:k});D&&(g.activeTexture.set(x.TEXTURE0),o.imageManager.bind(o.context));for(var $=a.getCrossfadeParameters(),ne=0,ce=ie;ne<ce.length;ne+=1){var ye=ce[ne],ke=o.transform.calculatePosMatrix(ye.toUnwrapped()),Se=D?de(ke,m,o,D,{tileID:ye,tileSize:k},$):Ns(ke,m,p);J.draw(g,x.TRIANGLES,Z,q,Y,pe.disabled,Se,a.id,o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}}}},debug:function(o,s,a){for(var p=0;p<a.length;p++)jr(o,s,a[p])},custom:function(o,s,a){var p=o.context,m=a.implementation;if(o.renderPass==="offscreen"){var g=m.prerender;g&&(o.setCustomLayerDefaults(),p.setColorMode(o.colorModeForRenderPass()),g.call(m,p.gl,o.transform.customLayerMatrix()),p.setDirty(),o.setBaseState())}else if(o.renderPass==="translucent"){o.setCustomLayerDefaults(),p.setColorMode(o.colorModeForRenderPass()),p.setStencilMode(X.disabled);var x=m.renderingMode==="3d"?new G(o.context.gl.LEQUAL,G.ReadWrite,o.depthRangeFor3D):o.depthModeForSublayer(0,G.ReadOnly);p.setDepthMode(x),m.render(p.gl,o.transform.customLayerMatrix()),p.setDirty(),o.setBaseState(),p.bindFramebuffer.set(null)}}},Dr=function(o,s){this.context=new V(o),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=Q.maxUnderzooming+Q.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new It,this.gpuTimers={}};Dr.prototype.resize=function(o,s){if(this.width=o*l.browser.devicePixelRatio,this.height=s*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,p=this.style._order;a<p.length;a+=1)this.style._layers[p[a]].resize()},Dr.prototype.setup=function(){var o=this.context,s=new l.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(l.EXTENT,0),s.emplaceBack(0,l.EXTENT),s.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(s,nn.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var a=new l.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(l.EXTENT,0),a.emplaceBack(0,l.EXTENT),a.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=o.createVertexBuffer(a,nn.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var p=new l.StructArrayLayout4i8;p.emplaceBack(0,0,0,0),p.emplaceBack(l.EXTENT,0,l.EXTENT,0),p.emplaceBack(0,l.EXTENT,0,l.EXTENT),p.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(p,Ye.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var m=new l.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(m,nn.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var g=new l.StructArrayLayout1ui2;g.emplaceBack(0),g.emplaceBack(1),g.emplaceBack(3),g.emplaceBack(2),g.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(g);var x=new l.StructArrayLayout3ui6;x.emplaceBack(0,1,2),x.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(x),this.emptyTexture=new l.Texture(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);var E=this.context.gl;this.stencilClearMode=new X({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)},Dr.prototype.clearStencil=function(){var o=this.context,s=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=l.create();l.ortho(a,0,this.width,this.height,0,0,1),l.scale(a,a,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,s.TRIANGLES,G.disabled,this.stencilClearMode,ue.disabled,pe.disabled,Ji(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Dr.prototype._renderTileClippingMasks=function(o,s){if(this.currentStencilSource!==o.source&&o.isTileClipped()&&s&&s.length){this.currentStencilSource=o.source;var a=this.context,p=a.gl;this.nextStencilID+s.length>256&&this.clearStencil(),a.setColorMode(ue.disabled),a.setDepthMode(G.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var g=0,x=s;g<x.length;g+=1){var E=x[g],k=this._tileClippingMaskIDs[E.key]=this.nextStencilID++;m.draw(a,p.TRIANGLES,G.disabled,new X({func:p.ALWAYS,mask:0},k,255,p.KEEP,p.KEEP,p.REPLACE),ue.disabled,pe.disabled,Ji(E.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Dr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var o=this.nextStencilID++,s=this.context.gl;return new X({func:s.NOTEQUAL,mask:255},o,255,s.KEEP,s.KEEP,s.REPLACE)},Dr.prototype.stencilModeForClipping=function(o){var s=this.context.gl;return new X({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,s.KEEP,s.KEEP,s.REPLACE)},Dr.prototype.stencilConfigForOverlap=function(o){var s,a=this.context.gl,p=o.sort(function(k,D){return D.overscaledZ-k.overscaledZ}),m=p[p.length-1].overscaledZ,g=p[0].overscaledZ-m+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();for(var x={},E=0;E<g;E++)x[E+m]=new X({func:a.GEQUAL,mask:255},E+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=g,[x,p]}return[(s={},s[m]=X.disabled,s),p]},Dr.prototype.colorModeForRenderPass=function(){var o=this.context.gl;return this._showOverdrawInspector?new ue([o.CONSTANT_COLOR,o.ONE],new l.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ue.unblended:ue.alphaBlended},Dr.prototype.depthModeForSublayer=function(o,s,a){if(!this.opaquePassEnabledForLayer())return G.disabled;var p=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new G(a||this.context.gl.LEQUAL,s,[p,p])},Dr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Dr.prototype.render=function(o,s){var a=this;this.style=o,this.options=s,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var p=this.style._order,m=this.style.sourceCaches;for(var g in m){var x=m[g];x.used&&x.prepare(this.context)}var E,k,D={},N={},q={};for(var Z in m){var Y=m[Z];D[Z]=Y.getVisibleCoordinates(),N[Z]=D[Z].slice().reverse(),q[Z]=Y.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var J=0;J<p.length;J++)if(this.style._layers[p[J]].is3D()){this.opaquePassCutoff=J;break}this.renderPass="offscreen";for(var ie=0,$=p;ie<$.length;ie+=1){var ne=this.style._layers[$[ie]];if(ne.hasOffscreenPass()&&!ne.isHidden(this.transform.zoom)){var ce=N[ne.source];(ne.type==="custom"||ce.length)&&this.renderLayer(this,m[ne.source],ne,ce)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){var ye=this.style._layers[p[this.currentLayer]],ke=m[ye.source],Se=D[ye.source];this._renderTileClippingMasks(ye,Se),this.renderLayer(this,ke,ye,Se)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){var ze=this.style._layers[p[this.currentLayer]],Ne=m[ze.source],He=(ze.type==="symbol"?q:N)[ze.source];this._renderTileClippingMasks(ze,D[ze.source]),this.renderLayer(this,Ne,ze,He)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(We){We.source&&!We.isHidden(a.transform.zoom)&&(We.source!==(k&&k.id)&&(k=a.style.sourceCaches[We.source]),(!E||E.getSource().maxzoom<k.getSource().maxzoom)&&(E=k))}),E&&_r.debug(this,E,E.getVisibleCoordinates())),this.options.showPadding&&function(We){var lt=We.transform.padding;pu(We,We.transform.height-(lt.top||0),3,_o),pu(We,lt.bottom||0,3,Va),il(We,lt.left||0,3,js),il(We,We.transform.width-(lt.right||0),3,Qo);var Et=We.transform.centerPoint;(function(At,kt,mr,ht){Vs(At,kt-1,mr-10,2,20,ht),Vs(At,kt-10,mr-1,20,2,ht)})(We,Et.x,We.transform.height-Et.y,qa)}(this),this.context.setDefault()},Dr.prototype.renderLayer=function(o,s,a,p){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||p.length)&&(this.id=a.id,this.gpuTimingStart(a),_r[a.type](o,s,a,p,this.style.placement.variableOffsets),this.gpuTimingEnd())},Dr.prototype.gpuTimingStart=function(o){if(this.options.gpuTiming){var s=this.context.extTimerQuery,a=this.gpuTimers[o.id];a||(a=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),a.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,a.query)}},Dr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}},Dr.prototype.collectGpuTimers=function(){var o=this.gpuTimers;return this.gpuTimers={},o},Dr.prototype.queryGpuTimers=function(o){var s={};for(var a in o){var p=o[a],m=this.context.extTimerQuery,g=m.getQueryObjectEXT(p.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(p.query),s[a]=g}return s},Dr.prototype.translatePosMatrix=function(o,s,a,p,m){if(!a[0]&&!a[1])return o;var g=m?p==="map"?this.transform.angle:0:p==="viewport"?-this.transform.angle:0;if(g){var x=Math.sin(g),E=Math.cos(g);a=[a[0]*E-a[1]*x,a[0]*x+a[1]*E]}var k=[m?a[0]:Vr(s,a[0],this.transform.zoom),m?a[1]:Vr(s,a[1],this.transform.zoom),0],D=new Float32Array(16);return l.translate(D,o,k),D},Dr.prototype.saveTileTexture=function(o){var s=this._tileTextures[o.size[0]];s?s.push(o):this._tileTextures[o.size[0]]=[o]},Dr.prototype.getTileTexture=function(o){var s=this._tileTextures[o];return s&&s.length>0?s.pop():null},Dr.prototype.isPatternMissing=function(o){if(!o)return!1;if(!o.from||!o.to)return!0;var s=this.imageManager.getPattern(o.from.toString()),a=this.imageManager.getPattern(o.to.toString());return!s||!a},Dr.prototype.useProgram=function(o,s){this.cache=this.cache||{};var a=""+o+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new Rs(this.context,o,Na[o],s,Oe[o],this._showOverdrawInspector)),this.cache[a]},Dr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Dr.prototype.setBaseState=function(){var o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)},Dr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Dr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var xo=function(o,s){this.points=o,this.planes=s};xo.fromInvProjectionMatrix=function(o,s,a){var p=Math.pow(2,a),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(x){return l.transformMat4([],x,o)}).map(function(x){return l.scale$1([],x,1/x[3]/s*p)}),g=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(x){var E=l.sub([],m[x[0]],m[x[1]]),k=l.sub([],m[x[2]],m[x[1]]),D=l.normalize([],l.cross([],E,k)),N=-l.dot(D,m[x[1]]);return D.concat(N)});return new xo(m,g)};var ea=function(o,s){this.min=o,this.max=s,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};ea.prototype.quadrant=function(o){for(var s=[o%2==0,o<2],a=l.clone$2(this.min),p=l.clone$2(this.max),m=0;m<s.length;m++)a[m]=s[m]?this.min[m]:this.center[m],p[m]=s[m]?this.center[m]:this.max[m];return p[2]=this.max[2],new ea(a,p)},ea.prototype.distanceX=function(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]},ea.prototype.distanceY=function(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]},ea.prototype.intersects=function(o){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,p=0;p<o.planes.length;p++){for(var m=o.planes[p],g=0,x=0;x<s.length;x++)g+=l.dot$1(m,s[x])>=0;if(g===0)return 0;g!==s.length&&(a=!1)}if(a)return 2;for(var E=0;E<3;E++){for(var k=Number.MAX_VALUE,D=-Number.MAX_VALUE,N=0;N<o.points.length;N++){var q=o.points[N][E]-this.min[E];k=Math.min(k,q),D=Math.max(D,q)}if(D<0||k>this.max[E]-this.min[E])return 0}return 1};var Ln=function(o,s,a,p){if(o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),p===void 0&&(p=0),isNaN(o)||o<0||isNaN(s)||s<0||isNaN(a)||a<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=s,this.left=a,this.right=p};Ln.prototype.interpolate=function(o,s,a){return s.top!=null&&o.top!=null&&(this.top=l.number(o.top,s.top,a)),s.bottom!=null&&o.bottom!=null&&(this.bottom=l.number(o.bottom,s.bottom,a)),s.left!=null&&o.left!=null&&(this.left=l.number(o.left,s.left,a)),s.right!=null&&o.right!=null&&(this.right=l.number(o.right,s.right,a)),this},Ln.prototype.getCenter=function(o,s){var a=l.clamp((this.left+o-this.right)/2,0,o),p=l.clamp((this.top+s-this.bottom)/2,0,s);return new l.Point(a,p)},Ln.prototype.equals=function(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right},Ln.prototype.clone=function(){return new Ln(this.top,this.bottom,this.left,this.right)},Ln.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var $t=function(o,s,a,p,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=o||0,this._maxZoom=s||22,this._minPitch=a==null?0:a,this._maxPitch=p==null?60:p,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ln,this._posMatrixCache={},this._alignedPosMatrixCache={}},gr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};$t.prototype.clone=function(){var o=new $t(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o},gr.minZoom.get=function(){return this._minZoom},gr.minZoom.set=function(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))},gr.maxZoom.get=function(){return this._maxZoom},gr.maxZoom.set=function(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))},gr.minPitch.get=function(){return this._minPitch},gr.minPitch.set=function(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))},gr.maxPitch.get=function(){return this._maxPitch},gr.maxPitch.set=function(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))},gr.renderWorldCopies.get=function(){return this._renderWorldCopies},gr.renderWorldCopies.set=function(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o},gr.worldSize.get=function(){return this.tileSize*this.scale},gr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},gr.size.get=function(){return new l.Point(this.width,this.height)},gr.bearing.get=function(){return-this.angle/Math.PI*180},gr.bearing.set=function(o){var s=-l.wrap(o,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},gr.pitch.get=function(){return this._pitch/Math.PI*180},gr.pitch.set=function(o){var s=l.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},gr.fov.get=function(){return this._fov/Math.PI*180},gr.fov.set=function(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())},gr.zoom.get=function(){return this._zoom},gr.zoom.set=function(o){var s=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},gr.center.get=function(){return this._center},gr.center.set=function(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())},gr.padding.get=function(){return this._edgeInsets.toJSON()},gr.padding.set=function(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())},gr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},$t.prototype.isPaddingEqual=function(o){return this._edgeInsets.equals(o)},$t.prototype.interpolatePadding=function(o,s,a){this._unmodified=!1,this._edgeInsets.interpolate(o,s,a),this._constrain(),this._calcMatrices()},$t.prototype.coveringZoomLevel=function(o){var s=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,s)},$t.prototype.getVisibleUnwrappedCoordinates=function(o){var s=[new l.UnwrappedTileID(0,o)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new l.Point(0,0)),p=this.pointCoordinate(new l.Point(this.width,0)),m=this.pointCoordinate(new l.Point(this.width,this.height)),g=this.pointCoordinate(new l.Point(0,this.height)),x=Math.floor(Math.min(a.x,p.x,m.x,g.x)),E=Math.floor(Math.max(a.x,p.x,m.x,g.x)),k=x-1;k<=E+1;k++)k!==0&&s.push(new l.UnwrappedTileID(k,o));return s},$t.prototype.coveringTiles=function(o){var s=this.coveringZoomLevel(o),a=s;if(o.minzoom!==void 0&&s<o.minzoom)return[];o.maxzoom!==void 0&&s>o.maxzoom&&(s=o.maxzoom);var p=l.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,s),g=[m*p.x,m*p.y,0],x=xo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),E=o.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(E=s);var k=function(We){return{aabb:new ea([We*m,0,0],[(We+1)*m,m,0]),zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}},D=[],N=[],q=s,Z=o.reparseOverscaled?a:s;if(this._renderWorldCopies)for(var Y=1;Y<=3;Y++)D.push(k(-Y)),D.push(k(Y));for(D.push(k(0));D.length>0;){var J=D.pop(),ie=J.x,$=J.y,ne=J.fullyVisible;if(!ne){var ce=J.aabb.intersects(x);if(ce===0)continue;ne=ce===2}var ye=J.aabb.distanceX(g),ke=J.aabb.distanceY(g),Se=Math.max(Math.abs(ye),Math.abs(ke));if(J.zoom===q||Se>3+(1<<q-J.zoom)-2&&J.zoom>=E)N.push({tileID:new l.OverscaledTileID(J.zoom===q?Z:J.zoom,J.wrap,J.zoom,ie,$),distanceSq:l.sqrLen([g[0]-.5-ie,g[1]-.5-$])});else for(var ze=0;ze<4;ze++){var Ne=(ie<<1)+ze%2,He=($<<1)+(ze>>1);D.push({aabb:J.aabb.quadrant(ze),zoom:J.zoom+1,x:Ne,y:He,wrap:J.wrap,fullyVisible:ne})}}return N.sort(function(We,lt){return We.distanceSq-lt.distanceSq}).map(function(We){return We.tileID})},$t.prototype.resize=function(o,s){this.width=o,this.height=s,this.pixelsToGLUnits=[2/o,-2/s],this._constrain(),this._calcMatrices()},gr.unmodified.get=function(){return this._unmodified},$t.prototype.zoomScale=function(o){return Math.pow(2,o)},$t.prototype.scaleZoom=function(o){return Math.log(o)/Math.LN2},$t.prototype.project=function(o){var s=l.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(o.lng)*this.worldSize,l.mercatorYfromLat(s)*this.worldSize)},$t.prototype.unproject=function(o){return new l.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()},gr.point.get=function(){return this.project(this.center)},$t.prototype.setLocationAtPoint=function(o,s){var a=this.pointCoordinate(s),p=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(o),g=new l.MercatorCoordinate(m.x-(a.x-p.x),m.y-(a.y-p.y));this.center=this.coordinateLocation(g),this._renderWorldCopies&&(this.center=this.center.wrap())},$t.prototype.locationPoint=function(o){return this.coordinatePoint(this.locationCoordinate(o))},$t.prototype.pointLocation=function(o){return this.coordinateLocation(this.pointCoordinate(o))},$t.prototype.locationCoordinate=function(o){return l.MercatorCoordinate.fromLngLat(o)},$t.prototype.coordinateLocation=function(o){return o.toLngLat()},$t.prototype.pointCoordinate=function(o){var s=[o.x,o.y,0,1],a=[o.x,o.y,1,1];l.transformMat4(s,s,this.pixelMatrixInverse),l.transformMat4(a,a,this.pixelMatrixInverse);var p=s[3],m=a[3],g=s[1]/p,x=a[1]/m,E=s[2]/p,k=a[2]/m,D=E===k?0:(0-E)/(k-E);return new l.MercatorCoordinate(l.number(s[0]/p,a[0]/m,D)/this.worldSize,l.number(g,x,D)/this.worldSize)},$t.prototype.coordinatePoint=function(o){var s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(s,s,this.pixelMatrix),new l.Point(s[0]/s[3],s[1]/s[3])},$t.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},$t.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},$t.prototype.setMaxBounds=function(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},$t.prototype.calculatePosMatrix=function(o,s){s===void 0&&(s=!1);var a=o.key,p=s?this._alignedPosMatrixCache:this._posMatrixCache;if(p[a])return p[a];var m=o.canonical,g=this.worldSize/this.zoomScale(m.z),x=m.x+Math.pow(2,m.z)*o.wrap,E=l.identity(new Float64Array(16));return l.translate(E,E,[x*g,m.y*g,0]),l.scale(E,E,[g/l.EXTENT,g/l.EXTENT,1]),l.multiply(E,s?this.alignedProjMatrix:this.projMatrix,E),p[a]=new Float32Array(E),p[a]},$t.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},$t.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var o,s,a,p,m=-90,g=90,x=-180,E=180,k=this.size,D=this._unmodified;if(this.latRange){var N=this.latRange;m=l.mercatorYfromLat(N[1])*this.worldSize,o=(g=l.mercatorYfromLat(N[0])*this.worldSize)-m<k.y?k.y/(g-m):0}if(this.lngRange){var q=this.lngRange;x=l.mercatorXfromLng(q[0])*this.worldSize,s=(E=l.mercatorXfromLng(q[1])*this.worldSize)-x<k.x?k.x/(E-x):0}var Z=this.point,Y=Math.max(s||0,o||0);if(Y)return this.center=this.unproject(new l.Point(s?(E+x)/2:Z.x,o?(g+m)/2:Z.y)),this.zoom+=this.scaleZoom(Y),this._unmodified=D,void(this._constraining=!1);if(this.latRange){var J=Z.y,ie=k.y/2;J-ie<m&&(p=m+ie),J+ie>g&&(p=g-ie)}if(this.lngRange){var $=Z.x,ne=k.x/2;$-ne<x&&(a=x+ne),$+ne>E&&(a=E-ne)}a===void 0&&p===void 0||(this.center=this.unproject(new l.Point(a!==void 0?a:Z.x,p!==void 0?p:Z.y))),this._unmodified=D,this._constraining=!1}},$t.prototype._calcMatrices=function(){if(this.height){var o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,a=this._fov*(.5+o.y/this.height),p=Math.sin(a)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-s-a,.01,Math.PI-.01)),m=this.point,g=m.x,x=m.y,E=1.01*(Math.cos(Math.PI/2-this._pitch)*p+this.cameraToCenterDistance),k=this.height/50,D=new Float64Array(16);l.perspective(D,this._fov,this.width/this.height,k,E),D[8]=2*-o.x/this.width,D[9]=2*o.y/this.height,l.scale(D,D,[1,-1,1]),l.translate(D,D,[0,0,-this.cameraToCenterDistance]),l.rotateX(D,D,this._pitch),l.rotateZ(D,D,this.angle),l.translate(D,D,[-g,-x,0]),this.mercatorMatrix=l.scale([],D,[this.worldSize,this.worldSize,this.worldSize]),l.scale(D,D,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=D,this.invProjMatrix=l.invert([],this.projMatrix);var N=this.width%2/2,q=this.height%2/2,Z=Math.cos(this.angle),Y=Math.sin(this.angle),J=g-Math.round(g)+Z*N+Y*q,ie=x-Math.round(x)+Z*q+Y*N,$=new Float64Array(D);if(l.translate($,$,[J>.5?J-1:J,ie>.5?ie-1:ie,0]),this.alignedProjMatrix=$,D=l.create(),l.scale(D,D,[this.width/2,-this.height/2,1]),l.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=l.create(),l.scale(D,D,[1,-1,1]),l.translate(D,D,[-1,-1,0]),l.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(D=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=D,this._posMatrixCache={},this._alignedPosMatrixCache={}}},$t.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var o=this.pointCoordinate(new l.Point(0,0)),s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},$t.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,o))},$t.prototype.getCameraQueryGeometry=function(o){var s=this.getCameraPoint();if(o.length===1)return[o[0],s];for(var a=s.x,p=s.y,m=s.x,g=s.y,x=0,E=o;x<E.length;x+=1){var k=E[x];a=Math.min(a,k.x),p=Math.min(p,k.y),m=Math.max(m,k.x),g=Math.max(g,k.y)}return[new l.Point(a,p),new l.Point(m,p),new l.Point(m,g),new l.Point(a,g),new l.Point(a,p)]},Object.defineProperties($t.prototype,gr);var Jn=function(o){var s,a,p,m;this._hashName=o&&encodeURIComponent(o),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),a=!1,p=null,m=function(){p=null,a&&(s(),p=setTimeout(m,300),a=!1)},function(){return a=!0,p||m(),p})};Jn.prototype.addTo=function(o){return this._map=o,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Jn.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Jn.prototype.getHashString=function(o){var s=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,p=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,p),g=Math.round(s.lng*m)/m,x=Math.round(s.lat*m)/m,E=this._map.getBearing(),k=this._map.getPitch(),D="";if(D+=o?"/"+g+"/"+x+"/"+a:a+"/"+x+"/"+g,(E||k)&&(D+="/"+Math.round(10*E)/10),k&&(D+="/"+Math.round(k)),this._hashName){var N=this._hashName,q=!1,Z=l.window.location.hash.slice(1).split("&").map(function(Y){var J=Y.split("=")[0];return J===N?(q=!0,J+"="+D):Y}).filter(function(Y){return Y});return q||Z.push(N+"="+D),"#"+Z.join("&")}return"#"+D},Jn.prototype._getCurrentHash=function(){var o,s=this,a=l.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(p){return p.split("=")}).forEach(function(p){p[0]===s._hashName&&(o=p)}),(o&&o[1]||"").split("/")):a.split("/")},Jn.prototype._onHashChange=function(){var o=this._getCurrentHash();if(o.length>=3&&!o.some(function(a){return isNaN(a)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:s,pitch:+(o[4]||0)}),!0}return!1},Jn.prototype._updateHashUnthrottled=function(){var o=l.window.location.href.replace(/(#.+)?$/,this.getHashString());try{l.window.history.replaceState(l.window.history.state,null,o)}catch{}};var ya={linearity:.3,easing:l.bezier(0,0,.3,1)},bo=l.extend({deceleration:2500,maxSpeed:1400},ya),Qi=l.extend({deceleration:20,maxSpeed:1400},ya),Xl=l.extend({deceleration:1e3,maxSpeed:360},ya),hu=l.extend({deceleration:1e3,maxSpeed:90},ya),Za=function(o){this._map=o,this.clear()};function va(o,s){(!o.duration||o.duration<s.duration)&&(o.duration=s.duration,o.easing=s.easing)}function eo(o,s,a){var p=a.maxSpeed,m=a.linearity,g=a.deceleration,x=l.clamp(o*m/(s/1e3),-p,p),E=Math.abs(x)/(g*m);return{easing:a.easing,duration:1e3*E,amount:x*(E/2)}}Za.prototype.clear=function(){this._inertiaBuffer=[]},Za.prototype.record=function(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:o})},Za.prototype._drainInertiaBuffer=function(){for(var o=this._inertiaBuffer,s=l.browser.now();o.length>0&&s-o[0].time>160;)o.shift()},Za.prototype._onMoveEnd=function(o){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},a=0,p=this._inertiaBuffer;a<p.length;a+=1){var m=p[a].settings;s.zoom+=m.zoomDelta||0,s.bearing+=m.bearingDelta||0,s.pitch+=m.pitchDelta||0,m.panDelta&&s.pan._add(m.panDelta),m.around&&(s.around=m.around),m.pinchAround&&(s.pinchAround=m.pinchAround)}var g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(s.pan.mag()){var E=eo(s.pan.mag(),g,l.extend({},bo,o||{}));x.offset=s.pan.mult(E.amount/s.pan.mag()),x.center=this._map.transform.center,va(x,E)}if(s.zoom){var k=eo(s.zoom,g,Qi);x.zoom=this._map.transform.zoom+k.amount,va(x,k)}if(s.bearing){var D=eo(s.bearing,g,Xl);x.bearing=this._map.transform.bearing+l.clamp(D.amount,-179,179),va(x,D)}if(s.pitch){var N=eo(s.pitch,g,hu);x.pitch=this._map.transform.pitch+N.amount,va(x,N)}if(x.zoom||x.bearing){var q=s.pinchAround===void 0?s.around:s.pinchAround;x.around=q?this._map.unproject(q):this._map.getCenter()}return this.clear(),l.extend(x,{noMoveStart:!0})}};var hn=function(o){function s(p,m,g,x){x===void 0&&(x={});var E=M.mousePos(m.getCanvasContainer(),g),k=m.unproject(E);o.call(this,p,l.extend({point:E,lngLat:k,originalEvent:g},x)),this._defaultPrevented=!1,this.target=m}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(l.Event),ga=function(o){function s(p,m,g){var x=p==="touchend"?g.changedTouches:g.touches,E=M.touchPos(m.getCanvasContainer(),x),k=E.map(function(q){return m.unproject(q)}),D=E.reduce(function(q,Z,Y,J){return q.add(Z.div(J.length))},new l.Point(0,0)),N=m.unproject(D);o.call(this,p,{points:E,point:D,lngLats:k,lngLat:N,originalEvent:g}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(l.Event),qs=function(o){function s(p,m,g){o.call(this,p,{originalEvent:g}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(l.Event),Pn=function(o,s){this._map=o,this._clickTolerance=s.clickTolerance};Pn.prototype.reset=function(){delete this._mousedownPos},Pn.prototype.wheel=function(o){return this._firePreventable(new qs(o.type,this._map,o))},Pn.prototype.mousedown=function(o,s){return this._mousedownPos=s,this._firePreventable(new hn(o.type,this._map,o))},Pn.prototype.mouseup=function(o){this._map.fire(new hn(o.type,this._map,o))},Pn.prototype.click=function(o,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new hn(o.type,this._map,o))},Pn.prototype.dblclick=function(o){return this._firePreventable(new hn(o.type,this._map,o))},Pn.prototype.mouseover=function(o){this._map.fire(new hn(o.type,this._map,o))},Pn.prototype.mouseout=function(o){this._map.fire(new hn(o.type,this._map,o))},Pn.prototype.touchstart=function(o){return this._firePreventable(new ga(o.type,this._map,o))},Pn.prototype.touchmove=function(o){this._map.fire(new ga(o.type,this._map,o))},Pn.prototype.touchend=function(o){this._map.fire(new ga(o.type,this._map,o))},Pn.prototype.touchcancel=function(o){this._map.fire(new ga(o.type,this._map,o))},Pn.prototype._firePreventable=function(o){if(this._map.fire(o),o.defaultPrevented)return{}},Pn.prototype.isEnabled=function(){return!0},Pn.prototype.isActive=function(){return!1},Pn.prototype.enable=function(){},Pn.prototype.disable=function(){};var ft=function(o){this._map=o};ft.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ft.prototype.mousemove=function(o){this._map.fire(new hn(o.type,this._map,o))},ft.prototype.mousedown=function(){this._delayContextMenu=!0},ft.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new hn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ft.prototype.contextmenu=function(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new hn(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()},ft.prototype.isEnabled=function(){return!0},ft.prototype.isActive=function(){return!1},ft.prototype.enable=function(){},ft.prototype.disable=function(){};var to=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=s.clickTolerance||1};function Kl(o,s){for(var a={},p=0;p<o.length;p++)a[o[p].identifier]=s[p];return a}to.prototype.isEnabled=function(){return!!this._enabled},to.prototype.isActive=function(){return!!this._active},to.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},to.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},to.prototype.mousedown=function(o,s){this.isEnabled()&&o.shiftKey&&o.button===0&&(M.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},to.prototype.mousemoveWindow=function(o,s){if(this._active){var a=s;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var p=this._startPos;this._lastPos=a,this._box||(this._box=M.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));var m=Math.min(p.x,a.x),g=Math.max(p.x,a.x),x=Math.min(p.y,a.y),E=Math.max(p.y,a.y);M.setTransform(this._box,"translate("+m+"px,"+x+"px)"),this._box.style.width=g-m+"px",this._box.style.height=E-x+"px"}}},to.prototype.mouseupWindow=function(o,s){var a=this;if(this._active&&o.button===0){var p=this._startPos,m=s;if(this.reset(),M.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:function(g){return g.fitScreenCoordinates(p,m,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",o)}},to.prototype.keydown=function(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))},to.prototype.blur=function(){this.reset()},to.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos},to.prototype._fireEvent=function(o,s){return this._map.fire(new l.Event(o,{originalEvent:s}))};var fu=function(o){this.reset(),this.numTouches=o.numTouches};fu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},fu.prototype.touchstart=function(o,s,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),a.length===this.numTouches&&(this.centroid=function(p){for(var m=new l.Point(0,0),g=0,x=p;g<x.length;g+=1)m._add(x[g]);return m.div(p.length)}(s),this.touches=Kl(a,s)))},fu.prototype.touchmove=function(o,s,a){if(!this.aborted&&this.centroid){var p=Kl(a,s);for(var m in this.touches){var g=p[m];(!g||g.dist(this.touches[m])>30)&&(this.aborted=!0)}}},fu.prototype.touchend=function(o,s,a){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var p=!this.aborted&&this.centroid;if(this.reset(),p)return p}};var ta=function(o){this.singleTap=new fu(o),this.numTaps=o.numTaps,this.reset()};ta.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ta.prototype.touchstart=function(o,s,a){this.singleTap.touchstart(o,s,a)},ta.prototype.touchmove=function(o,s,a){this.singleTap.touchmove(o,s,a)},ta.prototype.touchend=function(o,s,a){var p=this.singleTap.touchend(o,s,a);if(p){var m=o.timeStamp-this.lastTime<500,g=!this.lastTap||this.lastTap.dist(p)<30;if(m&&g||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}};var ro=function(){this._zoomIn=new ta({numTouches:1,numTaps:2}),this._zoomOut=new ta({numTouches:2,numTaps:1}),this.reset()};ro.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ro.prototype.touchstart=function(o,s,a){this._zoomIn.touchstart(o,s,a),this._zoomOut.touchstart(o,s,a)},ro.prototype.touchmove=function(o,s,a){this._zoomIn.touchmove(o,s,a),this._zoomOut.touchmove(o,s,a)},ro.prototype.touchend=function(o,s,a){var p=this,m=this._zoomIn.touchend(o,s,a),g=this._zoomOut.touchend(o,s,a);return m?(this._active=!0,o.preventDefault(),setTimeout(function(){return p.reset()},0),{cameraAnimation:function(x){return x.easeTo({duration:300,zoom:x.getZoom()+1,around:x.unproject(m)},{originalEvent:o})}}):g?(this._active=!0,o.preventDefault(),setTimeout(function(){return p.reset()},0),{cameraAnimation:function(x){return x.easeTo({duration:300,zoom:x.getZoom()-1,around:x.unproject(g)},{originalEvent:o})}}):void 0},ro.prototype.touchcancel=function(){this.reset()},ro.prototype.enable=function(){this._enabled=!0},ro.prototype.disable=function(){this._enabled=!1,this.reset()},ro.prototype.isEnabled=function(){return this._enabled},ro.prototype.isActive=function(){return this._active};var mp={0:1,2:2},et=function(o){this.reset(),this._clickTolerance=o.clickTolerance||1};et.prototype.blur=function(){this.reset()},et.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},et.prototype._correctButton=function(o,s){return!1},et.prototype._move=function(o,s){return{}},et.prototype.mousedown=function(o,s){if(!this._lastPoint){var a=M.mouseButton(o);this._correctButton(o,a)&&(this._lastPoint=s,this._eventButton=a)}},et.prototype.mousemoveWindow=function(o,s){var a=this._lastPoint;if(a){if(o.preventDefault(),function(p,m){var g=mp[m];return p.buttons===void 0||(p.buttons&g)!==g}(o,this._eventButton))this.reset();else if(this._moved||!(s.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(a,s)}},et.prototype.mouseupWindow=function(o){this._lastPoint&&M.mouseButton(o)===this._eventButton&&(this._moved&&M.suppressClick(),this.reset())},et.prototype.enable=function(){this._enabled=!0},et.prototype.disable=function(){this._enabled=!1,this.reset()},et.prototype.isEnabled=function(){return this._enabled},et.prototype.isActive=function(){return this._active};var yp=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.mousedown=function(a,p){o.prototype.mousedown.call(this,a,p),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(a,p){return p===0&&!a.ctrlKey},s.prototype._move=function(a,p){return{around:p,panDelta:p.sub(a)}},s}(et),Jl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,p){return p===0&&a.ctrlKey||p===2},s.prototype._move=function(a,p){var m=.8*(p.x-a.x);if(m)return this._active=!0,{bearingDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(et),vp=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,p){return p===0&&a.ctrlKey||p===2},s.prototype._move=function(a,p){var m=-.5*(p.y-a.y);if(m)return this._active=!0,{pitchDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(et),Ro=function(o){this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset()};Ro.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},Ro.prototype.touchstart=function(o,s,a){return this._calculateTransform(o,s,a)},Ro.prototype.touchmove=function(o,s,a){if(this._active&&!(a.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,s,a)},Ro.prototype.touchend=function(o,s,a){this._calculateTransform(o,s,a),this._active&&a.length<this._minTouches&&this.reset()},Ro.prototype.touchcancel=function(){this.reset()},Ro.prototype._calculateTransform=function(o,s,a){a.length>0&&(this._active=!0);var p=Kl(a,s),m=new l.Point(0,0),g=new l.Point(0,0),x=0;for(var E in p){var k=p[E],D=this._touches[E];D&&(m._add(k),g._add(k.sub(D)),x++,p[E]=k)}if(this._touches=p,!(x<this._minTouches)&&g.mag()){var N=g.div(x);if(this._sum._add(N),!(this._sum.mag()<this._clickTolerance))return{around:m.div(x),panDelta:N}}},Ro.prototype.enable=function(){this._enabled=!0},Ro.prototype.disable=function(){this._enabled=!1,this.reset()},Ro.prototype.isEnabled=function(){return this._enabled},Ro.prototype.isActive=function(){return this._active};var no=function(){this.reset()};function Yl(o,s,a){for(var p=0;p<o.length;p++)if(o[p].identifier===a)return s[p]}function Ql(o,s){return Math.log(o/s)/Math.LN2}no.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},no.prototype._start=function(o){},no.prototype._move=function(o,s,a){return{}},no.prototype.touchstart=function(o,s,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([s[0],s[1]]))},no.prototype.touchmove=function(o,s,a){if(this._firstTwoTouches){o.preventDefault();var p=this._firstTwoTouches,m=p[1],g=Yl(a,s,p[0]),x=Yl(a,s,m);if(g&&x){var E=this._aroundCenter?null:g.add(x).div(2);return this._move([g,x],E,o)}}},no.prototype.touchend=function(o,s,a){if(this._firstTwoTouches){var p=this._firstTwoTouches,m=p[1],g=Yl(a,s,p[0]),x=Yl(a,s,m);g&&x||(this._active&&M.suppressClick(),this.reset())}},no.prototype.touchcancel=function(){this.reset()},no.prototype.enable=function(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"},no.prototype.disable=function(){this._enabled=!1,this.reset()},no.prototype.isEnabled=function(){return this._enabled},no.prototype.isActive=function(){return this._active};var io=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},s.prototype._move=function(a,p){var m=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Ql(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ql(this._distance,m),pinchAround:p}},s}(no);function Ga(o,s){return 180*o.angleWith(s)/Math.PI}var sf=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},s.prototype._move=function(a,p){var m=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ga(this._vector,m),pinchAround:p}},s.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var p=25/(Math.PI*this._minDiameter)*360,m=Ga(a,this._startVector);return Math.abs(m)<p},s}(no);function ol(o){return Math.abs(o.y)>Math.abs(o.x)}var gp=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(a){this._lastPoints=a,ol(a[0].sub(a[1]))&&(this._valid=!1)},s.prototype._move=function(a,p,m){var g=a[0].sub(this._lastPoints[0]),x=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(g,x,m.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(a,p,m){if(this._valid!==void 0)return this._valid;var g=a.mag()>=2,x=p.mag()>=2;if(g||x){if(!g||!x)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var E=a.y>0==p.y>0;return ol(a)&&ol(p)&&E}},s}(no),_p={panStep:100,bearingStep:15,pitchStep:10},ra=function(){var o=_p;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1};function wo(o){return o*(2-o)}ra.prototype.blur=function(){this.reset()},ra.prototype.reset=function(){this._active=!1},ra.prototype.keydown=function(o){var s=this;if(!(o.altKey||o.ctrlKey||o.metaKey)){var a=0,p=0,m=0,g=0,x=0;switch(o.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:o.shiftKey?p=-1:(o.preventDefault(),g=-1);break;case 39:o.shiftKey?p=1:(o.preventDefault(),g=1);break;case 38:o.shiftKey?m=1:(o.preventDefault(),x=-1);break;case 40:o.shiftKey?m=-1:(o.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:function(E){var k=E.getZoom();E.easeTo({duration:300,easeId:"keyboardHandler",easing:wo,zoom:a?Math.round(k)+a*(o.shiftKey?2:1):k,bearing:E.getBearing()+p*s._bearingStep,pitch:E.getPitch()+m*s._pitchStep,offset:[-g*s._panStep,-x*s._panStep],center:E.getCenter()},{originalEvent:o})}}}},ra.prototype.enable=function(){this._enabled=!0},ra.prototype.disable=function(){this._enabled=!1,this.reset()},ra.prototype.isEnabled=function(){return this._enabled},ra.prototype.isActive=function(){return this._active},ra.prototype.disableRotation=function(){this._rotationDisabled=!0},ra.prototype.enableRotation=function(){this._rotationDisabled=!1};var nr=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,l.bindAll(["_onTimeout"],this)};nr.prototype.setZoomRate=function(o){this._defaultZoomRate=o},nr.prototype.setWheelZoomRate=function(o){this._wheelZoomRate=o},nr.prototype.isEnabled=function(){return!!this._enabled},nr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},nr.prototype.isZooming=function(){return!!this._zooming},nr.prototype.enable=function(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")},nr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},nr.prototype.wheel=function(o){if(this.isEnabled()){var s=o.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,a=l.browser.now(),p=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(p*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),o.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=o,this._delta-=s,this._active||this._start(o)),o.preventDefault()}},nr.prototype._onTimeout=function(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)},nr.prototype._start=function(o){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=M.mousePos(this._el,o);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},nr.prototype.renderFrame=function(){var o=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,p=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&p!==0&&(p=1/p);var m=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(m*p))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var g,x=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,E=this._startZoom,k=this._easing,D=!1;if(this._type==="wheel"&&E&&k){var N=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),q=k(N);g=l.number(E,x,q),N<1?this._frameId||(this._frameId=!0):D=!0}else g=x,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(function(){o._zooming=!1,o._handler._triggerRenderFrame(),delete o._targetZoom,delete o._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:g-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},nr.prototype._smoothOutEasing=function(o){var s=l.ease;if(this._prevEase){var a=this._prevEase,p=(l.browser.now()-a.start)/a.duration,m=a.easing(p+.01)-a.easing(p),g=.27/Math.sqrt(m*m+1e-4)*.01,x=Math.sqrt(.0729-g*g);s=l.bezier(g,x,.25,1)}return this._prevEase={start:l.browser.now(),duration:o,easing:s},s},nr.prototype.blur=function(){this.reset()},nr.prototype.reset=function(){this._active=!1};var _a=function(o,s){this._clickZoom=o,this._tapZoom=s};_a.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},_a.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},_a.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},_a.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Fo=function(){this.reset()};Fo.prototype.reset=function(){this._active=!1},Fo.prototype.blur=function(){this.reset()},Fo.prototype.dblclick=function(o,s){return o.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(o.shiftKey?-1:1),around:a.unproject(s)},{originalEvent:o})}}},Fo.prototype.enable=function(){this._enabled=!0},Fo.prototype.disable=function(){this._enabled=!1,this.reset()},Fo.prototype.isEnabled=function(){return this._enabled},Fo.prototype.isActive=function(){return this._active};var oi=function(){this._tap=new ta({numTouches:1,numTaps:1}),this.reset()};oi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},oi.prototype.touchstart=function(o,s,a){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=s[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(o,s,a))},oi.prototype.touchmove=function(o,s,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var p=s[0],m=p.y-this._swipePoint.y;return this._swipePoint=p,o.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(o,s,a)},oi.prototype.touchend=function(o,s,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(o,s,a)&&(this._tapTime=o.timeStamp)},oi.prototype.touchcancel=function(){this.reset()},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active};var Zs=function(o,s,a){this._el=o,this._mousePan=s,this._touchPan=a};Zs.prototype.enable=function(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Zs.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Zs.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Zs.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var us=function(o,s,a){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=s,this._mousePitch=a};us.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},us.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},us.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},us.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var na=function(o,s,a,p){this._el=o,this._touchZoom=s,this._touchRotate=a,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0};na.prototype.enable=function(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},na.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},na.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},na.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},na.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},na.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var vi=function(o){return o.zoom||o.drag||o.pitch||o.rotate},al=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s}(l.Event);function St(o){return o.panDelta&&o.panDelta.mag()||o.zoomDelta||o.bearingDelta||o.pitchDelta}var yt=function(o,s){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Za(o),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),l.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[l.window,"blur",void 0]];for(var p=0,m=this._listeners;p<m.length;p+=1){var g=m[p],x=g[0];M.addEventListener(x,g[1],x===l.window.document?this.handleWindowEvent:this.handleEvent,g[2])}};yt.prototype.destroy=function(){for(var o=0,s=this._listeners;o<s.length;o+=1){var a=s[o],p=a[0];M.removeEventListener(p,a[1],p===l.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},yt.prototype._addDefaultHandlers=function(o){var s=this._map,a=s.getCanvasContainer();this._add("mapEvent",new Pn(s,o));var p=s.boxZoom=new to(s,o);this._add("boxZoom",p);var m=new ro,g=new Fo;s.doubleClickZoom=new _a(g,m),this._add("tapZoom",m),this._add("clickZoom",g);var x=new oi;this._add("tapDragZoom",x);var E=s.touchPitch=new gp;this._add("touchPitch",E);var k=new Jl(o),D=new vp(o);s.dragRotate=new us(o,k,D),this._add("mouseRotate",k,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]);var N=new yp(o),q=new Ro(o);s.dragPan=new Zs(a,N,q),this._add("mousePan",N),this._add("touchPan",q,["touchZoom","touchRotate"]);var Z=new sf,Y=new io;s.touchZoomRotate=new na(a,Y,Z,x),this._add("touchRotate",Z,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]);var J=s.scrollZoom=new nr(s,this);this._add("scrollZoom",J,["mousePan"]);var ie=s.keyboard=new ra;this._add("keyboard",ie),this._add("blockableMapEvent",new ft(s));for(var $=0,ne=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];$<ne.length;$+=1){var ce=ne[$];o.interactive&&o[ce]&&s[ce].enable(o[ce])}},yt.prototype._add=function(o,s,a){this._handlers.push({handlerName:o,handler:s,allowed:a}),this._handlersById[o]=s},yt.prototype.stop=function(o){if(!this._updatingCamera){for(var s=0,a=this._handlers;s<a.length;s+=1)a[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}},yt.prototype.isActive=function(){for(var o=0,s=this._handlers;o<s.length;o+=1)if(s[o].handler.isActive())return!0;return!1},yt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yt.prototype.isMoving=function(){return Boolean(vi(this._eventsInProgress))||this.isZooming()},yt.prototype._blockedByActive=function(o,s,a){for(var p in o)if(p!==a&&(!s||s.indexOf(p)<0))return!0;return!1},yt.prototype.handleWindowEvent=function(o){this.handleEvent(o,o.type+"Window")},yt.prototype._getMapTouches=function(o){for(var s=[],a=0,p=o;a<p.length;a+=1){var m=p[a];this._el.contains(m.target)&&s.push(m)}return s},yt.prototype.handleEvent=function(o,s){this._updatingCamera=!0;for(var a=o.type==="renderFrame"?void 0:o,p={needsRenderFrame:!1},m={},g={},x=o.touches?this._getMapTouches(o.touches):void 0,E=x?M.touchPos(this._el,x):M.mousePos(this._el,o),k=0,D=this._handlers;k<D.length;k+=1){var N=D[k],q=N.handlerName,Z=N.handler,Y=N.allowed;if(Z.isEnabled()){var J=void 0;this._blockedByActive(g,Y,q)?Z.reset():Z[s||o.type]&&(J=Z[s||o.type](o,E,x),this.mergeHandlerResult(p,m,J,q,a),J&&J.needsRenderFrame&&this._triggerRenderFrame()),(J||Z.isActive())&&(g[q]=Z)}}var ie={};for(var $ in this._previousActiveHandlers)g[$]||(ie[$]=a);this._previousActiveHandlers=g,(Object.keys(ie).length||St(p))&&(this._changes.push([p,m,ie]),this._triggerRenderFrame()),(Object.keys(g).length||St(p))&&this._map._stop(!0),this._updatingCamera=!1;var ne=p.cameraAnimation;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},yt.prototype.mergeHandlerResult=function(o,s,a,p,m){if(a){l.extend(o,a);var g={handlerName:p,originalEvent:a.originalEvent||m};a.zoomDelta!==void 0&&(s.zoom=g),a.panDelta!==void 0&&(s.drag=g),a.pitchDelta!==void 0&&(s.pitch=g),a.bearingDelta!==void 0&&(s.rotate=g)}},yt.prototype._applyChanges=function(){for(var o={},s={},a={},p=0,m=this._changes;p<m.length;p+=1){var g=m[p],x=g[0],E=g[1],k=g[2];x.panDelta&&(o.panDelta=(o.panDelta||new l.Point(0,0))._add(x.panDelta)),x.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(o.around=x.around),x.pinchAround!==void 0&&(o.pinchAround=x.pinchAround),x.noInertia&&(o.noInertia=x.noInertia),l.extend(s,E),l.extend(a,k)}this._updateMapTransform(o,s,a),this._changes=[]},yt.prototype._updateMapTransform=function(o,s,a){var p=this._map,m=p.transform;if(!St(o))return this._fireEvents(s,a,!0);var g=o.panDelta,x=o.zoomDelta,E=o.bearingDelta,k=o.pitchDelta,D=o.around,N=o.pinchAround;N!==void 0&&(D=N),p._stop(!0),D=D||p.transform.centerPoint;var q=m.pointLocation(g?D.sub(g):D);E&&(m.bearing+=E),k&&(m.pitch+=k),x&&(m.zoom+=x),m.setLocationAtPoint(q,D),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(s,a,!0)},yt.prototype._fireEvents=function(o,s,a){var p=this,m=vi(this._eventsInProgress),g=vi(o),x={};for(var E in o)this._eventsInProgress[E]||(x[E+"start"]=o[E].originalEvent),this._eventsInProgress[E]=o[E];for(var k in!m&&g&&this._fireEvent("movestart",g.originalEvent),x)this._fireEvent(k,x[k]);for(var D in g&&this._fireEvent("move",g.originalEvent),o)this._fireEvent(D,o[D].originalEvent);var N,q={};for(var Z in this._eventsInProgress){var Y=this._eventsInProgress[Z],J=Y.handlerName,ie=Y.originalEvent;this._handlersById[J].isActive()||(delete this._eventsInProgress[Z],q[Z+"end"]=N=s[J]||ie)}for(var $ in q)this._fireEvent($,q[$]);var ne=vi(this._eventsInProgress);if(a&&(m||g)&&!ne){this._updatingCamera=!0;var ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ye=function(ke){return ke!==0&&-p._bearingSnap<ke&&ke<p._bearingSnap};ce?(ye(ce.bearing||this._map.getBearing())&&(ce.bearing=0),this._map.easeTo(ce,{originalEvent:N})):(this._map.fire(new l.Event("moveend",{originalEvent:N})),ye(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},yt.prototype._fireEvent=function(o,s){this._map.fire(new l.Event(o,s?{originalEvent:s}:{}))},yt.prototype._requestFrame=function(){var o=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete o._frameId,o.handleEvent(new al("renderFrame",{timeStamp:s})),o._applyChanges()})},yt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var ec=function(o){function s(a,p){o.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=p.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(a,p){return this.jumpTo({center:a},p)},s.prototype.panBy=function(a,p,m){return a=l.Point.convert(a).mult(-1),this.panTo(this.transform.center,l.extend({offset:a},p),m)},s.prototype.panTo=function(a,p,m){return this.easeTo(l.extend({center:a},p),m)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(a,p){return this.jumpTo({zoom:a},p),this},s.prototype.zoomTo=function(a,p,m){return this.easeTo(l.extend({zoom:a},p),m)},s.prototype.zoomIn=function(a,p){return this.zoomTo(this.getZoom()+1,a,p),this},s.prototype.zoomOut=function(a,p){return this.zoomTo(this.getZoom()-1,a,p),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(a,p){return this.jumpTo({bearing:a},p),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(a,p){return this.jumpTo({padding:a},p),this},s.prototype.rotateTo=function(a,p,m){return this.easeTo(l.extend({bearing:a},p),m)},s.prototype.resetNorth=function(a,p){return this.rotateTo(0,l.extend({duration:1e3},a),p),this},s.prototype.resetNorthPitch=function(a,p){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},a),p),this},s.prototype.snapToNorth=function(a,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,p):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(a,p){return this.jumpTo({pitch:a},p),this},s.prototype.cameraForBounds=function(a,p){a=l.LngLatBounds.convert(a);var m=p&&p.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),m,p)},s.prototype._cameraForBoxAndBearing=function(a,p,m,g){var x={top:0,bottom:0,right:0,left:0};if(typeof(g=l.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){var E=g.padding;g.padding={top:E,bottom:E,right:E,left:E}}g.padding=l.extend(x,g.padding);var k=this.transform,D=k.padding,N=k.project(l.LngLat.convert(a)),q=k.project(l.LngLat.convert(p)),Z=N.rotate(-m*Math.PI/180),Y=q.rotate(-m*Math.PI/180),J=new l.Point(Math.max(Z.x,Y.x),Math.max(Z.y,Y.y)),ie=new l.Point(Math.min(Z.x,Y.x),Math.min(Z.y,Y.y)),$=J.sub(ie),ne=(k.width-(D.left+D.right+g.padding.left+g.padding.right))/$.x,ce=(k.height-(D.top+D.bottom+g.padding.top+g.padding.bottom))/$.y;if(!(ce<0||ne<0)){var ye=Math.min(k.scaleZoom(k.scale*Math.min(ne,ce)),g.maxZoom),ke=typeof g.offset.x=="number"?new l.Point(g.offset.x,g.offset.y):l.Point.convert(g.offset),Se=new l.Point((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(m*Math.PI/180),ze=ke.add(Se).mult(k.scale/k.zoomScale(ye));return{center:k.unproject(N.add(q).div(2).sub(ze)),zoom:ye,bearing:m}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(a,p,m){return this._fitInternal(this.cameraForBounds(a,p),p,m)},s.prototype.fitScreenCoordinates=function(a,p,m,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(a)),this.transform.pointLocation(l.Point.convert(p)),m,g),g,x)},s.prototype._fitInternal=function(a,p,m){return a?(delete(p=l.extend(a,p)).padding,p.linear?this.easeTo(p,m):this.flyTo(p,m)):this},s.prototype.jumpTo=function(a,p){this.stop();var m=this.transform,g=!1,x=!1,E=!1;return"zoom"in a&&m.zoom!==+a.zoom&&(g=!0,m.zoom=+a.zoom),a.center!==void 0&&(m.center=l.LngLat.convert(a.center)),"bearing"in a&&m.bearing!==+a.bearing&&(x=!0,m.bearing=+a.bearing),"pitch"in a&&m.pitch!==+a.pitch&&(E=!0,m.pitch=+a.pitch),a.padding==null||m.isPaddingEqual(a.padding)||(m.padding=a.padding),this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p)),g&&this.fire(new l.Event("zoomstart",p)).fire(new l.Event("zoom",p)).fire(new l.Event("zoomend",p)),x&&this.fire(new l.Event("rotatestart",p)).fire(new l.Event("rotate",p)).fire(new l.Event("rotateend",p)),E&&this.fire(new l.Event("pitchstart",p)).fire(new l.Event("pitch",p)).fire(new l.Event("pitchend",p)),this.fire(new l.Event("moveend",p))},s.prototype.easeTo=function(a,p){var m=this;this._stop(!1,a.easeId),((a=l.extend({offset:[0,0],duration:500,easing:l.ease},a)).animate===!1||!a.essential&&l.browser.prefersReducedMotion)&&(a.duration=0);var g=this.transform,x=this.getZoom(),E=this.getBearing(),k=this.getPitch(),D=this.getPadding(),N="zoom"in a?+a.zoom:x,q="bearing"in a?this._normalizeBearing(a.bearing,E):E,Z="pitch"in a?+a.pitch:k,Y="padding"in a?a.padding:g.padding,J=l.Point.convert(a.offset),ie=g.centerPoint.add(J),$=g.pointLocation(ie),ne=l.LngLat.convert(a.center||$);this._normalizeCenter(ne);var ce,ye,ke=g.project($),Se=g.project(ne).sub(ke),ze=g.zoomScale(N-x);a.around&&(ce=l.LngLat.convert(a.around),ye=g.locationPoint(ce));var Ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||N!==x,this._rotating=this._rotating||E!==q,this._pitching=this._pitching||Z!==k,this._padding=!g.isPaddingEqual(Y),this._easeId=a.easeId,this._prepareEase(p,a.noMoveStart,Ne),this._ease(function(He){if(m._zooming&&(g.zoom=l.number(x,N,He)),m._rotating&&(g.bearing=l.number(E,q,He)),m._pitching&&(g.pitch=l.number(k,Z,He)),m._padding&&(g.interpolatePadding(D,Y,He),ie=g.centerPoint.add(J)),ce)g.setLocationAtPoint(ce,ye);else{var We=g.zoomScale(g.zoom-x),lt=N>x?Math.min(2,ze):Math.max(.5,ze),Et=Math.pow(lt,1-He),At=g.unproject(ke.add(Se.mult(He*Et)).mult(We));g.setLocationAtPoint(g.renderWorldCopies?At.wrap():At,ie)}m._fireMoveEvents(p)},function(He){m._afterEase(p,He)},a),this},s.prototype._prepareEase=function(a,p,m){m===void 0&&(m={}),this._moving=!0,p||m.moving||this.fire(new l.Event("movestart",a)),this._zooming&&!m.zooming&&this.fire(new l.Event("zoomstart",a)),this._rotating&&!m.rotating&&this.fire(new l.Event("rotatestart",a)),this._pitching&&!m.pitching&&this.fire(new l.Event("pitchstart",a))},s.prototype._fireMoveEvents=function(a){this.fire(new l.Event("move",a)),this._zooming&&this.fire(new l.Event("zoom",a)),this._rotating&&this.fire(new l.Event("rotate",a)),this._pitching&&this.fire(new l.Event("pitch",a))},s.prototype._afterEase=function(a,p){if(!this._easeId||!p||this._easeId!==p){delete this._easeId;var m=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new l.Event("zoomend",a)),g&&this.fire(new l.Event("rotateend",a)),x&&this.fire(new l.Event("pitchend",a)),this.fire(new l.Event("moveend",a))}},s.prototype.flyTo=function(a,p){var m=this;if(!a.essential&&l.browser.prefersReducedMotion){var g=l.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,p)}this.stop(),a=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},a);var x=this.transform,E=this.getZoom(),k=this.getBearing(),D=this.getPitch(),N=this.getPadding(),q="zoom"in a?l.clamp(+a.zoom,x.minZoom,x.maxZoom):E,Z="bearing"in a?this._normalizeBearing(a.bearing,k):k,Y="pitch"in a?+a.pitch:D,J="padding"in a?a.padding:x.padding,ie=x.zoomScale(q-E),$=l.Point.convert(a.offset),ne=x.centerPoint.add($),ce=x.pointLocation(ne),ye=l.LngLat.convert(a.center||ce);this._normalizeCenter(ye);var ke=x.project(ce),Se=x.project(ye).sub(ke),ze=a.curve,Ne=Math.max(x.width,x.height),He=Ne/ie,We=Se.mag();if("minZoom"in a){var lt=l.clamp(Math.min(a.minZoom,E,q),x.minZoom,x.maxZoom),Et=Ne/x.zoomScale(lt-E);ze=Math.sqrt(Et/We*2)}var At=ze*ze;function kt(Nt){var Ot=(He*He-Ne*Ne+(Nt?-1:1)*At*At*We*We)/(2*(Nt?He:Ne)*At*We);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function mr(Nt){return(Math.exp(Nt)-Math.exp(-Nt))/2}function ht(Nt){return(Math.exp(Nt)+Math.exp(-Nt))/2}var Zt=kt(0),Jt=function(Nt){return ht(Zt)/ht(Zt+ze*Nt)},qt=function(Nt){return Ne*((ht(Zt)*(mr(Ot=Zt+ze*Nt)/ht(Ot))-mr(Zt))/At)/We;var Ot},jt=(kt(1)-Zt)/ze;if(Math.abs(We)<1e-6||!isFinite(jt)){if(Math.abs(Ne-He)<1e-6)return this.easeTo(a,p);var Kt=He<Ne?-1:1;jt=Math.abs(Math.log(He/Ne))/ze,qt=function(){return 0},Jt=function(Nt){return Math.exp(Kt*ze*Nt)}}return a.duration="duration"in a?+a.duration:1e3*jt/("screenSpeed"in a?+a.screenSpeed/ze:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=k!==Z,this._pitching=Y!==D,this._padding=!x.isPaddingEqual(J),this._prepareEase(p,!1),this._ease(function(Nt){var Ot=Nt*jt,Vn=1/Jt(Ot);x.zoom=Nt===1?q:E+x.scaleZoom(Vn),m._rotating&&(x.bearing=l.number(k,Z,Nt)),m._pitching&&(x.pitch=l.number(D,Y,Nt)),m._padding&&(x.interpolatePadding(N,J,Nt),ne=x.centerPoint.add($));var fn=Nt===1?ye:x.unproject(ke.add(Se.mult(qt(Ot))).mult(Vn));x.setLocationAtPoint(x.renderWorldCopies?fn.wrap():fn,ne),m._fireMoveEvents(p)},function(){return m._afterEase(p)},a),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(a,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,p)}if(!a){var g=this.handlers;g&&g.stop(!1)}return this},s.prototype._ease=function(a,p,m){m.animate===!1||m.duration===0?(a(1),p()):(this._easeStart=l.browser.now(),this._easeOptions=m,this._onEaseFrame=a,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var a=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(a,p){a=l.wrap(a,-180,180);var m=Math.abs(a-p);return Math.abs(a-360-p)<m&&(a-=360),Math.abs(a+360-p)<m&&(a+=360),a},s.prototype._normalizeCenter=function(a){var p=this.transform;if(p.renderWorldCopies&&!p.lngRange){var m=a.lng-p.center.lng;a.lng+=m>180?-360:m<-180?360:0}},s}(l.Evented),gi=function(o){o===void 0&&(o={}),this.options=o,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};gi.prototype.getDefaultPosition=function(){return"bottom-right"},gi.prototype.onAdd=function(o){var s=this.options&&this.options.compact;return this._map=o,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=M.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},gi.prototype.onRemove=function(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},gi.prototype._setElementTitle=function(o,s){var a=this._map._getUIString("AttributionControl."+s);o.title=a,o.setAttribute("aria-label",a)},gi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},gi.prototype._updateEditLink=function(){var o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(o){var a=s.reduce(function(p,m,g){return m.value&&(p+=m.key+"="+m.value+(g<s.length-1?"&":"")),p},"?");o.href=l.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}},gi.prototype._updateData=function(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},gi.prototype._updateAttributions=function(){if(this._map.style){var o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(function(E){return typeof E!="string"?"":E})):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var a=this._map.style.sourceCaches;for(var p in a){var m=a[p];if(m.used){var g=m.getSource();g.attribution&&o.indexOf(g.attribution)<0&&o.push(g.attribution)}}o.sort(function(E,k){return E.length-k.length});var x=(o=o.filter(function(E,k){for(var D=k+1;D<o.length;D++)if(o[D].indexOf(E)>=0)return!1;return!0})).join(" | ");x!==this._attribHTML&&(this._attribHTML=x,o.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},gi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ia=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};ia.prototype.onAdd=function(o){this._map=o,this._container=M.create("div","mapboxgl-ctrl");var s=M.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ia.prototype.onRemove=function(){M.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ia.prototype.getDefaultPosition=function(){return"bottom-left"},ia.prototype._updateLogo=function(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ia.prototype._logoRequired=function(){if(this._map.style){var o=this._map.style.sourceCaches;for(var s in o)if(o[s].getSource().mapbox_logo)return!0;return!1}},ia.prototype._updateCompact=function(){var o=this._container.children;if(o.length){var s=o[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var ai=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ai.prototype.add=function(o){var s=++this._id;return this._queue.push({callback:o,id:s,cancelled:!1}),s},ai.prototype.remove=function(o){for(var s=this._currentlyRunning,a=0,p=s?this._queue.concat(s):this._queue;a<p.length;a+=1){var m=p[a];if(m.id===o)return void(m.cancelled=!0)}},ai.prototype.run=function(o){o===void 0&&(o=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,p=s;a<p.length;a+=1){var m=p[a];if(!m.cancelled&&(m.callback(o),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ai.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var xa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},xp=l.window.HTMLImageElement,tc=l.window.HTMLElement,Pr=l.window.ImageBitmap,Yn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},uf=function(o){function s(p){var m=this;if((p=l.extend({},Yn,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var g=new $t(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies);if(o.call(this,g,p),this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new ai,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},xa,p.locale),this._clickTolerance=p.clickTolerance,this._requestManager=new l.RequestManager(p.transformRequest,p.accessToken),typeof p.container=="string"){if(this._container=l.window.document.getElementById(p.container),!this._container)throw new Error("Container '"+p.container+"' not found.")}else{if(!(p.container instanceof tc))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new yt(this,p),this._hash=p.hash&&new Jn(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new gi({customAttribution:p.customAttribution})),this.addControl(new ia,p.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(x){m._update(x.dataType==="style"),m.fire(new l.Event(x.dataType+"data",x))}),this.on("dataloading",function(x){m.fire(new l.Event(x.dataType+"dataloading",x))})}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(p,m){if(m===void 0&&(m=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var g=p.onAdd(this);this._controls.push(p);var x=this._controlPositions[m];return m.indexOf("bottom")!==-1?x.insertBefore(g,x.firstChild):x.appendChild(g),this},s.prototype.removeControl=function(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(p);return m>-1&&this._controls.splice(m,1),p.onRemove(this),this},s.prototype.hasControl=function(p){return this._controls.indexOf(p)>-1},s.prototype.resize=function(p){var m=this._containerDimensions(),g=m[0],x=m[1];if(g===this.transform.width&&x===this.transform.height)return this;this._resizeCanvas(g,x),this.transform.resize(g,x),this.painter.resize(g,x);var E=!this._moving;return E&&this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p)),this.fire(new l.Event("resize",p)),E&&this.fire(new l.Event("moveend",p)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()},s.prototype.setMinZoom=function(p){if((p=p==null?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(p){if((p=p==null?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(p){if((p=p==null?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(p){if((p=p==null?60:p)>60)throw new Error("maxPitch must be less than or equal to 60");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(p){return this.transform.renderWorldCopies=p,this._update()},s.prototype.project=function(p){return this.transform.locationPoint(l.LngLat.convert(p))},s.prototype.unproject=function(p){return this.transform.pointLocation(l.Point.convert(p))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(p,m,g){var x,E=this;if(p==="mouseenter"||p==="mouseover"){var k=!1;return{layer:m,listener:g,delegates:{mousemove:function(N){var q=E.getLayer(m)?E.queryRenderedFeatures(N.point,{layers:[m]}):[];q.length?k||(k=!0,g.call(E,new hn(p,E,N.originalEvent,{features:q}))):k=!1},mouseout:function(){k=!1}}}}if(p==="mouseleave"||p==="mouseout"){var D=!1;return{layer:m,listener:g,delegates:{mousemove:function(N){(E.getLayer(m)?E.queryRenderedFeatures(N.point,{layers:[m]}):[]).length?D=!0:D&&(D=!1,g.call(E,new hn(p,E,N.originalEvent)))},mouseout:function(N){D&&(D=!1,g.call(E,new hn(p,E,N.originalEvent)))}}}}return{layer:m,listener:g,delegates:(x={},x[p]=function(N){var q=E.getLayer(m)?E.queryRenderedFeatures(N.point,{layers:[m]}):[];q.length&&(N.features=q,g.call(E,N),delete N.features)},x)}},s.prototype.on=function(p,m,g){if(g===void 0)return o.prototype.on.call(this,p,m);var x=this._createDelegatedListener(p,m,g);for(var E in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(x),x.delegates)this.on(E,x.delegates[E]);return this},s.prototype.once=function(p,m,g){if(g===void 0)return o.prototype.once.call(this,p,m);var x=this._createDelegatedListener(p,m,g);for(var E in x.delegates)this.once(E,x.delegates[E]);return this},s.prototype.off=function(p,m,g){var x=this;return g===void 0?o.prototype.off.call(this,p,m):(this._delegatedListeners&&this._delegatedListeners[p]&&function(E){for(var k=E[p],D=0;D<k.length;D++){var N=k[D];if(N.layer===m&&N.listener===g){for(var q in N.delegates)x.off(q,N.delegates[q]);return k.splice(D,1),x}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(p,m){if(!this.style)return[];var g;if(m!==void 0||p===void 0||p instanceof l.Point||Array.isArray(p)||(m=p,p=void 0),m=m||{},(p=p||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof p[0]=="number")g=[l.Point.convert(p)];else{var x=l.Point.convert(p[0]),E=l.Point.convert(p[1]);g=[x,new l.Point(E.x,x.y),E,new l.Point(x.x,E.y),x]}return this.style.queryRenderedFeatures(g,m,this.transform)},s.prototype.querySourceFeatures=function(p,m){return this.style.querySourceFeatures(p,m)},s.prototype.setStyle=function(p,m){return(m=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(p,m))},s.prototype._getUIString=function(p){var m=this._locale[p];if(m==null)throw new Error("Missing UI string '"+p+"'");return m},s.prototype._updateStyle=function(p,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),p?(this.style=new qr(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(p,m){var g=this;if(typeof p=="string"){var x=this._requestManager.normalizeStyleURL(p),E=this._requestManager.transformRequest(x,l.ResourceType.Style);l.getJSON(E,function(k,D){k?g.fire(new l.ErrorEvent(k)):D&&g._updateDiff(D,m)})}else typeof p=="object"&&this._updateDiff(p,m)},s.prototype._updateDiff=function(p,m){try{this.style.setState(p)&&this._update(!0)}catch(g){l.warnOnce("Unable to perform style diff: "+(g.message||g.error||g)+".  Rebuilding the style from scratch."),this._updateStyle(p,m)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(p,m){return this._lazyInitEmptyStyle(),this.style.addSource(p,m),this._update(!0)},s.prototype.isSourceLoaded=function(p){var m=this.style&&this.style.sourceCaches[p];if(m!==void 0)return m.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+p+"'")))},s.prototype.areTilesLoaded=function(){var p=this.style&&this.style.sourceCaches;for(var m in p){var g=p[m]._tiles;for(var x in g){var E=g[x];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(p,m,g){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,m,g)},s.prototype.removeSource=function(p){return this.style.removeSource(p),this._update(!0)},s.prototype.getSource=function(p){return this.style.getSource(p)},s.prototype.addImage=function(p,m,g){g===void 0&&(g={});var x=g.pixelRatio;x===void 0&&(x=1);var E=g.sdf;E===void 0&&(E=!1);var k=g.stretchX,D=g.stretchY,N=g.content;if(this._lazyInitEmptyStyle(),m instanceof xp||Pr&&m instanceof Pr){var q=l.browser.getImageData(m);this.style.addImage(p,{data:new l.RGBAImage({width:q.width,height:q.height},q.data),pixelRatio:x,stretchX:k,stretchY:D,content:N,sdf:E,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Z=m;this.style.addImage(p,{data:new l.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:x,stretchX:k,stretchY:D,content:N,sdf:E,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,p)}},s.prototype.updateImage=function(p,m){var g=this.style.getImage(p);if(!g)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var x=m instanceof xp||Pr&&m instanceof Pr?l.browser.getImageData(m):m,E=x.width,k=x.height,D=x.data;return E===void 0||k===void 0?this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):E!==g.data.width||k!==g.data.height?this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(g.data.replace(D,!(m instanceof xp||Pr&&m instanceof Pr)),void this.style.updateImage(p,g))},s.prototype.hasImage=function(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(p){this.style.removeImage(p)},s.prototype.loadImage=function(p,m){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),m)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(p,m){return this._lazyInitEmptyStyle(),this.style.addLayer(p,m),this._update(!0)},s.prototype.moveLayer=function(p,m){return this.style.moveLayer(p,m),this._update(!0)},s.prototype.removeLayer=function(p){return this.style.removeLayer(p),this._update(!0)},s.prototype.getLayer=function(p){return this.style.getLayer(p)},s.prototype.setLayerZoomRange=function(p,m,g){return this.style.setLayerZoomRange(p,m,g),this._update(!0)},s.prototype.setFilter=function(p,m,g){return g===void 0&&(g={}),this.style.setFilter(p,m,g),this._update(!0)},s.prototype.getFilter=function(p){return this.style.getFilter(p)},s.prototype.setPaintProperty=function(p,m,g,x){return x===void 0&&(x={}),this.style.setPaintProperty(p,m,g,x),this._update(!0)},s.prototype.getPaintProperty=function(p,m){return this.style.getPaintProperty(p,m)},s.prototype.setLayoutProperty=function(p,m,g,x){return x===void 0&&(x={}),this.style.setLayoutProperty(p,m,g,x),this._update(!0)},s.prototype.getLayoutProperty=function(p,m){return this.style.getLayoutProperty(p,m)},s.prototype.setLight=function(p,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(p,m),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(p,m){return this.style.setFeatureState(p,m),this._update()},s.prototype.removeFeatureState=function(p,m){return this.style.removeFeatureState(p,m),this._update()},s.prototype.getFeatureState=function(p){return this.style.getFeatureState(p)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var p=0,m=0;return this._container&&(p=this._container.clientWidth||400,m=this._container.clientHeight||300),[p,m]},s.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=M.create("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=M.create("div","mapboxgl-canvas-container",p);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=M.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var g=this._containerDimensions();this._resizeCanvas(g[0],g[1]);var x=this._controlContainer=M.create("div","mapboxgl-control-container",p),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(k){E[k]=M.create("div","mapboxgl-ctrl-"+k,x)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(p,m){var g=l.browser.devicePixelRatio||1;this._canvas.width=g*p,this._canvas.height=g*m,this._canvas.style.width=p+"px",this._canvas.style.height=m+"px"},s.prototype._setupPainter=function(){var p=l.extend({},I.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);m?(this.painter=new Dr(m,this.transform),l.webpSupported.testSupport(m)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))},s.prototype._contextRestored=function(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))},s.prototype._onMapScroll=function(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(p){return this._update(),this._renderTaskQueue.add(p)},s.prototype._cancelRenderFrame=function(p){this._renderTaskQueue.remove(p)},s.prototype._render=function(p){var m,g=this,x=0,E=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=E.createQueryEXT(),E.beginQueryEXT(E.TIME_ELAPSED_EXT,m),x=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),!this._removed){var k=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var D=this.transform.zoom,N=l.browser.now();this.style.zoomHistory.update(D,N);var q=new l.EvaluationParameters(D,{now:N,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Z=q.crossFadingFactor();Z===1&&Z===this._crossFadingFactor||(k=!0,this._crossFadingFactor=Z),this.style.update(q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||k)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Y=l.browser.now()-x;E.endQueryEXT(E.TIME_ELAPSED_EXT,m),setTimeout(function(){var $=E.getQueryObjectEXT(m,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(m),g.fire(new l.Event("gpu-timing-frame",{cpuTime:Y,gpuTime:$}))},50)}if(this.listens("gpu-timing-layer")){var J=this.painter.collectGpuTimers();setTimeout(function(){var $=g.painter.queryGpuTimers(J);g.fire(new l.Event("gpu-timing-layer",{layerTimes:$}))},50)}var ie=this._sourcesDirty||this._styleDirty||this._placementDirty;return ie||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||ie||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var p=0,m=this._controls;p<m.length;p+=1)m[p].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),Gs(this._canvasContainer),Gs(this._controlContainer),Gs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},s.prototype.triggerRepaint=function(){var p=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(m){p._frame=null,p._render(m)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(p){this._trackResize&&this.resize({originalEvent:p})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(p){this._showPadding!==p&&(this._showPadding=p,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(p){this._vertices=p,this._update()},s.prototype._setCacheLimits=function(p,m){l.setCacheLimits(p,m)},a.version.get=function(){return l.version},Object.defineProperties(s.prototype,a),s}(ec);function Gs(o){o.parentNode&&o.parentNode.removeChild(o)}var bp={showCompass:!0,showZoom:!0,visualizePitch:!1},Wa=function(o){var s=this;this.options=l.extend({},bp,o),this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return s._map.zoomIn({},{originalEvent:a})}),M.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return s._map.zoomOut({},{originalEvent:a})}),M.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:a}):s._map.resetNorth({},{originalEvent:a})}),this._compassIcon=M.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Wa.prototype._updateZoomButtons=function(){var o=this._map.getZoom(),s=o===this._map.getMaxZoom(),a=o===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},Wa.prototype._rotateCompassArrow=function(){var o=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=o},Wa.prototype.onAdd=function(o){return this._map=o,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new oo(this._map,this._compass,this.options.visualizePitch)),this._container},Wa.prototype.onRemove=function(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Wa.prototype._createButton=function(o,s){var a=M.create("button",o,this._container);return a.type="button",a.addEventListener("click",s),a},Wa.prototype._setButtonTitle=function(o,s){var a=this._map._getUIString("NavigationControl."+s);o.title=a,o.setAttribute("aria-label",a)};var oo=function(o,s,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new Jl({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,a&&(this.mousePitch=new vp({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),M.addEventListener(s,"mousedown",this.mousedown),M.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(s,"touchmove",this.touchmove),M.addEventListener(s,"touchend",this.touchend),M.addEventListener(s,"touchcancel",this.reset)};function du(o,s,a){if(o=new l.LngLat(o.lng,o.lat),s){var p=new l.LngLat(o.lng-360,o.lat),m=new l.LngLat(o.lng+360,o.lat),g=a.locationPoint(o).distSqr(s);a.locationPoint(p).distSqr(s)<g?o=p:a.locationPoint(m).distSqr(s)<g&&(o=m)}for(;Math.abs(o.lng-a.center.lng)>180;){var x=a.locationPoint(o);if(x.x>=0&&x.y>=0&&x.x<=a.width&&x.y<=a.height)break;o.lng>a.center.lng?o.lng-=360:o.lng+=360}return o}oo.prototype.down=function(o,s){this.mouseRotate.mousedown(o,s),this.mousePitch&&this.mousePitch.mousedown(o,s),M.disableDrag()},oo.prototype.move=function(o,s){var a=this.map,p=this.mouseRotate.mousemoveWindow(o,s);if(p&&p.bearingDelta&&a.setBearing(a.getBearing()+p.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(o,s);m&&m.pitchDelta&&a.setPitch(a.getPitch()+m.pitchDelta)}},oo.prototype.off=function(){var o=this.element;M.removeEventListener(o,"mousedown",this.mousedown),M.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(o,"touchmove",this.touchmove),M.removeEventListener(o,"touchend",this.touchend),M.removeEventListener(o,"touchcancel",this.reset),this.offTemp()},oo.prototype.offTemp=function(){M.enableDrag(),M.removeEventListener(l.window,"mousemove",this.mousemove),M.removeEventListener(l.window,"mouseup",this.mouseup)},oo.prototype.mousedown=function(o){this.down(l.extend({},o,{ctrlKey:!0,preventDefault:function(){return o.preventDefault()}}),M.mousePos(this.element,o)),M.addEventListener(l.window,"mousemove",this.mousemove),M.addEventListener(l.window,"mouseup",this.mouseup)},oo.prototype.mousemove=function(o){this.move(o,M.mousePos(this.element,o))},oo.prototype.mouseup=function(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()},oo.prototype.touchstart=function(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return o.preventDefault()}},this._startPos))},oo.prototype.touchmove=function(o){o.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:function(){return o.preventDefault()}},this._lastPos))},oo.prototype.touchend=function(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},oo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ba={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function rc(o,s,a){var p=o.classList;for(var m in ba)p.remove("mapboxgl-"+a+"-anchor-"+m);p.add("mapboxgl-"+a+"-anchor-"+s)}var mu,sl=function(o){function s(a,p){if(o.call(this),(a instanceof l.window.HTMLElement||p)&&(a=l.extend({element:a},p)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=l.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div"),this._element.setAttribute("aria-label","Map marker");var m=M.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var g=M.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");var x=M.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"fill-rule","nonzero");var E=M.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");for(var k=0,D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];k<D.length;k+=1){var N=D[k],q=M.createNS("http://www.w3.org/2000/svg","ellipse");q.setAttributeNS(null,"opacity","0.04"),q.setAttributeNS(null,"cx","10.5"),q.setAttributeNS(null,"cy","5.80029008"),q.setAttributeNS(null,"rx",N.rx),q.setAttributeNS(null,"ry",N.ry),E.appendChild(q)}var Z=M.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"fill",this._color);var Y=M.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Z.appendChild(Y);var J=M.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"opacity","0.25"),J.setAttributeNS(null,"fill","#000000");var ie=M.createNS("http://www.w3.org/2000/svg","path");ie.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),J.appendChild(ie);var $=M.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$.setAttributeNS(null,"fill","#FFFFFF");var ne=M.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");var ce=M.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");var ye=M.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#FFFFFF"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962"),ne.appendChild(ce),ne.appendChild(ye),x.appendChild(E),x.appendChild(Z),x.appendChild(J),x.appendChild($),x.appendChild(ne),m.appendChild(x),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=l.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ke){ke.preventDefault()}),this._element.addEventListener("mousedown",function(ke){ke.preventDefault()}),rc(this._element,this._anchor,"marker"),this._popup=null}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=l.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var p=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(24.6+p)],"bottom-right":[-p,-1*(24.6+p)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(a){var p=a.code,m=a.charCode||a.keyCode;p!=="Space"&&p!=="Enter"&&m!==32&&m!==13||this.togglePopup()},s.prototype._onMapClick=function(a){var p=a.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},s.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=du(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(p="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,ba[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+p)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(a){return this._offset=l.Point.convert(a),this._update(),this},s.prototype._onMove=function(a){if(!this._isDragging){var p=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(l.Evented),wp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},yu=0,Ws=!1,Sp=function(o){function s(a){o.call(this),this.options=l.extend({},wp,a),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){var p;return this._map=a,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),p=this._setupUI,mu!==void 0?p(mu):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(m){p(mu=m.state!=="denied")}):p(mu=!!l.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,yu=0,Ws=!1},s.prototype._isOutOfMapMaxBounds=function(a){var p=this._map.getMaxBounds(),m=a.coords;return p&&(m.longitude<p.getWest()||m.longitude>p.getEast()||m.latitude<p.getSouth()||m.latitude>p.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",a)),this._finish()}},s.prototype._updateCamera=function(a){var p=new l.LngLat(a.coords.longitude,a.coords.latitude),m=a.coords.accuracy,g=this._map.getBearing(),x=l.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(p.toBounds(m),x,{geolocateSource:!0})},s.prototype._updateMarker=function(a){if(a){var p=new l.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,p=this._map.unproject([0,a]),m=this._map.unproject([1,a]),g=p.distanceTo(m),x=Math.ceil(2*this._accuracy/g);this._circleElement.style.width=x+"px",this._circleElement.style.height=x+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Ws)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",a)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(a){var p=this;if(this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this._geolocateButton=M.create("button","mapboxgl-ctrl-geolocate",this._container),M.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var g=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new sl(this._dotElement),this._circleElement=M.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(x){x.geolocateSource||p._watchState!=="ACTIVE_LOCK"||x.originalEvent&&x.originalEvent.type==="resize"||(p._watchState="BACKGROUND",p._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),p._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),p.fire(new l.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":yu--,Ws=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++yu>1?(a={maximumAge:6e5,timeout:0},Ws=!0):(a=this.options.positionOptions,Ws=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(l.Evented),ls={maxWidth:100,unit:"metric"},cs=function(o){this.options=l.extend({},ls,o),l.bindAll(["_onMove","setUnit"],this)};function nc(o,s,a){var p=a&&a.maxWidth||100,m=o._container.clientHeight/2,g=o.unproject([0,m]),x=o.unproject([p,m]),E=g.distanceTo(x);if(a&&a.unit==="imperial"){var k=3.2808*E;k>5280?ps(s,p,k/5280,o._getUIString("ScaleControl.Miles")):ps(s,p,k,o._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?ps(s,p,E/1852,o._getUIString("ScaleControl.NauticalMiles")):E>=1e3?ps(s,p,E/1e3,o._getUIString("ScaleControl.Kilometers")):ps(s,p,E,o._getUIString("ScaleControl.Meters"))}function ps(o,s,a,p){var m,g,x,E=(m=a,(g=Math.pow(10,(""+Math.floor(m)).length-1))*(x=(x=m/g)>=10?10:x>=5?5:x>=3?3:x>=2?2:x>=1?1:function(k){var D=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*D)/D}(x)));o.style.width=s*(E/a)+"px",o.innerHTML=E+"&nbsp;"+p}cs.prototype.getDefaultPosition=function(){return"bottom-left"},cs.prototype._onMove=function(){nc(this._map,this._container,this.options)},cs.prototype.onAdd=function(o){return this._map=o,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",o.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},cs.prototype.onRemove=function(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},cs.prototype.setUnit=function(o){this.options.unit=o,nc(this._map,this._container,this.options)};var Bo=function(o){this._fullscreen=!1,o&&o.container&&(o.container instanceof l.window.HTMLElement?this._container=o.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};Bo.prototype.onAdd=function(o){return this._map=o,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Bo.prototype.onRemove=function(){M.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Bo.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},Bo.prototype._setupUI=function(){var o=this._fullscreenButton=M.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);M.create("span","mapboxgl-ctrl-icon",o).setAttribute("aria-hidden",!0),o.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Bo.prototype._updateTitle=function(){var o=this._getTitle();this._fullscreenButton.setAttribute("aria-label",o),this._fullscreenButton.title=o},Bo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Bo.prototype._isFullscreen=function(){return this._fullscreen},Bo.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Bo.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ep={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ul=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Tp=function(o){function s(a){o.call(this),this.options=l.extend(Object.create(Ep),a),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=l.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(a){return this.setDOMContent(l.window.document.createTextNode(a))},s.prototype.setHTML=function(a){var p,m=l.window.document.createDocumentFragment(),g=l.window.document.createElement("body");for(g.innerHTML=a;p=g.firstChild;)m.appendChild(p);return this.setDOMContent(m)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},s.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},s.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},s.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},s.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=M.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(a){this._update(a.point)},s.prototype._onMouseMove=function(a){this._update(a.point)},s.prototype._onDrag=function(a){this._update(a.point)},s.prototype._update=function(a){var p=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=M.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=M.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(q){return p._container.classList.add(q)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=du(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var m=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),g=this.options.anchor,x=function q(Z){if(Z){if(typeof Z=="number"){var Y=Math.round(Math.sqrt(.5*Math.pow(Z,2)));return{center:new l.Point(0,0),top:new l.Point(0,Z),"top-left":new l.Point(Y,Y),"top-right":new l.Point(-Y,Y),bottom:new l.Point(0,-Z),"bottom-left":new l.Point(Y,-Y),"bottom-right":new l.Point(-Y,-Y),left:new l.Point(Z,0),right:new l.Point(-Z,0)}}if(Z instanceof l.Point||Array.isArray(Z)){var J=l.Point.convert(Z);return{center:J,top:J,"top-left":J,"top-right":J,bottom:J,"bottom-left":J,"bottom-right":J,left:J,right:J}}return{center:l.Point.convert(Z.center||[0,0]),top:l.Point.convert(Z.top||[0,0]),"top-left":l.Point.convert(Z["top-left"]||[0,0]),"top-right":l.Point.convert(Z["top-right"]||[0,0]),bottom:l.Point.convert(Z.bottom||[0,0]),"bottom-left":l.Point.convert(Z["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(Z["bottom-right"]||[0,0]),left:l.Point.convert(Z.left||[0,0]),right:l.Point.convert(Z.right||[0,0])}}return q(new l.Point(0,0))}(this.options.offset);if(!g){var E,k=this._container.offsetWidth,D=this._container.offsetHeight;E=m.y+x.bottom.y<D?["top"]:m.y>this._map.transform.height-D?["bottom"]:[],m.x<k/2?E.push("left"):m.x>this._map.transform.width-k/2&&E.push("right"),g=E.length===0?"bottom":E.join("-")}var N=m.add(x[g]).round();M.setTransform(this._container,ba[g]+" translate("+N.x+"px,"+N.y+"px)"),rc(this._container,g,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(ul);a&&a.focus()}},s.prototype._onClose=function(){this.remove()},s}(l.Evented),ic={version:l.version,supported:I,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:uf,NavigationControl:Wa,GeolocateControl:Sp,AttributionControl:gi,ScaleControl:cs,FullscreenControl:Bo,Popup:Tp,Marker:sl,Style:qr,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){Ae().acquire(Pe)},clearPrewarmedResources:function(){var o=pt;o&&(o.isPreloaded()&&o.numActive()===1?(o.release(Pe),pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(o){l.config.ACCESS_TOKEN=o},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(o){l.config.API_URL=o},get workerCount(){return Ve.workerCount},set workerCount(o){Ve.workerCount=o},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(o){l.config.MAX_PARALLEL_IMAGE_REQUESTS=o},clearStorage:function(o){l.clearTileCache(o)},workerUrl:""};return ic}),y})})(P0);var nC=P0.exports,C0={exports:{}};(function(r,n){(function(u,f){r.exports=f()})(Lc,function(){var u=function(S,P){var F={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},le={on:function(fe,_e,$e){if(F[fe]===void 0)throw new Error("Invalid event type: "+fe);F[fe].push({selector:_e,fn:$e})},render:function(fe){P.store.featureChanged(fe)}},ve=function(fe,_e){for(var $e=F[fe],Ge=$e.length;Ge--;){var dt=$e[Ge];if(dt.selector(_e)){dt.fn.call(le,_e)||P.store.render(),P.ui.updateMapClasses();break}}};return S.start.call(le),{render:S.render,stop:function(){S.stop&&S.stop()},trash:function(){S.trash&&(S.trash(),P.store.render())},combineFeatures:function(){S.combineFeatures&&S.combineFeatures()},uncombineFeatures:function(){S.uncombineFeatures&&S.uncombineFeatures()},drag:function(fe){ve("drag",fe)},click:function(fe){ve("click",fe)},mousemove:function(fe){ve("mousemove",fe)},mousedown:function(fe){ve("mousedown",fe)},mouseup:function(fe){ve("mouseup",fe)},mouseout:function(fe){ve("mouseout",fe)},keydown:function(fe){ve("keydown",fe)},keyup:function(fe){ve("keyup",fe)},touchstart:function(fe){ve("touchstart",fe)},touchmove:function(fe){ve("touchmove",fe)},touchend:function(fe){ve("touchend",fe)},tap:function(fe){ve("tap",fe)}}},f=6378137;function y(S){var P=0;if(S&&S.length>0){P+=Math.abs(w(S[0]));for(var F=1;F<S.length;F++)P-=Math.abs(w(S[F]))}return P}function w(S){var P,F,le,ve,fe,_e,$e=0,Ge=S.length;if(Ge>2){for(_e=0;_e<Ge;_e++)_e===Ge-2?(le=Ge-2,ve=Ge-1,fe=0):_e===Ge-1?(le=Ge-1,ve=0,fe=1):(le=_e,ve=_e+1,fe=_e+2),P=S[le],F=S[ve],$e+=(l(S[fe][0])-l(P[0]))*Math.sin(l(F[1]));$e=$e*f*f/2}return $e}function l(S){return S*Math.PI/180}var I={geometry:function S(P){var F,le=0;switch(P.type){case"Polygon":return y(P.coordinates);case"MultiPolygon":for(F=0;F<P.coordinates.length;F++)le+=y(P.coordinates[F]);return le;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(F=0;F<P.geometries.length;F++)le+=S(P.geometries[F]);return le}},ring:w},M="mapboxgl-ctrl",j="mapbox-gl-draw_ctrl-draw-btn",ee="mapbox-gl-draw_line",Ce="mapbox-gl-draw_polygon",W="mapbox-gl-draw_point",xe="mapbox-gl-draw_trash",Le="mapbox-gl-draw_combine",De="mapbox-gl-draw_uncombine",se="mapboxgl-ctrl-group",re="active",oe="mapbox-gl-draw_boxselect",be="mapbox-gl-draw-hot",Re="mapbox-gl-draw-cold",Me="add",Ie="move",je="drag",at="pointer",Xe="none",_t={POLYGON:"polygon",LINE:"line_string",POINT:"point"},Mt="Feature",bt="Polygon",Ct="LineString",Ut="Point",Cr="FeatureCollection",Ir="Multi",Fn="MultiPoint",Qt="MultiLineString",Bn="MultiPolygon",Gt={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},Ye="draw.create",zt="draw.delete",Xt="draw.update",Rr="draw.selectionchange",Gr="draw.modechange",fo="draw.actionable",en="draw.render",si="draw.combine",cr="draw.uncombine",Io="move",rs="change_coordinates",Hn="feature",er="midpoint",Vi="vertex",on="true",An="false",Xu=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],qi={Point:0,LineString:1,Polygon:2};function As(S,P){var F=qi[S.geometry.type]-qi[P.geometry.type];return F===0&&S.geometry.type===bt?S.area-P.area:F}function cn(S){if(this._items={},this._nums={},this._length=S?S.length:0,S)for(var P=0,F=S.length;P<F;P++)this.add(S[P]),S[P]!==void 0&&(typeof S[P]=="string"?this._items[S[P]]=P:this._nums[S[P]]=P)}cn.prototype.add=function(S){return this.has(S)||(this._length++,typeof S=="string"?this._items[S]=this._length:this._nums[S]=this._length),this},cn.prototype.delete=function(S){return this.has(S)===!1||(this._length--,delete this._items[S],delete this._nums[S]),this},cn.prototype.has=function(S){return(typeof S=="string"||typeof S=="number")&&(this._items[S]!==void 0||this._nums[S]!==void 0)},cn.prototype.values=function(){var S=this,P=[];return Object.keys(this._items).forEach(function(F){P.push({k:F,v:S._items[F]})}),Object.keys(this._nums).forEach(function(F){P.push({k:JSON.parse(F),v:S._nums[F]})}),P.sort(function(F,le){return F.v-le.v}).map(function(F){return F.k})},cn.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var za=[Hn,er,Vi],ko={click:function(S,P,F){return Ci(S,P,F,F.options.clickBuffer)},touch:function(S,P,F){return Ci(S,P,F,F.options.touchBuffer)}};function Ci(S,P,F,le){if(F.map===null)return[];var ve=S?function(dt,Ee){return Ee===void 0&&(Ee=0),[[dt.point.x-Ee,dt.point.y-Ee],[dt.point.x+Ee,dt.point.y+Ee]]}(S,le):P,fe={};F.options.styles&&(fe.layers=F.options.styles.map(function(dt){return dt.id}));var _e=F.map.queryRenderedFeatures(ve,fe).filter(function(dt){return za.indexOf(dt.properties.meta)!==-1}),$e=new cn,Ge=[];return _e.forEach(function(dt){var Ee=dt.properties.id;$e.has(Ee)||($e.add(Ee),Ge.push(dt))}),function(dt){return dt.map(function(Ee){return Ee.geometry.type===bt&&(Ee.area=I.geometry({type:Mt,property:{},geometry:Ee.geometry})),Ee}).sort(As).map(function(Ee){return delete Ee.area,Ee})}(Ge)}function mi(S,P){var F=ko.click(S,null,P),le={mouse:Xe};return F[0]&&(le.mouse=F[0].properties.active===on?Ie:at,le.feature=F[0].properties.meta),P.events.currentModeName().indexOf("draw")!==-1&&(le.mouse=Me),P.ui.queueMapClasses(le),P.ui.updateMapClasses(),F[0]}function ca(S,P){var F=S.x-P.x,le=S.y-P.y;return Math.sqrt(F*F+le*le)}function Zi(S,P,F){F===void 0&&(F={});var le=F.fineTolerance!=null?F.fineTolerance:4,ve=F.grossTolerance!=null?F.grossTolerance:12,fe=F.interval!=null?F.interval:500;S.point=S.point||P.point,S.time=S.time||P.time;var _e=ca(S.point,P.point);return _e<le||_e<ve&&P.time-S.time<fe}function Ms(S,P,F){F===void 0&&(F={});var le=F.tolerance!=null?F.tolerance:25,ve=F.interval!=null?F.interval:250;return S.point=S.point||P.point,S.time=S.time||P.time,ca(S.point,P.point)<le&&P.time-S.time<ve}function ns(S,P){return S(P={exports:{}},P.exports),P.exports}var La=ns(function(S){var P=S.exports=function(F,le){if(le||(le=16),F===void 0&&(F=128),F<=0)return"0";for(var ve=Math.log(Math.pow(2,F))/Math.log(le),fe=2;ve===1/0;fe*=2)ve=Math.log(Math.pow(2,F/fe))/Math.log(le)*fe;var _e=ve-Math.floor(ve),$e="";for(fe=0;fe<Math.floor(ve);fe++)$e=Math.floor(Math.random()*le).toString(le)+$e;if(_e){var Ge=Math.pow(le,_e);$e=Math.floor(Math.random()*Ge).toString(le)+$e}var dt=parseInt($e,le);return dt!==1/0&&dt>=Math.pow(2,F)?P(F,le):$e};P.rack=function(F,le,ve){var fe=function($e){var Ge=0;do{if(Ge++>10){if(!ve)throw new Error("too many ID collisions, use more bits");F+=ve}var dt=P(F,le)}while(Object.hasOwnProperty.call(_e,dt));return _e[dt]=$e,dt},_e=fe.hats={};return fe.get=function($e){return fe.hats[$e]},fe.set=function($e,Ge){return fe.hats[$e]=Ge,fe},fe.bits=F||128,fe.base=le||16,fe}}),Mn=function(S,P){this.ctx=S,this.properties=P.properties||{},this.coordinates=P.geometry.coordinates,this.id=P.id||La(),this.type=P.geometry.type};Mn.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Mn.prototype.incomingCoords=function(S){this.setCoordinates(S)},Mn.prototype.setCoordinates=function(S){this.coordinates=S,this.changed()},Mn.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Mn.prototype.setProperty=function(S,P){this.properties[S]=P},Mn.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:Mt,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Mn.prototype.internal=function(S){var P={id:this.id,meta:Hn,"meta:type":this.type,active:An,mode:S};if(this.ctx.options.userProperties)for(var F in this.properties)P["user_"+F]=this.properties[F];return{type:Mt,properties:P,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Gi=function(S,P){Mn.call(this,S,P)};(Gi.prototype=Object.create(Mn.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Gi.prototype.updateCoordinate=function(S,P,F){this.coordinates=arguments.length===3?[P,F]:[S,P],this.changed()},Gi.prototype.getCoordinate=function(){return this.getCoordinates()};var Wi=function(S,P){Mn.call(this,S,P)};(Wi.prototype=Object.create(Mn.prototype)).isValid=function(){return this.coordinates.length>1},Wi.prototype.addCoordinate=function(S,P,F){this.changed();var le=parseInt(S,10);this.coordinates.splice(le,0,[P,F])},Wi.prototype.getCoordinate=function(S){var P=parseInt(S,10);return JSON.parse(JSON.stringify(this.coordinates[P]))},Wi.prototype.removeCoordinate=function(S){this.changed(),this.coordinates.splice(parseInt(S,10),1)},Wi.prototype.updateCoordinate=function(S,P,F){var le=parseInt(S,10);this.coordinates[le]=[P,F],this.changed()};var Xn=function(S,P){Mn.call(this,S,P),this.coordinates=this.coordinates.map(function(F){return F.slice(0,-1)})};(Xn.prototype=Object.create(Mn.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(S){return S.length>2})},Xn.prototype.incomingCoords=function(S){this.coordinates=S.map(function(P){return P.slice(0,-1)}),this.changed()},Xn.prototype.setCoordinates=function(S){this.coordinates=S,this.changed()},Xn.prototype.addCoordinate=function(S,P,F){this.changed();var le=S.split(".").map(function(ve){return parseInt(ve,10)});this.coordinates[le[0]].splice(le[1],0,[P,F])},Xn.prototype.removeCoordinate=function(S){this.changed();var P=S.split(".").map(function(le){return parseInt(le,10)}),F=this.coordinates[P[0]];F&&(F.splice(P[1],1),F.length<3&&this.coordinates.splice(P[0],1))},Xn.prototype.getCoordinate=function(S){var P=S.split(".").map(function(le){return parseInt(le,10)}),F=this.coordinates[P[0]];return JSON.parse(JSON.stringify(F[P[1]]))},Xn.prototype.getCoordinates=function(){return this.coordinates.map(function(S){return S.concat([S[0]])})},Xn.prototype.updateCoordinate=function(S,P,F){this.changed();var le=S.split("."),ve=parseInt(le[0],10),fe=parseInt(le[1],10);this.coordinates[ve]===void 0&&(this.coordinates[ve]=[]),this.coordinates[ve][fe]=[P,F]};var zs={MultiPoint:Gi,MultiLineString:Wi,MultiPolygon:Xn},Ao=function(S,P,F,le,ve){var fe=F.split("."),_e=parseInt(fe[0],10),$e=fe[1]?fe.slice(1).join("."):null;return S[_e][P]($e,le,ve)},Un=function(S,P){if(Mn.call(this,S,P),delete this.coordinates,this.model=zs[P.geometry.type],this.model===void 0)throw new TypeError(P.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(P.geometry.coordinates)};function tr(S){this.map=S.map,this.drawConfig=JSON.parse(JSON.stringify(S.options||{})),this._ctx=S}(Un.prototype=Object.create(Mn.prototype))._coordinatesToFeatures=function(S){var P=this,F=this.model.bind(this);return S.map(function(le){return new F(P.ctx,{id:La(),type:Mt,properties:{},geometry:{coordinates:le,type:P.type.replace("Multi","")}})})},Un.prototype.isValid=function(){return this.features.every(function(S){return S.isValid()})},Un.prototype.setCoordinates=function(S){this.features=this._coordinatesToFeatures(S),this.changed()},Un.prototype.getCoordinate=function(S){return Ao(this.features,"getCoordinate",S)},Un.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(S){return S.type===bt?S.getCoordinates():S.coordinates})))},Un.prototype.updateCoordinate=function(S,P,F){Ao(this.features,"updateCoordinate",S,P,F),this.changed()},Un.prototype.addCoordinate=function(S,P,F){Ao(this.features,"addCoordinate",S,P,F),this.changed()},Un.prototype.removeCoordinate=function(S){Ao(this.features,"removeCoordinate",S),this.changed()},Un.prototype.getFeatures=function(){return this.features},tr.prototype.setSelected=function(S){return this._ctx.store.setSelected(S)},tr.prototype.setSelectedCoordinates=function(S){var P=this;this._ctx.store.setSelectedCoordinates(S),S.reduce(function(F,le){return F[le.feature_id]===void 0&&(F[le.feature_id]=!0,P._ctx.store.get(le.feature_id).changed()),F},{})},tr.prototype.getSelected=function(){return this._ctx.store.getSelected()},tr.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},tr.prototype.isSelected=function(S){return this._ctx.store.isSelected(S)},tr.prototype.getFeature=function(S){return this._ctx.store.get(S)},tr.prototype.select=function(S){return this._ctx.store.select(S)},tr.prototype.deselect=function(S){return this._ctx.store.deselect(S)},tr.prototype.deleteFeature=function(S,P){return P===void 0&&(P={}),this._ctx.store.delete(S,P)},tr.prototype.addFeature=function(S){return this._ctx.store.add(S)},tr.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},tr.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},tr.prototype.setActionableState=function(S){S===void 0&&(S={});var P={trash:S.trash||!1,combineFeatures:S.combineFeatures||!1,uncombineFeatures:S.uncombineFeatures||!1};return this._ctx.events.actionable(P)},tr.prototype.changeMode=function(S,P,F){return P===void 0&&(P={}),F===void 0&&(F={}),this._ctx.events.changeMode(S,P,F)},tr.prototype.updateUIClasses=function(S){return this._ctx.ui.queueMapClasses(S)},tr.prototype.activateUIButton=function(S){return this._ctx.ui.setActiveButton(S)},tr.prototype.featuresAt=function(S,P,F){if(F===void 0&&(F="click"),F!=="click"&&F!=="touch")throw new Error("invalid buffer type");return ko[F](S,P,this._ctx)},tr.prototype.newFeature=function(S){var P=S.geometry.type;return P===Ut?new Gi(this._ctx,S):P===Ct?new Wi(this._ctx,S):P===bt?new Xn(this._ctx,S):new Un(this._ctx,S)},tr.prototype.isInstanceOf=function(S,P){if(S===Ut)return P instanceof Gi;if(S===Ct)return P instanceof Wi;if(S===bt)return P instanceof Xn;if(S==="MultiFeature")return P instanceof Un;throw new Error("Unknown feature class: "+S)},tr.prototype.doRender=function(S){return this._ctx.store.featureChanged(S)},tr.prototype.onSetup=function(){},tr.prototype.onDrag=function(){},tr.prototype.onClick=function(){},tr.prototype.onMouseMove=function(){},tr.prototype.onMouseDown=function(){},tr.prototype.onMouseUp=function(){},tr.prototype.onMouseOut=function(){},tr.prototype.onKeyUp=function(){},tr.prototype.onKeyDown=function(){},tr.prototype.onTouchStart=function(){},tr.prototype.onTouchMove=function(){},tr.prototype.onTouchEnd=function(){},tr.prototype.onTap=function(){},tr.prototype.onStop=function(){},tr.prototype.onTrash=function(){},tr.prototype.onCombineFeature=function(){},tr.prototype.onUncombineFeature=function(){},tr.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Ls={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},uu=Object.keys(Ls);function Da(S){var P=Object.keys(S);return function(F,le){le===void 0&&(le={});var ve={},fe=P.reduce(function(_e,$e){return _e[$e]=S[$e],_e},new tr(F));return{start:function(){var _e=this;ve=fe.onSetup(le),uu.forEach(function($e){var Ge,dt=Ls[$e],Ee=function(){return!1};S[dt]&&(Ee=function(){return!0}),_e.on($e,Ee,(Ge=dt,function(ut){return fe[Ge](ve,ut)}))})},stop:function(){fe.onStop(ve)},trash:function(){fe.onTrash(ve)},combineFeatures:function(){fe.onCombineFeatures(ve)},uncombineFeatures:function(){fe.onUncombineFeatures(ve)},render:function(_e,$e){fe.toDisplayFeatures(ve,_e,$e)}}}}function $i(S){return[].concat(S).filter(function(P){return P!==void 0})}function $o(){var S=this;if(!(S.ctx.map&&S.ctx.map.getSource(be)!==void 0))return Ge();var P=S.ctx.events.currentModeName();S.ctx.ui.queueMapClasses({mode:P});var F=[],le=[];S.isDirty?le=S.getAllIds():(F=S.getChangedIds().filter(function(dt){return S.get(dt)!==void 0}),le=S.sources.hot.filter(function(dt){return dt.properties.id&&F.indexOf(dt.properties.id)===-1&&S.get(dt.properties.id)!==void 0}).map(function(dt){return dt.properties.id})),S.sources.hot=[];var ve=S.sources.cold.length;S.sources.cold=S.isDirty?[]:S.sources.cold.filter(function(dt){var Ee=dt.properties.id||dt.properties.parent;return F.indexOf(Ee)===-1});var fe=ve!==S.sources.cold.length||le.length>0;function _e(dt,Ee){var ut=S.get(dt).internal(P);S.ctx.events.currentModeRender(ut,function(mt){S.sources[Ee].push(mt)})}if(F.forEach(function(dt){return _e(dt,"hot")}),le.forEach(function(dt){return _e(dt,"cold")}),fe&&S.ctx.map.getSource(Re).setData({type:Cr,features:S.sources.cold}),S.ctx.map.getSource(be).setData({type:Cr,features:S.sources.hot}),S._emitSelectionChange&&(S.ctx.map.fire(Rr,{features:S.getSelected().map(function(dt){return dt.toGeoJSON()}),points:S.getSelectedCoordinates().map(function(dt){return{type:Mt,properties:{},geometry:{type:Ut,coordinates:dt.coordinates}}})}),S._emitSelectionChange=!1),S._deletedFeaturesToEmit.length){var $e=S._deletedFeaturesToEmit.map(function(dt){return dt.toGeoJSON()});S._deletedFeaturesToEmit=[],S.ctx.map.fire(zt,{features:$e})}function Ge(){S.isDirty=!1,S.clearChangedIds()}Ge(),S.ctx.map.fire(en,{})}function Mr(S){var P,F=this;this._features={},this._featureIds=new cn,this._selectedFeatureIds=new cn,this._selectedCoordinates=[],this._changedFeatureIds=new cn,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=S,this.sources={hot:[],cold:[]},this.render=function(){P||(P=requestAnimationFrame(function(){P=null,$o.call(F)}))},this.isDirty=!1}function is(S,P){var F=S._selectedCoordinates.filter(function(le){return S._selectedFeatureIds.has(le.feature_id)});S._selectedCoordinates.length===F.length||P.silent||(S._emitSelectionChange=!0),S._selectedCoordinates=F}Mr.prototype.createRenderBatch=function(){var S=this,P=this.render,F=0;return this.render=function(){F++},function(){S.render=P,F>0&&S.render()}},Mr.prototype.setDirty=function(){return this.isDirty=!0,this},Mr.prototype.featureChanged=function(S){return this._changedFeatureIds.add(S),this},Mr.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Mr.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Mr.prototype.getAllIds=function(){return this._featureIds.values()},Mr.prototype.add=function(S){return this.featureChanged(S.id),this._features[S.id]=S,this._featureIds.add(S.id),this},Mr.prototype.delete=function(S,P){var F=this;return P===void 0&&(P={}),$i(S).forEach(function(le){F._featureIds.has(le)&&(F._featureIds.delete(le),F._selectedFeatureIds.delete(le),P.silent||F._deletedFeaturesToEmit.indexOf(F._features[le])===-1&&F._deletedFeaturesToEmit.push(F._features[le]),delete F._features[le],F.isDirty=!0)}),is(this,P),this},Mr.prototype.get=function(S){return this._features[S]},Mr.prototype.getAll=function(){var S=this;return Object.keys(this._features).map(function(P){return S._features[P]})},Mr.prototype.select=function(S,P){var F=this;return P===void 0&&(P={}),$i(S).forEach(function(le){F._selectedFeatureIds.has(le)||(F._selectedFeatureIds.add(le),F._changedFeatureIds.add(le),P.silent||(F._emitSelectionChange=!0))}),this},Mr.prototype.deselect=function(S,P){var F=this;return P===void 0&&(P={}),$i(S).forEach(function(le){F._selectedFeatureIds.has(le)&&(F._selectedFeatureIds.delete(le),F._changedFeatureIds.add(le),P.silent||(F._emitSelectionChange=!0))}),is(this,P),this},Mr.prototype.clearSelected=function(S){return S===void 0&&(S={}),this.deselect(this._selectedFeatureIds.values(),{silent:S.silent}),this},Mr.prototype.setSelected=function(S,P){var F=this;return P===void 0&&(P={}),S=$i(S),this.deselect(this._selectedFeatureIds.values().filter(function(le){return S.indexOf(le)===-1}),{silent:P.silent}),this.select(S.filter(function(le){return!F._selectedFeatureIds.has(le)}),{silent:P.silent}),this},Mr.prototype.setSelectedCoordinates=function(S){return this._selectedCoordinates=S,this._emitSelectionChange=!0,this},Mr.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Mr.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Mr.prototype.getSelected=function(){var S=this;return this._selectedFeatureIds.values().map(function(P){return S.get(P)})},Mr.prototype.getSelectedCoordinates=function(){var S=this;return this._selectedCoordinates.map(function(P){return{coordinates:S.get(P.feature_id).getCoordinate(P.coord_path)}})},Mr.prototype.isSelected=function(S){return this._selectedFeatureIds.has(S)},Mr.prototype.setFeatureProperty=function(S,P,F){this.get(S).setProperty(P,F),this.featureChanged(S)},Mr.prototype.storeMapConfig=function(){var S=this;Xu.forEach(function(P){S.ctx.map[P]&&(S._mapInitialConfig[P]=S.ctx.map[P].isEnabled())})},Mr.prototype.restoreMapConfig=function(){var S=this;Object.keys(this._mapInitialConfig).forEach(function(P){S._mapInitialConfig[P]?S.ctx.map[P].enable():S.ctx.map[P].disable()})},Mr.prototype.getInitialConfigValue=function(S){return this._mapInitialConfig[S]===void 0||this._mapInitialConfig[S]};var zr=function(){for(var S=arguments,P={},F=0;F<arguments.length;F++){var le=S[F];for(var ve in le)L.call(le,ve)&&(P[ve]=le[ve])}return P},L=Object.prototype.hasOwnProperty,O=["mode","feature","mouse"];function B(S){var P=null,F=null,le={onRemove:function(){return S.map.off("load",le.connect),clearInterval(F),le.removeLayers(),S.store.restoreMapConfig(),S.ui.removeButtons(),S.events.removeEventListeners(),S.ui.clearMapClasses(),S.map=null,S.container=null,S.store=null,P&&P.parentNode&&P.parentNode.removeChild(P),P=null,this},connect:function(){S.map.off("load",le.connect),clearInterval(F),le.addLayers(),S.store.storeMapConfig(),S.events.addEventListeners()},onAdd:function(ve){var fe=ve.fire;return ve.fire=function(_e,$e){var Ge=arguments;return fe.length===1&&arguments.length!==1&&(Ge=[zr({},{type:_e},$e)]),fe.apply(ve,Ge)},S.map=ve,S.events=function(_e){var $e=Object.keys(_e.options.modes).reduce(function(Be,gt){return Be[gt]=Da(_e.options.modes[gt]),Be},{}),Ge={},dt={},Ee={},ut=null,mt=null;Ee.drag=function(Be,gt){gt({point:Be.point,time:new Date().getTime()})?(_e.ui.queueMapClasses({mouse:je}),mt.drag(Be)):Be.originalEvent.stopPropagation()},Ee.mousedrag=function(Be){Ee.drag(Be,function(gt){return!Zi(Ge,gt)})},Ee.touchdrag=function(Be){Ee.drag(Be,function(gt){return!Ms(dt,gt)})},Ee.mousemove=function(Be){if((Be.originalEvent.buttons!==void 0?Be.originalEvent.buttons:Be.originalEvent.which)===1)return Ee.mousedrag(Be);var gt=mi(Be,_e);Be.featureTarget=gt,mt.mousemove(Be)},Ee.mousedown=function(Be){Ge={time:new Date().getTime(),point:Be.point};var gt=mi(Be,_e);Be.featureTarget=gt,mt.mousedown(Be)},Ee.mouseup=function(Be){var gt=mi(Be,_e);Be.featureTarget=gt,Zi(Ge,{point:Be.point,time:new Date().getTime()})?mt.click(Be):mt.mouseup(Be)},Ee.mouseout=function(Be){mt.mouseout(Be)},Ee.touchstart=function(Be){if(Be.originalEvent.preventDefault(),_e.options.touchEnabled){dt={time:new Date().getTime(),point:Be.point};var gt=ko.touch(Be,null,_e)[0];Be.featureTarget=gt,mt.touchstart(Be)}},Ee.touchmove=function(Be){if(Be.originalEvent.preventDefault(),_e.options.touchEnabled)return mt.touchmove(Be),Ee.touchdrag(Be)},Ee.touchend=function(Be){if(Be.originalEvent.preventDefault(),_e.options.touchEnabled){var gt=ko.touch(Be,null,_e)[0];Be.featureTarget=gt,Ms(dt,{time:new Date().getTime(),point:Be.point})?mt.tap(Be):mt.touchend(Be)}};var Ft=function(Be){return!(Be===8||Be===46||Be>=48&&Be<=57)};function Vt(Be,gt,Tr){Tr===void 0&&(Tr={}),mt.stop();var ar=$e[Be];if(ar===void 0)throw new Error(Be+" is not valid");ut=Be;var Lr=ar(_e,gt);mt=u(Lr,_e),Tr.silent||_e.map.fire(Gr,{mode:Be}),_e.store.setDirty(),_e.store.render()}Ee.keydown=function(Be){(Be.srcElement||Be.target).classList[0]==="mapboxgl-canvas"&&(Be.keyCode!==8&&Be.keyCode!==46||!_e.options.controls.trash?Ft(Be.keyCode)?mt.keydown(Be):Be.keyCode===49&&_e.options.controls.point?Vt(Gt.DRAW_POINT):Be.keyCode===50&&_e.options.controls.line_string?Vt(Gt.DRAW_LINE_STRING):Be.keyCode===51&&_e.options.controls.polygon&&Vt(Gt.DRAW_POLYGON):(Be.preventDefault(),mt.trash()))},Ee.keyup=function(Be){Ft(Be.keyCode)&&mt.keyup(Be)},Ee.zoomend=function(){_e.store.changeZoom()},Ee.data=function(Be){if(Be.dataType==="style"){var gt=_e.setup,Tr=_e.map,ar=_e.options,Lr=_e.store;ar.styles.some(function(It){return Tr.getLayer(It.id)})||(gt.addLayers(),Lr.setDirty(),Lr.render())}};var an={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){ut=_e.options.defaultMode,mt=u($e[ut](_e),_e)},changeMode:Vt,actionable:function(Be){var gt=!1;Object.keys(Be).forEach(function(Tr){if(an[Tr]===void 0)throw new Error("Invalid action type");an[Tr]!==Be[Tr]&&(gt=!0),an[Tr]=Be[Tr]}),gt&&_e.map.fire(fo,{actions:an})},currentModeName:function(){return ut},currentModeRender:function(Be,gt){return mt.render(Be,gt)},fire:function(Be,gt){Ee[Be]&&Ee[Be](gt)},addEventListeners:function(){_e.map.on("mousemove",Ee.mousemove),_e.map.on("mousedown",Ee.mousedown),_e.map.on("mouseup",Ee.mouseup),_e.map.on("data",Ee.data),_e.map.on("touchmove",Ee.touchmove),_e.map.on("touchstart",Ee.touchstart),_e.map.on("touchend",Ee.touchend),_e.container.addEventListener("mouseout",Ee.mouseout),_e.options.keybindings&&(_e.container.addEventListener("keydown",Ee.keydown),_e.container.addEventListener("keyup",Ee.keyup))},removeEventListeners:function(){_e.map.off("mousemove",Ee.mousemove),_e.map.off("mousedown",Ee.mousedown),_e.map.off("mouseup",Ee.mouseup),_e.map.off("data",Ee.data),_e.map.off("touchmove",Ee.touchmove),_e.map.off("touchstart",Ee.touchstart),_e.map.off("touchend",Ee.touchend),_e.container.removeEventListener("mouseout",Ee.mouseout),_e.options.keybindings&&(_e.container.removeEventListener("keydown",Ee.keydown),_e.container.removeEventListener("keyup",Ee.keyup))},trash:function(Be){mt.trash(Be)},combineFeatures:function(){mt.combineFeatures()},uncombineFeatures:function(){mt.uncombineFeatures()},getMode:function(){return ut}}}(S),S.ui=function(_e){var $e={},Ge=null,dt={mode:null,feature:null,mouse:null},Ee={mode:null,feature:null,mouse:null};function ut(Be){Ee=zr(Ee,Be)}function mt(){var Be,gt;if(_e.container){var Tr=[],ar=[];O.forEach(function(Lr){Ee[Lr]!==dt[Lr]&&(Tr.push(Lr+"-"+dt[Lr]),Ee[Lr]!==null&&ar.push(Lr+"-"+Ee[Lr]))}),Tr.length>0&&(Be=_e.container.classList).remove.apply(Be,Tr),ar.length>0&&(gt=_e.container.classList).add.apply(gt,ar),dt=zr(dt,Ee)}}function Ft(Be,gt){gt===void 0&&(gt={});var Tr=document.createElement("button");return Tr.className=j+" "+gt.className,Tr.setAttribute("title",gt.title),gt.container.appendChild(Tr),Tr.addEventListener("click",function(ar){if(ar.preventDefault(),ar.stopPropagation(),ar.target===Ge)return Vt(),void gt.onDeactivate();an(Be),gt.onActivate()},!0),Tr}function Vt(){Ge&&(Ge.classList.remove(re),Ge=null)}function an(Be){Vt();var gt=$e[Be];gt&&gt&&Be!=="trash"&&(gt.classList.add(re),Ge=gt)}return{setActiveButton:an,queueMapClasses:ut,updateMapClasses:mt,clearMapClasses:function(){ut({mode:null,feature:null,mouse:null}),mt()},addButtons:function(){var Be=_e.options.controls,gt=document.createElement("div");return gt.className=se+" "+M,Be&&(Be[_t.LINE]&&($e[_t.LINE]=Ft(_t.LINE,{container:gt,className:ee,title:"LineString tool "+(_e.options.keybindings?"(l)":""),onActivate:function(){return _e.events.changeMode(Gt.DRAW_LINE_STRING)},onDeactivate:function(){return _e.events.trash()}})),Be[_t.POLYGON]&&($e[_t.POLYGON]=Ft(_t.POLYGON,{container:gt,className:Ce,title:"Polygon tool "+(_e.options.keybindings?"(p)":""),onActivate:function(){return _e.events.changeMode(Gt.DRAW_POLYGON)},onDeactivate:function(){return _e.events.trash()}})),Be[_t.POINT]&&($e[_t.POINT]=Ft(_t.POINT,{container:gt,className:W,title:"Marker tool "+(_e.options.keybindings?"(m)":""),onActivate:function(){return _e.events.changeMode(Gt.DRAW_POINT)},onDeactivate:function(){return _e.events.trash()}})),Be.trash&&($e.trash=Ft("trash",{container:gt,className:xe,title:"Delete",onActivate:function(){_e.events.trash()}})),Be.combine_features&&($e.combine_features=Ft("combineFeatures",{container:gt,className:Le,title:"Combine",onActivate:function(){_e.events.combineFeatures()}})),Be.uncombine_features&&($e.uncombine_features=Ft("uncombineFeatures",{container:gt,className:De,title:"Uncombine",onActivate:function(){_e.events.uncombineFeatures()}}))),gt},removeButtons:function(){Object.keys($e).forEach(function(Be){var gt=$e[Be];gt.parentNode&&gt.parentNode.removeChild(gt),delete $e[Be]})}}}(S),S.container=ve.getContainer(),S.store=new Mr(S),P=S.ui.addButtons(),S.options.boxSelect&&(ve.boxZoom.disable(),ve.dragPan.disable(),ve.dragPan.enable()),ve.loaded()?le.connect():(ve.on("load",le.connect),F=setInterval(function(){ve.loaded()&&le.connect()},16)),S.events.start(),P},addLayers:function(){S.map.addSource(Re,{data:{type:Cr,features:[]},type:"geojson"}),S.map.addSource(be,{data:{type:Cr,features:[]},type:"geojson"}),S.options.styles.forEach(function(ve){S.map.addLayer(ve)}),S.store.setDirty(!0),S.store.render()},removeLayers:function(){S.options.styles.forEach(function(ve){S.map.getLayer(ve.id)&&S.map.removeLayer(ve.id)}),S.map.getSource(Re)&&S.map.removeSource(Re),S.map.getSource(be)&&S.map.removeSource(be)}};return S.setup=le,le}function G(S){return function(P){var F=P.featureTarget;return!!F&&!!F.properties&&F.properties.meta===S}}function X(S){return!!S.featureTarget&&!!S.featureTarget.properties&&S.featureTarget.properties.active===on&&S.featureTarget.properties.meta===Hn}function ue(S){return!!S.featureTarget&&!!S.featureTarget.properties&&S.featureTarget.properties.active===An&&S.featureTarget.properties.meta===Hn}function pe(S){return S.featureTarget===void 0}function V(S){var P=S.featureTarget;return!!P&&!!P.properties&&P.properties.meta===Vi}function Q(S){return!!S.originalEvent&&S.originalEvent.shiftKey===!0}function me(S){return S.keyCode===27}function Ue(S){return S.keyCode===13}var qe=Pe;function Pe(S,P){this.x=S,this.y=P}function Ve(S,P){var F=P.getBoundingClientRect();return new qe(S.clientX-F.left-(P.clientLeft||0),S.clientY-F.top-(P.clientTop||0))}function pt(S,P,F,le){return{type:Mt,properties:{meta:Vi,parent:S,coord_path:F,active:le?on:An},geometry:{type:Ut,coordinates:P}}}function st(S,P,F){P===void 0&&(P={}),F===void 0&&(F=null);var le,ve=S.geometry,fe=ve.type,_e=ve.coordinates,$e=S.properties&&S.properties.id,Ge=[];function dt(ut,mt){var Ft="",Vt=null;ut.forEach(function(an,Be){var gt=mt!=null?mt+"."+Be:String(Be),Tr=pt($e,an,gt,Ee(gt));if(P.midpoints&&Vt){var ar=function(It,Mi,li){var lr=Mi.geometry.coordinates,yi=li.geometry.coordinates;if(lr[1]>85||lr[1]<-85||yi[1]>85||yi[1]<-85)return null;var qr={lng:(lr[0]+yi[0])/2,lat:(lr[1]+yi[1])/2};return{type:Mt,properties:{meta:er,parent:It,lng:qr.lng,lat:qr.lat,coord_path:li.properties.coord_path},geometry:{type:Ut,coordinates:[qr.lng,qr.lat]}}}($e,Vt,Tr);ar&&Ge.push(ar)}Vt=Tr;var Lr=JSON.stringify(an);Ft!==Lr&&Ge.push(Tr),Be===0&&(Ft=Lr)})}function Ee(ut){return!!P.selectedPaths&&P.selectedPaths.indexOf(ut)!==-1}return fe===Ut?Ge.push(pt($e,_e,F,Ee(F))):fe===bt?_e.forEach(function(ut,mt){dt(ut,F!==null?F+"."+mt:String(mt))}):fe===Ct?dt(_e,F):fe.indexOf(Ir)===0&&(le=fe.replace(Ir,""),_e.forEach(function(ut,mt){var Ft={type:Mt,properties:S.properties,geometry:{type:le,coordinates:ut}};Ge=Ge.concat(st(Ft,P,mt))})),Ge}Pe.prototype={clone:function(){return new Pe(this.x,this.y)},add:function(S){return this.clone()._add(S)},sub:function(S){return this.clone()._sub(S)},multByPoint:function(S){return this.clone()._multByPoint(S)},divByPoint:function(S){return this.clone()._divByPoint(S)},mult:function(S){return this.clone()._mult(S)},div:function(S){return this.clone()._div(S)},rotate:function(S){return this.clone()._rotate(S)},rotateAround:function(S,P){return this.clone()._rotateAround(S,P)},matMult:function(S){return this.clone()._matMult(S)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(S){return this.x===S.x&&this.y===S.y},dist:function(S){return Math.sqrt(this.distSqr(S))},distSqr:function(S){var P=S.x-this.x,F=S.y-this.y;return P*P+F*F},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(S){return Math.atan2(this.y-S.y,this.x-S.x)},angleWith:function(S){return this.angleWithSep(S.x,S.y)},angleWithSep:function(S,P){return Math.atan2(this.x*P-this.y*S,this.x*S+this.y*P)},_matMult:function(S){var P=S[0]*this.x+S[1]*this.y,F=S[2]*this.x+S[3]*this.y;return this.x=P,this.y=F,this},_add:function(S){return this.x+=S.x,this.y+=S.y,this},_sub:function(S){return this.x-=S.x,this.y-=S.y,this},_mult:function(S){return this.x*=S,this.y*=S,this},_div:function(S){return this.x/=S,this.y/=S,this},_multByPoint:function(S){return this.x*=S.x,this.y*=S.y,this},_divByPoint:function(S){return this.x/=S.x,this.y/=S.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var S=this.y;return this.y=this.x,this.x=-S,this},_rotate:function(S){var P=Math.cos(S),F=Math.sin(S),le=P*this.x-F*this.y,ve=F*this.x+P*this.y;return this.x=le,this.y=ve,this},_rotateAround:function(S,P){var F=Math.cos(S),le=Math.sin(S),ve=P.x+F*(this.x-P.x)-le*(this.y-P.y),fe=P.y+le*(this.x-P.x)+F*(this.y-P.y);return this.x=ve,this.y=fe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Pe.convert=function(S){return S instanceof Pe?S:Array.isArray(S)?new Pe(S[0],S[1]):S};var Ae=function(S){setTimeout(function(){S.map&&S.map.doubleClickZoom&&S._ctx&&S._ctx.store&&S._ctx.store.getInitialConfigValue&&S._ctx.store.getInitialConfigValue("doubleClickZoom")&&S.map.doubleClickZoom.enable()},0)},tt=function(S){setTimeout(function(){S.map&&S.map.doubleClickZoom&&S.map.doubleClickZoom.disable()},0)},Je=function(S){if(!S||!S.type)return null;var P=Qe[S.type];if(!P)return null;if(P==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:S}]};if(P==="feature")return{type:"FeatureCollection",features:[S]};if(P==="featurecollection")return S},Qe={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Wt(S){switch(S&&S.type||null){case"FeatureCollection":return S.features=S.features.reduce(function(P,F){return P.concat(Wt(F))},[]),S;case"Feature":return S.geometry?Wt(S.geometry).map(function(P){var F={type:"Feature",properties:JSON.parse(JSON.stringify(S.properties)),geometry:P};return S.id!==void 0&&(F.id=S.id),F}):[S];case"MultiPoint":return S.coordinates.map(function(P){return{type:"Point",coordinates:P}});case"MultiPolygon":return S.coordinates.map(function(P){return{type:"Polygon",coordinates:P}});case"MultiLineString":return S.coordinates.map(function(P){return{type:"LineString",coordinates:P}});case"GeometryCollection":return S.geometries.map(Wt).reduce(function(P,F){return P.concat(F)},[]);case"Point":case"Polygon":case"LineString":return[S]}}var rt=function(S){if(!S)return[];var P=Wt(Je(S)),F=[];return P.features.forEach(function(le){le.geometry&&(F=F.concat(function ve(fe){return Array.isArray(fe)&&fe.length&&typeof fe[0]=="number"?[fe]:fe.reduce(function(_e,$e){return Array.isArray($e)&&Array.isArray($e[0])?_e.concat(ve($e)):(_e.push($e),_e)},[])}(le.geometry.coordinates)))}),F},or=ns(function(S){var P=S.exports=function(Ee){return new F(Ee)};function F(Ee){this.value=Ee}function le(Ee,ut,mt){var Ft=[],Vt=[],an=!0;return function Be(gt){var Tr=mt?ve(gt):gt,ar={},Lr=!0,It={node:Tr,node_:gt,path:[].concat(Ft),parent:Vt[Vt.length-1],parents:Vt,key:Ft.slice(-1)[0],isRoot:Ft.length===0,level:Ft.length,circular:null,update:function(lr,yi){It.isRoot||(It.parent.node[It.key]=lr),It.node=lr,yi&&(Lr=!1)},delete:function(lr){delete It.parent.node[It.key],lr&&(Lr=!1)},remove:function(lr){$e(It.parent.node)?It.parent.node.splice(It.key,1):delete It.parent.node[It.key],lr&&(Lr=!1)},keys:null,before:function(lr){ar.before=lr},after:function(lr){ar.after=lr},pre:function(lr){ar.pre=lr},post:function(lr){ar.post=lr},stop:function(){an=!1},block:function(){Lr=!1}};if(!an)return It;function Mi(){if(typeof It.node=="object"&&It.node!==null){It.keys&&It.node_===It.node||(It.keys=fe(It.node)),It.isLeaf=It.keys.length==0;for(var lr=0;lr<Vt.length;lr++)if(Vt[lr].node_===gt){It.circular=Vt[lr];break}}else It.isLeaf=!0,It.keys=null;It.notLeaf=!It.isLeaf,It.notRoot=!It.isRoot}Mi();var li=ut.call(It,It.node);return li!==void 0&&It.update&&It.update(li),ar.before&&ar.before.call(It,It.node),Lr&&(typeof It.node!="object"||It.node===null||It.circular||(Vt.push(It),Mi(),Ge(It.keys,function(lr,yi){Ft.push(lr),ar.pre&&ar.pre.call(It,It.node[lr],lr);var qr=Be(It.node[lr]);mt&&dt.call(It.node,lr)&&(It.node[lr]=qr.node),qr.isLast=yi==It.keys.length-1,qr.isFirst=yi==0,ar.post&&ar.post.call(It,qr),Ft.pop()}),Vt.pop()),ar.after&&ar.after.call(It,It.node)),It}(Ee).node}function ve(Ee){if(typeof Ee=="object"&&Ee!==null){var ut;if($e(Ee))ut=[];else if(_e(Ee)==="[object Date]")ut=new Date(Ee.getTime?Ee.getTime():Ee);else if(function(Vt){return _e(Vt)==="[object RegExp]"}(Ee))ut=new RegExp(Ee);else if(function(Vt){return _e(Vt)==="[object Error]"}(Ee))ut={message:Ee.message};else if(function(Vt){return _e(Vt)==="[object Boolean]"}(Ee))ut=new Boolean(Ee);else if(function(Vt){return _e(Vt)==="[object Number]"}(Ee))ut=new Number(Ee);else if(function(Vt){return _e(Vt)==="[object String]"}(Ee))ut=new String(Ee);else if(Object.create&&Object.getPrototypeOf)ut=Object.create(Object.getPrototypeOf(Ee));else if(Ee.constructor===Object)ut={};else{var mt=Ee.constructor&&Ee.constructor.prototype||Ee.__proto__||{},Ft=function(){};Ft.prototype=mt,ut=new Ft}return Ge(fe(Ee),function(Vt){ut[Vt]=Ee[Vt]}),ut}return Ee}F.prototype.get=function(Ee){for(var ut=this.value,mt=0;mt<Ee.length;mt++){var Ft=Ee[mt];if(!ut||!dt.call(ut,Ft)){ut=void 0;break}ut=ut[Ft]}return ut},F.prototype.has=function(Ee){for(var ut=this.value,mt=0;mt<Ee.length;mt++){var Ft=Ee[mt];if(!ut||!dt.call(ut,Ft))return!1;ut=ut[Ft]}return!0},F.prototype.set=function(Ee,ut){for(var mt=this.value,Ft=0;Ft<Ee.length-1;Ft++){var Vt=Ee[Ft];dt.call(mt,Vt)||(mt[Vt]={}),mt=mt[Vt]}return mt[Ee[Ft]]=ut,ut},F.prototype.map=function(Ee){return le(this.value,Ee,!0)},F.prototype.forEach=function(Ee){return this.value=le(this.value,Ee,!1),this.value},F.prototype.reduce=function(Ee,ut){var mt=arguments.length===1,Ft=mt?this.value:ut;return this.forEach(function(Vt){this.isRoot&&mt||(Ft=Ee.call(this,Ft,Vt))}),Ft},F.prototype.paths=function(){var Ee=[];return this.forEach(function(ut){Ee.push(this.path)}),Ee},F.prototype.nodes=function(){var Ee=[];return this.forEach(function(ut){Ee.push(this.node)}),Ee},F.prototype.clone=function(){var Ee=[],ut=[];return function mt(Ft){for(var Vt=0;Vt<Ee.length;Vt++)if(Ee[Vt]===Ft)return ut[Vt];if(typeof Ft=="object"&&Ft!==null){var an=ve(Ft);return Ee.push(Ft),ut.push(an),Ge(fe(Ft),function(Be){an[Be]=mt(Ft[Be])}),Ee.pop(),ut.pop(),an}return Ft}(this.value)};var fe=Object.keys||function(Ee){var ut=[];for(var mt in Ee)ut.push(mt);return ut};function _e(Ee){return Object.prototype.toString.call(Ee)}var $e=Array.isArray||function(Ee){return Object.prototype.toString.call(Ee)==="[object Array]"},Ge=function(Ee,ut){if(Ee.forEach)return Ee.forEach(ut);for(var mt=0;mt<Ee.length;mt++)ut(Ee[mt],mt,Ee)};Ge(fe(F.prototype),function(Ee){P[Ee]=function(ut){var mt=[].slice.call(arguments,1),Ft=new F(ut);return Ft[Ee].apply(Ft,mt)}});var dt=Object.hasOwnProperty||function(Ee,ut){return ut in Ee}}),kr=Rt;function Rt(S){if(!(this instanceof Rt))return new Rt(S);this._bbox=S||[1/0,1/0,-1/0,-1/0],this._valid=!!S}Rt.prototype.include=function(S){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],S[0]),this._bbox[1]=Math.min(this._bbox[1],S[1]),this._bbox[2]=Math.max(this._bbox[2],S[0]),this._bbox[3]=Math.max(this._bbox[3],S[1]),this},Rt.prototype.equals=function(S){var P;return P=S instanceof Rt?S.bbox():S,this._bbox[0]==P[0]&&this._bbox[1]==P[1]&&this._bbox[2]==P[2]&&this._bbox[3]==P[3]},Rt.prototype.center=function(S){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Rt.prototype.union=function(S){var P;return this._valid=!0,P=S instanceof Rt?S.bbox():S,this._bbox[0]=Math.min(this._bbox[0],P[0]),this._bbox[1]=Math.min(this._bbox[1],P[1]),this._bbox[2]=Math.max(this._bbox[2],P[2]),this._bbox[3]=Math.max(this._bbox[3],P[3]),this},Rt.prototype.bbox=function(){return this._valid?this._bbox:null},Rt.prototype.contains=function(S){if(!S)return this._fastContains();if(!this._valid)return null;var P=S[0],F=S[1];return this._bbox[0]<=P&&this._bbox[1]<=F&&this._bbox[2]>=P&&this._bbox[3]>=F},Rt.prototype.intersect=function(S){return this._valid?(P=S instanceof Rt?S.bbox():S,!(this._bbox[0]>P[2]||this._bbox[2]<P[0]||this._bbox[3]<P[1]||this._bbox[1]>P[3])):null;var P},Rt.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var S="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",S)},Rt.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var hr={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},ur=Object.keys(hr),Nn=function(S){return vr(S).bbox()};function vr(S){for(var P=kr(),F=rt(S),le=0;le<F.length;le++)P.include(F[le]);return P}Nn.polygon=function(S){return vr(S).polygon()},Nn.bboxify=function(S){return or(S).map(function(P){P&&ur.some(function(F){return!!P[F]&&hr[F].indexOf(P.type)!==-1})&&(P.bbox=vr(P).bbox(),this.update(P))})};function tn(S,P){var F=-90,le=90,ve=-90,fe=90,_e=270,$e=-270;S.forEach(function(dt){var Ee=Nn(dt),ut=Ee[1],mt=Ee[3],Ft=Ee[0],Vt=Ee[2];ut>F&&(F=ut),mt<le&&(le=mt),mt>ve&&(ve=mt),ut<fe&&(fe=ut),Ft<_e&&(_e=Ft),Vt>$e&&($e=Vt)});var Ge=P;return F+Ge.lat>85&&(Ge.lat=85-F),ve+Ge.lat>90&&(Ge.lat=90-ve),le+Ge.lat<-85&&(Ge.lat=-85-le),fe+Ge.lat<-90&&(Ge.lat=-90-fe),_e+Ge.lng<=-270&&(Ge.lng+=360*Math.ceil(Math.abs(Ge.lng)/360)),$e+Ge.lng>=270&&(Ge.lng-=360*Math.ceil(Math.abs(Ge.lng)/360)),Ge}function Sr(S,P){var F=tn(S.map(function(le){return le.toGeoJSON()}),P);S.forEach(function(le){var ve,fe=le.getCoordinates(),_e=function(Ge){var dt={lng:Ge[0]+F.lng,lat:Ge[1]+F.lat};return[dt.lng,dt.lat]},$e=function(Ge){return Ge.map(function(dt){return _e(dt)})};le.type===Ut?ve=_e(fe):le.type===Ct||le.type===Fn?ve=fe.map(_e):le.type===bt||le.type===Qt?ve=fe.map($e):le.type===Bn&&(ve=fe.map(function(Ge){return Ge.map(function(dt){return $e(dt)})})),le.incomingCoords(ve)})}var Dt={onSetup:function(S){var P=this,F={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:S.featureIds||[]};return this.setSelected(F.initiallySelectedFeatureIds.filter(function(le){return P.getFeature(le)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),F},fireUpdate:function(){this.map.fire(Xt,{action:Io,features:this.getSelected().map(function(S){return S.toGeoJSON()})})},fireActionable:function(){var S=this,P=this.getSelected(),F=P.filter(function($e){return S.isInstanceOf("MultiFeature",$e)}),le=!1;if(P.length>1){le=!0;var ve=P[0].type.replace("Multi","");P.forEach(function($e){$e.type.replace("Multi","")!==ve&&(le=!1)})}var fe=F.length>0,_e=P.length>0;this.setActionableState({combineFeatures:le,uncombineFeatures:fe,trash:_e})},getUniqueIds:function(S){return S.length?S.map(function(P){return P.properties.id}).filter(function(P){return P!==void 0}).reduce(function(P,F){return P.add(F),P},new cn).values():[]},stopExtendedInteractions:function(S){S.boxSelectElement&&(S.boxSelectElement.parentNode&&S.boxSelectElement.parentNode.removeChild(S.boxSelectElement),S.boxSelectElement=null),this.map.dragPan.enable(),S.boxSelecting=!1,S.canBoxSelect=!1,S.dragMoving=!1,S.canDragMove=!1},onStop:function(){Ae(this)},onMouseMove:function(S){return this.stopExtendedInteractions(S),!0},onMouseOut:function(S){return!S.dragMoving||this.fireUpdate()}};Dt.onTap=Dt.onClick=function(S,P){return pe(P)?this.clickAnywhere(S,P):G(Vi)(P)?this.clickOnVertex(S,P):function(F){return!!F.featureTarget&&!!F.featureTarget.properties&&F.featureTarget.properties.meta===Hn}(P)?this.clickOnFeature(S,P):void 0},Dt.clickAnywhere=function(S){var P=this,F=this.getSelectedIds();F.length&&(this.clearSelectedFeatures(),F.forEach(function(le){return P.doRender(le)})),Ae(this),this.stopExtendedInteractions(S)},Dt.clickOnVertex=function(S,P){this.changeMode(Gt.DIRECT_SELECT,{featureId:P.featureTarget.properties.parent,coordPath:P.featureTarget.properties.coord_path,startPos:P.lngLat}),this.updateUIClasses({mouse:Ie})},Dt.startOnActiveFeature=function(S,P){this.stopExtendedInteractions(S),this.map.dragPan.disable(),this.doRender(P.featureTarget.properties.id),S.canDragMove=!0,S.dragMoveLocation=P.lngLat},Dt.clickOnFeature=function(S,P){var F=this;tt(this),this.stopExtendedInteractions(S);var le=Q(P),ve=this.getSelectedIds(),fe=P.featureTarget.properties.id,_e=this.isSelected(fe);if(!le&&_e&&this.getFeature(fe).type!==Ut)return this.changeMode(Gt.DIRECT_SELECT,{featureId:fe});_e&&le?(this.deselect(fe),this.updateUIClasses({mouse:at}),ve.length===1&&Ae(this)):!_e&&le?(this.select(fe),this.updateUIClasses({mouse:Ie})):_e||le||(ve.forEach(function($e){return F.doRender($e)}),this.setSelected(fe),this.updateUIClasses({mouse:Ie})),this.doRender(fe)},Dt.onMouseDown=function(S,P){return X(P)?this.startOnActiveFeature(S,P):this.drawConfig.boxSelect&&function(F){return!!F.originalEvent&&!!F.originalEvent.shiftKey&&F.originalEvent.button===0}(P)?this.startBoxSelect(S,P):void 0},Dt.startBoxSelect=function(S,P){this.stopExtendedInteractions(S),this.map.dragPan.disable(),S.boxSelectStartLocation=Ve(P.originalEvent,this.map.getContainer()),S.canBoxSelect=!0},Dt.onTouchStart=function(S,P){if(X(P))return this.startOnActiveFeature(S,P)},Dt.onDrag=function(S,P){return S.canDragMove?this.dragMove(S,P):this.drawConfig.boxSelect&&S.canBoxSelect?this.whileBoxSelect(S,P):void 0},Dt.whileBoxSelect=function(S,P){S.boxSelecting=!0,this.updateUIClasses({mouse:Me}),S.boxSelectElement||(S.boxSelectElement=document.createElement("div"),S.boxSelectElement.classList.add(oe),this.map.getContainer().appendChild(S.boxSelectElement));var F=Ve(P.originalEvent,this.map.getContainer()),le=Math.min(S.boxSelectStartLocation.x,F.x),ve=Math.max(S.boxSelectStartLocation.x,F.x),fe=Math.min(S.boxSelectStartLocation.y,F.y),_e=Math.max(S.boxSelectStartLocation.y,F.y),$e="translate("+le+"px, "+fe+"px)";S.boxSelectElement.style.transform=$e,S.boxSelectElement.style.WebkitTransform=$e,S.boxSelectElement.style.width=ve-le+"px",S.boxSelectElement.style.height=_e-fe+"px"},Dt.dragMove=function(S,P){S.dragMoving=!0,P.originalEvent.stopPropagation();var F={lng:P.lngLat.lng-S.dragMoveLocation.lng,lat:P.lngLat.lat-S.dragMoveLocation.lat};Sr(this.getSelected(),F),S.dragMoveLocation=P.lngLat},Dt.onMouseUp=function(S,P){var F=this;if(S.dragMoving)this.fireUpdate();else if(S.boxSelecting){var le=[S.boxSelectStartLocation,Ve(P.originalEvent,this.map.getContainer())],ve=this.featuresAt(null,le,"click"),fe=this.getUniqueIds(ve).filter(function(_e){return!F.isSelected(_e)});fe.length&&(this.select(fe),fe.forEach(function(_e){return F.doRender(_e)}),this.updateUIClasses({mouse:Ie}))}this.stopExtendedInteractions(S)},Dt.toDisplayFeatures=function(S,P,F){P.properties.active=this.isSelected(P.properties.id)?on:An,F(P),this.fireActionable(),P.properties.active===on&&P.geometry.type!==Ut&&st(P).forEach(F)},Dt.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Dt.onCombineFeatures=function(){var S=this.getSelected();if(!(S.length===0||S.length<2)){for(var P=[],F=[],le=S[0].type.replace("Multi",""),ve=0;ve<S.length;ve++){var fe=S[ve];if(fe.type.replace("Multi","")!==le)return;fe.type.includes("Multi")?fe.getCoordinates().forEach(function($e){P.push($e)}):P.push(fe.getCoordinates()),F.push(fe.toGeoJSON())}if(F.length>1){var _e=this.newFeature({type:Mt,properties:F[0].properties,geometry:{type:"Multi"+le,coordinates:P}});this.addFeature(_e),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([_e.id]),this.map.fire(si,{createdFeatures:[_e.toGeoJSON()],deletedFeatures:F})}this.fireActionable()}},Dt.onUncombineFeatures=function(){var S=this,P=this.getSelected();if(P.length!==0){for(var F=[],le=[],ve=function(_e){var $e=P[_e];S.isInstanceOf("MultiFeature",$e)&&($e.getFeatures().forEach(function(Ge){S.addFeature(Ge),Ge.properties=$e.properties,F.push(Ge.toGeoJSON()),S.select([Ge.id])}),S.deleteFeature($e.id,{silent:!0}),le.push($e.toGeoJSON()))},fe=0;fe<P.length;fe++)ve(fe);F.length>1&&this.map.fire(cr,{createdFeatures:F,deletedFeatures:le}),this.fireActionable()}};var fr=G(Vi),ui=G(er),Hi={fireUpdate:function(){this.map.fire(Xt,{action:rs,features:this.getSelected().map(function(S){return S.toGeoJSON()})})},fireActionable:function(S){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:S.selectedCoordPaths.length>0})},startDragging:function(S,P){this.map.dragPan.disable(),S.canDragMove=!0,S.dragMoveLocation=P.lngLat},stopDragging:function(S){this.map.dragPan.enable(),S.dragMoving=!1,S.canDragMove=!1,S.dragMoveLocation=null},onVertex:function(S,P){this.startDragging(S,P);var F=P.featureTarget.properties,le=S.selectedCoordPaths.indexOf(F.coord_path);Q(P)||le!==-1?Q(P)&&le===-1&&S.selectedCoordPaths.push(F.coord_path):S.selectedCoordPaths=[F.coord_path];var ve=this.pathsToCoordinates(S.featureId,S.selectedCoordPaths);this.setSelectedCoordinates(ve)},onMidpoint:function(S,P){this.startDragging(S,P);var F=P.featureTarget.properties;S.feature.addCoordinate(F.coord_path,F.lng,F.lat),this.fireUpdate(),S.selectedCoordPaths=[F.coord_path]},pathsToCoordinates:function(S,P){return P.map(function(F){return{feature_id:S,coord_path:F}})},onFeature:function(S,P){S.selectedCoordPaths.length===0?this.startDragging(S,P):this.stopDragging(S)},dragFeature:function(S,P,F){Sr(this.getSelected(),F),S.dragMoveLocation=P.lngLat},dragVertex:function(S,P,F){for(var le=S.selectedCoordPaths.map(function($e){return S.feature.getCoordinate($e)}),ve=tn(le.map(function($e){return{type:Mt,properties:{},geometry:{type:Ut,coordinates:$e}}}),F),fe=0;fe<le.length;fe++){var _e=le[fe];S.feature.updateCoordinate(S.selectedCoordPaths[fe],_e[0]+ve.lng,_e[1]+ve.lat)}},clickNoTarget:function(){this.changeMode(Gt.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(Gt.SIMPLE_SELECT)},clickActiveFeature:function(S){S.selectedCoordPaths=[],this.clearSelectedCoordinates(),S.feature.changed()},onSetup:function(S){var P=S.featureId,F=this.getFeature(P);if(!F)throw new Error("You must provide a featureId to enter direct_select mode");if(F.type===Ut)throw new TypeError("direct_select mode doesn't handle point features");var le={featureId:P,feature:F,dragMoveLocation:S.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:S.coordPath?[S.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(P,le.selectedCoordPaths)),this.setSelected(P),tt(this),this.setActionableState({trash:!0}),le},onStop:function(){Ae(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(S,P,F){S.featureId===P.properties.id?(P.properties.active=on,F(P),st(P,{map:this.map,midpoints:!0,selectedPaths:S.selectedCoordPaths}).forEach(F)):(P.properties.active=An,F(P)),this.fireActionable(S)},onTrash:function(S){S.selectedCoordPaths.sort(function(P,F){return F.localeCompare(P,"en",{numeric:!0})}).forEach(function(P){return S.feature.removeCoordinate(P)}),this.fireUpdate(),S.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(S),S.feature.isValid()===!1&&(this.deleteFeature([S.featureId]),this.changeMode(Gt.SIMPLE_SELECT,{}))},onMouseMove:function(S,P){var F=X(P),le=fr(P),ve=S.selectedCoordPaths.length===0;return F&&ve||le&&!ve?this.updateUIClasses({mouse:Ie}):this.updateUIClasses({mouse:Xe}),this.stopDragging(S),!0},onMouseOut:function(S){return S.dragMoving&&this.fireUpdate(),!0}};Hi.onTouchStart=Hi.onMouseDown=function(S,P){return fr(P)?this.onVertex(S,P):X(P)?this.onFeature(S,P):ui(P)?this.onMidpoint(S,P):void 0},Hi.onDrag=function(S,P){if(S.canDragMove===!0){S.dragMoving=!0,P.originalEvent.stopPropagation();var F={lng:P.lngLat.lng-S.dragMoveLocation.lng,lat:P.lngLat.lat-S.dragMoveLocation.lat};S.selectedCoordPaths.length>0?this.dragVertex(S,P,F):this.dragFeature(S,P,F),S.dragMoveLocation=P.lngLat}},Hi.onClick=function(S,P){return pe(P)?this.clickNoTarget(S,P):X(P)?this.clickActiveFeature(S,P):ue(P)?this.clickInactive(S,P):void this.stopDragging(S)},Hi.onTap=function(S,P){return pe(P)?this.clickNoTarget(S,P):X(P)?this.clickActiveFeature(S,P):ue(P)?this.clickInactive(S,P):void 0},Hi.onTouchEnd=Hi.onMouseUp=function(S){S.dragMoving&&this.fireUpdate(),this.stopDragging(S)};var Nr={};function Kn(S,P){return!!S.lngLat&&S.lngLat.lng===P[0]&&S.lngLat.lat===P[1]}Nr.onSetup=function(){var S=this.newFeature({type:Mt,properties:{},geometry:{type:Ut,coordinates:[]}});return this.addFeature(S),this.clearSelectedFeatures(),this.updateUIClasses({mouse:Me}),this.activateUIButton(_t.POINT),this.setActionableState({trash:!0}),{point:S}},Nr.stopDrawingAndRemove=function(S){this.deleteFeature([S.point.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT)},Nr.onTap=Nr.onClick=function(S,P){this.updateUIClasses({mouse:Ie}),S.point.updateCoordinate("",P.lngLat.lng,P.lngLat.lat),this.map.fire(Ye,{features:[S.point.toGeoJSON()]}),this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.point.id]})},Nr.onStop=function(S){this.activateUIButton(),S.point.getCoordinate().length||this.deleteFeature([S.point.id],{silent:!0})},Nr.toDisplayFeatures=function(S,P,F){var le=P.properties.id===S.point.id;if(P.properties.active=le?on:An,!le)return F(P)},Nr.onTrash=Nr.stopDrawingAndRemove,Nr.onKeyUp=function(S,P){if(me(P)||Ue(P))return this.stopDrawingAndRemove(S,P)};var Ho={onSetup:function(){var S=this.newFeature({type:Mt,properties:{},geometry:{type:bt,coordinates:[[]]}});return this.addFeature(S),this.clearSelectedFeatures(),tt(this),this.updateUIClasses({mouse:Me}),this.activateUIButton(_t.POLYGON),this.setActionableState({trash:!0}),{polygon:S,currentVertexPosition:0}},clickAnywhere:function(S,P){if(S.currentVertexPosition>0&&Kn(P,S.polygon.coordinates[0][S.currentVertexPosition-1]))return this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.polygon.id]});this.updateUIClasses({mouse:Me}),S.polygon.updateCoordinate("0."+S.currentVertexPosition,P.lngLat.lng,P.lngLat.lat),S.currentVertexPosition++,S.polygon.updateCoordinate("0."+S.currentVertexPosition,P.lngLat.lng,P.lngLat.lat)},clickOnVertex:function(S){return this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.polygon.id]})},onMouseMove:function(S,P){S.polygon.updateCoordinate("0."+S.currentVertexPosition,P.lngLat.lng,P.lngLat.lat),V(P)&&this.updateUIClasses({mouse:at})}};Ho.onTap=Ho.onClick=function(S,P){return V(P)?this.clickOnVertex(S,P):this.clickAnywhere(S,P)},Ho.onKeyUp=function(S,P){me(P)?(this.deleteFeature([S.polygon.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT)):Ue(P)&&this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.polygon.id]})},Ho.onStop=function(S){this.updateUIClasses({mouse:Xe}),Ae(this),this.activateUIButton(),this.getFeature(S.polygon.id)!==void 0&&(S.polygon.removeCoordinate("0."+S.currentVertexPosition),S.polygon.isValid()?this.map.fire(Ye,{features:[S.polygon.toGeoJSON()]}):(this.deleteFeature([S.polygon.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT,{},{silent:!0})))},Ho.toDisplayFeatures=function(S,P,F){var le=P.properties.id===S.polygon.id;if(P.properties.active=le?on:An,!le)return F(P);if(P.geometry.coordinates.length!==0){var ve=P.geometry.coordinates[0].length;if(!(ve<3)){if(P.properties.meta=Hn,F(pt(S.polygon.id,P.geometry.coordinates[0][0],"0.0",!1)),ve>3){var fe=P.geometry.coordinates[0].length-3;F(pt(S.polygon.id,P.geometry.coordinates[0][fe],"0."+fe,!1))}if(ve<=4){var _e=[[P.geometry.coordinates[0][0][0],P.geometry.coordinates[0][0][1]],[P.geometry.coordinates[0][1][0],P.geometry.coordinates[0][1][1]]];if(F({type:Mt,properties:P.properties,geometry:{coordinates:_e,type:Ct}}),ve===3)return}return F(P)}}},Ho.onTrash=function(S){this.deleteFeature([S.polygon.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT)};var mo={onSetup:function(S){var P,F,le=(S=S||{}).featureId,ve="forward";if(le){if(!(P=this.getFeature(le)))throw new Error("Could not find a feature with the provided featureId");var fe=S.from;if(fe&&fe.type==="Feature"&&fe.geometry&&fe.geometry.type==="Point"&&(fe=fe.geometry),fe&&fe.type==="Point"&&fe.coordinates&&fe.coordinates.length===2&&(fe=fe.coordinates),!fe||!Array.isArray(fe))throw new Error("Please use the `from` property to indicate which point to continue the line from");var _e=P.coordinates.length-1;if(P.coordinates[_e][0]===fe[0]&&P.coordinates[_e][1]===fe[1])F=_e+1,P.addCoordinate.apply(P,[F].concat(P.coordinates[_e]));else{if(P.coordinates[0][0]!==fe[0]||P.coordinates[0][1]!==fe[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");ve="backwards",F=0,P.addCoordinate.apply(P,[F].concat(P.coordinates[0]))}}else P=this.newFeature({type:Mt,properties:{},geometry:{type:Ct,coordinates:[]}}),F=0,this.addFeature(P);return this.clearSelectedFeatures(),tt(this),this.updateUIClasses({mouse:Me}),this.activateUIButton(_t.LINE),this.setActionableState({trash:!0}),{line:P,currentVertexPosition:F,direction:ve}},clickAnywhere:function(S,P){if(S.currentVertexPosition>0&&Kn(P,S.line.coordinates[S.currentVertexPosition-1])||S.direction==="backwards"&&Kn(P,S.line.coordinates[S.currentVertexPosition+1]))return this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.line.id]});this.updateUIClasses({mouse:Me}),S.line.updateCoordinate(S.currentVertexPosition,P.lngLat.lng,P.lngLat.lat),S.direction==="forward"?(S.currentVertexPosition++,S.line.updateCoordinate(S.currentVertexPosition,P.lngLat.lng,P.lngLat.lat)):S.line.addCoordinate(0,P.lngLat.lng,P.lngLat.lat)},clickOnVertex:function(S){return this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.line.id]})},onMouseMove:function(S,P){S.line.updateCoordinate(S.currentVertexPosition,P.lngLat.lng,P.lngLat.lat),V(P)&&this.updateUIClasses({mouse:at})}};mo.onTap=mo.onClick=function(S,P){if(V(P))return this.clickOnVertex(S,P);this.clickAnywhere(S,P)},mo.onKeyUp=function(S,P){Ue(P)?this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.line.id]}):me(P)&&(this.deleteFeature([S.line.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT))},mo.onStop=function(S){Ae(this),this.activateUIButton(),this.getFeature(S.line.id)!==void 0&&(S.line.removeCoordinate(""+S.currentVertexPosition),S.line.isValid()?this.map.fire(Ye,{features:[S.line.toGeoJSON()]}):(this.deleteFeature([S.line.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT,{},{silent:!0})))},mo.onTrash=function(S){this.deleteFeature([S.line.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT)},mo.toDisplayFeatures=function(S,P,F){var le=P.properties.id===S.line.id;if(P.properties.active=le?on:An,!le)return F(P);P.geometry.coordinates.length<2||(P.properties.meta=Hn,F(pt(S.line.id,P.geometry.coordinates[S.direction==="forward"?P.geometry.coordinates.length-2:1],""+(S.direction==="forward"?P.geometry.coordinates.length-2:1),!1)),F(P))};var rn={simple_select:Dt,direct_select:Hi,draw_point:Nr,draw_polygon:Ho,draw_line_string:mo},Ds={defaultMode:Gt.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:rn,controls:{},userProperties:!1},ii={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},zn={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Ii(S,P){return S.map(function(F){return F.source?F:zr(F,{id:F.id+"."+P,source:P==="hot"?be:Re})})}var Vr=ns(function(S,P){var F="[object Arguments]",le="[object Map]",ve="[object Object]",fe="[object Set]",_e=/^\[object .+?Constructor\]$/,$e=/^(?:0|[1-9]\d*)$/,Ge={};Ge["[object Float32Array]"]=Ge["[object Float64Array]"]=Ge["[object Int8Array]"]=Ge["[object Int16Array]"]=Ge["[object Int32Array]"]=Ge["[object Uint8Array]"]=Ge["[object Uint8ClampedArray]"]=Ge["[object Uint16Array]"]=Ge["[object Uint32Array]"]=!0,Ge[F]=Ge["[object Array]"]=Ge["[object ArrayBuffer]"]=Ge["[object Boolean]"]=Ge["[object DataView]"]=Ge["[object Date]"]=Ge["[object Error]"]=Ge["[object Function]"]=Ge[le]=Ge["[object Number]"]=Ge[ve]=Ge["[object RegExp]"]=Ge[fe]=Ge["[object String]"]=Ge["[object WeakMap]"]=!1;var dt=typeof Lc=="object"&&Lc&&Lc.Object===Object&&Lc,Ee=typeof self=="object"&&self&&self.Object===Object&&self,ut=dt||Ee||Function("return this")(),mt=P&&!P.nodeType&&P,Ft=mt&&S&&!S.nodeType&&S,Vt=Ft&&Ft.exports===mt,an=Vt&&dt.process,Be=function(){try{return an&&an.binding&&an.binding("util")}catch{}}(),gt=Be&&Be.isTypedArray;function Tr(de,Oe){for(var nt=-1,wt=de==null?0:de.length;++nt<wt;)if(Oe(de[nt],nt,de))return!0;return!1}function ar(de){var Oe=-1,nt=Array(de.size);return de.forEach(function(wt,Wr){nt[++Oe]=[Wr,wt]}),nt}function Lr(de){var Oe=-1,nt=Array(de.size);return de.forEach(function(wt){nt[++Oe]=wt}),nt}var It,Mi,li,lr=Array.prototype,yi=Function.prototype,qr=Object.prototype,nn=ut["__core-js_shared__"],Oa=yi.toString,vo=qr.hasOwnProperty,Nl=(It=/[^.]+$/.exec(nn&&nn.keys&&nn.keys.IE_PROTO||""))?"Symbol(src)_1."+It:"",jl=qr.toString,Ku=RegExp("^"+Oa.call(vo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lu=Vt?ut.Buffer:void 0,os=ut.Symbol,cu=ut.Uint8Array,Ju=qr.propertyIsEnumerable,Vl=lr.splice,Ra=os?os.toStringTag:void 0,as=Object.getOwnPropertySymbols,Os=lu?lu.isBuffer:void 0,ql=(Mi=Object.keys,li=Object,function(de){return Mi(li(de))}),Tn=Ji(ut,"DataView"),Fa=Ji(ut,"Map"),Mo=Ji(ut,"Promise"),zo=Ji(ut,"Set"),Xo=Ji(ut,"WeakMap"),go=Ji(Object,"create"),pa=Oo(Tn),Ba=Oo(Fa),Ua=Oo(Mo),ha=Oo(zo),Zl=Oo(Xo),Yu=os?os.prototype:void 0,Er=Yu?Yu.valueOf:void 0;function Na(de){var Oe=-1,nt=de==null?0:de.length;for(this.clear();++Oe<nt;){var wt=de[Oe];this.set(wt[0],wt[1])}}function Xi(de){var Oe=-1,nt=de==null?0:de.length;for(this.clear();++Oe<nt;){var wt=de[Oe];this.set(wt[0],wt[1])}}function fa(de){var Oe=-1,nt=de==null?0:de.length;for(this.clear();++Oe<nt;){var wt=de[Oe];this.set(wt[0],wt[1])}}function Rs(de){var Oe=-1,nt=de==null?0:de.length;for(this.__data__=new fa;++Oe<nt;)this.add(de[Oe])}function Ko(de){var Oe=this.__data__=new Xi(de);this.size=Oe.size}function Gl(de,Oe){var nt=Fs(de),wt=!nt&&ss(de),Wr=!nt&&!wt&&rl(de),dr=!nt&&!wt&&!Wr&&Us(de),sn=nt||wt||Wr||dr,$r=sn?function(gn,zi){for(var Yo=-1,jn=Array(gn);++Yo<gn;)jn[Yo]=zi(Yo);return jn}(de.length,String):[],ci=$r.length;for(var pn in de)!Oe&&!vo.call(de,pn)||sn&&(pn=="length"||Wr&&(pn=="offset"||pn=="parent")||dr&&(pn=="buffer"||pn=="byteLength"||pn=="byteOffset")||Fr(pn,ci))||$r.push(pn);return $r}function Lo(de,Oe){for(var nt=de.length;nt--;)if(Hl(de[nt][0],Oe))return nt;return-1}function Ki(de){return de==null?de===void 0?"[object Undefined]":"[object Null]":Ra&&Ra in Object(de)?function(Oe){var nt=vo.call(Oe,Ra),wt=Oe[Ra];try{Oe[Ra]=void 0;var Wr=!0}catch{}var dr=jl.call(Oe);return Wr&&(nt?Oe[Ra]=wt:delete Oe[Ra]),dr}(de):function(Oe){return jl.call(Oe)}(de)}function da(de){return Jo(de)&&Ki(de)==F}function Qu(de,Oe,nt,wt,Wr){return de===Oe||(de==null||Oe==null||!Jo(de)&&!Jo(Oe)?de!=de&&Oe!=Oe:function(dr,sn,$r,ci,pn,gn){var zi=Fs(dr),Yo=Fs(sn),jn=zi?"[object Array]":Yi(dr),_o=Yo?"[object Array]":Yi(sn),Va=(jn=jn==F?ve:jn)==ve,js=(_o=_o==F?ve:_o)==ve,Qo=jn==_o;if(Qo&&rl(dr)){if(!rl(sn))return!1;zi=!0,Va=!1}if(Qo&&!Va)return gn||(gn=new Ko),zi||Us(dr)?ma(dr,sn,$r,ci,pn,gn):function(jr,_r,Dr,xo,ea,Ln,$t){switch(Dr){case"[object DataView]":if(jr.byteLength!=_r.byteLength||jr.byteOffset!=_r.byteOffset)return!1;jr=jr.buffer,_r=_r.buffer;case"[object ArrayBuffer]":return!(jr.byteLength!=_r.byteLength||!Ln(new cu(jr),new cu(_r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Hl(+jr,+_r);case"[object Error]":return jr.name==_r.name&&jr.message==_r.message;case"[object RegExp]":case"[object String]":return jr==_r+"";case le:var gr=ar;case fe:var Jn=1&xo;if(gr||(gr=Lr),jr.size!=_r.size&&!Jn)return!1;var ya=$t.get(jr);if(ya)return ya==_r;xo|=2,$t.set(jr,_r);var bo=ma(gr(jr),gr(_r),xo,ea,Ln,$t);return $t.delete(jr),bo;case"[object Symbol]":if(Er)return Er.call(jr)==Er.call(_r)}return!1}(dr,sn,jn,$r,ci,pn,gn);if(!(1&$r)){var qa=Va&&vo.call(dr,"__wrapped__"),pu=js&&vo.call(sn,"__wrapped__");if(qa||pu){var il=qa?dr.value():dr,Vs=pu?sn.value():sn;return gn||(gn=new Ko),pn(il,Vs,$r,ci,gn)}}return Qo?(gn||(gn=new Ko),function(jr,_r,Dr,xo,ea,Ln){var $t=1&Dr,gr=tl(jr),Jn=gr.length,ya=tl(_r).length;if(Jn!=ya&&!$t)return!1;for(var bo=Jn;bo--;){var Qi=gr[bo];if(!($t?Qi in _r:vo.call(_r,Qi)))return!1}var Xl=Ln.get(jr);if(Xl&&Ln.get(_r))return Xl==_r;var hu=!0;Ln.set(jr,_r),Ln.set(_r,jr);for(var Za=$t;++bo<Jn;){Qi=gr[bo];var va=jr[Qi],eo=_r[Qi];if(xo)var hn=$t?xo(eo,va,Qi,_r,jr,Ln):xo(va,eo,Qi,jr,_r,Ln);if(!(hn===void 0?va===eo||ea(va,eo,Dr,xo,Ln):hn)){hu=!1;break}Za||(Za=Qi=="constructor")}if(hu&&!Za){var ga=jr.constructor,qs=_r.constructor;ga==qs||!("constructor"in jr)||!("constructor"in _r)||typeof ga=="function"&&ga instanceof ga&&typeof qs=="function"&&qs instanceof qs||(hu=!1)}return Ln.delete(jr),Ln.delete(_r),hu}(dr,sn,$r,ci,pn,gn)):!1}(de,Oe,nt,wt,Qu,Wr))}function Wl(de){return!(!ja(de)||function(Oe){return!!Nl&&Nl in Oe}(de))&&(nl(de)?Ku:_e).test(Oo(de))}function el(de){if(nt=(Oe=de)&&Oe.constructor,wt=typeof nt=="function"&&nt.prototype||qr,Oe!==wt)return ql(de);var Oe,nt,wt,Wr=[];for(var dr in Object(de))vo.call(de,dr)&&dr!="constructor"&&Wr.push(dr);return Wr}function ma(de,Oe,nt,wt,Wr,dr){var sn=1&nt,$r=de.length,ci=Oe.length;if($r!=ci&&!(sn&&ci>$r))return!1;var pn=dr.get(de);if(pn&&dr.get(Oe))return pn==Oe;var gn=-1,zi=!0,Yo=2&nt?new Rs:void 0;for(dr.set(de,Oe),dr.set(Oe,de);++gn<$r;){var jn=de[gn],_o=Oe[gn];if(wt)var Va=sn?wt(_o,jn,gn,Oe,de,dr):wt(jn,_o,gn,de,Oe,dr);if(Va!==void 0){if(Va)continue;zi=!1;break}if(Yo){if(!Tr(Oe,function(js,Qo){if(qa=Qo,!Yo.has(qa)&&(jn===js||Wr(jn,js,nt,wt,dr)))return Yo.push(Qo);var qa})){zi=!1;break}}else if(jn!==_o&&!Wr(jn,_o,nt,wt,dr)){zi=!1;break}}return dr.delete(de),dr.delete(Oe),zi}function tl(de){return function(Oe,nt,wt){var Wr=nt(Oe);return Fs(Oe)?Wr:function(dr,sn){for(var $r=-1,ci=sn.length,pn=dr.length;++$r<ci;)dr[pn+$r]=sn[$r];return dr}(Wr,wt(Oe))}(de,Ns,$l)}function Do(de,Oe){var nt,wt,Wr=de.__data__;return((wt=typeof(nt=Oe))=="string"||wt=="number"||wt=="symbol"||wt=="boolean"?nt!=="__proto__":nt===null)?Wr[typeof Oe=="string"?"string":"hash"]:Wr.map}function Ji(de,Oe){var nt=function(wt,Wr){return wt==null?void 0:wt[Wr]}(de,Oe);return Wl(nt)?nt:void 0}Na.prototype.clear=function(){this.__data__=go?go(null):{},this.size=0},Na.prototype.delete=function(de){var Oe=this.has(de)&&delete this.__data__[de];return this.size-=Oe?1:0,Oe},Na.prototype.get=function(de){var Oe=this.__data__;if(go){var nt=Oe[de];return nt==="__lodash_hash_undefined__"?void 0:nt}return vo.call(Oe,de)?Oe[de]:void 0},Na.prototype.has=function(de){var Oe=this.__data__;return go?Oe[de]!==void 0:vo.call(Oe,de)},Na.prototype.set=function(de,Oe){var nt=this.__data__;return this.size+=this.has(de)?0:1,nt[de]=go&&Oe===void 0?"__lodash_hash_undefined__":Oe,this},Xi.prototype.clear=function(){this.__data__=[],this.size=0},Xi.prototype.delete=function(de){var Oe=this.__data__,nt=Lo(Oe,de);return!(nt<0)&&(nt==Oe.length-1?Oe.pop():Vl.call(Oe,nt,1),--this.size,!0)},Xi.prototype.get=function(de){var Oe=this.__data__,nt=Lo(Oe,de);return nt<0?void 0:Oe[nt][1]},Xi.prototype.has=function(de){return Lo(this.__data__,de)>-1},Xi.prototype.set=function(de,Oe){var nt=this.__data__,wt=Lo(nt,de);return wt<0?(++this.size,nt.push([de,Oe])):nt[wt][1]=Oe,this},fa.prototype.clear=function(){this.size=0,this.__data__={hash:new Na,map:new(Fa||Xi),string:new Na}},fa.prototype.delete=function(de){var Oe=Do(this,de).delete(de);return this.size-=Oe?1:0,Oe},fa.prototype.get=function(de){return Do(this,de).get(de)},fa.prototype.has=function(de){return Do(this,de).has(de)},fa.prototype.set=function(de,Oe){var nt=Do(this,de),wt=nt.size;return nt.set(de,Oe),this.size+=nt.size==wt?0:1,this},Rs.prototype.add=Rs.prototype.push=function(de){return this.__data__.set(de,"__lodash_hash_undefined__"),this},Rs.prototype.has=function(de){return this.__data__.has(de)},Ko.prototype.clear=function(){this.__data__=new Xi,this.size=0},Ko.prototype.delete=function(de){var Oe=this.__data__,nt=Oe.delete(de);return this.size=Oe.size,nt},Ko.prototype.get=function(de){return this.__data__.get(de)},Ko.prototype.has=function(de){return this.__data__.has(de)},Ko.prototype.set=function(de,Oe){var nt=this.__data__;if(nt instanceof Xi){var wt=nt.__data__;if(!Fa||wt.length<199)return wt.push([de,Oe]),this.size=++nt.size,this;nt=this.__data__=new fa(wt)}return nt.set(de,Oe),this.size=nt.size,this};var $l=as?function(de){return de==null?[]:(de=Object(de),function(Oe,nt){for(var wt=-1,Wr=Oe==null?0:Oe.length,dr=0,sn=[];++wt<Wr;){var $r=Oe[wt];nt($r,wt,Oe)&&(sn[dr++]=$r)}return sn}(as(de),function(Oe){return Ju.call(de,Oe)}))}:function(){return[]},Yi=Ki;function Fr(de,Oe){return!!(Oe=Oe==null?9007199254740991:Oe)&&(typeof de=="number"||$e.test(de))&&de>-1&&de%1==0&&de<Oe}function Oo(de){if(de!=null){try{return Oa.call(de)}catch{}try{return de+""}catch{}}return""}function Hl(de,Oe){return de===Oe||de!=de&&Oe!=Oe}(Tn&&Yi(new Tn(new ArrayBuffer(1)))!="[object DataView]"||Fa&&Yi(new Fa)!=le||Mo&&Yi(Mo.resolve())!="[object Promise]"||zo&&Yi(new zo)!=fe||Xo&&Yi(new Xo)!="[object WeakMap]")&&(Yi=function(de){var Oe=Ki(de),nt=Oe==ve?de.constructor:void 0,wt=nt?Oo(nt):"";if(wt)switch(wt){case pa:return"[object DataView]";case Ba:return le;case Ua:return"[object Promise]";case ha:return fe;case Zl:return"[object WeakMap]"}return Oe});var ss=da(function(){return arguments}())?da:function(de){return Jo(de)&&vo.call(de,"callee")&&!Ju.call(de,"callee")},Fs=Array.isArray,rl=Os||function(){return!1};function nl(de){if(!ja(de))return!1;var Oe=Ki(de);return Oe=="[object Function]"||Oe=="[object GeneratorFunction]"||Oe=="[object AsyncFunction]"||Oe=="[object Proxy]"}function Bs(de){return typeof de=="number"&&de>-1&&de%1==0&&de<=9007199254740991}function ja(de){var Oe=typeof de;return de!=null&&(Oe=="object"||Oe=="function")}function Jo(de){return de!=null&&typeof de=="object"}var Us=gt?function(de){return function(Oe){return de(Oe)}}(gt):function(de){return Jo(de)&&Bs(de.length)&&!!Ge[Ki(de)]};function Ns(de){return(Oe=de)!=null&&Bs(Oe.length)&&!nl(Oe)?Gl(de):el(de);var Oe}S.exports=function(de,Oe){return Qu(de,Oe)}}),yo={Polygon:Xn,LineString:Wi,Point:Gi,MultiPolygon:Un,MultiLineString:Un,MultiPoint:Un};function ki(S,P){return P.modes=Gt,P.getFeatureIdsAt=function(F){return ko.click({point:F},null,S).map(function(le){return le.properties.id})},P.getSelectedIds=function(){return S.store.getSelectedIds()},P.getSelected=function(){return{type:Cr,features:S.store.getSelectedIds().map(function(F){return S.store.get(F)}).map(function(F){return F.toGeoJSON()})}},P.getSelectedPoints=function(){return{type:Cr,features:S.store.getSelectedCoordinates().map(function(F){return{type:Mt,properties:{},geometry:{type:Ut,coordinates:F.coordinates}}})}},P.set=function(F){if(F.type===void 0||F.type!==Cr||!Array.isArray(F.features))throw new Error("Invalid FeatureCollection");var le=S.store.createRenderBatch(),ve=S.store.getAllIds().slice(),fe=P.add(F),_e=new cn(fe);return(ve=ve.filter(function($e){return!_e.has($e)})).length&&P.delete(ve),le(),fe},P.add=function(F){var le=JSON.parse(JSON.stringify(Je(F))).features.map(function(ve){if(ve.id=ve.id||La(),ve.geometry===null)throw new Error("Invalid geometry: null");if(S.store.get(ve.id)===void 0||S.store.get(ve.id).type!==ve.geometry.type){var fe=yo[ve.geometry.type];if(fe===void 0)throw new Error("Invalid geometry type: "+ve.geometry.type+".");var _e=new fe(S,ve);S.store.add(_e)}else{var $e=S.store.get(ve.id);$e.properties=ve.properties,Vr($e.getCoordinates(),ve.geometry.coordinates)||$e.incomingCoords(ve.geometry.coordinates)}return ve.id});return S.store.render(),le},P.get=function(F){var le=S.store.get(F);if(le)return le.toGeoJSON()},P.getAll=function(){return{type:Cr,features:S.store.getAll().map(function(F){return F.toGeoJSON()})}},P.delete=function(F){return S.store.delete(F,{silent:!0}),P.getMode()!==Gt.DIRECT_SELECT||S.store.getSelectedIds().length?S.store.render():S.events.changeMode(Gt.SIMPLE_SELECT,void 0,{silent:!0}),P},P.deleteAll=function(){return S.store.delete(S.store.getAllIds(),{silent:!0}),P.getMode()===Gt.DIRECT_SELECT?S.events.changeMode(Gt.SIMPLE_SELECT,void 0,{silent:!0}):S.store.render(),P},P.changeMode=function(F,le){return le===void 0&&(le={}),F===Gt.SIMPLE_SELECT&&P.getMode()===Gt.SIMPLE_SELECT?(ve=le.featureIds||[],fe=S.store.getSelectedIds(),ve.length===fe.length&&JSON.stringify(ve.map(function(_e){return _e}).sort())===JSON.stringify(fe.map(function(_e){return _e}).sort())||(S.store.setSelected(le.featureIds,{silent:!0}),S.store.render()),P):(F===Gt.DIRECT_SELECT&&P.getMode()===Gt.DIRECT_SELECT&&le.featureId===S.store.getSelectedIds()[0]||S.events.changeMode(F,le,{silent:!0}),P);var ve,fe},P.getMode=function(){return S.events.getMode()},P.trash=function(){return S.events.trash({silent:!0}),P},P.combineFeatures=function(){return S.events.combineFeatures({silent:!0}),P},P.uncombineFeatures=function(){return S.events.uncombineFeatures({silent:!0}),P},P.setFeatureProperty=function(F,le,ve){return S.store.setFeatureProperty(F,le,ve),P},P}var Ul=function(S,P){var F={options:S=function(ve){ve===void 0&&(ve={});var fe=zr(ve);return ve.controls||(fe.controls={}),ve.displayControlsDefault===!1?fe.controls=zr(zn,ve.controls):fe.controls=zr(ii,ve.controls),(fe=zr(Ds,fe)).styles=Ii(fe.styles,"cold").concat(Ii(fe.styles,"hot")),fe}(S)};P=ki(F,P),F.api=P;var le=B(F);return P.onAdd=le.onAdd,P.onRemove=le.onRemove,P.types=_t,P.options=S,P};function Ai(S){Ul(S,this)}return Ai.modes=rn,Ai})})(C0);var iC=C0.exports,I0={},xl={};Object.defineProperty(xl,"__esModule",{value:!0});xl.ActionCreators=xl.ActionTypes=void 0;var bl={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};xl.ActionTypes=bl;var hS={undo:function(){return{type:bl.UNDO}},redo:function(){return{type:bl.REDO}},jumpToFuture:function(n){return{type:bl.JUMP_TO_FUTURE,index:n}},jumpToPast:function(n){return{type:bl.JUMP_TO_PAST,index:n}},jump:function(n){return{type:bl.JUMP,index:n}},clearHistory:function(){return{type:bl.CLEAR_HISTORY}}};xl.ActionCreators=hS;var bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.parseActions=Gf;bs.isHistory=fS;bs.includeAction=dS;bs.excludeAction=mS;bs.combineFilters=yS;bs.groupByActionTypes=vS;bs.newHistory=gS;function Gf(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Array.isArray(r)?r:typeof r=="string"?[r]:n}function fS(r){return typeof r.present!="undefined"&&typeof r.future!="undefined"&&typeof r.past!="undefined"&&Array.isArray(r.future)&&Array.isArray(r.past)}function dS(r){var n=Gf(r);return function(u){return n.indexOf(u.type)>=0}}function mS(r){var n=Gf(r);return function(u){return n.indexOf(u.type)<0}}function yS(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return n.reduce(function(f,y){return function(w,l,I){return f(w,l,I)&&y(w,l,I)}},function(){return!0})}function vS(r){var n=Gf(r);return function(u){return n.indexOf(u.type)>=0?u.type:null}}function gS(r,n,u){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{past:r,present:n,future:u,group:f,_latestUnfiltered:n,index:r.length,limit:r.length+u.length+1}}var k0={},Fc={};Object.defineProperty(Fc,"__esModule",{value:!0});Fc.set=CS;Fc.start=ES;Fc.end=TS;Fc.log=PS;function ws(r){return bS(r)||xS(r)||_S()}function _S(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function xS(r){if(Symbol.iterator in Object(r)||Object.prototype.toString.call(r)==="[object Arguments]")return Array.from(r)}function bS(r){if(Array.isArray(r)){for(var n=0,u=new Array(r.length);n<r.length;n++)u[n]=r[n];return u}}var Wf,Ta,uy={prevState:"#9E9E9E",action:"#03A9F4",nextState:"#4CAF50"};function wS(){Ta={header:[],prev:[],action:[],next:[],msgs:[]}}function SS(){var r=Ta,n=r.header,u=r.prev,f=r.next,y=r.action,w=r.msgs;if(console.group){var l,I,M,j,ee;(l=console).groupCollapsed.apply(l,ws(n)),(I=console).log.apply(I,ws(u)),(M=console).log.apply(M,ws(y)),(j=console).log.apply(j,ws(f)),(ee=console).log.apply(ee,ws(w)),console.groupEnd()}else{var Ce,W,xe,Le,De;(Ce=console).log.apply(Ce,ws(n)),(W=console).log.apply(W,ws(u)),(xe=console).log.apply(xe,ws(y)),(Le=console).log.apply(Le,ws(f)),(De=console).log.apply(De,ws(w))}}function ly(r,n,u){return["%c".concat(r),"color: ".concat(n,"; font-weight: bold"),u]}function ES(r,n){wS(),Wf&&(console.group?(Ta.header=["%credux-undo","font-style: italic","action",r.type],Ta.action=ly("action",uy.action,r),Ta.prev=ly("prev history",uy.prevState,n)):(Ta.header=["redux-undo action",r.type],Ta.action=["action",r],Ta.prev=["prev history",n]))}function TS(r){Wf&&(console.group?Ta.next=ly("next history",uy.nextState,r):Ta.next=["next history",r],SS())}function PS(){if(Wf){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];Ta.msgs=Ta.msgs.concat([].concat(n,[`
`]))}}function CS(r){Wf=r}(function(r){function n(Me){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(je){return typeof je}:n=function(je){return je&&typeof Symbol=="function"&&je.constructor===Symbol&&je!==Symbol.prototype?"symbol":typeof je},n(Me)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=Re;var u=l(Fc),f=xl,y=bs;function w(){if(typeof WeakMap!="function")return null;var Me=new WeakMap;return w=function(){return Me},Me}function l(Me){if(Me&&Me.__esModule)return Me;if(Me===null||n(Me)!=="object"&&typeof Me!="function")return{default:Me};var Ie=w();if(Ie&&Ie.has(Me))return Ie.get(Me);var je={},at=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Xe in Me)if(Object.prototype.hasOwnProperty.call(Me,Xe)){var _t=at?Object.getOwnPropertyDescriptor(Me,Xe):null;_t&&(_t.get||_t.set)?Object.defineProperty(je,Xe,_t):je[Xe]=Me[Xe]}return je.default=Me,Ie&&Ie.set(Me,je),je}function I(Me,Ie){var je=Object.keys(Me);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(Me);Ie&&(at=at.filter(function(Xe){return Object.getOwnPropertyDescriptor(Me,Xe).enumerable})),je.push.apply(je,at)}return je}function M(Me){for(var Ie=1;Ie<arguments.length;Ie++){var je=arguments[Ie]!=null?arguments[Ie]:{};Ie%2?I(Object(je),!0).forEach(function(at){j(Me,at,je[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Me,Object.getOwnPropertyDescriptors(je)):I(Object(je)).forEach(function(at){Object.defineProperty(Me,at,Object.getOwnPropertyDescriptor(je,at))})}return Me}function j(Me,Ie,je){return Ie in Me?Object.defineProperty(Me,Ie,{value:je,enumerable:!0,configurable:!0,writable:!0}):Me[Ie]=je,Me}function ee(Me){return xe(Me)||W(Me)||Ce()}function Ce(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function W(Me){if(Symbol.iterator in Object(Me)||Object.prototype.toString.call(Me)==="[object Arguments]")return Array.from(Me)}function xe(Me){if(Array.isArray(Me)){for(var Ie=0,je=new Array(Me.length);Ie<Me.length;Ie++)je[Ie]=Me[Ie];return je}}function Le(Me,Ie){var je=(0,y.newHistory)([],Me,[]);return Ie&&(je._latestUnfiltered=null),je}function De(Me,Ie,je,at){var Xe=Me.past.length+1;u.log("inserting",Ie),u.log("new free: ",je-Xe);var _t=Me.past,Mt=Me._latestUnfiltered,bt=je&&je<=Xe,Ct=_t.slice(bt?1:0),Ut=Mt!=null?[].concat(ee(Ct),[Mt]):Ct;return(0,y.newHistory)(Ut,Ie,[],at)}function se(Me,Ie){if(Ie<0||Ie>=Me.future.length)return Me;var je=Me.past,at=Me.future,Xe=Me._latestUnfiltered,_t=[].concat(ee(je),[Xe],ee(at.slice(0,Ie))),Mt=at[Ie],bt=at.slice(Ie+1);return(0,y.newHistory)(_t,Mt,bt)}function re(Me,Ie){if(Ie<0||Ie>=Me.past.length)return Me;var je=Me.past,at=Me.future,Xe=Me._latestUnfiltered,_t=je.slice(0,Ie),Mt=[].concat(ee(je.slice(Ie+1)),[Xe],ee(at)),bt=je[Ie];return(0,y.newHistory)(_t,bt,Mt)}function oe(Me,Ie){return Ie>0?se(Me,Ie-1):Ie<0?re(Me,Me.past.length+Ie):Me}function be(Me,Ie){return Ie.indexOf(Me)>-1?Me:!Me}function Re(Me){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};u.set(Ie.debug);var je=M({limit:void 0,filter:function(){return!0},groupBy:function(){return null},undoType:f.ActionTypes.UNDO,redoType:f.ActionTypes.REDO,jumpToPastType:f.ActionTypes.JUMP_TO_PAST,jumpToFutureType:f.ActionTypes.JUMP_TO_FUTURE,jumpType:f.ActionTypes.JUMP,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1},Ie,{initTypes:(0,y.parseActions)(Ie.initTypes,["@@redux-undo/INIT"]),clearHistoryType:(0,y.parseActions)(Ie.clearHistoryType,[f.ActionTypes.CLEAR_HISTORY])}),at=je.neverSkipReducer?function(_t,Mt){for(var bt=arguments.length,Ct=new Array(bt>2?bt-2:0),Ut=2;Ut<bt;Ut++)Ct[Ut-2]=arguments[Ut];return M({},_t,{present:Me.apply(void 0,[_t.present,Mt].concat(Ct))})}:function(_t){return _t},Xe;return function(){var _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xe,Mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};u.start(Mt,_t);for(var bt=_t,Ct=arguments.length,Ut=new Array(Ct>2?Ct-2:0),Cr=2;Cr<Ct;Cr++)Ut[Cr-2]=arguments[Cr];if(!Xe)if(u.log("history is uninitialized"),_t===void 0){var Ir={type:"@@redux-undo/CREATE_HISTORY"},Fn=Me.apply(void 0,[_t,Ir].concat(Ut));return bt=Le(Fn,je.ignoreInitialState),u.log("do not set initialState on probe actions"),u.end(bt),bt}else(0,y.isHistory)(_t)?(bt=Xe=je.ignoreInitialState?_t:(0,y.newHistory)(_t.past,_t.present,_t.future),u.log("initialHistory initialized: initialState is a history",Xe)):(bt=Xe=Le(_t,je.ignoreInitialState),u.log("initialHistory initialized: initialState is not a history",Xe));var Qt;switch(Mt.type){case void 0:return bt;case je.undoType:return Qt=oe(bt,-1),u.log("perform undo"),u.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));case je.redoType:return Qt=oe(bt,1),u.log("perform redo"),u.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));case je.jumpToPastType:return Qt=re(bt,Mt.index),u.log("perform jumpToPast to ".concat(Mt.index)),u.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));case je.jumpToFutureType:return Qt=se(bt,Mt.index),u.log("perform jumpToFuture to ".concat(Mt.index)),u.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));case je.jumpType:return Qt=oe(bt,Mt.index),u.log("perform jump to ".concat(Mt.index)),u.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));case be(Mt.type,je.clearHistoryType):return Qt=Le(bt.present,je.ignoreInitialState),u.log("perform clearHistory"),u.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));default:if(Qt=Me.apply(void 0,[bt.present,Mt].concat(Ut)),je.initTypes.some(function(Xt){return Xt===Mt.type}))return u.log("reset history due to init action"),u.end(Xe),Xe;if(bt._latestUnfiltered===Qt)return bt;var Bn=typeof je.filter=="function"&&!je.filter(Mt,Qt,bt);if(Bn){var Gt=(0,y.newHistory)(bt.past,Qt,bt.future,bt.group);return je.syncFilter||(Gt._latestUnfiltered=bt._latestUnfiltered),u.log("filter ignored action, not storing it in past"),u.end(Gt),Gt}var Ye=je.groupBy(Mt,Qt,bt);if(Ye!=null&&Ye===bt.group){var zt=(0,y.newHistory)(bt.past,Qt,bt.future,bt.group);return u.log("groupBy grouped the action with the previous action"),u.end(zt),zt}return bt=De(bt,Qt,je.limit,Ye),u.log("inserted new state into history"),u.end(bt),bt}}}})(k0);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ActionTypes",{enumerable:!0,get:function(){return n.ActionTypes}}),Object.defineProperty(r,"ActionCreators",{enumerable:!0,get:function(){return n.ActionCreators}}),Object.defineProperty(r,"parseActions",{enumerable:!0,get:function(){return u.parseActions}}),Object.defineProperty(r,"isHistory",{enumerable:!0,get:function(){return u.isHistory}}),Object.defineProperty(r,"includeAction",{enumerable:!0,get:function(){return u.includeAction}}),Object.defineProperty(r,"excludeAction",{enumerable:!0,get:function(){return u.excludeAction}}),Object.defineProperty(r,"combineFilters",{enumerable:!0,get:function(){return u.combineFilters}}),Object.defineProperty(r,"groupByActionTypes",{enumerable:!0,get:function(){return u.groupByActionTypes}}),Object.defineProperty(r,"newHistory",{enumerable:!0,get:function(){return u.newHistory}}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return f.default}});var n=xl,u=bs,f=y(k0);function y(w){return w&&w.__esModule?w:{default:w}}})(I0);var oC=J2(I0),IS="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kS=IS,AS=kS;function A0(){}function M0(){}M0.resetWarningCache=A0;var MS=function(){function r(f,y,w,l,I,M){if(M!==AS){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}r.isRequired=r;function n(){return r}var u={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:n,element:r,elementType:r,instanceOf:n,node:r,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:M0,resetWarningCache:A0};return u.PropTypes=u,u};MS();var Eu=Rc.createContext(null);function zS(r){r()}var z0=zS,LS=function(n){return z0=n},DS=function(){return z0};function OS(){var r=DS(),n=null,u=null;return{clear:function(){n=null,u=null},notify:function(){r(function(){for(var y=n;y;)y.callback(),y=y.next})},get:function(){for(var y=[],w=n;w;)y.push(w),w=w.next;return y},subscribe:function(y){var w=!0,l=u={callback:y,next:null,prev:u};return l.prev?l.prev.next=l:n=l,function(){!w||n===null||(w=!1,l.next?l.next.prev=l.prev:u=l.prev,l.prev?l.prev.next=l.next:n=l.next)}}}}var L0={notify:function(){},get:function(){return[]}};function D0(r,n){var u,f=L0;function y(Ce){return M(),f.subscribe(Ce)}function w(){f.notify()}function l(){ee.onStateChange&&ee.onStateChange()}function I(){return Boolean(u)}function M(){u||(u=n?n.addNestedSub(l):r.subscribe(l),f=OS())}function j(){u&&(u(),u=void 0,f.clear(),f=L0)}var ee={addNestedSub:y,notifyNestedSubs:w,handleChangeWrapper:l,isSubscribed:I,trySubscribe:M,tryUnsubscribe:j,getListeners:function(){return f}};return ee}var cy=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?Si.exports.useLayoutEffect:Si.exports.useEffect;function aC(r){var n=r.store,u=r.context,f=r.children,y=Si.exports.useMemo(function(){var I=D0(n);return I.onStateChange=I.notifyNestedSubs,{store:n,subscription:I}},[n]),w=Si.exports.useMemo(function(){return n.getState()},[n]);cy(function(){var I=y.subscription;return I.trySubscribe(),w!==n.getState()&&I.notifyNestedSubs(),function(){I.tryUnsubscribe(),I.onStateChange=null}},[y,w]);var l=u||Eu;return pS(l.Provider,{value:y,children:f})}function Yr(){return Yr=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var u=arguments[n];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(r[f]=u[f])}return r},Yr.apply(this,arguments)}var O0={exports:{}},Qr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ei=typeof Symbol=="function"&&Symbol.for,py=Ei?Symbol.for("react.element"):60103,hy=Ei?Symbol.for("react.portal"):60106,$f=Ei?Symbol.for("react.fragment"):60107,Hf=Ei?Symbol.for("react.strict_mode"):60108,Xf=Ei?Symbol.for("react.profiler"):60114,Kf=Ei?Symbol.for("react.provider"):60109,Jf=Ei?Symbol.for("react.context"):60110,fy=Ei?Symbol.for("react.async_mode"):60111,Yf=Ei?Symbol.for("react.concurrent_mode"):60111,Qf=Ei?Symbol.for("react.forward_ref"):60112,ed=Ei?Symbol.for("react.suspense"):60113,RS=Ei?Symbol.for("react.suspense_list"):60120,td=Ei?Symbol.for("react.memo"):60115,rd=Ei?Symbol.for("react.lazy"):60116,FS=Ei?Symbol.for("react.block"):60121,BS=Ei?Symbol.for("react.fundamental"):60117,US=Ei?Symbol.for("react.responder"):60118,NS=Ei?Symbol.for("react.scope"):60119;function aa(r){if(typeof r=="object"&&r!==null){var n=r.$$typeof;switch(n){case py:switch(r=r.type,r){case fy:case Yf:case $f:case Xf:case Hf:case ed:return r;default:switch(r=r&&r.$$typeof,r){case Jf:case Qf:case rd:case td:case Kf:return r;default:return n}}case hy:return n}}}function R0(r){return aa(r)===Yf}Qr.AsyncMode=fy;Qr.ConcurrentMode=Yf;Qr.ContextConsumer=Jf;Qr.ContextProvider=Kf;Qr.Element=py;Qr.ForwardRef=Qf;Qr.Fragment=$f;Qr.Lazy=rd;Qr.Memo=td;Qr.Portal=hy;Qr.Profiler=Xf;Qr.StrictMode=Hf;Qr.Suspense=ed;Qr.isAsyncMode=function(r){return R0(r)||aa(r)===fy};Qr.isConcurrentMode=R0;Qr.isContextConsumer=function(r){return aa(r)===Jf};Qr.isContextProvider=function(r){return aa(r)===Kf};Qr.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===py};Qr.isForwardRef=function(r){return aa(r)===Qf};Qr.isFragment=function(r){return aa(r)===$f};Qr.isLazy=function(r){return aa(r)===rd};Qr.isMemo=function(r){return aa(r)===td};Qr.isPortal=function(r){return aa(r)===hy};Qr.isProfiler=function(r){return aa(r)===Xf};Qr.isStrictMode=function(r){return aa(r)===Hf};Qr.isSuspense=function(r){return aa(r)===ed};Qr.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===$f||r===Yf||r===Xf||r===Hf||r===ed||r===RS||typeof r=="object"&&r!==null&&(r.$$typeof===rd||r.$$typeof===td||r.$$typeof===Kf||r.$$typeof===Jf||r.$$typeof===Qf||r.$$typeof===BS||r.$$typeof===US||r.$$typeof===NS||r.$$typeof===FS)};Qr.typeOf=aa;O0.exports=Qr;var F0=O0.exports,jS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},VS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},B0={};B0[F0.ForwardRef]=jS;B0[F0.Memo]=VS;var yn={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd=60103,id=60106,Qp=60107,eh=60108,th=60114,rh=60109,nh=60110,ih=60112,oh=60113,dy=60120,ah=60115,sh=60116,U0=60121,N0=60122,j0=60117,V0=60129,q0=60131;if(typeof Symbol=="function"&&Symbol.for){var Fi=Symbol.for;nd=Fi("react.element"),id=Fi("react.portal"),Qp=Fi("react.fragment"),eh=Fi("react.strict_mode"),th=Fi("react.profiler"),rh=Fi("react.provider"),nh=Fi("react.context"),ih=Fi("react.forward_ref"),oh=Fi("react.suspense"),dy=Fi("react.suspense_list"),ah=Fi("react.memo"),sh=Fi("react.lazy"),U0=Fi("react.block"),N0=Fi("react.server.block"),j0=Fi("react.fundamental"),V0=Fi("react.debug_trace_mode"),q0=Fi("react.legacy_hidden")}function Ya(r){if(typeof r=="object"&&r!==null){var n=r.$$typeof;switch(n){case nd:switch(r=r.type,r){case Qp:case th:case eh:case oh:case dy:return r;default:switch(r=r&&r.$$typeof,r){case nh:case ih:case sh:case ah:case rh:return r;default:return n}}case id:return n}}}var qS=rh,ZS=nd,GS=ih,WS=Qp,$S=sh,HS=ah,XS=id,KS=th,JS=eh,YS=oh;yn.ContextConsumer=nh;yn.ContextProvider=qS;yn.Element=ZS;yn.ForwardRef=GS;yn.Fragment=WS;yn.Lazy=$S;yn.Memo=HS;yn.Portal=XS;yn.Profiler=KS;yn.StrictMode=JS;yn.Suspense=YS;yn.isAsyncMode=function(){return!1};yn.isConcurrentMode=function(){return!1};yn.isContextConsumer=function(r){return Ya(r)===nh};yn.isContextProvider=function(r){return Ya(r)===rh};yn.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===nd};yn.isForwardRef=function(r){return Ya(r)===ih};yn.isFragment=function(r){return Ya(r)===Qp};yn.isLazy=function(r){return Ya(r)===sh};yn.isMemo=function(r){return Ya(r)===ah};yn.isPortal=function(r){return Ya(r)===id};yn.isProfiler=function(r){return Ya(r)===th};yn.isStrictMode=function(r){return Ya(r)===eh};yn.isSuspense=function(r){return Ya(r)===oh};yn.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===Qp||r===th||r===V0||r===eh||r===oh||r===dy||r===q0||typeof r=="object"&&r!==null&&(r.$$typeof===sh||r.$$typeof===ah||r.$$typeof===rh||r.$$typeof===nh||r.$$typeof===ih||r.$$typeof===j0||r.$$typeof===U0||r[0]===N0)};yn.typeOf=Ya;function Z0(){var r=Si.exports.useContext(Eu);return r}function G0(r){r===void 0&&(r=Eu);var n=r===Eu?Z0:function(){return Si.exports.useContext(r)};return function(){var f=n(),y=f.store;return y}}var QS=G0();function eE(r){r===void 0&&(r=Eu);var n=r===Eu?QS:G0(r);return function(){var f=n();return f.dispatch}}var sC=eE(),tE=function(n,u){return n===u};function rE(r,n,u,f){var y=Si.exports.useReducer(function(Le){return Le+1},0),w=y[1],l=Si.exports.useMemo(function(){return D0(u,f)},[u,f]),I=Si.exports.useRef(),M=Si.exports.useRef(),j=Si.exports.useRef(),ee=Si.exports.useRef(),Ce=u.getState(),W;try{if(r!==M.current||Ce!==j.current||I.current){var xe=r(Ce);ee.current===void 0||!n(xe,ee.current)?W=xe:W=ee.current}else W=ee.current}catch(Le){throw I.current&&(Le.message+=`
The error may be correlated with this previous error:
`+I.current.stack+`

`),Le}return cy(function(){M.current=r,j.current=Ce,ee.current=W,I.current=void 0}),cy(function(){function Le(){try{var De=u.getState();if(De===j.current)return;var se=M.current(De);if(n(se,ee.current))return;ee.current=se,j.current=De}catch(re){I.current=re}w()}return l.onStateChange=Le,l.trySubscribe(),Le(),function(){return l.tryUnsubscribe()}},[u,l]),W}function nE(r){r===void 0&&(r=Eu);var n=r===Eu?Z0:function(){return Si.exports.useContext(r)};return function(f,y){y===void 0&&(y=tE);var w=n(),l=w.store,I=w.subscription,M=rE(f,y,l,I);return Si.exports.useDebugValue(M),M}}var uC=nE(),my={exports:{}},Pa={},W0={exports:{}},$0={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){var n,u,f,y;if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;r.unstable_now=function(){return w.now()}}else{var l=Date,I=l.now();r.unstable_now=function(){return l.now()-I}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var M=null,j=null,ee=function(){if(M!==null)try{var Ye=r.unstable_now();M(!0,Ye),M=null}catch(zt){throw setTimeout(ee,0),zt}};n=function(Ye){M!==null?setTimeout(n,0,Ye):(M=Ye,setTimeout(ee,0))},u=function(Ye,zt){j=setTimeout(Ye,zt)},f=function(){clearTimeout(j)},r.unstable_shouldYield=function(){return!1},y=r.unstable_forceFrameRate=function(){}}else{var Ce=window.setTimeout,W=window.clearTimeout;if(typeof console!="undefined"){var xe=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof xe!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var Le=!1,De=null,se=-1,re=5,oe=0;r.unstable_shouldYield=function(){return r.unstable_now()>=oe},y=function(){},r.unstable_forceFrameRate=function(Ye){0>Ye||125<Ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<Ye?Math.floor(1e3/Ye):5};var be=new MessageChannel,Re=be.port2;be.port1.onmessage=function(){if(De!==null){var Ye=r.unstable_now();oe=Ye+re;try{De(!0,Ye)?Re.postMessage(null):(Le=!1,De=null)}catch(zt){throw Re.postMessage(null),zt}}else Le=!1},n=function(Ye){De=Ye,Le||(Le=!0,Re.postMessage(null))},u=function(Ye,zt){se=Ce(function(){Ye(r.unstable_now())},zt)},f=function(){W(se),se=-1}}function Me(Ye,zt){var Xt=Ye.length;Ye.push(zt);e:for(;;){var Rr=Xt-1>>>1,Gr=Ye[Rr];if(Gr!==void 0&&0<at(Gr,zt))Ye[Rr]=zt,Ye[Xt]=Gr,Xt=Rr;else break e}}function Ie(Ye){return Ye=Ye[0],Ye===void 0?null:Ye}function je(Ye){var zt=Ye[0];if(zt!==void 0){var Xt=Ye.pop();if(Xt!==zt){Ye[0]=Xt;e:for(var Rr=0,Gr=Ye.length;Rr<Gr;){var fo=2*(Rr+1)-1,en=Ye[fo],si=fo+1,cr=Ye[si];if(en!==void 0&&0>at(en,Xt))cr!==void 0&&0>at(cr,en)?(Ye[Rr]=cr,Ye[si]=Xt,Rr=si):(Ye[Rr]=en,Ye[fo]=Xt,Rr=fo);else if(cr!==void 0&&0>at(cr,Xt))Ye[Rr]=cr,Ye[si]=Xt,Rr=si;else break e}}return zt}return null}function at(Ye,zt){var Xt=Ye.sortIndex-zt.sortIndex;return Xt!==0?Xt:Ye.id-zt.id}var Xe=[],_t=[],Mt=1,bt=null,Ct=3,Ut=!1,Cr=!1,Ir=!1;function Fn(Ye){for(var zt=Ie(_t);zt!==null;){if(zt.callback===null)je(_t);else if(zt.startTime<=Ye)je(_t),zt.sortIndex=zt.expirationTime,Me(Xe,zt);else break;zt=Ie(_t)}}function Qt(Ye){if(Ir=!1,Fn(Ye),!Cr)if(Ie(Xe)!==null)Cr=!0,n(Bn);else{var zt=Ie(_t);zt!==null&&u(Qt,zt.startTime-Ye)}}function Bn(Ye,zt){Cr=!1,Ir&&(Ir=!1,f()),Ut=!0;var Xt=Ct;try{for(Fn(zt),bt=Ie(Xe);bt!==null&&(!(bt.expirationTime>zt)||Ye&&!r.unstable_shouldYield());){var Rr=bt.callback;if(typeof Rr=="function"){bt.callback=null,Ct=bt.priorityLevel;var Gr=Rr(bt.expirationTime<=zt);zt=r.unstable_now(),typeof Gr=="function"?bt.callback=Gr:bt===Ie(Xe)&&je(Xe),Fn(zt)}else je(Xe);bt=Ie(Xe)}if(bt!==null)var fo=!0;else{var en=Ie(_t);en!==null&&u(Qt,en.startTime-zt),fo=!1}return fo}finally{bt=null,Ct=Xt,Ut=!1}}var Gt=y;r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ye){Ye.callback=null},r.unstable_continueExecution=function(){Cr||Ut||(Cr=!0,n(Bn))},r.unstable_getCurrentPriorityLevel=function(){return Ct},r.unstable_getFirstCallbackNode=function(){return Ie(Xe)},r.unstable_next=function(Ye){switch(Ct){case 1:case 2:case 3:var zt=3;break;default:zt=Ct}var Xt=Ct;Ct=zt;try{return Ye()}finally{Ct=Xt}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=Gt,r.unstable_runWithPriority=function(Ye,zt){switch(Ye){case 1:case 2:case 3:case 4:case 5:break;default:Ye=3}var Xt=Ct;Ct=Ye;try{return zt()}finally{Ct=Xt}},r.unstable_scheduleCallback=function(Ye,zt,Xt){var Rr=r.unstable_now();switch(typeof Xt=="object"&&Xt!==null?(Xt=Xt.delay,Xt=typeof Xt=="number"&&0<Xt?Rr+Xt:Rr):Xt=Rr,Ye){case 1:var Gr=-1;break;case 2:Gr=250;break;case 5:Gr=1073741823;break;case 4:Gr=1e4;break;default:Gr=5e3}return Gr=Xt+Gr,Ye={id:Mt++,callback:zt,priorityLevel:Ye,startTime:Xt,expirationTime:Gr,sortIndex:-1},Xt>Rr?(Ye.sortIndex=Xt,Me(_t,Ye),Ie(Xe)===null&&Ye===Ie(_t)&&(Ir?f():Ir=!0,u(Qt,Xt-Rr))):(Ye.sortIndex=Gr,Me(Xe,Ye),Cr||Ut||(Cr=!0,n(Bn))),Ye},r.unstable_wrapCallback=function(Ye){var zt=Ct;return function(){var Xt=Ct;Ct=zt;try{return Ye.apply(this,arguments)}finally{Ct=Xt}}}})($0);W0.exports=$0;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od=Si.exports,In=s0,Ti=W0.exports;function ct(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)n+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!od)throw Error(ct(227));var H0=new Set,uh={};function wl(r,n){Bc(r,n),Bc(r+"Capture",n)}function Bc(r,n){for(uh[r]=n,r=0;r<n.length;r++)H0.add(n[r])}var ru=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),iE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X0=Object.prototype.hasOwnProperty,K0={},J0={};function oE(r){return X0.call(J0,r)?!0:X0.call(K0,r)?!1:iE.test(r)?J0[r]=!0:(K0[r]=!0,!1)}function aE(r,n,u,f){if(u!==null&&u.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function sE(r,n,u,f){if(n===null||typeof n=="undefined"||aE(r,n,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function To(r,n,u,f,y,w,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=u,this.propertyName=r,this.type=n,this.sanitizeURL=w,this.removeEmptyString=l}var Bi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Bi[r]=new To(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var n=r[0];Bi[n]=new To(n,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Bi[r]=new To(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Bi[r]=new To(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Bi[r]=new To(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Bi[r]=new To(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Bi[r]=new To(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Bi[r]=new To(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Bi[r]=new To(r,5,!1,r.toLowerCase(),null,!1,!1)});var yy=/[\-:]([a-z])/g;function vy(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var n=r.replace(yy,vy);Bi[n]=new To(n,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var n=r.replace(yy,vy);Bi[n]=new To(n,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var n=r.replace(yy,vy);Bi[n]=new To(n,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Bi[r]=new To(r,1,!1,r.toLowerCase(),null,!1,!1)});Bi.xlinkHref=new To("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Bi[r]=new To(r,1,!1,r.toLowerCase(),null,!0,!0)});function gy(r,n,u,f){var y=Bi.hasOwnProperty(n)?Bi[n]:null,w=y!==null?y.type===0:f?!1:!(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N");w||(sE(n,u,y,f)&&(u=null),f||y===null?oE(n)&&(u===null?r.removeAttribute(n):r.setAttribute(n,""+u)):y.mustUseProperty?r[y.propertyName]=u===null?y.type===3?!1:"":u:(n=y.attributeName,f=y.attributeNamespace,u===null?r.removeAttribute(n):(y=y.type,u=y===3||y===4&&u===!0?"":""+u,f?r.setAttributeNS(f,n,u):r.setAttribute(n,u))))}var Sl=od.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lh=60103,El=60106,Tu=60107,_y=60108,ch=60114,xy=60109,by=60110,ad=60112,ph=60113,sd=60120,ud=60115,wy=60116,Sy=60121,Ey=60128,Y0=60129,Ty=60130,Py=60131;if(typeof Symbol=="function"&&Symbol.for){var Pi=Symbol.for;lh=Pi("react.element"),El=Pi("react.portal"),Tu=Pi("react.fragment"),_y=Pi("react.strict_mode"),ch=Pi("react.profiler"),xy=Pi("react.provider"),by=Pi("react.context"),ad=Pi("react.forward_ref"),ph=Pi("react.suspense"),sd=Pi("react.suspense_list"),ud=Pi("react.memo"),wy=Pi("react.lazy"),Sy=Pi("react.block"),Pi("react.scope"),Ey=Pi("react.opaque.id"),Y0=Pi("react.debug_trace_mode"),Ty=Pi("react.offscreen"),Py=Pi("react.legacy_hidden")}var Q0=typeof Symbol=="function"&&Symbol.iterator;function hh(r){return r===null||typeof r!="object"?null:(r=Q0&&r[Q0]||r["@@iterator"],typeof r=="function"?r:null)}var Cy;function fh(r){if(Cy===void 0)try{throw Error()}catch(u){var n=u.stack.trim().match(/\n( *(at )?)/);Cy=n&&n[1]||""}return`
`+Cy+r}var Iy=!1;function ld(r,n){if(!r||Iy)return"";Iy=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(M){var f=M}Reflect.construct(r,[],n)}else{try{n.call()}catch(M){f=M}r.call(n.prototype)}else{try{throw Error()}catch(M){f=M}r()}}catch(M){if(M&&f&&typeof M.stack=="string"){for(var y=M.stack.split(`
`),w=f.stack.split(`
`),l=y.length-1,I=w.length-1;1<=l&&0<=I&&y[l]!==w[I];)I--;for(;1<=l&&0<=I;l--,I--)if(y[l]!==w[I]){if(l!==1||I!==1)do if(l--,I--,0>I||y[l]!==w[I])return`
`+y[l].replace(" at new "," at ");while(1<=l&&0<=I);break}}}finally{Iy=!1,Error.prepareStackTrace=u}return(r=r?r.displayName||r.name:"")?fh(r):""}function uE(r){switch(r.tag){case 5:return fh(r.type);case 16:return fh("Lazy");case 13:return fh("Suspense");case 19:return fh("SuspenseList");case 0:case 2:case 15:return r=ld(r.type,!1),r;case 11:return r=ld(r.type.render,!1),r;case 22:return r=ld(r.type._render,!1),r;case 1:return r=ld(r.type,!0),r;default:return""}}function Uc(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Tu:return"Fragment";case El:return"Portal";case ch:return"Profiler";case _y:return"StrictMode";case ph:return"Suspense";case sd:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case by:return(r.displayName||"Context")+".Consumer";case xy:return(r._context.displayName||"Context")+".Provider";case ad:var n=r.render;return n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case ud:return Uc(r.type);case Sy:return Uc(r._render);case wy:n=r._payload,r=r._init;try{return Uc(r(n))}catch{}}return null}function Pu(r){switch(typeof r){case"boolean":case"number":case"object":case"string":case"undefined":return r;default:return""}}function ex(r){var n=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function lE(r){var n=ex(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,n),f=""+r[n];if(!r.hasOwnProperty(n)&&typeof u!="undefined"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,w=u.set;return Object.defineProperty(r,n,{configurable:!0,get:function(){return y.call(this)},set:function(l){f=""+l,w.call(this,l)}}),Object.defineProperty(r,n,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(l){f=""+l},stopTracking:function(){r._valueTracker=null,delete r[n]}}}}function cd(r){r._valueTracker||(r._valueTracker=lE(r))}function tx(r){if(!r)return!1;var n=r._valueTracker;if(!n)return!0;var u=n.getValue(),f="";return r&&(f=ex(r)?r.checked?"true":"false":r.value),r=f,r!==u?(n.setValue(r),!0):!1}function pd(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch{return r.body}}function ky(r,n){var u=n.checked;return In({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u!=null?u:r._wrapperState.initialChecked})}function rx(r,n){var u=n.defaultValue==null?"":n.defaultValue,f=n.checked!=null?n.checked:n.defaultChecked;u=Pu(n.value!=null?n.value:u),r._wrapperState={initialChecked:f,initialValue:u,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function nx(r,n){n=n.checked,n!=null&&gy(r,"checked",n,!1)}function Ay(r,n){nx(r,n);var u=Pu(n.value),f=n.type;if(u!=null)f==="number"?(u===0&&r.value===""||r.value!=u)&&(r.value=""+u):r.value!==""+u&&(r.value=""+u);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}n.hasOwnProperty("value")?My(r,n.type,u):n.hasOwnProperty("defaultValue")&&My(r,n.type,Pu(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(r.defaultChecked=!!n.defaultChecked)}function ix(r,n,u){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var f=n.type;if(!(f!=="submit"&&f!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+r._wrapperState.initialValue,u||n===r.value||(r.value=n),r.defaultValue=n}u=r.name,u!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,u!==""&&(r.name=u)}function My(r,n,u){(n!=="number"||pd(r.ownerDocument)!==r)&&(u==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+u&&(r.defaultValue=""+u))}function cE(r){var n="";return od.Children.forEach(r,function(u){u!=null&&(n+=u)}),n}function zy(r,n){return r=In({children:void 0},n),(n=cE(n.children))&&(r.children=n),r}function Nc(r,n,u,f){if(r=r.options,n){n={};for(var y=0;y<u.length;y++)n["$"+u[y]]=!0;for(u=0;u<r.length;u++)y=n.hasOwnProperty("$"+r[u].value),r[u].selected!==y&&(r[u].selected=y),y&&f&&(r[u].defaultSelected=!0)}else{for(u=""+Pu(u),n=null,y=0;y<r.length;y++){if(r[y].value===u){r[y].selected=!0,f&&(r[y].defaultSelected=!0);return}n!==null||r[y].disabled||(n=r[y])}n!==null&&(n.selected=!0)}}function Ly(r,n){if(n.dangerouslySetInnerHTML!=null)throw Error(ct(91));return In({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function ox(r,n){var u=n.value;if(u==null){if(u=n.children,n=n.defaultValue,u!=null){if(n!=null)throw Error(ct(92));if(Array.isArray(u)){if(!(1>=u.length))throw Error(ct(93));u=u[0]}n=u}n==null&&(n=""),u=n}r._wrapperState={initialValue:Pu(u)}}function ax(r,n){var u=Pu(n.value),f=Pu(n.defaultValue);u!=null&&(u=""+u,u!==r.value&&(r.value=u),n.defaultValue==null&&r.defaultValue!==u&&(r.defaultValue=u)),f!=null&&(r.defaultValue=""+f)}function sx(r){var n=r.textContent;n===r._wrapperState.initialValue&&n!==""&&n!==null&&(r.value=n)}var Dy={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function ux(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oy(r,n){return r==null||r==="http://www.w3.org/1999/xhtml"?ux(n):r==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var hd,lx=function(r){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(n,u,f,y){MSApp.execUnsafeLocalFunction(function(){return r(n,u,f,y)})}:r}(function(r,n){if(r.namespaceURI!==Dy.svg||"innerHTML"in r)r.innerHTML=n;else{for(hd=hd||document.createElement("div"),hd.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=hd.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;n.firstChild;)r.appendChild(n.firstChild)}});function dh(r,n){if(n){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=n;return}}r.textContent=n}var mh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pE=["Webkit","ms","Moz","O"];Object.keys(mh).forEach(function(r){pE.forEach(function(n){n=n+r.charAt(0).toUpperCase()+r.substring(1),mh[n]=mh[r]})});function cx(r,n,u){return n==null||typeof n=="boolean"||n===""?"":u||typeof n!="number"||n===0||mh.hasOwnProperty(r)&&mh[r]?(""+n).trim():n+"px"}function px(r,n){r=r.style;for(var u in n)if(n.hasOwnProperty(u)){var f=u.indexOf("--")===0,y=cx(u,n[u],f);u==="float"&&(u="cssFloat"),f?r.setProperty(u,y):r[u]=y}}var hE=In({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ry(r,n){if(n){if(hE[r]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(ct(137,r));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(ct(60));if(!(typeof n.dangerouslySetInnerHTML=="object"&&"__html"in n.dangerouslySetInnerHTML))throw Error(ct(61))}if(n.style!=null&&typeof n.style!="object")throw Error(ct(62))}}function Fy(r,n){if(r.indexOf("-")===-1)return typeof n.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function By(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Uy=null,jc=null,Vc=null;function hx(r){if(r=Dh(r)){if(typeof Uy!="function")throw Error(ct(280));var n=r.stateNode;n&&(n=Ad(n),Uy(r.stateNode,r.type,n))}}function fx(r){jc?Vc?Vc.push(r):Vc=[r]:jc=r}function dx(){if(jc){var r=jc,n=Vc;if(Vc=jc=null,hx(r),n)for(r=0;r<n.length;r++)hx(n[r])}}function Ny(r,n){return r(n)}function mx(r,n,u,f,y){return r(n,u,f,y)}function jy(){}var yx=Ny,Tl=!1,Vy=!1;function qy(){(jc!==null||Vc!==null)&&(jy(),dx())}function fE(r,n,u){if(Vy)return r(n,u);Vy=!0;try{return yx(r,n,u)}finally{Vy=!1,qy()}}function yh(r,n){var u=r.stateNode;if(u===null)return null;var f=Ad(u);if(f===null)return null;u=f[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(ct(231,n,typeof u));return u}var Zy=!1;if(ru)try{var vh={};Object.defineProperty(vh,"passive",{get:function(){Zy=!0}}),window.addEventListener("test",vh,vh),window.removeEventListener("test",vh,vh)}catch{Zy=!1}function dE(r,n,u,f,y,w,l,I,M){var j=Array.prototype.slice.call(arguments,3);try{n.apply(u,j)}catch(ee){this.onError(ee)}}var gh=!1,fd=null,dd=!1,Gy=null,mE={onError:function(r){gh=!0,fd=r}};function yE(r,n,u,f,y,w,l,I,M){gh=!1,fd=null,dE.apply(mE,arguments)}function vE(r,n,u,f,y,w,l,I,M){if(yE.apply(this,arguments),gh){if(gh){var j=fd;gh=!1,fd=null}else throw Error(ct(198));dd||(dd=!0,Gy=j)}}function Pl(r){var n=r,u=r;if(r.alternate)for(;n.return;)n=n.return;else{r=n;do n=r,(n.flags&1026)!=0&&(u=n.return),r=n.return;while(r)}return n.tag===3?u:null}function vx(r){if(r.tag===13){var n=r.memoizedState;if(n===null&&(r=r.alternate,r!==null&&(n=r.memoizedState)),n!==null)return n.dehydrated}return null}function gx(r){if(Pl(r)!==r)throw Error(ct(188))}function gE(r){var n=r.alternate;if(!n){if(n=Pl(r),n===null)throw Error(ct(188));return n!==r?null:r}for(var u=r,f=n;;){var y=u.return;if(y===null)break;var w=y.alternate;if(w===null){if(f=y.return,f!==null){u=f;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===u)return gx(y),r;if(w===f)return gx(y),n;w=w.sibling}throw Error(ct(188))}if(u.return!==f.return)u=y,f=w;else{for(var l=!1,I=y.child;I;){if(I===u){l=!0,u=y,f=w;break}if(I===f){l=!0,f=y,u=w;break}I=I.sibling}if(!l){for(I=w.child;I;){if(I===u){l=!0,u=w,f=y;break}if(I===f){l=!0,f=w,u=y;break}I=I.sibling}if(!l)throw Error(ct(189))}}if(u.alternate!==f)throw Error(ct(190))}if(u.tag!==3)throw Error(ct(188));return u.stateNode.current===u?r:n}function _x(r){if(r=gE(r),!r)return null;for(var n=r;;){if(n.tag===5||n.tag===6)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===r)break;for(;!n.sibling;){if(!n.return||n.return===r)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}function xx(r,n){for(var u=r.alternate;n!==null;){if(n===r||n===u)return!0;n=n.return}return!1}var bx,Wy,wx,Sx,$y=!1,Ss=[],Cu=null,Iu=null,ku=null,_h=new Map,xh=new Map,bh=[],Ex="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hy(r,n,u,f,y){return{blockedOn:r,domEventName:n,eventSystemFlags:u|16,nativeEvent:y,targetContainers:[f]}}function Tx(r,n){switch(r){case"focusin":case"focusout":Cu=null;break;case"dragenter":case"dragleave":Iu=null;break;case"mouseover":case"mouseout":ku=null;break;case"pointerover":case"pointerout":_h.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":xh.delete(n.pointerId)}}function wh(r,n,u,f,y,w){return r===null||r.nativeEvent!==w?(r=Hy(n,u,f,y,w),n!==null&&(n=Dh(n),n!==null&&Wy(n)),r):(r.eventSystemFlags|=f,n=r.targetContainers,y!==null&&n.indexOf(y)===-1&&n.push(y),r)}function _E(r,n,u,f,y){switch(n){case"focusin":return Cu=wh(Cu,r,n,u,f,y),!0;case"dragenter":return Iu=wh(Iu,r,n,u,f,y),!0;case"mouseover":return ku=wh(ku,r,n,u,f,y),!0;case"pointerover":var w=y.pointerId;return _h.set(w,wh(_h.get(w)||null,r,n,u,f,y)),!0;case"gotpointercapture":return w=y.pointerId,xh.set(w,wh(xh.get(w)||null,r,n,u,f,y)),!0}return!1}function xE(r){var n=Cl(r.target);if(n!==null){var u=Pl(n);if(u!==null){if(n=u.tag,n===13){if(n=vx(u),n!==null){r.blockedOn=n,Sx(r.lanePriority,function(){Ti.unstable_runWithPriority(r.priority,function(){wx(u)})});return}}else if(n===3&&u.stateNode.hydrate){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function md(r){if(r.blockedOn!==null)return!1;for(var n=r.targetContainers;0<n.length;){var u=ev(r.domEventName,r.eventSystemFlags,n[0],r.nativeEvent);if(u!==null)return n=Dh(u),n!==null&&Wy(n),r.blockedOn=u,!1;n.shift()}return!0}function Px(r,n,u){md(r)&&u.delete(n)}function bE(){for($y=!1;0<Ss.length;){var r=Ss[0];if(r.blockedOn!==null){r=Dh(r.blockedOn),r!==null&&bx(r);break}for(var n=r.targetContainers;0<n.length;){var u=ev(r.domEventName,r.eventSystemFlags,n[0],r.nativeEvent);if(u!==null){r.blockedOn=u;break}n.shift()}r.blockedOn===null&&Ss.shift()}Cu!==null&&md(Cu)&&(Cu=null),Iu!==null&&md(Iu)&&(Iu=null),ku!==null&&md(ku)&&(ku=null),_h.forEach(Px),xh.forEach(Px)}function Sh(r,n){r.blockedOn===n&&(r.blockedOn=null,$y||($y=!0,Ti.unstable_scheduleCallback(Ti.unstable_NormalPriority,bE)))}function Cx(r){function n(y){return Sh(y,r)}if(0<Ss.length){Sh(Ss[0],r);for(var u=1;u<Ss.length;u++){var f=Ss[u];f.blockedOn===r&&(f.blockedOn=null)}}for(Cu!==null&&Sh(Cu,r),Iu!==null&&Sh(Iu,r),ku!==null&&Sh(ku,r),_h.forEach(n),xh.forEach(n),u=0;u<bh.length;u++)f=bh[u],f.blockedOn===r&&(f.blockedOn=null);for(;0<bh.length&&(u=bh[0],u.blockedOn===null);)xE(u),u.blockedOn===null&&bh.shift()}function yd(r,n){var u={};return u[r.toLowerCase()]=n.toLowerCase(),u["Webkit"+r]="webkit"+n,u["Moz"+r]="moz"+n,u}var qc={animationend:yd("Animation","AnimationEnd"),animationiteration:yd("Animation","AnimationIteration"),animationstart:yd("Animation","AnimationStart"),transitionend:yd("Transition","TransitionEnd")},Xy={},Ix={};ru&&(Ix=document.createElement("div").style,"AnimationEvent"in window||(delete qc.animationend.animation,delete qc.animationiteration.animation,delete qc.animationstart.animation),"TransitionEvent"in window||delete qc.transitionend.transition);function vd(r){if(Xy[r])return Xy[r];if(!qc[r])return r;var n=qc[r],u;for(u in n)if(n.hasOwnProperty(u)&&u in Ix)return Xy[r]=n[u];return r}var kx=vd("animationend"),Ax=vd("animationiteration"),Mx=vd("animationstart"),zx=vd("transitionend"),Lx=new Map,Ky=new Map,wE=["abort","abort",kx,"animationEnd",Ax,"animationIteration",Mx,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",zx,"transitionEnd","waiting","waiting"];function Jy(r,n){for(var u=0;u<r.length;u+=2){var f=r[u],y=r[u+1];y="on"+(y[0].toUpperCase()+y.slice(1)),Ky.set(f,n),Lx.set(f,y),wl(y,[f])}}var SE=Ti.unstable_now;SE();var vn=8;function Zc(r){if((1&r)!=0)return vn=15,1;if((2&r)!=0)return vn=14,2;if((4&r)!=0)return vn=13,4;var n=24&r;return n!==0?(vn=12,n):(r&32)!=0?(vn=11,32):(n=192&r,n!==0?(vn=10,n):(r&256)!=0?(vn=9,256):(n=3584&r,n!==0?(vn=8,n):(r&4096)!=0?(vn=7,4096):(n=4186112&r,n!==0?(vn=6,n):(n=62914560&r,n!==0?(vn=5,n):r&67108864?(vn=4,67108864):(r&134217728)!=0?(vn=3,134217728):(n=805306368&r,n!==0?(vn=2,n):(1073741824&r)!=0?(vn=1,1073741824):(vn=8,r))))))}function EE(r){switch(r){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function TE(r){switch(r){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(ct(358,r))}}function Eh(r,n){var u=r.pendingLanes;if(u===0)return vn=0;var f=0,y=0,w=r.expiredLanes,l=r.suspendedLanes,I=r.pingedLanes;if(w!==0)f=w,y=vn=15;else if(w=u&134217727,w!==0){var M=w&~l;M!==0?(f=Zc(M),y=vn):(I&=w,I!==0&&(f=Zc(I),y=vn))}else w=u&~l,w!==0?(f=Zc(w),y=vn):I!==0&&(f=Zc(I),y=vn);if(f===0)return 0;if(f=31-Au(f),f=u&((0>f?0:1<<f)<<1)-1,n!==0&&n!==f&&(n&l)==0){if(Zc(n),y<=vn)return n;vn=y}if(n=r.entangledLanes,n!==0)for(r=r.entanglements,n&=f;0<n;)u=31-Au(n),y=1<<u,f|=r[u],n&=~y;return f}function Dx(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function gd(r,n){switch(r){case 15:return 1;case 14:return 2;case 12:return r=Gc(24&~n),r===0?gd(10,n):r;case 10:return r=Gc(192&~n),r===0?gd(8,n):r;case 8:return r=Gc(3584&~n),r===0&&(r=Gc(4186112&~n),r===0&&(r=512)),r;case 2:return n=Gc(805306368&~n),n===0&&(n=268435456),n}throw Error(ct(358,r))}function Gc(r){return r&-r}function Yy(r){for(var n=[],u=0;31>u;u++)n.push(r);return n}function _d(r,n,u){r.pendingLanes|=n;var f=n-1;r.suspendedLanes&=f,r.pingedLanes&=f,r=r.eventTimes,n=31-Au(n),r[n]=u}var Au=Math.clz32?Math.clz32:IE,PE=Math.log,CE=Math.LN2;function IE(r){return r===0?32:31-(PE(r)/CE|0)|0}var kE=Ti.unstable_UserBlockingPriority,AE=Ti.unstable_runWithPriority,xd=!0;function ME(r,n,u,f){Tl||jy();var y=Qy,w=Tl;Tl=!0;try{mx(y,r,n,u,f)}finally{(Tl=w)||qy()}}function zE(r,n,u,f){AE(kE,Qy.bind(null,r,n,u,f))}function Qy(r,n,u,f){if(xd){var y;if((y=(n&4)==0)&&0<Ss.length&&-1<Ex.indexOf(r))r=Hy(null,r,n,u,f),Ss.push(r);else{var w=ev(r,n,u,f);if(w===null)y&&Tx(r,f);else{if(y){if(-1<Ex.indexOf(r)){r=Hy(w,r,n,u,f),Ss.push(r);return}if(_E(w,r,n,u,f))return;Tx(r,f)}c1(r,n,f,null,u)}}}}function ev(r,n,u,f){var y=By(f);if(y=Cl(y),y!==null){var w=Pl(y);if(w===null)y=null;else{var l=w.tag;if(l===13){if(y=vx(w),y!==null)return y;y=null}else if(l===3){if(w.stateNode.hydrate)return w.tag===3?w.stateNode.containerInfo:null;y=null}else w!==y&&(y=null)}}return c1(r,n,f,y,u),null}var Mu=null,tv=null,bd=null;function Ox(){if(bd)return bd;var r,n=tv,u=n.length,f,y="value"in Mu?Mu.value:Mu.textContent,w=y.length;for(r=0;r<u&&n[r]===y[r];r++);var l=u-r;for(f=1;f<=l&&n[u-f]===y[w-f];f++);return bd=y.slice(r,1<f?1-f:void 0)}function wd(r){var n=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&n===13&&(r=13)):r=n,r===10&&(r=13),32<=r||r===13?r:0}function Sd(){return!0}function Rx(){return!1}function sa(r){function n(u,f,y,w,l){this._reactName=u,this._targetInst=y,this.type=f,this.nativeEvent=w,this.target=l,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(u=r[I],this[I]=u?u(w):w[I]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Sd:Rx,this.isPropagationStopped=Rx,this}return In(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Sd)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Sd)},persist:function(){},isPersistent:Sd}),n}var Wc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rv=sa(Wc),Th=In({},Wc,{view:0,detail:0}),LE=sa(Th),nv,iv,Ph,Ed=In({},Th,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:av,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ph&&(Ph&&r.type==="mousemove"?(nv=r.screenX-Ph.screenX,iv=r.screenY-Ph.screenY):iv=nv=0,Ph=r),nv)},movementY:function(r){return"movementY"in r?r.movementY:iv}}),Fx=sa(Ed),DE=In({},Ed,{dataTransfer:0}),OE=sa(DE),RE=In({},Th,{relatedTarget:0}),ov=sa(RE),FE=In({},Wc,{animationName:0,elapsedTime:0,pseudoElement:0}),BE=sa(FE),UE=In({},Wc,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),NE=sa(UE),jE=In({},Wc,{data:0}),Bx=sa(jE),VE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GE(r){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(r):(r=ZE[r])?!!n[r]:!1}function av(){return GE}var WE=In({},Th,{key:function(r){if(r.key){var n=VE[r.key]||r.key;if(n!=="Unidentified")return n}return r.type==="keypress"?(r=wd(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?qE[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:av,charCode:function(r){return r.type==="keypress"?wd(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?wd(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),$E=sa(WE),HE=In({},Ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ux=sa(HE),XE=In({},Th,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:av}),KE=sa(XE),JE=In({},Wc,{propertyName:0,elapsedTime:0,pseudoElement:0}),YE=sa(JE),QE=In({},Ed,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),eT=sa(QE),tT=[9,13,27,32],sv=ru&&"CompositionEvent"in window,Ch=null;ru&&"documentMode"in document&&(Ch=document.documentMode);var rT=ru&&"TextEvent"in window&&!Ch,Nx=ru&&(!sv||Ch&&8<Ch&&11>=Ch),jx=String.fromCharCode(32),Vx=!1;function qx(r,n){switch(r){case"keyup":return tT.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zx(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var $c=!1;function nT(r,n){switch(r){case"compositionend":return Zx(n);case"keypress":return n.which!==32?null:(Vx=!0,jx);case"textInput":return r=n.data,r===jx&&Vx?null:r;default:return null}}function iT(r,n){if($c)return r==="compositionend"||!sv&&qx(r,n)?(r=Ox(),bd=tv=Mu=null,$c=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Nx&&n.locale!=="ko"?null:n.data;default:return null}}var oT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gx(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n==="input"?!!oT[r.type]:n==="textarea"}function Wx(r,n,u,f){fx(f),n=Pd(n,"onChange"),0<n.length&&(u=new rv("onChange","change",null,u,f),r.push({event:u,listeners:n}))}var Ih=null,kh=null;function aT(r){o1(r,0)}function Td(r){var n=Yc(r);if(tx(n))return r}function sT(r,n){if(r==="change")return n}var $x=!1;if(ru){var uv;if(ru){var lv="oninput"in document;if(!lv){var Hx=document.createElement("div");Hx.setAttribute("oninput","return;"),lv=typeof Hx.oninput=="function"}uv=lv}else uv=!1;$x=uv&&(!document.documentMode||9<document.documentMode)}function Xx(){Ih&&(Ih.detachEvent("onpropertychange",Kx),kh=Ih=null)}function Kx(r){if(r.propertyName==="value"&&Td(kh)){var n=[];if(Wx(n,kh,r,By(r)),r=aT,Tl)r(n);else{Tl=!0;try{Ny(r,n)}finally{Tl=!1,qy()}}}}function uT(r,n,u){r==="focusin"?(Xx(),Ih=n,kh=u,Ih.attachEvent("onpropertychange",Kx)):r==="focusout"&&Xx()}function lT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Td(kh)}function cT(r,n){if(r==="click")return Td(n)}function pT(r,n){if(r==="input"||r==="change")return Td(n)}function hT(r,n){return r===n&&(r!==0||1/r==1/n)||r!==r&&n!==n}var Ca=typeof Object.is=="function"?Object.is:hT,fT=Object.prototype.hasOwnProperty;function Ah(r,n){if(Ca(r,n))return!0;if(typeof r!="object"||r===null||typeof n!="object"||n===null)return!1;var u=Object.keys(r),f=Object.keys(n);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++)if(!fT.call(n,u[f])||!Ca(r[u[f]],n[u[f]]))return!1;return!0}function Jx(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Yx(r,n){var u=Jx(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=n&&f>=n)return{node:u,offset:n-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Jx(u)}}function Qx(r,n){return r&&n?r===n?!0:r&&r.nodeType===3?!1:n&&n.nodeType===3?Qx(r,n.parentNode):"contains"in r?r.contains(n):r.compareDocumentPosition?!!(r.compareDocumentPosition(n)&16):!1:!1}function e1(){for(var r=window,n=pd();n instanceof r.HTMLIFrameElement;){try{var u=typeof n.contentWindow.location.href=="string"}catch{u=!1}if(u)r=n.contentWindow;else break;n=pd(r.document)}return n}function cv(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n&&(n==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||n==="textarea"||r.contentEditable==="true")}var dT=ru&&"documentMode"in document&&11>=document.documentMode,Hc=null,pv=null,Mh=null,hv=!1;function t1(r,n,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;hv||Hc==null||Hc!==pd(f)||(f=Hc,"selectionStart"in f&&cv(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Mh&&Ah(Mh,f)||(Mh=f,f=Pd(pv,"onSelect"),0<f.length&&(n=new rv("onSelect","select",null,n,u),r.push({event:n,listeners:f}),n.target=Hc)))}Jy("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Jy("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Jy(wE,2);for(var r1="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),fv=0;fv<r1.length;fv++)Ky.set(r1[fv],0);Bc("onMouseEnter",["mouseout","mouseover"]);Bc("onMouseLeave",["mouseout","mouseover"]);Bc("onPointerEnter",["pointerout","pointerover"]);Bc("onPointerLeave",["pointerout","pointerover"]);wl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wl("onBeforeInput",["compositionend","keypress","textInput","paste"]);wl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n1=new Set("cancel close invalid load scroll toggle".split(" ").concat(zh));function i1(r,n,u){var f=r.type||"unknown-event";r.currentTarget=u,vE(f,n,void 0,r),r.currentTarget=null}function o1(r,n){n=(n&4)!=0;for(var u=0;u<r.length;u++){var f=r[u],y=f.event;f=f.listeners;e:{var w=void 0;if(n)for(var l=f.length-1;0<=l;l--){var I=f[l],M=I.instance,j=I.currentTarget;if(I=I.listener,M!==w&&y.isPropagationStopped())break e;i1(y,I,j),w=M}else for(l=0;l<f.length;l++){if(I=f[l],M=I.instance,j=I.currentTarget,I=I.listener,M!==w&&y.isPropagationStopped())break e;i1(y,I,j),w=M}}}if(dd)throw r=Gy,dd=!1,Gy=null,r}function Sn(r,n){var u=y1(n),f=r+"__bubble";u.has(f)||(l1(n,r,2,!1),u.add(f))}var a1="_reactListening"+Math.random().toString(36).slice(2);function s1(r){r[a1]||(r[a1]=!0,H0.forEach(function(n){n1.has(n)||u1(n,!1,r,null),u1(n,!0,r,null)}))}function u1(r,n,u,f){var y=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,w=u;if(r==="selectionchange"&&u.nodeType!==9&&(w=u.ownerDocument),f!==null&&!n&&n1.has(r)){if(r!=="scroll")return;y|=2,w=f}var l=y1(w),I=r+"__"+(n?"capture":"bubble");l.has(I)||(n&&(y|=4),l1(w,r,y,n),l.add(I))}function l1(r,n,u,f){var y=Ky.get(n);switch(y===void 0?2:y){case 0:y=ME;break;case 1:y=zE;break;default:y=Qy}u=y.bind(null,n,u,r),y=void 0,!Zy||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(y=!0),f?y!==void 0?r.addEventListener(n,u,{capture:!0,passive:y}):r.addEventListener(n,u,!0):y!==void 0?r.addEventListener(n,u,{passive:y}):r.addEventListener(n,u,!1)}function c1(r,n,u,f,y){var w=f;if((n&1)==0&&(n&2)==0&&f!==null)e:for(;;){if(f===null)return;var l=f.tag;if(l===3||l===4){var I=f.stateNode.containerInfo;if(I===y||I.nodeType===8&&I.parentNode===y)break;if(l===4)for(l=f.return;l!==null;){var M=l.tag;if((M===3||M===4)&&(M=l.stateNode.containerInfo,M===y||M.nodeType===8&&M.parentNode===y))return;l=l.return}for(;I!==null;){if(l=Cl(I),l===null)return;if(M=l.tag,M===5||M===6){f=w=l;continue e}I=I.parentNode}}f=f.return}fE(function(){var j=w,ee=By(u),Ce=[];e:{var W=Lx.get(r);if(W!==void 0){var xe=rv,Le=r;switch(r){case"keypress":if(wd(u)===0)break e;case"keydown":case"keyup":xe=$E;break;case"focusin":Le="focus",xe=ov;break;case"focusout":Le="blur",xe=ov;break;case"beforeblur":case"afterblur":xe=ov;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=Fx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=OE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=KE;break;case kx:case Ax:case Mx:xe=BE;break;case zx:xe=YE;break;case"scroll":xe=LE;break;case"wheel":xe=eT;break;case"copy":case"cut":case"paste":xe=NE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=Ux}var De=(n&4)!=0,se=!De&&r==="scroll",re=De?W!==null?W+"Capture":null:W;De=[];for(var oe=j,be;oe!==null;){be=oe;var Re=be.stateNode;if(be.tag===5&&Re!==null&&(be=Re,re!==null&&(Re=yh(oe,re),Re!=null&&De.push(Lh(oe,Re,be)))),se)break;oe=oe.return}0<De.length&&(W=new xe(W,Le,null,u,ee),Ce.push({event:W,listeners:De}))}}if((n&7)==0){e:{if(W=r==="mouseover"||r==="pointerover",xe=r==="mouseout"||r==="pointerout",W&&(n&16)==0&&(Le=u.relatedTarget||u.fromElement)&&(Cl(Le)||Le[Jc]))break e;if((xe||W)&&(W=ee.window===ee?ee:(W=ee.ownerDocument)?W.defaultView||W.parentWindow:window,xe?(Le=u.relatedTarget||u.toElement,xe=j,Le=Le?Cl(Le):null,Le!==null&&(se=Pl(Le),Le!==se||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(xe=null,Le=j),xe!==Le)){if(De=Fx,Re="onMouseLeave",re="onMouseEnter",oe="mouse",(r==="pointerout"||r==="pointerover")&&(De=Ux,Re="onPointerLeave",re="onPointerEnter",oe="pointer"),se=xe==null?W:Yc(xe),be=Le==null?W:Yc(Le),W=new De(Re,oe+"leave",xe,u,ee),W.target=se,W.relatedTarget=be,Re=null,Cl(ee)===j&&(De=new De(re,oe+"enter",Le,u,ee),De.target=be,De.relatedTarget=se,Re=De),se=Re,xe&&Le)t:{for(De=xe,re=Le,oe=0,be=De;be;be=Xc(be))oe++;for(be=0,Re=re;Re;Re=Xc(Re))be++;for(;0<oe-be;)De=Xc(De),oe--;for(;0<be-oe;)re=Xc(re),be--;for(;oe--;){if(De===re||re!==null&&De===re.alternate)break t;De=Xc(De),re=Xc(re)}De=null}else De=null;xe!==null&&p1(Ce,W,xe,De,!1),Le!==null&&se!==null&&p1(Ce,se,Le,De,!0)}}e:{if(W=j?Yc(j):window,xe=W.nodeName&&W.nodeName.toLowerCase(),xe==="select"||xe==="input"&&W.type==="file")var Me=sT;else if(Gx(W))if($x)Me=pT;else{Me=lT;var Ie=uT}else(xe=W.nodeName)&&xe.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(Me=cT);if(Me&&(Me=Me(r,j))){Wx(Ce,Me,u,ee);break e}Ie&&Ie(r,W,j),r==="focusout"&&(Ie=W._wrapperState)&&Ie.controlled&&W.type==="number"&&My(W,"number",W.value)}switch(Ie=j?Yc(j):window,r){case"focusin":(Gx(Ie)||Ie.contentEditable==="true")&&(Hc=Ie,pv=j,Mh=null);break;case"focusout":Mh=pv=Hc=null;break;case"mousedown":hv=!0;break;case"contextmenu":case"mouseup":case"dragend":hv=!1,t1(Ce,u,ee);break;case"selectionchange":if(dT)break;case"keydown":case"keyup":t1(Ce,u,ee)}var je;if(sv)e:{switch(r){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else $c?qx(r,u)&&(at="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(at="onCompositionStart");at&&(Nx&&u.locale!=="ko"&&($c||at!=="onCompositionStart"?at==="onCompositionEnd"&&$c&&(je=Ox()):(Mu=ee,tv="value"in Mu?Mu.value:Mu.textContent,$c=!0)),Ie=Pd(j,at),0<Ie.length&&(at=new Bx(at,r,null,u,ee),Ce.push({event:at,listeners:Ie}),je?at.data=je:(je=Zx(u),je!==null&&(at.data=je)))),(je=rT?nT(r,u):iT(r,u))&&(j=Pd(j,"onBeforeInput"),0<j.length&&(ee=new Bx("onBeforeInput","beforeinput",null,u,ee),Ce.push({event:ee,listeners:j}),ee.data=je))}o1(Ce,n)})}function Lh(r,n,u){return{instance:r,listener:n,currentTarget:u}}function Pd(r,n){for(var u=n+"Capture",f=[];r!==null;){var y=r,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=yh(r,u),w!=null&&f.unshift(Lh(r,w,y)),w=yh(r,n),w!=null&&f.push(Lh(r,w,y))),r=r.return}return f}function Xc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function p1(r,n,u,f,y){for(var w=n._reactName,l=[];u!==null&&u!==f;){var I=u,M=I.alternate,j=I.stateNode;if(M!==null&&M===f)break;I.tag===5&&j!==null&&(I=j,y?(M=yh(u,w),M!=null&&l.unshift(Lh(u,M,I))):y||(M=yh(u,w),M!=null&&l.push(Lh(u,M,I)))),u=u.return}l.length!==0&&r.push({event:n,listeners:l})}function Cd(){}var dv=null,mv=null;function h1(r,n){switch(r){case"button":case"input":case"select":case"textarea":return!!n.autoFocus}return!1}function yv(r,n){return r==="textarea"||r==="option"||r==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var f1=typeof setTimeout=="function"?setTimeout:void 0,mT=typeof clearTimeout=="function"?clearTimeout:void 0;function vv(r){r.nodeType===1?r.textContent="":r.nodeType===9&&(r=r.body,r!=null&&(r.textContent=""))}function Kc(r){for(;r!=null;r=r.nextSibling){var n=r.nodeType;if(n===1||n===3)break}return r}function d1(r){r=r.previousSibling;for(var n=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(n===0)return r;n--}else u==="/$"&&n++}r=r.previousSibling}return null}var gv=0;function yT(r){return{$$typeof:Ey,toString:r,valueOf:r}}var Id=Math.random().toString(36).slice(2),zu="__reactFiber$"+Id,kd="__reactProps$"+Id,Jc="__reactContainer$"+Id,m1="__reactEvents$"+Id;function Cl(r){var n=r[zu];if(n)return n;for(var u=r.parentNode;u;){if(n=u[Jc]||u[zu]){if(u=n.alternate,n.child!==null||u!==null&&u.child!==null)for(r=d1(r);r!==null;){if(u=r[zu])return u;r=d1(r)}return n}r=u,u=r.parentNode}return null}function Dh(r){return r=r[zu]||r[Jc],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Yc(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(ct(33))}function Ad(r){return r[kd]||null}function y1(r){var n=r[m1];return n===void 0&&(n=r[m1]=new Set),n}var _v=[],Qc=-1;function Lu(r){return{current:r}}function En(r){0>Qc||(r.current=_v[Qc],_v[Qc]=null,Qc--)}function Wn(r,n){Qc++,_v[Qc]=r.current,r.current=n}var Du={},uo=Lu(Du),qo=Lu(!1),Il=Du;function ep(r,n){var u=r.type.contextTypes;if(!u)return Du;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===n)return f.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in u)y[w]=n[w];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=y),y}function Zo(r){return r=r.childContextTypes,r!=null}function Md(){En(qo),En(uo)}function v1(r,n,u){if(uo.current!==Du)throw Error(ct(168));Wn(uo,n),Wn(qo,u)}function g1(r,n,u){var f=r.stateNode;if(r=n.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var y in f)if(!(y in r))throw Error(ct(108,Uc(n)||"Unknown",y));return In({},u,f)}function zd(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Du,Il=uo.current,Wn(uo,r),Wn(qo,qo.current),!0}function _1(r,n,u){var f=r.stateNode;if(!f)throw Error(ct(169));u?(r=g1(r,n,Il),f.__reactInternalMemoizedMergedChildContext=r,En(qo),En(uo),Wn(uo,r)):En(qo),Wn(qo,u)}var xv=null,kl=null,vT=Ti.unstable_runWithPriority,bv=Ti.unstable_scheduleCallback,wv=Ti.unstable_cancelCallback,gT=Ti.unstable_shouldYield,x1=Ti.unstable_requestPaint,Sv=Ti.unstable_now,_T=Ti.unstable_getCurrentPriorityLevel,Ld=Ti.unstable_ImmediatePriority,b1=Ti.unstable_UserBlockingPriority,w1=Ti.unstable_NormalPriority,S1=Ti.unstable_LowPriority,E1=Ti.unstable_IdlePriority,Ev={},xT=x1!==void 0?x1:function(){},nu=null,Dd=null,Tv=!1,T1=Sv(),lo=1e4>T1?Sv:function(){return Sv()-T1};function tp(){switch(_T()){case Ld:return 99;case b1:return 98;case w1:return 97;case S1:return 96;case E1:return 95;default:throw Error(ct(332))}}function P1(r){switch(r){case 99:return Ld;case 98:return b1;case 97:return w1;case 96:return S1;case 95:return E1;default:throw Error(ct(332))}}function Al(r,n){return r=P1(r),vT(r,n)}function Oh(r,n,u){return r=P1(r),bv(r,n,u)}function Es(){if(Dd!==null){var r=Dd;Dd=null,wv(r)}C1()}function C1(){if(!Tv&&nu!==null){Tv=!0;var r=0;try{var n=nu;Al(99,function(){for(;r<n.length;r++){var u=n[r];do u=u(!0);while(u!==null)}}),nu=null}catch(u){throw nu!==null&&(nu=nu.slice(r+1)),bv(Ld,Es),u}finally{Tv=!1}}}var bT=Sl.ReactCurrentBatchConfig;function Qa(r,n){if(r&&r.defaultProps){n=In({},n),r=r.defaultProps;for(var u in r)n[u]===void 0&&(n[u]=r[u]);return n}return n}var Od=Lu(null),Rd=null,rp=null,Fd=null;function Pv(){Fd=rp=Rd=null}function Cv(r){var n=Od.current;En(Od),r.type._context._currentValue=n}function I1(r,n){for(;r!==null;){var u=r.alternate;if((r.childLanes&n)===n){if(u===null||(u.childLanes&n)===n)break;u.childLanes|=n}else r.childLanes|=n,u!==null&&(u.childLanes|=n);r=r.return}}function np(r,n){Rd=r,Fd=rp=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&n)!=0&&(es=!0),r.firstContext=null)}function Ia(r,n){if(Fd!==r&&n!==!1&&n!==0)if((typeof n!="number"||n===1073741823)&&(Fd=r,n=1073741823),n={context:r,observedBits:n,next:null},rp===null){if(Rd===null)throw Error(ct(308));rp=n,Rd.dependencies={lanes:0,firstContext:n,responders:null}}else rp=rp.next=n;return r._currentValue}var Ou=!1;function Iv(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function k1(r,n){r=r.updateQueue,n.updateQueue===r&&(n.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ru(r,n){return{eventTime:r,lane:n,tag:0,payload:null,callback:null,next:null}}function Fu(r,n){if(r=r.updateQueue,r!==null){r=r.shared;var u=r.pending;u===null?n.next=n:(n.next=u.next,u.next=n),r.pending=n}}function A1(r,n){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var y=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var l={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?y=w=l:w=w.next=l,u=u.next}while(u!==null);w===null?y=w=n:w=w.next=n}else y=w=n;u={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:f.shared,effects:f.effects},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=n:r.next=n,u.lastBaseUpdate=n}function Rh(r,n,u,f){var y=r.updateQueue;Ou=!1;var w=y.firstBaseUpdate,l=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var M=I,j=M.next;M.next=null,l===null?w=j:l.next=j,l=M;var ee=r.alternate;if(ee!==null){ee=ee.updateQueue;var Ce=ee.lastBaseUpdate;Ce!==l&&(Ce===null?ee.firstBaseUpdate=j:Ce.next=j,ee.lastBaseUpdate=M)}}if(w!==null){Ce=y.baseState,l=0,ee=j=M=null;do{I=w.lane;var W=w.eventTime;if((f&I)===I){ee!==null&&(ee=ee.next={eventTime:W,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var xe=r,Le=w;switch(I=n,W=u,Le.tag){case 1:if(xe=Le.payload,typeof xe=="function"){Ce=xe.call(W,Ce,I);break e}Ce=xe;break e;case 3:xe.flags=xe.flags&-4097|64;case 0:if(xe=Le.payload,I=typeof xe=="function"?xe.call(W,Ce,I):xe,I==null)break e;Ce=In({},Ce,I);break e;case 2:Ou=!0}}w.callback!==null&&(r.flags|=32,I=y.effects,I===null?y.effects=[w]:I.push(w))}else W={eventTime:W,lane:I,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ee===null?(j=ee=W,M=Ce):ee=ee.next=W,l|=I;if(w=w.next,w===null){if(I=y.shared.pending,I===null)break;w=I.next,I.next=null,y.lastBaseUpdate=I,y.shared.pending=null}}while(1);ee===null&&(M=Ce),y.baseState=M,y.firstBaseUpdate=j,y.lastBaseUpdate=ee,Hh|=l,r.lanes=l,r.memoizedState=Ce}}function M1(r,n,u){if(r=n.effects,n.effects=null,r!==null)for(n=0;n<r.length;n++){var f=r[n],y=f.callback;if(y!==null){if(f.callback=null,f=u,typeof y!="function")throw Error(ct(191,y));y.call(f)}}}var z1=new od.Component().refs;function Bd(r,n,u,f){n=r.memoizedState,u=u(f,n),u=u==null?n:In({},n,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Ud={isMounted:function(r){return(r=r._reactInternals)?Pl(r)===r:!1},enqueueSetState:function(r,n,u){r=r._reactInternals;var f=ua(),y=Nu(r),w=Ru(f,y);w.payload=n,u!=null&&(w.callback=u),Fu(r,w),ju(r,y,f)},enqueueReplaceState:function(r,n,u){r=r._reactInternals;var f=ua(),y=Nu(r),w=Ru(f,y);w.tag=1,w.payload=n,u!=null&&(w.callback=u),Fu(r,w),ju(r,y,f)},enqueueForceUpdate:function(r,n){r=r._reactInternals;var u=ua(),f=Nu(r),y=Ru(u,f);y.tag=2,n!=null&&(y.callback=n),Fu(r,y),ju(r,f,u)}};function L1(r,n,u,f,y,w,l){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,w,l):n.prototype&&n.prototype.isPureReactComponent?!Ah(u,f)||!Ah(y,w):!0}function D1(r,n,u){var f=!1,y=Du,w=n.contextType;return typeof w=="object"&&w!==null?w=Ia(w):(y=Zo(n)?Il:uo.current,f=n.contextTypes,w=(f=f!=null)?ep(r,y):Du),n=new n(u,w),r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ud,r.stateNode=n,n._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=y,r.__reactInternalMemoizedMaskedChildContext=w),n}function O1(r,n,u,f){r=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(u,f),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(u,f),n.state!==r&&Ud.enqueueReplaceState(n,n.state,null)}function kv(r,n,u,f){var y=r.stateNode;y.props=u,y.state=r.memoizedState,y.refs=z1,Iv(r);var w=n.contextType;typeof w=="object"&&w!==null?y.context=Ia(w):(w=Zo(n)?Il:uo.current,y.context=ep(r,w)),Rh(r,u,y,f),y.state=r.memoizedState,w=n.getDerivedStateFromProps,typeof w=="function"&&(Bd(r,n,w,u),y.state=r.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(n=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),n!==y.state&&Ud.enqueueReplaceState(y,y.state,null),Rh(r,u,y,f),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4)}var Nd=Array.isArray;function Fh(r,n,u){if(r=u.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(ct(309));var f=u.stateNode}if(!f)throw Error(ct(147,r));var y=""+r;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===y?n.ref:(n=function(w){var l=f.refs;l===z1&&(l=f.refs={}),w===null?delete l[y]:l[y]=w},n._stringRef=y,n)}if(typeof r!="string")throw Error(ct(284));if(!u._owner)throw Error(ct(290,r))}return r}function jd(r,n){if(r.type!=="textarea")throw Error(ct(31,Object.prototype.toString.call(n)==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":n))}function R1(r){function n(se,re){if(r){var oe=se.lastEffect;oe!==null?(oe.nextEffect=re,se.lastEffect=re):se.firstEffect=se.lastEffect=re,re.nextEffect=null,re.flags=8}}function u(se,re){if(!r)return null;for(;re!==null;)n(se,re),re=re.sibling;return null}function f(se,re){for(se=new Map;re!==null;)re.key!==null?se.set(re.key,re):se.set(re.index,re),re=re.sibling;return se}function y(se,re){return se=Zu(se,re),se.index=0,se.sibling=null,se}function w(se,re,oe){return se.index=oe,r?(oe=se.alternate,oe!==null?(oe=oe.index,oe<re?(se.flags=2,re):oe):(se.flags=2,re)):re}function l(se){return r&&se.alternate===null&&(se.flags=2),se}function I(se,re,oe,be){return re===null||re.tag!==6?(re=pg(oe,se.mode,be),re.return=se,re):(re=y(re,oe),re.return=se,re)}function M(se,re,oe,be){return re!==null&&re.elementType===oe.type?(be=y(re,oe.props),be.ref=Fh(se,re,oe),be.return=se,be):(be=om(oe.type,oe.key,oe.props,null,se.mode,be),be.ref=Fh(se,re,oe),be.return=se,be)}function j(se,re,oe,be){return re===null||re.tag!==4||re.stateNode.containerInfo!==oe.containerInfo||re.stateNode.implementation!==oe.implementation?(re=hg(oe,se.mode,be),re.return=se,re):(re=y(re,oe.children||[]),re.return=se,re)}function ee(se,re,oe,be,Re){return re===null||re.tag!==7?(re=pp(oe,se.mode,be,Re),re.return=se,re):(re=y(re,oe),re.return=se,re)}function Ce(se,re,oe){if(typeof re=="string"||typeof re=="number")return re=pg(""+re,se.mode,oe),re.return=se,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case lh:return oe=om(re.type,re.key,re.props,null,se.mode,oe),oe.ref=Fh(se,null,re),oe.return=se,oe;case El:return re=hg(re,se.mode,oe),re.return=se,re}if(Nd(re)||hh(re))return re=pp(re,se.mode,oe,null),re.return=se,re;jd(se,re)}return null}function W(se,re,oe,be){var Re=re!==null?re.key:null;if(typeof oe=="string"||typeof oe=="number")return Re!==null?null:I(se,re,""+oe,be);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case lh:return oe.key===Re?oe.type===Tu?ee(se,re,oe.props.children,be,Re):M(se,re,oe,be):null;case El:return oe.key===Re?j(se,re,oe,be):null}if(Nd(oe)||hh(oe))return Re!==null?null:ee(se,re,oe,be,null);jd(se,oe)}return null}function xe(se,re,oe,be,Re){if(typeof be=="string"||typeof be=="number")return se=se.get(oe)||null,I(re,se,""+be,Re);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case lh:return se=se.get(be.key===null?oe:be.key)||null,be.type===Tu?ee(re,se,be.props.children,Re,be.key):M(re,se,be,Re);case El:return se=se.get(be.key===null?oe:be.key)||null,j(re,se,be,Re)}if(Nd(be)||hh(be))return se=se.get(oe)||null,ee(re,se,be,Re,null);jd(re,be)}return null}function Le(se,re,oe,be){for(var Re=null,Me=null,Ie=re,je=re=0,at=null;Ie!==null&&je<oe.length;je++){Ie.index>je?(at=Ie,Ie=null):at=Ie.sibling;var Xe=W(se,Ie,oe[je],be);if(Xe===null){Ie===null&&(Ie=at);break}r&&Ie&&Xe.alternate===null&&n(se,Ie),re=w(Xe,re,je),Me===null?Re=Xe:Me.sibling=Xe,Me=Xe,Ie=at}if(je===oe.length)return u(se,Ie),Re;if(Ie===null){for(;je<oe.length;je++)Ie=Ce(se,oe[je],be),Ie!==null&&(re=w(Ie,re,je),Me===null?Re=Ie:Me.sibling=Ie,Me=Ie);return Re}for(Ie=f(se,Ie);je<oe.length;je++)at=xe(Ie,se,je,oe[je],be),at!==null&&(r&&at.alternate!==null&&Ie.delete(at.key===null?je:at.key),re=w(at,re,je),Me===null?Re=at:Me.sibling=at,Me=at);return r&&Ie.forEach(function(_t){return n(se,_t)}),Re}function De(se,re,oe,be){var Re=hh(oe);if(typeof Re!="function")throw Error(ct(150));if(oe=Re.call(oe),oe==null)throw Error(ct(151));for(var Me=Re=null,Ie=re,je=re=0,at=null,Xe=oe.next();Ie!==null&&!Xe.done;je++,Xe=oe.next()){Ie.index>je?(at=Ie,Ie=null):at=Ie.sibling;var _t=W(se,Ie,Xe.value,be);if(_t===null){Ie===null&&(Ie=at);break}r&&Ie&&_t.alternate===null&&n(se,Ie),re=w(_t,re,je),Me===null?Re=_t:Me.sibling=_t,Me=_t,Ie=at}if(Xe.done)return u(se,Ie),Re;if(Ie===null){for(;!Xe.done;je++,Xe=oe.next())Xe=Ce(se,Xe.value,be),Xe!==null&&(re=w(Xe,re,je),Me===null?Re=Xe:Me.sibling=Xe,Me=Xe);return Re}for(Ie=f(se,Ie);!Xe.done;je++,Xe=oe.next())Xe=xe(Ie,se,je,Xe.value,be),Xe!==null&&(r&&Xe.alternate!==null&&Ie.delete(Xe.key===null?je:Xe.key),re=w(Xe,re,je),Me===null?Re=Xe:Me.sibling=Xe,Me=Xe);return r&&Ie.forEach(function(Mt){return n(se,Mt)}),Re}return function(se,re,oe,be){var Re=typeof oe=="object"&&oe!==null&&oe.type===Tu&&oe.key===null;Re&&(oe=oe.props.children);var Me=typeof oe=="object"&&oe!==null;if(Me)switch(oe.$$typeof){case lh:e:{for(Me=oe.key,Re=re;Re!==null;){if(Re.key===Me){switch(Re.tag){case 7:if(oe.type===Tu){u(se,Re.sibling),re=y(Re,oe.props.children),re.return=se,se=re;break e}break;default:if(Re.elementType===oe.type){u(se,Re.sibling),re=y(Re,oe.props),re.ref=Fh(se,Re,oe),re.return=se,se=re;break e}}u(se,Re);break}else n(se,Re);Re=Re.sibling}oe.type===Tu?(re=pp(oe.props.children,se.mode,be,oe.key),re.return=se,se=re):(be=om(oe.type,oe.key,oe.props,null,se.mode,be),be.ref=Fh(se,re,oe),be.return=se,se=be)}return l(se);case El:e:{for(Re=oe.key;re!==null;){if(re.key===Re)if(re.tag===4&&re.stateNode.containerInfo===oe.containerInfo&&re.stateNode.implementation===oe.implementation){u(se,re.sibling),re=y(re,oe.children||[]),re.return=se,se=re;break e}else{u(se,re);break}else n(se,re);re=re.sibling}re=hg(oe,se.mode,be),re.return=se,se=re}return l(se)}if(typeof oe=="string"||typeof oe=="number")return oe=""+oe,re!==null&&re.tag===6?(u(se,re.sibling),re=y(re,oe),re.return=se,se=re):(u(se,re),re=pg(oe,se.mode,be),re.return=se,se=re),l(se);if(Nd(oe))return Le(se,re,oe,be);if(hh(oe))return De(se,re,oe,be);if(Me&&jd(se,oe),typeof oe=="undefined"&&!Re)switch(se.tag){case 1:case 22:case 0:case 11:case 15:throw Error(ct(152,Uc(se.type)||"Component"))}return u(se,re)}}var Vd=R1(!0),F1=R1(!1),Bh={},Ts=Lu(Bh),Uh=Lu(Bh),Nh=Lu(Bh);function Ml(r){if(r===Bh)throw Error(ct(174));return r}function Av(r,n){switch(Wn(Nh,n),Wn(Uh,r),Wn(Ts,Bh),r=n.nodeType,r){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Oy(null,"");break;default:r=r===8?n.parentNode:n,n=r.namespaceURI||null,r=r.tagName,n=Oy(n,r)}En(Ts),Wn(Ts,n)}function ip(){En(Ts),En(Uh),En(Nh)}function B1(r){Ml(Nh.current);var n=Ml(Ts.current),u=Oy(n,r.type);n!==u&&(Wn(Uh,r),Wn(Ts,u))}function Mv(r){Uh.current===r&&(En(Ts),En(Uh))}var $n=Lu(0);function qd(r){for(var n=r;n!==null;){if(n.tag===13){var u=n.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&64)!=0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var iu=null,Bu=null,Ps=!1;function U1(r,n){var u=Ma(5,null,null,0);u.elementType="DELETED",u.type="DELETED",u.stateNode=n,u.return=r,u.flags=8,r.lastEffect!==null?(r.lastEffect.nextEffect=u,r.lastEffect=u):r.firstEffect=r.lastEffect=u}function N1(r,n){switch(r.tag){case 5:var u=r.type;return n=n.nodeType!==1||u.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(r.stateNode=n,!0):!1;case 6:return n=r.pendingProps===""||n.nodeType!==3?null:n,n!==null?(r.stateNode=n,!0):!1;case 13:return!1;default:return!1}}function zv(r){if(Ps){var n=Bu;if(n){var u=n;if(!N1(r,n)){if(n=Kc(u.nextSibling),!n||!N1(r,n)){r.flags=r.flags&-1025|2,Ps=!1,iu=r;return}U1(iu,u)}iu=r,Bu=Kc(n.firstChild)}else r.flags=r.flags&-1025|2,Ps=!1,iu=r}}function j1(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;iu=r}function Zd(r){if(r!==iu)return!1;if(!Ps)return j1(r),Ps=!0,!1;var n=r.type;if(r.tag!==5||n!=="head"&&n!=="body"&&!yv(n,r.memoizedProps))for(n=Bu;n;)U1(r,n),n=Kc(n.nextSibling);if(j1(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ct(317));e:{for(r=r.nextSibling,n=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"){if(n===0){Bu=Kc(r.nextSibling);break e}n--}else u!=="$"&&u!=="$!"&&u!=="$?"||n++}r=r.nextSibling}Bu=null}}else Bu=iu?Kc(r.stateNode.nextSibling):null;return!0}function Lv(){Bu=iu=null,Ps=!1}var op=[];function Dv(){for(var r=0;r<op.length;r++)op[r]._workInProgressVersionPrimary=null;op.length=0}var jh=Sl.ReactCurrentDispatcher,ka=Sl.ReactCurrentBatchConfig,Vh=0,ni=null,co=null,Ui=null,Gd=!1,qh=!1;function Go(){throw Error(ct(321))}function Ov(r,n){if(n===null)return!1;for(var u=0;u<n.length&&u<r.length;u++)if(!Ca(r[u],n[u]))return!1;return!0}function Rv(r,n,u,f,y,w){if(Vh=w,ni=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,jh.current=r===null||r.memoizedState===null?ST:ET,r=u(f,y),qh){w=0;do{if(qh=!1,!(25>w))throw Error(ct(301));w+=1,Ui=co=null,n.updateQueue=null,jh.current=TT,r=u(f,y)}while(qh)}if(jh.current=Xd,n=co!==null&&co.next!==null,Vh=0,Ui=co=ni=null,Gd=!1,n)throw Error(ct(300));return r}function zl(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ui===null?ni.memoizedState=Ui=r:Ui=Ui.next=r,Ui}function Ll(){if(co===null){var r=ni.alternate;r=r!==null?r.memoizedState:null}else r=co.next;var n=Ui===null?ni.memoizedState:Ui.next;if(n!==null)Ui=n,co=r;else{if(r===null)throw Error(ct(310));co=r,r={memoizedState:co.memoizedState,baseState:co.baseState,baseQueue:co.baseQueue,queue:co.queue,next:null},Ui===null?ni.memoizedState=Ui=r:Ui=Ui.next=r}return Ui}function Cs(r,n){return typeof n=="function"?n(r):n}function Zh(r){var n=Ll(),u=n.queue;if(u===null)throw Error(ct(311));u.lastRenderedReducer=r;var f=co,y=f.baseQueue,w=u.pending;if(w!==null){if(y!==null){var l=y.next;y.next=w.next,w.next=l}f.baseQueue=y=w,u.pending=null}if(y!==null){y=y.next,f=f.baseState;var I=l=w=null,M=y;do{var j=M.lane;if((Vh&j)===j)I!==null&&(I=I.next={lane:0,action:M.action,eagerReducer:M.eagerReducer,eagerState:M.eagerState,next:null}),f=M.eagerReducer===r?M.eagerState:r(f,M.action);else{var ee={lane:j,action:M.action,eagerReducer:M.eagerReducer,eagerState:M.eagerState,next:null};I===null?(l=I=ee,w=f):I=I.next=ee,ni.lanes|=j,Hh|=j}M=M.next}while(M!==null&&M!==y);I===null?w=f:I.next=l,Ca(f,n.memoizedState)||(es=!0),n.memoizedState=f,n.baseState=w,n.baseQueue=I,u.lastRenderedState=f}return[n.memoizedState,u.dispatch]}function Gh(r){var n=Ll(),u=n.queue;if(u===null)throw Error(ct(311));u.lastRenderedReducer=r;var f=u.dispatch,y=u.pending,w=n.memoizedState;if(y!==null){u.pending=null;var l=y=y.next;do w=r(w,l.action),l=l.next;while(l!==y);Ca(w,n.memoizedState)||(es=!0),n.memoizedState=w,n.baseQueue===null&&(n.baseState=w),u.lastRenderedState=w}return[w,f]}function V1(r,n,u){var f=n._getVersion;f=f(n._source);var y=n._workInProgressVersionPrimary;if(y!==null?r=y===f:(r=r.mutableReadLanes,(r=(Vh&r)===r)&&(n._workInProgressVersionPrimary=f,op.push(n))),r)return u(n._source);throw op.push(n),Error(ct(350))}function q1(r,n,u,f){var y=Po;if(y===null)throw Error(ct(349));var w=n._getVersion,l=w(n._source),I=jh.current,M=I.useState(function(){return V1(y,n,u)}),j=M[1],ee=M[0];M=Ui;var Ce=r.memoizedState,W=Ce.refs,xe=W.getSnapshot,Le=Ce.source;Ce=Ce.subscribe;var De=ni;return r.memoizedState={refs:W,source:n,subscribe:f},I.useEffect(function(){W.getSnapshot=u,W.setSnapshot=j;var se=w(n._source);if(!Ca(l,se)){se=u(n._source),Ca(ee,se)||(j(se),se=Nu(De),y.mutableReadLanes|=se&y.pendingLanes),se=y.mutableReadLanes,y.entangledLanes|=se;for(var re=y.entanglements,oe=se;0<oe;){var be=31-Au(oe),Re=1<<be;re[be]|=se,oe&=~Re}}},[u,n,f]),I.useEffect(function(){return f(n._source,function(){var se=W.getSnapshot,re=W.setSnapshot;try{re(se(n._source));var oe=Nu(De);y.mutableReadLanes|=oe&y.pendingLanes}catch(be){re(function(){throw be})}})},[n,f]),Ca(xe,u)&&Ca(Le,n)&&Ca(Ce,f)||(r={pending:null,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:ee},r.dispatch=j=Nv.bind(null,ni,r),M.queue=r,M.baseQueue=null,ee=V1(y,n,u),M.memoizedState=M.baseState=ee),ee}function Z1(r,n,u){var f=Ll();return q1(f,r,n,u)}function Wh(r){var n=zl();return typeof r=="function"&&(r=r()),n.memoizedState=n.baseState=r,r=n.queue={pending:null,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:r},r=r.dispatch=Nv.bind(null,ni,r),[n.memoizedState,r]}function Wd(r,n,u,f){return r={tag:r,create:n,destroy:u,deps:f,next:null},n=ni.updateQueue,n===null?(n={lastEffect:null},ni.updateQueue=n,n.lastEffect=r.next=r):(u=n.lastEffect,u===null?n.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,n.lastEffect=r)),r}function G1(r){var n=zl();return r={current:r},n.memoizedState=r}function $d(){return Ll().memoizedState}function Fv(r,n,u,f){var y=zl();ni.flags|=r,y.memoizedState=Wd(1|n,u,void 0,f===void 0?null:f)}function Bv(r,n,u,f){var y=Ll();f=f===void 0?null:f;var w=void 0;if(co!==null){var l=co.memoizedState;if(w=l.destroy,f!==null&&Ov(f,l.deps)){Wd(n,u,w,f);return}}ni.flags|=r,y.memoizedState=Wd(1|n,u,w,f)}function W1(r,n){return Fv(516,4,r,n)}function Hd(r,n){return Bv(516,4,r,n)}function $1(r,n){return Bv(4,2,r,n)}function H1(r,n){if(typeof n=="function")return r=r(),n(r),function(){n(null)};if(n!=null)return r=r(),n.current=r,function(){n.current=null}}function X1(r,n,u){return u=u!=null?u.concat([r]):null,Bv(4,2,H1.bind(null,n,r),u)}function Uv(){}function K1(r,n){var u=Ll();n=n===void 0?null:n;var f=u.memoizedState;return f!==null&&n!==null&&Ov(n,f[1])?f[0]:(u.memoizedState=[r,n],r)}function J1(r,n){var u=Ll();n=n===void 0?null:n;var f=u.memoizedState;return f!==null&&n!==null&&Ov(n,f[1])?f[0]:(r=r(),u.memoizedState=[r,n],r)}function wT(r,n){var u=tp();Al(98>u?98:u,function(){r(!0)}),Al(97<u?97:u,function(){var f=ka.transition;ka.transition=1;try{r(!1),n()}finally{ka.transition=f}})}function Nv(r,n,u){var f=ua(),y=Nu(r),w={lane:y,action:u,eagerReducer:null,eagerState:null,next:null},l=n.pending;if(l===null?w.next=w:(w.next=l.next,l.next=w),n.pending=w,l=r.alternate,r===ni||l!==null&&l===ni)qh=Gd=!0;else{if(r.lanes===0&&(l===null||l.lanes===0)&&(l=n.lastRenderedReducer,l!==null))try{var I=n.lastRenderedState,M=l(I,u);if(w.eagerReducer=l,w.eagerState=M,Ca(M,I))return}catch{}finally{}ju(r,y,f)}}var Xd={readContext:Ia,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useOpaqueIdentifier:Go,unstable_isNewReconciler:!1},ST={readContext:Ia,useCallback:function(r,n){return zl().memoizedState=[r,n===void 0?null:n],r},useContext:Ia,useEffect:W1,useImperativeHandle:function(r,n,u){return u=u!=null?u.concat([r]):null,Fv(4,2,H1.bind(null,n,r),u)},useLayoutEffect:function(r,n){return Fv(4,2,r,n)},useMemo:function(r,n){var u=zl();return n=n===void 0?null:n,r=r(),u.memoizedState=[r,n],r},useReducer:function(r,n,u){var f=zl();return n=u!==void 0?u(n):n,f.memoizedState=f.baseState=n,r=f.queue={pending:null,dispatch:null,lastRenderedReducer:r,lastRenderedState:n},r=r.dispatch=Nv.bind(null,ni,r),[f.memoizedState,r]},useRef:G1,useState:Wh,useDebugValue:Uv,useDeferredValue:function(r){var n=Wh(r),u=n[0],f=n[1];return W1(function(){var y=ka.transition;ka.transition=1;try{f(r)}finally{ka.transition=y}},[r]),u},useTransition:function(){var r=Wh(!1),n=r[0];return r=wT.bind(null,r[1]),G1(r),[r,n]},useMutableSource:function(r,n,u){var f=zl();return f.memoizedState={refs:{getSnapshot:n,setSnapshot:null},source:r,subscribe:u},q1(f,r,n,u)},useOpaqueIdentifier:function(){if(Ps){var r=!1,n=yT(function(){throw r||(r=!0,u("r:"+(gv++).toString(36))),Error(ct(355))}),u=Wh(n)[1];return(ni.mode&2)==0&&(ni.flags|=516,Wd(5,function(){u("r:"+(gv++).toString(36))},void 0,null)),n}return n="r:"+(gv++).toString(36),Wh(n),n},unstable_isNewReconciler:!1},ET={readContext:Ia,useCallback:K1,useContext:Ia,useEffect:Hd,useImperativeHandle:X1,useLayoutEffect:$1,useMemo:J1,useReducer:Zh,useRef:$d,useState:function(){return Zh(Cs)},useDebugValue:Uv,useDeferredValue:function(r){var n=Zh(Cs),u=n[0],f=n[1];return Hd(function(){var y=ka.transition;ka.transition=1;try{f(r)}finally{ka.transition=y}},[r]),u},useTransition:function(){var r=Zh(Cs)[0];return[$d().current,r]},useMutableSource:Z1,useOpaqueIdentifier:function(){return Zh(Cs)[0]},unstable_isNewReconciler:!1},TT={readContext:Ia,useCallback:K1,useContext:Ia,useEffect:Hd,useImperativeHandle:X1,useLayoutEffect:$1,useMemo:J1,useReducer:Gh,useRef:$d,useState:function(){return Gh(Cs)},useDebugValue:Uv,useDeferredValue:function(r){var n=Gh(Cs),u=n[0],f=n[1];return Hd(function(){var y=ka.transition;ka.transition=1;try{f(r)}finally{ka.transition=y}},[r]),u},useTransition:function(){var r=Gh(Cs)[0];return[$d().current,r]},useMutableSource:Z1,useOpaqueIdentifier:function(){return Gh(Cs)[0]},unstable_isNewReconciler:!1},PT=Sl.ReactCurrentOwner,es=!1;function Wo(r,n,u,f){n.child=r===null?F1(n,null,u,f):Vd(n,r.child,u,f)}function Y1(r,n,u,f,y){u=u.render;var w=n.ref;return np(n,y),f=Rv(r,n,u,f,w,y),r!==null&&!es?(n.updateQueue=r.updateQueue,n.flags&=-517,r.lanes&=~y,ou(r,n,y)):(n.flags|=1,Wo(r,n,f,y),n.child)}function Q1(r,n,u,f,y,w){if(r===null){var l=u.type;return typeof l=="function"&&!lg(l)&&l.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(n.tag=15,n.type=l,eb(r,n,l,f,y,w)):(r=om(u.type,null,f,n,n.mode,w),r.ref=n.ref,r.return=n,n.child=r)}return l=r.child,(y&w)==0&&(y=l.memoizedProps,u=u.compare,u=u!==null?u:Ah,u(y,f)&&r.ref===n.ref)?ou(r,n,w):(n.flags|=1,r=Zu(l,f),r.ref=n.ref,r.return=n,n.child=r)}function eb(r,n,u,f,y,w){if(r!==null&&Ah(r.memoizedProps,f)&&r.ref===n.ref)if(es=!1,(w&y)!=0)(r.flags&16384)!=0&&(es=!0);else return n.lanes=r.lanes,ou(r,n,w);return Vv(r,n,u,f,w)}function jv(r,n,u){var f=n.pendingProps,y=f.children,w=r!==null?r.memoizedState:null;if(f.mode==="hidden"||f.mode==="unstable-defer-without-hiding")if((n.mode&4)==0)n.memoizedState={baseLanes:0},im(n,u);else if((u&1073741824)!=0)n.memoizedState={baseLanes:0},im(n,w!==null?w.baseLanes:u);else return r=w!==null?w.baseLanes|u:u,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:r},im(n,r),null;else w!==null?(f=w.baseLanes|u,n.memoizedState=null):f=u,im(n,f);return Wo(r,n,y,u),n.child}function tb(r,n){var u=n.ref;(r===null&&u!==null||r!==null&&r.ref!==u)&&(n.flags|=128)}function Vv(r,n,u,f,y){var w=Zo(u)?Il:uo.current;return w=ep(n,w),np(n,y),u=Rv(r,n,u,f,w,y),r!==null&&!es?(n.updateQueue=r.updateQueue,n.flags&=-517,r.lanes&=~y,ou(r,n,y)):(n.flags|=1,Wo(r,n,u,y),n.child)}function rb(r,n,u,f,y){if(Zo(u)){var w=!0;zd(n)}else w=!1;if(np(n,y),n.stateNode===null)r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2),D1(n,u,f),kv(n,u,f,y),f=!0;else if(r===null){var l=n.stateNode,I=n.memoizedProps;l.props=I;var M=l.context,j=u.contextType;typeof j=="object"&&j!==null?j=Ia(j):(j=Zo(u)?Il:uo.current,j=ep(n,j));var ee=u.getDerivedStateFromProps,Ce=typeof ee=="function"||typeof l.getSnapshotBeforeUpdate=="function";Ce||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(I!==f||M!==j)&&O1(n,l,f,j),Ou=!1;var W=n.memoizedState;l.state=W,Rh(n,f,l,y),M=n.memoizedState,I!==f||W!==M||qo.current||Ou?(typeof ee=="function"&&(Bd(n,u,ee,f),M=n.memoizedState),(I=Ou||L1(n,u,I,f,W,M,j))?(Ce||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4)):(typeof l.componentDidMount=="function"&&(n.flags|=4),n.memoizedProps=f,n.memoizedState=M),l.props=f,l.state=M,l.context=j,f=I):(typeof l.componentDidMount=="function"&&(n.flags|=4),f=!1)}else{l=n.stateNode,k1(r,n),I=n.memoizedProps,j=n.type===n.elementType?I:Qa(n.type,I),l.props=j,Ce=n.pendingProps,W=l.context,M=u.contextType,typeof M=="object"&&M!==null?M=Ia(M):(M=Zo(u)?Il:uo.current,M=ep(n,M));var xe=u.getDerivedStateFromProps;(ee=typeof xe=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(I!==Ce||W!==M)&&O1(n,l,f,M),Ou=!1,W=n.memoizedState,l.state=W,Rh(n,f,l,y);var Le=n.memoizedState;I!==Ce||W!==Le||qo.current||Ou?(typeof xe=="function"&&(Bd(n,u,xe,f),Le=n.memoizedState),(j=Ou||L1(n,u,j,f,W,Le,M))?(ee||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(f,Le,M),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(f,Le,M)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=256)):(typeof l.componentDidUpdate!="function"||I===r.memoizedProps&&W===r.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&W===r.memoizedState||(n.flags|=256),n.memoizedProps=f,n.memoizedState=Le),l.props=f,l.state=Le,l.context=M,f=j):(typeof l.componentDidUpdate!="function"||I===r.memoizedProps&&W===r.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&W===r.memoizedState||(n.flags|=256),f=!1)}return qv(r,n,u,f,w,y)}function qv(r,n,u,f,y,w){tb(r,n);var l=(n.flags&64)!=0;if(!f&&!l)return y&&_1(n,u,!1),ou(r,n,w);f=n.stateNode,PT.current=n;var I=l&&typeof u.getDerivedStateFromError!="function"?null:f.render();return n.flags|=1,r!==null&&l?(n.child=Vd(n,r.child,null,w),n.child=Vd(n,null,I,w)):Wo(r,n,I,w),n.memoizedState=f.state,y&&_1(n,u,!0),n.child}function nb(r){var n=r.stateNode;n.pendingContext?v1(r,n.pendingContext,n.pendingContext!==n.context):n.context&&v1(r,n.context,!1),Av(r,n.containerInfo)}var Kd={dehydrated:null,retryLane:0};function ib(r,n,u){var f=n.pendingProps,y=$n.current,w=!1,l;return(l=(n.flags&64)!=0)||(l=r!==null&&r.memoizedState===null?!1:(y&2)!=0),l?(w=!0,n.flags&=-65):r!==null&&r.memoizedState===null||f.fallback===void 0||f.unstable_avoidThisFallback===!0||(y|=1),Wn($n,y&1),r===null?(f.fallback!==void 0&&zv(n),r=f.children,y=f.fallback,w?(r=ob(n,r,y,u),n.child.memoizedState={baseLanes:u},n.memoizedState=Kd,r):typeof f.unstable_expectedLoadTime=="number"?(r=ob(n,r,y,u),n.child.memoizedState={baseLanes:u},n.memoizedState=Kd,n.lanes=33554432,r):(u=cg({mode:"visible",children:r},n.mode,u,null),u.return=n,n.child=u)):r.memoizedState!==null?w?(f=sb(r,n,f.children,f.fallback,u),w=n.child,y=r.child.memoizedState,w.memoizedState=y===null?{baseLanes:u}:{baseLanes:y.baseLanes|u},w.childLanes=r.childLanes&~u,n.memoizedState=Kd,f):(u=ab(r,n,f.children,u),n.memoizedState=null,u):w?(f=sb(r,n,f.children,f.fallback,u),w=n.child,y=r.child.memoizedState,w.memoizedState=y===null?{baseLanes:u}:{baseLanes:y.baseLanes|u},w.childLanes=r.childLanes&~u,n.memoizedState=Kd,f):(u=ab(r,n,f.children,u),n.memoizedState=null,u)}function ob(r,n,u,f){var y=r.mode,w=r.child;return n={mode:"hidden",children:n},(y&2)==0&&w!==null?(w.childLanes=0,w.pendingProps=n):w=cg(n,y,0,null),u=pp(u,y,f,null),w.return=r,u.return=r,w.sibling=u,r.child=w,u}function ab(r,n,u,f){var y=r.child;return r=y.sibling,u=Zu(y,{mode:"visible",children:u}),(n.mode&2)==0&&(u.lanes=f),u.return=n,u.sibling=null,r!==null&&(r.nextEffect=null,r.flags=8,n.firstEffect=n.lastEffect=r),n.child=u}function sb(r,n,u,f,y){var w=n.mode,l=r.child;r=l.sibling;var I={mode:"hidden",children:u};return(w&2)==0&&n.child!==l?(u=n.child,u.childLanes=0,u.pendingProps=I,l=u.lastEffect,l!==null?(n.firstEffect=u.firstEffect,n.lastEffect=l,l.nextEffect=null):n.firstEffect=n.lastEffect=null):u=Zu(l,I),r!==null?f=Zu(r,f):(f=pp(f,w,y,null),f.flags|=2),f.return=n,u.return=n,u.sibling=f,n.child=u,f}function ub(r,n){r.lanes|=n;var u=r.alternate;u!==null&&(u.lanes|=n),I1(r.return,n)}function Zv(r,n,u,f,y,w){var l=r.memoizedState;l===null?r.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:y,lastEffect:w}:(l.isBackwards=n,l.rendering=null,l.renderingStartTime=0,l.last=f,l.tail=u,l.tailMode=y,l.lastEffect=w)}function lb(r,n,u){var f=n.pendingProps,y=f.revealOrder,w=f.tail;if(Wo(r,n,f.children,u),f=$n.current,(f&2)!=0)f=f&1|2,n.flags|=64;else{if(r!==null&&(r.flags&64)!=0)e:for(r=n.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ub(r,u);else if(r.tag===19)ub(r,u);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(Wn($n,f),(n.mode&2)==0)n.memoizedState=null;else switch(y){case"forwards":for(u=n.child,y=null;u!==null;)r=u.alternate,r!==null&&qd(r)===null&&(y=u),u=u.sibling;u=y,u===null?(y=n.child,n.child=null):(y=u.sibling,u.sibling=null),Zv(n,!1,y,u,w,n.lastEffect);break;case"backwards":for(u=null,y=n.child,n.child=null;y!==null;){if(r=y.alternate,r!==null&&qd(r)===null){n.child=y;break}r=y.sibling,y.sibling=u,u=y,y=r}Zv(n,!0,u,null,w,n.lastEffect);break;case"together":Zv(n,!1,null,null,void 0,n.lastEffect);break;default:n.memoizedState=null}return n.child}function ou(r,n,u){if(r!==null&&(n.dependencies=r.dependencies),Hh|=n.lanes,(u&n.childLanes)!=0){if(r!==null&&n.child!==r.child)throw Error(ct(153));if(n.child!==null){for(r=n.child,u=Zu(r,r.pendingProps),n.child=u,u.return=n;r.sibling!==null;)r=r.sibling,u=u.sibling=Zu(r,r.pendingProps),u.return=n;u.sibling=null}return n.child}return null}var cb,Gv,pb,hb;cb=function(r,n){for(var u=n.child;u!==null;){if(u.tag===5||u.tag===6)r.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break;for(;u.sibling===null;){if(u.return===null||u.return===n)return;u=u.return}u.sibling.return=u.return,u=u.sibling}};Gv=function(){};pb=function(r,n,u,f){var y=r.memoizedProps;if(y!==f){r=n.stateNode,Ml(Ts.current);var w=null;switch(u){case"input":y=ky(r,y),f=ky(r,f),w=[];break;case"option":y=zy(r,y),f=zy(r,f),w=[];break;case"select":y=In({},y,{value:void 0}),f=In({},f,{value:void 0}),w=[];break;case"textarea":y=Ly(r,y),f=Ly(r,f),w=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=Cd)}Ry(u,f);var l;u=null;for(j in y)if(!f.hasOwnProperty(j)&&y.hasOwnProperty(j)&&y[j]!=null)if(j==="style"){var I=y[j];for(l in I)I.hasOwnProperty(l)&&(u||(u={}),u[l]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(uh.hasOwnProperty(j)?w||(w=[]):(w=w||[]).push(j,null));for(j in f){var M=f[j];if(I=y!=null?y[j]:void 0,f.hasOwnProperty(j)&&M!==I&&(M!=null||I!=null))if(j==="style")if(I){for(l in I)!I.hasOwnProperty(l)||M&&M.hasOwnProperty(l)||(u||(u={}),u[l]="");for(l in M)M.hasOwnProperty(l)&&I[l]!==M[l]&&(u||(u={}),u[l]=M[l])}else u||(w||(w=[]),w.push(j,u)),u=M;else j==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,I=I?I.__html:void 0,M!=null&&I!==M&&(w=w||[]).push(j,M)):j==="children"?typeof M!="string"&&typeof M!="number"||(w=w||[]).push(j,""+M):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(uh.hasOwnProperty(j)?(M!=null&&j==="onScroll"&&Sn("scroll",r),w||I===M||(w=[])):typeof M=="object"&&M!==null&&M.$$typeof===Ey?M.toString():(w=w||[]).push(j,M))}u&&(w=w||[]).push("style",u);var j=w;(n.updateQueue=j)&&(n.flags|=4)}};hb=function(r,n,u,f){u!==f&&(n.flags|=4)};function $h(r,n){if(!Ps)switch(r.tailMode){case"hidden":n=r.tail;for(var u=null;n!==null;)n.alternate!==null&&(u=n),n=n.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?n||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function CT(r,n,u){var f=n.pendingProps;switch(n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Zo(n.type)&&Md(),null;case 3:return ip(),En(qo),En(uo),Dv(),f=n.stateNode,f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Zd(n)?n.flags|=4:f.hydrate||(n.flags|=256)),Gv(n),null;case 5:Mv(n);var y=Ml(Nh.current);if(u=n.type,r!==null&&n.stateNode!=null)pb(r,n,u,f,y),r.ref!==n.ref&&(n.flags|=128);else{if(!f){if(n.stateNode===null)throw Error(ct(166));return null}if(r=Ml(Ts.current),Zd(n)){f=n.stateNode,u=n.type;var w=n.memoizedProps;switch(f[zu]=n,f[kd]=w,u){case"dialog":Sn("cancel",f),Sn("close",f);break;case"iframe":case"object":case"embed":Sn("load",f);break;case"video":case"audio":for(r=0;r<zh.length;r++)Sn(zh[r],f);break;case"source":Sn("error",f);break;case"img":case"image":case"link":Sn("error",f),Sn("load",f);break;case"details":Sn("toggle",f);break;case"input":rx(f,w),Sn("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},Sn("invalid",f);break;case"textarea":ox(f,w),Sn("invalid",f)}Ry(u,w),r=null;for(var l in w)w.hasOwnProperty(l)&&(y=w[l],l==="children"?typeof y=="string"?f.textContent!==y&&(r=["children",y]):typeof y=="number"&&f.textContent!==""+y&&(r=["children",""+y]):uh.hasOwnProperty(l)&&y!=null&&l==="onScroll"&&Sn("scroll",f));switch(u){case"input":cd(f),ix(f,w,!0);break;case"textarea":cd(f),sx(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=Cd)}f=r,n.updateQueue=f,f!==null&&(n.flags|=4)}else{switch(l=y.nodeType===9?y:y.ownerDocument,r===Dy.html&&(r=ux(u)),r===Dy.html?u==="script"?(r=l.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=l.createElement(u,{is:f.is}):(r=l.createElement(u),u==="select"&&(l=r,f.multiple?l.multiple=!0:f.size&&(l.size=f.size))):r=l.createElementNS(r,u),r[zu]=n,r[kd]=f,cb(r,n,!1,!1),n.stateNode=r,l=Fy(u,f),u){case"dialog":Sn("cancel",r),Sn("close",r),y=f;break;case"iframe":case"object":case"embed":Sn("load",r),y=f;break;case"video":case"audio":for(y=0;y<zh.length;y++)Sn(zh[y],r);y=f;break;case"source":Sn("error",r),y=f;break;case"img":case"image":case"link":Sn("error",r),Sn("load",r),y=f;break;case"details":Sn("toggle",r),y=f;break;case"input":rx(r,f),y=ky(r,f),Sn("invalid",r);break;case"option":y=zy(r,f);break;case"select":r._wrapperState={wasMultiple:!!f.multiple},y=In({},f,{value:void 0}),Sn("invalid",r);break;case"textarea":ox(r,f),y=Ly(r,f),Sn("invalid",r);break;default:y=f}Ry(u,y);var I=y;for(w in I)if(I.hasOwnProperty(w)){var M=I[w];w==="style"?px(r,M):w==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&lx(r,M)):w==="children"?typeof M=="string"?(u!=="textarea"||M!=="")&&dh(r,M):typeof M=="number"&&dh(r,""+M):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(uh.hasOwnProperty(w)?M!=null&&w==="onScroll"&&Sn("scroll",r):M!=null&&gy(r,w,M,l))}switch(u){case"input":cd(r),ix(r,f,!1);break;case"textarea":cd(r),sx(r);break;case"option":f.value!=null&&r.setAttribute("value",""+Pu(f.value));break;case"select":r.multiple=!!f.multiple,w=f.value,w!=null?Nc(r,!!f.multiple,w,!1):f.defaultValue!=null&&Nc(r,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(r.onclick=Cd)}h1(u,f)&&(n.flags|=4)}n.ref!==null&&(n.flags|=128)}return null;case 6:if(r&&n.stateNode!=null)hb(r,n,r.memoizedProps,f);else{if(typeof f!="string"&&n.stateNode===null)throw Error(ct(166));u=Ml(Nh.current),Ml(Ts.current),Zd(n)?(f=n.stateNode,u=n.memoizedProps,f[zu]=n,f.nodeValue!==u&&(n.flags|=4)):(f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[zu]=n,n.stateNode=f)}return null;case 13:return En($n),f=n.memoizedState,(n.flags&64)!=0?(n.lanes=u,n):(f=f!==null,u=!1,r===null?n.memoizedProps.fallback!==void 0&&Zd(n):u=r.memoizedState!==null,f&&!u&&(n.mode&2)!=0&&(r===null&&n.memoizedProps.unstable_avoidThisFallback!==!0||($n.current&1)!=0?Ni===0&&(Ni=3):((Ni===0||Ni===3)&&(Ni=4),Po===null||(Hh&134217727)==0&&(sp&134217727)==0||lp(Po,po))),(f||u)&&(n.flags|=4),null);case 4:return ip(),Gv(n),r===null&&s1(n.stateNode.containerInfo),null;case 10:return Cv(n),null;case 17:return Zo(n.type)&&Md(),null;case 19:if(En($n),f=n.memoizedState,f===null)return null;if(w=(n.flags&64)!=0,l=f.rendering,l===null)if(w)$h(f,!1);else{if(Ni!==0||r!==null&&(r.flags&64)!=0)for(r=n.child;r!==null;){if(l=qd(r),l!==null){for(n.flags|=64,$h(f,!1),w=l.updateQueue,w!==null&&(n.updateQueue=w,n.flags|=4),f.lastEffect===null&&(n.firstEffect=null),n.lastEffect=f.lastEffect,f=u,u=n.child;u!==null;)w=u,r=f,w.flags&=2,w.nextEffect=null,w.firstEffect=null,w.lastEffect=null,l=w.alternate,l===null?(w.childLanes=0,w.lanes=r,w.child=null,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=l.childLanes,w.lanes=l.lanes,w.child=l.child,w.memoizedProps=l.memoizedProps,w.memoizedState=l.memoizedState,w.updateQueue=l.updateQueue,w.type=l.type,r=l.dependencies,w.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),u=u.sibling;return Wn($n,$n.current&1|2),n.child}r=r.sibling}f.tail!==null&&lo()>rg&&(n.flags|=64,w=!0,$h(f,!1),n.lanes=33554432)}else{if(!w)if(r=qd(l),r!==null){if(n.flags|=64,w=!0,u=r.updateQueue,u!==null&&(n.updateQueue=u,n.flags|=4),$h(f,!0),f.tail===null&&f.tailMode==="hidden"&&!l.alternate&&!Ps)return n=n.lastEffect=f.lastEffect,n!==null&&(n.nextEffect=null),null}else 2*lo()-f.renderingStartTime>rg&&u!==1073741824&&(n.flags|=64,w=!0,$h(f,!1),n.lanes=33554432);f.isBackwards?(l.sibling=n.child,n.child=l):(u=f.last,u!==null?u.sibling=l:n.child=l,f.last=l)}return f.tail!==null?(u=f.tail,f.rendering=u,f.tail=u.sibling,f.lastEffect=n.lastEffect,f.renderingStartTime=lo(),u.sibling=null,n=$n.current,Wn($n,w?n&1|2:n&1),u):null;case 23:case 24:return ug(),r!==null&&r.memoizedState!==null!=(n.memoizedState!==null)&&f.mode!=="unstable-defer-without-hiding"&&(n.flags|=4),null}throw Error(ct(156,n.tag))}function IT(r){switch(r.tag){case 1:Zo(r.type)&&Md();var n=r.flags;return n&4096?(r.flags=n&-4097|64,r):null;case 3:if(ip(),En(qo),En(uo),Dv(),n=r.flags,(n&64)!=0)throw Error(ct(285));return r.flags=n&-4097|64,r;case 5:return Mv(r),null;case 13:return En($n),n=r.flags,n&4096?(r.flags=n&-4097|64,r):null;case 19:return En($n),null;case 4:return ip(),null;case 10:return Cv(r),null;case 23:case 24:return ug(),null;default:return null}}function Wv(r,n){try{var u="",f=n;do u+=uE(f),f=f.return;while(f);var y=u}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:r,source:n,stack:y}}function $v(r,n){try{console.error(n.value)}catch(u){setTimeout(function(){throw u})}}var kT=typeof WeakMap=="function"?WeakMap:Map;function fb(r,n,u){u=Ru(-1,u),u.tag=3,u.payload={element:null};var f=n.value;return u.callback=function(){Qd||(Qd=!0,ng=f),$v(r,n)},u}function db(r,n,u){u=Ru(-1,u),u.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var y=n.value;u.payload=function(){return $v(r,n),f(y)}}var w=r.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){typeof f!="function"&&(Is===null?Is=new Set([this]):Is.add(this),$v(r,n));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),u}var AT=typeof WeakSet=="function"?WeakSet:Set;function mb(r){var n=r.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(u){qu(r,u)}else n.current=null}function MT(r,n){switch(n.tag){case 0:case 11:case 15:case 22:return;case 1:if(n.flags&256&&r!==null){var u=r.memoizedProps,f=r.memoizedState;r=n.stateNode,n=r.getSnapshotBeforeUpdate(n.elementType===n.type?u:Qa(n.type,u),f),r.__reactInternalSnapshotBeforeUpdate=n}return;case 3:n.flags&256&&vv(n.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(ct(163))}function zT(r,n,u){switch(u.tag){case 0:case 11:case 15:case 22:if(n=u.updateQueue,n=n!==null?n.lastEffect:null,n!==null){r=n=n.next;do{if((r.tag&3)==3){var f=r.create;r.destroy=f()}r=r.next}while(r!==n)}if(n=u.updateQueue,n=n!==null?n.lastEffect:null,n!==null){r=n=n.next;do{var y=r;f=y.next,y=y.tag,(y&4)!=0&&(y&1)!=0&&(Ab(u,r),NT(u,r)),r=f}while(r!==n)}return;case 1:r=u.stateNode,u.flags&4&&(n===null?r.componentDidMount():(f=u.elementType===u.type?n.memoizedProps:Qa(u.type,n.memoizedProps),r.componentDidUpdate(f,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate))),n=u.updateQueue,n!==null&&M1(u,n,r);return;case 3:if(n=u.updateQueue,n!==null){if(r=null,u.child!==null)switch(u.child.tag){case 5:r=u.child.stateNode;break;case 1:r=u.child.stateNode}M1(u,n,r)}return;case 5:r=u.stateNode,n===null&&u.flags&4&&h1(u.type,u.memoizedProps)&&r.focus();return;case 6:return;case 4:return;case 12:return;case 13:u.memoizedState===null&&(u=u.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&Cx(u))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(ct(163))}function yb(r,n){for(var u=r;;){if(u.tag===5){var f=u.stateNode;if(n)f=f.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{f=u.stateNode;var y=u.memoizedProps.style;y=y!=null&&y.hasOwnProperty("display")?y.display:null,f.style.display=cx("display",y)}}else if(u.tag===6)u.stateNode.nodeValue=n?"":u.memoizedProps;else if((u.tag!==23&&u.tag!==24||u.memoizedState===null||u===r)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break;for(;u.sibling===null;){if(u.return===null||u.return===r)return;u=u.return}u.sibling.return=u.return,u=u.sibling}}function vb(r,n){if(kl&&typeof kl.onCommitFiberUnmount=="function")try{kl.onCommitFiberUnmount(xv,n)}catch{}switch(n.tag){case 0:case 11:case 14:case 15:case 22:if(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null)){var u=r=r.next;do{var f=u,y=f.destroy;if(f=f.tag,y!==void 0)if((f&4)!=0)Ab(n,u);else{f=n;try{y()}catch(w){qu(f,w)}}u=u.next}while(u!==r)}break;case 1:if(mb(n),r=n.stateNode,typeof r.componentWillUnmount=="function")try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(w){qu(n,w)}break;case 5:mb(n);break;case 4:bb(r,n)}}function gb(r){r.alternate=null,r.child=null,r.dependencies=null,r.firstEffect=null,r.lastEffect=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.return=null,r.updateQueue=null}function _b(r){return r.tag===5||r.tag===3||r.tag===4}function xb(r){e:{for(var n=r.return;n!==null;){if(_b(n))break e;n=n.return}throw Error(ct(160))}var u=n;switch(n=u.stateNode,u.tag){case 5:var f=!1;break;case 3:n=n.containerInfo,f=!0;break;case 4:n=n.containerInfo,f=!0;break;default:throw Error(ct(161))}u.flags&16&&(dh(n,""),u.flags&=-17);e:t:for(u=r;;){for(;u.sibling===null;){if(u.return===null||_b(u.return)){u=null;break e}u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue t;u.child.return=u,u=u.child}if(!(u.flags&2)){u=u.stateNode;break e}}f?Hv(r,u,n):Xv(r,u,n)}function Hv(r,n,u){var f=r.tag,y=f===5||f===6;if(y)r=y?r.stateNode:r.stateNode.instance,n?u.nodeType===8?u.parentNode.insertBefore(r,n):u.insertBefore(r,n):(u.nodeType===8?(n=u.parentNode,n.insertBefore(r,u)):(n=u,n.appendChild(r)),u=u._reactRootContainer,u!=null||n.onclick!==null||(n.onclick=Cd));else if(f!==4&&(r=r.child,r!==null))for(Hv(r,n,u),r=r.sibling;r!==null;)Hv(r,n,u),r=r.sibling}function Xv(r,n,u){var f=r.tag,y=f===5||f===6;if(y)r=y?r.stateNode:r.stateNode.instance,n?u.insertBefore(r,n):u.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(Xv(r,n,u),r=r.sibling;r!==null;)Xv(r,n,u),r=r.sibling}function bb(r,n){for(var u=n,f=!1,y,w;;){if(!f){f=u.return;e:for(;;){if(f===null)throw Error(ct(160));switch(y=f.stateNode,f.tag){case 5:w=!1;break e;case 3:y=y.containerInfo,w=!0;break e;case 4:y=y.containerInfo,w=!0;break e}f=f.return}f=!0}if(u.tag===5||u.tag===6){e:for(var l=r,I=u,M=I;;)if(vb(l,M),M.child!==null&&M.tag!==4)M.child.return=M,M=M.child;else{if(M===I)break e;for(;M.sibling===null;){if(M.return===null||M.return===I)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}w?(l=y,I=u.stateNode,l.nodeType===8?l.parentNode.removeChild(I):l.removeChild(I)):y.removeChild(u.stateNode)}else if(u.tag===4){if(u.child!==null){y=u.stateNode.containerInfo,w=!0,u.child.return=u,u=u.child;continue}}else if(vb(r,u),u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break;for(;u.sibling===null;){if(u.return===null||u.return===n)return;u=u.return,u.tag===4&&(f=!1)}u.sibling.return=u.return,u=u.sibling}}function Kv(r,n){switch(n.tag){case 0:case 11:case 14:case 15:case 22:var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do(f.tag&3)==3&&(r=f.destroy,f.destroy=void 0,r!==void 0&&r()),f=f.next;while(f!==u)}return;case 1:return;case 5:if(u=n.stateNode,u!=null){f=n.memoizedProps;var y=r!==null?r.memoizedProps:f;r=n.type;var w=n.updateQueue;if(n.updateQueue=null,w!==null){for(u[kd]=f,r==="input"&&f.type==="radio"&&f.name!=null&&nx(u,f),Fy(r,y),n=Fy(r,f),y=0;y<w.length;y+=2){var l=w[y],I=w[y+1];l==="style"?px(u,I):l==="dangerouslySetInnerHTML"?lx(u,I):l==="children"?dh(u,I):gy(u,l,I,n)}switch(r){case"input":Ay(u,f);break;case"textarea":ax(u,f);break;case"select":r=u._wrapperState.wasMultiple,u._wrapperState.wasMultiple=!!f.multiple,w=f.value,w!=null?Nc(u,!!f.multiple,w,!1):r!==!!f.multiple&&(f.defaultValue!=null?Nc(u,!!f.multiple,f.defaultValue,!0):Nc(u,!!f.multiple,f.multiple?[]:"",!1))}}}return;case 6:if(n.stateNode===null)throw Error(ct(162));n.stateNode.nodeValue=n.memoizedProps;return;case 3:u=n.stateNode,u.hydrate&&(u.hydrate=!1,Cx(u.containerInfo));return;case 12:return;case 13:n.memoizedState!==null&&(tg=lo(),yb(n.child,!0)),wb(n);return;case 19:wb(n);return;case 17:return;case 23:case 24:yb(n,n.memoizedState!==null);return}throw Error(ct(163))}function wb(r){var n=r.updateQueue;if(n!==null){r.updateQueue=null;var u=r.stateNode;u===null&&(u=r.stateNode=new AT),n.forEach(function(f){var y=qT.bind(null,r,f);u.has(f)||(u.add(f),f.then(y,y))})}}function LT(r,n){return r!==null&&(r=r.memoizedState,r===null||r.dehydrated!==null)?(n=n.memoizedState,n!==null&&n.dehydrated===null):!1}var DT=Math.ceil,Jd=Sl.ReactCurrentDispatcher,Jv=Sl.ReactCurrentOwner,ir=0,Po=null,di=null,po=0,Dl=0,Yv=Lu(0),Ni=0,Yd=null,ap=0,Hh=0,sp=0,Qv=0,eg=null,tg=0,rg=1/0;function up(){rg=lo()+500}var Lt=null,Qd=!1,ng=null,Is=null,Uu=!1,Xh=null,Kh=90,ig=[],og=[],au=null,Jh=0,ag=null,em=-1,su=0,tm=0,Yh=null,rm=!1;function ua(){return(ir&48)!=0?lo():em!==-1?em:em=lo()}function Nu(r){if(r=r.mode,(r&2)==0)return 1;if((r&4)==0)return tp()===99?1:2;if(su===0&&(su=ap),bT.transition!==0){tm!==0&&(tm=eg!==null?eg.pendingLanes:0),r=su;var n=4186112&~tm;return n&=-n,n===0&&(r=4186112&~r,n=r&-r,n===0&&(n=8192)),n}return r=tp(),(ir&4)!=0&&r===98?r=gd(12,su):(r=EE(r),r=gd(r,su)),r}function ju(r,n,u){if(50<Jh)throw Jh=0,ag=null,Error(ct(185));if(r=nm(r,n),r===null)return null;_d(r,n,u),r===Po&&(sp|=n,Ni===4&&lp(r,po));var f=tp();n===1?(ir&8)!=0&&(ir&48)==0?sg(r):(Aa(r,u),ir===0&&(up(),Es())):((ir&4)==0||f!==98&&f!==99||(au===null?au=new Set([r]):au.add(r)),Aa(r,u)),eg=r}function nm(r,n){r.lanes|=n;var u=r.alternate;for(u!==null&&(u.lanes|=n),u=r,r=r.return;r!==null;)r.childLanes|=n,u=r.alternate,u!==null&&(u.childLanes|=n),u=r,r=r.return;return u.tag===3?u.stateNode:null}function Aa(r,n){for(var u=r.callbackNode,f=r.suspendedLanes,y=r.pingedLanes,w=r.expirationTimes,l=r.pendingLanes;0<l;){var I=31-Au(l),M=1<<I,j=w[I];if(j===-1){if((M&f)==0||(M&y)!=0){j=n,Zc(M);var ee=vn;w[I]=10<=ee?j+250:6<=ee?j+5e3:-1}}else j<=n&&(r.expiredLanes|=M);l&=~M}if(f=Eh(r,r===Po?po:0),n=vn,f===0)u!==null&&(u!==Ev&&wv(u),r.callbackNode=null,r.callbackPriority=0);else{if(u!==null){if(r.callbackPriority===n)return;u!==Ev&&wv(u)}n===15?(u=sg.bind(null,r),nu===null?(nu=[u],Dd=bv(Ld,C1)):nu.push(u),u=Ev):n===14?u=Oh(99,sg.bind(null,r)):(u=TE(n),u=Oh(u,Sb.bind(null,r))),r.callbackPriority=n,r.callbackNode=u}}function Sb(r){if(em=-1,tm=su=0,(ir&48)!=0)throw Error(ct(327));var n=r.callbackNode;if(Vu()&&r.callbackNode!==n)return null;var u=Eh(r,r===Po?po:0);if(u===0)return null;var f=u,y=ir;ir|=16;var w=Cb();(Po!==r||po!==f)&&(up(),cp(r,f));do try{FT();break}catch(I){Pb(r,I)}while(1);if(Pv(),Jd.current=w,ir=y,di!==null?f=0:(Po=null,po=0,f=Ni),(ap&sp)!=0)cp(r,0);else if(f!==0){if(f===2&&(ir|=64,r.hydrate&&(r.hydrate=!1,vv(r.containerInfo)),u=Dx(r),u!==0&&(f=Qh(r,u))),f===1)throw n=Yd,cp(r,0),lp(r,u),Aa(r,lo()),n;switch(r.finishedWork=r.current.alternate,r.finishedLanes=u,f){case 0:case 1:throw Error(ct(345));case 2:Ol(r);break;case 3:if(lp(r,u),(u&62914560)===u&&(f=tg+500-lo(),10<f)){if(Eh(r,0)!==0)break;if(y=r.suspendedLanes,(y&u)!==u){ua(),r.pingedLanes|=r.suspendedLanes&y;break}r.timeoutHandle=f1(Ol.bind(null,r),f);break}Ol(r);break;case 4:if(lp(r,u),(u&4186112)===u)break;for(f=r.eventTimes,y=-1;0<u;){var l=31-Au(u);w=1<<l,l=f[l],l>y&&(y=l),u&=~w}if(u=y,u=lo()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*DT(u/1960))-u,10<u){r.timeoutHandle=f1(Ol.bind(null,r),u);break}Ol(r);break;case 5:Ol(r);break;default:throw Error(ct(329))}}return Aa(r,lo()),r.callbackNode===n?Sb.bind(null,r):null}function lp(r,n){for(n&=~Qv,n&=~sp,r.suspendedLanes|=n,r.pingedLanes&=~n,r=r.expirationTimes;0<n;){var u=31-Au(n),f=1<<u;r[u]=-1,n&=~f}}function sg(r){if((ir&48)!=0)throw Error(ct(327));if(Vu(),r===Po&&(r.expiredLanes&po)!=0){var n=po,u=Qh(r,n);(ap&sp)!=0&&(n=Eh(r,n),u=Qh(r,n))}else n=Eh(r,0),u=Qh(r,n);if(r.tag!==0&&u===2&&(ir|=64,r.hydrate&&(r.hydrate=!1,vv(r.containerInfo)),n=Dx(r),n!==0&&(u=Qh(r,n))),u===1)throw u=Yd,cp(r,0),lp(r,n),Aa(r,lo()),u;return r.finishedWork=r.current.alternate,r.finishedLanes=n,Ol(r),Aa(r,lo()),null}function OT(){if(au!==null){var r=au;au=null,r.forEach(function(n){n.expiredLanes|=24&n.pendingLanes,Aa(n,lo())})}Es()}function Eb(r,n){var u=ir;ir|=1;try{return r(n)}finally{ir=u,ir===0&&(up(),Es())}}function Tb(r,n){var u=ir;ir&=-2,ir|=8;try{return r(n)}finally{ir=u,ir===0&&(up(),Es())}}function im(r,n){Wn(Yv,Dl),Dl|=n,ap|=n}function ug(){Dl=Yv.current,En(Yv)}function cp(r,n){r.finishedWork=null,r.finishedLanes=0;var u=r.timeoutHandle;if(u!==-1&&(r.timeoutHandle=-1,mT(u)),di!==null)for(u=di.return;u!==null;){var f=u;switch(f.tag){case 1:f=f.type.childContextTypes,f!=null&&Md();break;case 3:ip(),En(qo),En(uo),Dv();break;case 5:Mv(f);break;case 4:ip();break;case 13:En($n);break;case 19:En($n);break;case 10:Cv(f);break;case 23:case 24:ug()}u=u.return}Po=r,di=Zu(r.current,null),po=Dl=ap=n,Ni=0,Yd=null,Qv=sp=Hh=0}function Pb(r,n){do{var u=di;try{if(Pv(),jh.current=Xd,Gd){for(var f=ni.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}Gd=!1}if(Vh=0,Ui=co=ni=null,qh=!1,Jv.current=null,u===null||u.return===null){Ni=1,Yd=n,di=null;break}e:{var w=r,l=u.return,I=u,M=n;if(n=po,I.flags|=2048,I.firstEffect=I.lastEffect=null,M!==null&&typeof M=="object"&&typeof M.then=="function"){var j=M;if((I.mode&2)==0){var ee=I.alternate;ee?(I.updateQueue=ee.updateQueue,I.memoizedState=ee.memoizedState,I.lanes=ee.lanes):(I.updateQueue=null,I.memoizedState=null)}var Ce=($n.current&1)!=0,W=l;do{var xe;if(xe=W.tag===13){var Le=W.memoizedState;if(Le!==null)xe=Le.dehydrated!==null;else{var De=W.memoizedProps;xe=De.fallback===void 0?!1:De.unstable_avoidThisFallback!==!0?!0:!Ce}}if(xe){var se=W.updateQueue;if(se===null){var re=new Set;re.add(j),W.updateQueue=re}else se.add(j);if((W.mode&2)==0){if(W.flags|=64,I.flags|=16384,I.flags&=-2981,I.tag===1)if(I.alternate===null)I.tag=17;else{var oe=Ru(-1,1);oe.tag=2,Fu(I,oe)}I.lanes|=1;break e}M=void 0,I=n;var be=w.pingCache;if(be===null?(be=w.pingCache=new kT,M=new Set,be.set(j,M)):(M=be.get(j),M===void 0&&(M=new Set,be.set(j,M))),!M.has(I)){M.add(I);var Re=VT.bind(null,w,j,I);j.then(Re,Re)}W.flags|=4096,W.lanes=n;break e}W=W.return}while(W!==null);M=Error((Uc(I.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ni!==5&&(Ni=2),M=Wv(M,I),W=l;do{switch(W.tag){case 3:w=M,W.flags|=4096,n&=-n,W.lanes|=n;var Me=fb(W,w,n);A1(W,Me);break e;case 1:w=M;var Ie=W.type,je=W.stateNode;if((W.flags&64)==0&&(typeof Ie.getDerivedStateFromError=="function"||je!==null&&typeof je.componentDidCatch=="function"&&(Is===null||!Is.has(je)))){W.flags|=4096,n&=-n,W.lanes|=n;var at=db(W,w,n);A1(W,at);break e}}W=W.return}while(W!==null)}kb(u)}catch(Xe){n=Xe,di===u&&u!==null&&(di=u=u.return);continue}break}while(1)}function Cb(){var r=Jd.current;return Jd.current=Xd,r===null?Xd:r}function Qh(r,n){var u=ir;ir|=16;var f=Cb();Po===r&&po===n||cp(r,n);do try{RT();break}catch(y){Pb(r,y)}while(1);if(Pv(),ir=u,Jd.current=f,di!==null)throw Error(ct(261));return Po=null,po=0,Ni}function RT(){for(;di!==null;)Ib(di)}function FT(){for(;di!==null&&!gT();)Ib(di)}function Ib(r){var n=zb(r.alternate,r,Dl);r.memoizedProps=r.pendingProps,n===null?kb(r):di=n,Jv.current=null}function kb(r){var n=r;do{var u=n.alternate;if(r=n.return,(n.flags&2048)==0){if(u=CT(u,n,Dl),u!==null){di=u;return}if(u=n,u.tag!==24&&u.tag!==23||u.memoizedState===null||(Dl&1073741824)!=0||(u.mode&4)==0){for(var f=0,y=u.child;y!==null;)f|=y.lanes|y.childLanes,y=y.sibling;u.childLanes=f}r!==null&&(r.flags&2048)==0&&(r.firstEffect===null&&(r.firstEffect=n.firstEffect),n.lastEffect!==null&&(r.lastEffect!==null&&(r.lastEffect.nextEffect=n.firstEffect),r.lastEffect=n.lastEffect),1<n.flags&&(r.lastEffect!==null?r.lastEffect.nextEffect=n:r.firstEffect=n,r.lastEffect=n))}else{if(u=IT(n),u!==null){u.flags&=2047,di=u;return}r!==null&&(r.firstEffect=r.lastEffect=null,r.flags|=2048)}if(n=n.sibling,n!==null){di=n;return}di=n=r}while(n!==null);Ni===0&&(Ni=5)}function Ol(r){var n=tp();return Al(99,BT.bind(null,r,n)),null}function BT(r,n){do Vu();while(Xh!==null);if((ir&48)!=0)throw Error(ct(327));var u=r.finishedWork;if(u===null)return null;if(r.finishedWork=null,r.finishedLanes=0,u===r.current)throw Error(ct(177));r.callbackNode=null;var f=u.lanes|u.childLanes,y=f,w=r.pendingLanes&~y;r.pendingLanes=y,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=y,r.mutableReadLanes&=y,r.entangledLanes&=y,y=r.entanglements;for(var l=r.eventTimes,I=r.expirationTimes;0<w;){var M=31-Au(w),j=1<<M;y[M]=0,l[M]=-1,I[M]=-1,w&=~j}if(au!==null&&(f&24)==0&&au.has(r)&&au.delete(r),r===Po&&(di=Po=null,po=0),1<u.flags?u.lastEffect!==null?(u.lastEffect.nextEffect=u,f=u.firstEffect):f=u:f=u.firstEffect,f!==null){if(y=ir,ir|=32,Jv.current=null,dv=xd,l=e1(),cv(l)){if("selectionStart"in l)I={start:l.selectionStart,end:l.selectionEnd};else e:if(I=(I=l.ownerDocument)&&I.defaultView||window,(j=I.getSelection&&I.getSelection())&&j.rangeCount!==0){I=j.anchorNode,w=j.anchorOffset,M=j.focusNode,j=j.focusOffset;try{I.nodeType,M.nodeType}catch{I=null;break e}var ee=0,Ce=-1,W=-1,xe=0,Le=0,De=l,se=null;t:for(;;){for(var re;De!==I||w!==0&&De.nodeType!==3||(Ce=ee+w),De!==M||j!==0&&De.nodeType!==3||(W=ee+j),De.nodeType===3&&(ee+=De.nodeValue.length),(re=De.firstChild)!==null;)se=De,De=re;for(;;){if(De===l)break t;if(se===I&&++xe===w&&(Ce=ee),se===M&&++Le===j&&(W=ee),(re=De.nextSibling)!==null)break;De=se,se=De.parentNode}De=re}I=Ce===-1||W===-1?null:{start:Ce,end:W}}else I=null;I=I||{start:0,end:0}}else I=null;mv={focusedElem:l,selectionRange:I},xd=!1,Yh=null,rm=!1,Lt=f;do try{UT()}catch(Xe){if(Lt===null)throw Error(ct(330));qu(Lt,Xe),Lt=Lt.nextEffect}while(Lt!==null);Yh=null,Lt=f;do try{for(l=r;Lt!==null;){var oe=Lt.flags;if(oe&16&&dh(Lt.stateNode,""),oe&128){var be=Lt.alternate;if(be!==null){var Re=be.ref;Re!==null&&(typeof Re=="function"?Re(null):Re.current=null)}}switch(oe&1038){case 2:xb(Lt),Lt.flags&=-3;break;case 6:xb(Lt),Lt.flags&=-3,Kv(Lt.alternate,Lt);break;case 1024:Lt.flags&=-1025;break;case 1028:Lt.flags&=-1025,Kv(Lt.alternate,Lt);break;case 4:Kv(Lt.alternate,Lt);break;case 8:I=Lt,bb(l,I);var Me=I.alternate;gb(I),Me!==null&&gb(Me)}Lt=Lt.nextEffect}}catch(Xe){if(Lt===null)throw Error(ct(330));qu(Lt,Xe),Lt=Lt.nextEffect}while(Lt!==null);if(Re=mv,be=e1(),oe=Re.focusedElem,l=Re.selectionRange,be!==oe&&oe&&oe.ownerDocument&&Qx(oe.ownerDocument.documentElement,oe)){for(l!==null&&cv(oe)&&(be=l.start,Re=l.end,Re===void 0&&(Re=be),"selectionStart"in oe?(oe.selectionStart=be,oe.selectionEnd=Math.min(Re,oe.value.length)):(Re=(be=oe.ownerDocument||document)&&be.defaultView||window,Re.getSelection&&(Re=Re.getSelection(),I=oe.textContent.length,Me=Math.min(l.start,I),l=l.end===void 0?Me:Math.min(l.end,I),!Re.extend&&Me>l&&(I=l,l=Me,Me=I),I=Yx(oe,Me),w=Yx(oe,l),I&&w&&(Re.rangeCount!==1||Re.anchorNode!==I.node||Re.anchorOffset!==I.offset||Re.focusNode!==w.node||Re.focusOffset!==w.offset)&&(be=be.createRange(),be.setStart(I.node,I.offset),Re.removeAllRanges(),Me>l?(Re.addRange(be),Re.extend(w.node,w.offset)):(be.setEnd(w.node,w.offset),Re.addRange(be)))))),be=[],Re=oe;Re=Re.parentNode;)Re.nodeType===1&&be.push({element:Re,left:Re.scrollLeft,top:Re.scrollTop});for(typeof oe.focus=="function"&&oe.focus(),oe=0;oe<be.length;oe++)Re=be[oe],Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}xd=!!dv,mv=dv=null,r.current=u,Lt=f;do try{for(oe=r;Lt!==null;){var Ie=Lt.flags;if(Ie&36&&zT(oe,Lt.alternate,Lt),Ie&128){be=void 0;var je=Lt.ref;if(je!==null){var at=Lt.stateNode;switch(Lt.tag){case 5:be=at;break;default:be=at}typeof je=="function"?je(be):je.current=be}}Lt=Lt.nextEffect}}catch(Xe){if(Lt===null)throw Error(ct(330));qu(Lt,Xe),Lt=Lt.nextEffect}while(Lt!==null);Lt=null,xT(),ir=y}else r.current=u;if(Uu)Uu=!1,Xh=r,Kh=n;else for(Lt=f;Lt!==null;)n=Lt.nextEffect,Lt.nextEffect=null,Lt.flags&8&&(Ie=Lt,Ie.sibling=null,Ie.stateNode=null),Lt=n;if(f=r.pendingLanes,f===0&&(Is=null),f===1?r===ag?Jh++:(Jh=0,ag=r):Jh=0,u=u.stateNode,kl&&typeof kl.onCommitFiberRoot=="function")try{kl.onCommitFiberRoot(xv,u,void 0,(u.current.flags&64)==64)}catch{}if(Aa(r,lo()),Qd)throw Qd=!1,r=ng,ng=null,r;return(ir&8)!=0||Es(),null}function UT(){for(;Lt!==null;){var r=Lt.alternate;rm||Yh===null||((Lt.flags&8)!=0?xx(Lt,Yh)&&(rm=!0):Lt.tag===13&&LT(r,Lt)&&xx(Lt,Yh)&&(rm=!0));var n=Lt.flags;(n&256)!=0&&MT(r,Lt),(n&512)==0||Uu||(Uu=!0,Oh(97,function(){return Vu(),null})),Lt=Lt.nextEffect}}function Vu(){if(Kh!==90){var r=97<Kh?97:Kh;return Kh=90,Al(r,jT)}return!1}function NT(r,n){ig.push(n,r),Uu||(Uu=!0,Oh(97,function(){return Vu(),null}))}function Ab(r,n){og.push(n,r),Uu||(Uu=!0,Oh(97,function(){return Vu(),null}))}function jT(){if(Xh===null)return!1;var r=Xh;if(Xh=null,(ir&48)!=0)throw Error(ct(331));var n=ir;ir|=32;var u=og;og=[];for(var f=0;f<u.length;f+=2){var y=u[f],w=u[f+1],l=y.destroy;if(y.destroy=void 0,typeof l=="function")try{l()}catch(M){if(w===null)throw Error(ct(330));qu(w,M)}}for(u=ig,ig=[],f=0;f<u.length;f+=2){y=u[f],w=u[f+1];try{var I=y.create;y.destroy=I()}catch(M){if(w===null)throw Error(ct(330));qu(w,M)}}for(I=r.current.firstEffect;I!==null;)r=I.nextEffect,I.nextEffect=null,I.flags&8&&(I.sibling=null,I.stateNode=null),I=r;return ir=n,Es(),!0}function Mb(r,n,u){n=Wv(u,n),n=fb(r,n,1),Fu(r,n),n=ua(),r=nm(r,1),r!==null&&(_d(r,1,n),Aa(r,n))}function qu(r,n){if(r.tag===3)Mb(r,r,n);else for(var u=r.return;u!==null;){if(u.tag===3){Mb(u,r,n);break}else if(u.tag===1){var f=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Is===null||!Is.has(f))){r=Wv(n,r);var y=db(u,r,1);if(Fu(u,y),y=ua(),u=nm(u,1),u!==null)_d(u,1,y),Aa(u,y);else if(typeof f.componentDidCatch=="function"&&(Is===null||!Is.has(f)))try{f.componentDidCatch(n,r)}catch{}break}}u=u.return}}function VT(r,n,u){var f=r.pingCache;f!==null&&f.delete(n),n=ua(),r.pingedLanes|=r.suspendedLanes&u,Po===r&&(po&u)===u&&(Ni===4||Ni===3&&(po&62914560)===po&&500>lo()-tg?cp(r,0):Qv|=u),Aa(r,n)}function qT(r,n){var u=r.stateNode;u!==null&&u.delete(n),n=0,n===0&&(n=r.mode,(n&2)==0?n=1:(n&4)==0?n=tp()===99?1:2:(su===0&&(su=ap),n=Gc(62914560&~su),n===0&&(n=4194304))),u=ua(),r=nm(r,n),r!==null&&(_d(r,n,u),Aa(r,u))}var zb;zb=function(r,n,u){var f=n.lanes;if(r!==null)if(r.memoizedProps!==n.pendingProps||qo.current)es=!0;else if((u&f)!=0)es=(r.flags&16384)!=0;else{switch(es=!1,n.tag){case 3:nb(n),Lv();break;case 5:B1(n);break;case 1:Zo(n.type)&&zd(n);break;case 4:Av(n,n.stateNode.containerInfo);break;case 10:f=n.memoizedProps.value;var y=n.type._context;Wn(Od,y._currentValue),y._currentValue=f;break;case 13:if(n.memoizedState!==null)return(u&n.child.childLanes)!=0?ib(r,n,u):(Wn($n,$n.current&1),n=ou(r,n,u),n!==null?n.sibling:null);Wn($n,$n.current&1);break;case 19:if(f=(u&n.childLanes)!=0,(r.flags&64)!=0){if(f)return lb(r,n,u);n.flags|=64}if(y=n.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Wn($n,$n.current),f)break;return null;case 23:case 24:return n.lanes=0,jv(r,n,u)}return ou(r,n,u)}else es=!1;switch(n.lanes=0,n.tag){case 2:if(f=n.type,r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2),r=n.pendingProps,y=ep(n,uo.current),np(n,u),y=Rv(null,n,f,r,y,u),n.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0){if(n.tag=1,n.memoizedState=null,n.updateQueue=null,Zo(f)){var w=!0;zd(n)}else w=!1;n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Iv(n);var l=f.getDerivedStateFromProps;typeof l=="function"&&Bd(n,f,l,r),y.updater=Ud,n.stateNode=y,y._reactInternals=n,kv(n,f,r,u),n=qv(null,n,f,!0,w,u)}else n.tag=0,Wo(null,n,y,u),n=n.child;return n;case 16:y=n.elementType;e:{switch(r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2),r=n.pendingProps,w=y._init,y=w(y._payload),n.type=y,w=n.tag=GT(y),r=Qa(y,r),w){case 0:n=Vv(null,n,y,r,u);break e;case 1:n=rb(null,n,y,r,u);break e;case 11:n=Y1(null,n,y,r,u);break e;case 14:n=Q1(null,n,y,Qa(y.type,r),f,u);break e}throw Error(ct(306,y,""))}return n;case 0:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:Qa(f,y),Vv(r,n,f,y,u);case 1:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:Qa(f,y),rb(r,n,f,y,u);case 3:if(nb(n),f=n.updateQueue,r===null||f===null)throw Error(ct(282));if(f=n.pendingProps,y=n.memoizedState,y=y!==null?y.element:null,k1(r,n),Rh(n,f,null,u),f=n.memoizedState.element,f===y)Lv(),n=ou(r,n,u);else{if(y=n.stateNode,(w=y.hydrate)&&(Bu=Kc(n.stateNode.containerInfo.firstChild),iu=n,w=Ps=!0),w){if(r=y.mutableSourceEagerHydrationData,r!=null)for(y=0;y<r.length;y+=2)w=r[y],w._workInProgressVersionPrimary=r[y+1],op.push(w);for(u=F1(n,null,f,u),n.child=u;u;)u.flags=u.flags&-3|1024,u=u.sibling}else Wo(r,n,f,u),Lv();n=n.child}return n;case 5:return B1(n),r===null&&zv(n),f=n.type,y=n.pendingProps,w=r!==null?r.memoizedProps:null,l=y.children,yv(f,y)?l=null:w!==null&&yv(f,w)&&(n.flags|=16),tb(r,n),Wo(r,n,l,u),n.child;case 6:return r===null&&zv(n),null;case 13:return ib(r,n,u);case 4:return Av(n,n.stateNode.containerInfo),f=n.pendingProps,r===null?n.child=Vd(n,null,f,u):Wo(r,n,f,u),n.child;case 11:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:Qa(f,y),Y1(r,n,f,y,u);case 7:return Wo(r,n,n.pendingProps,u),n.child;case 8:return Wo(r,n,n.pendingProps.children,u),n.child;case 12:return Wo(r,n,n.pendingProps.children,u),n.child;case 10:e:{f=n.type._context,y=n.pendingProps,l=n.memoizedProps,w=y.value;var I=n.type._context;if(Wn(Od,I._currentValue),I._currentValue=w,l!==null)if(I=l.value,w=Ca(I,w)?0:(typeof f._calculateChangedBits=="function"?f._calculateChangedBits(I,w):1073741823)|0,w===0){if(l.children===y.children&&!qo.current){n=ou(r,n,u);break e}}else for(I=n.child,I!==null&&(I.return=n);I!==null;){var M=I.dependencies;if(M!==null){l=I.child;for(var j=M.firstContext;j!==null;){if(j.context===f&&(j.observedBits&w)!=0){I.tag===1&&(j=Ru(-1,u&-u),j.tag=2,Fu(I,j)),I.lanes|=u,j=I.alternate,j!==null&&(j.lanes|=u),I1(I.return,u),M.lanes|=u;break}j=j.next}}else l=I.tag===10&&I.type===n.type?null:I.child;if(l!==null)l.return=I;else for(l=I;l!==null;){if(l===n){l=null;break}if(I=l.sibling,I!==null){I.return=l.return,l=I;break}l=l.return}I=l}Wo(r,n,y.children,u),n=n.child}return n;case 9:return y=n.type,w=n.pendingProps,f=w.children,np(n,u),y=Ia(y,w.unstable_observedBits),f=f(y),n.flags|=1,Wo(r,n,f,u),n.child;case 14:return y=n.type,w=Qa(y,n.pendingProps),w=Qa(y.type,w),Q1(r,n,y,w,f,u);case 15:return eb(r,n,n.type,n.pendingProps,f,u);case 17:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:Qa(f,y),r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2),n.tag=1,Zo(f)?(r=!0,zd(n)):r=!1,np(n,u),D1(n,f,y),kv(n,f,y,u),qv(null,n,f,!0,r,u);case 19:return lb(r,n,u);case 23:return jv(r,n,u);case 24:return jv(r,n,u)}throw Error(ct(156,n.tag))};function ZT(r,n,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ma(r,n,u,f){return new ZT(r,n,u,f)}function lg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function GT(r){if(typeof r=="function")return lg(r)?1:0;if(r!=null){if(r=r.$$typeof,r===ad)return 11;if(r===ud)return 14}return 2}function Zu(r,n){var u=r.alternate;return u===null?(u=Ma(r.tag,n,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=n,u.type=r.type,u.flags=0,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null),u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,n=r.dependencies,u.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u}function om(r,n,u,f,y,w){var l=2;if(f=r,typeof r=="function")lg(r)&&(l=1);else if(typeof r=="string")l=5;else e:switch(r){case Tu:return pp(u.children,y,w,n);case Y0:l=8,y|=16;break;case _y:l=8,y|=1;break;case ch:return r=Ma(12,u,n,y|8),r.elementType=ch,r.type=ch,r.lanes=w,r;case ph:return r=Ma(13,u,n,y),r.type=ph,r.elementType=ph,r.lanes=w,r;case sd:return r=Ma(19,u,n,y),r.elementType=sd,r.lanes=w,r;case Ty:return cg(u,y,w,n);case Py:return r=Ma(24,u,n,y),r.elementType=Py,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case xy:l=10;break e;case by:l=9;break e;case ad:l=11;break e;case ud:l=14;break e;case wy:l=16,f=null;break e;case Sy:l=22;break e}throw Error(ct(130,r==null?r:typeof r,""))}return n=Ma(l,u,n,y),n.elementType=r,n.type=f,n.lanes=w,n}function pp(r,n,u,f){return r=Ma(7,r,f,n),r.lanes=u,r}function cg(r,n,u,f){return r=Ma(23,r,f,n),r.elementType=Ty,r.lanes=u,r}function pg(r,n,u){return r=Ma(6,r,null,n),r.lanes=u,r}function hg(r,n,u){return n=Ma(4,r.children!==null?r.children:[],r.key,n),n.lanes=u,n.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},n}function WT(r,n,u){this.tag=n,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=u,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Yy(0),this.expirationTimes=Yy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yy(0),this.mutableSourceEagerHydrationData=null}function $T(r,n,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:El,key:f==null?null:""+f,children:r,containerInfo:n,implementation:u}}function am(r,n,u,f){var y=n.current,w=ua(),l=Nu(y);e:if(u){u=u._reactInternals;t:{if(Pl(u)!==u||u.tag!==1)throw Error(ct(170));var I=u;do{switch(I.tag){case 3:I=I.stateNode.context;break t;case 1:if(Zo(I.type)){I=I.stateNode.__reactInternalMemoizedMergedChildContext;break t}}I=I.return}while(I!==null);throw Error(ct(171))}if(u.tag===1){var M=u.type;if(Zo(M)){u=g1(u,M,I);break e}}u=I}else u=Du;return n.context===null?n.context=u:n.pendingContext=u,n=Ru(w,l),n.payload={element:r},f=f===void 0?null:f,f!==null&&(n.callback=f),Fu(y,n),ju(y,l,w),l}function fg(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Lb(r,n){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<n?u:n}}function dg(r,n){Lb(r,n),(r=r.alternate)&&Lb(r,n)}function HT(){return null}function mg(r,n,u){var f=u!=null&&u.hydrationOptions!=null&&u.hydrationOptions.mutableSources||null;if(u=new WT(r,n,u!=null&&u.hydrate===!0),n=Ma(3,null,null,n===2?7:n===1?3:0),u.current=n,n.stateNode=u,Iv(n),r[Jc]=u.current,s1(r.nodeType===8?r.parentNode:r),f)for(r=0;r<f.length;r++){n=f[r];var y=n._getVersion;y=y(n._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[n,y]:u.mutableSourceEagerHydrationData.push(n,y)}this._internalRoot=u}mg.prototype.render=function(r){am(r,this._internalRoot,null,null)};mg.prototype.unmount=function(){var r=this._internalRoot,n=r.containerInfo;am(null,r,null,function(){n[Jc]=null})};function ef(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function XT(r,n){if(n||(n=r?r.nodeType===9?r.documentElement:r.firstChild:null,n=!(!n||n.nodeType!==1||!n.hasAttribute("data-reactroot"))),!n)for(var u;u=r.lastChild;)r.removeChild(u);return new mg(r,0,n?{hydrate:!0}:void 0)}function sm(r,n,u,f,y){var w=u._reactRootContainer;if(w){var l=w._internalRoot;if(typeof y=="function"){var I=y;y=function(){var j=fg(l);I.call(j)}}am(n,l,r,y)}else{if(w=u._reactRootContainer=XT(u,f),l=w._internalRoot,typeof y=="function"){var M=y;y=function(){var j=fg(l);M.call(j)}}Tb(function(){am(n,l,r,y)})}return fg(l)}bx=function(r){if(r.tag===13){var n=ua();ju(r,4,n),dg(r,4)}};Wy=function(r){if(r.tag===13){var n=ua();ju(r,67108864,n),dg(r,67108864)}};wx=function(r){if(r.tag===13){var n=ua(),u=Nu(r);ju(r,u,n),dg(r,u)}};Sx=function(r,n){return n()};Uy=function(r,n,u){switch(n){case"input":if(Ay(r,u),n=u.name,u.type==="radio"&&n!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<u.length;n++){var f=u[n];if(f!==r&&f.form===r.form){var y=Ad(f);if(!y)throw Error(ct(90));tx(f),Ay(f,y)}}}break;case"textarea":ax(r,u);break;case"select":n=u.value,n!=null&&Nc(r,!!u.multiple,n,!1)}};Ny=Eb;mx=function(r,n,u,f,y){var w=ir;ir|=4;try{return Al(98,r.bind(null,n,u,f,y))}finally{ir=w,ir===0&&(up(),Es())}};jy=function(){(ir&49)==0&&(OT(),Vu())};yx=function(r,n){var u=ir;ir|=2;try{return r(n)}finally{ir=u,ir===0&&(up(),Es())}};function Db(r,n){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ef(n))throw Error(ct(200));return $T(r,n,null,u)}var KT={Events:[Dh,Yc,Ad,fx,dx,Vu,{current:!1}]},tf={findFiberByHostInstance:Cl,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},JT={bundleType:tf.bundleType,version:tf.version,rendererPackageName:tf.rendererPackageName,rendererConfig:tf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sl.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=_x(r),r===null?null:r.stateNode},findFiberByHostInstance:tf.findFiberByHostInstance||HT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var um=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!um.isDisabled&&um.supportsFiber)try{xv=um.inject(JT),kl=um}catch{}}Pa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KT;Pa.createPortal=Db;Pa.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var n=r._reactInternals;if(n===void 0)throw typeof r.render=="function"?Error(ct(188)):Error(ct(268,Object.keys(r)));return r=_x(n),r=r===null?null:r.stateNode,r};Pa.flushSync=function(r,n){var u=ir;if((u&48)!=0)return r(n);ir|=1;try{if(r)return Al(99,r.bind(null,n))}finally{ir=u,Es()}};Pa.hydrate=function(r,n,u){if(!ef(n))throw Error(ct(200));return sm(null,r,n,!0,u)};Pa.render=function(r,n,u){if(!ef(n))throw Error(ct(200));return sm(null,r,n,!1,u)};Pa.unmountComponentAtNode=function(r){if(!ef(r))throw Error(ct(40));return r._reactRootContainer?(Tb(function(){sm(null,null,r,!1,function(){r._reactRootContainer=null,r[Jc]=null})}),!0):!1};Pa.unstable_batchedUpdates=Eb;Pa.unstable_createPortal=function(r,n){return Db(r,n,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Pa.unstable_renderSubtreeIntoContainer=function(r,n,u,f){if(!ef(u))throw Error(ct(200));if(r==null||r._reactInternals===void 0)throw Error(ct(38));return sm(r,n,u,!1,f)};Pa.version="17.0.2";function Ob(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ob)}catch(r){console.error(r)}}Ob(),my.exports=Pa;var YT=my.exports;LS(my.exports.unstable_batchedUpdates);function ts(r){for(var n=arguments.length,u=Array(n>1?n-1:0),f=1;f<n;f++)u[f-1]=arguments[f];throw Error("[Immer] minified error nr: "+r+(u.length?" "+u.map(function(y){return"'"+y+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Gu(r){return!!r&&!!r[kn]}function Wu(r){return!!r&&(function(n){if(!n||typeof n!="object")return!1;var u=Object.getPrototypeOf(n);if(u===null)return!0;var f=Object.hasOwnProperty.call(u,"constructor")&&u.constructor;return f===Object||typeof f=="function"&&Function.toString.call(f)===sP}(r)||Array.isArray(r)||!!r[Gb]||!!r.constructor[Gb]||yg(r)||vg(r))}function Rl(r,n,u){u===void 0&&(u=!1),hp(r)===0?(u?Object.keys:dp)(r).forEach(function(f){u&&typeof f=="symbol"||n(f,r[f],r)}):r.forEach(function(f,y){return n(y,f,r)})}function hp(r){var n=r[kn];return n?n.i>3?n.i-4:n.i:Array.isArray(r)?1:yg(r)?2:vg(r)?3:0}function fp(r,n){return hp(r)===2?r.has(n):Object.prototype.hasOwnProperty.call(r,n)}function QT(r,n){return hp(r)===2?r.get(n):r[n]}function Rb(r,n,u){var f=hp(r);f===2?r.set(n,u):f===3?(r.delete(n),r.add(u)):r[n]=u}function Fb(r,n){return r===n?r!==0||1/r==1/n:r!=r&&n!=n}function yg(r){return oP&&r instanceof Map}function vg(r){return aP&&r instanceof Set}function Fl(r){return r.o||r.t}function gg(r){if(Array.isArray(r))return Array.prototype.slice.call(r);var n=Wb(r);delete n[kn];for(var u=dp(n),f=0;f<u.length;f++){var y=u[f],w=n[y];w.writable===!1&&(w.writable=!0,w.configurable=!0),(w.get||w.set)&&(n[y]={configurable:!0,writable:!0,enumerable:w.enumerable,value:r[y]})}return Object.create(Object.getPrototypeOf(r),n)}function _g(r,n){return n===void 0&&(n=!1),xg(r)||Gu(r)||!Wu(r)||(hp(r)>1&&(r.set=r.add=r.clear=r.delete=eP),Object.freeze(r),n&&Rl(r,function(u,f){return _g(f,!0)},!0)),r}function eP(){ts(2)}function xg(r){return r==null||typeof r!="object"||Object.isFrozen(r)}function ks(r){var n=kg[r];return n||ts(18,r),n}function tP(r,n){kg[r]||(kg[r]=n)}function bg(){return rf}function wg(r,n){n&&(ks("Patches"),r.u=[],r.s=[],r.v=n)}function lm(r){Sg(r),r.p.forEach(rP),r.p=null}function Sg(r){r===rf&&(rf=r.l)}function Bb(r){return rf={p:[],l:rf,h:r,m:!0,_:0}}function rP(r){var n=r[kn];n.i===0||n.i===1?n.j():n.O=!0}function Eg(r,n){n._=n.p.length;var u=n.p[0],f=r!==void 0&&r!==u;return n.h.g||ks("ES5").S(n,r,f),f?(u[kn].P&&(lm(n),ts(4)),Wu(r)&&(r=cm(n,r),n.l||pm(n,r)),n.u&&ks("Patches").M(u[kn].t,r,n.u,n.s)):r=cm(n,u,[]),lm(n),n.u&&n.v(n.u,n.s),r!==Zb?r:void 0}function cm(r,n,u){if(xg(n))return n;var f=n[kn];if(!f)return Rl(n,function(w,l){return Ub(r,f,n,w,l,u)},!0),n;if(f.A!==r)return n;if(!f.P)return pm(r,f.t,!0),f.t;if(!f.I){f.I=!0,f.A._--;var y=f.i===4||f.i===5?f.o=gg(f.k):f.o;Rl(f.i===3?new Set(y):y,function(w,l){return Ub(r,f,y,w,l,u)}),pm(r,y,!1),u&&r.u&&ks("Patches").R(f,u,r.u,r.s)}return f.o}function Ub(r,n,u,f,y,w){if(Gu(y)){var l=cm(r,y,w&&n&&n.i!==3&&!fp(n.D,f)?w.concat(f):void 0);if(Rb(u,f,l),!Gu(l))return;r.m=!1}if(Wu(y)&&!xg(y)){if(!r.h.F&&r._<1)return;cm(r,y),n&&n.A.l||pm(r,y)}}function pm(r,n,u){u===void 0&&(u=!1),r.h.F&&r.m&&_g(n,u)}function Tg(r,n){var u=r[kn];return(u?Fl(u):r)[n]}function Nb(r,n){if(n in r)for(var u=Object.getPrototypeOf(r);u;){var f=Object.getOwnPropertyDescriptor(u,n);if(f)return f;u=Object.getPrototypeOf(u)}}function $u(r){r.P||(r.P=!0,r.l&&$u(r.l))}function Pg(r){r.o||(r.o=gg(r.t))}function Cg(r,n,u){var f=yg(n)?ks("MapSet").N(n,u):vg(n)?ks("MapSet").T(n,u):r.g?function(y,w){var l=Array.isArray(y),I={i:l?1:0,A:w?w.A:bg(),P:!1,I:!1,D:{},l:w,t:y,k:null,o:null,j:null,C:!1},M=I,j=nf;l&&(M=[I],j=of);var ee=Proxy.revocable(M,j),Ce=ee.revoke,W=ee.proxy;return I.k=W,I.j=Ce,W}(n,u):ks("ES5").J(n,u);return(u?u.A:bg()).p.push(f),f}function nP(r){return Gu(r)||ts(22,r),function n(u){if(!Wu(u))return u;var f,y=u[kn],w=hp(u);if(y){if(!y.P&&(y.i<4||!ks("ES5").K(y)))return y.t;y.I=!0,f=jb(u,w),y.I=!1}else f=jb(u,w);return Rl(f,function(l,I){y&&QT(y.t,l)===I||Rb(f,l,n(I))}),w===3?new Set(f):f}(r)}function jb(r,n){switch(n){case 2:return new Map(r);case 3:return Array.from(r)}return gg(r)}function iP(){function r(w,l){var I=y[w];return I?I.enumerable=l:y[w]=I={configurable:!0,enumerable:l,get:function(){var M=this[kn];return nf.get(M,w)},set:function(M){var j=this[kn];nf.set(j,w,M)}},I}function n(w){for(var l=w.length-1;l>=0;l--){var I=w[l][kn];if(!I.P)switch(I.i){case 5:f(I)&&$u(I);break;case 4:u(I)&&$u(I)}}}function u(w){for(var l=w.t,I=w.k,M=dp(I),j=M.length-1;j>=0;j--){var ee=M[j];if(ee!==kn){var Ce=l[ee];if(Ce===void 0&&!fp(l,ee))return!0;var W=I[ee],xe=W&&W[kn];if(xe?xe.t!==Ce:!Fb(W,Ce))return!0}}var Le=!!l[kn];return M.length!==dp(l).length+(Le?0:1)}function f(w){var l=w.k;if(l.length!==w.t.length)return!0;var I=Object.getOwnPropertyDescriptor(l,l.length-1);if(I&&!I.get)return!0;for(var M=0;M<l.length;M++)if(!l.hasOwnProperty(M))return!0;return!1}var y={};tP("ES5",{J:function(w,l){var I=Array.isArray(w),M=function(ee,Ce){if(ee){for(var W=Array(Ce.length),xe=0;xe<Ce.length;xe++)Object.defineProperty(W,""+xe,r(xe,!0));return W}var Le=Wb(Ce);delete Le[kn];for(var De=dp(Le),se=0;se<De.length;se++){var re=De[se];Le[re]=r(re,ee||!!Le[re].enumerable)}return Object.create(Object.getPrototypeOf(Ce),Le)}(I,w),j={i:I?5:4,A:l?l.A:bg(),P:!1,I:!1,D:{},l,t:w,k:M,o:null,O:!1,C:!1};return Object.defineProperty(M,kn,{value:j,writable:!0}),M},S:function(w,l,I){I?Gu(l)&&l[kn].A===w&&n(w.p):(w.u&&function M(j){if(j&&typeof j=="object"){var ee=j[kn];if(ee){var Ce=ee.t,W=ee.k,xe=ee.D,Le=ee.i;if(Le===4)Rl(W,function(be){be!==kn&&(Ce[be]!==void 0||fp(Ce,be)?xe[be]||M(W[be]):(xe[be]=!0,$u(ee)))}),Rl(Ce,function(be){W[be]!==void 0||fp(W,be)||(xe[be]=!1,$u(ee))});else if(Le===5){if(f(ee)&&($u(ee),xe.length=!0),W.length<Ce.length)for(var De=W.length;De<Ce.length;De++)xe[De]=!1;else for(var se=Ce.length;se<W.length;se++)xe[se]=!0;for(var re=Math.min(W.length,Ce.length),oe=0;oe<re;oe++)W.hasOwnProperty(oe)||(xe[oe]=!0),xe[oe]===void 0&&M(W[oe])}}}}(w.p[0]),n(w.p))},K:function(w){return w.i===4?u(w):f(w)}})}var Vb,rf,Ig=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",oP=typeof Map!="undefined",aP=typeof Set!="undefined",qb=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Zb=Ig?Symbol.for("immer-nothing"):((Vb={})["immer-nothing"]=!0,Vb),Gb=Ig?Symbol.for("immer-draftable"):"__$immer_draftable",kn=Ig?Symbol.for("immer-state"):"__$immer_state",sP=""+Object.prototype.constructor,dp=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames,Wb=Object.getOwnPropertyDescriptors||function(r){var n={};return dp(r).forEach(function(u){n[u]=Object.getOwnPropertyDescriptor(r,u)}),n},kg={},nf={get:function(r,n){if(n===kn)return r;var u=Fl(r);if(!fp(u,n))return function(y,w,l){var I,M=Nb(w,l);return M?"value"in M?M.value:(I=M.get)===null||I===void 0?void 0:I.call(y.k):void 0}(r,u,n);var f=u[n];return r.I||!Wu(f)?f:f===Tg(r.t,n)?(Pg(r),r.o[n]=Cg(r.A.h,f,r)):f},has:function(r,n){return n in Fl(r)},ownKeys:function(r){return Reflect.ownKeys(Fl(r))},set:function(r,n,u){var f=Nb(Fl(r),n);if(f==null?void 0:f.set)return f.set.call(r.k,u),!0;if(!r.P){var y=Tg(Fl(r),n),w=y==null?void 0:y[kn];if(w&&w.t===u)return r.o[n]=u,r.D[n]=!1,!0;if(Fb(u,y)&&(u!==void 0||fp(r.t,n)))return!0;Pg(r),$u(r)}return r.o[n]===u&&typeof u!="number"&&(u!==void 0||n in r.o)||(r.o[n]=u,r.D[n]=!0,!0)},deleteProperty:function(r,n){return Tg(r.t,n)!==void 0||n in r.t?(r.D[n]=!1,Pg(r),$u(r)):delete r.D[n],r.o&&delete r.o[n],!0},getOwnPropertyDescriptor:function(r,n){var u=Fl(r),f=Reflect.getOwnPropertyDescriptor(u,n);return f&&{writable:!0,configurable:r.i!==1||n!=="length",enumerable:f.enumerable,value:u[n]}},defineProperty:function(){ts(11)},getPrototypeOf:function(r){return Object.getPrototypeOf(r.t)},setPrototypeOf:function(){ts(12)}},of={};Rl(nf,function(r,n){of[r]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}}),of.deleteProperty=function(r,n){return of.set.call(this,r,n,void 0)},of.set=function(r,n,u){return nf.set.call(this,r[0],n,u,r[0])};var uP=function(){function r(u){var f=this;this.g=qb,this.F=!0,this.produce=function(y,w,l){if(typeof y=="function"&&typeof w!="function"){var I=w;w=y;var M=f;return function(De){var se=this;De===void 0&&(De=I);for(var re=arguments.length,oe=Array(re>1?re-1:0),be=1;be<re;be++)oe[be-1]=arguments[be];return M.produce(De,function(Re){var Me;return(Me=w).call.apply(Me,[se,Re].concat(oe))})}}var j;if(typeof w!="function"&&ts(6),l!==void 0&&typeof l!="function"&&ts(7),Wu(y)){var ee=Bb(f),Ce=Cg(f,y,void 0),W=!0;try{j=w(Ce),W=!1}finally{W?lm(ee):Sg(ee)}return typeof Promise!="undefined"&&j instanceof Promise?j.then(function(De){return wg(ee,l),Eg(De,ee)},function(De){throw lm(ee),De}):(wg(ee,l),Eg(j,ee))}if(!y||typeof y!="object"){if((j=w(y))===void 0&&(j=y),j===Zb&&(j=void 0),f.F&&_g(j,!0),l){var xe=[],Le=[];ks("Patches").M(y,j,xe,Le),l(xe,Le)}return j}ts(21,y)},this.produceWithPatches=function(y,w){if(typeof y=="function")return function(j){for(var ee=arguments.length,Ce=Array(ee>1?ee-1:0),W=1;W<ee;W++)Ce[W-1]=arguments[W];return f.produceWithPatches(j,function(xe){return y.apply(void 0,[xe].concat(Ce))})};var l,I,M=f.produce(y,w,function(j,ee){l=j,I=ee});return typeof Promise!="undefined"&&M instanceof Promise?M.then(function(j){return[j,l,I]}):[M,l,I]},typeof(u==null?void 0:u.useProxies)=="boolean"&&this.setUseProxies(u.useProxies),typeof(u==null?void 0:u.autoFreeze)=="boolean"&&this.setAutoFreeze(u.autoFreeze)}var n=r.prototype;return n.createDraft=function(u){Wu(u)||ts(8),Gu(u)&&(u=nP(u));var f=Bb(this),y=Cg(this,u,void 0);return y[kn].C=!0,Sg(f),y},n.finishDraft=function(u,f){var y=u&&u[kn],w=y.A;return wg(w,f),Eg(void 0,w)},n.setAutoFreeze=function(u){this.F=u},n.setUseProxies=function(u){u&&!qb&&ts(20),this.g=u},n.applyPatches=function(u,f){var y;for(y=f.length-1;y>=0;y--){var w=f[y];if(w.path.length===0&&w.op==="replace"){u=w.value;break}}y>-1&&(f=f.slice(y+1));var l=ks("Patches").$;return Gu(u)?l(u,f):this.produce(u,function(I){return l(I,f)})},r}(),la=new uP,lP=la.produce;la.produceWithPatches.bind(la);la.setAutoFreeze.bind(la);la.setUseProxies.bind(la);la.applyPatches.bind(la);la.createDraft.bind(la);la.finishDraft.bind(la);var Ag=lP;function cP(r,n,u){return n in r?Object.defineProperty(r,n,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[n]=u,r}function $b(r,n){var u=Object.keys(r);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(r);n&&(f=f.filter(function(y){return Object.getOwnPropertyDescriptor(r,y).enumerable})),u.push.apply(u,f)}return u}function Hb(r){for(var n=1;n<arguments.length;n++){var u=arguments[n]!=null?arguments[n]:{};n%2?$b(Object(u),!0).forEach(function(f){cP(r,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):$b(Object(u)).forEach(function(f){Object.defineProperty(r,f,Object.getOwnPropertyDescriptor(u,f))})}return r}function ho(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var Xb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Mg=function(){return Math.random().toString(36).substring(7).split("").join(".")},hm={INIT:"@@redux/INIT"+Mg(),REPLACE:"@@redux/REPLACE"+Mg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Mg()}};function pP(r){if(typeof r!="object"||r===null)return!1;for(var n=r;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}function Kb(r,n,u){var f;if(typeof n=="function"&&typeof u=="function"||typeof u=="function"&&typeof arguments[3]=="function")throw new Error(ho(0));if(typeof n=="function"&&typeof u=="undefined"&&(u=n,n=void 0),typeof u!="undefined"){if(typeof u!="function")throw new Error(ho(1));return u(Kb)(r,n)}if(typeof r!="function")throw new Error(ho(2));var y=r,w=n,l=[],I=l,M=!1;function j(){I===l&&(I=l.slice())}function ee(){if(M)throw new Error(ho(3));return w}function Ce(De){if(typeof De!="function")throw new Error(ho(4));if(M)throw new Error(ho(5));var se=!0;return j(),I.push(De),function(){if(!!se){if(M)throw new Error(ho(6));se=!1,j();var oe=I.indexOf(De);I.splice(oe,1),l=null}}}function W(De){if(!pP(De))throw new Error(ho(7));if(typeof De.type=="undefined")throw new Error(ho(8));if(M)throw new Error(ho(9));try{M=!0,w=y(w,De)}finally{M=!1}for(var se=l=I,re=0;re<se.length;re++){var oe=se[re];oe()}return De}function xe(De){if(typeof De!="function")throw new Error(ho(10));y=De,W({type:hm.REPLACE})}function Le(){var De,se=Ce;return De={subscribe:function(oe){if(typeof oe!="object"||oe===null)throw new Error(ho(11));function be(){oe.next&&oe.next(ee())}be();var Re=se(be);return{unsubscribe:Re}}},De[Xb]=function(){return this},De}return W({type:hm.INIT}),f={dispatch:W,subscribe:Ce,getState:ee,replaceReducer:xe},f[Xb]=Le,f}function hP(r){Object.keys(r).forEach(function(n){var u=r[n],f=u(void 0,{type:hm.INIT});if(typeof f=="undefined")throw new Error(ho(12));if(typeof u(void 0,{type:hm.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(ho(13))})}function fP(r){for(var n=Object.keys(r),u={},f=0;f<n.length;f++){var y=n[f];typeof r[y]=="function"&&(u[y]=r[y])}var w=Object.keys(u),l;try{hP(u)}catch(I){l=I}return function(M,j){if(M===void 0&&(M={}),l)throw l;for(var ee=!1,Ce={},W=0;W<w.length;W++){var xe=w[W],Le=u[xe],De=M[xe],se=Le(De,j);if(typeof se=="undefined")throw j&&j.type,new Error(ho(14));Ce[xe]=se,ee=ee||se!==De}return ee=ee||w.length!==Object.keys(M).length,ee?Ce:M}}function fm(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return n.length===0?function(f){return f}:n.length===1?n[0]:n.reduce(function(f,y){return function(){return f(y.apply(void 0,arguments))}})}function dP(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return function(f){return function(){var y=f.apply(void 0,arguments),w=function(){throw new Error(ho(15))},l={getState:y.getState,dispatch:function(){return w.apply(void 0,arguments)}},I=n.map(function(M){return M(l)});return w=fm.apply(void 0,I)(y.dispatch),Hb(Hb({},y),{},{dispatch:w})}}}function Jb(r){var n=function(f){var y=f.dispatch,w=f.getState;return function(l){return function(I){return typeof I=="function"?I(y,w,r):l(I)}}};return n}var Yb=Jb();Yb.withExtraArgument=Jb;var Qb=Yb,mP=globalThis&&globalThis.__extends||function(){var r=function(n,u){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(f[w]=y[w])},r(n,u)};return function(n,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");r(n,u);function f(){this.constructor=n}n.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();globalThis&&globalThis.__generator;var dm=globalThis&&globalThis.__spreadArray||function(r,n){for(var u=0,f=n.length,y=r.length;u<f;u++,y++)r[y]=n[u];return r},yP=Object.defineProperty,ew=Object.getOwnPropertySymbols,vP=Object.prototype.hasOwnProperty,gP=Object.prototype.propertyIsEnumerable,tw=function(r,n,u){return n in r?yP(r,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[n]=u},zg=function(r,n){for(var u in n||(n={}))vP.call(n,u)&&tw(r,u,n[u]);if(ew)for(var f=0,y=ew(n);f<y.length;f++){var u=y[f];gP.call(n,u)&&tw(r,u,n[u])}return r},_P=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fm:fm.apply(null,arguments)};function xP(r){if(typeof r!="object"||r===null)return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;for(var u=n;Object.getPrototypeOf(u)!==null;)u=Object.getPrototypeOf(u);return n===u}var bP=function(r){mP(n,r);function n(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var y=r.apply(this,u)||this;return Object.setPrototypeOf(y,n.prototype),y}return Object.defineProperty(n,Symbol.species,{get:function(){return n},enumerable:!1,configurable:!0}),n.prototype.concat=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return r.prototype.concat.apply(this,u)},n.prototype.prepend=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return u.length===1&&Array.isArray(u[0])?new(n.bind.apply(n,dm([void 0],u[0].concat(this)))):new(n.bind.apply(n,dm([void 0],u.concat(this))))},n}(Array);function wP(r){return typeof r=="boolean"}function SP(){return function(n){return EP(n)}}function EP(r){r===void 0&&(r={});var n=r.thunk,u=n===void 0?!0:n;r.immutableCheck,r.serializableCheck;var f=new bP;return u&&(wP(u)?f.push(Qb):f.push(Qb.withExtraArgument(u.extraArgument))),f}var TP=!0;function lC(r){var n=SP(),u=r||{},f=u.reducer,y=f===void 0?void 0:f,w=u.middleware,l=w===void 0?n():w,I=u.devTools,M=I===void 0?!0:I,j=u.preloadedState,ee=j===void 0?void 0:j,Ce=u.enhancers,W=Ce===void 0?void 0:Ce,xe;if(typeof y=="function")xe=y;else if(xP(y))xe=fP(y);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var Le=l;typeof Le=="function"&&(Le=Le(n));var De=dP.apply(void 0,Le),se=fm;M&&(se=_P(zg({trace:!TP},typeof M=="object"&&M)));var re=[De];Array.isArray(W)?re=dm([De],W):typeof W=="function"&&(re=W(re));var oe=se.apply(void 0,re);return Kb(xe,ee,oe)}function cC(r,n){function u(){for(var f=[],y=0;y<arguments.length;y++)f[y]=arguments[y];if(n){var w=n.apply(void 0,f);if(!w)throw new Error("prepareAction did not return an object");return zg(zg({type:r,payload:w.payload},"meta"in w&&{meta:w.meta}),"error"in w&&{error:w.error})}return{type:r,payload:f[0]}}return u.toString=function(){return""+r},u.type=r,u.match=function(f){return f.type===r},u}function PP(r){var n={},u=[],f,y={addCase:function(w,l){var I=typeof w=="string"?w:w.type;if(I in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[I]=l,y},addMatcher:function(w,l){return u.push({matcher:w,reducer:l}),y},addDefaultCase:function(w){return f=w,y}};return r(y),[n,u,f]}function CP(r){return typeof r=="function"}function pC(r,n,u,f){u===void 0&&(u=[]);var y=typeof n=="function"?PP(n):[n,u,f],w=y[0],l=y[1],I=y[2],M;if(CP(r))M=function(){return Ag(r(),function(){})};else{var j=Ag(r,function(){});M=function(){return j}}function ee(Ce,W){Ce===void 0&&(Ce=M());var xe=dm([w[W.type]],l.filter(function(Le){var De=Le.matcher;return De(W)}).map(function(Le){var De=Le.reducer;return De}));return xe.filter(function(Le){return!!Le}).length===0&&(xe=[I]),xe.reduce(function(Le,De){if(De)if(Gu(Le)){var se=Le,re=De(se,W);return typeof re=="undefined"?Le:re}else{if(Wu(Le))return Ag(Le,function(oe){return De(oe,W)});var re=De(Le,W);if(typeof re=="undefined"){if(Le===null)return Le;throw Error("A case reducer on a non-draftable value must not return undefined")}return re}return Le},Ce)}return ee.getInitialState=M,ee}iP();function Lg(r,n){return Lg=Object.setPrototypeOf||function(f,y){return f.__proto__=y,f},Lg(r,n)}function mm(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,Lg(r,n)}var ym=function(){function r(){this.listeners=[]}var n=r.prototype;return n.subscribe=function(f){var y=this,w=f||function(){};return this.listeners.push(w),this.onSubscribe(),function(){y.listeners=y.listeners.filter(function(l){return l!==w}),y.onUnsubscribe()}},n.hasListeners=function(){return this.listeners.length>0},n.onSubscribe=function(){},n.onUnsubscribe=function(){},r}(),rw=typeof window=="undefined";function Co(){}function IP(r,n){return typeof r=="function"?r(n):r}function kP(r){return typeof r=="number"&&r>=0&&r!==1/0}function vm(r){return Array.isArray(r)?r:[r]}function AP(r,n){return Math.max(r+(n||0)-Date.now(),0)}function Dg(r,n,u){return _m(r)?typeof n=="function"?Yr({},u,{queryKey:r,queryFn:n}):Yr({},n,{queryKey:r}):r}function Hu(r,n,u){return _m(r)?[Yr({},n,{queryKey:r}),u]:[r||{},n]}function MP(r,n){if(r===!0&&n===!0||r==null&&n==null)return"all";if(r===!1&&n===!1)return"none";var u=r!=null?r:!n;return u?"active":"inactive"}function nw(r,n){var u=r.active,f=r.exact,y=r.fetching,w=r.inactive,l=r.predicate,I=r.queryKey,M=r.stale;if(_m(I)){if(f){if(n.queryHash!==Og(I,n.options))return!1}else if(!gm(n.queryKey,I))return!1}var j=MP(u,w);if(j==="none")return!1;if(j!=="all"){var ee=n.isActive();if(j==="active"&&!ee||j==="inactive"&&ee)return!1}return!(typeof M=="boolean"&&n.isStale()!==M||typeof y=="boolean"&&n.isFetching()!==y||l&&!l(n))}function iw(r,n){var u=r.exact,f=r.fetching,y=r.predicate,w=r.mutationKey;if(_m(w)){if(!n.options.mutationKey)return!1;if(u){if(Bl(n.options.mutationKey)!==Bl(w))return!1}else if(!gm(n.options.mutationKey,w))return!1}return!(typeof f=="boolean"&&n.state.status==="loading"!==f||y&&!y(n))}function Og(r,n){var u=(n==null?void 0:n.queryKeyHashFn)||Bl;return u(r)}function Bl(r){var n=vm(r);return zP(n)}function zP(r){return JSON.stringify(r,function(n,u){return Rg(u)?Object.keys(u).sort().reduce(function(f,y){return f[y]=u[y],f},{}):u})}function gm(r,n){return ow(vm(r),vm(n))}function ow(r,n){return r===n?!0:typeof r!=typeof n?!1:r&&n&&typeof r=="object"&&typeof n=="object"?!Object.keys(n).some(function(u){return!ow(r[u],n[u])}):!1}function aw(r,n){if(r===n)return r;var u=Array.isArray(r)&&Array.isArray(n);if(u||Rg(r)&&Rg(n)){for(var f=u?r.length:Object.keys(r).length,y=u?n:Object.keys(n),w=y.length,l=u?[]:{},I=0,M=0;M<w;M++){var j=u?M:y[M];l[j]=aw(r[j],n[j]),l[j]===r[j]&&I++}return f===w&&I===f?r:l}return n}function Rg(r){if(!sw(r))return!1;var n=r.constructor;if(typeof n=="undefined")return!0;var u=n.prototype;return!(!sw(u)||!u.hasOwnProperty("isPrototypeOf"))}function sw(r){return Object.prototype.toString.call(r)==="[object Object]"}function _m(r){return typeof r=="string"||Array.isArray(r)}function LP(r){return new Promise(function(n){setTimeout(n,r)})}function uw(r){Promise.resolve().then(r).catch(function(n){return setTimeout(function(){throw n})})}function lw(){if(typeof AbortController=="function")return new AbortController}var DP=function(r){mm(n,r);function n(){return r.apply(this,arguments)||this}var u=n.prototype;return u.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},u.setEventListener=function(y){var w=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=y(function(l){typeof l=="boolean"?w.setFocused(l):w.onFocus()})},u.setFocused=function(y){this.focused=y,y&&this.onFocus()},u.onFocus=function(){this.listeners.forEach(function(y){y()})},u.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document=="undefined"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},u.setDefaultEventListener=function(){var y;!rw&&((y=window)==null?void 0:y.addEventListener)&&this.setEventListener(function(w){var l=function(){return w()};return window.addEventListener("visibilitychange",l,!1),window.addEventListener("focus",l,!1),function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("focus",l)}})},n}(ym),xm=new DP,OP=function(r){mm(n,r);function n(){return r.apply(this,arguments)||this}var u=n.prototype;return u.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},u.setEventListener=function(y){var w=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=y(function(l){typeof l=="boolean"?w.setOnline(l):w.onOnline()})},u.setOnline=function(y){this.online=y,y&&this.onOnline()},u.onOnline=function(){this.listeners.forEach(function(y){y()})},u.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator=="undefined"||typeof navigator.onLine=="undefined"?!0:navigator.onLine},u.setDefaultEventListener=function(){var y;!rw&&((y=window)==null?void 0:y.addEventListener)&&this.setEventListener(function(w){var l=function(){return w()};return window.addEventListener("online",l,!1),window.addEventListener("offline",l,!1),function(){window.removeEventListener("online",l),window.removeEventListener("offline",l)}})},n}(ym),bm=new OP;function RP(r){return Math.min(1e3*Math.pow(2,r),3e4)}function wm(r){return typeof(r==null?void 0:r.cancel)=="function"}var cw=function(n){this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent};function Fg(r){return r instanceof cw}var pw=function(n){var u=this,f=!1,y,w,l,I;this.abort=n.abort,this.cancel=function(W){return y==null?void 0:y(W)},this.cancelRetry=function(){f=!0},this.continueRetry=function(){f=!1},this.continue=function(){return w==null?void 0:w()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(W,xe){l=W,I=xe});var M=function(xe){u.isResolved||(u.isResolved=!0,n.onSuccess==null||n.onSuccess(xe),w==null||w(),l(xe))},j=function(xe){u.isResolved||(u.isResolved=!0,n.onError==null||n.onError(xe),w==null||w(),I(xe))},ee=function(){return new Promise(function(xe){w=xe,u.isPaused=!0,n.onPause==null||n.onPause()}).then(function(){w=void 0,u.isPaused=!1,n.onContinue==null||n.onContinue()})},Ce=function W(){if(!u.isResolved){var xe;try{xe=n.fn()}catch(Le){xe=Promise.reject(Le)}y=function(De){if(!u.isResolved&&(j(new cw(De)),u.abort==null||u.abort(),wm(xe)))try{xe.cancel()}catch{}},u.isTransportCancelable=wm(xe),Promise.resolve(xe).then(M).catch(function(Le){var De,se;if(!u.isResolved){var re=(De=n.retry)!=null?De:3,oe=(se=n.retryDelay)!=null?se:RP,be=typeof oe=="function"?oe(u.failureCount,Le):oe,Re=re===!0||typeof re=="number"&&u.failureCount<re||typeof re=="function"&&re(u.failureCount,Le);if(f||!Re){j(Le);return}u.failureCount++,n.onFail==null||n.onFail(u.failureCount,Le),LP(be).then(function(){if(!xm.isFocused()||!bm.isOnline())return ee()}).then(function(){f?j(Le):W()})}})}};Ce()},FP=function(){function r(){this.queue=[],this.transactions=0,this.notifyFn=function(u){u()},this.batchNotifyFn=function(u){u()}}var n=r.prototype;return n.batch=function(f){this.transactions++;var y=f();return this.transactions--,this.transactions||this.flush(),y},n.schedule=function(f){var y=this;this.transactions?this.queue.push(f):uw(function(){y.notifyFn(f)})},n.batchCalls=function(f){var y=this;return function(){for(var w=arguments.length,l=new Array(w),I=0;I<w;I++)l[I]=arguments[I];y.schedule(function(){f.apply(void 0,l)})}},n.flush=function(){var f=this,y=this.queue;this.queue=[],y.length&&uw(function(){f.batchNotifyFn(function(){y.forEach(function(w){f.notifyFn(w)})})})},n.setNotifyFunction=function(f){this.notifyFn=f},n.setBatchNotifyFunction=function(f){this.batchNotifyFn=f},r}(),ji=new FP,hw=console;function fw(){return hw}function BP(r){hw=r}var UP=function(){function r(u){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=u.defaultOptions,this.setOptions(u.options),this.observers=[],this.cache=u.cache,this.queryKey=u.queryKey,this.queryHash=u.queryHash,this.initialState=u.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=u.meta,this.scheduleGc()}var n=r.prototype;return n.setOptions=function(f){var y;this.options=Yr({},this.defaultOptions,f),this.meta=f==null?void 0:f.meta,this.cacheTime=Math.max(this.cacheTime||0,(y=this.options.cacheTime)!=null?y:5*60*1e3)},n.setDefaultOptions=function(f){this.defaultOptions=f},n.scheduleGc=function(){var f=this;this.clearGcTimeout(),kP(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){f.optionalRemove()},this.cacheTime))},n.clearGcTimeout=function(){clearTimeout(this.gcTimeout),this.gcTimeout=void 0},n.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},n.setData=function(f,y){var w,l,I=this.state.data,M=IP(f,I);return((w=(l=this.options).isDataEqual)==null?void 0:w.call(l,I,M))?M=I:this.options.structuralSharing!==!1&&(M=aw(I,M)),this.dispatch({data:M,type:"success",dataUpdatedAt:y==null?void 0:y.updatedAt}),M},n.setState=function(f,y){this.dispatch({type:"setState",state:f,setStateOptions:y})},n.cancel=function(f){var y,w=this.promise;return(y=this.retryer)==null||y.cancel(f),w?w.then(Co).catch(Co):Promise.resolve()},n.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},n.reset=function(){this.destroy(),this.setState(this.initialState)},n.isActive=function(){return this.observers.some(function(f){return f.options.enabled!==!1})},n.isFetching=function(){return this.state.isFetching},n.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(f){return f.getCurrentResult().isStale})},n.isStaleByTime=function(f){return f===void 0&&(f=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!AP(this.state.dataUpdatedAt,f)},n.onFocus=function(){var f,y=this.observers.find(function(w){return w.shouldFetchOnWindowFocus()});y&&y.refetch(),(f=this.retryer)==null||f.continue()},n.onOnline=function(){var f,y=this.observers.find(function(w){return w.shouldFetchOnReconnect()});y&&y.refetch(),(f=this.retryer)==null||f.continue()},n.addObserver=function(f){this.observers.indexOf(f)===-1&&(this.observers.push(f),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:f}))},n.removeObserver=function(f){this.observers.indexOf(f)!==-1&&(this.observers=this.observers.filter(function(y){return y!==f}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:f}))},n.getObserversCount=function(){return this.observers.length},n.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},n.fetch=function(f,y){var w=this,l,I,M;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(y==null?void 0:y.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var j;return(j=this.retryer)==null||j.continueRetry(),this.promise}}if(f&&this.setOptions(f),!this.options.queryFn){var ee=this.observers.find(function(oe){return oe.options.queryFn});ee&&this.setOptions(ee.options)}var Ce=vm(this.queryKey),W=lw(),xe={queryKey:Ce,pageParam:void 0,meta:this.meta};Object.defineProperty(xe,"signal",{enumerable:!0,get:function(){if(W)return w.abortSignalConsumed=!0,W.signal}});var Le=function(){return w.options.queryFn?(w.abortSignalConsumed=!1,w.options.queryFn(xe)):Promise.reject("Missing queryFn")},De={fetchOptions:y,options:this.options,queryKey:Ce,state:this.state,fetchFn:Le,meta:this.meta};if((l=this.options.behavior)==null?void 0:l.onFetch){var se;(se=this.options.behavior)==null||se.onFetch(De)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((I=De.fetchOptions)==null?void 0:I.meta)){var re;this.dispatch({type:"fetch",meta:(re=De.fetchOptions)==null?void 0:re.meta})}return this.retryer=new pw({fn:De.fetchFn,abort:W==null||(M=W.abort)==null?void 0:M.bind(W),onSuccess:function(be){w.setData(be),w.cache.config.onSuccess==null||w.cache.config.onSuccess(be,w),w.cacheTime===0&&w.optionalRemove()},onError:function(be){Fg(be)&&be.silent||w.dispatch({type:"error",error:be}),Fg(be)||(w.cache.config.onError==null||w.cache.config.onError(be,w),fw().error(be)),w.cacheTime===0&&w.optionalRemove()},onFail:function(){w.dispatch({type:"failed"})},onPause:function(){w.dispatch({type:"pause"})},onContinue:function(){w.dispatch({type:"continue"})},retry:De.options.retry,retryDelay:De.options.retryDelay}),this.promise=this.retryer.promise,this.promise},n.dispatch=function(f){var y=this;this.state=this.reducer(this.state,f),ji.batch(function(){y.observers.forEach(function(w){w.onQueryUpdate(f)}),y.cache.notify({query:y,type:"queryUpdated",action:f})})},n.getDefaultState=function(f){var y=typeof f.initialData=="function"?f.initialData():f.initialData,w=typeof f.initialData!="undefined",l=w?typeof f.initialDataUpdatedAt=="function"?f.initialDataUpdatedAt():f.initialDataUpdatedAt:0,I=typeof y!="undefined";return{data:y,dataUpdateCount:0,dataUpdatedAt:I?l!=null?l:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:I?"success":"idle"}},n.reducer=function(f,y){var w,l;switch(y.type){case"failed":return Yr({},f,{fetchFailureCount:f.fetchFailureCount+1});case"pause":return Yr({},f,{isPaused:!0});case"continue":return Yr({},f,{isPaused:!1});case"fetch":return Yr({},f,{fetchFailureCount:0,fetchMeta:(w=y.meta)!=null?w:null,isFetching:!0,isPaused:!1,status:f.dataUpdatedAt?f.status:"loading"});case"success":return Yr({},f,{data:y.data,dataUpdateCount:f.dataUpdateCount+1,dataUpdatedAt:(l=y.dataUpdatedAt)!=null?l:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var I=y.error;return Fg(I)&&I.revert&&this.revertState?Yr({},this.revertState):Yr({},f,{error:I,errorUpdateCount:f.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:f.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return Yr({},f,{isInvalidated:!0});case"setState":return Yr({},f,y.state);default:return f}},r}(),NP=function(r){mm(n,r);function n(f){var y;return y=r.call(this)||this,y.config=f||{},y.queries=[],y.queriesMap={},y}var u=n.prototype;return u.build=function(y,w,l){var I,M=w.queryKey,j=(I=w.queryHash)!=null?I:Og(M,w),ee=this.get(j);return ee||(ee=new UP({cache:this,queryKey:M,queryHash:j,options:y.defaultQueryOptions(w),state:l,defaultOptions:y.getQueryDefaults(M),meta:w.meta}),this.add(ee)),ee},u.add=function(y){this.queriesMap[y.queryHash]||(this.queriesMap[y.queryHash]=y,this.queries.push(y),this.notify({type:"queryAdded",query:y}))},u.remove=function(y){var w=this.queriesMap[y.queryHash];w&&(y.destroy(),this.queries=this.queries.filter(function(l){return l!==y}),w===y&&delete this.queriesMap[y.queryHash],this.notify({type:"queryRemoved",query:y}))},u.clear=function(){var y=this;ji.batch(function(){y.queries.forEach(function(w){y.remove(w)})})},u.get=function(y){return this.queriesMap[y]},u.getAll=function(){return this.queries},u.find=function(y,w){var l=Hu(y,w),I=l[0];return typeof I.exact=="undefined"&&(I.exact=!0),this.queries.find(function(M){return nw(I,M)})},u.findAll=function(y,w){var l=Hu(y,w),I=l[0];return Object.keys(I).length>0?this.queries.filter(function(M){return nw(I,M)}):this.queries},u.notify=function(y){var w=this;ji.batch(function(){w.listeners.forEach(function(l){l(y)})})},u.onFocus=function(){var y=this;ji.batch(function(){y.queries.forEach(function(w){w.onFocus()})})},u.onOnline=function(){var y=this;ji.batch(function(){y.queries.forEach(function(w){w.onOnline()})})},n}(ym),jP=function(){function r(u){this.options=Yr({},u.defaultOptions,u.options),this.mutationId=u.mutationId,this.mutationCache=u.mutationCache,this.observers=[],this.state=u.state||VP(),this.meta=u.meta}var n=r.prototype;return n.setState=function(f){this.dispatch({type:"setState",state:f})},n.addObserver=function(f){this.observers.indexOf(f)===-1&&this.observers.push(f)},n.removeObserver=function(f){this.observers=this.observers.filter(function(y){return y!==f})},n.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Co).catch(Co)):Promise.resolve()},n.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},n.execute=function(){var f=this,y,w=this.state.status==="loading",l=Promise.resolve();return w||(this.dispatch({type:"loading",variables:this.options.variables}),l=l.then(function(){f.mutationCache.config.onMutate==null||f.mutationCache.config.onMutate(f.state.variables,f)}).then(function(){return f.options.onMutate==null?void 0:f.options.onMutate(f.state.variables)}).then(function(I){I!==f.state.context&&f.dispatch({type:"loading",context:I,variables:f.state.variables})})),l.then(function(){return f.executeMutation()}).then(function(I){y=I,f.mutationCache.config.onSuccess==null||f.mutationCache.config.onSuccess(y,f.state.variables,f.state.context,f)}).then(function(){return f.options.onSuccess==null?void 0:f.options.onSuccess(y,f.state.variables,f.state.context)}).then(function(){return f.options.onSettled==null?void 0:f.options.onSettled(y,null,f.state.variables,f.state.context)}).then(function(){return f.dispatch({type:"success",data:y}),y}).catch(function(I){return f.mutationCache.config.onError==null||f.mutationCache.config.onError(I,f.state.variables,f.state.context,f),fw().error(I),Promise.resolve().then(function(){return f.options.onError==null?void 0:f.options.onError(I,f.state.variables,f.state.context)}).then(function(){return f.options.onSettled==null?void 0:f.options.onSettled(void 0,I,f.state.variables,f.state.context)}).then(function(){throw f.dispatch({type:"error",error:I}),I})})},n.executeMutation=function(){var f=this,y;return this.retryer=new pw({fn:function(){return f.options.mutationFn?f.options.mutationFn(f.state.variables):Promise.reject("No mutationFn found")},onFail:function(){f.dispatch({type:"failed"})},onPause:function(){f.dispatch({type:"pause"})},onContinue:function(){f.dispatch({type:"continue"})},retry:(y=this.options.retry)!=null?y:0,retryDelay:this.options.retryDelay}),this.retryer.promise},n.dispatch=function(f){var y=this;this.state=qP(this.state,f),ji.batch(function(){y.observers.forEach(function(w){w.onMutationUpdate(f)}),y.mutationCache.notify(y)})},r}();function VP(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function qP(r,n){switch(n.type){case"failed":return Yr({},r,{failureCount:r.failureCount+1});case"pause":return Yr({},r,{isPaused:!0});case"continue":return Yr({},r,{isPaused:!1});case"loading":return Yr({},r,{context:n.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:n.variables});case"success":return Yr({},r,{data:n.data,error:null,status:"success",isPaused:!1});case"error":return Yr({},r,{data:void 0,error:n.error,failureCount:r.failureCount+1,isPaused:!1,status:"error"});case"setState":return Yr({},r,n.state);default:return r}}var ZP=function(r){mm(n,r);function n(f){var y;return y=r.call(this)||this,y.config=f||{},y.mutations=[],y.mutationId=0,y}var u=n.prototype;return u.build=function(y,w,l){var I=new jP({mutationCache:this,mutationId:++this.mutationId,options:y.defaultMutationOptions(w),state:l,defaultOptions:w.mutationKey?y.getMutationDefaults(w.mutationKey):void 0,meta:w.meta});return this.add(I),I},u.add=function(y){this.mutations.push(y),this.notify(y)},u.remove=function(y){this.mutations=this.mutations.filter(function(w){return w!==y}),y.cancel(),this.notify(y)},u.clear=function(){var y=this;ji.batch(function(){y.mutations.forEach(function(w){y.remove(w)})})},u.getAll=function(){return this.mutations},u.find=function(y){return typeof y.exact=="undefined"&&(y.exact=!0),this.mutations.find(function(w){return iw(y,w)})},u.findAll=function(y){return this.mutations.filter(function(w){return iw(y,w)})},u.notify=function(y){var w=this;ji.batch(function(){w.listeners.forEach(function(l){l(y)})})},u.onFocus=function(){this.resumePausedMutations()},u.onOnline=function(){this.resumePausedMutations()},u.resumePausedMutations=function(){var y=this.mutations.filter(function(w){return w.state.isPaused});return ji.batch(function(){return y.reduce(function(w,l){return w.then(function(){return l.continue().catch(Co)})},Promise.resolve())})},n}(ym);function GP(){return{onFetch:function(n){n.fetchFn=function(){var u,f,y,w,l,I,M=(u=n.fetchOptions)==null||(f=u.meta)==null?void 0:f.refetchPage,j=(y=n.fetchOptions)==null||(w=y.meta)==null?void 0:w.fetchMore,ee=j==null?void 0:j.pageParam,Ce=(j==null?void 0:j.direction)==="forward",W=(j==null?void 0:j.direction)==="backward",xe=((l=n.state.data)==null?void 0:l.pages)||[],Le=((I=n.state.data)==null?void 0:I.pageParams)||[],De=lw(),se=De==null?void 0:De.signal,re=Le,oe=!1,be=n.options.queryFn||function(){return Promise.reject("Missing queryFn")},Re=function(Ut,Cr,Ir,Fn){return re=Fn?[Cr].concat(re):[].concat(re,[Cr]),Fn?[Ir].concat(Ut):[].concat(Ut,[Ir])},Me=function(Ut,Cr,Ir,Fn){if(oe)return Promise.reject("Cancelled");if(typeof Ir=="undefined"&&!Cr&&Ut.length)return Promise.resolve(Ut);var Qt={queryKey:n.queryKey,signal:se,pageParam:Ir,meta:n.meta},Bn=be(Qt),Gt=Promise.resolve(Bn).then(function(zt){return Re(Ut,Ir,zt,Fn)});if(wm(Bn)){var Ye=Gt;Ye.cancel=Bn.cancel}return Gt},Ie;if(!xe.length)Ie=Me([]);else if(Ce){var je=typeof ee!="undefined",at=je?ee:dw(n.options,xe);Ie=Me(xe,je,at)}else if(W){var Xe=typeof ee!="undefined",_t=Xe?ee:WP(n.options,xe);Ie=Me(xe,Xe,_t,!0)}else(function(){re=[];var Ct=typeof n.options.getNextPageParam=="undefined",Ut=M&&xe[0]?M(xe[0],0,xe):!0;Ie=Ut?Me([],Ct,Le[0]):Promise.resolve(Re([],Le[0],xe[0]));for(var Cr=function(Qt){Ie=Ie.then(function(Bn){var Gt=M&&xe[Qt]?M(xe[Qt],Qt,xe):!0;if(Gt){var Ye=Ct?Le[Qt]:dw(n.options,Bn);return Me(Bn,Ct,Ye)}return Promise.resolve(Re(Bn,Le[Qt],xe[Qt]))})},Ir=1;Ir<xe.length;Ir++)Cr(Ir)})();var Mt=Ie.then(function(Ct){return{pages:Ct,pageParams:re}}),bt=Mt;return bt.cancel=function(){oe=!0,De==null||De.abort(),wm(Ie)&&Ie.cancel()},Mt}}}}function dw(r,n){return r.getNextPageParam==null?void 0:r.getNextPageParam(n[n.length-1],n)}function WP(r,n){return r.getPreviousPageParam==null?void 0:r.getPreviousPageParam(n[0],n)}var hC=function(){function r(u){u===void 0&&(u={}),this.queryCache=u.queryCache||new NP,this.mutationCache=u.mutationCache||new ZP,this.defaultOptions=u.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var n=r.prototype;return n.mount=function(){var f=this;this.unsubscribeFocus=xm.subscribe(function(){xm.isFocused()&&bm.isOnline()&&(f.mutationCache.onFocus(),f.queryCache.onFocus())}),this.unsubscribeOnline=bm.subscribe(function(){xm.isFocused()&&bm.isOnline()&&(f.mutationCache.onOnline(),f.queryCache.onOnline())})},n.unmount=function(){var f,y;(f=this.unsubscribeFocus)==null||f.call(this),(y=this.unsubscribeOnline)==null||y.call(this)},n.isFetching=function(f,y){var w=Hu(f,y),l=w[0];return l.fetching=!0,this.queryCache.findAll(l).length},n.isMutating=function(f){return this.mutationCache.findAll(Yr({},f,{fetching:!0})).length},n.getQueryData=function(f,y){var w;return(w=this.queryCache.find(f,y))==null?void 0:w.state.data},n.getQueriesData=function(f){return this.getQueryCache().findAll(f).map(function(y){var w=y.queryKey,l=y.state,I=l.data;return[w,I]})},n.setQueryData=function(f,y,w){var l=Dg(f),I=this.defaultQueryOptions(l);return this.queryCache.build(this,I).setData(y,w)},n.setQueriesData=function(f,y,w){var l=this;return ji.batch(function(){return l.getQueryCache().findAll(f).map(function(I){var M=I.queryKey;return[M,l.setQueryData(M,y,w)]})})},n.getQueryState=function(f,y){var w;return(w=this.queryCache.find(f,y))==null?void 0:w.state},n.removeQueries=function(f,y){var w=Hu(f,y),l=w[0],I=this.queryCache;ji.batch(function(){I.findAll(l).forEach(function(M){I.remove(M)})})},n.resetQueries=function(f,y,w){var l=this,I=Hu(f,y,w),M=I[0],j=I[1],ee=this.queryCache,Ce=Yr({},M,{active:!0});return ji.batch(function(){return ee.findAll(M).forEach(function(W){W.reset()}),l.refetchQueries(Ce,j)})},n.cancelQueries=function(f,y,w){var l=this,I=Hu(f,y,w),M=I[0],j=I[1],ee=j===void 0?{}:j;typeof ee.revert=="undefined"&&(ee.revert=!0);var Ce=ji.batch(function(){return l.queryCache.findAll(M).map(function(W){return W.cancel(ee)})});return Promise.all(Ce).then(Co).catch(Co)},n.invalidateQueries=function(f,y,w){var l,I,M,j=this,ee=Hu(f,y,w),Ce=ee[0],W=ee[1],xe=Yr({},Ce,{active:(l=(I=Ce.refetchActive)!=null?I:Ce.active)!=null?l:!0,inactive:(M=Ce.refetchInactive)!=null?M:!1});return ji.batch(function(){return j.queryCache.findAll(Ce).forEach(function(Le){Le.invalidate()}),j.refetchQueries(xe,W)})},n.refetchQueries=function(f,y,w){var l=this,I=Hu(f,y,w),M=I[0],j=I[1],ee=ji.batch(function(){return l.queryCache.findAll(M).map(function(W){return W.fetch(void 0,Yr({},j,{meta:{refetchPage:M==null?void 0:M.refetchPage}}))})}),Ce=Promise.all(ee).then(Co);return(j==null?void 0:j.throwOnError)||(Ce=Ce.catch(Co)),Ce},n.fetchQuery=function(f,y,w){var l=Dg(f,y,w),I=this.defaultQueryOptions(l);typeof I.retry=="undefined"&&(I.retry=!1);var M=this.queryCache.build(this,I);return M.isStaleByTime(I.staleTime)?M.fetch(I):Promise.resolve(M.state.data)},n.prefetchQuery=function(f,y,w){return this.fetchQuery(f,y,w).then(Co).catch(Co)},n.fetchInfiniteQuery=function(f,y,w){var l=Dg(f,y,w);return l.behavior=GP(),this.fetchQuery(l)},n.prefetchInfiniteQuery=function(f,y,w){return this.fetchInfiniteQuery(f,y,w).then(Co).catch(Co)},n.cancelMutations=function(){var f=this,y=ji.batch(function(){return f.mutationCache.getAll().map(function(w){return w.cancel()})});return Promise.all(y).then(Co).catch(Co)},n.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},n.executeMutation=function(f){return this.mutationCache.build(this,f).execute()},n.getQueryCache=function(){return this.queryCache},n.getMutationCache=function(){return this.mutationCache},n.getDefaultOptions=function(){return this.defaultOptions},n.setDefaultOptions=function(f){this.defaultOptions=f},n.setQueryDefaults=function(f,y){var w=this.queryDefaults.find(function(l){return Bl(f)===Bl(l.queryKey)});w?w.defaultOptions=y:this.queryDefaults.push({queryKey:f,defaultOptions:y})},n.getQueryDefaults=function(f){var y;return f?(y=this.queryDefaults.find(function(w){return gm(f,w.queryKey)}))==null?void 0:y.defaultOptions:void 0},n.setMutationDefaults=function(f,y){var w=this.mutationDefaults.find(function(l){return Bl(f)===Bl(l.mutationKey)});w?w.defaultOptions=y:this.mutationDefaults.push({mutationKey:f,defaultOptions:y})},n.getMutationDefaults=function(f){var y;return f?(y=this.mutationDefaults.find(function(w){return gm(f,w.mutationKey)}))==null?void 0:y.defaultOptions:void 0},n.defaultQueryOptions=function(f){if(f==null?void 0:f._defaulted)return f;var y=Yr({},this.defaultOptions.queries,this.getQueryDefaults(f==null?void 0:f.queryKey),f,{_defaulted:!0});return!y.queryHash&&y.queryKey&&(y.queryHash=Og(y.queryKey,y)),y},n.defaultQueryObserverOptions=function(f){return this.defaultQueryOptions(f)},n.defaultMutationOptions=function(f){return(f==null?void 0:f._defaulted)?f:Yr({},this.defaultOptions.mutations,this.getMutationDefaults(f==null?void 0:f.mutationKey),f,{_defaulted:!0})},n.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},r}(),$P=YT.unstable_batchedUpdates;ji.setBatchNotifyFunction($P);var HP=console;BP(HP);var mw=Rc.createContext(void 0),XP=Rc.createContext(!1);function KP(r){return r&&typeof window!="undefined"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=mw),window.ReactQueryClientContext):mw}var fC=function(n){var u=n.client,f=n.contextSharing,y=f===void 0?!1:f,w=n.children;Rc.useEffect(function(){return u.mount(),function(){u.unmount()}},[u]);var l=KP(y);return Rc.createElement(XP.Provider,{value:y},Rc.createElement(l.Provider,{value:u},w))};try{self["workbox:window:6.4.1"]&&_()}catch{}function yw(r,n){return new Promise(function(u){var f=new MessageChannel;f.port1.onmessage=function(y){u(y.data)},r.postMessage(n,[f.port2])})}function JP(r,n){for(var u=0;u<n.length;u++){var f=n[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(r,f.key,f)}}function vw(r,n){(n==null||n>r.length)&&(n=r.length);for(var u=0,f=new Array(n);u<n;u++)f[u]=r[u];return f}function YP(r,n){var u;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(u=function(y,w){if(y){if(typeof y=="string")return vw(y,w);var l=Object.prototype.toString.call(y).slice(8,-1);return l==="Object"&&y.constructor&&(l=y.constructor.name),l==="Map"||l==="Set"?Array.from(y):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?vw(y,w):void 0}}(r))||n&&r&&typeof r.length=="number"){u&&(r=u);var f=0;return function(){return f>=r.length?{done:!0}:{done:!1,value:r[f++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(u=r[Symbol.iterator]()).next.bind(u)}try{self["workbox:core:6.4.1"]&&_()}catch{}var Bg=function(){var r=this;this.promise=new Promise(function(n,u){r.resolve=n,r.reject=u})};function Ug(r,n){var u=location.href;return new URL(r,u).href===new URL(n,u).href}var af=function(r,n){this.type=r,Object.assign(this,n)};function Sm(r,n,u){return u?n?n(r):r:(r&&r.then||(r=Promise.resolve(r)),n?r.then(n):r)}function QP(){}var eC={type:"SKIP_WAITING"};function gw(r,n){if(!n)return r&&r.then?r.then(QP):Promise.resolve()}var dC=function(r){var n,u;function f(I,M){var j,ee;return M===void 0&&(M={}),(j=r.call(this)||this).nn={},j.tn=0,j.rn=new Bg,j.en=new Bg,j.on=new Bg,j.un=0,j.an=new Set,j.cn=function(){var Ce=j.fn,W=Ce.installing;j.tn>0||!Ug(W.scriptURL,j.sn.toString())||performance.now()>j.un+6e4?(j.vn=W,Ce.removeEventListener("updatefound",j.cn)):(j.hn=W,j.an.add(W),j.rn.resolve(W)),++j.tn,W.addEventListener("statechange",j.ln)},j.ln=function(Ce){var W=j.fn,xe=Ce.target,Le=xe.state,De=xe===j.vn,se={sw:xe,isExternal:De,originalEvent:Ce};!De&&j.mn&&(se.isUpdate=!0),j.dispatchEvent(new af(Le,se)),Le==="installed"?j.wn=self.setTimeout(function(){Le==="installed"&&W.waiting===xe&&j.dispatchEvent(new af("waiting",se))},200):Le==="activating"&&(clearTimeout(j.wn),De||j.en.resolve(xe))},j.dn=function(Ce){var W=j.hn,xe=W!==navigator.serviceWorker.controller;j.dispatchEvent(new af("controlling",{isExternal:xe,originalEvent:Ce,sw:W,isUpdate:j.mn})),xe||j.on.resolve(W)},j.gn=(ee=function(Ce){var W=Ce.data,xe=Ce.ports,Le=Ce.source;return Sm(j.getSW(),function(){j.an.has(Le)&&j.dispatchEvent(new af("message",{data:W,originalEvent:Ce,ports:xe,sw:Le}))})},function(){for(var Ce=[],W=0;W<arguments.length;W++)Ce[W]=arguments[W];try{return Promise.resolve(ee.apply(this,Ce))}catch(xe){return Promise.reject(xe)}}),j.sn=I,j.nn=M,navigator.serviceWorker.addEventListener("message",j.gn),j}u=r,(n=f).prototype=Object.create(u.prototype),n.prototype.constructor=n,n.__proto__=u;var y,w,l=f.prototype;return l.register=function(I){var M=(I===void 0?{}:I).immediate,j=M!==void 0&&M;try{var ee=this;return function(Ce,W){var xe=Ce();return xe&&xe.then?xe.then(W):W(xe)}(function(){if(!j&&document.readyState!=="complete")return gw(new Promise(function(Ce){return window.addEventListener("load",Ce)}))},function(){return ee.mn=Boolean(navigator.serviceWorker.controller),ee.yn=ee.pn(),Sm(ee.bn(),function(Ce){ee.fn=Ce,ee.yn&&(ee.hn=ee.yn,ee.en.resolve(ee.yn),ee.on.resolve(ee.yn),ee.yn.addEventListener("statechange",ee.ln,{once:!0}));var W=ee.fn.waiting;return W&&Ug(W.scriptURL,ee.sn.toString())&&(ee.hn=W,Promise.resolve().then(function(){ee.dispatchEvent(new af("waiting",{sw:W,wasWaitingBeforeRegister:!0}))}).then(function(){})),ee.hn&&(ee.rn.resolve(ee.hn),ee.an.add(ee.hn)),ee.fn.addEventListener("updatefound",ee.cn),navigator.serviceWorker.addEventListener("controllerchange",ee.dn),ee.fn})})}catch(Ce){return Promise.reject(Ce)}},l.update=function(){try{return this.fn?gw(this.fn.update()):void 0}catch(I){return Promise.reject(I)}},l.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},l.messageSW=function(I){try{return Sm(this.getSW(),function(M){return yw(M,I)})}catch(M){return Promise.reject(M)}},l.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&yw(this.fn.waiting,eC)},l.pn=function(){var I=navigator.serviceWorker.controller;return I&&Ug(I.scriptURL,this.sn.toString())?I:void 0},l.bn=function(){try{var I=this;return function(M,j){try{var ee=M()}catch(Ce){return j(Ce)}return ee&&ee.then?ee.then(void 0,j):ee}(function(){return Sm(navigator.serviceWorker.register(I.sn,I.nn),function(M){return I.un=performance.now(),M})},function(M){throw M})}catch(M){return Promise.reject(M)}},y=f,(w=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&JP(y.prototype,w),f}(function(){function r(){this.Pn=new Map}var n=r.prototype;return n.addEventListener=function(u,f){this.Sn(u).add(f)},n.removeEventListener=function(u,f){this.Sn(u).delete(f)},n.dispatchEvent=function(u){u.target=this;for(var f,y=YP(this.Sn(u.type));!(f=y()).done;)(0,f.value)(u)},n.Sn=function(u){return this.Pn.has(u)||this.Pn.set(u,new Set),this.Pn.get(u)},r}());export{rC as F,iC as M,aC as P,hC as Q,Rc as R,tC as a,P0 as b,uC as c,pC as d,cC as e,lC as f,oC as g,fP as h,YT as i,pS as j,fC as k,I0 as l,nC as m,Si as r,sC as u,dC as v};
