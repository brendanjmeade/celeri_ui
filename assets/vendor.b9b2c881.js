var Ow=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},kg={exports:{}};(function(r,a){(function(p,m){r.exports=m()})(Ow,function(){var p,m,g;function S(u,z){if(!p)p=z;else if(!m)m=z;else{var M="var sharedChunk = {}; ("+p+")(sharedChunk); ("+m+")(sharedChunk);",K={};p(K),g=z(K),typeof window!="undefined"&&(g.workerUrl=window.URL.createObjectURL(new Blob([M],{type:"text/javascript"})))}}return S(["exports"],function(u){function z(e,t){return e(t={exports:{}},t.exports),t.exports}var M=K;function K(e,t,n,l){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=l,this.p2x=n,this.p2y=l}K.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},K.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},K.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},K.prototype.solveCurveX=function(e,t){var n,l,h,f,y;for(t===void 0&&(t=1e-6),h=e,y=0;y<8;y++){if(f=this.sampleCurveX(h)-e,Math.abs(f)<t)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=f/w}if((h=e)<(n=0))return n;if(h>(l=1))return l;for(;n<l;){if(f=this.sampleCurveX(h),Math.abs(f-e)<t)return h;e>f?n=h:l=h,h=.5*(l-n)+n}return h},K.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var le=Ce;function Ce(e,t){this.x=e,this.y=t}Ce.prototype={clone:function(){return new Ce(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),l=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=l,this},_rotateAround:function(e,t){var n=Math.cos(e),l=Math.sin(e),h=t.y+l*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-l*(this.y-t.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ce.convert=function(e){return e instanceof Ce?e:Array.isArray(e)?new Ce(e[0],e[1]):e};var ee=typeof self!="undefined"?self:{},Se=Math.pow(2,53)-1;function Oe(e,t,n,l){var h=new M(e,t,n,l);return function(f){return h.solve(f)}}var Ze=Oe(.25,.1,.25,1);function se(e,t,n){return Math.min(n,Math.max(t,e))}function ne(e,t,n){var l=n-t,h=((e-t)%l+l)%l+t;return h===t?n:h}function oe(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var l=0,h=t;l<h.length;l+=1){var f=h[l];for(var y in f)e[y]=f[y]}return e}var _e=1;function we(){return _e++}function ot(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Le(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function ut(e,t){e.forEach(function(n){t[n]&&(t[n]=t[n].bind(t))})}function mt(e,t){return e.indexOf(t,e.length-t.length)!==-1}function Qe(e,t,n){var l={};for(var h in e)l[h]=t.call(n||this,e[h],h,e);return l}function Qt(e,t,n){var l={};for(var h in e)t.call(n||this,e[h],h,e)&&(l[h]=e[h]);return l}function Jr(e){return Array.isArray(e)?e.map(Jr):typeof e=="object"&&e?Qe(e,Jr):e}var Mr={};function gt(e){Mr[e]||(typeof console!="undefined"&&console.warn(e),Mr[e]=!0)}function rr(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function qr(e){for(var t=0,n=0,l=e.length,h=l-1,f=void 0,y=void 0;n<l;h=n++)t+=((y=e[h]).x-(f=e[n]).x)*(f.y+y.y);return t}function nr(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function un(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(l,h,f,y){var w=f||y;return t[h]=!w||w.toLowerCase(),""}),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var Zr=null;function cn(e){if(Zr==null){var t=e.navigator?e.navigator.userAgent:null;Zr=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Zr}function bn(e){try{var t=ee[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var Fe,pt,bt,Yt,pr=ee.performance&&ee.performance.now?ee.performance.now.bind(ee.performance):Date.now.bind(Date),_i=ee.requestAnimationFrame||ee.mozRequestAnimationFrame||ee.webkitRequestAnimationFrame||ee.msRequestAnimationFrame,dr=ee.cancelAnimationFrame||ee.mozCancelAnimationFrame||ee.webkitCancelAnimationFrame||ee.msCancelAnimationFrame,Sn={now:pr,frame:function(e){var t=_i(e);return{cancel:function(){return dr(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var n=ee.document.createElement("canvas"),l=n.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,l.drawImage(e,0,0,e.width,e.height),l.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return Fe||(Fe=ee.document.createElement("a")),Fe.href=e,Fe.href},hardwareConcurrency:ee.navigator&&ee.navigator.hardwareConcurrency||4,get devicePixelRatio(){return ee.devicePixelRatio},get prefersReducedMotion(){return!!ee.matchMedia&&(pt==null&&(pt=ee.matchMedia("(prefers-reduced-motion: reduce)")),pt.matches)}},Ot={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Mi={supported:!1,testSupport:function(e){!ga&&Yt&&(xi?kt(e):bt=e)}},ga=!1,xi=!1;function kt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Yt),e.isContextLost())return;Mi.supported=!0}catch{}e.deleteTexture(t),ga=!0}ee.document&&((Yt=ee.document.createElement("img")).onload=function(){bt&&kt(bt),bt=null,xi=!0},Yt.onerror=function(){ga=!0,bt=null},Yt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var oo="01",En=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function ti(e){return e.indexOf("mapbox:")===0}En.prototype._createSkuToken=function(){var e=function(){for(var t="",n=0;n<10;n++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",oo,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},En.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},En.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},En.prototype.normalizeStyleURL=function(e,t){if(!ti(e))return e;var n=ri(e);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},En.prototype.normalizeGlyphsURL=function(e,t){if(!ti(e))return e;var n=ri(e);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},En.prototype.normalizeSourceURL=function(e,t){if(!ti(e))return e;var n=ri(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)},En.prototype.normalizeSpriteURL=function(e,t,n,l){var h=ri(e);return ti(e)?(h.path="/styles/v1"+h.path+"/sprite"+t+n,this._makeAPIURL(h,this._customAccessToken||l)):(h.path+=""+t+n,Oo(h))},En.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!ti(e))return e;var n=ri(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Sn.devicePixelRatio>=2||t===512?"@2x":"")+(Mi.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var l=this._customAccessToken||function(h){for(var f=0,y=h;f<y.length;f+=1){var w=y[f].match(/^access_token=(.*)$/);if(w)return w[1]}return null}(n.params)||Ot.ACCESS_TOKEN;return Ot.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,l)},En.prototype.canonicalizeTileURL=function(e,t){var n=ri(e);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return e;var l="mapbox://tiles/";l+=n.path.replace("/v4/","");var h=n.params;return t&&(h=h.filter(function(f){return!f.match(/^access_token=/)})),h.length&&(l+="?"+h.join("&")),l},En.prototype.canonicalizeTileset=function(e,t){for(var n=!!t&&ti(t),l=[],h=0,f=e.tiles||[];h<f.length;h+=1){var y=f[h];wi(y)?l.push(this.canonicalizeTileURL(y,n)):l.push(y)}return l},En.prototype._makeAPIURL=function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=ri(Ot.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){var h=e.params.indexOf("secure");h>=0&&e.params.splice(h,1)}if(l.path!=="/"&&(e.path=""+l.path+e.path),!Ot.REQUIRE_ACCESS_TOKEN)return Oo(e);if(!(t=t||Ot.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return e.params=e.params.filter(function(f){return f.indexOf("access_token")===-1}),e.params.push("access_token="+t),Oo(e)};var Ou=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function wi(e){return Ou.test(e)}var ls=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ri(e){var t=e.match(ls);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Oo(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function _a(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(ee.atob(t[1]).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var ni=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ni.prototype.getStorageKey=function(e){var t,n=_a(Ot.ACCESS_TOKEN);return t=n&&n.u?ee.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,function(l,h){return String.fromCharCode(Number("0x"+h))})):Ot.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},ni.prototype.fetchEventData=function(){var e=bn("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var l=ee.localStorage.getItem(t);l&&(this.eventData=JSON.parse(l));var h=ee.localStorage.getItem(n);h&&(this.anonId=h)}catch{gt("Unable to read from LocalStorage")}},ni.prototype.saveEventData=function(){var e=bn("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{ee.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&ee.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{gt("Unable to write to LocalStorage")}},ni.prototype.processRequests=function(e){},ni.prototype.postEvent=function(e,t,n,l){var h=this;if(Ot.EVENTS_URL){var f=ri(Ot.EVENTS_URL);f.params.push("access_token="+(l||Ot.ACCESS_TOKEN||""));var y={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:oo,userId:this.anonId},w=t?oe(y,t):y,E={url:Oo(f),headers:{"Content-Type":"text/plain"},body:JSON.stringify([w])};this.pendingRequest=_r(E,function(T){h.pendingRequest=null,n(T),h.saveEventData(),h.processRequests(l)})}},ni.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var ii,Fo,bi=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(n,l,h,f){this.skuToken=h,(Ot.EVENTS_URL&&f||Ot.ACCESS_TOKEN&&Array.isArray(n)&&n.some(function(y){return ti(y)||wi(y)}))&&this.queueRequest({id:l,timestamp:Date.now()},f)},t.prototype.processRequests=function(n){var l=this;if(!this.pendingRequest&&this.queue.length!==0){var h=this.queue.shift(),f=h.id,y=h.timestamp;f&&this.success[f]||(this.anonId||this.fetchEventData(),Le(this.anonId)||(this.anonId=ot()),this.postEvent(y,{skuToken:this.skuToken},function(w){w||f&&(l.success[f]=!0)},n))}},t}(ni),sl=new(function(e){function t(n){e.call(this,"appUserTurnstile"),this._customAccessToken=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(n,l){Ot.EVENTS_URL&&Ot.ACCESS_TOKEN&&Array.isArray(n)&&n.some(function(h){return ti(h)||wi(h)})&&this.queueRequest(Date.now(),l)},t.prototype.processRequests=function(n){var l=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var h=_a(Ot.ACCESS_TOKEN),f=h?h.u:Ot.ACCESS_TOKEN,y=f!==this.eventData.tokenU;Le(this.anonId)||(this.anonId=ot(),y=!0);var w=this.queue.shift();if(this.eventData.lastSuccess){var E=new Date(this.eventData.lastSuccess),T=new Date(w),P=(w-this.eventData.lastSuccess)/864e5;y=y||P>=1||P<-1||E.getDate()!==T.getDate()}else y=!0;if(!y)return this.processRequests();this.postEvent(w,{"enabled.telemetry":!1},function(C){C||(l.eventData.lastSuccess=w,l.eventData.tokenU=f)},n)}},t}(ni)),ll=sl.postTurnstileEvent.bind(sl),us=new bi,cs=us.postMapLoadEvent.bind(us),xa=500,ul=50;function wa(){ee.caches&&!ii&&(ii=ee.caches.open("mapbox-tiles"))}function ps(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var Bo,hs=1/0;function fs(){return Bo==null&&(Bo=ee.OffscreenCanvas&&new ee.OffscreenCanvas(1,1).getContext("2d")&&typeof ee.createImageBitmap=="function"),Bo}var cl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(cl);var pl=function(e){function t(n,l,h){l===401&&wi(h)&&(n+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,n),this.status=l,this.url=h,this.name=this.constructor.name,this.message=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Uo=nr()?function(){return self.worker&&self.worker.referrer}:function(){return(ee.location.protocol==="blob:"?ee.parent:ee).location.href},Wi,Xi,ba=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(Uo())&&!/^\w+:/.test(n))){if(ee.fetch&&ee.Request&&ee.AbortController&&ee.Request.prototype.hasOwnProperty("signal"))return function(l,h){var f,y=new ee.AbortController,w=new ee.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:Uo(),signal:y.signal}),E=!1,T=!1,P=(f=w.url).indexOf("sku=")>0&&wi(f);l.type==="json"&&w.headers.set("Accept","application/json");var C=function(R,q,Z){if(!T){if(R&&R.message!=="SecurityError"&&gt(R),q&&Z)return L(q);var J=Date.now();ee.fetch(w).then(function($){if($.ok){var ae=P?$.clone():null;return L($,ae,J)}return h(new pl($.statusText,$.status,l.url))}).catch(function($){$.code!==20&&h(new Error($.message))})}},L=function(R,q,Z){(l.type==="arrayBuffer"?R.arrayBuffer():l.type==="json"?R.json():R.text()).then(function(J){T||(q&&Z&&function($,ae,pe){if(wa(),ii){var he={status:ae.status,statusText:ae.statusText,headers:new ee.Headers};ae.headers.forEach(function(xe,Pe){return he.headers.set(Pe,xe)});var de=un(ae.headers.get("Cache-Control")||"");de["no-store"]||(de["max-age"]&&he.headers.set("Expires",new Date(pe+1e3*de["max-age"]).toUTCString()),new Date(he.headers.get("Expires")).getTime()-pe<42e4||function(xe,Pe){if(Fo===void 0)try{new Response(new ReadableStream),Fo=!0}catch{Fo=!1}Fo?Pe(xe.body):xe.blob().then(Pe)}(ae,function(xe){var Pe=new ee.Response(xe,he);wa(),ii&&ii.then(function(ze){return ze.put(ps($.url),Pe)}).catch(function(ze){return gt(ze.message)})}))}}(w,q,Z),E=!0,h(null,J,R.headers.get("Cache-Control"),R.headers.get("Expires")))}).catch(function(J){T||h(new Error(J.message))})};return P?function(R,q){if(wa(),!ii)return q(null);var Z=ps(R.url);ii.then(function(J){J.match(Z).then(function($){var ae=function(pe){if(!pe)return!1;var he=new Date(pe.headers.get("Expires")||0),de=un(pe.headers.get("Cache-Control")||"");return he>Date.now()&&!de["no-cache"]}($);J.delete(Z),ae&&J.put(Z,$.clone()),q(null,$,ae)}).catch(q)}).catch(q)}(w,C):C(null,null),{cancel:function(){T=!0,E||y.abort()}}}(e,t);if(nr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(l,h){var f=new ee.XMLHttpRequest;for(var y in f.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(f.responseType="arraybuffer"),l.headers)f.setRequestHeader(y,l.headers[y]);return l.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=l.credentials==="include",f.onerror=function(){h(new Error(f.statusText))},f.onload=function(){if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){var w=f.response;if(l.type==="json")try{w=JSON.parse(f.response)}catch(E){return h(E)}h(null,w,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else h(new pl(f.statusText,f.status,l.url))},f.send(l.body),{cancel:function(){return f.abort()}}}(e,t)},ds=function(e,t){return ba(oe(e,{type:"arrayBuffer"}),t)},_r=function(e,t){return ba(oe(e,{method:"POST"}),t)},k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Wi=[],Xi=0;var D=function(e,t){if(Mi.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Xi>=Ot.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return Wi.push(n),n}Xi++;var l=!1,h=function(){if(!l)for(l=!0,Xi--;Wi.length&&Xi<Ot.MAX_PARALLEL_IMAGE_REQUESTS;){var y=Wi.shift();y.cancelled||(y.cancel=D(y.requestParameters,y.callback).cancel)}},f=ds(e,function(y,w,E,T){h(),y?t(y):w&&(fs()?function(P,C){var L=new ee.Blob([new Uint8Array(P)],{type:"image/png"});ee.createImageBitmap(L).then(function(R){C(null,R)}).catch(function(R){C(new Error("Could not load image because of "+R.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(w,t):function(P,C,L,R){var q=new ee.Image,Z=ee.URL;q.onload=function(){C(null,q),Z.revokeObjectURL(q.src),q.onload=null,ee.requestAnimationFrame(function(){q.src=k})},q.onerror=function(){return C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var J=new ee.Blob([new Uint8Array(P)],{type:"image/png"});q.cacheControl=L,q.expires=R,q.src=P.byteLength?Z.createObjectURL(J):k}(w,t,E,T))});return{cancel:function(){f.cancel(),h()}}};function O(e,t,n){n[e]&&n[e].indexOf(t)!==-1||(n[e]=n[e]||[],n[e].push(t))}function V(e,t,n){if(n&&n[e]){var l=n[e].indexOf(t);l!==-1&&n[e].splice(l,1)}}var X=function(e,t){t===void 0&&(t={}),oe(this,t),this.type=e},te=function(e){function t(n,l){l===void 0&&(l={}),e.call(this,"error",oe({error:n},l))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(X),ie=function(){};ie.prototype.on=function(e,t){return this._listeners=this._listeners||{},O(e,t,this._listeners),this},ie.prototype.off=function(e,t){return V(e,t,this._listeners),V(e,t,this._oneTimeListeners),this},ie.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},O(e,t,this._oneTimeListeners),this},ie.prototype.fire=function(e,t){typeof e=="string"&&(e=new X(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;for(var l=0,h=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];l<h.length;l+=1)h[l].call(this,e);for(var f=0,y=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];f<y.length;f+=1){var w=y[f];V(n,w,this._oneTimeListeners),w.call(this,e)}var E=this._eventedParent;E&&(oe(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),E.fire(e))}else e instanceof te&&console.error(e.error);return this},ie.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ie.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var U={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},H=function(e,t,n,l){this.message=(e?e+": ":"")+n,l&&(this.identifier=l),t!=null&&t.__line__&&(this.line=t.__line__)};function ce(e){var t=e.value;return t?[new H(e.key,t,"constants have been deprecated as of v8")]:[]}function Ee(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var l=0,h=t;l<h.length;l+=1){var f=h[l];for(var y in f)e[y]=f[y]}return e}function Ie(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ve(e){if(Array.isArray(e))return e.map(ve);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=ve(e[n]);return t}return Ie(e)}var Te=function(e){function t(n,l){e.call(this,l),this.message=l,this.key=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),He=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var n=0,l=t;n<l.length;n+=1){var h=l[n];this.bindings[h[0]]=h[1]}};He.prototype.concat=function(e){return new He(this,e)},He.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},He.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var We={kind:"null"},ge={kind:"number"},Ve={kind:"string"},Me={kind:"boolean"},Re={kind:"color"},wt={kind:"object"},Ue={kind:"value"},At={kind:"collator"},Xt={kind:"formatted"},Et={kind:"resolvedImage"};function Ut(e,t){return{kind:"array",itemType:e,N:t}}function Mt(e){if(e.kind==="array"){var t=Mt(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var pn=[We,ge,Ve,Me,Re,Xt,wt,Ut(Ue),Et];function jt(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!jt(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var n=0,l=pn;n<l.length;n+=1)if(!jt(l[n],t))return null}}return"Expected "+Mt(e)+" but found "+Mt(t)+" instead."}function xr(e,t){return t.some(function(n){return n.kind===e.kind})}function Gt(e,t){return t.some(function(n){return n==="null"?e===null:n==="array"?Array.isArray(e):n==="object"?e&&!Array.isArray(e)&&typeof e=="object":n===typeof e})}var Ct=z(function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(w){return(w=Math.round(w))<0?0:w>255?255:w}function h(w){return l(w[w.length-1]==="%"?parseFloat(w)/100*255:parseInt(w))}function f(w){return(E=w[w.length-1]==="%"?parseFloat(w)/100:parseFloat(w))<0?0:E>1?1:E;var E}function y(w,E,T){return T<0?T+=1:T>1&&(T-=1),6*T<1?w+(E-w)*T*6:2*T<1?E:3*T<2?w+(E-w)*(2/3-T)*6:w}try{t.parseCSSColor=function(w){var E,T=w.replace(/ /g,"").toLowerCase();if(T in n)return n[T].slice();if(T[0]==="#")return T.length===4?(E=parseInt(T.substr(1),16))>=0&&E<=4095?[(3840&E)>>4|(3840&E)>>8,240&E|(240&E)>>4,15&E|(15&E)<<4,1]:null:T.length===7&&(E=parseInt(T.substr(1),16))>=0&&E<=16777215?[(16711680&E)>>16,(65280&E)>>8,255&E,1]:null;var P=T.indexOf("("),C=T.indexOf(")");if(P!==-1&&C+1===T.length){var L=T.substr(0,P),R=T.substr(P+1,C-(P+1)).split(","),q=1;switch(L){case"rgba":if(R.length!==4)return null;q=f(R.pop());case"rgb":return R.length!==3?null:[h(R[0]),h(R[1]),h(R[2]),q];case"hsla":if(R.length!==4)return null;q=f(R.pop());case"hsl":if(R.length!==3)return null;var Z=(parseFloat(R[0])%360+360)%360/360,J=f(R[1]),$=f(R[2]),ae=$<=.5?$*(J+1):$+J-$*J,pe=2*$-ae;return[l(255*y(pe,ae,Z+1/3)),l(255*y(pe,ae,Z)),l(255*y(pe,ae,Z-1/3)),q];default:return null}}return null}}catch{}}).parseCSSColor,Nt=function(e,t,n,l){l===void 0&&(l=1),this.r=e,this.g=t,this.b=n,this.a=l};Nt.parse=function(e){if(e){if(e instanceof Nt)return e;if(typeof e=="string"){var t=Ct(e);if(t)return new Nt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},Nt.prototype.toString=function(){var e=this.toArray(),t=e[1],n=e[2],l=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(n)+","+l+")"},Nt.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},Nt.black=new Nt(0,0,0,1),Nt.white=new Nt(1,1,1,1),Nt.transparent=new Nt(0,0,0,0),Nt.red=new Nt(1,0,0,1);var Tn=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Tn.prototype.compare=function(e,t){return this.collator.compare(e,t)},Tn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ms=function(e,t,n,l,h){this.text=e,this.image=t,this.scale=n,this.fontStack=l,this.textColor=h},Gr=function(e){this.sections=e};Gr.fromString=function(e){return new Gr([new ms(e,null,null,null,null)])},Gr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Gr.factory=function(e){return e instanceof Gr?e:Gr.fromString(e)},Gr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Gr.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var l=n[t];if(l.image)e.push(["image",l.image.name]);else{e.push(l.text);var h={};l.fontStack&&(h["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(h["font-scale"]=l.scale),l.textColor&&(h["text-color"]=["rgba"].concat(l.textColor.toArray())),e.push(h)}}return e};var In=function(e){this.name=e.name,this.available=e.available};function Fu(e,t,n,l){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:"Invalid rgba value ["+[e,t,n,l].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof l=="number"?[e,t,n,l]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ys(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof Nt||e instanceof Tn||e instanceof Gr||e instanceof In)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!ys(n[t]))return!1;return!0}if(typeof e=="object"){for(var l in e)if(!ys(e[l]))return!1;return!0}return!1}function wr(e){if(e===null)return We;if(typeof e=="string")return Ve;if(typeof e=="boolean")return Me;if(typeof e=="number")return ge;if(e instanceof Nt)return Re;if(e instanceof Tn)return At;if(e instanceof Gr)return Xt;if(e instanceof In)return Et;if(Array.isArray(e)){for(var t,n=e.length,l=0,h=e;l<h.length;l+=1){var f=wr(h[l]);if(t){if(t===f)continue;t=Ue;break}t=f}return Ut(t||Ue,n)}return wt}function vs(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof Nt||e instanceof Gr||e instanceof In?e.toString():JSON.stringify(e)}In.prototype.toString=function(){return this.name},In.fromString=function(e){return e?new In({name:e,available:!1}):null},In.prototype.serialize=function(){return["image",this.name]};var hn=function(e,t){this.type=e,this.value=t};hn.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!ys(e[1]))return t.error("invalid value");var n=e[1],l=wr(n),h=t.expectedType;return l.kind!=="array"||l.N!==0||!h||h.kind!=="array"||typeof h.N=="number"&&h.N!==0||(l=h),new hn(l,n)},hn.prototype.evaluate=function(){return this.value},hn.prototype.eachChild=function(){},hn.prototype.outputDefined=function(){return!0},hn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Nt?["rgba"].concat(this.value.toArray()):this.value instanceof Gr?this.value.serialize():this.value};var Wr=function(e){this.name="ExpressionEvaluationError",this.message=e};Wr.prototype.toJSON=function(){return this.message};var oi={string:Ve,number:ge,boolean:Me,object:wt},or=function(e,t){this.type=e,this.args=t};or.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,l=1,h=e[0];if(h==="array"){var f,y;if(e.length>2){var w=e[1];if(typeof w!="string"||!(w in oi)||w==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);f=oi[w],l++}else f=Ue;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);y=e[2],l++}n=Ut(f,y)}else n=oi[h];for(var E=[];l<e.length;l++){var T=t.parse(e[l],l,Ue);if(!T)return null;E.push(T)}return new or(n,E)},or.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!jt(this.type,wr(n)))return n;if(t===this.args.length-1)throw new Wr("Expected value to be of type "+Mt(this.type)+", but found "+Mt(wr(n))+" instead.")}return null},or.prototype.eachChild=function(e){this.args.forEach(e)},or.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},or.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){t.push(n.kind);var l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(function(h){return h.serialize()}))};var Si=function(e){this.type=Xt,this.sections=e};Si.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&typeof n=="object")return t.error("First argument must be an image or text section.");for(var l=[],h=!1,f=1;f<=e.length-1;++f){var y=e[f];if(h&&typeof y=="object"&&!Array.isArray(y)){h=!1;var w=null;if(y["font-scale"]&&!(w=t.parse(y["font-scale"],1,ge)))return null;var E=null;if(y["text-font"]&&!(E=t.parse(y["text-font"],1,Ut(Ve))))return null;var T=null;if(y["text-color"]&&!(T=t.parse(y["text-color"],1,Re)))return null;var P=l[l.length-1];P.scale=w,P.font=E,P.textColor=T}else{var C=t.parse(e[f],1,Ue);if(!C)return null;var L=C.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");h=!0,l.push({content:C,scale:null,font:null,textColor:null})}}return new Si(l)},Si.prototype.evaluate=function(e){return new Gr(this.sections.map(function(t){var n=t.content.evaluate(e);return wr(n)===Et?new ms("",n,null,null,null):new ms(vs(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},Si.prototype.eachChild=function(e){for(var t=0,n=this.sections;t<n.length;t+=1){var l=n[t];e(l.content),l.scale&&e(l.scale),l.font&&e(l.font),l.textColor&&e(l.textColor)}},Si.prototype.outputDefined=function(){return!1},Si.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var l=n[t];e.push(l.content.serialize());var h={};l.scale&&(h["font-scale"]=l.scale.serialize()),l.font&&(h["text-font"]=l.font.serialize()),l.textColor&&(h["text-color"]=l.textColor.serialize()),e.push(h)}return e};var Xn=function(e){this.type=Et,this.input=e};Xn.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Ve);return n?new Xn(n):t.error("No image name provided.")},Xn.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=In.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n},Xn.prototype.eachChild=function(e){e(this.input)},Xn.prototype.outputDefined=function(){return!1},Xn.prototype.serialize=function(){return["image",this.input.serialize()]};var zp={"to-boolean":Me,"to-color":Re,"to-number":ge,"to-string":Ve},ai=function(e,t){this.type=e,this.args=t};ai.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var l=zp[n],h=[],f=1;f<e.length;f++){var y=t.parse(e[f],f,Ue);if(!y)return null;h.push(y)}return new ai(l,h)},ai.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var t,n,l=0,h=this.args;l<h.length;l+=1){if(n=null,(t=h[l].evaluate(e))instanceof Nt)return t;if(typeof t=="string"){var f=e.parseColor(t);if(f)return f}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Fu(t[0],t[1],t[2],t[3])))return new Nt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Wr(n||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var y=null,w=0,E=this.args;w<E.length;w+=1){if((y=E[w].evaluate(e))===null)return 0;var T=Number(y);if(!isNaN(T))return T}throw new Wr("Could not convert "+JSON.stringify(y)+" to number.")}return this.type.kind==="formatted"?Gr.fromString(vs(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?In.fromString(vs(this.args[0].evaluate(e))):vs(this.args[0].evaluate(e))},ai.prototype.eachChild=function(e){this.args.forEach(e)},ai.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ai.prototype.serialize=function(){if(this.type.kind==="formatted")return new Si([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Xn(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var id=["Unknown","Point","LineString","Polygon"],Hi=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Hi.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Hi.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?id[this.feature.type]:this.feature.type:null},Hi.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Hi.prototype.canonicalID=function(){return this.canonical},Hi.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Hi.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Nt.parse(e)),t};var en=function(e,t,n,l){this.name=e,this.type=t,this._evaluate=n,this.args=l};en.prototype.evaluate=function(e){return this._evaluate(e,this.args)},en.prototype.eachChild=function(e){this.args.forEach(e)},en.prototype.outputDefined=function(){return!1},en.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},en.parse=function(e,t){var n,l=e[0],h=en.definitions[l];if(!h)return t.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0);for(var f=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,w=y.filter(function(tt){var Ne=tt[0];return!Array.isArray(Ne)||Ne.length===e.length-1}),E=null,T=0,P=w;T<P.length;T+=1){var C=P[T],L=C[0],R=C[1];E=new uo(t.registry,t.path,null,t.scope);for(var q=[],Z=!1,J=1;J<e.length;J++){var $=e[J],ae=Array.isArray(L)?L[J-1]:L.type,pe=E.parse($,1+q.length,ae);if(!pe){Z=!0;break}q.push(pe)}if(!Z)if(Array.isArray(L)&&L.length!==q.length)E.error("Expected "+L.length+" arguments, but found "+q.length+" instead.");else{for(var he=0;he<q.length;he++){var de=Array.isArray(L)?L[he]:L.type,xe=q[he];E.concat(he+1).checkSubtype(de,xe.type)}if(E.errors.length===0)return new en(l,f,R,q)}}if(w.length===1)(n=t.errors).push.apply(n,E.errors);else{for(var Pe=(w.length?w:y).map(function(tt){var Ne;return Ne=tt[0],Array.isArray(Ne)?"("+Ne.map(Mt).join(", ")+")":"("+Mt(Ne.type)+"...)"}).join(" | "),ze=[],Ye=1;Ye<e.length;Ye++){var Be=t.parse(e[Ye],1+ze.length);if(!Be)return null;ze.push(Mt(Be.type))}t.error("Expected arguments of type "+Pe+", but found ("+ze.join(", ")+") instead.")}return null},en.register=function(e,t){for(var n in en.definitions=t,t)e[n]=en};var Di=function(e,t,n){this.type=At,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};function fn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function No(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function od(e,t){var n=(180+e[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,h=Math.pow(2,t.z);return[Math.round(n*h*8192),Math.round(l*h*8192)]}function ad(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function Bu(e,t){for(var n,l,h,f,y,w,E,T=!1,P=0,C=t.length;P<C;P++)for(var L=t[P],R=0,q=L.length;R<q-1;R++){if((f=(n=e)[0]-(l=L[R])[0])*(E=n[1]-(h=L[R+1])[1])-(w=n[0]-h[0])*(y=n[1]-l[1])==0&&f*w<=0&&y*E<=0)return!1;ad(e,L[R],L[R+1])&&(T=!T)}return T}function sd(e,t){for(var n=0;n<t.length;n++)if(Bu(e,t[n]))return!0;return!1}function Mp(e,t,n,l){var h=l[0]-n[0],f=l[1]-n[1],y=(e[0]-n[0])*f-h*(e[1]-n[1]),w=(t[0]-n[0])*f-h*(t[1]-n[1]);return y>0&&w<0||y<0&&w>0}function ld(e,t,n){for(var l=0,h=n;l<h.length;l+=1)for(var f=h[l],y=0;y<f.length-1;++y)if((C=[(P=f[y+1])[0]-(T=f[y])[0],P[1]-T[1]])[0]*(L=[(E=t)[0]-(w=e)[0],E[1]-w[1]])[1]-C[1]*L[0]!=0&&Mp(w,E,T,P)&&Mp(T,P,w,E))return!0;var w,E,T,P,C,L;return!1}function Dp(e,t){for(var n=0;n<e.length;++n)if(!Bu(e[n],t))return!1;for(var l=0;l<e.length-1;++l)if(ld(e[l],e[l+1],t))return!1;return!0}function Lp(e,t){for(var n=0;n<t.length;n++)if(Dp(e,t[n]))return!0;return!1}function Sa(e,t,n){for(var l=[],h=0;h<e.length;h++){for(var f=[],y=0;y<e[h].length;y++){var w=od(e[h][y],n);fn(t,w),f.push(w)}l.push(f)}return l}function Uu(e,t,n){for(var l=[],h=0;h<e.length;h++){var f=Sa(e[h],t,n);l.push(f)}return l}function gs(e,t,n,l){if(e[0]<n[0]||e[0]>n[2]){var h=.5*l,f=e[0]-n[0]>h?-l:n[0]-e[0]>h?l:0;f===0&&(f=e[0]-n[2]>h?-l:n[2]-e[0]>h?l:0),e[0]+=f}fn(t,e)}function Rp(e,t,n,l){for(var h=8192*Math.pow(2,l.z),f=[8192*l.x,8192*l.y],y=[],w=0,E=e;w<E.length;w+=1)for(var T=0,P=E[w];T<P.length;T+=1){var C=P[T],L=[C.x+f[0],C.y+f[1]];gs(L,t,n,h),y.push(L)}return y}function hl(e,t,n,l){for(var h,f=8192*Math.pow(2,l.z),y=[8192*l.x,8192*l.y],w=[],E=0,T=e;E<T.length;E+=1){for(var P=[],C=0,L=T[E];C<L.length;C+=1){var R=L[C],q=[R.x+y[0],R.y+y[1]];fn(t,q),P.push(q)}w.push(P)}if(t[2]-t[0]<=f/2){(h=t)[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var Z=0,J=w;Z<J.length;Z+=1)for(var $=0,ae=J[Z];$<ae.length;$+=1)gs(ae[$],t,n,f)}return w}Di.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var n=e[1];if(typeof n!="object"||Array.isArray(n))return t.error("Collator options argument must be an object.");var l=t.parse(n["case-sensitive"]!==void 0&&n["case-sensitive"],1,Me);if(!l)return null;var h=t.parse(n["diacritic-sensitive"]!==void 0&&n["diacritic-sensitive"],1,Me);if(!h)return null;var f=null;return n.locale&&!(f=t.parse(n.locale,1,Ve))?null:new Di(l,h,f)},Di.prototype.evaluate=function(e){return new Tn(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},Di.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},Di.prototype.outputDefined=function(){return!1},Di.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var si=function(e,t){this.type=Me,this.geojson=e,this.geometries=t};function ao(e){if(e instanceof en&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof si)return!1;var t=!0;return e.eachChild(function(n){t&&!ao(n)&&(t=!1)}),t}function so(e){if(e instanceof en&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(n){t&&!so(n)&&(t=!1)}),t}function Vo(e,t){if(e instanceof en&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(l){n&&!Vo(l,t)&&(n=!1)}),n}si.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(ys(e[1])){var n=e[1];if(n.type==="FeatureCollection")for(var l=0;l<n.features.length;++l){var h=n.features[l].geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new si(n,n.features[l].geometry)}else if(n.type==="Feature"){var f=n.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new si(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new si(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},si.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,n){var l=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],f=t.canonicalID();if(n.type==="Polygon"){var y=Sa(n.coordinates,h,f),w=Rp(t.geometry(),l,h,f);if(!No(l,h))return!1;for(var E=0,T=w;E<T.length;E+=1)if(!Bu(T[E],y))return!1}if(n.type==="MultiPolygon"){var P=Uu(n.coordinates,h,f),C=Rp(t.geometry(),l,h,f);if(!No(l,h))return!1;for(var L=0,R=C;L<R.length;L+=1)if(!sd(R[L],P))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,n){var l=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],f=t.canonicalID();if(n.type==="Polygon"){var y=Sa(n.coordinates,h,f),w=hl(t.geometry(),l,h,f);if(!No(l,h))return!1;for(var E=0,T=w;E<T.length;E+=1)if(!Dp(T[E],y))return!1}if(n.type==="MultiPolygon"){var P=Uu(n.coordinates,h,f),C=hl(t.geometry(),l,h,f);if(!No(l,h))return!1;for(var L=0,R=C;L<R.length;L+=1)if(!Lp(R[L],P))return!1}return!0}(e,this.geometries)}return!1},si.prototype.eachChild=function(){},si.prototype.outputDefined=function(){return!0},si.prototype.serialize=function(){return["within",this.geojson]};var lo=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};lo.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new lo(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},lo.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},lo.prototype.eachChild=function(){},lo.prototype.outputDefined=function(){return!1},lo.prototype.serialize=function(){return["var",this.name]};var uo=function(e,t,n,l,h){t===void 0&&(t=[]),l===void 0&&(l=new He),h===void 0&&(h=[]),this.registry=e,this.path=t,this.key=t.map(function(f){return"["+f+"]"}).join(""),this.scope=l,this.errors=h,this.expectedType=n};function fl(e,t){for(var n,l=e.length-1,h=0,f=l,y=0;h<=f;)if((n=e[y=Math.floor((h+f)/2)])<=t){if(y===l||t<e[y+1])return y;h=y+1}else{if(!(n>t))throw new Wr("Input is not a number.");f=y-1}return 0}uo.prototype.parse=function(e,t,n,l,h){return h===void 0&&(h={}),t?this.concat(t,n,l)._parse(e,h):this._parse(e,h)},uo.prototype._parse=function(e,t){function n(T,P,C){return C==="assert"?new or(P,[T]):C==="coerce"?new ai(P,[T]):T}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var l=e[0];if(typeof l!="string")return this.error("Expression name must be a string, but found "+typeof l+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=this.registry[l];if(h){var f=h.parse(e,this);if(!f)return null;if(this.expectedType){var y=this.expectedType,w=f.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||w.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string"){if(this.checkSubtype(y,w))return null}else f=n(f,y,t.typeAnnotation||"coerce");else f=n(f,y,t.typeAnnotation||"assert")}if(!(f instanceof hn)&&f.type.kind!=="resolvedImage"&&function T(P){if(P instanceof lo)return T(P.boundExpression);if(P instanceof en&&P.name==="error"||P instanceof Di||P instanceof si)return!1;var C=P instanceof ai||P instanceof or,L=!0;return P.eachChild(function(R){L=C?L&&T(R):L&&R instanceof hn}),!!L&&ao(P)&&Vo(P,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(f)){var E=new Hi;try{f=new hn(f.type,f.evaluate(E))}catch(T){return this.error(T.message),null}}return f}return this.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},uo.prototype.concat=function(e,t,n){var l=typeof e=="number"?this.path.concat(e):this.path,h=n?this.scope.concat(n):this.scope;return new uo(this.registry,l,t||null,h,this.errors)},uo.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var l=""+this.key+t.map(function(h){return"["+h+"]"}).join("");this.errors.push(new Te(l,e))},uo.prototype.checkSubtype=function(e,t){var n=jt(e,t);return n&&this.error(n),n};var Rn=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var l=0,h=n;l<h.length;l+=1){var f=h[l],y=f[1];this.labels.push(f[0]),this.outputs.push(y)}};function Cr(e,t,n){return e*(1-n)+t*n}Rn.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var n=t.parse(e[1],1,ge);if(!n)return null;var l=[],h=null;t.expectedType&&t.expectedType.kind!=="value"&&(h=t.expectedType);for(var f=1;f<e.length;f+=2){var y=f===1?-1/0:e[f],w=e[f+1],E=f,T=f+1;if(typeof y!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(l.length&&l[l.length-1][0]>=y)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',E);var P=t.parse(w,T,h);if(!P)return null;h=h||P.type,l.push([y,P])}return new Rn(h,n,l)},Rn.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return n[0].evaluate(e);var h=t.length;return l>=t[h-1]?n[h-1].evaluate(e):n[fl(t,l)].evaluate(e)},Rn.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},Rn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Rn.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Ea=Object.freeze({__proto__:null,number:Cr,color:function(e,t,n){return new Nt(Cr(e.r,t.r,n),Cr(e.g,t.g,n),Cr(e.b,t.b,n),Cr(e.a,t.a,n))},array:function(e,t,n){return e.map(function(l,h){return Cr(l,t[h],n)})}}),Op=6/29*3*(6/29),ud=Math.PI/180,cd=180/Math.PI;function Nu(e){return e>.008856451679035631?Math.pow(e,1/3):e/Op+4/29}function Vu(e){return e>6/29?e*e*e:Op*(e-4/29)}function ju(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function qu(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Fp(e){var t=qu(e.r),n=qu(e.g),l=qu(e.b),h=Nu((.4124564*t+.3575761*n+.1804375*l)/.95047),f=Nu((.2126729*t+.7151522*n+.072175*l)/1);return{l:116*f-16,a:500*(h-f),b:200*(f-Nu((.0193339*t+.119192*n+.9503041*l)/1.08883)),alpha:e.a}}function Bp(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,l=isNaN(e.b)?t:t-e.b/200;return t=1*Vu(t),n=.95047*Vu(n),l=1.08883*Vu(l),new Nt(ju(3.2404542*n-1.5371385*t-.4985314*l),ju(-.969266*n+1.8760108*t+.041556*l),ju(.0556434*n-.2040259*t+1.0572252*l),e.alpha)}function pd(e,t,n){var l=t-e;return e+n*(l>180||l<-180?l-360*Math.round(l/360):l)}var _s={forward:Fp,reverse:Bp,interpolate:function(e,t,n){return{l:Cr(e.l,t.l,n),a:Cr(e.a,t.a,n),b:Cr(e.b,t.b,n),alpha:Cr(e.alpha,t.alpha,n)}}},xs={forward:function(e){var t=Fp(e),n=t.l,l=t.a,h=t.b,f=Math.atan2(h,l)*cd;return{h:f<0?f+360:f,c:Math.sqrt(l*l+h*h),l:n,alpha:e.a}},reverse:function(e){var t=e.h*ud,n=e.c;return Bp({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:pd(e.h,t.h,n),c:Cr(e.c,t.c,n),l:Cr(e.l,t.l,n),alpha:Cr(e.alpha,t.alpha,n)}}},Up=Object.freeze({__proto__:null,lab:_s,hcl:xs}),tn=function(e,t,n,l,h){this.type=e,this.operator=t,this.interpolation=n,this.input=l,this.labels=[],this.outputs=[];for(var f=0,y=h;f<y.length;f+=1){var w=y[f],E=w[1];this.labels.push(w[0]),this.outputs.push(E)}};function Zu(e,t,n,l){var h=l-n,f=e-n;return h===0?0:t===1?f/h:(Math.pow(t,f)-1)/(Math.pow(t,h)-1)}tn.interpolationFactor=function(e,t,n,l){var h=0;if(e.name==="exponential")h=Zu(t,e.base,n,l);else if(e.name==="linear")h=Zu(t,1,n,l);else if(e.name==="cubic-bezier"){var f=e.controlPoints;h=new M(f[0],f[1],f[2],f[3]).solve(Zu(t,1,n,l))}return h},tn.parse=function(e,t){var n=e[0],l=e[1],h=e[2],f=e.slice(3);if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){var y=l[1];if(typeof y!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:y}}else{if(l[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(l[0]),1,0);var w=l.slice(1);if(w.length!==4||w.some(function(J){return typeof J!="number"||J<0||J>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:w}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(h=t.parse(h,2,ge)))return null;var E=[],T=null;n==="interpolate-hcl"||n==="interpolate-lab"?T=Re:t.expectedType&&t.expectedType.kind!=="value"&&(T=t.expectedType);for(var P=0;P<f.length;P+=2){var C=f[P],L=f[P+1],R=P+3,q=P+4;if(typeof C!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(E.length&&E[E.length-1][0]>=C)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',R);var Z=t.parse(L,q,T);if(!Z)return null;T=T||Z.type,E.push([C,Z])}return T.kind==="number"||T.kind==="color"||T.kind==="array"&&T.itemType.kind==="number"&&typeof T.N=="number"?new tn(T,n,l,h,E):t.error("Type "+Mt(T)+" is not interpolatable.")},tn.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return n[0].evaluate(e);var h=t.length;if(l>=t[h-1])return n[h-1].evaluate(e);var f=fl(t,l),y=tn.interpolationFactor(this.interpolation,l,t[f],t[f+1]),w=n[f].evaluate(e),E=n[f+1].evaluate(e);return this.operator==="interpolate"?Ea[this.type.kind.toLowerCase()](w,E,y):this.operator==="interpolate-hcl"?xs.reverse(xs.interpolate(xs.forward(w),xs.forward(E),y)):_s.reverse(_s.interpolate(_s.forward(w),_s.forward(E),y))},tn.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},tn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},tn.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var co=function(e,t){this.type=e,this.args=t};co.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,l=t.expectedType;l&&l.kind!=="value"&&(n=l);for(var h=[],f=0,y=e.slice(1);f<y.length;f+=1){var w=t.parse(y[f],1+h.length,n,void 0,{typeAnnotation:"omit"});if(!w)return null;n=n||w.type,h.push(w)}var E=l&&h.some(function(T){return jt(l,T.type)});return new co(E?Ue:n,h)},co.prototype.evaluate=function(e){for(var t,n=null,l=0,h=0,f=this.args;h<f.length&&(l++,(n=f[h].evaluate(e))&&n instanceof In&&!n.available&&(t||(t=n.name),n=null,l===this.args.length&&(n=t)),n===null);h+=1);return n},co.prototype.eachChild=function(e){this.args.forEach(e)},co.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},co.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var po=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};po.prototype.evaluate=function(e){return this.result.evaluate(e)},po.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},po.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],l=1;l<e.length-1;l+=2){var h=e[l];if(typeof h!="string")return t.error("Expected string, but found "+typeof h+" instead.",l);if(/[^a-zA-Z0-9_]/.test(h))return t.error("Variable names must contain only alphanumeric characters or '_'.",l);var f=t.parse(e[l+1],l+1);if(!f)return null;n.push([h,f])}var y=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return y?new po(n,y):null},po.prototype.outputDefined=function(){return this.result.outputDefined()},po.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var l=n[t];e.push(l[0],l[1].serialize())}return e.push(this.result.serialize()),e};var jo=function(e,t,n){this.type=e,this.index=t,this.input=n};jo.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,ge),l=t.parse(e[2],2,Ut(t.expectedType||Ue));return n&&l?new jo(l.type.itemType,n,l):null},jo.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Wr("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new Wr("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new Wr("Array index must be an integer, but found "+t+" instead.");return n[t]},jo.prototype.eachChild=function(e){e(this.index),e(this.input)},jo.prototype.outputDefined=function(){return!1},jo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var qo=function(e,t){this.type=Me,this.needle=e,this.haystack=t};qo.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Ue),l=t.parse(e[2],2,Ue);return n&&l?xr(n.type,[Me,Ve,ge,We,Ue])?new qo(n,l):t.error("Expected first argument to be of type boolean, string, number or null, but found "+Mt(n.type)+" instead"):null},qo.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Gt(t,["boolean","string","number","null"]))throw new Wr("Expected first argument to be of type boolean, string, number or null, but found "+Mt(wr(t))+" instead.");if(!Gt(n,["string","array"]))throw new Wr("Expected second argument to be of type array or string, but found "+Mt(wr(n))+" instead.");return n.indexOf(t)>=0},qo.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},qo.prototype.outputDefined=function(){return!0},qo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ho=function(e,t,n){this.type=ge,this.needle=e,this.haystack=t,this.fromIndex=n};ho.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Ue),l=t.parse(e[2],2,Ue);if(!n||!l)return null;if(!xr(n.type,[Me,Ve,ge,We,Ue]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+Mt(n.type)+" instead");if(e.length===4){var h=t.parse(e[3],3,ge);return h?new ho(n,l,h):null}return new ho(n,l)},ho.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Gt(t,["boolean","string","number","null"]))throw new Wr("Expected first argument to be of type boolean, string, number or null, but found "+Mt(wr(t))+" instead.");if(!Gt(n,["string","array"]))throw new Wr("Expected second argument to be of type array or string, but found "+Mt(wr(n))+" instead.");if(this.fromIndex){var l=this.fromIndex.evaluate(e);return n.indexOf(t,l)}return n.indexOf(t)},ho.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},ho.prototype.outputDefined=function(){return!1},ho.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Zo=function(e,t,n,l,h,f){this.inputType=e,this.type=t,this.input=n,this.cases=l,this.outputs=h,this.otherwise=f};Zo.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(var h={},f=[],y=2;y<e.length-1;y+=2){var w=e[y],E=e[y+1];Array.isArray(w)||(w=[w]);var T=t.concat(y);if(w.length===0)return T.error("Expected at least one branch label.");for(var P=0,C=w;P<C.length;P+=1){var L=C[P];if(typeof L!="number"&&typeof L!="string")return T.error("Branch labels must be numbers or strings.");if(typeof L=="number"&&Math.abs(L)>Number.MAX_SAFE_INTEGER)return T.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof L=="number"&&Math.floor(L)!==L)return T.error("Numeric branch labels must be integer values.");if(n){if(T.checkSubtype(n,wr(L)))return null}else n=wr(L);if(h[String(L)]!==void 0)return T.error("Branch labels must be unique.");h[String(L)]=f.length}var R=t.parse(E,y,l);if(!R)return null;l=l||R.type,f.push(R)}var q=t.parse(e[1],1,Ue);if(!q)return null;var Z=t.parse(e[e.length-1],e.length-1,l);return Z?q.type.kind!=="value"&&t.concat(1).checkSubtype(n,q.type)?null:new Zo(n,l,q,h,f,Z):null},Zo.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(wr(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Zo.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Zo.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Zo.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],l={},h=0,f=Object.keys(this.cases).sort();h<f.length;h+=1){var y=f[h];(C=l[this.cases[y]])===void 0?(l[this.cases[y]]=n.length,n.push([this.cases[y],[y]])):n[C][1].push(y)}for(var w=function(R){return e.inputType.kind==="number"?Number(R):R},E=0,T=n;E<T.length;E+=1){var P=T[E],C=P[0],L=P[1];t.push(L.length===1?w(L[0]):L.map(w)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Go=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};Go.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&t.expectedType.kind!=="value"&&(n=t.expectedType);for(var l=[],h=1;h<e.length-1;h+=2){var f=t.parse(e[h],h,Me);if(!f)return null;var y=t.parse(e[h+1],h+1,n);if(!y)return null;l.push([f,y]),n=n||y.type}var w=t.parse(e[e.length-1],e.length-1,n);return w?new Go(n,l,w):null},Go.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var l=n[t],h=l[1];if(l[0].evaluate(e))return h.evaluate(e)}return this.otherwise.evaluate(e)},Go.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var l=n[t],h=l[1];e(l[0]),e(h)}e(this.otherwise)},Go.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Go.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var fo=function(e,t,n,l){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=l};function Np(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Vp(e,t,n,l){return l.compare(t,n)===0}function Ht(e,t,n){var l=e!=="=="&&e!=="!=";return function(){function h(f,y,w){this.type=Me,this.lhs=f,this.rhs=y,this.collator=w,this.hasUntypedArgument=f.type.kind==="value"||y.type.kind==="value"}return h.parse=function(f,y){if(f.length!==3&&f.length!==4)return y.error("Expected two or three arguments.");var w=f[0],E=y.parse(f[1],1,Ue);if(!E)return null;if(!Np(w,E.type))return y.concat(1).error('"'+w+`" comparisons are not supported for type '`+Mt(E.type)+"'.");var T=y.parse(f[2],2,Ue);if(!T)return null;if(!Np(w,T.type))return y.concat(2).error('"'+w+`" comparisons are not supported for type '`+Mt(T.type)+"'.");if(E.type.kind!==T.type.kind&&E.type.kind!=="value"&&T.type.kind!=="value")return y.error("Cannot compare types '"+Mt(E.type)+"' and '"+Mt(T.type)+"'.");l&&(E.type.kind==="value"&&T.type.kind!=="value"?E=new or(T.type,[E]):E.type.kind!=="value"&&T.type.kind==="value"&&(T=new or(E.type,[T])));var P=null;if(f.length===4){if(E.type.kind!=="string"&&T.type.kind!=="string"&&E.type.kind!=="value"&&T.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(!(P=y.parse(f[3],3,At)))return null}return new h(E,T,P)},h.prototype.evaluate=function(f){var y=this.lhs.evaluate(f),w=this.rhs.evaluate(f);if(l&&this.hasUntypedArgument){var E=wr(y),T=wr(w);if(E.kind!==T.kind||E.kind!=="string"&&E.kind!=="number")throw new Wr('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+E.kind+", "+T.kind+") instead.")}if(this.collator&&!l&&this.hasUntypedArgument){var P=wr(y),C=wr(w);if(P.kind!=="string"||C.kind!=="string")return t(f,y,w)}return this.collator?n(f,y,w,this.collator.evaluate(f)):t(f,y,w)},h.prototype.eachChild=function(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)},h.prototype.outputDefined=function(){return!0},h.prototype.serialize=function(){var f=[e];return this.eachChild(function(y){f.push(y.serialize())}),f},h}()}fo.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Ue),l=t.parse(e[2],2,ge);if(!n||!l)return null;if(!xr(n.type,[Ut(Ue),Ve,Ue]))return t.error("Expected first argument to be of type array or string, but found "+Mt(n.type)+" instead");if(e.length===4){var h=t.parse(e[3],3,ge);return h?new fo(n.type,n,l,h):null}return new fo(n.type,n,l)},fo.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Gt(t,["string","array"]))throw new Wr("Expected first argument to be of type array or string, but found "+Mt(wr(t))+" instead.");if(this.endIndex){var l=this.endIndex.evaluate(e);return t.slice(n,l)}return t.slice(n)},fo.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},fo.prototype.outputDefined=function(){return!1},fo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var hd=Ht("==",function(e,t,n){return t===n},Vp),dl=Ht("!=",function(e,t,n){return t!==n},function(e,t,n,l){return!Vp(0,t,n,l)}),jp=Ht("<",function(e,t,n){return t<n},function(e,t,n,l){return l.compare(t,n)<0}),qp=Ht(">",function(e,t,n){return t>n},function(e,t,n,l){return l.compare(t,n)>0}),Zp=Ht("<=",function(e,t,n){return t<=n},function(e,t,n,l){return l.compare(t,n)<=0}),Gp=Ht(">=",function(e,t,n){return t>=n},function(e,t,n,l){return l.compare(t,n)>=0}),Wo=function(e,t,n,l,h){this.type=Ve,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=l,this.maxFractionDigits=h};Wo.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var n=t.parse(e[1],1,ge);if(!n)return null;var l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");var h=null;if(l.locale&&!(h=t.parse(l.locale,1,Ve)))return null;var f=null;if(l.currency&&!(f=t.parse(l.currency,1,Ve)))return null;var y=null;if(l["min-fraction-digits"]&&!(y=t.parse(l["min-fraction-digits"],1,ge)))return null;var w=null;return l["max-fraction-digits"]&&!(w=t.parse(l["max-fraction-digits"],1,ge))?null:new Wo(n,h,f,y,w)},Wo.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Wo.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Wo.prototype.outputDefined=function(){return!1},Wo.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var mo=function(e){this.type=ge,this.input=e};mo.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+Mt(n.type)+" instead."):new mo(n):null},mo.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new Wr("Expected value to be of type string or array, but found "+Mt(wr(t))+" instead.")},mo.prototype.eachChild=function(e){e(this.input)},mo.prototype.outputDefined=function(){return!1},mo.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Xo={"==":hd,"!=":dl,">":qp,"<":jp,">=":Gp,"<=":Zp,array:or,at:jo,boolean:or,case:Go,coalesce:co,collator:Di,format:Si,image:Xn,in:qo,"index-of":ho,interpolate:tn,"interpolate-hcl":tn,"interpolate-lab":tn,length:mo,let:po,literal:hn,match:Zo,number:or,"number-format":Wo,object:or,slice:fo,step:Rn,string:or,"to-boolean":ai,"to-color":ai,"to-number":ai,"to-string":ai,var:lo,within:si};function Wp(e,t){var n=t[0],l=t[1],h=t[2],f=t[3];n=n.evaluate(e),l=l.evaluate(e),h=h.evaluate(e);var y=f?f.evaluate(e):1,w=Fu(n,l,h,y);if(w)throw new Wr(w);return new Nt(n/255*y,l/255*y,h/255*y,y)}function Xp(e,t){return e in t}function Gu(e,t){var n=t[e];return n===void 0?null:n}function Ho(e){return{type:e}}function Hp(e){return{result:"success",value:e}}function Ko(e){return{result:"error",value:e}}function $o(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Kp(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function ws(e){return!!e.expression&&e.expression.interpolated}function Jt(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function ml(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function fd(e){return e}function Ta(e,t,n){return e!==void 0?e:t!==void 0?t:n!==void 0?n:void 0}function $p(e,t,n,l,h){return Ta(typeof n===h?l[n]:void 0,e.default,t.default)}function dd(e,t,n){if(Jt(n)!=="number")return Ta(e.default,t.default);var l=e.stops.length;if(l===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[l-1][0])return e.stops[l-1][1];var h=fl(e.stops.map(function(f){return f[0]}),n);return e.stops[h][1]}function Qp(e,t,n){var l=e.base!==void 0?e.base:1;if(Jt(n)!=="number")return Ta(e.default,t.default);var h=e.stops.length;if(h===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[h-1][0])return e.stops[h-1][1];var f=fl(e.stops.map(function(C){return C[0]}),n),y=function(C,L,R,q){var Z=q-R,J=C-R;return Z===0?0:L===1?J/Z:(Math.pow(L,J)-1)/(Math.pow(L,Z)-1)}(n,l,e.stops[f][0],e.stops[f+1][0]),w=e.stops[f][1],E=e.stops[f+1][1],T=Ea[t.type]||fd;if(e.colorSpace&&e.colorSpace!=="rgb"){var P=Up[e.colorSpace];T=function(C,L){return P.reverse(P.interpolate(P.forward(C),P.forward(L),y))}}return typeof w.evaluate=="function"?{evaluate:function(){for(var C=[],L=arguments.length;L--;)C[L]=arguments[L];var R=w.evaluate.apply(void 0,C),q=E.evaluate.apply(void 0,C);if(R!==void 0&&q!==void 0)return T(R,q,y)}}:T(w,E,y)}function yl(e,t,n){return t.type==="color"?n=Nt.parse(n):t.type==="formatted"?n=Gr.fromString(n.toString()):t.type==="resolvedImage"?n=In.fromString(n.toString()):Jt(n)===t.type||t.type==="enum"&&t.values[n]||(n=void 0),Ta(n,e.default,t.default)}en.register(Xo,{error:[{kind:"error"},[Ve],function(e,t){throw new Wr(t[0].evaluate(e))}],typeof:[Ve,[Ue],function(e,t){return Mt(wr(t[0].evaluate(e)))}],"to-rgba":[Ut(ge,4),[Re],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Re,[ge,ge,ge],Wp],rgba:[Re,[ge,ge,ge,ge],Wp],has:{type:Me,overloads:[[[Ve],function(e,t){return Xp(t[0].evaluate(e),e.properties())}],[[Ve,wt],function(e,t){var n=t[1];return Xp(t[0].evaluate(e),n.evaluate(e))}]]},get:{type:Ue,overloads:[[[Ve],function(e,t){return Gu(t[0].evaluate(e),e.properties())}],[[Ve,wt],function(e,t){var n=t[1];return Gu(t[0].evaluate(e),n.evaluate(e))}]]},"feature-state":[Ue,[Ve],function(e,t){return Gu(t[0].evaluate(e),e.featureState||{})}],properties:[wt,[],function(e){return e.properties()}],"geometry-type":[Ve,[],function(e){return e.geometryType()}],id:[Ue,[],function(e){return e.id()}],zoom:[ge,[],function(e){return e.globals.zoom}],"heatmap-density":[ge,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[ge,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ue,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[ge,Ho(ge),function(e,t){for(var n=0,l=0,h=t;l<h.length;l+=1)n+=h[l].evaluate(e);return n}],"*":[ge,Ho(ge),function(e,t){for(var n=1,l=0,h=t;l<h.length;l+=1)n*=h[l].evaluate(e);return n}],"-":{type:ge,overloads:[[[ge,ge],function(e,t){var n=t[1];return t[0].evaluate(e)-n.evaluate(e)}],[[ge],function(e,t){return-t[0].evaluate(e)}]]},"/":[ge,[ge,ge],function(e,t){var n=t[1];return t[0].evaluate(e)/n.evaluate(e)}],"%":[ge,[ge,ge],function(e,t){var n=t[1];return t[0].evaluate(e)%n.evaluate(e)}],ln2:[ge,[],function(){return Math.LN2}],pi:[ge,[],function(){return Math.PI}],e:[ge,[],function(){return Math.E}],"^":[ge,[ge,ge],function(e,t){var n=t[1];return Math.pow(t[0].evaluate(e),n.evaluate(e))}],sqrt:[ge,[ge],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[ge,[ge],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[ge,[ge],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[ge,[ge],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[ge,[ge],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[ge,[ge],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[ge,[ge],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[ge,[ge],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[ge,[ge],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[ge,[ge],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[ge,Ho(ge),function(e,t){return Math.min.apply(Math,t.map(function(n){return n.evaluate(e)}))}],max:[ge,Ho(ge),function(e,t){return Math.max.apply(Math,t.map(function(n){return n.evaluate(e)}))}],abs:[ge,[ge],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[ge,[ge],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[ge,[ge],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[ge,[ge],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Me,[Ve,Ue],function(e,t){var n=t[0],l=t[1];return e.properties()[n.value]===l.value}],"filter-id-==":[Me,[Ue],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[Me,[Ve],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[Me,[Ve,Ue],function(e,t){var n=t[0],l=t[1],h=e.properties()[n.value],f=l.value;return typeof h==typeof f&&h<f}],"filter-id-<":[Me,[Ue],function(e,t){var n=t[0],l=e.id(),h=n.value;return typeof l==typeof h&&l<h}],"filter->":[Me,[Ve,Ue],function(e,t){var n=t[0],l=t[1],h=e.properties()[n.value],f=l.value;return typeof h==typeof f&&h>f}],"filter-id->":[Me,[Ue],function(e,t){var n=t[0],l=e.id(),h=n.value;return typeof l==typeof h&&l>h}],"filter-<=":[Me,[Ve,Ue],function(e,t){var n=t[0],l=t[1],h=e.properties()[n.value],f=l.value;return typeof h==typeof f&&h<=f}],"filter-id-<=":[Me,[Ue],function(e,t){var n=t[0],l=e.id(),h=n.value;return typeof l==typeof h&&l<=h}],"filter->=":[Me,[Ve,Ue],function(e,t){var n=t[0],l=t[1],h=e.properties()[n.value],f=l.value;return typeof h==typeof f&&h>=f}],"filter-id->=":[Me,[Ue],function(e,t){var n=t[0],l=e.id(),h=n.value;return typeof l==typeof h&&l>=h}],"filter-has":[Me,[Ue],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Me,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Me,[Ut(Ve)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Me,[Ut(Ue)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Me,[Ve,Ut(Ue)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[Me,[Ve,Ut(Ue)],function(e,t){var n=t[0],l=t[1];return function(h,f,y,w){for(;y<=w;){var E=y+w>>1;if(f[E]===h)return!0;f[E]>h?w=E-1:y=E+1}return!1}(e.properties()[n.value],l.value,0,l.value.length-1)}],all:{type:Me,overloads:[[[Me,Me],function(e,t){var n=t[1];return t[0].evaluate(e)&&n.evaluate(e)}],[Ho(Me),function(e,t){for(var n=0,l=t;n<l.length;n+=1)if(!l[n].evaluate(e))return!1;return!0}]]},any:{type:Me,overloads:[[[Me,Me],function(e,t){var n=t[1];return t[0].evaluate(e)||n.evaluate(e)}],[Ho(Me),function(e,t){for(var n=0,l=t;n<l.length;n+=1)if(l[n].evaluate(e))return!0;return!1}]]},"!":[Me,[Me],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Me,[Ve],function(e,t){var n=e.globals&&e.globals.isSupportedScript;return!n||n(t[0].evaluate(e))}],upcase:[Ve,[Ve],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Ve,[Ve],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Ve,Ho(Ue),function(e,t){return t.map(function(n){return vs(n.evaluate(e))}).join("")}],"resolved-locale":[Ve,[At],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Ia=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Hi,this._defaultValue=t?function(n){return n.type==="color"&&ml(n.default)?new Nt(0,0,0,0):n.type==="color"?Nt.parse(n.default)||null:n.default===void 0?null:n.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function bs(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in Xo}function vl(e,t){var n=new uo(Xo,[],t?function(h){var f={color:Re,string:Ve,number:ge,enum:Ve,boolean:Me,formatted:Xt,resolvedImage:Et};return h.type==="array"?Ut(f[h.value]||Ue,h.length):f[h.type]}(t):void 0),l=n.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?Hp(new Ia(l,t)):Ko(n.errors)}Ia.prototype.evaluateWithoutErrorHandling=function(e,t,n,l,h,f){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=l,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=f,this.expression.evaluate(this._evaluator)},Ia.prototype.evaluate=function(e,t,n,l,h,f){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=l,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=f||null;try{var y=this.expression.evaluate(this._evaluator);if(y==null||typeof y=="number"&&y!=y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new Wr("Expected value to be one of "+Object.keys(this._enumValues).map(function(w){return JSON.stringify(w)}).join(", ")+", but found "+JSON.stringify(y)+" instead.");return y}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console!="undefined"&&console.warn(w.message)),this._defaultValue}};var Ss=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!so(t.expression)};Ss.prototype.evaluateWithoutErrorHandling=function(e,t,n,l,h,f){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,l,h,f)},Ss.prototype.evaluate=function(e,t,n,l,h,f){return this._styleExpression.evaluate(e,t,n,l,h,f)};var Pa=function(e,t,n,l){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!so(t.expression),this.interpolationType=l};function Yp(e,t){if((e=vl(e,t)).result==="error")return e;var n=e.value.expression,l=ao(n);if(!l&&!$o(t))return Ko([new Te("","data expressions not supported")]);var h=Vo(n,["zoom"]);if(!h&&!Kp(t))return Ko([new Te("","zoom expressions not supported")]);var f=function y(w){var E=null;if(w instanceof po)E=y(w.result);else if(w instanceof co)for(var T=0,P=w.args;T<P.length&&!(E=y(P[T]));T+=1);else(w instanceof Rn||w instanceof tn)&&w.input instanceof en&&w.input.name==="zoom"&&(E=w);return E instanceof Te||w.eachChild(function(C){var L=y(C);L instanceof Te?E=L:!E&&L?E=new Te("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):E&&L&&E!==L&&(E=new Te("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),E}(n);return f||h?f instanceof Te?Ko([f]):f instanceof tn&&!ws(t)?Ko([new Te("",'"interpolate" expressions cannot be used with this property')]):Hp(f?new Pa(l?"camera":"composite",e.value,f.labels,f instanceof tn?f.interpolation:void 0):new Ss(l?"constant":"source",e.value)):Ko([new Te("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Pa.prototype.evaluateWithoutErrorHandling=function(e,t,n,l,h,f){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,l,h,f)},Pa.prototype.evaluate=function(e,t,n,l,h,f){return this._styleExpression.evaluate(e,t,n,l,h,f)},Pa.prototype.interpolationFactor=function(e,t,n){return this.interpolationType?tn.interpolationFactor(this.interpolationType,e,t,n):0};var Ca=function(e,t){this._parameters=e,this._specification=t,Ee(this,function n(l,h){var f,y,w,E=h.type==="color",T=l.stops&&typeof l.stops[0][0]=="object",P=T||!(T||l.property!==void 0),C=l.type||(ws(h)?"exponential":"interval");if(E&&((l=Ee({},l)).stops&&(l.stops=l.stops.map(function(Be){return[Be[0],Nt.parse(Be[1])]})),l.default=Nt.parse(l.default?l.default:h.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!Up[l.colorSpace])throw new Error("Unknown color space: "+l.colorSpace);if(C==="exponential")f=Qp;else if(C==="interval")f=dd;else if(C==="categorical"){f=$p,y=Object.create(null);for(var L=0,R=l.stops;L<R.length;L+=1){var q=R[L];y[q[0]]=q[1]}w=typeof l.stops[0][0]}else{if(C!=="identity")throw new Error('Unknown function type "'+C+'"');f=yl}if(T){for(var Z={},J=[],$=0;$<l.stops.length;$++){var ae=l.stops[$],pe=ae[0].zoom;Z[pe]===void 0&&(Z[pe]={zoom:pe,type:l.type,property:l.property,default:l.default,stops:[]},J.push(pe)),Z[pe].stops.push([ae[0].value,ae[1]])}for(var he=[],de=0,xe=J;de<xe.length;de+=1){var Pe=xe[de];he.push([Z[Pe].zoom,n(Z[Pe],h)])}var ze={name:"linear"};return{kind:"composite",interpolationType:ze,interpolationFactor:tn.interpolationFactor.bind(void 0,ze),zoomStops:he.map(function(Be){return Be[0]}),evaluate:function(Be,tt){var Ne=Be.zoom;return Qp({stops:he,base:l.base},h,Ne).evaluate(Ne,tt)}}}if(P){var Ye=C==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:Ye,interpolationFactor:tn.interpolationFactor.bind(void 0,Ye),zoomStops:l.stops.map(function(Be){return Be[0]}),evaluate:function(Be){return f(l,h,Be.zoom,y,w)}}}return{kind:"source",evaluate:function(Be,tt){var Ne=tt&&tt.properties?tt.properties[l.property]:void 0;return Ne===void 0?Ta(l.default,h.default):f(l,h,Ne,y,w)}}}(this._parameters,this._specification))};function Ei(e){var t=e.key,n=e.value,l=e.valueSpec||{},h=e.objectElementValidators||{},f=e.style,y=e.styleSpec,w=[],E=Jt(n);if(E!=="object")return[new H(t,n,"object expected, "+E+" found")];for(var T in n){var P=T.split(".")[0],C=l[P]||l["*"],L=void 0;if(h[P])L=h[P];else if(l[P])L=zt;else if(h["*"])L=h["*"];else{if(!l["*"]){w.push(new H(t,n[T],'unknown property "'+T+'"'));continue}L=zt}w=w.concat(L({key:(t&&t+".")+T,value:n[T],valueSpec:C,style:f,styleSpec:y,object:n,objectKey:T},n))}for(var R in l)h[R]||l[R].required&&l[R].default===void 0&&n[R]===void 0&&w.push(new H(t,n,'missing required property "'+R+'"'));return w}function Jp(e){var t=e.value,n=e.valueSpec,l=e.style,h=e.styleSpec,f=e.key,y=e.arrayElementValidator||zt;if(Jt(t)!=="array")return[new H(f,t,"array expected, "+Jt(t)+" found")];if(n.length&&t.length!==n.length)return[new H(f,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new H(f,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var w={type:n.value,values:n.values};h.$version<7&&(w.function=n.function),Jt(n.value)==="object"&&(w=n.value);for(var E=[],T=0;T<t.length;T++)E=E.concat(y({array:t,arrayIndex:T,value:t[T],valueSpec:w,style:l,styleSpec:h,key:f+"["+T+"]"}));return E}function eh(e){var t=e.key,n=e.value,l=e.valueSpec,h=Jt(n);return h==="number"&&n!=n&&(h="NaN"),h!=="number"?[new H(t,n,"number expected, "+h+" found")]:"minimum"in l&&n<l.minimum?[new H(t,n,n+" is less than the minimum value "+l.minimum)]:"maximum"in l&&n>l.maximum?[new H(t,n,n+" is greater than the maximum value "+l.maximum)]:[]}function th(e){var t,n,l,h=e.valueSpec,f=Ie(e.value.type),y={},w=f!=="categorical"&&e.value.property===void 0,E=!w,T=Jt(e.value.stops)==="array"&&Jt(e.value.stops[0])==="array"&&Jt(e.value.stops[0][0])==="object",P=Ei({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(R){if(f==="identity")return[new H(R.key,R.value,'identity function may not have a "stops" property')];var q=[],Z=R.value;return q=q.concat(Jp({key:R.key,value:Z,valueSpec:R.valueSpec,style:R.style,styleSpec:R.styleSpec,arrayElementValidator:C})),Jt(Z)==="array"&&Z.length===0&&q.push(new H(R.key,Z,"array must have at least one stop")),q},default:function(R){return zt({key:R.key,value:R.value,valueSpec:h,style:R.style,styleSpec:R.styleSpec})}}});return f==="identity"&&w&&P.push(new H(e.key,e.value,'missing required property "property"')),f==="identity"||e.value.stops||P.push(new H(e.key,e.value,'missing required property "stops"')),f==="exponential"&&e.valueSpec.expression&&!ws(e.valueSpec)&&P.push(new H(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(E&&!$o(e.valueSpec)?P.push(new H(e.key,e.value,"property functions not supported")):w&&!Kp(e.valueSpec)&&P.push(new H(e.key,e.value,"zoom functions not supported"))),f!=="categorical"&&!T||e.value.property!==void 0||P.push(new H(e.key,e.value,'"property" property is required')),P;function C(R){var q=[],Z=R.value,J=R.key;if(Jt(Z)!=="array")return[new H(J,Z,"array expected, "+Jt(Z)+" found")];if(Z.length!==2)return[new H(J,Z,"array length 2 expected, length "+Z.length+" found")];if(T){if(Jt(Z[0])!=="object")return[new H(J,Z,"object expected, "+Jt(Z[0])+" found")];if(Z[0].zoom===void 0)return[new H(J,Z,"object stop key must have zoom")];if(Z[0].value===void 0)return[new H(J,Z,"object stop key must have value")];if(l&&l>Ie(Z[0].zoom))return[new H(J,Z[0].zoom,"stop zoom values must appear in ascending order")];Ie(Z[0].zoom)!==l&&(l=Ie(Z[0].zoom),n=void 0,y={}),q=q.concat(Ei({key:J+"[0]",value:Z[0],valueSpec:{zoom:{}},style:R.style,styleSpec:R.styleSpec,objectElementValidators:{zoom:eh,value:L}}))}else q=q.concat(L({key:J+"[0]",value:Z[0],valueSpec:{},style:R.style,styleSpec:R.styleSpec},Z));return bs(ve(Z[1]))?q.concat([new H(J+"[1]",Z[1],"expressions are not allowed in function stops.")]):q.concat(zt({key:J+"[1]",value:Z[1],valueSpec:h,style:R.style,styleSpec:R.styleSpec}))}function L(R,q){var Z=Jt(R.value),J=Ie(R.value),$=R.value!==null?R.value:q;if(t){if(Z!==t)return[new H(R.key,$,Z+" stop domain type must match previous stop domain type "+t)]}else t=Z;if(Z!=="number"&&Z!=="string"&&Z!=="boolean")return[new H(R.key,$,"stop domain value must be a number, string, or boolean")];if(Z!=="number"&&f!=="categorical"){var ae="number expected, "+Z+" found";return $o(h)&&f===void 0&&(ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new H(R.key,$,ae)]}return f!=="categorical"||Z!=="number"||isFinite(J)&&Math.floor(J)===J?f!=="categorical"&&Z==="number"&&n!==void 0&&J<n?[new H(R.key,$,"stop domain values must appear in ascending order")]:(n=J,f==="categorical"&&J in y?[new H(R.key,$,"stop domain values must be unique")]:(y[J]=!0,[])):[new H(R.key,$,"integer expected, found "+J)]}}function Qo(e){var t=(e.expressionContext==="property"?Yp:vl)(ve(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(l){return new H(""+e.key+l.key,e.value,l.message)});var n=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!n.outputDefined())return[new H(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!so(n))return[new H(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!so(n))return[new H(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Vo(n,["zoom","feature-state"]))return[new H(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!ao(n))return[new H(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Es(e){var t=e.key,n=e.value,l=e.valueSpec,h=[];return Array.isArray(l.values)?l.values.indexOf(Ie(n))===-1&&h.push(new H(t,n,"expected one of ["+l.values.join(", ")+"], "+JSON.stringify(n)+" found")):Object.keys(l.values).indexOf(Ie(n))===-1&&h.push(new H(t,n,"expected one of ["+Object.keys(l.values).join(", ")+"], "+JSON.stringify(n)+" found")),h}function gl(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var l=n[t];if(!gl(l)&&typeof l!="boolean")return!1}return!0;default:return!0}}Ca.deserialize=function(e){return new Ca(e._parameters,e._specification)},Ca.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Wu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _l(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};gl(e)||(e=xl(e));var t=vl(e,Wu);if(t.result==="error")throw new Error(t.value.map(function(n){return n.key+": "+n.message}).join(", "));return{filter:function(n,l,h){return t.value.evaluate(n,l,{},h)},needGeometry:function n(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(var h=1;h<l.length;h++)if(n(l[h]))return!0;return!1}(e)}}function md(e,t){return e<t?-1:e>t?1:0}function xl(e){if(!e)return!0;var t,n=e[0];return e.length<=1?n!=="any":n==="=="?Xu(e[1],e[2],"=="):n==="!="?wl(Xu(e[1],e[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Xu(e[1],e[2],n):n==="any"?(t=e.slice(1),["any"].concat(t.map(xl))):n==="all"?["all"].concat(e.slice(1).map(xl)):n==="none"?["all"].concat(e.slice(1).map(xl).map(wl)):n==="in"?rh(e[1],e.slice(2)):n==="!in"?wl(rh(e[1],e.slice(2))):n==="has"?nh(e[1]):n==="!has"?wl(nh(e[1])):n!=="within"||e}function Xu(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function rh(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(n){return typeof n!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(md)]]:["filter-in-small",e,["literal",t]]}}function nh(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function wl(e){return["!",e]}function Hu(e){return gl(ve(e.value))?Qo(Ee({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(n){var l=n.value,h=n.key;if(Jt(l)!=="array")return[new H(h,l,"array expected, "+Jt(l)+" found")];var f,y=n.styleSpec,w=[];if(l.length<1)return[new H(h,l,"filter array must have at least 1 element")];switch(w=w.concat(Es({key:h+"[0]",value:l[0],valueSpec:y.filter_operator,style:n.style,styleSpec:n.styleSpec})),Ie(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Ie(l[1])==="$type"&&w.push(new H(h,l,'"$type" cannot be use with operator "'+l[0]+'"'));case"==":case"!=":l.length!==3&&w.push(new H(h,l,'filter array for operator "'+l[0]+'" must have 3 elements'));case"in":case"!in":l.length>=2&&(f=Jt(l[1]))!=="string"&&w.push(new H(h+"[1]",l[1],"string expected, "+f+" found"));for(var E=2;E<l.length;E++)f=Jt(l[E]),Ie(l[1])==="$type"?w=w.concat(Es({key:h+"["+E+"]",value:l[E],valueSpec:y.geometry_type,style:n.style,styleSpec:n.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&w.push(new H(h+"["+E+"]",l[E],"string, number, or boolean expected, "+f+" found"));break;case"any":case"all":case"none":for(var T=1;T<l.length;T++)w=w.concat(t({key:h+"["+T+"]",value:l[T],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":f=Jt(l[1]),l.length!==2?w.push(new H(h,l,'filter array for "'+l[0]+'" operator must have 2 elements')):f!=="string"&&w.push(new H(h+"[1]",l[1],"string expected, "+f+" found"));break;case"within":f=Jt(l[1]),l.length!==2?w.push(new H(h,l,'filter array for "'+l[0]+'" operator must have 2 elements')):f!=="object"&&w.push(new H(h+"[1]",l[1],"object expected, "+f+" found"))}return w}(e)}function Ku(e,t){var n=e.key,l=e.style,h=e.styleSpec,f=e.value,y=e.objectKey,w=h[t+"_"+e.layerType];if(!w)return[];var E=y.match(/^(.*)-transition$/);if(t==="paint"&&E&&w[E[1]]&&w[E[1]].transition)return zt({key:n,value:f,valueSpec:h.transition,style:l,styleSpec:h});var T,P=e.valueSpec||w[y];if(!P)return[new H(n,f,'unknown property "'+y+'"')];if(Jt(f)==="string"&&$o(P)&&!P.tokens&&(T=/^{([^}]+)}$/.exec(f)))return[new H(n,f,'"'+y+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(T[1])+" }`.")];var C=[];return e.layerType==="symbol"&&(y==="text-field"&&l&&!l.glyphs&&C.push(new H(n,f,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&ml(ve(f))&&Ie(f.type)==="identity"&&C.push(new H(n,f,'"text-font" does not support identity functions'))),C.concat(zt({key:e.key,value:f,valueSpec:P,style:l,styleSpec:h,expressionContext:"property",propertyType:t,propertyKey:y}))}function $u(e){return Ku(e,"paint")}function Ts(e){return Ku(e,"layout")}function ih(e){var t=[],n=e.value,l=e.key,h=e.style,f=e.styleSpec;n.type||n.ref||t.push(new H(l,n,'either "type" or "ref" is required'));var y,w=Ie(n.type),E=Ie(n.ref);if(n.id)for(var T=Ie(n.id),P=0;P<e.arrayIndex;P++){var C=h.layers[P];Ie(C.id)===T&&t.push(new H(l,n.id,'duplicate layer id "'+n.id+'", previously used at line '+C.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(q){q in n&&t.push(new H(l,n[q],'"'+q+'" is prohibited for ref layers'))}),h.layers.forEach(function(q){Ie(q.id)===E&&(y=q)}),y?y.ref?t.push(new H(l,n.ref,"ref cannot reference another ref layer")):w=Ie(y.type):t.push(new H(l,n.ref,'ref layer "'+E+'" not found'));else if(w!=="background")if(n.source){var L=h.sources&&h.sources[n.source],R=L&&Ie(L.type);L?R==="vector"&&w==="raster"?t.push(new H(l,n.source,'layer "'+n.id+'" requires a raster source')):R==="raster"&&w!=="raster"?t.push(new H(l,n.source,'layer "'+n.id+'" requires a vector source')):R!=="vector"||n["source-layer"]?R==="raster-dem"&&w!=="hillshade"?t.push(new H(l,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!n.paint||!n.paint["line-gradient"]||R==="geojson"&&L.lineMetrics||t.push(new H(l,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new H(l,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new H(l,n.source,'source "'+n.source+'" not found'))}else t.push(new H(l,n,'missing required property "source"'));return t=t.concat(Ei({key:l,value:n,valueSpec:f.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return zt({key:l+".type",value:n.type,valueSpec:f.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:Hu,layout:function(q){return Ei({layer:n,key:q.key,value:q.value,style:q.style,styleSpec:q.styleSpec,objectElementValidators:{"*":function(Z){return Ts(Ee({layerType:w},Z))}}})},paint:function(q){return Ei({layer:n,key:q.key,value:q.value,style:q.style,styleSpec:q.styleSpec,objectElementValidators:{"*":function(Z){return $u(Ee({layerType:w},Z))}}})}}}))}function Yo(e){var t=e.value,n=e.key,l=Jt(t);return l!=="string"?[new H(n,t,"string expected, "+l+" found")]:[]}var ar={promoteId:function(e){var t=e.key,n=e.value;if(Jt(n)==="string")return Yo({key:t,value:n});var l=[];for(var h in n)l.push.apply(l,Yo({key:t+"."+h,value:n[h]}));return l}};function bl(e){var t=e.value,n=e.key,l=e.styleSpec,h=e.style;if(!t.type)return[new H(n,t,'"type" is required')];var f,y=Ie(t.type);switch(y){case"vector":case"raster":case"raster-dem":return Ei({key:n,value:t,valueSpec:l["source_"+y.replace("-","_")],style:e.style,styleSpec:l,objectElementValidators:ar});case"geojson":if(f=Ei({key:n,value:t,valueSpec:l.source_geojson,style:h,styleSpec:l,objectElementValidators:ar}),t.cluster)for(var w in t.clusterProperties){var E=t.clusterProperties[w],T=E[0],P=typeof T=="string"?[T,["accumulated"],["get",w]]:T;f.push.apply(f,Qo({key:n+"."+w+".map",value:E[1],expressionContext:"cluster-map"})),f.push.apply(f,Qo({key:n+"."+w+".reduce",value:P,expressionContext:"cluster-reduce"}))}return f;case"video":return Ei({key:n,value:t,valueSpec:l.source_video,style:h,styleSpec:l});case"image":return Ei({key:n,value:t,valueSpec:l.source_image,style:h,styleSpec:l});case"canvas":return[new H(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Es({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:l})}}function Jo(e){var t=e.value,n=e.styleSpec,l=n.light,h=e.style,f=[],y=Jt(t);if(t===void 0)return f;if(y!=="object")return f.concat([new H("light",t,"object expected, "+y+" found")]);for(var w in t){var E=w.match(/^(.*)-transition$/);f=f.concat(E&&l[E[1]]&&l[E[1]].transition?zt({key:w,value:t[w],valueSpec:n.transition,style:h,styleSpec:n}):l[w]?zt({key:w,value:t[w],valueSpec:l[w],style:h,styleSpec:n}):[new H(w,t[w],'unknown property "'+w+'"')])}return f}var yo={"*":function(){return[]},array:Jp,boolean:function(e){var t=e.value,n=e.key,l=Jt(t);return l!=="boolean"?[new H(n,t,"boolean expected, "+l+" found")]:[]},number:eh,color:function(e){var t=e.key,n=e.value,l=Jt(n);return l!=="string"?[new H(t,n,"color expected, "+l+" found")]:Ct(n)===null?[new H(t,n,'color expected, "'+n+'" found')]:[]},constants:ce,enum:Es,filter:Hu,function:th,layer:ih,object:Ei,source:bl,light:Jo,string:Yo,formatted:function(e){return Yo(e).length===0?[]:Qo(e)},resolvedImage:function(e){return Yo(e).length===0?[]:Qo(e)}};function zt(e){var t=e.value,n=e.valueSpec,l=e.styleSpec;return n.expression&&ml(Ie(t))?th(e):n.expression&&bs(ve(t))?Qo(e):n.type&&yo[n.type]?yo[n.type](e):Ei(Ee({},e,{valueSpec:n.type?l[n.type]:n}))}function er(e){var t=e.value,n=e.key,l=Yo(e);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new H(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new H(n,t,'"glyphs" url must include a "{range}" token'))),l}function Hn(e,t){t===void 0&&(t=U);var n=[];return n=n.concat(zt({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:er,"*":function(){return[]}}})),e.constants&&(n=n.concat(ce({key:"constants",value:e.constants,style:e,styleSpec:t}))),Is(n)}function Is(e){return[].concat(e).sort(function(t,n){return t.line-n.line})}function ka(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return Is(e.apply(this,t))}}Hn.source=ka(bl),Hn.light=ka(Jo),Hn.layer=ka(ih),Hn.filter=ka(Hu),Hn.paintProperty=ka($u),Hn.layoutProperty=ka(Ts);var Ps=Hn,yd=Ps.light,vd=Ps.paintProperty,Cs=Ps.layoutProperty;function ks(e,t){var n=!1;if(t&&t.length)for(var l=0,h=t;l<h.length;l+=1)e.fire(new te(new Error(h[l].message))),n=!0;return n}var Ki=Dr;function Dr(e,t,n){var l=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var h=new Int32Array(this.arrayBuffer);e=h[0],this.d=(t=h[1])+2*(n=h[2]);for(var f=0;f<this.d*this.d;f++){var y=h[3+f],w=h[3+f+1];l.push(y===w?null:h.subarray(y,w))}var E=h[3+l.length+1];this.keys=h.subarray(h[3+l.length],E),this.bboxes=h.subarray(E),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var T=0;T<this.d*this.d;T++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var P=n/t*e;this.min=-P,this.max=e+P}Dr.prototype.insert=function(e,t,n,l,h){this._forEachCell(t,n,l,h,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(l),this.bboxes.push(h)},Dr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Dr.prototype._insertCell=function(e,t,n,l,h,f){this.cells[h].push(f)},Dr.prototype.query=function(e,t,n,l,h){var f=this.min,y=this.max;if(e<=f&&t<=f&&y<=n&&y<=l&&!h)return Array.prototype.slice.call(this.keys);var w=[];return this._forEachCell(e,t,n,l,this._queryCell,w,{},h),w},Dr.prototype._queryCell=function(e,t,n,l,h,f,y,w){var E=this.cells[h];if(E!==null)for(var T=this.keys,P=this.bboxes,C=0;C<E.length;C++){var L=E[C];if(y[L]===void 0){var R=4*L;(w?w(P[R+0],P[R+1],P[R+2],P[R+3]):e<=P[R+2]&&t<=P[R+3]&&n>=P[R+0]&&l>=P[R+1])?(y[L]=!0,f.push(T[L])):y[L]=!1}}},Dr.prototype._forEachCell=function(e,t,n,l,h,f,y,w){for(var E=this._convertToCellCoord(e),T=this._convertToCellCoord(t),P=this._convertToCellCoord(n),C=this._convertToCellCoord(l),L=E;L<=P;L++)for(var R=T;R<=C;R++){var q=this.d*R+L;if((!w||w(this._convertFromCellCoord(L),this._convertFromCellCoord(R),this._convertFromCellCoord(L+1),this._convertFromCellCoord(R+1)))&&h.call(this,e,t,n,l,q,f,y,w))return}},Dr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Dr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Dr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,l=0;l<this.cells.length;l++)n+=this.cells[l].length;var h=new Int32Array(t+n+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var f=t,y=0;y<e.length;y++){var w=e[y];h[3+y]=f,h.set(w,f),f+=w.length}return h[3+e.length]=f,h.set(this.keys,f),h[3+e.length+1]=f+=this.keys.length,h.set(this.bboxes,f),f+=this.bboxes.length,h.buffer};var As=ee.ImageData,oh=ee.ImageBitmap,kr={};function Xe(e,t,n){n===void 0&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),kr[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var On in Xe("Object",Object),Ki.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Ki.deserialize=function(e){return new Ki(e.buffer)},Xe("Grid",Ki),Xe("Color",Nt),Xe("Error",Error),Xe("ResolvedImage",In),Xe("StylePropertyFunction",Ca),Xe("StyleExpression",Ia,{omit:["_evaluator"]}),Xe("ZoomDependentExpression",Pa),Xe("ZoomConstantExpression",Ss),Xe("CompoundExpression",en,{omit:["_evaluate"]}),Xo)Xo[On]._classRegistryKey||Xe("Expression_"+On,Xo[On]);function Sl(e){return e&&typeof ArrayBuffer!="undefined"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function Aa(e){return oh&&e instanceof oh}function Ti(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Sl(e)||Aa(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof As)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var l=[],h=0,f=e;h<f.length;h+=1)l.push(Ti(f[h],t));return l}if(typeof e=="object"){var y=e.constructor,w=y._classRegistryKey;if(!w)throw new Error("can't serialize object of unregistered class");var E=y.serialize?y.serialize(e,t):{};if(!y.serialize){for(var T in e)if(e.hasOwnProperty(T)&&!(kr[w].omit.indexOf(T)>=0)){var P=e[T];E[T]=kr[w].shallow.indexOf(T)>=0?P:Ti(P,t)}e instanceof Error&&(E.message=e.message)}if(E.$name)throw new Error("$name property is reserved for worker serialization logic.");return w!=="Object"&&(E.$name=w),E}throw new Error("can't serialize object of type "+typeof e)}function Fn(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Sl(e)||Aa(e)||ArrayBuffer.isView(e)||e instanceof As)return e;if(Array.isArray(e))return e.map(Fn);if(typeof e=="object"){var t=e.$name||"Object",n=kr[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var l=Object.create(n.prototype),h=0,f=Object.keys(e);h<f.length;h+=1){var y=f[h];if(y!=="$name"){var w=e[y];l[y]=kr[t].shallow.indexOf(y)>=0?w:Fn(w)}}return l}throw new Error("can't deserialize object of type "+typeof e)}var Qu=function(){this.first=!0};Qu.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var De={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Yu(e){for(var t=0,n=e;t<n.length;t+=1)if(El(n[t].charCodeAt(0)))return!0;return!1}function El(e){return!(e!==746&&e!==747&&(e<4352||!(De["Bopomofo Extended"](e)||De.Bopomofo(e)||De["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||De["CJK Compatibility Ideographs"](e)||De["CJK Compatibility"](e)||De["CJK Radicals Supplement"](e)||De["CJK Strokes"](e)||!(!De["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||De["CJK Unified Ideographs Extension A"](e)||De["CJK Unified Ideographs"](e)||De["Enclosed CJK Letters and Months"](e)||De["Hangul Compatibility Jamo"](e)||De["Hangul Jamo Extended-A"](e)||De["Hangul Jamo Extended-B"](e)||De["Hangul Jamo"](e)||De["Hangul Syllables"](e)||De.Hiragana(e)||De["Ideographic Description Characters"](e)||De.Kanbun(e)||De["Kangxi Radicals"](e)||De["Katakana Phonetic Extensions"](e)||De.Katakana(e)&&e!==12540||!(!De["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!De["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||De["Unified Canadian Aboriginal Syllabics"](e)||De["Unified Canadian Aboriginal Syllabics Extended"](e)||De["Vertical Forms"](e)||De["Yijing Hexagram Symbols"](e)||De["Yi Syllables"](e)||De["Yi Radicals"](e))))}function Ju(e){return!(El(e)||function(t){return!!(De["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||De["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||De["Letterlike Symbols"](t)||De["Number Forms"](t)||De["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||De["Control Pictures"](t)&&t!==9251||De["Optical Character Recognition"](t)||De["Enclosed Alphanumerics"](t)||De["Geometric Shapes"](t)||De["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||De["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||De["CJK Symbols and Punctuation"](t)||De.Katakana(t)||De["Private Use Area"](t)||De["CJK Compatibility Forms"](t)||De["Small Form Variants"](t)||De["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function li(e){return e>=1424&&e<=2303||De["Arabic Presentation Forms-A"](e)||De["Arabic Presentation Forms-B"](e)}function Bn(e,t){return!(!t&&li(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||De.Khmer(e))}function Tl(e){for(var t=0,n=e;t<n.length;t+=1)if(li(n[t].charCodeAt(0)))return!0;return!1}var Il=null,Un="unavailable",$i=null,ah=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Un="error"),Il&&Il(e)};function zs(){ec.fire(new X("pluginStateChange",{pluginStatus:Un,pluginURL:$i}))}var ec=new ie,tc=function(){return Un},Ii=function(){if(Un!=="deferred"||!$i)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Un="loading",zs(),$i&&ds({url:$i},function(e){e?ah(e):(Un="loaded",zs())})},Kn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Un==="loaded"||Kn.applyArabicShaping!=null},isLoading:function(){return Un==="loading"},setState:function(e){Un=e.pluginStatus,$i=e.pluginURL},isParsed:function(){return Kn.applyArabicShaping!=null&&Kn.processBidirectionalText!=null&&Kn.processStyledBidirectionalText!=null},getPluginURL:function(){return $i}},Tt=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Qu,this.transition={})};Tt.prototype.isSupportedScript=function(e){return function(t,n){for(var l=0,h=t;l<h.length;l+=1)if(!Bn(h[l].charCodeAt(0),n))return!1;return!0}(e,Kn.isLoaded())},Tt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Tt.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}};var Li=function(e,t){this.property=e,this.value=t,this.expression=function(n,l){if(ml(n))return new Ca(n,l);if(bs(n)){var h=Yp(n,l);if(h.result==="error")throw new Error(h.value.map(function(y){return y.key+": "+y.message}).join(", "));return h.value}var f=n;return typeof n=="string"&&l.type==="color"&&(f=Nt.parse(n)),{kind:"constant",evaluate:function(){return f}}}(t===void 0?e.specification.default:t,e.specification)};Li.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Li.prototype.possiblyEvaluate=function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)};var ui=function(e){this.property=e,this.value=new Li(e,void 0)};ui.prototype.transitioned=function(e,t){return new ea(this.property,this.value,t,oe({},e.transition,this.transition),e.now)},ui.prototype.untransitioned=function(){return new ea(this.property,this.value,null,{},0)};var rn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};rn.prototype.getValue=function(e){return Jr(this._values[e].value.value)},rn.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ui(this._values[e].property)),this._values[e].value=new Li(this._values[e].property,t===null?void 0:Jr(t))},rn.prototype.getTransition=function(e){return Jr(this._values[e].transition)},rn.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ui(this._values[e].property)),this._values[e].transition=Jr(t)||void 0},rn.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var l=n[t],h=this.getValue(l);h!==void 0&&(e[l]=h);var f=this.getTransition(l);f!==void 0&&(e[l+"-transition"]=f)}return e},rn.prototype.transitioned=function(e,t){for(var n=new vo(this._properties),l=0,h=Object.keys(this._values);l<h.length;l+=1){var f=h[l];n._values[f]=this._values[f].transitioned(e,t._values[f])}return n},rn.prototype.untransitioned=function(){for(var e=new vo(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var l=n[t];e._values[l]=this._values[l].untransitioned()}return e};var ea=function(e,t,n,l,h){this.property=e,this.value=t,this.begin=h+l.delay||0,this.end=this.begin+l.duration||0,e.specification.transition&&(l.delay||l.duration)&&(this.prior=n)};ea.prototype.possiblyEvaluate=function(e,t,n){var l=e.now||0,h=this.value.possiblyEvaluate(e,t,n),f=this.prior;if(f){if(l>this.end)return this.prior=null,h;if(this.value.isDataDriven())return this.prior=null,h;if(l<this.begin)return f.possiblyEvaluate(e,t,n);var y=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(f.possiblyEvaluate(e,t,n),h,function(w){if(w<=0)return 0;if(w>=1)return 1;var E=w*w,T=E*w;return 4*(w<.5?T:3*(w-E)+T-.75)}(y))}return h};var vo=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};vo.prototype.possiblyEvaluate=function(e,t,n){for(var l=new Ms(this._properties),h=0,f=Object.keys(this._values);h<f.length;h+=1){var y=f[h];l._values[y]=this._values[y].possiblyEvaluate(e,t,n)}return l},vo.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var Pi=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};Pi.prototype.getValue=function(e){return Jr(this._values[e].value)},Pi.prototype.setValue=function(e,t){this._values[e]=new Li(this._values[e].property,t===null?void 0:Jr(t))},Pi.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var l=n[t],h=this.getValue(l);h!==void 0&&(e[l]=h)}return e},Pi.prototype.possiblyEvaluate=function(e,t,n){for(var l=new Ms(this._properties),h=0,f=Object.keys(this._values);h<f.length;h+=1){var y=f[h];l._values[y]=this._values[y].possiblyEvaluate(e,t,n)}return l};var dn=function(e,t,n){this.property=e,this.value=t,this.parameters=n};dn.prototype.isConstant=function(){return this.value.kind==="constant"},dn.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},dn.prototype.evaluate=function(e,t,n,l){return this.property.evaluate(this.value,this.parameters,e,t,n,l)};var Ms=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Ms.prototype.get=function(e){return this._values[e]};var Je=function(e){this.specification=e};Je.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},Je.prototype.interpolate=function(e,t,n){var l=Ea[this.specification.type];return l?l(e,t,n):e};var Ke=function(e,t){this.specification=e,this.overrides=t};Ke.prototype.possiblyEvaluate=function(e,t,n,l){return new dn(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},n,l)}:e.expression,t)},Ke.prototype.interpolate=function(e,t,n){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new dn(this,{kind:"constant",value:void 0},e.parameters);var l=Ea[this.specification.type];return l?new dn(this,{kind:"constant",value:l(e.value.value,t.value.value,n)},e.parameters):e},Ke.prototype.evaluate=function(e,t,n,l,h,f){return e.kind==="constant"?e.value:e.evaluate(t,n,l,h,f)};var Pl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(n,l,h,f){if(n.value===void 0)return new dn(this,{kind:"constant",value:void 0},l);if(n.expression.kind==="constant"){var y=n.expression.evaluate(l,null,{},h,f),w=n.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,E=this._calculate(w,w,w,l);return new dn(this,{kind:"constant",value:E},l)}if(n.expression.kind==="camera"){var T=this._calculate(n.expression.evaluate({zoom:l.zoom-1}),n.expression.evaluate({zoom:l.zoom}),n.expression.evaluate({zoom:l.zoom+1}),l);return new dn(this,{kind:"constant",value:T},l)}return new dn(this,n.expression,l)},t.prototype.evaluate=function(n,l,h,f,y,w){if(n.kind==="source"){var E=n.evaluate(l,h,f,y,w);return this._calculate(E,E,E,l)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(l.zoom)-1},h,f),n.evaluate({zoom:Math.floor(l.zoom)},h,f),n.evaluate({zoom:Math.floor(l.zoom)+1},h,f),l):n.value},t.prototype._calculate=function(n,l,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}},t.prototype.interpolate=function(n){return n},t}(Ke),mn=function(e){this.specification=e};mn.prototype.possiblyEvaluate=function(e,t,n,l){if(e.value!==void 0){if(e.expression.kind==="constant"){var h=e.expression.evaluate(t,null,{},n,l);return this._calculate(h,h,h,t)}return this._calculate(e.expression.evaluate(new Tt(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Tt(Math.floor(t.zoom),t)),e.expression.evaluate(new Tt(Math.floor(t.zoom+1),t)),t)}},mn.prototype._calculate=function(e,t,n,l){return l.zoom>l.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},mn.prototype.interpolate=function(e){return e};var Ci=function(e){this.specification=e};Ci.prototype.possiblyEvaluate=function(e,t,n,l){return!!e.expression.evaluate(t,null,{},n,l)},Ci.prototype.interpolate=function(){return!1};var nn=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var n=e[t];n.specification.overridable&&this.overridableProperties.push(t);var l=this.defaultPropertyValues[t]=new Li(n,void 0),h=this.defaultTransitionablePropertyValues[t]=new ui(n);this.defaultTransitioningPropertyValues[t]=h.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=l.possiblyEvaluate({})}};Xe("DataDrivenProperty",Ke),Xe("DataConstantProperty",Je),Xe("CrossFadedDataDrivenProperty",Pl),Xe("CrossFadedProperty",mn),Xe("ColorRampProperty",Ci);var Ri=function(e){function t(n,l){if(e.call(this),this.id=n.id,this.type=n.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},n.type!=="custom"&&(this.metadata=(n=n).metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),l.layout&&(this._unevaluatedLayout=new Pi(l.layout)),l.paint)){for(var h in this._transitionablePaint=new rn(l.paint),n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(var f in n.layout)this.setLayoutProperty(f,n.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ms(l.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)},t.prototype.setLayoutProperty=function(n,l,h){h===void 0&&(h={}),l!=null&&this._validate(Cs,"layers."+this.id+".layout."+n,n,l,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,l):this.visibility=l)},t.prototype.getPaintProperty=function(n){return mt(n,"-transition")?this._transitionablePaint.getTransition(n.slice(0,-"-transition".length)):this._transitionablePaint.getValue(n)},t.prototype.setPaintProperty=function(n,l,h){if(h===void 0&&(h={}),l!=null&&this._validate(vd,"layers."+this.id+".paint."+n,n,l,h))return!1;if(mt(n,"-transition"))return this._transitionablePaint.setTransition(n.slice(0,-"-transition".length),l||void 0),!1;var f=this._transitionablePaint._values[n],y=f.property.specification["property-type"]==="cross-faded-data-driven",w=f.value.isDataDriven(),E=f.value;this._transitionablePaint.setValue(n,l),this._handleSpecialPaintPropertyUpdate(n);var T=this._transitionablePaint._values[n].value;return T.isDataDriven()||w||y||this._handleOverridablePaintPropertyUpdate(n,E,T)},t.prototype._handleSpecialPaintPropertyUpdate=function(n){},t.prototype._handleOverridablePaintPropertyUpdate=function(n,l,h){return!1},t.prototype.isHidden=function(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(n,l){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,l)},t.prototype.serialize=function(){var n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Qt(n,function(l,h){return!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length)})},t.prototype._validate=function(n,l,h,f,y){return y===void 0&&(y={}),(!y||y.validate!==!1)&&ks(this,n.call(Ps,{key:l,layerType:this.type,objectKey:h,value:f,styleSpec:U,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var n in this.paint._values){var l=this.paint.get(n);if(l instanceof dn&&$o(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1},t}(ie),rc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Cl=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},qt=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Xr(e,t){t===void 0&&(t=1);var n=0,l=0;return{members:e.map(function(h){var f=rc[h.type].BYTES_PER_ELEMENT,y=n=sh(n,Math.max(t,f)),w=h.components||1;return l=Math.max(l,f),n+=f*w,{name:h.name,type:h.type,components:w,offset:y}}),size:sh(n,Math.max(l,t)),alignment:t}}function sh(e,t){return Math.ceil(e/t)*t}qt.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},qt.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},qt.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},qt.prototype.clear=function(){this.length=0},qt.prototype.resize=function(e){this.reserve(e),this.length=e},qt.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},qt.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ta=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l){var h=this.length;return this.resize(h+1),this.emplace(h,n,l)},t.prototype.emplace=function(n,l,h){var f=2*n;return this.int16[f+0]=l,this.int16[f+1]=h,n},t}(qt);ta.prototype.bytesPerElement=4,Xe("StructArrayLayout2i4",ta);var nc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,f)},t.prototype.emplace=function(n,l,h,f,y){var w=4*n;return this.int16[w+0]=l,this.int16[w+1]=h,this.int16[w+2]=f,this.int16[w+3]=y,n},t}(qt);nc.prototype.bytesPerElement=8,Xe("StructArrayLayout4i8",nc);var Qi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,w){var E=this.length;return this.resize(E+1),this.emplace(E,n,l,h,f,y,w)},t.prototype.emplace=function(n,l,h,f,y,w,E){var T=6*n;return this.int16[T+0]=l,this.int16[T+1]=h,this.int16[T+2]=f,this.int16[T+3]=y,this.int16[T+4]=w,this.int16[T+5]=E,n},t}(qt);Qi.prototype.bytesPerElement=12,Xe("StructArrayLayout2i4i12",Qi);var Nn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,w){var E=this.length;return this.resize(E+1),this.emplace(E,n,l,h,f,y,w)},t.prototype.emplace=function(n,l,h,f,y,w,E){var T=4*n,P=8*n;return this.int16[T+0]=l,this.int16[T+1]=h,this.uint8[P+4]=f,this.uint8[P+5]=y,this.uint8[P+6]=w,this.uint8[P+7]=E,n},t}(qt);Nn.prototype.bytesPerElement=8,Xe("StructArrayLayout2i4ub8",Nn);var za=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l){var h=this.length;return this.resize(h+1),this.emplace(h,n,l)},t.prototype.emplace=function(n,l,h){var f=2*n;return this.float32[f+0]=l,this.float32[f+1]=h,n},t}(qt);za.prototype.bytesPerElement=8,Xe("StructArrayLayout2f8",za);var Oi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,w,E,T,P,C){var L=this.length;return this.resize(L+1),this.emplace(L,n,l,h,f,y,w,E,T,P,C)},t.prototype.emplace=function(n,l,h,f,y,w,E,T,P,C,L){var R=10*n;return this.uint16[R+0]=l,this.uint16[R+1]=h,this.uint16[R+2]=f,this.uint16[R+3]=y,this.uint16[R+4]=w,this.uint16[R+5]=E,this.uint16[R+6]=T,this.uint16[R+7]=P,this.uint16[R+8]=C,this.uint16[R+9]=L,n},t}(qt);Oi.prototype.bytesPerElement=20,Xe("StructArrayLayout10ui20",Oi);var kl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,w,E,T,P,C,L,R){var q=this.length;return this.resize(q+1),this.emplace(q,n,l,h,f,y,w,E,T,P,C,L,R)},t.prototype.emplace=function(n,l,h,f,y,w,E,T,P,C,L,R,q){var Z=12*n;return this.int16[Z+0]=l,this.int16[Z+1]=h,this.int16[Z+2]=f,this.int16[Z+3]=y,this.uint16[Z+4]=w,this.uint16[Z+5]=E,this.uint16[Z+6]=T,this.uint16[Z+7]=P,this.int16[Z+8]=C,this.int16[Z+9]=L,this.int16[Z+10]=R,this.int16[Z+11]=q,n},t}(qt);kl.prototype.bytesPerElement=24,Xe("StructArrayLayout4i4ui4i24",kl);var Ma=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,l,h)},t.prototype.emplace=function(n,l,h,f){var y=3*n;return this.float32[y+0]=l,this.float32[y+1]=h,this.float32[y+2]=f,n},t}(qt);Ma.prototype.bytesPerElement=12,Xe("StructArrayLayout3f12",Ma);var Ds=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var l=this.length;return this.resize(l+1),this.emplace(l,n)},t.prototype.emplace=function(n,l){return this.uint32[1*n+0]=l,n},t}(qt);Ds.prototype.bytesPerElement=4,Xe("StructArrayLayout1ul4",Ds);var ic=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,w,E,T,P){var C=this.length;return this.resize(C+1),this.emplace(C,n,l,h,f,y,w,E,T,P)},t.prototype.emplace=function(n,l,h,f,y,w,E,T,P,C){var L=10*n,R=5*n;return this.int16[L+0]=l,this.int16[L+1]=h,this.int16[L+2]=f,this.int16[L+3]=y,this.int16[L+4]=w,this.int16[L+5]=E,this.uint32[R+3]=T,this.uint16[L+8]=P,this.uint16[L+9]=C,n},t}(qt);ic.prototype.bytesPerElement=20,Xe("StructArrayLayout6i1ul2ui20",ic);var Da=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,w){var E=this.length;return this.resize(E+1),this.emplace(E,n,l,h,f,y,w)},t.prototype.emplace=function(n,l,h,f,y,w,E){var T=6*n;return this.int16[T+0]=l,this.int16[T+1]=h,this.int16[T+2]=f,this.int16[T+3]=y,this.int16[T+4]=w,this.int16[T+5]=E,n},t}(qt);Da.prototype.bytesPerElement=12,Xe("StructArrayLayout2i2i2i12",Da);var ra=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y){var w=this.length;return this.resize(w+1),this.emplace(w,n,l,h,f,y)},t.prototype.emplace=function(n,l,h,f,y,w){var E=4*n,T=8*n;return this.float32[E+0]=l,this.float32[E+1]=h,this.float32[E+2]=f,this.int16[T+6]=y,this.int16[T+7]=w,n},t}(qt);ra.prototype.bytesPerElement=16,Xe("StructArrayLayout2f1f2i16",ra);var oc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,f)},t.prototype.emplace=function(n,l,h,f,y){var w=12*n,E=3*n;return this.uint8[w+0]=l,this.uint8[w+1]=h,this.float32[E+1]=f,this.float32[E+2]=y,n},t}(qt);oc.prototype.bytesPerElement=12,Xe("StructArrayLayout2ub2f12",oc);var go=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,l,h)},t.prototype.emplace=function(n,l,h,f){var y=3*n;return this.uint16[y+0]=l,this.uint16[y+1]=h,this.uint16[y+2]=f,n},t}(qt);go.prototype.bytesPerElement=6,Xe("StructArrayLayout3ui6",go);var _o=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,w,E,T,P,C,L,R,q,Z,J,$,ae){var pe=this.length;return this.resize(pe+1),this.emplace(pe,n,l,h,f,y,w,E,T,P,C,L,R,q,Z,J,$,ae)},t.prototype.emplace=function(n,l,h,f,y,w,E,T,P,C,L,R,q,Z,J,$,ae,pe){var he=24*n,de=12*n,xe=48*n;return this.int16[he+0]=l,this.int16[he+1]=h,this.uint16[he+2]=f,this.uint16[he+3]=y,this.uint32[de+2]=w,this.uint32[de+3]=E,this.uint32[de+4]=T,this.uint16[he+10]=P,this.uint16[he+11]=C,this.uint16[he+12]=L,this.float32[de+7]=R,this.float32[de+8]=q,this.uint8[xe+36]=Z,this.uint8[xe+37]=J,this.uint8[xe+38]=$,this.uint32[de+10]=ae,this.int16[he+22]=pe,n},t}(qt);_o.prototype.bytesPerElement=48,Xe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",_o);var Al=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,w,E,T,P,C,L,R,q,Z,J,$,ae,pe,he,de,xe,Pe,ze,Ye,Be,tt,Ne,xt){var lt=this.length;return this.resize(lt+1),this.emplace(lt,n,l,h,f,y,w,E,T,P,C,L,R,q,Z,J,$,ae,pe,he,de,xe,Pe,ze,Ye,Be,tt,Ne,xt)},t.prototype.emplace=function(n,l,h,f,y,w,E,T,P,C,L,R,q,Z,J,$,ae,pe,he,de,xe,Pe,ze,Ye,Be,tt,Ne,xt,lt){var $e=34*n,St=17*n;return this.int16[$e+0]=l,this.int16[$e+1]=h,this.int16[$e+2]=f,this.int16[$e+3]=y,this.int16[$e+4]=w,this.int16[$e+5]=E,this.int16[$e+6]=T,this.int16[$e+7]=P,this.uint16[$e+8]=C,this.uint16[$e+9]=L,this.uint16[$e+10]=R,this.uint16[$e+11]=q,this.uint16[$e+12]=Z,this.uint16[$e+13]=J,this.uint16[$e+14]=$,this.uint16[$e+15]=ae,this.uint16[$e+16]=pe,this.uint16[$e+17]=he,this.uint16[$e+18]=de,this.uint16[$e+19]=xe,this.uint16[$e+20]=Pe,this.uint16[$e+21]=ze,this.uint16[$e+22]=Ye,this.uint32[St+12]=Be,this.float32[St+13]=tt,this.float32[St+14]=Ne,this.float32[St+15]=xt,this.float32[St+16]=lt,n},t}(qt);Al.prototype.bytesPerElement=68,Xe("StructArrayLayout8i15ui1ul4f68",Al);var xo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var l=this.length;return this.resize(l+1),this.emplace(l,n)},t.prototype.emplace=function(n,l){return this.float32[1*n+0]=l,n},t}(qt);xo.prototype.bytesPerElement=4,Xe("StructArrayLayout1f4",xo);var ci=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,l,h)},t.prototype.emplace=function(n,l,h,f){var y=3*n;return this.int16[y+0]=l,this.int16[y+1]=h,this.int16[y+2]=f,n},t}(qt);ci.prototype.bytesPerElement=6,Xe("StructArrayLayout3i6",ci);var ac=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,l,h)},t.prototype.emplace=function(n,l,h,f){var y=4*n;return this.uint32[2*n+0]=l,this.uint16[y+2]=h,this.uint16[y+3]=f,n},t}(qt);ac.prototype.bytesPerElement=8,Xe("StructArrayLayout1ul2ui8",ac);var Ls=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l){var h=this.length;return this.resize(h+1),this.emplace(h,n,l)},t.prototype.emplace=function(n,l,h){var f=2*n;return this.uint16[f+0]=l,this.uint16[f+1]=h,n},t}(qt);Ls.prototype.bytesPerElement=4,Xe("StructArrayLayout2ui4",Ls);var sc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var l=this.length;return this.resize(l+1),this.emplace(l,n)},t.prototype.emplace=function(n,l){return this.uint16[1*n+0]=l,n},t}(qt);sc.prototype.bytesPerElement=2,Xe("StructArrayLayout1ui2",sc);var zl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,f)},t.prototype.emplace=function(n,l,h,f,y){var w=4*n;return this.float32[w+0]=l,this.float32[w+1]=h,this.float32[w+2]=f,this.float32[w+3]=y,n},t}(qt);zl.prototype.bytesPerElement=16,Xe("StructArrayLayout4f16",zl);var i=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new le(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(Cl);i.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new i(this,n)},t}(ic);Xe("CollisionBoxArray",s);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(l){this._structArray.uint8[this._pos1+37]=l},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(l){this._structArray.uint8[this._pos1+38]=l},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(l){this._structArray.uint32[this._pos4+10]=l},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,n),t}(Cl);o.prototype.size=48;var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new o(this,n)},t}(_o);Xe("PlacedSymbolArray",c);var d=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(l){this._structArray.uint32[this._pos4+12]=l},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,n),t}(Cl);d.prototype.size=68;var v=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new d(this,n)},t}(Al);Xe("SymbolInstanceArray",v);var x=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(n){return this.float32[1*n+0]},t}(xo);Xe("GlyphOffsetArray",x);var b=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(n){return this.int16[3*n+0]},t.prototype.gety=function(n){return this.int16[3*n+1]},t.prototype.gettileUnitDistanceFromAnchor=function(n){return this.int16[3*n+2]},t}(ci);Xe("SymbolLineVertexArray",b);var I=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,n),t}(Cl);I.prototype.size=8;var A=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new I(this,n)},t}(ac);Xe("FeatureIndexArray",A);var F=Xr([{name:"a_pos",components:2,type:"Int16"}],4).members,B=function(e){e===void 0&&(e=[]),this.segments=e};function N(e,t){return 256*(e=se(Math.floor(e),0,255))+se(Math.floor(t),0,255)}B.prototype.prepareSegment=function(e,t,n,l){var h=this.segments[this.segments.length-1];return e>B.MAX_VERTEX_ARRAY_LENGTH&&gt("Max vertices per segment is "+B.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!h||h.vertexLength+e>B.MAX_VERTEX_ARRAY_LENGTH||h.sortKey!==l)&&(h={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},l!==void 0&&(h.sortKey=l),this.segments.push(h)),h},B.prototype.get=function(){return this.segments},B.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var l in n.vaos)n.vaos[l].destroy()}},B.simpleSegment=function(e,t,n,l){return new B([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:l,vaos:{},sortKey:0}])},B.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xe("SegmentVector",B);var W=Xr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),G=z(function(e){e.exports=function(t,n){var l,h,f,y,w,E,T,P;for(h=t.length-(l=3&t.length),f=n,w=3432918353,E=461845907,P=0;P<h;)T=255&t.charCodeAt(P)|(255&t.charCodeAt(++P))<<8|(255&t.charCodeAt(++P))<<16|(255&t.charCodeAt(++P))<<24,++P,f=27492+(65535&(y=5*(65535&(f=(f^=T=(65535&(T=(T=(65535&T)*w+(((T>>>16)*w&65535)<<16)&4294967295)<<15|T>>>17))*E+(((T>>>16)*E&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(T=0,l){case 3:T^=(255&t.charCodeAt(P+2))<<16;case 2:T^=(255&t.charCodeAt(P+1))<<8;case 1:f^=T=(65535&(T=(T=(65535&(T^=255&t.charCodeAt(P)))*w+(((T>>>16)*w&65535)<<16)&4294967295)<<15|T>>>17))*E+(((T>>>16)*E&65535)<<16)&4294967295}return f^=t.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0}}),Y=z(function(e){e.exports=function(t,n){for(var l,h=t.length,f=n^h,y=0;h>=4;)l=1540483477*(65535&(l=255&t.charCodeAt(y)|(255&t.charCodeAt(++y))<<8|(255&t.charCodeAt(++y))<<16|(255&t.charCodeAt(++y))<<24))+((1540483477*(l>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:f^=(255&t.charCodeAt(y+2))<<16;case 2:f^=(255&t.charCodeAt(y+1))<<8;case 1:f=1540483477*(65535&(f^=255&t.charCodeAt(y)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0}}),j=G,Q=Y;j.murmur3=G,j.murmur2=Q;var re=function(){this.ids=[],this.positions=[],this.indexed=!1};re.prototype.add=function(e,t,n,l){this.ids.push(me(e)),this.positions.push(t,n,l)},re.prototype.getPositions=function(e){for(var t=me(e),n=0,l=this.ids.length-1;n<l;){var h=n+l>>1;this.ids[h]>=t?l=h:n=h+1}for(var f=[];this.ids[n]===t;)f.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return f},re.serialize=function(e,t){var n=new Float64Array(e.ids),l=new Uint32Array(e.positions);return function h(f,y,w,E){for(;w<E;){for(var T=f[w+E>>1],P=w-1,C=E+1;;){do P++;while(f[P]<T);do C--;while(f[C]>T);if(P>=C)break;fe(f,P,C),fe(y,3*P,3*C),fe(y,3*P+1,3*C+1),fe(y,3*P+2,3*C+2)}C-w<E-C?(h(f,y,w,C),w=C+1):(h(f,y,C+1,E),E=C)}}(n,l,0,n.length-1),t&&t.push(n.buffer,l.buffer),{ids:n,positions:l}},re.deserialize=function(e){var t=new re;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var ue=Math.pow(2,53)-1;function me(e){var t=+e;return!isNaN(t)&&t<=ue?t:j(String(e))}function fe(e,t,n){var l=e[t];e[t]=e[n],e[n]=l}Xe("FeaturePositionMap",re);var ye=function(e,t){this.gl=e.gl,this.location=t},be=function(e){function t(n,l){e.call(this,n,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))},t}(ye),Ae=function(e){function t(n,l){e.call(this,n,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))},t}(ye),ke=function(e){function t(n,l){e.call(this,n,l),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))},t}(ye),je=function(e){function t(n,l){e.call(this,n,l),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))},t}(ye),et=function(e){function t(n,l){e.call(this,n,l),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))},t}(ye),it=function(e){function t(n,l){e.call(this,n,l),this.current=Nt.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))},t}(ye),nt=new Float32Array(16),Lt=function(e){function t(n,l){e.call(this,n,l),this.current=nt}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(var l=1;l<16;l++)if(n[l]!==this.current[l]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}},t}(ye);function Ge(e){return[N(255*e.r,255*e.g),N(255*e.b,255*e.a)]}var dt=function(e,t,n){this.value=e,this.uniformNames=t.map(function(l){return"u_"+l}),this.type=n};dt.prototype.setUniform=function(e,t,n){e.set(n.constantOr(this.value))},dt.prototype.getBinding=function(e,t,n){return this.type==="color"?new it(e,t):new Ae(e,t)};var _t=function(e,t){this.uniformNames=t.map(function(n){return"u_"+n}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};_t.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},_t.prototype.setUniform=function(e,t,n,l){var h=l==="u_pattern_to"?this.patternTo:l==="u_pattern_from"?this.patternFrom:l==="u_pixel_ratio_to"?this.pixelRatioTo:l==="u_pixel_ratio_from"?this.pixelRatioFrom:null;h&&e.set(h)},_t.prototype.getBinding=function(e,t,n){return n.substr(0,9)==="u_pattern"?new et(e,t):new Ae(e,t)};var ft=function(e,t,n,l){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map(function(h){return{name:"a_"+h,type:"Float32",components:n==="color"?2:1,offset:0}}),this.paintVertexArray=new l};ft.prototype.populatePaintArray=function(e,t,n,l,h){var f=this.paintVertexArray.length,y=this.expression.evaluate(new Tt(0),t,{},l,[],h);this.paintVertexArray.resize(e),this._setPaintValue(f,e,y)},ft.prototype.updatePaintArray=function(e,t,n,l){var h=this.expression.evaluate({zoom:0},n,l);this._setPaintValue(e,t,h)},ft.prototype._setPaintValue=function(e,t,n){if(this.type==="color")for(var l=Ge(n),h=e;h<t;h++)this.paintVertexArray.emplace(h,l[0],l[1]);else{for(var f=e;f<t;f++)this.paintVertexArray.emplace(f,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},ft.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ft.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ht=function(e,t,n,l,h,f){this.expression=e,this.uniformNames=t.map(function(y){return"u_"+y+"_t"}),this.type=n,this.useIntegerZoom=l,this.zoom=h,this.maxValue=0,this.paintVertexAttributes=t.map(function(y){return{name:"a_"+y,type:"Float32",components:n==="color"?4:2,offset:0}}),this.paintVertexArray=new f};ht.prototype.populatePaintArray=function(e,t,n,l,h){var f=this.expression.evaluate(new Tt(this.zoom),t,{},l,[],h),y=this.expression.evaluate(new Tt(this.zoom+1),t,{},l,[],h),w=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(w,e,f,y)},ht.prototype.updatePaintArray=function(e,t,n,l){var h=this.expression.evaluate({zoom:this.zoom},n,l),f=this.expression.evaluate({zoom:this.zoom+1},n,l);this._setPaintValue(e,t,h,f)},ht.prototype._setPaintValue=function(e,t,n,l){if(this.type==="color")for(var h=Ge(n),f=Ge(l),y=e;y<t;y++)this.paintVertexArray.emplace(y,h[0],h[1],f[0],f[1]);else{for(var w=e;w<t;w++)this.paintVertexArray.emplace(w,n,l);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(l))}},ht.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ht.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ht.prototype.setUniform=function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,l=se(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(l)},ht.prototype.getBinding=function(e,t,n){return new Ae(e,t)};var vt=function(e,t,n,l,h,f){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=l,this.layerId=f,this.zoomInPaintVertexArray=new h,this.zoomOutPaintVertexArray=new h};vt.prototype.populatePaintArray=function(e,t,n){var l=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(l,e,t.patterns&&t.patterns[this.layerId],n)},vt.prototype.updatePaintArray=function(e,t,n,l,h){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],h)},vt.prototype._setPaintValues=function(e,t,n,l){if(l&&n){var h=l[n.min],f=l[n.mid],y=l[n.max];if(h&&f&&y)for(var w=e;w<t;w++)this.zoomInPaintVertexArray.emplace(w,f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],f.pixelRatio,h.pixelRatio),this.zoomOutPaintVertexArray.emplace(w,f.tl[0],f.tl[1],f.br[0],f.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1],f.pixelRatio,y.pixelRatio)}},vt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,W.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,W.members,this.expression.isStateDependent))},vt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ct=function(e,t,n){this.binders={},this._buffers=[];var l=[];for(var h in e.paint._values)if(n(h)){var f=e.paint.get(h);if(f instanceof dn&&$o(f.property.specification)){var y=Fr(h,e.type),w=f.value,E=f.property.specification.type,T=f.property.useIntegerZoom,P=f.property.specification["property-type"],C=P==="cross-faded"||P==="cross-faded-data-driven";if(w.kind==="constant")this.binders[h]=C?new _t(w.value,y):new dt(w.value,y,E),l.push("/u_"+h);else if(w.kind==="source"||C){var L=mr(h,E,"source");this.binders[h]=C?new vt(w,E,T,t,L,e.id):new ft(w,y,E,L),l.push("/a_"+h)}else{var R=mr(h,E,"composite");this.binders[h]=new ht(w,y,E,T,t,R),l.push("/z_"+h)}}}this.cacheKey=l.sort().join("")};ct.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof ft||t instanceof ht?t.maxValue:0},ct.prototype.populatePaintArrays=function(e,t,n,l,h){for(var f in this.binders){var y=this.binders[f];(y instanceof ft||y instanceof ht||y instanceof vt)&&y.populatePaintArray(e,t,n,l,h)}},ct.prototype.setConstantPatternPositions=function(e,t){for(var n in this.binders){var l=this.binders[n];l instanceof _t&&l.setConstantPatternPositions(e,t)}},ct.prototype.updatePaintArrays=function(e,t,n,l,h){var f=!1;for(var y in e)for(var w=0,E=t.getPositions(y);w<E.length;w+=1){var T=E[w],P=n.feature(T.index);for(var C in this.binders){var L=this.binders[C];if((L instanceof ft||L instanceof ht||L instanceof vt)&&L.expression.isStateDependent===!0){var R=l.paint.get(C);L.expression=R.value,L.updatePaintArray(T.start,T.end,P,e[y],h),f=!0}}}return f},ct.prototype.defines=function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof dt||n instanceof _t)&&e.push.apply(e,n.uniformNames.map(function(l){return"#define HAS_UNIFORM_"+l}))}return e},ct.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof ft||n instanceof ht)for(var l=0;l<n.paintVertexAttributes.length;l++)e.push(n.paintVertexAttributes[l].name);else if(n instanceof vt)for(var h=0;h<W.members.length;h++)e.push(W.members[h].name)}return e},ct.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof dt||n instanceof _t||n instanceof ht)for(var l=0,h=n.uniformNames;l<h.length;l+=1)e.push(h[l])}return e},ct.prototype.getPaintVertexBuffers=function(){return this._buffers},ct.prototype.getUniforms=function(e,t){var n=[];for(var l in this.binders){var h=this.binders[l];if(h instanceof dt||h instanceof _t||h instanceof ht)for(var f=0,y=h.uniformNames;f<y.length;f+=1){var w=y[f];if(t[w]){var E=h.getBinding(e,t[w],w);n.push({name:w,property:l,binding:E})}}}return n},ct.prototype.setUniforms=function(e,t,n,l){for(var h=0,f=t;h<f.length;h+=1){var y=f[h],w=y.name,E=y.property;this.binders[E].setUniform(y.binding,l,n.get(E),w)}},ct.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof vt){var l=e.fromScale===2?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;l&&this._buffers.push(l)}else(n instanceof ft||n instanceof ht)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},ct.prototype.upload=function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof ft||n instanceof ht||n instanceof vt)&&n.upload(e)}this.updatePaintBuffers()},ct.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof ft||t instanceof ht||t instanceof vt)&&t.destroy()}};var st=function(e,t,n){n===void 0&&(n=function(){return!0}),this.programConfigurations={};for(var l=0,h=e;l<h.length;l+=1){var f=h[l];this.programConfigurations[f.id]=new ct(f,t,n)}this.needsUpload=!1,this._featureMap=new re,this._bufferOffset=0};function Fr(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function mr(e,t,n){var l={color:{source:za,composite:zl},number:{source:xo,composite:za}},h=function(f){return{"line-pattern":{source:Oi,composite:Oi},"fill-pattern":{source:Oi,composite:Oi},"fill-extrusion-pattern":{source:Oi,composite:Oi}}[f]}(e);return h&&h[n]||l[t][n]}st.prototype.populatePaintArrays=function(e,t,n,l,h,f){for(var y in this.programConfigurations)this.programConfigurations[y].populatePaintArrays(e,t,l,h,f);t.id!==void 0&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},st.prototype.updatePaintArrays=function(e,t,n,l){for(var h=0,f=n;h<f.length;h+=1){var y=f[h];this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(e,this._featureMap,t,y,l)||this.needsUpload}},st.prototype.get=function(e){return this.programConfigurations[e]},st.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},st.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},Xe("ConstantBinder",dt),Xe("CrossFadedConstantBinder",_t),Xe("SourceExpressionBinder",ft),Xe("CrossFadedCompositeBinder",vt),Xe("CompositeExpressionBinder",ht),Xe("ProgramConfiguration",ct,{omit:["_buffers"]}),Xe("ProgramConfigurationSet",st);var on=Math.pow(2,14)-1,Hr=-on-1;function hr(e){for(var t=8192/e.extent,n=e.loadGeometry(),l=0;l<n.length;l++)for(var h=n[l],f=0;f<h.length;f++){var y=h[f],w=Math.round(y.x*t),E=Math.round(y.y*t);y.x=se(w,Hr,on),y.y=se(E,Hr,on),(w<y.x||w>y.x+1||E<y.y||E>y.y+1)&&gt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function br(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?hr(e):[]}}function Vn(e,t,n,l,h){e.emplaceBack(2*t+(l+1)/2,2*n+(h+1)/2)}var yn=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ta,this.indexArray=new go,this.segments=new B,this.programConfigurations=new st(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function wo(e,t){for(var n=0;n<e.length;n++)if(Fi(t,e[n]))return!0;for(var l=0;l<t.length;l++)if(Fi(e,t[l]))return!0;return!!Rs(e,t)}function Pn(e,t,n){return!!Fi(e,t)||!!bo(t,e,n)}function ki(e,t){if(e.length===1)return Os(t,e[0]);for(var n=0;n<t.length;n++)for(var l=t[n],h=0;h<l.length;h++)if(Fi(e,l[h]))return!0;for(var f=0;f<e.length;f++)if(Os(t,e[f]))return!0;for(var y=0;y<t.length;y++)if(Rs(e,t[y]))return!0;return!1}function pi(e,t,n){if(e.length>1){if(Rs(e,t))return!0;for(var l=0;l<t.length;l++)if(bo(t[l],e,n))return!0}for(var h=0;h<e.length;h++)if(bo(e[h],t,n))return!0;return!1}function Rs(e,t){if(e.length===0||t.length===0)return!1;for(var n=0;n<e.length-1;n++)for(var l=e[n],h=e[n+1],f=0;f<t.length-1;f++)if(La(l,h,t[f],t[f+1]))return!0;return!1}function La(e,t,n,l){return rr(e,n,l)!==rr(t,n,l)&&rr(e,t,n)!==rr(e,t,l)}function bo(e,t,n){var l=n*n;if(t.length===1)return e.distSqr(t[0])<l;for(var h=1;h<t.length;h++)if(Ra(e,t[h-1],t[h])<l)return!0;return!1}function Ra(e,t,n){var l=t.distSqr(n);if(l===0)return e.distSqr(t);var h=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/l;return e.distSqr(h<0?t:h>1?n:n.sub(t)._mult(h)._add(t))}function Os(e,t){for(var n,l,h,f=!1,y=0;y<e.length;y++)for(var w=0,E=(n=e[y]).length-1;w<n.length;E=w++)(l=n[w]).y>t.y!=(h=n[E]).y>t.y&&t.x<(h.x-l.x)*(t.y-l.y)/(h.y-l.y)+l.x&&(f=!f);return f}function Fi(e,t){for(var n=!1,l=0,h=e.length-1;l<e.length;h=l++){var f=e[l],y=e[h];f.y>t.y!=y.y>t.y&&t.x<(y.x-f.x)*(t.y-f.y)/(y.y-f.y)+f.x&&(n=!n)}return n}function Fs(e,t,n){var l=n[0],h=n[2];if(e.x<l.x&&t.x<l.x||e.x>h.x&&t.x>h.x||e.y<l.y&&t.y<l.y||e.y>h.y&&t.y>h.y)return!1;var f=rr(e,t,n[0]);return f!==rr(e,t,n[1])||f!==rr(e,t,n[2])||f!==rr(e,t,n[3])}function Bi(e,t,n){var l=t.paint.get(e).value;return l.kind==="constant"?l.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Br(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Yi(e,t,n,l,h){if(!t[0]&&!t[1])return e;var f=le.convert(t)._mult(h);n==="viewport"&&f._rotate(-l);for(var y=[],w=0;w<e.length;w++)y.push(e[w].sub(f));return y}yn.prototype.populate=function(e,t,n){var l=this.layers[0],h=[],f=null;l.type==="circle"&&(f=l.layout.get("circle-sort-key"));for(var y=0,w=e;y<w.length;y+=1){var E=w[y],T=E.feature,P=E.id,C=E.index,L=E.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,q=br(T,R);if(this.layers[0]._featureFilter.filter(new Tt(this.zoom),q,n)){var Z=f?f.evaluate(q,{},n):void 0,J={id:P,properties:T.properties,type:T.type,sourceLayerIndex:L,index:C,geometry:R?q.geometry:hr(T),patterns:{},sortKey:Z};h.push(J)}}f&&h.sort(function(ze,Ye){return ze.sortKey-Ye.sortKey});for(var $=0,ae=h;$<ae.length;$+=1){var pe=ae[$],he=pe.geometry,de=pe.index,xe=pe.sourceLayerIndex,Pe=e[de].feature;this.addFeature(pe,he,de,n),t.featureIndex.insert(Pe,he,de,xe,this.index)}},yn.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},yn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},yn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},yn.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,F),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},yn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},yn.prototype.addFeature=function(e,t,n,l){for(var h=0,f=t;h<f.length;h+=1)for(var y=0,w=f[h];y<w.length;y+=1){var E=w[y],T=E.x,P=E.y;if(!(T<0||T>=8192||P<0||P>=8192)){var C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),L=C.vertexLength;Vn(this.layoutVertexArray,T,P,-1,-1),Vn(this.layoutVertexArray,T,P,1,-1),Vn(this.layoutVertexArray,T,P,1,1),Vn(this.layoutVertexArray,T,P,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+3,L+2),C.vertexLength+=4,C.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},l)},Xe("CircleBucket",yn,{omit:["layers"]});var So=new nn({"circle-sort-key":new Ke(U.layout_circle["circle-sort-key"])}),na={paint:new nn({"circle-radius":new Ke(U.paint_circle["circle-radius"]),"circle-color":new Ke(U.paint_circle["circle-color"]),"circle-blur":new Ke(U.paint_circle["circle-blur"]),"circle-opacity":new Ke(U.paint_circle["circle-opacity"]),"circle-translate":new Je(U.paint_circle["circle-translate"]),"circle-translate-anchor":new Je(U.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Je(U.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Je(U.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ke(U.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ke(U.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ke(U.paint_circle["circle-stroke-opacity"])}),layout:So},Vt=typeof Float32Array!="undefined"?Float32Array:Array;function $n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Cn(e,t,n){var l=t[0],h=t[1],f=t[2],y=t[3],w=t[4],E=t[5],T=t[6],P=t[7],C=t[8],L=t[9],R=t[10],q=t[11],Z=t[12],J=t[13],$=t[14],ae=t[15],pe=n[0],he=n[1],de=n[2],xe=n[3];return e[0]=pe*l+he*w+de*C+xe*Z,e[1]=pe*h+he*E+de*L+xe*J,e[2]=pe*f+he*T+de*R+xe*$,e[3]=pe*y+he*P+de*q+xe*ae,e[4]=(pe=n[4])*l+(he=n[5])*w+(de=n[6])*C+(xe=n[7])*Z,e[5]=pe*h+he*E+de*L+xe*J,e[6]=pe*f+he*T+de*R+xe*$,e[7]=pe*y+he*P+de*q+xe*ae,e[8]=(pe=n[8])*l+(he=n[9])*w+(de=n[10])*C+(xe=n[11])*Z,e[9]=pe*h+he*E+de*L+xe*J,e[10]=pe*f+he*T+de*R+xe*$,e[11]=pe*y+he*P+de*q+xe*ae,e[12]=(pe=n[12])*l+(he=n[13])*w+(de=n[14])*C+(xe=n[15])*Z,e[13]=pe*h+he*E+de*L+xe*J,e[14]=pe*f+he*T+de*R+xe*$,e[15]=pe*y+he*P+de*q+xe*ae,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,n=arguments.length;n--;)t+=e[n]*e[n];return Math.sqrt(t)});var ia,gd=Cn;function Ml(e,t,n){var l=t[0],h=t[1],f=t[2],y=t[3];return e[0]=n[0]*l+n[4]*h+n[8]*f+n[12]*y,e[1]=n[1]*l+n[5]*h+n[9]*f+n[13]*y,e[2]=n[2]*l+n[6]*h+n[10]*f+n[14]*y,e[3]=n[3]*l+n[7]*h+n[11]*f+n[15]*y,e}ia=new Vt(3),Vt!=Float32Array&&(ia[0]=0,ia[1]=0,ia[2]=0),function(){var e=new Vt(4);Vt!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var _d=(function(){var e=new Vt(2);Vt!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(n){e.call(this,n,na)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new yn(n)},t.prototype.queryRadius=function(n){var l=n;return Bi("circle-radius",this,l)+Bi("circle-stroke-width",this,l)+Br(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(n,l,h,f,y,w,E,T){for(var P=Yi(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,E),C=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),L=this.paint.get("circle-pitch-alignment")==="map",R=L?P:function(Pe,ze){return Pe.map(function(Ye){return Bs(Ye,ze)})}(P,T),q=L?C*E:C,Z=0,J=f;Z<J.length;Z+=1)for(var $=0,ae=J[Z];$<ae.length;$+=1){var pe=ae[$],he=L?pe:Bs(pe,T),de=q,xe=Ml([],[pe.x,pe.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?de*=xe[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(de*=w.cameraToCenterDistance/xe[3]),Pn(R,he,de))return!0}return!1},t}(Ri));function Bs(e,t){var n=Ml([],[e.x,e.y,0,1],t);return new le(n[0]/n[3],n[1]/n[3])}var lh=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(yn);function Oa(e,t,n,l){var h=t.width,f=t.height;if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==h*f*n)throw new RangeError("mismatched image size")}else l=new Uint8Array(h*f*n);return e.width=h,e.height=f,e.data=l,e}function Dl(e,t,n){var l=t.width,h=t.height;if(l!==e.width||h!==e.height){var f=Oa({},{width:l,height:h},n);xd(e,f,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,l),height:Math.min(e.height,h)},n),e.width=l,e.height=h,e.data=f.data}}function xd(e,t,n,l,h,f){if(h.width===0||h.height===0)return t;if(h.width>e.width||h.height>e.height||n.x>e.width-h.width||n.y>e.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>t.width||h.height>t.height||l.x>t.width-h.width||l.y>t.height-h.height)throw new RangeError("out of range destination coordinates for image copy");for(var y=e.data,w=t.data,E=0;E<h.height;E++)for(var T=((n.y+E)*e.width+n.x)*f,P=((l.y+E)*t.width+l.x)*f,C=0;C<h.width*f;C++)w[P+C]=y[T+C];return t}Xe("HeatmapBucket",lh,{omit:["layers"]});var Us=function(e,t){Oa(this,e,1,t)};Us.prototype.resize=function(e){Dl(this,e,1)},Us.prototype.clone=function(){return new Us({width:this.width,height:this.height},new Uint8Array(this.data))},Us.copy=function(e,t,n,l,h){xd(e,t,n,l,h,1)};var jn=function(e,t){Oa(this,e,4,t)};jn.prototype.resize=function(e){Dl(this,e,4)},jn.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},jn.prototype.clone=function(){return new jn({width:this.width,height:this.height},new Uint8Array(this.data))},jn.copy=function(e,t,n,l,h){xd(e,t,n,l,h,4)},Xe("AlphaImage",Us),Xe("RGBAImage",jn);var i1={paint:new nn({"heatmap-radius":new Ke(U.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ke(U.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Je(U.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ci(U.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Je(U.paint_heatmap["heatmap-opacity"])})};function uv(e){var t={},n=e.resolution||256,l=e.clips?e.clips.length:1,h=e.image||new jn({width:n,height:l}),f=function(q,Z,J){t[e.evaluationKey]=J;var $=e.expression.evaluate(t);h.data[q+Z+0]=Math.floor(255*$.r/$.a),h.data[q+Z+1]=Math.floor(255*$.g/$.a),h.data[q+Z+2]=Math.floor(255*$.b/$.a),h.data[q+Z+3]=Math.floor(255*$.a)};if(e.clips)for(var y=0,w=0;y<l;++y,w+=4*n)for(var E=0,T=0;E<n;E++,T+=4){var P=E/(n-1),C=e.clips[y];f(w,T,C.start*(1-P)+C.end*P)}else for(var L=0,R=0;L<n;L++,R+=4)f(0,R,L/(n-1));return h}var o1=function(e){function t(n){e.call(this,n,i1),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new lh(n)},t.prototype._handleSpecialPaintPropertyUpdate=function(n){n==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=uv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(Ri),a1={paint:new nn({"hillshade-illumination-direction":new Je(U.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Je(U.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Je(U.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Je(U.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Je(U.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Je(U.paint_hillshade["hillshade-accent-color"])})},s1=function(e){function t(n){e.call(this,n,a1)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(Ri),l1=Xr([{name:"a_pos",components:2,type:"Int16"}],4).members,wd=uh,u1=uh;function uh(e,t,n){n=n||2;var l,h,f,y,w,E,T,P=t&&t.length,C=P?t[0]*n:e.length,L=cv(e,0,C,n,!0),R=[];if(!L||L.next===L.prev)return R;if(P&&(L=function(Z,J,$,ae){var pe,he,de,xe=[];for(pe=0,he=J.length;pe<he;pe++)(de=cv(Z,J[pe]*ae,pe<he-1?J[pe+1]*ae:Z.length,ae,!1))===de.next&&(de.steiner=!0),xe.push(v1(de));for(xe.sort(d1),pe=0;pe<xe.length;pe++)m1(xe[pe],$),$=Fa($,$.next);return $}(e,t,L,n)),e.length>80*n){l=f=e[0],h=y=e[1];for(var q=n;q<C;q+=n)(w=e[q])<l&&(l=w),(E=e[q+1])<h&&(h=E),w>f&&(f=w),E>y&&(y=E);T=(T=Math.max(f-l,y-h))!==0?1/T:0}return lc(L,R,n,l,h,T),R}function cv(e,t,n,l,h){var f,y;if(h===Ed(e,t,n,l)>0)for(f=t;f<n;f+=l)y=fv(f,e[f],e[f+1],y);else for(f=n-l;f>=t;f-=l)y=fv(f,e[f],e[f+1],y);return y&&ch(y,y.next)&&(cc(y),y=y.next),y}function Fa(e,t){if(!e)return e;t||(t=e);var n,l=e;do if(n=!1,l.steiner||!ch(l,l.next)&&Lr(l.prev,l,l.next)!==0)l=l.next;else{if(cc(l),(l=t=l.prev)===l.next)break;n=!0}while(n||l!==t);return t}function lc(e,t,n,l,h,f,y){if(e){!y&&f&&function(P,C,L,R){var q=P;do q.z===null&&(q.z=bd(q.x,q.y,C,L,R)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==P);q.prevZ.nextZ=null,q.prevZ=null,function(Z){var J,$,ae,pe,he,de,xe,Pe,ze=1;do{for($=Z,Z=null,he=null,de=0;$;){for(de++,ae=$,xe=0,J=0;J<ze&&(xe++,ae=ae.nextZ);J++);for(Pe=ze;xe>0||Pe>0&&ae;)xe!==0&&(Pe===0||!ae||$.z<=ae.z)?(pe=$,$=$.nextZ,xe--):(pe=ae,ae=ae.nextZ,Pe--),he?he.nextZ=pe:Z=pe,pe.prevZ=he,he=pe;$=ae}he.nextZ=null,ze*=2}while(de>1)}(q)}(e,l,h,f);for(var w,E,T=e;e.prev!==e.next;)if(w=e.prev,E=e.next,f?p1(e,l,h,f):c1(e))t.push(w.i/n),t.push(e.i/n),t.push(E.i/n),cc(e),e=E.next,T=E.next;else if((e=E)===T){y?y===1?lc(e=h1(Fa(e),t,n),t,n,l,h,f,2):y===2&&f1(e,t,n,l,h,f):lc(Fa(e),t,n,l,h,f,1);break}}}function c1(e){var t=e.prev,n=e,l=e.next;if(Lr(t,n,l)>=0)return!1;for(var h=e.next.next;h!==e.prev;){if(Ll(t.x,t.y,n.x,n.y,l.x,l.y,h.x,h.y)&&Lr(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function p1(e,t,n,l){var h=e.prev,f=e,y=e.next;if(Lr(h,f,y)>=0)return!1;for(var w=h.x>f.x?h.x>y.x?h.x:y.x:f.x>y.x?f.x:y.x,E=h.y>f.y?h.y>y.y?h.y:y.y:f.y>y.y?f.y:y.y,T=bd(h.x<f.x?h.x<y.x?h.x:y.x:f.x<y.x?f.x:y.x,h.y<f.y?h.y<y.y?h.y:y.y:f.y<y.y?f.y:y.y,t,n,l),P=bd(w,E,t,n,l),C=e.prevZ,L=e.nextZ;C&&C.z>=T&&L&&L.z<=P;){if(C!==e.prev&&C!==e.next&&Ll(h.x,h.y,f.x,f.y,y.x,y.y,C.x,C.y)&&Lr(C.prev,C,C.next)>=0||(C=C.prevZ,L!==e.prev&&L!==e.next&&Ll(h.x,h.y,f.x,f.y,y.x,y.y,L.x,L.y)&&Lr(L.prev,L,L.next)>=0))return!1;L=L.nextZ}for(;C&&C.z>=T;){if(C!==e.prev&&C!==e.next&&Ll(h.x,h.y,f.x,f.y,y.x,y.y,C.x,C.y)&&Lr(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;L&&L.z<=P;){if(L!==e.prev&&L!==e.next&&Ll(h.x,h.y,f.x,f.y,y.x,y.y,L.x,L.y)&&Lr(L.prev,L,L.next)>=0)return!1;L=L.nextZ}return!0}function h1(e,t,n){var l=e;do{var h=l.prev,f=l.next.next;!ch(h,f)&&pv(h,l,l.next,f)&&uc(h,f)&&uc(f,h)&&(t.push(h.i/n),t.push(l.i/n),t.push(f.i/n),cc(l),cc(l.next),l=e=f),l=l.next}while(l!==e);return Fa(l)}function f1(e,t,n,l,h,f){var y=e;do{for(var w=y.next.next;w!==y.prev;){if(y.i!==w.i&&g1(y,w)){var E=hv(y,w);return y=Fa(y,y.next),E=Fa(E,E.next),lc(y,t,n,l,h,f),void lc(E,t,n,l,h,f)}w=w.next}y=y.next}while(y!==e)}function d1(e,t){return e.x-t.x}function m1(e,t){if(t=function(l,h){var f,y=h,w=l.x,E=l.y,T=-1/0;do{if(E<=y.y&&E>=y.next.y&&y.next.y!==y.y){var P=y.x+(E-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(P<=w&&P>T){if(T=P,P===w){if(E===y.y)return y;if(E===y.next.y)return y.next}f=y.x<y.next.x?y:y.next}}y=y.next}while(y!==h);if(!f)return null;if(w===T)return f;var C,L=f,R=f.x,q=f.y,Z=1/0;y=f;do w>=y.x&&y.x>=R&&w!==y.x&&Ll(E<q?w:T,E,R,q,E<q?T:w,E,y.x,y.y)&&(C=Math.abs(E-y.y)/(w-y.x),uc(y,l)&&(C<Z||C===Z&&(y.x>f.x||y.x===f.x&&y1(f,y)))&&(f=y,Z=C)),y=y.next;while(y!==L);return f}(e,t)){var n=hv(t,e);Fa(t,t.next),Fa(n,n.next)}}function y1(e,t){return Lr(e.prev,e,t.prev)<0&&Lr(t.next,e,e.next)<0}function bd(e,t,n,l,h){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*h)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*h)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function v1(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function Ll(e,t,n,l,h,f,y,w){return(h-y)*(t-w)-(e-y)*(f-w)>=0&&(e-y)*(l-w)-(n-y)*(t-w)>=0&&(n-y)*(f-w)-(h-y)*(l-w)>=0}function g1(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(n,l){var h=n;do{if(h.i!==n.i&&h.next.i!==n.i&&h.i!==l.i&&h.next.i!==l.i&&pv(h,h.next,n,l))return!0;h=h.next}while(h!==n);return!1}(e,t)&&(uc(e,t)&&uc(t,e)&&function(n,l){var h=n,f=!1,y=(n.x+l.x)/2,w=(n.y+l.y)/2;do h.y>w!=h.next.y>w&&h.next.y!==h.y&&y<(h.next.x-h.x)*(w-h.y)/(h.next.y-h.y)+h.x&&(f=!f),h=h.next;while(h!==n);return f}(e,t)&&(Lr(e.prev,e,t.prev)||Lr(e,t.prev,t))||ch(e,t)&&Lr(e.prev,e,e.next)>0&&Lr(t.prev,t,t.next)>0)}function Lr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ch(e,t){return e.x===t.x&&e.y===t.y}function pv(e,t,n,l){var h=hh(Lr(e,t,n)),f=hh(Lr(e,t,l)),y=hh(Lr(n,l,e)),w=hh(Lr(n,l,t));return h!==f&&y!==w||!(h!==0||!ph(e,n,t))||!(f!==0||!ph(e,l,t))||!(y!==0||!ph(n,e,l))||!(w!==0||!ph(n,t,l))}function ph(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function hh(e){return e>0?1:e<0?-1:0}function uc(e,t){return Lr(e.prev,e,e.next)<0?Lr(e,t,e.next)>=0&&Lr(e,e.prev,t)>=0:Lr(e,t,e.prev)<0||Lr(e,e.next,t)<0}function hv(e,t){var n=new Sd(e.i,e.x,e.y),l=new Sd(t.i,t.x,t.y),h=e.next,f=t.prev;return e.next=t,t.prev=e,n.next=h,h.prev=n,l.next=n,n.prev=l,f.next=l,l.prev=f,l}function fv(e,t,n,l){var h=new Sd(e,t,n);return l?(h.next=l.next,h.prev=l,l.next.prev=h,l.next=h):(h.prev=h,h.next=h),h}function cc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Sd(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ed(e,t,n,l){for(var h=0,f=t,y=n-l;f<n;f+=l)h+=(e[y]-e[f])*(e[f+1]+e[y+1]),y=f;return h}function _1(e,t,n,l,h){(function f(y,w,E,T,P){for(;T>E;){if(T-E>600){var C=T-E+1,L=w-E+1,R=Math.log(C),q=.5*Math.exp(2*R/3),Z=.5*Math.sqrt(R*q*(C-q)/C)*(L-C/2<0?-1:1);f(y,w,Math.max(E,Math.floor(w-L*q/C+Z)),Math.min(T,Math.floor(w+(C-L)*q/C+Z)),P)}var J=y[w],$=E,ae=T;for(pc(y,E,w),P(y[T],J)>0&&pc(y,E,T);$<ae;){for(pc(y,$,ae),$++,ae--;P(y[$],J)<0;)$++;for(;P(y[ae],J)>0;)ae--}P(y[E],J)===0?pc(y,E,ae):pc(y,++ae,T),ae<=w&&(E=ae+1),w<=ae&&(T=ae-1)}})(e,t,n||0,l||e.length-1,h||x1)}function pc(e,t,n){var l=e[t];e[t]=e[n],e[n]=l}function x1(e,t){return e<t?-1:e>t?1:0}function Td(e,t){var n=e.length;if(n<=1)return[e];for(var l,h,f=[],y=0;y<n;y++){var w=qr(e[y]);w!==0&&(e[y].area=Math.abs(w),h===void 0&&(h=w<0),h===w<0?(l&&f.push(l),l=[e[y]]):l.push(e[y]))}if(l&&f.push(l),t>1)for(var E=0;E<f.length;E++)f[E].length<=t||(_1(f[E],t,1,f[E].length-1,w1),f[E]=f[E].slice(0,t));return f}function w1(e,t){return t.area-e.area}function Id(e,t,n){for(var l=n.patternDependencies,h=!1,f=0,y=t;f<y.length;f+=1){var w=y[f].paint.get(e+"-pattern");w.isConstant()||(h=!0);var E=w.constantOr(null);E&&(h=!0,l[E.to]=!0,l[E.from]=!0)}return h}function Pd(e,t,n,l,h){for(var f=h.patternDependencies,y=0,w=t;y<w.length;y+=1){var E=w[y],T=E.paint.get(e+"-pattern").value;if(T.kind!=="constant"){var P=T.evaluate({zoom:l-1},n,{},h.availableImages),C=T.evaluate({zoom:l},n,{},h.availableImages),L=T.evaluate({zoom:l+1},n,{},h.availableImages);C=C&&C.name?C.name:C,L=L&&L.name?L.name:L,f[P=P&&P.name?P.name:P]=!0,f[C]=!0,f[L]=!0,n.patterns[E.id]={min:P,mid:C,max:L}}}return n}uh.deviation=function(e,t,n,l){var h=t&&t.length,f=Math.abs(Ed(e,0,h?t[0]*n:e.length,n));if(h)for(var y=0,w=t.length;y<w;y++)f-=Math.abs(Ed(e,t[y]*n,y<w-1?t[y+1]*n:e.length,n));var E=0;for(y=0;y<l.length;y+=3){var T=l[y]*n,P=l[y+1]*n,C=l[y+2]*n;E+=Math.abs((e[T]-e[C])*(e[P+1]-e[T+1])-(e[T]-e[P])*(e[C+1]-e[T+1]))}return f===0&&E===0?0:Math.abs((E-f)/f)},uh.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},l=0,h=0;h<e.length;h++){for(var f=0;f<e[h].length;f++)for(var y=0;y<t;y++)n.vertices.push(e[h][f][y]);h>0&&n.holes.push(l+=e[h-1].length)}return n},wd.default=u1;var Ji=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ta,this.indexArray=new go,this.indexArray2=new Ls,this.programConfigurations=new st(e.layers,e.zoom),this.segments=new B,this.segments2=new B,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Ji.prototype.populate=function(e,t,n){this.hasPattern=Id("fill",this.layers,t);for(var l=this.layers[0].layout.get("fill-sort-key"),h=[],f=0,y=e;f<y.length;f+=1){var w=y[f],E=w.feature,T=w.id,P=w.index,C=w.sourceLayerIndex,L=this.layers[0]._featureFilter.needGeometry,R=br(E,L);if(this.layers[0]._featureFilter.filter(new Tt(this.zoom),R,n)){var q=l?l.evaluate(R,{},n,t.availableImages):void 0,Z={id:T,properties:E.properties,type:E.type,sourceLayerIndex:C,index:P,geometry:L?R.geometry:hr(E),patterns:{},sortKey:q};h.push(Z)}}l&&h.sort(function(Pe,ze){return Pe.sortKey-ze.sortKey});for(var J=0,$=h;J<$.length;J+=1){var ae=$[J],pe=ae.geometry,he=ae.index,de=ae.sourceLayerIndex;if(this.hasPattern){var xe=Pd("fill",this.layers,ae,this.zoom,t);this.patternFeatures.push(xe)}else this.addFeature(ae,pe,he,n,{});t.featureIndex.insert(e[he].feature,pe,he,de,this.index)}},Ji.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Ji.prototype.addFeatures=function(e,t,n){for(var l=0,h=this.patternFeatures;l<h.length;l+=1){var f=h[l];this.addFeature(f,f.geometry,f.index,t,n)}},Ji.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ji.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ji.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,l1),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Ji.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ji.prototype.addFeature=function(e,t,n,l,h){for(var f=0,y=Td(t,500);f<y.length;f+=1){for(var w=y[f],E=0,T=0,P=w;T<P.length;T+=1)E+=P[T].length;for(var C=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),L=C.vertexLength,R=[],q=[],Z=0,J=w;Z<J.length;Z+=1){var $=J[Z];if($.length!==0){$!==w[0]&&q.push(R.length/2);var ae=this.segments2.prepareSegment($.length,this.layoutVertexArray,this.indexArray2),pe=ae.vertexLength;this.layoutVertexArray.emplaceBack($[0].x,$[0].y),this.indexArray2.emplaceBack(pe+$.length-1,pe),R.push($[0].x),R.push($[0].y);for(var he=1;he<$.length;he++)this.layoutVertexArray.emplaceBack($[he].x,$[he].y),this.indexArray2.emplaceBack(pe+he-1,pe+he),R.push($[he].x),R.push($[he].y);ae.vertexLength+=$.length,ae.primitiveLength+=$.length}}for(var de=wd(R,q),xe=0;xe<de.length;xe+=3)this.indexArray.emplaceBack(L+de[xe],L+de[xe+1],L+de[xe+2]);C.vertexLength+=E,C.primitiveLength+=de.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,l)},Xe("FillBucket",Ji,{omit:["layers","patternFeatures"]});var b1=new nn({"fill-sort-key":new Ke(U.layout_fill["fill-sort-key"])}),S1={paint:new nn({"fill-antialias":new Je(U.paint_fill["fill-antialias"]),"fill-opacity":new Ke(U.paint_fill["fill-opacity"]),"fill-color":new Ke(U.paint_fill["fill-color"]),"fill-outline-color":new Ke(U.paint_fill["fill-outline-color"]),"fill-translate":new Je(U.paint_fill["fill-translate"]),"fill-translate-anchor":new Je(U.paint_fill["fill-translate-anchor"]),"fill-pattern":new Pl(U.paint_fill["fill-pattern"])}),layout:b1},E1=function(e){function t(n){e.call(this,n,S1)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(n,l){e.prototype.recalculate.call(this,n,l);var h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(n){return new Ji(n)},t.prototype.queryRadius=function(){return Br(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(n,l,h,f,y,w,E){return ki(Yi(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,E),f)},t.prototype.isTileClipped=function(){return!0},t}(Ri),T1=Xr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,dv=Rl;function Rl(e,t,n,l,h){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=h,e.readFields(I1,this,t)}function I1(e,t,n){e==1?t.id=n.readVarint():e==2?function(l,h){for(var f=l.readVarint()+l.pos;l.pos<f;){var y=h._keys[l.readVarint()],w=h._values[l.readVarint()];h.properties[y]=w}}(n,t):e==3?t.type=n.readVarint():e==4&&(t._geometry=n.pos)}function P1(e){for(var t,n,l=0,h=0,f=e.length,y=f-1;h<f;y=h++)l+=((n=e[y]).x-(t=e[h]).x)*(t.y+n.y);return l}Rl.types=["Unknown","Point","LineString","Polygon"],Rl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,l=1,h=0,f=0,y=0,w=[];e.pos<n;){if(h<=0){var E=e.readVarint();l=7&E,h=E>>3}if(h--,l===1||l===2)f+=e.readSVarint(),y+=e.readSVarint(),l===1&&(t&&w.push(t),t=[]),t.push(new le(f,y));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&w.push(t),w},Rl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,l=0,h=0,f=0,y=1/0,w=-1/0,E=1/0,T=-1/0;e.pos<t;){if(l<=0){var P=e.readVarint();n=7&P,l=P>>3}if(l--,n===1||n===2)(h+=e.readSVarint())<y&&(y=h),h>w&&(w=h),(f+=e.readSVarint())<E&&(E=f),f>T&&(T=f);else if(n!==7)throw new Error("unknown command "+n)}return[y,E,w,T]},Rl.prototype.toGeoJSON=function(e,t,n){var l,h,f=this.extent*Math.pow(2,n),y=this.extent*e,w=this.extent*t,E=this.loadGeometry(),T=Rl.types[this.type];function P(R){for(var q=0;q<R.length;q++){var Z=R[q];R[q]=[360*(Z.x+y)/f-180,360/Math.PI*Math.atan(Math.exp((180-360*(Z.y+w)/f)*Math.PI/180))-90]}}switch(this.type){case 1:var C=[];for(l=0;l<E.length;l++)C[l]=E[l][0];P(E=C);break;case 2:for(l=0;l<E.length;l++)P(E[l]);break;case 3:for(E=function(R){var q=R.length;if(q<=1)return[R];for(var Z,J,$=[],ae=0;ae<q;ae++){var pe=P1(R[ae]);pe!==0&&(J===void 0&&(J=pe<0),J===pe<0?(Z&&$.push(Z),Z=[R[ae]]):Z.push(R[ae]))}return Z&&$.push(Z),$}(E),l=0;l<E.length;l++)for(h=0;h<E[l].length;h++)P(E[l][h])}E.length===1?E=E[0]:T="Multi"+T;var L={type:"Feature",geometry:{type:T,coordinates:E},properties:this.properties};return"id"in this&&(L.id=this.id),L};var mv=yv;function yv(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(C1,this,t),this.length=this._features.length}function C1(e,t,n){e===15?t.version=n.readVarint():e===1?t.name=n.readString():e===5?t.extent=n.readVarint():e===2?t._features.push(n.pos):e===3?t._keys.push(n.readString()):e===4&&t._values.push(function(l){for(var h=null,f=l.readVarint()+l.pos;l.pos<f;){var y=l.readVarint()>>3;h=y===1?l.readString():y===2?l.readFloat():y===3?l.readDouble():y===4?l.readVarint64():y===5?l.readVarint():y===6?l.readSVarint():y===7?l.readBoolean():null}return h}(n))}function k1(e,t,n){if(e===3){var l=new mv(n,n.readVarint()+n.pos);l.length&&(t[l.name]=l)}}yv.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new dv(this._pbf,t,this.extent,this._keys,this._values)};var Ol={VectorTile:function(e,t){this.layers=e.readFields(k1,{},t)},VectorTileFeature:dv,VectorTileLayer:mv},A1=Ol.VectorTileFeature.types,Cd=Math.pow(2,13);function hc(e,t,n,l,h,f,y,w){e.emplaceBack(t,n,2*Math.floor(l*Cd)+y,h*Cd*2,f*Cd*2,Math.round(w))}var eo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Qi,this.indexArray=new go,this.programConfigurations=new st(e.layers,e.zoom),this.segments=new B,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function z1(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}eo.prototype.populate=function(e,t,n){this.features=[],this.hasPattern=Id("fill-extrusion",this.layers,t);for(var l=0,h=e;l<h.length;l+=1){var f=h[l],y=f.feature,w=f.id,E=f.index,T=f.sourceLayerIndex,P=this.layers[0]._featureFilter.needGeometry,C=br(y,P);if(this.layers[0]._featureFilter.filter(new Tt(this.zoom),C,n)){var L={id:w,sourceLayerIndex:T,index:E,geometry:P?C.geometry:hr(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(Pd("fill-extrusion",this.layers,L,this.zoom,t)):this.addFeature(L,L.geometry,E,n,{}),t.featureIndex.insert(y,L.geometry,E,T,this.index,!0)}}},eo.prototype.addFeatures=function(e,t,n){for(var l=0,h=this.features;l<h.length;l+=1){var f=h[l];this.addFeature(f,f.geometry,f.index,t,n)}},eo.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},eo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},eo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},eo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,T1),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},eo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},eo.prototype.addFeature=function(e,t,n,l,h){for(var f=0,y=Td(t,500);f<y.length;f+=1){for(var w=y[f],E=0,T=0,P=w;T<P.length;T+=1)E+=P[T].length;for(var C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),L=0,R=w;L<R.length;L+=1){var q=R[L];if(q.length!==0&&!((St=q).every(function(yt){return yt.x<0})||St.every(function(yt){return yt.x>8192})||St.every(function(yt){return yt.y<0})||St.every(function(yt){return yt.y>8192})))for(var Z=0,J=0;J<q.length;J++){var $=q[J];if(J>=1){var ae=q[J-1];if(!z1($,ae)){C.vertexLength+4>B.MAX_VERTEX_ARRAY_LENGTH&&(C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var pe=$.sub(ae)._perp()._unit(),he=ae.dist($);Z+he>32768&&(Z=0),hc(this.layoutVertexArray,$.x,$.y,pe.x,pe.y,0,0,Z),hc(this.layoutVertexArray,$.x,$.y,pe.x,pe.y,0,1,Z),hc(this.layoutVertexArray,ae.x,ae.y,pe.x,pe.y,0,0,Z+=he),hc(this.layoutVertexArray,ae.x,ae.y,pe.x,pe.y,0,1,Z);var de=C.vertexLength;this.indexArray.emplaceBack(de,de+2,de+1),this.indexArray.emplaceBack(de+1,de+2,de+3),C.vertexLength+=4,C.primitiveLength+=2}}}}if(C.vertexLength+E>B.MAX_VERTEX_ARRAY_LENGTH&&(C=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),A1[e.type]==="Polygon"){for(var xe=[],Pe=[],ze=C.vertexLength,Ye=0,Be=w;Ye<Be.length;Ye+=1){var tt=Be[Ye];if(tt.length!==0){tt!==w[0]&&Pe.push(xe.length/2);for(var Ne=0;Ne<tt.length;Ne++){var xt=tt[Ne];hc(this.layoutVertexArray,xt.x,xt.y,0,0,1,1,0),xe.push(xt.x),xe.push(xt.y)}}}for(var lt=wd(xe,Pe),$e=0;$e<lt.length;$e+=3)this.indexArray.emplaceBack(ze+lt[$e],ze+lt[$e+2],ze+lt[$e+1]);C.primitiveLength+=lt.length/3,C.vertexLength+=E}}var St;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,l)},Xe("FillExtrusionBucket",eo,{omit:["layers","features"]});var M1={paint:new nn({"fill-extrusion-opacity":new Je(U["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ke(U["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Je(U["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Je(U["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Pl(U["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ke(U["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ke(U["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Je(U["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},D1=function(e){function t(n){e.call(this,n,M1)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new eo(n)},t.prototype.queryRadius=function(){return Br(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(n,l,h,f,y,w,E,T){var P=Yi(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,E),C=this.paint.get("fill-extrusion-height").evaluate(l,h),L=this.paint.get("fill-extrusion-base").evaluate(l,h),R=function(Z,J,$,ae){for(var pe=[],he=0,de=Z;he<de.length;he+=1){var xe=de[he],Pe=[xe.x,xe.y,0,1];Ml(Pe,Pe,J),pe.push(new le(Pe[0]/Pe[3],Pe[1]/Pe[3]))}return pe}(P,T),q=function(Z,J,$,ae){for(var pe=[],he=[],de=ae[8]*J,xe=ae[9]*J,Pe=ae[10]*J,ze=ae[11]*J,Ye=ae[8]*$,Be=ae[9]*$,tt=ae[10]*$,Ne=ae[11]*$,xt=0,lt=Z;xt<lt.length;xt+=1){for(var $e=[],St=[],yt=0,Dt=lt[xt];yt<Dt.length;yt+=1){var rt=Dt[yt],Ft=rt.x,lr=rt.y,yr=ae[0]*Ft+ae[4]*lr+ae[12],fr=ae[1]*Ft+ae[5]*lr+ae[13],ur=ae[2]*Ft+ae[6]*lr+ae[14],vr=ae[3]*Ft+ae[7]*lr+ae[15],Ur=ur+Pe,Nr=vr+ze,gn=yr+Ye,$r=fr+Be,_n=ur+tt,Sr=vr+Ne,Qr=new le((yr+de)/Nr,(fr+xe)/Nr);Qr.z=Ur/Nr,$e.push(Qr);var Pt=new le(gn/Sr,$r/Sr);Pt.z=_n/Sr,St.push(Pt)}pe.push($e),he.push(St)}return[pe,he]}(f,L,C,T);return function(Z,J,$){var ae=1/0;ki($,J)&&(ae=vv($,J[0]));for(var pe=0;pe<J.length;pe++)for(var he=J[pe],de=Z[pe],xe=0;xe<he.length-1;xe++){var Pe=he[xe],ze=[Pe,he[xe+1],de[xe+1],de[xe],Pe];wo($,ze)&&(ae=Math.min(ae,vv($,ze)))}return ae!==1/0&&ae}(q[0],q[1],R)},t}(Ri);function fc(e,t){return e.x*t.x+e.y*t.y}function vv(e,t){if(e.length===1){for(var n,l=0,h=t[l++];!n||h.equals(n);)if(!(n=t[l++]))return 1/0;for(;l<t.length;l++){var f=t[l],y=e[0],w=n.sub(h),E=f.sub(h),T=y.sub(h),P=fc(w,w),C=fc(w,E),L=fc(E,E),R=fc(T,w),q=fc(T,E),Z=P*L-C*C,J=(L*R-C*q)/Z,$=(P*q-C*R)/Z,ae=h.z*(1-J-$)+n.z*J+f.z*$;if(isFinite(ae))return ae}return 1/0}for(var pe=1/0,he=0,de=t;he<de.length;he+=1)pe=Math.min(pe,de[he].z);return pe}var L1=Xr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,R1=Xr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,O1=Ol.VectorTileFeature.types,F1=Math.cos(Math.PI/180*37.5),gv=Math.pow(2,14)/.5,kn=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(n){return n.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(n){t.gradients[n.id]={}}),this.layoutVertexArray=new Nn,this.layoutVertexArray2=new za,this.indexArray=new go,this.programConfigurations=new st(e.layers,e.zoom),this.segments=new B,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(n){return n.isStateDependent()}).map(function(n){return n.id})};kn.prototype.populate=function(e,t,n){this.hasPattern=Id("line",this.layers,t);for(var l=this.layers[0].layout.get("line-sort-key"),h=[],f=0,y=e;f<y.length;f+=1){var w=y[f],E=w.feature,T=w.id,P=w.index,C=w.sourceLayerIndex,L=this.layers[0]._featureFilter.needGeometry,R=br(E,L);if(this.layers[0]._featureFilter.filter(new Tt(this.zoom),R,n)){var q=l?l.evaluate(R,{},n):void 0,Z={id:T,properties:E.properties,type:E.type,sourceLayerIndex:C,index:P,geometry:L?R.geometry:hr(E),patterns:{},sortKey:q};h.push(Z)}}l&&h.sort(function(Pe,ze){return Pe.sortKey-ze.sortKey});for(var J=0,$=h;J<$.length;J+=1){var ae=$[J],pe=ae.geometry,he=ae.index,de=ae.sourceLayerIndex;if(this.hasPattern){var xe=Pd("line",this.layers,ae,this.zoom,t);this.patternFeatures.push(xe)}else this.addFeature(ae,pe,he,n,{});t.featureIndex.insert(e[he].feature,pe,he,de,this.index)}},kn.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},kn.prototype.addFeatures=function(e,t,n){for(var l=0,h=this.patternFeatures;l<h.length;l+=1){var f=h[l];this.addFeature(f,f.geometry,f.index,t,n)}},kn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},kn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},kn.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,R1)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,L1),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},kn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},kn.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},kn.prototype.addFeature=function(e,t,n,l,h){var f=this.layers[0].layout,y=f.get("line-join").evaluate(e,{}),w=f.get("line-cap"),E=f.get("line-miter-limit"),T=f.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var P=0,C=t;P<C.length;P+=1)this.addLine(C[P],e,y,w,E,T);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,l)},kn.prototype.addLine=function(e,t,n,l,h,f){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var y=0;y<e.length-1;y++)this.totalDistance+=e[y].dist(e[y+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var w=O1[t.type]==="Polygon",E=e.length;E>=2&&e[E-1].equals(e[E-2]);)E--;for(var T=0;T<E-1&&e[T].equals(e[T+1]);)T++;if(!(E<(w?3:2))){n==="bevel"&&(h=1.05);var P,C=this.overscaling<=16?122880/(512*this.overscaling):0,L=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray),R=void 0,q=void 0,Z=void 0,J=void 0;this.e1=this.e2=-1,w&&(J=e[T].sub(P=e[E-2])._unit()._perp());for(var $=T;$<E;$++)if(!(q=$===E-1?w?e[T+1]:void 0:e[$+1])||!e[$].equals(q)){J&&(Z=J),P&&(R=P),P=e[$],J=q?q.sub(P)._unit()._perp():Z;var ae=(Z=Z||J).add(J);ae.x===0&&ae.y===0||ae._unit();var pe=Z.x*J.x+Z.y*J.y,he=ae.x*J.x+ae.y*J.y,de=he!==0?1/he:1/0,xe=2*Math.sqrt(2-2*he),Pe=he<F1&&R&&q,ze=Z.x*J.y-Z.y*J.x>0;if(Pe&&$>T){var Ye=P.dist(R);if(Ye>2*C){var Be=P.sub(P.sub(R)._mult(C/Ye)._round());this.updateDistance(R,Be),this.addCurrentVertex(Be,Z,0,0,L),R=Be}}var tt=R&&q,Ne=tt?n:w?"butt":l;if(tt&&Ne==="round"&&(de<f?Ne="miter":de<=2&&(Ne="fakeround")),Ne==="miter"&&de>h&&(Ne="bevel"),Ne==="bevel"&&(de>2&&(Ne="flipbevel"),de<h&&(Ne="miter")),R&&this.updateDistance(R,P),Ne==="miter")ae._mult(de),this.addCurrentVertex(P,ae,0,0,L);else if(Ne==="flipbevel"){if(de>100)ae=J.mult(-1);else{var xt=de*Z.add(J).mag()/Z.sub(J).mag();ae._perp()._mult(xt*(ze?-1:1))}this.addCurrentVertex(P,ae,0,0,L),this.addCurrentVertex(P,ae.mult(-1),0,0,L)}else if(Ne==="bevel"||Ne==="fakeround"){var lt=-Math.sqrt(de*de-1),$e=ze?lt:0,St=ze?0:lt;if(R&&this.addCurrentVertex(P,Z,$e,St,L),Ne==="fakeround")for(var yt=Math.round(180*xe/Math.PI/20),Dt=1;Dt<yt;Dt++){var rt=Dt/yt;if(rt!==.5){var Ft=rt-.5;rt+=rt*Ft*(rt-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*Ft*Ft+(.848013+pe*(.215638*pe-1.06021)))}var lr=J.sub(Z)._mult(rt)._add(Z)._unit()._mult(ze?-1:1);this.addHalfVertex(P,lr.x,lr.y,!1,ze,0,L)}q&&this.addCurrentVertex(P,J,-$e,-St,L)}else if(Ne==="butt")this.addCurrentVertex(P,ae,0,0,L);else if(Ne==="square"){var yr=R?1:-1;this.addCurrentVertex(P,ae,yr,yr,L)}else Ne==="round"&&(R&&(this.addCurrentVertex(P,Z,0,0,L),this.addCurrentVertex(P,Z,1,1,L,!0)),q&&(this.addCurrentVertex(P,J,-1,-1,L,!0),this.addCurrentVertex(P,J,0,0,L)));if(Pe&&$<E-1){var fr=P.dist(q);if(fr>2*C){var ur=P.add(q.sub(P)._mult(C/fr)._round());this.updateDistance(P,ur),this.addCurrentVertex(ur,J,0,0,L),P=ur}}}}},kn.prototype.addCurrentVertex=function(e,t,n,l,h,f){f===void 0&&(f=!1);var y=t.y*l-t.x,w=-t.y-t.x*l;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,f,!1,n,h),this.addHalfVertex(e,y,w,f,!0,-l,h),this.distance>gv/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,n,l,h,f))},kn.prototype.addHalfVertex=function(e,t,n,l,h,f,y){var w=.5*(this.lineClips?this.scaledDistance*(gv-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(l?1:0),(e.y<<1)+(h?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(f===0?0:f<0?-1:1)|(63&w)<<2,w>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var E=y.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,E),y.primitiveLength++),h?this.e2=E:this.e1=E},kn.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},kn.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},Xe("LineBucket",kn,{omit:["layers","patternFeatures"]});var B1=new nn({"line-cap":new Je(U.layout_line["line-cap"]),"line-join":new Ke(U.layout_line["line-join"]),"line-miter-limit":new Je(U.layout_line["line-miter-limit"]),"line-round-limit":new Je(U.layout_line["line-round-limit"]),"line-sort-key":new Ke(U.layout_line["line-sort-key"])}),_v={paint:new nn({"line-opacity":new Ke(U.paint_line["line-opacity"]),"line-color":new Ke(U.paint_line["line-color"]),"line-translate":new Je(U.paint_line["line-translate"]),"line-translate-anchor":new Je(U.paint_line["line-translate-anchor"]),"line-width":new Ke(U.paint_line["line-width"]),"line-gap-width":new Ke(U.paint_line["line-gap-width"]),"line-offset":new Ke(U.paint_line["line-offset"]),"line-blur":new Ke(U.paint_line["line-blur"]),"line-dasharray":new mn(U.paint_line["line-dasharray"]),"line-pattern":new Pl(U.paint_line["line-pattern"]),"line-gradient":new Ci(U.paint_line["line-gradient"])}),layout:B1},xv=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(n,l){return l=new Tt(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),e.prototype.possiblyEvaluate.call(this,n,l)},t.prototype.evaluate=function(n,l,h,f){return l=oe({},l,{zoom:Math.floor(l.zoom)}),e.prototype.evaluate.call(this,n,l,h,f)},t}(Ke))(_v.paint.properties["line-width"].specification);xv.useIntegerZoom=!0;var U1=function(e){function t(n){e.call(this,n,_v),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(n){n==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Rn,this.gradientVersion=(this.gradientVersion+1)%Se)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(n,l){e.prototype.recalculate.call(this,n,l),this.paint._values["line-floorwidth"]=xv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)},t.prototype.createBucket=function(n){return new kn(n)},t.prototype.queryRadius=function(n){var l=n,h=wv(Bi("line-width",this,l),Bi("line-gap-width",this,l)),f=Bi("line-offset",this,l);return h/2+Math.abs(f)+Br(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(n,l,h,f,y,w,E){var T=Yi(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,E),P=E/2*wv(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),C=this.paint.get("line-offset").evaluate(l,h);return C&&(f=function(L,R){for(var q=[],Z=new le(0,0),J=0;J<L.length;J++){for(var $=L[J],ae=[],pe=0;pe<$.length;pe++){var he=$[pe],de=$[pe+1],xe=pe===0?Z:he.sub($[pe-1])._unit()._perp(),Pe=pe===$.length-1?Z:de.sub(he)._unit()._perp(),ze=xe._add(Pe)._unit();ze._mult(1/(ze.x*Pe.x+ze.y*Pe.y)),ae.push(ze._mult(R)._add(he))}q.push(ae)}return q}(f,C*E)),function(L,R,q){for(var Z=0;Z<R.length;Z++){var J=R[Z];if(L.length>=3){for(var $=0;$<J.length;$++)if(Fi(L,J[$]))return!0}if(pi(L,J,q))return!0}return!1}(T,f,P)},t.prototype.isTileClipped=function(){return!0},t}(Ri);function wv(e,t){return t>0?t+2*e:e}var N1=Xr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),V1=Xr([{name:"a_projected_pos",components:3,type:"Float32"}],4),j1=(Xr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Xr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),bv=(Xr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Xr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),q1=Xr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Z1(e,t,n){return e.sections.forEach(function(l){l.text=function(h,f,y){var w=f.layout.get("text-transform").evaluate(y,{});return w==="uppercase"?h=h.toLocaleUpperCase():w==="lowercase"&&(h=h.toLocaleLowerCase()),Kn.applyArabicShaping&&(h=Kn.applyArabicShaping(h)),h}(l.text,t,n)}),e}Xr([{name:"triangle",components:3,type:"Uint16"}]),Xr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Xr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Xr([{type:"Float32",name:"offsetX"}]),Xr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var dc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Sv=function(e,t,n,l,h){var f,y,w=8*h-l-1,E=(1<<w)-1,T=E>>1,P=-7,C=n?h-1:0,L=n?-1:1,R=e[t+C];for(C+=L,f=R&(1<<-P)-1,R>>=-P,P+=w;P>0;f=256*f+e[t+C],C+=L,P-=8);for(y=f&(1<<-P)-1,f>>=-P,P+=l;P>0;y=256*y+e[t+C],C+=L,P-=8);if(f===0)f=1-T;else{if(f===E)return y?NaN:1/0*(R?-1:1);y+=Math.pow(2,l),f-=T}return(R?-1:1)*y*Math.pow(2,f-l)},Ev=function(e,t,n,l,h,f){var y,w,E,T=8*f-h-1,P=(1<<T)-1,C=P>>1,L=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=l?0:f-1,q=l?1:-1,Z=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(w=isNaN(t)?1:0,y=P):(y=Math.floor(Math.log(t)/Math.LN2),t*(E=Math.pow(2,-y))<1&&(y--,E*=2),(t+=y+C>=1?L/E:L*Math.pow(2,1-C))*E>=2&&(y++,E/=2),y+C>=P?(w=0,y=P):y+C>=1?(w=(t*E-1)*Math.pow(2,h),y+=C):(w=t*Math.pow(2,C-1)*Math.pow(2,h),y=0));h>=8;e[n+R]=255&w,R+=q,w/=256,h-=8);for(y=y<<h|w,T+=h;T>0;e[n+R]=255&y,R+=q,y/=256,T-=8);e[n+R-q]|=128*Z},fh=tr;function tr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}tr.Varint=0,tr.Fixed64=1,tr.Bytes=2,tr.Fixed32=5;var Tv=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function oa(e){return e.type===tr.Bytes?e.readVarint()+e.pos:e.pos+1}function Fl(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Iv(e,t,n){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(l);for(var h=n.pos-1;h>=e;h--)n.buf[h+l]=n.buf[h]}function G1(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function W1(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function X1(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function H1(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function K1(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function $1(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Q1(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Y1(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function J1(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function dh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Bl(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Pv(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function ew(e,t,n){e===1&&n.readMessage(tw,t)}function tw(e,t,n){if(e===3){var l=n.readMessage(rw,{}),h=l.width,f=l.height,y=l.left,w=l.top,E=l.advance;t.push({id:l.id,bitmap:new Us({width:h+6,height:f+6},l.bitmap),metrics:{width:h,height:f,left:y,top:w,advance:E}})}}function rw(e,t,n){e===1?t.id=n.readVarint():e===2?t.bitmap=n.readBytes():e===3?t.width=n.readVarint():e===4?t.height=n.readVarint():e===5?t.left=n.readSVarint():e===6?t.top=n.readSVarint():e===7&&(t.advance=n.readVarint())}function Cv(e){for(var t=0,n=0,l=0,h=e;l<h.length;l+=1){var f=h[l];t+=f.w*f.h,n=Math.max(n,f.w)}e.sort(function(Z,J){return J.h-Z.h});for(var y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],w=0,E=0,T=0,P=e;T<P.length;T+=1)for(var C=P[T],L=y.length-1;L>=0;L--){var R=y[L];if(!(C.w>R.w||C.h>R.h)){if(C.x=R.x,C.y=R.y,E=Math.max(E,C.y+C.h),w=Math.max(w,C.x+C.w),C.w===R.w&&C.h===R.h){var q=y.pop();L<y.length&&(y[L]=q)}else C.h===R.h?(R.x+=C.w,R.w-=C.w):C.w===R.w?(R.y+=C.h,R.h-=C.h):(y.push({x:R.x+C.w,y:R.y,w:R.w-C.w,h:C.h}),R.y+=C.h,R.h-=C.h);break}}return{w,h:E,fill:t/(w*E)||0}}tr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var l=this.readVarint(),h=l>>3,f=this.pos;this.type=7&l,e(h,t,this),this.pos===f&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=dh(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Pv(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=dh(this.buf,this.pos)+4294967296*dh(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=dh(this.buf,this.pos)+4294967296*Pv(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Sv(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Sv(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,l=this.buf;return t=127&(n=l[this.pos++]),n<128?t:(t|=(127&(n=l[this.pos++]))<<7,n<128?t:(t|=(127&(n=l[this.pos++]))<<14,n<128?t:(t|=(127&(n=l[this.pos++]))<<21,n<128?t:function(h,f,y){var w,E,T=y.buf;if(w=(112&(E=T[y.pos++]))>>4,E<128||(w|=(127&(E=T[y.pos++]))<<3,E<128)||(w|=(127&(E=T[y.pos++]))<<10,E<128)||(w|=(127&(E=T[y.pos++]))<<17,E<128)||(w|=(127&(E=T[y.pos++]))<<24,E<128)||(w|=(1&(E=T[y.pos++]))<<31,E<128))return Fl(h,w,f);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=l[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Tv?function(n,l,h){return Tv.decode(n.subarray(l,h))}(this.buf,t,e):function(n,l,h){for(var f="",y=l;y<h;){var w,E,T,P=n[y],C=null,L=P>239?4:P>223?3:P>191?2:1;if(y+L>h)break;L===1?P<128&&(C=P):L===2?(192&(w=n[y+1]))==128&&(C=(31&P)<<6|63&w)<=127&&(C=null):L===3?(E=n[y+2],(192&(w=n[y+1]))==128&&(192&E)==128&&((C=(15&P)<<12|(63&w)<<6|63&E)<=2047||C>=55296&&C<=57343)&&(C=null)):L===4&&(E=n[y+2],T=n[y+3],(192&(w=n[y+1]))==128&&(192&E)==128&&(192&T)==128&&((C=(15&P)<<18|(63&w)<<12|(63&E)<<6|63&T)<=65535||C>=1114112)&&(C=null)),C===null?(C=65533,L=1):C>65535&&(C-=65536,f+=String.fromCharCode(C>>>10&1023|55296),C=56320|1023&C),f+=String.fromCharCode(C),y+=L}return f}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==tr.Bytes)return e.push(this.readVarint(t));var n=oa(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==tr.Bytes)return e.push(this.readSVarint());var t=oa(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==tr.Bytes)return e.push(this.readBoolean());var t=oa(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==tr.Bytes)return e.push(this.readFloat());var t=oa(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==tr.Bytes)return e.push(this.readDouble());var t=oa(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==tr.Bytes)return e.push(this.readFixed32());var t=oa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==tr.Bytes)return e.push(this.readSFixed32());var t=oa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==tr.Bytes)return e.push(this.readFixed64());var t=oa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==tr.Bytes)return e.push(this.readSFixed64());var t=oa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===tr.Varint)for(;this.buf[this.pos++]>127;);else if(t===tr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===tr.Fixed32)this.pos+=4;else{if(t!==tr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Bl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Bl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Bl(this.buf,-1&e,this.pos),Bl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Bl(this.buf,-1&e,this.pos),Bl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,n){var l,h;if(t>=0?(l=t%4294967296|0,h=t/4294967296|0):(h=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,h=h+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(f,y,w){w.buf[w.pos++]=127&f|128,f>>>=7,w.buf[w.pos++]=127&f|128,f>>>=7,w.buf[w.pos++]=127&f|128,f>>>=7,w.buf[w.pos++]=127&f|128,w.buf[w.pos]=127&(f>>>=7)}(l,0,n),function(f,y){var w=(7&f)<<4;y.buf[y.pos++]|=w|((f>>>=3)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f)))))}(h,n)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(l,h,f){for(var y,w,E=0;E<h.length;E++){if((y=h.charCodeAt(E))>55295&&y<57344){if(!w){y>56319||E+1===h.length?(l[f++]=239,l[f++]=191,l[f++]=189):w=y;continue}if(y<56320){l[f++]=239,l[f++]=191,l[f++]=189,w=y;continue}y=w-55296<<10|y-56320|65536,w=null}else w&&(l[f++]=239,l[f++]=191,l[f++]=189,w=null);y<128?l[f++]=y:(y<2048?l[f++]=y>>6|192:(y<65536?l[f++]=y>>12|224:(l[f++]=y>>18|240,l[f++]=y>>12&63|128),l[f++]=y>>6&63|128),l[f++]=63&y|128)}return f}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Iv(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Ev(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Ev(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var l=this.pos-n;l>=128&&Iv(n,l,this),this.pos=n-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,n){this.writeTag(e,tr.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,G1,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,W1,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,K1,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,X1,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,H1,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,$1,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Q1,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Y1,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,J1,t)},writeBytesField:function(e,t){this.writeTag(e,tr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,tr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,tr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,tr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,tr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,tr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,tr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,tr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,tr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,tr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var mh=function(e,t){var n=t.pixelRatio,l=t.version,h=t.stretchX,f=t.stretchY,y=t.content;this.paddedRect=e,this.pixelRatio=n,this.stretchX=h,this.stretchY=f,this.content=y,this.version=l},mc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};mc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},mc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},mc.tlbr.get=function(){return this.tl.concat(this.br)},mc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(mh.prototype,mc);var yc=function(e,t){var n={},l={};this.haveRenderCallbacks=[];var h=[];this.addImages(e,n,h),this.addImages(t,l,h);var f=Cv(h),y=new jn({width:f.w||1,height:f.h||1});for(var w in e){var E=e[w],T=n[w].paddedRect;jn.copy(E.data,y,{x:0,y:0},{x:T.x+1,y:T.y+1},E.data)}for(var P in t){var C=t[P],L=l[P].paddedRect,R=L.x+1,q=L.y+1,Z=C.data.width,J=C.data.height;jn.copy(C.data,y,{x:0,y:0},{x:R,y:q},C.data),jn.copy(C.data,y,{x:0,y:J-1},{x:R,y:q-1},{width:Z,height:1}),jn.copy(C.data,y,{x:0,y:0},{x:R,y:q+J},{width:Z,height:1}),jn.copy(C.data,y,{x:Z-1,y:0},{x:R-1,y:q},{width:1,height:J}),jn.copy(C.data,y,{x:0,y:0},{x:R+Z,y:q},{width:1,height:J})}this.image=y,this.iconPositions=n,this.patternPositions=l};yc.prototype.addImages=function(e,t,n){for(var l in e){var h=e[l],f={x:0,y:0,w:h.data.width+2,h:h.data.height+2};n.push(f),t[l]=new mh(f,h),h.hasRenderCallback&&this.haveRenderCallbacks.push(l)}},yc.prototype.patchUpdatedImages=function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)},yc.prototype.patchUpdatedImage=function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var l=e.tl;n.update(t.data,void 0,{x:l[0],y:l[1]})}},Xe("ImagePosition",mh),Xe("ImageAtlas",yc);var hi={horizontal:1,vertical:2,horizontalOnly:3},Ul=function(){this.scale=1,this.fontStack="",this.imageName=null};Ul.forText=function(e,t){var n=new Ul;return n.scale=e||1,n.fontStack=t,n},Ul.forImage=function(e){var t=new Ul;return t.imageName=e,t};var vn=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function yh(e,t,n,l,h,f,y,w,E,T,P,C,L,R,q,Z){var J,$=vn.fromFeature(e,h);C===hi.vertical&&$.verticalizePunctuation();var ae=Kn.processBidirectionalText,pe=Kn.processStyledBidirectionalText;if(ae&&$.sections.length===1){J=[];for(var he=0,de=ae($.toString(),kd($,T,f,t,l,R,q));he<de.length;he+=1){var xe=de[he],Pe=new vn;Pe.text=xe,Pe.sections=$.sections;for(var ze=0;ze<xe.length;ze++)Pe.sectionIndex.push(0);J.push(Pe)}}else if(pe){J=[];for(var Ye=0,Be=pe($.text,$.sectionIndex,kd($,T,f,t,l,R,q));Ye<Be.length;Ye+=1){var tt=Be[Ye],Ne=new vn;Ne.text=tt[0],Ne.sectionIndex=tt[1],Ne.sections=$.sections,J.push(Ne)}}else J=function($e,St){for(var yt=[],Dt=$e.text,rt=0,Ft=0,lr=St;Ft<lr.length;Ft+=1){var yr=lr[Ft];yt.push($e.substring(rt,yr)),rt=yr}return rt<Dt.length&&yt.push($e.substring(rt,Dt.length)),yt}($,kd($,T,f,t,l,R,q));var xt=[],lt={positionedLines:xt,text:$.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:C,iconsInText:!1,verticalizable:!1};return function($e,St,yt,Dt,rt,Ft,lr,yr,fr,ur,vr,Ur){for(var Nr=0,gn=-17,$r=0,_n=0,Sr=yr==="right"?1:yr==="left"?0:.5,Qr=0,Pt=0,Kt=rt;Pt<Kt.length;Pt+=1){var Zt=Kt[Pt];Zt.trim();var Rt=Zt.getMaxScale(),An=24*(Rt-1),an={positionedGlyphs:[],lineOffset:0};$e.positionedLines[Qr]=an;var ir=an.positionedGlyphs,Ar=0;if(Zt.length()){for(var sn=0;sn<Zt.length();sn++){var Bt=Zt.getSection(sn),Eo=Zt.getSectionIndex(sn),fi=Zt.getCharCode(sn),To=0,Er=null,Io=null,Ui=null,Xl=24,qs=!(fr===hi.horizontal||!vr&&!El(fi)||vr&&(vh[fi]||(ua=fi,De.Arabic(ua)||De["Arabic Supplement"](ua)||De["Arabic Extended-A"](ua)||De["Arabic Presentation Forms-A"](ua)||De["Arabic Presentation Forms-B"](ua))));if(Bt.imageName){var Hl=Dt[Bt.imageName];if(!Hl)continue;Ui=Bt.imageName,$e.iconsInText=$e.iconsInText||!0,Io=Hl.paddedRect;var la=Hl.displaySize;Bt.scale=24*Bt.scale/Ur,To=An+(24-la[1]*Bt.scale),Xl=(Er={width:la[0],height:la[1],left:1,top:-3,advance:qs?la[1]:la[0]}).advance;var Kl=qs?la[0]*Bt.scale-24*Rt:la[1]*Bt.scale-24*Rt;Kl>0&&Kl>Ar&&(Ar=Kl)}else{var Ih=yt[Bt.fontStack],$l=Ih&&Ih[fi];if($l&&$l.rect)Io=$l.rect,Er=$l.metrics;else{var _c=St[Bt.fontStack],Ph=_c&&_c[fi];if(!Ph)continue;Er=Ph.metrics}To=24*(Rt-Bt.scale)}qs?($e.verticalizable=!0,ir.push({glyph:fi,imageName:Ui,x:Nr,y:gn+To,vertical:qs,scale:Bt.scale,fontStack:Bt.fontStack,sectionIndex:Eo,metrics:Er,rect:Io}),Nr+=Xl*Bt.scale+ur):(ir.push({glyph:fi,imageName:Ui,x:Nr,y:gn+To,vertical:qs,scale:Bt.scale,fontStack:Bt.fontStack,sectionIndex:Eo,metrics:Er,rect:Io}),Nr+=Er.advance*Bt.scale+ur)}ir.length!==0&&($r=Math.max(Nr-ur,$r),iw(ir,0,ir.length-1,Sr,Ar)),Nr=0;var Ch=Ft*Rt+Ar;an.lineOffset=Math.max(Ar,An),gn+=Ch,_n=Math.max(Ch,_n),++Qr}else gn+=Ft,++Qr}var ua,xc=gn- -17,Ql=Ad(lr),Ua=Ql.horizontalAlign,Yl=Ql.verticalAlign;(function(kh,Ah,wc,bc,zh,Sc,Ec,Tc,Mh){var Jl,Dh=(Ah-wc)*zh;Jl=Sc!==Ec?-Tc*bc- -17:(-bc*Mh+.5)*Ec;for(var eu=0,Ic=kh;eu<Ic.length;eu+=1)for(var Zs=0,Pc=Ic[eu].positionedGlyphs;Zs<Pc.length;Zs+=1){var tu=Pc[Zs];tu.x+=Dh,tu.y+=Jl}})($e.positionedLines,Sr,Ua,Yl,$r,_n,Ft,xc,rt.length),$e.top+=-Yl*xc,$e.bottom=$e.top+xc,$e.left+=-Ua*$r,$e.right=$e.left+$r}(lt,t,n,l,J,y,w,E,C,T,L,Z),!function($e){for(var St=0,yt=$e;St<yt.length;St+=1)if(yt[St].positionedGlyphs.length!==0)return!1;return!0}(xt)&&lt}vn.fromFeature=function(e,t){for(var n=new vn,l=0;l<e.sections.length;l++){var h=e.sections[l];h.image?n.addImageSection(h):n.addTextSection(h,t)}return n},vn.prototype.length=function(){return this.text.length},vn.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},vn.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},vn.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},vn.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var l=e.charCodeAt(n+1)||null,h=e.charCodeAt(n-1)||null;t+=l&&Ju(l)&&!dc[e[n+1]]||h&&Ju(h)&&!dc[e[n-1]]||!dc[e[n]]?e[n]:dc[e[n]]}return t}(this.text)},vn.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&vh[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,l=this.text.length-1;l>=0&&l>=e&&vh[this.text.charCodeAt(l)];l--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},vn.prototype.substring=function(e,t){var n=new vn;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},vn.prototype.toString=function(){return this.text},vn.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,n){return Math.max(t,e.sections[n].scale)},0)},vn.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(Ul.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,l=0;l<e.text.length;++l)this.sectionIndex.push(n)},vn.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Ul.forImage(t)),this.sectionIndex.push(this.sections.length-1)):gt("Reached maximum number of images 6401")}else gt("Can't add FormattedSection with an empty image.")},vn.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var vh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qn={};function kv(e,t,n,l,h,f){if(t.imageName){var y=l[t.imageName];return y?y.displaySize[0]*t.scale*24/f+h:0}var w=n[t.fontStack],E=w&&w[e];return E?E.metrics.advance*t.scale+h:0}function Av(e,t,n,l){var h=Math.pow(e-t,2);return l?e<t?h/2:2*h:h+Math.abs(n)*n}function nw(e,t,n){var l=0;return e===10&&(l-=1e4),n&&(l+=150),e!==40&&e!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function zv(e,t,n,l,h,f){for(var y=null,w=Av(t,n,h,f),E=0,T=l;E<T.length;E+=1){var P=T[E],C=Av(t-P.x,n,h,f)+P.badness;C<=w&&(y=P,w=C)}return{index:e,x:t,priorBreak:y,badness:w}}function kd(e,t,n,l,h,f,y){if(f!=="point")return[];if(!e)return[];for(var w,E=[],T=function(J,$,ae,pe,he,de){for(var xe=0,Pe=0;Pe<J.length();Pe++){var ze=J.getSection(Pe);xe+=kv(J.getCharCode(Pe),ze,pe,he,$,de)}return xe/Math.max(1,Math.ceil(xe/ae))}(e,t,n,l,h,y),P=e.text.indexOf("\u200B")>=0,C=0,L=0;L<e.length();L++){var R=e.getSection(L),q=e.getCharCode(L);if(vh[q]||(C+=kv(q,R,l,h,t,y)),L<e.length()-1){var Z=!((w=q)<11904||!(De["Bopomofo Extended"](w)||De.Bopomofo(w)||De["CJK Compatibility Forms"](w)||De["CJK Compatibility Ideographs"](w)||De["CJK Compatibility"](w)||De["CJK Radicals Supplement"](w)||De["CJK Strokes"](w)||De["CJK Symbols and Punctuation"](w)||De["CJK Unified Ideographs Extension A"](w)||De["CJK Unified Ideographs"](w)||De["Enclosed CJK Letters and Months"](w)||De["Halfwidth and Fullwidth Forms"](w)||De.Hiragana(w)||De["Ideographic Description Characters"](w)||De["Kangxi Radicals"](w)||De["Katakana Phonetic Extensions"](w)||De.Katakana(w)||De["Vertical Forms"](w)||De["Yi Radicals"](w)||De["Yi Syllables"](w)));(Qn[q]||Z||R.imageName)&&E.push(zv(L+1,C,T,E,nw(q,e.getCharCode(L+1),Z&&P),!1))}}return function J($){return $?J($.priorBreak).concat($.index):[]}(zv(e.length(),C,T,E,0,!0))}function Ad(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function iw(e,t,n,l,h){if(l||h)for(var f=e[n],y=(e[n].x+f.metrics.advance*f.scale)*l,w=t;w<=n;w++)e[w].x-=y,e[w].y+=h}function Mv(e,t,n,l,h,f){var y,w=e.image;if(w.content){var E=w.content,T=w.pixelRatio||1;y=[E[0]/T,E[1]/T,w.displaySize[0]-E[2]/T,w.displaySize[1]-E[3]/T]}var P,C,L,R,q=t.left*f,Z=t.right*f;n==="width"||n==="both"?(R=h[0]+q-l[3],C=h[0]+Z+l[1]):C=(R=h[0]+(q+Z-w.displaySize[0])/2)+w.displaySize[0];var J=t.top*f,$=t.bottom*f;return n==="height"||n==="both"?(P=h[1]+J-l[0],L=h[1]+$+l[2]):L=(P=h[1]+(J+$-w.displaySize[1])/2)+w.displaySize[1],{image:w,top:P,right:C,bottom:L,left:R,collisionPadding:y}}Qn[10]=!0,Qn[32]=!0,Qn[38]=!0,Qn[40]=!0,Qn[41]=!0,Qn[43]=!0,Qn[45]=!0,Qn[47]=!0,Qn[173]=!0,Qn[183]=!0,Qn[8203]=!0,Qn[8208]=!0,Qn[8211]=!0,Qn[8231]=!0;var Nl=function(e){function t(n,l,h,f){e.call(this,n,l),this.angle=h,f!==void 0&&(this.segment=f)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(le);function zd(e,t){var n=t.expression;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new Tt(e+1))};if(n.kind==="source")return{kind:"source"};for(var l=n.zoomStops,h=n.interpolationType,f=0;f<l.length&&l[f]<=e;)f++;for(var y=f=Math.max(0,f-1);y<l.length&&l[y]<e+1;)y++;y=Math.min(l.length-1,y);var w=l[f],E=l[y];return n.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:E,interpolationType:h}:{kind:"camera",minZoom:w,maxZoom:E,minSize:n.evaluate(new Tt(w)),maxSize:n.evaluate(new Tt(E)),interpolationType:h}}function Dv(e,t,n){var l=t.uSize,h=n.lowerSize;return e.kind==="source"?h/128:e.kind==="composite"?Cr(h/128,n.upperSize/128,t.uSizeT):l}function Lv(e,t){var n=0,l=0;if(e.kind==="constant")l=e.layoutSize;else if(e.kind!=="source"){var h=e.interpolationType,f=h?se(tn.interpolationFactor(h,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?l=Cr(e.minSize,e.maxSize,f):n=f}return{uSizeT:n,uSize:l}}Xe("Anchor",Nl);var ow=Object.freeze({__proto__:null,getSizeData:zd,evaluateSizeForFeature:Dv,evaluateSizeForZoom:Lv,SIZE_PACK_FACTOR:128});function Rv(e,t,n,l,h){if(t.segment===void 0)return!0;for(var f=t,y=t.segment+1,w=0;w>-n/2;){if(--y<0)return!1;w-=e[y].dist(f),f=e[y]}w+=e[y].dist(e[y+1]),y++;for(var E=[],T=0;w<n/2;){var P=e[y],C=e[y+1];if(!C)return!1;var L=e[y-1].angleTo(P)-P.angleTo(C);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:w,angleDelta:L}),T+=L;w-E[0].distance>l;)T-=E.shift().angleDelta;if(T>h)return!1;y++,w+=P.dist(C)}return!0}function Ov(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Fv(e,t,n){return e?.6*t*n:0}function Bv(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function aw(e,t,n,l,h,f){for(var y=Fv(n,h,f),w=Bv(n,l)*f,E=0,T=Ov(e)/2,P=0;P<e.length-1;P++){var C=e[P],L=e[P+1],R=C.dist(L);if(E+R>T){var q=(T-E)/R,Z=Cr(C.x,L.x,q),J=Cr(C.y,L.y,q),$=new Nl(Z,J,L.angleTo(C),P);return $._round(),!y||Rv(e,$,w,y,t)?$:void 0}E+=R}}function sw(e,t,n,l,h,f,y,w,E){var T=Fv(l,f,y),P=Bv(l,h),C=P*y,L=e[0].x===0||e[0].x===E||e[0].y===0||e[0].y===E;return t-C<t/4&&(t=C+t/4),function R(q,Z,J,$,ae,pe,he,de,xe){for(var Pe=pe/2,ze=Ov(q),Ye=0,Be=Z-J,tt=[],Ne=0;Ne<q.length-1;Ne++){for(var xt=q[Ne],lt=q[Ne+1],$e=xt.dist(lt),St=lt.angleTo(xt);Be+J<Ye+$e;){var yt=((Be+=J)-Ye)/$e,Dt=Cr(xt.x,lt.x,yt),rt=Cr(xt.y,lt.y,yt);if(Dt>=0&&Dt<xe&&rt>=0&&rt<xe&&Be-Pe>=0&&Be+Pe<=ze){var Ft=new Nl(Dt,rt,St,Ne);Ft._round(),$&&!Rv(q,Ft,pe,$,ae)||tt.push(Ft)}}Ye+=$e}return de||tt.length||he||(tt=R(q,Ye/2,J,$,ae,pe,he,!0,xe)),tt}(e,L?t/2*w%t:(P/2+2*f)*y*w%t,t,T,n,C,L,!1,E)}function Uv(e,t,n,l,h){for(var f=[],y=0;y<e.length;y++)for(var w=e[y],E=void 0,T=0;T<w.length-1;T++){var P=w[T],C=w[T+1];P.x<t&&C.x<t||(P.x<t?P=new le(t,P.y+(t-P.x)/(C.x-P.x)*(C.y-P.y))._round():C.x<t&&(C=new le(t,P.y+(t-P.x)/(C.x-P.x)*(C.y-P.y))._round()),P.y<n&&C.y<n||(P.y<n?P=new le(P.x+(n-P.y)/(C.y-P.y)*(C.x-P.x),n)._round():C.y<n&&(C=new le(P.x+(n-P.y)/(C.y-P.y)*(C.x-P.x),n)._round()),P.x>=l&&C.x>=l||(P.x>=l?P=new le(l,P.y+(l-P.x)/(C.x-P.x)*(C.y-P.y))._round():C.x>=l&&(C=new le(l,P.y+(l-P.x)/(C.x-P.x)*(C.y-P.y))._round()),P.y>=h&&C.y>=h||(P.y>=h?P=new le(P.x+(h-P.y)/(C.y-P.y)*(C.x-P.x),h)._round():C.y>=h&&(C=new le(P.x+(h-P.y)/(C.y-P.y)*(C.x-P.x),h)._round()),E&&P.equals(E[E.length-1])||f.push(E=[P]),E.push(C)))))}return f}function Nv(e,t,n,l){var h=[],f=e.image,y=f.pixelRatio,w=f.paddedRect.w-2,E=f.paddedRect.h-2,T=e.right-e.left,P=e.bottom-e.top,C=f.stretchX||[[0,w]],L=f.stretchY||[[0,E]],R=function(Dt,rt){return Dt+rt[1]-rt[0]},q=C.reduce(R,0),Z=L.reduce(R,0),J=w-q,$=E-Z,ae=0,pe=q,he=0,de=Z,xe=0,Pe=J,ze=0,Ye=$;if(f.content&&l){var Be=f.content;ae=gh(C,0,Be[0]),he=gh(L,0,Be[1]),pe=gh(C,Be[0],Be[2]),de=gh(L,Be[1],Be[3]),xe=Be[0]-ae,ze=Be[1]-he,Pe=Be[2]-Be[0]-pe,Ye=Be[3]-Be[1]-de}var tt=function(Dt,rt,Ft,lr){var yr=_h(Dt.stretch-ae,pe,T,e.left),fr=xh(Dt.fixed-xe,Pe,Dt.stretch,q),ur=_h(rt.stretch-he,de,P,e.top),vr=xh(rt.fixed-ze,Ye,rt.stretch,Z),Ur=_h(Ft.stretch-ae,pe,T,e.left),Nr=xh(Ft.fixed-xe,Pe,Ft.stretch,q),gn=_h(lr.stretch-he,de,P,e.top),$r=xh(lr.fixed-ze,Ye,lr.stretch,Z),_n=new le(yr,ur),Sr=new le(Ur,ur),Qr=new le(Ur,gn),Pt=new le(yr,gn),Kt=new le(fr/y,vr/y),Zt=new le(Nr/y,$r/y),Rt=t*Math.PI/180;if(Rt){var An=Math.sin(Rt),an=Math.cos(Rt),ir=[an,-An,An,an];_n._matMult(ir),Sr._matMult(ir),Pt._matMult(ir),Qr._matMult(ir)}var Ar=Dt.stretch+Dt.fixed,sn=rt.stretch+rt.fixed;return{tl:_n,tr:Sr,bl:Pt,br:Qr,tex:{x:f.paddedRect.x+1+Ar,y:f.paddedRect.y+1+sn,w:Ft.stretch+Ft.fixed-Ar,h:lr.stretch+lr.fixed-sn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Kt,pixelOffsetBR:Zt,minFontScaleX:Pe/y/T,minFontScaleY:Ye/y/P,isSDF:n}};if(l&&(f.stretchX||f.stretchY))for(var Ne=Vv(C,J,q),xt=Vv(L,$,Z),lt=0;lt<Ne.length-1;lt++)for(var $e=Ne[lt],St=Ne[lt+1],yt=0;yt<xt.length-1;yt++)h.push(tt($e,xt[yt],St,xt[yt+1]));else h.push(tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:E+1}));return h}function gh(e,t,n){for(var l=0,h=0,f=e;h<f.length;h+=1){var y=f[h];l+=Math.max(t,Math.min(n,y[1]))-Math.max(t,Math.min(n,y[0]))}return l}function Vv(e,t,n){for(var l=[{fixed:-1,stretch:0}],h=0,f=e;h<f.length;h+=1){var y=f[h],w=y[0],E=y[1],T=l[l.length-1];l.push({fixed:w-T.stretch,stretch:T.stretch}),l.push({fixed:w-T.stretch,stretch:T.stretch+(E-w)})}return l.push({fixed:t+1,stretch:n}),l}function _h(e,t,n,l){return e/t*n+l}function xh(e,t,n,l){return e-t*n/l}var wh=function(e,t,n,l,h,f,y,w,E,T){if(this.boxStartIndex=e.length,E){var P=f.top,C=f.bottom,L=f.collisionPadding;L&&(P-=L[1],C+=L[3]);var R=C-P;R>0&&(R=Math.max(10,R),this.circleDiameter=R)}else{var q=f.top*y-w,Z=f.bottom*y+w,J=f.left*y-w,$=f.right*y+w,ae=f.collisionPadding;if(ae&&(J-=ae[0]*y,q-=ae[1]*y,$+=ae[2]*y,Z+=ae[3]*y),T){var pe=new le(J,q),he=new le($,q),de=new le(J,Z),xe=new le($,Z),Pe=T*Math.PI/180;pe._rotate(Pe),he._rotate(Pe),de._rotate(Pe),xe._rotate(Pe),J=Math.min(pe.x,he.x,de.x,xe.x),$=Math.max(pe.x,he.x,de.x,xe.x),q=Math.min(pe.y,he.y,de.y,xe.y),Z=Math.max(pe.y,he.y,de.y,xe.y)}e.emplaceBack(t.x,t.y,J,q,$,Z,n,l,h)}this.boxEndIndex=e.length},Vl=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=lw),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function lw(e,t){return e<t?-1:e>t?1:0}function uw(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!1);for(var l=1/0,h=1/0,f=-1/0,y=-1/0,w=e[0],E=0;E<w.length;E++){var T=w[E];(!E||T.x<l)&&(l=T.x),(!E||T.y<h)&&(h=T.y),(!E||T.x>f)&&(f=T.x),(!E||T.y>y)&&(y=T.y)}var P=Math.min(f-l,y-h),C=P/2,L=new Vl([],cw);if(P===0)return new le(l,h);for(var R=l;R<f;R+=P)for(var q=h;q<y;q+=P)L.push(new jl(R+C,q+C,C,e));for(var Z=function(ae){for(var pe=0,he=0,de=0,xe=ae[0],Pe=0,ze=xe.length,Ye=ze-1;Pe<ze;Ye=Pe++){var Be=xe[Pe],tt=xe[Ye],Ne=Be.x*tt.y-tt.x*Be.y;he+=(Be.x+tt.x)*Ne,de+=(Be.y+tt.y)*Ne,pe+=3*Ne}return new jl(he/pe,de/pe,0,ae)}(e),J=L.length;L.length;){var $=L.pop();($.d>Z.d||!Z.d)&&(Z=$,n&&console.log("found best %d after %d probes",Math.round(1e4*$.d)/1e4,J)),$.max-Z.d<=t||(L.push(new jl($.p.x-(C=$.h/2),$.p.y-C,C,e)),L.push(new jl($.p.x+C,$.p.y-C,C,e)),L.push(new jl($.p.x-C,$.p.y+C,C,e)),L.push(new jl($.p.x+C,$.p.y+C,C,e)),J+=4)}return n&&(console.log("num probes: "+J),console.log("best distance: "+Z.d)),Z.p}function cw(e,t){return t.max-e.max}function jl(e,t,n,l){this.p=new le(e,t),this.h=n,this.d=function(h,f){for(var y=!1,w=1/0,E=0;E<f.length;E++)for(var T=f[E],P=0,C=T.length,L=C-1;P<C;L=P++){var R=T[P],q=T[L];R.y>h.y!=q.y>h.y&&h.x<(q.x-R.x)*(h.y-R.y)/(q.y-R.y)+R.x&&(y=!y),w=Math.min(w,Ra(h,R,q))}return(y?1:-1)*Math.sqrt(w)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}Vl.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Vl.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},Vl.prototype.peek=function(){return this.data[0]},Vl.prototype._up=function(e){for(var t=this.data,n=this.compare,l=t[e];e>0;){var h=e-1>>1,f=t[h];if(n(l,f)>=0)break;t[e]=f,e=h}t[e]=l},Vl.prototype._down=function(e){for(var t=this.data,n=this.compare,l=this.length>>1,h=t[e];e<l;){var f=1+(e<<1),y=t[f],w=f+1;if(w<this.length&&n(t[w],y)<0&&(f=w,y=t[w]),n(y,h)>=0)break;t[e]=y,e=f}t[e]=h};var Md=Number.POSITIVE_INFINITY;function jv(e,t){return t[1]!==Md?function(n,l,h){var f=0,y=0;switch(l=Math.abs(l),h=Math.abs(h),n){case"top-right":case"top-left":case"top":y=h-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-h}switch(n){case"top-right":case"bottom-right":case"right":f=-l;break;case"top-left":case"bottom-left":case"left":f=l}return[f,y]}(e,t[0],t[1]):function(n,l){var h=0,f=0;l<0&&(l=0);var y=l/Math.sqrt(2);switch(n){case"top-right":case"top-left":f=y-7;break;case"bottom-right":case"bottom-left":f=7-y;break;case"bottom":f=7-l;break;case"top":f=l-7}switch(n){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=l;break;case"right":h=-l}return[h,f]}(e,t[0])}function Dd(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function qv(e,t,n,l,h,f,y,w,E,T,P,C,L,R,q){var Z=function(he,de,xe,Pe,ze,Ye,Be,tt){for(var Ne=Pe.layout.get("text-rotate").evaluate(Ye,{})*Math.PI/180,xt=[],lt=0,$e=de.positionedLines;lt<$e.length;lt+=1)for(var St=$e[lt],yt=0,Dt=St.positionedGlyphs;yt<Dt.length;yt+=1){var rt=Dt[yt];if(rt.rect){var Ft=rt.rect||{},lr=4,yr=!0,fr=1,ur=0,vr=(ze||tt)&&rt.vertical,Ur=rt.metrics.advance*rt.scale/2;if(tt&&de.verticalizable&&(ur=St.lineOffset/2-(rt.imageName?-(24-rt.metrics.width*rt.scale)/2:24*(rt.scale-1))),rt.imageName){var Nr=Be[rt.imageName];yr=Nr.sdf,lr=1/(fr=Nr.pixelRatio)}var gn=ze?[rt.x+Ur,rt.y]:[0,0],$r=ze?[0,0]:[rt.x+Ur+xe[0],rt.y+xe[1]-ur],_n=[0,0];vr&&(_n=$r,$r=[0,0]);var Sr=(rt.metrics.left-lr)*rt.scale-Ur+$r[0],Qr=(-rt.metrics.top-lr)*rt.scale+$r[1],Pt=Sr+Ft.w*rt.scale/fr,Kt=Qr+Ft.h*rt.scale/fr,Zt=new le(Sr,Qr),Rt=new le(Pt,Qr),An=new le(Sr,Kt),an=new le(Pt,Kt);if(vr){var ir=new le(-Ur,Ur- -17),Ar=-Math.PI/2,sn=12-Ur,Bt=new le(22-sn,-(rt.imageName?sn:0)),Eo=new(Function.prototype.bind.apply(le,[null].concat(_n)));Zt._rotateAround(Ar,ir)._add(Bt)._add(Eo),Rt._rotateAround(Ar,ir)._add(Bt)._add(Eo),An._rotateAround(Ar,ir)._add(Bt)._add(Eo),an._rotateAround(Ar,ir)._add(Bt)._add(Eo)}if(Ne){var fi=Math.sin(Ne),To=Math.cos(Ne),Er=[To,-fi,fi,To];Zt._matMult(Er),Rt._matMult(Er),An._matMult(Er),an._matMult(Er)}var Io=new le(0,0),Ui=new le(0,0);xt.push({tl:Zt,tr:Rt,bl:An,br:an,tex:Ft,writingMode:de.writingMode,glyphOffset:gn,sectionIndex:rt.sectionIndex,isSDF:yr,pixelOffsetTL:Io,pixelOffsetBR:Ui,minFontScaleX:0,minFontScaleY:0})}}return xt}(0,n,w,h,f,y,l,e.allowVerticalPlacement),J=e.textSizeData,$=null;J.kind==="source"?($=[128*h.layout.get("text-size").evaluate(y,{})])[0]>32640&&gt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):J.kind==="composite"&&(($=[128*R.compositeTextSizes[0].evaluate(y,{},q),128*R.compositeTextSizes[1].evaluate(y,{},q)])[0]>32640||$[1]>32640)&&gt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,Z,$,w,f,y,T,t,E.lineStartIndex,E.lineLength,L,q);for(var ae=0,pe=P;ae<pe.length;ae+=1)C[pe[ae]]=e.text.placedSymbolArray.length-1;return 4*Z.length}function Zv(e){for(var t in e)return e[t];return null}function pw(e,t,n,l){var h=e.compareText;if(t in h){for(var f=h[t],y=f.length-1;y>=0;y--)if(l.dist(f[y])<n)return!0}else h[t]=[];return h[t].push(l),!1}var hw=Ol.VectorTileFeature.types,fw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function bh(e,t,n,l,h,f,y,w,E,T,P,C,L){var R=w?Math.min(32640,Math.round(w[0])):0,q=w?Math.min(32640,Math.round(w[1])):0;e.emplaceBack(t,n,Math.round(32*l),Math.round(32*h),f,y,(R<<1)+(E?1:0),q,16*T,16*P,256*C,256*L)}function Ld(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function dw(e){for(var t=0,n=e.sections;t<n.length;t+=1)if(Tl(n[t].text))return!0;return!1}var ql=function(e){this.layoutVertexArray=new kl,this.indexArray=new go,this.programConfigurations=e,this.segments=new B,this.dynamicLayoutVertexArray=new Ma,this.opacityVertexArray=new Ds,this.placedSymbolArray=new c};ql.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},ql.prototype.upload=function(e,t,n,l){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,N1.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,V1.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,fw,!0),this.opacityVertexBuffer.itemSize=1),(n||l)&&this.programConfigurations.upload(e))},ql.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Xe("SymbolBuffers",ql);var vc=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new B,this.collisionVertexArray=new oc};vc.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,j1.members,!0)},vc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Xe("CollisionBuffers",vc);var Wt=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(f){return f.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=$n([]),this.placementViewportMatrix=$n([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zd(this.zoom,t["text-size"]),this.iconSizeData=zd(this.zoom,t["icon-size"]);var n=this.layers[0].layout,l=n.get("symbol-sort-key"),h=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey=h!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(h==="viewport-y"||h==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,n.get("symbol-placement")==="point"&&(this.writingModes=n.get("text-writing-mode").map(function(f){return hi[f]})),this.stateDependentLayerIds=this.layers.filter(function(f){return f.isStateDependent()}).map(function(f){return f.id}),this.sourceID=e.sourceID};Wt.prototype.createArrays=function(){this.text=new ql(new st(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new ql(new st(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new x,this.lineVertexArray=new b,this.symbolInstances=new v},Wt.prototype.calculateGlyphDependencies=function(e,t,n,l,h){for(var f=0;f<e.length;f++)if(t[e.charCodeAt(f)]=!0,(n||l)&&h){var y=dc[e.charAt(f)];y&&(t[y.charCodeAt(0)]=!0)}},Wt.prototype.populate=function(e,t,n){var l=this.layers[0],h=l.layout,f=h.get("text-font"),y=h.get("text-field"),w=h.get("icon-image"),E=(y.value.kind!=="constant"||y.value.value instanceof Gr&&!y.value.value.isEmpty()||y.value.value.toString().length>0)&&(f.value.kind!=="constant"||f.value.value.length>0),T=w.value.kind!=="constant"||!!w.value.value||Object.keys(w.parameters).length>0,P=h.get("symbol-sort-key");if(this.features=[],E||T){for(var C=t.iconDependencies,L=t.glyphDependencies,R=t.availableImages,q=new Tt(this.zoom),Z=0,J=e;Z<J.length;Z+=1){var $=J[Z],ae=$.feature,pe=$.id,he=$.index,de=$.sourceLayerIndex,xe=l._featureFilter.needGeometry,Pe=br(ae,xe);if(l._featureFilter.filter(q,Pe,n)){xe||(Pe.geometry=hr(ae));var ze=void 0;if(E){var Ye=l.getValueAndResolveTokens("text-field",Pe,n,R),Be=Gr.factory(Ye);dw(Be)&&(this.hasRTLText=!0),(!this.hasRTLText||tc()==="unavailable"||this.hasRTLText&&Kn.isParsed())&&(ze=Z1(Be,l,Pe))}var tt=void 0;if(T){var Ne=l.getValueAndResolveTokens("icon-image",Pe,n,R);tt=Ne instanceof In?Ne:In.fromString(Ne)}if(ze||tt){var xt=this.sortFeaturesByKey?P.evaluate(Pe,{},n):void 0;if(this.features.push({id:pe,text:ze,icon:tt,index:he,sourceLayerIndex:de,geometry:Pe.geometry,properties:ae.properties,type:hw[ae.type],sortKey:xt}),tt&&(C[tt.name]=!0),ze){var lt=f.evaluate(Pe,{},n).join(","),$e=h.get("text-rotation-alignment")==="map"&&h.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(hi.vertical)>=0;for(var St=0,yt=ze.sections;St<yt.length;St+=1){var Dt=yt[St];if(Dt.image)C[Dt.image.name]=!0;else{var rt=Yu(ze.toString()),Ft=Dt.fontStack||lt,lr=L[Ft]=L[Ft]||{};this.calculateGlyphDependencies(Dt.text,lr,$e,this.allowVerticalPlacement,rt)}}}}}}h.get("symbol-placement")==="line"&&(this.features=function(yr){var fr={},ur={},vr=[],Ur=0;function Nr(ir){vr.push(yr[ir]),Ur++}function gn(ir,Ar,sn){var Bt=ur[ir];return delete ur[ir],ur[Ar]=Bt,vr[Bt].geometry[0].pop(),vr[Bt].geometry[0]=vr[Bt].geometry[0].concat(sn[0]),Bt}function $r(ir,Ar,sn){var Bt=fr[Ar];return delete fr[Ar],fr[ir]=Bt,vr[Bt].geometry[0].shift(),vr[Bt].geometry[0]=sn[0].concat(vr[Bt].geometry[0]),Bt}function _n(ir,Ar,sn){var Bt=sn?Ar[0][Ar[0].length-1]:Ar[0][0];return ir+":"+Bt.x+":"+Bt.y}for(var Sr=0;Sr<yr.length;Sr++){var Qr=yr[Sr],Pt=Qr.geometry,Kt=Qr.text?Qr.text.toString():null;if(Kt){var Zt=_n(Kt,Pt),Rt=_n(Kt,Pt,!0);if(Zt in ur&&Rt in fr&&ur[Zt]!==fr[Rt]){var An=$r(Zt,Rt,Pt),an=gn(Zt,Rt,vr[An].geometry);delete fr[Zt],delete ur[Rt],ur[_n(Kt,vr[an].geometry,!0)]=an,vr[An].geometry=null}else Zt in ur?gn(Zt,Rt,Pt):Rt in fr?$r(Zt,Rt,Pt):(Nr(Sr),fr[Zt]=Ur-1,ur[Rt]=Ur-1)}else Nr(Sr)}return vr.filter(function(ir){return ir.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(yr,fr){return yr.sortKey-fr.sortKey})}},Wt.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},Wt.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Wt.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Wt.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Wt.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Wt.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Wt.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(e.segment!==void 0){for(var l=e.dist(t[e.segment+1]),h=e.dist(t[e.segment]),f={},y=e.segment+1;y<t.length;y++)f[y]={x:t[y].x,y:t[y].y,tileUnitDistanceFromAnchor:l},y<t.length-1&&(l+=t[y+1].dist(t[y]));for(var w=e.segment||0;w>=0;w--)f[w]={x:t[w].x,y:t[w].y,tileUnitDistanceFromAnchor:h},w>0&&(h+=t[w-1].dist(t[w]));for(var E=0;E<t.length;E++){var T=f[E];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Wt.prototype.addSymbols=function(e,t,n,l,h,f,y,w,E,T,P,C){for(var L=e.indexArray,R=e.layoutVertexArray,q=e.segments.prepareSegment(4*t.length,R,L,this.canOverlap?f.sortKey:void 0),Z=this.glyphOffsetArray.length,J=q.vertexLength,$=this.allowVerticalPlacement&&y===hi.vertical?Math.PI/2:0,ae=f.text&&f.text.sections,pe=0;pe<t.length;pe++){var he=t[pe],de=he.tl,xe=he.tr,Pe=he.bl,ze=he.br,Ye=he.tex,Be=he.pixelOffsetTL,tt=he.pixelOffsetBR,Ne=he.minFontScaleX,xt=he.minFontScaleY,lt=he.glyphOffset,$e=he.isSDF,St=he.sectionIndex,yt=q.vertexLength,Dt=lt[1];bh(R,w.x,w.y,de.x,Dt+de.y,Ye.x,Ye.y,n,$e,Be.x,Be.y,Ne,xt),bh(R,w.x,w.y,xe.x,Dt+xe.y,Ye.x+Ye.w,Ye.y,n,$e,tt.x,Be.y,Ne,xt),bh(R,w.x,w.y,Pe.x,Dt+Pe.y,Ye.x,Ye.y+Ye.h,n,$e,Be.x,tt.y,Ne,xt),bh(R,w.x,w.y,ze.x,Dt+ze.y,Ye.x+Ye.w,Ye.y+Ye.h,n,$e,tt.x,tt.y,Ne,xt),Ld(e.dynamicLayoutVertexArray,w,$),L.emplaceBack(yt,yt+1,yt+2),L.emplaceBack(yt+1,yt+2,yt+3),q.vertexLength+=4,q.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(lt[0]),pe!==t.length-1&&St===t[pe+1].sectionIndex||e.programConfigurations.populatePaintArrays(R.length,f,f.index,{},C,ae&&ae[St])}e.placedSymbolArray.emplaceBack(w.x,w.y,Z,this.glyphOffsetArray.length-Z,J,E,T,w.segment,n?n[0]:0,n?n[1]:0,l[0],l[1],y,0,!1,0,P)},Wt.prototype._addCollisionDebugVertex=function(e,t,n,l,h,f){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,l,h,Math.round(f.x),Math.round(f.y))},Wt.prototype.addCollisionDebugVertices=function(e,t,n,l,h,f,y){var w=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),E=w.vertexLength,T=h.layoutVertexArray,P=h.collisionVertexArray,C=y.anchorX,L=y.anchorY;this._addCollisionDebugVertex(T,P,f,C,L,new le(e,t)),this._addCollisionDebugVertex(T,P,f,C,L,new le(n,t)),this._addCollisionDebugVertex(T,P,f,C,L,new le(n,l)),this._addCollisionDebugVertex(T,P,f,C,L,new le(e,l)),w.vertexLength+=4;var R=h.indexArray;R.emplaceBack(E,E+1),R.emplaceBack(E+1,E+2),R.emplaceBack(E+2,E+3),R.emplaceBack(E+3,E),w.primitiveLength+=4},Wt.prototype.addDebugCollisionBoxes=function(e,t,n,l){for(var h=e;h<t;h++){var f=this.collisionBoxArray.get(h);this.addCollisionDebugVertices(f.x1,f.y1,f.x2,f.y2,l?this.textCollisionBox:this.iconCollisionBox,f.anchorPoint,n)}},Wt.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vc(Da,bv.members,Ls),this.iconCollisionBox=new vc(Da,bv.members,Ls);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Wt.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,l,h,f,y,w,E){for(var T={},P=t;P<n;P++){var C=e.get(P);T.textBox={x1:C.x1,y1:C.y1,x2:C.x2,y2:C.y2,anchorPointX:C.anchorPointX,anchorPointY:C.anchorPointY},T.textFeatureIndex=C.featureIndex;break}for(var L=l;L<h;L++){var R=e.get(L);T.verticalTextBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},T.verticalTextFeatureIndex=R.featureIndex;break}for(var q=f;q<y;q++){var Z=e.get(q);T.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},T.iconFeatureIndex=Z.featureIndex;break}for(var J=w;J<E;J++){var $=e.get(J);T.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},T.verticalIconFeatureIndex=$.featureIndex;break}return T},Wt.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},Wt.prototype.hasTextData=function(){return this.text.segments.get().length>0},Wt.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Wt.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Wt.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Wt.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Wt.prototype.addIndicesForPlacedSymbol=function(e,t){for(var n=e.placedSymbolArray.get(t),l=n.vertexStartIndex+4*n.numGlyphs,h=n.vertexStartIndex;h<l;h+=4)e.indexArray.emplaceBack(h,h+1,h+2),e.indexArray.emplaceBack(h+1,h+2,h+3)},Wt.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),l=[],h=[],f=[],y=0;y<this.symbolInstances.length;++y){f.push(y);var w=this.symbolInstances.get(y);l.push(0|Math.round(t*w.anchorX+n*w.anchorY)),h.push(w.featureIndex)}return f.sort(function(E,T){return l[E]-l[T]||h[T]-h[E]}),f},Wt.prototype.addToSortKeyRanges=function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Wt.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,l=this.symbolInstanceIndexes;n<l.length;n+=1){var h=this.symbolInstances.get(l[n]);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach(function(f,y,w){f>=0&&w.indexOf(f)===y&&t.addIndicesForPlacedSymbol(t.text,f)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Xe("SymbolBucket",Wt,{omit:["layers","collisionBoxArray","features","compareText"]}),Wt.MAX_GLYPHS=65535,Wt.addDynamicAttributes=Ld;var mw=new nn({"symbol-placement":new Je(U.layout_symbol["symbol-placement"]),"symbol-spacing":new Je(U.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Je(U.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ke(U.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Je(U.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Je(U.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Je(U.layout_symbol["icon-ignore-placement"]),"icon-optional":new Je(U.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Je(U.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ke(U.layout_symbol["icon-size"]),"icon-text-fit":new Je(U.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Je(U.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ke(U.layout_symbol["icon-image"]),"icon-rotate":new Ke(U.layout_symbol["icon-rotate"]),"icon-padding":new Je(U.layout_symbol["icon-padding"]),"icon-keep-upright":new Je(U.layout_symbol["icon-keep-upright"]),"icon-offset":new Ke(U.layout_symbol["icon-offset"]),"icon-anchor":new Ke(U.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Je(U.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Je(U.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Je(U.layout_symbol["text-rotation-alignment"]),"text-field":new Ke(U.layout_symbol["text-field"]),"text-font":new Ke(U.layout_symbol["text-font"]),"text-size":new Ke(U.layout_symbol["text-size"]),"text-max-width":new Ke(U.layout_symbol["text-max-width"]),"text-line-height":new Je(U.layout_symbol["text-line-height"]),"text-letter-spacing":new Ke(U.layout_symbol["text-letter-spacing"]),"text-justify":new Ke(U.layout_symbol["text-justify"]),"text-radial-offset":new Ke(U.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Je(U.layout_symbol["text-variable-anchor"]),"text-anchor":new Ke(U.layout_symbol["text-anchor"]),"text-max-angle":new Je(U.layout_symbol["text-max-angle"]),"text-writing-mode":new Je(U.layout_symbol["text-writing-mode"]),"text-rotate":new Ke(U.layout_symbol["text-rotate"]),"text-padding":new Je(U.layout_symbol["text-padding"]),"text-keep-upright":new Je(U.layout_symbol["text-keep-upright"]),"text-transform":new Ke(U.layout_symbol["text-transform"]),"text-offset":new Ke(U.layout_symbol["text-offset"]),"text-allow-overlap":new Je(U.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Je(U.layout_symbol["text-ignore-placement"]),"text-optional":new Je(U.layout_symbol["text-optional"])}),Rd={paint:new nn({"icon-opacity":new Ke(U.paint_symbol["icon-opacity"]),"icon-color":new Ke(U.paint_symbol["icon-color"]),"icon-halo-color":new Ke(U.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ke(U.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ke(U.paint_symbol["icon-halo-blur"]),"icon-translate":new Je(U.paint_symbol["icon-translate"]),"icon-translate-anchor":new Je(U.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ke(U.paint_symbol["text-opacity"]),"text-color":new Ke(U.paint_symbol["text-color"],{runtimeType:Re,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new Ke(U.paint_symbol["text-halo-color"]),"text-halo-width":new Ke(U.paint_symbol["text-halo-width"]),"text-halo-blur":new Ke(U.paint_symbol["text-halo-blur"]),"text-translate":new Je(U.paint_symbol["text-translate"]),"text-translate-anchor":new Je(U.paint_symbol["text-translate-anchor"])}),layout:mw},Zl=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:We,this.defaultValue=e};Zl.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Zl.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Zl.prototype.outputDefined=function(){return!1},Zl.prototype.serialize=function(){return null},Xe("FormatSectionOverride",Zl,{omit:["defaultValue"]});var yw=function(e){function t(n){e.call(this,n,Rd)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(n,l){if(e.prototype.recalculate.call(this,n,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var h=this.layout.get("text-writing-mode");if(h){for(var f=[],y=0,w=h;y<w.length;y+=1){var E=w[y];f.indexOf(E)<0&&f.push(E)}this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(n,l,h,f){var y=this.layout.get(n).evaluate(l,{},h,f),w=this._unevaluatedLayout._values[n];return w.isDataDriven()||bs(w.value)||!y?y:function(E,T){return T.replace(/{([^{}]+)}/g,function(P,C){return C in E?String(E[C]):""})}(l.properties,y)},t.prototype.createBucket=function(n){return new Wt(n)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var n=0,l=Rd.paint.overridableProperties;n<l.length;n+=1){var h=l[n];if(t.hasPaintOverride(this.layout,h)){var f,y=this.paint.get(h),w=new Zl(y),E=new Ia(w,y.property.specification);f=y.value.kind==="constant"||y.value.kind==="source"?new Ss("source",E):new Pa("composite",E,y.value.zoomStops,y.value._interpolationType),this.paint._values[h]=new dn(y.property,f,y.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(n,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&t.hasPaintOverride(this.layout,n)},t.hasPaintOverride=function(n,l){var h=n.get("text-field"),f=Rd.paint.properties[l],y=!1,w=function(P){for(var C=0,L=P;C<L.length;C+=1)if(f.overrides&&f.overrides.hasOverride(L[C]))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Gr)w(h.value.value.sections);else if(h.value.kind==="source"){var E=function(P){y||(P instanceof hn&&wr(P.value)===Xt?w(P.value.sections):P instanceof Si?w(P.sections):P.eachChild(E))},T=h.value;T._styleExpression&&E(T._styleExpression.expression)}return y},t}(Ri),vw={paint:new nn({"background-color":new Je(U.paint_background["background-color"]),"background-pattern":new mn(U.paint_background["background-pattern"]),"background-opacity":new Je(U.paint_background["background-opacity"])})},gw=function(e){function t(n){e.call(this,n,vw)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Ri),_w={paint:new nn({"raster-opacity":new Je(U.paint_raster["raster-opacity"]),"raster-hue-rotate":new Je(U.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Je(U.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Je(U.paint_raster["raster-brightness-max"]),"raster-saturation":new Je(U.paint_raster["raster-saturation"]),"raster-contrast":new Je(U.paint_raster["raster-contrast"]),"raster-resampling":new Je(U.paint_raster["raster-resampling"]),"raster-fade-duration":new Je(U.paint_raster["raster-fade-duration"])})},xw=function(e){function t(n){e.call(this,n,_w)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Ri),ww=function(e){function t(n){e.call(this,n,{}),this.implementation=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},t.prototype.onRemove=function(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},t}(Ri),bw={circle:_d,heatmap:o1,hillshade:s1,fill:E1,"fill-extrusion":D1,line:U1,symbol:yw,background:gw,raster:xw},Gv=ee.HTMLImageElement,Wv=ee.HTMLCanvasElement,Xv=ee.HTMLVideoElement,Hv=ee.ImageData,Sh=ee.ImageBitmap,Ns=function(e,t,n,l){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,l)};Ns.prototype.update=function(e,t,n){var l=e.width,h=e.height,f=!(this.size&&this.size[0]===l&&this.size[1]===h||n),y=this.context,w=y.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),w.bindTexture(w.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!t||t.premultiply!==!1)),f)this.size=[l,h],e instanceof Gv||e instanceof Wv||e instanceof Xv||e instanceof Hv||Sh&&e instanceof Sh?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,e):w.texImage2D(w.TEXTURE_2D,0,this.format,l,h,0,this.format,w.UNSIGNED_BYTE,e.data);else{var E=n||{x:0,y:0},T=E.x,P=E.y;e instanceof Gv||e instanceof Wv||e instanceof Xv||e instanceof Hv||Sh&&e instanceof Sh?w.texSubImage2D(w.TEXTURE_2D,0,T,P,w.RGBA,w.UNSIGNED_BYTE,e):w.texSubImage2D(w.TEXTURE_2D,0,T,P,l,h,w.RGBA,w.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&w.generateMipmap(w.TEXTURE_2D)},Ns.prototype.bind=function(e,t,n){var l=this.context.gl;l.bindTexture(l.TEXTURE_2D,this.texture),n!==l.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=l.LINEAR),e!==this.filter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,t),this.wrap=t)},Ns.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ns.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Od=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Od.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Od.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Gl=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ut(["receive","process"],this),this.invoker=new Od(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=nr()?e:ee};function Kv(e,t,n){var l=2*Math.PI*6378137/256/Math.pow(2,n);return[e*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}Gl.prototype.send=function(e,t,n,l,h){var f=this;h===void 0&&(h=!1);var y=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[y]=n);var w=cn(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:e,hasCallback:!!n,targetMapId:l,mustQueue:h,sourceMapId:this.mapId,data:Ti(t,w)},w),{cancel:function(){n&&delete f.callbacks[y],f.target.postMessage({id:y,type:"<cancel>",targetMapId:l,sourceMapId:f.mapId})}}},Gl.prototype.receive=function(e){var t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[n];var l=this.cancelCallbacks[n];delete this.cancelCallbacks[n],l&&l()}else nr()||t.mustQueue?(this.tasks[n]=t,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,t)},Gl.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},Gl.prototype.processTask=function(e,t){var n=this;if(t.type==="<response>"){var l=this.callbacks[e];delete this.callbacks[e],l&&(t.error?l(Fn(t.error)):l(null,Fn(t.data)))}else{var h=!1,f=cn(this.globalScope)?void 0:[],y=t.hasCallback?function(P,C){h=!0,delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:P?Ti(P):null,data:Ti(C,f)},f)}:function(P){h=!0},w=null,E=Fn(t.data);if(this.parent[t.type])w=this.parent[t.type](t.sourceMapId,E,y);else if(this.parent.getWorkerSource){var T=t.type.split(".");w=this.parent.getWorkerSource(t.sourceMapId,T[0],E.source)[T[1]](E,y)}else y(new Error("Could not find function "+t.type));!h&&w&&w.cancel&&(this.cancelCallbacks[e]=w.cancel)}},Gl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Rr=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Rr.prototype.setNorthEast=function(e){return this._ne=e instanceof sr?new sr(e.lng,e.lat):sr.convert(e),this},Rr.prototype.setSouthWest=function(e){return this._sw=e instanceof sr?new sr(e.lng,e.lat):sr.convert(e),this},Rr.prototype.extend=function(e){var t,n,l=this._sw,h=this._ne;if(e instanceof sr)t=e,n=e;else{if(!(e instanceof Rr))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Rr.convert(e)):this.extend(sr.convert(e)):this;if(n=e._ne,!(t=e._sw)||!n)return this}return l||h?(l.lng=Math.min(t.lng,l.lng),l.lat=Math.min(t.lat,l.lat),h.lng=Math.max(n.lng,h.lng),h.lat=Math.max(n.lat,h.lat)):(this._sw=new sr(t.lng,t.lat),this._ne=new sr(n.lng,n.lat)),this},Rr.prototype.getCenter=function(){return new sr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Rr.prototype.getSouthWest=function(){return this._sw},Rr.prototype.getNorthEast=function(){return this._ne},Rr.prototype.getNorthWest=function(){return new sr(this.getWest(),this.getNorth())},Rr.prototype.getSouthEast=function(){return new sr(this.getEast(),this.getSouth())},Rr.prototype.getWest=function(){return this._sw.lng},Rr.prototype.getSouth=function(){return this._sw.lat},Rr.prototype.getEast=function(){return this._ne.lng},Rr.prototype.getNorth=function(){return this._ne.lat},Rr.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Rr.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Rr.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Rr.prototype.contains=function(e){var t=sr.convert(e),n=t.lng,l=t.lat,h=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&h},Rr.convert=function(e){return!e||e instanceof Rr?e:new Rr(e)};var sr=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};sr.prototype.wrap=function(){return new sr(ne(this.lng,-180,180),this.lat)},sr.prototype.toArray=function(){return[this.lng,this.lat]},sr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},sr.prototype.distanceTo=function(e){var t=Math.PI/180,n=this.lat*t,l=e.lat*t,h=Math.sin(n)*Math.sin(l)+Math.cos(n)*Math.cos(l)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(h,1))},sr.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new Rr(new sr(this.lng-n,this.lat-t),new sr(this.lng+n,this.lat+t))},sr.convert=function(e){if(e instanceof sr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new sr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new sr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var $v=2*Math.PI*63710088e-1;function Qv(e){return $v*Math.cos(e*Math.PI/180)}function Yv(e){return(180+e)/360}function Jv(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function eg(e,t){return e/Qv(t)}function Fd(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var Vs=function(e,t,n){n===void 0&&(n=0),this.x=+e,this.y=+t,this.z=+n};Vs.fromLngLat=function(e,t){t===void 0&&(t=0);var n=sr.convert(e);return new Vs(Yv(n.lng),Jv(n.lat),eg(t,n.lat))},Vs.prototype.toLngLat=function(){return new sr(360*this.x-180,Fd(this.y))},Vs.prototype.toAltitude=function(){return this.z*Qv(Fd(this.y))},Vs.prototype.meterInMercatorCoordinateUnits=function(){return 1/$v*(e=Fd(this.y),1/Math.cos(e*Math.PI/180));var e};var js=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=gc(0,e,e,t,n)};js.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},js.prototype.url=function(e,t){var n,l,h,f,y,w=(l=this.y,h=this.z,f=Kv(256*(n=this.x),256*(l=Math.pow(2,h)-l-1),h),y=Kv(256*(n+1),256*(l+1),h),f[0]+","+f[1]+","+y[0]+","+y[1]),E=function(T,P,C){for(var L,R="",q=T;q>0;q--)R+=(P&(L=1<<q-1)?1:0)+(C&L?2:0);return R}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",E).replace("{bbox-epsg-3857}",w)},js.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new le(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},js.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var tg=function(e,t){this.wrap=e,this.canonical=t,this.key=gc(e,t.z,t.z,t.x,t.y)},Or=function(e,t,n,l,h){this.overscaledZ=e,this.wrap=t,this.canonical=new js(n,+l,+h),this.key=gc(t,e,n,l,h)};function gc(e,t,n,l,h){(e*=2)<0&&(e=-1*e-1);var f=1<<n;return(f*f*e+f*h+l).toString(36)+n.toString(36)+t.toString(36)}Or.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Or.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Or(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Or(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Or.prototype.calculateScaledKey=function(e,t){var n=this.canonical.z-e;return e>this.canonical.z?gc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):gc(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)},Or.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Or.prototype.children=function(e){if(this.overscaledZ>=e)return[new Or(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,l=2*this.canonical.y;return[new Or(t,this.wrap,t,n,l),new Or(t,this.wrap,t,n+1,l),new Or(t,this.wrap,t,n,l+1),new Or(t,this.wrap,t,n+1,l+1)]},Or.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Or.prototype.wrapped=function(){return new Or(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Or.prototype.unwrapTo=function(e){return new Or(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Or.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Or.prototype.toUnwrapped=function(){return new tg(this.wrap,this.canonical)},Or.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Or.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Vs(e.x-this.wrap,e.y))},Xe("CanonicalTileID",js),Xe("OverscaledTileID",Or,{omit:["posMatrix"]});var aa=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&n!=="mapbox"&&n!=="terrarium")return gt('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var l=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox";for(var h=0;h<l;h++)this.data[this._idx(-1,h)]=this.data[this._idx(0,h)],this.data[this._idx(l,h)]=this.data[this._idx(l-1,h)],this.data[this._idx(h,-1)]=this.data[this._idx(h,0)],this.data[this._idx(h,l)]=this.data[this._idx(h,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)]};aa.prototype.get=function(e,t){var n=new Uint8Array(this.data.buffer),l=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(n[l],n[l+1],n[l+2])},aa.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},aa.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},aa.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},aa.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},aa.prototype.getPixels=function(){return new jn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},aa.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var l=t*this.dim,h=t*this.dim+this.dim,f=n*this.dim,y=n*this.dim+this.dim;switch(t){case-1:l=h-1;break;case 1:h=l+1}switch(n){case-1:f=y-1;break;case 1:y=f+1}for(var w=-t*this.dim,E=-n*this.dim,T=f;T<y;T++)for(var P=l;P<h;P++)this.data[this._idx(P,T)]=e.data[this._idx(P+w,T+E)]},Xe("DEMData",aa);var Eh=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};Eh.prototype.encode=function(e){return this._stringToNumber[e]},Eh.prototype.decode=function(e){return this._numberToString[e]};var Th=function(e,t,n,l,h){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=l,this.properties=e.properties,this.id=h},Bd={geometry:{configurable:!0}};Bd.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Bd.geometry.set=function(e){this._geometry=e},Th.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(Th.prototype,Bd);var Wl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Wl.prototype.updateState=function(e,t,n){var l=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},oe(this.stateChanges[e][l],n),this.deletedStates[e]===null)for(var h in this.deletedStates[e]={},this.state[e])h!==l&&(this.deletedStates[e][h]=null);else if(this.deletedStates[e]&&this.deletedStates[e][l]===null)for(var f in this.deletedStates[e][l]={},this.state[e][l])n[f]||(this.deletedStates[e][l][f]=null);else for(var y in n)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][y]===null&&delete this.deletedStates[e][l][y]},Wl.prototype.removeFeatureState=function(e,t,n){if(this.deletedStates[e]!==null){var l=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&t!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][n]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(n in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][n]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}},Wl.prototype.getState=function(e,t){var n=String(t),l=oe({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var h=this.deletedStates[e][t];if(h===null)return{};for(var f in h)delete l[f]}return l},Wl.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},Wl.prototype.coalesceChanges=function(e,t){var n={};for(var l in this.stateChanges){this.state[l]=this.state[l]||{};var h={};for(var f in this.stateChanges[l])this.state[l][f]||(this.state[l][f]={}),oe(this.state[l][f],this.stateChanges[l][f]),h[f]=this.state[l][f];n[l]=h}for(var y in this.deletedStates){this.state[y]=this.state[y]||{};var w={};if(this.deletedStates[y]===null)for(var E in this.state[y])w[E]={},this.state[y][E]={};else for(var T in this.deletedStates[y]){if(this.deletedStates[y][T]===null)this.state[y][T]={};else for(var P=0,C=Object.keys(this.deletedStates[y][T]);P<C.length;P+=1)delete this.state[y][T][C[P]];w[T]=this.state[y][T]}n[y]=n[y]||{},oe(n[y],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(n).length!==0)for(var L in e)e[L].setFeatureState(n,t)};var sa=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Ki(8192,16,0),this.grid3D=new Ki(8192,16,0),this.featureIndexArray=new A,this.promoteId=t};function rg(e,t,n,l,h){return Qe(e,function(f,y){var w=t instanceof Ms?t.get(y):null;return w&&w.evaluate?w.evaluate(n,l,h):w})}function ng(e){for(var t=1/0,n=1/0,l=-1/0,h=-1/0,f=0,y=e;f<y.length;f+=1){var w=y[f];t=Math.min(t,w.x),n=Math.min(n,w.y),l=Math.max(l,w.x),h=Math.max(h,w.y)}return{minX:t,minY:n,maxX:l,maxY:h}}function Sw(e,t){return t-e}sa.prototype.insert=function(e,t,n,l,h,f){var y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,l,h);for(var w=f?this.grid3D:this.grid,E=0;E<t.length;E++){for(var T=t[E],P=[1/0,1/0,-1/0,-1/0],C=0;C<T.length;C++){var L=T[C];P[0]=Math.min(P[0],L.x),P[1]=Math.min(P[1],L.y),P[2]=Math.max(P[2],L.x),P[3]=Math.max(P[3],L.y)}P[0]<8192&&P[1]<8192&&P[2]>=0&&P[3]>=0&&w.insert(y,P[0],P[1],P[2],P[3])}},sa.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ol.VectorTile(new fh(this.rawTileData)).layers,this.sourceLayerCoder=new Eh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},sa.prototype.query=function(e,t,n,l){var h=this;this.loadVTLayers();for(var f=e.params||{},y=8192/e.tileSize/e.scale,w=_l(f.filter),E=e.queryGeometry,T=e.queryPadding*y,P=ng(E),C=this.grid.query(P.minX-T,P.minY-T,P.maxX+T,P.maxY+T),L=ng(e.cameraQueryGeometry),R=this.grid3D.query(L.minX-T,L.minY-T,L.maxX+T,L.maxY+T,function(he,de,xe,Pe){return function(ze,Ye,Be,tt,Ne){for(var xt=0,lt=ze;xt<lt.length;xt+=1){var $e=lt[xt];if(Ye<=$e.x&&Be<=$e.y&&tt>=$e.x&&Ne>=$e.y)return!0}var St=[new le(Ye,Be),new le(Ye,Ne),new le(tt,Ne),new le(tt,Be)];if(ze.length>2){for(var yt=0,Dt=St;yt<Dt.length;yt+=1)if(Fi(ze,Dt[yt]))return!0}for(var rt=0;rt<ze.length-1;rt++)if(Fs(ze[rt],ze[rt+1],St))return!0;return!1}(e.cameraQueryGeometry,he-T,de-T,xe+T,Pe+T)}),q=0,Z=R;q<Z.length;q+=1)C.push(Z[q]);C.sort(Sw);for(var J,$={},ae=function(he){var de=C[he];if(de!==J){J=de;var xe=h.featureIndexArray.get(de),Pe=null;h.loadMatchingFeature($,xe.bucketIndex,xe.sourceLayerIndex,xe.featureIndex,w,f.layers,f.availableImages,t,n,l,function(ze,Ye,Be){return Pe||(Pe=hr(ze)),Ye.queryIntersectsFeature(E,ze,Be,Pe,h.z,e.transform,y,e.pixelPosMatrix)})}},pe=0;pe<C.length;pe++)ae(pe);return $},sa.prototype.loadMatchingFeature=function(e,t,n,l,h,f,y,w,E,T,P){var C=this.bucketLayerIDs[t];if(!f||function(ze,Ye){for(var Be=0;Be<ze.length;Be++)if(Ye.indexOf(ze[Be])>=0)return!0;return!1}(f,C)){var L=this.sourceLayerCoder.decode(n),R=this.vtLayers[L].feature(l);if(h.needGeometry){var q=br(R,!0);if(!h.filter(new Tt(this.tileID.overscaledZ),q,this.tileID.canonical))return}else if(!h.filter(new Tt(this.tileID.overscaledZ),R))return;for(var Z=this.getId(R,L),J=0;J<C.length;J++){var $=C[J];if(!(f&&f.indexOf($)<0)){var ae=w[$];if(ae){var pe={};Z!==void 0&&T&&(pe=T.getState(ae.sourceLayer||"_geojsonTileLayer",Z));var he=oe({},E[$]);he.paint=rg(he.paint,ae.paint,R,pe,y),he.layout=rg(he.layout,ae.layout,R,pe,y);var de=!P||P(R,ae,pe);if(de){var xe=new Th(R,this.z,this.x,this.y,Z);xe.layer=he;var Pe=e[$];Pe===void 0&&(Pe=e[$]=[]),Pe.push({featureIndex:l,feature:xe,intersectionZ:de})}}}}}},sa.prototype.lookupSymbolFeatures=function(e,t,n,l,h,f,y,w){var E={};this.loadVTLayers();for(var T=_l(h),P=0,C=e;P<C.length;P+=1)this.loadMatchingFeature(E,n,l,C[P],T,f,y,w,t);return E},sa.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var l=0,h=n[t];l<h.length;l+=1)if(e===h[l])return!0;return!1},sa.prototype.getId=function(e,t){var n=e.id;return this.promoteId&&typeof(n=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(n=Number(n)),n},Xe("FeatureIndex",sa,{omit:["rawTileData","sourceLayerCoder"]});var Kr=function(e,t){this.tileID=e,this.uid=we(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Kr.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<Sn.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Kr.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Kr.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var l in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(T,P){var C={};if(!P)return C;for(var L=function(){var Z=q[R],J=Z.layerIds.map(function(pe){return P.getLayer(pe)}).filter(Boolean);if(J.length!==0){Z.layers=J,Z.stateDependentLayerIds&&(Z.stateDependentLayers=Z.stateDependentLayerIds.map(function(pe){return J.filter(function(he){return he.id===pe})[0]}));for(var $=0,ae=J;$<ae.length;$+=1)C[ae[$].id]=Z}},R=0,q=T;R<q.length;R+=1)L();return C}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var h=this.buckets[l];if(h instanceof Wt){if(this.hasSymbolBuckets=!0,!n)break;h.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var f in this.buckets){var y=this.buckets[f];if(y instanceof Wt&&y.hasRTLText){this.hasRTLText=!0,Kn.isLoading()||Kn.isLoaded()||tc()!=="deferred"||Ii();break}}for(var w in this.queryPadding=0,this.buckets){var E=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(w).queryRadius(E))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},Kr.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Kr.prototype.getBucket=function(e){return this.buckets[e.id]},Kr.prototype.upload=function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var l=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ns(e,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ns(e,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)},Kr.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Kr.prototype.queryRenderedFeatures=function(e,t,n,l,h,f,y,w,E,T){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:h,scale:f,tileSize:this.tileSize,pixelPosMatrix:T,transform:w,params:y,queryPadding:this.queryPadding*E},e,t,n):{}},Kr.prototype.querySourceFeatures=function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var l=n.loadVTLayers(),h=t?t.sourceLayer:"",f=l._geojsonTileLayer||l[h];if(f)for(var y=_l(t&&t.filter),w=this.tileID.canonical,E=w.z,T=w.x,P=w.y,C={z:E,x:T,y:P},L=0;L<f.length;L++){var R=f.feature(L);if(y.needGeometry){var q=br(R,!0);if(!y.filter(new Tt(this.tileID.overscaledZ),q,this.tileID.canonical))continue}else if(!y.filter(new Tt(this.tileID.overscaledZ),R))continue;var Z=n.getId(R,h),J=new Th(R,E,T,P,Z);J.tile=C,e.push(J)}}},Kr.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Kr.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Kr.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=un(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var l=Date.now(),h=!1;if(this.expirationTime>l)h=!1;else if(t)if(this.expirationTime<t)h=!0;else{var f=this.expirationTime-t;f?this.expirationTime=l+Math.max(f,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Kr.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Kr.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var n=this.latestFeatureIndex.loadVTLayers();for(var l in this.buckets)if(t.style.hasLayer(l)){var h=this.buckets[l],f=h.layers[0].sourceLayer||"_geojsonTileLayer",y=n[f],w=e[f];if(y&&w&&Object.keys(w).length!==0){h.update(w,y,this.imageAtlas&&this.imageAtlas.patternPositions||{});var E=t&&t.style&&t.style.getLayer(l);E&&(this.queryPadding=Math.max(this.queryPadding,E.queryRadius(h)))}}}},Kr.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Kr.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Sn.now()},Kr.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Kr.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=Sn.now()+e},Kr.prototype.setDependencies=function(e,t){for(var n={},l=0,h=t;l<h.length;l+=1)n[h[l]]=!0;this.dependencies[e]=n},Kr.prototype.hasDependency=function(e,t){for(var n=0,l=e;n<l.length;n+=1){var h=this.dependencies[l[n]];if(h){for(var f=0,y=t;f<y.length;f+=1)if(h[y[f]])return!0}}return!1};var Ba=ee.performance,ig=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Ba.mark(this._marks.start)};ig.prototype.finish=function(){Ba.mark(this._marks.end);var e=Ba.getEntriesByName(this._marks.measure);return e.length===0&&(Ba.measure(this._marks.measure,this._marks.start,this._marks.end),e=Ba.getEntriesByName(this._marks.measure),Ba.clearMarks(this._marks.start),Ba.clearMarks(this._marks.end),Ba.clearMeasures(this._marks.measure)),e},u.Actor=Gl,u.AlphaImage=Us,u.CanonicalTileID=js,u.CollisionBoxArray=s,u.Color=Nt,u.DEMData=aa,u.DataConstantProperty=Je,u.DictionaryCoder=Eh,u.EXTENT=8192,u.ErrorEvent=te,u.EvaluationParameters=Tt,u.Event=X,u.Evented=ie,u.FeatureIndex=sa,u.FillBucket=Ji,u.FillExtrusionBucket=eo,u.ImageAtlas=yc,u.ImagePosition=mh,u.LineBucket=kn,u.LngLat=sr,u.LngLatBounds=Rr,u.MercatorCoordinate=Vs,u.ONE_EM=24,u.OverscaledTileID=Or,u.Point=le,u.Point$1=le,u.Properties=nn,u.Protobuf=fh,u.RGBAImage=jn,u.RequestManager=En,u.RequestPerformance=ig,u.ResourceType=cl,u.SegmentVector=B,u.SourceFeatureState=Wl,u.StructArrayLayout1ui2=sc,u.StructArrayLayout2f1f2i16=ra,u.StructArrayLayout2i4=ta,u.StructArrayLayout3ui6=go,u.StructArrayLayout4i8=nc,u.SymbolBucket=Wt,u.Texture=Ns,u.Tile=Kr,u.Transitionable=rn,u.Uniform1f=Ae,u.Uniform1i=be,u.Uniform2f=ke,u.Uniform3f=je,u.Uniform4f=et,u.UniformColor=it,u.UniformMatrix4f=Lt,u.UnwrappedTileID=tg,u.ValidationError=H,u.WritingMode=hi,u.ZoomHistory=Qu,u.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},u.addDynamicAttributes=Ld,u.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var l=e.length,h=new Array(e.length),f=null;e.forEach(function(y,w){t(y,function(E,T){E&&(f=E),h[w]=T,--l==0&&n(f,h)})})},u.bezier=Oe,u.bindAll=ut,u.browser=Sn,u.cacheEntryPossiblyAdded=function(e){++hs>ul&&(e.getActor().send("enforceCacheSizeLimit",xa),hs=0)},u.clamp=se,u.clearTileCache=function(e){var t=ee.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},u.clipLine=Uv,u.clone=function(e){var t=new Vt(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},u.clone$1=Jr,u.clone$2=function(e){var t=new Vt(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},u.collisionCircleLayout=q1,u.config=Ot,u.create=function(){var e=new Vt(16);return Vt!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},u.create$1=function(){var e=new Vt(9);return Vt!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},u.create$2=function(){var e=new Vt(4);return Vt!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},u.createCommonjsModule=z,u.createExpression=vl,u.createLayout=Xr,u.createStyleLayer=function(e){return e.type==="custom"?new ww(e):new bw[e.type](e)},u.cross=function(e,t,n){var l=t[0],h=t[1],f=t[2],y=n[0],w=n[1],E=n[2];return e[0]=h*E-f*w,e[1]=f*y-l*E,e[2]=l*w-h*y,e},u.deepEqual=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],n[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&n!==null){if(typeof n!="object"||Object.keys(t).length!==Object.keys(n).length)return!1;for(var h in t)if(!e(t[h],n[h]))return!1;return!0}return t===n},u.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},u.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},u.ease=Ze,u.emitValidationErrors=ks,u.endsWith=mt,u.enforceCacheSizeLimit=function(e){wa(),ii&&ii.then(function(t){t.keys().then(function(n){for(var l=0;l<n.length-e;l++)t.delete(n[l])})})},u.evaluateSizeForFeature=Dv,u.evaluateSizeForZoom=Lv,u.evaluateVariableOffset=jv,u.evented=ec,u.extend=oe,u.featureFilter=_l,u.filterObject=Qt,u.fromRotation=function(e,t){var n=Math.sin(t),l=Math.cos(t);return e[0]=l,e[1]=n,e[2]=0,e[3]=-n,e[4]=l,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},u.getAnchorAlignment=Ad,u.getAnchorJustification=Dd,u.getArrayBuffer=ds,u.getImage=D,u.getJSON=function(e,t){return ba(oe(e,{type:"json"}),t)},u.getRTLTextPluginStatus=tc,u.getReferrer=Uo,u.getVideo=function(e,t){var n,l,h=ee.document.createElement("video");h.muted=!0,h.onloadstart=function(){t(null,h)};for(var f=0;f<e.length;f++){var y=ee.document.createElement("source");n=e[f],l=void 0,(l=ee.document.createElement("a")).href=n,(l.protocol!==ee.document.location.protocol||l.host!==ee.document.location.host)&&(h.crossOrigin="Anonymous"),y.src=e[f],h.appendChild(y)}return{cancel:function(){}}},u.identity=$n,u.invert=function(e,t){var n=t[0],l=t[1],h=t[2],f=t[3],y=t[4],w=t[5],E=t[6],T=t[7],P=t[8],C=t[9],L=t[10],R=t[11],q=t[12],Z=t[13],J=t[14],$=t[15],ae=n*w-l*y,pe=n*E-h*y,he=n*T-f*y,de=l*E-h*w,xe=l*T-f*w,Pe=h*T-f*E,ze=P*Z-C*q,Ye=P*J-L*q,Be=P*$-R*q,tt=C*J-L*Z,Ne=C*$-R*Z,xt=L*$-R*J,lt=ae*xt-pe*Ne+he*tt+de*Be-xe*Ye+Pe*ze;return lt?(e[0]=(w*xt-E*Ne+T*tt)*(lt=1/lt),e[1]=(h*Ne-l*xt-f*tt)*lt,e[2]=(Z*Pe-J*xe+$*de)*lt,e[3]=(L*xe-C*Pe-R*de)*lt,e[4]=(E*Be-y*xt-T*Ye)*lt,e[5]=(n*xt-h*Be+f*Ye)*lt,e[6]=(J*he-q*Pe-$*pe)*lt,e[7]=(P*Pe-L*he+R*pe)*lt,e[8]=(y*Ne-w*Be+T*ze)*lt,e[9]=(l*Be-n*Ne-f*ze)*lt,e[10]=(q*xe-Z*he+$*ae)*lt,e[11]=(C*he-P*xe-R*ae)*lt,e[12]=(w*Ye-y*tt-E*ze)*lt,e[13]=(n*tt-l*Ye+h*ze)*lt,e[14]=(Z*pe-q*de-J*ae)*lt,e[15]=(P*de-C*pe+L*ae)*lt,e):null},u.isChar=De,u.isMapboxURL=ti,u.keysDifference=function(e,t){var n=[];for(var l in e)l in t||n.push(l);return n},u.makeRequest=ba,u.mapObject=Qe,u.mercatorXfromLng=Yv,u.mercatorYfromLat=Jv,u.mercatorZfromAltitude=eg,u.mul=gd,u.multiply=Cn,u.mvt=Ol,u.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},u.normalize=function(e,t){var n=t[0],l=t[1],h=t[2],f=n*n+l*l+h*h;return f>0&&(f=1/Math.sqrt(f)),e[0]=t[0]*f,e[1]=t[1]*f,e[2]=t[2]*f,e},u.number=Cr,u.offscreenCanvasSupported=fs,u.ortho=function(e,t,n,l,h,f,y){var w=1/(t-n),E=1/(l-h),T=1/(f-y);return e[0]=-2*w,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*E,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*T,e[11]=0,e[12]=(t+n)*w,e[13]=(h+l)*E,e[14]=(y+f)*T,e[15]=1,e},u.parseGlyphPBF=function(e){return new fh(e).readFields(ew,[])},u.pbf=fh,u.performSymbolLayout=function(e,t,n,l,h,f,y){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var w=e.layers[0].layout,E=e.layers[0]._unevaluatedLayout._values,T={};if(e.textSizeData.kind==="composite"){var P=e.textSizeData,C=P.maxZoom;T.compositeTextSizes=[E["text-size"].possiblyEvaluate(new Tt(P.minZoom),y),E["text-size"].possiblyEvaluate(new Tt(C),y)]}if(e.iconSizeData.kind==="composite"){var L=e.iconSizeData,R=L.maxZoom;T.compositeIconSizes=[E["icon-size"].possiblyEvaluate(new Tt(L.minZoom),y),E["icon-size"].possiblyEvaluate(new Tt(R),y)]}T.layoutTextSize=E["text-size"].possiblyEvaluate(new Tt(e.zoom+1),y),T.layoutIconSize=E["icon-size"].possiblyEvaluate(new Tt(e.zoom+1),y),T.textMaxSize=E["text-size"].possiblyEvaluate(new Tt(18));for(var q=24*w.get("text-line-height"),Z=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point",J=w.get("text-keep-upright"),$=w.get("text-size"),ae=function(){var de=he[pe],xe=w.get("text-font").evaluate(de,{},y).join(","),Pe=$.evaluate(de,{},y),ze=T.layoutTextSize.evaluate(de,{},y),Ye=T.layoutIconSize.evaluate(de,{},y),Be={horizontal:{},vertical:void 0},tt=de.text,Ne=[0,0];if(tt){var xt=tt.toString(),lt=24*w.get("text-letter-spacing").evaluate(de,{},y),$e=function(Pt){for(var Kt=0,Zt=Pt;Kt<Zt.length;Kt+=1)if(Rt=Zt[Kt].charCodeAt(0),De.Arabic(Rt)||De["Arabic Supplement"](Rt)||De["Arabic Extended-A"](Rt)||De["Arabic Presentation Forms-A"](Rt)||De["Arabic Presentation Forms-B"](Rt))return!1;var Rt;return!0}(xt)?lt:0,St=w.get("text-anchor").evaluate(de,{},y),yt=w.get("text-variable-anchor");if(!yt){var Dt=w.get("text-radial-offset").evaluate(de,{},y);Ne=Dt?jv(St,[24*Dt,Md]):w.get("text-offset").evaluate(de,{},y).map(function(Pt){return 24*Pt})}var rt=Z?"center":w.get("text-justify").evaluate(de,{},y),Ft=w.get("symbol-placement"),lr=Ft==="point"?24*w.get("text-max-width").evaluate(de,{},y):0,yr=function(){e.allowVerticalPlacement&&Yu(xt)&&(Be.vertical=yh(tt,t,n,h,xe,lr,q,St,"left",$e,Ne,hi.vertical,!0,Ft,ze,Pe))};if(!Z&&yt){for(var fr=rt==="auto"?yt.map(function(Pt){return Dd(Pt)}):[rt],ur=!1,vr=0;vr<fr.length;vr++){var Ur=fr[vr];if(!Be.horizontal[Ur])if(ur)Be.horizontal[Ur]=Be.horizontal[0];else{var Nr=yh(tt,t,n,h,xe,lr,q,"center",Ur,$e,Ne,hi.horizontal,!1,Ft,ze,Pe);Nr&&(Be.horizontal[Ur]=Nr,ur=Nr.positionedLines.length===1)}}yr()}else{rt==="auto"&&(rt=Dd(St));var gn=yh(tt,t,n,h,xe,lr,q,St,rt,$e,Ne,hi.horizontal,!1,Ft,ze,Pe);gn&&(Be.horizontal[rt]=gn),yr(),Yu(xt)&&Z&&J&&(Be.vertical=yh(tt,t,n,h,xe,lr,q,St,rt,$e,Ne,hi.vertical,!1,Ft,ze,Pe))}}var $r=void 0,_n=!1;if(de.icon&&de.icon.name){var Sr=l[de.icon.name];Sr&&($r=function(Pt,Kt,Zt){var Rt=Ad(Zt),An=Kt[0]-Pt.displaySize[0]*Rt.horizontalAlign,an=Kt[1]-Pt.displaySize[1]*Rt.verticalAlign;return{image:Pt,top:an,bottom:an+Pt.displaySize[1],left:An,right:An+Pt.displaySize[0]}}(h[de.icon.name],w.get("icon-offset").evaluate(de,{},y),w.get("icon-anchor").evaluate(de,{},y)),_n=Sr.sdf,e.sdfIcons===void 0?e.sdfIcons=Sr.sdf:e.sdfIcons!==Sr.sdf&&gt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Sr.pixelRatio!==e.pixelRatio||w.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var Qr=Zv(Be.horizontal)||Be.vertical;e.iconsInText=!!Qr&&Qr.iconsInText,(Qr||$r)&&function(Pt,Kt,Zt,Rt,An,an,ir,Ar,sn,Bt,Eo){var fi=an.textMaxSize.evaluate(Kt,{});fi===void 0&&(fi=ir);var To,Er=Pt.layers[0].layout,Io=Er.get("icon-offset").evaluate(Kt,{},Eo),Ui=Zv(Zt.horizontal),Xl=ir/24,qs=Pt.tilePixelRatio*Xl,Hl=Pt.tilePixelRatio*fi/24,la=Pt.tilePixelRatio*Ar,Kl=Pt.tilePixelRatio*Er.get("symbol-spacing"),Ih=Er.get("text-padding")*Pt.tilePixelRatio,$l=Er.get("icon-padding")*Pt.tilePixelRatio,_c=Er.get("text-max-angle")/180*Math.PI,Ph=Er.get("text-rotation-alignment")==="map"&&Er.get("symbol-placement")!=="point",Ch=Er.get("icon-rotation-alignment")==="map"&&Er.get("symbol-placement")!=="point",ua=Er.get("symbol-placement"),xc=Kl/2,Ql=Er.get("icon-text-fit");Rt&&Ql!=="none"&&(Pt.allowVerticalPlacement&&Zt.vertical&&(To=Mv(Rt,Zt.vertical,Ql,Er.get("icon-text-fit-padding"),Io,Xl)),Ui&&(Rt=Mv(Rt,Ui,Ql,Er.get("icon-text-fit-padding"),Io,Xl)));var Ua=function(Ew,Cc){Cc.x<0||Cc.x>=8192||Cc.y<0||Cc.y>=8192||function(Tr,to,Tw,Na,jd,sg,Lh,Po,Rh,kc,Oh,Fh,qd,lg,Ac,ug,cg,pg,hg,fg,di,Bh,dg,Co,Iw){var mg,Gs,ru,nu,iu,ou=Tr.addToLineVertexArray(to,Tw),yg=0,vg=0,gg=0,_g=0,Zd=-1,Gd=-1,ca={},xg=j(""),Wd=0,Xd=0;if(Po._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Wd=(mg=Po.layout.get("text-offset").evaluate(di,{},Co).map(function(Mc){return 24*Mc}))[0],Xd=mg[1]):(Wd=24*Po.layout.get("text-radial-offset").evaluate(di,{},Co),Xd=Md),Tr.allowVerticalPlacement&&Na.vertical){var wg=Po.layout.get("text-rotate").evaluate(di,{},Co)+90;nu=new wh(Rh,to,kc,Oh,Fh,Na.vertical,qd,lg,Ac,wg),Lh&&(iu=new wh(Rh,to,kc,Oh,Fh,Lh,cg,pg,Ac,wg))}if(jd){var Hd=Po.layout.get("icon-rotate").evaluate(di,{}),bg=Po.layout.get("icon-text-fit")!=="none",Sg=Nv(jd,Hd,dg,bg),Kd=Lh?Nv(Lh,Hd,dg,bg):void 0;ru=new wh(Rh,to,kc,Oh,Fh,jd,cg,pg,!1,Hd),yg=4*Sg.length;var Eg=Tr.iconSizeData,zc=null;Eg.kind==="source"?(zc=[128*Po.layout.get("icon-size").evaluate(di,{})])[0]>32640&&gt(Tr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Eg.kind==="composite"&&((zc=[128*Bh.compositeIconSizes[0].evaluate(di,{},Co),128*Bh.compositeIconSizes[1].evaluate(di,{},Co)])[0]>32640||zc[1]>32640)&&gt(Tr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Tr.addSymbols(Tr.icon,Sg,zc,fg,hg,di,!1,to,ou.lineStartIndex,ou.lineLength,-1,Co),Zd=Tr.icon.placedSymbolArray.length-1,Kd&&(vg=4*Kd.length,Tr.addSymbols(Tr.icon,Kd,zc,fg,hg,di,hi.vertical,to,ou.lineStartIndex,ou.lineLength,-1,Co),Gd=Tr.icon.placedSymbolArray.length-1)}for(var Tg in Na.horizontal){var Uh=Na.horizontal[Tg];if(!Gs){xg=j(Uh.text);var Pw=Po.layout.get("text-rotate").evaluate(di,{},Co);Gs=new wh(Rh,to,kc,Oh,Fh,Uh,qd,lg,Ac,Pw)}var Ig=Uh.positionedLines.length===1;if(gg+=qv(Tr,to,Uh,sg,Po,Ac,di,ug,ou,Na.vertical?hi.horizontal:hi.horizontalOnly,Ig?Object.keys(Na.horizontal):[Tg],ca,Zd,Bh,Co),Ig)break}Na.vertical&&(_g+=qv(Tr,to,Na.vertical,sg,Po,Ac,di,ug,ou,hi.vertical,["vertical"],ca,Gd,Bh,Co));var Cw=Gs?Gs.boxStartIndex:Tr.collisionBoxArray.length,kw=Gs?Gs.boxEndIndex:Tr.collisionBoxArray.length,Aw=nu?nu.boxStartIndex:Tr.collisionBoxArray.length,zw=nu?nu.boxEndIndex:Tr.collisionBoxArray.length,Mw=ru?ru.boxStartIndex:Tr.collisionBoxArray.length,Dw=ru?ru.boxEndIndex:Tr.collisionBoxArray.length,Lw=iu?iu.boxStartIndex:Tr.collisionBoxArray.length,Rw=iu?iu.boxEndIndex:Tr.collisionBoxArray.length,ko=-1,Nh=function(Mc,Cg){return Mc&&Mc.circleDiameter?Math.max(Mc.circleDiameter,Cg):Cg};ko=Nh(Gs,ko),ko=Nh(nu,ko),ko=Nh(ru,ko);var Pg=(ko=Nh(iu,ko))>-1?1:0;Pg&&(ko*=Iw/24),Tr.glyphOffsetArray.length>=Wt.MAX_GLYPHS&&gt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),di.sortKey!==void 0&&Tr.addToSortKeyRanges(Tr.symbolInstances.length,di.sortKey),Tr.symbolInstances.emplaceBack(to.x,to.y,ca.right>=0?ca.right:-1,ca.center>=0?ca.center:-1,ca.left>=0?ca.left:-1,ca.vertical||-1,Zd,Gd,xg,Cw,kw,Aw,zw,Mw,Dw,Lw,Rw,kc,gg,_g,yg,vg,Pg,0,qd,Wd,Xd,ko)}(Pt,Cc,Ew,Zt,Rt,An,To,Pt.layers[0],Pt.collisionBoxArray,Kt.index,Kt.sourceLayerIndex,Pt.index,qs,Ih,Ph,sn,la,$l,Ch,Io,Kt,an,Bt,Eo,ir)};if(ua==="line")for(var Yl=0,kh=Uv(Kt.geometry,0,0,8192,8192);Yl<kh.length;Yl+=1)for(var Ah=kh[Yl],wc=0,bc=sw(Ah,Kl,_c,Zt.vertical||Ui,Rt,24,Hl,Pt.overscaling,8192);wc<bc.length;wc+=1){var zh=bc[wc];Ui&&pw(Pt,Ui.text,xc,zh)||Ua(Ah,zh)}else if(ua==="line-center")for(var Sc=0,Ec=Kt.geometry;Sc<Ec.length;Sc+=1){var Tc=Ec[Sc];if(Tc.length>1){var Mh=aw(Tc,_c,Zt.vertical||Ui,Rt,24,Hl);Mh&&Ua(Tc,Mh)}}else if(Kt.type==="Polygon")for(var Jl=0,Dh=Td(Kt.geometry,0);Jl<Dh.length;Jl+=1){var eu=Dh[Jl],Ic=uw(eu,16);Ua(eu[0],new Nl(Ic.x,Ic.y,0))}else if(Kt.type==="LineString")for(var Zs=0,Pc=Kt.geometry;Zs<Pc.length;Zs+=1){var tu=Pc[Zs];Ua(tu,new Nl(tu[0].x,tu[0].y,0))}else if(Kt.type==="Point")for(var Ud=0,og=Kt.geometry;Ud<og.length;Ud+=1)for(var Nd=0,ag=og[Ud];Nd<ag.length;Nd+=1){var Vd=ag[Nd];Ua([Vd],new Nl(Vd.x,Vd.y,0))}}(e,de,Be,$r,l,T,ze,Ye,Ne,_n,y)},pe=0,he=e.features;pe<he.length;pe+=1)ae();f&&e.generateCollisionDebugBuffers()},u.perspective=function(e,t,n,l,h){var f,y=1/Math.tan(t/2);return e[0]=y/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,h!=null&&h!==1/0?(e[10]=(h+l)*(f=1/(l-h)),e[14]=2*h*l*f):(e[10]=-1,e[14]=-2*l),e},u.pick=function(e,t){for(var n={},l=0;l<t.length;l++){var h=t[l];h in e&&(n[h]=e[h])}return n},u.plugin=Kn,u.polygonIntersectsPolygon=wo,u.postMapLoadEvent=cs,u.postTurnstileEvent=ll,u.potpack=Cv,u.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],u.register=Xe,u.registerForPluginStateChange=function(e){return e({pluginStatus:Un,pluginURL:$i}),ec.on("pluginStateChange",e),e},u.renderColorRamp=uv,u.rotate=function(e,t,n){var l=t[0],h=t[1],f=t[2],y=t[3],w=Math.sin(n),E=Math.cos(n);return e[0]=l*E+f*w,e[1]=h*E+y*w,e[2]=l*-w+f*E,e[3]=h*-w+y*E,e},u.rotateX=function(e,t,n){var l=Math.sin(n),h=Math.cos(n),f=t[4],y=t[5],w=t[6],E=t[7],T=t[8],P=t[9],C=t[10],L=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=f*h+T*l,e[5]=y*h+P*l,e[6]=w*h+C*l,e[7]=E*h+L*l,e[8]=T*h-f*l,e[9]=P*h-y*l,e[10]=C*h-w*l,e[11]=L*h-E*l,e},u.rotateZ=function(e,t,n){var l=Math.sin(n),h=Math.cos(n),f=t[0],y=t[1],w=t[2],E=t[3],T=t[4],P=t[5],C=t[6],L=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=f*h+T*l,e[1]=y*h+P*l,e[2]=w*h+C*l,e[3]=E*h+L*l,e[4]=T*h-f*l,e[5]=P*h-y*l,e[6]=C*h-w*l,e[7]=L*h-E*l,e},u.scale=function(e,t,n){var l=n[0],h=n[1],f=n[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*h,e[5]=t[5]*h,e[6]=t[6]*h,e[7]=t[7]*h,e[8]=t[8]*f,e[9]=t[9]*f,e[10]=t[10]*f,e[11]=t[11]*f,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},u.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},u.scale$2=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},u.setCacheLimits=function(e,t){xa=e,ul=t},u.setRTLTextPlugin=function(e,t,n){if(n===void 0&&(n=!1),Un==="deferred"||Un==="loading"||Un==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");$i=Sn.resolveURL(e),Un="deferred",Il=t,zs(),n||Ii()},u.sphericalToCartesian=function(e){var t=e[0],n=e[1],l=e[2];return n+=90,n*=Math.PI/180,l*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(l),y:t*Math.sin(n)*Math.sin(l),z:t*Math.cos(l)}},u.sqrLen=function(e){var t=e[0],n=e[1];return t*t+n*n},u.styleSpec=U,u.sub=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},u.symbolSize=ow,u.transformMat3=function(e,t,n){var l=t[0],h=t[1],f=t[2];return e[0]=l*n[0]+h*n[3]+f*n[6],e[1]=l*n[1]+h*n[4]+f*n[7],e[2]=l*n[2]+h*n[5]+f*n[8],e},u.transformMat4=Ml,u.translate=function(e,t,n){var l,h,f,y,w,E,T,P,C,L,R,q,Z=n[0],J=n[1],$=n[2];return t===e?(e[12]=t[0]*Z+t[4]*J+t[8]*$+t[12],e[13]=t[1]*Z+t[5]*J+t[9]*$+t[13],e[14]=t[2]*Z+t[6]*J+t[10]*$+t[14],e[15]=t[3]*Z+t[7]*J+t[11]*$+t[15]):(h=t[1],f=t[2],y=t[3],w=t[4],E=t[5],T=t[6],P=t[7],C=t[8],L=t[9],R=t[10],q=t[11],e[0]=l=t[0],e[1]=h,e[2]=f,e[3]=y,e[4]=w,e[5]=E,e[6]=T,e[7]=P,e[8]=C,e[9]=L,e[10]=R,e[11]=q,e[12]=l*Z+w*J+C*$+t[12],e[13]=h*Z+E*J+L*$+t[13],e[14]=f*Z+T*J+R*$+t[14],e[15]=y*Z+P*J+q*$+t[15]),e},u.triggerPluginCompletionEvent=ah,u.uniqueId=we,u.validateCustomStyleLayer=function(e){var t=[],n=e.id;return n===void 0&&t.push({message:"layers."+n+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},u.validateLight=yd,u.validateStyle=Ps,u.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},u.vectorTile=Ol,u.version="1.13.2",u.warnOnce=gt,u.webpSupported=Mi,u.window=ee,u.wrap=ne}),S(["./shared"],function(u){function z(k){var D=typeof k;if(D==="number"||D==="boolean"||D==="string"||k==null)return JSON.stringify(k);if(Array.isArray(k)){for(var O="[",V=0,X=k;V<X.length;V+=1)O+=z(X[V])+",";return O+"]"}for(var te=Object.keys(k).sort(),ie="{",U=0;U<te.length;U++)ie+=JSON.stringify(te[U])+":"+z(k[te[U]])+",";return ie+"}"}function M(k){for(var D="",O=0,V=u.refProperties;O<V.length;O+=1)D+="/"+z(k[V[O]]);return D}var K=function(k){this.keyCache={},k&&this.replace(k)};K.prototype.replace=function(k){this._layerConfigs={},this._layers={},this.update(k,[])},K.prototype.update=function(k,D){for(var O=this,V=0,X=k;V<X.length;V+=1){var te=X[V];this._layerConfigs[te.id]=te;var ie=this._layers[te.id]=u.createStyleLayer(te);ie._featureFilter=u.featureFilter(ie.filter),this.keyCache[te.id]&&delete this.keyCache[te.id]}for(var U=0,H=D;U<H.length;U+=1){var ce=H[U];delete this.keyCache[ce],delete this._layerConfigs[ce],delete this._layers[ce]}this.familiesBySource={};for(var Ee=0,Ie=function(Me,Re){for(var wt={},Ue=0;Ue<Me.length;Ue++){var At=Re&&Re[Me[Ue].id]||M(Me[Ue]);Re&&(Re[Me[Ue].id]=At);var Xt=wt[At];Xt||(Xt=wt[At]=[]),Xt.push(Me[Ue])}var Et=[];for(var Ut in wt)Et.push(wt[Ut]);return Et}(u.values(this._layerConfigs),this.keyCache);Ee<Ie.length;Ee+=1){var ve=Ie[Ee].map(function(Me){return O._layers[Me.id]}),Te=ve[0];if(Te.visibility!=="none"){var He=Te.source||"",We=this.familiesBySource[He];We||(We=this.familiesBySource[He]={});var ge=Te.sourceLayer||"_geojsonTileLayer",Ve=We[ge];Ve||(Ve=We[ge]=[]),Ve.push(ve)}}};var le=function(k){var D={},O=[];for(var V in k){var X=k[V],te=D[V]={};for(var ie in X){var U=X[+ie];if(U&&U.bitmap.width!==0&&U.bitmap.height!==0){var H={x:0,y:0,w:U.bitmap.width+2,h:U.bitmap.height+2};O.push(H),te[ie]={rect:H,metrics:U.metrics}}}}var ce=u.potpack(O),Ee=new u.AlphaImage({width:ce.w||1,height:ce.h||1});for(var Ie in k){var ve=k[Ie];for(var Te in ve){var He=ve[+Te];if(He&&He.bitmap.width!==0&&He.bitmap.height!==0){var We=D[Ie][Te].rect;u.AlphaImage.copy(He.bitmap,Ee,{x:0,y:0},{x:We.x+1,y:We.y+1},He.bitmap)}}}this.image=Ee,this.positions=D};u.register("GlyphAtlas",le);var Ce=function(k){this.tileID=new u.OverscaledTileID(k.tileID.overscaledZ,k.tileID.wrap,k.tileID.canonical.z,k.tileID.canonical.x,k.tileID.canonical.y),this.uid=k.uid,this.zoom=k.zoom,this.pixelRatio=k.pixelRatio,this.tileSize=k.tileSize,this.source=k.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=k.showCollisionBoxes,this.collectResourceTiming=!!k.collectResourceTiming,this.returnDependencies=!!k.returnDependencies,this.promoteId=k.promoteId};function ee(k,D,O){for(var V=new u.EvaluationParameters(D),X=0,te=k;X<te.length;X+=1)te[X].recalculate(V,O)}function Se(k,D){var O=u.getArrayBuffer(k.request,function(V,X,te,ie){V?D(V):X&&D(null,{vectorTile:new u.vectorTile.VectorTile(new u.pbf(X)),rawData:X,cacheControl:te,expires:ie})});return function(){O.cancel(),D()}}Ce.prototype.parse=function(k,D,O,V,X){var te=this;this.status="parsing",this.data=k,this.collisionBoxArray=new u.CollisionBoxArray;var ie=new u.DictionaryCoder(Object.keys(k.layers).sort()),U=new u.FeatureIndex(this.tileID,this.promoteId);U.bucketLayerIDs=[];var H,ce,Ee,Ie,ve={},Te={featureIndex:U,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:O},He=D.familiesBySource[this.source];for(var We in He){var ge=k.layers[We];if(ge){ge.version===1&&u.warnOnce('Vector tile source "'+this.source+'" layer "'+We+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ve=ie.encode(We),Me=[],Re=0;Re<ge.length;Re++){var wt=ge.feature(Re),Ue=U.getId(wt,We);Me.push({feature:wt,id:Ue,index:Re,sourceLayerIndex:Ve})}for(var At=0,Xt=He[We];At<Xt.length;At+=1){var Et=Xt[At],Ut=Et[0];Ut.minzoom&&this.zoom<Math.floor(Ut.minzoom)||Ut.maxzoom&&this.zoom>=Ut.maxzoom||Ut.visibility!=="none"&&(ee(Et,this.zoom,O),(ve[Ut.id]=Ut.createBucket({index:U.bucketLayerIDs.length,layers:Et,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ve,sourceID:this.source})).populate(Me,Te,this.tileID.canonical),U.bucketLayerIDs.push(Et.map(function(Gt){return Gt.id})))}}}var Mt=u.mapObject(Te.glyphDependencies,function(Gt){return Object.keys(Gt).map(Number)});Object.keys(Mt).length?V.send("getGlyphs",{uid:this.uid,stacks:Mt},function(Gt,Ct){H||(H=Gt,ce=Ct,xr.call(te))}):ce={};var pn=Object.keys(Te.iconDependencies);pn.length?V.send("getImages",{icons:pn,source:this.source,tileID:this.tileID,type:"icons"},function(Gt,Ct){H||(H=Gt,Ee=Ct,xr.call(te))}):Ee={};var jt=Object.keys(Te.patternDependencies);function xr(){if(H)return X(H);if(ce&&Ee&&Ie){var Gt=new le(ce),Ct=new u.ImageAtlas(Ee,Ie);for(var Nt in ve){var Tn=ve[Nt];Tn instanceof u.SymbolBucket?(ee(Tn.layers,this.zoom,O),u.performSymbolLayout(Tn,ce,Gt.positions,Ee,Ct.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Tn.hasPattern&&(Tn instanceof u.LineBucket||Tn instanceof u.FillBucket||Tn instanceof u.FillExtrusionBucket)&&(ee(Tn.layers,this.zoom,O),Tn.addFeatures(Te,this.tileID.canonical,Ct.patternPositions))}this.status="done",X(null,{buckets:u.values(ve).filter(function(ms){return!ms.isEmpty()}),featureIndex:U,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Gt.image,imageAtlas:Ct,glyphMap:this.returnDependencies?ce:null,iconMap:this.returnDependencies?Ee:null,glyphPositions:this.returnDependencies?Gt.positions:null})}}jt.length?V.send("getImages",{icons:jt,source:this.source,tileID:this.tileID,type:"patterns"},function(Gt,Ct){H||(H=Gt,Ie=Ct,xr.call(te))}):Ie={},xr.call(this)};var Oe=function(k,D,O,V){this.actor=k,this.layerIndex=D,this.availableImages=O,this.loadVectorData=V||Se,this.loading={},this.loaded={}};Oe.prototype.loadTile=function(k,D){var O=this,V=k.uid;this.loading||(this.loading={});var X=!!(k&&k.request&&k.request.collectResourceTiming)&&new u.RequestPerformance(k.request),te=this.loading[V]=new Ce(k);te.abort=this.loadVectorData(k,function(ie,U){if(delete O.loading[V],ie||!U)return te.status="done",O.loaded[V]=te,D(ie);var H=U.rawData,ce={};U.expires&&(ce.expires=U.expires),U.cacheControl&&(ce.cacheControl=U.cacheControl);var Ee={};if(X){var Ie=X.finish();Ie&&(Ee.resourceTiming=JSON.parse(JSON.stringify(Ie)))}te.vectorTile=U.vectorTile,te.parse(U.vectorTile,O.layerIndex,O.availableImages,O.actor,function(ve,Te){if(ve||!Te)return D(ve);D(null,u.extend({rawTileData:H.slice(0)},Te,ce,Ee))}),O.loaded=O.loaded||{},O.loaded[V]=te})},Oe.prototype.reloadTile=function(k,D){var O=this,V=this.loaded,X=k.uid,te=this;if(V&&V[X]){var ie=V[X];ie.showCollisionBoxes=k.showCollisionBoxes;var U=function(H,ce){var Ee=ie.reloadCallback;Ee&&(delete ie.reloadCallback,ie.parse(ie.vectorTile,te.layerIndex,O.availableImages,te.actor,Ee)),D(H,ce)};ie.status==="parsing"?ie.reloadCallback=U:ie.status==="done"&&(ie.vectorTile?ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor,U):U())}},Oe.prototype.abortTile=function(k,D){var O=this.loading,V=k.uid;O&&O[V]&&O[V].abort&&(O[V].abort(),delete O[V]),D()},Oe.prototype.removeTile=function(k,D){var O=this.loaded,V=k.uid;O&&O[V]&&delete O[V],D()};var Ze=u.window.ImageBitmap,se=function(){this.loaded={}};function ne(k,D){if(k.length!==0){oe(k[0],D);for(var O=1;O<k.length;O++)oe(k[O],!D)}}function oe(k,D){for(var O=0,V=0,X=k.length,te=X-1;V<X;te=V++)O+=(k[V][0]-k[te][0])*(k[te][1]+k[V][1]);O>=0!=!!D&&k.reverse()}se.prototype.loadTile=function(k,D){var O=k.uid,V=k.encoding,X=k.rawImageData,te=Ze&&X instanceof Ze?this.getImageData(X):X,ie=new u.DEMData(O,te,V);this.loaded=this.loaded||{},this.loaded[O]=ie,D(null,ie)},se.prototype.getImageData=function(k){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(k.width,k.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=k.width,this.offscreenCanvas.height=k.height,this.offscreenCanvasContext.drawImage(k,0,0,k.width,k.height);var D=this.offscreenCanvasContext.getImageData(-1,-1,k.width+2,k.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new u.RGBAImage({width:D.width,height:D.height},D.data)},se.prototype.removeTile=function(k){var D=this.loaded,O=k.uid;D&&D[O]&&delete D[O]};var _e=u.vectorTile.VectorTileFeature.prototype.toGeoJSON,we=function(k){this._feature=k,this.extent=u.EXTENT,this.type=k.type,this.properties=k.tags,"id"in k&&!isNaN(k.id)&&(this.id=parseInt(k.id,10))};we.prototype.loadGeometry=function(){if(this._feature.type===1){for(var k=[],D=0,O=this._feature.geometry;D<O.length;D+=1){var V=O[D];k.push([new u.Point$1(V[0],V[1])])}return k}for(var X=[],te=0,ie=this._feature.geometry;te<ie.length;te+=1){for(var U=[],H=0,ce=ie[te];H<ce.length;H+=1){var Ee=ce[H];U.push(new u.Point$1(Ee[0],Ee[1]))}X.push(U)}return X},we.prototype.toGeoJSON=function(k,D,O){return _e.call(this,k,D,O)};var ot=function(k){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.EXTENT,this.length=k.length,this._features=k};ot.prototype.feature=function(k){return new we(this._features[k])};var Le=u.vectorTile.VectorTileFeature,ut=mt;function mt(k,D){this.options=D||{},this.features=k,this.length=k.length}function Qe(k,D){this.id=typeof k.id=="number"?k.id:void 0,this.type=k.type,this.rawGeometry=k.type===1?[k.geometry]:k.geometry,this.properties=k.tags,this.extent=D||4096}mt.prototype.feature=function(k){return new Qe(this.features[k],this.options.extent)},Qe.prototype.loadGeometry=function(){var k=this.rawGeometry;this.geometry=[];for(var D=0;D<k.length;D++){for(var O=k[D],V=[],X=0;X<O.length;X++)V.push(new u.Point$1(O[X][0],O[X][1]));this.geometry.push(V)}return this.geometry},Qe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var k=this.geometry,D=1/0,O=-1/0,V=1/0,X=-1/0,te=0;te<k.length;te++)for(var ie=k[te],U=0;U<ie.length;U++){var H=ie[U];D=Math.min(D,H.x),O=Math.max(O,H.x),V=Math.min(V,H.y),X=Math.max(X,H.y)}return[D,V,O,X]},Qe.prototype.toGeoJSON=Le.prototype.toGeoJSON;var Qt=Mr,Jr=ut;function Mr(k){var D=new u.pbf;return function(O,V){for(var X in O.layers)V.writeMessage(3,gt,O.layers[X])}(k,D),D.finish()}function gt(k,D){var O;D.writeVarintField(15,k.version||1),D.writeStringField(1,k.name||""),D.writeVarintField(5,k.extent||4096);var V={keys:[],values:[],keycache:{},valuecache:{}};for(O=0;O<k.length;O++)V.feature=k.feature(O),D.writeMessage(2,rr,V);var X=V.keys;for(O=0;O<X.length;O++)D.writeStringField(3,X[O]);var te=V.values;for(O=0;O<te.length;O++)D.writeMessage(4,cn,te[O])}function rr(k,D){var O=k.feature;O.id!==void 0&&D.writeVarintField(1,O.id),D.writeMessage(2,qr,k),D.writeVarintField(3,O.type),D.writeMessage(4,Zr,O)}function qr(k,D){var O=k.feature,V=k.keys,X=k.values,te=k.keycache,ie=k.valuecache;for(var U in O.properties){var H=te[U];H===void 0&&(V.push(U),te[U]=H=V.length-1),D.writeVarint(H);var ce=O.properties[U],Ee=typeof ce;Ee!=="string"&&Ee!=="boolean"&&Ee!=="number"&&(ce=JSON.stringify(ce));var Ie=Ee+":"+ce,ve=ie[Ie];ve===void 0&&(X.push(ce),ie[Ie]=ve=X.length-1),D.writeVarint(ve)}}function nr(k,D){return(D<<3)+(7&k)}function un(k){return k<<1^k>>31}function Zr(k,D){for(var O=k.loadGeometry(),V=k.type,X=0,te=0,ie=O.length,U=0;U<ie;U++){var H=O[U],ce=1;V===1&&(ce=H.length),D.writeVarint(nr(1,ce));for(var Ee=V===3?H.length-1:H.length,Ie=0;Ie<Ee;Ie++){Ie===1&&V!==1&&D.writeVarint(nr(2,Ee-1));var ve=H[Ie].x-X,Te=H[Ie].y-te;D.writeVarint(un(ve)),D.writeVarint(un(Te)),X+=ve,te+=Te}V===3&&D.writeVarint(nr(7,1))}}function cn(k,D){var O=typeof k;O==="string"?D.writeStringField(1,k):O==="boolean"?D.writeBooleanField(7,k):O==="number"&&(k%1!=0?D.writeDoubleField(3,k):k<0?D.writeSVarintField(6,k):D.writeVarintField(5,k))}function bn(k,D,O,V){Fe(k,O,V),Fe(D,2*O,2*V),Fe(D,2*O+1,2*V+1)}function Fe(k,D,O){var V=k[D];k[D]=k[O],k[O]=V}function pt(k,D,O,V){var X=k-O,te=D-V;return X*X+te*te}Qt.fromVectorTileJs=Mr,Qt.fromGeojsonVt=function(k,D){D=D||{};var O={};for(var V in k)O[V]=new ut(k[V].features,D),O[V].name=V,O[V].version=D.version,O[V].extent=D.extent;return Mr({layers:O})},Qt.GeoJSONWrapper=Jr;var bt=function(k){return k[0]},Yt=function(k){return k[1]},pr=function(k,D,O,V,X){D===void 0&&(D=bt),O===void 0&&(O=Yt),V===void 0&&(V=64),X===void 0&&(X=Float64Array),this.nodeSize=V,this.points=k;for(var te=k.length<65536?Uint16Array:Uint32Array,ie=this.ids=new te(k.length),U=this.coords=new X(2*k.length),H=0;H<k.length;H++)ie[H]=H,U[2*H]=D(k[H]),U[2*H+1]=O(k[H]);(function ce(Ee,Ie,ve,Te,He,We){if(!(He-Te<=ve)){var ge=Te+He>>1;(function Ve(Me,Re,wt,Ue,At,Xt){for(;At>Ue;){if(At-Ue>600){var Et=At-Ue+1,Ut=wt-Ue+1,Mt=Math.log(Et),pn=.5*Math.exp(2*Mt/3),jt=.5*Math.sqrt(Mt*pn*(Et-pn)/Et)*(Ut-Et/2<0?-1:1);Ve(Me,Re,wt,Math.max(Ue,Math.floor(wt-Ut*pn/Et+jt)),Math.min(At,Math.floor(wt+(Et-Ut)*pn/Et+jt)),Xt)}var xr=Re[2*wt+Xt],Gt=Ue,Ct=At;for(bn(Me,Re,Ue,wt),Re[2*At+Xt]>xr&&bn(Me,Re,Ue,At);Gt<Ct;){for(bn(Me,Re,Gt,Ct),Gt++,Ct--;Re[2*Gt+Xt]<xr;)Gt++;for(;Re[2*Ct+Xt]>xr;)Ct--}Re[2*Ue+Xt]===xr?bn(Me,Re,Ue,Ct):bn(Me,Re,++Ct,At),Ct<=wt&&(Ue=Ct+1),wt<=Ct&&(At=Ct-1)}})(Ee,Ie,ge,Te,He,We%2),ce(Ee,Ie,ve,Te,ge-1,We+1),ce(Ee,Ie,ve,ge+1,He,We+1)}})(ie,U,V,0,ie.length-1,0)};pr.prototype.range=function(k,D,O,V){return function(X,te,ie,U,H,ce,Ee){for(var Ie,ve,Te=[0,X.length-1,0],He=[];Te.length;){var We=Te.pop(),ge=Te.pop(),Ve=Te.pop();if(ge-Ve<=Ee)for(var Me=Ve;Me<=ge;Me++)ve=te[2*Me+1],(Ie=te[2*Me])>=ie&&Ie<=H&&ve>=U&&ve<=ce&&He.push(X[Me]);else{var Re=Math.floor((Ve+ge)/2);ve=te[2*Re+1],(Ie=te[2*Re])>=ie&&Ie<=H&&ve>=U&&ve<=ce&&He.push(X[Re]);var wt=(We+1)%2;(We===0?ie<=Ie:U<=ve)&&(Te.push(Ve),Te.push(Re-1),Te.push(wt)),(We===0?H>=Ie:ce>=ve)&&(Te.push(Re+1),Te.push(ge),Te.push(wt))}}return He}(this.ids,this.coords,k,D,O,V,this.nodeSize)},pr.prototype.within=function(k,D,O){return function(V,X,te,ie,U,H){for(var ce=[0,V.length-1,0],Ee=[],Ie=U*U;ce.length;){var ve=ce.pop(),Te=ce.pop(),He=ce.pop();if(Te-He<=H)for(var We=He;We<=Te;We++)pt(X[2*We],X[2*We+1],te,ie)<=Ie&&Ee.push(V[We]);else{var ge=Math.floor((He+Te)/2),Ve=X[2*ge],Me=X[2*ge+1];pt(Ve,Me,te,ie)<=Ie&&Ee.push(V[ge]);var Re=(ve+1)%2;(ve===0?te-U<=Ve:ie-U<=Me)&&(ce.push(He),ce.push(ge-1),ce.push(Re)),(ve===0?te+U>=Ve:ie+U>=Me)&&(ce.push(ge+1),ce.push(Te),ce.push(Re))}}return Ee}(this.ids,this.coords,k,D,O,this.nodeSize)};var _i={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(k){return k}},dr=function(k){this.options=oo(Object.create(_i),k),this.trees=new Array(this.options.maxZoom+1)};function Sn(k,D,O,V,X){return{x:k,y:D,zoom:1/0,id:O,parentId:-1,numPoints:V,properties:X}}function Ot(k,D){var O=k.geometry.coordinates,V=O[1];return{x:xi(O[0]),y:kt(V),zoom:1/0,index:D,parentId:-1}}function Mi(k){return{type:"Feature",id:k.id,properties:ga(k),geometry:{type:"Point",coordinates:[(V=k.x,360*(V-.5)),(D=k.y,O=(180-360*D)*Math.PI/180,360*Math.atan(Math.exp(O))/Math.PI-90)]}};var D,O,V}function ga(k){var D=k.numPoints,O=D>=1e4?Math.round(D/1e3)+"k":D>=1e3?Math.round(D/100)/10+"k":D;return oo(oo({},k.properties),{cluster:!0,cluster_id:k.id,point_count:D,point_count_abbreviated:O})}function xi(k){return k/360+.5}function kt(k){var D=Math.sin(k*Math.PI/180),O=.5-.25*Math.log((1+D)/(1-D))/Math.PI;return O<0?0:O>1?1:O}function oo(k,D){for(var O in D)k[O]=D[O];return k}function En(k){return k.x}function ti(k){return k.y}function Ou(k,D,O,V,X,te){var ie=X-O,U=te-V;if(ie!==0||U!==0){var H=((k-O)*ie+(D-V)*U)/(ie*ie+U*U);H>1?(O=X,V=te):H>0&&(O+=ie*H,V+=U*H)}return(ie=k-O)*ie+(U=D-V)*U}function wi(k,D,O,V){var X={id:k===void 0?null:k,type:D,geometry:O,tags:V,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(te){var ie=te.geometry,U=te.type;if(U==="Point"||U==="MultiPoint"||U==="LineString")ls(te,ie);else if(U==="Polygon"||U==="MultiLineString")for(var H=0;H<ie.length;H++)ls(te,ie[H]);else if(U==="MultiPolygon")for(H=0;H<ie.length;H++)for(var ce=0;ce<ie[H].length;ce++)ls(te,ie[H][ce])}(X),X}function ls(k,D){for(var O=0;O<D.length;O+=3)k.minX=Math.min(k.minX,D[O]),k.minY=Math.min(k.minY,D[O+1]),k.maxX=Math.max(k.maxX,D[O]),k.maxY=Math.max(k.maxY,D[O+1])}function ri(k,D,O,V){if(D.geometry){var X=D.geometry.coordinates,te=D.geometry.type,ie=Math.pow(O.tolerance/((1<<O.maxZoom)*O.extent),2),U=[],H=D.id;if(O.promoteId?H=D.properties[O.promoteId]:O.generateId&&(H=V||0),te==="Point")Oo(X,U);else if(te==="MultiPoint")for(var ce=0;ce<X.length;ce++)Oo(X[ce],U);else if(te==="LineString")_a(X,U,ie,!1);else if(te==="MultiLineString"){if(O.lineMetrics){for(ce=0;ce<X.length;ce++)_a(X[ce],U=[],ie,!1),k.push(wi(H,"LineString",U,D.properties));return}ni(X,U,ie,!1)}else if(te==="Polygon")ni(X,U,ie,!0);else{if(te!=="MultiPolygon"){if(te==="GeometryCollection"){for(ce=0;ce<D.geometry.geometries.length;ce++)ri(k,{id:H,geometry:D.geometry.geometries[ce],properties:D.properties},O,V);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ce=0;ce<X.length;ce++){var Ee=[];ni(X[ce],Ee,ie,!0),U.push(Ee)}}k.push(wi(H,te,U,D.properties))}}function Oo(k,D){D.push(ii(k[0])),D.push(Fo(k[1])),D.push(0)}function _a(k,D,O,V){for(var X,te,ie=0,U=0;U<k.length;U++){var H=ii(k[U][0]),ce=Fo(k[U][1]);D.push(H),D.push(ce),D.push(0),U>0&&(ie+=V?(X*ce-H*te)/2:Math.sqrt(Math.pow(H-X,2)+Math.pow(ce-te,2))),X=H,te=ce}var Ee=D.length-3;D[2]=1,function Ie(ve,Te,He,We){for(var ge,Ve=We,Me=He-Te>>1,Re=He-Te,wt=ve[Te],Ue=ve[Te+1],At=ve[He],Xt=ve[He+1],Et=Te+3;Et<He;Et+=3){var Ut=Ou(ve[Et],ve[Et+1],wt,Ue,At,Xt);if(Ut>Ve)ge=Et,Ve=Ut;else if(Ut===Ve){var Mt=Math.abs(Et-Me);Mt<Re&&(ge=Et,Re=Mt)}}Ve>We&&(ge-Te>3&&Ie(ve,Te,ge,We),ve[ge+2]=Ve,He-ge>3&&Ie(ve,ge,He,We))}(D,0,Ee,O),D[Ee+2]=1,D.size=Math.abs(ie),D.start=0,D.end=D.size}function ni(k,D,O,V){for(var X=0;X<k.length;X++){var te=[];_a(k[X],te,O,V),D.push(te)}}function ii(k){return k/360+.5}function Fo(k){var D=Math.sin(k*Math.PI/180),O=.5-.25*Math.log((1+D)/(1-D))/Math.PI;return O<0?0:O>1?1:O}function bi(k,D,O,V,X,te,ie,U){if(V/=D,te>=(O/=D)&&ie<V)return k;if(ie<O||te>=V)return null;for(var H=[],ce=0;ce<k.length;ce++){var Ee=k[ce],Ie=Ee.geometry,ve=Ee.type,Te=X===0?Ee.minX:Ee.minY,He=X===0?Ee.maxX:Ee.maxY;if(Te>=O&&He<V)H.push(Ee);else if(!(He<O||Te>=V)){var We=[];if(ve==="Point"||ve==="MultiPoint")sl(Ie,We,O,V,X);else if(ve==="LineString")ll(Ie,We,O,V,X,!1,U.lineMetrics);else if(ve==="MultiLineString")cs(Ie,We,O,V,X,!1);else if(ve==="Polygon")cs(Ie,We,O,V,X,!0);else if(ve==="MultiPolygon")for(var ge=0;ge<Ie.length;ge++){var Ve=[];cs(Ie[ge],Ve,O,V,X,!0),Ve.length&&We.push(Ve)}if(We.length){if(U.lineMetrics&&ve==="LineString"){for(ge=0;ge<We.length;ge++)H.push(wi(Ee.id,ve,We[ge],Ee.tags));continue}ve!=="LineString"&&ve!=="MultiLineString"||(We.length===1?(ve="LineString",We=We[0]):ve="MultiLineString"),ve!=="Point"&&ve!=="MultiPoint"||(ve=We.length===3?"Point":"MultiPoint"),H.push(wi(Ee.id,ve,We,Ee.tags))}}}return H.length?H:null}function sl(k,D,O,V,X){for(var te=0;te<k.length;te+=3){var ie=k[te+X];ie>=O&&ie<=V&&(D.push(k[te]),D.push(k[te+1]),D.push(k[te+2]))}}function ll(k,D,O,V,X,te,ie){for(var U,H,ce=us(k),Ee=X===0?ul:wa,Ie=k.start,ve=0;ve<k.length-3;ve+=3){var Te=k[ve],He=k[ve+1],We=k[ve+2],ge=k[ve+3],Ve=k[ve+4],Me=X===0?Te:He,Re=X===0?ge:Ve,wt=!1;ie&&(U=Math.sqrt(Math.pow(Te-ge,2)+Math.pow(He-Ve,2))),Me<O?Re>O&&(H=Ee(ce,Te,He,ge,Ve,O),ie&&(ce.start=Ie+U*H)):Me>V?Re<V&&(H=Ee(ce,Te,He,ge,Ve,V),ie&&(ce.start=Ie+U*H)):xa(ce,Te,He,We),Re<O&&Me>=O&&(H=Ee(ce,Te,He,ge,Ve,O),wt=!0),Re>V&&Me<=V&&(H=Ee(ce,Te,He,ge,Ve,V),wt=!0),!te&&wt&&(ie&&(ce.end=Ie+U*H),D.push(ce),ce=us(k)),ie&&(Ie+=U)}var Ue=k.length-3;Te=k[Ue],He=k[Ue+1],We=k[Ue+2],(Me=X===0?Te:He)>=O&&Me<=V&&xa(ce,Te,He,We),Ue=ce.length-3,te&&Ue>=3&&(ce[Ue]!==ce[0]||ce[Ue+1]!==ce[1])&&xa(ce,ce[0],ce[1],ce[2]),ce.length&&D.push(ce)}function us(k){var D=[];return D.size=k.size,D.start=k.start,D.end=k.end,D}function cs(k,D,O,V,X,te){for(var ie=0;ie<k.length;ie++)ll(k[ie],D,O,V,X,te,!1)}function xa(k,D,O,V){k.push(D),k.push(O),k.push(V)}function ul(k,D,O,V,X,te){var ie=(te-D)/(V-D);return k.push(te),k.push(O+(X-O)*ie),k.push(1),ie}function wa(k,D,O,V,X,te){var ie=(te-O)/(X-O);return k.push(D+(V-D)*ie),k.push(te),k.push(1),ie}function ps(k,D){for(var O=[],V=0;V<k.length;V++){var X,te=k[V],ie=te.type;if(ie==="Point"||ie==="MultiPoint"||ie==="LineString")X=Bo(te.geometry,D);else if(ie==="MultiLineString"||ie==="Polygon"){X=[];for(var U=0;U<te.geometry.length;U++)X.push(Bo(te.geometry[U],D))}else if(ie==="MultiPolygon")for(X=[],U=0;U<te.geometry.length;U++){for(var H=[],ce=0;ce<te.geometry[U].length;ce++)H.push(Bo(te.geometry[U][ce],D));X.push(H)}O.push(wi(te.id,ie,X,te.tags))}return O}function Bo(k,D){var O=[];O.size=k.size,k.start!==void 0&&(O.start=k.start,O.end=k.end);for(var V=0;V<k.length;V+=3)O.push(k[V]+D,k[V+1],k[V+2]);return O}function hs(k,D){if(k.transformed)return k;var O,V,X,te=1<<k.z,ie=k.x,U=k.y;for(O=0;O<k.features.length;O++){var H=k.features[O],ce=H.geometry,Ee=H.type;if(H.geometry=[],Ee===1)for(V=0;V<ce.length;V+=2)H.geometry.push(fs(ce[V],ce[V+1],D,te,ie,U));else for(V=0;V<ce.length;V++){var Ie=[];for(X=0;X<ce[V].length;X+=2)Ie.push(fs(ce[V][X],ce[V][X+1],D,te,ie,U));H.geometry.push(Ie)}}return k.transformed=!0,k}function fs(k,D,O,V,X,te){return[Math.round(O*(k*V-X)),Math.round(O*(D*V-te))]}function cl(k,D,O,V,X){for(var te=D===X.maxZoom?0:X.tolerance/((1<<D)*X.extent),ie={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:O,y:V,z:D,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},U=0;U<k.length;U++){ie.numFeatures++,pl(ie,k[U],te,X);var H=k[U].minX,ce=k[U].minY,Ee=k[U].maxX,Ie=k[U].maxY;H<ie.minX&&(ie.minX=H),ce<ie.minY&&(ie.minY=ce),Ee>ie.maxX&&(ie.maxX=Ee),Ie>ie.maxY&&(ie.maxY=Ie)}return ie}function pl(k,D,O,V){var X=D.geometry,te=D.type,ie=[];if(te==="Point"||te==="MultiPoint")for(var U=0;U<X.length;U+=3)ie.push(X[U]),ie.push(X[U+1]),k.numPoints++,k.numSimplified++;else if(te==="LineString")Uo(ie,X,k,O,!1,!1);else if(te==="MultiLineString"||te==="Polygon")for(U=0;U<X.length;U++)Uo(ie,X[U],k,O,te==="Polygon",U===0);else if(te==="MultiPolygon")for(var H=0;H<X.length;H++){var ce=X[H];for(U=0;U<ce.length;U++)Uo(ie,ce[U],k,O,!0,U===0)}if(ie.length){var Ee=D.tags||null;if(te==="LineString"&&V.lineMetrics){for(var Ie in Ee={},D.tags)Ee[Ie]=D.tags[Ie];Ee.mapbox_clip_start=X.start/X.size,Ee.mapbox_clip_end=X.end/X.size}var ve={geometry:ie,type:te==="Polygon"||te==="MultiPolygon"?3:te==="LineString"||te==="MultiLineString"?2:1,tags:Ee};D.id!==null&&(ve.id=D.id),k.features.push(ve)}}function Uo(k,D,O,V,X,te){var ie=V*V;if(V>0&&D.size<(X?ie:V))O.numPoints+=D.length/3;else{for(var U=[],H=0;H<D.length;H+=3)(V===0||D[H+2]>ie)&&(O.numSimplified++,U.push(D[H]),U.push(D[H+1])),O.numPoints++;X&&function(ce,Ee){for(var Ie=0,ve=0,Te=ce.length,He=Te-2;ve<Te;He=ve,ve+=2)Ie+=(ce[ve]-ce[He])*(ce[ve+1]+ce[He+1]);if(Ie>0===Ee)for(ve=0,Te=ce.length;ve<Te/2;ve+=2){var We=ce[ve],ge=ce[ve+1];ce[ve]=ce[Te-2-ve],ce[ve+1]=ce[Te-1-ve],ce[Te-2-ve]=We,ce[Te-1-ve]=ge}}(U,te),k.push(U)}}function Wi(k,D){var O=(D=this.options=function(X,te){for(var ie in te)X[ie]=te[ie];return X}(Object.create(this.options),D)).debug;if(O&&console.time("preprocess data"),D.maxZoom<0||D.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(D.promoteId&&D.generateId)throw new Error("promoteId and generateId cannot be used together.");var V=function(X,te){var ie=[];if(X.type==="FeatureCollection")for(var U=0;U<X.features.length;U++)ri(ie,X.features[U],te,U);else ri(ie,X.type==="Feature"?X:{geometry:X},te);return ie}(k,D);this.tiles={},this.tileCoords=[],O&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",D.indexMaxZoom,D.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(V=function(X,te){var ie=te.buffer/te.extent,U=X,H=bi(X,1,-1-ie,ie,0,-1,2,te),ce=bi(X,1,1-ie,2+ie,0,-1,2,te);return(H||ce)&&(U=bi(X,1,-ie,1+ie,0,-1,2,te)||[],H&&(U=ps(H,1).concat(U)),ce&&(U=U.concat(ps(ce,-1)))),U}(V,D)).length&&this.splitTile(V,0,0,0),O&&(V.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Xi(k,D,O){return 32*((1<<k)*O+D)+k}function ba(k,D){var O=k.tileID.canonical;if(!this._geoJSONIndex)return D(null,null);var V=this._geoJSONIndex.getTile(O.z,O.x,O.y);if(!V)return D(null,null);var X=new ot(V.features),te=Qt(X);te.byteOffset===0&&te.byteLength===te.buffer.byteLength||(te=new Uint8Array(te)),D(null,{vectorTile:X,rawData:te.buffer})}dr.prototype.load=function(k){var D=this.options,O=D.log,V=D.minZoom,X=D.maxZoom,te=D.nodeSize;O&&console.time("total time");var ie="prepare "+k.length+" points";O&&console.time(ie),this.points=k;for(var U=[],H=0;H<k.length;H++)k[H].geometry&&U.push(Ot(k[H],H));this.trees[X+1]=new pr(U,En,ti,te,Float32Array),O&&console.timeEnd(ie);for(var ce=X;ce>=V;ce--){var Ee=+Date.now();U=this._cluster(U,ce),this.trees[ce]=new pr(U,En,ti,te,Float32Array),O&&console.log("z%d: %d clusters in %dms",ce,U.length,+Date.now()-Ee)}return O&&console.timeEnd("total time"),this},dr.prototype.getClusters=function(k,D){var O=((k[0]+180)%360+360)%360-180,V=Math.max(-90,Math.min(90,k[1])),X=k[2]===180?180:((k[2]+180)%360+360)%360-180,te=Math.max(-90,Math.min(90,k[3]));if(k[2]-k[0]>=360)O=-180,X=180;else if(O>X){var ie=this.getClusters([O,V,180,te],D),U=this.getClusters([-180,V,X,te],D);return ie.concat(U)}for(var H=this.trees[this._limitZoom(D)],ce=[],Ee=0,Ie=H.range(xi(O),kt(te),xi(X),kt(V));Ee<Ie.length;Ee+=1){var ve=H.points[Ie[Ee]];ce.push(ve.numPoints?Mi(ve):this.points[ve.index])}return ce},dr.prototype.getChildren=function(k){var D=this._getOriginId(k),O=this._getOriginZoom(k),V="No cluster with the specified id.",X=this.trees[O];if(!X)throw new Error(V);var te=X.points[D];if(!te)throw new Error(V);for(var ie=this.options.radius/(this.options.extent*Math.pow(2,O-1)),U=[],H=0,ce=X.within(te.x,te.y,ie);H<ce.length;H+=1){var Ee=X.points[ce[H]];Ee.parentId===k&&U.push(Ee.numPoints?Mi(Ee):this.points[Ee.index])}if(U.length===0)throw new Error(V);return U},dr.prototype.getLeaves=function(k,D,O){var V=[];return this._appendLeaves(V,k,D=D||10,O=O||0,0),V},dr.prototype.getTile=function(k,D,O){var V=this.trees[this._limitZoom(k)],X=Math.pow(2,k),te=this.options,ie=te.radius/te.extent,U=(O-ie)/X,H=(O+1+ie)/X,ce={features:[]};return this._addTileFeatures(V.range((D-ie)/X,U,(D+1+ie)/X,H),V.points,D,O,X,ce),D===0&&this._addTileFeatures(V.range(1-ie/X,U,1,H),V.points,X,O,X,ce),D===X-1&&this._addTileFeatures(V.range(0,U,ie/X,H),V.points,-1,O,X,ce),ce.features.length?ce:null},dr.prototype.getClusterExpansionZoom=function(k){for(var D=this._getOriginZoom(k)-1;D<=this.options.maxZoom;){var O=this.getChildren(k);if(D++,O.length!==1)break;k=O[0].properties.cluster_id}return D},dr.prototype._appendLeaves=function(k,D,O,V,X){for(var te=0,ie=this.getChildren(D);te<ie.length;te+=1){var U=ie[te],H=U.properties;if(H&&H.cluster?X+H.point_count<=V?X+=H.point_count:X=this._appendLeaves(k,H.cluster_id,O,V,X):X<V?X++:k.push(U),k.length===O)break}return X},dr.prototype._addTileFeatures=function(k,D,O,V,X,te){for(var ie=0,U=k;ie<U.length;ie+=1){var H=D[U[ie]],ce=H.numPoints,Ee={type:1,geometry:[[Math.round(this.options.extent*(H.x*X-O)),Math.round(this.options.extent*(H.y*X-V))]],tags:ce?ga(H):this.points[H.index].properties},Ie=void 0;ce?Ie=H.id:this.options.generateId?Ie=H.index:this.points[H.index].id&&(Ie=this.points[H.index].id),Ie!==void 0&&(Ee.id=Ie),te.features.push(Ee)}},dr.prototype._limitZoom=function(k){return Math.max(this.options.minZoom,Math.min(+k,this.options.maxZoom+1))},dr.prototype._cluster=function(k,D){for(var O=[],V=this.options,X=V.reduce,te=V.minPoints,ie=V.radius/(V.extent*Math.pow(2,D)),U=0;U<k.length;U++){var H=k[U];if(!(H.zoom<=D)){H.zoom=D;for(var ce=this.trees[D+1],Ee=ce.within(H.x,H.y,ie),Ie=H.numPoints||1,ve=Ie,Te=0,He=Ee;Te<He.length;Te+=1){var We=ce.points[He[Te]];We.zoom>D&&(ve+=We.numPoints||1)}if(ve>=te){for(var ge=H.x*Ie,Ve=H.y*Ie,Me=X&&Ie>1?this._map(H,!0):null,Re=(U<<5)+(D+1)+this.points.length,wt=0,Ue=Ee;wt<Ue.length;wt+=1){var At=ce.points[Ue[wt]];if(!(At.zoom<=D)){At.zoom=D;var Xt=At.numPoints||1;ge+=At.x*Xt,Ve+=At.y*Xt,At.parentId=Re,X&&(Me||(Me=this._map(H,!0)),X(Me,this._map(At)))}}H.parentId=Re,O.push(Sn(ge/ve,Ve/ve,Re,ve,Me))}else if(O.push(H),ve>1)for(var Et=0,Ut=Ee;Et<Ut.length;Et+=1){var Mt=ce.points[Ut[Et]];Mt.zoom<=D||(Mt.zoom=D,O.push(Mt))}}}return O},dr.prototype._getOriginId=function(k){return k-this.points.length>>5},dr.prototype._getOriginZoom=function(k){return(k-this.points.length)%32},dr.prototype._map=function(k,D){if(k.numPoints)return D?oo({},k.properties):k.properties;var O=this.points[k.index].properties,V=this.options.map(O);return D&&V===O?oo({},V):V},Wi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Wi.prototype.splitTile=function(k,D,O,V,X,te,ie){for(var U=[k,D,O,V],H=this.options,ce=H.debug;U.length;){V=U.pop(),O=U.pop(),D=U.pop(),k=U.pop();var Ee=1<<D,Ie=Xi(D,O,V),ve=this.tiles[Ie];if(!ve&&(ce>1&&console.time("creation"),ve=this.tiles[Ie]=cl(k,D,O,V,H),this.tileCoords.push({z:D,x:O,y:V}),ce)){ce>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",D,O,V,ve.numFeatures,ve.numPoints,ve.numSimplified),console.timeEnd("creation"));var Te="z"+D;this.stats[Te]=(this.stats[Te]||0)+1,this.total++}if(ve.source=k,X){if(D===H.maxZoom||D===X)continue;var He=1<<X-D;if(O!==Math.floor(te/He)||V!==Math.floor(ie/He))continue}else if(D===H.indexMaxZoom||ve.numPoints<=H.indexMaxPoints)continue;if(ve.source=null,k.length!==0){ce>1&&console.time("clipping");var We,ge,Ve,Me,Re,wt,Ue=.5*H.buffer/H.extent,At=.5-Ue,Xt=.5+Ue,Et=1+Ue;We=ge=Ve=Me=null,Re=bi(k,Ee,O-Ue,O+Xt,0,ve.minX,ve.maxX,H),wt=bi(k,Ee,O+At,O+Et,0,ve.minX,ve.maxX,H),k=null,Re&&(We=bi(Re,Ee,V-Ue,V+Xt,1,ve.minY,ve.maxY,H),ge=bi(Re,Ee,V+At,V+Et,1,ve.minY,ve.maxY,H),Re=null),wt&&(Ve=bi(wt,Ee,V-Ue,V+Xt,1,ve.minY,ve.maxY,H),Me=bi(wt,Ee,V+At,V+Et,1,ve.minY,ve.maxY,H),wt=null),ce>1&&console.timeEnd("clipping"),U.push(We||[],D+1,2*O,2*V),U.push(ge||[],D+1,2*O,2*V+1),U.push(Ve||[],D+1,2*O+1,2*V),U.push(Me||[],D+1,2*O+1,2*V+1)}}},Wi.prototype.getTile=function(k,D,O){var V=this.options,X=V.extent,te=V.debug;if(k<0||k>24)return null;var ie=1<<k,U=Xi(k,D=(D%ie+ie)%ie,O);if(this.tiles[U])return hs(this.tiles[U],X);te>1&&console.log("drilling down to z%d-%d-%d",k,D,O);for(var H,ce=k,Ee=D,Ie=O;!H&&ce>0;)ce--,Ee=Math.floor(Ee/2),Ie=Math.floor(Ie/2),H=this.tiles[Xi(ce,Ee,Ie)];return H&&H.source?(te>1&&console.log("found parent tile z%d-%d-%d",ce,Ee,Ie),te>1&&console.time("drilling down"),this.splitTile(H.source,ce,Ee,Ie,k,D,O),te>1&&console.timeEnd("drilling down"),this.tiles[U]?hs(this.tiles[U],X):null):null};var ds=function(k){function D(O,V,X,te){k.call(this,O,V,X,ba),te&&(this.loadGeoJSON=te)}return k&&(D.__proto__=k),(D.prototype=Object.create(k&&k.prototype)).constructor=D,D.prototype.loadData=function(O,V){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=V,this._pendingLoadDataParams=O,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},D.prototype._loadData=function(){var O=this;if(this._pendingCallback&&this._pendingLoadDataParams){var V=this._pendingCallback,X=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var te=!!(X&&X.request&&X.request.collectResourceTiming)&&new u.RequestPerformance(X.request);this.loadGeoJSON(X,function(ie,U){if(ie||!U)return V(ie);if(typeof U!="object")return V(new Error("Input data given to '"+X.source+"' is not a valid GeoJSON object."));(function ve(Te,He){var We,ge=Te&&Te.type;if(ge==="FeatureCollection")for(We=0;We<Te.features.length;We++)ve(Te.features[We],He);else if(ge==="GeometryCollection")for(We=0;We<Te.geometries.length;We++)ve(Te.geometries[We],He);else if(ge==="Feature")ve(Te.geometry,He);else if(ge==="Polygon")ne(Te.coordinates,He);else if(ge==="MultiPolygon")for(We=0;We<Te.coordinates.length;We++)ne(Te.coordinates[We],He);return Te})(U,!0);try{if(X.filter){var H=u.createExpression(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(H.result==="error")throw new Error(H.value.map(function(ve){return ve.key+": "+ve.message}).join(", "));var ce=U.features.filter(function(ve){return H.value.evaluate({zoom:0},ve)});U={type:"FeatureCollection",features:ce}}O._geoJSONIndex=X.cluster?new dr(function(ve){var Te=ve.superclusterOptions,He=ve.clusterProperties;if(!He||!Te)return Te;for(var We={},ge={},Ve={accumulated:null,zoom:0},Me={properties:null},Re=Object.keys(He),wt=0,Ue=Re;wt<Ue.length;wt+=1){var At=Ue[wt],Xt=He[At],Et=Xt[0],Ut=u.createExpression(Xt[1]),Mt=u.createExpression(typeof Et=="string"?[Et,["accumulated"],["get",At]]:Et);We[At]=Ut.value,ge[At]=Mt.value}return Te.map=function(pn){Me.properties=pn;for(var jt={},xr=0,Gt=Re;xr<Gt.length;xr+=1){var Ct=Gt[xr];jt[Ct]=We[Ct].evaluate(Ve,Me)}return jt},Te.reduce=function(pn,jt){Me.properties=jt;for(var xr=0,Gt=Re;xr<Gt.length;xr+=1){var Ct=Gt[xr];Ve.accumulated=pn[Ct],pn[Ct]=ge[Ct].evaluate(Ve,Me)}},Te}(X)).load(U.features):function(ve,Te){return new Wi(ve,Te)}(U,X.geojsonVtOptions)}catch(ve){return V(ve)}O.loaded={};var Ee={};if(te){var Ie=te.finish();Ie&&(Ee.resourceTiming={},Ee.resourceTiming[X.source]=JSON.parse(JSON.stringify(Ie)))}V(null,Ee)})}},D.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},D.prototype.reloadTile=function(O,V){var X=this.loaded;return X&&X[O.uid]?k.prototype.reloadTile.call(this,O,V):this.loadTile(O,V)},D.prototype.loadGeoJSON=function(O,V){if(O.request)u.getJSON(O.request,V);else{if(typeof O.data!="string")return V(new Error("Input data given to '"+O.source+"' is not a valid GeoJSON object."));try{return V(null,JSON.parse(O.data))}catch{return V(new Error("Input data given to '"+O.source+"' is not a valid GeoJSON object."))}}},D.prototype.removeSource=function(O,V){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),V()},D.prototype.getClusterExpansionZoom=function(O,V){try{V(null,this._geoJSONIndex.getClusterExpansionZoom(O.clusterId))}catch(X){V(X)}},D.prototype.getClusterChildren=function(O,V){try{V(null,this._geoJSONIndex.getChildren(O.clusterId))}catch(X){V(X)}},D.prototype.getClusterLeaves=function(O,V){try{V(null,this._geoJSONIndex.getLeaves(O.clusterId,O.limit,O.offset))}catch(X){V(X)}},D}(Oe),_r=function(k){var D=this;this.self=k,this.actor=new u.Actor(k,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Oe,geojson:ds},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(O,V){if(D.workerSourceTypes[O])throw new Error('Worker source with name "'+O+'" already registered.');D.workerSourceTypes[O]=V},this.self.registerRTLTextPlugin=function(O){if(u.plugin.isParsed())throw new Error("RTL text plugin already registered.");u.plugin.applyArabicShaping=O.applyArabicShaping,u.plugin.processBidirectionalText=O.processBidirectionalText,u.plugin.processStyledBidirectionalText=O.processStyledBidirectionalText}};return _r.prototype.setReferrer=function(k,D){this.referrer=D},_r.prototype.setImages=function(k,D,O){for(var V in this.availableImages[k]=D,this.workerSources[k]){var X=this.workerSources[k][V];for(var te in X)X[te].availableImages=D}O()},_r.prototype.setLayers=function(k,D,O){this.getLayerIndex(k).replace(D),O()},_r.prototype.updateLayers=function(k,D,O){this.getLayerIndex(k).update(D.layers,D.removedIds),O()},_r.prototype.loadTile=function(k,D,O){this.getWorkerSource(k,D.type,D.source).loadTile(D,O)},_r.prototype.loadDEMTile=function(k,D,O){this.getDEMWorkerSource(k,D.source).loadTile(D,O)},_r.prototype.reloadTile=function(k,D,O){this.getWorkerSource(k,D.type,D.source).reloadTile(D,O)},_r.prototype.abortTile=function(k,D,O){this.getWorkerSource(k,D.type,D.source).abortTile(D,O)},_r.prototype.removeTile=function(k,D,O){this.getWorkerSource(k,D.type,D.source).removeTile(D,O)},_r.prototype.removeDEMTile=function(k,D){this.getDEMWorkerSource(k,D.source).removeTile(D)},_r.prototype.removeSource=function(k,D,O){if(this.workerSources[k]&&this.workerSources[k][D.type]&&this.workerSources[k][D.type][D.source]){var V=this.workerSources[k][D.type][D.source];delete this.workerSources[k][D.type][D.source],V.removeSource!==void 0?V.removeSource(D,O):O()}},_r.prototype.loadWorkerSource=function(k,D,O){try{this.self.importScripts(D.url),O()}catch(V){O(V.toString())}},_r.prototype.syncRTLPluginState=function(k,D,O){try{u.plugin.setState(D);var V=u.plugin.getPluginURL();if(u.plugin.isLoaded()&&!u.plugin.isParsed()&&V!=null){this.self.importScripts(V);var X=u.plugin.isParsed();O(X?void 0:new Error("RTL Text Plugin failed to import scripts from "+V),X)}}catch(te){O(te.toString())}},_r.prototype.getAvailableImages=function(k){var D=this.availableImages[k];return D||(D=[]),D},_r.prototype.getLayerIndex=function(k){var D=this.layerIndexes[k];return D||(D=this.layerIndexes[k]=new K),D},_r.prototype.getWorkerSource=function(k,D,O){var V=this;return this.workerSources[k]||(this.workerSources[k]={}),this.workerSources[k][D]||(this.workerSources[k][D]={}),this.workerSources[k][D][O]||(this.workerSources[k][D][O]=new this.workerSourceTypes[D]({send:function(X,te,ie){V.actor.send(X,te,ie,k)}},this.getLayerIndex(k),this.getAvailableImages(k))),this.workerSources[k][D][O]},_r.prototype.getDEMWorkerSource=function(k,D){return this.demWorkerSources[k]||(this.demWorkerSources[k]={}),this.demWorkerSources[k][D]||(this.demWorkerSources[k][D]=new se),this.demWorkerSources[k][D]},_r.prototype.enforceCacheSizeLimit=function(k,D){u.enforceCacheSizeLimit(D)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new _r(self)),_r}),S(["./shared"],function(u){var z=u.createCommonjsModule(function(i){function s(d){return!o(d)}function o(d){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var x,b,I=new Blob([""],{type:"text/javascript"}),A=URL.createObjectURL(I);try{b=new Worker(A),x=!0}catch{x=!1}return b&&b.terminate(),URL.revokeObjectURL(A),x}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var x=document.createElement("canvas");x.width=x.height=1;var b=x.getContext("2d");if(!b)return!1;var I=b.getImageData(0,0,1,1);return I&&I.width===x.width}()?(c[v=d&&d.failIfMajorPerformanceCaveat]===void 0&&(c[v]=function(x){var b=function(A){var F=document.createElement("canvas"),B=Object.create(s.webGLContextAttributes);return B.failIfMajorPerformanceCaveat=A,F.probablySupportsContext?F.probablySupportsContext("webgl",B)||F.probablySupportsContext("experimental-webgl",B):F.supportsContext?F.supportsContext("webgl",B)||F.supportsContext("experimental-webgl",B):F.getContext("webgl",B)||F.getContext("experimental-webgl",B)}(x);if(!b)return!1;var I=b.createShader(b.VERTEX_SHADER);return!(!I||b.isContextLost())&&(b.shaderSource(I,"void main() {}"),b.compileShader(I),b.getShaderParameter(I,b.COMPILE_STATUS)===!0)}(v)),c[v]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var v}i.exports?i.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=o);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),M={create:function(i,s,o){var c=u.window.document.createElement(i);return s!==void 0&&(c.className=s),o&&o.appendChild(c),c},createNS:function(i,s){return u.window.document.createElementNS(i,s)}},K=u.window.document&&u.window.document.documentElement.style;function le(i){if(!K)return i[0];for(var s=0;s<i.length;s++)if(i[s]in K)return i[s];return i[0]}var Ce,ee=le(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);M.disableDrag=function(){K&&ee&&(Ce=K[ee],K[ee]="none")},M.enableDrag=function(){K&&ee&&(K[ee]=Ce)};var Se=le(["transform","WebkitTransform"]);M.setTransform=function(i,s){i.style[Se]=s};var Oe=!1;try{var Ze=Object.defineProperty({},"passive",{get:function(){Oe=!0}});u.window.addEventListener("test",Ze,Ze),u.window.removeEventListener("test",Ze,Ze)}catch{Oe=!1}M.addEventListener=function(i,s,o,c){c===void 0&&(c={}),i.addEventListener(s,o,"passive"in c&&Oe?c:c.capture)},M.removeEventListener=function(i,s,o,c){c===void 0&&(c={}),i.removeEventListener(s,o,"passive"in c&&Oe?c:c.capture)};var se=function(i){i.preventDefault(),i.stopPropagation(),u.window.removeEventListener("click",se,!0)};function ne(i){var s=i.userImage;return!!(s&&s.render&&s.render())&&(i.data.replace(new Uint8Array(s.data.buffer)),!0)}M.suppressClick=function(){u.window.addEventListener("click",se,!0),u.window.setTimeout(function(){u.window.removeEventListener("click",se,!0)},0)},M.mousePos=function(i,s){var o=i.getBoundingClientRect();return new u.Point(s.clientX-o.left-i.clientLeft,s.clientY-o.top-i.clientTop)},M.touchPos=function(i,s){for(var o=i.getBoundingClientRect(),c=[],d=0;d<s.length;d++)c.push(new u.Point(s[d].clientX-o.left-i.clientLeft,s[d].clientY-o.top-i.clientTop));return c},M.mouseButton=function(i){return u.window.InstallTrigger!==void 0&&i.button===2&&i.ctrlKey&&u.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:i.button},M.remove=function(i){i.parentNode&&i.parentNode.removeChild(i)};var oe=function(i){function s(){i.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.RGBAImage({width:1,height:1}),this.dirty=!0}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(o){if(this.loaded!==o&&(this.loaded=o,o)){for(var c=0,d=this.requestors;c<d.length;c+=1){var v=d[c];this._notify(v.ids,v.callback)}this.requestors=[]}},s.prototype.getImage=function(o){return this.images[o]},s.prototype.addImage=function(o,c){this._validate(o,c)&&(this.images[o]=c)},s.prototype._validate=function(o,c){var d=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new u.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchX" value'))),d=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new u.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchY" value'))),d=!1),this._validateContent(c.content,c)||(this.fire(new u.ErrorEvent(new Error('Image "'+o+'" has invalid "content" value'))),d=!1),d},s.prototype._validateStretch=function(o,c){if(!o)return!0;for(var d=0,v=0,x=o;v<x.length;v+=1){var b=x[v];if(b[0]<d||b[1]<b[0]||c<b[1])return!1;d=b[1]}return!0},s.prototype._validateContent=function(o,c){return!(o&&(o.length!==4||o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))},s.prototype.updateImage=function(o,c){c.version=this.images[o].version+1,this.images[o]=c,this.updatedImages[o]=!0},s.prototype.removeImage=function(o){var c=this.images[o];delete this.images[o],delete this.patterns[o],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(o,c){var d=!0;if(!this.isLoaded())for(var v=0,x=o;v<x.length;v+=1)this.images[x[v]]||(d=!1);this.isLoaded()||d?this._notify(o,c):this.requestors.push({ids:o,callback:c})},s.prototype._notify=function(o,c){for(var d={},v=0,x=o;v<x.length;v+=1){var b=x[v];this.images[b]||this.fire(new u.Event("styleimagemissing",{id:b}));var I=this.images[b];I?d[b]={data:I.data.clone(),pixelRatio:I.pixelRatio,sdf:I.sdf,version:I.version,stretchX:I.stretchX,stretchY:I.stretchY,content:I.content,hasRenderCallback:Boolean(I.userImage&&I.userImage.render)}:u.warnOnce('Image "'+b+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,d)},s.prototype.getPixelSize=function(){var o=this.atlasImage;return{width:o.width,height:o.height}},s.prototype.getPattern=function(o){var c=this.patterns[o],d=this.getImage(o);if(!d)return null;if(c&&c.position.version===d.version)return c.position;if(c)c.position.version=d.version;else{var v={w:d.data.width+2,h:d.data.height+2,x:0,y:0},x=new u.ImagePosition(v,d);this.patterns[o]={bin:v,position:x}}return this._updatePatternAtlas(),this.patterns[o].position},s.prototype.bind=function(o){var c=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new u.Texture(o,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var o=[];for(var c in this.patterns)o.push(this.patterns[c].bin);var d=u.potpack(o),v=d.w,x=d.h,b=this.atlasImage;for(var I in b.resize({width:v||1,height:x||1}),this.patterns){var A=this.patterns[I].bin,F=A.x+1,B=A.y+1,N=this.images[I].data,W=N.width,G=N.height;u.RGBAImage.copy(N,b,{x:0,y:0},{x:F,y:B},{width:W,height:G}),u.RGBAImage.copy(N,b,{x:0,y:G-1},{x:F,y:B-1},{width:W,height:1}),u.RGBAImage.copy(N,b,{x:0,y:0},{x:F,y:B+G},{width:W,height:1}),u.RGBAImage.copy(N,b,{x:W-1,y:0},{x:F-1,y:B},{width:1,height:G}),u.RGBAImage.copy(N,b,{x:0,y:0},{x:F+W,y:B},{width:1,height:G})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(o){for(var c=0,d=o;c<d.length;c+=1){var v=d[c];if(!this.callbackDispatchedThisFrame[v]){this.callbackDispatchedThisFrame[v]=!0;var x=this.images[v];ne(x)&&this.updateImage(v,x)}}},s}(u.Evented),_e=Le,we=Le,ot=1e20;function Le(i,s,o,c,d,v){this.fontSize=i||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=d||"sans-serif",this.fontWeight=v||"normal",this.radius=o||8;var x=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=x,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.d=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Int16Array(x),this.middle=Math.round(x/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function ut(i,s,o,c,d,v,x){for(var b=0;b<s;b++){for(var I=0;I<o;I++)c[I]=i[I*s+b];for(mt(c,d,v,x,o),I=0;I<o;I++)i[I*s+b]=d[I]}for(I=0;I<o;I++){for(b=0;b<s;b++)c[b]=i[I*s+b];for(mt(c,d,v,x,s),b=0;b<s;b++)i[I*s+b]=Math.sqrt(d[b])}}function mt(i,s,o,c,d){o[0]=0,c[0]=-ot,c[1]=+ot;for(var v=1,x=0;v<d;v++){for(var b=(i[v]+v*v-(i[o[x]]+o[x]*o[x]))/(2*v-2*o[x]);b<=c[x];)x--,b=(i[v]+v*v-(i[o[x]]+o[x]*o[x]))/(2*v-2*o[x]);o[++x]=v,c[x]=b,c[x+1]=+ot}for(v=0,x=0;v<d;v++){for(;c[x+1]<v;)x++;s[v]=(v-o[x])*(v-o[x])+i[o[x]]}}Le.prototype.draw=function(i){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(i,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var d=s.data[4*c+3]/255;this.gridOuter[c]=d===1?0:d===0?ot:Math.pow(Math.max(0,.5-d),2),this.gridInner[c]=d===1?ot:d===0?0:Math.pow(Math.max(0,d-.5),2)}for(ut(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),ut(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)o[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return o},_e.default=we;var Qe=function(i,s){this.requestManager=i,this.localIdeographFontFamily=s,this.entries={}};Qe.prototype.setURL=function(i){this.url=i},Qe.prototype.getGlyphs=function(i,s){var o=this,c=[];for(var d in i)for(var v=0,x=i[d];v<x.length;v+=1)c.push({stack:d,id:x[v]});u.asyncAll(c,function(b,I){var A=b.stack,F=b.id,B=o.entries[A];B||(B=o.entries[A]={glyphs:{},requests:{},ranges:{}});var N=B.glyphs[F];if(N===void 0){if(N=o._tinySDF(B,A,F))return B.glyphs[F]=N,void I(null,{stack:A,id:F,glyph:N});var W=Math.floor(F/256);if(256*W>65535)I(new Error("glyphs > 65535 not supported"));else if(B.ranges[W])I(null,{stack:A,id:F,glyph:N});else{var G=B.requests[W];G||(G=B.requests[W]=[],Qe.loadGlyphRange(A,W,o.url,o.requestManager,function(Y,j){if(j){for(var Q in j)o._doesCharSupportLocalGlyph(+Q)||(B.glyphs[+Q]=j[+Q]);B.ranges[W]=!0}for(var re=0,ue=G;re<ue.length;re+=1)(0,ue[re])(Y,j);delete B.requests[W]})),G.push(function(Y,j){Y?I(Y):j&&I(null,{stack:A,id:F,glyph:j[F]||null})})}}else I(null,{stack:A,id:F,glyph:N})},function(b,I){if(b)s(b);else if(I){for(var A={},F=0,B=I;F<B.length;F+=1){var N=B[F],W=N.stack,G=N.id,Y=N.glyph;(A[W]||(A[W]={}))[G]=Y&&{id:Y.id,bitmap:Y.bitmap.clone(),metrics:Y.metrics}}s(null,A)}})},Qe.prototype._doesCharSupportLocalGlyph=function(i){return!!this.localIdeographFontFamily&&(u.isChar["CJK Unified Ideographs"](i)||u.isChar["Hangul Syllables"](i)||u.isChar.Hiragana(i)||u.isChar.Katakana(i))},Qe.prototype._tinySDF=function(i,s,o){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(o)){var d=i.tinySDF;if(!d){var v="400";/bold/i.test(s)?v="900":/medium/i.test(s)?v="500":/light/i.test(s)&&(v="200"),d=i.tinySDF=new Qe.TinySDF(24,3,8,.25,c,v)}return{id:o,bitmap:new u.AlphaImage({width:30,height:30},d.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Qe.loadGlyphRange=function(i,s,o,c,d){var v=256*s,x=v+255,b=c.transformRequest(c.normalizeGlyphsURL(o).replace("{fontstack}",i).replace("{range}",v+"-"+x),u.ResourceType.Glyphs);u.getArrayBuffer(b,function(I,A){if(I)d(I);else if(A){for(var F={},B=0,N=u.parseGlyphPBF(A);B<N.length;B+=1){var W=N[B];F[W.id]=W}d(null,F)}})},Qe.TinySDF=_e;var Qt=function(){this.specification=u.styleSpec.light.position};Qt.prototype.possiblyEvaluate=function(i,s){return u.sphericalToCartesian(i.expression.evaluate(s))},Qt.prototype.interpolate=function(i,s,o){return{x:u.number(i.x,s.x,o),y:u.number(i.y,s.y,o),z:u.number(i.z,s.z,o)}};var Jr=new u.Properties({anchor:new u.DataConstantProperty(u.styleSpec.light.anchor),position:new Qt,color:new u.DataConstantProperty(u.styleSpec.light.color),intensity:new u.DataConstantProperty(u.styleSpec.light.intensity)}),Mr=function(i){function s(o){i.call(this),this._transitionable=new u.Transitionable(Jr),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(o,c){if(c===void 0&&(c={}),!this._validate(u.validateLight,o,c))for(var d in o){var v=o[d];u.endsWith(d,"-transition")?this._transitionable.setTransition(d.slice(0,-"-transition".length),v):this._transitionable.setValue(d,v)}},s.prototype.updateTransitions=function(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(o){this.properties=this._transitioning.possiblyEvaluate(o)},s.prototype._validate=function(o,c,d){return(!d||d.validate!==!1)&&u.emitValidationErrors(this,o.call(u.validateStyle,u.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.styleSpec})))},s}(u.Evented),gt=function(i,s){this.width=i,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};gt.prototype.getDash=function(i,s){var o=i.join(",")+String(s);return this.dashEntry[o]||(this.dashEntry[o]=this.addDash(i,s)),this.dashEntry[o]},gt.prototype.getDashRanges=function(i,s,o){var c=[],d=i.length%2==1?-i[i.length-1]*o:0,v=i[0]*o,x=!0;c.push({left:d,right:v,isDash:x,zeroLength:i[0]===0});for(var b=i[0],I=1;I<i.length;I++){var A=i[I];c.push({left:d=b*o,right:v=(b+=A)*o,isDash:x=!x,zeroLength:A===0})}return c},gt.prototype.addRoundDash=function(i,s,o){for(var c=s/2,d=-o;d<=o;d++)for(var v=this.width*(this.nextRow+o+d),x=0,b=i[x],I=0;I<this.width;I++){I/b.right>1&&(b=i[++x]);var A=Math.abs(I-b.left),F=Math.abs(I-b.right),B=Math.min(A,F),N=void 0,W=d/o*(c+1);if(b.isDash){var G=c-Math.abs(W);N=Math.sqrt(B*B+G*G)}else N=c-Math.sqrt(B*B+W*W);this.data[v+I]=Math.max(0,Math.min(255,N+128))}},gt.prototype.addRegularDash=function(i){for(var s=i.length-1;s>=0;--s){var o=i[s],c=i[s+1];o.zeroLength?i.splice(s,1):c&&c.isDash===o.isDash&&(c.left=o.left,i.splice(s,1))}var d=i[0],v=i[i.length-1];d.isDash===v.isDash&&(d.left=v.left-this.width,v.right=d.right+this.width);for(var x=this.width*this.nextRow,b=0,I=i[b],A=0;A<this.width;A++){A/I.right>1&&(I=i[++b]);var F=Math.abs(A-I.left),B=Math.abs(A-I.right),N=Math.min(F,B);this.data[x+A]=Math.max(0,Math.min(255,(I.isDash?N:-N)+128))}},gt.prototype.addDash=function(i,s){var o=s?7:0,c=2*o+1;if(this.nextRow+c>this.height)return u.warnOnce("LineAtlas out of space"),null;for(var d=0,v=0;v<i.length;v++)d+=i[v];if(d!==0){var x=this.width/d,b=this.getDashRanges(i,this.width,x);s?this.addRoundDash(b,x,o):this.addRegularDash(b)}var I={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:d};return this.nextRow+=c,this.dirty=!0,I},gt.prototype.bind=function(i){var s=i.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var rr=function i(s,o){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=u.uniqueId();for(var c=this.workerPool.acquire(this.id),d=0;d<c.length;d++){var v=new i.Actor(c[d],o,this.id);v.name="Worker "+d,this.actors.push(v)}};function qr(i,s,o){var c=function(d,v){if(d)return o(d);if(v){var x=u.pick(u.extend(v,i),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);v.vector_layers&&(x.vectorLayers=v.vector_layers,x.vectorLayerIds=x.vectorLayers.map(function(b){return b.id})),x.tiles=s.canonicalizeTileset(x,i.url),o(null,x)}};return i.url?u.getJSON(s.transformRequest(s.normalizeSourceURL(i.url),u.ResourceType.Source),c):u.browser.frame(function(){return c(null,i)})}rr.prototype.broadcast=function(i,s,o){u.asyncAll(this.actors,function(c,d){c.send(i,s,d)},o=o||function(){})},rr.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},rr.prototype.remove=function(){this.actors.forEach(function(i){i.remove()}),this.actors=[],this.workerPool.release(this.id)},rr.Actor=u.Actor;var nr=function(i,s,o){this.bounds=u.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=s||0,this.maxzoom=o||24};nr.prototype.validateBounds=function(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]},nr.prototype.contains=function(i){var s=Math.pow(2,i.z),o=Math.floor(u.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(u.mercatorYfromLat(this.bounds.getNorth())*s),d=Math.ceil(u.mercatorXfromLng(this.bounds.getEast())*s),v=Math.ceil(u.mercatorYfromLat(this.bounds.getSouth())*s);return i.x>=o&&i.x<d&&i.y>=c&&i.y<v};var un=function(i){function s(o,c,d,v){if(i.call(this),this.id=o,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.extend(this,u.pick(c,["url","scheme","tileSize","promoteId"])),this._options=u.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qr(this._options,this.map._requestManager,function(c,d){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new u.ErrorEvent(c)):d&&(u.extend(o,d),d.bounds&&(o.tileBounds=new nr(d.bounds,o.minzoom,o.maxzoom)),u.postTurnstileEvent(d.tiles,o.map._requestManager._customAccessToken),u.postMapLoadEvent(d.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setSourceProperty=function(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(o){var c=this;return this.setSourceProperty(function(){c._options.tiles=o}),this},s.prototype.setUrl=function(o){var c=this;return this.setSourceProperty(function(){c.url=o,c._options.url=o}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return u.extend({},this._options)},s.prototype.loadTile=function(o,c){var d=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(d,u.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:u.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(b,I){return delete o.request,o.aborted?c(null):b&&b.status!==404?c(b):(I&&I.resourceTiming&&(o.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&o.setExpiryData(I),o.loadVectorData(I,this.map.painter),u.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}v.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",v,x.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",v,x.bind(this)))},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(u.Evented),Zr=function(i){function s(o,c,d,v){i.call(this),this.id=o,this.dispatcher=d,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.extend({type:"raster"},c),u.extend(this,u.pick(c,["url","scheme","tileSize"]))}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qr(this._options,this.map._requestManager,function(c,d){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new u.ErrorEvent(c)):d&&(u.extend(o,d),d.bounds&&(o.tileBounds=new nr(d.bounds,o.minzoom,o.maxzoom)),u.postTurnstileEvent(d.tiles),u.postMapLoadEvent(d.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return u.extend({},this._options)},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.loadTile=function(o,c){var d=this,v=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=u.getImage(this.map._requestManager.transformRequest(v,u.ResourceType.Tile),function(x,b){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(x)o.state="errored",c(x);else if(b){d.map._refreshExpiredTiles&&o.setExpiryData(b),delete b.cacheControl,delete b.expires;var I=d.map.painter.context,A=I.gl;o.texture=d.map.painter.getTileTexture(b.width),o.texture?o.texture.update(b,{useMipmap:!0}):(o.texture=new u.Texture(I,b,A.RGBA,{useMipmap:!0}),o.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&A.texParameterf(A.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),o.state="loaded",u.cacheEntryPossiblyAdded(d.dispatcher),c(null)}})},s.prototype.abortTile=function(o,c){o.request&&(o.request.cancel(),delete o.request),c()},s.prototype.unloadTile=function(o,c){o.texture&&this.map.painter.saveTileTexture(o.texture),c()},s.prototype.hasTransition=function(){return!1},s}(u.Evented),cn=function(i){function s(o,c,d,v){i.call(this,o,c,d,v),this.type="raster-dem",this.maxzoom=22,this._options=u.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(o,c){var d=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function v(x,b){x&&(o.state="errored",c(x)),b&&(o.dem=b,o.needsHillshadePrepare=!0,o.state="loaded",c(null))}o.request=u.getImage(this.map._requestManager.transformRequest(d,u.ResourceType.Tile),function(x,b){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(x)o.state="errored",c(x);else if(b){this.map._refreshExpiredTiles&&o.setExpiryData(b),delete b.cacheControl,delete b.expires;var I=u.window.ImageBitmap&&b instanceof u.window.ImageBitmap&&u.offscreenCanvasSupported()?b:u.browser.getImageData(b,1),A={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:I,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",A,v.bind(this)))}}.bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},s.prototype._getNeighboringTiles=function(o){var c=o.canonical,d=Math.pow(2,c.z),v=(c.x-1+d)%d,x=c.x===0?o.wrap-1:o.wrap,b=(c.x+1+d)%d,I=c.x+1===d?o.wrap+1:o.wrap,A={};return A[new u.OverscaledTileID(o.overscaledZ,x,c.z,v,c.y).key]={backfilled:!1},A[new u.OverscaledTileID(o.overscaledZ,I,c.z,b,c.y).key]={backfilled:!1},c.y>0&&(A[new u.OverscaledTileID(o.overscaledZ,x,c.z,v,c.y-1).key]={backfilled:!1},A[new u.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},A[new u.OverscaledTileID(o.overscaledZ,I,c.z,b,c.y-1).key]={backfilled:!1}),c.y+1<d&&(A[new u.OverscaledTileID(o.overscaledZ,x,c.z,v,c.y+1).key]={backfilled:!1},A[new u.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},A[new u.OverscaledTileID(o.overscaledZ,I,c.z,b,c.y+1).key]={backfilled:!1}),A},s.prototype.unloadTile=function(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})},s}(Zr),bn=function(i){function s(o,c,d,v){i.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(v),this._data=c.data,this._options=u.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var x=u.EXTENT/this.tileSize;this.workerOptions=u.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*x,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*x,extent:u.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.EXTENT,radius:(c.clusterRadius||50)*x,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(){var o=this;this.fire(new u.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)o.fire(new u.ErrorEvent(c));else{var d={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(d.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new u.Event("data",d))}})},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setData=function(o){var c=this;return this._data=o,this.fire(new u.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(d){if(d)c.fire(new u.ErrorEvent(d));else{var v={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(v.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new u.Event("data",v))}}),this},s.prototype.getClusterExpansionZoom=function(o,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},c),this},s.prototype.getClusterChildren=function(o,c){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},c),this},s.prototype.getClusterLeaves=function(o,c,d,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:c,offset:d},v),this},s.prototype._updateWorkerData=function(o){var c=this;this._loaded=!1;var d=u.extend({},this.workerOptions),v=this._data;typeof v=="string"?(d.request=this.map._requestManager.transformRequest(u.browser.resolveURL(v),u.ResourceType.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(v),this.actor.send(this.type+".loadData",d,function(x,b){c._removed||b&&b.abandoned||(c._loaded=!0,b&&b.resourceTiming&&b.resourceTiming[c.id]&&(c._resourceTiming=b.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:d.source},null),o(x))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(o,c){var d=this,v=o.actor?"reloadTile":"loadTile";o.actor=this.actor,o.request=this.actor.send(v,{type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:u.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(x,b){return delete o.request,o.unloadVectorData(),o.aborted?c(null):x?c(x):(o.loadVectorData(b,d.map.painter,v==="reloadTile"),c(null))})},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0},s.prototype.unloadTile=function(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return u.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(u.Evented),Fe=u.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),pt=function(i){function s(o,c,d,v){i.call(this),this.id=o,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(o,c){var d=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this.url=this.options.url,u.getImage(this.map._requestManager.transformRequest(this.url,u.ResourceType.Image),function(v,x){d._loaded=!0,v?d.fire(new u.ErrorEvent(v)):x&&(d.image=x,o&&(d.coordinates=o),c&&c(),d._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(o){var c=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setCoordinates=function(o){var c=this;this.coordinates=o;var d=o.map(u.MercatorCoordinate.fromLngLat);this.tileID=function(x){for(var b=1/0,I=1/0,A=-1/0,F=-1/0,B=0,N=x;B<N.length;B+=1){var W=N[B];b=Math.min(b,W.x),I=Math.min(I,W.y),A=Math.max(A,W.x),F=Math.max(F,W.y)}var G=Math.max(A-b,F-I),Y=Math.max(0,Math.floor(-Math.log(G)/Math.LN2)),j=Math.pow(2,Y);return new u.CanonicalTileID(Y,Math.floor((b+A)/2*j),Math.floor((I+F)/2*j))}(d),this.minzoom=this.maxzoom=this.tileID.z;var v=d.map(function(x){return c.tileID.getTilePoint(x)._round()});return this._boundsArray=new u.StructArrayLayout4i8,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,u.EXTENT,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,u.EXTENT),this._boundsArray.emplaceBack(v[2].x,v[2].y,u.EXTENT,u.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var o=this.map.painter.context,c=o.gl;for(var d in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new u.Texture(o,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var v=this.tiles[d];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}},s.prototype.loadTile=function(o,c){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},c(null)):(o.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(u.Evented),bt=function(i){function s(o,c,d,v){i.call(this,o,c,d,v),this.roundZoom=!0,this.type="video",this.options=c}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1;var c=this.options;this.urls=[];for(var d=0,v=c.urls;d<v.length;d+=1)this.urls.push(this.map._requestManager.transformRequest(v[d],u.ResourceType.Source).url);u.getVideo(this.urls,function(x,b){o._loaded=!0,x?o.fire(new u.ErrorEvent(x)):b&&(o.video=b,o.video.loop=!0,o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(o){if(this.video){var c=this.video.seekable;o<c.start(0)||o>c.end(0)?this.fire(new u.ErrorEvent(new u.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=o}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var o=this.map.painter.context,c=o.gl;for(var d in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new u.Texture(o,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var v=this.tiles[d];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(pt),Yt=function(i){function s(o,c,d,v){i.call(this,o,c,d,v),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(x){return!Array.isArray(x)||x.length!==2||x.some(function(b){return typeof b!="number"})})||this.fire(new u.ErrorEvent(new u.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.ErrorEvent(new u.ValidationError("sources."+o,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.ErrorEvent(new u.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof u.window.HTMLCanvasElement||this.fire(new u.ErrorEvent(new u.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.ErrorEvent(new u.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof u.window.HTMLCanvasElement?this.options.canvas:u.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,d=c.gl;for(var v in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new u.Texture(c,this.canvas,d.RGBA,{premultiply:!0}),this.tiles){var x=this.tiles[v];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var o=0,c=[this.canvas.width,this.canvas.height];o<c.length;o+=1){var d=c[o];if(isNaN(d)||d<=0)return!0}return!1},s}(pt),pr={vector:un,raster:Zr,"raster-dem":cn,geojson:bn,video:bt,image:pt,canvas:Yt};function _i(i,s){var o=u.identity([]);return u.translate(o,o,[1,1,0]),u.scale(o,o,[.5*i.width,.5*i.height,1]),u.multiply(o,o,i.calculatePosMatrix(s.toUnwrapped()))}function dr(i,s,o,c,d,v){var x=function(Y,j,Q){if(Y)for(var re=0,ue=Y;re<ue.length;re+=1){var me=j[ue[re]];if(me&&me.source===Q&&me.type==="fill-extrusion")return!0}else for(var fe in j){var ye=j[fe];if(ye.source===Q&&ye.type==="fill-extrusion")return!0}return!1}(d&&d.layers,s,i.id),b=v.maxPitchScaleFactor(),I=i.tilesIn(c,b,x);I.sort(Sn);for(var A=[],F=0,B=I;F<B.length;F+=1){var N=B[F];A.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(s,o,i._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,d,v,b,_i(i.transform,N.tileID))})}var W=function(Y){for(var j={},Q={},re=0,ue=Y;re<ue.length;re+=1){var me=ue[re],fe=me.queryResults,ye=me.wrappedTileID,be=Q[ye]=Q[ye]||{};for(var Ae in fe)for(var ke=fe[Ae],je=be[Ae]=be[Ae]||{},et=j[Ae]=j[Ae]||[],it=0,nt=ke;it<nt.length;it+=1){var Lt=nt[it];je[Lt.featureIndex]||(je[Lt.featureIndex]=!0,et.push(Lt))}}return j}(A);for(var G in W)W[G].forEach(function(Y){var j=Y.feature,Q=i.getFeatureState(j.layer["source-layer"],j.id);j.source=j.layer.source,j.layer["source-layer"]&&(j.sourceLayer=j.layer["source-layer"]),j.state=Q});return W}function Sn(i,s){var o=i.tileID,c=s.tileID;return o.overscaledZ-c.overscaledZ||o.canonical.y-c.canonical.y||o.wrap-c.wrap||o.canonical.x-c.canonical.x}var Ot=function(i,s){this.max=i,this.onRemove=s,this.reset()};Ot.prototype.reset=function(){for(var i in this.data)for(var s=0,o=this.data[i];s<o.length;s+=1){var c=o[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},Ot.prototype.add=function(i,s,o){var c=this,d=i.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);var v={value:s,timeout:void 0};if(o!==void 0&&(v.timeout=setTimeout(function(){c.remove(i,v)},o)),this.data[d].push(v),this.order.push(d),this.order.length>this.max){var x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this},Ot.prototype.has=function(i){return i.wrapped().key in this.data},Ot.prototype.getAndRemove=function(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null},Ot.prototype._getAndRemoveByKey=function(i){var s=this.data[i].shift();return s.timeout&&clearTimeout(s.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),s.value},Ot.prototype.getByKey=function(i){var s=this.data[i];return s?s[0].value:null},Ot.prototype.get=function(i){return this.has(i)?this.data[i.wrapped().key][0].value:null},Ot.prototype.remove=function(i,s){if(!this.has(i))return this;var o=i.wrapped().key,c=s===void 0?0:this.data[o].indexOf(s),d=this.data[o][c];return this.data[o].splice(c,1),d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(d.value),this.order.splice(this.order.indexOf(o),1),this},Ot.prototype.setMaxSize=function(i){for(this.max=i;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},Ot.prototype.filter=function(i){var s=[];for(var o in this.data)for(var c=0,d=this.data[o];c<d.length;c+=1){var v=d[c];i(v.value)||s.push(v)}for(var x=0,b=s;x<b.length;x+=1){var I=b[x];this.remove(I.value.tileID,I)}};var Mi=function(i,s,o){this.context=i;var c=i.gl;this.buffer=c.createBuffer(),this.dynamicDraw=Boolean(o),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Mi.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Mi.prototype.updateData=function(i){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)},Mi.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ga={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},xi=function(i,s,o,c){this.length=s.length,this.attributes=o,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=i;var d=i.gl;this.buffer=d.createBuffer(),i.bindVertexBuffer.set(this.buffer),d.bufferData(d.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};xi.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},xi.prototype.updateData=function(i){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,i.arrayBuffer)},xi.prototype.enableAttributes=function(i,s){for(var o=0;o<this.attributes.length;o++){var c=s.attributes[this.attributes[o].name];c!==void 0&&i.enableVertexAttribArray(c)}},xi.prototype.setVertexAttribPointers=function(i,s,o){for(var c=0;c<this.attributes.length;c++){var d=this.attributes[c],v=s.attributes[d.name];v!==void 0&&i.vertexAttribPointer(v,d.components,i[ga[d.type]],!1,this.itemSize,d.offset+this.itemSize*(o||0))}},xi.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var kt=function(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};kt.prototype.get=function(){return this.current},kt.prototype.set=function(i){},kt.prototype.getDefault=function(){return this.default},kt.prototype.setDefault=function(){this.set(this.default)};var oo=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return u.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(kt),En=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)},s}(kt),ti=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)},s}(kt),Ou=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(kt),wi=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)},s}(kt),ls=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)},s}(kt),ri=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(o){var c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},s}(kt),Oo=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},s}(kt),_a=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}},s}(kt),ni=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},s}(kt),ii=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}},s}(kt),Fo=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)},s}(kt),bi=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}},s}(kt),sl=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.ONE,o.ZERO]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},s}(kt),ll=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return u.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(kt),us=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)},s}(kt),cs=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}},s}(kt),xa=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)},s}(kt),ul=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)},s}(kt),wa=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)},s}(kt),ps=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)},s}(kt),Bo=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(kt),hs=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},s}(kt),fs=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(kt),cl=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}},s}(kt),pl=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},s}(kt),Uo=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},s}(kt),Wi=function(i){function s(o){i.call(this,o),this.vao=o.extVertexArrayObject}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)},s}(kt),Xi=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},s}(kt),ba=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},s}(kt),ds=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},s}(kt),_r=function(i){function s(o,c){i.call(this,o),this.context=o,this.parent=c}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(kt),k=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},s}(_r),D=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(_r),O=function(i,s,o,c){this.context=i,this.width=s,this.height=o;var d=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new k(i,d),c&&(this.depthAttachment=new D(i,d))};O.prototype.destroy=function(){var i=this.context.gl,s=this.colorAttachment.get();if(s&&i.deleteTexture(s),this.depthAttachment){var o=this.depthAttachment.get();o&&i.deleteRenderbuffer(o)}i.deleteFramebuffer(this.framebuffer)};var V=function(i,s,o){this.func=i,this.mask=s,this.range=o};V.ReadOnly=!1,V.ReadWrite=!0,V.disabled=new V(519,V.ReadOnly,[0,1]);var X=function(i,s,o,c,d,v){this.test=i,this.ref=s,this.mask=o,this.fail=c,this.depthFail=d,this.pass=v};X.disabled=new X({func:519,mask:0},0,0,7680,7680,7680);var te=function(i,s,o){this.blendFunction=i,this.blendColor=s,this.mask=o};te.disabled=new te(te.Replace=[1,0],u.Color.transparent,[!1,!1,!1,!1]),te.unblended=new te(te.Replace,u.Color.transparent,[!0,!0,!0,!0]),te.alphaBlended=new te([1,771],u.Color.transparent,[!0,!0,!0,!0]);var ie=function(i,s,o){this.enable=i,this.mode=s,this.frontFace=o};ie.disabled=new ie(!1,1029,2305),ie.backCCW=new ie(!0,1029,2305);var U=function(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new oo(this),this.clearDepth=new En(this),this.clearStencil=new ti(this),this.colorMask=new Ou(this),this.depthMask=new wi(this),this.stencilMask=new ls(this),this.stencilFunc=new ri(this),this.stencilOp=new Oo(this),this.stencilTest=new _a(this),this.depthRange=new ni(this),this.depthTest=new ii(this),this.depthFunc=new Fo(this),this.blend=new bi(this),this.blendFunc=new sl(this),this.blendColor=new ll(this),this.blendEquation=new us(this),this.cullFace=new cs(this),this.cullFaceSide=new xa(this),this.frontFace=new ul(this),this.program=new wa(this),this.activeTexture=new ps(this),this.viewport=new Bo(this),this.bindFramebuffer=new hs(this),this.bindRenderbuffer=new fs(this),this.bindTexture=new cl(this),this.bindVertexBuffer=new pl(this),this.bindElementBuffer=new Uo(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Wi(this),this.pixelStoreUnpack=new Xi(this),this.pixelStoreUnpackPremultiplyAlpha=new ba(this),this.pixelStoreUnpackFlipY=new ds(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)};U.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},U.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},U.prototype.createIndexBuffer=function(i,s){return new Mi(this,i,s)},U.prototype.createVertexBuffer=function(i,s,o){return new xi(this,i,s,o)},U.prototype.createRenderbuffer=function(i,s,o){var c=this.gl,d=c.createRenderbuffer();return this.bindRenderbuffer.set(d),c.renderbufferStorage(c.RENDERBUFFER,i,s,o),this.bindRenderbuffer.set(null),d},U.prototype.createFramebuffer=function(i,s,o){return new O(this,i,s,o)},U.prototype.clear=function(i){var s=i.color,o=i.depth,c=this.gl,d=0;s&&(d|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(d|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),c.clear(d)},U.prototype.setCullFace=function(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))},U.prototype.setDepthMode=function(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)},U.prototype.setStencilMode=function(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)},U.prototype.setColorMode=function(i){u.deepEqual(i.blendFunction,te.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)},U.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var H=function(i){function s(o,c,d){var v=this;i.call(this),this.id=o,this.dispatcher=d,this.on("data",function(x){x.dataType==="source"&&x.sourceDataType==="metadata"&&(v._sourceLoaded=!0),v._sourceLoaded&&!v._paused&&x.dataType==="source"&&x.sourceDataType==="content"&&(v.reload(),v.transform&&v.update(v.transform))}),this.on("error",function(){v._sourceErrored=!0}),this._source=function(x,b,I,A){var F=new pr[b.type](x,b,I,A);if(F.id!==x)throw new Error("Expected Source id to be "+x+" instead of "+F.id);return u.bindAll(["load","abort","unload","serialize","prepare"],F),F}(o,c,d,this),this._tiles={},this._cache=new Ot(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new u.SourceFeatureState}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.onAdd=function(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)},s.prototype.onRemove=function(o){this._source&&this._source.onRemove&&this._source.onRemove(o)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var o in this._tiles){var c=this._tiles[o];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(o,c){return this._source.loadTile(o,c)},s.prototype._unloadTile=function(o){if(this._source.unloadTile)return this._source.unloadTile(o,function(){})},s.prototype._abortTile=function(o){if(this._source.abortTile)return this._source.abortTile(o,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(o){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var d=this._tiles[c];d.upload(o),d.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return u.values(this._tiles).map(function(o){return o.tileID}).sort(ce).map(function(o){return o.key})},s.prototype.getRenderableIds=function(o){var c=this,d=[];for(var v in this._tiles)this._isIdRenderable(v,o)&&d.push(this._tiles[v]);return o?d.sort(function(x,b){var I=x.tileID,A=b.tileID,F=new u.Point(I.canonical.x,I.canonical.y)._rotate(c.transform.angle),B=new u.Point(A.canonical.x,A.canonical.y)._rotate(c.transform.angle);return I.overscaledZ-A.overscaledZ||B.y-F.y||B.x-F.x}).map(function(x){return x.tileID.key}):d.map(function(x){return x.tileID}).sort(ce).map(function(x){return x.key})},s.prototype.hasRenderableParent=function(o){var c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(o,c){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var o in this._cache.reset(),this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")},s.prototype._reloadTile=function(o,c){var d=this._tiles[o];d&&(d.state!=="loading"&&(d.state=c),this._loadTile(d,this._tileLoaded.bind(this,d,o,c)))},s.prototype._tileLoaded=function(o,c,d,v){if(v)return o.state="errored",void(v.status!==404?this._source.fire(new u.ErrorEvent(v,{tile:o})):this.update(this.transform));o.timeAdded=u.browser.now(),d==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new u.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},s.prototype._backfillDEM=function(o){for(var c=this.getRenderableIds(),d=0;d<c.length;d++){var v=c[d];if(o.neighboringTiles&&o.neighboringTiles[v]){var x=this.getTileByID(v);b(o,x),b(x,o)}}function b(I,A){I.needsHillshadePrepare=!0;var F=A.tileID.canonical.x-I.tileID.canonical.x,B=A.tileID.canonical.y-I.tileID.canonical.y,N=Math.pow(2,I.tileID.canonical.z),W=A.tileID.key;F===0&&B===0||Math.abs(B)>1||(Math.abs(F)>1&&(Math.abs(F+N)===1?F+=N:Math.abs(F-N)===1&&(F-=N)),A.dem&&I.dem&&(I.dem.backfillBorder(A.dem,F,B),I.neighboringTiles&&I.neighboringTiles[W]&&(I.neighboringTiles[W].backfilled=!0)))}},s.prototype.getTile=function(o){return this.getTileByID(o.key)},s.prototype.getTileByID=function(o){return this._tiles[o]},s.prototype._retainLoadedChildren=function(o,c,d,v){for(var x in this._tiles){var b=this._tiles[x];if(!(v[x]||!b.hasData()||b.tileID.overscaledZ<=c||b.tileID.overscaledZ>d)){for(var I=b.tileID;b&&b.tileID.overscaledZ>c+1;){var A=b.tileID.scaledTo(b.tileID.overscaledZ-1);(b=this._tiles[A.key])&&b.hasData()&&(I=A)}for(var F=I;F.overscaledZ>c;)if(o[(F=F.scaledTo(F.overscaledZ-1)).key]){v[I.key]=I;break}}}},s.prototype.findLoadedParent=function(o,c){if(o.key in this._loadedParentTiles){var d=this._loadedParentTiles[o.key];return d&&d.tileID.overscaledZ>=c?d:null}for(var v=o.overscaledZ-1;v>=c;v--){var x=o.scaledTo(v),b=this._getLoadedTile(x);if(b)return b}},s.prototype._getLoadedTile=function(o){var c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(o.wrapped().key)},s.prototype.updateCacheSize=function(o){var c=Math.ceil(o.width/this._source.tileSize)+1,d=Math.ceil(o.height/this._source.tileSize)+1,v=Math.floor(c*d*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(x)},s.prototype.handleWrapJump=function(o){var c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){var d={};for(var v in this._tiles){var x=this._tiles[v];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+c),d[x.tileID.key]=x}for(var b in this._tiles=d,this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(var I in this._tiles)this._setTileReloadTimer(I,this._tiles[I])}},s.prototype.update=function(o){var c=this;if(this.transform=o,this._sourceLoaded&&!this._paused){var d;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?d=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(be){return new u.OverscaledTileID(be.canonical.z,be.wrap,be.canonical.z,be.canonical.x,be.canonical.y)}):(d=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(d=d.filter(function(be){return c._source.hasTile(be)}))):d=[];var v=o.coveringZoomLevel(this._source),x=Math.max(v-s.maxOverzooming,this._source.minzoom),b=Math.max(v+s.maxUnderzooming,this._source.minzoom),I=this._updateRetainedTiles(d,v);if(Ee(this._source.type)){for(var A={},F={},B=0,N=Object.keys(I);B<N.length;B+=1){var W=N[B],G=I[W],Y=this._tiles[W];if(Y&&!(Y.fadeEndTime&&Y.fadeEndTime<=u.browser.now())){var j=this.findLoadedParent(G,x);j&&(this._addTile(j.tileID),A[j.tileID.key]=j.tileID),F[W]=G}}for(var Q in this._retainLoadedChildren(F,v,b,I),A)I[Q]||(this._coveredTiles[Q]=!0,I[Q]=A[Q])}for(var re in I)this._tiles[re].clearFadeHold();for(var ue=0,me=u.keysDifference(this._tiles,I);ue<me.length;ue+=1){var fe=me[ue],ye=this._tiles[fe];ye.hasSymbolBuckets&&!ye.holdingForFade()?ye.setHoldDuration(this.map._fadeDuration):ye.hasSymbolBuckets&&!ye.symbolFadeFinished()||this._removeTile(fe)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)},s.prototype._updateRetainedTiles=function(o,c){for(var d={},v={},x=Math.max(c-s.maxOverzooming,this._source.minzoom),b=Math.max(c+s.maxUnderzooming,this._source.minzoom),I={},A=0,F=o;A<F.length;A+=1){var B=F[A],N=this._addTile(B);d[B.key]=B,N.hasData()||c<this._source.maxzoom&&(I[B.key]=B)}this._retainLoadedChildren(I,c,b,d);for(var W=0,G=o;W<G.length;W+=1){var Y=G[W],j=this._tiles[Y.key];if(!j.hasData()){if(c+1>this._source.maxzoom){var Q=Y.children(this._source.maxzoom)[0],re=this.getTile(Q);if(re&&re.hasData()){d[Q.key]=Q;continue}}else{var ue=Y.children(this._source.maxzoom);if(d[ue[0].key]&&d[ue[1].key]&&d[ue[2].key]&&d[ue[3].key])continue}for(var me=j.wasRequested(),fe=Y.overscaledZ-1;fe>=x;--fe){var ye=Y.scaledTo(fe);if(v[ye.key]||(v[ye.key]=!0,!(j=this.getTile(ye))&&me&&(j=this._addTile(ye)),j&&(d[ye.key]=ye,me=j.wasRequested(),j.hasData())))break}}}return d},s.prototype._updateLoadedParentTileCache=function(){for(var o in this._loadedParentTiles={},this._tiles){for(var c=[],d=void 0,v=this._tiles[o].tileID;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){d=this._loadedParentTiles[v.key];break}c.push(v.key);var x=v.scaledTo(v.overscaledZ-1);if(d=this._getLoadedTile(x))break;v=x}for(var b=0,I=c;b<I.length;b+=1)this._loadedParentTiles[I[b]]=d}},s.prototype._addTile=function(o){var c=this._tiles[o.key];if(c)return c;(c=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));var d=Boolean(c);return d||(c=new u.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))),c?(c.uses++,this._tiles[o.key]=c,d||this._source.fire(new u.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(o,c){var d=this;o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);var v=c.getExpiryTimeout();v&&(this._timers[o]=setTimeout(function(){d._reloadTile(o,"expired"),delete d._timers[o]},v))},s.prototype._removeTile=function(o){var c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var o in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(o);this._cache.reset()},s.prototype.tilesIn=function(o,c,d){var v=this,x=[],b=this.transform;if(!b)return x;for(var I=d?b.getCameraQueryGeometry(o):o,A=o.map(function(fe){return b.pointCoordinate(fe)}),F=I.map(function(fe){return b.pointCoordinate(fe)}),B=this.getIds(),N=1/0,W=1/0,G=-1/0,Y=-1/0,j=0,Q=F;j<Q.length;j+=1){var re=Q[j];N=Math.min(N,re.x),W=Math.min(W,re.y),G=Math.max(G,re.x),Y=Math.max(Y,re.y)}for(var ue=function(fe){var ye=v._tiles[B[fe]];if(!ye.holdingForFade()){var be=ye.tileID,Ae=Math.pow(2,b.zoom-ye.tileID.overscaledZ),ke=c*ye.queryPadding*u.EXTENT/ye.tileSize/Ae,je=[be.getTilePoint(new u.MercatorCoordinate(N,W)),be.getTilePoint(new u.MercatorCoordinate(G,Y))];if(je[0].x-ke<u.EXTENT&&je[0].y-ke<u.EXTENT&&je[1].x+ke>=0&&je[1].y+ke>=0){var et=A.map(function(nt){return be.getTilePoint(nt)}),it=F.map(function(nt){return be.getTilePoint(nt)});x.push({tile:ye,tileID:be,queryGeometry:et,cameraQueryGeometry:it,scale:Ae})}}},me=0;me<B.length;me++)ue(me);return x},s.prototype.getVisibleCoordinates=function(o){for(var c=this,d=this.getRenderableIds(o).map(function(I){return c._tiles[I].tileID}),v=0,x=d;v<x.length;v+=1){var b=x[v];b.posMatrix=this.transform.calculatePosMatrix(b.toUnwrapped())}return d},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ee(this._source.type))for(var o in this._tiles){var c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=u.browser.now())return!0}return!1},s.prototype.setFeatureState=function(o,c,d){this._state.updateState(o=o||"_geojsonTileLayer",c,d)},s.prototype.removeFeatureState=function(o,c,d){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,d)},s.prototype.getFeatureState=function(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(o,c,d){var v=this._tiles[o];v&&v.setDependencies(c,d)},s.prototype.reloadTilesForDependencies=function(o,c){for(var d in this._tiles)this._tiles[d].hasDependency(o,c)&&this._reloadTile(d,"reloading");this._cache.filter(function(v){return!v.hasDependency(o,c)})},s}(u.Evented);function ce(i,s){var o=Math.abs(2*i.wrap)-+(i.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return i.overscaledZ-s.overscaledZ||c-o||s.canonical.y-i.canonical.y||s.canonical.x-i.canonical.x}function Ee(i){return i==="raster"||i==="image"||i==="video"}function Ie(){return new u.window.Worker(zl.workerUrl)}H.maxOverzooming=10,H.maxUnderzooming=3;var ve="mapboxgl_preloaded_worker_pool",Te=function(){this.active={}};Te.prototype.acquire=function(i){if(!this.workers)for(this.workers=[];this.workers.length<Te.workerCount;)this.workers.push(new Ie);return this.active[i]=!0,this.workers.slice()},Te.prototype.release=function(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Te.prototype.isPreloaded=function(){return!!this.active[ve]},Te.prototype.numActive=function(){return Object.keys(this.active).length};var He,We=Math.floor(u.browser.hardwareConcurrency/2);function ge(){return He||(He=new Te),He}function Ve(i,s){var o={};for(var c in i)c!=="ref"&&(o[c]=i[c]);return u.refProperties.forEach(function(d){d in s&&(o[d]=s[d])}),o}function Me(i){i=i.slice();for(var s=Object.create(null),o=0;o<i.length;o++)s[i[o].id]=i[o];for(var c=0;c<i.length;c++)"ref"in i[c]&&(i[c]=Ve(i[c],s[i[c].ref]));return i}Te.workerCount=Math.max(Math.min(We,6),1);var Re={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function wt(i,s,o){o.push({command:Re.addSource,args:[i,s[i]]})}function Ue(i,s,o){s.push({command:Re.removeSource,args:[i]}),o[i]=!0}function At(i,s,o,c){Ue(i,o,c),wt(i,s,o)}function Xt(i,s,o){var c;for(c in i[o])if(i[o].hasOwnProperty(c)&&c!=="data"&&!u.deepEqual(i[o][c],s[o][c]))return!1;for(c in s[o])if(s[o].hasOwnProperty(c)&&c!=="data"&&!u.deepEqual(i[o][c],s[o][c]))return!1;return!0}function Et(i,s,o,c,d,v){var x;for(x in s=s||{},i=i||{})i.hasOwnProperty(x)&&(u.deepEqual(i[x],s[x])||o.push({command:v,args:[c,x,s[x],d]}));for(x in s)s.hasOwnProperty(x)&&!i.hasOwnProperty(x)&&(u.deepEqual(i[x],s[x])||o.push({command:v,args:[c,x,s[x],d]}))}function Ut(i){return i.id}function Mt(i,s){return i[s.id]=s,i}var pn=function(i,s){this.reset(i,s)};pn.prototype.reset=function(i,s){this.points=i||[],this._distances=[0];for(var o=1;o<this.points.length;o++)this._distances[o]=this._distances[o-1]+this.points[o].dist(this.points[o-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},pn.prototype.lerp=function(i){if(this.points.length===1)return this.points[0];i=u.clamp(i,0,1);for(var s=1,o=this._distances[s],c=i*this.paddedLength+this.padding;o<c&&s<this._distances.length;)o=this._distances[++s];var d=s-1,v=this._distances[d],x=o-v,b=x>0?(c-v)/x:0;return this.points[d].mult(1-b).add(this.points[s].mult(b))};var jt=function(i,s,o){var c=this.boxCells=[],d=this.circleCells=[];this.xCellCount=Math.ceil(i/o),this.yCellCount=Math.ceil(s/o);for(var v=0;v<this.xCellCount*this.yCellCount;v++)c.push([]),d.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=s,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function xr(i,s,o,c,d){var v=u.create();return s?(u.scale(v,v,[1/d,1/d,1]),o||u.rotateZ(v,v,c.angle)):u.multiply(v,c.labelPlaneMatrix,i),v}function Gt(i,s,o,c,d){if(s){var v=u.clone(i);return u.scale(v,v,[d,d,1]),o||u.rotateZ(v,v,-c.angle),v}return c.glCoordMatrix}function Ct(i,s){var o=[i.x,i.y,0,1];Wr(o,o,s);var c=o[3];return{point:new u.Point(o[0]/c,o[1]/c),signedDistanceFromCamera:c}}function Nt(i,s){return .5+i/s*.5}function Tn(i,s){var o=i[0]/i[3],c=i[1]/i[3];return o>=-s[0]&&o<=s[0]&&c>=-s[1]&&c<=s[1]}function ms(i,s,o,c,d,v,x,b){var I=c?i.textSizeData:i.iconSizeData,A=u.evaluateSizeForZoom(I,o.transform.zoom),F=[256/o.width*2+1,256/o.height*2+1],B=c?i.text.dynamicLayoutVertexArray:i.icon.dynamicLayoutVertexArray;B.clear();for(var N=i.lineVertexArray,W=c?i.text.placedSymbolArray:i.icon.placedSymbolArray,G=o.transform.width/o.transform.height,Y=!1,j=0;j<W.length;j++){var Q=W.get(j);if(Q.hidden||Q.writingMode===u.WritingMode.vertical&&!Y)hn(Q.numGlyphs,B);else{Y=!1;var re=[Q.anchorX,Q.anchorY,0,1];if(u.transformMat4(re,re,s),Tn(re,F)){var ue=Nt(o.transform.cameraToCenterDistance,re[3]),me=u.evaluateSizeForFeature(I,A,Q),fe=x?me/ue:me*ue,ye=new u.Point(Q.anchorX,Q.anchorY),be=Ct(ye,d).point,Ae={},ke=Fu(Q,fe,!1,b,s,d,v,i.glyphOffsetArray,N,B,be,ye,Ae,G);Y=ke.useVertical,(ke.notEnoughRoom||Y||ke.needsFlipping&&Fu(Q,fe,!0,b,s,d,v,i.glyphOffsetArray,N,B,be,ye,Ae,G).notEnoughRoom)&&hn(Q.numGlyphs,B)}else hn(Q.numGlyphs,B)}}c?i.text.dynamicLayoutVertexBuffer.updateData(B):i.icon.dynamicLayoutVertexBuffer.updateData(B)}function Gr(i,s,o,c,d,v,x,b,I,A,F){var B=b.glyphStartIndex+b.numGlyphs,N=b.lineStartIndex,W=b.lineStartIndex+b.lineLength,G=s.getoffsetX(b.glyphStartIndex),Y=s.getoffsetX(B-1),j=wr(i*G,o,c,d,v,x,b.segment,N,W,I,A,F);if(!j)return null;var Q=wr(i*Y,o,c,d,v,x,b.segment,N,W,I,A,F);return Q?{first:j,last:Q}:null}function In(i,s,o,c){return i===u.WritingMode.horizontal&&Math.abs(o.y-s.y)>Math.abs(o.x-s.x)*c?{useVertical:!0}:(i===u.WritingMode.vertical?s.y<o.y:s.x>o.x)?{needsFlipping:!0}:null}function Fu(i,s,o,c,d,v,x,b,I,A,F,B,N,W){var G,Y=s/24,j=i.lineOffsetX*Y,Q=i.lineOffsetY*Y;if(i.numGlyphs>1){var re=i.glyphStartIndex+i.numGlyphs,ue=i.lineStartIndex,me=i.lineStartIndex+i.lineLength,fe=Gr(Y,b,j,Q,o,F,B,i,I,v,N);if(!fe)return{notEnoughRoom:!0};var ye=Ct(fe.first.point,x).point,be=Ct(fe.last.point,x).point;if(c&&!o){var Ae=In(i.writingMode,ye,be,W);if(Ae)return Ae}G=[fe.first];for(var ke=i.glyphStartIndex+1;ke<re-1;ke++)G.push(wr(Y*b.getoffsetX(ke),j,Q,o,F,B,i.segment,ue,me,I,v,N));G.push(fe.last)}else{if(c&&!o){var je=Ct(B,d).point,et=i.lineStartIndex+i.segment+1,it=new u.Point(I.getx(et),I.gety(et)),nt=Ct(it,d),Lt=nt.signedDistanceFromCamera>0?nt.point:ys(B,it,je,1,d),Ge=In(i.writingMode,je,Lt,W);if(Ge)return Ge}var dt=wr(Y*b.getoffsetX(i.glyphStartIndex),j,Q,o,F,B,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,I,v,N);if(!dt)return{notEnoughRoom:!0};G=[dt]}for(var _t=0,ft=G;_t<ft.length;_t+=1){var ht=ft[_t];u.addDynamicAttributes(A,ht.point,ht.angle)}return{}}function ys(i,s,o,c,d){var v=Ct(i.add(i.sub(s)._unit()),d).point,x=o.sub(v);return o.add(x._mult(c/x.mag()))}function wr(i,s,o,c,d,v,x,b,I,A,F,B){var N=c?i-s:i+s,W=N>0?1:-1,G=0;c&&(W*=-1,G=Math.PI),W<0&&(G+=Math.PI);for(var Y=W>0?b+x:b+x+1,j=d,Q=d,re=0,ue=0,me=Math.abs(N),fe=[];re+ue<=me;){if((Y+=W)<b||Y>=I)return null;if(Q=j,fe.push(j),(j=B[Y])===void 0){var ye=new u.Point(A.getx(Y),A.gety(Y)),be=Ct(ye,F);if(be.signedDistanceFromCamera>0)j=B[Y]=be.point;else{var Ae=Y-W;j=ys(re===0?v:new u.Point(A.getx(Ae),A.gety(Ae)),ye,Q,me-re+1,F)}}re+=ue,ue=Q.dist(j)}var ke=(me-re)/ue,je=j.sub(Q),et=je.mult(ke)._add(Q);et._add(je._unit()._perp()._mult(o*W));var it=G+Math.atan2(j.y-Q.y,j.x-Q.x);return fe.push(et),{point:et,angle:it,path:fe}}jt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},jt.prototype.insert=function(i,s,o,c,d){this._forEachCell(s,o,c,d,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(s),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(d)},jt.prototype.insertCircle=function(i,s,o,c){this._forEachCell(s-c,o-c,s+c,o+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(s),this.circles.push(o),this.circles.push(c)},jt.prototype._insertBoxCell=function(i,s,o,c,d,v){this.boxCells[d].push(v)},jt.prototype._insertCircleCell=function(i,s,o,c,d,v){this.circleCells[d].push(v)},jt.prototype._query=function(i,s,o,c,d,v){if(o<0||i>this.width||c<0||s>this.height)return!d&&[];var x=[];if(i<=0&&s<=0&&this.width<=o&&this.height<=c){if(d)return!0;for(var b=0;b<this.boxKeys.length;b++)x.push({key:this.boxKeys[b],x1:this.bboxes[4*b],y1:this.bboxes[4*b+1],x2:this.bboxes[4*b+2],y2:this.bboxes[4*b+3]});for(var I=0;I<this.circleKeys.length;I++){var A=this.circles[3*I],F=this.circles[3*I+1],B=this.circles[3*I+2];x.push({key:this.circleKeys[I],x1:A-B,y1:F-B,x2:A+B,y2:F+B})}return v?x.filter(v):x}return this._forEachCell(i,s,o,c,this._queryCell,x,{hitTest:d,seenUids:{box:{},circle:{}}},v),d?x.length>0:x},jt.prototype._queryCircle=function(i,s,o,c,d){var v=i-o,x=i+o,b=s-o,I=s+o;if(x<0||v>this.width||I<0||b>this.height)return!c&&[];var A=[];return this._forEachCell(v,b,x,I,this._queryCellCircle,A,{hitTest:c,circle:{x:i,y:s,radius:o},seenUids:{box:{},circle:{}}},d),c?A.length>0:A},jt.prototype.query=function(i,s,o,c,d){return this._query(i,s,o,c,!1,d)},jt.prototype.hitTest=function(i,s,o,c,d){return this._query(i,s,o,c,!0,d)},jt.prototype.hitTestCircle=function(i,s,o,c){return this._queryCircle(i,s,o,!0,c)},jt.prototype._queryCell=function(i,s,o,c,d,v,x,b){var I=x.seenUids,A=this.boxCells[d];if(A!==null)for(var F=this.bboxes,B=0,N=A;B<N.length;B+=1){var W=N[B];if(!I.box[W]){I.box[W]=!0;var G=4*W;if(i<=F[G+2]&&s<=F[G+3]&&o>=F[G+0]&&c>=F[G+1]&&(!b||b(this.boxKeys[W]))){if(x.hitTest)return v.push(!0),!0;v.push({key:this.boxKeys[W],x1:F[G],y1:F[G+1],x2:F[G+2],y2:F[G+3]})}}}var Y=this.circleCells[d];if(Y!==null)for(var j=this.circles,Q=0,re=Y;Q<re.length;Q+=1){var ue=re[Q];if(!I.circle[ue]){I.circle[ue]=!0;var me=3*ue;if(this._circleAndRectCollide(j[me],j[me+1],j[me+2],i,s,o,c)&&(!b||b(this.circleKeys[ue]))){if(x.hitTest)return v.push(!0),!0;var fe=j[me],ye=j[me+1],be=j[me+2];v.push({key:this.circleKeys[ue],x1:fe-be,y1:ye-be,x2:fe+be,y2:ye+be})}}}},jt.prototype._queryCellCircle=function(i,s,o,c,d,v,x,b){var I=x.circle,A=x.seenUids,F=this.boxCells[d];if(F!==null)for(var B=this.bboxes,N=0,W=F;N<W.length;N+=1){var G=W[N];if(!A.box[G]){A.box[G]=!0;var Y=4*G;if(this._circleAndRectCollide(I.x,I.y,I.radius,B[Y+0],B[Y+1],B[Y+2],B[Y+3])&&(!b||b(this.boxKeys[G])))return v.push(!0),!0}}var j=this.circleCells[d];if(j!==null)for(var Q=this.circles,re=0,ue=j;re<ue.length;re+=1){var me=ue[re];if(!A.circle[me]){A.circle[me]=!0;var fe=3*me;if(this._circlesCollide(Q[fe],Q[fe+1],Q[fe+2],I.x,I.y,I.radius)&&(!b||b(this.circleKeys[me])))return v.push(!0),!0}}},jt.prototype._forEachCell=function(i,s,o,c,d,v,x,b){for(var I=this._convertToXCellCoord(i),A=this._convertToYCellCoord(s),F=this._convertToXCellCoord(o),B=this._convertToYCellCoord(c),N=I;N<=F;N++)for(var W=A;W<=B;W++)if(d.call(this,i,s,o,c,this.xCellCount*W+N,v,x,b))return},jt.prototype._convertToXCellCoord=function(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))},jt.prototype._convertToYCellCoord=function(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))},jt.prototype._circlesCollide=function(i,s,o,c,d,v){var x=c-i,b=d-s,I=o+v;return I*I>x*x+b*b},jt.prototype._circleAndRectCollide=function(i,s,o,c,d,v,x){var b=(v-c)/2,I=Math.abs(i-(c+b));if(I>b+o)return!1;var A=(x-d)/2,F=Math.abs(s-(d+A));if(F>A+o)return!1;if(I<=b||F<=A)return!0;var B=I-b,N=F-A;return B*B+N*N<=o*o};var vs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function hn(i,s){for(var o=0;o<i;o++){var c=s.length;s.resize(c+4),s.float32.set(vs,3*c)}}function Wr(i,s,o){var c=s[0],d=s[1];return i[0]=o[0]*c+o[4]*d+o[12],i[1]=o[1]*c+o[5]*d+o[13],i[3]=o[3]*c+o[7]*d+o[15],i}var oi=function(i,s,o){s===void 0&&(s=new jt(i.width+200,i.height+200,25)),o===void 0&&(o=new jt(i.width+200,i.height+200,25)),this.transform=i,this.grid=s,this.ignoredGrid=o,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+100,this.screenBottomBoundary=i.height+100,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200};function or(i,s,o){return s*(u.EXTENT/(i.tileSize*Math.pow(2,o-i.tileID.overscaledZ)))}oi.prototype.placeCollisionBox=function(i,s,o,c,d){var v=this.projectAndGetPerspectiveRatio(c,i.anchorPointX,i.anchorPointY),x=o*v.perspectiveRatio,b=i.x1*x+v.point.x,I=i.y1*x+v.point.y,A=i.x2*x+v.point.x,F=i.y2*x+v.point.y;return!this.isInsideGrid(b,I,A,F)||!s&&this.grid.hitTest(b,I,A,F,d)?{box:[],offscreen:!1}:{box:[b,I,A,F],offscreen:this.isOffscreen(b,I,A,F)}},oi.prototype.placeCollisionCircles=function(i,s,o,c,d,v,x,b,I,A,F,B,N){var W=[],G=new u.Point(s.anchorX,s.anchorY),Y=Ct(G,v),j=Nt(this.transform.cameraToCenterDistance,Y.signedDistanceFromCamera),Q=(A?d/j:d*j)/u.ONE_EM,re=Ct(G,x).point,ue=Gr(Q,c,s.lineOffsetX*Q,s.lineOffsetY*Q,!1,re,G,s,o,x,{}),me=!1,fe=!1,ye=!0;if(ue){for(var be=.5*B*j+N,Ae=new u.Point(-100,-100),ke=new u.Point(this.screenRightBoundary,this.screenBottomBoundary),je=new pn,et=ue.first,it=ue.last,nt=[],Lt=et.path.length-1;Lt>=1;Lt--)nt.push(et.path[Lt]);for(var Ge=1;Ge<it.path.length;Ge++)nt.push(it.path[Ge]);var dt=2.5*be;if(b){var _t=nt.map(function(pi){return Ct(pi,b)});nt=_t.some(function(pi){return pi.signedDistanceFromCamera<=0})?[]:_t.map(function(pi){return pi.point})}var ft=[];if(nt.length>0){for(var ht=nt[0].clone(),vt=nt[0].clone(),ct=1;ct<nt.length;ct++)ht.x=Math.min(ht.x,nt[ct].x),ht.y=Math.min(ht.y,nt[ct].y),vt.x=Math.max(vt.x,nt[ct].x),vt.y=Math.max(vt.y,nt[ct].y);ft=ht.x>=Ae.x&&vt.x<=ke.x&&ht.y>=Ae.y&&vt.y<=ke.y?[nt]:vt.x<Ae.x||ht.x>ke.x||vt.y<Ae.y||ht.y>ke.y?[]:u.clipLine([nt],Ae.x,Ae.y,ke.x,ke.y)}for(var st=0,Fr=ft;st<Fr.length;st+=1){var mr;je.reset(Fr[st],.25*be),mr=je.length<=.5*be?1:Math.ceil(je.paddedLength/dt)+1;for(var on=0;on<mr;on++){var Hr=on/Math.max(mr-1,1),hr=je.lerp(Hr),br=hr.x+100,Vn=hr.y+100;W.push(br,Vn,be,0);var yn=br-be,wo=Vn-be,Pn=br+be,ki=Vn+be;if(ye=ye&&this.isOffscreen(yn,wo,Pn,ki),fe=fe||this.isInsideGrid(yn,wo,Pn,ki),!i&&this.grid.hitTestCircle(br,Vn,be,F)&&(me=!0,!I))return{circles:[],offscreen:!1,collisionDetected:me}}}}return{circles:!I&&me||!fe?[]:W,offscreen:ye,collisionDetected:me}},oi.prototype.queryRenderedSymbols=function(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],o=1/0,c=1/0,d=-1/0,v=-1/0,x=0,b=i;x<b.length;x+=1){var I=b[x],A=new u.Point(I.x+100,I.y+100);o=Math.min(o,A.x),c=Math.min(c,A.y),d=Math.max(d,A.x),v=Math.max(v,A.y),s.push(A)}for(var F={},B={},N=0,W=this.grid.query(o,c,d,v).concat(this.ignoredGrid.query(o,c,d,v));N<W.length;N+=1){var G=W[N],Y=G.key;if(F[Y.bucketInstanceId]===void 0&&(F[Y.bucketInstanceId]={}),!F[Y.bucketInstanceId][Y.featureIndex]){var j=[new u.Point(G.x1,G.y1),new u.Point(G.x2,G.y1),new u.Point(G.x2,G.y2),new u.Point(G.x1,G.y2)];u.polygonIntersectsPolygon(s,j)&&(F[Y.bucketInstanceId][Y.featureIndex]=!0,B[Y.bucketInstanceId]===void 0&&(B[Y.bucketInstanceId]=[]),B[Y.bucketInstanceId].push(Y.featureIndex))}}return B},oi.prototype.insertCollisionBox=function(i,s,o,c,d){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:o,featureIndex:c,collisionGroupID:d},i[0],i[1],i[2],i[3])},oi.prototype.insertCollisionCircles=function(i,s,o,c,d){for(var v=s?this.ignoredGrid:this.grid,x={bucketInstanceId:o,featureIndex:c,collisionGroupID:d},b=0;b<i.length;b+=4)v.insertCircle(x,i[b],i[b+1],i[b+2])},oi.prototype.projectAndGetPerspectiveRatio=function(i,s,o){var c=[s,o,0,1];return Wr(c,c,i),{point:new u.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},oi.prototype.isOffscreen=function(i,s,o,c){return o<100||i>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},oi.prototype.isInsideGrid=function(i,s,o,c){return o>=0&&i<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},oi.prototype.getViewportMatrix=function(){var i=u.identity([]);return u.translate(i,i,[-100,-100,0]),i};var Si=function(i,s,o,c){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?s:-s))):c&&o?1:0,this.placed=o};Si.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Xn=function(i,s,o,c,d){this.text=new Si(i?i.text:null,s,o,d),this.icon=new Si(i?i.icon:null,s,c,d)};Xn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var zp=function(i,s,o){this.text=i,this.icon=s,this.skipFade=o},ai=function(){this.invProjMatrix=u.create(),this.viewportMatrix=u.create(),this.circles=[]},id=function(i,s,o,c,d){this.bucketInstanceId=i,this.featureIndex=s,this.sourceLayerIndex=o,this.bucketIndex=c,this.tileID=d},Hi=function(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}};function en(i,s,o,c,d){var v=u.getAnchorAlignment(i),x=-(v.horizontalAlign-.5)*s,b=-(v.verticalAlign-.5)*o,I=u.evaluateVariableOffset(i,c);return new u.Point(x+I[0]*d,b+I[1]*d)}function Di(i,s,o,c,d,v){var x=i.x1,b=i.x2,I=i.y1,A=i.y2,F=i.anchorPointX,B=i.anchorPointY,N=new u.Point(s,o);return c&&N._rotate(d?v:-v),{x1:x+N.x,y1:I+N.y,x2:b+N.x,y2:A+N.y,anchorPointX:F,anchorPointY:B}}Hi.prototype.get=function(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){var s=++this.maxGroupID;this.collisionGroups[i]={ID:s,predicate:function(o){return o.collisionGroupID===s}}}return this.collisionGroups[i]};var fn=function(i,s,o,c){this.transform=i.clone(),this.collisionIndex=new oi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new Hi(o),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function No(i,s,o,c,d){i.emplaceBack(s?1:0,o?1:0,c||0,d||0),i.emplaceBack(s?1:0,o?1:0,c||0,d||0),i.emplaceBack(s?1:0,o?1:0,c||0,d||0),i.emplaceBack(s?1:0,o?1:0,c||0,d||0)}fn.prototype.getBucketParts=function(i,s,o,c){var d=o.getBucket(s),v=o.latestFeatureIndex;if(d&&v&&s.id===d.layerIds[0]){var x=o.collisionBoxArray,b=d.layers[0].layout,I=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),A=o.tileSize/u.EXTENT,F=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),B=b.get("text-pitch-alignment")==="map",N=b.get("text-rotation-alignment")==="map",W=or(o,1,this.transform.zoom),G=xr(F,B,N,this.transform,W),Y=null;if(B){var j=Gt(F,B,N,this.transform,W);Y=u.multiply([],this.transform.labelPlaneMatrix,j)}this.retainedQueryData[d.bucketInstanceId]=new id(d.bucketInstanceId,v,d.sourceLayerIndex,d.index,o.tileID);var Q={bucket:d,layout:b,posMatrix:F,textLabelPlaneMatrix:G,labelToScreenMatrix:Y,scale:I,textPixelRatio:A,holdingForFade:o.holdingForFade(),collisionBoxArray:x,partiallyEvaluatedTextSize:u.evaluateSizeForZoom(d.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(d.sourceID)};if(c)for(var re=0,ue=d.sortKeyRanges;re<ue.length;re+=1){var me=ue[re];i.push({sortKey:me.sortKey,symbolInstanceStart:me.symbolInstanceStart,symbolInstanceEnd:me.symbolInstanceEnd,parameters:Q})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:d.symbolInstances.length,parameters:Q})}},fn.prototype.attemptAnchorPlacement=function(i,s,o,c,d,v,x,b,I,A,F,B,N,W,G){var Y,j=[B.textOffset0,B.textOffset1],Q=en(i,o,c,j,d),re=this.collisionIndex.placeCollisionBox(Di(s,Q.x,Q.y,v,x,this.transform.angle),F,b,I,A.predicate);if(!G||this.collisionIndex.placeCollisionBox(Di(G,Q.x,Q.y,v,x,this.transform.angle),F,b,I,A.predicate).box.length!==0)return re.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[B.crossTileID]&&this.prevPlacement.placements[B.crossTileID]&&this.prevPlacement.placements[B.crossTileID].text&&(Y=this.prevPlacement.variableOffsets[B.crossTileID].anchor),this.variableOffsets[B.crossTileID]={textOffset:j,width:o,height:c,anchor:i,textBoxScale:d,prevAnchor:Y},this.markUsedJustification(N,i,B,W),N.allowVerticalPlacement&&(this.markUsedOrientation(N,W,B),this.placedOrientations[B.crossTileID]=W),{shift:Q,placedGlyphBoxes:re}):void 0},fn.prototype.placeLayerBucketPart=function(i,s,o){var c=this,d=i.parameters,v=d.bucket,x=d.layout,b=d.posMatrix,I=d.textLabelPlaneMatrix,A=d.labelToScreenMatrix,F=d.textPixelRatio,B=d.holdingForFade,N=d.collisionBoxArray,W=d.partiallyEvaluatedTextSize,G=d.collisionGroup,Y=x.get("text-optional"),j=x.get("icon-optional"),Q=x.get("text-allow-overlap"),re=x.get("icon-allow-overlap"),ue=x.get("text-rotation-alignment")==="map",me=x.get("text-pitch-alignment")==="map",fe=x.get("icon-text-fit")!=="none",ye=x.get("symbol-z-order")==="viewport-y",be=Q&&(re||!v.hasIconData()||j),Ae=re&&(Q||!v.hasTextData()||Y);!v.collisionArrays&&N&&v.deserializeCollisionBoxes(N);var ke=function(Ge,dt){if(!s[Ge.crossTileID])if(B)c.placements[Ge.crossTileID]=new zp(!1,!1,!1);else{var _t,ft=!1,ht=!1,vt=!0,ct=null,st={box:null,offscreen:null},Fr={box:null,offscreen:null},mr=null,on=null,Hr=0,hr=0,br=0;dt.textFeatureIndex?Hr=dt.textFeatureIndex:Ge.useRuntimeCollisionCircles&&(Hr=Ge.featureIndex),dt.verticalTextFeatureIndex&&(hr=dt.verticalTextFeatureIndex);var Vn=dt.textBox;if(Vn){var yn=function(Vt){var $n=u.WritingMode.horizontal;if(v.allowVerticalPlacement&&!Vt&&c.prevPlacement){var Cn=c.prevPlacement.placedOrientations[Ge.crossTileID];Cn&&(c.placedOrientations[Ge.crossTileID]=Cn,c.markUsedOrientation(v,$n=Cn,Ge))}return $n},wo=function(Vt,$n){if(v.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&dt.verticalTextBox)for(var Cn=0,ia=v.writingModes;Cn<ia.length&&(ia[Cn]===u.WritingMode.vertical?(st=$n(),Fr=st):st=Vt(),!(st&&st.box&&st.box.length));Cn+=1);else st=Vt()};if(x.get("text-variable-anchor")){var Pn=x.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[Ge.crossTileID]){var ki=c.prevPlacement.variableOffsets[Ge.crossTileID];Pn.indexOf(ki.anchor)>0&&(Pn=Pn.filter(function(Vt){return Vt!==ki.anchor})).unshift(ki.anchor)}var pi=function(Vt,$n,Cn){for(var ia=Vt.x2-Vt.x1,gd=Vt.y2-Vt.y1,Ml=Ge.textBoxScale,_d=fe&&!re?$n:null,Bs={box:[],offscreen:!1},lh=Q?2*Pn.length:Pn.length,Oa=0;Oa<lh;++Oa){var Dl=c.attemptAnchorPlacement(Pn[Oa%Pn.length],Vt,ia,gd,Ml,ue,me,F,b,G,Oa>=Pn.length,Ge,v,Cn,_d);if(Dl&&(Bs=Dl.placedGlyphBoxes)&&Bs.box&&Bs.box.length){ft=!0,ct=Dl.shift;break}}return Bs};wo(function(){return pi(Vn,dt.iconBox,u.WritingMode.horizontal)},function(){var Vt=dt.verticalTextBox;return v.allowVerticalPlacement&&!(st&&st.box&&st.box.length)&&Ge.numVerticalGlyphVertices>0&&Vt?pi(Vt,dt.verticalIconBox,u.WritingMode.vertical):{box:null,offscreen:null}}),st&&(ft=st.box,vt=st.offscreen);var Rs=yn(st&&st.box);if(!ft&&c.prevPlacement){var La=c.prevPlacement.variableOffsets[Ge.crossTileID];La&&(c.variableOffsets[Ge.crossTileID]=La,c.markUsedJustification(v,La.anchor,Ge,Rs))}}else{var bo=function(Vt,$n){var Cn=c.collisionIndex.placeCollisionBox(Vt,Q,F,b,G.predicate);return Cn&&Cn.box&&Cn.box.length&&(c.markUsedOrientation(v,$n,Ge),c.placedOrientations[Ge.crossTileID]=$n),Cn};wo(function(){return bo(Vn,u.WritingMode.horizontal)},function(){var Vt=dt.verticalTextBox;return v.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&Vt?bo(Vt,u.WritingMode.vertical):{box:null,offscreen:null}}),yn(st&&st.box&&st.box.length)}}if(ft=(_t=st)&&_t.box&&_t.box.length>0,vt=_t&&_t.offscreen,Ge.useRuntimeCollisionCircles){var Ra=v.text.placedSymbolArray.get(Ge.centerJustifiedTextSymbolIndex),Os=u.evaluateSizeForFeature(v.textSizeData,W,Ra),Fi=x.get("text-padding");mr=c.collisionIndex.placeCollisionCircles(Q,Ra,v.lineVertexArray,v.glyphOffsetArray,Os,b,I,A,o,me,G.predicate,Ge.collisionCircleDiameter,Fi),ft=Q||mr.circles.length>0&&!mr.collisionDetected,vt=vt&&mr.offscreen}if(dt.iconFeatureIndex&&(br=dt.iconFeatureIndex),dt.iconBox){var Fs=function(Vt){var $n=fe&&ct?Di(Vt,ct.x,ct.y,ue,me,c.transform.angle):Vt;return c.collisionIndex.placeCollisionBox($n,re,F,b,G.predicate)};ht=Fr&&Fr.box&&Fr.box.length&&dt.verticalIconBox?(on=Fs(dt.verticalIconBox)).box.length>0:(on=Fs(dt.iconBox)).box.length>0,vt=vt&&on.offscreen}var Bi=Y||Ge.numHorizontalGlyphVertices===0&&Ge.numVerticalGlyphVertices===0,Br=j||Ge.numIconVertices===0;if(Bi||Br?Br?Bi||(ht=ht&&ft):ft=ht&&ft:ht=ft=ht&&ft,ft&&_t&&_t.box&&c.collisionIndex.insertCollisionBox(_t.box,x.get("text-ignore-placement"),v.bucketInstanceId,Fr&&Fr.box&&hr?hr:Hr,G.ID),ht&&on&&c.collisionIndex.insertCollisionBox(on.box,x.get("icon-ignore-placement"),v.bucketInstanceId,br,G.ID),mr&&(ft&&c.collisionIndex.insertCollisionCircles(mr.circles,x.get("text-ignore-placement"),v.bucketInstanceId,Hr,G.ID),o)){var Yi=v.bucketInstanceId,So=c.collisionCircleArrays[Yi];So===void 0&&(So=c.collisionCircleArrays[Yi]=new ai);for(var na=0;na<mr.circles.length;na+=4)So.circles.push(mr.circles[na+0]),So.circles.push(mr.circles[na+1]),So.circles.push(mr.circles[na+2]),So.circles.push(mr.collisionDetected?1:0)}c.placements[Ge.crossTileID]=new zp(ft||be,ht||Ae,vt||v.justReloaded),s[Ge.crossTileID]=!0}};if(ye)for(var je=v.getSortedSymbolIndexes(this.transform.angle),et=je.length-1;et>=0;--et){var it=je[et];ke(v.symbolInstances.get(it),v.collisionArrays[it])}else for(var nt=i.symbolInstanceStart;nt<i.symbolInstanceEnd;nt++)ke(v.symbolInstances.get(nt),v.collisionArrays[nt]);if(o&&v.bucketInstanceId in this.collisionCircleArrays){var Lt=this.collisionCircleArrays[v.bucketInstanceId];u.invert(Lt.invProjMatrix,b),Lt.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1},fn.prototype.markUsedJustification=function(i,s,o,c){var d;d=c===u.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[u.getAnchorJustification(s)];for(var v=0,x=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];v<x.length;v+=1){var b=x[v];b>=0&&(i.text.placedSymbolArray.get(b).crossTileID=d>=0&&b!==d?0:o.crossTileID)}},fn.prototype.markUsedOrientation=function(i,s,o){for(var c=s===u.WritingMode.horizontal||s===u.WritingMode.horizontalOnly?s:0,d=s===u.WritingMode.vertical?s:0,v=0,x=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];v<x.length;v+=1)i.text.placedSymbolArray.get(x[v]).placedOrientation=c;o.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=d)},fn.prototype.commit=function(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,o=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(i):1,d=s?s.opacities:{},v=s?s.variableOffsets:{},x=s?s.placedOrientations:{};for(var b in this.placements){var I=this.placements[b],A=d[b];A?(this.opacities[b]=new Xn(A,c,I.text,I.icon),o=o||I.text!==A.text.placed||I.icon!==A.icon.placed):(this.opacities[b]=new Xn(null,c,I.text,I.icon,I.skipFade),o=o||I.text||I.icon)}for(var F in d){var B=d[F];if(!this.opacities[F]){var N=new Xn(B,c,!1,!1);N.isHidden()||(this.opacities[F]=N,o=o||B.text.placed||B.icon.placed)}}for(var W in v)this.variableOffsets[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.variableOffsets[W]=v[W]);for(var G in x)this.placedOrientations[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.placedOrientations[G]=x[G]);o?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:i)},fn.prototype.updateLayerOpacities=function(i,s){for(var o={},c=0,d=s;c<d.length;c+=1){var v=d[c],x=v.getBucket(i);x&&v.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,o,v.collisionBoxArray)}},fn.prototype.updateBucketOpacities=function(i,s,o){var c=this;i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();var d=i.layers[0].layout,v=new Xn(null,0,!1,!1,!0),x=d.get("text-allow-overlap"),b=d.get("icon-allow-overlap"),I=d.get("text-variable-anchor"),A=d.get("text-rotation-alignment")==="map",F=d.get("text-pitch-alignment")==="map",B=d.get("icon-text-fit")!=="none",N=new Xn(null,0,x&&(b||!i.hasIconData()||d.get("icon-optional")),b&&(x||!i.hasTextData()||d.get("text-optional")),!0);!i.collisionArrays&&o&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(o);for(var W=function(Q,re,ue){for(var me=0;me<re/4;me++)Q.opacityVertexArray.emplaceBack(ue)},G=function(Q){var re=i.symbolInstances.get(Q),ue=re.numHorizontalGlyphVertices,me=re.numVerticalGlyphVertices,fe=re.crossTileID,ye=c.opacities[fe];s[fe]?ye=v:ye||(c.opacities[fe]=ye=N),s[fe]=!0;var be=re.numIconVertices>0,Ae=c.placedOrientations[re.crossTileID],ke=Ae===u.WritingMode.vertical,je=Ae===u.WritingMode.horizontal||Ae===u.WritingMode.horizontalOnly;if(ue>0||me>0){var et=Lp(ye.text);W(i.text,ue,ke?Sa:et),W(i.text,me,je?Sa:et);var it=ye.text.isHidden();[re.rightJustifiedTextSymbolIndex,re.centerJustifiedTextSymbolIndex,re.leftJustifiedTextSymbolIndex].forEach(function(st){st>=0&&(i.text.placedSymbolArray.get(st).hidden=it||ke?1:0)}),re.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(re.verticalPlacedTextSymbolIndex).hidden=it||je?1:0);var nt=c.variableOffsets[re.crossTileID];nt&&c.markUsedJustification(i,nt.anchor,re,Ae);var Lt=c.placedOrientations[re.crossTileID];Lt&&(c.markUsedJustification(i,"left",re,Lt),c.markUsedOrientation(i,Lt,re))}if(be){var Ge=Lp(ye.icon),dt=!(B&&re.verticalPlacedIconSymbolIndex&&ke);re.placedIconSymbolIndex>=0&&(W(i.icon,re.numIconVertices,dt?Ge:Sa),i.icon.placedSymbolArray.get(re.placedIconSymbolIndex).hidden=ye.icon.isHidden()),re.verticalPlacedIconSymbolIndex>=0&&(W(i.icon,re.numVerticalIconVertices,dt?Sa:Ge),i.icon.placedSymbolArray.get(re.verticalPlacedIconSymbolIndex).hidden=ye.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){var _t=i.collisionArrays[Q];if(_t){var ft=new u.Point(0,0);if(_t.textBox||_t.verticalTextBox){var ht=!0;if(I){var vt=c.variableOffsets[fe];vt?(ft=en(vt.anchor,vt.width,vt.height,vt.textOffset,vt.textBoxScale),A&&ft._rotate(F?c.transform.angle:-c.transform.angle)):ht=!1}_t.textBox&&No(i.textCollisionBox.collisionVertexArray,ye.text.placed,!ht||ke,ft.x,ft.y),_t.verticalTextBox&&No(i.textCollisionBox.collisionVertexArray,ye.text.placed,!ht||je,ft.x,ft.y)}var ct=Boolean(!je&&_t.verticalIconBox);_t.iconBox&&No(i.iconCollisionBox.collisionVertexArray,ye.icon.placed,ct,B?ft.x:0,B?ft.y:0),_t.verticalIconBox&&No(i.iconCollisionBox.collisionVertexArray,ye.icon.placed,!ct,B?ft.x:0,B?ft.y:0)}}},Y=0;Y<i.symbolInstances.length;Y++)G(Y);if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){var j=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=j.invProjMatrix,i.placementViewportMatrix=j.viewportMatrix,i.collisionCircleArray=j.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}},fn.prototype.symbolFadeChange=function(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},fn.prototype.zoomAdjustment=function(i){return Math.max(0,(this.transform.zoom-i)/1.5)},fn.prototype.hasTransitions=function(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration},fn.prototype.stillRecent=function(i,s){var o=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*o>i},fn.prototype.setStale=function(){this.stale=!0};var od=Math.pow(2,25),ad=Math.pow(2,24),Bu=Math.pow(2,17),sd=Math.pow(2,16),Mp=Math.pow(2,9),ld=Math.pow(2,8),Dp=Math.pow(2,1);function Lp(i){if(i.opacity===0&&!i.placed)return 0;if(i.opacity===1&&i.placed)return 4294967295;var s=i.placed?1:0,o=Math.floor(127*i.opacity);return o*od+s*ad+o*Bu+s*sd+o*Mp+s*ld+o*Dp+s}var Sa=0,Uu=function(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Uu.prototype.continuePlacement=function(i,s,o,c,d){for(var v=this._bucketParts;this._currentTileIndex<i.length;)if(s.getBucketParts(v,c,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,d())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,v.sort(function(x,b){return x.sortKey-b.sortKey}));this._currentPartIndex<v.length;)if(s.placeLayerBucketPart(v[this._currentPartIndex],this._seenCrossTileIDs,o),this._currentPartIndex++,d())return!0;return!1};var gs=function(i,s,o,c,d,v,x){this.placement=new fn(i,d,v,x),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=c,this._done=!1};gs.prototype.isDone=function(){return this._done},gs.prototype.continuePlacement=function(i,s,o){for(var c=this,d=u.browser.now(),v=function(){var I=u.browser.now()-d;return!c._forceFullPlacement&&I>2};this._currentPlacementIndex>=0;){var x=s[i[this._currentPlacementIndex]],b=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=b)&&(!x.maxzoom||x.maxzoom>b)){if(this._inProgressLayer||(this._inProgressLayer=new Uu(x)),this._inProgressLayer.continuePlacement(o[x.source],this.placement,this._showCollisionBoxes,x,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},gs.prototype.commit=function(i){return this.placement.commit(i),this.placement};var Rp=512/u.EXTENT/2,hl=function(i,s,o){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var c=0;c<s.length;c++){var d=s.get(c),v=d.key;this.indexedSymbolInstances[v]||(this.indexedSymbolInstances[v]=[]),this.indexedSymbolInstances[v].push({crossTileID:d.crossTileID,coord:this.getScaledCoordinates(d,i)})}};hl.prototype.getScaledCoordinates=function(i,s){var o=Rp/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*u.EXTENT+i.anchorX)*o),y:Math.floor((s.canonical.y*u.EXTENT+i.anchorY)*o)}},hl.prototype.findMatches=function(i,s,o){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),d=0;d<i.length;d++){var v=i.get(d);if(!v.crossTileID){var x=this.indexedSymbolInstances[v.key];if(x)for(var b=this.getScaledCoordinates(v,s),I=0,A=x;I<A.length;I+=1){var F=A[I];if(Math.abs(F.coord.x-b.x)<=c&&Math.abs(F.coord.y-b.y)<=c&&!o[F.crossTileID]){o[F.crossTileID]=!0,v.crossTileID=F.crossTileID;break}}}}};var si=function(){this.maxCrossTileID=0};si.prototype.generate=function(){return++this.maxCrossTileID};var ao=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ao.prototype.handleWrapJump=function(i){var s=Math.round((i-this.lng)/360);if(s!==0)for(var o in this.indexes){var c=this.indexes[o],d={};for(var v in c){var x=c[v];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+s),d[x.tileID.key]=x}this.indexes[o]=d}this.lng=i},ao.prototype.addBucket=function(i,s,o){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});var d=this.usedCrossTileIDs[i.overscaledZ];for(var v in this.indexes){var x=this.indexes[v];if(Number(v)>i.overscaledZ)for(var b in x){var I=x[b];I.tileID.isChildOf(i)&&I.findMatches(s.symbolInstances,i,d)}else{var A=x[i.scaledTo(Number(v)).key];A&&A.findMatches(s.symbolInstances,i,d)}}for(var F=0;F<s.symbolInstances.length;F++){var B=s.symbolInstances.get(F);B.crossTileID||(B.crossTileID=o.generate(),d[B.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new hl(i,s.symbolInstances,s.bucketInstanceId),!0},ao.prototype.removeBucketCrossTileIDs=function(i,s){for(var o in s.indexedSymbolInstances)for(var c=0,d=s.indexedSymbolInstances[o];c<d.length;c+=1)delete this.usedCrossTileIDs[i][d[c].crossTileID]},ao.prototype.removeStaleBuckets=function(i){var s=!1;for(var o in this.indexes){var c=this.indexes[o];for(var d in c)i[c[d].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,c[d]),delete c[d],s=!0)}return s};var so=function(){this.layerIndexes={},this.crossTileIDs=new si,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};so.prototype.addLayer=function(i,s,o){var c=this.layerIndexes[i.id];c===void 0&&(c=this.layerIndexes[i.id]=new ao);var d=!1,v={};c.handleWrapJump(o);for(var x=0,b=s;x<b.length;x+=1){var I=b[x],A=I.getBucket(i);A&&i.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(I.tileID,A,this.crossTileIDs)&&(d=!0),v[A.bucketInstanceId]=!0)}return c.removeStaleBuckets(v)&&(d=!0),d},so.prototype.pruneUnusedLayers=function(i){var s={};for(var o in i.forEach(function(c){s[c]=!0}),this.layerIndexes)s[o]||delete this.layerIndexes[o]};var Vo=function(i,s){return u.emitValidationErrors(i,s&&s.filter(function(o){return o.identifier!=="source.canvas"}))},lo=u.pick(Re,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),uo=u.pick(Re,["setCenter","setZoom","setBearing","setPitch"]),fl=function(){var i={},s=u.styleSpec.$version;for(var o in u.styleSpec.$root){var c,d=u.styleSpec.$root[o];d.required&&(c=o==="version"?s:d.type==="array"?[]:{})!=null&&(i[o]=c)}return i}(),Rn=function(i){function s(o,c){var d=this;c===void 0&&(c={}),i.call(this),this.map=o,this.dispatcher=new rr(ge(),this),this.imageManager=new oe,this.imageManager.setEventedParent(this),this.glyphManager=new Qe(o._requestManager,c.localIdeographFontFamily),this.lineAtlas=new gt(256,512),this.crossTileSymbolIndex=new so,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.getReferrer());var v=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(x){v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},function(b,I){if(u.triggerPluginCompletionEvent(b),I&&I.every(function(F){return F}))for(var A in v.sourceCaches)v.sourceCaches[A].reload()})}),this.on("data",function(x){if(x.dataType==="source"&&x.sourceDataType==="metadata"){var b=d.sourceCaches[x.sourceId];if(b){var I=b.getSource();if(I&&I.vectorLayerIds)for(var A in d._layers){var F=d._layers[A];F.source===I.id&&d._validateLayer(F)}}}})}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.loadURL=function(o,c){var d=this;c===void 0&&(c={}),this.fire(new u.Event("dataloading",{dataType:"style"}));var v=typeof c.validate=="boolean"?c.validate:!u.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,c.accessToken);var x=this.map._requestManager.transformRequest(o,u.ResourceType.Style);this._request=u.getJSON(x,function(b,I){d._request=null,b?d.fire(new u.ErrorEvent(b)):I&&d._load(I,v)})},s.prototype.loadJSON=function(o,c){var d=this;c===void 0&&(c={}),this.fire(new u.Event("dataloading",{dataType:"style"})),this._request=u.browser.frame(function(){d._request=null,d._load(o,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new u.Event("dataloading",{dataType:"style"})),this._load(fl,!1)},s.prototype._load=function(o,c){if(!c||!Vo(this,u.validateStyle(o))){for(var d in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(d,o.sources[d],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var v=Me(this.stylesheet.layers);this._order=v.map(function(A){return A.id}),this._layers={},this._serializedLayers={};for(var x=0,b=v;x<b.length;x+=1){var I=b[x];(I=u.createStyleLayer(I)).setEventedParent(this,{layer:{id:I.id}}),this._layers[I.id]=I,this._serializedLayers[I.id]=I.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Mr(this.stylesheet.light),this.fire(new u.Event("data",{dataType:"style"})),this.fire(new u.Event("style.load"))}},s.prototype._loadSprite=function(o){var c=this;this._spriteRequest=function(d,v,x){var b,I,A,F=u.browser.devicePixelRatio>1?"@2x":"",B=u.getJSON(v.transformRequest(v.normalizeSpriteURL(d,F,".json"),u.ResourceType.SpriteJSON),function(G,Y){B=null,A||(A=G,b=Y,W())}),N=u.getImage(v.transformRequest(v.normalizeSpriteURL(d,F,".png"),u.ResourceType.SpriteImage),function(G,Y){N=null,A||(A=G,I=Y,W())});function W(){if(A)x(A);else if(b&&I){var G=u.browser.getImageData(I),Y={};for(var j in b){var Q=b[j],re=Q.width,ue=Q.height,me=Q.x,fe=Q.y,ye=Q.sdf,be=Q.pixelRatio,Ae=Q.stretchX,ke=Q.stretchY,je=Q.content,et=new u.RGBAImage({width:re,height:ue});u.RGBAImage.copy(G,et,{x:me,y:fe},{x:0,y:0},{width:re,height:ue}),Y[j]={data:et,pixelRatio:be,sdf:ye,stretchX:Ae,stretchY:ke,content:je}}x(null,Y)}}return{cancel:function(){B&&(B.cancel(),B=null),N&&(N.cancel(),N=null)}}}(o,this.map._requestManager,function(d,v){if(c._spriteRequest=null,d)c.fire(new u.ErrorEvent(d));else if(v)for(var x in v)c.imageManager.addImage(x,v[x]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new u.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(o){var c=this.sourceCaches[o.source];if(c){var d=o.sourceLayer;if(d){var v=c.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(d)===-1)&&this.fire(new u.ErrorEvent(new Error('Source layer "'+d+'" does not exist on source "'+v.id+'" as specified by style layer "'+o.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(o){for(var c=[],d=0,v=o;d<v.length;d+=1){var x=this._layers[v[d]];x.type!=="custom"&&c.push(x.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(o){if(this._loaded){var c=this._changed;if(this._changed){var d=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);for(var x in(d.length||v.length)&&this._updateWorkerLayers(d,v),this._updatedSources){var b=this._updatedSources[x];b==="reload"?this._reloadSource(x):b==="clear"&&this._clearSource(x)}for(var I in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[I].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}var A={};for(var F in this.sourceCaches){var B=this.sourceCaches[F];A[F]=B.used,B.used=!1}for(var N=0,W=this._order;N<W.length;N+=1){var G=this._layers[W[N]];G.recalculate(o,this._availableImages),!G.isHidden(o.zoom)&&G.source&&(this.sourceCaches[G.source].used=!0)}for(var Y in A){var j=this.sourceCaches[Y];A[Y]!==j.used&&j.fire(new u.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Y}))}this.light.recalculate(o),this.z=o.zoom,c&&this.fire(new u.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var o=Object.keys(this._changedImages);if(o.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}},s.prototype._updateWorkerLayers=function(o,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(o){var c=this;if(this._checkLoaded(),Vo(this,u.validateStyle(o)))return!1;(o=u.clone$1(o)).layers=Me(o.layers);var d=function(x,b){if(!x)return[{command:Re.setStyle,args:[b]}];var I=[];try{if(!u.deepEqual(x.version,b.version))return[{command:Re.setStyle,args:[b]}];u.deepEqual(x.center,b.center)||I.push({command:Re.setCenter,args:[b.center]}),u.deepEqual(x.zoom,b.zoom)||I.push({command:Re.setZoom,args:[b.zoom]}),u.deepEqual(x.bearing,b.bearing)||I.push({command:Re.setBearing,args:[b.bearing]}),u.deepEqual(x.pitch,b.pitch)||I.push({command:Re.setPitch,args:[b.pitch]}),u.deepEqual(x.sprite,b.sprite)||I.push({command:Re.setSprite,args:[b.sprite]}),u.deepEqual(x.glyphs,b.glyphs)||I.push({command:Re.setGlyphs,args:[b.glyphs]}),u.deepEqual(x.transition,b.transition)||I.push({command:Re.setTransition,args:[b.transition]}),u.deepEqual(x.light,b.light)||I.push({command:Re.setLight,args:[b.light]});var A={},F=[];(function(N,W,G,Y){var j;for(j in W=W||{},N=N||{})N.hasOwnProperty(j)&&(W.hasOwnProperty(j)||Ue(j,G,Y));for(j in W)W.hasOwnProperty(j)&&(N.hasOwnProperty(j)?u.deepEqual(N[j],W[j])||(N[j].type==="geojson"&&W[j].type==="geojson"&&Xt(N,W,j)?G.push({command:Re.setGeoJSONSourceData,args:[j,W[j].data]}):At(j,W,G,Y)):wt(j,W,G))})(x.sources,b.sources,F,A);var B=[];x.layers&&x.layers.forEach(function(N){A[N.source]?I.push({command:Re.removeLayer,args:[N.id]}):B.push(N)}),I=I.concat(F),function(N,W,G){W=W||[];var Y,j,Q,re,ue,me,fe,ye=(N=N||[]).map(Ut),be=W.map(Ut),Ae=N.reduce(Mt,{}),ke=W.reduce(Mt,{}),je=ye.slice(),et=Object.create(null);for(Y=0,j=0;Y<ye.length;Y++)ke.hasOwnProperty(Q=ye[Y])?j++:(G.push({command:Re.removeLayer,args:[Q]}),je.splice(je.indexOf(Q,j),1));for(Y=0,j=0;Y<be.length;Y++)je[je.length-1-Y]!==(Q=be[be.length-1-Y])&&(Ae.hasOwnProperty(Q)?(G.push({command:Re.removeLayer,args:[Q]}),je.splice(je.lastIndexOf(Q,je.length-j),1)):j++,G.push({command:Re.addLayer,args:[ke[Q],me=je[je.length-Y]]}),je.splice(je.length-Y,0,Q),et[Q]=!0);for(Y=0;Y<be.length;Y++)if(re=Ae[Q=be[Y]],ue=ke[Q],!et[Q]&&!u.deepEqual(re,ue))if(u.deepEqual(re.source,ue.source)&&u.deepEqual(re["source-layer"],ue["source-layer"])&&u.deepEqual(re.type,ue.type)){for(fe in Et(re.layout,ue.layout,G,Q,null,Re.setLayoutProperty),Et(re.paint,ue.paint,G,Q,null,Re.setPaintProperty),u.deepEqual(re.filter,ue.filter)||G.push({command:Re.setFilter,args:[Q,ue.filter]}),u.deepEqual(re.minzoom,ue.minzoom)&&u.deepEqual(re.maxzoom,ue.maxzoom)||G.push({command:Re.setLayerZoomRange,args:[Q,ue.minzoom,ue.maxzoom]}),re)re.hasOwnProperty(fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&(fe.indexOf("paint.")===0?Et(re[fe],ue[fe],G,Q,fe.slice(6),Re.setPaintProperty):u.deepEqual(re[fe],ue[fe])||G.push({command:Re.setLayerProperty,args:[Q,fe,ue[fe]]}));for(fe in ue)ue.hasOwnProperty(fe)&&!re.hasOwnProperty(fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&(fe.indexOf("paint.")===0?Et(re[fe],ue[fe],G,Q,fe.slice(6),Re.setPaintProperty):u.deepEqual(re[fe],ue[fe])||G.push({command:Re.setLayerProperty,args:[Q,fe,ue[fe]]}))}else G.push({command:Re.removeLayer,args:[Q]}),me=je[je.lastIndexOf(Q)+1],G.push({command:Re.addLayer,args:[ue,me]})}(B,b.layers,I)}catch(N){console.warn("Unable to compute style diff:",N),I=[{command:Re.setStyle,args:[b]}]}return I}(this.serialize(),o).filter(function(x){return!(x.command in uo)});if(d.length===0)return!1;var v=d.filter(function(x){return!(x.command in lo)});if(v.length>0)throw new Error("Unimplemented: "+v.map(function(x){return x.command}).join(", ")+".");return d.forEach(function(x){x.command!=="setTransition"&&c[x.command].apply(c,x.args)}),this.stylesheet=o,!0},s.prototype.addImage=function(o,c){if(this.getImage(o))return this.fire(new u.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(o,c),this._afterImageUpdated(o)},s.prototype.updateImage=function(o,c){this.imageManager.updateImage(o,c)},s.prototype.getImage=function(o){return this.imageManager.getImage(o)},s.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new u.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(o),this._afterImageUpdated(o)},s.prototype._afterImageUpdated=function(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(o,c,d){var v=this;if(d===void 0&&(d={}),this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.validateStyle.source,"sources."+o,c,null,d))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var x=this.sourceCaches[o]=new H(o,c,this.dispatcher);x.style=this,x.setEventedParent(this,function(){return{isSourceLoaded:v.loaded(),source:x.serialize(),sourceId:o}}),x.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===o)return this.fire(new u.ErrorEvent(new Error('Source "'+o+'" cannot be removed while layer "'+c+'" is using it.')));var d=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],d.fire(new u.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),d.setEventedParent(null),d.clearTiles(),d.onRemove&&d.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(o,c){this._checkLoaded(),this.sourceCaches[o].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()},s.prototype.addLayer=function(o,c,d){d===void 0&&(d={}),this._checkLoaded();var v=o.id;if(this.getLayer(v))this.fire(new u.ErrorEvent(new Error('Layer with id "'+v+'" already exists on this map')));else{var x;if(o.type==="custom"){if(Vo(this,u.validateCustomStyleLayer(o)))return;x=u.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(v,o.source),o=u.clone$1(o),o=u.extend(o,{source:v})),this._validate(u.validateStyle.layer,"layers."+v,o,{arrayIndex:-1},d))return;x=u.createStyleLayer(o),this._validateLayer(x),x.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[x.id]=x.serialize()}var b=c?this._order.indexOf(c):this._order.length;if(c&&b===-1)this.fire(new u.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(b,0,v),this._layerOrderChanged=!0,this._layers[v]=x,this._removedLayers[v]&&x.source&&x.type!=="custom"){var I=this._removedLayers[v];delete this._removedLayers[v],I.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}},s.prototype.moveLayer=function(o,c){if(this._checkLoaded(),this._changed=!0,this._layers[o]){if(o!==c){var d=this._order.indexOf(o);this._order.splice(d,1);var v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new u.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(v,0,o),this._layerOrderChanged=!0)}}else this.fire(new u.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(o){this._checkLoaded();var c=this._layers[o];if(c){c.setEventedParent(null);var d=this._order.indexOf(o);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=c,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],c.onRemove&&c.onRemove(this.map)}else this.fire(new u.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(o){return this._layers[o]},s.prototype.hasLayer=function(o){return o in this._layers},s.prototype.setLayerZoomRange=function(o,c,d){this._checkLoaded();var v=this.getLayer(o);v?v.minzoom===c&&v.maxzoom===d||(c!=null&&(v.minzoom=c),d!=null&&(v.maxzoom=d),this._updateLayer(v)):this.fire(new u.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(o,c,d){d===void 0&&(d={}),this._checkLoaded();var v=this.getLayer(o);if(v){if(!u.deepEqual(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(u.validateStyle.filter,"layers."+v.id+".filter",c,null,d)||(v.filter=u.clone$1(c),this._updateLayer(v)))}else this.fire(new u.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(o){return u.clone$1(this.getLayer(o).filter)},s.prototype.setLayoutProperty=function(o,c,d,v){v===void 0&&(v={}),this._checkLoaded();var x=this.getLayer(o);x?u.deepEqual(x.getLayoutProperty(c),d)||(x.setLayoutProperty(c,d,v),this._updateLayer(x)):this.fire(new u.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(o,c){var d=this.getLayer(o);if(d)return d.getLayoutProperty(c);this.fire(new u.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(o,c,d,v){v===void 0&&(v={}),this._checkLoaded();var x=this.getLayer(o);x?u.deepEqual(x.getPaintProperty(c),d)||(x.setPaintProperty(c,d,v)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new u.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(o,c){return this.getLayer(o).getPaintProperty(c)},s.prototype.setFeatureState=function(o,c){this._checkLoaded();var d=o.source,v=o.sourceLayer,x=this.sourceCaches[d];if(x!==void 0){var b=x.getSource().type;b==="geojson"&&v?this.fire(new u.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||v?(o.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(v,o.id,c)):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(o,c){this._checkLoaded();var d=o.source,v=this.sourceCaches[d];if(v!==void 0){var x=v.getSource().type,b=x==="vector"?o.sourceLayer:void 0;x!=="vector"||b?c&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new u.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(b,o.id,c):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(o){this._checkLoaded();var c=o.source,d=o.sourceLayer,v=this.sourceCaches[c];if(v!==void 0){if(v.getSource().type!=="vector"||d)return o.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),v.getFeatureState(d,o.id);this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return u.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return u.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:u.mapObject(this.sourceCaches,function(o){return o.serialize()}),layers:this._serializeLayers(this._order)},function(o){return o!==void 0})},s.prototype._updateLayer=function(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(o){for(var c=this,d=function(Ae){return c._layers[Ae].type==="fill-extrusion"},v={},x=[],b=this._order.length-1;b>=0;b--){var I=this._order[b];if(d(I)){v[I]=b;for(var A=0,F=o;A<F.length;A+=1){var B=F[A][I];if(B)for(var N=0,W=B;N<W.length;N+=1)x.push(W[N])}}}x.sort(function(Ae,ke){return ke.intersectionZ-Ae.intersectionZ});for(var G=[],Y=this._order.length-1;Y>=0;Y--){var j=this._order[Y];if(d(j))for(var Q=x.length-1;Q>=0;Q--){var re=x[Q].feature;if(v[re.layer.id]<Y)break;G.push(re),x.pop()}else for(var ue=0,me=o;ue<me.length;ue+=1){var fe=me[ue][j];if(fe)for(var ye=0,be=fe;ye<be.length;ye+=1)G.push(be[ye].feature)}}return G},s.prototype.queryRenderedFeatures=function(o,c,d){c&&c.filter&&this._validate(u.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var v={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new u.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var x=0,b=c.layers;x<b.length;x+=1){var I=b[x],A=this._layers[I];if(!A)return this.fire(new u.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be queried for features."))),[];v[A.source]=!0}}var F=[];for(var B in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!v[B]||F.push(dr(this.sourceCaches[B],this._layers,this._serializedLayers,o,c,d));return this.placement&&F.push(function(N,W,G,Y,j,Q,re){for(var ue={},me=Q.queryRenderedSymbols(Y),fe=[],ye=0,be=Object.keys(me).map(Number);ye<be.length;ye+=1)fe.push(re[be[ye]]);fe.sort(Sn);for(var Ae=function(){var nt=je[ke],Lt=nt.featureIndex.lookupSymbolFeatures(me[nt.bucketInstanceId],W,nt.bucketIndex,nt.sourceLayerIndex,j.filter,j.layers,j.availableImages,N);for(var Ge in Lt){var dt=ue[Ge]=ue[Ge]||[],_t=Lt[Ge];_t.sort(function(vt,ct){var st=nt.featureSortOrder;if(st){var Fr=st.indexOf(vt.featureIndex);return st.indexOf(ct.featureIndex)-Fr}return ct.featureIndex-vt.featureIndex});for(var ft=0,ht=_t;ft<ht.length;ft+=1)dt.push(ht[ft])}},ke=0,je=fe;ke<je.length;ke+=1)Ae();var et=function(nt){ue[nt].forEach(function(Lt){var Ge=Lt.feature,dt=G[N[nt].source].getFeatureState(Ge.layer["source-layer"],Ge.id);Ge.source=Ge.layer.source,Ge.layer["source-layer"]&&(Ge.sourceLayer=Ge.layer["source-layer"]),Ge.state=dt})};for(var it in ue)et(it);return ue}(this._layers,this._serializedLayers,this.sourceCaches,o,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(F)},s.prototype.querySourceFeatures=function(o,c){c&&c.filter&&this._validate(u.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var d=this.sourceCaches[o];return d?function(v,x){for(var b=v.getRenderableIds().map(function(W){return v.getTileByID(W)}),I=[],A={},F=0;F<b.length;F++){var B=b[F],N=B.tileID.canonical.key;A[N]||(A[N]=!0,B.querySourceFeatures(I,x))}return I}(d,c):[]},s.prototype.addSourceType=function(o,c,d){return s.getSourceType(o)?d(new Error('A source type called "'+o+'" already exists.')):(s.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},d):d(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(o,c){c===void 0&&(c={}),this._checkLoaded();var d=this.light.getLight(),v=!1;for(var x in o)if(!u.deepEqual(o[x],d[x])){v=!0;break}if(v){var b={now:u.browser.now(),transition:u.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,c),this.light.updateTransitions(b)}},s.prototype._validate=function(o,c,d,v,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&Vo(this,o.call(u.validateStyle,u.extend({key:c,style:this.serialize(),value:d,styleSpec:u.styleSpec},v)))},s.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(o){this.sourceCaches[o].clearTiles()},s.prototype._reloadSource=function(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()},s.prototype._updateSources=function(o){for(var c in this.sourceCaches)this.sourceCaches[c].update(o)},s.prototype._generateCollisionBoxes=function(){for(var o in this.sourceCaches)this._reloadSource(o)},s.prototype._updatePlacement=function(o,c,d,v,x){x===void 0&&(x=!1);for(var b=!1,I=!1,A={},F=0,B=this._order;F<B.length;F+=1){var N=this._layers[B[F]];if(N.type==="symbol"){if(!A[N.source]){var W=this.sourceCaches[N.source];A[N.source]=W.getRenderableIds(!0).map(function(re){return W.getTileByID(re)}).sort(function(re,ue){return ue.tileID.overscaledZ-re.tileID.overscaledZ||(re.tileID.isLessThan(ue.tileID)?-1:1)})}var G=this.crossTileSymbolIndex.addLayer(N,A[N.source],o.center.lng);b=b||G}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.browser.now(),o.zoom))&&(this.pauseablePlacement=new gs(o,this._order,x,c,d,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.browser.now()),I=!0),b&&this.pauseablePlacement.placement.setStale()),I||b)for(var Y=0,j=this._order;Y<j.length;Y+=1){var Q=this._layers[j[Y]];Q.type==="symbol"&&this.placement.updateLayerOpacities(Q,A[Q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()},s.prototype.getImages=function(o,c,d){this.imageManager.getImages(c.icons,d),this._updateTilesForChangedImages();var v=this.sourceCaches[c.source];v&&v.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(o,c,d){this.glyphManager.getGlyphs(c.stacks,d)},s.prototype.getResource=function(o,c,d){return u.makeRequest(c,d)},s}(u.Evented);Rn.getSourceType=function(i){return pr[i]},Rn.setSourceType=function(i,s){pr[i]=s},Rn.registerForPluginStateChange=u.registerForPluginStateChange;var Cr=u.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ea=Ht(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Op=Ht(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ud=Ht(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),cd=Ht(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Nu=Ht("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Vu=Ht(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ju=Ht(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),qu=Ht("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Fp=Ht("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Bp=Ht("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),pd=Ht(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),_s=Ht(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),xs=Ht(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Up=Ht(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),tn=Ht(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Zu=Ht(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),co=Ht(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),po=Ht(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),jo=Ht(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),qo=Ht(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ho=Ht(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Zo=Ht(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Go=Ht(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),fo=Ht(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Np=Ht(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Vp=Ht(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Ht(i,s){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),d=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=v?v.concat(d):d,b={};return{fragmentSource:i=i.replace(o,function(I,A,F,B,N){return b[N]=!0,A==="define"?`
#ifndef HAS_UNIFORM_u_`+N+`
varying `+F+" "+B+" "+N+`;
#else
uniform `+F+" "+B+" u_"+N+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+N+`
    `+F+" "+B+" "+N+" = u_"+N+`;
#endif
`}),vertexSource:s=s.replace(o,function(I,A,F,B,N){var W=B==="float"?"vec2":"vec4",G=N.match(/color/)?"color":W;return b[N]?A==="define"?`
#ifndef HAS_UNIFORM_u_`+N+`
uniform lowp float u_`+N+`_t;
attribute `+F+" "+W+" a_"+N+`;
varying `+F+" "+B+" "+N+`;
#else
uniform `+F+" "+B+" u_"+N+`;
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_`+N+`
    `+N+" = a_"+N+`;
#else
    `+F+" "+B+" "+N+" = u_"+N+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+N+`
    `+N+" = unpack_mix_"+G+"(a_"+N+", u_"+N+`_t);
#else
    `+F+" "+B+" "+N+" = u_"+N+`;
#endif
`:A==="define"?`
#ifndef HAS_UNIFORM_u_`+N+`
uniform lowp float u_`+N+`_t;
attribute `+F+" "+W+" a_"+N+`;
#else
uniform `+F+" "+B+" u_"+N+`;
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_`+N+`
    `+F+" "+B+" "+N+" = a_"+N+`;
#else
    `+F+" "+B+" "+N+" = u_"+N+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+N+`
    `+F+" "+B+" "+N+" = unpack_mix_"+G+"(a_"+N+", u_"+N+`_t);
#else
    `+F+" "+B+" "+N+" = u_"+N+`;
#endif
`}),staticAttributes:c,staticUniforms:x}}var hd=Object.freeze({__proto__:null,prelude:Ea,background:Op,backgroundPattern:ud,circle:cd,clippingMask:Nu,heatmap:Vu,heatmapTexture:ju,collisionBox:qu,collisionCircle:Fp,debug:Bp,fill:pd,fillOutline:_s,fillOutlinePattern:xs,fillPattern:Up,fillExtrusion:tn,fillExtrusionPattern:Zu,hillshadePrepare:co,hillshade:po,line:jo,lineGradient:qo,linePattern:ho,lineSDF:Zo,raster:Go,symbolIcon:fo,symbolSDF:Np,symbolTextAndIcon:Vp}),dl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function jp(i){for(var s=[],o=0;o<i.length;o++)if(i[o]!==null){var c=i[o].split(" ");s.push(c.pop())}return s}dl.prototype.bind=function(i,s,o,c,d,v,x,b){this.context=i;for(var I=this.boundPaintVertexBuffers.length!==c.length,A=0;!I&&A<c.length;A++)this.boundPaintVertexBuffers[A]!==c[A]&&(I=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===o&&!I&&this.boundIndexBuffer===d&&this.boundVertexOffset===v&&this.boundDynamicVertexBuffer===x&&this.boundDynamicVertexBuffer2===b?(i.bindVertexArrayOES.set(this.vao),x&&x.bind(),d&&d.dynamicDraw&&d.bind(),b&&b.bind()):this.freshBind(s,o,c,d,v,x,b)},dl.prototype.freshBind=function(i,s,o,c,d,v,x){var b,I=i.numAttributes,A=this.context,F=A.gl;if(A.extVertexArrayObject)this.vao&&this.destroy(),this.vao=A.extVertexArrayObject.createVertexArrayOES(),A.bindVertexArrayOES.set(this.vao),b=0,this.boundProgram=i,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=c,this.boundVertexOffset=d,this.boundDynamicVertexBuffer=v,this.boundDynamicVertexBuffer2=x;else{b=A.currentNumAttributes||0;for(var B=I;B<b;B++)F.disableVertexAttribArray(B)}s.enableAttributes(F,i);for(var N=0,W=o;N<W.length;N+=1)W[N].enableAttributes(F,i);v&&v.enableAttributes(F,i),x&&x.enableAttributes(F,i),s.bind(),s.setVertexAttribPointers(F,i,d);for(var G=0,Y=o;G<Y.length;G+=1){var j=Y[G];j.bind(),j.setVertexAttribPointers(F,i,d)}v&&(v.bind(),v.setVertexAttribPointers(F,i,d)),c&&c.bind(),x&&(x.bind(),x.setVertexAttribPointers(F,i,d)),A.currentNumAttributes=I},dl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var qp=function(i,s,o,c,d,v){var x=i.gl;this.program=x.createProgram();for(var b=jp(o.staticAttributes),I=c?c.getBinderAttributes():[],A=b.concat(I),F=o.staticUniforms?jp(o.staticUniforms):[],B=c?c.getBinderUniforms():[],N=[],W=0,G=F.concat(B);W<G.length;W+=1){var Y=G[W];N.indexOf(Y)<0&&N.push(Y)}var j=c?c.defines():[];v&&j.push("#define OVERDRAW_INSPECTOR;");var Q=j.concat(Ea.fragmentSource,o.fragmentSource).join(`
`),re=j.concat(Ea.vertexSource,o.vertexSource).join(`
`),ue=x.createShader(x.FRAGMENT_SHADER);if(x.isContextLost())this.failedToCreate=!0;else{x.shaderSource(ue,Q),x.compileShader(ue),x.attachShader(this.program,ue);var me=x.createShader(x.VERTEX_SHADER);if(x.isContextLost())this.failedToCreate=!0;else{x.shaderSource(me,re),x.compileShader(me),x.attachShader(this.program,me),this.attributes={};var fe={};this.numAttributes=A.length;for(var ye=0;ye<this.numAttributes;ye++)A[ye]&&(x.bindAttribLocation(this.program,ye,A[ye]),this.attributes[A[ye]]=ye);x.linkProgram(this.program),x.deleteShader(me),x.deleteShader(ue);for(var be=0;be<N.length;be++){var Ae=N[be];if(Ae&&!fe[Ae]){var ke=x.getUniformLocation(this.program,Ae);ke&&(fe[Ae]=ke)}}this.fixedUniforms=d(i,fe),this.binderUniforms=c?c.getUniforms(i,fe):[]}}};function Zp(i,s,o){var c=1/or(o,1,s.transform.tileZoom),d=Math.pow(2,o.tileID.overscaledZ),v=o.tileSize*Math.pow(2,s.transform.tileZoom)/d,x=v*(o.tileID.canonical.x+o.tileID.wrap*d),b=v*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[c,i.fromScale,i.toScale],u_fade:i.t,u_pixel_coord_upper:[x>>16,b>>16],u_pixel_coord_lower:[65535&x,65535&b]}}qp.prototype.draw=function(i,s,o,c,d,v,x,b,I,A,F,B,N,W,G,Y){var j,Q=i.gl;if(!this.failedToCreate){for(var re in i.program.set(this.program),i.setDepthMode(o),i.setStencilMode(c),i.setColorMode(d),i.setCullFace(v),this.fixedUniforms)this.fixedUniforms[re].set(x[re]);W&&W.setUniforms(i,this.binderUniforms,B,{zoom:N});for(var ue=(j={},j[Q.LINES]=2,j[Q.TRIANGLES]=3,j[Q.LINE_STRIP]=1,j)[s],me=0,fe=F.get();me<fe.length;me+=1){var ye=fe[me],be=ye.vaos||(ye.vaos={});(be[b]||(be[b]=new dl)).bind(i,this,I,W?W.getPaintVertexBuffers():[],A,ye.vertexOffset,G,Y),Q.drawElements(s,ye.primitiveLength*ue,Q.UNSIGNED_SHORT,ye.primitiveOffset*ue*2)}}};var Gp=function(i,s,o,c){var d=s.style.light,v=d.properties.get("position"),x=[v.x,v.y,v.z],b=u.create$1();d.properties.get("anchor")==="viewport"&&u.fromRotation(b,-s.transform.angle),u.transformMat3(x,x,b);var I=d.properties.get("color");return{u_matrix:i,u_lightpos:x,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+o,u_opacity:c}},Wo=function(i,s,o,c,d,v,x){return u.extend(Gp(i,s,o,c),Zp(v,s,x),{u_height_factor:-Math.pow(2,d.overscaledZ)/x.tileSize/8})},mo=function(i){return{u_matrix:i}},Xo=function(i,s,o,c){return u.extend(mo(i),Zp(o,s,c))},Wp=function(i,s){return{u_matrix:i,u_world:s}},Xp=function(i,s,o,c,d){return u.extend(Xo(i,s,o,c),{u_world:d})},Gu=function(i,s,o,c){var d,v,x=i.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var b=or(o,1,x.zoom);d=!0,v=[b,b]}else d=!1,v=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:i.translatePosMatrix(s.posMatrix,o,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+d,u_device_pixel_ratio:u.browser.devicePixelRatio,u_extrude_scale:v}},Ho=function(i,s,o){var c=or(o,1,s.zoom),d=Math.pow(2,s.zoom-o.tileID.overscaledZ),v=o.tileID.overscaleFactor();return{u_matrix:i,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*d),s.pixelsToGLUnits[1]/(c*d)],u_overscale_factor:v}},Hp=function(i,s,o){return{u_matrix:i,u_inv_matrix:s,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}},Ko=function(i,s,o){return o===void 0&&(o=1),{u_matrix:i,u_color:s,u_overlay:0,u_overlay_scale:o}},$o=function(i){return{u_matrix:i}},Kp=function(i,s,o,c){return{u_matrix:i,u_extrude_scale:or(s,1,o),u_intensity:c}},ws=function(i,s,o){var c=i.transform;return{u_matrix:$p(i,s,o),u_ratio:1/or(s,1,c.zoom),u_device_pixel_ratio:u.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Jt=function(i,s,o,c){return u.extend(ws(i,s,o),{u_image:0,u_image_height:c})},ml=function(i,s,o,c){var d=i.transform,v=Ta(s,d);return{u_matrix:$p(i,s,o),u_texsize:s.imageAtlasTexture.size,u_ratio:1/or(s,1,d.zoom),u_device_pixel_ratio:u.browser.devicePixelRatio,u_image:0,u_scale:[v,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},fd=function(i,s,o,c,d){var v=i.lineAtlas,x=Ta(s,i.transform),b=o.layout.get("line-cap")==="round",I=v.getDash(c.from,b),A=v.getDash(c.to,b),F=I.width*d.fromScale,B=A.width*d.toScale;return u.extend(ws(i,s,o),{u_patternscale_a:[x/F,-I.height/2],u_patternscale_b:[x/B,-A.height/2],u_sdfgamma:v.width/(256*Math.min(F,B)*u.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:A.y,u_mix:d.t})};function Ta(i,s){return 1/or(i,1,s.tileZoom)}function $p(i,s,o){return i.translatePosMatrix(s.tileID.posMatrix,s,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var dd=function(i,s,o,c,d){return{u_matrix:i,u_tl_parent:s,u_scale_parent:o,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(x=d.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(v=d.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:Qp(d.paint.get("raster-hue-rotate"))};var v,x};function Qp(i){i*=Math.PI/180;var s=Math.sin(i),o=Math.cos(i);return[(2*o+1)/3,(-Math.sqrt(3)*s-o+1)/3,(Math.sqrt(3)*s-o+1)/3]}var yl,Ia=function(i,s,o,c,d,v,x,b,I,A){var F=d.transform;return{u_is_size_zoom_constant:+(i==="constant"||i==="source"),u_is_size_feature_constant:+(i==="constant"||i==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:F.cameraToCenterDistance,u_pitch:F.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:F.width/F.height,u_fade_change:d.options.fadeDuration?d.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:x,u_coord_matrix:b,u_is_text:+I,u_pitch_with_map:+c,u_texsize:A,u_texture:0}},bs=function(i,s,o,c,d,v,x,b,I,A,F){var B=d.transform;return u.extend(Ia(i,s,o,c,d,v,x,b,I,A),{u_gamma_scale:c?Math.cos(B._pitch)*B.cameraToCenterDistance:1,u_device_pixel_ratio:u.browser.devicePixelRatio,u_is_halo:+F})},vl=function(i,s,o,c,d,v,x,b,I,A){return u.extend(bs(i,s,o,c,d,v,x,b,!0,I,!0),{u_texsize_icon:A,u_texture_icon:1})},Ss=function(i,s,o){return{u_matrix:i,u_opacity:s,u_color:o}},Pa=function(i,s,o,c,d,v){return u.extend(function(x,b,I,A){var F=I.imageManager.getPattern(x.from.toString()),B=I.imageManager.getPattern(x.to.toString()),N=I.imageManager.getPixelSize(),W=N.width,G=N.height,Y=Math.pow(2,A.tileID.overscaledZ),j=A.tileSize*Math.pow(2,I.transform.tileZoom)/Y,Q=j*(A.tileID.canonical.x+A.tileID.wrap*Y),re=j*A.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[W,G],u_mix:b.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:b.fromScale,u_scale_b:b.toScale,u_tile_units_to_pixels:1/or(A,1,I.transform.tileZoom),u_pixel_coord_upper:[Q>>16,re>>16],u_pixel_coord_lower:[65535&Q,65535&re]}}(c,v,o,d),{u_matrix:i,u_opacity:s})},Yp={fillExtrusion:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_lightpos:new u.Uniform3f(i,s.u_lightpos),u_lightintensity:new u.Uniform1f(i,s.u_lightintensity),u_lightcolor:new u.Uniform3f(i,s.u_lightcolor),u_vertical_gradient:new u.Uniform1f(i,s.u_vertical_gradient),u_opacity:new u.Uniform1f(i,s.u_opacity)}},fillExtrusionPattern:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_lightpos:new u.Uniform3f(i,s.u_lightpos),u_lightintensity:new u.Uniform1f(i,s.u_lightintensity),u_lightcolor:new u.Uniform3f(i,s.u_lightcolor),u_vertical_gradient:new u.Uniform1f(i,s.u_vertical_gradient),u_height_factor:new u.Uniform1f(i,s.u_height_factor),u_image:new u.Uniform1i(i,s.u_image),u_texsize:new u.Uniform2f(i,s.u_texsize),u_pixel_coord_upper:new u.Uniform2f(i,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(i,s.u_pixel_coord_lower),u_scale:new u.Uniform3f(i,s.u_scale),u_fade:new u.Uniform1f(i,s.u_fade),u_opacity:new u.Uniform1f(i,s.u_opacity)}},fill:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix)}},fillPattern:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_image:new u.Uniform1i(i,s.u_image),u_texsize:new u.Uniform2f(i,s.u_texsize),u_pixel_coord_upper:new u.Uniform2f(i,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(i,s.u_pixel_coord_lower),u_scale:new u.Uniform3f(i,s.u_scale),u_fade:new u.Uniform1f(i,s.u_fade)}},fillOutline:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_world:new u.Uniform2f(i,s.u_world)}},fillOutlinePattern:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_world:new u.Uniform2f(i,s.u_world),u_image:new u.Uniform1i(i,s.u_image),u_texsize:new u.Uniform2f(i,s.u_texsize),u_pixel_coord_upper:new u.Uniform2f(i,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(i,s.u_pixel_coord_lower),u_scale:new u.Uniform3f(i,s.u_scale),u_fade:new u.Uniform1f(i,s.u_fade)}},circle:function(i,s){return{u_camera_to_center_distance:new u.Uniform1f(i,s.u_camera_to_center_distance),u_scale_with_map:new u.Uniform1i(i,s.u_scale_with_map),u_pitch_with_map:new u.Uniform1i(i,s.u_pitch_with_map),u_extrude_scale:new u.Uniform2f(i,s.u_extrude_scale),u_device_pixel_ratio:new u.Uniform1f(i,s.u_device_pixel_ratio),u_matrix:new u.UniformMatrix4f(i,s.u_matrix)}},collisionBox:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_camera_to_center_distance:new u.Uniform1f(i,s.u_camera_to_center_distance),u_pixels_to_tile_units:new u.Uniform1f(i,s.u_pixels_to_tile_units),u_extrude_scale:new u.Uniform2f(i,s.u_extrude_scale),u_overscale_factor:new u.Uniform1f(i,s.u_overscale_factor)}},collisionCircle:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_inv_matrix:new u.UniformMatrix4f(i,s.u_inv_matrix),u_camera_to_center_distance:new u.Uniform1f(i,s.u_camera_to_center_distance),u_viewport_size:new u.Uniform2f(i,s.u_viewport_size)}},debug:function(i,s){return{u_color:new u.UniformColor(i,s.u_color),u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_overlay:new u.Uniform1i(i,s.u_overlay),u_overlay_scale:new u.Uniform1f(i,s.u_overlay_scale)}},clippingMask:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix)}},heatmap:function(i,s){return{u_extrude_scale:new u.Uniform1f(i,s.u_extrude_scale),u_intensity:new u.Uniform1f(i,s.u_intensity),u_matrix:new u.UniformMatrix4f(i,s.u_matrix)}},heatmapTexture:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_world:new u.Uniform2f(i,s.u_world),u_image:new u.Uniform1i(i,s.u_image),u_color_ramp:new u.Uniform1i(i,s.u_color_ramp),u_opacity:new u.Uniform1f(i,s.u_opacity)}},hillshade:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_image:new u.Uniform1i(i,s.u_image),u_latrange:new u.Uniform2f(i,s.u_latrange),u_light:new u.Uniform2f(i,s.u_light),u_shadow:new u.UniformColor(i,s.u_shadow),u_highlight:new u.UniformColor(i,s.u_highlight),u_accent:new u.UniformColor(i,s.u_accent)}},hillshadePrepare:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_image:new u.Uniform1i(i,s.u_image),u_dimension:new u.Uniform2f(i,s.u_dimension),u_zoom:new u.Uniform1f(i,s.u_zoom),u_unpack:new u.Uniform4f(i,s.u_unpack)}},line:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_ratio:new u.Uniform1f(i,s.u_ratio),u_device_pixel_ratio:new u.Uniform1f(i,s.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(i,s.u_units_to_pixels)}},lineGradient:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_ratio:new u.Uniform1f(i,s.u_ratio),u_device_pixel_ratio:new u.Uniform1f(i,s.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(i,s.u_units_to_pixels),u_image:new u.Uniform1i(i,s.u_image),u_image_height:new u.Uniform1f(i,s.u_image_height)}},linePattern:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_texsize:new u.Uniform2f(i,s.u_texsize),u_ratio:new u.Uniform1f(i,s.u_ratio),u_device_pixel_ratio:new u.Uniform1f(i,s.u_device_pixel_ratio),u_image:new u.Uniform1i(i,s.u_image),u_units_to_pixels:new u.Uniform2f(i,s.u_units_to_pixels),u_scale:new u.Uniform3f(i,s.u_scale),u_fade:new u.Uniform1f(i,s.u_fade)}},lineSDF:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_ratio:new u.Uniform1f(i,s.u_ratio),u_device_pixel_ratio:new u.Uniform1f(i,s.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(i,s.u_units_to_pixels),u_patternscale_a:new u.Uniform2f(i,s.u_patternscale_a),u_patternscale_b:new u.Uniform2f(i,s.u_patternscale_b),u_sdfgamma:new u.Uniform1f(i,s.u_sdfgamma),u_image:new u.Uniform1i(i,s.u_image),u_tex_y_a:new u.Uniform1f(i,s.u_tex_y_a),u_tex_y_b:new u.Uniform1f(i,s.u_tex_y_b),u_mix:new u.Uniform1f(i,s.u_mix)}},raster:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_tl_parent:new u.Uniform2f(i,s.u_tl_parent),u_scale_parent:new u.Uniform1f(i,s.u_scale_parent),u_buffer_scale:new u.Uniform1f(i,s.u_buffer_scale),u_fade_t:new u.Uniform1f(i,s.u_fade_t),u_opacity:new u.Uniform1f(i,s.u_opacity),u_image0:new u.Uniform1i(i,s.u_image0),u_image1:new u.Uniform1i(i,s.u_image1),u_brightness_low:new u.Uniform1f(i,s.u_brightness_low),u_brightness_high:new u.Uniform1f(i,s.u_brightness_high),u_saturation_factor:new u.Uniform1f(i,s.u_saturation_factor),u_contrast_factor:new u.Uniform1f(i,s.u_contrast_factor),u_spin_weights:new u.Uniform3f(i,s.u_spin_weights)}},symbolIcon:function(i,s){return{u_is_size_zoom_constant:new u.Uniform1i(i,s.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(i,s.u_is_size_feature_constant),u_size_t:new u.Uniform1f(i,s.u_size_t),u_size:new u.Uniform1f(i,s.u_size),u_camera_to_center_distance:new u.Uniform1f(i,s.u_camera_to_center_distance),u_pitch:new u.Uniform1f(i,s.u_pitch),u_rotate_symbol:new u.Uniform1i(i,s.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(i,s.u_aspect_ratio),u_fade_change:new u.Uniform1f(i,s.u_fade_change),u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(i,s.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(i,s.u_coord_matrix),u_is_text:new u.Uniform1i(i,s.u_is_text),u_pitch_with_map:new u.Uniform1i(i,s.u_pitch_with_map),u_texsize:new u.Uniform2f(i,s.u_texsize),u_texture:new u.Uniform1i(i,s.u_texture)}},symbolSDF:function(i,s){return{u_is_size_zoom_constant:new u.Uniform1i(i,s.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(i,s.u_is_size_feature_constant),u_size_t:new u.Uniform1f(i,s.u_size_t),u_size:new u.Uniform1f(i,s.u_size),u_camera_to_center_distance:new u.Uniform1f(i,s.u_camera_to_center_distance),u_pitch:new u.Uniform1f(i,s.u_pitch),u_rotate_symbol:new u.Uniform1i(i,s.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(i,s.u_aspect_ratio),u_fade_change:new u.Uniform1f(i,s.u_fade_change),u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(i,s.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(i,s.u_coord_matrix),u_is_text:new u.Uniform1i(i,s.u_is_text),u_pitch_with_map:new u.Uniform1i(i,s.u_pitch_with_map),u_texsize:new u.Uniform2f(i,s.u_texsize),u_texture:new u.Uniform1i(i,s.u_texture),u_gamma_scale:new u.Uniform1f(i,s.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(i,s.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(i,s.u_is_halo)}},symbolTextAndIcon:function(i,s){return{u_is_size_zoom_constant:new u.Uniform1i(i,s.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(i,s.u_is_size_feature_constant),u_size_t:new u.Uniform1f(i,s.u_size_t),u_size:new u.Uniform1f(i,s.u_size),u_camera_to_center_distance:new u.Uniform1f(i,s.u_camera_to_center_distance),u_pitch:new u.Uniform1f(i,s.u_pitch),u_rotate_symbol:new u.Uniform1i(i,s.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(i,s.u_aspect_ratio),u_fade_change:new u.Uniform1f(i,s.u_fade_change),u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(i,s.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(i,s.u_coord_matrix),u_is_text:new u.Uniform1i(i,s.u_is_text),u_pitch_with_map:new u.Uniform1i(i,s.u_pitch_with_map),u_texsize:new u.Uniform2f(i,s.u_texsize),u_texsize_icon:new u.Uniform2f(i,s.u_texsize_icon),u_texture:new u.Uniform1i(i,s.u_texture),u_texture_icon:new u.Uniform1i(i,s.u_texture_icon),u_gamma_scale:new u.Uniform1f(i,s.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(i,s.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(i,s.u_is_halo)}},background:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_opacity:new u.Uniform1f(i,s.u_opacity),u_color:new u.UniformColor(i,s.u_color)}},backgroundPattern:function(i,s){return{u_matrix:new u.UniformMatrix4f(i,s.u_matrix),u_opacity:new u.Uniform1f(i,s.u_opacity),u_image:new u.Uniform1i(i,s.u_image),u_pattern_tl_a:new u.Uniform2f(i,s.u_pattern_tl_a),u_pattern_br_a:new u.Uniform2f(i,s.u_pattern_br_a),u_pattern_tl_b:new u.Uniform2f(i,s.u_pattern_tl_b),u_pattern_br_b:new u.Uniform2f(i,s.u_pattern_br_b),u_texsize:new u.Uniform2f(i,s.u_texsize),u_mix:new u.Uniform1f(i,s.u_mix),u_pattern_size_a:new u.Uniform2f(i,s.u_pattern_size_a),u_pattern_size_b:new u.Uniform2f(i,s.u_pattern_size_b),u_scale_a:new u.Uniform1f(i,s.u_scale_a),u_scale_b:new u.Uniform1f(i,s.u_scale_b),u_pixel_coord_upper:new u.Uniform2f(i,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(i,s.u_pixel_coord_lower),u_tile_units_to_pixels:new u.Uniform1f(i,s.u_tile_units_to_pixels)}}};function Ca(i,s,o,c,d,v,x){for(var b=i.context,I=b.gl,A=i.useProgram("collisionBox"),F=[],B=0,N=0,W=0;W<c.length;W++){var G=c[W],Y=s.getTile(G),j=Y.getBucket(o);if(j){var Q=G.posMatrix;d[0]===0&&d[1]===0||(Q=i.translatePosMatrix(G.posMatrix,Y,d,v));var re=x?j.textCollisionBox:j.iconCollisionBox,ue=j.collisionCircleArray;if(ue.length>0){var me=u.create(),fe=Q;u.mul(me,j.placementInvProjMatrix,i.transform.glCoordMatrix),u.mul(me,me,j.placementViewportMatrix),F.push({circleArray:ue,circleOffset:N,transform:fe,invTransform:me}),N=B+=ue.length/4}re&&A.draw(b,I.LINES,V.disabled,X.disabled,i.colorModeForRenderPass(),ie.disabled,Ho(Q,i.transform,Y),o.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,null,i.transform.zoom,null,null,re.collisionVertexBuffer)}}if(x&&F.length){var ye=i.useProgram("collisionCircle"),be=new u.StructArrayLayout2f1f2i16;be.resize(4*B),be._trim();for(var Ae=0,ke=0,je=F;ke<je.length;ke+=1)for(var et=je[ke],it=0;it<et.circleArray.length/4;it++){var nt=4*it,Lt=et.circleArray[nt+0],Ge=et.circleArray[nt+1],dt=et.circleArray[nt+2],_t=et.circleArray[nt+3];be.emplace(Ae++,Lt,Ge,dt,_t,0),be.emplace(Ae++,Lt,Ge,dt,_t,1),be.emplace(Ae++,Lt,Ge,dt,_t,2),be.emplace(Ae++,Lt,Ge,dt,_t,3)}(!yl||yl.length<2*B)&&(yl=function(mr){var on=2*mr,Hr=new u.StructArrayLayout3ui6;Hr.resize(on),Hr._trim();for(var hr=0;hr<on;hr++){var br=6*hr;Hr.uint16[br+0]=4*hr+0,Hr.uint16[br+1]=4*hr+1,Hr.uint16[br+2]=4*hr+2,Hr.uint16[br+3]=4*hr+2,Hr.uint16[br+4]=4*hr+3,Hr.uint16[br+5]=4*hr+0}return Hr}(B));for(var ft=b.createIndexBuffer(yl,!0),ht=b.createVertexBuffer(be,u.collisionCircleLayout.members,!0),vt=0,ct=F;vt<ct.length;vt+=1){var st=ct[vt],Fr=Hp(st.transform,st.invTransform,i.transform);ye.draw(b,I.TRIANGLES,V.disabled,X.disabled,i.colorModeForRenderPass(),ie.disabled,Fr,o.id,ht,ft,u.SegmentVector.simpleSegment(0,2*st.circleOffset,st.circleArray.length,st.circleArray.length/2),null,i.transform.zoom,null,null,null)}ht.destroy(),ft.destroy()}}var Ei=u.identity(new Float32Array(16));function Jp(i,s,o,c,d,v){var x=u.getAnchorAlignment(i),b=-(x.horizontalAlign-.5)*s,I=-(x.verticalAlign-.5)*o,A=u.evaluateVariableOffset(i,c);return new u.Point((b/d+A[0])*v,(I/d+A[1])*v)}function eh(i,s,o,c,d,v,x,b,I,A,F){var B=i.text.placedSymbolArray,N=i.text.dynamicLayoutVertexArray,W=i.icon.dynamicLayoutVertexArray,G={};N.clear();for(var Y=0;Y<B.length;Y++){var j=B.get(Y),Q=j.hidden||!j.crossTileID||i.allowVerticalPlacement&&!j.placedOrientation?null:c[j.crossTileID];if(Q){var re=new u.Point(j.anchorX,j.anchorY),ue=Ct(re,o?b:x),me=Nt(v.cameraToCenterDistance,ue.signedDistanceFromCamera),fe=d.evaluateSizeForFeature(i.textSizeData,A,j)*me/u.ONE_EM;o&&(fe*=i.tilePixelRatio/I);for(var ye=Jp(Q.anchor,Q.width,Q.height,Q.textOffset,Q.textBoxScale,fe),be=o?Ct(re.add(ye),x).point:ue.point.add(s?ye.rotate(-v.angle):ye),Ae=i.allowVerticalPlacement&&j.placedOrientation===u.WritingMode.vertical?Math.PI/2:0,ke=0;ke<j.numGlyphs;ke++)u.addDynamicAttributes(N,be,Ae);F&&j.associatedIconIndex>=0&&(G[j.associatedIconIndex]={shiftedAnchor:be,angle:Ae})}else hn(j.numGlyphs,N)}if(F){W.clear();for(var je=i.icon.placedSymbolArray,et=0;et<je.length;et++){var it=je.get(et);if(it.hidden)hn(it.numGlyphs,W);else{var nt=G[et];if(nt)for(var Lt=0;Lt<it.numGlyphs;Lt++)u.addDynamicAttributes(W,nt.shiftedAnchor,nt.angle);else hn(it.numGlyphs,W)}}i.icon.dynamicLayoutVertexBuffer.updateData(W)}i.text.dynamicLayoutVertexBuffer.updateData(N)}function th(i,s,o){return o.iconsInText&&s?"symbolTextAndIcon":i?"symbolSDF":"symbolIcon"}function Qo(i,s,o,c,d,v,x,b,I,A,F,B){for(var N=i.context,W=N.gl,G=i.transform,Y=b==="map",j=I==="map",Q=Y&&o.layout.get("symbol-placement")!=="point",re=Y&&!j&&!Q,ue=o.layout.get("symbol-sort-key").constantOr(1)!==void 0,me=!1,fe=i.depthModeForSublayer(0,V.ReadOnly),ye=o.layout.get("text-variable-anchor"),be=[],Ae=0,ke=c;Ae<ke.length;Ae+=1){var je=ke[Ae],et=s.getTile(je),it=et.getBucket(o);if(it){var nt=d?it.text:it.icon;if(nt&&nt.segments.get().length){var Lt=nt.programConfigurations.get(o.id),Ge=d||it.sdfIcons,dt=d?it.textSizeData:it.iconSizeData,_t=j||G.pitch!==0,ft=i.useProgram(th(Ge,d,it),Lt),ht=u.evaluateSizeForZoom(dt,G.zoom),vt=void 0,ct=[0,0],st=void 0,Fr=void 0,mr=null,on=void 0;if(d)st=et.glyphAtlasTexture,Fr=W.LINEAR,vt=et.glyphAtlasTexture.size,it.iconsInText&&(ct=et.imageAtlasTexture.size,mr=et.imageAtlasTexture,on=_t||i.options.rotating||i.options.zooming||dt.kind==="composite"||dt.kind==="camera"?W.LINEAR:W.NEAREST);else{var Hr=o.layout.get("icon-size").constantOr(0)!==1||it.iconsNeedLinear;st=et.imageAtlasTexture,Fr=Ge||i.options.rotating||i.options.zooming||Hr||_t?W.LINEAR:W.NEAREST,vt=et.imageAtlasTexture.size}var hr=or(et,1,i.transform.zoom),br=xr(je.posMatrix,j,Y,i.transform,hr),Vn=Gt(je.posMatrix,j,Y,i.transform,hr),yn=ye&&it.hasTextData(),wo=o.layout.get("icon-text-fit")!=="none"&&yn&&it.hasIconData();Q&&ms(it,je.posMatrix,i,d,br,Vn,j,A);var Pn=i.translatePosMatrix(je.posMatrix,et,v,x),ki=Q||d&&ye||wo?Ei:br,pi=i.translatePosMatrix(Vn,et,v,x,!0),Rs=Ge&&o.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0,La={program:ft,buffers:nt,uniformValues:Ge?it.iconsInText?vl(dt.kind,ht,re,j,i,Pn,ki,pi,vt,ct):bs(dt.kind,ht,re,j,i,Pn,ki,pi,d,vt,!0):Ia(dt.kind,ht,re,j,i,Pn,ki,pi,d,vt),atlasTexture:st,atlasTextureIcon:mr,atlasInterpolation:Fr,atlasInterpolationIcon:on,isSDF:Ge,hasHalo:Rs};if(ue&&it.canOverlap){me=!0;for(var bo=0,Ra=nt.segments.get();bo<Ra.length;bo+=1){var Os=Ra[bo];be.push({segments:new u.SegmentVector([Os]),sortKey:Os.sortKey,state:La})}}else be.push({segments:nt.segments,sortKey:0,state:La})}}}me&&be.sort(function(So,na){return So.sortKey-na.sortKey});for(var Fi=0,Fs=be;Fi<Fs.length;Fi+=1){var Bi=Fs[Fi],Br=Bi.state;if(N.activeTexture.set(W.TEXTURE0),Br.atlasTexture.bind(Br.atlasInterpolation,W.CLAMP_TO_EDGE),Br.atlasTextureIcon&&(N.activeTexture.set(W.TEXTURE1),Br.atlasTextureIcon&&Br.atlasTextureIcon.bind(Br.atlasInterpolationIcon,W.CLAMP_TO_EDGE)),Br.isSDF){var Yi=Br.uniformValues;Br.hasHalo&&(Yi.u_is_halo=1,Es(Br.buffers,Bi.segments,o,i,Br.program,fe,F,B,Yi)),Yi.u_is_halo=0}Es(Br.buffers,Bi.segments,o,i,Br.program,fe,F,B,Br.uniformValues)}}function Es(i,s,o,c,d,v,x,b,I){var A=c.context;d.draw(A,A.gl.TRIANGLES,v,x,b,ie.disabled,I,o.id,i.layoutVertexBuffer,i.indexBuffer,s,o.paint,c.transform.zoom,i.programConfigurations.get(o.id),i.dynamicLayoutVertexBuffer,i.opacityVertexBuffer)}function gl(i,s,o,c,d,v,x){var b,I,A,F,B,N=i.context.gl,W=o.paint.get("fill-pattern"),G=W&&W.constantOr(1),Y=o.getCrossfadeParameters();x?(I=G&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",b=N.LINES):(I=G?"fillPattern":"fill",b=N.TRIANGLES);for(var j=0,Q=c;j<Q.length;j+=1){var re=Q[j],ue=s.getTile(re);if(!G||ue.patternsLoaded()){var me=ue.getBucket(o);if(me){var fe=me.programConfigurations.get(o.id),ye=i.useProgram(I,fe);G&&(i.context.activeTexture.set(N.TEXTURE0),ue.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),fe.updatePaintBuffers(Y));var be=W.constantOr(null);if(be&&ue.imageAtlas){var Ae=ue.imageAtlas,ke=Ae.patternPositions[be.to.toString()],je=Ae.patternPositions[be.from.toString()];ke&&je&&fe.setConstantPatternPositions(ke,je)}var et=i.translatePosMatrix(re.posMatrix,ue,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(x){F=me.indexBuffer2,B=me.segments2;var it=[N.drawingBufferWidth,N.drawingBufferHeight];A=I==="fillOutlinePattern"&&G?Xp(et,i,Y,ue,it):Wp(et,it)}else F=me.indexBuffer,B=me.segments,A=G?Xo(et,i,Y,ue):mo(et);ye.draw(i.context,b,d,i.stencilModeForClipping(re),v,ie.disabled,A,o.id,me.layoutVertexBuffer,F,B,o.paint,i.transform.zoom,fe)}}}}function Wu(i,s,o,c,d,v,x){for(var b=i.context,I=b.gl,A=o.paint.get("fill-extrusion-pattern"),F=A.constantOr(1),B=o.getCrossfadeParameters(),N=o.paint.get("fill-extrusion-opacity"),W=0,G=c;W<G.length;W+=1){var Y=G[W],j=s.getTile(Y),Q=j.getBucket(o);if(Q){var re=Q.programConfigurations.get(o.id),ue=i.useProgram(F?"fillExtrusionPattern":"fillExtrusion",re);F&&(i.context.activeTexture.set(I.TEXTURE0),j.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),re.updatePaintBuffers(B));var me=A.constantOr(null);if(me&&j.imageAtlas){var fe=j.imageAtlas,ye=fe.patternPositions[me.to.toString()],be=fe.patternPositions[me.from.toString()];ye&&be&&re.setConstantPatternPositions(ye,be)}var Ae=i.translatePosMatrix(Y.posMatrix,j,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),ke=o.paint.get("fill-extrusion-vertical-gradient"),je=F?Wo(Ae,i,ke,N,Y,B,j):Gp(Ae,i,ke,N);ue.draw(b,b.gl.TRIANGLES,d,v,x,ie.backCCW,je,o.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,o.paint,i.transform.zoom,re)}}}function _l(i,s,o,c,d,v){var x=i.context,b=x.gl,I=s.fbo;if(I){var A=i.useProgram("hillshade");x.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,I.colorAttachment.get());var F=function(B,N,W){var G=W.paint.get("hillshade-shadow-color"),Y=W.paint.get("hillshade-highlight-color"),j=W.paint.get("hillshade-accent-color"),Q=W.paint.get("hillshade-illumination-direction")*(Math.PI/180);W.paint.get("hillshade-illumination-anchor")==="viewport"&&(Q-=B.transform.angle);var re,ue,me,fe=!B.options.moving;return{u_matrix:B.transform.calculatePosMatrix(N.tileID.toUnwrapped(),fe),u_image:0,u_latrange:(re=N.tileID,ue=Math.pow(2,re.canonical.z),me=re.canonical.y,[new u.MercatorCoordinate(0,me/ue).toLngLat().lat,new u.MercatorCoordinate(0,(me+1)/ue).toLngLat().lat]),u_light:[W.paint.get("hillshade-exaggeration"),Q],u_shadow:G,u_highlight:Y,u_accent:j}}(i,s,o);A.draw(x,b.TRIANGLES,c,d,v,ie.disabled,F,o.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments)}}function md(i,s,o,c,d,v){var x=i.context,b=x.gl,I=s.dem;if(I&&I.data){var A=I.dim,F=I.stride,B=I.getPixels();if(x.activeTexture.set(b.TEXTURE1),x.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||i.getTileTexture(F),s.demTexture){var N=s.demTexture;N.update(B,{premultiply:!1}),N.bind(b.NEAREST,b.CLAMP_TO_EDGE)}else s.demTexture=new u.Texture(x,B,b.RGBA,{premultiply:!1}),s.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE);x.activeTexture.set(b.TEXTURE0);var W=s.fbo;if(!W){var G=new u.Texture(x,{width:A,height:A,data:null},b.RGBA);G.bind(b.LINEAR,b.CLAMP_TO_EDGE),(W=s.fbo=x.createFramebuffer(A,A,!0)).colorAttachment.set(G.texture)}x.bindFramebuffer.set(W.framebuffer),x.viewport.set([0,0,A,A]),i.useProgram("hillshadePrepare").draw(x,b.TRIANGLES,c,d,v,ie.disabled,function(Y,j){var Q=j.stride,re=u.create();return u.ortho(re,0,u.EXTENT,-u.EXTENT,0,0,1),u.translate(re,re,[0,-u.EXTENT,0]),{u_matrix:re,u_image:1,u_dimension:[Q,Q],u_zoom:Y.overscaledZ,u_unpack:j.getUnpackVector()}}(s.tileID,I),o.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function xl(i,s,o,c,d){var v=c.paint.get("raster-fade-duration");if(v>0){var x=u.browser.now(),b=(x-i.timeAdded)/v,I=s?(x-s.timeAdded)/v:-1,A=o.getSource(),F=d.coveringZoomLevel({tileSize:A.tileSize,roundZoom:A.roundZoom}),B=!s||Math.abs(s.tileID.overscaledZ-F)>Math.abs(i.tileID.overscaledZ-F),N=B&&i.refreshedUponExpiration?1:u.clamp(B?b:1-I,0,1);return i.refreshedUponExpiration&&b>=1&&(i.refreshedUponExpiration=!1),s?{opacity:1,mix:1-N}:{opacity:N,mix:0}}return{opacity:1,mix:0}}var Xu=new u.Color(1,0,0,1),rh=new u.Color(0,1,0,1),nh=new u.Color(0,0,1,1),wl=new u.Color(1,0,1,1),Hu=new u.Color(0,1,1,1);function Ku(i,s,o,c){Ts(i,0,s+o/2,i.transform.width,o,c)}function $u(i,s,o,c){Ts(i,s-o/2,0,o,i.transform.height,c)}function Ts(i,s,o,c,d,v){var x=i.context,b=x.gl;b.enable(b.SCISSOR_TEST),b.scissor(s*u.browser.devicePixelRatio,o*u.browser.devicePixelRatio,c*u.browser.devicePixelRatio,d*u.browser.devicePixelRatio),x.clear({color:v}),b.disable(b.SCISSOR_TEST)}function ih(i,s,o){var c=i.context,d=c.gl,v=o.posMatrix,x=i.useProgram("debug"),b=V.disabled,I=X.disabled,A=i.colorModeForRenderPass();c.activeTexture.set(d.TEXTURE0),i.emptyTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),x.draw(c,d.LINE_STRIP,b,I,A,ie.disabled,Ko(v,u.Color.red),"$debug",i.debugBuffer,i.tileBorderIndexBuffer,i.debugSegments);var F=s.getTileByID(o.key).latestRawTileData,B=Math.floor((F&&F.byteLength||0)/1024),N=s.getTile(o).tileSize,W=512/Math.min(N,512)*(o.overscaledZ/i.transform.zoom)*.5,G=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(G+=" => "+o.overscaledZ),function(Y,j){Y.initDebugOverlayCanvas();var Q=Y.debugOverlayCanvas,re=Y.context.gl,ue=Y.debugOverlayCanvas.getContext("2d");ue.clearRect(0,0,Q.width,Q.height),ue.shadowColor="white",ue.shadowBlur=2,ue.lineWidth=1.5,ue.strokeStyle="white",ue.textBaseline="top",ue.font="bold 36px Open Sans, sans-serif",ue.fillText(j,5,5),ue.strokeText(j,5,5),Y.debugOverlayTexture.update(Q),Y.debugOverlayTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE)}(i,G+" "+B+"kb"),x.draw(c,d.TRIANGLES,b,I,te.alphaBlended,ie.disabled,Ko(v,u.Color.transparent,W),"$debug",i.debugBuffer,i.quadTriangleIndexBuffer,i.debugSegments)}var Yo={symbol:function(i,s,o,c,d){if(i.renderPass==="translucent"){var v=X.disabled,x=i.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(b,I,A,F,B,N,W){for(var G=I.transform,Y=B==="map",j=N==="map",Q=0,re=b;Q<re.length;Q+=1){var ue=re[Q],me=F.getTile(ue),fe=me.getBucket(A);if(fe&&fe.text&&fe.text.segments.get().length){var ye=u.evaluateSizeForZoom(fe.textSizeData,G.zoom),be=or(me,1,I.transform.zoom),Ae=xr(ue.posMatrix,j,Y,I.transform,be),ke=A.layout.get("icon-text-fit")!=="none"&&fe.hasIconData();if(ye){var je=Math.pow(2,G.zoom-me.tileID.overscaledZ);eh(fe,Y,j,W,u.symbolSize,G,Ae,ue.posMatrix,je,ye,ke)}}}}(c,i,o,s,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),d),o.paint.get("icon-opacity").constantOr(1)!==0&&Qo(i,s,o,c,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),v,x),o.paint.get("text-opacity").constantOr(1)!==0&&Qo(i,s,o,c,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),v,x),s.map.showCollisionBoxes&&(Ca(i,s,o,c,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Ca(i,s,o,c,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(i,s,o,c){if(i.renderPass==="translucent"){var d=o.paint.get("circle-opacity"),v=o.paint.get("circle-stroke-width"),x=o.paint.get("circle-stroke-opacity"),b=o.layout.get("circle-sort-key").constantOr(1)!==void 0;if(d.constantOr(1)!==0||v.constantOr(1)!==0&&x.constantOr(1)!==0){for(var I=i.context,A=I.gl,F=i.depthModeForSublayer(0,V.ReadOnly),B=X.disabled,N=i.colorModeForRenderPass(),W=[],G=0;G<c.length;G++){var Y=c[G],j=s.getTile(Y),Q=j.getBucket(o);if(Q){var re=Q.programConfigurations.get(o.id),ue={programConfiguration:re,program:i.useProgram("circle",re),layoutVertexBuffer:Q.layoutVertexBuffer,indexBuffer:Q.indexBuffer,uniformValues:Gu(i,Y,j,o)};if(b)for(var me=0,fe=Q.segments.get();me<fe.length;me+=1){var ye=fe[me];W.push({segments:new u.SegmentVector([ye]),sortKey:ye.sortKey,state:ue})}else W.push({segments:Q.segments,sortKey:0,state:ue})}}b&&W.sort(function(et,it){return et.sortKey-it.sortKey});for(var be=0,Ae=W;be<Ae.length;be+=1){var ke=Ae[be],je=ke.state;je.program.draw(I,A.TRIANGLES,F,B,N,ie.disabled,je.uniformValues,o.id,je.layoutVertexBuffer,je.indexBuffer,ke.segments,o.paint,i.transform.zoom,je.programConfiguration)}}}},heatmap:function(i,s,o,c){if(o.paint.get("heatmap-opacity")!==0)if(i.renderPass==="offscreen"){var d=i.context,v=d.gl,x=X.disabled,b=new te([v.ONE,v.ONE],u.Color.transparent,[!0,!0,!0,!0]);(function(W,G,Y){var j=W.gl;W.activeTexture.set(j.TEXTURE1),W.viewport.set([0,0,G.width/4,G.height/4]);var Q=Y.heatmapFbo;if(Q)j.bindTexture(j.TEXTURE_2D,Q.colorAttachment.get()),W.bindFramebuffer.set(Q.framebuffer);else{var re=j.createTexture();j.bindTexture(j.TEXTURE_2D,re),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.LINEAR),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.LINEAR),Q=Y.heatmapFbo=W.createFramebuffer(G.width/4,G.height/4,!1),function(ue,me,fe,ye){var be=ue.gl;be.texImage2D(be.TEXTURE_2D,0,be.RGBA,me.width/4,me.height/4,0,be.RGBA,ue.extRenderToTextureHalfFloat?ue.extTextureHalfFloat.HALF_FLOAT_OES:be.UNSIGNED_BYTE,null),ye.colorAttachment.set(fe)}(W,G,re,Q)}})(d,i,o),d.clear({color:u.Color.transparent});for(var I=0;I<c.length;I++){var A=c[I];if(!s.hasRenderableParent(A)){var F=s.getTile(A),B=F.getBucket(o);if(B){var N=B.programConfigurations.get(o.id);i.useProgram("heatmap",N).draw(d,v.TRIANGLES,V.disabled,x,b,ie.disabled,Kp(A.posMatrix,F,i.transform.zoom,o.paint.get("heatmap-intensity")),o.id,B.layoutVertexBuffer,B.indexBuffer,B.segments,o.paint,i.transform.zoom,N)}}}d.viewport.set([0,0,i.width,i.height])}else i.renderPass==="translucent"&&(i.context.setColorMode(i.colorModeForRenderPass()),function(W,G){var Y=W.context,j=Y.gl,Q=G.heatmapFbo;if(Q){Y.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,Q.colorAttachment.get()),Y.activeTexture.set(j.TEXTURE1);var re=G.colorRampTexture;re||(re=G.colorRampTexture=new u.Texture(Y,G.colorRamp,j.RGBA)),re.bind(j.LINEAR,j.CLAMP_TO_EDGE),W.useProgram("heatmapTexture").draw(Y,j.TRIANGLES,V.disabled,X.disabled,W.colorModeForRenderPass(),ie.disabled,function(ue,me,fe,ye){var be=u.create();u.ortho(be,0,ue.width,ue.height,0,0,1);var Ae=ue.context.gl;return{u_matrix:be,u_world:[Ae.drawingBufferWidth,Ae.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:me.paint.get("heatmap-opacity")}}(W,G),G.id,W.viewportBuffer,W.quadTriangleIndexBuffer,W.viewportSegments,G.paint,W.transform.zoom)}}(i,o))},line:function(i,s,o,c){if(i.renderPass==="translucent"){var d=o.paint.get("line-opacity"),v=o.paint.get("line-width");if(d.constantOr(1)!==0&&v.constantOr(1)!==0)for(var x=i.depthModeForSublayer(0,V.ReadOnly),b=i.colorModeForRenderPass(),I=o.paint.get("line-dasharray"),A=o.paint.get("line-pattern"),F=A.constantOr(1),B=o.paint.get("line-gradient"),N=o.getCrossfadeParameters(),W=F?"linePattern":I?"lineSDF":B?"lineGradient":"line",G=i.context,Y=G.gl,j=!0,Q=0,re=c;Q<re.length;Q+=1){var ue=re[Q],me=s.getTile(ue);if(!F||me.patternsLoaded()){var fe=me.getBucket(o);if(fe){var ye=fe.programConfigurations.get(o.id),be=i.context.program.get(),Ae=i.useProgram(W,ye),ke=j||Ae.program!==be,je=A.constantOr(null);if(je&&me.imageAtlas){var et=me.imageAtlas,it=et.patternPositions[je.to.toString()],nt=et.patternPositions[je.from.toString()];it&&nt&&ye.setConstantPatternPositions(it,nt)}var Lt=F?ml(i,me,o,N):I?fd(i,me,o,I,N):B?Jt(i,me,o,fe.lineClipsArray.length):ws(i,me,o);if(F)G.activeTexture.set(Y.TEXTURE0),me.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),ye.updatePaintBuffers(N);else if(I&&(ke||i.lineAtlas.dirty))G.activeTexture.set(Y.TEXTURE0),i.lineAtlas.bind(G);else if(B){var Ge=fe.gradients[o.id],dt=Ge.texture;if(o.gradientVersion!==Ge.version){var _t=256;if(o.stepInterpolant){var ft=s.getSource().maxzoom,ht=ue.canonical.z===ft?Math.ceil(1<<i.transform.maxZoom-ue.canonical.z):1;_t=u.clamp(u.nextPowerOfTwo(fe.maxLineLength/u.EXTENT*1024*ht),256,G.maxTextureSize)}Ge.gradient=u.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:_t,image:Ge.gradient||void 0,clips:fe.lineClipsArray}),Ge.texture?Ge.texture.update(Ge.gradient):Ge.texture=new u.Texture(G,Ge.gradient,Y.RGBA),Ge.version=o.gradientVersion,dt=Ge.texture}G.activeTexture.set(Y.TEXTURE0),dt.bind(o.stepInterpolant?Y.NEAREST:Y.LINEAR,Y.CLAMP_TO_EDGE)}Ae.draw(G,Y.TRIANGLES,x,i.stencilModeForClipping(ue),b,ie.disabled,Lt,o.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,o.paint,i.transform.zoom,ye,fe.layoutVertexBuffer2),j=!1}}}}},fill:function(i,s,o,c){var d=o.paint.get("fill-color"),v=o.paint.get("fill-opacity");if(v.constantOr(1)!==0){var x=i.colorModeForRenderPass(),b=o.paint.get("fill-pattern"),I=i.opaquePassEnabledForLayer()&&!b.constantOr(1)&&d.constantOr(u.Color.transparent).a===1&&v.constantOr(0)===1?"opaque":"translucent";if(i.renderPass===I){var A=i.depthModeForSublayer(1,i.renderPass==="opaque"?V.ReadWrite:V.ReadOnly);gl(i,s,o,c,A,x,!1)}if(i.renderPass==="translucent"&&o.paint.get("fill-antialias")){var F=i.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,V.ReadOnly);gl(i,s,o,c,F,x,!0)}}},"fill-extrusion":function(i,s,o,c){var d=o.paint.get("fill-extrusion-opacity");if(d!==0&&i.renderPass==="translucent"){var v=new V(i.context.gl.LEQUAL,V.ReadWrite,i.depthRangeFor3D);if(d!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))Wu(i,s,o,c,v,X.disabled,te.disabled),Wu(i,s,o,c,v,i.stencilModeFor3D(),i.colorModeForRenderPass());else{var x=i.colorModeForRenderPass();Wu(i,s,o,c,v,X.disabled,x)}}},hillshade:function(i,s,o,c){if(i.renderPass==="offscreen"||i.renderPass==="translucent"){for(var d=i.context,v=i.depthModeForSublayer(0,V.ReadOnly),x=i.colorModeForRenderPass(),b=i.renderPass==="translucent"?i.stencilConfigForOverlap(c):[{},c],I=b[0],A=0,F=b[1];A<F.length;A+=1){var B=F[A],N=s.getTile(B);N.needsHillshadePrepare&&i.renderPass==="offscreen"?md(i,N,o,v,X.disabled,x):i.renderPass==="translucent"&&_l(i,N,o,v,I[B.overscaledZ],x)}d.viewport.set([0,0,i.width,i.height])}},raster:function(i,s,o,c){if(i.renderPass==="translucent"&&o.paint.get("raster-opacity")!==0&&c.length)for(var d=i.context,v=d.gl,x=s.getSource(),b=i.useProgram("raster"),I=i.colorModeForRenderPass(),A=x instanceof pt?[{},c]:i.stencilConfigForOverlap(c),F=A[0],B=A[1],N=B[B.length-1].overscaledZ,W=!i.options.moving,G=0,Y=B;G<Y.length;G+=1){var j=Y[G],Q=i.depthModeForSublayer(j.overscaledZ-N,o.paint.get("raster-opacity")===1?V.ReadWrite:V.ReadOnly,v.LESS),re=s.getTile(j),ue=i.transform.calculatePosMatrix(j.toUnwrapped(),W);re.registerFadeDuration(o.paint.get("raster-fade-duration"));var me=s.findLoadedParent(j,0),fe=xl(re,me,s,o,i.transform),ye=void 0,be=void 0,Ae=o.paint.get("raster-resampling")==="nearest"?v.NEAREST:v.LINEAR;d.activeTexture.set(v.TEXTURE0),re.texture.bind(Ae,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),d.activeTexture.set(v.TEXTURE1),me?(me.texture.bind(Ae,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),ye=Math.pow(2,me.tileID.overscaledZ-re.tileID.overscaledZ),be=[re.tileID.canonical.x*ye%1,re.tileID.canonical.y*ye%1]):re.texture.bind(Ae,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST);var ke=dd(ue,be||[0,0],ye||1,fe,o);x instanceof pt?b.draw(d,v.TRIANGLES,Q,X.disabled,I,ie.disabled,ke,o.id,x.boundsBuffer,i.quadTriangleIndexBuffer,x.boundsSegments):b.draw(d,v.TRIANGLES,Q,F[j.overscaledZ],I,ie.disabled,ke,o.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments)}},background:function(i,s,o){var c=o.paint.get("background-color"),d=o.paint.get("background-opacity");if(d!==0){var v=i.context,x=v.gl,b=i.transform,I=b.tileSize,A=o.paint.get("background-pattern");if(!i.isPatternMissing(A)){var F=!A&&c.a===1&&d===1&&i.opaquePassEnabledForLayer()?"opaque":"translucent";if(i.renderPass===F){var B=X.disabled,N=i.depthModeForSublayer(0,F==="opaque"?V.ReadWrite:V.ReadOnly),W=i.colorModeForRenderPass(),G=i.useProgram(A?"backgroundPattern":"background"),Y=b.coveringTiles({tileSize:I});A&&(v.activeTexture.set(x.TEXTURE0),i.imageManager.bind(i.context));for(var j=o.getCrossfadeParameters(),Q=0,re=Y;Q<re.length;Q+=1){var ue=re[Q],me=i.transform.calculatePosMatrix(ue.toUnwrapped()),fe=A?Pa(me,d,i,A,{tileID:ue,tileSize:I},j):Ss(me,d,c);G.draw(v,x.TRIANGLES,N,B,W,ie.disabled,fe,o.id,i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}}}},debug:function(i,s,o){for(var c=0;c<o.length;c++)ih(i,s,o[c])},custom:function(i,s,o){var c=i.context,d=o.implementation;if(i.renderPass==="offscreen"){var v=d.prerender;v&&(i.setCustomLayerDefaults(),c.setColorMode(i.colorModeForRenderPass()),v.call(d,c.gl,i.transform.customLayerMatrix()),c.setDirty(),i.setBaseState())}else if(i.renderPass==="translucent"){i.setCustomLayerDefaults(),c.setColorMode(i.colorModeForRenderPass()),c.setStencilMode(X.disabled);var x=d.renderingMode==="3d"?new V(i.context.gl.LEQUAL,V.ReadWrite,i.depthRangeFor3D):i.depthModeForSublayer(0,V.ReadOnly);c.setDepthMode(x),d.render(c.gl,i.transform.customLayerMatrix()),c.setDirty(),i.setBaseState(),c.bindFramebuffer.set(null)}}},ar=function(i,s){this.context=new U(i),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=H.maxUnderzooming+H.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new so,this.gpuTimers={}};ar.prototype.resize=function(i,s){if(this.width=i*u.browser.devicePixelRatio,this.height=s*u.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,c=this.style._order;o<c.length;o+=1)this.style._layers[c[o]].resize()},ar.prototype.setup=function(){var i=this.context,s=new u.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(u.EXTENT,0),s.emplaceBack(0,u.EXTENT),s.emplaceBack(u.EXTENT,u.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(s,Cr.members),this.tileExtentSegments=u.SegmentVector.simpleSegment(0,0,4,2);var o=new u.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(u.EXTENT,0),o.emplaceBack(0,u.EXTENT),o.emplaceBack(u.EXTENT,u.EXTENT),this.debugBuffer=i.createVertexBuffer(o,Cr.members),this.debugSegments=u.SegmentVector.simpleSegment(0,0,4,5);var c=new u.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(u.EXTENT,0,u.EXTENT,0),c.emplaceBack(0,u.EXTENT,0,u.EXTENT),c.emplaceBack(u.EXTENT,u.EXTENT,u.EXTENT,u.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(c,Fe.members),this.rasterBoundsSegments=u.SegmentVector.simpleSegment(0,0,4,2);var d=new u.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(1,0),d.emplaceBack(0,1),d.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(d,Cr.members),this.viewportSegments=u.SegmentVector.simpleSegment(0,0,4,2);var v=new u.StructArrayLayout1ui2;v.emplaceBack(0),v.emplaceBack(1),v.emplaceBack(3),v.emplaceBack(2),v.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(v);var x=new u.StructArrayLayout3ui6;x.emplaceBack(0,1,2),x.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(x),this.emptyTexture=new u.Texture(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);var b=this.context.gl;this.stencilClearMode=new X({func:b.ALWAYS,mask:0},0,255,b.ZERO,b.ZERO,b.ZERO)},ar.prototype.clearStencil=function(){var i=this.context,s=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=u.create();u.ortho(o,0,this.width,this.height,0,0,1),u.scale(o,o,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,s.TRIANGLES,V.disabled,this.stencilClearMode,te.disabled,ie.disabled,$o(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ar.prototype._renderTileClippingMasks=function(i,s){if(this.currentStencilSource!==i.source&&i.isTileClipped()&&s&&s.length){this.currentStencilSource=i.source;var o=this.context,c=o.gl;this.nextStencilID+s.length>256&&this.clearStencil(),o.setColorMode(te.disabled),o.setDepthMode(V.disabled);var d=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var v=0,x=s;v<x.length;v+=1){var b=x[v],I=this._tileClippingMaskIDs[b.key]=this.nextStencilID++;d.draw(o,c.TRIANGLES,V.disabled,new X({func:c.ALWAYS,mask:0},I,255,c.KEEP,c.KEEP,c.REPLACE),te.disabled,ie.disabled,$o(b.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ar.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var i=this.nextStencilID++,s=this.context.gl;return new X({func:s.NOTEQUAL,mask:255},i,255,s.KEEP,s.KEEP,s.REPLACE)},ar.prototype.stencilModeForClipping=function(i){var s=this.context.gl;return new X({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,s.KEEP,s.KEEP,s.REPLACE)},ar.prototype.stencilConfigForOverlap=function(i){var s,o=this.context.gl,c=i.sort(function(I,A){return A.overscaledZ-I.overscaledZ}),d=c[c.length-1].overscaledZ,v=c[0].overscaledZ-d+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();for(var x={},b=0;b<v;b++)x[b+d]=new X({func:o.GEQUAL,mask:255},b+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=v,[x,c]}return[(s={},s[d]=X.disabled,s),c]},ar.prototype.colorModeForRenderPass=function(){var i=this.context.gl;return this._showOverdrawInspector?new te([i.CONSTANT_COLOR,i.ONE],new u.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?te.unblended:te.alphaBlended},ar.prototype.depthModeForSublayer=function(i,s,o){if(!this.opaquePassEnabledForLayer())return V.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new V(o||this.context.gl.LEQUAL,s,[c,c])},ar.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ar.prototype.render=function(i,s){var o=this;this.style=i,this.options=s,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(u.browser.now()),this.imageManager.beginFrame();var c=this.style._order,d=this.style.sourceCaches;for(var v in d){var x=d[v];x.used&&x.prepare(this.context)}var b,I,A={},F={},B={};for(var N in d){var W=d[N];A[N]=W.getVisibleCoordinates(),F[N]=A[N].slice().reverse(),B[N]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var G=0;G<c.length;G++)if(this.style._layers[c[G]].is3D()){this.opaquePassCutoff=G;break}this.renderPass="offscreen";for(var Y=0,j=c;Y<j.length;Y+=1){var Q=this.style._layers[j[Y]];if(Q.hasOffscreenPass()&&!Q.isHidden(this.transform.zoom)){var re=F[Q.source];(Q.type==="custom"||re.length)&&this.renderLayer(this,d[Q.source],Q,re)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?u.Color.black:u.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var ue=this.style._layers[c[this.currentLayer]],me=d[ue.source],fe=A[ue.source];this._renderTileClippingMasks(ue,fe),this.renderLayer(this,me,ue,fe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var ye=this.style._layers[c[this.currentLayer]],be=d[ye.source],Ae=(ye.type==="symbol"?B:F)[ye.source];this._renderTileClippingMasks(ye,A[ye.source]),this.renderLayer(this,be,ye,Ae)}this.options.showTileBoundaries&&(u.values(this.style._layers).forEach(function(ke){ke.source&&!ke.isHidden(o.transform.zoom)&&(ke.source!==(I&&I.id)&&(I=o.style.sourceCaches[ke.source]),(!b||b.getSource().maxzoom<I.getSource().maxzoom)&&(b=I))}),b&&Yo.debug(this,b,b.getVisibleCoordinates())),this.options.showPadding&&function(ke){var je=ke.transform.padding;Ku(ke,ke.transform.height-(je.top||0),3,Xu),Ku(ke,je.bottom||0,3,rh),$u(ke,je.left||0,3,nh),$u(ke,ke.transform.width-(je.right||0),3,wl);var et=ke.transform.centerPoint;(function(it,nt,Lt,Ge){Ts(it,nt-1,Lt-10,2,20,Ge),Ts(it,nt-10,Lt-1,20,2,Ge)})(ke,et.x,ke.transform.height-et.y,Hu)}(this),this.context.setDefault()},ar.prototype.renderLayer=function(i,s,o,c){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||c.length)&&(this.id=o.id,this.gpuTimingStart(o),Yo[o.type](i,s,o,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},ar.prototype.gpuTimingStart=function(i){if(this.options.gpuTiming){var s=this.context.extTimerQuery,o=this.gpuTimers[i.id];o||(o=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),o.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,o.query)}},ar.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}},ar.prototype.collectGpuTimers=function(){var i=this.gpuTimers;return this.gpuTimers={},i},ar.prototype.queryGpuTimers=function(i){var s={};for(var o in i){var c=i[o],d=this.context.extTimerQuery,v=d.getQueryObjectEXT(c.query,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(c.query),s[o]=v}return s},ar.prototype.translatePosMatrix=function(i,s,o,c,d){if(!o[0]&&!o[1])return i;var v=d?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(v){var x=Math.sin(v),b=Math.cos(v);o=[o[0]*b-o[1]*x,o[0]*x+o[1]*b]}var I=[d?o[0]:or(s,o[0],this.transform.zoom),d?o[1]:or(s,o[1],this.transform.zoom),0],A=new Float32Array(16);return u.translate(A,i,I),A},ar.prototype.saveTileTexture=function(i){var s=this._tileTextures[i.size[0]];s?s.push(i):this._tileTextures[i.size[0]]=[i]},ar.prototype.getTileTexture=function(i){var s=this._tileTextures[i];return s&&s.length>0?s.pop():null},ar.prototype.isPatternMissing=function(i){if(!i)return!1;if(!i.from||!i.to)return!0;var s=this.imageManager.getPattern(i.from.toString()),o=this.imageManager.getPattern(i.to.toString());return!s||!o},ar.prototype.useProgram=function(i,s){this.cache=this.cache||{};var o=""+i+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new qp(this.context,i,hd[i],s,Yp[i],this._showOverdrawInspector)),this.cache[o]},ar.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ar.prototype.setBaseState=function(){var i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)},ar.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=u.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new u.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ar.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var bl=function(i,s){this.points=i,this.planes=s};bl.fromInvProjectionMatrix=function(i,s,o){var c=Math.pow(2,o),d=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(x){return u.transformMat4([],x,i)}).map(function(x){return u.scale$1([],x,1/x[3]/s*c)}),v=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(x){var b=u.sub([],d[x[0]],d[x[1]]),I=u.sub([],d[x[2]],d[x[1]]),A=u.normalize([],u.cross([],b,I)),F=-u.dot(A,d[x[1]]);return A.concat(F)});return new bl(d,v)};var Jo=function(i,s){this.min=i,this.max=s,this.center=u.scale$2([],u.add([],this.min,this.max),.5)};Jo.prototype.quadrant=function(i){for(var s=[i%2==0,i<2],o=u.clone$2(this.min),c=u.clone$2(this.max),d=0;d<s.length;d++)o[d]=s[d]?this.min[d]:this.center[d],c[d]=s[d]?this.center[d]:this.max[d];return c[2]=this.max[2],new Jo(o,c)},Jo.prototype.distanceX=function(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]},Jo.prototype.distanceY=function(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]},Jo.prototype.intersects=function(i){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,c=0;c<i.planes.length;c++){for(var d=i.planes[c],v=0,x=0;x<s.length;x++)v+=u.dot$1(d,s[x])>=0;if(v===0)return 0;v!==s.length&&(o=!1)}if(o)return 2;for(var b=0;b<3;b++){for(var I=Number.MAX_VALUE,A=-Number.MAX_VALUE,F=0;F<i.points.length;F++){var B=i.points[F][b]-this.min[b];I=Math.min(I,B),A=Math.max(A,B)}if(A<0||I>this.max[b]-this.min[b])return 0}return 1};var yo=function(i,s,o,c){if(i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o=0),c===void 0&&(c=0),isNaN(i)||i<0||isNaN(s)||s<0||isNaN(o)||o<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=s,this.left=o,this.right=c};yo.prototype.interpolate=function(i,s,o){return s.top!=null&&i.top!=null&&(this.top=u.number(i.top,s.top,o)),s.bottom!=null&&i.bottom!=null&&(this.bottom=u.number(i.bottom,s.bottom,o)),s.left!=null&&i.left!=null&&(this.left=u.number(i.left,s.left,o)),s.right!=null&&i.right!=null&&(this.right=u.number(i.right,s.right,o)),this},yo.prototype.getCenter=function(i,s){var o=u.clamp((this.left+i-this.right)/2,0,i),c=u.clamp((this.top+s-this.bottom)/2,0,s);return new u.Point(o,c)},yo.prototype.equals=function(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right},yo.prototype.clone=function(){return new yo(this.top,this.bottom,this.left,this.right)},yo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var zt=function(i,s,o,c,d){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=d===void 0||d,this._minZoom=i||0,this._maxZoom=s||22,this._minPitch=o==null?0:o,this._maxPitch=c==null?60:c,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new yo,this._posMatrixCache={},this._alignedPosMatrixCache={}},er={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};zt.prototype.clone=function(){var i=new zt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i},er.minZoom.get=function(){return this._minZoom},er.minZoom.set=function(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))},er.maxZoom.get=function(){return this._maxZoom},er.maxZoom.set=function(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))},er.minPitch.get=function(){return this._minPitch},er.minPitch.set=function(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))},er.maxPitch.get=function(){return this._maxPitch},er.maxPitch.set=function(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))},er.renderWorldCopies.get=function(){return this._renderWorldCopies},er.renderWorldCopies.set=function(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i},er.worldSize.get=function(){return this.tileSize*this.scale},er.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},er.size.get=function(){return new u.Point(this.width,this.height)},er.bearing.get=function(){return-this.angle/Math.PI*180},er.bearing.set=function(i){var s=-u.wrap(i,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=u.create$2(),u.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},er.pitch.get=function(){return this._pitch/Math.PI*180},er.pitch.set=function(i){var s=u.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},er.fov.get=function(){return this._fov/Math.PI*180},er.fov.set=function(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())},er.zoom.get=function(){return this._zoom},er.zoom.set=function(i){var s=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},er.center.get=function(){return this._center},er.center.set=function(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())},er.padding.get=function(){return this._edgeInsets.toJSON()},er.padding.set=function(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())},er.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},zt.prototype.isPaddingEqual=function(i){return this._edgeInsets.equals(i)},zt.prototype.interpolatePadding=function(i,s,o){this._unmodified=!1,this._edgeInsets.interpolate(i,s,o),this._constrain(),this._calcMatrices()},zt.prototype.coveringZoomLevel=function(i){var s=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,s)},zt.prototype.getVisibleUnwrappedCoordinates=function(i){var s=[new u.UnwrappedTileID(0,i)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new u.Point(0,0)),c=this.pointCoordinate(new u.Point(this.width,0)),d=this.pointCoordinate(new u.Point(this.width,this.height)),v=this.pointCoordinate(new u.Point(0,this.height)),x=Math.floor(Math.min(o.x,c.x,d.x,v.x)),b=Math.floor(Math.max(o.x,c.x,d.x,v.x)),I=x-1;I<=b+1;I++)I!==0&&s.push(new u.UnwrappedTileID(I,i));return s},zt.prototype.coveringTiles=function(i){var s=this.coveringZoomLevel(i),o=s;if(i.minzoom!==void 0&&s<i.minzoom)return[];i.maxzoom!==void 0&&s>i.maxzoom&&(s=i.maxzoom);var c=u.MercatorCoordinate.fromLngLat(this.center),d=Math.pow(2,s),v=[d*c.x,d*c.y,0],x=bl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),b=i.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(b=s);var I=function(ke){return{aabb:new Jo([ke*d,0,0],[(ke+1)*d,d,0]),zoom:0,x:0,y:0,wrap:ke,fullyVisible:!1}},A=[],F=[],B=s,N=i.reparseOverscaled?o:s;if(this._renderWorldCopies)for(var W=1;W<=3;W++)A.push(I(-W)),A.push(I(W));for(A.push(I(0));A.length>0;){var G=A.pop(),Y=G.x,j=G.y,Q=G.fullyVisible;if(!Q){var re=G.aabb.intersects(x);if(re===0)continue;Q=re===2}var ue=G.aabb.distanceX(v),me=G.aabb.distanceY(v),fe=Math.max(Math.abs(ue),Math.abs(me));if(G.zoom===B||fe>3+(1<<B-G.zoom)-2&&G.zoom>=b)F.push({tileID:new u.OverscaledTileID(G.zoom===B?N:G.zoom,G.wrap,G.zoom,Y,j),distanceSq:u.sqrLen([v[0]-.5-Y,v[1]-.5-j])});else for(var ye=0;ye<4;ye++){var be=(Y<<1)+ye%2,Ae=(j<<1)+(ye>>1);A.push({aabb:G.aabb.quadrant(ye),zoom:G.zoom+1,x:be,y:Ae,wrap:G.wrap,fullyVisible:Q})}}return F.sort(function(ke,je){return ke.distanceSq-je.distanceSq}).map(function(ke){return ke.tileID})},zt.prototype.resize=function(i,s){this.width=i,this.height=s,this.pixelsToGLUnits=[2/i,-2/s],this._constrain(),this._calcMatrices()},er.unmodified.get=function(){return this._unmodified},zt.prototype.zoomScale=function(i){return Math.pow(2,i)},zt.prototype.scaleZoom=function(i){return Math.log(i)/Math.LN2},zt.prototype.project=function(i){var s=u.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.Point(u.mercatorXfromLng(i.lng)*this.worldSize,u.mercatorYfromLat(s)*this.worldSize)},zt.prototype.unproject=function(i){return new u.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()},er.point.get=function(){return this.project(this.center)},zt.prototype.setLocationAtPoint=function(i,s){var o=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),d=this.locationCoordinate(i),v=new u.MercatorCoordinate(d.x-(o.x-c.x),d.y-(o.y-c.y));this.center=this.coordinateLocation(v),this._renderWorldCopies&&(this.center=this.center.wrap())},zt.prototype.locationPoint=function(i){return this.coordinatePoint(this.locationCoordinate(i))},zt.prototype.pointLocation=function(i){return this.coordinateLocation(this.pointCoordinate(i))},zt.prototype.locationCoordinate=function(i){return u.MercatorCoordinate.fromLngLat(i)},zt.prototype.coordinateLocation=function(i){return i.toLngLat()},zt.prototype.pointCoordinate=function(i){var s=[i.x,i.y,0,1],o=[i.x,i.y,1,1];u.transformMat4(s,s,this.pixelMatrixInverse),u.transformMat4(o,o,this.pixelMatrixInverse);var c=s[3],d=o[3],v=s[1]/c,x=o[1]/d,b=s[2]/c,I=o[2]/d,A=b===I?0:(0-b)/(I-b);return new u.MercatorCoordinate(u.number(s[0]/c,o[0]/d,A)/this.worldSize,u.number(v,x,A)/this.worldSize)},zt.prototype.coordinatePoint=function(i){var s=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.transformMat4(s,s,this.pixelMatrix),new u.Point(s[0]/s[3],s[1]/s[3])},zt.prototype.getBounds=function(){return new u.LngLatBounds().extend(this.pointLocation(new u.Point(0,0))).extend(this.pointLocation(new u.Point(this.width,0))).extend(this.pointLocation(new u.Point(this.width,this.height))).extend(this.pointLocation(new u.Point(0,this.height)))},zt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new u.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},zt.prototype.setMaxBounds=function(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},zt.prototype.calculatePosMatrix=function(i,s){s===void 0&&(s=!1);var o=i.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[o])return c[o];var d=i.canonical,v=this.worldSize/this.zoomScale(d.z),x=d.x+Math.pow(2,d.z)*i.wrap,b=u.identity(new Float64Array(16));return u.translate(b,b,[x*v,d.y*v,0]),u.scale(b,b,[v/u.EXTENT,v/u.EXTENT,1]),u.multiply(b,s?this.alignedProjMatrix:this.projMatrix,b),c[o]=new Float32Array(b),c[o]},zt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},zt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var i,s,o,c,d=-90,v=90,x=-180,b=180,I=this.size,A=this._unmodified;if(this.latRange){var F=this.latRange;d=u.mercatorYfromLat(F[1])*this.worldSize,i=(v=u.mercatorYfromLat(F[0])*this.worldSize)-d<I.y?I.y/(v-d):0}if(this.lngRange){var B=this.lngRange;x=u.mercatorXfromLng(B[0])*this.worldSize,s=(b=u.mercatorXfromLng(B[1])*this.worldSize)-x<I.x?I.x/(b-x):0}var N=this.point,W=Math.max(s||0,i||0);if(W)return this.center=this.unproject(new u.Point(s?(b+x)/2:N.x,i?(v+d)/2:N.y)),this.zoom+=this.scaleZoom(W),this._unmodified=A,void(this._constraining=!1);if(this.latRange){var G=N.y,Y=I.y/2;G-Y<d&&(c=d+Y),G+Y>v&&(c=v-Y)}if(this.lngRange){var j=N.x,Q=I.x/2;j-Q<x&&(o=x+Q),j+Q>b&&(o=b-Q)}o===void 0&&c===void 0||(this.center=this.unproject(new u.Point(o!==void 0?o:N.x,c!==void 0?c:N.y))),this._unmodified=A,this._constraining=!1}},zt.prototype._calcMatrices=function(){if(this.height){var i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,o=this._fov*(.5+i.y/this.height),c=Math.sin(o)*this.cameraToCenterDistance/Math.sin(u.clamp(Math.PI-s-o,.01,Math.PI-.01)),d=this.point,v=d.x,x=d.y,b=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),I=this.height/50,A=new Float64Array(16);u.perspective(A,this._fov,this.width/this.height,I,b),A[8]=2*-i.x/this.width,A[9]=2*i.y/this.height,u.scale(A,A,[1,-1,1]),u.translate(A,A,[0,0,-this.cameraToCenterDistance]),u.rotateX(A,A,this._pitch),u.rotateZ(A,A,this.angle),u.translate(A,A,[-v,-x,0]),this.mercatorMatrix=u.scale([],A,[this.worldSize,this.worldSize,this.worldSize]),u.scale(A,A,[1,1,u.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=A,this.invProjMatrix=u.invert([],this.projMatrix);var F=this.width%2/2,B=this.height%2/2,N=Math.cos(this.angle),W=Math.sin(this.angle),G=v-Math.round(v)+N*F+W*B,Y=x-Math.round(x)+N*B+W*F,j=new Float64Array(A);if(u.translate(j,j,[G>.5?G-1:G,Y>.5?Y-1:Y,0]),this.alignedProjMatrix=j,A=u.create(),u.scale(A,A,[this.width/2,-this.height/2,1]),u.translate(A,A,[1,-1,0]),this.labelPlaneMatrix=A,A=u.create(),u.scale(A,A,[1,-1,1]),u.translate(A,A,[-1,-1,0]),u.scale(A,A,[2/this.width,2/this.height,1]),this.glCoordMatrix=A,this.pixelMatrix=u.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(A=u.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=A,this._posMatrixCache={},this._alignedPosMatrixCache={}}},zt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var i=this.pointCoordinate(new u.Point(0,0)),s=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},zt.prototype.getCameraPoint=function(){var i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.Point(0,i))},zt.prototype.getCameraQueryGeometry=function(i){var s=this.getCameraPoint();if(i.length===1)return[i[0],s];for(var o=s.x,c=s.y,d=s.x,v=s.y,x=0,b=i;x<b.length;x+=1){var I=b[x];o=Math.min(o,I.x),c=Math.min(c,I.y),d=Math.max(d,I.x),v=Math.max(v,I.y)}return[new u.Point(o,c),new u.Point(d,c),new u.Point(d,v),new u.Point(o,v),new u.Point(o,c)]},Object.defineProperties(zt.prototype,er);var Hn=function(i){var s,o,c,d;this._hashName=i&&encodeURIComponent(i),u.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),o=!1,c=null,d=function(){c=null,o&&(s(),c=setTimeout(d,300),o=!1)},function(){return o=!0,c||d(),c})};Hn.prototype.addTo=function(i){return this._map=i,u.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Hn.prototype.remove=function(){return u.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Hn.prototype.getHashString=function(i){var s=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,c=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),d=Math.pow(10,c),v=Math.round(s.lng*d)/d,x=Math.round(s.lat*d)/d,b=this._map.getBearing(),I=this._map.getPitch(),A="";if(A+=i?"/"+v+"/"+x+"/"+o:o+"/"+x+"/"+v,(b||I)&&(A+="/"+Math.round(10*b)/10),I&&(A+="/"+Math.round(I)),this._hashName){var F=this._hashName,B=!1,N=u.window.location.hash.slice(1).split("&").map(function(W){var G=W.split("=")[0];return G===F?(B=!0,G+"="+A):W}).filter(function(W){return W});return B||N.push(F+"="+A),"#"+N.join("&")}return"#"+A},Hn.prototype._getCurrentHash=function(){var i,s=this,o=u.window.location.hash.replace("#","");return this._hashName?(o.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(i=c)}),(i&&i[1]||"").split("/")):o.split("/")},Hn.prototype._onHashChange=function(){var i=this._getCurrentHash();if(i.length>=3&&!i.some(function(o){return isNaN(o)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:s,pitch:+(i[4]||0)}),!0}return!1},Hn.prototype._updateHashUnthrottled=function(){var i=u.window.location.href.replace(/(#.+)?$/,this.getHashString());try{u.window.history.replaceState(u.window.history.state,null,i)}catch{}};var Is={linearity:.3,easing:u.bezier(0,0,.3,1)},ka=u.extend({deceleration:2500,maxSpeed:1400},Is),Ps=u.extend({deceleration:20,maxSpeed:1400},Is),yd=u.extend({deceleration:1e3,maxSpeed:360},Is),vd=u.extend({deceleration:1e3,maxSpeed:90},Is),Cs=function(i){this._map=i,this.clear()};function ks(i,s){(!i.duration||i.duration<s.duration)&&(i.duration=s.duration,i.easing=s.easing)}function Ki(i,s,o){var c=o.maxSpeed,d=o.linearity,v=o.deceleration,x=u.clamp(i*d/(s/1e3),-c,c),b=Math.abs(x)/(v*d);return{easing:o.easing,duration:1e3*b,amount:x*(b/2)}}Cs.prototype.clear=function(){this._inertiaBuffer=[]},Cs.prototype.record=function(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.browser.now(),settings:i})},Cs.prototype._drainInertiaBuffer=function(){for(var i=this._inertiaBuffer,s=u.browser.now();i.length>0&&s-i[0].time>160;)i.shift()},Cs.prototype._onMoveEnd=function(i){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new u.Point(0,0),pinchAround:void 0,around:void 0},o=0,c=this._inertiaBuffer;o<c.length;o+=1){var d=c[o].settings;s.zoom+=d.zoomDelta||0,s.bearing+=d.bearingDelta||0,s.pitch+=d.pitchDelta||0,d.panDelta&&s.pan._add(d.panDelta),d.around&&(s.around=d.around),d.pinchAround&&(s.pinchAround=d.pinchAround)}var v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(s.pan.mag()){var b=Ki(s.pan.mag(),v,u.extend({},ka,i||{}));x.offset=s.pan.mult(b.amount/s.pan.mag()),x.center=this._map.transform.center,ks(x,b)}if(s.zoom){var I=Ki(s.zoom,v,Ps);x.zoom=this._map.transform.zoom+I.amount,ks(x,I)}if(s.bearing){var A=Ki(s.bearing,v,yd);x.bearing=this._map.transform.bearing+u.clamp(A.amount,-179,179),ks(x,A)}if(s.pitch){var F=Ki(s.pitch,v,vd);x.pitch=this._map.transform.pitch+F.amount,ks(x,F)}if(x.zoom||x.bearing){var B=s.pinchAround===void 0?s.around:s.pinchAround;x.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),u.extend(x,{noMoveStart:!0})}};var Dr=function(i){function s(c,d,v,x){x===void 0&&(x={});var b=M.mousePos(d.getCanvasContainer(),v),I=d.unproject(b);i.call(this,c,u.extend({point:b,lngLat:I,originalEvent:v},x)),this._defaultPrevented=!1,this.target=d}i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(u.Event),As=function(i){function s(c,d,v){var x=c==="touchend"?v.changedTouches:v.touches,b=M.touchPos(d.getCanvasContainer(),x),I=b.map(function(B){return d.unproject(B)}),A=b.reduce(function(B,N,W,G){return B.add(N.div(G.length))},new u.Point(0,0)),F=d.unproject(A);i.call(this,c,{points:b,point:A,lngLats:I,lngLat:F,originalEvent:v}),this._defaultPrevented=!1}i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(u.Event),oh=function(i){function s(c,d,v){i.call(this,c,{originalEvent:v}),this._defaultPrevented=!1}i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(u.Event),kr=function(i,s){this._map=i,this._clickTolerance=s.clickTolerance};kr.prototype.reset=function(){delete this._mousedownPos},kr.prototype.wheel=function(i){return this._firePreventable(new oh(i.type,this._map,i))},kr.prototype.mousedown=function(i,s){return this._mousedownPos=s,this._firePreventable(new Dr(i.type,this._map,i))},kr.prototype.mouseup=function(i){this._map.fire(new Dr(i.type,this._map,i))},kr.prototype.click=function(i,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Dr(i.type,this._map,i))},kr.prototype.dblclick=function(i){return this._firePreventable(new Dr(i.type,this._map,i))},kr.prototype.mouseover=function(i){this._map.fire(new Dr(i.type,this._map,i))},kr.prototype.mouseout=function(i){this._map.fire(new Dr(i.type,this._map,i))},kr.prototype.touchstart=function(i){return this._firePreventable(new As(i.type,this._map,i))},kr.prototype.touchmove=function(i){this._map.fire(new As(i.type,this._map,i))},kr.prototype.touchend=function(i){this._map.fire(new As(i.type,this._map,i))},kr.prototype.touchcancel=function(i){this._map.fire(new As(i.type,this._map,i))},kr.prototype._firePreventable=function(i){if(this._map.fire(i),i.defaultPrevented)return{}},kr.prototype.isEnabled=function(){return!0},kr.prototype.isActive=function(){return!1},kr.prototype.enable=function(){},kr.prototype.disable=function(){};var Xe=function(i){this._map=i};Xe.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Xe.prototype.mousemove=function(i){this._map.fire(new Dr(i.type,this._map,i))},Xe.prototype.mousedown=function(){this._delayContextMenu=!0},Xe.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Dr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Xe.prototype.contextmenu=function(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new Dr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()},Xe.prototype.isEnabled=function(){return!0},Xe.prototype.isActive=function(){return!1},Xe.prototype.enable=function(){},Xe.prototype.disable=function(){};var On=function(i,s){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=s.clickTolerance||1};function Sl(i,s){for(var o={},c=0;c<i.length;c++)o[i[c].identifier]=s[c];return o}On.prototype.isEnabled=function(){return!!this._enabled},On.prototype.isActive=function(){return!!this._active},On.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},On.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},On.prototype.mousedown=function(i,s){this.isEnabled()&&i.shiftKey&&i.button===0&&(M.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},On.prototype.mousemoveWindow=function(i,s){if(this._active){var o=s;if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=o,this._box||(this._box=M.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));var d=Math.min(c.x,o.x),v=Math.max(c.x,o.x),x=Math.min(c.y,o.y),b=Math.max(c.y,o.y);M.setTransform(this._box,"translate("+d+"px,"+x+"px)"),this._box.style.width=v-d+"px",this._box.style.height=b-x+"px"}}},On.prototype.mouseupWindow=function(i,s){var o=this;if(this._active&&i.button===0){var c=this._startPos,d=s;if(this.reset(),M.suppressClick(),c.x!==d.x||c.y!==d.y)return this._map.fire(new u.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:function(v){return v.fitScreenCoordinates(c,d,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",i)}},On.prototype.keydown=function(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))},On.prototype.blur=function(){this.reset()},On.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos},On.prototype._fireEvent=function(i,s){return this._map.fire(new u.Event(i,{originalEvent:s}))};var Aa=function(i){this.reset(),this.numTouches=i.numTouches};Aa.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Aa.prototype.touchstart=function(i,s,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),o.length===this.numTouches&&(this.centroid=function(c){for(var d=new u.Point(0,0),v=0,x=c;v<x.length;v+=1)d._add(x[v]);return d.div(c.length)}(s),this.touches=Sl(o,s)))},Aa.prototype.touchmove=function(i,s,o){if(!this.aborted&&this.centroid){var c=Sl(o,s);for(var d in this.touches){var v=c[d];(!v||v.dist(this.touches[d])>30)&&(this.aborted=!0)}}},Aa.prototype.touchend=function(i,s,o){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),o.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var Ti=function(i){this.singleTap=new Aa(i),this.numTaps=i.numTaps,this.reset()};Ti.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ti.prototype.touchstart=function(i,s,o){this.singleTap.touchstart(i,s,o)},Ti.prototype.touchmove=function(i,s,o){this.singleTap.touchmove(i,s,o)},Ti.prototype.touchend=function(i,s,o){var c=this.singleTap.touchend(i,s,o);if(c){var d=i.timeStamp-this.lastTime<500,v=!this.lastTap||this.lastTap.dist(c)<30;if(d&&v||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var Fn=function(){this._zoomIn=new Ti({numTouches:1,numTaps:2}),this._zoomOut=new Ti({numTouches:2,numTaps:1}),this.reset()};Fn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Fn.prototype.touchstart=function(i,s,o){this._zoomIn.touchstart(i,s,o),this._zoomOut.touchstart(i,s,o)},Fn.prototype.touchmove=function(i,s,o){this._zoomIn.touchmove(i,s,o),this._zoomOut.touchmove(i,s,o)},Fn.prototype.touchend=function(i,s,o){var c=this,d=this._zoomIn.touchend(i,s,o),v=this._zoomOut.touchend(i,s,o);return d?(this._active=!0,i.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(x){return x.easeTo({duration:300,zoom:x.getZoom()+1,around:x.unproject(d)},{originalEvent:i})}}):v?(this._active=!0,i.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(x){return x.easeTo({duration:300,zoom:x.getZoom()-1,around:x.unproject(v)},{originalEvent:i})}}):void 0},Fn.prototype.touchcancel=function(){this.reset()},Fn.prototype.enable=function(){this._enabled=!0},Fn.prototype.disable=function(){this._enabled=!1,this.reset()},Fn.prototype.isEnabled=function(){return this._enabled},Fn.prototype.isActive=function(){return this._active};var Qu={0:1,2:2},De=function(i){this.reset(),this._clickTolerance=i.clickTolerance||1};De.prototype.blur=function(){this.reset()},De.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},De.prototype._correctButton=function(i,s){return!1},De.prototype._move=function(i,s){return{}},De.prototype.mousedown=function(i,s){if(!this._lastPoint){var o=M.mouseButton(i);this._correctButton(i,o)&&(this._lastPoint=s,this._eventButton=o)}},De.prototype.mousemoveWindow=function(i,s){var o=this._lastPoint;if(o){if(i.preventDefault(),function(c,d){var v=Qu[d];return c.buttons===void 0||(c.buttons&v)!==v}(i,this._eventButton))this.reset();else if(this._moved||!(s.dist(o)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(o,s)}},De.prototype.mouseupWindow=function(i){this._lastPoint&&M.mouseButton(i)===this._eventButton&&(this._moved&&M.suppressClick(),this.reset())},De.prototype.enable=function(){this._enabled=!0},De.prototype.disable=function(){this._enabled=!1,this.reset()},De.prototype.isEnabled=function(){return this._enabled},De.prototype.isActive=function(){return this._active};var Yu=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.mousedown=function(o,c){i.prototype.mousedown.call(this,o,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(o,c){return c===0&&!o.ctrlKey},s.prototype._move=function(o,c){return{around:c,panDelta:c.sub(o)}},s}(De),El=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var d=.8*(c.x-o.x);if(d)return this._active=!0,{bearingDelta:d}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(De),Ju=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var d=-.5*(c.y-o.y);if(d)return this._active=!0,{pitchDelta:d}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(De),li=function(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()};li.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new u.Point(0,0)},li.prototype.touchstart=function(i,s,o){return this._calculateTransform(i,s,o)},li.prototype.touchmove=function(i,s,o){if(this._active&&!(o.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,s,o)},li.prototype.touchend=function(i,s,o){this._calculateTransform(i,s,o),this._active&&o.length<this._minTouches&&this.reset()},li.prototype.touchcancel=function(){this.reset()},li.prototype._calculateTransform=function(i,s,o){o.length>0&&(this._active=!0);var c=Sl(o,s),d=new u.Point(0,0),v=new u.Point(0,0),x=0;for(var b in c){var I=c[b],A=this._touches[b];A&&(d._add(I),v._add(I.sub(A)),x++,c[b]=I)}if(this._touches=c,!(x<this._minTouches)&&v.mag()){var F=v.div(x);if(this._sum._add(F),!(this._sum.mag()<this._clickTolerance))return{around:d.div(x),panDelta:F}}},li.prototype.enable=function(){this._enabled=!0},li.prototype.disable=function(){this._enabled=!1,this.reset()},li.prototype.isEnabled=function(){return this._enabled},li.prototype.isActive=function(){return this._active};var Bn=function(){this.reset()};function Tl(i,s,o){for(var c=0;c<i.length;c++)if(i[c].identifier===o)return s[c]}function Il(i,s){return Math.log(i/s)/Math.LN2}Bn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Bn.prototype._start=function(i){},Bn.prototype._move=function(i,s,o){return{}},Bn.prototype.touchstart=function(i,s,o){this._firstTwoTouches||o.length<2||(this._firstTwoTouches=[o[0].identifier,o[1].identifier],this._start([s[0],s[1]]))},Bn.prototype.touchmove=function(i,s,o){if(this._firstTwoTouches){i.preventDefault();var c=this._firstTwoTouches,d=c[1],v=Tl(o,s,c[0]),x=Tl(o,s,d);if(v&&x){var b=this._aroundCenter?null:v.add(x).div(2);return this._move([v,x],b,i)}}},Bn.prototype.touchend=function(i,s,o){if(this._firstTwoTouches){var c=this._firstTwoTouches,d=c[1],v=Tl(o,s,c[0]),x=Tl(o,s,d);v&&x||(this._active&&M.suppressClick(),this.reset())}},Bn.prototype.touchcancel=function(){this.reset()},Bn.prototype.enable=function(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"},Bn.prototype.disable=function(){this._enabled=!1,this.reset()},Bn.prototype.isEnabled=function(){return this._enabled},Bn.prototype.isActive=function(){return this._active};var Un=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.reset=function(){i.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(o){this._startDistance=this._distance=o[0].dist(o[1])},s.prototype._move=function(o,c){var d=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Il(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Il(this._distance,d),pinchAround:c}},s}(Bn);function $i(i,s){return 180*i.angleWith(s)/Math.PI}var ah=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.reset=function(){i.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])},s.prototype._move=function(o,c){var d=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$i(this._vector,d),pinchAround:c}},s.prototype._isBelowThreshold=function(o){this._minDiameter=Math.min(this._minDiameter,o.mag());var c=25/(Math.PI*this._minDiameter)*360,d=$i(o,this._startVector);return Math.abs(d)<c},s}(Bn);function zs(i){return Math.abs(i.y)>Math.abs(i.x)}var ec=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.reset=function(){i.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(o){this._lastPoints=o,zs(o[0].sub(o[1]))&&(this._valid=!1)},s.prototype._move=function(o,c,d){var v=o[0].sub(this._lastPoints[0]),x=o[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(v,x,d.timeStamp),this._valid)return this._lastPoints=o,this._active=!0,{pitchDelta:(v.y+x.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(o,c,d){if(this._valid!==void 0)return this._valid;var v=o.mag()>=2,x=c.mag()>=2;if(v||x){if(!v||!x)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;var b=o.y>0==c.y>0;return zs(o)&&zs(c)&&b}},s}(Bn),tc={panStep:100,bearingStep:15,pitchStep:10},Ii=function(){var i=tc;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1};function Kn(i){return i*(2-i)}Ii.prototype.blur=function(){this.reset()},Ii.prototype.reset=function(){this._active=!1},Ii.prototype.keydown=function(i){var s=this;if(!(i.altKey||i.ctrlKey||i.metaKey)){var o=0,c=0,d=0,v=0,x=0;switch(i.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:i.shiftKey?c=-1:(i.preventDefault(),v=-1);break;case 39:i.shiftKey?c=1:(i.preventDefault(),v=1);break;case 38:i.shiftKey?d=1:(i.preventDefault(),x=-1);break;case 40:i.shiftKey?d=-1:(i.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(c=0,d=0),{cameraAnimation:function(b){var I=b.getZoom();b.easeTo({duration:300,easeId:"keyboardHandler",easing:Kn,zoom:o?Math.round(I)+o*(i.shiftKey?2:1):I,bearing:b.getBearing()+c*s._bearingStep,pitch:b.getPitch()+d*s._pitchStep,offset:[-v*s._panStep,-x*s._panStep],center:b.getCenter()},{originalEvent:i})}}}},Ii.prototype.enable=function(){this._enabled=!0},Ii.prototype.disable=function(){this._enabled=!1,this.reset()},Ii.prototype.isEnabled=function(){return this._enabled},Ii.prototype.isActive=function(){return this._active},Ii.prototype.disableRotation=function(){this._rotationDisabled=!0},Ii.prototype.enableRotation=function(){this._rotationDisabled=!1};var Tt=function(i,s){this._map=i,this._el=i.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,u.bindAll(["_onTimeout"],this)};Tt.prototype.setZoomRate=function(i){this._defaultZoomRate=i},Tt.prototype.setWheelZoomRate=function(i){this._wheelZoomRate=i},Tt.prototype.isEnabled=function(){return!!this._enabled},Tt.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Tt.prototype.isZooming=function(){return!!this._zooming},Tt.prototype.enable=function(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")},Tt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Tt.prototype.wheel=function(i){if(this.isEnabled()){var s=i.deltaMode===u.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY,o=u.browser.now(),c=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),i.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=i,this._delta-=s,this._active||this._start(i)),i.preventDefault()}},Tt.prototype._onTimeout=function(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)},Tt.prototype._start=function(i){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=M.mousePos(this._el,i);this._around=u.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Tt.prototype.renderFrame=function(){var i=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var o=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&c!==0&&(c=1/c);var d=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(d*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var v,x=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,b=this._startZoom,I=this._easing,A=!1;if(this._type==="wheel"&&b&&I){var F=Math.min((u.browser.now()-this._lastWheelEventTime)/200,1),B=I(F);v=u.number(b,x,B),F<1?this._frameId||(this._frameId=!0):A=!0}else v=x,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(function(){i._zooming=!1,i._handler._triggerRenderFrame(),delete i._targetZoom,delete i._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:v-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Tt.prototype._smoothOutEasing=function(i){var s=u.ease;if(this._prevEase){var o=this._prevEase,c=(u.browser.now()-o.start)/o.duration,d=o.easing(c+.01)-o.easing(c),v=.27/Math.sqrt(d*d+1e-4)*.01,x=Math.sqrt(.0729-v*v);s=u.bezier(v,x,.25,1)}return this._prevEase={start:u.browser.now(),duration:i,easing:s},s},Tt.prototype.blur=function(){this.reset()},Tt.prototype.reset=function(){this._active=!1};var Li=function(i,s){this._clickZoom=i,this._tapZoom=s};Li.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Li.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Li.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Li.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ui=function(){this.reset()};ui.prototype.reset=function(){this._active=!1},ui.prototype.blur=function(){this.reset()},ui.prototype.dblclick=function(i,s){return i.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(i.shiftKey?-1:1),around:o.unproject(s)},{originalEvent:i})}}},ui.prototype.enable=function(){this._enabled=!0},ui.prototype.disable=function(){this._enabled=!1,this.reset()},ui.prototype.isEnabled=function(){return this._enabled},ui.prototype.isActive=function(){return this._active};var rn=function(){this._tap=new Ti({numTouches:1,numTaps:1}),this.reset()};rn.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},rn.prototype.touchstart=function(i,s,o){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?o.length>0&&(this._swipePoint=s[0],this._swipeTouch=o[0].identifier):this._tap.touchstart(i,s,o))},rn.prototype.touchmove=function(i,s,o){if(this._tapTime){if(this._swipePoint){if(o[0].identifier!==this._swipeTouch)return;var c=s[0],d=c.y-this._swipePoint.y;return this._swipePoint=c,i.preventDefault(),this._active=!0,{zoomDelta:d/128}}}else this._tap.touchmove(i,s,o)},rn.prototype.touchend=function(i,s,o){this._tapTime?this._swipePoint&&o.length===0&&this.reset():this._tap.touchend(i,s,o)&&(this._tapTime=i.timeStamp)},rn.prototype.touchcancel=function(){this.reset()},rn.prototype.enable=function(){this._enabled=!0},rn.prototype.disable=function(){this._enabled=!1,this.reset()},rn.prototype.isEnabled=function(){return this._enabled},rn.prototype.isActive=function(){return this._active};var ea=function(i,s,o){this._el=i,this._mousePan=s,this._touchPan=o};ea.prototype.enable=function(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ea.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ea.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ea.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var vo=function(i,s,o){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=s,this._mousePitch=o};vo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},vo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},vo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},vo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Pi=function(i,s,o,c){this._el=i,this._touchZoom=s,this._touchRotate=o,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};Pi.prototype.enable=function(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Pi.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Pi.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Pi.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Pi.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Pi.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var dn=function(i){return i.zoom||i.drag||i.pitch||i.rotate},Ms=function(i){function s(){i.apply(this,arguments)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s}(u.Event);function Je(i){return i.panDelta&&i.panDelta.mag()||i.zoomDelta||i.bearingDelta||i.pitchDelta}var Ke=function(i,s){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Cs(i),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),u.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[u.window.document,"mousemove",{capture:!0}],[u.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[u.window,"blur",void 0]];for(var c=0,d=this._listeners;c<d.length;c+=1){var v=d[c],x=v[0];M.addEventListener(x,v[1],x===u.window.document?this.handleWindowEvent:this.handleEvent,v[2])}};Ke.prototype.destroy=function(){for(var i=0,s=this._listeners;i<s.length;i+=1){var o=s[i],c=o[0];M.removeEventListener(c,o[1],c===u.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},Ke.prototype._addDefaultHandlers=function(i){var s=this._map,o=s.getCanvasContainer();this._add("mapEvent",new kr(s,i));var c=s.boxZoom=new On(s,i);this._add("boxZoom",c);var d=new Fn,v=new ui;s.doubleClickZoom=new Li(v,d),this._add("tapZoom",d),this._add("clickZoom",v);var x=new rn;this._add("tapDragZoom",x);var b=s.touchPitch=new ec;this._add("touchPitch",b);var I=new El(i),A=new Ju(i);s.dragRotate=new vo(i,I,A),this._add("mouseRotate",I,["mousePitch"]),this._add("mousePitch",A,["mouseRotate"]);var F=new Yu(i),B=new li(i);s.dragPan=new ea(o,F,B),this._add("mousePan",F),this._add("touchPan",B,["touchZoom","touchRotate"]);var N=new ah,W=new Un;s.touchZoomRotate=new Pi(o,W,N,x),this._add("touchRotate",N,["touchPan","touchZoom"]),this._add("touchZoom",W,["touchPan","touchRotate"]);var G=s.scrollZoom=new Tt(s,this);this._add("scrollZoom",G,["mousePan"]);var Y=s.keyboard=new Ii;this._add("keyboard",Y),this._add("blockableMapEvent",new Xe(s));for(var j=0,Q=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];j<Q.length;j+=1){var re=Q[j];i.interactive&&i[re]&&s[re].enable(i[re])}},Ke.prototype._add=function(i,s,o){this._handlers.push({handlerName:i,handler:s,allowed:o}),this._handlersById[i]=s},Ke.prototype.stop=function(i){if(!this._updatingCamera){for(var s=0,o=this._handlers;s<o.length;s+=1)o[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}},Ke.prototype.isActive=function(){for(var i=0,s=this._handlers;i<s.length;i+=1)if(s[i].handler.isActive())return!0;return!1},Ke.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Ke.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Ke.prototype.isMoving=function(){return Boolean(dn(this._eventsInProgress))||this.isZooming()},Ke.prototype._blockedByActive=function(i,s,o){for(var c in i)if(c!==o&&(!s||s.indexOf(c)<0))return!0;return!1},Ke.prototype.handleWindowEvent=function(i){this.handleEvent(i,i.type+"Window")},Ke.prototype._getMapTouches=function(i){for(var s=[],o=0,c=i;o<c.length;o+=1){var d=c[o];this._el.contains(d.target)&&s.push(d)}return s},Ke.prototype.handleEvent=function(i,s){this._updatingCamera=!0;for(var o=i.type==="renderFrame"?void 0:i,c={needsRenderFrame:!1},d={},v={},x=i.touches?this._getMapTouches(i.touches):void 0,b=x?M.touchPos(this._el,x):M.mousePos(this._el,i),I=0,A=this._handlers;I<A.length;I+=1){var F=A[I],B=F.handlerName,N=F.handler,W=F.allowed;if(N.isEnabled()){var G=void 0;this._blockedByActive(v,W,B)?N.reset():N[s||i.type]&&(G=N[s||i.type](i,b,x),this.mergeHandlerResult(c,d,G,B,o),G&&G.needsRenderFrame&&this._triggerRenderFrame()),(G||N.isActive())&&(v[B]=N)}}var Y={};for(var j in this._previousActiveHandlers)v[j]||(Y[j]=o);this._previousActiveHandlers=v,(Object.keys(Y).length||Je(c))&&(this._changes.push([c,d,Y]),this._triggerRenderFrame()),(Object.keys(v).length||Je(c))&&this._map._stop(!0),this._updatingCamera=!1;var Q=c.cameraAnimation;Q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Q(this._map))},Ke.prototype.mergeHandlerResult=function(i,s,o,c,d){if(o){u.extend(i,o);var v={handlerName:c,originalEvent:o.originalEvent||d};o.zoomDelta!==void 0&&(s.zoom=v),o.panDelta!==void 0&&(s.drag=v),o.pitchDelta!==void 0&&(s.pitch=v),o.bearingDelta!==void 0&&(s.rotate=v)}},Ke.prototype._applyChanges=function(){for(var i={},s={},o={},c=0,d=this._changes;c<d.length;c+=1){var v=d[c],x=v[0],b=v[1],I=v[2];x.panDelta&&(i.panDelta=(i.panDelta||new u.Point(0,0))._add(x.panDelta)),x.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(i.around=x.around),x.pinchAround!==void 0&&(i.pinchAround=x.pinchAround),x.noInertia&&(i.noInertia=x.noInertia),u.extend(s,b),u.extend(o,I)}this._updateMapTransform(i,s,o),this._changes=[]},Ke.prototype._updateMapTransform=function(i,s,o){var c=this._map,d=c.transform;if(!Je(i))return this._fireEvents(s,o,!0);var v=i.panDelta,x=i.zoomDelta,b=i.bearingDelta,I=i.pitchDelta,A=i.around,F=i.pinchAround;F!==void 0&&(A=F),c._stop(!0),A=A||c.transform.centerPoint;var B=d.pointLocation(v?A.sub(v):A);b&&(d.bearing+=b),I&&(d.pitch+=I),x&&(d.zoom+=x),d.setLocationAtPoint(B,A),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(s,o,!0)},Ke.prototype._fireEvents=function(i,s,o){var c=this,d=dn(this._eventsInProgress),v=dn(i),x={};for(var b in i)this._eventsInProgress[b]||(x[b+"start"]=i[b].originalEvent),this._eventsInProgress[b]=i[b];for(var I in!d&&v&&this._fireEvent("movestart",v.originalEvent),x)this._fireEvent(I,x[I]);for(var A in v&&this._fireEvent("move",v.originalEvent),i)this._fireEvent(A,i[A].originalEvent);var F,B={};for(var N in this._eventsInProgress){var W=this._eventsInProgress[N],G=W.handlerName,Y=W.originalEvent;this._handlersById[G].isActive()||(delete this._eventsInProgress[N],B[N+"end"]=F=s[G]||Y)}for(var j in B)this._fireEvent(j,B[j]);var Q=dn(this._eventsInProgress);if(o&&(d||v)&&!Q){this._updatingCamera=!0;var re=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ue=function(me){return me!==0&&-c._bearingSnap<me&&me<c._bearingSnap};re?(ue(re.bearing||this._map.getBearing())&&(re.bearing=0),this._map.easeTo(re,{originalEvent:F})):(this._map.fire(new u.Event("moveend",{originalEvent:F})),ue(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Ke.prototype._fireEvent=function(i,s){this._map.fire(new u.Event(i,s?{originalEvent:s}:{}))},Ke.prototype._requestFrame=function(){var i=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete i._frameId,i.handleEvent(new Ms("renderFrame",{timeStamp:s})),i._applyChanges()})},Ke.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Pl=function(i){function s(o,c){i.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,u.bindAll(["_renderFrameCallback"],this)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.getCenter=function(){return new u.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(o,c){return this.jumpTo({center:o},c)},s.prototype.panBy=function(o,c,d){return o=u.Point.convert(o).mult(-1),this.panTo(this.transform.center,u.extend({offset:o},c),d)},s.prototype.panTo=function(o,c,d){return this.easeTo(u.extend({center:o},c),d)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(o,c){return this.jumpTo({zoom:o},c),this},s.prototype.zoomTo=function(o,c,d){return this.easeTo(u.extend({zoom:o},c),d)},s.prototype.zoomIn=function(o,c){return this.zoomTo(this.getZoom()+1,o,c),this},s.prototype.zoomOut=function(o,c){return this.zoomTo(this.getZoom()-1,o,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(o,c){return this.jumpTo({bearing:o},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(o,c){return this.jumpTo({padding:o},c),this},s.prototype.rotateTo=function(o,c,d){return this.easeTo(u.extend({bearing:o},c),d)},s.prototype.resetNorth=function(o,c){return this.rotateTo(0,u.extend({duration:1e3},o),c),this},s.prototype.resetNorthPitch=function(o,c){return this.easeTo(u.extend({bearing:0,pitch:0,duration:1e3},o),c),this},s.prototype.snapToNorth=function(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(o,c){return this.jumpTo({pitch:o},c),this},s.prototype.cameraForBounds=function(o,c){o=u.LngLatBounds.convert(o);var d=c&&c.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),d,c)},s.prototype._cameraForBoxAndBearing=function(o,c,d,v){var x={top:0,bottom:0,right:0,left:0};if(typeof(v=u.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){var b=v.padding;v.padding={top:b,bottom:b,right:b,left:b}}v.padding=u.extend(x,v.padding);var I=this.transform,A=I.padding,F=I.project(u.LngLat.convert(o)),B=I.project(u.LngLat.convert(c)),N=F.rotate(-d*Math.PI/180),W=B.rotate(-d*Math.PI/180),G=new u.Point(Math.max(N.x,W.x),Math.max(N.y,W.y)),Y=new u.Point(Math.min(N.x,W.x),Math.min(N.y,W.y)),j=G.sub(Y),Q=(I.width-(A.left+A.right+v.padding.left+v.padding.right))/j.x,re=(I.height-(A.top+A.bottom+v.padding.top+v.padding.bottom))/j.y;if(!(re<0||Q<0)){var ue=Math.min(I.scaleZoom(I.scale*Math.min(Q,re)),v.maxZoom),me=typeof v.offset.x=="number"?new u.Point(v.offset.x,v.offset.y):u.Point.convert(v.offset),fe=new u.Point((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(d*Math.PI/180),ye=me.add(fe).mult(I.scale/I.zoomScale(ue));return{center:I.unproject(F.add(B).div(2).sub(ye)),zoom:ue,bearing:d}}u.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(o,c,d){return this._fitInternal(this.cameraForBounds(o,c),c,d)},s.prototype.fitScreenCoordinates=function(o,c,d,v,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.Point.convert(o)),this.transform.pointLocation(u.Point.convert(c)),d,v),v,x)},s.prototype._fitInternal=function(o,c,d){return o?(delete(c=u.extend(o,c)).padding,c.linear?this.easeTo(c,d):this.flyTo(c,d)):this},s.prototype.jumpTo=function(o,c){this.stop();var d=this.transform,v=!1,x=!1,b=!1;return"zoom"in o&&d.zoom!==+o.zoom&&(v=!0,d.zoom=+o.zoom),o.center!==void 0&&(d.center=u.LngLat.convert(o.center)),"bearing"in o&&d.bearing!==+o.bearing&&(x=!0,d.bearing=+o.bearing),"pitch"in o&&d.pitch!==+o.pitch&&(b=!0,d.pitch=+o.pitch),o.padding==null||d.isPaddingEqual(o.padding)||(d.padding=o.padding),this.fire(new u.Event("movestart",c)).fire(new u.Event("move",c)),v&&this.fire(new u.Event("zoomstart",c)).fire(new u.Event("zoom",c)).fire(new u.Event("zoomend",c)),x&&this.fire(new u.Event("rotatestart",c)).fire(new u.Event("rotate",c)).fire(new u.Event("rotateend",c)),b&&this.fire(new u.Event("pitchstart",c)).fire(new u.Event("pitch",c)).fire(new u.Event("pitchend",c)),this.fire(new u.Event("moveend",c))},s.prototype.easeTo=function(o,c){var d=this;this._stop(!1,o.easeId),((o=u.extend({offset:[0,0],duration:500,easing:u.ease},o)).animate===!1||!o.essential&&u.browser.prefersReducedMotion)&&(o.duration=0);var v=this.transform,x=this.getZoom(),b=this.getBearing(),I=this.getPitch(),A=this.getPadding(),F="zoom"in o?+o.zoom:x,B="bearing"in o?this._normalizeBearing(o.bearing,b):b,N="pitch"in o?+o.pitch:I,W="padding"in o?o.padding:v.padding,G=u.Point.convert(o.offset),Y=v.centerPoint.add(G),j=v.pointLocation(Y),Q=u.LngLat.convert(o.center||j);this._normalizeCenter(Q);var re,ue,me=v.project(j),fe=v.project(Q).sub(me),ye=v.zoomScale(F-x);o.around&&(re=u.LngLat.convert(o.around),ue=v.locationPoint(re));var be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||F!==x,this._rotating=this._rotating||b!==B,this._pitching=this._pitching||N!==I,this._padding=!v.isPaddingEqual(W),this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,be),this._ease(function(Ae){if(d._zooming&&(v.zoom=u.number(x,F,Ae)),d._rotating&&(v.bearing=u.number(b,B,Ae)),d._pitching&&(v.pitch=u.number(I,N,Ae)),d._padding&&(v.interpolatePadding(A,W,Ae),Y=v.centerPoint.add(G)),re)v.setLocationAtPoint(re,ue);else{var ke=v.zoomScale(v.zoom-x),je=F>x?Math.min(2,ye):Math.max(.5,ye),et=Math.pow(je,1-Ae),it=v.unproject(me.add(fe.mult(Ae*et)).mult(ke));v.setLocationAtPoint(v.renderWorldCopies?it.wrap():it,Y)}d._fireMoveEvents(c)},function(Ae){d._afterEase(c,Ae)},o),this},s.prototype._prepareEase=function(o,c,d){d===void 0&&(d={}),this._moving=!0,c||d.moving||this.fire(new u.Event("movestart",o)),this._zooming&&!d.zooming&&this.fire(new u.Event("zoomstart",o)),this._rotating&&!d.rotating&&this.fire(new u.Event("rotatestart",o)),this._pitching&&!d.pitching&&this.fire(new u.Event("pitchstart",o))},s.prototype._fireMoveEvents=function(o){this.fire(new u.Event("move",o)),this._zooming&&this.fire(new u.Event("zoom",o)),this._rotating&&this.fire(new u.Event("rotate",o)),this._pitching&&this.fire(new u.Event("pitch",o))},s.prototype._afterEase=function(o,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var d=this._zooming,v=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new u.Event("zoomend",o)),v&&this.fire(new u.Event("rotateend",o)),x&&this.fire(new u.Event("pitchend",o)),this.fire(new u.Event("moveend",o))}},s.prototype.flyTo=function(o,c){var d=this;if(!o.essential&&u.browser.prefersReducedMotion){var v=u.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(v,c)}this.stop(),o=u.extend({offset:[0,0],speed:1.2,curve:1.42,easing:u.ease},o);var x=this.transform,b=this.getZoom(),I=this.getBearing(),A=this.getPitch(),F=this.getPadding(),B="zoom"in o?u.clamp(+o.zoom,x.minZoom,x.maxZoom):b,N="bearing"in o?this._normalizeBearing(o.bearing,I):I,W="pitch"in o?+o.pitch:A,G="padding"in o?o.padding:x.padding,Y=x.zoomScale(B-b),j=u.Point.convert(o.offset),Q=x.centerPoint.add(j),re=x.pointLocation(Q),ue=u.LngLat.convert(o.center||re);this._normalizeCenter(ue);var me=x.project(re),fe=x.project(ue).sub(me),ye=o.curve,be=Math.max(x.width,x.height),Ae=be/Y,ke=fe.mag();if("minZoom"in o){var je=u.clamp(Math.min(o.minZoom,b,B),x.minZoom,x.maxZoom),et=be/x.zoomScale(je-b);ye=Math.sqrt(et/ke*2)}var it=ye*ye;function nt(ct){var st=(Ae*Ae-be*be+(ct?-1:1)*it*it*ke*ke)/(2*(ct?Ae:be)*it*ke);return Math.log(Math.sqrt(st*st+1)-st)}function Lt(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function Ge(ct){return(Math.exp(ct)+Math.exp(-ct))/2}var dt=nt(0),_t=function(ct){return Ge(dt)/Ge(dt+ye*ct)},ft=function(ct){return be*((Ge(dt)*(Lt(st=dt+ye*ct)/Ge(st))-Lt(dt))/it)/ke;var st},ht=(nt(1)-dt)/ye;if(Math.abs(ke)<1e-6||!isFinite(ht)){if(Math.abs(be-Ae)<1e-6)return this.easeTo(o,c);var vt=Ae<be?-1:1;ht=Math.abs(Math.log(Ae/be))/ye,ft=function(){return 0},_t=function(ct){return Math.exp(vt*ye*ct)}}return o.duration="duration"in o?+o.duration:1e3*ht/("screenSpeed"in o?+o.screenSpeed/ye:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=I!==N,this._pitching=W!==A,this._padding=!x.isPaddingEqual(G),this._prepareEase(c,!1),this._ease(function(ct){var st=ct*ht,Fr=1/_t(st);x.zoom=ct===1?B:b+x.scaleZoom(Fr),d._rotating&&(x.bearing=u.number(I,N,ct)),d._pitching&&(x.pitch=u.number(A,W,ct)),d._padding&&(x.interpolatePadding(F,G,ct),Q=x.centerPoint.add(j));var mr=ct===1?ue:x.unproject(me.add(fe.mult(ft(st))).mult(Fr));x.setLocationAtPoint(x.renderWorldCopies?mr.wrap():mr,Q),d._fireMoveEvents(c)},function(){return d._afterEase(c)},o),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,c)}if(!o){var v=this.handlers;v&&v.stop(!1)}return this},s.prototype._ease=function(o,c,d){d.animate===!1||d.duration===0?(o(1),c()):(this._easeStart=u.browser.now(),this._easeOptions=d,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var o=Math.min((u.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(o,c){o=u.wrap(o,-180,180);var d=Math.abs(o-c);return Math.abs(o-360-c)<d&&(o-=360),Math.abs(o+360-c)<d&&(o+=360),o},s.prototype._normalizeCenter=function(o){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var d=o.lng-c.center.lng;o.lng+=d>180?-360:d<-180?360:0}},s}(u.Evented),mn=function(i){i===void 0&&(i={}),this.options=i,u.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};mn.prototype.getDefaultPosition=function(){return"bottom-right"},mn.prototype.onAdd=function(i){var s=this.options&&this.options.compact;return this._map=i,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=M.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},mn.prototype.onRemove=function(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},mn.prototype._setElementTitle=function(i,s){var o=this._map._getUIString("AttributionControl."+s);i.title=o,i.setAttribute("aria-label",o)},mn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},mn.prototype._updateEditLink=function(){var i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||u.config.ACCESS_TOKEN}];if(i){var o=s.reduce(function(c,d,v){return d.value&&(c+=d.key+"="+d.value+(v<s.length-1?"&":"")),c},"?");i.href=u.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}},mn.prototype._updateData=function(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},mn.prototype._updateAttributions=function(){if(this._map.style){var i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(function(b){return typeof b!="string"?"":b})):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var o=this._map.style.sourceCaches;for(var c in o){var d=o[c];if(d.used){var v=d.getSource();v.attribution&&i.indexOf(v.attribution)<0&&i.push(v.attribution)}}i.sort(function(b,I){return b.length-I.length});var x=(i=i.filter(function(b,I){for(var A=I+1;A<i.length;A++)if(i[A].indexOf(b)>=0)return!1;return!0})).join(" | ");x!==this._attribHTML&&(this._attribHTML=x,i.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},mn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Ci=function(){u.bindAll(["_updateLogo"],this),u.bindAll(["_updateCompact"],this)};Ci.prototype.onAdd=function(i){this._map=i,this._container=M.create("div","mapboxgl-ctrl");var s=M.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ci.prototype.onRemove=function(){M.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ci.prototype.getDefaultPosition=function(){return"bottom-left"},Ci.prototype._updateLogo=function(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Ci.prototype._logoRequired=function(){if(this._map.style){var i=this._map.style.sourceCaches;for(var s in i)if(i[s].getSource().mapbox_logo)return!0;return!1}},Ci.prototype._updateCompact=function(){var i=this._container.children;if(i.length){var s=i[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var nn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};nn.prototype.add=function(i){var s=++this._id;return this._queue.push({callback:i,id:s,cancelled:!1}),s},nn.prototype.remove=function(i){for(var s=this._currentlyRunning,o=0,c=s?this._queue.concat(s):this._queue;o<c.length;o+=1){var d=c[o];if(d.id===i)return void(d.cancelled=!0)}},nn.prototype.run=function(i){i===void 0&&(i=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,c=s;o<c.length;o+=1){var d=c[o];if(!d.cancelled&&(d.callback(i),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},nn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ri={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},rc=u.window.HTMLImageElement,Cl=u.window.HTMLElement,qt=u.window.ImageBitmap,Xr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},sh=function(i){function s(c){var d=this;if((c=u.extend({},Xr,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var v=new zt(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(i.call(this,v,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new nn,this._controls=[],this._mapId=u.uniqueId(),this._locale=u.extend({},Ri,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new u.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=u.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof Cl))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),u.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return d._update(!1)}),this.on("moveend",function(){return d._update(!1)}),this.on("zoom",function(){return d._update(!0)}),u.window!==void 0&&(u.window.addEventListener("online",this._onWindowOnline,!1),u.window.addEventListener("resize",this._onWindowResize,!1),u.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Ke(this,c),this._hash=c.hash&&new Hn(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,u.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new mn({customAttribution:c.customAttribution})),this.addControl(new Ci,c.logoPosition),this.on("style.load",function(){d.transform.unmodified&&d.jumpTo(d.style.stylesheet)}),this.on("data",function(x){d._update(x.dataType==="style"),d.fire(new u.Event(x.dataType+"data",x))}),this.on("dataloading",function(x){d.fire(new u.Event(x.dataType+"dataloading",x))})}i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,d){if(d===void 0&&(d=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var v=c.onAdd(this);this._controls.push(c);var x=this._controlPositions[d];return d.indexOf("bottom")!==-1?x.insertBefore(v,x.firstChild):x.appendChild(v),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var d=this._controls.indexOf(c);return d>-1&&this._controls.splice(d,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var d=this._containerDimensions(),v=d[0],x=d[1];if(v===this.transform.width&&x===this.transform.height)return this;this._resizeCanvas(v,x),this.transform.resize(v,x),this.painter.resize(v,x);var b=!this._moving;return b&&this.fire(new u.Event("movestart",c)).fire(new u.Event("move",c)),this.fire(new u.Event("resize",c)),b&&this.fire(new u.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(u.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c==null?-2:c)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c==null?22:c)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c==null?0:c)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c==null?60:c)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(u.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(u.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,d,v){var x,b=this;if(c==="mouseenter"||c==="mouseover"){var I=!1;return{layer:d,listener:v,delegates:{mousemove:function(F){var B=b.getLayer(d)?b.queryRenderedFeatures(F.point,{layers:[d]}):[];B.length?I||(I=!0,v.call(b,new Dr(c,b,F.originalEvent,{features:B}))):I=!1},mouseout:function(){I=!1}}}}if(c==="mouseleave"||c==="mouseout"){var A=!1;return{layer:d,listener:v,delegates:{mousemove:function(F){(b.getLayer(d)?b.queryRenderedFeatures(F.point,{layers:[d]}):[]).length?A=!0:A&&(A=!1,v.call(b,new Dr(c,b,F.originalEvent)))},mouseout:function(F){A&&(A=!1,v.call(b,new Dr(c,b,F.originalEvent)))}}}}return{layer:d,listener:v,delegates:(x={},x[c]=function(F){var B=b.getLayer(d)?b.queryRenderedFeatures(F.point,{layers:[d]}):[];B.length&&(F.features=B,v.call(b,F),delete F.features)},x)}},s.prototype.on=function(c,d,v){if(v===void 0)return i.prototype.on.call(this,c,d);var x=this._createDelegatedListener(c,d,v);for(var b in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(x),x.delegates)this.on(b,x.delegates[b]);return this},s.prototype.once=function(c,d,v){if(v===void 0)return i.prototype.once.call(this,c,d);var x=this._createDelegatedListener(c,d,v);for(var b in x.delegates)this.once(b,x.delegates[b]);return this},s.prototype.off=function(c,d,v){var x=this;return v===void 0?i.prototype.off.call(this,c,d):(this._delegatedListeners&&this._delegatedListeners[c]&&function(b){for(var I=b[c],A=0;A<I.length;A++){var F=I[A];if(F.layer===d&&F.listener===v){for(var B in F.delegates)x.off(B,F.delegates[B]);return I.splice(A,1),x}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,d){if(!this.style)return[];var v;if(d!==void 0||c===void 0||c instanceof u.Point||Array.isArray(c)||(d=c,c=void 0),d=d||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof u.Point||typeof c[0]=="number")v=[u.Point.convert(c)];else{var x=u.Point.convert(c[0]),b=u.Point.convert(c[1]);v=[x,new u.Point(b.x,x.y),b,new u.Point(x.x,b.y),x]}return this.style.queryRenderedFeatures(v,d,this.transform)},s.prototype.querySourceFeatures=function(c,d){return this.style.querySourceFeatures(c,d)},s.prototype.setStyle=function(c,d){return(d=u.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._updateStyle(c,d))},s.prototype._getUIString=function(c){var d=this._locale[c];if(d==null)throw new Error("Missing UI string '"+c+"'");return d},s.prototype._updateStyle=function(c,d){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new Rn(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Rn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,d){var v=this;if(typeof c=="string"){var x=this._requestManager.normalizeStyleURL(c),b=this._requestManager.transformRequest(x,u.ResourceType.Style);u.getJSON(b,function(I,A){I?v.fire(new u.ErrorEvent(I)):A&&v._updateDiff(A,d)})}else typeof c=="object"&&this._updateDiff(c,d)},s.prototype._updateDiff=function(c,d){try{this.style.setState(c)&&this._update(!0)}catch(v){u.warnOnce("Unable to perform style diff: "+(v.message||v.error||v)+".  Rebuilding the style from scratch."),this._updateStyle(c,d)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():u.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,d){return this._lazyInitEmptyStyle(),this.style.addSource(c,d),this._update(!0)},s.prototype.isSourceLoaded=function(c){var d=this.style&&this.style.sourceCaches[c];if(d!==void 0)return d.loaded();this.fire(new u.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var d in c){var v=c[d]._tiles;for(var x in v){var b=v[x];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,d,v){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,d,v)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,d,v){v===void 0&&(v={});var x=v.pixelRatio;x===void 0&&(x=1);var b=v.sdf;b===void 0&&(b=!1);var I=v.stretchX,A=v.stretchY,F=v.content;if(this._lazyInitEmptyStyle(),d instanceof rc||qt&&d instanceof qt){var B=u.browser.getImageData(d);this.style.addImage(c,{data:new u.RGBAImage({width:B.width,height:B.height},B.data),pixelRatio:x,stretchX:I,stretchY:A,content:F,sdf:b,version:0})}else{if(d.width===void 0||d.height===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var N=d;this.style.addImage(c,{data:new u.RGBAImage({width:d.width,height:d.height},new Uint8Array(d.data)),pixelRatio:x,stretchX:I,stretchY:A,content:F,sdf:b,version:0,userImage:N}),N.onAdd&&N.onAdd(this,c)}},s.prototype.updateImage=function(c,d){var v=this.style.getImage(c);if(!v)return this.fire(new u.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var x=d instanceof rc||qt&&d instanceof qt?u.browser.getImageData(d):d,b=x.width,I=x.height,A=x.data;return b===void 0||I===void 0?this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):b!==v.data.width||I!==v.data.height?this.fire(new u.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(v.data.replace(A,!(d instanceof rc||qt&&d instanceof qt)),void this.style.updateImage(c,v))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new u.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,d){u.getImage(this._requestManager.transformRequest(c,u.ResourceType.Image),d)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,d){return this._lazyInitEmptyStyle(),this.style.addLayer(c,d),this._update(!0)},s.prototype.moveLayer=function(c,d){return this.style.moveLayer(c,d),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,d,v){return this.style.setLayerZoomRange(c,d,v),this._update(!0)},s.prototype.setFilter=function(c,d,v){return v===void 0&&(v={}),this.style.setFilter(c,d,v),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,d,v,x){return x===void 0&&(x={}),this.style.setPaintProperty(c,d,v,x),this._update(!0)},s.prototype.getPaintProperty=function(c,d){return this.style.getPaintProperty(c,d)},s.prototype.setLayoutProperty=function(c,d,v,x){return x===void 0&&(x={}),this.style.setLayoutProperty(c,d,v,x),this._update(!0)},s.prototype.getLayoutProperty=function(c,d){return this.style.getLayoutProperty(c,d)},s.prototype.setLight=function(c,d){return d===void 0&&(d={}),this._lazyInitEmptyStyle(),this.style.setLight(c,d),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,d){return this.style.setFeatureState(c,d),this._update()},s.prototype.removeFeatureState=function(c,d){return this.style.removeFeatureState(c,d),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,d=0;return this._container&&(c=this._container.clientWidth||400,d=this._container.clientHeight||300),[c,d]},s.prototype._detectMissingCSS=function(){u.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&u.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=M.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var d=this._canvasContainer=M.create("div","mapboxgl-canvas-container",c);this._interactive&&d.classList.add("mapboxgl-interactive"),this._canvas=M.create("canvas","mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var v=this._containerDimensions();this._resizeCanvas(v[0],v[1]);var x=this._controlContainer=M.create("div","mapboxgl-control-container",c),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(I){b[I]=M.create("div","mapboxgl-ctrl-"+I,x)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,d){var v=u.browser.devicePixelRatio||1;this._canvas.width=v*c,this._canvas.height=v*d,this._canvas.style.width=c+"px",this._canvas.style.height=d+"px"},s.prototype._setupPainter=function(){var c=u.extend({},z.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);d?(this.painter=new ar(d,this.transform),u.webpSupported.testSupport(d)):this.fire(new u.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new u.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var d,v=this,x=0,b=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(d=b.createQueryEXT(),b.beginQueryEXT(b.TIME_ELAPSED_EXT,d),x=u.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var I=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var A=this.transform.zoom,F=u.browser.now();this.style.zoomHistory.update(A,F);var B=new u.EvaluationParameters(A,{now:F,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),N=B.crossFadingFactor();N===1&&N===this._crossFadingFactor||(I=!0,this._crossFadingFactor=N),this.style.update(B)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new u.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new u.Event("load"))),this.style&&(this.style.hasTransitions()||I)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var W=u.browser.now()-x;b.endQueryEXT(b.TIME_ELAPSED_EXT,d),setTimeout(function(){var j=b.getQueryObjectEXT(d,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(d),v.fire(new u.Event("gpu-timing-frame",{cpuTime:W,gpuTime:j}))},50)}if(this.listens("gpu-timing-layer")){var G=this.painter.collectGpuTimers();setTimeout(function(){var j=v.painter.queryGpuTimers(G);v.fire(new u.Event("gpu-timing-layer",{layerTimes:j}))},50)}var Y=this._sourcesDirty||this._styleDirty||this._placementDirty;return Y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.Event("idle")),!this._loaded||this._fullyLoaded||Y||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,d=this._controls;c<d.length;c+=1)d[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),u.window!==void 0&&(u.window.removeEventListener("resize",this._onWindowResize,!1),u.window.removeEventListener("orientationchange",this._onWindowResize,!1),u.window.removeEventListener("online",this._onWindowOnline,!1));var v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),ta(this._canvasContainer),ta(this._controlContainer),ta(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new u.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=u.browser.frame(function(d){c._frame=null,c._render(d)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,d){u.setCacheLimits(c,d)},o.version.get=function(){return u.version},Object.defineProperties(s.prototype,o),s}(Pl);function ta(i){i.parentNode&&i.parentNode.removeChild(i)}var nc={showCompass:!0,showZoom:!0,visualizePitch:!1},Qi=function(i){var s=this;this.options=u.extend({},nc,i),this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(o){return o.preventDefault()}),this.options.showZoom&&(u.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(o){return s._map.zoomIn({},{originalEvent:o})}),M.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(o){return s._map.zoomOut({},{originalEvent:o})}),M.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(u.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(o){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:o}):s._map.resetNorth({},{originalEvent:o})}),this._compassIcon=M.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Qi.prototype._updateZoomButtons=function(){var i=this._map.getZoom(),s=i===this._map.getMaxZoom(),o=i===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())},Qi.prototype._rotateCompassArrow=function(){var i=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=i},Qi.prototype.onAdd=function(i){return this._map=i,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Nn(this._map,this._compass,this.options.visualizePitch)),this._container},Qi.prototype.onRemove=function(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Qi.prototype._createButton=function(i,s){var o=M.create("button",i,this._container);return o.type="button",o.addEventListener("click",s),o},Qi.prototype._setButtonTitle=function(i,s){var o=this._map._getUIString("NavigationControl."+s);i.title=o,i.setAttribute("aria-label",o)};var Nn=function(i,s,o){o===void 0&&(o=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new El({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,o&&(this.mousePitch=new Ju({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),u.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),M.addEventListener(s,"mousedown",this.mousedown),M.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(s,"touchmove",this.touchmove),M.addEventListener(s,"touchend",this.touchend),M.addEventListener(s,"touchcancel",this.reset)};function za(i,s,o){if(i=new u.LngLat(i.lng,i.lat),s){var c=new u.LngLat(i.lng-360,i.lat),d=new u.LngLat(i.lng+360,i.lat),v=o.locationPoint(i).distSqr(s);o.locationPoint(c).distSqr(s)<v?i=c:o.locationPoint(d).distSqr(s)<v&&(i=d)}for(;Math.abs(i.lng-o.center.lng)>180;){var x=o.locationPoint(i);if(x.x>=0&&x.y>=0&&x.x<=o.width&&x.y<=o.height)break;i.lng>o.center.lng?i.lng-=360:i.lng+=360}return i}Nn.prototype.down=function(i,s){this.mouseRotate.mousedown(i,s),this.mousePitch&&this.mousePitch.mousedown(i,s),M.disableDrag()},Nn.prototype.move=function(i,s){var o=this.map,c=this.mouseRotate.mousemoveWindow(i,s);if(c&&c.bearingDelta&&o.setBearing(o.getBearing()+c.bearingDelta),this.mousePitch){var d=this.mousePitch.mousemoveWindow(i,s);d&&d.pitchDelta&&o.setPitch(o.getPitch()+d.pitchDelta)}},Nn.prototype.off=function(){var i=this.element;M.removeEventListener(i,"mousedown",this.mousedown),M.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(i,"touchmove",this.touchmove),M.removeEventListener(i,"touchend",this.touchend),M.removeEventListener(i,"touchcancel",this.reset),this.offTemp()},Nn.prototype.offTemp=function(){M.enableDrag(),M.removeEventListener(u.window,"mousemove",this.mousemove),M.removeEventListener(u.window,"mouseup",this.mouseup)},Nn.prototype.mousedown=function(i){this.down(u.extend({},i,{ctrlKey:!0,preventDefault:function(){return i.preventDefault()}}),M.mousePos(this.element,i)),M.addEventListener(u.window,"mousemove",this.mousemove),M.addEventListener(u.window,"mouseup",this.mouseup)},Nn.prototype.mousemove=function(i){this.move(i,M.mousePos(this.element,i))},Nn.prototype.mouseup=function(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()},Nn.prototype.touchstart=function(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return i.preventDefault()}},this._startPos))},Nn.prototype.touchmove=function(i){i.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:function(){return i.preventDefault()}},this._lastPos))},Nn.prototype.touchend=function(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Nn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Oi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kl(i,s,o){var c=i.classList;for(var d in Oi)c.remove("mapboxgl-"+o+"-anchor-"+d);c.add("mapboxgl-"+o+"-anchor-"+s)}var Ma,Ds=function(i){function s(o,c){if(i.call(this),(o instanceof u.window.HTMLElement||c)&&(o=u.extend({element:o},c)),u.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=u.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div"),this._element.setAttribute("aria-label","Map marker");var d=M.createNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height","41px"),d.setAttributeNS(null,"width","27px"),d.setAttributeNS(null,"viewBox","0 0 27 41");var v=M.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");var x=M.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"fill-rule","nonzero");var b=M.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(3.0, 29.0)"),b.setAttributeNS(null,"fill","#000000");for(var I=0,A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];I<A.length;I+=1){var F=A[I],B=M.createNS("http://www.w3.org/2000/svg","ellipse");B.setAttributeNS(null,"opacity","0.04"),B.setAttributeNS(null,"cx","10.5"),B.setAttributeNS(null,"cy","5.80029008"),B.setAttributeNS(null,"rx",F.rx),B.setAttributeNS(null,"ry",F.ry),b.appendChild(B)}var N=M.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill",this._color);var W=M.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),N.appendChild(W);var G=M.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");var Y=M.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(Y);var j=M.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(6.0, 7.0)"),j.setAttributeNS(null,"fill","#FFFFFF");var Q=M.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(8.0, 8.0)");var re=M.createNS("http://www.w3.org/2000/svg","circle");re.setAttributeNS(null,"fill","#000000"),re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"cx","5.5"),re.setAttributeNS(null,"cy","5.5"),re.setAttributeNS(null,"r","5.4999962");var ue=M.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#FFFFFF"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962"),Q.appendChild(re),Q.appendChild(ue),x.appendChild(b),x.appendChild(N),x.appendChild(G),x.appendChild(j),x.appendChild(Q),d.appendChild(x),d.setAttributeNS(null,"height",41*this._scale+"px"),d.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(d),this._offset=u.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(me){me.preventDefault()}),this._element.addEventListener("mousedown",function(me){me.preventDefault()}),kl(this._element,this._anchor,"marker"),this._popup=null}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.addTo=function(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=u.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(o){var c=o.code,d=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&d!==32&&d!==13||this.togglePopup()},s.prototype._onMapClick=function(o){var c=o.originalEvent.target,d=this._element;this._popup&&(c===d||d.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this},s.prototype._update=function(o){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=za(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var d="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?d="rotateX(0deg)":this._pitchAlignment==="map"&&(d="rotateX("+this._map.getPitch()+"deg)"),o&&o.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,Oi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+d+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(o){return this._offset=u.Point.convert(o),this._update(),this},s.prototype._onMove=function(o){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.Event("dragstart"))),this.fire(new u.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(o){return this._rotation=o||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(o){return this._rotationAlignment=o||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(u.Evented),ic={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Da=0,ra=!1,oc=function(i){function s(o){i.call(this),this.options=u.extend({},ic,o),u.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.onAdd=function(o){var c;return this._map=o,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,Ma!==void 0?c(Ma):u.window.navigator.permissions!==void 0?u.window.navigator.permissions.query({name:"geolocation"}).then(function(d){c(Ma=d.state!=="denied")}):c(Ma=!!u.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(u.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Da=0,ra=!1},s.prototype._isOutOfMapMaxBounds=function(o){var c=this._map.getMaxBounds(),d=o.coords;return c&&(d.longitude<c.getWest()||d.longitude>c.getEast()||d.latitude<c.getSouth()||d.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new u.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new u.Event("geolocate",o)),this._finish()}},s.prototype._updateCamera=function(o){var c=new u.LngLat(o.coords.longitude,o.coords.latitude),d=o.coords.accuracy,v=this._map.getBearing(),x=u.extend({bearing:v},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(d),x,{geolocateSource:!0})},s.prototype._updateMarker=function(o){if(o){var c=new u.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var o=this._map._container.clientHeight/2,c=this._map.unproject([0,o]),d=this._map.unproject([1,o]),v=c.distanceTo(d),x=Math.ceil(2*this._accuracy/v);this._circleElement.style.width=x+"px",this._circleElement.style.height=x+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&ra)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new u.Event("error",o)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(o){var c=this;if(this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this._geolocateButton=M.create("button","mapboxgl-ctrl-geolocate",this._container),M.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",o===!1){u.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{var v=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=v,this._geolocateButton.setAttribute("aria-label",v)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ds(this._dotElement),this._circleElement=M.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ds({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(x){x.geolocateSource||c._watchState!=="ACTIVE_LOCK"||x.originalEvent&&x.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new u.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return u.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Da--,ra=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new u.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Da>1?(o={maximumAge:6e5,timeout:0},ra=!0):(o=this.options.positionOptions,ra=!1),this._geolocationWatchID=u.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else u.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){u.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(u.Evented),go={maxWidth:100,unit:"metric"},_o=function(i){this.options=u.extend({},go,i),u.bindAll(["_onMove","setUnit"],this)};function Al(i,s,o){var c=o&&o.maxWidth||100,d=i._container.clientHeight/2,v=i.unproject([0,d]),x=i.unproject([c,d]),b=v.distanceTo(x);if(o&&o.unit==="imperial"){var I=3.2808*b;I>5280?xo(s,c,I/5280,i._getUIString("ScaleControl.Miles")):xo(s,c,I,i._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?xo(s,c,b/1852,i._getUIString("ScaleControl.NauticalMiles")):b>=1e3?xo(s,c,b/1e3,i._getUIString("ScaleControl.Kilometers")):xo(s,c,b,i._getUIString("ScaleControl.Meters"))}function xo(i,s,o,c){var d,v,x,b=(d=o,(v=Math.pow(10,(""+Math.floor(d)).length-1))*(x=(x=d/v)>=10?10:x>=5?5:x>=3?3:x>=2?2:x>=1?1:function(I){var A=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*A)/A}(x)));i.style.width=s*(b/o)+"px",i.innerHTML=b+"&nbsp;"+c}_o.prototype.getDefaultPosition=function(){return"bottom-left"},_o.prototype._onMove=function(){Al(this._map,this._container,this.options)},_o.prototype.onAdd=function(i){return this._map=i,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",i.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},_o.prototype.onRemove=function(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},_o.prototype.setUnit=function(i){this.options.unit=i,Al(this._map,this._container,this.options)};var ci=function(i){this._fullscreen=!1,i&&i.container&&(i.container instanceof u.window.HTMLElement?this._container=i.container:u.warnOnce("Full screen control 'container' must be a DOM element.")),u.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in u.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in u.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in u.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in u.window.document&&(this._fullscreenchange="MSFullscreenChange")};ci.prototype.onAdd=function(i){return this._map=i,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",u.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ci.prototype.onRemove=function(){M.remove(this._controlContainer),this._map=null,u.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ci.prototype._checkFullscreenSupport=function(){return!!(u.window.document.fullscreenEnabled||u.window.document.mozFullScreenEnabled||u.window.document.msFullscreenEnabled||u.window.document.webkitFullscreenEnabled)},ci.prototype._setupUI=function(){var i=this._fullscreenButton=M.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);M.create("span","mapboxgl-ctrl-icon",i).setAttribute("aria-hidden",!0),i.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),u.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ci.prototype._updateTitle=function(){var i=this._getTitle();this._fullscreenButton.setAttribute("aria-label",i),this._fullscreenButton.title=i},ci.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ci.prototype._isFullscreen=function(){return this._fullscreen},ci.prototype._changeIcon=function(){(u.window.document.fullscreenElement||u.window.document.mozFullScreenElement||u.window.document.webkitFullscreenElement||u.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ci.prototype._onClickFullscreen=function(){this._isFullscreen()?u.window.document.exitFullscreen?u.window.document.exitFullscreen():u.window.document.mozCancelFullScreen?u.window.document.mozCancelFullScreen():u.window.document.msExitFullscreen?u.window.document.msExitFullscreen():u.window.document.webkitCancelFullScreen&&u.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ac={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ls=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),sc=function(i){function s(o){i.call(this),this.options=u.extend(Object.create(ac),o),u.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return i&&(s.__proto__=i),(s.prototype=Object.create(i&&i.prototype)).constructor=s,s.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new u.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=u.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(o){return this.setDOMContent(u.window.document.createTextNode(o))},s.prototype.setHTML=function(o){var c,d=u.window.document.createDocumentFragment(),v=u.window.document.createElement("body");for(v.innerHTML=o;c=v.firstChild;)d.appendChild(c);return this.setDOMContent(d)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(o){return this.options.maxWidth=o,this._update(),this},s.prototype.setDOMContent=function(o){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(o),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(o){this._container&&this._container.classList.add(o)},s.prototype.removeClassName=function(o){this._container&&this._container.classList.remove(o)},s.prototype.setOffset=function(o){return this.options.offset=o,this._update(),this},s.prototype.toggleClassName=function(o){if(this._container)return this._container.classList.toggle(o)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=M.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(o){this._update(o.point)},s.prototype._onMouseMove=function(o){this._update(o.point)},s.prototype._onDrag=function(o){this._update(o.point)},s.prototype._update=function(o){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=M.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=M.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(B){return c._container.classList.add(B)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=za(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||o)){var d=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat),v=this.options.anchor,x=function B(N){if(N){if(typeof N=="number"){var W=Math.round(Math.sqrt(.5*Math.pow(N,2)));return{center:new u.Point(0,0),top:new u.Point(0,N),"top-left":new u.Point(W,W),"top-right":new u.Point(-W,W),bottom:new u.Point(0,-N),"bottom-left":new u.Point(W,-W),"bottom-right":new u.Point(-W,-W),left:new u.Point(N,0),right:new u.Point(-N,0)}}if(N instanceof u.Point||Array.isArray(N)){var G=u.Point.convert(N);return{center:G,top:G,"top-left":G,"top-right":G,bottom:G,"bottom-left":G,"bottom-right":G,left:G,right:G}}return{center:u.Point.convert(N.center||[0,0]),top:u.Point.convert(N.top||[0,0]),"top-left":u.Point.convert(N["top-left"]||[0,0]),"top-right":u.Point.convert(N["top-right"]||[0,0]),bottom:u.Point.convert(N.bottom||[0,0]),"bottom-left":u.Point.convert(N["bottom-left"]||[0,0]),"bottom-right":u.Point.convert(N["bottom-right"]||[0,0]),left:u.Point.convert(N.left||[0,0]),right:u.Point.convert(N.right||[0,0])}}return B(new u.Point(0,0))}(this.options.offset);if(!v){var b,I=this._container.offsetWidth,A=this._container.offsetHeight;b=d.y+x.bottom.y<A?["top"]:d.y>this._map.transform.height-A?["bottom"]:[],d.x<I/2?b.push("left"):d.x>this._map.transform.width-I/2&&b.push("right"),v=b.length===0?"bottom":b.join("-")}var F=d.add(x[v]).round();M.setTransform(this._container,Oi[v]+" translate("+F.x+"px,"+F.y+"px)"),kl(this._container,v,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var o=this._container.querySelector(Ls);o&&o.focus()}},s.prototype._onClose=function(){this.remove()},s}(u.Evented),zl={version:u.version,supported:z,setRTLTextPlugin:u.setRTLTextPlugin,getRTLTextPluginStatus:u.getRTLTextPluginStatus,Map:sh,NavigationControl:Qi,GeolocateControl:oc,AttributionControl:mn,ScaleControl:_o,FullscreenControl:ci,Popup:sc,Marker:Ds,Style:Rn,LngLat:u.LngLat,LngLatBounds:u.LngLatBounds,Point:u.Point,MercatorCoordinate:u.MercatorCoordinate,Evented:u.Evented,config:u.config,prewarm:function(){ge().acquire(ve)},clearPrewarmedResources:function(){var i=He;i&&(i.isPreloaded()&&i.numActive()===1?(i.release(ve),He=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return u.config.ACCESS_TOKEN},set accessToken(i){u.config.ACCESS_TOKEN=i},get baseApiUrl(){return u.config.API_URL},set baseApiUrl(i){u.config.API_URL=i},get workerCount(){return Te.workerCount},set workerCount(i){Te.workerCount=i},get maxParallelImageRequests(){return u.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(i){u.config.MAX_PARALLEL_IMAGE_REQUESTS=i},clearStorage:function(i){u.clearTileCache(i)},workerUrl:""};return zl}),g})})(kg);var _S=kg.exports,Vh={exports:{}},$t={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ag=Object.getOwnPropertySymbols,Fw=Object.prototype.hasOwnProperty,Bw=Object.prototype.propertyIsEnumerable;function Uw(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function Nw(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var a={},p=0;p<10;p++)a["_"+String.fromCharCode(p)]=p;var m=Object.getOwnPropertyNames(a).map(function(S){return a[S]});if(m.join("")!=="0123456789")return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach(function(S){g[S]=S}),Object.keys(Object.assign({},g)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var zg=Nw()?Object.assign:function(r,a){for(var p,m=Uw(r),g,S=1;S<arguments.length;S++){p=Object(arguments[S]);for(var u in p)Fw.call(p,u)&&(m[u]=p[u]);if(Ag){g=Ag(p);for(var z=0;z<g.length;z++)Bw.call(p,g[z])&&(m[g[z]]=p[g[z]])}}return m};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d=zg,au=60103,Mg=60106;$t.Fragment=60107;$t.StrictMode=60108;$t.Profiler=60114;var Dg=60109,Lg=60110,Rg=60112;$t.Suspense=60113;var Og=60115,Fg=60116;if(typeof Symbol=="function"&&Symbol.for){var ro=Symbol.for;au=ro("react.element"),Mg=ro("react.portal"),$t.Fragment=ro("react.fragment"),$t.StrictMode=ro("react.strict_mode"),$t.Profiler=ro("react.profiler"),Dg=ro("react.provider"),Lg=ro("react.context"),Rg=ro("react.forward_ref"),$t.Suspense=ro("react.suspense"),Og=ro("react.memo"),Fg=ro("react.lazy")}var Bg=typeof Symbol=="function"&&Symbol.iterator;function Vw(r){return r===null||typeof r!="object"?null:(r=Bg&&r[Bg]||r["@@iterator"],typeof r=="function"?r:null)}function Dc(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,p=1;p<arguments.length;p++)a+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ug={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ng={};function su(r,a,p){this.props=r,this.context=a,this.refs=Ng,this.updater=p||Ug}su.prototype.isReactComponent={};su.prototype.setState=function(r,a){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error(Dc(85));this.updater.enqueueSetState(this,r,a,"setState")};su.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function Vg(){}Vg.prototype=su.prototype;function Qd(r,a,p){this.props=r,this.context=a,this.refs=Ng,this.updater=p||Ug}var Yd=Qd.prototype=new Vg;Yd.constructor=Qd;$d(Yd,su.prototype);Yd.isPureReactComponent=!0;var Jd={current:null},jg=Object.prototype.hasOwnProperty,qg={key:!0,ref:!0,__self:!0,__source:!0};function Zg(r,a,p){var m,g={},S=null,u=null;if(a!=null)for(m in a.ref!==void 0&&(u=a.ref),a.key!==void 0&&(S=""+a.key),a)jg.call(a,m)&&!qg.hasOwnProperty(m)&&(g[m]=a[m]);var z=arguments.length-2;if(z===1)g.children=p;else if(1<z){for(var M=Array(z),K=0;K<z;K++)M[K]=arguments[K+2];g.children=M}if(r&&r.defaultProps)for(m in z=r.defaultProps,z)g[m]===void 0&&(g[m]=z[m]);return{$$typeof:au,type:r,key:S,ref:u,props:g,_owner:Jd.current}}function jw(r,a){return{$$typeof:au,type:r.type,key:a,ref:r.ref,props:r.props,_owner:r._owner}}function em(r){return typeof r=="object"&&r!==null&&r.$$typeof===au}function qw(r){var a={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(p){return a[p]})}var Gg=/\/+/g;function tm(r,a){return typeof r=="object"&&r!==null&&r.key!=null?qw(""+r.key):a.toString(36)}function jh(r,a,p,m,g){var S=typeof r;(S==="undefined"||S==="boolean")&&(r=null);var u=!1;if(r===null)u=!0;else switch(S){case"string":case"number":u=!0;break;case"object":switch(r.$$typeof){case au:case Mg:u=!0}}if(u)return u=r,g=g(u),r=m===""?"."+tm(u,0):m,Array.isArray(g)?(p="",r!=null&&(p=r.replace(Gg,"$&/")+"/"),jh(g,a,p,"",function(K){return K})):g!=null&&(em(g)&&(g=jw(g,p+(!g.key||u&&u.key===g.key?"":(""+g.key).replace(Gg,"$&/")+"/")+r)),a.push(g)),1;if(u=0,m=m===""?".":m+":",Array.isArray(r))for(var z=0;z<r.length;z++){S=r[z];var M=m+tm(S,z);u+=jh(S,a,p,M,g)}else if(M=Vw(r),typeof M=="function")for(r=M.call(r),z=0;!(S=r.next()).done;)S=S.value,M=m+tm(S,z++),u+=jh(S,a,p,M,g);else if(S==="object")throw a=""+r,Error(Dc(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a));return u}function qh(r,a,p){if(r==null)return r;var m=[],g=0;return jh(r,m,"","",function(S){return a.call(p,S,g++)}),m}function Zw(r){if(r._status===-1){var a=r._result;a=a(),r._status=0,r._result=a,a.then(function(p){r._status===0&&(p=p.default,r._status=1,r._result=p)},function(p){r._status===0&&(r._status=2,r._result=p)})}if(r._status===1)return r._result;throw r._result}var Wg={current:null};function pa(){var r=Wg.current;if(r===null)throw Error(Dc(321));return r}var Gw={ReactCurrentDispatcher:Wg,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Jd,IsSomeRendererActing:{current:!1},assign:$d};$t.Children={map:qh,forEach:function(r,a,p){qh(r,function(){a.apply(this,arguments)},p)},count:function(r){var a=0;return qh(r,function(){a++}),a},toArray:function(r){return qh(r,function(a){return a})||[]},only:function(r){if(!em(r))throw Error(Dc(143));return r}};$t.Component=su;$t.PureComponent=Qd;$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gw;$t.cloneElement=function(r,a,p){if(r==null)throw Error(Dc(267,r));var m=$d({},r.props),g=r.key,S=r.ref,u=r._owner;if(a!=null){if(a.ref!==void 0&&(S=a.ref,u=Jd.current),a.key!==void 0&&(g=""+a.key),r.type&&r.type.defaultProps)var z=r.type.defaultProps;for(M in a)jg.call(a,M)&&!qg.hasOwnProperty(M)&&(m[M]=a[M]===void 0&&z!==void 0?z[M]:a[M])}var M=arguments.length-2;if(M===1)m.children=p;else if(1<M){z=Array(M);for(var K=0;K<M;K++)z[K]=arguments[K+2];m.children=z}return{$$typeof:au,type:r.type,key:g,ref:S,props:m,_owner:u}};$t.createContext=function(r,a){return a===void 0&&(a=null),r={$$typeof:Lg,_calculateChangedBits:a,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null},r.Provider={$$typeof:Dg,_context:r},r.Consumer=r};$t.createElement=Zg;$t.createFactory=function(r){var a=Zg.bind(null,r);return a.type=r,a};$t.createRef=function(){return{current:null}};$t.forwardRef=function(r){return{$$typeof:Rg,render:r}};$t.isValidElement=em;$t.lazy=function(r){return{$$typeof:Fg,_payload:{_status:-1,_result:r},_init:Zw}};$t.memo=function(r,a){return{$$typeof:Og,type:r,compare:a===void 0?null:a}};$t.useCallback=function(r,a){return pa().useCallback(r,a)};$t.useContext=function(r,a){return pa().useContext(r,a)};$t.useDebugValue=function(){};$t.useEffect=function(r,a){return pa().useEffect(r,a)};$t.useImperativeHandle=function(r,a,p){return pa().useImperativeHandle(r,a,p)};$t.useLayoutEffect=function(r,a){return pa().useLayoutEffect(r,a)};$t.useMemo=function(r,a){return pa().useMemo(r,a)};$t.useReducer=function(r,a,p){return pa().useReducer(r,a,p)};$t.useRef=function(r){return pa().useRef(r)};$t.useState=function(r){return pa().useState(r)};$t.version="17.0.2";Vh.exports=$t;var Lc=Vh.exports,Ww={exports:{}},Rc={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw=Vh.exports,Xg=60103;Rc.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var Hg=Symbol.for;Xg=Hg("react.element"),Rc.Fragment=Hg("react.fragment")}var Hw=Xw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kw=Object.prototype.hasOwnProperty,$w={key:!0,ref:!0,__self:!0,__source:!0};function Kg(r,a,p){var m,g={},S=null,u=null;p!==void 0&&(S=""+p),a.key!==void 0&&(S=""+a.key),a.ref!==void 0&&(u=a.ref);for(m in a)Kw.call(a,m)&&!$w.hasOwnProperty(m)&&(g[m]=a[m]);if(r&&r.defaultProps)for(m in a=r.defaultProps,a)g[m]===void 0&&(g[m]=a[m]);return{$$typeof:Xg,type:r,key:S,ref:u,props:g,_owner:Hw.current}}Rc.jsx=Kg;Rc.jsxs=Kg;Ww.exports=Rc;var $g={exports:{}},Ni={},Qg={exports:{}},Yg={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){var a,p,m,g;if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;r.unstable_now=function(){return S.now()}}else{var u=Date,z=u.now();r.unstable_now=function(){return u.now()-z}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var M=null,K=null,le=function(){if(M!==null)try{var Fe=r.unstable_now();M(!0,Fe),M=null}catch(pt){throw setTimeout(le,0),pt}};a=function(Fe){M!==null?setTimeout(a,0,Fe):(M=Fe,setTimeout(le,0))},p=function(Fe,pt){K=setTimeout(Fe,pt)},m=function(){clearTimeout(K)},r.unstable_shouldYield=function(){return!1},g=r.unstable_forceFrameRate=function(){}}else{var Ce=window.setTimeout,ee=window.clearTimeout;if(typeof console!="undefined"){var Se=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof Se!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var Oe=!1,Ze=null,se=-1,ne=5,oe=0;r.unstable_shouldYield=function(){return r.unstable_now()>=oe},g=function(){},r.unstable_forceFrameRate=function(Fe){0>Fe||125<Fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<Fe?Math.floor(1e3/Fe):5};var _e=new MessageChannel,we=_e.port2;_e.port1.onmessage=function(){if(Ze!==null){var Fe=r.unstable_now();oe=Fe+ne;try{Ze(!0,Fe)?we.postMessage(null):(Oe=!1,Ze=null)}catch(pt){throw we.postMessage(null),pt}}else Oe=!1},a=function(Fe){Ze=Fe,Oe||(Oe=!0,we.postMessage(null))},p=function(Fe,pt){se=Ce(function(){Fe(r.unstable_now())},pt)},m=function(){ee(se),se=-1}}function ot(Fe,pt){var bt=Fe.length;Fe.push(pt);e:for(;;){var Yt=bt-1>>>1,pr=Fe[Yt];if(pr!==void 0&&0<mt(pr,pt))Fe[Yt]=pt,Fe[bt]=pr,bt=Yt;else break e}}function Le(Fe){return Fe=Fe[0],Fe===void 0?null:Fe}function ut(Fe){var pt=Fe[0];if(pt!==void 0){var bt=Fe.pop();if(bt!==pt){Fe[0]=bt;e:for(var Yt=0,pr=Fe.length;Yt<pr;){var _i=2*(Yt+1)-1,dr=Fe[_i],Sn=_i+1,Ot=Fe[Sn];if(dr!==void 0&&0>mt(dr,bt))Ot!==void 0&&0>mt(Ot,dr)?(Fe[Yt]=Ot,Fe[Sn]=bt,Yt=Sn):(Fe[Yt]=dr,Fe[_i]=bt,Yt=_i);else if(Ot!==void 0&&0>mt(Ot,bt))Fe[Yt]=Ot,Fe[Sn]=bt,Yt=Sn;else break e}}return pt}return null}function mt(Fe,pt){var bt=Fe.sortIndex-pt.sortIndex;return bt!==0?bt:Fe.id-pt.id}var Qe=[],Qt=[],Jr=1,Mr=null,gt=3,rr=!1,qr=!1,nr=!1;function un(Fe){for(var pt=Le(Qt);pt!==null;){if(pt.callback===null)ut(Qt);else if(pt.startTime<=Fe)ut(Qt),pt.sortIndex=pt.expirationTime,ot(Qe,pt);else break;pt=Le(Qt)}}function Zr(Fe){if(nr=!1,un(Fe),!qr)if(Le(Qe)!==null)qr=!0,a(cn);else{var pt=Le(Qt);pt!==null&&p(Zr,pt.startTime-Fe)}}function cn(Fe,pt){qr=!1,nr&&(nr=!1,m()),rr=!0;var bt=gt;try{for(un(pt),Mr=Le(Qe);Mr!==null&&(!(Mr.expirationTime>pt)||Fe&&!r.unstable_shouldYield());){var Yt=Mr.callback;if(typeof Yt=="function"){Mr.callback=null,gt=Mr.priorityLevel;var pr=Yt(Mr.expirationTime<=pt);pt=r.unstable_now(),typeof pr=="function"?Mr.callback=pr:Mr===Le(Qe)&&ut(Qe),un(pt)}else ut(Qe);Mr=Le(Qe)}if(Mr!==null)var _i=!0;else{var dr=Le(Qt);dr!==null&&p(Zr,dr.startTime-pt),_i=!1}return _i}finally{Mr=null,gt=bt,rr=!1}}var bn=g;r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Fe){Fe.callback=null},r.unstable_continueExecution=function(){qr||rr||(qr=!0,a(cn))},r.unstable_getCurrentPriorityLevel=function(){return gt},r.unstable_getFirstCallbackNode=function(){return Le(Qe)},r.unstable_next=function(Fe){switch(gt){case 1:case 2:case 3:var pt=3;break;default:pt=gt}var bt=gt;gt=pt;try{return Fe()}finally{gt=bt}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=bn,r.unstable_runWithPriority=function(Fe,pt){switch(Fe){case 1:case 2:case 3:case 4:case 5:break;default:Fe=3}var bt=gt;gt=Fe;try{return pt()}finally{gt=bt}},r.unstable_scheduleCallback=function(Fe,pt,bt){var Yt=r.unstable_now();switch(typeof bt=="object"&&bt!==null?(bt=bt.delay,bt=typeof bt=="number"&&0<bt?Yt+bt:Yt):bt=Yt,Fe){case 1:var pr=-1;break;case 2:pr=250;break;case 5:pr=1073741823;break;case 4:pr=1e4;break;default:pr=5e3}return pr=bt+pr,Fe={id:Jr++,callback:pt,priorityLevel:Fe,startTime:bt,expirationTime:pr,sortIndex:-1},bt>Yt?(Fe.sortIndex=bt,ot(Qt,Fe),Le(Qe)===null&&Fe===Le(Qt)&&(nr?m():nr=!0,p(Zr,bt-Yt))):(Fe.sortIndex=pr,ot(Qe,Fe),qr||rr||(qr=!0,a(cn))),Fe},r.unstable_wrapCallback=function(Fe){var pt=gt;return function(){var bt=gt;gt=pt;try{return Fe.apply(this,arguments)}finally{gt=bt}}}})(Yg);Qg.exports=Yg;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh=Vh.exports,zr=zg,xn=Qg.exports;function qe(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,p=1;p<arguments.length;p++)a+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Zh)throw Error(qe(227));var Jg=new Set,Oc={};function Ws(r,a){lu(r,a),lu(r+"Capture",a)}function lu(r,a){for(Oc[r]=a,r=0;r<a.length;r++)Jg.add(a[r])}var ha=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Qw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,e_=Object.prototype.hasOwnProperty,t_={},r_={};function Yw(r){return e_.call(r_,r)?!0:e_.call(t_,r)?!1:Qw.test(r)?r_[r]=!0:(t_[r]=!0,!1)}function Jw(r,a,p,m){if(p!==null&&p.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:p!==null?!p.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function eb(r,a,p,m){if(a===null||typeof a=="undefined"||Jw(r,a,p,m))return!0;if(m)return!1;if(p!==null)switch(p.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function Yn(r,a,p,m,g,S,u){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=g,this.mustUseProperty=p,this.propertyName=r,this.type=a,this.sanitizeURL=S,this.removeEmptyString=u}var zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){zn[r]=new Yn(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];zn[a]=new Yn(a,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){zn[r]=new Yn(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){zn[r]=new Yn(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){zn[r]=new Yn(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){zn[r]=new Yn(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){zn[r]=new Yn(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){zn[r]=new Yn(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){zn[r]=new Yn(r,5,!1,r.toLowerCase(),null,!1,!1)});var rm=/[\-:]([a-z])/g;function nm(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(rm,nm);zn[a]=new Yn(a,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(rm,nm);zn[a]=new Yn(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(rm,nm);zn[a]=new Yn(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){zn[r]=new Yn(r,1,!1,r.toLowerCase(),null,!1,!1)});zn.xlinkHref=new Yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){zn[r]=new Yn(r,1,!1,r.toLowerCase(),null,!0,!0)});function im(r,a,p,m){var g=zn.hasOwnProperty(a)?zn[a]:null,S=g!==null?g.type===0:m?!1:!(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N");S||(eb(a,p,g,m)&&(p=null),m||g===null?Yw(a)&&(p===null?r.removeAttribute(a):r.setAttribute(a,""+p)):g.mustUseProperty?r[g.propertyName]=p===null?g.type===3?!1:"":p:(a=g.attributeName,m=g.attributeNamespace,p===null?r.removeAttribute(a):(g=g.type,p=g===3||g===4&&p===!0?"":""+p,m?r.setAttributeNS(m,a,p):r.setAttribute(a,p))))}var Xs=Zh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fc=60103,Hs=60106,Va=60107,om=60108,Bc=60114,am=60109,sm=60110,Gh=60112,Uc=60113,Wh=60120,Xh=60115,lm=60116,um=60121,cm=60128,n_=60129,pm=60130,hm=60131;if(typeof Symbol=="function"&&Symbol.for){var wn=Symbol.for;Fc=wn("react.element"),Hs=wn("react.portal"),Va=wn("react.fragment"),om=wn("react.strict_mode"),Bc=wn("react.profiler"),am=wn("react.provider"),sm=wn("react.context"),Gh=wn("react.forward_ref"),Uc=wn("react.suspense"),Wh=wn("react.suspense_list"),Xh=wn("react.memo"),lm=wn("react.lazy"),um=wn("react.block"),wn("react.scope"),cm=wn("react.opaque.id"),n_=wn("react.debug_trace_mode"),pm=wn("react.offscreen"),hm=wn("react.legacy_hidden")}var i_=typeof Symbol=="function"&&Symbol.iterator;function Nc(r){return r===null||typeof r!="object"?null:(r=i_&&r[i_]||r["@@iterator"],typeof r=="function"?r:null)}var fm;function Vc(r){if(fm===void 0)try{throw Error()}catch(p){var a=p.stack.trim().match(/\n( *(at )?)/);fm=a&&a[1]||""}return`
`+fm+r}var dm=!1;function Hh(r,a){if(!r||dm)return"";dm=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(M){var m=M}Reflect.construct(r,[],a)}else{try{a.call()}catch(M){m=M}r.call(a.prototype)}else{try{throw Error()}catch(M){m=M}r()}}catch(M){if(M&&m&&typeof M.stack=="string"){for(var g=M.stack.split(`
`),S=m.stack.split(`
`),u=g.length-1,z=S.length-1;1<=u&&0<=z&&g[u]!==S[z];)z--;for(;1<=u&&0<=z;u--,z--)if(g[u]!==S[z]){if(u!==1||z!==1)do if(u--,z--,0>z||g[u]!==S[z])return`
`+g[u].replace(" at new "," at ");while(1<=u&&0<=z);break}}}finally{dm=!1,Error.prepareStackTrace=p}return(r=r?r.displayName||r.name:"")?Vc(r):""}function tb(r){switch(r.tag){case 5:return Vc(r.type);case 16:return Vc("Lazy");case 13:return Vc("Suspense");case 19:return Vc("SuspenseList");case 0:case 2:case 15:return r=Hh(r.type,!1),r;case 11:return r=Hh(r.type.render,!1),r;case 22:return r=Hh(r.type._render,!1),r;case 1:return r=Hh(r.type,!0),r;default:return""}}function uu(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Va:return"Fragment";case Hs:return"Portal";case Bc:return"Profiler";case om:return"StrictMode";case Uc:return"Suspense";case Wh:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case sm:return(r.displayName||"Context")+".Consumer";case am:return(r._context.displayName||"Context")+".Provider";case Gh:var a=r.render;return a=a.displayName||a.name||"",r.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case Xh:return uu(r.type);case um:return uu(r._render);case lm:a=r._payload,r=r._init;try{return uu(r(a))}catch{}}return null}function ja(r){switch(typeof r){case"boolean":case"number":case"object":case"string":case"undefined":return r;default:return""}}function o_(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function rb(r){var a=o_(r)?"checked":"value",p=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),m=""+r[a];if(!r.hasOwnProperty(a)&&typeof p!="undefined"&&typeof p.get=="function"&&typeof p.set=="function"){var g=p.get,S=p.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return g.call(this)},set:function(u){m=""+u,S.call(this,u)}}),Object.defineProperty(r,a,{enumerable:p.enumerable}),{getValue:function(){return m},setValue:function(u){m=""+u},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Kh(r){r._valueTracker||(r._valueTracker=rb(r))}function a_(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var p=a.getValue(),m="";return r&&(m=o_(r)?r.checked?"true":"false":r.value),r=m,r!==p?(a.setValue(r),!0):!1}function $h(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch{return r.body}}function mm(r,a){var p=a.checked;return zr({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p!=null?p:r._wrapperState.initialChecked})}function s_(r,a){var p=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;p=ja(a.value!=null?a.value:p),r._wrapperState={initialChecked:m,initialValue:p,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function l_(r,a){a=a.checked,a!=null&&im(r,"checked",a,!1)}function ym(r,a){l_(r,a);var p=ja(a.value),m=a.type;if(p!=null)m==="number"?(p===0&&r.value===""||r.value!=p)&&(r.value=""+p):r.value!==""+p&&(r.value=""+p);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?vm(r,a.type,p):a.hasOwnProperty("defaultValue")&&vm(r,a.type,ja(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function u_(r,a,p){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,p||a===r.value||(r.value=a),r.defaultValue=a}p=r.name,p!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,p!==""&&(r.name=p)}function vm(r,a,p){(a!=="number"||$h(r.ownerDocument)!==r)&&(p==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+p&&(r.defaultValue=""+p))}function nb(r){var a="";return Zh.Children.forEach(r,function(p){p!=null&&(a+=p)}),a}function gm(r,a){return r=zr({children:void 0},a),(a=nb(a.children))&&(r.children=a),r}function cu(r,a,p,m){if(r=r.options,a){a={};for(var g=0;g<p.length;g++)a["$"+p[g]]=!0;for(p=0;p<r.length;p++)g=a.hasOwnProperty("$"+r[p].value),r[p].selected!==g&&(r[p].selected=g),g&&m&&(r[p].defaultSelected=!0)}else{for(p=""+ja(p),a=null,g=0;g<r.length;g++){if(r[g].value===p){r[g].selected=!0,m&&(r[g].defaultSelected=!0);return}a!==null||r[g].disabled||(a=r[g])}a!==null&&(a.selected=!0)}}function _m(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(qe(91));return zr({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function c_(r,a){var p=a.value;if(p==null){if(p=a.children,a=a.defaultValue,p!=null){if(a!=null)throw Error(qe(92));if(Array.isArray(p)){if(!(1>=p.length))throw Error(qe(93));p=p[0]}a=p}a==null&&(a=""),p=a}r._wrapperState={initialValue:ja(p)}}function p_(r,a){var p=ja(a.value),m=ja(a.defaultValue);p!=null&&(p=""+p,p!==r.value&&(r.value=p),a.defaultValue==null&&r.defaultValue!==p&&(r.defaultValue=p)),m!=null&&(r.defaultValue=""+m)}function h_(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}var xm={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function f_(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wm(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?f_(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Qh,d_=function(r){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(a,p,m,g){MSApp.execUnsafeLocalFunction(function(){return r(a,p,m,g)})}:r}(function(r,a){if(r.namespaceURI!==xm.svg||"innerHTML"in r)r.innerHTML=a;else{for(Qh=Qh||document.createElement("div"),Qh.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Qh.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function jc(r,a){if(a){var p=r.firstChild;if(p&&p===r.lastChild&&p.nodeType===3){p.nodeValue=a;return}}r.textContent=a}var qc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ib=["Webkit","ms","Moz","O"];Object.keys(qc).forEach(function(r){ib.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),qc[a]=qc[r]})});function m_(r,a,p){return a==null||typeof a=="boolean"||a===""?"":p||typeof a!="number"||a===0||qc.hasOwnProperty(r)&&qc[r]?(""+a).trim():a+"px"}function y_(r,a){r=r.style;for(var p in a)if(a.hasOwnProperty(p)){var m=p.indexOf("--")===0,g=m_(p,a[p],m);p==="float"&&(p="cssFloat"),m?r.setProperty(p,g):r[p]=g}}var ob=zr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bm(r,a){if(a){if(ob[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(qe(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(qe(60));if(!(typeof a.dangerouslySetInnerHTML=="object"&&"__html"in a.dangerouslySetInnerHTML))throw Error(qe(61))}if(a.style!=null&&typeof a.style!="object")throw Error(qe(62))}}function Sm(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Em(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Tm=null,pu=null,hu=null;function v_(r){if(r=lp(r)){if(typeof Tm!="function")throw Error(qe(280));var a=r.stateNode;a&&(a=yf(a),Tm(r.stateNode,r.type,a))}}function g_(r){pu?hu?hu.push(r):hu=[r]:pu=r}function __(){if(pu){var r=pu,a=hu;if(hu=pu=null,v_(r),a)for(r=0;r<a.length;r++)v_(a[r])}}function Im(r,a){return r(a)}function x_(r,a,p,m,g){return r(a,p,m,g)}function Pm(){}var w_=Im,Ks=!1,Cm=!1;function km(){(pu!==null||hu!==null)&&(Pm(),__())}function ab(r,a,p){if(Cm)return r(a,p);Cm=!0;try{return w_(r,a,p)}finally{Cm=!1,km()}}function Zc(r,a){var p=r.stateNode;if(p===null)return null;var m=yf(p);if(m===null)return null;p=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(p&&typeof p!="function")throw Error(qe(231,a,typeof p));return p}var Am=!1;if(ha)try{var Gc={};Object.defineProperty(Gc,"passive",{get:function(){Am=!0}}),window.addEventListener("test",Gc,Gc),window.removeEventListener("test",Gc,Gc)}catch{Am=!1}function sb(r,a,p,m,g,S,u,z,M){var K=Array.prototype.slice.call(arguments,3);try{a.apply(p,K)}catch(le){this.onError(le)}}var Wc=!1,Yh=null,Jh=!1,zm=null,lb={onError:function(r){Wc=!0,Yh=r}};function ub(r,a,p,m,g,S,u,z,M){Wc=!1,Yh=null,sb.apply(lb,arguments)}function cb(r,a,p,m,g,S,u,z,M){if(ub.apply(this,arguments),Wc){if(Wc){var K=Yh;Wc=!1,Yh=null}else throw Error(qe(198));Jh||(Jh=!0,zm=K)}}function $s(r){var a=r,p=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&1026)!=0&&(p=a.return),r=a.return;while(r)}return a.tag===3?p:null}function b_(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function S_(r){if($s(r)!==r)throw Error(qe(188))}function pb(r){var a=r.alternate;if(!a){if(a=$s(r),a===null)throw Error(qe(188));return a!==r?null:r}for(var p=r,m=a;;){var g=p.return;if(g===null)break;var S=g.alternate;if(S===null){if(m=g.return,m!==null){p=m;continue}break}if(g.child===S.child){for(S=g.child;S;){if(S===p)return S_(g),r;if(S===m)return S_(g),a;S=S.sibling}throw Error(qe(188))}if(p.return!==m.return)p=g,m=S;else{for(var u=!1,z=g.child;z;){if(z===p){u=!0,p=g,m=S;break}if(z===m){u=!0,m=g,p=S;break}z=z.sibling}if(!u){for(z=S.child;z;){if(z===p){u=!0,p=S,m=g;break}if(z===m){u=!0,m=S,p=g;break}z=z.sibling}if(!u)throw Error(qe(189))}}if(p.alternate!==m)throw Error(qe(190))}if(p.tag!==3)throw Error(qe(188));return p.stateNode.current===p?r:a}function E_(r){if(r=pb(r),!r)return null;for(var a=r;;){if(a.tag===5||a.tag===6)return a;if(a.child)a.child.return=a,a=a.child;else{if(a===r)break;for(;!a.sibling;){if(!a.return||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}}return null}function T_(r,a){for(var p=r.alternate;a!==null;){if(a===r||a===p)return!0;a=a.return}return!1}var I_,Mm,P_,C_,Dm=!1,Ao=[],qa=null,Za=null,Ga=null,Xc=new Map,Hc=new Map,Kc=[],k_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lm(r,a,p,m,g){return{blockedOn:r,domEventName:a,eventSystemFlags:p|16,nativeEvent:g,targetContainers:[m]}}function A_(r,a){switch(r){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Za=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Xc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(a.pointerId)}}function $c(r,a,p,m,g,S){return r===null||r.nativeEvent!==S?(r=Lm(a,p,m,g,S),a!==null&&(a=lp(a),a!==null&&Mm(a)),r):(r.eventSystemFlags|=m,a=r.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),r)}function hb(r,a,p,m,g){switch(a){case"focusin":return qa=$c(qa,r,a,p,m,g),!0;case"dragenter":return Za=$c(Za,r,a,p,m,g),!0;case"mouseover":return Ga=$c(Ga,r,a,p,m,g),!0;case"pointerover":var S=g.pointerId;return Xc.set(S,$c(Xc.get(S)||null,r,a,p,m,g)),!0;case"gotpointercapture":return S=g.pointerId,Hc.set(S,$c(Hc.get(S)||null,r,a,p,m,g)),!0}return!1}function fb(r){var a=Qs(r.target);if(a!==null){var p=$s(a);if(p!==null){if(a=p.tag,a===13){if(a=b_(p),a!==null){r.blockedOn=a,C_(r.lanePriority,function(){xn.unstable_runWithPriority(r.priority,function(){P_(p)})});return}}else if(a===3&&p.stateNode.hydrate){r.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ef(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var p=Nm(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(p!==null)return a=lp(p),a!==null&&Mm(a),r.blockedOn=p,!1;a.shift()}return!0}function z_(r,a,p){ef(r)&&p.delete(a)}function db(){for(Dm=!1;0<Ao.length;){var r=Ao[0];if(r.blockedOn!==null){r=lp(r.blockedOn),r!==null&&I_(r);break}for(var a=r.targetContainers;0<a.length;){var p=Nm(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(p!==null){r.blockedOn=p;break}a.shift()}r.blockedOn===null&&Ao.shift()}qa!==null&&ef(qa)&&(qa=null),Za!==null&&ef(Za)&&(Za=null),Ga!==null&&ef(Ga)&&(Ga=null),Xc.forEach(z_),Hc.forEach(z_)}function Qc(r,a){r.blockedOn===a&&(r.blockedOn=null,Dm||(Dm=!0,xn.unstable_scheduleCallback(xn.unstable_NormalPriority,db)))}function M_(r){function a(g){return Qc(g,r)}if(0<Ao.length){Qc(Ao[0],r);for(var p=1;p<Ao.length;p++){var m=Ao[p];m.blockedOn===r&&(m.blockedOn=null)}}for(qa!==null&&Qc(qa,r),Za!==null&&Qc(Za,r),Ga!==null&&Qc(Ga,r),Xc.forEach(a),Hc.forEach(a),p=0;p<Kc.length;p++)m=Kc[p],m.blockedOn===r&&(m.blockedOn=null);for(;0<Kc.length&&(p=Kc[0],p.blockedOn===null);)fb(p),p.blockedOn===null&&Kc.shift()}function tf(r,a){var p={};return p[r.toLowerCase()]=a.toLowerCase(),p["Webkit"+r]="webkit"+a,p["Moz"+r]="moz"+a,p}var fu={animationend:tf("Animation","AnimationEnd"),animationiteration:tf("Animation","AnimationIteration"),animationstart:tf("Animation","AnimationStart"),transitionend:tf("Transition","TransitionEnd")},Rm={},D_={};ha&&(D_=document.createElement("div").style,"AnimationEvent"in window||(delete fu.animationend.animation,delete fu.animationiteration.animation,delete fu.animationstart.animation),"TransitionEvent"in window||delete fu.transitionend.transition);function rf(r){if(Rm[r])return Rm[r];if(!fu[r])return r;var a=fu[r],p;for(p in a)if(a.hasOwnProperty(p)&&p in D_)return Rm[r]=a[p];return r}var L_=rf("animationend"),R_=rf("animationiteration"),O_=rf("animationstart"),F_=rf("transitionend"),B_=new Map,Om=new Map,mb=["abort","abort",L_,"animationEnd",R_,"animationIteration",O_,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",F_,"transitionEnd","waiting","waiting"];function Fm(r,a){for(var p=0;p<r.length;p+=2){var m=r[p],g=r[p+1];g="on"+(g[0].toUpperCase()+g.slice(1)),Om.set(m,a),B_.set(m,g),Ws(g,[m])}}var yb=xn.unstable_now;yb();var gr=8;function du(r){if((1&r)!=0)return gr=15,1;if((2&r)!=0)return gr=14,2;if((4&r)!=0)return gr=13,4;var a=24&r;return a!==0?(gr=12,a):(r&32)!=0?(gr=11,32):(a=192&r,a!==0?(gr=10,a):(r&256)!=0?(gr=9,256):(a=3584&r,a!==0?(gr=8,a):(r&4096)!=0?(gr=7,4096):(a=4186112&r,a!==0?(gr=6,a):(a=62914560&r,a!==0?(gr=5,a):r&67108864?(gr=4,67108864):(r&134217728)!=0?(gr=3,134217728):(a=805306368&r,a!==0?(gr=2,a):(1073741824&r)!=0?(gr=1,1073741824):(gr=8,r))))))}function vb(r){switch(r){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function gb(r){switch(r){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(qe(358,r))}}function Yc(r,a){var p=r.pendingLanes;if(p===0)return gr=0;var m=0,g=0,S=r.expiredLanes,u=r.suspendedLanes,z=r.pingedLanes;if(S!==0)m=S,g=gr=15;else if(S=p&134217727,S!==0){var M=S&~u;M!==0?(m=du(M),g=gr):(z&=S,z!==0&&(m=du(z),g=gr))}else S=p&~u,S!==0?(m=du(S),g=gr):z!==0&&(m=du(z),g=gr);if(m===0)return 0;if(m=31-Wa(m),m=p&((0>m?0:1<<m)<<1)-1,a!==0&&a!==m&&(a&u)==0){if(du(a),g<=gr)return a;gr=g}if(a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=m;0<a;)p=31-Wa(a),g=1<<p,m|=r[p],a&=~g;return m}function U_(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function nf(r,a){switch(r){case 15:return 1;case 14:return 2;case 12:return r=mu(24&~a),r===0?nf(10,a):r;case 10:return r=mu(192&~a),r===0?nf(8,a):r;case 8:return r=mu(3584&~a),r===0&&(r=mu(4186112&~a),r===0&&(r=512)),r;case 2:return a=mu(805306368&~a),a===0&&(a=268435456),a}throw Error(qe(358,r))}function mu(r){return r&-r}function Bm(r){for(var a=[],p=0;31>p;p++)a.push(r);return a}function of(r,a,p){r.pendingLanes|=a;var m=a-1;r.suspendedLanes&=m,r.pingedLanes&=m,r=r.eventTimes,a=31-Wa(a),r[a]=p}var Wa=Math.clz32?Math.clz32:wb,_b=Math.log,xb=Math.LN2;function wb(r){return r===0?32:31-(_b(r)/xb|0)|0}var bb=xn.unstable_UserBlockingPriority,Sb=xn.unstable_runWithPriority,af=!0;function Eb(r,a,p,m){Ks||Pm();var g=Um,S=Ks;Ks=!0;try{x_(g,r,a,p,m)}finally{(Ks=S)||km()}}function Tb(r,a,p,m){Sb(bb,Um.bind(null,r,a,p,m))}function Um(r,a,p,m){if(af){var g;if((g=(a&4)==0)&&0<Ao.length&&-1<k_.indexOf(r))r=Lm(null,r,a,p,m),Ao.push(r);else{var S=Nm(r,a,p,m);if(S===null)g&&A_(r,m);else{if(g){if(-1<k_.indexOf(r)){r=Lm(S,r,a,p,m),Ao.push(r);return}if(hb(S,r,a,p,m))return;A_(r,m)}m0(r,a,m,null,p)}}}}function Nm(r,a,p,m){var g=Em(m);if(g=Qs(g),g!==null){var S=$s(g);if(S===null)g=null;else{var u=S.tag;if(u===13){if(g=b_(S),g!==null)return g;g=null}else if(u===3){if(S.stateNode.hydrate)return S.tag===3?S.stateNode.containerInfo:null;g=null}else S!==g&&(g=null)}}return m0(r,a,m,g,p),null}var Xa=null,Vm=null,sf=null;function N_(){if(sf)return sf;var r,a=Vm,p=a.length,m,g="value"in Xa?Xa.value:Xa.textContent,S=g.length;for(r=0;r<p&&a[r]===g[r];r++);var u=p-r;for(m=1;m<=u&&a[p-m]===g[S-m];m++);return sf=g.slice(r,1<m?1-m:void 0)}function lf(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function uf(){return!0}function V_(){return!1}function Ai(r){function a(p,m,g,S,u){this._reactName=p,this._targetInst=g,this.type=m,this.nativeEvent=S,this.target=u,this.currentTarget=null;for(var z in r)r.hasOwnProperty(z)&&(p=r[z],this[z]=p?p(S):S[z]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?uf:V_,this.isPropagationStopped=V_,this}return zr(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=uf)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=uf)},persist:function(){},isPersistent:uf}),a}var yu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jm=Ai(yu),Jc=zr({},yu,{view:0,detail:0}),Ib=Ai(Jc),qm,Zm,ep,cf=zr({},Jc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wm,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ep&&(ep&&r.type==="mousemove"?(qm=r.screenX-ep.screenX,Zm=r.screenY-ep.screenY):Zm=qm=0,ep=r),qm)},movementY:function(r){return"movementY"in r?r.movementY:Zm}}),j_=Ai(cf),Pb=zr({},cf,{dataTransfer:0}),Cb=Ai(Pb),kb=zr({},Jc,{relatedTarget:0}),Gm=Ai(kb),Ab=zr({},yu,{animationName:0,elapsedTime:0,pseudoElement:0}),zb=Ai(Ab),Mb=zr({},yu,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Db=Ai(Mb),Lb=zr({},yu,{data:0}),q_=Ai(Lb),Rb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ob={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bb(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Fb[r])?!!a[r]:!1}function Wm(){return Bb}var Ub=zr({},Jc,{key:function(r){if(r.key){var a=Rb[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=lf(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ob[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wm,charCode:function(r){return r.type==="keypress"?lf(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?lf(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Nb=Ai(Ub),Vb=zr({},cf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z_=Ai(Vb),jb=zr({},Jc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wm}),qb=Ai(jb),Zb=zr({},yu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gb=Ai(Zb),Wb=zr({},cf,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Xb=Ai(Wb),Hb=[9,13,27,32],Xm=ha&&"CompositionEvent"in window,tp=null;ha&&"documentMode"in document&&(tp=document.documentMode);var Kb=ha&&"TextEvent"in window&&!tp,G_=ha&&(!Xm||tp&&8<tp&&11>=tp),W_=String.fromCharCode(32),X_=!1;function H_(r,a){switch(r){case"keyup":return Hb.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K_(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var vu=!1;function $b(r,a){switch(r){case"compositionend":return K_(a);case"keypress":return a.which!==32?null:(X_=!0,W_);case"textInput":return r=a.data,r===W_&&X_?null:r;default:return null}}function Qb(r,a){if(vu)return r==="compositionend"||!Xm&&H_(r,a)?(r=N_(),sf=Vm=Xa=null,vu=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return G_&&a.locale!=="ko"?null:a.data;default:return null}}var Yb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $_(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Yb[r.type]:a==="textarea"}function Q_(r,a,p,m){g_(m),a=hf(a,"onChange"),0<a.length&&(p=new jm("onChange","change",null,p,m),r.push({event:p,listeners:a}))}var rp=null,np=null;function Jb(r){c0(r,0)}function pf(r){var a=bu(r);if(a_(a))return r}function e2(r,a){if(r==="change")return a}var Y_=!1;if(ha){var Hm;if(ha){var Km="oninput"in document;if(!Km){var J_=document.createElement("div");J_.setAttribute("oninput","return;"),Km=typeof J_.oninput=="function"}Hm=Km}else Hm=!1;Y_=Hm&&(!document.documentMode||9<document.documentMode)}function e0(){rp&&(rp.detachEvent("onpropertychange",t0),np=rp=null)}function t0(r){if(r.propertyName==="value"&&pf(np)){var a=[];if(Q_(a,np,r,Em(r)),r=Jb,Ks)r(a);else{Ks=!0;try{Im(r,a)}finally{Ks=!1,km()}}}}function t2(r,a,p){r==="focusin"?(e0(),rp=a,np=p,rp.attachEvent("onpropertychange",t0)):r==="focusout"&&e0()}function r2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pf(np)}function n2(r,a){if(r==="click")return pf(a)}function i2(r,a){if(r==="input"||r==="change")return pf(a)}function o2(r,a){return r===a&&(r!==0||1/r==1/a)||r!==r&&a!==a}var Vi=typeof Object.is=="function"?Object.is:o2,a2=Object.prototype.hasOwnProperty;function ip(r,a){if(Vi(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var p=Object.keys(r),m=Object.keys(a);if(p.length!==m.length)return!1;for(m=0;m<p.length;m++)if(!a2.call(a,p[m])||!Vi(r[p[m]],a[p[m]]))return!1;return!0}function r0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function n0(r,a){var p=r0(r);r=0;for(var m;p;){if(p.nodeType===3){if(m=r+p.textContent.length,r<=a&&m>=a)return{node:p,offset:a-r};r=m}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=r0(p)}}function i0(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?i0(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function o0(){for(var r=window,a=$h();a instanceof r.HTMLIFrameElement;){try{var p=typeof a.contentWindow.location.href=="string"}catch{p=!1}if(p)r=a.contentWindow;else break;a=$h(r.document)}return a}function $m(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var s2=ha&&"documentMode"in document&&11>=document.documentMode,gu=null,Qm=null,op=null,Ym=!1;function a0(r,a,p){var m=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Ym||gu==null||gu!==$h(m)||(m=gu,"selectionStart"in m&&$m(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),op&&ip(op,m)||(op=m,m=hf(Qm,"onSelect"),0<m.length&&(a=new jm("onSelect","select",null,a,p),r.push({event:a,listeners:m}),a.target=gu)))}Fm("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Fm("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Fm(mb,2);for(var s0="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Jm=0;Jm<s0.length;Jm++)Om.set(s0[Jm],0);lu("onMouseEnter",["mouseout","mouseover"]);lu("onMouseLeave",["mouseout","mouseover"]);lu("onPointerEnter",["pointerout","pointerover"]);lu("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ap="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ap));function u0(r,a,p){var m=r.type||"unknown-event";r.currentTarget=p,cb(m,a,void 0,r),r.currentTarget=null}function c0(r,a){a=(a&4)!=0;for(var p=0;p<r.length;p++){var m=r[p],g=m.event;m=m.listeners;e:{var S=void 0;if(a)for(var u=m.length-1;0<=u;u--){var z=m[u],M=z.instance,K=z.currentTarget;if(z=z.listener,M!==S&&g.isPropagationStopped())break e;u0(g,z,K),S=M}else for(u=0;u<m.length;u++){if(z=m[u],M=z.instance,K=z.currentTarget,z=z.listener,M!==S&&g.isPropagationStopped())break e;u0(g,z,K),S=M}}}if(Jh)throw r=zm,Jh=!1,zm=null,r}function Ir(r,a){var p=w0(a),m=r+"__bubble";p.has(m)||(d0(a,r,2,!1),p.add(m))}var p0="_reactListening"+Math.random().toString(36).slice(2);function h0(r){r[p0]||(r[p0]=!0,Jg.forEach(function(a){l0.has(a)||f0(a,!1,r,null),f0(a,!0,r,null)}))}function f0(r,a,p,m){var g=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,S=p;if(r==="selectionchange"&&p.nodeType!==9&&(S=p.ownerDocument),m!==null&&!a&&l0.has(r)){if(r!=="scroll")return;g|=2,S=m}var u=w0(S),z=r+"__"+(a?"capture":"bubble");u.has(z)||(a&&(g|=4),d0(S,r,g,a),u.add(z))}function d0(r,a,p,m){var g=Om.get(a);switch(g===void 0?2:g){case 0:g=Eb;break;case 1:g=Tb;break;default:g=Um}p=g.bind(null,a,p,r),g=void 0,!Am||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),m?g!==void 0?r.addEventListener(a,p,{capture:!0,passive:g}):r.addEventListener(a,p,!0):g!==void 0?r.addEventListener(a,p,{passive:g}):r.addEventListener(a,p,!1)}function m0(r,a,p,m,g){var S=m;if((a&1)==0&&(a&2)==0&&m!==null)e:for(;;){if(m===null)return;var u=m.tag;if(u===3||u===4){var z=m.stateNode.containerInfo;if(z===g||z.nodeType===8&&z.parentNode===g)break;if(u===4)for(u=m.return;u!==null;){var M=u.tag;if((M===3||M===4)&&(M=u.stateNode.containerInfo,M===g||M.nodeType===8&&M.parentNode===g))return;u=u.return}for(;z!==null;){if(u=Qs(z),u===null)return;if(M=u.tag,M===5||M===6){m=S=u;continue e}z=z.parentNode}}m=m.return}ab(function(){var K=S,le=Em(p),Ce=[];e:{var ee=B_.get(r);if(ee!==void 0){var Se=jm,Oe=r;switch(r){case"keypress":if(lf(p)===0)break e;case"keydown":case"keyup":Se=Nb;break;case"focusin":Oe="focus",Se=Gm;break;case"focusout":Oe="blur",Se=Gm;break;case"beforeblur":case"afterblur":Se=Gm;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=j_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=Cb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=qb;break;case L_:case R_:case O_:Se=zb;break;case F_:Se=Gb;break;case"scroll":Se=Ib;break;case"wheel":Se=Xb;break;case"copy":case"cut":case"paste":Se=Db;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Z_}var Ze=(a&4)!=0,se=!Ze&&r==="scroll",ne=Ze?ee!==null?ee+"Capture":null:ee;Ze=[];for(var oe=K,_e;oe!==null;){_e=oe;var we=_e.stateNode;if(_e.tag===5&&we!==null&&(_e=we,ne!==null&&(we=Zc(oe,ne),we!=null&&Ze.push(sp(oe,we,_e)))),se)break;oe=oe.return}0<Ze.length&&(ee=new Se(ee,Oe,null,p,le),Ce.push({event:ee,listeners:Ze}))}}if((a&7)==0){e:{if(ee=r==="mouseover"||r==="pointerover",Se=r==="mouseout"||r==="pointerout",ee&&(a&16)==0&&(Oe=p.relatedTarget||p.fromElement)&&(Qs(Oe)||Oe[wu]))break e;if((Se||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,Se?(Oe=p.relatedTarget||p.toElement,Se=K,Oe=Oe?Qs(Oe):null,Oe!==null&&(se=$s(Oe),Oe!==se||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Se=null,Oe=K),Se!==Oe)){if(Ze=j_,we="onMouseLeave",ne="onMouseEnter",oe="mouse",(r==="pointerout"||r==="pointerover")&&(Ze=Z_,we="onPointerLeave",ne="onPointerEnter",oe="pointer"),se=Se==null?ee:bu(Se),_e=Oe==null?ee:bu(Oe),ee=new Ze(we,oe+"leave",Se,p,le),ee.target=se,ee.relatedTarget=_e,we=null,Qs(le)===K&&(Ze=new Ze(ne,oe+"enter",Oe,p,le),Ze.target=_e,Ze.relatedTarget=se,we=Ze),se=we,Se&&Oe)t:{for(Ze=Se,ne=Oe,oe=0,_e=Ze;_e;_e=_u(_e))oe++;for(_e=0,we=ne;we;we=_u(we))_e++;for(;0<oe-_e;)Ze=_u(Ze),oe--;for(;0<_e-oe;)ne=_u(ne),_e--;for(;oe--;){if(Ze===ne||ne!==null&&Ze===ne.alternate)break t;Ze=_u(Ze),ne=_u(ne)}Ze=null}else Ze=null;Se!==null&&y0(Ce,ee,Se,Ze,!1),Oe!==null&&se!==null&&y0(Ce,se,Oe,Ze,!0)}}e:{if(ee=K?bu(K):window,Se=ee.nodeName&&ee.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ee.type==="file")var ot=e2;else if($_(ee))if(Y_)ot=i2;else{ot=r2;var Le=t2}else(Se=ee.nodeName)&&Se.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ot=n2);if(ot&&(ot=ot(r,K))){Q_(Ce,ot,p,le);break e}Le&&Le(r,ee,K),r==="focusout"&&(Le=ee._wrapperState)&&Le.controlled&&ee.type==="number"&&vm(ee,"number",ee.value)}switch(Le=K?bu(K):window,r){case"focusin":($_(Le)||Le.contentEditable==="true")&&(gu=Le,Qm=K,op=null);break;case"focusout":op=Qm=gu=null;break;case"mousedown":Ym=!0;break;case"contextmenu":case"mouseup":case"dragend":Ym=!1,a0(Ce,p,le);break;case"selectionchange":if(s2)break;case"keydown":case"keyup":a0(Ce,p,le)}var ut;if(Xm)e:{switch(r){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else vu?H_(r,p)&&(mt="onCompositionEnd"):r==="keydown"&&p.keyCode===229&&(mt="onCompositionStart");mt&&(G_&&p.locale!=="ko"&&(vu||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&vu&&(ut=N_()):(Xa=le,Vm="value"in Xa?Xa.value:Xa.textContent,vu=!0)),Le=hf(K,mt),0<Le.length&&(mt=new q_(mt,r,null,p,le),Ce.push({event:mt,listeners:Le}),ut?mt.data=ut:(ut=K_(p),ut!==null&&(mt.data=ut)))),(ut=Kb?$b(r,p):Qb(r,p))&&(K=hf(K,"onBeforeInput"),0<K.length&&(le=new q_("onBeforeInput","beforeinput",null,p,le),Ce.push({event:le,listeners:K}),le.data=ut))}c0(Ce,a)})}function sp(r,a,p){return{instance:r,listener:a,currentTarget:p}}function hf(r,a){for(var p=a+"Capture",m=[];r!==null;){var g=r,S=g.stateNode;g.tag===5&&S!==null&&(g=S,S=Zc(r,p),S!=null&&m.unshift(sp(r,S,g)),S=Zc(r,a),S!=null&&m.push(sp(r,S,g))),r=r.return}return m}function _u(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function y0(r,a,p,m,g){for(var S=a._reactName,u=[];p!==null&&p!==m;){var z=p,M=z.alternate,K=z.stateNode;if(M!==null&&M===m)break;z.tag===5&&K!==null&&(z=K,g?(M=Zc(p,S),M!=null&&u.unshift(sp(p,M,z))):g||(M=Zc(p,S),M!=null&&u.push(sp(p,M,z)))),p=p.return}u.length!==0&&r.push({event:a,listeners:u})}function ff(){}var ey=null,ty=null;function v0(r,a){switch(r){case"button":case"input":case"select":case"textarea":return!!a.autoFocus}return!1}function ry(r,a){return r==="textarea"||r==="option"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var g0=typeof setTimeout=="function"?setTimeout:void 0,l2=typeof clearTimeout=="function"?clearTimeout:void 0;function ny(r){r.nodeType===1?r.textContent="":r.nodeType===9&&(r=r.body,r!=null&&(r.textContent=""))}function xu(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break}return r}function _0(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var p=r.data;if(p==="$"||p==="$!"||p==="$?"){if(a===0)return r;a--}else p==="/$"&&a++}r=r.previousSibling}return null}var iy=0;function u2(r){return{$$typeof:cm,toString:r,valueOf:r}}var df=Math.random().toString(36).slice(2),Ha="__reactFiber$"+df,mf="__reactProps$"+df,wu="__reactContainer$"+df,x0="__reactEvents$"+df;function Qs(r){var a=r[Ha];if(a)return a;for(var p=r.parentNode;p;){if(a=p[wu]||p[Ha]){if(p=a.alternate,a.child!==null||p!==null&&p.child!==null)for(r=_0(r);r!==null;){if(p=r[Ha])return p;r=_0(r)}return a}r=p,p=r.parentNode}return null}function lp(r){return r=r[Ha]||r[wu],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function bu(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(qe(33))}function yf(r){return r[mf]||null}function w0(r){var a=r[x0];return a===void 0&&(a=r[x0]=new Set),a}var oy=[],Su=-1;function Ka(r){return{current:r}}function Pr(r){0>Su||(r.current=oy[Su],oy[Su]=null,Su--)}function Vr(r,a){Su++,oy[Su]=r.current,r.current=a}var $a={},qn=Ka($a),mi=Ka(!1),Ys=$a;function Eu(r,a){var p=r.type.contextTypes;if(!p)return $a;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var g={},S;for(S in p)g[S]=a[S];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=g),g}function yi(r){return r=r.childContextTypes,r!=null}function vf(){Pr(mi),Pr(qn)}function b0(r,a,p){if(qn.current!==$a)throw Error(qe(168));Vr(qn,a),Vr(mi,p)}function S0(r,a,p){var m=r.stateNode;if(r=a.childContextTypes,typeof m.getChildContext!="function")return p;m=m.getChildContext();for(var g in m)if(!(g in r))throw Error(qe(108,uu(a)||"Unknown",g));return zr({},p,m)}function gf(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||$a,Ys=qn.current,Vr(qn,r),Vr(mi,mi.current),!0}function E0(r,a,p){var m=r.stateNode;if(!m)throw Error(qe(169));p?(r=S0(r,a,Ys),m.__reactInternalMemoizedMergedChildContext=r,Pr(mi),Pr(qn),Vr(qn,r)):Pr(mi),Vr(mi,p)}var ay=null,Js=null,c2=xn.unstable_runWithPriority,sy=xn.unstable_scheduleCallback,ly=xn.unstable_cancelCallback,p2=xn.unstable_shouldYield,T0=xn.unstable_requestPaint,uy=xn.unstable_now,h2=xn.unstable_getCurrentPriorityLevel,_f=xn.unstable_ImmediatePriority,I0=xn.unstable_UserBlockingPriority,P0=xn.unstable_NormalPriority,C0=xn.unstable_LowPriority,k0=xn.unstable_IdlePriority,cy={},f2=T0!==void 0?T0:function(){},fa=null,xf=null,py=!1,A0=uy(),Zn=1e4>A0?uy:function(){return uy()-A0};function Tu(){switch(h2()){case _f:return 99;case I0:return 98;case P0:return 97;case C0:return 96;case k0:return 95;default:throw Error(qe(332))}}function z0(r){switch(r){case 99:return _f;case 98:return I0;case 97:return P0;case 96:return C0;case 95:return k0;default:throw Error(qe(332))}}function el(r,a){return r=z0(r),c2(r,a)}function up(r,a,p){return r=z0(r),sy(r,a,p)}function zo(){if(xf!==null){var r=xf;xf=null,ly(r)}M0()}function M0(){if(!py&&fa!==null){py=!0;var r=0;try{var a=fa;el(99,function(){for(;r<a.length;r++){var p=a[r];do p=p(!0);while(p!==null)}}),fa=null}catch(p){throw fa!==null&&(fa=fa.slice(r+1)),sy(_f,zo),p}finally{py=!1}}}var d2=Xs.ReactCurrentBatchConfig;function no(r,a){if(r&&r.defaultProps){a=zr({},a),r=r.defaultProps;for(var p in r)a[p]===void 0&&(a[p]=r[p]);return a}return a}var wf=Ka(null),bf=null,Iu=null,Sf=null;function hy(){Sf=Iu=bf=null}function fy(r){var a=wf.current;Pr(wf),r.type._context._currentValue=a}function D0(r,a){for(;r!==null;){var p=r.alternate;if((r.childLanes&a)===a){if(p===null||(p.childLanes&a)===a)break;p.childLanes|=a}else r.childLanes|=a,p!==null&&(p.childLanes|=a);r=r.return}}function Pu(r,a){bf=r,Sf=Iu=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&a)!=0&&(io=!0),r.firstContext=null)}function ji(r,a){if(Sf!==r&&a!==!1&&a!==0)if((typeof a!="number"||a===1073741823)&&(Sf=r,a=1073741823),a={context:r,observedBits:a,next:null},Iu===null){if(bf===null)throw Error(qe(308));Iu=a,bf.dependencies={lanes:0,firstContext:a,responders:null}}else Iu=Iu.next=a;return r._currentValue}var Qa=!1;function dy(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function L0(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ya(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function Ja(r,a){if(r=r.updateQueue,r!==null){r=r.shared;var p=r.pending;p===null?a.next=a:(a.next=p.next,p.next=a),r.pending=a}}function R0(r,a){var p=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,p===m)){var g=null,S=null;if(p=p.firstBaseUpdate,p!==null){do{var u={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};S===null?g=S=u:S=S.next=u,p=p.next}while(p!==null);S===null?g=S=a:S=S.next=a}else g=S=a;p={baseState:m.baseState,firstBaseUpdate:g,lastBaseUpdate:S,shared:m.shared,effects:m.effects},r.updateQueue=p;return}r=p.lastBaseUpdate,r===null?p.firstBaseUpdate=a:r.next=a,p.lastBaseUpdate=a}function cp(r,a,p,m){var g=r.updateQueue;Qa=!1;var S=g.firstBaseUpdate,u=g.lastBaseUpdate,z=g.shared.pending;if(z!==null){g.shared.pending=null;var M=z,K=M.next;M.next=null,u===null?S=K:u.next=K,u=M;var le=r.alternate;if(le!==null){le=le.updateQueue;var Ce=le.lastBaseUpdate;Ce!==u&&(Ce===null?le.firstBaseUpdate=K:Ce.next=K,le.lastBaseUpdate=M)}}if(S!==null){Ce=g.baseState,u=0,le=K=M=null;do{z=S.lane;var ee=S.eventTime;if((m&z)===z){le!==null&&(le=le.next={eventTime:ee,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var Se=r,Oe=S;switch(z=a,ee=p,Oe.tag){case 1:if(Se=Oe.payload,typeof Se=="function"){Ce=Se.call(ee,Ce,z);break e}Ce=Se;break e;case 3:Se.flags=Se.flags&-4097|64;case 0:if(Se=Oe.payload,z=typeof Se=="function"?Se.call(ee,Ce,z):Se,z==null)break e;Ce=zr({},Ce,z);break e;case 2:Qa=!0}}S.callback!==null&&(r.flags|=32,z=g.effects,z===null?g.effects=[S]:z.push(S))}else ee={eventTime:ee,lane:z,tag:S.tag,payload:S.payload,callback:S.callback,next:null},le===null?(K=le=ee,M=Ce):le=le.next=ee,u|=z;if(S=S.next,S===null){if(z=g.shared.pending,z===null)break;S=z.next,z.next=null,g.lastBaseUpdate=z,g.shared.pending=null}}while(1);le===null&&(M=Ce),g.baseState=M,g.firstBaseUpdate=K,g.lastBaseUpdate=le,bp|=u,r.lanes=u,r.memoizedState=Ce}}function O0(r,a,p){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var m=r[a],g=m.callback;if(g!==null){if(m.callback=null,m=p,typeof g!="function")throw Error(qe(191,g));g.call(m)}}}var F0=new Zh.Component().refs;function Ef(r,a,p,m){a=r.memoizedState,p=p(m,a),p=p==null?a:zr({},a,p),r.memoizedState=p,r.lanes===0&&(r.updateQueue.baseState=p)}var Tf={isMounted:function(r){return(r=r._reactInternals)?$s(r)===r:!1},enqueueSetState:function(r,a,p){r=r._reactInternals;var m=zi(),g=rs(r),S=Ya(m,g);S.payload=a,p!=null&&(S.callback=p),Ja(r,S),ns(r,g,m)},enqueueReplaceState:function(r,a,p){r=r._reactInternals;var m=zi(),g=rs(r),S=Ya(m,g);S.tag=1,S.payload=a,p!=null&&(S.callback=p),Ja(r,S),ns(r,g,m)},enqueueForceUpdate:function(r,a){r=r._reactInternals;var p=zi(),m=rs(r),g=Ya(p,m);g.tag=2,a!=null&&(g.callback=a),Ja(r,g),ns(r,m,p)}};function B0(r,a,p,m,g,S,u){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,S,u):a.prototype&&a.prototype.isPureReactComponent?!ip(p,m)||!ip(g,S):!0}function U0(r,a,p){var m=!1,g=$a,S=a.contextType;return typeof S=="object"&&S!==null?S=ji(S):(g=yi(a)?Ys:qn.current,m=a.contextTypes,S=(m=m!=null)?Eu(r,g):$a),a=new a(p,S),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Tf,r.stateNode=a,a._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=S),a}function N0(r,a,p,m){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(p,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(p,m),a.state!==r&&Tf.enqueueReplaceState(a,a.state,null)}function my(r,a,p,m){var g=r.stateNode;g.props=p,g.state=r.memoizedState,g.refs=F0,dy(r);var S=a.contextType;typeof S=="object"&&S!==null?g.context=ji(S):(S=yi(a)?Ys:qn.current,g.context=Eu(r,S)),cp(r,p,g,m),g.state=r.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Ef(r,a,S,p),g.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&Tf.enqueueReplaceState(g,g.state,null),cp(r,p,g,m),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4)}var If=Array.isArray;function pp(r,a,p){if(r=p.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(qe(309));var m=p.stateNode}if(!m)throw Error(qe(147,r));var g=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===g?a.ref:(a=function(S){var u=m.refs;u===F0&&(u=m.refs={}),S===null?delete u[g]:u[g]=S},a._stringRef=g,a)}if(typeof r!="string")throw Error(qe(284));if(!p._owner)throw Error(qe(290,r))}return r}function Pf(r,a){if(r.type!=="textarea")throw Error(qe(31,Object.prototype.toString.call(a)==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":a))}function V0(r){function a(se,ne){if(r){var oe=se.lastEffect;oe!==null?(oe.nextEffect=ne,se.lastEffect=ne):se.firstEffect=se.lastEffect=ne,ne.nextEffect=null,ne.flags=8}}function p(se,ne){if(!r)return null;for(;ne!==null;)a(se,ne),ne=ne.sibling;return null}function m(se,ne){for(se=new Map;ne!==null;)ne.key!==null?se.set(ne.key,ne):se.set(ne.index,ne),ne=ne.sibling;return se}function g(se,ne){return se=as(se,ne),se.index=0,se.sibling=null,se}function S(se,ne,oe){return se.index=oe,r?(oe=se.alternate,oe!==null?(oe=oe.index,oe<ne?(se.flags=2,ne):oe):(se.flags=2,ne)):ne}function u(se){return r&&se.alternate===null&&(se.flags=2),se}function z(se,ne,oe,_e){return ne===null||ne.tag!==6?(ne=Qy(oe,se.mode,_e),ne.return=se,ne):(ne=g(ne,oe),ne.return=se,ne)}function M(se,ne,oe,_e){return ne!==null&&ne.elementType===oe.type?(_e=g(ne,oe.props),_e.ref=pp(se,ne,oe),_e.return=se,_e):(_e=Gf(oe.type,oe.key,oe.props,null,se.mode,_e),_e.ref=pp(se,ne,oe),_e.return=se,_e)}function K(se,ne,oe,_e){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==oe.containerInfo||ne.stateNode.implementation!==oe.implementation?(ne=Yy(oe,se.mode,_e),ne.return=se,ne):(ne=g(ne,oe.children||[]),ne.return=se,ne)}function le(se,ne,oe,_e,we){return ne===null||ne.tag!==7?(ne=Ru(oe,se.mode,_e,we),ne.return=se,ne):(ne=g(ne,oe),ne.return=se,ne)}function Ce(se,ne,oe){if(typeof ne=="string"||typeof ne=="number")return ne=Qy(""+ne,se.mode,oe),ne.return=se,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Fc:return oe=Gf(ne.type,ne.key,ne.props,null,se.mode,oe),oe.ref=pp(se,null,ne),oe.return=se,oe;case Hs:return ne=Yy(ne,se.mode,oe),ne.return=se,ne}if(If(ne)||Nc(ne))return ne=Ru(ne,se.mode,oe,null),ne.return=se,ne;Pf(se,ne)}return null}function ee(se,ne,oe,_e){var we=ne!==null?ne.key:null;if(typeof oe=="string"||typeof oe=="number")return we!==null?null:z(se,ne,""+oe,_e);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Fc:return oe.key===we?oe.type===Va?le(se,ne,oe.props.children,_e,we):M(se,ne,oe,_e):null;case Hs:return oe.key===we?K(se,ne,oe,_e):null}if(If(oe)||Nc(oe))return we!==null?null:le(se,ne,oe,_e,null);Pf(se,oe)}return null}function Se(se,ne,oe,_e,we){if(typeof _e=="string"||typeof _e=="number")return se=se.get(oe)||null,z(ne,se,""+_e,we);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case Fc:return se=se.get(_e.key===null?oe:_e.key)||null,_e.type===Va?le(ne,se,_e.props.children,we,_e.key):M(ne,se,_e,we);case Hs:return se=se.get(_e.key===null?oe:_e.key)||null,K(ne,se,_e,we)}if(If(_e)||Nc(_e))return se=se.get(oe)||null,le(ne,se,_e,we,null);Pf(ne,_e)}return null}function Oe(se,ne,oe,_e){for(var we=null,ot=null,Le=ne,ut=ne=0,mt=null;Le!==null&&ut<oe.length;ut++){Le.index>ut?(mt=Le,Le=null):mt=Le.sibling;var Qe=ee(se,Le,oe[ut],_e);if(Qe===null){Le===null&&(Le=mt);break}r&&Le&&Qe.alternate===null&&a(se,Le),ne=S(Qe,ne,ut),ot===null?we=Qe:ot.sibling=Qe,ot=Qe,Le=mt}if(ut===oe.length)return p(se,Le),we;if(Le===null){for(;ut<oe.length;ut++)Le=Ce(se,oe[ut],_e),Le!==null&&(ne=S(Le,ne,ut),ot===null?we=Le:ot.sibling=Le,ot=Le);return we}for(Le=m(se,Le);ut<oe.length;ut++)mt=Se(Le,se,ut,oe[ut],_e),mt!==null&&(r&&mt.alternate!==null&&Le.delete(mt.key===null?ut:mt.key),ne=S(mt,ne,ut),ot===null?we=mt:ot.sibling=mt,ot=mt);return r&&Le.forEach(function(Qt){return a(se,Qt)}),we}function Ze(se,ne,oe,_e){var we=Nc(oe);if(typeof we!="function")throw Error(qe(150));if(oe=we.call(oe),oe==null)throw Error(qe(151));for(var ot=we=null,Le=ne,ut=ne=0,mt=null,Qe=oe.next();Le!==null&&!Qe.done;ut++,Qe=oe.next()){Le.index>ut?(mt=Le,Le=null):mt=Le.sibling;var Qt=ee(se,Le,Qe.value,_e);if(Qt===null){Le===null&&(Le=mt);break}r&&Le&&Qt.alternate===null&&a(se,Le),ne=S(Qt,ne,ut),ot===null?we=Qt:ot.sibling=Qt,ot=Qt,Le=mt}if(Qe.done)return p(se,Le),we;if(Le===null){for(;!Qe.done;ut++,Qe=oe.next())Qe=Ce(se,Qe.value,_e),Qe!==null&&(ne=S(Qe,ne,ut),ot===null?we=Qe:ot.sibling=Qe,ot=Qe);return we}for(Le=m(se,Le);!Qe.done;ut++,Qe=oe.next())Qe=Se(Le,se,ut,Qe.value,_e),Qe!==null&&(r&&Qe.alternate!==null&&Le.delete(Qe.key===null?ut:Qe.key),ne=S(Qe,ne,ut),ot===null?we=Qe:ot.sibling=Qe,ot=Qe);return r&&Le.forEach(function(Jr){return a(se,Jr)}),we}return function(se,ne,oe,_e){var we=typeof oe=="object"&&oe!==null&&oe.type===Va&&oe.key===null;we&&(oe=oe.props.children);var ot=typeof oe=="object"&&oe!==null;if(ot)switch(oe.$$typeof){case Fc:e:{for(ot=oe.key,we=ne;we!==null;){if(we.key===ot){switch(we.tag){case 7:if(oe.type===Va){p(se,we.sibling),ne=g(we,oe.props.children),ne.return=se,se=ne;break e}break;default:if(we.elementType===oe.type){p(se,we.sibling),ne=g(we,oe.props),ne.ref=pp(se,we,oe),ne.return=se,se=ne;break e}}p(se,we);break}else a(se,we);we=we.sibling}oe.type===Va?(ne=Ru(oe.props.children,se.mode,_e,oe.key),ne.return=se,se=ne):(_e=Gf(oe.type,oe.key,oe.props,null,se.mode,_e),_e.ref=pp(se,ne,oe),_e.return=se,se=_e)}return u(se);case Hs:e:{for(we=oe.key;ne!==null;){if(ne.key===we)if(ne.tag===4&&ne.stateNode.containerInfo===oe.containerInfo&&ne.stateNode.implementation===oe.implementation){p(se,ne.sibling),ne=g(ne,oe.children||[]),ne.return=se,se=ne;break e}else{p(se,ne);break}else a(se,ne);ne=ne.sibling}ne=Yy(oe,se.mode,_e),ne.return=se,se=ne}return u(se)}if(typeof oe=="string"||typeof oe=="number")return oe=""+oe,ne!==null&&ne.tag===6?(p(se,ne.sibling),ne=g(ne,oe),ne.return=se,se=ne):(p(se,ne),ne=Qy(oe,se.mode,_e),ne.return=se,se=ne),u(se);if(If(oe))return Oe(se,ne,oe,_e);if(Nc(oe))return Ze(se,ne,oe,_e);if(ot&&Pf(se,oe),typeof oe=="undefined"&&!we)switch(se.tag){case 1:case 22:case 0:case 11:case 15:throw Error(qe(152,uu(se.type)||"Component"))}return p(se,ne)}}var Cf=V0(!0),j0=V0(!1),hp={},Mo=Ka(hp),fp=Ka(hp),dp=Ka(hp);function tl(r){if(r===hp)throw Error(qe(174));return r}function yy(r,a){switch(Vr(dp,a),Vr(fp,r),Vr(Mo,hp),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:wm(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=wm(a,r)}Pr(Mo),Vr(Mo,a)}function Cu(){Pr(Mo),Pr(fp),Pr(dp)}function q0(r){tl(dp.current);var a=tl(Mo.current),p=wm(a,r.type);a!==p&&(Vr(fp,r),Vr(Mo,p))}function vy(r){fp.current===r&&(Pr(Mo),Pr(fp))}var jr=Ka(0);function kf(r){for(var a=r;a!==null;){if(a.tag===13){var p=a.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&64)!=0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var da=null,es=null,Do=!1;function Z0(r,a){var p=Gi(5,null,null,0);p.elementType="DELETED",p.type="DELETED",p.stateNode=a,p.return=r,p.flags=8,r.lastEffect!==null?(r.lastEffect.nextEffect=p,r.lastEffect=p):r.firstEffect=r.lastEffect=p}function G0(r,a){switch(r.tag){case 5:var p=r.type;return a=a.nodeType!==1||p.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,!0):!1;case 13:return!1;default:return!1}}function gy(r){if(Do){var a=es;if(a){var p=a;if(!G0(r,a)){if(a=xu(p.nextSibling),!a||!G0(r,a)){r.flags=r.flags&-1025|2,Do=!1,da=r;return}Z0(da,p)}da=r,es=xu(a.firstChild)}else r.flags=r.flags&-1025|2,Do=!1,da=r}}function W0(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;da=r}function Af(r){if(r!==da)return!1;if(!Do)return W0(r),Do=!0,!1;var a=r.type;if(r.tag!==5||a!=="head"&&a!=="body"&&!ry(a,r.memoizedProps))for(a=es;a;)Z0(r,a),a=xu(a.nextSibling);if(W0(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(qe(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var p=r.data;if(p==="/$"){if(a===0){es=xu(r.nextSibling);break e}a--}else p!=="$"&&p!=="$!"&&p!=="$?"||a++}r=r.nextSibling}es=null}}else es=da?xu(r.stateNode.nextSibling):null;return!0}function _y(){es=da=null,Do=!1}var ku=[];function xy(){for(var r=0;r<ku.length;r++)ku[r]._workInProgressVersionPrimary=null;ku.length=0}var mp=Xs.ReactCurrentDispatcher,qi=Xs.ReactCurrentBatchConfig,yp=0,Yr=null,Gn=null,Mn=null,zf=!1,vp=!1;function vi(){throw Error(qe(321))}function wy(r,a){if(a===null)return!1;for(var p=0;p<a.length&&p<r.length;p++)if(!Vi(r[p],a[p]))return!1;return!0}function by(r,a,p,m,g,S){if(yp=S,Yr=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,mp.current=r===null||r.memoizedState===null?y2:v2,r=p(m,g),vp){S=0;do{if(vp=!1,!(25>S))throw Error(qe(301));S+=1,Mn=Gn=null,a.updateQueue=null,mp.current=g2,r=p(m,g)}while(vp)}if(mp.current=Rf,a=Gn!==null&&Gn.next!==null,yp=0,Mn=Gn=Yr=null,zf=!1,a)throw Error(qe(300));return r}function rl(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?Yr.memoizedState=Mn=r:Mn=Mn.next=r,Mn}function nl(){if(Gn===null){var r=Yr.alternate;r=r!==null?r.memoizedState:null}else r=Gn.next;var a=Mn===null?Yr.memoizedState:Mn.next;if(a!==null)Mn=a,Gn=r;else{if(r===null)throw Error(qe(310));Gn=r,r={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},Mn===null?Yr.memoizedState=Mn=r:Mn=Mn.next=r}return Mn}function Lo(r,a){return typeof a=="function"?a(r):a}function gp(r){var a=nl(),p=a.queue;if(p===null)throw Error(qe(311));p.lastRenderedReducer=r;var m=Gn,g=m.baseQueue,S=p.pending;if(S!==null){if(g!==null){var u=g.next;g.next=S.next,S.next=u}m.baseQueue=g=S,p.pending=null}if(g!==null){g=g.next,m=m.baseState;var z=u=S=null,M=g;do{var K=M.lane;if((yp&K)===K)z!==null&&(z=z.next={lane:0,action:M.action,eagerReducer:M.eagerReducer,eagerState:M.eagerState,next:null}),m=M.eagerReducer===r?M.eagerState:r(m,M.action);else{var le={lane:K,action:M.action,eagerReducer:M.eagerReducer,eagerState:M.eagerState,next:null};z===null?(u=z=le,S=m):z=z.next=le,Yr.lanes|=K,bp|=K}M=M.next}while(M!==null&&M!==g);z===null?S=m:z.next=u,Vi(m,a.memoizedState)||(io=!0),a.memoizedState=m,a.baseState=S,a.baseQueue=z,p.lastRenderedState=m}return[a.memoizedState,p.dispatch]}function _p(r){var a=nl(),p=a.queue;if(p===null)throw Error(qe(311));p.lastRenderedReducer=r;var m=p.dispatch,g=p.pending,S=a.memoizedState;if(g!==null){p.pending=null;var u=g=g.next;do S=r(S,u.action),u=u.next;while(u!==g);Vi(S,a.memoizedState)||(io=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),p.lastRenderedState=S}return[S,m]}function X0(r,a,p){var m=a._getVersion;m=m(a._source);var g=a._workInProgressVersionPrimary;if(g!==null?r=g===m:(r=r.mutableReadLanes,(r=(yp&r)===r)&&(a._workInProgressVersionPrimary=m,ku.push(a))),r)return p(a._source);throw ku.push(a),Error(qe(350))}function H0(r,a,p,m){var g=Jn;if(g===null)throw Error(qe(349));var S=a._getVersion,u=S(a._source),z=mp.current,M=z.useState(function(){return X0(g,a,p)}),K=M[1],le=M[0];M=Mn;var Ce=r.memoizedState,ee=Ce.refs,Se=ee.getSnapshot,Oe=Ce.source;Ce=Ce.subscribe;var Ze=Yr;return r.memoizedState={refs:ee,source:a,subscribe:m},z.useEffect(function(){ee.getSnapshot=p,ee.setSnapshot=K;var se=S(a._source);if(!Vi(u,se)){se=p(a._source),Vi(le,se)||(K(se),se=rs(Ze),g.mutableReadLanes|=se&g.pendingLanes),se=g.mutableReadLanes,g.entangledLanes|=se;for(var ne=g.entanglements,oe=se;0<oe;){var _e=31-Wa(oe),we=1<<_e;ne[_e]|=se,oe&=~we}}},[p,a,m]),z.useEffect(function(){return m(a._source,function(){var se=ee.getSnapshot,ne=ee.setSnapshot;try{ne(se(a._source));var oe=rs(Ze);g.mutableReadLanes|=oe&g.pendingLanes}catch(_e){ne(function(){throw _e})}})},[a,m]),Vi(Se,p)&&Vi(Oe,a)&&Vi(Ce,m)||(r={pending:null,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:le},r.dispatch=K=Iy.bind(null,Yr,r),M.queue=r,M.baseQueue=null,le=X0(g,a,p),M.memoizedState=M.baseState=le),le}function K0(r,a,p){var m=nl();return H0(m,r,a,p)}function xp(r){var a=rl();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r=a.queue={pending:null,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:r},r=r.dispatch=Iy.bind(null,Yr,r),[a.memoizedState,r]}function Mf(r,a,p,m){return r={tag:r,create:a,destroy:p,deps:m,next:null},a=Yr.updateQueue,a===null?(a={lastEffect:null},Yr.updateQueue=a,a.lastEffect=r.next=r):(p=a.lastEffect,p===null?a.lastEffect=r.next=r:(m=p.next,p.next=r,r.next=m,a.lastEffect=r)),r}function $0(r){var a=rl();return r={current:r},a.memoizedState=r}function Df(){return nl().memoizedState}function Sy(r,a,p,m){var g=rl();Yr.flags|=r,g.memoizedState=Mf(1|a,p,void 0,m===void 0?null:m)}function Ey(r,a,p,m){var g=nl();m=m===void 0?null:m;var S=void 0;if(Gn!==null){var u=Gn.memoizedState;if(S=u.destroy,m!==null&&wy(m,u.deps)){Mf(a,p,S,m);return}}Yr.flags|=r,g.memoizedState=Mf(1|a,p,S,m)}function Q0(r,a){return Sy(516,4,r,a)}function Lf(r,a){return Ey(516,4,r,a)}function Y0(r,a){return Ey(4,2,r,a)}function J0(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function ex(r,a,p){return p=p!=null?p.concat([r]):null,Ey(4,2,J0.bind(null,a,r),p)}function Ty(){}function tx(r,a){var p=nl();a=a===void 0?null:a;var m=p.memoizedState;return m!==null&&a!==null&&wy(a,m[1])?m[0]:(p.memoizedState=[r,a],r)}function rx(r,a){var p=nl();a=a===void 0?null:a;var m=p.memoizedState;return m!==null&&a!==null&&wy(a,m[1])?m[0]:(r=r(),p.memoizedState=[r,a],r)}function m2(r,a){var p=Tu();el(98>p?98:p,function(){r(!0)}),el(97<p?97:p,function(){var m=qi.transition;qi.transition=1;try{r(!1),a()}finally{qi.transition=m}})}function Iy(r,a,p){var m=zi(),g=rs(r),S={lane:g,action:p,eagerReducer:null,eagerState:null,next:null},u=a.pending;if(u===null?S.next=S:(S.next=u.next,u.next=S),a.pending=S,u=r.alternate,r===Yr||u!==null&&u===Yr)vp=zf=!0;else{if(r.lanes===0&&(u===null||u.lanes===0)&&(u=a.lastRenderedReducer,u!==null))try{var z=a.lastRenderedState,M=u(z,p);if(S.eagerReducer=u,S.eagerState=M,Vi(M,z))return}catch{}finally{}ns(r,g,m)}}var Rf={readContext:ji,useCallback:vi,useContext:vi,useEffect:vi,useImperativeHandle:vi,useLayoutEffect:vi,useMemo:vi,useReducer:vi,useRef:vi,useState:vi,useDebugValue:vi,useDeferredValue:vi,useTransition:vi,useMutableSource:vi,useOpaqueIdentifier:vi,unstable_isNewReconciler:!1},y2={readContext:ji,useCallback:function(r,a){return rl().memoizedState=[r,a===void 0?null:a],r},useContext:ji,useEffect:Q0,useImperativeHandle:function(r,a,p){return p=p!=null?p.concat([r]):null,Sy(4,2,J0.bind(null,a,r),p)},useLayoutEffect:function(r,a){return Sy(4,2,r,a)},useMemo:function(r,a){var p=rl();return a=a===void 0?null:a,r=r(),p.memoizedState=[r,a],r},useReducer:function(r,a,p){var m=rl();return a=p!==void 0?p(a):a,m.memoizedState=m.baseState=a,r=m.queue={pending:null,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},r=r.dispatch=Iy.bind(null,Yr,r),[m.memoizedState,r]},useRef:$0,useState:xp,useDebugValue:Ty,useDeferredValue:function(r){var a=xp(r),p=a[0],m=a[1];return Q0(function(){var g=qi.transition;qi.transition=1;try{m(r)}finally{qi.transition=g}},[r]),p},useTransition:function(){var r=xp(!1),a=r[0];return r=m2.bind(null,r[1]),$0(r),[r,a]},useMutableSource:function(r,a,p){var m=rl();return m.memoizedState={refs:{getSnapshot:a,setSnapshot:null},source:r,subscribe:p},H0(m,r,a,p)},useOpaqueIdentifier:function(){if(Do){var r=!1,a=u2(function(){throw r||(r=!0,p("r:"+(iy++).toString(36))),Error(qe(355))}),p=xp(a)[1];return(Yr.mode&2)==0&&(Yr.flags|=516,Mf(5,function(){p("r:"+(iy++).toString(36))},void 0,null)),a}return a="r:"+(iy++).toString(36),xp(a),a},unstable_isNewReconciler:!1},v2={readContext:ji,useCallback:tx,useContext:ji,useEffect:Lf,useImperativeHandle:ex,useLayoutEffect:Y0,useMemo:rx,useReducer:gp,useRef:Df,useState:function(){return gp(Lo)},useDebugValue:Ty,useDeferredValue:function(r){var a=gp(Lo),p=a[0],m=a[1];return Lf(function(){var g=qi.transition;qi.transition=1;try{m(r)}finally{qi.transition=g}},[r]),p},useTransition:function(){var r=gp(Lo)[0];return[Df().current,r]},useMutableSource:K0,useOpaqueIdentifier:function(){return gp(Lo)[0]},unstable_isNewReconciler:!1},g2={readContext:ji,useCallback:tx,useContext:ji,useEffect:Lf,useImperativeHandle:ex,useLayoutEffect:Y0,useMemo:rx,useReducer:_p,useRef:Df,useState:function(){return _p(Lo)},useDebugValue:Ty,useDeferredValue:function(r){var a=_p(Lo),p=a[0],m=a[1];return Lf(function(){var g=qi.transition;qi.transition=1;try{m(r)}finally{qi.transition=g}},[r]),p},useTransition:function(){var r=_p(Lo)[0];return[Df().current,r]},useMutableSource:K0,useOpaqueIdentifier:function(){return _p(Lo)[0]},unstable_isNewReconciler:!1},_2=Xs.ReactCurrentOwner,io=!1;function gi(r,a,p,m){a.child=r===null?j0(a,null,p,m):Cf(a,r.child,p,m)}function nx(r,a,p,m,g){p=p.render;var S=a.ref;return Pu(a,g),m=by(r,a,p,m,S,g),r!==null&&!io?(a.updateQueue=r.updateQueue,a.flags&=-517,r.lanes&=~g,ma(r,a,g)):(a.flags|=1,gi(r,a,m,g),a.child)}function ix(r,a,p,m,g,S){if(r===null){var u=p.type;return typeof u=="function"&&!Ky(u)&&u.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(a.tag=15,a.type=u,ox(r,a,u,m,g,S)):(r=Gf(p.type,null,m,a,a.mode,S),r.ref=a.ref,r.return=a,a.child=r)}return u=r.child,(g&S)==0&&(g=u.memoizedProps,p=p.compare,p=p!==null?p:ip,p(g,m)&&r.ref===a.ref)?ma(r,a,S):(a.flags|=1,r=as(u,m),r.ref=a.ref,r.return=a,a.child=r)}function ox(r,a,p,m,g,S){if(r!==null&&ip(r.memoizedProps,m)&&r.ref===a.ref)if(io=!1,(S&g)!=0)(r.flags&16384)!=0&&(io=!0);else return a.lanes=r.lanes,ma(r,a,S);return Cy(r,a,p,m,S)}function Py(r,a,p){var m=a.pendingProps,g=m.children,S=r!==null?r.memoizedState:null;if(m.mode==="hidden"||m.mode==="unstable-defer-without-hiding")if((a.mode&4)==0)a.memoizedState={baseLanes:0},Zf(a,p);else if((p&1073741824)!=0)a.memoizedState={baseLanes:0},Zf(a,S!==null?S.baseLanes:p);else return r=S!==null?S.baseLanes|p:p,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r},Zf(a,r),null;else S!==null?(m=S.baseLanes|p,a.memoizedState=null):m=p,Zf(a,m);return gi(r,a,g,p),a.child}function ax(r,a){var p=a.ref;(r===null&&p!==null||r!==null&&r.ref!==p)&&(a.flags|=128)}function Cy(r,a,p,m,g){var S=yi(p)?Ys:qn.current;return S=Eu(a,S),Pu(a,g),p=by(r,a,p,m,S,g),r!==null&&!io?(a.updateQueue=r.updateQueue,a.flags&=-517,r.lanes&=~g,ma(r,a,g)):(a.flags|=1,gi(r,a,p,g),a.child)}function sx(r,a,p,m,g){if(yi(p)){var S=!0;gf(a)}else S=!1;if(Pu(a,g),a.stateNode===null)r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),U0(a,p,m),my(a,p,m,g),m=!0;else if(r===null){var u=a.stateNode,z=a.memoizedProps;u.props=z;var M=u.context,K=p.contextType;typeof K=="object"&&K!==null?K=ji(K):(K=yi(p)?Ys:qn.current,K=Eu(a,K));var le=p.getDerivedStateFromProps,Ce=typeof le=="function"||typeof u.getSnapshotBeforeUpdate=="function";Ce||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(z!==m||M!==K)&&N0(a,u,m,K),Qa=!1;var ee=a.memoizedState;u.state=ee,cp(a,m,u,g),M=a.memoizedState,z!==m||ee!==M||mi.current||Qa?(typeof le=="function"&&(Ef(a,p,le,m),M=a.memoizedState),(z=Qa||B0(a,p,z,m,ee,M,K))?(Ce||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(a.flags|=4)):(typeof u.componentDidMount=="function"&&(a.flags|=4),a.memoizedProps=m,a.memoizedState=M),u.props=m,u.state=M,u.context=K,m=z):(typeof u.componentDidMount=="function"&&(a.flags|=4),m=!1)}else{u=a.stateNode,L0(r,a),z=a.memoizedProps,K=a.type===a.elementType?z:no(a.type,z),u.props=K,Ce=a.pendingProps,ee=u.context,M=p.contextType,typeof M=="object"&&M!==null?M=ji(M):(M=yi(p)?Ys:qn.current,M=Eu(a,M));var Se=p.getDerivedStateFromProps;(le=typeof Se=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(z!==Ce||ee!==M)&&N0(a,u,m,M),Qa=!1,ee=a.memoizedState,u.state=ee,cp(a,m,u,g);var Oe=a.memoizedState;z!==Ce||ee!==Oe||mi.current||Qa?(typeof Se=="function"&&(Ef(a,p,Se,m),Oe=a.memoizedState),(K=Qa||B0(a,p,K,m,ee,Oe,M))?(le||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(m,Oe,M),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(m,Oe,M)),typeof u.componentDidUpdate=="function"&&(a.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(a.flags|=256)):(typeof u.componentDidUpdate!="function"||z===r.memoizedProps&&ee===r.memoizedState||(a.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||z===r.memoizedProps&&ee===r.memoizedState||(a.flags|=256),a.memoizedProps=m,a.memoizedState=Oe),u.props=m,u.state=Oe,u.context=M,m=K):(typeof u.componentDidUpdate!="function"||z===r.memoizedProps&&ee===r.memoizedState||(a.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||z===r.memoizedProps&&ee===r.memoizedState||(a.flags|=256),m=!1)}return ky(r,a,p,m,S,g)}function ky(r,a,p,m,g,S){ax(r,a);var u=(a.flags&64)!=0;if(!m&&!u)return g&&E0(a,p,!1),ma(r,a,S);m=a.stateNode,_2.current=a;var z=u&&typeof p.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,r!==null&&u?(a.child=Cf(a,r.child,null,S),a.child=Cf(a,null,z,S)):gi(r,a,z,S),a.memoizedState=m.state,g&&E0(a,p,!0),a.child}function lx(r){var a=r.stateNode;a.pendingContext?b0(r,a.pendingContext,a.pendingContext!==a.context):a.context&&b0(r,a.context,!1),yy(r,a.containerInfo)}var Of={dehydrated:null,retryLane:0};function ux(r,a,p){var m=a.pendingProps,g=jr.current,S=!1,u;return(u=(a.flags&64)!=0)||(u=r!==null&&r.memoizedState===null?!1:(g&2)!=0),u?(S=!0,a.flags&=-65):r!==null&&r.memoizedState===null||m.fallback===void 0||m.unstable_avoidThisFallback===!0||(g|=1),Vr(jr,g&1),r===null?(m.fallback!==void 0&&gy(a),r=m.children,g=m.fallback,S?(r=cx(a,r,g,p),a.child.memoizedState={baseLanes:p},a.memoizedState=Of,r):typeof m.unstable_expectedLoadTime=="number"?(r=cx(a,r,g,p),a.child.memoizedState={baseLanes:p},a.memoizedState=Of,a.lanes=33554432,r):(p=$y({mode:"visible",children:r},a.mode,p,null),p.return=a,a.child=p)):r.memoizedState!==null?S?(m=hx(r,a,m.children,m.fallback,p),S=a.child,g=r.child.memoizedState,S.memoizedState=g===null?{baseLanes:p}:{baseLanes:g.baseLanes|p},S.childLanes=r.childLanes&~p,a.memoizedState=Of,m):(p=px(r,a,m.children,p),a.memoizedState=null,p):S?(m=hx(r,a,m.children,m.fallback,p),S=a.child,g=r.child.memoizedState,S.memoizedState=g===null?{baseLanes:p}:{baseLanes:g.baseLanes|p},S.childLanes=r.childLanes&~p,a.memoizedState=Of,m):(p=px(r,a,m.children,p),a.memoizedState=null,p)}function cx(r,a,p,m){var g=r.mode,S=r.child;return a={mode:"hidden",children:a},(g&2)==0&&S!==null?(S.childLanes=0,S.pendingProps=a):S=$y(a,g,0,null),p=Ru(p,g,m,null),S.return=r,p.return=r,S.sibling=p,r.child=S,p}function px(r,a,p,m){var g=r.child;return r=g.sibling,p=as(g,{mode:"visible",children:p}),(a.mode&2)==0&&(p.lanes=m),p.return=a,p.sibling=null,r!==null&&(r.nextEffect=null,r.flags=8,a.firstEffect=a.lastEffect=r),a.child=p}function hx(r,a,p,m,g){var S=a.mode,u=r.child;r=u.sibling;var z={mode:"hidden",children:p};return(S&2)==0&&a.child!==u?(p=a.child,p.childLanes=0,p.pendingProps=z,u=p.lastEffect,u!==null?(a.firstEffect=p.firstEffect,a.lastEffect=u,u.nextEffect=null):a.firstEffect=a.lastEffect=null):p=as(u,z),r!==null?m=as(r,m):(m=Ru(m,S,g,null),m.flags|=2),m.return=a,p.return=a,p.sibling=m,a.child=p,m}function fx(r,a){r.lanes|=a;var p=r.alternate;p!==null&&(p.lanes|=a),D0(r.return,a)}function Ay(r,a,p,m,g,S){var u=r.memoizedState;u===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:p,tailMode:g,lastEffect:S}:(u.isBackwards=a,u.rendering=null,u.renderingStartTime=0,u.last=m,u.tail=p,u.tailMode=g,u.lastEffect=S)}function dx(r,a,p){var m=a.pendingProps,g=m.revealOrder,S=m.tail;if(gi(r,a,m.children,p),m=jr.current,(m&2)!=0)m=m&1|2,a.flags|=64;else{if(r!==null&&(r.flags&64)!=0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fx(r,p);else if(r.tag===19)fx(r,p);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(Vr(jr,m),(a.mode&2)==0)a.memoizedState=null;else switch(g){case"forwards":for(p=a.child,g=null;p!==null;)r=p.alternate,r!==null&&kf(r)===null&&(g=p),p=p.sibling;p=g,p===null?(g=a.child,a.child=null):(g=p.sibling,p.sibling=null),Ay(a,!1,g,p,S,a.lastEffect);break;case"backwards":for(p=null,g=a.child,a.child=null;g!==null;){if(r=g.alternate,r!==null&&kf(r)===null){a.child=g;break}r=g.sibling,g.sibling=p,p=g,g=r}Ay(a,!0,p,null,S,a.lastEffect);break;case"together":Ay(a,!1,null,null,void 0,a.lastEffect);break;default:a.memoizedState=null}return a.child}function ma(r,a,p){if(r!==null&&(a.dependencies=r.dependencies),bp|=a.lanes,(p&a.childLanes)!=0){if(r!==null&&a.child!==r.child)throw Error(qe(153));if(a.child!==null){for(r=a.child,p=as(r,r.pendingProps),a.child=p,p.return=a;r.sibling!==null;)r=r.sibling,p=p.sibling=as(r,r.pendingProps),p.return=a;p.sibling=null}return a.child}return null}var mx,zy,yx,vx;mx=function(r,a){for(var p=a.child;p!==null;){if(p.tag===5||p.tag===6)r.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break;for(;p.sibling===null;){if(p.return===null||p.return===a)return;p=p.return}p.sibling.return=p.return,p=p.sibling}};zy=function(){};yx=function(r,a,p,m){var g=r.memoizedProps;if(g!==m){r=a.stateNode,tl(Mo.current);var S=null;switch(p){case"input":g=mm(r,g),m=mm(r,m),S=[];break;case"option":g=gm(r,g),m=gm(r,m),S=[];break;case"select":g=zr({},g,{value:void 0}),m=zr({},m,{value:void 0}),S=[];break;case"textarea":g=_m(r,g),m=_m(r,m),S=[];break;default:typeof g.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=ff)}bm(p,m);var u;p=null;for(K in g)if(!m.hasOwnProperty(K)&&g.hasOwnProperty(K)&&g[K]!=null)if(K==="style"){var z=g[K];for(u in z)z.hasOwnProperty(u)&&(p||(p={}),p[u]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(Oc.hasOwnProperty(K)?S||(S=[]):(S=S||[]).push(K,null));for(K in m){var M=m[K];if(z=g!=null?g[K]:void 0,m.hasOwnProperty(K)&&M!==z&&(M!=null||z!=null))if(K==="style")if(z){for(u in z)!z.hasOwnProperty(u)||M&&M.hasOwnProperty(u)||(p||(p={}),p[u]="");for(u in M)M.hasOwnProperty(u)&&z[u]!==M[u]&&(p||(p={}),p[u]=M[u])}else p||(S||(S=[]),S.push(K,p)),p=M;else K==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,z=z?z.__html:void 0,M!=null&&z!==M&&(S=S||[]).push(K,M)):K==="children"?typeof M!="string"&&typeof M!="number"||(S=S||[]).push(K,""+M):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(Oc.hasOwnProperty(K)?(M!=null&&K==="onScroll"&&Ir("scroll",r),S||z===M||(S=[])):typeof M=="object"&&M!==null&&M.$$typeof===cm?M.toString():(S=S||[]).push(K,M))}p&&(S=S||[]).push("style",p);var K=S;(a.updateQueue=K)&&(a.flags|=4)}};vx=function(r,a,p,m){p!==m&&(a.flags|=4)};function wp(r,a){if(!Do)switch(r.tailMode){case"hidden":a=r.tail;for(var p=null;a!==null;)a.alternate!==null&&(p=a),a=a.sibling;p===null?r.tail=null:p.sibling=null;break;case"collapsed":p=r.tail;for(var m=null;p!==null;)p.alternate!==null&&(m=p),p=p.sibling;m===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function x2(r,a,p){var m=a.pendingProps;switch(a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return yi(a.type)&&vf(),null;case 3:return Cu(),Pr(mi),Pr(qn),xy(),m=a.stateNode,m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(Af(a)?a.flags|=4:m.hydrate||(a.flags|=256)),zy(a),null;case 5:vy(a);var g=tl(dp.current);if(p=a.type,r!==null&&a.stateNode!=null)yx(r,a,p,m,g),r.ref!==a.ref&&(a.flags|=128);else{if(!m){if(a.stateNode===null)throw Error(qe(166));return null}if(r=tl(Mo.current),Af(a)){m=a.stateNode,p=a.type;var S=a.memoizedProps;switch(m[Ha]=a,m[mf]=S,p){case"dialog":Ir("cancel",m),Ir("close",m);break;case"iframe":case"object":case"embed":Ir("load",m);break;case"video":case"audio":for(r=0;r<ap.length;r++)Ir(ap[r],m);break;case"source":Ir("error",m);break;case"img":case"image":case"link":Ir("error",m),Ir("load",m);break;case"details":Ir("toggle",m);break;case"input":s_(m,S),Ir("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!S.multiple},Ir("invalid",m);break;case"textarea":c_(m,S),Ir("invalid",m)}bm(p,S),r=null;for(var u in S)S.hasOwnProperty(u)&&(g=S[u],u==="children"?typeof g=="string"?m.textContent!==g&&(r=["children",g]):typeof g=="number"&&m.textContent!==""+g&&(r=["children",""+g]):Oc.hasOwnProperty(u)&&g!=null&&u==="onScroll"&&Ir("scroll",m));switch(p){case"input":Kh(m),u_(m,S,!0);break;case"textarea":Kh(m),h_(m);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(m.onclick=ff)}m=r,a.updateQueue=m,m!==null&&(a.flags|=4)}else{switch(u=g.nodeType===9?g:g.ownerDocument,r===xm.html&&(r=f_(p)),r===xm.html?p==="script"?(r=u.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=u.createElement(p,{is:m.is}):(r=u.createElement(p),p==="select"&&(u=r,m.multiple?u.multiple=!0:m.size&&(u.size=m.size))):r=u.createElementNS(r,p),r[Ha]=a,r[mf]=m,mx(r,a,!1,!1),a.stateNode=r,u=Sm(p,m),p){case"dialog":Ir("cancel",r),Ir("close",r),g=m;break;case"iframe":case"object":case"embed":Ir("load",r),g=m;break;case"video":case"audio":for(g=0;g<ap.length;g++)Ir(ap[g],r);g=m;break;case"source":Ir("error",r),g=m;break;case"img":case"image":case"link":Ir("error",r),Ir("load",r),g=m;break;case"details":Ir("toggle",r),g=m;break;case"input":s_(r,m),g=mm(r,m),Ir("invalid",r);break;case"option":g=gm(r,m);break;case"select":r._wrapperState={wasMultiple:!!m.multiple},g=zr({},m,{value:void 0}),Ir("invalid",r);break;case"textarea":c_(r,m),g=_m(r,m),Ir("invalid",r);break;default:g=m}bm(p,g);var z=g;for(S in z)if(z.hasOwnProperty(S)){var M=z[S];S==="style"?y_(r,M):S==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&d_(r,M)):S==="children"?typeof M=="string"?(p!=="textarea"||M!=="")&&jc(r,M):typeof M=="number"&&jc(r,""+M):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Oc.hasOwnProperty(S)?M!=null&&S==="onScroll"&&Ir("scroll",r):M!=null&&im(r,S,M,u))}switch(p){case"input":Kh(r),u_(r,m,!1);break;case"textarea":Kh(r),h_(r);break;case"option":m.value!=null&&r.setAttribute("value",""+ja(m.value));break;case"select":r.multiple=!!m.multiple,S=m.value,S!=null?cu(r,!!m.multiple,S,!1):m.defaultValue!=null&&cu(r,!!m.multiple,m.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=ff)}v0(p,m)&&(a.flags|=4)}a.ref!==null&&(a.flags|=128)}return null;case 6:if(r&&a.stateNode!=null)vx(r,a,r.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(qe(166));p=tl(dp.current),tl(Mo.current),Af(a)?(m=a.stateNode,p=a.memoizedProps,m[Ha]=a,m.nodeValue!==p&&(a.flags|=4)):(m=(p.nodeType===9?p:p.ownerDocument).createTextNode(m),m[Ha]=a,a.stateNode=m)}return null;case 13:return Pr(jr),m=a.memoizedState,(a.flags&64)!=0?(a.lanes=p,a):(m=m!==null,p=!1,r===null?a.memoizedProps.fallback!==void 0&&Af(a):p=r.memoizedState!==null,m&&!p&&(a.mode&2)!=0&&(r===null&&a.memoizedProps.unstable_avoidThisFallback!==!0||(jr.current&1)!=0?Dn===0&&(Dn=3):((Dn===0||Dn===3)&&(Dn=4),Jn===null||(bp&134217727)==0&&(zu&134217727)==0||Du(Jn,Wn))),(m||p)&&(a.flags|=4),null);case 4:return Cu(),zy(a),r===null&&h0(a.stateNode.containerInfo),null;case 10:return fy(a),null;case 17:return yi(a.type)&&vf(),null;case 19:if(Pr(jr),m=a.memoizedState,m===null)return null;if(S=(a.flags&64)!=0,u=m.rendering,u===null)if(S)wp(m,!1);else{if(Dn!==0||r!==null&&(r.flags&64)!=0)for(r=a.child;r!==null;){if(u=kf(r),u!==null){for(a.flags|=64,wp(m,!1),S=u.updateQueue,S!==null&&(a.updateQueue=S,a.flags|=4),m.lastEffect===null&&(a.firstEffect=null),a.lastEffect=m.lastEffect,m=p,p=a.child;p!==null;)S=p,r=m,S.flags&=2,S.nextEffect=null,S.firstEffect=null,S.lastEffect=null,u=S.alternate,u===null?(S.childLanes=0,S.lanes=r,S.child=null,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=u.childLanes,S.lanes=u.lanes,S.child=u.child,S.memoizedProps=u.memoizedProps,S.memoizedState=u.memoizedState,S.updateQueue=u.updateQueue,S.type=u.type,r=u.dependencies,S.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),p=p.sibling;return Vr(jr,jr.current&1|2),a.child}r=r.sibling}m.tail!==null&&Zn()>jy&&(a.flags|=64,S=!0,wp(m,!1),a.lanes=33554432)}else{if(!S)if(r=kf(u),r!==null){if(a.flags|=64,S=!0,p=r.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),wp(m,!0),m.tail===null&&m.tailMode==="hidden"&&!u.alternate&&!Do)return a=a.lastEffect=m.lastEffect,a!==null&&(a.nextEffect=null),null}else 2*Zn()-m.renderingStartTime>jy&&p!==1073741824&&(a.flags|=64,S=!0,wp(m,!1),a.lanes=33554432);m.isBackwards?(u.sibling=a.child,a.child=u):(p=m.last,p!==null?p.sibling=u:a.child=u,m.last=u)}return m.tail!==null?(p=m.tail,m.rendering=p,m.tail=p.sibling,m.lastEffect=a.lastEffect,m.renderingStartTime=Zn(),p.sibling=null,a=jr.current,Vr(jr,S?a&1|2:a&1),p):null;case 23:case 24:return Hy(),r!==null&&r.memoizedState!==null!=(a.memoizedState!==null)&&m.mode!=="unstable-defer-without-hiding"&&(a.flags|=4),null}throw Error(qe(156,a.tag))}function w2(r){switch(r.tag){case 1:yi(r.type)&&vf();var a=r.flags;return a&4096?(r.flags=a&-4097|64,r):null;case 3:if(Cu(),Pr(mi),Pr(qn),xy(),a=r.flags,(a&64)!=0)throw Error(qe(285));return r.flags=a&-4097|64,r;case 5:return vy(r),null;case 13:return Pr(jr),a=r.flags,a&4096?(r.flags=a&-4097|64,r):null;case 19:return Pr(jr),null;case 4:return Cu(),null;case 10:return fy(r),null;case 23:case 24:return Hy(),null;default:return null}}function My(r,a){try{var p="",m=a;do p+=tb(m),m=m.return;while(m);var g=p}catch(S){g=`
Error generating stack: `+S.message+`
`+S.stack}return{value:r,source:a,stack:g}}function Dy(r,a){try{console.error(a.value)}catch(p){setTimeout(function(){throw p})}}var b2=typeof WeakMap=="function"?WeakMap:Map;function gx(r,a,p){p=Ya(-1,p),p.tag=3,p.payload={element:null};var m=a.value;return p.callback=function(){Uf||(Uf=!0,qy=m),Dy(r,a)},p}function _x(r,a,p){p=Ya(-1,p),p.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var g=a.value;p.payload=function(){return Dy(r,a),m(g)}}var S=r.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(p.callback=function(){typeof m!="function"&&(Ro===null?Ro=new Set([this]):Ro.add(this),Dy(r,a));var u=a.stack;this.componentDidCatch(a.value,{componentStack:u!==null?u:""})}),p}var S2=typeof WeakSet=="function"?WeakSet:Set;function xx(r){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(p){os(r,p)}else a.current=null}function E2(r,a){switch(a.tag){case 0:case 11:case 15:case 22:return;case 1:if(a.flags&256&&r!==null){var p=r.memoizedProps,m=r.memoizedState;r=a.stateNode,a=r.getSnapshotBeforeUpdate(a.elementType===a.type?p:no(a.type,p),m),r.__reactInternalSnapshotBeforeUpdate=a}return;case 3:a.flags&256&&ny(a.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(qe(163))}function T2(r,a,p){switch(p.tag){case 0:case 11:case 15:case 22:if(a=p.updateQueue,a=a!==null?a.lastEffect:null,a!==null){r=a=a.next;do{if((r.tag&3)==3){var m=r.create;r.destroy=m()}r=r.next}while(r!==a)}if(a=p.updateQueue,a=a!==null?a.lastEffect:null,a!==null){r=a=a.next;do{var g=r;m=g.next,g=g.tag,(g&4)!=0&&(g&1)!=0&&(Rx(p,r),D2(p,r)),r=m}while(r!==a)}return;case 1:r=p.stateNode,p.flags&4&&(a===null?r.componentDidMount():(m=p.elementType===p.type?a.memoizedProps:no(p.type,a.memoizedProps),r.componentDidUpdate(m,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate))),a=p.updateQueue,a!==null&&O0(p,a,r);return;case 3:if(a=p.updateQueue,a!==null){if(r=null,p.child!==null)switch(p.child.tag){case 5:r=p.child.stateNode;break;case 1:r=p.child.stateNode}O0(p,a,r)}return;case 5:r=p.stateNode,a===null&&p.flags&4&&v0(p.type,p.memoizedProps)&&r.focus();return;case 6:return;case 4:return;case 12:return;case 13:p.memoizedState===null&&(p=p.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&M_(p))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(qe(163))}function wx(r,a){for(var p=r;;){if(p.tag===5){var m=p.stateNode;if(a)m=m.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{m=p.stateNode;var g=p.memoizedProps.style;g=g!=null&&g.hasOwnProperty("display")?g.display:null,m.style.display=m_("display",g)}}else if(p.tag===6)p.stateNode.nodeValue=a?"":p.memoizedProps;else if((p.tag!==23&&p.tag!==24||p.memoizedState===null||p===r)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===r)break;for(;p.sibling===null;){if(p.return===null||p.return===r)return;p=p.return}p.sibling.return=p.return,p=p.sibling}}function bx(r,a){if(Js&&typeof Js.onCommitFiberUnmount=="function")try{Js.onCommitFiberUnmount(ay,a)}catch{}switch(a.tag){case 0:case 11:case 14:case 15:case 22:if(r=a.updateQueue,r!==null&&(r=r.lastEffect,r!==null)){var p=r=r.next;do{var m=p,g=m.destroy;if(m=m.tag,g!==void 0)if((m&4)!=0)Rx(a,p);else{m=a;try{g()}catch(S){os(m,S)}}p=p.next}while(p!==r)}break;case 1:if(xx(a),r=a.stateNode,typeof r.componentWillUnmount=="function")try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(S){os(a,S)}break;case 5:xx(a);break;case 4:Ix(r,a)}}function Sx(r){r.alternate=null,r.child=null,r.dependencies=null,r.firstEffect=null,r.lastEffect=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.return=null,r.updateQueue=null}function Ex(r){return r.tag===5||r.tag===3||r.tag===4}function Tx(r){e:{for(var a=r.return;a!==null;){if(Ex(a))break e;a=a.return}throw Error(qe(160))}var p=a;switch(a=p.stateNode,p.tag){case 5:var m=!1;break;case 3:a=a.containerInfo,m=!0;break;case 4:a=a.containerInfo,m=!0;break;default:throw Error(qe(161))}p.flags&16&&(jc(a,""),p.flags&=-17);e:t:for(p=r;;){for(;p.sibling===null;){if(p.return===null||Ex(p.return)){p=null;break e}p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue t;p.child.return=p,p=p.child}if(!(p.flags&2)){p=p.stateNode;break e}}m?Ly(r,p,a):Ry(r,p,a)}function Ly(r,a,p){var m=r.tag,g=m===5||m===6;if(g)r=g?r.stateNode:r.stateNode.instance,a?p.nodeType===8?p.parentNode.insertBefore(r,a):p.insertBefore(r,a):(p.nodeType===8?(a=p.parentNode,a.insertBefore(r,p)):(a=p,a.appendChild(r)),p=p._reactRootContainer,p!=null||a.onclick!==null||(a.onclick=ff));else if(m!==4&&(r=r.child,r!==null))for(Ly(r,a,p),r=r.sibling;r!==null;)Ly(r,a,p),r=r.sibling}function Ry(r,a,p){var m=r.tag,g=m===5||m===6;if(g)r=g?r.stateNode:r.stateNode.instance,a?p.insertBefore(r,a):p.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(Ry(r,a,p),r=r.sibling;r!==null;)Ry(r,a,p),r=r.sibling}function Ix(r,a){for(var p=a,m=!1,g,S;;){if(!m){m=p.return;e:for(;;){if(m===null)throw Error(qe(160));switch(g=m.stateNode,m.tag){case 5:S=!1;break e;case 3:g=g.containerInfo,S=!0;break e;case 4:g=g.containerInfo,S=!0;break e}m=m.return}m=!0}if(p.tag===5||p.tag===6){e:for(var u=r,z=p,M=z;;)if(bx(u,M),M.child!==null&&M.tag!==4)M.child.return=M,M=M.child;else{if(M===z)break e;for(;M.sibling===null;){if(M.return===null||M.return===z)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}S?(u=g,z=p.stateNode,u.nodeType===8?u.parentNode.removeChild(z):u.removeChild(z)):g.removeChild(p.stateNode)}else if(p.tag===4){if(p.child!==null){g=p.stateNode.containerInfo,S=!0,p.child.return=p,p=p.child;continue}}else if(bx(r,p),p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break;for(;p.sibling===null;){if(p.return===null||p.return===a)return;p=p.return,p.tag===4&&(m=!1)}p.sibling.return=p.return,p=p.sibling}}function Oy(r,a){switch(a.tag){case 0:case 11:case 14:case 15:case 22:var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var m=p=p.next;do(m.tag&3)==3&&(r=m.destroy,m.destroy=void 0,r!==void 0&&r()),m=m.next;while(m!==p)}return;case 1:return;case 5:if(p=a.stateNode,p!=null){m=a.memoizedProps;var g=r!==null?r.memoizedProps:m;r=a.type;var S=a.updateQueue;if(a.updateQueue=null,S!==null){for(p[mf]=m,r==="input"&&m.type==="radio"&&m.name!=null&&l_(p,m),Sm(r,g),a=Sm(r,m),g=0;g<S.length;g+=2){var u=S[g],z=S[g+1];u==="style"?y_(p,z):u==="dangerouslySetInnerHTML"?d_(p,z):u==="children"?jc(p,z):im(p,u,z,a)}switch(r){case"input":ym(p,m);break;case"textarea":p_(p,m);break;case"select":r=p._wrapperState.wasMultiple,p._wrapperState.wasMultiple=!!m.multiple,S=m.value,S!=null?cu(p,!!m.multiple,S,!1):r!==!!m.multiple&&(m.defaultValue!=null?cu(p,!!m.multiple,m.defaultValue,!0):cu(p,!!m.multiple,m.multiple?[]:"",!1))}}}return;case 6:if(a.stateNode===null)throw Error(qe(162));a.stateNode.nodeValue=a.memoizedProps;return;case 3:p=a.stateNode,p.hydrate&&(p.hydrate=!1,M_(p.containerInfo));return;case 12:return;case 13:a.memoizedState!==null&&(Vy=Zn(),wx(a.child,!0)),Px(a);return;case 19:Px(a);return;case 17:return;case 23:case 24:wx(a,a.memoizedState!==null);return}throw Error(qe(163))}function Px(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var p=r.stateNode;p===null&&(p=r.stateNode=new S2),a.forEach(function(m){var g=O2.bind(null,r,m);p.has(m)||(p.add(m),m.then(g,g))})}}function I2(r,a){return r!==null&&(r=r.memoizedState,r===null||r.dehydrated!==null)?(a=a.memoizedState,a!==null&&a.dehydrated===null):!1}var P2=Math.ceil,Ff=Xs.ReactCurrentDispatcher,Fy=Xs.ReactCurrentOwner,It=0,Jn=null,ln=null,Wn=0,il=0,By=Ka(0),Dn=0,Bf=null,Au=0,bp=0,zu=0,Uy=0,Ny=null,Vy=0,jy=1/0;function Mu(){jy=Zn()+500}var at=null,Uf=!1,qy=null,Ro=null,ts=!1,Sp=null,Ep=90,Zy=[],Gy=[],ya=null,Tp=0,Wy=null,Nf=-1,va=0,Vf=0,Ip=null,jf=!1;function zi(){return(It&48)!=0?Zn():Nf!==-1?Nf:Nf=Zn()}function rs(r){if(r=r.mode,(r&2)==0)return 1;if((r&4)==0)return Tu()===99?1:2;if(va===0&&(va=Au),d2.transition!==0){Vf!==0&&(Vf=Ny!==null?Ny.pendingLanes:0),r=va;var a=4186112&~Vf;return a&=-a,a===0&&(r=4186112&~r,a=r&-r,a===0&&(a=8192)),a}return r=Tu(),(It&4)!=0&&r===98?r=nf(12,va):(r=vb(r),r=nf(r,va)),r}function ns(r,a,p){if(50<Tp)throw Tp=0,Wy=null,Error(qe(185));if(r=qf(r,a),r===null)return null;of(r,a,p),r===Jn&&(zu|=a,Dn===4&&Du(r,Wn));var m=Tu();a===1?(It&8)!=0&&(It&48)==0?Xy(r):(Zi(r,p),It===0&&(Mu(),zo())):((It&4)==0||m!==98&&m!==99||(ya===null?ya=new Set([r]):ya.add(r)),Zi(r,p)),Ny=r}function qf(r,a){r.lanes|=a;var p=r.alternate;for(p!==null&&(p.lanes|=a),p=r,r=r.return;r!==null;)r.childLanes|=a,p=r.alternate,p!==null&&(p.childLanes|=a),p=r,r=r.return;return p.tag===3?p.stateNode:null}function Zi(r,a){for(var p=r.callbackNode,m=r.suspendedLanes,g=r.pingedLanes,S=r.expirationTimes,u=r.pendingLanes;0<u;){var z=31-Wa(u),M=1<<z,K=S[z];if(K===-1){if((M&m)==0||(M&g)!=0){K=a,du(M);var le=gr;S[z]=10<=le?K+250:6<=le?K+5e3:-1}}else K<=a&&(r.expiredLanes|=M);u&=~M}if(m=Yc(r,r===Jn?Wn:0),a=gr,m===0)p!==null&&(p!==cy&&ly(p),r.callbackNode=null,r.callbackPriority=0);else{if(p!==null){if(r.callbackPriority===a)return;p!==cy&&ly(p)}a===15?(p=Xy.bind(null,r),fa===null?(fa=[p],xf=sy(_f,M0)):fa.push(p),p=cy):a===14?p=up(99,Xy.bind(null,r)):(p=gb(a),p=up(p,Cx.bind(null,r))),r.callbackPriority=a,r.callbackNode=p}}function Cx(r){if(Nf=-1,Vf=va=0,(It&48)!=0)throw Error(qe(327));var a=r.callbackNode;if(is()&&r.callbackNode!==a)return null;var p=Yc(r,r===Jn?Wn:0);if(p===0)return null;var m=p,g=It;It|=16;var S=Mx();(Jn!==r||Wn!==m)&&(Mu(),Lu(r,m));do try{A2();break}catch(z){zx(r,z)}while(1);if(hy(),Ff.current=S,It=g,ln!==null?m=0:(Jn=null,Wn=0,m=Dn),(Au&zu)!=0)Lu(r,0);else if(m!==0){if(m===2&&(It|=64,r.hydrate&&(r.hydrate=!1,ny(r.containerInfo)),p=U_(r),p!==0&&(m=Pp(r,p))),m===1)throw a=Bf,Lu(r,0),Du(r,p),Zi(r,Zn()),a;switch(r.finishedWork=r.current.alternate,r.finishedLanes=p,m){case 0:case 1:throw Error(qe(345));case 2:ol(r);break;case 3:if(Du(r,p),(p&62914560)===p&&(m=Vy+500-Zn(),10<m)){if(Yc(r,0)!==0)break;if(g=r.suspendedLanes,(g&p)!==p){zi(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=g0(ol.bind(null,r),m);break}ol(r);break;case 4:if(Du(r,p),(p&4186112)===p)break;for(m=r.eventTimes,g=-1;0<p;){var u=31-Wa(p);S=1<<u,u=m[u],u>g&&(g=u),p&=~S}if(p=g,p=Zn()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*P2(p/1960))-p,10<p){r.timeoutHandle=g0(ol.bind(null,r),p);break}ol(r);break;case 5:ol(r);break;default:throw Error(qe(329))}}return Zi(r,Zn()),r.callbackNode===a?Cx.bind(null,r):null}function Du(r,a){for(a&=~Uy,a&=~zu,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var p=31-Wa(a),m=1<<p;r[p]=-1,a&=~m}}function Xy(r){if((It&48)!=0)throw Error(qe(327));if(is(),r===Jn&&(r.expiredLanes&Wn)!=0){var a=Wn,p=Pp(r,a);(Au&zu)!=0&&(a=Yc(r,a),p=Pp(r,a))}else a=Yc(r,0),p=Pp(r,a);if(r.tag!==0&&p===2&&(It|=64,r.hydrate&&(r.hydrate=!1,ny(r.containerInfo)),a=U_(r),a!==0&&(p=Pp(r,a))),p===1)throw p=Bf,Lu(r,0),Du(r,a),Zi(r,Zn()),p;return r.finishedWork=r.current.alternate,r.finishedLanes=a,ol(r),Zi(r,Zn()),null}function C2(){if(ya!==null){var r=ya;ya=null,r.forEach(function(a){a.expiredLanes|=24&a.pendingLanes,Zi(a,Zn())})}zo()}function kx(r,a){var p=It;It|=1;try{return r(a)}finally{It=p,It===0&&(Mu(),zo())}}function Ax(r,a){var p=It;It&=-2,It|=8;try{return r(a)}finally{It=p,It===0&&(Mu(),zo())}}function Zf(r,a){Vr(By,il),il|=a,Au|=a}function Hy(){il=By.current,Pr(By)}function Lu(r,a){r.finishedWork=null,r.finishedLanes=0;var p=r.timeoutHandle;if(p!==-1&&(r.timeoutHandle=-1,l2(p)),ln!==null)for(p=ln.return;p!==null;){var m=p;switch(m.tag){case 1:m=m.type.childContextTypes,m!=null&&vf();break;case 3:Cu(),Pr(mi),Pr(qn),xy();break;case 5:vy(m);break;case 4:Cu();break;case 13:Pr(jr);break;case 19:Pr(jr);break;case 10:fy(m);break;case 23:case 24:Hy()}p=p.return}Jn=r,ln=as(r.current,null),Wn=il=Au=a,Dn=0,Bf=null,Uy=zu=bp=0}function zx(r,a){do{var p=ln;try{if(hy(),mp.current=Rf,zf){for(var m=Yr.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}zf=!1}if(yp=0,Mn=Gn=Yr=null,vp=!1,Fy.current=null,p===null||p.return===null){Dn=1,Bf=a,ln=null;break}e:{var S=r,u=p.return,z=p,M=a;if(a=Wn,z.flags|=2048,z.firstEffect=z.lastEffect=null,M!==null&&typeof M=="object"&&typeof M.then=="function"){var K=M;if((z.mode&2)==0){var le=z.alternate;le?(z.updateQueue=le.updateQueue,z.memoizedState=le.memoizedState,z.lanes=le.lanes):(z.updateQueue=null,z.memoizedState=null)}var Ce=(jr.current&1)!=0,ee=u;do{var Se;if(Se=ee.tag===13){var Oe=ee.memoizedState;if(Oe!==null)Se=Oe.dehydrated!==null;else{var Ze=ee.memoizedProps;Se=Ze.fallback===void 0?!1:Ze.unstable_avoidThisFallback!==!0?!0:!Ce}}if(Se){var se=ee.updateQueue;if(se===null){var ne=new Set;ne.add(K),ee.updateQueue=ne}else se.add(K);if((ee.mode&2)==0){if(ee.flags|=64,z.flags|=16384,z.flags&=-2981,z.tag===1)if(z.alternate===null)z.tag=17;else{var oe=Ya(-1,1);oe.tag=2,Ja(z,oe)}z.lanes|=1;break e}M=void 0,z=a;var _e=S.pingCache;if(_e===null?(_e=S.pingCache=new b2,M=new Set,_e.set(K,M)):(M=_e.get(K),M===void 0&&(M=new Set,_e.set(K,M))),!M.has(z)){M.add(z);var we=R2.bind(null,S,K,z);K.then(we,we)}ee.flags|=4096,ee.lanes=a;break e}ee=ee.return}while(ee!==null);M=Error((uu(z.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Dn!==5&&(Dn=2),M=My(M,z),ee=u;do{switch(ee.tag){case 3:S=M,ee.flags|=4096,a&=-a,ee.lanes|=a;var ot=gx(ee,S,a);R0(ee,ot);break e;case 1:S=M;var Le=ee.type,ut=ee.stateNode;if((ee.flags&64)==0&&(typeof Le.getDerivedStateFromError=="function"||ut!==null&&typeof ut.componentDidCatch=="function"&&(Ro===null||!Ro.has(ut)))){ee.flags|=4096,a&=-a,ee.lanes|=a;var mt=_x(ee,S,a);R0(ee,mt);break e}}ee=ee.return}while(ee!==null)}Lx(p)}catch(Qe){a=Qe,ln===p&&p!==null&&(ln=p=p.return);continue}break}while(1)}function Mx(){var r=Ff.current;return Ff.current=Rf,r===null?Rf:r}function Pp(r,a){var p=It;It|=16;var m=Mx();Jn===r&&Wn===a||Lu(r,a);do try{k2();break}catch(g){zx(r,g)}while(1);if(hy(),It=p,Ff.current=m,ln!==null)throw Error(qe(261));return Jn=null,Wn=0,Dn}function k2(){for(;ln!==null;)Dx(ln)}function A2(){for(;ln!==null&&!p2();)Dx(ln)}function Dx(r){var a=Fx(r.alternate,r,il);r.memoizedProps=r.pendingProps,a===null?Lx(r):ln=a,Fy.current=null}function Lx(r){var a=r;do{var p=a.alternate;if(r=a.return,(a.flags&2048)==0){if(p=x2(p,a,il),p!==null){ln=p;return}if(p=a,p.tag!==24&&p.tag!==23||p.memoizedState===null||(il&1073741824)!=0||(p.mode&4)==0){for(var m=0,g=p.child;g!==null;)m|=g.lanes|g.childLanes,g=g.sibling;p.childLanes=m}r!==null&&(r.flags&2048)==0&&(r.firstEffect===null&&(r.firstEffect=a.firstEffect),a.lastEffect!==null&&(r.lastEffect!==null&&(r.lastEffect.nextEffect=a.firstEffect),r.lastEffect=a.lastEffect),1<a.flags&&(r.lastEffect!==null?r.lastEffect.nextEffect=a:r.firstEffect=a,r.lastEffect=a))}else{if(p=w2(a),p!==null){p.flags&=2047,ln=p;return}r!==null&&(r.firstEffect=r.lastEffect=null,r.flags|=2048)}if(a=a.sibling,a!==null){ln=a;return}ln=a=r}while(a!==null);Dn===0&&(Dn=5)}function ol(r){var a=Tu();return el(99,z2.bind(null,r,a)),null}function z2(r,a){do is();while(Sp!==null);if((It&48)!=0)throw Error(qe(327));var p=r.finishedWork;if(p===null)return null;if(r.finishedWork=null,r.finishedLanes=0,p===r.current)throw Error(qe(177));r.callbackNode=null;var m=p.lanes|p.childLanes,g=m,S=r.pendingLanes&~g;r.pendingLanes=g,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=g,r.mutableReadLanes&=g,r.entangledLanes&=g,g=r.entanglements;for(var u=r.eventTimes,z=r.expirationTimes;0<S;){var M=31-Wa(S),K=1<<M;g[M]=0,u[M]=-1,z[M]=-1,S&=~K}if(ya!==null&&(m&24)==0&&ya.has(r)&&ya.delete(r),r===Jn&&(ln=Jn=null,Wn=0),1<p.flags?p.lastEffect!==null?(p.lastEffect.nextEffect=p,m=p.firstEffect):m=p:m=p.firstEffect,m!==null){if(g=It,It|=32,Fy.current=null,ey=af,u=o0(),$m(u)){if("selectionStart"in u)z={start:u.selectionStart,end:u.selectionEnd};else e:if(z=(z=u.ownerDocument)&&z.defaultView||window,(K=z.getSelection&&z.getSelection())&&K.rangeCount!==0){z=K.anchorNode,S=K.anchorOffset,M=K.focusNode,K=K.focusOffset;try{z.nodeType,M.nodeType}catch{z=null;break e}var le=0,Ce=-1,ee=-1,Se=0,Oe=0,Ze=u,se=null;t:for(;;){for(var ne;Ze!==z||S!==0&&Ze.nodeType!==3||(Ce=le+S),Ze!==M||K!==0&&Ze.nodeType!==3||(ee=le+K),Ze.nodeType===3&&(le+=Ze.nodeValue.length),(ne=Ze.firstChild)!==null;)se=Ze,Ze=ne;for(;;){if(Ze===u)break t;if(se===z&&++Se===S&&(Ce=le),se===M&&++Oe===K&&(ee=le),(ne=Ze.nextSibling)!==null)break;Ze=se,se=Ze.parentNode}Ze=ne}z=Ce===-1||ee===-1?null:{start:Ce,end:ee}}else z=null;z=z||{start:0,end:0}}else z=null;ty={focusedElem:u,selectionRange:z},af=!1,Ip=null,jf=!1,at=m;do try{M2()}catch(Qe){if(at===null)throw Error(qe(330));os(at,Qe),at=at.nextEffect}while(at!==null);Ip=null,at=m;do try{for(u=r;at!==null;){var oe=at.flags;if(oe&16&&jc(at.stateNode,""),oe&128){var _e=at.alternate;if(_e!==null){var we=_e.ref;we!==null&&(typeof we=="function"?we(null):we.current=null)}}switch(oe&1038){case 2:Tx(at),at.flags&=-3;break;case 6:Tx(at),at.flags&=-3,Oy(at.alternate,at);break;case 1024:at.flags&=-1025;break;case 1028:at.flags&=-1025,Oy(at.alternate,at);break;case 4:Oy(at.alternate,at);break;case 8:z=at,Ix(u,z);var ot=z.alternate;Sx(z),ot!==null&&Sx(ot)}at=at.nextEffect}}catch(Qe){if(at===null)throw Error(qe(330));os(at,Qe),at=at.nextEffect}while(at!==null);if(we=ty,_e=o0(),oe=we.focusedElem,u=we.selectionRange,_e!==oe&&oe&&oe.ownerDocument&&i0(oe.ownerDocument.documentElement,oe)){for(u!==null&&$m(oe)&&(_e=u.start,we=u.end,we===void 0&&(we=_e),"selectionStart"in oe?(oe.selectionStart=_e,oe.selectionEnd=Math.min(we,oe.value.length)):(we=(_e=oe.ownerDocument||document)&&_e.defaultView||window,we.getSelection&&(we=we.getSelection(),z=oe.textContent.length,ot=Math.min(u.start,z),u=u.end===void 0?ot:Math.min(u.end,z),!we.extend&&ot>u&&(z=u,u=ot,ot=z),z=n0(oe,ot),S=n0(oe,u),z&&S&&(we.rangeCount!==1||we.anchorNode!==z.node||we.anchorOffset!==z.offset||we.focusNode!==S.node||we.focusOffset!==S.offset)&&(_e=_e.createRange(),_e.setStart(z.node,z.offset),we.removeAllRanges(),ot>u?(we.addRange(_e),we.extend(S.node,S.offset)):(_e.setEnd(S.node,S.offset),we.addRange(_e)))))),_e=[],we=oe;we=we.parentNode;)we.nodeType===1&&_e.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof oe.focus=="function"&&oe.focus(),oe=0;oe<_e.length;oe++)we=_e[oe],we.element.scrollLeft=we.left,we.element.scrollTop=we.top}af=!!ey,ty=ey=null,r.current=p,at=m;do try{for(oe=r;at!==null;){var Le=at.flags;if(Le&36&&T2(oe,at.alternate,at),Le&128){_e=void 0;var ut=at.ref;if(ut!==null){var mt=at.stateNode;switch(at.tag){case 5:_e=mt;break;default:_e=mt}typeof ut=="function"?ut(_e):ut.current=_e}}at=at.nextEffect}}catch(Qe){if(at===null)throw Error(qe(330));os(at,Qe),at=at.nextEffect}while(at!==null);at=null,f2(),It=g}else r.current=p;if(ts)ts=!1,Sp=r,Ep=a;else for(at=m;at!==null;)a=at.nextEffect,at.nextEffect=null,at.flags&8&&(Le=at,Le.sibling=null,Le.stateNode=null),at=a;if(m=r.pendingLanes,m===0&&(Ro=null),m===1?r===Wy?Tp++:(Tp=0,Wy=r):Tp=0,p=p.stateNode,Js&&typeof Js.onCommitFiberRoot=="function")try{Js.onCommitFiberRoot(ay,p,void 0,(p.current.flags&64)==64)}catch{}if(Zi(r,Zn()),Uf)throw Uf=!1,r=qy,qy=null,r;return(It&8)!=0||zo(),null}function M2(){for(;at!==null;){var r=at.alternate;jf||Ip===null||((at.flags&8)!=0?T_(at,Ip)&&(jf=!0):at.tag===13&&I2(r,at)&&T_(at,Ip)&&(jf=!0));var a=at.flags;(a&256)!=0&&E2(r,at),(a&512)==0||ts||(ts=!0,up(97,function(){return is(),null})),at=at.nextEffect}}function is(){if(Ep!==90){var r=97<Ep?97:Ep;return Ep=90,el(r,L2)}return!1}function D2(r,a){Zy.push(a,r),ts||(ts=!0,up(97,function(){return is(),null}))}function Rx(r,a){Gy.push(a,r),ts||(ts=!0,up(97,function(){return is(),null}))}function L2(){if(Sp===null)return!1;var r=Sp;if(Sp=null,(It&48)!=0)throw Error(qe(331));var a=It;It|=32;var p=Gy;Gy=[];for(var m=0;m<p.length;m+=2){var g=p[m],S=p[m+1],u=g.destroy;if(g.destroy=void 0,typeof u=="function")try{u()}catch(M){if(S===null)throw Error(qe(330));os(S,M)}}for(p=Zy,Zy=[],m=0;m<p.length;m+=2){g=p[m],S=p[m+1];try{var z=g.create;g.destroy=z()}catch(M){if(S===null)throw Error(qe(330));os(S,M)}}for(z=r.current.firstEffect;z!==null;)r=z.nextEffect,z.nextEffect=null,z.flags&8&&(z.sibling=null,z.stateNode=null),z=r;return It=a,zo(),!0}function Ox(r,a,p){a=My(p,a),a=gx(r,a,1),Ja(r,a),a=zi(),r=qf(r,1),r!==null&&(of(r,1,a),Zi(r,a))}function os(r,a){if(r.tag===3)Ox(r,r,a);else for(var p=r.return;p!==null;){if(p.tag===3){Ox(p,r,a);break}else if(p.tag===1){var m=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ro===null||!Ro.has(m))){r=My(a,r);var g=_x(p,r,1);if(Ja(p,g),g=zi(),p=qf(p,1),p!==null)of(p,1,g),Zi(p,g);else if(typeof m.componentDidCatch=="function"&&(Ro===null||!Ro.has(m)))try{m.componentDidCatch(a,r)}catch{}break}}p=p.return}}function R2(r,a,p){var m=r.pingCache;m!==null&&m.delete(a),a=zi(),r.pingedLanes|=r.suspendedLanes&p,Jn===r&&(Wn&p)===p&&(Dn===4||Dn===3&&(Wn&62914560)===Wn&&500>Zn()-Vy?Lu(r,0):Uy|=p),Zi(r,a)}function O2(r,a){var p=r.stateNode;p!==null&&p.delete(a),a=0,a===0&&(a=r.mode,(a&2)==0?a=1:(a&4)==0?a=Tu()===99?1:2:(va===0&&(va=Au),a=mu(62914560&~va),a===0&&(a=4194304))),p=zi(),r=qf(r,a),r!==null&&(of(r,a,p),Zi(r,p))}var Fx;Fx=function(r,a,p){var m=a.lanes;if(r!==null)if(r.memoizedProps!==a.pendingProps||mi.current)io=!0;else if((p&m)!=0)io=(r.flags&16384)!=0;else{switch(io=!1,a.tag){case 3:lx(a),_y();break;case 5:q0(a);break;case 1:yi(a.type)&&gf(a);break;case 4:yy(a,a.stateNode.containerInfo);break;case 10:m=a.memoizedProps.value;var g=a.type._context;Vr(wf,g._currentValue),g._currentValue=m;break;case 13:if(a.memoizedState!==null)return(p&a.child.childLanes)!=0?ux(r,a,p):(Vr(jr,jr.current&1),a=ma(r,a,p),a!==null?a.sibling:null);Vr(jr,jr.current&1);break;case 19:if(m=(p&a.childLanes)!=0,(r.flags&64)!=0){if(m)return dx(r,a,p);a.flags|=64}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Vr(jr,jr.current),m)break;return null;case 23:case 24:return a.lanes=0,Py(r,a,p)}return ma(r,a,p)}else io=!1;switch(a.lanes=0,a.tag){case 2:if(m=a.type,r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),r=a.pendingProps,g=Eu(a,qn.current),Pu(a,p),g=by(null,a,m,r,g,p),a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0){if(a.tag=1,a.memoizedState=null,a.updateQueue=null,yi(m)){var S=!0;gf(a)}else S=!1;a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,dy(a);var u=m.getDerivedStateFromProps;typeof u=="function"&&Ef(a,m,u,r),g.updater=Tf,a.stateNode=g,g._reactInternals=a,my(a,m,r,p),a=ky(null,a,m,!0,S,p)}else a.tag=0,gi(null,a,g,p),a=a.child;return a;case 16:g=a.elementType;e:{switch(r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),r=a.pendingProps,S=g._init,g=S(g._payload),a.type=g,S=a.tag=B2(g),r=no(g,r),S){case 0:a=Cy(null,a,g,r,p);break e;case 1:a=sx(null,a,g,r,p);break e;case 11:a=nx(null,a,g,r,p);break e;case 14:a=ix(null,a,g,no(g.type,r),m,p);break e}throw Error(qe(306,g,""))}return a;case 0:return m=a.type,g=a.pendingProps,g=a.elementType===m?g:no(m,g),Cy(r,a,m,g,p);case 1:return m=a.type,g=a.pendingProps,g=a.elementType===m?g:no(m,g),sx(r,a,m,g,p);case 3:if(lx(a),m=a.updateQueue,r===null||m===null)throw Error(qe(282));if(m=a.pendingProps,g=a.memoizedState,g=g!==null?g.element:null,L0(r,a),cp(a,m,null,p),m=a.memoizedState.element,m===g)_y(),a=ma(r,a,p);else{if(g=a.stateNode,(S=g.hydrate)&&(es=xu(a.stateNode.containerInfo.firstChild),da=a,S=Do=!0),S){if(r=g.mutableSourceEagerHydrationData,r!=null)for(g=0;g<r.length;g+=2)S=r[g],S._workInProgressVersionPrimary=r[g+1],ku.push(S);for(p=j0(a,null,m,p),a.child=p;p;)p.flags=p.flags&-3|1024,p=p.sibling}else gi(r,a,m,p),_y();a=a.child}return a;case 5:return q0(a),r===null&&gy(a),m=a.type,g=a.pendingProps,S=r!==null?r.memoizedProps:null,u=g.children,ry(m,g)?u=null:S!==null&&ry(m,S)&&(a.flags|=16),ax(r,a),gi(r,a,u,p),a.child;case 6:return r===null&&gy(a),null;case 13:return ux(r,a,p);case 4:return yy(a,a.stateNode.containerInfo),m=a.pendingProps,r===null?a.child=Cf(a,null,m,p):gi(r,a,m,p),a.child;case 11:return m=a.type,g=a.pendingProps,g=a.elementType===m?g:no(m,g),nx(r,a,m,g,p);case 7:return gi(r,a,a.pendingProps,p),a.child;case 8:return gi(r,a,a.pendingProps.children,p),a.child;case 12:return gi(r,a,a.pendingProps.children,p),a.child;case 10:e:{m=a.type._context,g=a.pendingProps,u=a.memoizedProps,S=g.value;var z=a.type._context;if(Vr(wf,z._currentValue),z._currentValue=S,u!==null)if(z=u.value,S=Vi(z,S)?0:(typeof m._calculateChangedBits=="function"?m._calculateChangedBits(z,S):1073741823)|0,S===0){if(u.children===g.children&&!mi.current){a=ma(r,a,p);break e}}else for(z=a.child,z!==null&&(z.return=a);z!==null;){var M=z.dependencies;if(M!==null){u=z.child;for(var K=M.firstContext;K!==null;){if(K.context===m&&(K.observedBits&S)!=0){z.tag===1&&(K=Ya(-1,p&-p),K.tag=2,Ja(z,K)),z.lanes|=p,K=z.alternate,K!==null&&(K.lanes|=p),D0(z.return,p),M.lanes|=p;break}K=K.next}}else u=z.tag===10&&z.type===a.type?null:z.child;if(u!==null)u.return=z;else for(u=z;u!==null;){if(u===a){u=null;break}if(z=u.sibling,z!==null){z.return=u.return,u=z;break}u=u.return}z=u}gi(r,a,g.children,p),a=a.child}return a;case 9:return g=a.type,S=a.pendingProps,m=S.children,Pu(a,p),g=ji(g,S.unstable_observedBits),m=m(g),a.flags|=1,gi(r,a,m,p),a.child;case 14:return g=a.type,S=no(g,a.pendingProps),S=no(g.type,S),ix(r,a,g,S,m,p);case 15:return ox(r,a,a.type,a.pendingProps,m,p);case 17:return m=a.type,g=a.pendingProps,g=a.elementType===m?g:no(m,g),r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),a.tag=1,yi(m)?(r=!0,gf(a)):r=!1,Pu(a,p),U0(a,m,g),my(a,m,g,p),ky(null,a,m,!0,r,p);case 19:return dx(r,a,p);case 23:return Py(r,a,p);case 24:return Py(r,a,p)}throw Error(qe(156,a.tag))};function F2(r,a,p,m){this.tag=r,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(r,a,p,m){return new F2(r,a,p,m)}function Ky(r){return r=r.prototype,!(!r||!r.isReactComponent)}function B2(r){if(typeof r=="function")return Ky(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Gh)return 11;if(r===Xh)return 14}return 2}function as(r,a){var p=r.alternate;return p===null?(p=Gi(r.tag,a,r.key,r.mode),p.elementType=r.elementType,p.type=r.type,p.stateNode=r.stateNode,p.alternate=r,r.alternate=p):(p.pendingProps=a,p.type=r.type,p.flags=0,p.nextEffect=null,p.firstEffect=null,p.lastEffect=null),p.childLanes=r.childLanes,p.lanes=r.lanes,p.child=r.child,p.memoizedProps=r.memoizedProps,p.memoizedState=r.memoizedState,p.updateQueue=r.updateQueue,a=r.dependencies,p.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},p.sibling=r.sibling,p.index=r.index,p.ref=r.ref,p}function Gf(r,a,p,m,g,S){var u=2;if(m=r,typeof r=="function")Ky(r)&&(u=1);else if(typeof r=="string")u=5;else e:switch(r){case Va:return Ru(p.children,g,S,a);case n_:u=8,g|=16;break;case om:u=8,g|=1;break;case Bc:return r=Gi(12,p,a,g|8),r.elementType=Bc,r.type=Bc,r.lanes=S,r;case Uc:return r=Gi(13,p,a,g),r.type=Uc,r.elementType=Uc,r.lanes=S,r;case Wh:return r=Gi(19,p,a,g),r.elementType=Wh,r.lanes=S,r;case pm:return $y(p,g,S,a);case hm:return r=Gi(24,p,a,g),r.elementType=hm,r.lanes=S,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case am:u=10;break e;case sm:u=9;break e;case Gh:u=11;break e;case Xh:u=14;break e;case lm:u=16,m=null;break e;case um:u=22;break e}throw Error(qe(130,r==null?r:typeof r,""))}return a=Gi(u,p,a,g),a.elementType=r,a.type=m,a.lanes=S,a}function Ru(r,a,p,m){return r=Gi(7,r,m,a),r.lanes=p,r}function $y(r,a,p,m){return r=Gi(23,r,m,a),r.elementType=pm,r.lanes=p,r}function Qy(r,a,p){return r=Gi(6,r,null,a),r.lanes=p,r}function Yy(r,a,p){return a=Gi(4,r.children!==null?r.children:[],r.key,a),a.lanes=p,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function U2(r,a,p){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=p,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bm(0),this.expirationTimes=Bm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bm(0),this.mutableSourceEagerHydrationData=null}function N2(r,a,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hs,key:m==null?null:""+m,children:r,containerInfo:a,implementation:p}}function Wf(r,a,p,m){var g=a.current,S=zi(),u=rs(g);e:if(p){p=p._reactInternals;t:{if($s(p)!==p||p.tag!==1)throw Error(qe(170));var z=p;do{switch(z.tag){case 3:z=z.stateNode.context;break t;case 1:if(yi(z.type)){z=z.stateNode.__reactInternalMemoizedMergedChildContext;break t}}z=z.return}while(z!==null);throw Error(qe(171))}if(p.tag===1){var M=p.type;if(yi(M)){p=S0(p,M,z);break e}}p=z}else p=$a;return a.context===null?a.context=p:a.pendingContext=p,a=Ya(S,u),a.payload={element:r},m=m===void 0?null:m,m!==null&&(a.callback=m),Ja(g,a),ns(g,u,S),u}function Jy(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Bx(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var p=r.retryLane;r.retryLane=p!==0&&p<a?p:a}}function ev(r,a){Bx(r,a),(r=r.alternate)&&Bx(r,a)}function V2(){return null}function tv(r,a,p){var m=p!=null&&p.hydrationOptions!=null&&p.hydrationOptions.mutableSources||null;if(p=new U2(r,a,p!=null&&p.hydrate===!0),a=Gi(3,null,null,a===2?7:a===1?3:0),p.current=a,a.stateNode=p,dy(a),r[wu]=p.current,h0(r.nodeType===8?r.parentNode:r),m)for(r=0;r<m.length;r++){a=m[r];var g=a._getVersion;g=g(a._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[a,g]:p.mutableSourceEagerHydrationData.push(a,g)}this._internalRoot=p}tv.prototype.render=function(r){Wf(r,this._internalRoot,null,null)};tv.prototype.unmount=function(){var r=this._internalRoot,a=r.containerInfo;Wf(null,r,null,function(){a[wu]=null})};function Cp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function j2(r,a){if(a||(a=r?r.nodeType===9?r.documentElement:r.firstChild:null,a=!(!a||a.nodeType!==1||!a.hasAttribute("data-reactroot"))),!a)for(var p;p=r.lastChild;)r.removeChild(p);return new tv(r,0,a?{hydrate:!0}:void 0)}function Xf(r,a,p,m,g){var S=p._reactRootContainer;if(S){var u=S._internalRoot;if(typeof g=="function"){var z=g;g=function(){var K=Jy(u);z.call(K)}}Wf(a,u,r,g)}else{if(S=p._reactRootContainer=j2(p,m),u=S._internalRoot,typeof g=="function"){var M=g;g=function(){var K=Jy(u);M.call(K)}}Ax(function(){Wf(a,u,r,g)})}return Jy(u)}I_=function(r){if(r.tag===13){var a=zi();ns(r,4,a),ev(r,4)}};Mm=function(r){if(r.tag===13){var a=zi();ns(r,67108864,a),ev(r,67108864)}};P_=function(r){if(r.tag===13){var a=zi(),p=rs(r);ns(r,p,a),ev(r,p)}};C_=function(r,a){return a()};Tm=function(r,a,p){switch(a){case"input":if(ym(r,p),a=p.name,p.type==="radio"&&a!=null){for(p=r;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<p.length;a++){var m=p[a];if(m!==r&&m.form===r.form){var g=yf(m);if(!g)throw Error(qe(90));a_(m),ym(m,g)}}}break;case"textarea":p_(r,p);break;case"select":a=p.value,a!=null&&cu(r,!!p.multiple,a,!1)}};Im=kx;x_=function(r,a,p,m,g){var S=It;It|=4;try{return el(98,r.bind(null,a,p,m,g))}finally{It=S,It===0&&(Mu(),zo())}};Pm=function(){(It&49)==0&&(C2(),is())};w_=function(r,a){var p=It;It|=2;try{return r(a)}finally{It=p,It===0&&(Mu(),zo())}};function Ux(r,a){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cp(a))throw Error(qe(200));return N2(r,a,null,p)}var q2={Events:[lp,bu,yf,g_,__,is,{current:!1}]},kp={findFiberByHostInstance:Qs,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Z2={bundleType:kp.bundleType,version:kp.version,rendererPackageName:kp.rendererPackageName,rendererConfig:kp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xs.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=E_(r),r===null?null:r.stateNode},findFiberByHostInstance:kp.findFiberByHostInstance||V2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hf.isDisabled&&Hf.supportsFiber)try{ay=Hf.inject(Z2),Js=Hf}catch{}}Ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q2;Ni.createPortal=Ux;Ni.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(qe(188)):Error(qe(268,Object.keys(r)));return r=E_(a),r=r===null?null:r.stateNode,r};Ni.flushSync=function(r,a){var p=It;if((p&48)!=0)return r(a);It|=1;try{if(r)return el(99,r.bind(null,a))}finally{It=p,zo()}};Ni.hydrate=function(r,a,p){if(!Cp(a))throw Error(qe(200));return Xf(null,r,a,!0,p)};Ni.render=function(r,a,p){if(!Cp(a))throw Error(qe(200));return Xf(null,r,a,!1,p)};Ni.unmountComponentAtNode=function(r){if(!Cp(r))throw Error(qe(40));return r._reactRootContainer?(Ax(function(){Xf(null,null,r,!1,function(){r._reactRootContainer=null,r[wu]=null})}),!0):!1};Ni.unstable_batchedUpdates=kx;Ni.unstable_createPortal=function(r,a){return Ux(r,a,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ni.unstable_renderSubtreeIntoContainer=function(r,a,p,m){if(!Cp(p))throw Error(qe(200));if(r==null||r._reactInternals===void 0)throw Error(qe(38));return Xf(r,a,p,!1,m)};Ni.version="17.0.2";function Nx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nx)}catch(r){console.error(r)}}Nx(),$g.exports=Ni;var G2=$g.exports;function rv(r,a){return rv=Object.setPrototypeOf||function(m,g){return m.__proto__=g,m},rv(r,a)}function Kf(r,a){r.prototype=Object.create(a.prototype),r.prototype.constructor=r,rv(r,a)}var $f=function(){function r(){this.listeners=[]}var a=r.prototype;return a.subscribe=function(m){var g=this,S=m||function(){};return this.listeners.push(S),this.onSubscribe(),function(){g.listeners=g.listeners.filter(function(u){return u!==S}),g.onUnsubscribe()}},a.hasListeners=function(){return this.listeners.length>0},a.onSubscribe=function(){},a.onUnsubscribe=function(){},r}();function cr(){return cr=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var p=arguments[a];for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(r[m]=p[m])}return r},cr.apply(this,arguments)}var Vx=typeof window=="undefined";function ei(){}function W2(r,a){return typeof r=="function"?r(a):r}function X2(r){return typeof r=="number"&&r>=0&&r!==1/0}function Qf(r){return Array.isArray(r)?r:[r]}function H2(r,a){return Math.max(r+(a||0)-Date.now(),0)}function nv(r,a,p){return Jf(r)?typeof a=="function"?cr({},p,{queryKey:r,queryFn:a}):cr({},a,{queryKey:r}):r}function ss(r,a,p){return Jf(r)?[cr({},a,{queryKey:r}),p]:[r||{},a]}function K2(r,a){if(r===!0&&a===!0||r==null&&a==null)return"all";if(r===!1&&a===!1)return"none";var p=r!=null?r:!a;return p?"active":"inactive"}function jx(r,a){var p=r.active,m=r.exact,g=r.fetching,S=r.inactive,u=r.predicate,z=r.queryKey,M=r.stale;if(Jf(z)){if(m){if(a.queryHash!==iv(z,a.options))return!1}else if(!Yf(a.queryKey,z))return!1}var K=K2(p,S);if(K==="none")return!1;if(K!=="all"){var le=a.isActive();if(K==="active"&&!le||K==="inactive"&&le)return!1}return!(typeof M=="boolean"&&a.isStale()!==M||typeof g=="boolean"&&a.isFetching()!==g||u&&!u(a))}function qx(r,a){var p=r.exact,m=r.fetching,g=r.predicate,S=r.mutationKey;if(Jf(S)){if(!a.options.mutationKey)return!1;if(p){if(al(a.options.mutationKey)!==al(S))return!1}else if(!Yf(a.options.mutationKey,S))return!1}return!(typeof m=="boolean"&&a.state.status==="loading"!==m||g&&!g(a))}function iv(r,a){var p=(a==null?void 0:a.queryKeyHashFn)||al;return p(r)}function al(r){var a=Qf(r);return $2(a)}function $2(r){return JSON.stringify(r,function(a,p){return ov(p)?Object.keys(p).sort().reduce(function(m,g){return m[g]=p[g],m},{}):p})}function Yf(r,a){return Zx(Qf(r),Qf(a))}function Zx(r,a){return r===a?!0:typeof r!=typeof a?!1:r&&a&&typeof r=="object"&&typeof a=="object"?!Object.keys(a).some(function(p){return!Zx(r[p],a[p])}):!1}function Gx(r,a){if(r===a)return r;var p=Array.isArray(r)&&Array.isArray(a);if(p||ov(r)&&ov(a)){for(var m=p?r.length:Object.keys(r).length,g=p?a:Object.keys(a),S=g.length,u=p?[]:{},z=0,M=0;M<S;M++){var K=p?M:g[M];u[K]=Gx(r[K],a[K]),u[K]===r[K]&&z++}return m===S&&z===m?r:u}return a}function ov(r){if(!Wx(r))return!1;var a=r.constructor;if(typeof a=="undefined")return!0;var p=a.prototype;return!(!Wx(p)||!p.hasOwnProperty("isPrototypeOf"))}function Wx(r){return Object.prototype.toString.call(r)==="[object Object]"}function Jf(r){return typeof r=="string"||Array.isArray(r)}function Q2(r){return new Promise(function(a){setTimeout(a,r)})}function Xx(r){Promise.resolve().then(r).catch(function(a){return setTimeout(function(){throw a})})}function Hx(){if(typeof AbortController=="function")return new AbortController}var Y2=function(r){Kf(a,r);function a(){return r.apply(this,arguments)||this}var p=a.prototype;return p.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},p.setEventListener=function(g){var S=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=g(function(u){typeof u=="boolean"?S.setFocused(u):S.onFocus()})},p.setFocused=function(g){this.focused=g,g&&this.onFocus()},p.onFocus=function(){this.listeners.forEach(function(g){g()})},p.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document=="undefined"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},p.setDefaultEventListener=function(){var g;!Vx&&((g=window)==null?void 0:g.addEventListener)&&this.setEventListener(function(S){var u=function(){return S()};return window.addEventListener("visibilitychange",u,!1),window.addEventListener("focus",u,!1),function(){window.removeEventListener("visibilitychange",u),window.removeEventListener("focus",u)}})},a}($f),ed=new Y2,J2=function(r){Kf(a,r);function a(){return r.apply(this,arguments)||this}var p=a.prototype;return p.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},p.setEventListener=function(g){var S=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=g(function(u){typeof u=="boolean"?S.setOnline(u):S.onOnline()})},p.setOnline=function(g){this.online=g,g&&this.onOnline()},p.onOnline=function(){this.listeners.forEach(function(g){g()})},p.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator=="undefined"||typeof navigator.onLine=="undefined"?!0:navigator.onLine},p.setDefaultEventListener=function(){var g;!Vx&&((g=window)==null?void 0:g.addEventListener)&&this.setEventListener(function(S){var u=function(){return S()};return window.addEventListener("online",u,!1),window.addEventListener("offline",u,!1),function(){window.removeEventListener("online",u),window.removeEventListener("offline",u)}})},a}($f),td=new J2;function eS(r){return Math.min(1e3*Math.pow(2,r),3e4)}function rd(r){return typeof(r==null?void 0:r.cancel)=="function"}var Kx=function(a){this.revert=a==null?void 0:a.revert,this.silent=a==null?void 0:a.silent};function av(r){return r instanceof Kx}var $x=function(a){var p=this,m=!1,g,S,u,z;this.abort=a.abort,this.cancel=function(ee){return g==null?void 0:g(ee)},this.cancelRetry=function(){m=!0},this.continueRetry=function(){m=!1},this.continue=function(){return S==null?void 0:S()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(ee,Se){u=ee,z=Se});var M=function(Se){p.isResolved||(p.isResolved=!0,a.onSuccess==null||a.onSuccess(Se),S==null||S(),u(Se))},K=function(Se){p.isResolved||(p.isResolved=!0,a.onError==null||a.onError(Se),S==null||S(),z(Se))},le=function(){return new Promise(function(Se){S=Se,p.isPaused=!0,a.onPause==null||a.onPause()}).then(function(){S=void 0,p.isPaused=!1,a.onContinue==null||a.onContinue()})},Ce=function ee(){if(!p.isResolved){var Se;try{Se=a.fn()}catch(Oe){Se=Promise.reject(Oe)}g=function(Ze){if(!p.isResolved&&(K(new Kx(Ze)),p.abort==null||p.abort(),rd(Se)))try{Se.cancel()}catch{}},p.isTransportCancelable=rd(Se),Promise.resolve(Se).then(M).catch(function(Oe){var Ze,se;if(!p.isResolved){var ne=(Ze=a.retry)!=null?Ze:3,oe=(se=a.retryDelay)!=null?se:eS,_e=typeof oe=="function"?oe(p.failureCount,Oe):oe,we=ne===!0||typeof ne=="number"&&p.failureCount<ne||typeof ne=="function"&&ne(p.failureCount,Oe);if(m||!we){K(Oe);return}p.failureCount++,a.onFail==null||a.onFail(p.failureCount,Oe),Q2(_e).then(function(){if(!ed.isFocused()||!td.isOnline())return le()}).then(function(){m?K(Oe):ee()})}})}};Ce()},tS=function(){function r(){this.queue=[],this.transactions=0,this.notifyFn=function(p){p()},this.batchNotifyFn=function(p){p()}}var a=r.prototype;return a.batch=function(m){this.transactions++;var g=m();return this.transactions--,this.transactions||this.flush(),g},a.schedule=function(m){var g=this;this.transactions?this.queue.push(m):Xx(function(){g.notifyFn(m)})},a.batchCalls=function(m){var g=this;return function(){for(var S=arguments.length,u=new Array(S),z=0;z<S;z++)u[z]=arguments[z];g.schedule(function(){m.apply(void 0,u)})}},a.flush=function(){var m=this,g=this.queue;this.queue=[],g.length&&Xx(function(){m.batchNotifyFn(function(){g.forEach(function(S){m.notifyFn(S)})})})},a.setNotifyFunction=function(m){this.notifyFn=m},a.setBatchNotifyFunction=function(m){this.batchNotifyFn=m},r}(),Ln=new tS,Qx=console;function Yx(){return Qx}function rS(r){Qx=r}var nS=function(){function r(p){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=p.defaultOptions,this.setOptions(p.options),this.observers=[],this.cache=p.cache,this.queryKey=p.queryKey,this.queryHash=p.queryHash,this.initialState=p.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=p.meta,this.scheduleGc()}var a=r.prototype;return a.setOptions=function(m){var g;this.options=cr({},this.defaultOptions,m),this.meta=m==null?void 0:m.meta,this.cacheTime=Math.max(this.cacheTime||0,(g=this.options.cacheTime)!=null?g:5*60*1e3)},a.setDefaultOptions=function(m){this.defaultOptions=m},a.scheduleGc=function(){var m=this;this.clearGcTimeout(),X2(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){m.optionalRemove()},this.cacheTime))},a.clearGcTimeout=function(){clearTimeout(this.gcTimeout),this.gcTimeout=void 0},a.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},a.setData=function(m,g){var S,u,z=this.state.data,M=W2(m,z);return((S=(u=this.options).isDataEqual)==null?void 0:S.call(u,z,M))?M=z:this.options.structuralSharing!==!1&&(M=Gx(z,M)),this.dispatch({data:M,type:"success",dataUpdatedAt:g==null?void 0:g.updatedAt}),M},a.setState=function(m,g){this.dispatch({type:"setState",state:m,setStateOptions:g})},a.cancel=function(m){var g,S=this.promise;return(g=this.retryer)==null||g.cancel(m),S?S.then(ei).catch(ei):Promise.resolve()},a.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},a.reset=function(){this.destroy(),this.setState(this.initialState)},a.isActive=function(){return this.observers.some(function(m){return m.options.enabled!==!1})},a.isFetching=function(){return this.state.isFetching},a.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(m){return m.getCurrentResult().isStale})},a.isStaleByTime=function(m){return m===void 0&&(m=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!H2(this.state.dataUpdatedAt,m)},a.onFocus=function(){var m,g=this.observers.find(function(S){return S.shouldFetchOnWindowFocus()});g&&g.refetch(),(m=this.retryer)==null||m.continue()},a.onOnline=function(){var m,g=this.observers.find(function(S){return S.shouldFetchOnReconnect()});g&&g.refetch(),(m=this.retryer)==null||m.continue()},a.addObserver=function(m){this.observers.indexOf(m)===-1&&(this.observers.push(m),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:m}))},a.removeObserver=function(m){this.observers.indexOf(m)!==-1&&(this.observers=this.observers.filter(function(g){return g!==m}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:m}))},a.getObserversCount=function(){return this.observers.length},a.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},a.fetch=function(m,g){var S=this,u,z,M;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(g==null?void 0:g.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var K;return(K=this.retryer)==null||K.continueRetry(),this.promise}}if(m&&this.setOptions(m),!this.options.queryFn){var le=this.observers.find(function(oe){return oe.options.queryFn});le&&this.setOptions(le.options)}var Ce=Qf(this.queryKey),ee=Hx(),Se={queryKey:Ce,pageParam:void 0,meta:this.meta};Object.defineProperty(Se,"signal",{enumerable:!0,get:function(){if(ee)return S.abortSignalConsumed=!0,ee.signal}});var Oe=function(){return S.options.queryFn?(S.abortSignalConsumed=!1,S.options.queryFn(Se)):Promise.reject("Missing queryFn")},Ze={fetchOptions:g,options:this.options,queryKey:Ce,state:this.state,fetchFn:Oe,meta:this.meta};if((u=this.options.behavior)==null?void 0:u.onFetch){var se;(se=this.options.behavior)==null||se.onFetch(Ze)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((z=Ze.fetchOptions)==null?void 0:z.meta)){var ne;this.dispatch({type:"fetch",meta:(ne=Ze.fetchOptions)==null?void 0:ne.meta})}return this.retryer=new $x({fn:Ze.fetchFn,abort:ee==null||(M=ee.abort)==null?void 0:M.bind(ee),onSuccess:function(_e){S.setData(_e),S.cache.config.onSuccess==null||S.cache.config.onSuccess(_e,S),S.cacheTime===0&&S.optionalRemove()},onError:function(_e){av(_e)&&_e.silent||S.dispatch({type:"error",error:_e}),av(_e)||(S.cache.config.onError==null||S.cache.config.onError(_e,S),Yx().error(_e)),S.cacheTime===0&&S.optionalRemove()},onFail:function(){S.dispatch({type:"failed"})},onPause:function(){S.dispatch({type:"pause"})},onContinue:function(){S.dispatch({type:"continue"})},retry:Ze.options.retry,retryDelay:Ze.options.retryDelay}),this.promise=this.retryer.promise,this.promise},a.dispatch=function(m){var g=this;this.state=this.reducer(this.state,m),Ln.batch(function(){g.observers.forEach(function(S){S.onQueryUpdate(m)}),g.cache.notify({query:g,type:"queryUpdated",action:m})})},a.getDefaultState=function(m){var g=typeof m.initialData=="function"?m.initialData():m.initialData,S=typeof m.initialData!="undefined",u=S?typeof m.initialDataUpdatedAt=="function"?m.initialDataUpdatedAt():m.initialDataUpdatedAt:0,z=typeof g!="undefined";return{data:g,dataUpdateCount:0,dataUpdatedAt:z?u!=null?u:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:z?"success":"idle"}},a.reducer=function(m,g){var S,u;switch(g.type){case"failed":return cr({},m,{fetchFailureCount:m.fetchFailureCount+1});case"pause":return cr({},m,{isPaused:!0});case"continue":return cr({},m,{isPaused:!1});case"fetch":return cr({},m,{fetchFailureCount:0,fetchMeta:(S=g.meta)!=null?S:null,isFetching:!0,isPaused:!1,status:m.dataUpdatedAt?m.status:"loading"});case"success":return cr({},m,{data:g.data,dataUpdateCount:m.dataUpdateCount+1,dataUpdatedAt:(u=g.dataUpdatedAt)!=null?u:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var z=g.error;return av(z)&&z.revert&&this.revertState?cr({},this.revertState):cr({},m,{error:z,errorUpdateCount:m.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:m.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return cr({},m,{isInvalidated:!0});case"setState":return cr({},m,g.state);default:return m}},r}(),iS=function(r){Kf(a,r);function a(m){var g;return g=r.call(this)||this,g.config=m||{},g.queries=[],g.queriesMap={},g}var p=a.prototype;return p.build=function(g,S,u){var z,M=S.queryKey,K=(z=S.queryHash)!=null?z:iv(M,S),le=this.get(K);return le||(le=new nS({cache:this,queryKey:M,queryHash:K,options:g.defaultQueryOptions(S),state:u,defaultOptions:g.getQueryDefaults(M),meta:S.meta}),this.add(le)),le},p.add=function(g){this.queriesMap[g.queryHash]||(this.queriesMap[g.queryHash]=g,this.queries.push(g),this.notify({type:"queryAdded",query:g}))},p.remove=function(g){var S=this.queriesMap[g.queryHash];S&&(g.destroy(),this.queries=this.queries.filter(function(u){return u!==g}),S===g&&delete this.queriesMap[g.queryHash],this.notify({type:"queryRemoved",query:g}))},p.clear=function(){var g=this;Ln.batch(function(){g.queries.forEach(function(S){g.remove(S)})})},p.get=function(g){return this.queriesMap[g]},p.getAll=function(){return this.queries},p.find=function(g,S){var u=ss(g,S),z=u[0];return typeof z.exact=="undefined"&&(z.exact=!0),this.queries.find(function(M){return jx(z,M)})},p.findAll=function(g,S){var u=ss(g,S),z=u[0];return Object.keys(z).length>0?this.queries.filter(function(M){return jx(z,M)}):this.queries},p.notify=function(g){var S=this;Ln.batch(function(){S.listeners.forEach(function(u){u(g)})})},p.onFocus=function(){var g=this;Ln.batch(function(){g.queries.forEach(function(S){S.onFocus()})})},p.onOnline=function(){var g=this;Ln.batch(function(){g.queries.forEach(function(S){S.onOnline()})})},a}($f),oS=function(){function r(p){this.options=cr({},p.defaultOptions,p.options),this.mutationId=p.mutationId,this.mutationCache=p.mutationCache,this.observers=[],this.state=p.state||aS(),this.meta=p.meta}var a=r.prototype;return a.setState=function(m){this.dispatch({type:"setState",state:m})},a.addObserver=function(m){this.observers.indexOf(m)===-1&&this.observers.push(m)},a.removeObserver=function(m){this.observers=this.observers.filter(function(g){return g!==m})},a.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(ei).catch(ei)):Promise.resolve()},a.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},a.execute=function(){var m=this,g,S=this.state.status==="loading",u=Promise.resolve();return S||(this.dispatch({type:"loading",variables:this.options.variables}),u=u.then(function(){m.mutationCache.config.onMutate==null||m.mutationCache.config.onMutate(m.state.variables,m)}).then(function(){return m.options.onMutate==null?void 0:m.options.onMutate(m.state.variables)}).then(function(z){z!==m.state.context&&m.dispatch({type:"loading",context:z,variables:m.state.variables})})),u.then(function(){return m.executeMutation()}).then(function(z){g=z,m.mutationCache.config.onSuccess==null||m.mutationCache.config.onSuccess(g,m.state.variables,m.state.context,m)}).then(function(){return m.options.onSuccess==null?void 0:m.options.onSuccess(g,m.state.variables,m.state.context)}).then(function(){return m.options.onSettled==null?void 0:m.options.onSettled(g,null,m.state.variables,m.state.context)}).then(function(){return m.dispatch({type:"success",data:g}),g}).catch(function(z){return m.mutationCache.config.onError==null||m.mutationCache.config.onError(z,m.state.variables,m.state.context,m),Yx().error(z),Promise.resolve().then(function(){return m.options.onError==null?void 0:m.options.onError(z,m.state.variables,m.state.context)}).then(function(){return m.options.onSettled==null?void 0:m.options.onSettled(void 0,z,m.state.variables,m.state.context)}).then(function(){throw m.dispatch({type:"error",error:z}),z})})},a.executeMutation=function(){var m=this,g;return this.retryer=new $x({fn:function(){return m.options.mutationFn?m.options.mutationFn(m.state.variables):Promise.reject("No mutationFn found")},onFail:function(){m.dispatch({type:"failed"})},onPause:function(){m.dispatch({type:"pause"})},onContinue:function(){m.dispatch({type:"continue"})},retry:(g=this.options.retry)!=null?g:0,retryDelay:this.options.retryDelay}),this.retryer.promise},a.dispatch=function(m){var g=this;this.state=sS(this.state,m),Ln.batch(function(){g.observers.forEach(function(S){S.onMutationUpdate(m)}),g.mutationCache.notify(g)})},r}();function aS(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function sS(r,a){switch(a.type){case"failed":return cr({},r,{failureCount:r.failureCount+1});case"pause":return cr({},r,{isPaused:!0});case"continue":return cr({},r,{isPaused:!1});case"loading":return cr({},r,{context:a.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:a.variables});case"success":return cr({},r,{data:a.data,error:null,status:"success",isPaused:!1});case"error":return cr({},r,{data:void 0,error:a.error,failureCount:r.failureCount+1,isPaused:!1,status:"error"});case"setState":return cr({},r,a.state);default:return r}}var lS=function(r){Kf(a,r);function a(m){var g;return g=r.call(this)||this,g.config=m||{},g.mutations=[],g.mutationId=0,g}var p=a.prototype;return p.build=function(g,S,u){var z=new oS({mutationCache:this,mutationId:++this.mutationId,options:g.defaultMutationOptions(S),state:u,defaultOptions:S.mutationKey?g.getMutationDefaults(S.mutationKey):void 0,meta:S.meta});return this.add(z),z},p.add=function(g){this.mutations.push(g),this.notify(g)},p.remove=function(g){this.mutations=this.mutations.filter(function(S){return S!==g}),g.cancel(),this.notify(g)},p.clear=function(){var g=this;Ln.batch(function(){g.mutations.forEach(function(S){g.remove(S)})})},p.getAll=function(){return this.mutations},p.find=function(g){return typeof g.exact=="undefined"&&(g.exact=!0),this.mutations.find(function(S){return qx(g,S)})},p.findAll=function(g){return this.mutations.filter(function(S){return qx(g,S)})},p.notify=function(g){var S=this;Ln.batch(function(){S.listeners.forEach(function(u){u(g)})})},p.onFocus=function(){this.resumePausedMutations()},p.onOnline=function(){this.resumePausedMutations()},p.resumePausedMutations=function(){var g=this.mutations.filter(function(S){return S.state.isPaused});return Ln.batch(function(){return g.reduce(function(S,u){return S.then(function(){return u.continue().catch(ei)})},Promise.resolve())})},a}($f);function uS(){return{onFetch:function(a){a.fetchFn=function(){var p,m,g,S,u,z,M=(p=a.fetchOptions)==null||(m=p.meta)==null?void 0:m.refetchPage,K=(g=a.fetchOptions)==null||(S=g.meta)==null?void 0:S.fetchMore,le=K==null?void 0:K.pageParam,Ce=(K==null?void 0:K.direction)==="forward",ee=(K==null?void 0:K.direction)==="backward",Se=((u=a.state.data)==null?void 0:u.pages)||[],Oe=((z=a.state.data)==null?void 0:z.pageParams)||[],Ze=Hx(),se=Ze==null?void 0:Ze.signal,ne=Oe,oe=!1,_e=a.options.queryFn||function(){return Promise.reject("Missing queryFn")},we=function(rr,qr,nr,un){return ne=un?[qr].concat(ne):[].concat(ne,[qr]),un?[nr].concat(rr):[].concat(rr,[nr])},ot=function(rr,qr,nr,un){if(oe)return Promise.reject("Cancelled");if(typeof nr=="undefined"&&!qr&&rr.length)return Promise.resolve(rr);var Zr={queryKey:a.queryKey,signal:se,pageParam:nr,meta:a.meta},cn=_e(Zr),bn=Promise.resolve(cn).then(function(pt){return we(rr,nr,pt,un)});if(rd(cn)){var Fe=bn;Fe.cancel=cn.cancel}return bn},Le;if(!Se.length)Le=ot([]);else if(Ce){var ut=typeof le!="undefined",mt=ut?le:Jx(a.options,Se);Le=ot(Se,ut,mt)}else if(ee){var Qe=typeof le!="undefined",Qt=Qe?le:cS(a.options,Se);Le=ot(Se,Qe,Qt,!0)}else(function(){ne=[];var gt=typeof a.options.getNextPageParam=="undefined",rr=M&&Se[0]?M(Se[0],0,Se):!0;Le=rr?ot([],gt,Oe[0]):Promise.resolve(we([],Oe[0],Se[0]));for(var qr=function(Zr){Le=Le.then(function(cn){var bn=M&&Se[Zr]?M(Se[Zr],Zr,Se):!0;if(bn){var Fe=gt?Oe[Zr]:Jx(a.options,cn);return ot(cn,gt,Fe)}return Promise.resolve(we(cn,Oe[Zr],Se[Zr]))})},nr=1;nr<Se.length;nr++)qr(nr)})();var Jr=Le.then(function(gt){return{pages:gt,pageParams:ne}}),Mr=Jr;return Mr.cancel=function(){oe=!0,Ze==null||Ze.abort(),rd(Le)&&Le.cancel()},Jr}}}}function Jx(r,a){return r.getNextPageParam==null?void 0:r.getNextPageParam(a[a.length-1],a)}function cS(r,a){return r.getPreviousPageParam==null?void 0:r.getPreviousPageParam(a[0],a)}var xS=function(){function r(p){p===void 0&&(p={}),this.queryCache=p.queryCache||new iS,this.mutationCache=p.mutationCache||new lS,this.defaultOptions=p.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var a=r.prototype;return a.mount=function(){var m=this;this.unsubscribeFocus=ed.subscribe(function(){ed.isFocused()&&td.isOnline()&&(m.mutationCache.onFocus(),m.queryCache.onFocus())}),this.unsubscribeOnline=td.subscribe(function(){ed.isFocused()&&td.isOnline()&&(m.mutationCache.onOnline(),m.queryCache.onOnline())})},a.unmount=function(){var m,g;(m=this.unsubscribeFocus)==null||m.call(this),(g=this.unsubscribeOnline)==null||g.call(this)},a.isFetching=function(m,g){var S=ss(m,g),u=S[0];return u.fetching=!0,this.queryCache.findAll(u).length},a.isMutating=function(m){return this.mutationCache.findAll(cr({},m,{fetching:!0})).length},a.getQueryData=function(m,g){var S;return(S=this.queryCache.find(m,g))==null?void 0:S.state.data},a.getQueriesData=function(m){return this.getQueryCache().findAll(m).map(function(g){var S=g.queryKey,u=g.state,z=u.data;return[S,z]})},a.setQueryData=function(m,g,S){var u=nv(m),z=this.defaultQueryOptions(u);return this.queryCache.build(this,z).setData(g,S)},a.setQueriesData=function(m,g,S){var u=this;return Ln.batch(function(){return u.getQueryCache().findAll(m).map(function(z){var M=z.queryKey;return[M,u.setQueryData(M,g,S)]})})},a.getQueryState=function(m,g){var S;return(S=this.queryCache.find(m,g))==null?void 0:S.state},a.removeQueries=function(m,g){var S=ss(m,g),u=S[0],z=this.queryCache;Ln.batch(function(){z.findAll(u).forEach(function(M){z.remove(M)})})},a.resetQueries=function(m,g,S){var u=this,z=ss(m,g,S),M=z[0],K=z[1],le=this.queryCache,Ce=cr({},M,{active:!0});return Ln.batch(function(){return le.findAll(M).forEach(function(ee){ee.reset()}),u.refetchQueries(Ce,K)})},a.cancelQueries=function(m,g,S){var u=this,z=ss(m,g,S),M=z[0],K=z[1],le=K===void 0?{}:K;typeof le.revert=="undefined"&&(le.revert=!0);var Ce=Ln.batch(function(){return u.queryCache.findAll(M).map(function(ee){return ee.cancel(le)})});return Promise.all(Ce).then(ei).catch(ei)},a.invalidateQueries=function(m,g,S){var u,z,M,K=this,le=ss(m,g,S),Ce=le[0],ee=le[1],Se=cr({},Ce,{active:(u=(z=Ce.refetchActive)!=null?z:Ce.active)!=null?u:!0,inactive:(M=Ce.refetchInactive)!=null?M:!1});return Ln.batch(function(){return K.queryCache.findAll(Ce).forEach(function(Oe){Oe.invalidate()}),K.refetchQueries(Se,ee)})},a.refetchQueries=function(m,g,S){var u=this,z=ss(m,g,S),M=z[0],K=z[1],le=Ln.batch(function(){return u.queryCache.findAll(M).map(function(ee){return ee.fetch(void 0,cr({},K,{meta:{refetchPage:M==null?void 0:M.refetchPage}}))})}),Ce=Promise.all(le).then(ei);return(K==null?void 0:K.throwOnError)||(Ce=Ce.catch(ei)),Ce},a.fetchQuery=function(m,g,S){var u=nv(m,g,S),z=this.defaultQueryOptions(u);typeof z.retry=="undefined"&&(z.retry=!1);var M=this.queryCache.build(this,z);return M.isStaleByTime(z.staleTime)?M.fetch(z):Promise.resolve(M.state.data)},a.prefetchQuery=function(m,g,S){return this.fetchQuery(m,g,S).then(ei).catch(ei)},a.fetchInfiniteQuery=function(m,g,S){var u=nv(m,g,S);return u.behavior=uS(),this.fetchQuery(u)},a.prefetchInfiniteQuery=function(m,g,S){return this.fetchInfiniteQuery(m,g,S).then(ei).catch(ei)},a.cancelMutations=function(){var m=this,g=Ln.batch(function(){return m.mutationCache.getAll().map(function(S){return S.cancel()})});return Promise.all(g).then(ei).catch(ei)},a.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},a.executeMutation=function(m){return this.mutationCache.build(this,m).execute()},a.getQueryCache=function(){return this.queryCache},a.getMutationCache=function(){return this.mutationCache},a.getDefaultOptions=function(){return this.defaultOptions},a.setDefaultOptions=function(m){this.defaultOptions=m},a.setQueryDefaults=function(m,g){var S=this.queryDefaults.find(function(u){return al(m)===al(u.queryKey)});S?S.defaultOptions=g:this.queryDefaults.push({queryKey:m,defaultOptions:g})},a.getQueryDefaults=function(m){var g;return m?(g=this.queryDefaults.find(function(S){return Yf(m,S.queryKey)}))==null?void 0:g.defaultOptions:void 0},a.setMutationDefaults=function(m,g){var S=this.mutationDefaults.find(function(u){return al(m)===al(u.mutationKey)});S?S.defaultOptions=g:this.mutationDefaults.push({mutationKey:m,defaultOptions:g})},a.getMutationDefaults=function(m){var g;return m?(g=this.mutationDefaults.find(function(S){return Yf(m,S.mutationKey)}))==null?void 0:g.defaultOptions:void 0},a.defaultQueryOptions=function(m){if(m==null?void 0:m._defaulted)return m;var g=cr({},this.defaultOptions.queries,this.getQueryDefaults(m==null?void 0:m.queryKey),m,{_defaulted:!0});return!g.queryHash&&g.queryKey&&(g.queryHash=iv(g.queryKey,g)),g},a.defaultQueryObserverOptions=function(m){return this.defaultQueryOptions(m)},a.defaultMutationOptions=function(m){return(m==null?void 0:m._defaulted)?m:cr({},this.defaultOptions.mutations,this.getMutationDefaults(m==null?void 0:m.mutationKey),m,{_defaulted:!0})},a.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},r}(),pS=G2.unstable_batchedUpdates;Ln.setBatchNotifyFunction(pS);var hS=console;rS(hS);var e1=Lc.createContext(void 0),fS=Lc.createContext(!1);function dS(r){return r&&typeof window!="undefined"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=e1),window.ReactQueryClientContext):e1}var wS=function(a){var p=a.client,m=a.contextSharing,g=m===void 0?!1:m,S=a.children;Lc.useEffect(function(){return p.mount(),function(){p.unmount()}},[p]);var u=dS(g);return Lc.createElement(fS.Provider,{value:g},Lc.createElement(u.Provider,{value:p},S))};try{self["workbox:window:6.4.1"]&&_()}catch{}function t1(r,a){return new Promise(function(p){var m=new MessageChannel;m.port1.onmessage=function(g){p(g.data)},r.postMessage(a,[m.port2])})}function mS(r,a){for(var p=0;p<a.length;p++){var m=a[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(r,m.key,m)}}function r1(r,a){(a==null||a>r.length)&&(a=r.length);for(var p=0,m=new Array(a);p<a;p++)m[p]=r[p];return m}function yS(r,a){var p;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(p=function(g,S){if(g){if(typeof g=="string")return r1(g,S);var u=Object.prototype.toString.call(g).slice(8,-1);return u==="Object"&&g.constructor&&(u=g.constructor.name),u==="Map"||u==="Set"?Array.from(g):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?r1(g,S):void 0}}(r))||a&&r&&typeof r.length=="number"){p&&(r=p);var m=0;return function(){return m>=r.length?{done:!0}:{done:!1,value:r[m++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(p=r[Symbol.iterator]()).next.bind(p)}try{self["workbox:core:6.4.1"]&&_()}catch{}var sv=function(){var r=this;this.promise=new Promise(function(a,p){r.resolve=a,r.reject=p})};function lv(r,a){var p=location.href;return new URL(r,p).href===new URL(a,p).href}var Ap=function(r,a){this.type=r,Object.assign(this,a)};function nd(r,a,p){return p?a?a(r):r:(r&&r.then||(r=Promise.resolve(r)),a?r.then(a):r)}function vS(){}var gS={type:"SKIP_WAITING"};function n1(r,a){if(!a)return r&&r.then?r.then(vS):Promise.resolve()}var bS=function(r){var a,p;function m(z,M){var K,le;return M===void 0&&(M={}),(K=r.call(this)||this).nn={},K.tn=0,K.rn=new sv,K.en=new sv,K.on=new sv,K.un=0,K.an=new Set,K.cn=function(){var Ce=K.fn,ee=Ce.installing;K.tn>0||!lv(ee.scriptURL,K.sn.toString())||performance.now()>K.un+6e4?(K.vn=ee,Ce.removeEventListener("updatefound",K.cn)):(K.hn=ee,K.an.add(ee),K.rn.resolve(ee)),++K.tn,ee.addEventListener("statechange",K.ln)},K.ln=function(Ce){var ee=K.fn,Se=Ce.target,Oe=Se.state,Ze=Se===K.vn,se={sw:Se,isExternal:Ze,originalEvent:Ce};!Ze&&K.mn&&(se.isUpdate=!0),K.dispatchEvent(new Ap(Oe,se)),Oe==="installed"?K.wn=self.setTimeout(function(){Oe==="installed"&&ee.waiting===Se&&K.dispatchEvent(new Ap("waiting",se))},200):Oe==="activating"&&(clearTimeout(K.wn),Ze||K.en.resolve(Se))},K.dn=function(Ce){var ee=K.hn,Se=ee!==navigator.serviceWorker.controller;K.dispatchEvent(new Ap("controlling",{isExternal:Se,originalEvent:Ce,sw:ee,isUpdate:K.mn})),Se||K.on.resolve(ee)},K.gn=(le=function(Ce){var ee=Ce.data,Se=Ce.ports,Oe=Ce.source;return nd(K.getSW(),function(){K.an.has(Oe)&&K.dispatchEvent(new Ap("message",{data:ee,originalEvent:Ce,ports:Se,sw:Oe}))})},function(){for(var Ce=[],ee=0;ee<arguments.length;ee++)Ce[ee]=arguments[ee];try{return Promise.resolve(le.apply(this,Ce))}catch(Se){return Promise.reject(Se)}}),K.sn=z,K.nn=M,navigator.serviceWorker.addEventListener("message",K.gn),K}p=r,(a=m).prototype=Object.create(p.prototype),a.prototype.constructor=a,a.__proto__=p;var g,S,u=m.prototype;return u.register=function(z){var M=(z===void 0?{}:z).immediate,K=M!==void 0&&M;try{var le=this;return function(Ce,ee){var Se=Ce();return Se&&Se.then?Se.then(ee):ee(Se)}(function(){if(!K&&document.readyState!=="complete")return n1(new Promise(function(Ce){return window.addEventListener("load",Ce)}))},function(){return le.mn=Boolean(navigator.serviceWorker.controller),le.yn=le.pn(),nd(le.bn(),function(Ce){le.fn=Ce,le.yn&&(le.hn=le.yn,le.en.resolve(le.yn),le.on.resolve(le.yn),le.yn.addEventListener("statechange",le.ln,{once:!0}));var ee=le.fn.waiting;return ee&&lv(ee.scriptURL,le.sn.toString())&&(le.hn=ee,Promise.resolve().then(function(){le.dispatchEvent(new Ap("waiting",{sw:ee,wasWaitingBeforeRegister:!0}))}).then(function(){})),le.hn&&(le.rn.resolve(le.hn),le.an.add(le.hn)),le.fn.addEventListener("updatefound",le.cn),navigator.serviceWorker.addEventListener("controllerchange",le.dn),le.fn})})}catch(Ce){return Promise.reject(Ce)}},u.update=function(){try{return this.fn?n1(this.fn.update()):void 0}catch(z){return Promise.reject(z)}},u.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},u.messageSW=function(z){try{return nd(this.getSW(),function(M){return t1(M,z)})}catch(M){return Promise.reject(M)}},u.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&t1(this.fn.waiting,gS)},u.pn=function(){var z=navigator.serviceWorker.controller;return z&&lv(z.scriptURL,this.sn.toString())?z:void 0},u.bn=function(){try{var z=this;return function(M,K){try{var le=M()}catch(Ce){return K(Ce)}return le&&le.then?le.then(void 0,K):le}(function(){return nd(navigator.serviceWorker.register(z.sn,z.nn),function(M){return z.un=performance.now(),M})},function(M){throw M})}catch(M){return Promise.reject(M)}},g=m,(S=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&mS(g.prototype,S),m}(function(){function r(){this.Pn=new Map}var a=r.prototype;return a.addEventListener=function(p,m){this.Sn(p).add(m)},a.removeEventListener=function(p,m){this.Sn(p).delete(m)},a.dispatchEvent=function(p){p.target=this;for(var m,g=yS(this.Sn(p.type));!(m=g()).done;)(0,m.value)(p)},a.Sn=function(p){return this.Pn.has(p)||this.Pn.set(p,new Set),this.Pn.get(p)},r}());export{xS as Q,G2 as R,kg as a,wS as b,Ww as j,_S as m,Vh as r,bS as v};
