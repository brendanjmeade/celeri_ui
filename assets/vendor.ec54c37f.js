var Oc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function dS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Si={exports:{}},Ur={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var m0=Object.getOwnPropertySymbols,mS=Object.prototype.hasOwnProperty,yS=Object.prototype.propertyIsEnumerable;function vS(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function gS(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var n={},s=0;s<10;s++)n["_"+String.fromCharCode(s)]=s;var h=Object.getOwnPropertyNames(n).map(function(x){return n[x]});if(h.join("")!=="0123456789")return!1;var y={};return"abcdefghijklmnopqrst".split("").forEach(function(x){y[x]=x}),Object.keys(Object.assign({},y)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var y0=gS()?Object.assign:function(t,n){for(var s,h=vS(t),y,x=1;x<arguments.length;x++){s=Object(arguments[x]);for(var l in s)mS.call(s,l)&&(h[l]=s[l]);if(m0){y=m0(s);for(var C=0;C<y.length;C++)yS.call(s,y[C])&&(h[y[C]]=s[y[C]])}}return h};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy=y0,Rc=60103,v0=60106;Ur.Fragment=60107;Ur.StrictMode=60108;Ur.Profiler=60114;var g0=60109,_0=60110,x0=60112;Ur.Suspense=60113;var b0=60115,w0=60116;if(typeof Symbol=="function"&&Symbol.for){var Ya=Symbol.for;Rc=Ya("react.element"),v0=Ya("react.portal"),Ur.Fragment=Ya("react.fragment"),Ur.StrictMode=Ya("react.strict_mode"),Ur.Profiler=Ya("react.profiler"),g0=Ya("react.provider"),_0=Ya("react.context"),x0=Ya("react.forward_ref"),Ur.Suspense=Ya("react.suspense"),b0=Ya("react.memo"),w0=Ya("react.lazy")}var S0=typeof Symbol=="function"&&Symbol.iterator;function _S(t){return t===null||typeof t!="object"?null:(t=S0&&t[S0]||t["@@iterator"],typeof t=="function"?t:null)}function eh(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P0={};function Fc(t,n,s){this.props=t,this.context=n,this.refs=P0,this.updater=s||E0}Fc.prototype.isReactComponent={};Fc.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(eh(85));this.updater.enqueueSetState(this,t,n,"setState")};Fc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function T0(){}T0.prototype=Fc.prototype;function uy(t,n,s){this.props=t,this.context=n,this.refs=P0,this.updater=s||E0}var ly=uy.prototype=new T0;ly.constructor=uy;sy(ly,Fc.prototype);ly.isPureReactComponent=!0;var cy={current:null},C0=Object.prototype.hasOwnProperty,I0={key:!0,ref:!0,__self:!0,__source:!0};function k0(t,n,s){var h,y={},x=null,l=null;if(n!=null)for(h in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(x=""+n.key),n)C0.call(n,h)&&!I0.hasOwnProperty(h)&&(y[h]=n[h]);var C=arguments.length-2;if(C===1)y.children=s;else if(1<C){for(var k=Array(C),F=0;F<C;F++)k[F]=arguments[F+2];y.children=k}if(t&&t.defaultProps)for(h in C=t.defaultProps,C)y[h]===void 0&&(y[h]=C[h]);return{$$typeof:Rc,type:t,key:x,ref:l,props:y,_owner:cy.current}}function xS(t,n){return{$$typeof:Rc,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function py(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rc}function bS(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return n[s]})}var A0=/\/+/g;function hy(t,n){return typeof t=="object"&&t!==null&&t.key!=null?bS(""+t.key):n.toString(36)}function Gf(t,n,s,h,y){var x=typeof t;(x==="undefined"||x==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(x){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Rc:case v0:l=!0}}if(l)return l=t,y=y(l),t=h===""?"."+hy(l,0):h,Array.isArray(y)?(s="",t!=null&&(s=t.replace(A0,"$&/")+"/"),Gf(y,n,s,"",function(F){return F})):y!=null&&(py(y)&&(y=xS(y,s+(!y.key||l&&l.key===y.key?"":(""+y.key).replace(A0,"$&/")+"/")+t)),n.push(y)),1;if(l=0,h=h===""?".":h+":",Array.isArray(t))for(var C=0;C<t.length;C++){x=t[C];var k=h+hy(x,C);l+=Gf(x,n,s,k,y)}else if(k=_S(t),typeof k=="function")for(t=k.call(t),C=0;!(x=t.next()).done;)x=x.value,k=h+hy(x,C++),l+=Gf(x,n,s,k,y);else if(x==="object")throw n=""+t,Error(eh(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n));return l}function Wf(t,n,s){if(t==null)return t;var h=[],y=0;return Gf(t,h,"","",function(x){return n.call(s,x,y++)}),h}function wS(t){if(t._status===-1){var n=t._result;n=n(),t._status=0,t._result=n,n.then(function(s){t._status===0&&(s=s.default,t._status=1,t._result=s)},function(s){t._status===0&&(t._status=2,t._result=s)})}if(t._status===1)return t._result;throw t._result}var M0={current:null};function nu(){var t=M0.current;if(t===null)throw Error(eh(321));return t}var SS={ReactCurrentDispatcher:M0,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:cy,IsSomeRendererActing:{current:!1},assign:sy};Ur.Children={map:Wf,forEach:function(t,n,s){Wf(t,function(){n.apply(this,arguments)},s)},count:function(t){var n=0;return Wf(t,function(){n++}),n},toArray:function(t){return Wf(t,function(n){return n})||[]},only:function(t){if(!py(t))throw Error(eh(143));return t}};Ur.Component=Fc;Ur.PureComponent=uy;Ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SS;Ur.cloneElement=function(t,n,s){if(t==null)throw Error(eh(267,t));var h=sy({},t.props),y=t.key,x=t.ref,l=t._owner;if(n!=null){if(n.ref!==void 0&&(x=n.ref,l=cy.current),n.key!==void 0&&(y=""+n.key),t.type&&t.type.defaultProps)var C=t.type.defaultProps;for(k in n)C0.call(n,k)&&!I0.hasOwnProperty(k)&&(h[k]=n[k]===void 0&&C!==void 0?C[k]:n[k])}var k=arguments.length-2;if(k===1)h.children=s;else if(1<k){C=Array(k);for(var F=0;F<k;F++)C[F]=arguments[F+2];h.children=C}return{$$typeof:Rc,type:t.type,key:y,ref:x,props:h,_owner:l}};Ur.createContext=function(t,n){return n===void 0&&(n=null),t={$$typeof:_0,_calculateChangedBits:n,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:g0,_context:t},t.Consumer=t};Ur.createElement=k0;Ur.createFactory=function(t){var n=k0.bind(null,t);return n.type=t,n};Ur.createRef=function(){return{current:null}};Ur.forwardRef=function(t){return{$$typeof:x0,render:t}};Ur.isValidElement=py;Ur.lazy=function(t){return{$$typeof:w0,_payload:{_status:-1,_result:t},_init:wS}};Ur.memo=function(t,n){return{$$typeof:b0,type:t,compare:n===void 0?null:n}};Ur.useCallback=function(t,n){return nu().useCallback(t,n)};Ur.useContext=function(t,n){return nu().useContext(t,n)};Ur.useDebugValue=function(){};Ur.useEffect=function(t,n){return nu().useEffect(t,n)};Ur.useImperativeHandle=function(t,n,s){return nu().useImperativeHandle(t,n,s)};Ur.useLayoutEffect=function(t,n){return nu().useLayoutEffect(t,n)};Ur.useMemo=function(t,n){return nu().useMemo(t,n)};Ur.useReducer=function(t,n,s){return nu().useReducer(t,n,s)};Ur.useRef=function(t){return nu().useRef(t)};Ur.useState=function(t){return nu().useState(t)};Ur.version="17.0.2";Si.exports=Ur;var Bc=Si.exports,$f={exports:{}},th={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES=Si.exports,z0=60103;th.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var L0=Symbol.for;z0=L0("react.element"),th.Fragment=L0("react.fragment")}var PS=ES.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TS=Object.prototype.hasOwnProperty,CS={key:!0,ref:!0,__self:!0,__source:!0};function D0(t,n,s){var h,y={},x=null,l=null;s!==void 0&&(x=""+s),n.key!==void 0&&(x=""+n.key),n.ref!==void 0&&(l=n.ref);for(h in n)TS.call(n,h)&&!CS.hasOwnProperty(h)&&(y[h]=n[h]);if(t&&t.defaultProps)for(h in n=t.defaultProps,n)y[h]===void 0&&(y[h]=n[h]);return{$$typeof:z0,type:t,key:x,ref:l,props:y,_owner:PS.current}}th.jsx=D0;th.jsxs=D0;$f.exports=th;const IS=$f.exports.jsx,DC=$f.exports.jsxs,OC=$f.exports.Fragment;var O0={exports:{}};(function(t,n){(function(s,h){t.exports=h()})(Oc,function(){var s,h,y;function x(l,C){if(!s)s=C;else if(!h)h=C;else{var k="var sharedChunk = {}; ("+s+")(sharedChunk); ("+h+")(sharedChunk);",F={};s(F),y=C(F),typeof window!="undefined"&&(y.workerUrl=window.URL.createObjectURL(new Blob([k],{type:"text/javascript"})))}}return x(["exports"],function(l){function C(e,r){return e(r={exports:{}},r.exports),r.exports}var k=F;function F(e,r,i,c){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(c-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=c,this.p2x=i,this.p2y=c}F.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},F.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},F.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},F.prototype.solveCurveX=function(e,r){var i,c,f,d,v;for(r===void 0&&(r=1e-6),f=e,v=0;v<8;v++){if(d=this.sampleCurveX(f)-e,Math.abs(d)<r)return f;var w=this.sampleCurveDerivativeX(f);if(Math.abs(w)<1e-6)break;f-=d/w}if((f=e)<(i=0))return i;if(f>(c=1))return c;for(;i<c;){if(d=this.sampleCurveX(f),Math.abs(d-e)<r)return f;e>d?i=f:c=f,f=.5*(c-i)+i}return f},F.prototype.solve=function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))};var $=me;function me(e,r){this.x=e,this.y=r}me.prototype={clone:function(){return new me(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,r){return this.clone()._rotateAround(e,r)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var r=e.x-this.x,i=e.y-this.y;return r*r+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,r){return Math.atan2(this.x*r-this.y*e,this.x*e+this.y*r)},_matMult:function(e){var r=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var r=Math.cos(e),i=Math.sin(e),c=i*this.x+r*this.y;return this.x=r*this.x-i*this.y,this.y=c,this},_rotateAround:function(e,r){var i=Math.cos(e),c=Math.sin(e),f=r.y+c*(this.x-r.x)+i*(this.y-r.y);return this.x=r.x+i*(this.x-r.x)-c*(this.y-r.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},me.convert=function(e){return e instanceof me?e:Array.isArray(e)?new me(e[0],e[1]):e};var W=typeof self!="undefined"?self:{},xe=Math.pow(2,53)-1;function Ce(e,r,i,c){var f=new k(e,r,i,c);return function(d){return f.solve(d)}}var Oe=Ce(.25,.1,.25,1);function se(e,r,i){return Math.min(i,Math.max(r,e))}function te(e,r,i){var c=i-r,f=((e-r)%c+c)%c+r;return f===r?i:f}function ne(e){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];for(var c=0,f=r;c<f.length;c+=1){var d=f[c];for(var v in d)e[v]=d[v]}return e}var be=1;function Le(){return be++}function Se(){return function e(r){return r?(r^16*Math.random()>>r/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Ie(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function je(e,r){e.forEach(function(i){r[i]&&(r[i]=r[i].bind(r))})}function at(e,r){return e.indexOf(r,e.length-r.length)!==-1}function Xe(e,r,i){var c={};for(var f in e)c[f]=r.call(i||this,e[f],f,e);return c}function _t(e,r,i){var c={};for(var f in e)r.call(i||this,e[f],f,e)&&(c[f]=e[f]);return c}function Mt(e){return Array.isArray(e)?e.map(Mt):typeof e=="object"&&e?Xe(e,Mt):e}var bt={};function Ct(e){bt[e]||(typeof console!="undefined"&&console.warn(e),bt[e]=!0)}function Ut(e,r,i){return(i.y-e.y)*(r.x-e.x)>(r.y-e.y)*(i.x-e.x)}function Cr(e){for(var r=0,i=0,c=e.length,f=c-1,d=void 0,v=void 0;i<c;f=i++)r+=((v=e[f]).x-(d=e[i]).x)*(d.y+v.y);return r}function Ir(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Fn(e){var r={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(c,f,d,v){var w=d||v;return r[f]=!w||w.toLowerCase(),""}),r["max-age"]){var i=parseInt(r["max-age"],10);isNaN(i)?delete r["max-age"]:r["max-age"]=i}return r}var Qt=null;function Bn(e){if(Qt==null){var r=e.navigator?e.navigator.userAgent:null;Qt=!!e.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Qt}function Gt(e){try{var r=W[e];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}var Ye,zt,Xt,Rr,Gr=W.performance&&W.performance.now?W.performance.now.bind(W.performance):Date.now.bind(Date),fo=W.requestAnimationFrame||W.mozRequestAnimationFrame||W.webkitRequestAnimationFrame||W.msRequestAnimationFrame,en=W.cancelAnimationFrame||W.mozCancelAnimationFrame||W.webkitCancelAnimationFrame||W.msCancelAnimationFrame,si={now:Gr,frame:function(e){var r=fo(e);return{cancel:function(){return en(r)}}},getImageData:function(e,r){r===void 0&&(r=0);var i=W.document.createElement("canvas"),c=i.getContext("2d");if(!c)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,c.drawImage(e,0,0,e.width,e.height),c.getImageData(-r,-r,e.width+2*r,e.height+2*r)},resolveURL:function(e){return Ye||(Ye=W.document.createElement("a")),Ye.href=e,Ye.href},hardwareConcurrency:W.navigator&&W.navigator.hardwareConcurrency||4,get devicePixelRatio(){return W.devicePixelRatio},get prefersReducedMotion(){return!!W.matchMedia&&(zt==null&&(zt=W.matchMedia("(prefers-reduced-motion: reduce)")),zt.matches)}},cr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Io={supported:!1,testSupport:function(e){!is&&Rr&&(Hn?er(e):Xt=e)}},is=!1,Hn=!1;function er(e){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Rr),e.isContextLost())return;Io.supported=!0}catch{}e.deleteTexture(r),is=!0}W.document&&((Rr=W.document.createElement("img")).onload=function(){Xt&&er(Xt),Xt=null,Hn=!0},Rr.onerror=function(){is=!0,Xt=null},Rr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Vi="01",on=function(e,r){this._transformRequestFn=e,this._customAccessToken=r,this._createSkuToken()};function An(e){return e.indexOf("mapbox:")===0}on.prototype._createSkuToken=function(){var e=function(){for(var r="",i=0;i<10;i++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Vi,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},on.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},on.prototype.transformRequest=function(e,r){return this._transformRequestFn&&this._transformRequestFn(e,r)||{url:e}},on.prototype.normalizeStyleURL=function(e,r){if(!An(e))return e;var i=cn(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||r)},on.prototype.normalizeGlyphsURL=function(e,r){if(!An(e))return e;var i=cn(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||r)},on.prototype.normalizeSourceURL=function(e,r){if(!An(e))return e;var i=cn(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||r)},on.prototype.normalizeSpriteURL=function(e,r,i,c){var f=cn(e);return An(e)?(f.path="/styles/v1"+f.path+"/sprite"+r+i,this._makeAPIURL(f,this._customAccessToken||c)):(f.path+=""+r+i,La(f))},on.prototype.normalizeTileURL=function(e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!An(e))return e;var i=cn(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(si.devicePixelRatio>=2||r===512?"@2x":"")+(Io.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var c=this._customAccessToken||function(f){for(var d=0,v=f;d<v.length;d+=1){var w=v[d].match(/^access_token=(.*)$/);if(w)return w[1]}return null}(i.params)||cr.ACCESS_TOKEN;return cr.REQUIRE_ACCESS_TOKEN&&c&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,c)},on.prototype.canonicalizeTileURL=function(e,r){var i=cn(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var c="mapbox://tiles/";c+=i.path.replace("/v4/","");var f=i.params;return r&&(f=f.filter(function(d){return!d.match(/^access_token=/)})),f.length&&(c+="?"+f.join("&")),c},on.prototype.canonicalizeTileset=function(e,r){for(var i=!!r&&An(r),c=[],f=0,d=e.tiles||[];f<d.length;f+=1){var v=d[f];qi(v)?c.push(this.canonicalizeTileURL(v,i)):c.push(v)}return c},on.prototype._makeAPIURL=function(e,r){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",c=cn(cr.API_URL);if(e.protocol=c.protocol,e.authority=c.authority,e.protocol==="http"){var f=e.params.indexOf("secure");f>=0&&e.params.splice(f,1)}if(c.path!=="/"&&(e.path=""+c.path+e.path),!cr.REQUIRE_ACCESS_TOKEN)return La(e);if(!(r=r||cr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(r[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+r),La(e)};var Ju=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function qi(e){return Ju.test(e)}var zs=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function cn(e){var r=e.match(zs);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function La(e){var r=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+r}function ko(e){if(!e)return null;var r=e.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(W.atob(r[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ci=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ci.prototype.getStorageKey=function(e){var r,i=ko(cr.ACCESS_TOKEN);return r=i&&i.u?W.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(c,f){return String.fromCharCode(Number("0x"+f))})):cr.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+r:"mapbox.eventData:"+r},Ci.prototype.fetchEventData=function(){var e=Gt("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var c=W.localStorage.getItem(r);c&&(this.eventData=JSON.parse(c));var f=W.localStorage.getItem(i);f&&(this.anonId=f)}catch{Ct("Unable to read from LocalStorage")}},Ci.prototype.saveEventData=function(){var e=Gt("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{W.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&W.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{Ct("Unable to write to LocalStorage")}},Ci.prototype.processRequests=function(e){},Ci.prototype.postEvent=function(e,r,i,c){var f=this;if(cr.EVENTS_URL){var d=cn(cr.EVENTS_URL);d.params.push("access_token="+(c||cr.ACCESS_TOKEN||""));var v={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:Vi,userId:this.anonId},w=r?ne(v,r):v,P={url:La(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([w])};this.pendingRequest=zr(P,function(I){f.pendingRequest=null,i(I),f.saveEventData(),f.processRequests(c)})}},Ci.prototype.queueRequest=function(e,r){this.queue.push(e),this.processRequests(r)};var mi,pa,Zi=function(e){function r(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.postMapLoadEvent=function(i,c,f,d){this.skuToken=f,(cr.EVENTS_URL&&d||cr.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(v){return An(v)||qi(v)}))&&this.queueRequest({id:c,timestamp:Date.now()},d)},r.prototype.processRequests=function(i){var c=this;if(!this.pendingRequest&&this.queue.length!==0){var f=this.queue.shift(),d=f.id,v=f.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),Ie(this.anonId)||(this.anonId=Se()),this.postEvent(v,{skuToken:this.skuToken},function(w){w||d&&(c.success[d]=!0)},i))}},r}(Ci),Ls=new(function(e){function r(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.postTurnstileEvent=function(i,c){cr.EVENTS_URL&&cr.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(f){return An(f)||qi(f)})&&this.queueRequest(Date.now(),c)},r.prototype.processRequests=function(i){var c=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var f=ko(cr.ACCESS_TOKEN),d=f?f.u:cr.ACCESS_TOKEN,v=d!==this.eventData.tokenU;Ie(this.anonId)||(this.anonId=Se(),v=!0);var w=this.queue.shift();if(this.eventData.lastSuccess){var P=new Date(this.eventData.lastSuccess),I=new Date(w),M=(w-this.eventData.lastSuccess)/864e5;v=v||M>=1||M<-1||P.getDate()!==I.getDate()}else v=!0;if(!v)return this.processRequests();this.postEvent(w,{"enabled.telemetry":!1},function(z){z||(c.eventData.lastSuccess=w,c.eventData.tokenU=d)},i)}},r}(Ci)),os=Ls.postTurnstileEvent.bind(Ls),Da=new Zi,Mn=Da.postMapLoadEvent.bind(Da),Gi=500,Wi=50;function Xn(){W.caches&&!mi&&(mi=W.caches.open("mapbox-tiles"))}function Ds(e){var r=e.indexOf("?");return r<0?e:e.slice(0,r)}var Ao,Un=1/0;function tr(){return Ao==null&&(Ao=W.OffscreenCanvas&&new W.OffscreenCanvas(1,1).getContext("2d")&&typeof W.createImageBitmap=="function"),Ao}var Os={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Os);var cu=function(e){function r(i,c,f){c===401&&qi(f)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=c,this.url=f,this.name=this.constructor.name,this.message=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},r}(Error),Oa=Ir()?function(){return self.worker&&self.worker.referrer}:function(){return(W.location.protocol==="blob:"?W.parent:W).location.href},$i,Ho,Mr=function(e,r){if(!(/^file:/.test(i=e.url)||/^file:/.test(Oa())&&!/^\w+:/.test(i))){if(W.fetch&&W.Request&&W.AbortController&&W.Request.prototype.hasOwnProperty("signal"))return function(c,f){var d,v=new W.AbortController,w=new W.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:Oa(),signal:v.signal}),P=!1,I=!1,M=(d=w.url).indexOf("sku=")>0&&qi(d);c.type==="json"&&w.headers.set("Accept","application/json");var z=function(N,X,J){if(!I){if(N&&N.message!=="SecurityError"&&Ct(N),X&&J)return R(X);var ae=Date.now();W.fetch(w).then(function(re){if(re.ok){var he=M?re.clone():null;return R(re,he,ae)}return f(new cu(re.statusText,re.status,c.url))}).catch(function(re){re.code!==20&&f(new Error(re.message))})}},R=function(N,X,J){(c.type==="arrayBuffer"?N.arrayBuffer():c.type==="json"?N.json():N.text()).then(function(ae){I||(X&&J&&function(re,he,_e){if(Xn(),mi){var Ee={status:he.status,statusText:he.statusText,headers:new W.Headers};he.headers.forEach(function(Fe,Ze){return Ee.headers.set(Ze,Fe)});var ke=Fn(he.headers.get("Cache-Control")||"");ke["no-store"]||(ke["max-age"]&&Ee.headers.set("Expires",new Date(_e+1e3*ke["max-age"]).toUTCString()),new Date(Ee.headers.get("Expires")).getTime()-_e<42e4||function(Fe,Ze){if(pa===void 0)try{new Response(new ReadableStream),pa=!0}catch{pa=!1}pa?Ze(Fe.body):Fe.blob().then(Ze)}(he,function(Fe){var Ze=new W.Response(Fe,Ee);Xn(),mi&&mi.then(function(Ke){return Ke.put(Ds(re.url),Ze)}).catch(function(Ke){return Ct(Ke.message)})}))}}(w,X,J),P=!0,f(null,ae,N.headers.get("Cache-Control"),N.headers.get("Expires")))}).catch(function(ae){I||f(new Error(ae.message))})};return M?function(N,X){if(Xn(),!mi)return X(null);var J=Ds(N.url);mi.then(function(ae){ae.match(J).then(function(re){var he=function(_e){if(!_e)return!1;var Ee=new Date(_e.headers.get("Expires")||0),ke=Fn(_e.headers.get("Cache-Control")||"");return Ee>Date.now()&&!ke["no-cache"]}(re);ae.delete(J),he&&ae.put(J,re.clone()),X(null,re,he)}).catch(X)}).catch(X)}(w,z):z(null,null),{cancel:function(){I=!0,P||v.abort()}}}(e,r);if(Ir()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,r,void 0,!0)}var i;return function(c,f){var d=new W.XMLHttpRequest;for(var v in d.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(d.responseType="arraybuffer"),c.headers)d.setRequestHeader(v,c.headers[v]);return c.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=c.credentials==="include",d.onerror=function(){f(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var w=d.response;if(c.type==="json")try{w=JSON.parse(d.response)}catch(P){return f(P)}f(null,w,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else f(new cu(d.statusText,d.status,c.url))},d.send(c.body),{cancel:function(){return d.abort()}}}(e,r)},as=function(e,r){return Mr(ne(e,{type:"arrayBuffer"}),r)},zr=function(e,r){return Mr(ne(e,{method:"POST"}),r)},L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";$i=[],Ho=0;var O=function(e,r){if(Io.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Ho>=cr.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:r,cancelled:!1,cancel:function(){this.cancelled=!0}};return $i.push(i),i}Ho++;var c=!1,f=function(){if(!c)for(c=!0,Ho--;$i.length&&Ho<cr.MAX_PARALLEL_IMAGE_REQUESTS;){var v=$i.shift();v.cancelled||(v.cancel=O(v.requestParameters,v.callback).cancel)}},d=as(e,function(v,w,P,I){f(),v?r(v):w&&(tr()?function(M,z){var R=new W.Blob([new Uint8Array(M)],{type:"image/png"});W.createImageBitmap(R).then(function(N){z(null,N)}).catch(function(N){z(new Error("Could not load image because of "+N.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(w,r):function(M,z,R,N){var X=new W.Image,J=W.URL;X.onload=function(){z(null,X),J.revokeObjectURL(X.src),X.onload=null,W.requestAnimationFrame(function(){X.src=L})},X.onerror=function(){return z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ae=new W.Blob([new Uint8Array(M)],{type:"image/png"});X.cacheControl=R,X.expires=N,X.src=M.byteLength?J.createObjectURL(ae):L}(w,r,P,I))});return{cancel:function(){d.cancel(),f()}}};function U(e,r,i){i[e]&&i[e].indexOf(r)!==-1||(i[e]=i[e]||[],i[e].push(r))}function G(e,r,i){if(i&&i[e]){var c=i[e].indexOf(r);c!==-1&&i[e].splice(c,1)}}var K=function(e,r){r===void 0&&(r={}),ne(this,r),this.type=e},ue=function(e){function r(i,c){c===void 0&&(c={}),e.call(this,"error",ne({error:i},c))}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(K),pe=function(){};pe.prototype.on=function(e,r){return this._listeners=this._listeners||{},U(e,r,this._listeners),this},pe.prototype.off=function(e,r){return G(e,r,this._listeners),G(e,r,this._oneTimeListeners),this},pe.prototype.once=function(e,r){return this._oneTimeListeners=this._oneTimeListeners||{},U(e,r,this._oneTimeListeners),this},pe.prototype.fire=function(e,r){typeof e=="string"&&(e=new K(e,r||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var c=0,f=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];c<f.length;c+=1)f[c].call(this,e);for(var d=0,v=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<v.length;d+=1){var w=v[d];G(i,w,this._oneTimeListeners),w.call(this,e)}var P=this._eventedParent;P&&(ne(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),P.fire(e))}else e instanceof ue&&console.error(e.error);return this},pe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},pe.prototype.setEventedParent=function(e,r){return this._eventedParent=e,this._eventedParentData=r,this};var V={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ee=function(e,r,i,c){this.message=(e?e+": ":"")+i,c&&(this.identifier=c),r!=null&&r.__line__&&(this.line=r.__line__)};function ye(e){var r=e.value;return r?[new ee(e.key,r,"constants have been deprecated as of v8")]:[]}function Ue(e){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];for(var c=0,f=r;c<f.length;c+=1){var d=f[c];for(var v in d)e[v]=d[v]}return e}function qe(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ae(e){if(Array.isArray(e))return e.map(Ae);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var r={};for(var i in e)r[i]=Ae(e[i]);return r}return qe(e)}var Ve=function(e){function r(i,c){e.call(this,c),this.message=c,this.key=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(Error),pt=function(e,r){r===void 0&&(r=[]),this.parent=e,this.bindings={};for(var i=0,c=r;i<c.length;i+=1){var f=c[i];this.bindings[f[0]]=f[1]}};pt.prototype.concat=function(e){return new pt(this,e)},pt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},pt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var st={kind:"null"},ze={kind:"number"},tt={kind:"string"},Je={kind:"boolean"},Qe={kind:"color"},Wt={kind:"object"},rt={kind:"value"},or={kind:"collator"},kr={kind:"formatted"},Rt={kind:"resolvedImage"};function hr(e,r){return{kind:"array",itemType:e,N:r}}function ur(e){if(e.kind==="array"){var r=ur(e.itemType);return typeof e.N=="number"?"array<"+r+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+r+">"}return e.kind}var Nn=[st,ze,tt,Je,Qe,kr,Wt,hr(rt),Rt];function vr(e,r){if(r.kind==="error")return null;if(e.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!vr(e.itemType,r.itemType))&&(typeof e.N!="number"||e.N===r.N))return null}else{if(e.kind===r.kind)return null;if(e.kind==="value"){for(var i=0,c=Nn;i<c.length;i+=1)if(!vr(c[i],r))return null}}return"Expected "+ur(e)+" but found "+ur(r)+" instead."}function tn(e,r){return r.some(function(i){return i.kind===e.kind})}function Sr(e,r){return r.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Dt=C(function(e,r){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function c(w){return(w=Math.round(w))<0?0:w>255?255:w}function f(w){return c(w[w.length-1]==="%"?parseFloat(w)/100*255:parseInt(w))}function d(w){return(P=w[w.length-1]==="%"?parseFloat(w)/100:parseFloat(w))<0?0:P>1?1:P;var P}function v(w,P,I){return I<0?I+=1:I>1&&(I-=1),6*I<1?w+(P-w)*I*6:2*I<1?P:3*I<2?w+(P-w)*(2/3-I)*6:w}try{r.parseCSSColor=function(w){var P,I=w.replace(/ /g,"").toLowerCase();if(I in i)return i[I].slice();if(I[0]==="#")return I.length===4?(P=parseInt(I.substr(1),16))>=0&&P<=4095?[(3840&P)>>4|(3840&P)>>8,240&P|(240&P)>>4,15&P|(15&P)<<4,1]:null:I.length===7&&(P=parseInt(I.substr(1),16))>=0&&P<=16777215?[(16711680&P)>>16,(65280&P)>>8,255&P,1]:null;var M=I.indexOf("("),z=I.indexOf(")");if(M!==-1&&z+1===I.length){var R=I.substr(0,M),N=I.substr(M+1,z-(M+1)).split(","),X=1;switch(R){case"rgba":if(N.length!==4)return null;X=d(N.pop());case"rgb":return N.length!==3?null:[f(N[0]),f(N[1]),f(N[2]),X];case"hsla":if(N.length!==4)return null;X=d(N.pop());case"hsl":if(N.length!==3)return null;var J=(parseFloat(N[0])%360+360)%360/360,ae=d(N[1]),re=d(N[2]),he=re<=.5?re*(ae+1):re+ae-re*ae,_e=2*re-he;return[c(255*v(_e,he,J+1/3)),c(255*v(_e,he,J)),c(255*v(_e,he,J-1/3)),X];default:return null}}return null}}catch{}}).parseCSSColor,fr=function(e,r,i,c){c===void 0&&(c=1),this.r=e,this.g=r,this.b=i,this.a=c};fr.parse=function(e){if(e){if(e instanceof fr)return e;if(typeof e=="string"){var r=Dt(e);if(r)return new fr(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}},fr.prototype.toString=function(){var e=this.toArray(),r=e[1],i=e[2],c=e[3];return"rgba("+Math.round(e[0])+","+Math.round(r)+","+Math.round(i)+","+c+")"},fr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},fr.black=new fr(0,0,0,1),fr.white=new fr(1,1,1,1),fr.transparent=new fr(0,0,0,0),fr.red=new fr(1,0,0,1);var ui=function(e,r,i){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ui.prototype.compare=function(e,r){return this.collator.compare(e,r)},ui.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Hi=function(e,r,i,c,f){this.text=e,this.image=r,this.scale=i,this.fontStack=c,this.textColor=f},Nr=function(e){this.sections=e};Nr.fromString=function(e){return new Nr([new Hi(e,null,null,null,null)])},Nr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Nr.factory=function(e){return e instanceof Nr?e:Nr.fromString(e)},Nr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Nr.prototype.serialize=function(){for(var e=["format"],r=0,i=this.sections;r<i.length;r+=1){var c=i[r];if(c.image)e.push(["image",c.image.name]);else{e.push(c.text);var f={};c.fontStack&&(f["text-font"]=["literal",c.fontStack.split(",")]),c.scale&&(f["font-scale"]=c.scale),c.textColor&&(f["text-color"]=["rgba"].concat(c.textColor.toArray())),e.push(f)}}return e};var Kn=function(e){this.name=e.name,this.available=e.available};function Xo(e,r,i,c){return typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:"Invalid rgba value ["+[e,r,i,c].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof c=="number"?[e,r,i,c]:[e,r,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function mo(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof fr||e instanceof ui||e instanceof Nr||e instanceof Kn)return!0;if(Array.isArray(e)){for(var r=0,i=e;r<i.length;r+=1)if(!mo(i[r]))return!1;return!0}if(typeof e=="object"){for(var c in e)if(!mo(e[c]))return!1;return!0}return!1}function rn(e){if(e===null)return st;if(typeof e=="string")return tt;if(typeof e=="boolean")return Je;if(typeof e=="number")return ze;if(e instanceof fr)return Qe;if(e instanceof ui)return or;if(e instanceof Nr)return kr;if(e instanceof Kn)return Rt;if(Array.isArray(e)){for(var r,i=e.length,c=0,f=e;c<f.length;c+=1){var d=rn(f[c]);if(r){if(r===d)continue;r=rt;break}r=d}return hr(r||rt,i)}return Wt}function Rs(e){var r=typeof e;return e===null?"":r==="string"||r==="number"||r==="boolean"?String(e):e instanceof fr||e instanceof Nr||e instanceof Kn?e.toString():JSON.stringify(e)}Kn.prototype.toString=function(){return this.name},Kn.fromString=function(e){return e?new Kn({name:e,available:!1}):null},Kn.prototype.serialize=function(){return["image",this.name]};var ii=function(e,r){this.type=e,this.value=r};ii.parse=function(e,r){if(e.length!==2)return r.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!mo(e[1]))return r.error("invalid value");var i=e[1],c=rn(i),f=r.expectedType;return c.kind!=="array"||c.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(c=f),new ii(c,i)},ii.prototype.evaluate=function(){return this.value},ii.prototype.eachChild=function(){},ii.prototype.outputDefined=function(){return!0},ii.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof fr?["rgba"].concat(this.value.toArray()):this.value instanceof Nr?this.value.serialize():this.value};var zn=function(e){this.name="ExpressionEvaluationError",this.message=e};zn.prototype.toJSON=function(){return this.message};var Ii={string:tt,number:ze,boolean:Je,object:Wt},Vr=function(e,r){this.type=e,this.args=r};Vr.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i,c=1,f=e[0];if(f==="array"){var d,v;if(e.length>2){var w=e[1];if(typeof w!="string"||!(w in Ii)||w==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);d=Ii[w],c++}else d=rt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);v=e[2],c++}i=hr(d,v)}else i=Ii[f];for(var P=[];c<e.length;c++){var I=r.parse(e[c],c,rt);if(!I)return null;P.push(I)}return new Vr(i,P)},Vr.prototype.evaluate=function(e){for(var r=0;r<this.args.length;r++){var i=this.args[r].evaluate(e);if(!vr(this.type,rn(i)))return i;if(r===this.args.length-1)throw new zn("Expected value to be of type "+ur(this.type)+", but found "+ur(rn(i))+" instead.")}return null},Vr.prototype.eachChild=function(e){this.args.forEach(e)},Vr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Vr.prototype.serialize=function(){var e=this.type,r=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){r.push(i.kind);var c=e.N;(typeof c=="number"||this.args.length>1)&&r.push(c)}}return r.concat(this.args.map(function(f){return f.serialize()}))};var yo=function(e){this.type=kr,this.sections=e};yo.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return r.error("First argument must be an image or text section.");for(var c=[],f=!1,d=1;d<=e.length-1;++d){var v=e[d];if(f&&typeof v=="object"&&!Array.isArray(v)){f=!1;var w=null;if(v["font-scale"]&&!(w=r.parse(v["font-scale"],1,ze)))return null;var P=null;if(v["text-font"]&&!(P=r.parse(v["text-font"],1,hr(tt))))return null;var I=null;if(v["text-color"]&&!(I=r.parse(v["text-color"],1,Qe)))return null;var M=c[c.length-1];M.scale=w,M.font=P,M.textColor=I}else{var z=r.parse(e[d],1,rt);if(!z)return null;var R=z.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,c.push({content:z,scale:null,font:null,textColor:null})}}return new yo(c)},yo.prototype.evaluate=function(e){return new Nr(this.sections.map(function(r){var i=r.content.evaluate(e);return rn(i)===Rt?new Hi("",i,null,null,null):new Hi(Rs(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))},yo.prototype.eachChild=function(e){for(var r=0,i=this.sections;r<i.length;r+=1){var c=i[r];e(c.content),c.scale&&e(c.scale),c.font&&e(c.font),c.textColor&&e(c.textColor)}},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){for(var e=["format"],r=0,i=this.sections;r<i.length;r+=1){var c=i[r];e.push(c.content.serialize());var f={};c.scale&&(f["font-scale"]=c.scale.serialize()),c.font&&(f["text-font"]=c.font.serialize()),c.textColor&&(f["text-color"]=c.textColor.serialize()),e.push(f)}return e};var ki=function(e){this.type=Rt,this.input=e};ki.parse=function(e,r){if(e.length!==2)return r.error("Expected two arguments.");var i=r.parse(e[1],1,tt);return i?new ki(i):r.error("No image name provided.")},ki.prototype.evaluate=function(e){var r=this.input.evaluate(e),i=Kn.fromString(r);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(r)>-1),i},ki.prototype.eachChild=function(e){e(this.input)},ki.prototype.outputDefined=function(){return!1},ki.prototype.serialize=function(){return["image",this.input.serialize()]};var jl={"to-boolean":Je,"to-color":Qe,"to-number":ze,"to-string":tt},Ai=function(e,r){this.type=e,this.args=r};Ai.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return r.error("Expected one argument.");for(var c=jl[i],f=[],d=1;d<e.length;d++){var v=r.parse(e[d],d,rt);if(!v)return null;f.push(v)}return new Ai(c,f)},Ai.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var r,i,c=0,f=this.args;c<f.length;c+=1){if(i=null,(r=f[c].evaluate(e))instanceof fr)return r;if(typeof r=="string"){var d=e.parseColor(r);if(d)return d}else if(Array.isArray(r)&&!(i=r.length<3||r.length>4?"Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":Xo(r[0],r[1],r[2],r[3])))return new fr(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new zn(i||"Could not parse color from value '"+(typeof r=="string"?r:String(JSON.stringify(r)))+"'")}if(this.type.kind==="number"){for(var v=null,w=0,P=this.args;w<P.length;w+=1){if((v=P[w].evaluate(e))===null)return 0;var I=Number(v);if(!isNaN(I))return I}throw new zn("Could not convert "+JSON.stringify(v)+" to number.")}return this.type.kind==="formatted"?Nr.fromString(Rs(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Kn.fromString(Rs(this.args[0].evaluate(e))):Rs(this.args[0].evaluate(e))},Ai.prototype.eachChild=function(e){this.args.forEach(e)},Ai.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ai.prototype.serialize=function(){if(this.type.kind==="formatted")return new yo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ki(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(r){e.push(r.serialize())}),e};var S=["Unknown","Point","LineString","Polygon"],T=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};T.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},T.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?S[this.feature.type]:this.feature.type:null},T.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},T.prototype.canonicalID=function(){return this.canonical},T.prototype.properties=function(){return this.feature&&this.feature.properties||{}},T.prototype.parseColor=function(e){var r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=fr.parse(e)),r};var B=function(e,r,i,c){this.name=e,this.type=r,this._evaluate=i,this.args=c};B.prototype.evaluate=function(e){return this._evaluate(e,this.args)},B.prototype.eachChild=function(e){this.args.forEach(e)},B.prototype.outputDefined=function(){return!1},B.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},B.parse=function(e,r){var i,c=e[0],f=B.definitions[c];if(!f)return r.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(f)?f[0]:f.type,v=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,w=v.filter(function(Pt){var ot=Pt[0];return!Array.isArray(ot)||ot.length===e.length-1}),P=null,I=0,M=w;I<M.length;I+=1){var z=M[I],R=z[0],N=z[1];P=new lr(r.registry,r.path,null,r.scope);for(var X=[],J=!1,ae=1;ae<e.length;ae++){var re=e[ae],he=Array.isArray(R)?R[ae-1]:R.type,_e=P.parse(re,1+X.length,he);if(!_e){J=!0;break}X.push(_e)}if(!J)if(Array.isArray(R)&&R.length!==X.length)P.error("Expected "+R.length+" arguments, but found "+X.length+" instead.");else{for(var Ee=0;Ee<X.length;Ee++){var ke=Array.isArray(R)?R[Ee]:R.type,Fe=X[Ee];P.concat(Ee+1).checkSubtype(ke,Fe.type)}if(P.errors.length===0)return new B(c,d,N,X)}}if(w.length===1)(i=r.errors).push.apply(i,P.errors);else{for(var Ze=(w.length?w:v).map(function(Pt){var ot;return ot=Pt[0],Array.isArray(ot)?"("+ot.map(ur).join(", ")+")":"("+ur(ot.type)+"...)"}).join(" | "),Ke=[],xt=1;xt<e.length;xt++){var it=r.parse(e[xt],1+Ke.length);if(!it)return null;Ke.push(ur(it.type))}r.error("Expected arguments of type "+Ze+", but found ("+Ke.join(", ")+") instead.")}return null},B.register=function(e,r){for(var i in B.definitions=r,r)e[i]=B};var le=function(e,r,i){this.type=or,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=r};function ge(e,r){e[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[1]),e[2]=Math.max(e[2],r[0]),e[3]=Math.max(e[3],r[1])}function fe(e,r){return!(e[0]<=r[0]||e[2]>=r[2]||e[1]<=r[1]||e[3]>=r[3])}function we(e,r){var i=(180+e[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,f=Math.pow(2,r.z);return[Math.round(i*f*8192),Math.round(c*f*8192)]}function $e(e,r,i){return r[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-r[0])*(e[1]-r[1])/(i[1]-r[1])+r[0]}function Ge(e,r){for(var i,c,f,d,v,w,P,I=!1,M=0,z=r.length;M<z;M++)for(var R=r[M],N=0,X=R.length;N<X-1;N++){if((d=(i=e)[0]-(c=R[N])[0])*(P=i[1]-(f=R[N+1])[1])-(w=i[0]-f[0])*(v=i[1]-c[1])==0&&d*w<=0&&v*P<=0)return!1;$e(e,R[N],R[N+1])&&(I=!I)}return I}function dt(e,r){for(var i=0;i<r.length;i++)if(Ge(e,r[i]))return!0;return!1}function Te(e,r,i,c){var f=c[0]-i[0],d=c[1]-i[1],v=(e[0]-i[0])*d-f*(e[1]-i[1]),w=(r[0]-i[0])*d-f*(r[1]-i[1]);return v>0&&w<0||v<0&&w>0}function ut(e,r,i){for(var c=0,f=i;c<f.length;c+=1)for(var d=f[c],v=0;v<d.length-1;++v)if((z=[(M=d[v+1])[0]-(I=d[v])[0],M[1]-I[1]])[0]*(R=[(P=r)[0]-(w=e)[0],P[1]-w[1]])[1]-z[1]*R[0]!=0&&Te(w,P,I,M)&&Te(I,M,w,P))return!0;var w,P,I,M,z,R;return!1}function mt(e,r){for(var i=0;i<e.length;++i)if(!Ge(e[i],r))return!1;for(var c=0;c<e.length-1;++c)if(ut(e[c],e[c+1],r))return!1;return!0}function Ft(e,r){for(var i=0;i<r.length;i++)if(mt(e,r[i]))return!0;return!1}function Vt(e,r,i){for(var c=[],f=0;f<e.length;f++){for(var d=[],v=0;v<e[f].length;v++){var w=we(e[f][v],i);ge(r,w),d.push(w)}c.push(d)}return c}function an(e,r,i){for(var c=[],f=0;f<e.length;f++){var d=Vt(e[f],r,i);c.push(d)}return c}function Be(e,r,i,c){if(e[0]<i[0]||e[0]>i[2]){var f=.5*c,d=e[0]-i[0]>f?-c:i[0]-e[0]>f?c:0;d===0&&(d=e[0]-i[2]>f?-c:i[2]-e[0]>f?c:0),e[0]+=d}ge(r,e)}function gt(e,r,i,c){for(var f=8192*Math.pow(2,c.z),d=[8192*c.x,8192*c.y],v=[],w=0,P=e;w<P.length;w+=1)for(var I=0,M=P[w];I<M.length;I+=1){var z=M[I],R=[z.x+d[0],z.y+d[1]];Be(R,r,i,f),v.push(R)}return v}function Pr(e,r,i,c){for(var f,d=8192*Math.pow(2,c.z),v=[8192*c.x,8192*c.y],w=[],P=0,I=e;P<I.length;P+=1){for(var M=[],z=0,R=I[P];z<R.length;z+=1){var N=R[z],X=[N.x+v[0],N.y+v[1]];ge(r,X),M.push(X)}w.push(M)}if(r[2]-r[0]<=d/2){(f=r)[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var J=0,ae=w;J<ae.length;J+=1)for(var re=0,he=ae[J];re<he.length;re+=1)Be(he[re],r,i,d)}return w}le.parse=function(e,r){if(e.length!==2)return r.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return r.error("Collator options argument must be an object.");var c=r.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,Je);if(!c)return null;var f=r.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,Je);if(!f)return null;var d=null;return i.locale&&!(d=r.parse(i.locale,1,tt))?null:new le(c,f,d)},le.prototype.evaluate=function(e){return new ui(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},le.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},le.prototype.outputDefined=function(){return!1},le.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var ar=function(e,r){this.type=Je,this.geojson=e,this.geometries=r};function Lr(e){if(e instanceof B&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof ar)return!1;var r=!0;return e.eachChild(function(i){r&&!Lr(i)&&(r=!1)}),r}function It(e){if(e instanceof B&&e.name==="feature-state")return!1;var r=!0;return e.eachChild(function(i){r&&!It(i)&&(r=!1)}),r}function Mi(e,r){if(e instanceof B&&r.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(c){i&&!Mi(c,r)&&(i=!1)}),i}ar.parse=function(e,r){if(e.length!==2)return r.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(mo(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var c=0;c<i.features.length;++c){var f=i.features[c].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new ar(i,i.features[c].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new ar(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new ar(i,i)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ar.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,i){var c=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],d=r.canonicalID();if(i.type==="Polygon"){var v=Vt(i.coordinates,f,d),w=gt(r.geometry(),c,f,d);if(!fe(c,f))return!1;for(var P=0,I=w;P<I.length;P+=1)if(!Ge(I[P],v))return!1}if(i.type==="MultiPolygon"){var M=an(i.coordinates,f,d),z=gt(r.geometry(),c,f,d);if(!fe(c,f))return!1;for(var R=0,N=z;R<N.length;R+=1)if(!dt(N[R],M))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,i){var c=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],d=r.canonicalID();if(i.type==="Polygon"){var v=Vt(i.coordinates,f,d),w=Pr(r.geometry(),c,f,d);if(!fe(c,f))return!1;for(var P=0,I=w;P<I.length;P+=1)if(!mt(I[P],v))return!1}if(i.type==="MultiPolygon"){var M=an(i.coordinates,f,d),z=Pr(r.geometry(),c,f,d);if(!fe(c,f))return!1;for(var R=0,N=z;R<N.length;R+=1)if(!Ft(N[R],M))return!1}return!0}(e,this.geometries)}return!1},ar.prototype.eachChild=function(){},ar.prototype.outputDefined=function(){return!0},ar.prototype.serialize=function(){return["within",this.geojson]};var li=function(e,r){this.type=r.type,this.name=e,this.boundExpression=r};li.parse=function(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");var i=e[1];return r.scope.has(i)?new li(i,r.scope.get(i)):r.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},li.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},li.prototype.eachChild=function(){},li.prototype.outputDefined=function(){return!1},li.prototype.serialize=function(){return["var",this.name]};var lr=function(e,r,i,c,f){r===void 0&&(r=[]),c===void 0&&(c=new pt),f===void 0&&(f=[]),this.registry=e,this.path=r,this.key=r.map(function(d){return"["+d+"]"}).join(""),this.scope=c,this.errors=f,this.expectedType=i};function yi(e,r){for(var i,c=e.length-1,f=0,d=c,v=0;f<=d;)if((i=e[v=Math.floor((f+d)/2)])<=r){if(v===c||r<e[v+1])return v;f=v+1}else{if(!(i>r))throw new zn("Input is not a number.");d=v-1}return 0}lr.prototype.parse=function(e,r,i,c,f){return f===void 0&&(f={}),r?this.concat(r,i,c)._parse(e,f):this._parse(e,f)},lr.prototype._parse=function(e,r){function i(I,M,z){return z==="assert"?new Vr(M,[I]):z==="coerce"?new Ai(M,[I]):I}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var c=e[0];if(typeof c!="string")return this.error("Expression name must be a string, but found "+typeof c+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var f=this.registry[c];if(f){var d=f.parse(e,this);if(!d)return null;if(this.expectedType){var v=this.expectedType,w=d.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||w.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string"){if(this.checkSubtype(v,w))return null}else d=i(d,v,r.typeAnnotation||"coerce");else d=i(d,v,r.typeAnnotation||"assert")}if(!(d instanceof ii)&&d.type.kind!=="resolvedImage"&&function I(M){if(M instanceof li)return I(M.boundExpression);if(M instanceof B&&M.name==="error"||M instanceof le||M instanceof ar)return!1;var z=M instanceof Ai||M instanceof Vr,R=!0;return M.eachChild(function(N){R=z?R&&I(N):R&&N instanceof ii}),!!R&&Lr(M)&&Mi(M,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var P=new T;try{d=new ii(d.type,d.evaluate(P))}catch(I){return this.error(I.message),null}}return d}return this.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},lr.prototype.concat=function(e,r,i){var c=typeof e=="number"?this.path.concat(e):this.path,f=i?this.scope.concat(i):this.scope;return new lr(this.registry,c,r||null,f,this.errors)},lr.prototype.error=function(e){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];var c=""+this.key+r.map(function(f){return"["+f+"]"}).join("");this.errors.push(new Ve(c,e))},lr.prototype.checkSubtype=function(e,r){var i=vr(e,r);return i&&this.error(i),i};var qr=function(e,r,i){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(var c=0,f=i;c<f.length;c+=1){var d=f[c],v=d[1];this.labels.push(d[0]),this.outputs.push(v)}};function nn(e,r,i){return e*(1-i)+r*i}qr.parse=function(e,r){if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");var i=r.parse(e[1],1,ze);if(!i)return null;var c=[],f=null;r.expectedType&&r.expectedType.kind!=="value"&&(f=r.expectedType);for(var d=1;d<e.length;d+=2){var v=d===1?-1/0:e[d],w=e[d+1],P=d,I=d+1;if(typeof v!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(c.length&&c[c.length-1][0]>=v)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);var M=r.parse(w,I,f);if(!M)return null;f=f||M.type,c.push([v,M])}return new qr(f,i,c)},qr.prototype.evaluate=function(e){var r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);var c=this.input.evaluate(e);if(c<=r[0])return i[0].evaluate(e);var f=r.length;return c>=r[f-1]?i[f-1].evaluate(e):i[yi(r,c)].evaluate(e)},qr.prototype.eachChild=function(e){e(this.input);for(var r=0,i=this.outputs;r<i.length;r+=1)e(i[r])},qr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},qr.prototype.serialize=function(){for(var e=["step",this.input.serialize()],r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e};var Ra=Object.freeze({__proto__:null,number:nn,color:function(e,r,i){return new fr(nn(e.r,r.r,i),nn(e.g,r.g,i),nn(e.b,r.b,i),nn(e.a,r.a,i))},array:function(e,r,i){return e.map(function(c,f){return nn(c,r[f],i)})}}),vo=6/29*3*(6/29),Vl=Math.PI/180,ql=180/Math.PI;function Yu(e){return e>.008856451679035631?Math.pow(e,1/3):e/vo+4/29}function pu(e){return e>6/29?e*e*e:vo*(e-4/29)}function ss(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function hu(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Qu(e){var r=hu(e.r),i=hu(e.g),c=hu(e.b),f=Yu((.4124564*r+.3575761*i+.1804375*c)/.95047),d=Yu((.2126729*r+.7151522*i+.072175*c)/1);return{l:116*d-16,a:500*(f-d),b:200*(d-Yu((.0193339*r+.119192*i+.9503041*c)/1.08883)),alpha:e.a}}function Zl(e){var r=(e.l+16)/116,i=isNaN(e.a)?r:r+e.a/500,c=isNaN(e.b)?r:r-e.b/200;return r=1*pu(r),i=.95047*pu(i),c=1.08883*pu(c),new fr(ss(3.2404542*i-1.5371385*r-.4985314*c),ss(-.969266*i+1.8760108*r+.041556*c),ss(.0556434*i-.2040259*r+1.0572252*c),e.alpha)}function Fa(e,r,i){var c=r-e;return e+i*(c>180||c<-180?c-360*Math.round(c/360):c)}var us={forward:Qu,reverse:Zl,interpolate:function(e,r,i){return{l:nn(e.l,r.l,i),a:nn(e.a,r.a,i),b:nn(e.b,r.b,i),alpha:nn(e.alpha,r.alpha,i)}}},Fs={forward:function(e){var r=Qu(e),i=r.l,c=r.a,f=r.b,d=Math.atan2(f,c)*ql;return{h:d<0?d+360:d,c:Math.sqrt(c*c+f*f),l:i,alpha:e.a}},reverse:function(e){var r=e.h*Vl,i=e.c;return Zl({l:e.l,a:Math.cos(r)*i,b:Math.sin(r)*i,alpha:e.alpha})},interpolate:function(e,r,i){return{h:Fa(e.h,r.h,i),c:nn(e.c,r.c,i),l:nn(e.l,r.l,i),alpha:nn(e.alpha,r.alpha,i)}}},Gl=Object.freeze({__proto__:null,lab:us,hcl:Fs}),Pn=function(e,r,i,c,f){this.type=e,this.operator=r,this.interpolation=i,this.input=c,this.labels=[],this.outputs=[];for(var d=0,v=f;d<v.length;d+=1){var w=v[d],P=w[1];this.labels.push(w[0]),this.outputs.push(P)}};function Ba(e,r,i,c){var f=c-i,d=e-i;return f===0?0:r===1?d/f:(Math.pow(r,d)-1)/(Math.pow(r,f)-1)}Pn.interpolationFactor=function(e,r,i,c){var f=0;if(e.name==="exponential")f=Ba(r,e.base,i,c);else if(e.name==="linear")f=Ba(r,1,i,c);else if(e.name==="cubic-bezier"){var d=e.controlPoints;f=new k(d[0],d[1],d[2],d[3]).solve(Ba(r,1,i,c))}return f},Pn.parse=function(e,r){var i=e[0],c=e[1],f=e[2],d=e.slice(3);if(!Array.isArray(c)||c.length===0)return r.error("Expected an interpolation type expression.",1);if(c[0]==="linear")c={name:"linear"};else if(c[0]==="exponential"){var v=c[1];if(typeof v!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);c={name:"exponential",base:v}}else{if(c[0]!=="cubic-bezier")return r.error("Unknown interpolation type "+String(c[0]),1,0);var w=c.slice(1);if(w.length!==4||w.some(function(ae){return typeof ae!="number"||ae<0||ae>1}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);c={name:"cubic-bezier",controlPoints:w}}if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(f=r.parse(f,2,ze)))return null;var P=[],I=null;i==="interpolate-hcl"||i==="interpolate-lab"?I=Qe:r.expectedType&&r.expectedType.kind!=="value"&&(I=r.expectedType);for(var M=0;M<d.length;M+=2){var z=d[M],R=d[M+1],N=M+3,X=M+4;if(typeof z!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(P.length&&P[P.length-1][0]>=z)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',N);var J=r.parse(R,X,I);if(!J)return null;I=I||J.type,P.push([z,J])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new Pn(I,i,c,f,P):r.error("Type "+ur(I)+" is not interpolatable.")},Pn.prototype.evaluate=function(e){var r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);var c=this.input.evaluate(e);if(c<=r[0])return i[0].evaluate(e);var f=r.length;if(c>=r[f-1])return i[f-1].evaluate(e);var d=yi(r,c),v=Pn.interpolationFactor(this.interpolation,c,r[d],r[d+1]),w=i[d].evaluate(e),P=i[d+1].evaluate(e);return this.operator==="interpolate"?Ra[this.type.kind.toLowerCase()](w,P,v):this.operator==="interpolate-hcl"?Fs.reverse(Fs.interpolate(Fs.forward(w),Fs.forward(P),v)):us.reverse(us.interpolate(us.forward(w),us.forward(P),v))},Pn.prototype.eachChild=function(e){e(this.input);for(var r=0,i=this.outputs;r<i.length;r+=1)e(i[r])},Pn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Pn.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var r=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)r.push(this.labels[i],this.outputs[i].serialize());return r};var Mo=function(e,r){this.type=e,this.args=r};Mo.parse=function(e,r){if(e.length<2)return r.error("Expectected at least one argument.");var i=null,c=r.expectedType;c&&c.kind!=="value"&&(i=c);for(var f=[],d=0,v=e.slice(1);d<v.length;d+=1){var w=r.parse(v[d],1+f.length,i,void 0,{typeAnnotation:"omit"});if(!w)return null;i=i||w.type,f.push(w)}var P=c&&f.some(function(I){return vr(c,I.type)});return new Mo(P?rt:i,f)},Mo.prototype.evaluate=function(e){for(var r,i=null,c=0,f=0,d=this.args;f<d.length&&(c++,(i=d[f].evaluate(e))&&i instanceof Kn&&!i.available&&(r||(r=i.name),i=null,c===this.args.length&&(i=r)),i===null);f+=1);return i},Mo.prototype.eachChild=function(e){this.args.forEach(e)},Mo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Mo.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(r){e.push(r.serialize())}),e};var zo=function(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r};zo.prototype.evaluate=function(e){return this.result.evaluate(e)},zo.prototype.eachChild=function(e){for(var r=0,i=this.bindings;r<i.length;r+=1)e(i[r][1]);e(this.result)},zo.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],c=1;c<e.length-1;c+=2){var f=e[c];if(typeof f!="string")return r.error("Expected string, but found "+typeof f+" instead.",c);if(/[^a-zA-Z0-9_]/.test(f))return r.error("Variable names must contain only alphanumeric characters or '_'.",c);var d=r.parse(e[c+1],c+1);if(!d)return null;i.push([f,d])}var v=r.parse(e[e.length-1],e.length-1,r.expectedType,i);return v?new zo(i,v):null},zo.prototype.outputDefined=function(){return this.result.outputDefined()},zo.prototype.serialize=function(){for(var e=["let"],r=0,i=this.bindings;r<i.length;r+=1){var c=i[r];e.push(c[0],c[1].serialize())}return e.push(this.result.serialize()),e};var Ko=function(e,r,i){this.type=e,this.index=r,this.input=i};Ko.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,ze),c=r.parse(e[2],2,hr(r.expectedType||rt));return i&&c?new Ko(c.type.itemType,i,c):null},Ko.prototype.evaluate=function(e){var r=this.index.evaluate(e),i=this.input.evaluate(e);if(r<0)throw new zn("Array index out of bounds: "+r+" < 0.");if(r>=i.length)throw new zn("Array index out of bounds: "+r+" > "+(i.length-1)+".");if(r!==Math.floor(r))throw new zn("Array index must be an integer, but found "+r+" instead.");return i[r]},Ko.prototype.eachChild=function(e){e(this.index),e(this.input)},Ko.prototype.outputDefined=function(){return!1},Ko.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var go=function(e,r){this.type=Je,this.needle=e,this.haystack=r};go.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,rt),c=r.parse(e[2],2,rt);return i&&c?tn(i.type,[Je,tt,ze,st,rt])?new go(i,c):r.error("Expected first argument to be of type boolean, string, number or null, but found "+ur(i.type)+" instead"):null},go.prototype.evaluate=function(e){var r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Sr(r,["boolean","string","number","null"]))throw new zn("Expected first argument to be of type boolean, string, number or null, but found "+ur(rn(r))+" instead.");if(!Sr(i,["string","array"]))throw new zn("Expected second argument to be of type array or string, but found "+ur(rn(i))+" instead.");return i.indexOf(r)>=0},go.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},go.prototype.outputDefined=function(){return!0},go.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ha=function(e,r,i){this.type=ze,this.needle=e,this.haystack=r,this.fromIndex=i};ha.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,rt),c=r.parse(e[2],2,rt);if(!i||!c)return null;if(!tn(i.type,[Je,tt,ze,st,rt]))return r.error("Expected first argument to be of type boolean, string, number or null, but found "+ur(i.type)+" instead");if(e.length===4){var f=r.parse(e[3],3,ze);return f?new ha(i,c,f):null}return new ha(i,c)},ha.prototype.evaluate=function(e){var r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Sr(r,["boolean","string","number","null"]))throw new zn("Expected first argument to be of type boolean, string, number or null, but found "+ur(rn(r))+" instead.");if(!Sr(i,["string","array"]))throw new zn("Expected second argument to be of type array or string, but found "+ur(rn(i))+" instead.");if(this.fromIndex){var c=this.fromIndex.evaluate(e);return i.indexOf(r,c)}return i.indexOf(r)},ha.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},ha.prototype.outputDefined=function(){return!1},ha.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ua=function(e,r,i,c,f,d){this.inputType=e,this.type=r,this.input=i,this.cases=c,this.outputs=f,this.otherwise=d};Ua.parse=function(e,r){if(e.length<5)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return r.error("Expected an even number of arguments.");var i,c;r.expectedType&&r.expectedType.kind!=="value"&&(c=r.expectedType);for(var f={},d=[],v=2;v<e.length-1;v+=2){var w=e[v],P=e[v+1];Array.isArray(w)||(w=[w]);var I=r.concat(v);if(w.length===0)return I.error("Expected at least one branch label.");for(var M=0,z=w;M<z.length;M+=1){var R=z[M];if(typeof R!="number"&&typeof R!="string")return I.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return I.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof R=="number"&&Math.floor(R)!==R)return I.error("Numeric branch labels must be integer values.");if(i){if(I.checkSubtype(i,rn(R)))return null}else i=rn(R);if(f[String(R)]!==void 0)return I.error("Branch labels must be unique.");f[String(R)]=d.length}var N=r.parse(P,v,c);if(!N)return null;c=c||N.type,d.push(N)}var X=r.parse(e[1],1,rt);if(!X)return null;var J=r.parse(e[e.length-1],e.length-1,c);return J?X.type.kind!=="value"&&r.concat(1).checkSubtype(i,X.type)?null:new Ua(i,c,X,f,d,J):null},Ua.prototype.evaluate=function(e){var r=this.input.evaluate(e);return(rn(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)},Ua.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Ua.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Ua.prototype.serialize=function(){for(var e=this,r=["match",this.input.serialize()],i=[],c={},f=0,d=Object.keys(this.cases).sort();f<d.length;f+=1){var v=d[f];(z=c[this.cases[v]])===void 0?(c[this.cases[v]]=i.length,i.push([this.cases[v],[v]])):i[z][1].push(v)}for(var w=function(N){return e.inputType.kind==="number"?Number(N):N},P=0,I=i;P<I.length;P+=1){var M=I[P],z=M[0],R=M[1];r.push(R.length===1?w(R[0]):R.map(w)),r.push(this.outputs[outputIndex$1].serialize())}return r.push(this.otherwise.serialize()),r};var Na=function(e,r,i){this.type=e,this.branches=r,this.otherwise=i};Na.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return r.error("Expected an odd number of arguments.");var i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);for(var c=[],f=1;f<e.length-1;f+=2){var d=r.parse(e[f],f,Je);if(!d)return null;var v=r.parse(e[f+1],f+1,i);if(!v)return null;c.push([d,v]),i=i||v.type}var w=r.parse(e[e.length-1],e.length-1,i);return w?new Na(i,c,w):null},Na.prototype.evaluate=function(e){for(var r=0,i=this.branches;r<i.length;r+=1){var c=i[r],f=c[1];if(c[0].evaluate(e))return f.evaluate(e)}return this.otherwise.evaluate(e)},Na.prototype.eachChild=function(e){for(var r=0,i=this.branches;r<i.length;r+=1){var c=i[r],f=c[1];e(c[0]),e(f)}e(this.otherwise)},Na.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Na.prototype.serialize=function(){var e=["case"];return this.eachChild(function(r){e.push(r.serialize())}),e};var fa=function(e,r,i,c){this.type=e,this.input=r,this.beginIndex=i,this.endIndex=c};function Wl(e,r){return e==="=="||e==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function el(e,r,i,c){return c.compare(r,i)===0}function Er(e,r,i){var c=e!=="=="&&e!=="!=";return function(){function f(d,v,w){this.type=Je,this.lhs=d,this.rhs=v,this.collator=w,this.hasUntypedArgument=d.type.kind==="value"||v.type.kind==="value"}return f.parse=function(d,v){if(d.length!==3&&d.length!==4)return v.error("Expected two or three arguments.");var w=d[0],P=v.parse(d[1],1,rt);if(!P)return null;if(!Wl(w,P.type))return v.concat(1).error('"'+w+`" comparisons are not supported for type '`+ur(P.type)+"'.");var I=v.parse(d[2],2,rt);if(!I)return null;if(!Wl(w,I.type))return v.concat(2).error('"'+w+`" comparisons are not supported for type '`+ur(I.type)+"'.");if(P.type.kind!==I.type.kind&&P.type.kind!=="value"&&I.type.kind!=="value")return v.error("Cannot compare types '"+ur(P.type)+"' and '"+ur(I.type)+"'.");c&&(P.type.kind==="value"&&I.type.kind!=="value"?P=new Vr(I.type,[P]):P.type.kind!=="value"&&I.type.kind==="value"&&(I=new Vr(P.type,[I])));var M=null;if(d.length===4){if(P.type.kind!=="string"&&I.type.kind!=="string"&&P.type.kind!=="value"&&I.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(!(M=v.parse(d[3],3,or)))return null}return new f(P,I,M)},f.prototype.evaluate=function(d){var v=this.lhs.evaluate(d),w=this.rhs.evaluate(d);if(c&&this.hasUntypedArgument){var P=rn(v),I=rn(w);if(P.kind!==I.kind||P.kind!=="string"&&P.kind!=="number")throw new zn('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+P.kind+", "+I.kind+") instead.")}if(this.collator&&!c&&this.hasUntypedArgument){var M=rn(v),z=rn(w);if(M.kind!=="string"||z.kind!=="string")return r(d,v,w)}return this.collator?i(d,v,w,this.collator.evaluate(d)):r(d,v,w)},f.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},f.prototype.outputDefined=function(){return!0},f.prototype.serialize=function(){var d=[e];return this.eachChild(function(v){d.push(v.serialize())}),d},f}()}fa.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,rt),c=r.parse(e[2],2,ze);if(!i||!c)return null;if(!tn(i.type,[hr(rt),tt,rt]))return r.error("Expected first argument to be of type array or string, but found "+ur(i.type)+" instead");if(e.length===4){var f=r.parse(e[3],3,ze);return f?new fa(i.type,i,c,f):null}return new fa(i.type,i,c)},fa.prototype.evaluate=function(e){var r=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!Sr(r,["string","array"]))throw new zn("Expected first argument to be of type array or string, but found "+ur(rn(r))+" instead.");if(this.endIndex){var c=this.endIndex.evaluate(e);return r.slice(i,c)}return r.slice(i)},fa.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},fa.prototype.outputDefined=function(){return!1},fa.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ja=Er("==",function(e,r,i){return r===i},el),Xi=Er("!=",function(e,r,i){return r!==i},function(e,r,i,c){return!el(0,r,i,c)}),da=Er("<",function(e,r,i){return r<i},function(e,r,i,c){return c.compare(r,i)<0}),Bs=Er(">",function(e,r,i){return r>i},function(e,r,i,c){return c.compare(r,i)>0}),Jo=Er("<=",function(e,r,i){return r<=i},function(e,r,i,c){return c.compare(r,i)<=0}),$l=Er(">=",function(e,r,i){return r>=i},function(e,r,i,c){return c.compare(r,i)>=0}),Lo=function(e,r,i,c,f){this.type=tt,this.number=e,this.locale=r,this.currency=i,this.minFractionDigits=c,this.maxFractionDigits=f};Lo.parse=function(e,r){if(e.length!==3)return r.error("Expected two arguments.");var i=r.parse(e[1],1,ze);if(!i)return null;var c=e[2];if(typeof c!="object"||Array.isArray(c))return r.error("NumberFormat options argument must be an object.");var f=null;if(c.locale&&!(f=r.parse(c.locale,1,tt)))return null;var d=null;if(c.currency&&!(d=r.parse(c.currency,1,tt)))return null;var v=null;if(c["min-fraction-digits"]&&!(v=r.parse(c["min-fraction-digits"],1,ze)))return null;var w=null;return c["max-fraction-digits"]&&!(w=r.parse(c["max-fraction-digits"],1,ze))?null:new Lo(i,f,d,v,w)},Lo.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Lo.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Lo.prototype.outputDefined=function(){return!1},Lo.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Ki=function(e){this.type=ze,this.input=e};Ki.parse=function(e,r){if(e.length!==2)return r.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?r.error("Expected argument of type string or array, but found "+ur(i.type)+" instead."):new Ki(i):null},Ki.prototype.evaluate=function(e){var r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new zn("Expected value to be of type string or array, but found "+ur(rn(r))+" instead.")},Ki.prototype.eachChild=function(e){e(this.input)},Ki.prototype.outputDefined=function(){return!1},Ki.prototype.serialize=function(){var e=["length"];return this.eachChild(function(r){e.push(r.serialize())}),e};var ma={"==":ja,"!=":Xi,">":Bs,"<":da,">=":$l,"<=":Jo,array:Vr,at:Ko,boolean:Vr,case:Na,coalesce:Mo,collator:le,format:yo,image:ki,in:go,"index-of":ha,interpolate:Pn,"interpolate-hcl":Pn,"interpolate-lab":Pn,length:Ki,let:zo,literal:ii,match:Ua,number:Vr,"number-format":Lo,object:Vr,slice:fa,step:qr,string:Vr,"to-boolean":Ai,"to-color":Ai,"to-number":Ai,"to-string":Ai,var:li,within:ar};function tl(e,r){var i=r[0],c=r[1],f=r[2],d=r[3];i=i.evaluate(e),c=c.evaluate(e),f=f.evaluate(e);var v=d?d.evaluate(e):1,w=Xo(i,c,f,v);if(w)throw new zn(w);return new fr(i/255*v,c/255*v,f/255*v,v)}function Hl(e,r){return e in r}function rl(e,r){var i=r[e];return i===void 0?null:i}function ya(e){return{type:e}}function nl(e){return{result:"success",value:e}}function Do(e){return{result:"error",value:e}}function Ji(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Xl(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Yi(e){return!!e.expression&&e.expression.interpolated}function Fr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Oo(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Kl(e){return e}function ls(e,r,i){return e!==void 0?e:r!==void 0?r:i!==void 0?i:void 0}function Us(e,r,i,c,f){return ls(typeof i===f?c[i]:void 0,e.default,r.default)}function il(e,r,i){if(Fr(i)!=="number")return ls(e.default,r.default);var c=e.stops.length;if(c===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[c-1][0])return e.stops[c-1][1];var f=yi(e.stops.map(function(d){return d[0]}),i);return e.stops[f][1]}function ol(e,r,i){var c=e.base!==void 0?e.base:1;if(Fr(i)!=="number")return ls(e.default,r.default);var f=e.stops.length;if(f===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[f-1][0])return e.stops[f-1][1];var d=yi(e.stops.map(function(z){return z[0]}),i),v=function(z,R,N,X){var J=X-N,ae=z-N;return J===0?0:R===1?ae/J:(Math.pow(R,ae)-1)/(Math.pow(R,J)-1)}(i,c,e.stops[d][0],e.stops[d+1][0]),w=e.stops[d][1],P=e.stops[d+1][1],I=Ra[r.type]||Kl;if(e.colorSpace&&e.colorSpace!=="rgb"){var M=Gl[e.colorSpace];I=function(z,R){return M.reverse(M.interpolate(M.forward(z),M.forward(R),v))}}return typeof w.evaluate=="function"?{evaluate:function(){for(var z=[],R=arguments.length;R--;)z[R]=arguments[R];var N=w.evaluate.apply(void 0,z),X=P.evaluate.apply(void 0,z);if(N!==void 0&&X!==void 0)return I(N,X,v)}}:I(w,P,v)}function Ns(e,r,i){return r.type==="color"?i=fr.parse(i):r.type==="formatted"?i=Nr.fromString(i.toString()):r.type==="resolvedImage"?i=Kn.fromString(i.toString()):Fr(i)===r.type||r.type==="enum"&&r.values[i]||(i=void 0),ls(i,e.default,r.default)}B.register(ma,{error:[{kind:"error"},[tt],function(e,r){throw new zn(r[0].evaluate(e))}],typeof:[tt,[rt],function(e,r){return ur(rn(r[0].evaluate(e)))}],"to-rgba":[hr(ze,4),[Qe],function(e,r){return r[0].evaluate(e).toArray()}],rgb:[Qe,[ze,ze,ze],tl],rgba:[Qe,[ze,ze,ze,ze],tl],has:{type:Je,overloads:[[[tt],function(e,r){return Hl(r[0].evaluate(e),e.properties())}],[[tt,Wt],function(e,r){var i=r[1];return Hl(r[0].evaluate(e),i.evaluate(e))}]]},get:{type:rt,overloads:[[[tt],function(e,r){return rl(r[0].evaluate(e),e.properties())}],[[tt,Wt],function(e,r){var i=r[1];return rl(r[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[rt,[tt],function(e,r){return rl(r[0].evaluate(e),e.featureState||{})}],properties:[Wt,[],function(e){return e.properties()}],"geometry-type":[tt,[],function(e){return e.geometryType()}],id:[rt,[],function(e){return e.id()}],zoom:[ze,[],function(e){return e.globals.zoom}],"heatmap-density":[ze,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[ze,[],function(e){return e.globals.lineProgress||0}],accumulated:[rt,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[ze,ya(ze),function(e,r){for(var i=0,c=0,f=r;c<f.length;c+=1)i+=f[c].evaluate(e);return i}],"*":[ze,ya(ze),function(e,r){for(var i=1,c=0,f=r;c<f.length;c+=1)i*=f[c].evaluate(e);return i}],"-":{type:ze,overloads:[[[ze,ze],function(e,r){var i=r[1];return r[0].evaluate(e)-i.evaluate(e)}],[[ze],function(e,r){return-r[0].evaluate(e)}]]},"/":[ze,[ze,ze],function(e,r){var i=r[1];return r[0].evaluate(e)/i.evaluate(e)}],"%":[ze,[ze,ze],function(e,r){var i=r[1];return r[0].evaluate(e)%i.evaluate(e)}],ln2:[ze,[],function(){return Math.LN2}],pi:[ze,[],function(){return Math.PI}],e:[ze,[],function(){return Math.E}],"^":[ze,[ze,ze],function(e,r){var i=r[1];return Math.pow(r[0].evaluate(e),i.evaluate(e))}],sqrt:[ze,[ze],function(e,r){return Math.sqrt(r[0].evaluate(e))}],log10:[ze,[ze],function(e,r){return Math.log(r[0].evaluate(e))/Math.LN10}],ln:[ze,[ze],function(e,r){return Math.log(r[0].evaluate(e))}],log2:[ze,[ze],function(e,r){return Math.log(r[0].evaluate(e))/Math.LN2}],sin:[ze,[ze],function(e,r){return Math.sin(r[0].evaluate(e))}],cos:[ze,[ze],function(e,r){return Math.cos(r[0].evaluate(e))}],tan:[ze,[ze],function(e,r){return Math.tan(r[0].evaluate(e))}],asin:[ze,[ze],function(e,r){return Math.asin(r[0].evaluate(e))}],acos:[ze,[ze],function(e,r){return Math.acos(r[0].evaluate(e))}],atan:[ze,[ze],function(e,r){return Math.atan(r[0].evaluate(e))}],min:[ze,ya(ze),function(e,r){return Math.min.apply(Math,r.map(function(i){return i.evaluate(e)}))}],max:[ze,ya(ze),function(e,r){return Math.max.apply(Math,r.map(function(i){return i.evaluate(e)}))}],abs:[ze,[ze],function(e,r){return Math.abs(r[0].evaluate(e))}],round:[ze,[ze],function(e,r){var i=r[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[ze,[ze],function(e,r){return Math.floor(r[0].evaluate(e))}],ceil:[ze,[ze],function(e,r){return Math.ceil(r[0].evaluate(e))}],"filter-==":[Je,[tt,rt],function(e,r){var i=r[0],c=r[1];return e.properties()[i.value]===c.value}],"filter-id-==":[Je,[rt],function(e,r){var i=r[0];return e.id()===i.value}],"filter-type-==":[Je,[tt],function(e,r){var i=r[0];return e.geometryType()===i.value}],"filter-<":[Je,[tt,rt],function(e,r){var i=r[0],c=r[1],f=e.properties()[i.value],d=c.value;return typeof f==typeof d&&f<d}],"filter-id-<":[Je,[rt],function(e,r){var i=r[0],c=e.id(),f=i.value;return typeof c==typeof f&&c<f}],"filter->":[Je,[tt,rt],function(e,r){var i=r[0],c=r[1],f=e.properties()[i.value],d=c.value;return typeof f==typeof d&&f>d}],"filter-id->":[Je,[rt],function(e,r){var i=r[0],c=e.id(),f=i.value;return typeof c==typeof f&&c>f}],"filter-<=":[Je,[tt,rt],function(e,r){var i=r[0],c=r[1],f=e.properties()[i.value],d=c.value;return typeof f==typeof d&&f<=d}],"filter-id-<=":[Je,[rt],function(e,r){var i=r[0],c=e.id(),f=i.value;return typeof c==typeof f&&c<=f}],"filter->=":[Je,[tt,rt],function(e,r){var i=r[0],c=r[1],f=e.properties()[i.value],d=c.value;return typeof f==typeof d&&f>=d}],"filter-id->=":[Je,[rt],function(e,r){var i=r[0],c=e.id(),f=i.value;return typeof c==typeof f&&c>=f}],"filter-has":[Je,[rt],function(e,r){return r[0].value in e.properties()}],"filter-has-id":[Je,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Je,[hr(tt)],function(e,r){return r[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Je,[hr(rt)],function(e,r){return r[0].value.indexOf(e.id())>=0}],"filter-in-small":[Je,[tt,hr(rt)],function(e,r){var i=r[0];return r[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[Je,[tt,hr(rt)],function(e,r){var i=r[0],c=r[1];return function(f,d,v,w){for(;v<=w;){var P=v+w>>1;if(d[P]===f)return!0;d[P]>f?w=P-1:v=P+1}return!1}(e.properties()[i.value],c.value,0,c.value.length-1)}],all:{type:Je,overloads:[[[Je,Je],function(e,r){var i=r[1];return r[0].evaluate(e)&&i.evaluate(e)}],[ya(Je),function(e,r){for(var i=0,c=r;i<c.length;i+=1)if(!c[i].evaluate(e))return!1;return!0}]]},any:{type:Je,overloads:[[[Je,Je],function(e,r){var i=r[1];return r[0].evaluate(e)||i.evaluate(e)}],[ya(Je),function(e,r){for(var i=0,c=r;i<c.length;i+=1)if(c[i].evaluate(e))return!0;return!1}]]},"!":[Je,[Je],function(e,r){return!r[0].evaluate(e)}],"is-supported-script":[Je,[tt],function(e,r){var i=e.globals&&e.globals.isSupportedScript;return!i||i(r[0].evaluate(e))}],upcase:[tt,[tt],function(e,r){return r[0].evaluate(e).toUpperCase()}],downcase:[tt,[tt],function(e,r){return r[0].evaluate(e).toLowerCase()}],concat:[tt,ya(rt),function(e,r){return r.map(function(i){return Rs(i.evaluate(e))}).join("")}],"resolved-locale":[tt,[or],function(e,r){return r[0].evaluate(e).resolvedLocale()}]});var Va=function(e,r){this.expression=e,this._warningHistory={},this._evaluator=new T,this._defaultValue=r?function(i){return i.type==="color"&&Oo(i.default)?new fr(0,0,0,0):i.type==="color"?fr.parse(i.default)||null:i.default===void 0?null:i.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null};function Yo(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in ma}function js(e,r){var i=new lr(ma,[],r?function(f){var d={color:Qe,string:tt,number:ze,enum:tt,boolean:Je,formatted:kr,resolvedImage:Rt};return f.type==="array"?hr(d[f.value]||rt,f.length):d[f.type]}(r):void 0),c=i.parse(e,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?nl(new Va(c,r)):Do(i.errors)}Va.prototype.evaluateWithoutErrorHandling=function(e,r,i,c,f,d){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=i,this._evaluator.canonical=c,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},Va.prototype.evaluate=function(e,r,i,c,f,d){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=i||null,this._evaluator.canonical=c,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=d||null;try{var v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new zn("Expected value to be one of "+Object.keys(this._enumValues).map(function(w){return JSON.stringify(w)}).join(", ")+", but found "+JSON.stringify(v)+" instead.");return v}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console!="undefined"&&console.warn(w.message)),this._defaultValue}};var Vs=function(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!It(r.expression)};Vs.prototype.evaluateWithoutErrorHandling=function(e,r,i,c,f,d){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,c,f,d)},Vs.prototype.evaluate=function(e,r,i,c,f,d){return this._styleExpression.evaluate(e,r,i,c,f,d)};var de=function(e,r,i,c){this.kind=e,this.zoomStops=i,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!It(r.expression),this.interpolationType=c};function Re(e,r){if((e=js(e,r)).result==="error")return e;var i=e.value.expression,c=Lr(i);if(!c&&!Ji(r))return Do([new Ve("","data expressions not supported")]);var f=Mi(i,["zoom"]);if(!f&&!Xl(r))return Do([new Ve("","zoom expressions not supported")]);var d=function v(w){var P=null;if(w instanceof zo)P=v(w.result);else if(w instanceof Mo)for(var I=0,M=w.args;I<M.length&&!(P=v(M[I]));I+=1);else(w instanceof qr||w instanceof Pn)&&w.input instanceof B&&w.input.name==="zoom"&&(P=w);return P instanceof Ve||w.eachChild(function(z){var R=v(z);R instanceof Ve?P=R:!P&&R?P=new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):P&&R&&P!==R&&(P=new Ve("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),P}(i);return d||f?d instanceof Ve?Do([d]):d instanceof Pn&&!Yi(r)?Do([new Ve("",'"interpolate" expressions cannot be used with this property')]):nl(d?new de(c?"camera":"composite",e.value,d.labels,d instanceof Pn?d.interpolation:void 0):new Vs(c?"constant":"source",e.value)):Do([new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}de.prototype.evaluateWithoutErrorHandling=function(e,r,i,c,f,d){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,c,f,d)},de.prototype.evaluate=function(e,r,i,c,f,d){return this._styleExpression.evaluate(e,r,i,c,f,d)},de.prototype.interpolationFactor=function(e,r,i){return this.interpolationType?Pn.interpolationFactor(this.interpolationType,e,r,i):0};var nt=function(e,r){this._parameters=e,this._specification=r,Ue(this,function i(c,f){var d,v,w,P=f.type==="color",I=c.stops&&typeof c.stops[0][0]=="object",M=I||!(I||c.property!==void 0),z=c.type||(Yi(f)?"exponential":"interval");if(P&&((c=Ue({},c)).stops&&(c.stops=c.stops.map(function(it){return[it[0],fr.parse(it[1])]})),c.default=fr.parse(c.default?c.default:f.default)),c.colorSpace&&c.colorSpace!=="rgb"&&!Gl[c.colorSpace])throw new Error("Unknown color space: "+c.colorSpace);if(z==="exponential")d=ol;else if(z==="interval")d=il;else if(z==="categorical"){d=Us,v=Object.create(null);for(var R=0,N=c.stops;R<N.length;R+=1){var X=N[R];v[X[0]]=X[1]}w=typeof c.stops[0][0]}else{if(z!=="identity")throw new Error('Unknown function type "'+z+'"');d=Ns}if(I){for(var J={},ae=[],re=0;re<c.stops.length;re++){var he=c.stops[re],_e=he[0].zoom;J[_e]===void 0&&(J[_e]={zoom:_e,type:c.type,property:c.property,default:c.default,stops:[]},ae.push(_e)),J[_e].stops.push([he[0].value,he[1]])}for(var Ee=[],ke=0,Fe=ae;ke<Fe.length;ke+=1){var Ze=Fe[ke];Ee.push([J[Ze].zoom,i(J[Ze],f)])}var Ke={name:"linear"};return{kind:"composite",interpolationType:Ke,interpolationFactor:Pn.interpolationFactor.bind(void 0,Ke),zoomStops:Ee.map(function(it){return it[0]}),evaluate:function(it,Pt){var ot=it.zoom;return ol({stops:Ee,base:c.base},f,ot).evaluate(ot,Pt)}}}if(M){var xt=z==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:xt,interpolationFactor:Pn.interpolationFactor.bind(void 0,xt),zoomStops:c.stops.map(function(it){return it[0]}),evaluate:function(it){return d(c,f,it.zoom,v,w)}}}return{kind:"source",evaluate:function(it,Pt){var ot=Pt&&Pt.properties?Pt.properties[c.property]:void 0;return ot===void 0?ls(c.default,f.default):d(c,f,ot,v,w)}}}(this._parameters,this._specification))};function wt(e){var r=e.key,i=e.value,c=e.valueSpec||{},f=e.objectElementValidators||{},d=e.style,v=e.styleSpec,w=[],P=Fr(i);if(P!=="object")return[new ee(r,i,"object expected, "+P+" found")];for(var I in i){var M=I.split(".")[0],z=c[M]||c["*"],R=void 0;if(f[M])R=f[M];else if(c[M])R=$t;else if(f["*"])R=f["*"];else{if(!c["*"]){w.push(new ee(r,i[I],'unknown property "'+I+'"'));continue}R=$t}w=w.concat(R({key:(r&&r+".")+I,value:i[I],valueSpec:z,style:d,styleSpec:v,object:i,objectKey:I},i))}for(var N in c)f[N]||c[N].required&&c[N].default===void 0&&i[N]===void 0&&w.push(new ee(r,i,'missing required property "'+N+'"'));return w}function Wr(e){var r=e.value,i=e.valueSpec,c=e.style,f=e.styleSpec,d=e.key,v=e.arrayElementValidator||$t;if(Fr(r)!=="array")return[new ee(d,r,"array expected, "+Fr(r)+" found")];if(i.length&&r.length!==i.length)return[new ee(d,r,"array length "+i.length+" expected, length "+r.length+" found")];if(i["min-length"]&&r.length<i["min-length"])return[new ee(d,r,"array length at least "+i["min-length"]+" expected, length "+r.length+" found")];var w={type:i.value,values:i.values};f.$version<7&&(w.function=i.function),Fr(i.value)==="object"&&(w=i.value);for(var P=[],I=0;I<r.length;I++)P=P.concat(v({array:r,arrayIndex:I,value:r[I],valueSpec:w,style:c,styleSpec:f,key:d+"["+I+"]"}));return P}function dr(e){var r=e.key,i=e.value,c=e.valueSpec,f=Fr(i);return f==="number"&&i!=i&&(f="NaN"),f!=="number"?[new ee(r,i,"number expected, "+f+" found")]:"minimum"in c&&i<c.minimum?[new ee(r,i,i+" is less than the minimum value "+c.minimum)]:"maximum"in c&&i>c.maximum?[new ee(r,i,i+" is greater than the maximum value "+c.maximum)]:[]}function sn(e){var r,i,c,f=e.valueSpec,d=qe(e.value.type),v={},w=d!=="categorical"&&e.value.property===void 0,P=!w,I=Fr(e.value.stops)==="array"&&Fr(e.value.stops[0])==="array"&&Fr(e.value.stops[0][0])==="object",M=wt({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(N){if(d==="identity")return[new ee(N.key,N.value,'identity function may not have a "stops" property')];var X=[],J=N.value;return X=X.concat(Wr({key:N.key,value:J,valueSpec:N.valueSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:z})),Fr(J)==="array"&&J.length===0&&X.push(new ee(N.key,J,"array must have at least one stop")),X},default:function(N){return $t({key:N.key,value:N.value,valueSpec:f,style:N.style,styleSpec:N.styleSpec})}}});return d==="identity"&&w&&M.push(new ee(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||M.push(new ee(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!Yi(e.valueSpec)&&M.push(new ee(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(P&&!Ji(e.valueSpec)?M.push(new ee(e.key,e.value,"property functions not supported")):w&&!Xl(e.valueSpec)&&M.push(new ee(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!I||e.value.property!==void 0||M.push(new ee(e.key,e.value,'"property" property is required')),M;function z(N){var X=[],J=N.value,ae=N.key;if(Fr(J)!=="array")return[new ee(ae,J,"array expected, "+Fr(J)+" found")];if(J.length!==2)return[new ee(ae,J,"array length 2 expected, length "+J.length+" found")];if(I){if(Fr(J[0])!=="object")return[new ee(ae,J,"object expected, "+Fr(J[0])+" found")];if(J[0].zoom===void 0)return[new ee(ae,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new ee(ae,J,"object stop key must have value")];if(c&&c>qe(J[0].zoom))return[new ee(ae,J[0].zoom,"stop zoom values must appear in ascending order")];qe(J[0].zoom)!==c&&(c=qe(J[0].zoom),i=void 0,v={}),X=X.concat(wt({key:ae+"[0]",value:J[0],valueSpec:{zoom:{}},style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:dr,value:R}}))}else X=X.concat(R({key:ae+"[0]",value:J[0],valueSpec:{},style:N.style,styleSpec:N.styleSpec},J));return Yo(Ae(J[1]))?X.concat([new ee(ae+"[1]",J[1],"expressions are not allowed in function stops.")]):X.concat($t({key:ae+"[1]",value:J[1],valueSpec:f,style:N.style,styleSpec:N.styleSpec}))}function R(N,X){var J=Fr(N.value),ae=qe(N.value),re=N.value!==null?N.value:X;if(r){if(J!==r)return[new ee(N.key,re,J+" stop domain type must match previous stop domain type "+r)]}else r=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new ee(N.key,re,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&d!=="categorical"){var he="number expected, "+J+" found";return Ji(f)&&d===void 0&&(he+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ee(N.key,re,he)]}return d!=="categorical"||J!=="number"||isFinite(ae)&&Math.floor(ae)===ae?d!=="categorical"&&J==="number"&&i!==void 0&&ae<i?[new ee(N.key,re,"stop domain values must appear in ascending order")]:(i=ae,d==="categorical"&&ae in v?[new ee(N.key,re,"stop domain values must be unique")]:(v[ae]=!0,[])):[new ee(N.key,re,"integer expected, found "+ae)]}}function $r(e){var r=(e.expressionContext==="property"?Re:js)(Ae(e.value),e.valueSpec);if(r.result==="error")return r.value.map(function(c){return new ee(""+e.key+c.key,e.value,c.message)});var i=r.value.expression||r.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new ee(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!It(i))return[new ee(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!It(i))return[new ee(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Mi(i,["zoom","feature-state"]))return[new ee(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Lr(i))return[new ee(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ci(e){var r=e.key,i=e.value,c=e.valueSpec,f=[];return Array.isArray(c.values)?c.values.indexOf(qe(i))===-1&&f.push(new ee(r,i,"expected one of ["+c.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(c.values).indexOf(qe(i))===-1&&f.push(new ee(r,i,"expected one of ["+Object.keys(c.values).join(", ")+"], "+JSON.stringify(i)+" found")),f}function pn(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var r=0,i=e.slice(1);r<i.length;r+=1){var c=i[r];if(!pn(c)&&typeof c!="boolean")return!1}return!0;default:return!0}}nt.deserialize=function(e){return new nt(e._parameters,e._specification)},nt.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var gn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zi(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};pn(e)||(e=jn(e));var r=js(e,gn);if(r.result==="error")throw new Error(r.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,c,f){return r.value.evaluate(i,c,{},f)},needGeometry:function i(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(var f=1;f<c.length;f++)if(i(c[f]))return!0;return!1}(e)}}function Qo(e,r){return e<r?-1:e>r?1:0}function jn(e){if(!e)return!0;var r,i=e[0];return e.length<=1?i!=="any":i==="=="?_o(e[1],e[2],"=="):i==="!="?ea(_o(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?_o(e[1],e[2],i):i==="any"?(r=e.slice(1),["any"].concat(r.map(jn))):i==="all"?["all"].concat(e.slice(1).map(jn)):i==="none"?["all"].concat(e.slice(1).map(jn).map(ea)):i==="in"?qa(e[1],e.slice(2)):i==="!in"?ea(qa(e[1],e.slice(2))):i==="has"?qs(e[1]):i==="!has"?ea(qs(e[1])):i!=="within"||e}function _o(e,r,i){switch(e){case"$type":return["filter-type-"+i,r];case"$id":return["filter-id-"+i,r];default:return["filter-"+i,e,r]}}function qa(e,r){if(r.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(function(i){return typeof i!=typeof r[0]})?["filter-in-large",e,["literal",r.sort(Qo)]]:["filter-in-small",e,["literal",r]]}}function qs(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function ea(e){return["!",e]}function Za(e){return pn(Ae(e.value))?$r(Ue({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function r(i){var c=i.value,f=i.key;if(Fr(c)!=="array")return[new ee(f,c,"array expected, "+Fr(c)+" found")];var d,v=i.styleSpec,w=[];if(c.length<1)return[new ee(f,c,"filter array must have at least 1 element")];switch(w=w.concat(ci({key:f+"[0]",value:c[0],valueSpec:v.filter_operator,style:i.style,styleSpec:i.styleSpec})),qe(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&qe(c[1])==="$type"&&w.push(new ee(f,c,'"$type" cannot be use with operator "'+c[0]+'"'));case"==":case"!=":c.length!==3&&w.push(new ee(f,c,'filter array for operator "'+c[0]+'" must have 3 elements'));case"in":case"!in":c.length>=2&&(d=Fr(c[1]))!=="string"&&w.push(new ee(f+"[1]",c[1],"string expected, "+d+" found"));for(var P=2;P<c.length;P++)d=Fr(c[P]),qe(c[1])==="$type"?w=w.concat(ci({key:f+"["+P+"]",value:c[P],valueSpec:v.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&w.push(new ee(f+"["+P+"]",c[P],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var I=1;I<c.length;I++)w=w.concat(r({key:f+"["+I+"]",value:c[I],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=Fr(c[1]),c.length!==2?w.push(new ee(f,c,'filter array for "'+c[0]+'" operator must have 2 elements')):d!=="string"&&w.push(new ee(f+"[1]",c[1],"string expected, "+d+" found"));break;case"within":d=Fr(c[1]),c.length!==2?w.push(new ee(f,c,'filter array for "'+c[0]+'" operator must have 2 elements')):d!=="object"&&w.push(new ee(f+"[1]",c[1],"object expected, "+d+" found"))}return w}(e)}function fu(e,r){var i=e.key,c=e.style,f=e.styleSpec,d=e.value,v=e.objectKey,w=f[r+"_"+e.layerType];if(!w)return[];var P=v.match(/^(.*)-transition$/);if(r==="paint"&&P&&w[P[1]]&&w[P[1]].transition)return $t({key:i,value:d,valueSpec:f.transition,style:c,styleSpec:f});var I,M=e.valueSpec||w[v];if(!M)return[new ee(i,d,'unknown property "'+v+'"')];if(Fr(d)==="string"&&Ji(M)&&!M.tokens&&(I=/^{([^}]+)}$/.exec(d)))return[new ee(i,d,'"'+v+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(I[1])+" }`.")];var z=[];return e.layerType==="symbol"&&(v==="text-field"&&c&&!c.glyphs&&z.push(new ee(i,d,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&Oo(Ae(d))&&qe(d.type)==="identity"&&z.push(new ee(i,d,'"text-font" does not support identity functions'))),z.concat($t({key:e.key,value:d,valueSpec:M,style:c,styleSpec:f,expressionContext:"property",propertyType:r,propertyKey:v}))}function al(e){return fu(e,"paint")}function Zs(e){return fu(e,"layout")}function jr(e){var r=[],i=e.value,c=e.key,f=e.style,d=e.styleSpec;i.type||i.ref||r.push(new ee(c,i,'either "type" or "ref" is required'));var v,w=qe(i.type),P=qe(i.ref);if(i.id)for(var I=qe(i.id),M=0;M<e.arrayIndex;M++){var z=f.layers[M];qe(z.id)===I&&r.push(new ee(c,i.id,'duplicate layer id "'+i.id+'", previously used at line '+z.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(X){X in i&&r.push(new ee(c,i[X],'"'+X+'" is prohibited for ref layers'))}),f.layers.forEach(function(X){qe(X.id)===P&&(v=X)}),v?v.ref?r.push(new ee(c,i.ref,"ref cannot reference another ref layer")):w=qe(v.type):r.push(new ee(c,i.ref,'ref layer "'+P+'" not found'));else if(w!=="background")if(i.source){var R=f.sources&&f.sources[i.source],N=R&&qe(R.type);R?N==="vector"&&w==="raster"?r.push(new ee(c,i.source,'layer "'+i.id+'" requires a raster source')):N==="raster"&&w!=="raster"?r.push(new ee(c,i.source,'layer "'+i.id+'" requires a vector source')):N!=="vector"||i["source-layer"]?N==="raster-dem"&&w!=="hillshade"?r.push(new ee(c,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!i.paint||!i.paint["line-gradient"]||N==="geojson"&&R.lineMetrics||r.push(new ee(c,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):r.push(new ee(c,i,'layer "'+i.id+'" must specify a "source-layer"')):r.push(new ee(c,i.source,'source "'+i.source+'" not found'))}else r.push(new ee(c,i,'missing required property "source"'));return r=r.concat(wt({key:c,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return $t({key:c+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:Za,layout:function(X){return wt({layer:i,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":function(J){return Zs(Ue({layerType:w},J))}}})},paint:function(X){return wt({layer:i,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":function(J){return al(Ue({layerType:w},J))}}})}}}))}function _r(e){var r=e.value,i=e.key,c=Fr(r);return c!=="string"?[new ee(i,r,"string expected, "+c+" found")]:[]}var Dr={promoteId:function(e){var r=e.key,i=e.value;if(Fr(i)==="string")return _r({key:r,value:i});var c=[];for(var f in i)c.push.apply(c,_r({key:r+"."+f,value:i[f]}));return c}};function xo(e){var r=e.value,i=e.key,c=e.styleSpec,f=e.style;if(!r.type)return[new ee(i,r,'"type" is required')];var d,v=qe(r.type);switch(v){case"vector":case"raster":case"raster-dem":return wt({key:i,value:r,valueSpec:c["source_"+v.replace("-","_")],style:e.style,styleSpec:c,objectElementValidators:Dr});case"geojson":if(d=wt({key:i,value:r,valueSpec:c.source_geojson,style:f,styleSpec:c,objectElementValidators:Dr}),r.cluster)for(var w in r.clusterProperties){var P=r.clusterProperties[w],I=P[0],M=typeof I=="string"?[I,["accumulated"],["get",w]]:I;d.push.apply(d,$r({key:i+"."+w+".map",value:P[1],expressionContext:"cluster-map"})),d.push.apply(d,$r({key:i+"."+w+".reduce",value:M,expressionContext:"cluster-reduce"}))}return d;case"video":return wt({key:i,value:r,valueSpec:c.source_video,style:f,styleSpec:c});case"image":return wt({key:i,value:r,valueSpec:c.source_image,style:f,styleSpec:c});case"canvas":return[new ee(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ci({key:i+".type",value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,styleSpec:c})}}function ta(e){var r=e.value,i=e.styleSpec,c=i.light,f=e.style,d=[],v=Fr(r);if(r===void 0)return d;if(v!=="object")return d.concat([new ee("light",r,"object expected, "+v+" found")]);for(var w in r){var P=w.match(/^(.*)-transition$/);d=d.concat(P&&c[P[1]]&&c[P[1]].transition?$t({key:w,value:r[w],valueSpec:i.transition,style:f,styleSpec:i}):c[w]?$t({key:w,value:r[w],valueSpec:c[w],style:f,styleSpec:i}):[new ee(w,r[w],'unknown property "'+w+'"')])}return d}var Ln={"*":function(){return[]},array:Wr,boolean:function(e){var r=e.value,i=e.key,c=Fr(r);return c!=="boolean"?[new ee(i,r,"boolean expected, "+c+" found")]:[]},number:dr,color:function(e){var r=e.key,i=e.value,c=Fr(i);return c!=="string"?[new ee(r,i,"color expected, "+c+" found")]:Dt(i)===null?[new ee(r,i,'color expected, "'+i+'" found')]:[]},constants:ye,enum:ci,filter:Za,function:sn,layer:jr,object:wt,source:xo,light:ta,string:_r,formatted:function(e){return _r(e).length===0?[]:$r(e)},resolvedImage:function(e){return _r(e).length===0?[]:$r(e)}};function $t(e){var r=e.value,i=e.valueSpec,c=e.styleSpec;return i.expression&&Oo(qe(r))?sn(e):i.expression&&Yo(Ae(r))?$r(e):i.type&&Ln[i.type]?Ln[i.type](e):wt(Ue({},e,{valueSpec:i.type?c[i.type]:i}))}function gr(e){var r=e.value,i=e.key,c=_r(e);return c.length||(r.indexOf("{fontstack}")===-1&&c.push(new ee(i,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&c.push(new ee(i,r,'"glyphs" url must include a "{range}" token'))),c}function Jn(e,r){r===void 0&&(r=V);var i=[];return i=i.concat($t({key:"",value:e,valueSpec:r.$root,styleSpec:r,style:e,objectElementValidators:{glyphs:gr,"*":function(){return[]}}})),e.constants&&(i=i.concat(ye({key:"constants",value:e.constants,style:e,styleSpec:r}))),va(i)}function va(e){return[].concat(e).sort(function(r,i){return r.line-i.line})}function bo(e){return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return va(e.apply(this,r))}}Jn.source=bo(xo),Jn.light=bo(ta),Jn.layer=bo(jr),Jn.filter=bo(Za),Jn.paintProperty=bo(al),Jn.layoutProperty=bo(Zs);var Qi=Jn,Jl=Qi.light,du=Qi.paintProperty,Ga=Qi.layoutProperty;function ga(e,r){var i=!1;if(r&&r.length)for(var c=0,f=r;c<f.length;c+=1)e.fire(new ue(new Error(f[c].message))),i=!0;return i}var eo=hn;function hn(e,r,i){var c=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var f=new Int32Array(this.arrayBuffer);e=f[0],this.d=(r=f[1])+2*(i=f[2]);for(var d=0;d<this.d*this.d;d++){var v=f[3+d],w=f[3+d+1];c.push(v===w?null:f.subarray(v,w))}var P=f[3+c.length+1];this.keys=f.subarray(f[3+c.length],P),this.bboxes=f.subarray(P),this.insert=this._insertReadonly}else{this.d=r+2*i;for(var I=0;I<this.d*this.d;I++)c.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=e,this.padding=i,this.scale=r/e,this.uid=0;var M=i/r*e;this.min=-M,this.max=e+M}hn.prototype.insert=function(e,r,i,c,f){this._forEachCell(r,i,c,f,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(c),this.bboxes.push(f)},hn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},hn.prototype._insertCell=function(e,r,i,c,f,d){this.cells[f].push(d)},hn.prototype.query=function(e,r,i,c,f){var d=this.min,v=this.max;if(e<=d&&r<=d&&v<=i&&v<=c&&!f)return Array.prototype.slice.call(this.keys);var w=[];return this._forEachCell(e,r,i,c,this._queryCell,w,{},f),w},hn.prototype._queryCell=function(e,r,i,c,f,d,v,w){var P=this.cells[f];if(P!==null)for(var I=this.keys,M=this.bboxes,z=0;z<P.length;z++){var R=P[z];if(v[R]===void 0){var N=4*R;(w?w(M[N+0],M[N+1],M[N+2],M[N+3]):e<=M[N+2]&&r<=M[N+3]&&i>=M[N+0]&&c>=M[N+1])?(v[R]=!0,d.push(I[R])):v[R]=!1}}},hn.prototype._forEachCell=function(e,r,i,c,f,d,v,w){for(var P=this._convertToCellCoord(e),I=this._convertToCellCoord(r),M=this._convertToCellCoord(i),z=this._convertToCellCoord(c),R=P;R<=M;R++)for(var N=I;N<=z;N++){var X=this.d*N+R;if((!w||w(this._convertFromCellCoord(R),this._convertFromCellCoord(N),this._convertFromCellCoord(R+1),this._convertFromCellCoord(N+1)))&&f.call(this,e,r,i,c,X,d,v,w))return}},hn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},hn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},hn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,r=3+this.cells.length+1+1,i=0,c=0;c<this.cells.length;c++)i+=this.cells[c].length;var f=new Int32Array(r+i+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var d=r,v=0;v<e.length;v++){var w=e[v];f[3+v]=d,f.set(w,d),d+=w.length}return f[3+e.length]=d,f.set(this.keys,d),f[3+e.length+1]=d+=this.keys.length,f.set(this.bboxes,d),d+=this.bboxes.length,f.buffer};var _a=W.ImageData,Gs=W.ImageBitmap,Tn={};function ft(e,r,i){i===void 0&&(i={}),Object.defineProperty(r,"_classRegistryKey",{value:e,writeable:!1}),Tn[e]={klass:r,omit:i.omit||[],shallow:i.shallow||[]}}for(var to in ft("Object",Object),eo.serialize=function(e,r){var i=e.toArrayBuffer();return r&&r.push(i),{buffer:i}},eo.deserialize=function(e){return new eo(e.buffer)},ft("Grid",eo),ft("Color",fr),ft("Error",Error),ft("ResolvedImage",Kn),ft("StylePropertyFunction",nt),ft("StyleExpression",Va,{omit:["_evaluator"]}),ft("ZoomDependentExpression",de),ft("ZoomConstantExpression",Vs),ft("CompoundExpression",B,{omit:["_evaluate"]}),ma)ma[to]._classRegistryKey||ft("Expression_"+to,ma[to]);function Yl(e){return e&&typeof ArrayBuffer!="undefined"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function mu(e){return Gs&&e instanceof Gs}function ra(e,r){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Yl(e)||mu(e))return r&&r.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return r&&r.push(i.buffer),i}if(e instanceof _a)return r&&r.push(e.data.buffer),e;if(Array.isArray(e)){for(var c=[],f=0,d=e;f<d.length;f+=1)c.push(ra(d[f],r));return c}if(typeof e=="object"){var v=e.constructor,w=v._classRegistryKey;if(!w)throw new Error("can't serialize object of unregistered class");var P=v.serialize?v.serialize(e,r):{};if(!v.serialize){for(var I in e)if(e.hasOwnProperty(I)&&!(Tn[w].omit.indexOf(I)>=0)){var M=e[I];P[I]=Tn[w].shallow.indexOf(I)>=0?M:ra(M,r)}e instanceof Error&&(P.message=e.message)}if(P.$name)throw new Error("$name property is reserved for worker serialization logic.");return w!=="Object"&&(P.$name=w),P}throw new Error("can't serialize object of type "+typeof e)}function ro(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Yl(e)||mu(e)||ArrayBuffer.isView(e)||e instanceof _a)return e;if(Array.isArray(e))return e.map(ro);if(typeof e=="object"){var r=e.$name||"Object",i=Tn[r].klass;if(!i)throw new Error("can't deserialize unregistered class "+r);if(i.deserialize)return i.deserialize(e);for(var c=Object.create(i.prototype),f=0,d=Object.keys(e);f<d.length;f+=1){var v=d[f];if(v!=="$name"){var w=e[v];c[v]=Tn[r].shallow.indexOf(v)>=0?w:ro(w)}}return c}throw new Error("can't deserialize object of type "+typeof e)}var gp=function(){this.first=!0};gp.prototype.update=function(e,r){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=r),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var et={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function _p(e){for(var r=0,i=e;r<i.length;r+=1)if(Ql(i[r].charCodeAt(0)))return!0;return!1}function Ql(e){return!(e!==746&&e!==747&&(e<4352||!(et["Bopomofo Extended"](e)||et.Bopomofo(e)||et["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||et["CJK Compatibility Ideographs"](e)||et["CJK Compatibility"](e)||et["CJK Radicals Supplement"](e)||et["CJK Strokes"](e)||!(!et["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||et["CJK Unified Ideographs Extension A"](e)||et["CJK Unified Ideographs"](e)||et["Enclosed CJK Letters and Months"](e)||et["Hangul Compatibility Jamo"](e)||et["Hangul Jamo Extended-A"](e)||et["Hangul Jamo Extended-B"](e)||et["Hangul Jamo"](e)||et["Hangul Syllables"](e)||et.Hiragana(e)||et["Ideographic Description Characters"](e)||et.Kanbun(e)||et["Kangxi Radicals"](e)||et["Katakana Phonetic Extensions"](e)||et.Katakana(e)&&e!==12540||!(!et["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!et["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||et["Unified Canadian Aboriginal Syllabics"](e)||et["Unified Canadian Aboriginal Syllabics Extended"](e)||et["Vertical Forms"](e)||et["Yijing Hexagram Symbols"](e)||et["Yi Syllables"](e)||et["Yi Radicals"](e))))}function xp(e){return!(Ql(e)||function(r){return!!(et["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||et["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||et["Letterlike Symbols"](r)||et["Number Forms"](r)||et["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||et["Control Pictures"](r)&&r!==9251||et["Optical Character Recognition"](r)||et["Enclosed Alphanumerics"](r)||et["Geometric Shapes"](r)||et["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||et["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||et["CJK Symbols and Punctuation"](r)||et.Katakana(r)||et["Private Use Area"](r)||et["CJK Compatibility Forms"](r)||et["Small Form Variants"](r)||et["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(e))}function Ro(e){return e>=1424&&e<=2303||et["Arabic Presentation Forms-A"](e)||et["Arabic Presentation Forms-B"](e)}function no(e,r){return!(!r&&Ro(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||et.Khmer(e))}function ec(e){for(var r=0,i=e;r<i.length;r+=1)if(Ro(i[r].charCodeAt(0)))return!0;return!1}var tc=null,io="unavailable",Wa=null,cf=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(io="error"),tc&&tc(e)};function sl(){bp.fire(new K("pluginStateChange",{pluginStatus:io,pluginURL:Wa}))}var bp=new pe,wp=function(){return io},na=function(){if(io!=="deferred"||!Wa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");io="loading",sl(),Wa&&as({url:Wa},function(e){e?cf(e):(io="loaded",sl())})},wo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return io==="loaded"||wo.applyArabicShaping!=null},isLoading:function(){return io==="loading"},setState:function(e){io=e.pluginStatus,Wa=e.pluginURL},isParsed:function(){return wo.applyArabicShaping!=null&&wo.processBidirectionalText!=null&&wo.processStyledBidirectionalText!=null},getPluginURL:function(){return Wa}},nr=function(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new gp,this.transition={})};nr.prototype.isSupportedScript=function(e){return function(r,i){for(var c=0,f=r;c<f.length;c+=1)if(!no(f[c].charCodeAt(0),i))return!1;return!0}(e,wo.isLoaded())},nr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},nr.prototype.getCrossfadeParameters=function(){var e=this.zoom,r=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*r}};var xa=function(e,r){this.property=e,this.value=r,this.expression=function(i,c){if(Oo(i))return new nt(i,c);if(Yo(i)){var f=Re(i,c);if(f.result==="error")throw new Error(f.value.map(function(v){return v.key+": "+v.message}).join(", "));return f.value}var d=i;return typeof i=="string"&&c.type==="color"&&(d=fr.parse(i)),{kind:"constant",evaluate:function(){return d}}}(r===void 0?e.specification.default:r,e.specification)};xa.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},xa.prototype.possiblyEvaluate=function(e,r,i){return this.property.possiblyEvaluate(this,e,r,i)};var Fo=function(e){this.property=e,this.value=new xa(e,void 0)};Fo.prototype.transitioned=function(e,r){return new Ws(this.property,this.value,r,ne({},e.transition,this.transition),e.now)},Fo.prototype.untransitioned=function(){return new Ws(this.property,this.value,null,{},0)};var oi=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};oi.prototype.getValue=function(e){return Mt(this._values[e].value.value)},oi.prototype.setValue=function(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new Fo(this._values[e].property)),this._values[e].value=new xa(this._values[e].property,r===null?void 0:Mt(r))},oi.prototype.getTransition=function(e){return Mt(this._values[e].transition)},oi.prototype.setTransition=function(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new Fo(this._values[e].property)),this._values[e].transition=Mt(r)||void 0},oi.prototype.serialize=function(){for(var e={},r=0,i=Object.keys(this._values);r<i.length;r+=1){var c=i[r],f=this.getValue(c);f!==void 0&&(e[c]=f);var d=this.getTransition(c);d!==void 0&&(e[c+"-transition"]=d)}return e},oi.prototype.transitioned=function(e,r){for(var i=new cs(this._properties),c=0,f=Object.keys(this._values);c<f.length;c+=1){var d=f[c];i._values[d]=this._values[d].transitioned(e,r._values[d])}return i},oi.prototype.untransitioned=function(){for(var e=new cs(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var c=i[r];e._values[c]=this._values[c].untransitioned()}return e};var Ws=function(e,r,i,c,f){this.property=e,this.value=r,this.begin=f+c.delay||0,this.end=this.begin+c.duration||0,e.specification.transition&&(c.delay||c.duration)&&(this.prior=i)};Ws.prototype.possiblyEvaluate=function(e,r,i){var c=e.now||0,f=this.value.possiblyEvaluate(e,r,i),d=this.prior;if(d){if(c>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(c<this.begin)return d.possiblyEvaluate(e,r,i);var v=(c-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,r,i),f,function(w){if(w<=0)return 0;if(w>=1)return 1;var P=w*w,I=P*w;return 4*(w<.5?I:3*(w-P)+I-.75)}(v))}return f};var cs=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};cs.prototype.possiblyEvaluate=function(e,r,i){for(var c=new ul(this._properties),f=0,d=Object.keys(this._values);f<d.length;f+=1){var v=d[f];c._values[v]=this._values[v].possiblyEvaluate(e,r,i)}return c},cs.prototype.hasTransition=function(){for(var e=0,r=Object.keys(this._values);e<r.length;e+=1)if(this._values[r[e]].prior)return!0;return!1};var ia=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};ia.prototype.getValue=function(e){return Mt(this._values[e].value)},ia.prototype.setValue=function(e,r){this._values[e]=new xa(this._values[e].property,r===null?void 0:Mt(r))},ia.prototype.serialize=function(){for(var e={},r=0,i=Object.keys(this._values);r<i.length;r+=1){var c=i[r],f=this.getValue(c);f!==void 0&&(e[c]=f)}return e},ia.prototype.possiblyEvaluate=function(e,r,i){for(var c=new ul(this._properties),f=0,d=Object.keys(this._values);f<d.length;f+=1){var v=d[f];c._values[v]=this._values[v].possiblyEvaluate(e,r,i)}return c};var vi=function(e,r,i){this.property=e,this.value=r,this.parameters=i};vi.prototype.isConstant=function(){return this.value.kind==="constant"},vi.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},vi.prototype.evaluate=function(e,r,i,c){return this.property.evaluate(this.value,this.parameters,e,r,i,c)};var ul=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};ul.prototype.get=function(e){return this._values[e]};var St=function(e){this.specification=e};St.prototype.possiblyEvaluate=function(e,r){return e.expression.evaluate(r)},St.prototype.interpolate=function(e,r,i){var c=Ra[this.specification.type];return c?c(e,r,i):e};var yt=function(e,r){this.specification=e,this.overrides=r};yt.prototype.possiblyEvaluate=function(e,r,i,c){return new vi(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},i,c)}:e.expression,r)},yt.prototype.interpolate=function(e,r,i){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new vi(this,{kind:"constant",value:void 0},e.parameters);var c=Ra[this.specification.type];return c?new vi(this,{kind:"constant",value:c(e.value.value,r.value.value,i)},e.parameters):e},yt.prototype.evaluate=function(e,r,i,c,f,d){return e.kind==="constant"?e.value:e.evaluate(r,i,c,f,d)};var rc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(i,c,f,d){if(i.value===void 0)return new vi(this,{kind:"constant",value:void 0},c);if(i.expression.kind==="constant"){var v=i.expression.evaluate(c,null,{},f,d),w=i.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,P=this._calculate(w,w,w,c);return new vi(this,{kind:"constant",value:P},c)}if(i.expression.kind==="camera"){var I=this._calculate(i.expression.evaluate({zoom:c.zoom-1}),i.expression.evaluate({zoom:c.zoom}),i.expression.evaluate({zoom:c.zoom+1}),c);return new vi(this,{kind:"constant",value:I},c)}return new vi(this,i.expression,c)},r.prototype.evaluate=function(i,c,f,d,v,w){if(i.kind==="source"){var P=i.evaluate(c,f,d,v,w);return this._calculate(P,P,P,c)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(c.zoom)-1},f,d),i.evaluate({zoom:Math.floor(c.zoom)},f,d),i.evaluate({zoom:Math.floor(c.zoom)+1},f,d),c):i.value},r.prototype._calculate=function(i,c,f,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:c}:{from:f,to:c}},r.prototype.interpolate=function(i){return i},r}(yt),gi=function(e){this.specification=e};gi.prototype.possiblyEvaluate=function(e,r,i,c){if(e.value!==void 0){if(e.expression.kind==="constant"){var f=e.expression.evaluate(r,null,{},i,c);return this._calculate(f,f,f,r)}return this._calculate(e.expression.evaluate(new nr(Math.floor(r.zoom-1),r)),e.expression.evaluate(new nr(Math.floor(r.zoom),r)),e.expression.evaluate(new nr(Math.floor(r.zoom+1),r)),r)}},gi.prototype._calculate=function(e,r,i,c){return c.zoom>c.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:i,to:r}},gi.prototype.interpolate=function(e){return e};var oa=function(e){this.specification=e};oa.prototype.possiblyEvaluate=function(e,r,i,c){return!!e.expression.evaluate(r,null,{},i,c)},oa.prototype.interpolate=function(){return!1};var ai=function(e){for(var r in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[r];i.specification.overridable&&this.overridableProperties.push(r);var c=this.defaultPropertyValues[r]=new xa(i,void 0),f=this.defaultTransitionablePropertyValues[r]=new Fo(i);this.defaultTransitioningPropertyValues[r]=f.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=c.possiblyEvaluate({})}};ft("DataDrivenProperty",yt),ft("DataConstantProperty",St),ft("CrossFadedDataDrivenProperty",rc),ft("CrossFadedProperty",gi),ft("ColorRampProperty",oa);var ba=function(e){function r(i,c){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),c.layout&&(this._unevaluatedLayout=new ia(c.layout)),c.paint)){for(var f in this._transitionablePaint=new oi(c.paint),i.paint)this.setPaintProperty(f,i.paint[f],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ul(c.paint)}}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},r.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},r.prototype.setLayoutProperty=function(i,c,f){f===void 0&&(f={}),c!=null&&this._validate(Ga,"layers."+this.id+".layout."+i,i,c,f)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,c):this.visibility=c)},r.prototype.getPaintProperty=function(i){return at(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-"-transition".length)):this._transitionablePaint.getValue(i)},r.prototype.setPaintProperty=function(i,c,f){if(f===void 0&&(f={}),c!=null&&this._validate(du,"layers."+this.id+".paint."+i,i,c,f))return!1;if(at(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-"-transition".length),c||void 0),!1;var d=this._transitionablePaint._values[i],v=d.property.specification["property-type"]==="cross-faded-data-driven",w=d.value.isDataDriven(),P=d.value;this._transitionablePaint.setValue(i,c),this._handleSpecialPaintPropertyUpdate(i);var I=this._transitionablePaint._values[i].value;return I.isDataDriven()||w||v||this._handleOverridablePaintPropertyUpdate(i,P,I)},r.prototype._handleSpecialPaintPropertyUpdate=function(i){},r.prototype._handleOverridablePaintPropertyUpdate=function(i,c,f){return!1},r.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},r.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},r.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},r.prototype.recalculate=function(i,c){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,c)},r.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),_t(i,function(c,f){return!(c===void 0||f==="layout"&&!Object.keys(c).length||f==="paint"&&!Object.keys(c).length)})},r.prototype._validate=function(i,c,f,d,v){return v===void 0&&(v={}),(!v||v.validate!==!1)&&ga(this,i.call(Qi,{key:c,layerType:this.type,objectKey:f,value:d,styleSpec:V,style:{glyphs:!0,sprite:!0}}))},r.prototype.is3D=function(){return!1},r.prototype.isTileClipped=function(){return!1},r.prototype.hasOffscreenPass=function(){return!1},r.prototype.resize=function(){},r.prototype.isStateDependent=function(){for(var i in this.paint._values){var c=this.paint.get(i);if(c instanceof vi&&Ji(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1},r}(pe),Sp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},nc=function(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Tr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Yn(e,r){r===void 0&&(r=1);var i=0,c=0;return{members:e.map(function(f){var d=Sp[f.type].BYTES_PER_ELEMENT,v=i=pf(i,Math.max(r,d)),w=f.components||1;return c=Math.max(c,d),i+=d*w,{name:f.name,type:f.type,components:w,offset:v}}),size:pf(i,Math.max(c,r)),alignment:r}}function pf(e,r){return Math.ceil(e/r)*r}Tr.serialize=function(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Tr.deserialize=function(e){var r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r},Tr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Tr.prototype.clear=function(){this.length=0},Tr.prototype.resize=function(e){this.reserve(e),this.length=e},Tr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}},Tr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var $s=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c){var f=this.length;return this.resize(f+1),this.emplace(f,i,c)},r.prototype.emplace=function(i,c,f){var d=2*i;return this.int16[d+0]=c,this.int16[d+1]=f,i},r}(Tr);$s.prototype.bytesPerElement=4,ft("StructArrayLayout2i4",$s);var Ep=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,c,f,d)},r.prototype.emplace=function(i,c,f,d,v){var w=4*i;return this.int16[w+0]=c,this.int16[w+1]=f,this.int16[w+2]=d,this.int16[w+3]=v,i},r}(Tr);Ep.prototype.bytesPerElement=8,ft("StructArrayLayout4i8",Ep);var $a=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d,v,w){var P=this.length;return this.resize(P+1),this.emplace(P,i,c,f,d,v,w)},r.prototype.emplace=function(i,c,f,d,v,w,P){var I=6*i;return this.int16[I+0]=c,this.int16[I+1]=f,this.int16[I+2]=d,this.int16[I+3]=v,this.int16[I+4]=w,this.int16[I+5]=P,i},r}(Tr);$a.prototype.bytesPerElement=12,ft("StructArrayLayout2i4i12",$a);var oo=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d,v,w){var P=this.length;return this.resize(P+1),this.emplace(P,i,c,f,d,v,w)},r.prototype.emplace=function(i,c,f,d,v,w,P){var I=4*i,M=8*i;return this.int16[I+0]=c,this.int16[I+1]=f,this.uint8[M+4]=d,this.uint8[M+5]=v,this.uint8[M+6]=w,this.uint8[M+7]=P,i},r}(Tr);oo.prototype.bytesPerElement=8,ft("StructArrayLayout2i4ub8",oo);var yu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c){var f=this.length;return this.resize(f+1),this.emplace(f,i,c)},r.prototype.emplace=function(i,c,f){var d=2*i;return this.float32[d+0]=c,this.float32[d+1]=f,i},r}(Tr);yu.prototype.bytesPerElement=8,ft("StructArrayLayout2f8",yu);var wa=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d,v,w,P,I,M,z){var R=this.length;return this.resize(R+1),this.emplace(R,i,c,f,d,v,w,P,I,M,z)},r.prototype.emplace=function(i,c,f,d,v,w,P,I,M,z,R){var N=10*i;return this.uint16[N+0]=c,this.uint16[N+1]=f,this.uint16[N+2]=d,this.uint16[N+3]=v,this.uint16[N+4]=w,this.uint16[N+5]=P,this.uint16[N+6]=I,this.uint16[N+7]=M,this.uint16[N+8]=z,this.uint16[N+9]=R,i},r}(Tr);wa.prototype.bytesPerElement=20,ft("StructArrayLayout10ui20",wa);var ic=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d,v,w,P,I,M,z,R,N){var X=this.length;return this.resize(X+1),this.emplace(X,i,c,f,d,v,w,P,I,M,z,R,N)},r.prototype.emplace=function(i,c,f,d,v,w,P,I,M,z,R,N,X){var J=12*i;return this.int16[J+0]=c,this.int16[J+1]=f,this.int16[J+2]=d,this.int16[J+3]=v,this.uint16[J+4]=w,this.uint16[J+5]=P,this.uint16[J+6]=I,this.uint16[J+7]=M,this.int16[J+8]=z,this.int16[J+9]=R,this.int16[J+10]=N,this.int16[J+11]=X,i},r}(Tr);ic.prototype.bytesPerElement=24,ft("StructArrayLayout4i4ui4i24",ic);var vu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f){var d=this.length;return this.resize(d+1),this.emplace(d,i,c,f)},r.prototype.emplace=function(i,c,f,d){var v=3*i;return this.float32[v+0]=c,this.float32[v+1]=f,this.float32[v+2]=d,i},r}(Tr);vu.prototype.bytesPerElement=12,ft("StructArrayLayout3f12",vu);var ll=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var c=this.length;return this.resize(c+1),this.emplace(c,i)},r.prototype.emplace=function(i,c){return this.uint32[1*i+0]=c,i},r}(Tr);ll.prototype.bytesPerElement=4,ft("StructArrayLayout1ul4",ll);var Pp=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d,v,w,P,I,M){var z=this.length;return this.resize(z+1),this.emplace(z,i,c,f,d,v,w,P,I,M)},r.prototype.emplace=function(i,c,f,d,v,w,P,I,M,z){var R=10*i,N=5*i;return this.int16[R+0]=c,this.int16[R+1]=f,this.int16[R+2]=d,this.int16[R+3]=v,this.int16[R+4]=w,this.int16[R+5]=P,this.uint32[N+3]=I,this.uint16[R+8]=M,this.uint16[R+9]=z,i},r}(Tr);Pp.prototype.bytesPerElement=20,ft("StructArrayLayout6i1ul2ui20",Pp);var gu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d,v,w){var P=this.length;return this.resize(P+1),this.emplace(P,i,c,f,d,v,w)},r.prototype.emplace=function(i,c,f,d,v,w,P){var I=6*i;return this.int16[I+0]=c,this.int16[I+1]=f,this.int16[I+2]=d,this.int16[I+3]=v,this.int16[I+4]=w,this.int16[I+5]=P,i},r}(Tr);gu.prototype.bytesPerElement=12,ft("StructArrayLayout2i2i2i12",gu);var Hs=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d,v){var w=this.length;return this.resize(w+1),this.emplace(w,i,c,f,d,v)},r.prototype.emplace=function(i,c,f,d,v,w){var P=4*i,I=8*i;return this.float32[P+0]=c,this.float32[P+1]=f,this.float32[P+2]=d,this.int16[I+6]=v,this.int16[I+7]=w,i},r}(Tr);Hs.prototype.bytesPerElement=16,ft("StructArrayLayout2f1f2i16",Hs);var Tp=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,c,f,d)},r.prototype.emplace=function(i,c,f,d,v){var w=12*i,P=3*i;return this.uint8[w+0]=c,this.uint8[w+1]=f,this.float32[P+1]=d,this.float32[P+2]=v,i},r}(Tr);Tp.prototype.bytesPerElement=12,ft("StructArrayLayout2ub2f12",Tp);var ps=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f){var d=this.length;return this.resize(d+1),this.emplace(d,i,c,f)},r.prototype.emplace=function(i,c,f,d){var v=3*i;return this.uint16[v+0]=c,this.uint16[v+1]=f,this.uint16[v+2]=d,i},r}(Tr);ps.prototype.bytesPerElement=6,ft("StructArrayLayout3ui6",ps);var hs=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d,v,w,P,I,M,z,R,N,X,J,ae,re,he){var _e=this.length;return this.resize(_e+1),this.emplace(_e,i,c,f,d,v,w,P,I,M,z,R,N,X,J,ae,re,he)},r.prototype.emplace=function(i,c,f,d,v,w,P,I,M,z,R,N,X,J,ae,re,he,_e){var Ee=24*i,ke=12*i,Fe=48*i;return this.int16[Ee+0]=c,this.int16[Ee+1]=f,this.uint16[Ee+2]=d,this.uint16[Ee+3]=v,this.uint32[ke+2]=w,this.uint32[ke+3]=P,this.uint32[ke+4]=I,this.uint16[Ee+10]=M,this.uint16[Ee+11]=z,this.uint16[Ee+12]=R,this.float32[ke+7]=N,this.float32[ke+8]=X,this.uint8[Fe+36]=J,this.uint8[Fe+37]=ae,this.uint8[Fe+38]=re,this.uint32[ke+10]=he,this.int16[Ee+22]=_e,i},r}(Tr);hs.prototype.bytesPerElement=48,ft("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",hs);var oc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d,v,w,P,I,M,z,R,N,X,J,ae,re,he,_e,Ee,ke,Fe,Ze,Ke,xt,it,Pt,ot,Yt){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,i,c,f,d,v,w,P,I,M,z,R,N,X,J,ae,re,he,_e,Ee,ke,Fe,Ze,Ke,xt,it,Pt,ot,Yt)},r.prototype.emplace=function(i,c,f,d,v,w,P,I,M,z,R,N,X,J,ae,re,he,_e,Ee,ke,Fe,Ze,Ke,xt,it,Pt,ot,Yt,Bt){var vt=34*i,rr=17*i;return this.int16[vt+0]=c,this.int16[vt+1]=f,this.int16[vt+2]=d,this.int16[vt+3]=v,this.int16[vt+4]=w,this.int16[vt+5]=P,this.int16[vt+6]=I,this.int16[vt+7]=M,this.uint16[vt+8]=z,this.uint16[vt+9]=R,this.uint16[vt+10]=N,this.uint16[vt+11]=X,this.uint16[vt+12]=J,this.uint16[vt+13]=ae,this.uint16[vt+14]=re,this.uint16[vt+15]=he,this.uint16[vt+16]=_e,this.uint16[vt+17]=Ee,this.uint16[vt+18]=ke,this.uint16[vt+19]=Fe,this.uint16[vt+20]=Ze,this.uint16[vt+21]=Ke,this.uint16[vt+22]=xt,this.uint32[rr+12]=it,this.float32[rr+13]=Pt,this.float32[rr+14]=ot,this.float32[rr+15]=Yt,this.float32[rr+16]=Bt,i},r}(Tr);oc.prototype.bytesPerElement=68,ft("StructArrayLayout8i15ui1ul4f68",oc);var fs=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var c=this.length;return this.resize(c+1),this.emplace(c,i)},r.prototype.emplace=function(i,c){return this.float32[1*i+0]=c,i},r}(Tr);fs.prototype.bytesPerElement=4,ft("StructArrayLayout1f4",fs);var Bo=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f){var d=this.length;return this.resize(d+1),this.emplace(d,i,c,f)},r.prototype.emplace=function(i,c,f,d){var v=3*i;return this.int16[v+0]=c,this.int16[v+1]=f,this.int16[v+2]=d,i},r}(Tr);Bo.prototype.bytesPerElement=6,ft("StructArrayLayout3i6",Bo);var Cp=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f){var d=this.length;return this.resize(d+1),this.emplace(d,i,c,f)},r.prototype.emplace=function(i,c,f,d){var v=4*i;return this.uint32[2*i+0]=c,this.uint16[v+2]=f,this.uint16[v+3]=d,i},r}(Tr);Cp.prototype.bytesPerElement=8,ft("StructArrayLayout1ul2ui8",Cp);var cl=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c){var f=this.length;return this.resize(f+1),this.emplace(f,i,c)},r.prototype.emplace=function(i,c,f){var d=2*i;return this.uint16[d+0]=c,this.uint16[d+1]=f,i},r}(Tr);cl.prototype.bytesPerElement=4,ft("StructArrayLayout2ui4",cl);var Ip=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var c=this.length;return this.resize(c+1),this.emplace(c,i)},r.prototype.emplace=function(i,c){return this.uint16[1*i+0]=c,i},r}(Tr);Ip.prototype.bytesPerElement=2,ft("StructArrayLayout1ui2",Ip);var ac=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,c,f,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,c,f,d)},r.prototype.emplace=function(i,c,f,d,v){var w=4*i;return this.float32[w+0]=c,this.float32[w+1]=f,this.float32[w+2]=d,this.float32[w+3]=v,i},r}(Tr);ac.prototype.bytesPerElement=16,ft("StructArrayLayout4f16",ac);var o=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new $(this.anchorPointX,this.anchorPointY)},Object.defineProperties(r.prototype,i),r}(nc);o.prototype.size=20;var u=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new o(this,i)},r}(Pp);ft("CollisionBoxArray",u);var a=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(c){this._structArray.uint8[this._pos1+37]=c},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(c){this._structArray.uint8[this._pos1+38]=c},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(c){this._structArray.uint32[this._pos4+10]=c},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(r.prototype,i),r}(nc);a.prototype.size=48;var p=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new a(this,i)},r}(hs);ft("PlacedSymbolArray",p);var m=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(c){this._structArray.uint32[this._pos4+12]=c},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(r.prototype,i),r}(nc);m.prototype.size=68;var g=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new m(this,i)},r}(oc);ft("SymbolInstanceArray",g);var b=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getoffsetX=function(i){return this.float32[1*i+0]},r}(fs);ft("GlyphOffsetArray",b);var E=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getx=function(i){return this.int16[3*i+0]},r.prototype.gety=function(i){return this.int16[3*i+1]},r.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},r}(Bo);ft("SymbolLineVertexArray",E);var A=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(r.prototype,i),r}(nc);A.prototype.size=8;var D=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new A(this,i)},r}(Cp);ft("FeatureIndexArray",D);var j=Yn([{name:"a_pos",components:2,type:"Int16"}],4).members,q=function(e){e===void 0&&(e=[]),this.segments=e};function Z(e,r){return 256*(e=se(Math.floor(e),0,255))+se(Math.floor(r),0,255)}q.prototype.prepareSegment=function(e,r,i,c){var f=this.segments[this.segments.length-1];return e>q.MAX_VERTEX_ARRAY_LENGTH&&Ct("Max vertices per segment is "+q.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!f||f.vertexLength+e>q.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==c)&&(f={vertexOffset:r.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},c!==void 0&&(f.sortKey=c),this.segments.push(f)),f},q.prototype.get=function(){return this.segments},q.prototype.destroy=function(){for(var e=0,r=this.segments;e<r.length;e+=1){var i=r[e];for(var c in i.vaos)i.vaos[c].destroy()}},q.simpleSegment=function(e,r,i,c){return new q([{vertexOffset:e,primitiveOffset:r,vertexLength:i,primitiveLength:c,vaos:{},sortKey:0}])},q.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ft("SegmentVector",q);var Q=Yn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Y=C(function(e){e.exports=function(r,i){var c,f,d,v,w,P,I,M;for(f=r.length-(c=3&r.length),d=i,w=3432918353,P=461845907,M=0;M<f;)I=255&r.charCodeAt(M)|(255&r.charCodeAt(++M))<<8|(255&r.charCodeAt(++M))<<16|(255&r.charCodeAt(++M))<<24,++M,d=27492+(65535&(v=5*(65535&(d=(d^=I=(65535&(I=(I=(65535&I)*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*P+(((I>>>16)*P&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(I=0,c){case 3:I^=(255&r.charCodeAt(M+2))<<16;case 2:I^=(255&r.charCodeAt(M+1))<<8;case 1:d^=I=(65535&(I=(I=(65535&(I^=255&r.charCodeAt(M)))*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*P+(((I>>>16)*P&65535)<<16)&4294967295}return d^=r.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),oe=C(function(e){e.exports=function(r,i){for(var c,f=r.length,d=i^f,v=0;f>=4;)c=1540483477*(65535&(c=255&r.charCodeAt(v)|(255&r.charCodeAt(++v))<<8|(255&r.charCodeAt(++v))<<16|(255&r.charCodeAt(++v))<<24))+((1540483477*(c>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),f-=4,++v;switch(f){case 3:d^=(255&r.charCodeAt(v+2))<<16;case 2:d^=(255&r.charCodeAt(v+1))<<8;case 1:d=1540483477*(65535&(d^=255&r.charCodeAt(v)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),H=Y,ie=oe;H.murmur3=Y,H.murmur2=ie;var ce=function(){this.ids=[],this.positions=[],this.indexed=!1};ce.prototype.add=function(e,r,i,c){this.ids.push(Me(e)),this.positions.push(r,i,c)},ce.prototype.getPositions=function(e){for(var r=Me(e),i=0,c=this.ids.length-1;i<c;){var f=i+c>>1;this.ids[f]>=r?c=f:i=f+1}for(var d=[];this.ids[i]===r;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},ce.serialize=function(e,r){var i=new Float64Array(e.ids),c=new Uint32Array(e.positions);return function f(d,v,w,P){for(;w<P;){for(var I=d[w+P>>1],M=w-1,z=P+1;;){do M++;while(d[M]<I);do z--;while(d[z]>I);if(M>=z)break;Pe(d,M,z),Pe(v,3*M,3*z),Pe(v,3*M+1,3*z+1),Pe(v,3*M+2,3*z+2)}z-w<P-z?(f(d,v,w,z),w=z+1):(f(d,v,z+1,P),P=z)}}(i,c,0,i.length-1),r&&r.push(i.buffer,c.buffer),{ids:i,positions:c}},ce.deserialize=function(e){var r=new ce;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r};var ve=Math.pow(2,53)-1;function Me(e){var r=+e;return!isNaN(r)&&r<=ve?r:H(String(e))}function Pe(e,r,i){var c=e[r];e[r]=e[i],e[i]=c}ft("FeaturePositionMap",ce);var De=function(e,r){this.gl=e.gl,this.location=r},Ne=function(e){function r(i,c){e.call(this,i,c),this.current=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},r}(De),He=function(e){function r(i,c){e.call(this,i,c),this.current=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},r}(De),We=function(e){function r(i,c){e.call(this,i,c),this.current=[0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},r}(De),lt=function(e){function r(i,c){e.call(this,i,c),this.current=[0,0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},r}(De),Et=function(e){function r(i,c){e.call(this,i,c),this.current=[0,0,0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},r}(De),At=function(e){function r(i,c){e.call(this,i,c),this.current=fr.transparent}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},r}(De),kt=new Float32Array(16),mr=function(e){function r(i,c){e.call(this,i,c),this.current=kt}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var c=1;c<16;c++)if(i[c]!==this.current[c]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},r}(De);function ht(e){return[Z(255*e.r,255*e.g),Z(255*e.b,255*e.a)]}var Zt=function(e,r,i){this.value=e,this.uniformNames=r.map(function(c){return"u_"+c}),this.type=i};Zt.prototype.setUniform=function(e,r,i){e.set(i.constantOr(this.value))},Zt.prototype.getBinding=function(e,r,i){return this.type==="color"?new At(e,r):new He(e,r)};var Jt=function(e,r){this.uniformNames=r.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Jt.prototype.setConstantPatternPositions=function(e,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=e.tlbr},Jt.prototype.setUniform=function(e,r,i,c){var f=c==="u_pattern_to"?this.patternTo:c==="u_pattern_from"?this.patternFrom:c==="u_pixel_ratio_to"?this.pixelRatioTo:c==="u_pixel_ratio_from"?this.pixelRatioFrom:null;f&&e.set(f)},Jt.prototype.getBinding=function(e,r,i){return i.substr(0,9)==="u_pattern"?new Et(e,r):new He(e,r)};var qt=function(e,r,i,c){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=r.map(function(f){return{name:"a_"+f,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new c};qt.prototype.populatePaintArray=function(e,r,i,c,f){var d=this.paintVertexArray.length,v=this.expression.evaluate(new nr(0),r,{},c,[],f);this.paintVertexArray.resize(e),this._setPaintValue(d,e,v)},qt.prototype.updatePaintArray=function(e,r,i,c){var f=this.expression.evaluate({zoom:0},i,c);this._setPaintValue(e,r,f)},qt.prototype._setPaintValue=function(e,r,i){if(this.type==="color")for(var c=ht(i),f=e;f<r;f++)this.paintVertexArray.emplace(f,c[0],c[1]);else{for(var d=e;d<r;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},qt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var jt=function(e,r,i,c,f,d){this.expression=e,this.uniformNames=r.map(function(v){return"u_"+v+"_t"}),this.type=i,this.useIntegerZoom=c,this.zoom=f,this.maxValue=0,this.paintVertexAttributes=r.map(function(v){return{name:"a_"+v,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};jt.prototype.populatePaintArray=function(e,r,i,c,f){var d=this.expression.evaluate(new nr(this.zoom),r,{},c,[],f),v=this.expression.evaluate(new nr(this.zoom+1),r,{},c,[],f),w=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(w,e,d,v)},jt.prototype.updatePaintArray=function(e,r,i,c){var f=this.expression.evaluate({zoom:this.zoom},i,c),d=this.expression.evaluate({zoom:this.zoom+1},i,c);this._setPaintValue(e,r,f,d)},jt.prototype._setPaintValue=function(e,r,i,c){if(this.type==="color")for(var f=ht(i),d=ht(c),v=e;v<r;v++)this.paintVertexArray.emplace(v,f[0],f[1],d[0],d[1]);else{for(var w=e;w<r;w++)this.paintVertexArray.emplace(w,i,c);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(c))}},jt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},jt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},jt.prototype.setUniform=function(e,r){var i=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,c=se(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(c)},jt.prototype.getBinding=function(e,r,i){return new He(e,r)};var Kt=function(e,r,i,c,f,d){this.expression=e,this.type=r,this.useIntegerZoom=i,this.zoom=c,this.layerId=d,this.zoomInPaintVertexArray=new f,this.zoomOutPaintVertexArray=new f};Kt.prototype.populatePaintArray=function(e,r,i){var c=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(c,e,r.patterns&&r.patterns[this.layerId],i)},Kt.prototype.updatePaintArray=function(e,r,i,c,f){this._setPaintValues(e,r,i.patterns&&i.patterns[this.layerId],f)},Kt.prototype._setPaintValues=function(e,r,i,c){if(c&&i){var f=c[i.min],d=c[i.mid],v=c[i.max];if(f&&d&&v)for(var w=e;w<r;w++)this.zoomInPaintVertexArray.emplace(w,d.tl[0],d.tl[1],d.br[0],d.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1],d.pixelRatio,f.pixelRatio),this.zoomOutPaintVertexArray.emplace(w,d.tl[0],d.tl[1],d.br[0],d.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],d.pixelRatio,v.pixelRatio)}},Kt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Q.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Q.members,this.expression.isStateDependent))},Kt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Nt=function(e,r,i){this.binders={},this._buffers=[];var c=[];for(var f in e.paint._values)if(i(f)){var d=e.paint.get(f);if(d instanceof vi&&Ji(d.property.specification)){var v=Vn(f,e.type),w=d.value,P=d.property.specification.type,I=d.property.useIntegerZoom,M=d.property.specification["property-type"],z=M==="cross-faded"||M==="cross-faded-data-driven";if(w.kind==="constant")this.binders[f]=z?new Jt(w.value,v):new Zt(w.value,v,P),c.push("/u_"+f);else if(w.kind==="source"||z){var R=fn(f,P,"source");this.binders[f]=z?new Kt(w,P,I,r,R,e.id):new qt(w,v,P,R),c.push("/a_"+f)}else{var N=fn(f,P,"composite");this.binders[f]=new jt(w,v,P,I,r,N),c.push("/z_"+f)}}}this.cacheKey=c.sort().join("")};Nt.prototype.getMaxValue=function(e){var r=this.binders[e];return r instanceof qt||r instanceof jt?r.maxValue:0},Nt.prototype.populatePaintArrays=function(e,r,i,c,f){for(var d in this.binders){var v=this.binders[d];(v instanceof qt||v instanceof jt||v instanceof Kt)&&v.populatePaintArray(e,r,i,c,f)}},Nt.prototype.setConstantPatternPositions=function(e,r){for(var i in this.binders){var c=this.binders[i];c instanceof Jt&&c.setConstantPatternPositions(e,r)}},Nt.prototype.updatePaintArrays=function(e,r,i,c,f){var d=!1;for(var v in e)for(var w=0,P=r.getPositions(v);w<P.length;w+=1){var I=P[w],M=i.feature(I.index);for(var z in this.binders){var R=this.binders[z];if((R instanceof qt||R instanceof jt||R instanceof Kt)&&R.expression.isStateDependent===!0){var N=c.paint.get(z);R.expression=N.value,R.updatePaintArray(I.start,I.end,M,e[v],f),d=!0}}}return d},Nt.prototype.defines=function(){var e=[];for(var r in this.binders){var i=this.binders[r];(i instanceof Zt||i instanceof Jt)&&e.push.apply(e,i.uniformNames.map(function(c){return"#define HAS_UNIFORM_"+c}))}return e},Nt.prototype.getBinderAttributes=function(){var e=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof qt||i instanceof jt)for(var c=0;c<i.paintVertexAttributes.length;c++)e.push(i.paintVertexAttributes[c].name);else if(i instanceof Kt)for(var f=0;f<Q.members.length;f++)e.push(Q.members[f].name)}return e},Nt.prototype.getBinderUniforms=function(){var e=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof Zt||i instanceof Jt||i instanceof jt)for(var c=0,f=i.uniformNames;c<f.length;c+=1)e.push(f[c])}return e},Nt.prototype.getPaintVertexBuffers=function(){return this._buffers},Nt.prototype.getUniforms=function(e,r){var i=[];for(var c in this.binders){var f=this.binders[c];if(f instanceof Zt||f instanceof Jt||f instanceof jt)for(var d=0,v=f.uniformNames;d<v.length;d+=1){var w=v[d];if(r[w]){var P=f.getBinding(e,r[w],w);i.push({name:w,property:c,binding:P})}}}return i},Nt.prototype.setUniforms=function(e,r,i,c){for(var f=0,d=r;f<d.length;f+=1){var v=d[f],w=v.name,P=v.property;this.binders[P].setUniform(v.binding,c,i.get(P),w)}},Nt.prototype.updatePaintBuffers=function(e){for(var r in this._buffers=[],this.binders){var i=this.binders[r];if(e&&i instanceof Kt){var c=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;c&&this._buffers.push(c)}else(i instanceof qt||i instanceof jt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Nt.prototype.upload=function(e){for(var r in this.binders){var i=this.binders[r];(i instanceof qt||i instanceof jt||i instanceof Kt)&&i.upload(e)}this.updatePaintBuffers()},Nt.prototype.destroy=function(){for(var e in this.binders){var r=this.binders[e];(r instanceof qt||r instanceof jt||r instanceof Kt)&&r.destroy()}};var Ot=function(e,r,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var c=0,f=e;c<f.length;c+=1){var d=f[c];this.programConfigurations[d.id]=new Nt(d,r,i)}this.needsUpload=!1,this._featureMap=new ce,this._bufferOffset=0};function Vn(e,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(r+"-","").replace(/-/g,"_")]}function fn(e,r,i){var c={color:{source:yu,composite:ac},number:{source:fs,composite:yu}},f=function(d){return{"line-pattern":{source:wa,composite:wa},"fill-pattern":{source:wa,composite:wa},"fill-extrusion-pattern":{source:wa,composite:wa}}[d]}(e);return f&&f[i]||c[r][i]}Ot.prototype.populatePaintArrays=function(e,r,i,c,f,d){for(var v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,r,c,f,d);r.id!==void 0&&this._featureMap.add(r.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Ot.prototype.updatePaintArrays=function(e,r,i,c){for(var f=0,d=i;f<d.length;f+=1){var v=d[f];this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,r,v,c)||this.needsUpload}},Ot.prototype.get=function(e){return this.programConfigurations[e]},Ot.prototype.upload=function(e){if(this.needsUpload){for(var r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}},Ot.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ft("ConstantBinder",Zt),ft("CrossFadedConstantBinder",Jt),ft("SourceExpressionBinder",qt),ft("CrossFadedCompositeBinder",Kt),ft("CompositeExpressionBinder",jt),ft("ProgramConfiguration",Nt,{omit:["_buffers"]}),ft("ProgramConfigurationSet",Ot);var pi=Math.pow(2,14)-1,Qn=-pi-1;function un(e){for(var r=8192/e.extent,i=e.loadGeometry(),c=0;c<i.length;c++)for(var f=i[c],d=0;d<f.length;d++){var v=f[d],w=Math.round(v.x*r),P=Math.round(v.y*r);v.x=se(w,Qn,pi),v.y=se(P,Qn,pi),(w<v.x||w>v.x+1||P<v.y||P>v.y+1)&&Ct("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function _n(e,r){return{type:e.type,id:e.id,properties:e.properties,geometry:r?un(e):[]}}function ao(e,r,i,c,f){e.emplaceBack(2*r+(c+1)/2,2*i+(f+1)/2)}var _i=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new $s,this.indexArray=new ps,this.segments=new q,this.programConfigurations=new Ot(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function ds(e,r){for(var i=0;i<e.length;i++)if(Sa(r,e[i]))return!0;for(var c=0;c<r.length;c++)if(Sa(e,r[c]))return!0;return!!pl(e,r)}function Li(e,r,i){return!!Sa(e,r)||!!ms(r,e,i)}function aa(e,r){if(e.length===1)return hl(r,e[0]);for(var i=0;i<r.length;i++)for(var c=r[i],f=0;f<c.length;f++)if(Sa(e,c[f]))return!0;for(var d=0;d<e.length;d++)if(hl(r,e[d]))return!0;for(var v=0;v<r.length;v++)if(pl(e,r[v]))return!0;return!1}function Uo(e,r,i){if(e.length>1){if(pl(e,r))return!0;for(var c=0;c<r.length;c++)if(ms(r[c],e,i))return!0}for(var f=0;f<e.length;f++)if(ms(e[f],r,i))return!0;return!1}function pl(e,r){if(e.length===0||r.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var c=e[i],f=e[i+1],d=0;d<r.length-1;d++)if(_u(c,f,r[d],r[d+1]))return!0;return!1}function _u(e,r,i,c){return Ut(e,i,c)!==Ut(r,i,c)&&Ut(e,r,i)!==Ut(e,r,c)}function ms(e,r,i){var c=i*i;if(r.length===1)return e.distSqr(r[0])<c;for(var f=1;f<r.length;f++)if(xu(e,r[f-1],r[f])<c)return!0;return!1}function xu(e,r,i){var c=r.distSqr(i);if(c===0)return e.distSqr(r);var f=((e.x-r.x)*(i.x-r.x)+(e.y-r.y)*(i.y-r.y))/c;return e.distSqr(f<0?r:f>1?i:i.sub(r)._mult(f)._add(r))}function hl(e,r){for(var i,c,f,d=!1,v=0;v<e.length;v++)for(var w=0,P=(i=e[v]).length-1;w<i.length;P=w++)(c=i[w]).y>r.y!=(f=i[P]).y>r.y&&r.x<(f.x-c.x)*(r.y-c.y)/(f.y-c.y)+c.x&&(d=!d);return d}function Sa(e,r){for(var i=!1,c=0,f=e.length-1;c<e.length;f=c++){var d=e[c],v=e[f];d.y>r.y!=v.y>r.y&&r.x<(v.x-d.x)*(r.y-d.y)/(v.y-d.y)+d.x&&(i=!i)}return i}function fl(e,r,i){var c=i[0],f=i[2];if(e.x<c.x&&r.x<c.x||e.x>f.x&&r.x>f.x||e.y<c.y&&r.y<c.y||e.y>f.y&&r.y>f.y)return!1;var d=Ut(e,r,i[0]);return d!==Ut(e,r,i[1])||d!==Ut(e,r,i[2])||d!==Ut(e,r,i[3])}function Ea(e,r,i){var c=r.paint.get(e).value;return c.kind==="constant"?c.value:i.programConfigurations.get(r.id).getMaxValue(e)}function qn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ha(e,r,i,c,f){if(!r[0]&&!r[1])return e;var d=$.convert(r)._mult(f);i==="viewport"&&d._rotate(-c);for(var v=[],w=0;w<e.length;w++)v.push(e[w].sub(d));return v}_i.prototype.populate=function(e,r,i){var c=this.layers[0],f=[],d=null;c.type==="circle"&&(d=c.layout.get("circle-sort-key"));for(var v=0,w=e;v<w.length;v+=1){var P=w[v],I=P.feature,M=P.id,z=P.index,R=P.sourceLayerIndex,N=this.layers[0]._featureFilter.needGeometry,X=_n(I,N);if(this.layers[0]._featureFilter.filter(new nr(this.zoom),X,i)){var J=d?d.evaluate(X,{},i):void 0,ae={id:M,properties:I.properties,type:I.type,sourceLayerIndex:R,index:z,geometry:N?X.geometry:un(I),patterns:{},sortKey:J};f.push(ae)}}d&&f.sort(function(Ke,xt){return Ke.sortKey-xt.sortKey});for(var re=0,he=f;re<he.length;re+=1){var _e=he[re],Ee=_e.geometry,ke=_e.index,Fe=_e.sourceLayerIndex,Ze=e[ke].feature;this.addFeature(_e,Ee,ke,i),r.featureIndex.insert(Ze,Ee,ke,Fe,this.index)}},_i.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},_i.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},_i.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_i.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,j),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},_i.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_i.prototype.addFeature=function(e,r,i,c){for(var f=0,d=r;f<d.length;f+=1)for(var v=0,w=d[f];v<w.length;v+=1){var P=w[v],I=P.x,M=P.y;if(!(I<0||I>=8192||M<0||M>=8192)){var z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),R=z.vertexLength;ao(this.layoutVertexArray,I,M,-1,-1),ao(this.layoutVertexArray,I,M,1,-1),ao(this.layoutVertexArray,I,M,1,1),ao(this.layoutVertexArray,I,M,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),z.vertexLength+=4,z.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},c)},ft("CircleBucket",_i,{omit:["layers"]});var ys=new ai({"circle-sort-key":new yt(V.layout_circle["circle-sort-key"])}),Xs={paint:new ai({"circle-radius":new yt(V.paint_circle["circle-radius"]),"circle-color":new yt(V.paint_circle["circle-color"]),"circle-blur":new yt(V.paint_circle["circle-blur"]),"circle-opacity":new yt(V.paint_circle["circle-opacity"]),"circle-translate":new St(V.paint_circle["circle-translate"]),"circle-translate-anchor":new St(V.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new St(V.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new St(V.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(V.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(V.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(V.paint_circle["circle-stroke-opacity"])}),layout:ys},wr=typeof Float32Array!="undefined"?Float32Array:Array;function So(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Di(e,r,i){var c=r[0],f=r[1],d=r[2],v=r[3],w=r[4],P=r[5],I=r[6],M=r[7],z=r[8],R=r[9],N=r[10],X=r[11],J=r[12],ae=r[13],re=r[14],he=r[15],_e=i[0],Ee=i[1],ke=i[2],Fe=i[3];return e[0]=_e*c+Ee*w+ke*z+Fe*J,e[1]=_e*f+Ee*P+ke*R+Fe*ae,e[2]=_e*d+Ee*I+ke*N+Fe*re,e[3]=_e*v+Ee*M+ke*X+Fe*he,e[4]=(_e=i[4])*c+(Ee=i[5])*w+(ke=i[6])*z+(Fe=i[7])*J,e[5]=_e*f+Ee*P+ke*R+Fe*ae,e[6]=_e*d+Ee*I+ke*N+Fe*re,e[7]=_e*v+Ee*M+ke*X+Fe*he,e[8]=(_e=i[8])*c+(Ee=i[9])*w+(ke=i[10])*z+(Fe=i[11])*J,e[9]=_e*f+Ee*P+ke*R+Fe*ae,e[10]=_e*d+Ee*I+ke*N+Fe*re,e[11]=_e*v+Ee*M+ke*X+Fe*he,e[12]=(_e=i[12])*c+(Ee=i[13])*w+(ke=i[14])*z+(Fe=i[15])*J,e[13]=_e*f+Ee*P+ke*R+Fe*ae,e[14]=_e*d+Ee*I+ke*N+Fe*re,e[15]=_e*v+Ee*M+ke*X+Fe*he,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,r=0,i=arguments.length;i--;)r+=e[i]*e[i];return Math.sqrt(r)});var Ks,km=Di;function sc(e,r,i){var c=r[0],f=r[1],d=r[2],v=r[3];return e[0]=i[0]*c+i[4]*f+i[8]*d+i[12]*v,e[1]=i[1]*c+i[5]*f+i[9]*d+i[13]*v,e[2]=i[2]*c+i[6]*f+i[10]*d+i[14]*v,e[3]=i[3]*c+i[7]*f+i[11]*d+i[15]*v,e}Ks=new wr(3),wr!=Float32Array&&(Ks[0]=0,Ks[1]=0,Ks[2]=0),function(){var e=new wr(4);wr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var Am=(function(){var e=new wr(2);wr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function r(i){e.call(this,i,Xs)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new _i(i)},r.prototype.queryRadius=function(i){var c=i;return Ea("circle-radius",this,c)+Ea("circle-stroke-width",this,c)+qn(this.paint.get("circle-translate"))},r.prototype.queryIntersectsFeature=function(i,c,f,d,v,w,P,I){for(var M=Ha(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,P),z=this.paint.get("circle-radius").evaluate(c,f)+this.paint.get("circle-stroke-width").evaluate(c,f),R=this.paint.get("circle-pitch-alignment")==="map",N=R?M:function(Ze,Ke){return Ze.map(function(xt){return dl(xt,Ke)})}(M,I),X=R?z*P:z,J=0,ae=d;J<ae.length;J+=1)for(var re=0,he=ae[J];re<he.length;re+=1){var _e=he[re],Ee=R?_e:dl(_e,I),ke=X,Fe=sc([],[_e.x,_e.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ke*=Fe[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ke*=w.cameraToCenterDistance/Fe[3]),Li(N,Ee,ke))return!0}return!1},r}(ba));function dl(e,r){var i=sc([],[e.x,e.y,0,1],r);return new $(i[0]/i[3],i[1]/i[3])}var hf=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(_i);function bu(e,r,i,c){var f=r.width,d=r.height;if(c){if(c instanceof Uint8ClampedArray)c=new Uint8Array(c.buffer);else if(c.length!==f*d*i)throw new RangeError("mismatched image size")}else c=new Uint8Array(f*d*i);return e.width=f,e.height=d,e.data=c,e}function uc(e,r,i){var c=r.width,f=r.height;if(c!==e.width||f!==e.height){var d=bu({},{width:c,height:f},i);Mm(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,c),height:Math.min(e.height,f)},i),e.width=c,e.height=f,e.data=d.data}}function Mm(e,r,i,c,f,d){if(f.width===0||f.height===0)return r;if(f.width>e.width||f.height>e.height||i.x>e.width-f.width||i.y>e.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>r.width||f.height>r.height||c.x>r.width-f.width||c.y>r.height-f.height)throw new RangeError("out of range destination coordinates for image copy");for(var v=e.data,w=r.data,P=0;P<f.height;P++)for(var I=((i.y+P)*e.width+i.x)*d,M=((c.y+P)*r.width+c.x)*d,z=0;z<f.width*d;z++)w[M+z]=v[I+z];return r}ft("HeatmapBucket",hf,{omit:["layers"]});var ml=function(e,r){bu(this,e,1,r)};ml.prototype.resize=function(e){uc(this,e,1)},ml.prototype.clone=function(){return new ml({width:this.width,height:this.height},new Uint8Array(this.data))},ml.copy=function(e,r,i,c,f){Mm(e,r,i,c,f,1)};var so=function(e,r){bu(this,e,4,r)};so.prototype.resize=function(e){uc(this,e,4)},so.prototype.replace=function(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},so.prototype.clone=function(){return new so({width:this.width,height:this.height},new Uint8Array(this.data))},so.copy=function(e,r,i,c,f){Mm(e,r,i,c,f,4)},ft("AlphaImage",ml),ft("RGBAImage",so);var Rw={paint:new ai({"heatmap-radius":new yt(V.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(V.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new St(V.paint_heatmap["heatmap-intensity"]),"heatmap-color":new oa(V.paint_heatmap["heatmap-color"]),"heatmap-opacity":new St(V.paint_heatmap["heatmap-opacity"])})};function Xg(e){var r={},i=e.resolution||256,c=e.clips?e.clips.length:1,f=e.image||new so({width:i,height:c}),d=function(X,J,ae){r[e.evaluationKey]=ae;var re=e.expression.evaluate(r);f.data[X+J+0]=Math.floor(255*re.r/re.a),f.data[X+J+1]=Math.floor(255*re.g/re.a),f.data[X+J+2]=Math.floor(255*re.b/re.a),f.data[X+J+3]=Math.floor(255*re.a)};if(e.clips)for(var v=0,w=0;v<c;++v,w+=4*i)for(var P=0,I=0;P<i;P++,I+=4){var M=P/(i-1),z=e.clips[v];d(w,I,z.start*(1-M)+z.end*M)}else for(var R=0,N=0;R<i;R++,N+=4)d(0,N,R/(i-1));return f}var Fw=function(e){function r(i){e.call(this,i,Rw),this._updateColorRamp()}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new hf(i)},r.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},r.prototype._updateColorRamp=function(){this.colorRamp=Xg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},r.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},r}(ba),Bw={paint:new ai({"hillshade-illumination-direction":new St(V.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new St(V.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new St(V.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new St(V.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new St(V.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new St(V.paint_hillshade["hillshade-accent-color"])})},Uw=function(e){function r(i){e.call(this,i,Bw)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},r}(ba),Nw=Yn([{name:"a_pos",components:2,type:"Int16"}],4).members,zm=ff,jw=ff;function ff(e,r,i){i=i||2;var c,f,d,v,w,P,I,M=r&&r.length,z=M?r[0]*i:e.length,R=Kg(e,0,z,i,!0),N=[];if(!R||R.next===R.prev)return N;if(M&&(R=function(J,ae,re,he){var _e,Ee,ke,Fe=[];for(_e=0,Ee=ae.length;_e<Ee;_e++)(ke=Kg(J,ae[_e]*he,_e<Ee-1?ae[_e+1]*he:J.length,he,!1))===ke.next&&(ke.steiner=!0),Fe.push(Xw(ke));for(Fe.sort(Ww),_e=0;_e<Fe.length;_e++)$w(Fe[_e],re),re=wu(re,re.next);return re}(e,r,R,i)),e.length>80*i){c=d=e[0],f=v=e[1];for(var X=i;X<z;X+=i)(w=e[X])<c&&(c=w),(P=e[X+1])<f&&(f=P),w>d&&(d=w),P>v&&(v=P);I=(I=Math.max(d-c,v-f))!==0?1/I:0}return kp(R,N,i,c,f,I),N}function Kg(e,r,i,c,f){var d,v;if(f===Om(e,r,i,c)>0)for(d=r;d<i;d+=c)v=Qg(d,e[d],e[d+1],v);else for(d=i-c;d>=r;d-=c)v=Qg(d,e[d],e[d+1],v);return v&&df(v,v.next)&&(Mp(v),v=v.next),v}function wu(e,r){if(!e)return e;r||(r=e);var i,c=e;do if(i=!1,c.steiner||!df(c,c.next)&&Dn(c.prev,c,c.next)!==0)c=c.next;else{if(Mp(c),(c=r=c.prev)===c.next)break;i=!0}while(i||c!==r);return r}function kp(e,r,i,c,f,d,v){if(e){!v&&d&&function(M,z,R,N){var X=M;do X.z===null&&(X.z=Lm(X.x,X.y,z,R,N)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==M);X.prevZ.nextZ=null,X.prevZ=null,function(J){var ae,re,he,_e,Ee,ke,Fe,Ze,Ke=1;do{for(re=J,J=null,Ee=null,ke=0;re;){for(ke++,he=re,Fe=0,ae=0;ae<Ke&&(Fe++,he=he.nextZ);ae++);for(Ze=Ke;Fe>0||Ze>0&&he;)Fe!==0&&(Ze===0||!he||re.z<=he.z)?(_e=re,re=re.nextZ,Fe--):(_e=he,he=he.nextZ,Ze--),Ee?Ee.nextZ=_e:J=_e,_e.prevZ=Ee,Ee=_e;re=he}Ee.nextZ=null,Ke*=2}while(ke>1)}(X)}(e,c,f,d);for(var w,P,I=e;e.prev!==e.next;)if(w=e.prev,P=e.next,d?qw(e,c,f,d):Vw(e))r.push(w.i/i),r.push(e.i/i),r.push(P.i/i),Mp(e),e=P.next,I=P.next;else if((e=P)===I){v?v===1?kp(e=Zw(wu(e),r,i),r,i,c,f,d,2):v===2&&Gw(e,r,i,c,f,d):kp(wu(e),r,i,c,f,d,1);break}}}function Vw(e){var r=e.prev,i=e,c=e.next;if(Dn(r,i,c)>=0)return!1;for(var f=e.next.next;f!==e.prev;){if(lc(r.x,r.y,i.x,i.y,c.x,c.y,f.x,f.y)&&Dn(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function qw(e,r,i,c){var f=e.prev,d=e,v=e.next;if(Dn(f,d,v)>=0)return!1;for(var w=f.x>d.x?f.x>v.x?f.x:v.x:d.x>v.x?d.x:v.x,P=f.y>d.y?f.y>v.y?f.y:v.y:d.y>v.y?d.y:v.y,I=Lm(f.x<d.x?f.x<v.x?f.x:v.x:d.x<v.x?d.x:v.x,f.y<d.y?f.y<v.y?f.y:v.y:d.y<v.y?d.y:v.y,r,i,c),M=Lm(w,P,r,i,c),z=e.prevZ,R=e.nextZ;z&&z.z>=I&&R&&R.z<=M;){if(z!==e.prev&&z!==e.next&&lc(f.x,f.y,d.x,d.y,v.x,v.y,z.x,z.y)&&Dn(z.prev,z,z.next)>=0||(z=z.prevZ,R!==e.prev&&R!==e.next&&lc(f.x,f.y,d.x,d.y,v.x,v.y,R.x,R.y)&&Dn(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;z&&z.z>=I;){if(z!==e.prev&&z!==e.next&&lc(f.x,f.y,d.x,d.y,v.x,v.y,z.x,z.y)&&Dn(z.prev,z,z.next)>=0)return!1;z=z.prevZ}for(;R&&R.z<=M;){if(R!==e.prev&&R!==e.next&&lc(f.x,f.y,d.x,d.y,v.x,v.y,R.x,R.y)&&Dn(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function Zw(e,r,i){var c=e;do{var f=c.prev,d=c.next.next;!df(f,d)&&Jg(f,c,c.next,d)&&Ap(f,d)&&Ap(d,f)&&(r.push(f.i/i),r.push(c.i/i),r.push(d.i/i),Mp(c),Mp(c.next),c=e=d),c=c.next}while(c!==e);return wu(c)}function Gw(e,r,i,c,f,d){var v=e;do{for(var w=v.next.next;w!==v.prev;){if(v.i!==w.i&&Kw(v,w)){var P=Yg(v,w);return v=wu(v,v.next),P=wu(P,P.next),kp(v,r,i,c,f,d),void kp(P,r,i,c,f,d)}w=w.next}v=v.next}while(v!==e)}function Ww(e,r){return e.x-r.x}function $w(e,r){if(r=function(c,f){var d,v=f,w=c.x,P=c.y,I=-1/0;do{if(P<=v.y&&P>=v.next.y&&v.next.y!==v.y){var M=v.x+(P-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(M<=w&&M>I){if(I=M,M===w){if(P===v.y)return v;if(P===v.next.y)return v.next}d=v.x<v.next.x?v:v.next}}v=v.next}while(v!==f);if(!d)return null;if(w===I)return d;var z,R=d,N=d.x,X=d.y,J=1/0;v=d;do w>=v.x&&v.x>=N&&w!==v.x&&lc(P<X?w:I,P,N,X,P<X?I:w,P,v.x,v.y)&&(z=Math.abs(P-v.y)/(w-v.x),Ap(v,c)&&(z<J||z===J&&(v.x>d.x||v.x===d.x&&Hw(d,v)))&&(d=v,J=z)),v=v.next;while(v!==R);return d}(e,r)){var i=Yg(r,e);wu(r,r.next),wu(i,i.next)}}function Hw(e,r){return Dn(e.prev,e,r.prev)<0&&Dn(r.next,e,e.next)<0}function Lm(e,r,i,c,f){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*f)|e<<8))|e<<4))|e<<2))|e<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-c)*f)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Xw(e){var r=e,i=e;do(r.x<i.x||r.x===i.x&&r.y<i.y)&&(i=r),r=r.next;while(r!==e);return i}function lc(e,r,i,c,f,d,v,w){return(f-v)*(r-w)-(e-v)*(d-w)>=0&&(e-v)*(c-w)-(i-v)*(r-w)>=0&&(i-v)*(d-w)-(f-v)*(c-w)>=0}function Kw(e,r){return e.next.i!==r.i&&e.prev.i!==r.i&&!function(i,c){var f=i;do{if(f.i!==i.i&&f.next.i!==i.i&&f.i!==c.i&&f.next.i!==c.i&&Jg(f,f.next,i,c))return!0;f=f.next}while(f!==i);return!1}(e,r)&&(Ap(e,r)&&Ap(r,e)&&function(i,c){var f=i,d=!1,v=(i.x+c.x)/2,w=(i.y+c.y)/2;do f.y>w!=f.next.y>w&&f.next.y!==f.y&&v<(f.next.x-f.x)*(w-f.y)/(f.next.y-f.y)+f.x&&(d=!d),f=f.next;while(f!==i);return d}(e,r)&&(Dn(e.prev,e,r.prev)||Dn(e,r.prev,r))||df(e,r)&&Dn(e.prev,e,e.next)>0&&Dn(r.prev,r,r.next)>0)}function Dn(e,r,i){return(r.y-e.y)*(i.x-r.x)-(r.x-e.x)*(i.y-r.y)}function df(e,r){return e.x===r.x&&e.y===r.y}function Jg(e,r,i,c){var f=yf(Dn(e,r,i)),d=yf(Dn(e,r,c)),v=yf(Dn(i,c,e)),w=yf(Dn(i,c,r));return f!==d&&v!==w||!(f!==0||!mf(e,i,r))||!(d!==0||!mf(e,c,r))||!(v!==0||!mf(i,e,c))||!(w!==0||!mf(i,r,c))}function mf(e,r,i){return r.x<=Math.max(e.x,i.x)&&r.x>=Math.min(e.x,i.x)&&r.y<=Math.max(e.y,i.y)&&r.y>=Math.min(e.y,i.y)}function yf(e){return e>0?1:e<0?-1:0}function Ap(e,r){return Dn(e.prev,e,e.next)<0?Dn(e,r,e.next)>=0&&Dn(e,e.prev,r)>=0:Dn(e,r,e.prev)<0||Dn(e,e.next,r)<0}function Yg(e,r){var i=new Dm(e.i,e.x,e.y),c=new Dm(r.i,r.x,r.y),f=e.next,d=r.prev;return e.next=r,r.prev=e,i.next=f,f.prev=i,c.next=i,i.prev=c,d.next=c,c.prev=d,c}function Qg(e,r,i,c){var f=new Dm(e,r,i);return c?(f.next=c.next,f.prev=c,c.next.prev=f,c.next=f):(f.prev=f,f.next=f),f}function Mp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Dm(e,r,i){this.i=e,this.x=r,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Om(e,r,i,c){for(var f=0,d=r,v=i-c;d<i;d+=c)f+=(e[v]-e[d])*(e[d+1]+e[v+1]),v=d;return f}function Jw(e,r,i,c,f){(function d(v,w,P,I,M){for(;I>P;){if(I-P>600){var z=I-P+1,R=w-P+1,N=Math.log(z),X=.5*Math.exp(2*N/3),J=.5*Math.sqrt(N*X*(z-X)/z)*(R-z/2<0?-1:1);d(v,w,Math.max(P,Math.floor(w-R*X/z+J)),Math.min(I,Math.floor(w+(z-R)*X/z+J)),M)}var ae=v[w],re=P,he=I;for(zp(v,P,w),M(v[I],ae)>0&&zp(v,P,I);re<he;){for(zp(v,re,he),re++,he--;M(v[re],ae)<0;)re++;for(;M(v[he],ae)>0;)he--}M(v[P],ae)===0?zp(v,P,he):zp(v,++he,I),he<=w&&(P=he+1),w<=he&&(I=he-1)}})(e,r,i||0,c||e.length-1,f||Yw)}function zp(e,r,i){var c=e[r];e[r]=e[i],e[i]=c}function Yw(e,r){return e<r?-1:e>r?1:0}function Rm(e,r){var i=e.length;if(i<=1)return[e];for(var c,f,d=[],v=0;v<i;v++){var w=Cr(e[v]);w!==0&&(e[v].area=Math.abs(w),f===void 0&&(f=w<0),f===w<0?(c&&d.push(c),c=[e[v]]):c.push(e[v]))}if(c&&d.push(c),r>1)for(var P=0;P<d.length;P++)d[P].length<=r||(Jw(d[P],r,1,d[P].length-1,Qw),d[P]=d[P].slice(0,r));return d}function Qw(e,r){return r.area-e.area}function Fm(e,r,i){for(var c=i.patternDependencies,f=!1,d=0,v=r;d<v.length;d+=1){var w=v[d].paint.get(e+"-pattern");w.isConstant()||(f=!0);var P=w.constantOr(null);P&&(f=!0,c[P.to]=!0,c[P.from]=!0)}return f}function Bm(e,r,i,c,f){for(var d=f.patternDependencies,v=0,w=r;v<w.length;v+=1){var P=w[v],I=P.paint.get(e+"-pattern").value;if(I.kind!=="constant"){var M=I.evaluate({zoom:c-1},i,{},f.availableImages),z=I.evaluate({zoom:c},i,{},f.availableImages),R=I.evaluate({zoom:c+1},i,{},f.availableImages);z=z&&z.name?z.name:z,R=R&&R.name?R.name:R,d[M=M&&M.name?M.name:M]=!0,d[z]=!0,d[R]=!0,i.patterns[P.id]={min:M,mid:z,max:R}}}return i}ff.deviation=function(e,r,i,c){var f=r&&r.length,d=Math.abs(Om(e,0,f?r[0]*i:e.length,i));if(f)for(var v=0,w=r.length;v<w;v++)d-=Math.abs(Om(e,r[v]*i,v<w-1?r[v+1]*i:e.length,i));var P=0;for(v=0;v<c.length;v+=3){var I=c[v]*i,M=c[v+1]*i,z=c[v+2]*i;P+=Math.abs((e[I]-e[z])*(e[M+1]-e[I+1])-(e[I]-e[M])*(e[z+1]-e[I+1]))}return d===0&&P===0?0:Math.abs((P-d)/d)},ff.flatten=function(e){for(var r=e[0][0].length,i={vertices:[],holes:[],dimensions:r},c=0,f=0;f<e.length;f++){for(var d=0;d<e[f].length;d++)for(var v=0;v<r;v++)i.vertices.push(e[f][d][v]);f>0&&i.holes.push(c+=e[f-1].length)}return i},zm.default=jw;var Xa=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $s,this.indexArray=new ps,this.indexArray2=new cl,this.programConfigurations=new Ot(e.layers,e.zoom),this.segments=new q,this.segments2=new q,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};Xa.prototype.populate=function(e,r,i){this.hasPattern=Fm("fill",this.layers,r);for(var c=this.layers[0].layout.get("fill-sort-key"),f=[],d=0,v=e;d<v.length;d+=1){var w=v[d],P=w.feature,I=w.id,M=w.index,z=w.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,N=_n(P,R);if(this.layers[0]._featureFilter.filter(new nr(this.zoom),N,i)){var X=c?c.evaluate(N,{},i,r.availableImages):void 0,J={id:I,properties:P.properties,type:P.type,sourceLayerIndex:z,index:M,geometry:R?N.geometry:un(P),patterns:{},sortKey:X};f.push(J)}}c&&f.sort(function(Ze,Ke){return Ze.sortKey-Ke.sortKey});for(var ae=0,re=f;ae<re.length;ae+=1){var he=re[ae],_e=he.geometry,Ee=he.index,ke=he.sourceLayerIndex;if(this.hasPattern){var Fe=Bm("fill",this.layers,he,this.zoom,r);this.patternFeatures.push(Fe)}else this.addFeature(he,_e,Ee,i,{});r.featureIndex.insert(e[Ee].feature,_e,Ee,ke,this.index)}},Xa.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},Xa.prototype.addFeatures=function(e,r,i){for(var c=0,f=this.patternFeatures;c<f.length;c+=1){var d=f[c];this.addFeature(d,d.geometry,d.index,r,i)}},Xa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Xa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xa.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Nw),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Xa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Xa.prototype.addFeature=function(e,r,i,c,f){for(var d=0,v=Rm(r,500);d<v.length;d+=1){for(var w=v[d],P=0,I=0,M=w;I<M.length;I+=1)P+=M[I].length;for(var z=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray),R=z.vertexLength,N=[],X=[],J=0,ae=w;J<ae.length;J+=1){var re=ae[J];if(re.length!==0){re!==w[0]&&X.push(N.length/2);var he=this.segments2.prepareSegment(re.length,this.layoutVertexArray,this.indexArray2),_e=he.vertexLength;this.layoutVertexArray.emplaceBack(re[0].x,re[0].y),this.indexArray2.emplaceBack(_e+re.length-1,_e),N.push(re[0].x),N.push(re[0].y);for(var Ee=1;Ee<re.length;Ee++)this.layoutVertexArray.emplaceBack(re[Ee].x,re[Ee].y),this.indexArray2.emplaceBack(_e+Ee-1,_e+Ee),N.push(re[Ee].x),N.push(re[Ee].y);he.vertexLength+=re.length,he.primitiveLength+=re.length}}for(var ke=zm(N,X),Fe=0;Fe<ke.length;Fe+=3)this.indexArray.emplaceBack(R+ke[Fe],R+ke[Fe+1],R+ke[Fe+2]);z.vertexLength+=P,z.primitiveLength+=ke.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,c)},ft("FillBucket",Xa,{omit:["layers","patternFeatures"]});var e2=new ai({"fill-sort-key":new yt(V.layout_fill["fill-sort-key"])}),t2={paint:new ai({"fill-antialias":new St(V.paint_fill["fill-antialias"]),"fill-opacity":new yt(V.paint_fill["fill-opacity"]),"fill-color":new yt(V.paint_fill["fill-color"]),"fill-outline-color":new yt(V.paint_fill["fill-outline-color"]),"fill-translate":new St(V.paint_fill["fill-translate"]),"fill-translate-anchor":new St(V.paint_fill["fill-translate-anchor"]),"fill-pattern":new rc(V.paint_fill["fill-pattern"])}),layout:e2},r2=function(e){function r(i){e.call(this,i,t2)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.recalculate=function(i,c){e.prototype.recalculate.call(this,i,c);var f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},r.prototype.createBucket=function(i){return new Xa(i)},r.prototype.queryRadius=function(){return qn(this.paint.get("fill-translate"))},r.prototype.queryIntersectsFeature=function(i,c,f,d,v,w,P){return aa(Ha(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,P),d)},r.prototype.isTileClipped=function(){return!0},r}(ba),n2=Yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,e_=cc;function cc(e,r,i,c,f){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=c,this._values=f,e.readFields(i2,this,r)}function i2(e,r,i){e==1?r.id=i.readVarint():e==2?function(c,f){for(var d=c.readVarint()+c.pos;c.pos<d;){var v=f._keys[c.readVarint()],w=f._values[c.readVarint()];f.properties[v]=w}}(i,r):e==3?r.type=i.readVarint():e==4&&(r._geometry=i.pos)}function o2(e){for(var r,i,c=0,f=0,d=e.length,v=d-1;f<d;v=f++)c+=((i=e[v]).x-(r=e[f]).x)*(r.y+i.y);return c}cc.types=["Unknown","Point","LineString","Polygon"],cc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var r,i=e.readVarint()+e.pos,c=1,f=0,d=0,v=0,w=[];e.pos<i;){if(f<=0){var P=e.readVarint();c=7&P,f=P>>3}if(f--,c===1||c===2)d+=e.readSVarint(),v+=e.readSVarint(),c===1&&(r&&w.push(r),r=[]),r.push(new $(d,v));else{if(c!==7)throw new Error("unknown command "+c);r&&r.push(r[0].clone())}}return r&&w.push(r),w},cc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var r=e.readVarint()+e.pos,i=1,c=0,f=0,d=0,v=1/0,w=-1/0,P=1/0,I=-1/0;e.pos<r;){if(c<=0){var M=e.readVarint();i=7&M,c=M>>3}if(c--,i===1||i===2)(f+=e.readSVarint())<v&&(v=f),f>w&&(w=f),(d+=e.readSVarint())<P&&(P=d),d>I&&(I=d);else if(i!==7)throw new Error("unknown command "+i)}return[v,P,w,I]},cc.prototype.toGeoJSON=function(e,r,i){var c,f,d=this.extent*Math.pow(2,i),v=this.extent*e,w=this.extent*r,P=this.loadGeometry(),I=cc.types[this.type];function M(N){for(var X=0;X<N.length;X++){var J=N[X];N[X]=[360*(J.x+v)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(J.y+w)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(c=0;c<P.length;c++)z[c]=P[c][0];M(P=z);break;case 2:for(c=0;c<P.length;c++)M(P[c]);break;case 3:for(P=function(N){var X=N.length;if(X<=1)return[N];for(var J,ae,re=[],he=0;he<X;he++){var _e=o2(N[he]);_e!==0&&(ae===void 0&&(ae=_e<0),ae===_e<0?(J&&re.push(J),J=[N[he]]):J.push(N[he]))}return J&&re.push(J),re}(P),c=0;c<P.length;c++)for(f=0;f<P[c].length;f++)M(P[c][f])}P.length===1?P=P[0]:I="Multi"+I;var R={type:"Feature",geometry:{type:I,coordinates:P},properties:this.properties};return"id"in this&&(R.id=this.id),R};var t_=r_;function r_(e,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(a2,this,r),this.length=this._features.length}function a2(e,r,i){e===15?r.version=i.readVarint():e===1?r.name=i.readString():e===5?r.extent=i.readVarint():e===2?r._features.push(i.pos):e===3?r._keys.push(i.readString()):e===4&&r._values.push(function(c){for(var f=null,d=c.readVarint()+c.pos;c.pos<d;){var v=c.readVarint()>>3;f=v===1?c.readString():v===2?c.readFloat():v===3?c.readDouble():v===4?c.readVarint64():v===5?c.readVarint():v===6?c.readSVarint():v===7?c.readBoolean():null}return f}(i))}function s2(e,r,i){if(e===3){var c=new t_(i,i.readVarint()+i.pos);c.length&&(r[c.name]=c)}}r_.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var r=this._pbf.readVarint()+this._pbf.pos;return new e_(this._pbf,r,this.extent,this._keys,this._values)};var pc={VectorTile:function(e,r){this.layers=e.readFields(s2,{},r)},VectorTileFeature:e_,VectorTileLayer:t_},u2=pc.VectorTileFeature.types,Um=Math.pow(2,13);function Lp(e,r,i,c,f,d,v,w){e.emplaceBack(r,i,2*Math.floor(c*Um)+v,f*Um*2,d*Um*2,Math.round(w))}var Ka=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new $a,this.indexArray=new ps,this.programConfigurations=new Ot(e.layers,e.zoom),this.segments=new q,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function l2(e,r){return e.x===r.x&&(e.x<0||e.x>8192)||e.y===r.y&&(e.y<0||e.y>8192)}Ka.prototype.populate=function(e,r,i){this.features=[],this.hasPattern=Fm("fill-extrusion",this.layers,r);for(var c=0,f=e;c<f.length;c+=1){var d=f[c],v=d.feature,w=d.id,P=d.index,I=d.sourceLayerIndex,M=this.layers[0]._featureFilter.needGeometry,z=_n(v,M);if(this.layers[0]._featureFilter.filter(new nr(this.zoom),z,i)){var R={id:w,sourceLayerIndex:I,index:P,geometry:M?z.geometry:un(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Bm("fill-extrusion",this.layers,R,this.zoom,r)):this.addFeature(R,R.geometry,P,i,{}),r.featureIndex.insert(v,R.geometry,P,I,this.index,!0)}}},Ka.prototype.addFeatures=function(e,r,i){for(var c=0,f=this.features;c<f.length;c+=1){var d=f[c];this.addFeature(d,d.geometry,d.index,r,i)}},Ka.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},Ka.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ka.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ka.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,n2),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ka.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ka.prototype.addFeature=function(e,r,i,c,f){for(var d=0,v=Rm(r,500);d<v.length;d+=1){for(var w=v[d],P=0,I=0,M=w;I<M.length;I+=1)P+=M[I].length;for(var z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),R=0,N=w;R<N.length;R+=1){var X=N[R];if(X.length!==0&&!((rr=X).every(function(Ht){return Ht.x<0})||rr.every(function(Ht){return Ht.x>8192})||rr.every(function(Ht){return Ht.y<0})||rr.every(function(Ht){return Ht.y>8192})))for(var J=0,ae=0;ae<X.length;ae++){var re=X[ae];if(ae>=1){var he=X[ae-1];if(!l2(re,he)){z.vertexLength+4>q.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _e=re.sub(he)._perp()._unit(),Ee=he.dist(re);J+Ee>32768&&(J=0),Lp(this.layoutVertexArray,re.x,re.y,_e.x,_e.y,0,0,J),Lp(this.layoutVertexArray,re.x,re.y,_e.x,_e.y,0,1,J),Lp(this.layoutVertexArray,he.x,he.y,_e.x,_e.y,0,0,J+=Ee),Lp(this.layoutVertexArray,he.x,he.y,_e.x,_e.y,0,1,J);var ke=z.vertexLength;this.indexArray.emplaceBack(ke,ke+2,ke+1),this.indexArray.emplaceBack(ke+1,ke+2,ke+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+P>q.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),u2[e.type]==="Polygon"){for(var Fe=[],Ze=[],Ke=z.vertexLength,xt=0,it=w;xt<it.length;xt+=1){var Pt=it[xt];if(Pt.length!==0){Pt!==w[0]&&Ze.push(Fe.length/2);for(var ot=0;ot<Pt.length;ot++){var Yt=Pt[ot];Lp(this.layoutVertexArray,Yt.x,Yt.y,0,0,1,1,0),Fe.push(Yt.x),Fe.push(Yt.y)}}}for(var Bt=zm(Fe,Ze),vt=0;vt<Bt.length;vt+=3)this.indexArray.emplaceBack(Ke+Bt[vt],Ke+Bt[vt+2],Ke+Bt[vt+1]);z.primitiveLength+=Bt.length/3,z.vertexLength+=P}}var rr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,c)},ft("FillExtrusionBucket",Ka,{omit:["layers","features"]});var c2={paint:new ai({"fill-extrusion-opacity":new St(V["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(V["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new St(V["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new St(V["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new rc(V["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(V["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(V["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new St(V["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},p2=function(e){function r(i){e.call(this,i,c2)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new Ka(i)},r.prototype.queryRadius=function(){return qn(this.paint.get("fill-extrusion-translate"))},r.prototype.is3D=function(){return!0},r.prototype.queryIntersectsFeature=function(i,c,f,d,v,w,P,I){var M=Ha(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,P),z=this.paint.get("fill-extrusion-height").evaluate(c,f),R=this.paint.get("fill-extrusion-base").evaluate(c,f),N=function(J,ae,re,he){for(var _e=[],Ee=0,ke=J;Ee<ke.length;Ee+=1){var Fe=ke[Ee],Ze=[Fe.x,Fe.y,0,1];sc(Ze,Ze,ae),_e.push(new $(Ze[0]/Ze[3],Ze[1]/Ze[3]))}return _e}(M,I),X=function(J,ae,re,he){for(var _e=[],Ee=[],ke=he[8]*ae,Fe=he[9]*ae,Ze=he[10]*ae,Ke=he[11]*ae,xt=he[8]*re,it=he[9]*re,Pt=he[10]*re,ot=he[11]*re,Yt=0,Bt=J;Yt<Bt.length;Yt+=1){for(var vt=[],rr=[],Ht=0,pr=Bt[Yt];Ht<pr.length;Ht+=1){var Tt=pr[Ht],xr=Tt.x,Kr=Tt.y,dn=he[0]*xr+he[4]*Kr+he[12],ln=he[1]*xr+he[5]*Kr+he[13],Jr=he[2]*xr+he[6]*Kr+he[14],mn=he[3]*xr+he[7]*Kr+he[15],Zn=Jr+Ze,Gn=mn+Ke,bi=dn+xt,ti=ln+it,wi=Jr+Pt,xn=mn+ot,ri=new $((dn+ke)/Gn,(ln+Fe)/Gn);ri.z=Zn/Gn,vt.push(ri);var sr=new $(bi/xn,ti/xn);sr.z=wi/xn,rr.push(sr)}_e.push(vt),Ee.push(rr)}return[_e,Ee]}(d,R,z,I);return function(J,ae,re){var he=1/0;aa(re,ae)&&(he=n_(re,ae[0]));for(var _e=0;_e<ae.length;_e++)for(var Ee=ae[_e],ke=J[_e],Fe=0;Fe<Ee.length-1;Fe++){var Ze=Ee[Fe],Ke=[Ze,Ee[Fe+1],ke[Fe+1],ke[Fe],Ze];ds(re,Ke)&&(he=Math.min(he,n_(re,Ke)))}return he!==1/0&&he}(X[0],X[1],N)},r}(ba);function Dp(e,r){return e.x*r.x+e.y*r.y}function n_(e,r){if(e.length===1){for(var i,c=0,f=r[c++];!i||f.equals(i);)if(!(i=r[c++]))return 1/0;for(;c<r.length;c++){var d=r[c],v=e[0],w=i.sub(f),P=d.sub(f),I=v.sub(f),M=Dp(w,w),z=Dp(w,P),R=Dp(P,P),N=Dp(I,w),X=Dp(I,P),J=M*R-z*z,ae=(R*N-z*X)/J,re=(M*X-z*N)/J,he=f.z*(1-ae-re)+i.z*ae+d.z*re;if(isFinite(he))return he}return 1/0}for(var _e=1/0,Ee=0,ke=r;Ee<ke.length;Ee+=1)_e=Math.min(_e,ke[Ee].z);return _e}var h2=Yn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,f2=Yn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,d2=pc.VectorTileFeature.types,m2=Math.cos(Math.PI/180*37.5),i_=Math.pow(2,14)/.5,Oi=function(e){var r=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){r.gradients[i.id]={}}),this.layoutVertexArray=new oo,this.layoutVertexArray2=new yu,this.indexArray=new ps,this.programConfigurations=new Ot(e.layers,e.zoom),this.segments=new q,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};Oi.prototype.populate=function(e,r,i){this.hasPattern=Fm("line",this.layers,r);for(var c=this.layers[0].layout.get("line-sort-key"),f=[],d=0,v=e;d<v.length;d+=1){var w=v[d],P=w.feature,I=w.id,M=w.index,z=w.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,N=_n(P,R);if(this.layers[0]._featureFilter.filter(new nr(this.zoom),N,i)){var X=c?c.evaluate(N,{},i):void 0,J={id:I,properties:P.properties,type:P.type,sourceLayerIndex:z,index:M,geometry:R?N.geometry:un(P),patterns:{},sortKey:X};f.push(J)}}c&&f.sort(function(Ze,Ke){return Ze.sortKey-Ke.sortKey});for(var ae=0,re=f;ae<re.length;ae+=1){var he=re[ae],_e=he.geometry,Ee=he.index,ke=he.sourceLayerIndex;if(this.hasPattern){var Fe=Bm("line",this.layers,he,this.zoom,r);this.patternFeatures.push(Fe)}else this.addFeature(he,_e,Ee,i,{});r.featureIndex.insert(e[Ee].feature,_e,Ee,ke,this.index)}},Oi.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},Oi.prototype.addFeatures=function(e,r,i){for(var c=0,f=this.patternFeatures;c<f.length;c+=1){var d=f[c];this.addFeature(d,d.geometry,d.index,r,i)}},Oi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Oi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Oi.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,f2)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,h2),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Oi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Oi.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Oi.prototype.addFeature=function(e,r,i,c,f){var d=this.layers[0].layout,v=d.get("line-join").evaluate(e,{}),w=d.get("line-cap"),P=d.get("line-miter-limit"),I=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var M=0,z=r;M<z.length;M+=1)this.addLine(z[M],e,v,w,P,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,c)},Oi.prototype.addLine=function(e,r,i,c,f,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var v=0;v<e.length-1;v++)this.totalDistance+=e[v].dist(e[v+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var w=d2[r.type]==="Polygon",P=e.length;P>=2&&e[P-1].equals(e[P-2]);)P--;for(var I=0;I<P-1&&e[I].equals(e[I+1]);)I++;if(!(P<(w?3:2))){i==="bevel"&&(f=1.05);var M,z=this.overscaling<=16?122880/(512*this.overscaling):0,R=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray),N=void 0,X=void 0,J=void 0,ae=void 0;this.e1=this.e2=-1,w&&(ae=e[I].sub(M=e[P-2])._unit()._perp());for(var re=I;re<P;re++)if(!(X=re===P-1?w?e[I+1]:void 0:e[re+1])||!e[re].equals(X)){ae&&(J=ae),M&&(N=M),M=e[re],ae=X?X.sub(M)._unit()._perp():J;var he=(J=J||ae).add(ae);he.x===0&&he.y===0||he._unit();var _e=J.x*ae.x+J.y*ae.y,Ee=he.x*ae.x+he.y*ae.y,ke=Ee!==0?1/Ee:1/0,Fe=2*Math.sqrt(2-2*Ee),Ze=Ee<m2&&N&&X,Ke=J.x*ae.y-J.y*ae.x>0;if(Ze&&re>I){var xt=M.dist(N);if(xt>2*z){var it=M.sub(M.sub(N)._mult(z/xt)._round());this.updateDistance(N,it),this.addCurrentVertex(it,J,0,0,R),N=it}}var Pt=N&&X,ot=Pt?i:w?"butt":c;if(Pt&&ot==="round"&&(ke<d?ot="miter":ke<=2&&(ot="fakeround")),ot==="miter"&&ke>f&&(ot="bevel"),ot==="bevel"&&(ke>2&&(ot="flipbevel"),ke<f&&(ot="miter")),N&&this.updateDistance(N,M),ot==="miter")he._mult(ke),this.addCurrentVertex(M,he,0,0,R);else if(ot==="flipbevel"){if(ke>100)he=ae.mult(-1);else{var Yt=ke*J.add(ae).mag()/J.sub(ae).mag();he._perp()._mult(Yt*(Ke?-1:1))}this.addCurrentVertex(M,he,0,0,R),this.addCurrentVertex(M,he.mult(-1),0,0,R)}else if(ot==="bevel"||ot==="fakeround"){var Bt=-Math.sqrt(ke*ke-1),vt=Ke?Bt:0,rr=Ke?0:Bt;if(N&&this.addCurrentVertex(M,J,vt,rr,R),ot==="fakeround")for(var Ht=Math.round(180*Fe/Math.PI/20),pr=1;pr<Ht;pr++){var Tt=pr/Ht;if(Tt!==.5){var xr=Tt-.5;Tt+=Tt*xr*(Tt-1)*((1.0904+_e*(_e*(3.55645-1.43519*_e)-3.2452))*xr*xr+(.848013+_e*(.215638*_e-1.06021)))}var Kr=ae.sub(J)._mult(Tt)._add(J)._unit()._mult(Ke?-1:1);this.addHalfVertex(M,Kr.x,Kr.y,!1,Ke,0,R)}X&&this.addCurrentVertex(M,ae,-vt,-rr,R)}else if(ot==="butt")this.addCurrentVertex(M,he,0,0,R);else if(ot==="square"){var dn=N?1:-1;this.addCurrentVertex(M,he,dn,dn,R)}else ot==="round"&&(N&&(this.addCurrentVertex(M,J,0,0,R),this.addCurrentVertex(M,J,1,1,R,!0)),X&&(this.addCurrentVertex(M,ae,-1,-1,R,!0),this.addCurrentVertex(M,ae,0,0,R)));if(Ze&&re<P-1){var ln=M.dist(X);if(ln>2*z){var Jr=M.add(X.sub(M)._mult(z/ln)._round());this.updateDistance(M,Jr),this.addCurrentVertex(Jr,ae,0,0,R),M=Jr}}}}},Oi.prototype.addCurrentVertex=function(e,r,i,c,f,d){d===void 0&&(d=!1);var v=r.y*c-r.x,w=-r.y-r.x*c;this.addHalfVertex(e,r.x+r.y*i,r.y-r.x*i,d,!1,i,f),this.addHalfVertex(e,v,w,d,!0,-c,f),this.distance>i_/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,r,i,c,f,d))},Oi.prototype.addHalfVertex=function(e,r,i,c,f,d,v){var w=.5*(this.lineClips?this.scaledDistance*(i_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(c?1:0),(e.y<<1)+(f?1:0),Math.round(63*r)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&w)<<2,w>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var P=v.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),v.primitiveLength++),f?this.e2=P:this.e1=P},Oi.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Oi.prototype.updateDistance=function(e,r){this.distance+=e.dist(r),this.updateScaledDistance()},ft("LineBucket",Oi,{omit:["layers","patternFeatures"]});var y2=new ai({"line-cap":new St(V.layout_line["line-cap"]),"line-join":new yt(V.layout_line["line-join"]),"line-miter-limit":new St(V.layout_line["line-miter-limit"]),"line-round-limit":new St(V.layout_line["line-round-limit"]),"line-sort-key":new yt(V.layout_line["line-sort-key"])}),o_={paint:new ai({"line-opacity":new yt(V.paint_line["line-opacity"]),"line-color":new yt(V.paint_line["line-color"]),"line-translate":new St(V.paint_line["line-translate"]),"line-translate-anchor":new St(V.paint_line["line-translate-anchor"]),"line-width":new yt(V.paint_line["line-width"]),"line-gap-width":new yt(V.paint_line["line-gap-width"]),"line-offset":new yt(V.paint_line["line-offset"]),"line-blur":new yt(V.paint_line["line-blur"]),"line-dasharray":new gi(V.paint_line["line-dasharray"]),"line-pattern":new rc(V.paint_line["line-pattern"]),"line-gradient":new oa(V.paint_line["line-gradient"])}),layout:y2},a_=new(function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(i,c){return c=new nr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),e.prototype.possiblyEvaluate.call(this,i,c)},r.prototype.evaluate=function(i,c,f,d){return c=ne({},c,{zoom:Math.floor(c.zoom)}),e.prototype.evaluate.call(this,i,c,f,d)},r}(yt))(o_.paint.properties["line-width"].specification);a_.useIntegerZoom=!0;var v2=function(e){function r(i){e.call(this,i,o_),this.gradientVersion=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qr,this.gradientVersion=(this.gradientVersion+1)%xe)},r.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},r.prototype.recalculate=function(i,c){e.prototype.recalculate.call(this,i,c),this.paint._values["line-floorwidth"]=a_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},r.prototype.createBucket=function(i){return new Oi(i)},r.prototype.queryRadius=function(i){var c=i,f=s_(Ea("line-width",this,c),Ea("line-gap-width",this,c)),d=Ea("line-offset",this,c);return f/2+Math.abs(d)+qn(this.paint.get("line-translate"))},r.prototype.queryIntersectsFeature=function(i,c,f,d,v,w,P){var I=Ha(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,P),M=P/2*s_(this.paint.get("line-width").evaluate(c,f),this.paint.get("line-gap-width").evaluate(c,f)),z=this.paint.get("line-offset").evaluate(c,f);return z&&(d=function(R,N){for(var X=[],J=new $(0,0),ae=0;ae<R.length;ae++){for(var re=R[ae],he=[],_e=0;_e<re.length;_e++){var Ee=re[_e],ke=re[_e+1],Fe=_e===0?J:Ee.sub(re[_e-1])._unit()._perp(),Ze=_e===re.length-1?J:ke.sub(Ee)._unit()._perp(),Ke=Fe._add(Ze)._unit();Ke._mult(1/(Ke.x*Ze.x+Ke.y*Ze.y)),he.push(Ke._mult(N)._add(Ee))}X.push(he)}return X}(d,z*P)),function(R,N,X){for(var J=0;J<N.length;J++){var ae=N[J];if(R.length>=3){for(var re=0;re<ae.length;re++)if(Sa(R,ae[re]))return!0}if(Uo(R,ae,X))return!0}return!1}(I,d,M)},r.prototype.isTileClipped=function(){return!0},r}(ba);function s_(e,r){return r>0?r+2*e:e}var g2=Yn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_2=Yn([{name:"a_projected_pos",components:3,type:"Float32"}],4),x2=(Yn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Yn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),u_=(Yn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),b2=Yn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function w2(e,r,i){return e.sections.forEach(function(c){c.text=function(f,d,v){var w=d.layout.get("text-transform").evaluate(v,{});return w==="uppercase"?f=f.toLocaleUpperCase():w==="lowercase"&&(f=f.toLocaleLowerCase()),wo.applyArabicShaping&&(f=wo.applyArabicShaping(f)),f}(c.text,r,i)}),e}Yn([{name:"triangle",components:3,type:"Uint16"}]),Yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Yn([{type:"Float32",name:"offsetX"}]),Yn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Op={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},l_=function(e,r,i,c,f){var d,v,w=8*f-c-1,P=(1<<w)-1,I=P>>1,M=-7,z=i?f-1:0,R=i?-1:1,N=e[r+z];for(z+=R,d=N&(1<<-M)-1,N>>=-M,M+=w;M>0;d=256*d+e[r+z],z+=R,M-=8);for(v=d&(1<<-M)-1,d>>=-M,M+=c;M>0;v=256*v+e[r+z],z+=R,M-=8);if(d===0)d=1-I;else{if(d===P)return v?NaN:1/0*(N?-1:1);v+=Math.pow(2,c),d-=I}return(N?-1:1)*v*Math.pow(2,d-c)},c_=function(e,r,i,c,f,d){var v,w,P,I=8*d-f-1,M=(1<<I)-1,z=M>>1,R=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=c?0:d-1,X=c?1:-1,J=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,v=M):(v=Math.floor(Math.log(r)/Math.LN2),r*(P=Math.pow(2,-v))<1&&(v--,P*=2),(r+=v+z>=1?R/P:R*Math.pow(2,1-z))*P>=2&&(v++,P/=2),v+z>=M?(w=0,v=M):v+z>=1?(w=(r*P-1)*Math.pow(2,f),v+=z):(w=r*Math.pow(2,z-1)*Math.pow(2,f),v=0));f>=8;e[i+N]=255&w,N+=X,w/=256,f-=8);for(v=v<<f|w,I+=f;I>0;e[i+N]=255&v,N+=X,v/=256,I-=8);e[i+N-X]|=128*J},vf=Zr;function Zr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Zr.Varint=0,Zr.Fixed64=1,Zr.Bytes=2,Zr.Fixed32=5;var p_=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Js(e){return e.type===Zr.Bytes?e.readVarint()+e.pos:e.pos+1}function hc(e,r,i){return i?4294967296*r+(e>>>0):4294967296*(r>>>0)+(e>>>0)}function h_(e,r,i){var c=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));i.realloc(c);for(var f=i.pos-1;f>=e;f--)i.buf[f+c]=i.buf[f]}function S2(e,r){for(var i=0;i<e.length;i++)r.writeVarint(e[i])}function E2(e,r){for(var i=0;i<e.length;i++)r.writeSVarint(e[i])}function P2(e,r){for(var i=0;i<e.length;i++)r.writeFloat(e[i])}function T2(e,r){for(var i=0;i<e.length;i++)r.writeDouble(e[i])}function C2(e,r){for(var i=0;i<e.length;i++)r.writeBoolean(e[i])}function I2(e,r){for(var i=0;i<e.length;i++)r.writeFixed32(e[i])}function k2(e,r){for(var i=0;i<e.length;i++)r.writeSFixed32(e[i])}function A2(e,r){for(var i=0;i<e.length;i++)r.writeFixed64(e[i])}function M2(e,r){for(var i=0;i<e.length;i++)r.writeSFixed64(e[i])}function gf(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+16777216*e[r+3]}function fc(e,r,i){e[i]=r,e[i+1]=r>>>8,e[i+2]=r>>>16,e[i+3]=r>>>24}function f_(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+(e[r+3]<<24)}function z2(e,r,i){e===1&&i.readMessage(L2,r)}function L2(e,r,i){if(e===3){var c=i.readMessage(D2,{}),f=c.width,d=c.height,v=c.left,w=c.top,P=c.advance;r.push({id:c.id,bitmap:new ml({width:f+6,height:d+6},c.bitmap),metrics:{width:f,height:d,left:v,top:w,advance:P}})}}function D2(e,r,i){e===1?r.id=i.readVarint():e===2?r.bitmap=i.readBytes():e===3?r.width=i.readVarint():e===4?r.height=i.readVarint():e===5?r.left=i.readSVarint():e===6?r.top=i.readSVarint():e===7&&(r.advance=i.readVarint())}function d_(e){for(var r=0,i=0,c=0,f=e;c<f.length;c+=1){var d=f[c];r+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(J,ae){return ae.h-J.h});for(var v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),i),h:1/0}],w=0,P=0,I=0,M=e;I<M.length;I+=1)for(var z=M[I],R=v.length-1;R>=0;R--){var N=v[R];if(!(z.w>N.w||z.h>N.h)){if(z.x=N.x,z.y=N.y,P=Math.max(P,z.y+z.h),w=Math.max(w,z.x+z.w),z.w===N.w&&z.h===N.h){var X=v.pop();R<v.length&&(v[R]=X)}else z.h===N.h?(N.x+=z.w,N.w-=z.w):z.w===N.w?(N.y+=z.h,N.h-=z.h):(v.push({x:N.x+z.w,y:N.y,w:N.w-z.w,h:z.h}),N.y+=z.h,N.h-=z.h);break}}return{w,h:P,fill:r/(w*P)||0}}Zr.prototype={destroy:function(){this.buf=null},readFields:function(e,r,i){for(i=i||this.length;this.pos<i;){var c=this.readVarint(),f=c>>3,d=this.pos;this.type=7&c,e(f,r,this),this.pos===d&&this.skip(c)}return r},readMessage:function(e,r){return this.readFields(e,r,this.readVarint()+this.pos)},readFixed32:function(){var e=gf(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=f_(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=gf(this.buf,this.pos)+4294967296*gf(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=gf(this.buf,this.pos)+4294967296*f_(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=l_(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=l_(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var r,i,c=this.buf;return r=127&(i=c[this.pos++]),i<128?r:(r|=(127&(i=c[this.pos++]))<<7,i<128?r:(r|=(127&(i=c[this.pos++]))<<14,i<128?r:(r|=(127&(i=c[this.pos++]))<<21,i<128?r:function(f,d,v){var w,P,I=v.buf;if(w=(112&(P=I[v.pos++]))>>4,P<128||(w|=(127&(P=I[v.pos++]))<<3,P<128)||(w|=(127&(P=I[v.pos++]))<<10,P<128)||(w|=(127&(P=I[v.pos++]))<<17,P<128)||(w|=(127&(P=I[v.pos++]))<<24,P<128)||(w|=(1&(P=I[v.pos++]))<<31,P<128))return hc(f,w,d);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(i=c[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=12&&p_?function(i,c,f){return p_.decode(i.subarray(c,f))}(this.buf,r,e):function(i,c,f){for(var d="",v=c;v<f;){var w,P,I,M=i[v],z=null,R=M>239?4:M>223?3:M>191?2:1;if(v+R>f)break;R===1?M<128&&(z=M):R===2?(192&(w=i[v+1]))==128&&(z=(31&M)<<6|63&w)<=127&&(z=null):R===3?(P=i[v+2],(192&(w=i[v+1]))==128&&(192&P)==128&&((z=(15&M)<<12|(63&w)<<6|63&P)<=2047||z>=55296&&z<=57343)&&(z=null)):R===4&&(P=i[v+2],I=i[v+3],(192&(w=i[v+1]))==128&&(192&P)==128&&(192&I)==128&&((z=(15&M)<<18|(63&w)<<12|(63&P)<<6|63&I)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,R=1):z>65535&&(z-=65536,d+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),d+=String.fromCharCode(z),v+=R}return d}(this.buf,r,e)},readBytes:function(){var e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r},readPackedVarint:function(e,r){if(this.type!==Zr.Bytes)return e.push(this.readVarint(r));var i=Js(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(r));return e},readPackedSVarint:function(e){if(this.type!==Zr.Bytes)return e.push(this.readSVarint());var r=Js(this);for(e=e||[];this.pos<r;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Zr.Bytes)return e.push(this.readBoolean());var r=Js(this);for(e=e||[];this.pos<r;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Zr.Bytes)return e.push(this.readFloat());var r=Js(this);for(e=e||[];this.pos<r;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Zr.Bytes)return e.push(this.readDouble());var r=Js(this);for(e=e||[];this.pos<r;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Zr.Bytes)return e.push(this.readFixed32());var r=Js(this);for(e=e||[];this.pos<r;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Zr.Bytes)return e.push(this.readSFixed32());var r=Js(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Zr.Bytes)return e.push(this.readFixed64());var r=Js(this);for(e=e||[];this.pos<r;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Zr.Bytes)return e.push(this.readSFixed64());var r=Js(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed64());return e},skip:function(e){var r=7&e;if(r===Zr.Varint)for(;this.buf[this.pos++]>127;);else if(r===Zr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Zr.Fixed32)this.pos+=4;else{if(r!==Zr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(e,r){this.writeVarint(e<<3|r)},realloc:function(e){for(var r=this.length||16;r<this.pos+e;)r*=2;if(r!==this.length){var i=new Uint8Array(r);i.set(this.buf),this.buf=i,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),fc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),fc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),fc(this.buf,-1&e,this.pos),fc(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),fc(this.buf,-1&e,this.pos),fc(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(r,i){var c,f;if(r>=0?(c=r%4294967296|0,f=r/4294967296|0):(f=~(-r/4294967296),4294967295^(c=~(-r%4294967296))?c=c+1|0:(c=0,f=f+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,v,w){w.buf[w.pos++]=127&d|128,d>>>=7,w.buf[w.pos++]=127&d|128,d>>>=7,w.buf[w.pos++]=127&d|128,d>>>=7,w.buf[w.pos++]=127&d|128,w.buf[w.pos]=127&(d>>>=7)}(c,0,i),function(d,v){var w=(7&d)<<4;v.buf[v.pos++]|=w|((d>>>=3)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d)))))}(f,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var r=this.pos;this.pos=function(c,f,d){for(var v,w,P=0;P<f.length;P++){if((v=f.charCodeAt(P))>55295&&v<57344){if(!w){v>56319||P+1===f.length?(c[d++]=239,c[d++]=191,c[d++]=189):w=v;continue}if(v<56320){c[d++]=239,c[d++]=191,c[d++]=189,w=v;continue}v=w-55296<<10|v-56320|65536,w=null}else w&&(c[d++]=239,c[d++]=191,c[d++]=189,w=null);v<128?c[d++]=v:(v<2048?c[d++]=v>>6|192:(v<65536?c[d++]=v>>12|224:(c[d++]=v>>18|240,c[d++]=v>>12&63|128),c[d++]=v>>6&63|128),c[d++]=63&v|128)}return d}(this.buf,e,this.pos);var i=this.pos-r;i>=128&&h_(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),c_(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),c_(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var r=e.length;this.writeVarint(r),this.realloc(r);for(var i=0;i<r;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,r){this.pos++;var i=this.pos;e(r,this);var c=this.pos-i;c>=128&&h_(i,c,this),this.pos=i-1,this.writeVarint(c),this.pos+=c},writeMessage:function(e,r,i){this.writeTag(e,Zr.Bytes),this.writeRawMessage(r,i)},writePackedVarint:function(e,r){r.length&&this.writeMessage(e,S2,r)},writePackedSVarint:function(e,r){r.length&&this.writeMessage(e,E2,r)},writePackedBoolean:function(e,r){r.length&&this.writeMessage(e,C2,r)},writePackedFloat:function(e,r){r.length&&this.writeMessage(e,P2,r)},writePackedDouble:function(e,r){r.length&&this.writeMessage(e,T2,r)},writePackedFixed32:function(e,r){r.length&&this.writeMessage(e,I2,r)},writePackedSFixed32:function(e,r){r.length&&this.writeMessage(e,k2,r)},writePackedFixed64:function(e,r){r.length&&this.writeMessage(e,A2,r)},writePackedSFixed64:function(e,r){r.length&&this.writeMessage(e,M2,r)},writeBytesField:function(e,r){this.writeTag(e,Zr.Bytes),this.writeBytes(r)},writeFixed32Field:function(e,r){this.writeTag(e,Zr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(e,r){this.writeTag(e,Zr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(e,r){this.writeTag(e,Zr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(e,r){this.writeTag(e,Zr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(e,r){this.writeTag(e,Zr.Varint),this.writeVarint(r)},writeSVarintField:function(e,r){this.writeTag(e,Zr.Varint),this.writeSVarint(r)},writeStringField:function(e,r){this.writeTag(e,Zr.Bytes),this.writeString(r)},writeFloatField:function(e,r){this.writeTag(e,Zr.Fixed32),this.writeFloat(r)},writeDoubleField:function(e,r){this.writeTag(e,Zr.Fixed64),this.writeDouble(r)},writeBooleanField:function(e,r){this.writeVarintField(e,Boolean(r))}};var _f=function(e,r){var i=r.pixelRatio,c=r.version,f=r.stretchX,d=r.stretchY,v=r.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=f,this.stretchY=d,this.content=v,this.version=c},Rp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Rp.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Rp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Rp.tlbr.get=function(){return this.tl.concat(this.br)},Rp.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(_f.prototype,Rp);var Fp=function(e,r){var i={},c={};this.haveRenderCallbacks=[];var f=[];this.addImages(e,i,f),this.addImages(r,c,f);var d=d_(f),v=new so({width:d.w||1,height:d.h||1});for(var w in e){var P=e[w],I=i[w].paddedRect;so.copy(P.data,v,{x:0,y:0},{x:I.x+1,y:I.y+1},P.data)}for(var M in r){var z=r[M],R=c[M].paddedRect,N=R.x+1,X=R.y+1,J=z.data.width,ae=z.data.height;so.copy(z.data,v,{x:0,y:0},{x:N,y:X},z.data),so.copy(z.data,v,{x:0,y:ae-1},{x:N,y:X-1},{width:J,height:1}),so.copy(z.data,v,{x:0,y:0},{x:N,y:X+ae},{width:J,height:1}),so.copy(z.data,v,{x:J-1,y:0},{x:N-1,y:X},{width:1,height:ae}),so.copy(z.data,v,{x:0,y:0},{x:N+J,y:X},{width:1,height:ae})}this.image=v,this.iconPositions=i,this.patternPositions=c};Fp.prototype.addImages=function(e,r,i){for(var c in e){var f=e[c],d={x:0,y:0,w:f.data.width+2,h:f.data.height+2};i.push(d),r[c]=new _f(d,f),f.hasRenderCallback&&this.haveRenderCallbacks.push(c)}},Fp.prototype.patchUpdatedImages=function(e,r){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),r),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),r)},Fp.prototype.patchUpdatedImage=function(e,r,i){if(e&&r&&e.version!==r.version){e.version=r.version;var c=e.tl;i.update(r.data,void 0,{x:c[0],y:c[1]})}},ft("ImagePosition",_f),ft("ImageAtlas",Fp);var No={horizontal:1,vertical:2,horizontalOnly:3},dc=function(){this.scale=1,this.fontStack="",this.imageName=null};dc.forText=function(e,r){var i=new dc;return i.scale=e||1,i.fontStack=r,i},dc.forImage=function(e){var r=new dc;return r.imageName=e,r};var xi=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function xf(e,r,i,c,f,d,v,w,P,I,M,z,R,N,X,J){var ae,re=xi.fromFeature(e,f);z===No.vertical&&re.verticalizePunctuation();var he=wo.processBidirectionalText,_e=wo.processStyledBidirectionalText;if(he&&re.sections.length===1){ae=[];for(var Ee=0,ke=he(re.toString(),Nm(re,I,d,r,c,N,X));Ee<ke.length;Ee+=1){var Fe=ke[Ee],Ze=new xi;Ze.text=Fe,Ze.sections=re.sections;for(var Ke=0;Ke<Fe.length;Ke++)Ze.sectionIndex.push(0);ae.push(Ze)}}else if(_e){ae=[];for(var xt=0,it=_e(re.text,re.sectionIndex,Nm(re,I,d,r,c,N,X));xt<it.length;xt+=1){var Pt=it[xt],ot=new xi;ot.text=Pt[0],ot.sectionIndex=Pt[1],ot.sections=re.sections,ae.push(ot)}}else ae=function(vt,rr){for(var Ht=[],pr=vt.text,Tt=0,xr=0,Kr=rr;xr<Kr.length;xr+=1){var dn=Kr[xr];Ht.push(vt.substring(Tt,dn)),Tt=dn}return Tt<pr.length&&Ht.push(vt.substring(Tt,pr.length)),Ht}(re,Nm(re,I,d,r,c,N,X));var Yt=[],Bt={positionedLines:Yt,text:re.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:z,iconsInText:!1,verticalizable:!1};return function(vt,rr,Ht,pr,Tt,xr,Kr,dn,ln,Jr,mn,Zn){for(var Gn=0,bi=-17,ti=0,wi=0,xn=dn==="right"?1:dn==="left"?0:.5,ri=0,sr=0,Br=Tt;sr<Br.length;sr+=1){var Ar=Br[sr];Ar.trim();var yr=Ar.getMaxScale(),Ri=24*(yr-1),hi={positionedGlyphs:[],lineOffset:0};vt.positionedLines[ri]=hi;var Hr=hi.positionedGlyphs,Cn=0;if(Ar.length()){for(var fi=0;fi<Ar.length();fi++){var br=Ar.getSection(fi),vs=Ar.getSectionIndex(fi),jo=Ar.getCharCode(fi),gs=0,bn=null,_s=null,Pa=null,wc=24,_l=!(ln===No.horizontal||!mn&&!Ql(jo)||mn&&(bf[jo]||(tu=jo,et.Arabic(tu)||et["Arabic Supplement"](tu)||et["Arabic Extended-A"](tu)||et["Arabic Presentation Forms-A"](tu)||et["Arabic Presentation Forms-B"](tu))));if(br.imageName){var Sc=pr[br.imageName];if(!Sc)continue;Pa=br.imageName,vt.iconsInText=vt.iconsInText||!0,_s=Sc.paddedRect;var eu=Sc.displaySize;br.scale=24*br.scale/Zn,gs=Ri+(24-eu[1]*br.scale),wc=(bn={width:eu[0],height:eu[1],left:1,top:-3,advance:_l?eu[1]:eu[0]}).advance;var Ec=_l?eu[0]*br.scale-24*yr:eu[1]*br.scale-24*yr;Ec>0&&Ec>Cn&&(Cn=Ec)}else{var Af=Ht[br.fontStack],Pc=Af&&Af[jo];if(Pc&&Pc.rect)_s=Pc.rect,bn=Pc.metrics;else{var Np=rr[br.fontStack],Mf=Np&&Np[jo];if(!Mf)continue;bn=Mf.metrics}gs=24*(yr-br.scale)}_l?(vt.verticalizable=!0,Hr.push({glyph:jo,imageName:Pa,x:Gn,y:bi+gs,vertical:_l,scale:br.scale,fontStack:br.fontStack,sectionIndex:vs,metrics:bn,rect:_s}),Gn+=wc*br.scale+Jr):(Hr.push({glyph:jo,imageName:Pa,x:Gn,y:bi+gs,vertical:_l,scale:br.scale,fontStack:br.fontStack,sectionIndex:vs,metrics:bn,rect:_s}),Gn+=bn.advance*br.scale+Jr)}Hr.length!==0&&(ti=Math.max(Gn-Jr,ti),R2(Hr,0,Hr.length-1,xn,Cn)),Gn=0;var zf=xr*yr+Cn;hi.lineOffset=Math.max(Cn,Ri),bi+=zf,wi=Math.max(zf,wi),++ri}else bi+=xr,++ri}var tu,jp=bi- -17,Tc=jm(Kr),Eu=Tc.horizontalAlign,Cc=Tc.verticalAlign;(function(Lf,Df,Vp,qp,Of,Zp,Gp,Wp,Rf){var Ic,Ff=(Df-Vp)*Of;Ic=Zp!==Gp?-Wp*qp- -17:(-qp*Rf+.5)*Gp;for(var kc=0,$p=Lf;kc<$p.length;kc+=1)for(var xl=0,Hp=$p[kc].positionedGlyphs;xl<Hp.length;xl+=1){var Ac=Hp[xl];Ac.x+=Ff,Ac.y+=Ic}})(vt.positionedLines,xn,Eu,Cc,ti,wi,xr,jp,Tt.length),vt.top+=-Cc*jp,vt.bottom=vt.top+jp,vt.left+=-Eu*ti,vt.right=vt.left+ti}(Bt,r,i,c,ae,v,w,P,z,I,R,J),!function(vt){for(var rr=0,Ht=vt;rr<Ht.length;rr+=1)if(Ht[rr].positionedGlyphs.length!==0)return!1;return!0}(Yt)&&Bt}xi.fromFeature=function(e,r){for(var i=new xi,c=0;c<e.sections.length;c++){var f=e.sections[c];f.image?i.addImageSection(f):i.addTextSection(f,r)}return i},xi.prototype.length=function(){return this.text.length},xi.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},xi.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},xi.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},xi.prototype.verticalizePunctuation=function(){this.text=function(e){for(var r="",i=0;i<e.length;i++){var c=e.charCodeAt(i+1)||null,f=e.charCodeAt(i-1)||null;r+=c&&xp(c)&&!Op[e[i+1]]||f&&xp(f)&&!Op[e[i-1]]||!Op[e[i]]?e[i]:Op[e[i]]}return r}(this.text)},xi.prototype.trim=function(){for(var e=0,r=0;r<this.text.length&&bf[this.text.charCodeAt(r)];r++)e++;for(var i=this.text.length,c=this.text.length-1;c>=0&&c>=e&&bf[this.text.charCodeAt(c)];c--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},xi.prototype.substring=function(e,r){var i=new xi;return i.text=this.text.substring(e,r),i.sectionIndex=this.sectionIndex.slice(e,r),i.sections=this.sections,i},xi.prototype.toString=function(){return this.text},xi.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(r,i){return Math.max(r,e.sections[i].scale)},0)},xi.prototype.addTextSection=function(e,r){this.text+=e.text,this.sections.push(dc.forText(e.scale,e.fontStack||r));for(var i=this.sections.length-1,c=0;c<e.text.length;++c)this.sectionIndex.push(i)},xi.prototype.addImageSection=function(e){var r=e.image?e.image.name:"";if(r.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(dc.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Ct("Reached maximum number of images 6401")}else Ct("Can't add FormattedSection with an empty image.")},xi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var bf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Eo={};function m_(e,r,i,c,f,d){if(r.imageName){var v=c[r.imageName];return v?v.displaySize[0]*r.scale*24/d+f:0}var w=i[r.fontStack],P=w&&w[e];return P?P.metrics.advance*r.scale+f:0}function y_(e,r,i,c){var f=Math.pow(e-r,2);return c?e<r?f/2:2*f:f+Math.abs(i)*i}function O2(e,r,i){var c=0;return e===10&&(c-=1e4),i&&(c+=150),e!==40&&e!==65288||(c+=50),r!==41&&r!==65289||(c+=50),c}function v_(e,r,i,c,f,d){for(var v=null,w=y_(r,i,f,d),P=0,I=c;P<I.length;P+=1){var M=I[P],z=y_(r-M.x,i,f,d)+M.badness;z<=w&&(v=M,w=z)}return{index:e,x:r,priorBreak:v,badness:w}}function Nm(e,r,i,c,f,d,v){if(d!=="point")return[];if(!e)return[];for(var w,P=[],I=function(ae,re,he,_e,Ee,ke){for(var Fe=0,Ze=0;Ze<ae.length();Ze++){var Ke=ae.getSection(Ze);Fe+=m_(ae.getCharCode(Ze),Ke,_e,Ee,re,ke)}return Fe/Math.max(1,Math.ceil(Fe/he))}(e,r,i,c,f,v),M=e.text.indexOf("\u200B")>=0,z=0,R=0;R<e.length();R++){var N=e.getSection(R),X=e.getCharCode(R);if(bf[X]||(z+=m_(X,N,c,f,r,v)),R<e.length()-1){var J=!((w=X)<11904||!(et["Bopomofo Extended"](w)||et.Bopomofo(w)||et["CJK Compatibility Forms"](w)||et["CJK Compatibility Ideographs"](w)||et["CJK Compatibility"](w)||et["CJK Radicals Supplement"](w)||et["CJK Strokes"](w)||et["CJK Symbols and Punctuation"](w)||et["CJK Unified Ideographs Extension A"](w)||et["CJK Unified Ideographs"](w)||et["Enclosed CJK Letters and Months"](w)||et["Halfwidth and Fullwidth Forms"](w)||et.Hiragana(w)||et["Ideographic Description Characters"](w)||et["Kangxi Radicals"](w)||et["Katakana Phonetic Extensions"](w)||et.Katakana(w)||et["Vertical Forms"](w)||et["Yi Radicals"](w)||et["Yi Syllables"](w)));(Eo[X]||J||N.imageName)&&P.push(v_(R+1,z,I,P,O2(X,e.getCharCode(R+1),J&&M),!1))}}return function ae(re){return re?ae(re.priorBreak).concat(re.index):[]}(v_(e.length(),z,I,P,0,!0))}function jm(e){var r=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:r,verticalAlign:i}}function R2(e,r,i,c,f){if(c||f)for(var d=e[i],v=(e[i].x+d.metrics.advance*d.scale)*c,w=r;w<=i;w++)e[w].x-=v,e[w].y+=f}function g_(e,r,i,c,f,d){var v,w=e.image;if(w.content){var P=w.content,I=w.pixelRatio||1;v=[P[0]/I,P[1]/I,w.displaySize[0]-P[2]/I,w.displaySize[1]-P[3]/I]}var M,z,R,N,X=r.left*d,J=r.right*d;i==="width"||i==="both"?(N=f[0]+X-c[3],z=f[0]+J+c[1]):z=(N=f[0]+(X+J-w.displaySize[0])/2)+w.displaySize[0];var ae=r.top*d,re=r.bottom*d;return i==="height"||i==="both"?(M=f[1]+ae-c[0],R=f[1]+re+c[2]):R=(M=f[1]+(ae+re-w.displaySize[1])/2)+w.displaySize[1],{image:w,top:M,right:z,bottom:R,left:N,collisionPadding:v}}Eo[10]=!0,Eo[32]=!0,Eo[38]=!0,Eo[40]=!0,Eo[41]=!0,Eo[43]=!0,Eo[45]=!0,Eo[47]=!0,Eo[173]=!0,Eo[183]=!0,Eo[8203]=!0,Eo[8208]=!0,Eo[8211]=!0,Eo[8231]=!0;var mc=function(e){function r(i,c,f,d){e.call(this,i,c),this.angle=f,d!==void 0&&(this.segment=d)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.clone=function(){return new r(this.x,this.y,this.angle,this.segment)},r}($);function Vm(e,r){var i=r.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new nr(e+1))};if(i.kind==="source")return{kind:"source"};for(var c=i.zoomStops,f=i.interpolationType,d=0;d<c.length&&c[d]<=e;)d++;for(var v=d=Math.max(0,d-1);v<c.length&&c[v]<e+1;)v++;v=Math.min(c.length-1,v);var w=c[d],P=c[v];return i.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:P,interpolationType:f}:{kind:"camera",minZoom:w,maxZoom:P,minSize:i.evaluate(new nr(w)),maxSize:i.evaluate(new nr(P)),interpolationType:f}}function __(e,r,i){var c=r.uSize,f=i.lowerSize;return e.kind==="source"?f/128:e.kind==="composite"?nn(f/128,i.upperSize/128,r.uSizeT):c}function x_(e,r){var i=0,c=0;if(e.kind==="constant")c=e.layoutSize;else if(e.kind!=="source"){var f=e.interpolationType,d=f?se(Pn.interpolationFactor(f,r,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?c=nn(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:c}}ft("Anchor",mc);var F2=Object.freeze({__proto__:null,getSizeData:Vm,evaluateSizeForFeature:__,evaluateSizeForZoom:x_,SIZE_PACK_FACTOR:128});function b_(e,r,i,c,f){if(r.segment===void 0)return!0;for(var d=r,v=r.segment+1,w=0;w>-i/2;){if(--v<0)return!1;w-=e[v].dist(d),d=e[v]}w+=e[v].dist(e[v+1]),v++;for(var P=[],I=0;w<i/2;){var M=e[v],z=e[v+1];if(!z)return!1;var R=e[v-1].angleTo(M)-M.angleTo(z);for(R=Math.abs((R+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:w,angleDelta:R}),I+=R;w-P[0].distance>c;)I-=P.shift().angleDelta;if(I>f)return!1;v++,w+=M.dist(z)}return!0}function w_(e){for(var r=0,i=0;i<e.length-1;i++)r+=e[i].dist(e[i+1]);return r}function S_(e,r,i){return e?.6*r*i:0}function E_(e,r){return Math.max(e?e.right-e.left:0,r?r.right-r.left:0)}function B2(e,r,i,c,f,d){for(var v=S_(i,f,d),w=E_(i,c)*d,P=0,I=w_(e)/2,M=0;M<e.length-1;M++){var z=e[M],R=e[M+1],N=z.dist(R);if(P+N>I){var X=(I-P)/N,J=nn(z.x,R.x,X),ae=nn(z.y,R.y,X),re=new mc(J,ae,R.angleTo(z),M);return re._round(),!v||b_(e,re,w,v,r)?re:void 0}P+=N}}function U2(e,r,i,c,f,d,v,w,P){var I=S_(c,d,v),M=E_(c,f),z=M*v,R=e[0].x===0||e[0].x===P||e[0].y===0||e[0].y===P;return r-z<r/4&&(r=z+r/4),function N(X,J,ae,re,he,_e,Ee,ke,Fe){for(var Ze=_e/2,Ke=w_(X),xt=0,it=J-ae,Pt=[],ot=0;ot<X.length-1;ot++){for(var Yt=X[ot],Bt=X[ot+1],vt=Yt.dist(Bt),rr=Bt.angleTo(Yt);it+ae<xt+vt;){var Ht=((it+=ae)-xt)/vt,pr=nn(Yt.x,Bt.x,Ht),Tt=nn(Yt.y,Bt.y,Ht);if(pr>=0&&pr<Fe&&Tt>=0&&Tt<Fe&&it-Ze>=0&&it+Ze<=Ke){var xr=new mc(pr,Tt,rr,ot);xr._round(),re&&!b_(X,xr,_e,re,he)||Pt.push(xr)}}xt+=vt}return ke||Pt.length||Ee||(Pt=N(X,xt/2,ae,re,he,_e,Ee,!0,Fe)),Pt}(e,R?r/2*w%r:(M/2+2*d)*v*w%r,r,I,i,z,R,!1,P)}function P_(e,r,i,c,f){for(var d=[],v=0;v<e.length;v++)for(var w=e[v],P=void 0,I=0;I<w.length-1;I++){var M=w[I],z=w[I+1];M.x<r&&z.x<r||(M.x<r?M=new $(r,M.y+(r-M.x)/(z.x-M.x)*(z.y-M.y))._round():z.x<r&&(z=new $(r,M.y+(r-M.x)/(z.x-M.x)*(z.y-M.y))._round()),M.y<i&&z.y<i||(M.y<i?M=new $(M.x+(i-M.y)/(z.y-M.y)*(z.x-M.x),i)._round():z.y<i&&(z=new $(M.x+(i-M.y)/(z.y-M.y)*(z.x-M.x),i)._round()),M.x>=c&&z.x>=c||(M.x>=c?M=new $(c,M.y+(c-M.x)/(z.x-M.x)*(z.y-M.y))._round():z.x>=c&&(z=new $(c,M.y+(c-M.x)/(z.x-M.x)*(z.y-M.y))._round()),M.y>=f&&z.y>=f||(M.y>=f?M=new $(M.x+(f-M.y)/(z.y-M.y)*(z.x-M.x),f)._round():z.y>=f&&(z=new $(M.x+(f-M.y)/(z.y-M.y)*(z.x-M.x),f)._round()),P&&M.equals(P[P.length-1])||d.push(P=[M]),P.push(z)))))}return d}function T_(e,r,i,c){var f=[],d=e.image,v=d.pixelRatio,w=d.paddedRect.w-2,P=d.paddedRect.h-2,I=e.right-e.left,M=e.bottom-e.top,z=d.stretchX||[[0,w]],R=d.stretchY||[[0,P]],N=function(pr,Tt){return pr+Tt[1]-Tt[0]},X=z.reduce(N,0),J=R.reduce(N,0),ae=w-X,re=P-J,he=0,_e=X,Ee=0,ke=J,Fe=0,Ze=ae,Ke=0,xt=re;if(d.content&&c){var it=d.content;he=wf(z,0,it[0]),Ee=wf(R,0,it[1]),_e=wf(z,it[0],it[2]),ke=wf(R,it[1],it[3]),Fe=it[0]-he,Ke=it[1]-Ee,Ze=it[2]-it[0]-_e,xt=it[3]-it[1]-ke}var Pt=function(pr,Tt,xr,Kr){var dn=Sf(pr.stretch-he,_e,I,e.left),ln=Ef(pr.fixed-Fe,Ze,pr.stretch,X),Jr=Sf(Tt.stretch-Ee,ke,M,e.top),mn=Ef(Tt.fixed-Ke,xt,Tt.stretch,J),Zn=Sf(xr.stretch-he,_e,I,e.left),Gn=Ef(xr.fixed-Fe,Ze,xr.stretch,X),bi=Sf(Kr.stretch-Ee,ke,M,e.top),ti=Ef(Kr.fixed-Ke,xt,Kr.stretch,J),wi=new $(dn,Jr),xn=new $(Zn,Jr),ri=new $(Zn,bi),sr=new $(dn,bi),Br=new $(ln/v,mn/v),Ar=new $(Gn/v,ti/v),yr=r*Math.PI/180;if(yr){var Ri=Math.sin(yr),hi=Math.cos(yr),Hr=[hi,-Ri,Ri,hi];wi._matMult(Hr),xn._matMult(Hr),sr._matMult(Hr),ri._matMult(Hr)}var Cn=pr.stretch+pr.fixed,fi=Tt.stretch+Tt.fixed;return{tl:wi,tr:xn,bl:sr,br:ri,tex:{x:d.paddedRect.x+1+Cn,y:d.paddedRect.y+1+fi,w:xr.stretch+xr.fixed-Cn,h:Kr.stretch+Kr.fixed-fi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Br,pixelOffsetBR:Ar,minFontScaleX:Ze/v/I,minFontScaleY:xt/v/M,isSDF:i}};if(c&&(d.stretchX||d.stretchY))for(var ot=C_(z,ae,X),Yt=C_(R,re,J),Bt=0;Bt<ot.length-1;Bt++)for(var vt=ot[Bt],rr=ot[Bt+1],Ht=0;Ht<Yt.length-1;Ht++)f.push(Pt(vt,Yt[Ht],rr,Yt[Ht+1]));else f.push(Pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:P+1}));return f}function wf(e,r,i){for(var c=0,f=0,d=e;f<d.length;f+=1){var v=d[f];c+=Math.max(r,Math.min(i,v[1]))-Math.max(r,Math.min(i,v[0]))}return c}function C_(e,r,i){for(var c=[{fixed:-1,stretch:0}],f=0,d=e;f<d.length;f+=1){var v=d[f],w=v[0],P=v[1],I=c[c.length-1];c.push({fixed:w-I.stretch,stretch:I.stretch}),c.push({fixed:w-I.stretch,stretch:I.stretch+(P-w)})}return c.push({fixed:r+1,stretch:i}),c}function Sf(e,r,i,c){return e/r*i+c}function Ef(e,r,i,c){return e-r*i/c}var Pf=function(e,r,i,c,f,d,v,w,P,I){if(this.boxStartIndex=e.length,P){var M=d.top,z=d.bottom,R=d.collisionPadding;R&&(M-=R[1],z+=R[3]);var N=z-M;N>0&&(N=Math.max(10,N),this.circleDiameter=N)}else{var X=d.top*v-w,J=d.bottom*v+w,ae=d.left*v-w,re=d.right*v+w,he=d.collisionPadding;if(he&&(ae-=he[0]*v,X-=he[1]*v,re+=he[2]*v,J+=he[3]*v),I){var _e=new $(ae,X),Ee=new $(re,X),ke=new $(ae,J),Fe=new $(re,J),Ze=I*Math.PI/180;_e._rotate(Ze),Ee._rotate(Ze),ke._rotate(Ze),Fe._rotate(Ze),ae=Math.min(_e.x,Ee.x,ke.x,Fe.x),re=Math.max(_e.x,Ee.x,ke.x,Fe.x),X=Math.min(_e.y,Ee.y,ke.y,Fe.y),J=Math.max(_e.y,Ee.y,ke.y,Fe.y)}e.emplaceBack(r.x,r.y,ae,X,re,J,i,c,f)}this.boxEndIndex=e.length},yc=function(e,r){if(e===void 0&&(e=[]),r===void 0&&(r=N2),this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function N2(e,r){return e<r?-1:e>r?1:0}function j2(e,r,i){r===void 0&&(r=1),i===void 0&&(i=!1);for(var c=1/0,f=1/0,d=-1/0,v=-1/0,w=e[0],P=0;P<w.length;P++){var I=w[P];(!P||I.x<c)&&(c=I.x),(!P||I.y<f)&&(f=I.y),(!P||I.x>d)&&(d=I.x),(!P||I.y>v)&&(v=I.y)}var M=Math.min(d-c,v-f),z=M/2,R=new yc([],V2);if(M===0)return new $(c,f);for(var N=c;N<d;N+=M)for(var X=f;X<v;X+=M)R.push(new vc(N+z,X+z,z,e));for(var J=function(he){for(var _e=0,Ee=0,ke=0,Fe=he[0],Ze=0,Ke=Fe.length,xt=Ke-1;Ze<Ke;xt=Ze++){var it=Fe[Ze],Pt=Fe[xt],ot=it.x*Pt.y-Pt.x*it.y;Ee+=(it.x+Pt.x)*ot,ke+=(it.y+Pt.y)*ot,_e+=3*ot}return new vc(Ee/_e,ke/_e,0,he)}(e),ae=R.length;R.length;){var re=R.pop();(re.d>J.d||!J.d)&&(J=re,i&&console.log("found best %d after %d probes",Math.round(1e4*re.d)/1e4,ae)),re.max-J.d<=r||(R.push(new vc(re.p.x-(z=re.h/2),re.p.y-z,z,e)),R.push(new vc(re.p.x+z,re.p.y-z,z,e)),R.push(new vc(re.p.x-z,re.p.y+z,z,e)),R.push(new vc(re.p.x+z,re.p.y+z,z,e)),ae+=4)}return i&&(console.log("num probes: "+ae),console.log("best distance: "+J.d)),J.p}function V2(e,r){return r.max-e.max}function vc(e,r,i,c){this.p=new $(e,r),this.h=i,this.d=function(f,d){for(var v=!1,w=1/0,P=0;P<d.length;P++)for(var I=d[P],M=0,z=I.length,R=z-1;M<z;R=M++){var N=I[M],X=I[R];N.y>f.y!=X.y>f.y&&f.x<(X.x-N.x)*(f.y-N.y)/(X.y-N.y)+N.x&&(v=!v),w=Math.min(w,xu(f,N,X))}return(v?1:-1)*Math.sqrt(w)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}yc.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},yc.prototype.pop=function(){if(this.length!==0){var e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}},yc.prototype.peek=function(){return this.data[0]},yc.prototype._up=function(e){for(var r=this.data,i=this.compare,c=r[e];e>0;){var f=e-1>>1,d=r[f];if(i(c,d)>=0)break;r[e]=d,e=f}r[e]=c},yc.prototype._down=function(e){for(var r=this.data,i=this.compare,c=this.length>>1,f=r[e];e<c;){var d=1+(e<<1),v=r[d],w=d+1;if(w<this.length&&i(r[w],v)<0&&(d=w,v=r[w]),i(v,f)>=0)break;r[e]=v,e=d}r[e]=f};var qm=Number.POSITIVE_INFINITY;function I_(e,r){return r[1]!==qm?function(i,c,f){var d=0,v=0;switch(c=Math.abs(c),f=Math.abs(f),i){case"top-right":case"top-left":case"top":v=f-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-f}switch(i){case"top-right":case"bottom-right":case"right":d=-c;break;case"top-left":case"bottom-left":case"left":d=c}return[d,v]}(e,r[0],r[1]):function(i,c){var f=0,d=0;c<0&&(c=0);var v=c/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=v-7;break;case"bottom-right":case"bottom-left":d=7-v;break;case"bottom":d=7-c;break;case"top":d=c-7}switch(i){case"top-right":case"bottom-right":f=-v;break;case"top-left":case"bottom-left":f=v;break;case"left":f=c;break;case"right":f=-c}return[f,d]}(e,r[0])}function Zm(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function k_(e,r,i,c,f,d,v,w,P,I,M,z,R,N,X){var J=function(Ee,ke,Fe,Ze,Ke,xt,it,Pt){for(var ot=Ze.layout.get("text-rotate").evaluate(xt,{})*Math.PI/180,Yt=[],Bt=0,vt=ke.positionedLines;Bt<vt.length;Bt+=1)for(var rr=vt[Bt],Ht=0,pr=rr.positionedGlyphs;Ht<pr.length;Ht+=1){var Tt=pr[Ht];if(Tt.rect){var xr=Tt.rect||{},Kr=4,dn=!0,ln=1,Jr=0,mn=(Ke||Pt)&&Tt.vertical,Zn=Tt.metrics.advance*Tt.scale/2;if(Pt&&ke.verticalizable&&(Jr=rr.lineOffset/2-(Tt.imageName?-(24-Tt.metrics.width*Tt.scale)/2:24*(Tt.scale-1))),Tt.imageName){var Gn=it[Tt.imageName];dn=Gn.sdf,Kr=1/(ln=Gn.pixelRatio)}var bi=Ke?[Tt.x+Zn,Tt.y]:[0,0],ti=Ke?[0,0]:[Tt.x+Zn+Fe[0],Tt.y+Fe[1]-Jr],wi=[0,0];mn&&(wi=ti,ti=[0,0]);var xn=(Tt.metrics.left-Kr)*Tt.scale-Zn+ti[0],ri=(-Tt.metrics.top-Kr)*Tt.scale+ti[1],sr=xn+xr.w*Tt.scale/ln,Br=ri+xr.h*Tt.scale/ln,Ar=new $(xn,ri),yr=new $(sr,ri),Ri=new $(xn,Br),hi=new $(sr,Br);if(mn){var Hr=new $(-Zn,Zn- -17),Cn=-Math.PI/2,fi=12-Zn,br=new $(22-fi,-(Tt.imageName?fi:0)),vs=new(Function.prototype.bind.apply($,[null].concat(wi)));Ar._rotateAround(Cn,Hr)._add(br)._add(vs),yr._rotateAround(Cn,Hr)._add(br)._add(vs),Ri._rotateAround(Cn,Hr)._add(br)._add(vs),hi._rotateAround(Cn,Hr)._add(br)._add(vs)}if(ot){var jo=Math.sin(ot),gs=Math.cos(ot),bn=[gs,-jo,jo,gs];Ar._matMult(bn),yr._matMult(bn),Ri._matMult(bn),hi._matMult(bn)}var _s=new $(0,0),Pa=new $(0,0);Yt.push({tl:Ar,tr:yr,bl:Ri,br:hi,tex:xr,writingMode:ke.writingMode,glyphOffset:bi,sectionIndex:Tt.sectionIndex,isSDF:dn,pixelOffsetTL:_s,pixelOffsetBR:Pa,minFontScaleX:0,minFontScaleY:0})}}return Yt}(0,i,w,f,d,v,c,e.allowVerticalPlacement),ae=e.textSizeData,re=null;ae.kind==="source"?(re=[128*f.layout.get("text-size").evaluate(v,{})])[0]>32640&&Ct(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ae.kind==="composite"&&((re=[128*N.compositeTextSizes[0].evaluate(v,{},X),128*N.compositeTextSizes[1].evaluate(v,{},X)])[0]>32640||re[1]>32640)&&Ct(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,J,re,w,d,v,I,r,P.lineStartIndex,P.lineLength,R,X);for(var he=0,_e=M;he<_e.length;he+=1)z[_e[he]]=e.text.placedSymbolArray.length-1;return 4*J.length}function A_(e){for(var r in e)return e[r];return null}function q2(e,r,i,c){var f=e.compareText;if(r in f){for(var d=f[r],v=d.length-1;v>=0;v--)if(c.dist(d[v])<i)return!0}else f[r]=[];return f[r].push(c),!1}var Z2=pc.VectorTileFeature.types,G2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tf(e,r,i,c,f,d,v,w,P,I,M,z,R){var N=w?Math.min(32640,Math.round(w[0])):0,X=w?Math.min(32640,Math.round(w[1])):0;e.emplaceBack(r,i,Math.round(32*c),Math.round(32*f),d,v,(N<<1)+(P?1:0),X,16*I,16*M,256*z,256*R)}function Gm(e,r,i){e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i)}function W2(e){for(var r=0,i=e.sections;r<i.length;r+=1)if(ec(i[r].text))return!0;return!1}var gc=function(e){this.layoutVertexArray=new ic,this.indexArray=new ps,this.programConfigurations=e,this.segments=new q,this.dynamicLayoutVertexArray=new vu,this.opacityVertexArray=new ll,this.placedSymbolArray=new p};gc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},gc.prototype.upload=function(e,r,i,c){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,g2.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,_2.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,G2,!0),this.opacityVertexBuffer.itemSize=1),(i||c)&&this.programConfigurations.upload(e))},gc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ft("SymbolBuffers",gc);var Bp=function(e,r,i){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new i,this.segments=new q,this.collisionVertexArray=new Tp};Bp.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,x2.members,!0)},Bp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ft("CollisionBuffers",Bp);var Or=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=So([]),this.placementViewportMatrix=So([]);var r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vm(this.zoom,r["text-size"]),this.iconSizeData=Vm(this.zoom,r["icon-size"]);var i=this.layers[0].layout,c=i.get("symbol-sort-key"),f=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&c.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return No[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};Or.prototype.createArrays=function(){this.text=new gc(new Ot(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new gc(new Ot(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new b,this.lineVertexArray=new E,this.symbolInstances=new g},Or.prototype.calculateGlyphDependencies=function(e,r,i,c,f){for(var d=0;d<e.length;d++)if(r[e.charCodeAt(d)]=!0,(i||c)&&f){var v=Op[e.charAt(d)];v&&(r[v.charCodeAt(0)]=!0)}},Or.prototype.populate=function(e,r,i){var c=this.layers[0],f=c.layout,d=f.get("text-font"),v=f.get("text-field"),w=f.get("icon-image"),P=(v.value.kind!=="constant"||v.value.value instanceof Nr&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),I=w.value.kind!=="constant"||!!w.value.value||Object.keys(w.parameters).length>0,M=f.get("symbol-sort-key");if(this.features=[],P||I){for(var z=r.iconDependencies,R=r.glyphDependencies,N=r.availableImages,X=new nr(this.zoom),J=0,ae=e;J<ae.length;J+=1){var re=ae[J],he=re.feature,_e=re.id,Ee=re.index,ke=re.sourceLayerIndex,Fe=c._featureFilter.needGeometry,Ze=_n(he,Fe);if(c._featureFilter.filter(X,Ze,i)){Fe||(Ze.geometry=un(he));var Ke=void 0;if(P){var xt=c.getValueAndResolveTokens("text-field",Ze,i,N),it=Nr.factory(xt);W2(it)&&(this.hasRTLText=!0),(!this.hasRTLText||wp()==="unavailable"||this.hasRTLText&&wo.isParsed())&&(Ke=w2(it,c,Ze))}var Pt=void 0;if(I){var ot=c.getValueAndResolveTokens("icon-image",Ze,i,N);Pt=ot instanceof Kn?ot:Kn.fromString(ot)}if(Ke||Pt){var Yt=this.sortFeaturesByKey?M.evaluate(Ze,{},i):void 0;if(this.features.push({id:_e,text:Ke,icon:Pt,index:Ee,sourceLayerIndex:ke,geometry:Ze.geometry,properties:he.properties,type:Z2[he.type],sortKey:Yt}),Pt&&(z[Pt.name]=!0),Ke){var Bt=d.evaluate(Ze,{},i).join(","),vt=f.get("text-rotation-alignment")==="map"&&f.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(No.vertical)>=0;for(var rr=0,Ht=Ke.sections;rr<Ht.length;rr+=1){var pr=Ht[rr];if(pr.image)z[pr.image.name]=!0;else{var Tt=_p(Ke.toString()),xr=pr.fontStack||Bt,Kr=R[xr]=R[xr]||{};this.calculateGlyphDependencies(pr.text,Kr,vt,this.allowVerticalPlacement,Tt)}}}}}}f.get("symbol-placement")==="line"&&(this.features=function(dn){var ln={},Jr={},mn=[],Zn=0;function Gn(Hr){mn.push(dn[Hr]),Zn++}function bi(Hr,Cn,fi){var br=Jr[Hr];return delete Jr[Hr],Jr[Cn]=br,mn[br].geometry[0].pop(),mn[br].geometry[0]=mn[br].geometry[0].concat(fi[0]),br}function ti(Hr,Cn,fi){var br=ln[Cn];return delete ln[Cn],ln[Hr]=br,mn[br].geometry[0].shift(),mn[br].geometry[0]=fi[0].concat(mn[br].geometry[0]),br}function wi(Hr,Cn,fi){var br=fi?Cn[0][Cn[0].length-1]:Cn[0][0];return Hr+":"+br.x+":"+br.y}for(var xn=0;xn<dn.length;xn++){var ri=dn[xn],sr=ri.geometry,Br=ri.text?ri.text.toString():null;if(Br){var Ar=wi(Br,sr),yr=wi(Br,sr,!0);if(Ar in Jr&&yr in ln&&Jr[Ar]!==ln[yr]){var Ri=ti(Ar,yr,sr),hi=bi(Ar,yr,mn[Ri].geometry);delete ln[Ar],delete Jr[yr],Jr[wi(Br,mn[hi].geometry,!0)]=hi,mn[Ri].geometry=null}else Ar in Jr?bi(Ar,yr,sr):yr in ln?ti(Ar,yr,sr):(Gn(xn),ln[Ar]=Zn-1,Jr[yr]=Zn-1)}else Gn(xn)}return mn.filter(function(Hr){return Hr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(dn,ln){return dn.sortKey-ln.sortKey})}},Or.prototype.update=function(e,r,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,i))},Or.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Or.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Or.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Or.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Or.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Or.prototype.addToLineVertexArray=function(e,r){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var c=e.dist(r[e.segment+1]),f=e.dist(r[e.segment]),d={},v=e.segment+1;v<r.length;v++)d[v]={x:r[v].x,y:r[v].y,tileUnitDistanceFromAnchor:c},v<r.length-1&&(c+=r[v+1].dist(r[v]));for(var w=e.segment||0;w>=0;w--)d[w]={x:r[w].x,y:r[w].y,tileUnitDistanceFromAnchor:f},w>0&&(f+=r[w-1].dist(r[w]));for(var P=0;P<r.length;P++){var I=d[P];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Or.prototype.addSymbols=function(e,r,i,c,f,d,v,w,P,I,M,z){for(var R=e.indexArray,N=e.layoutVertexArray,X=e.segments.prepareSegment(4*r.length,N,R,this.canOverlap?d.sortKey:void 0),J=this.glyphOffsetArray.length,ae=X.vertexLength,re=this.allowVerticalPlacement&&v===No.vertical?Math.PI/2:0,he=d.text&&d.text.sections,_e=0;_e<r.length;_e++){var Ee=r[_e],ke=Ee.tl,Fe=Ee.tr,Ze=Ee.bl,Ke=Ee.br,xt=Ee.tex,it=Ee.pixelOffsetTL,Pt=Ee.pixelOffsetBR,ot=Ee.minFontScaleX,Yt=Ee.minFontScaleY,Bt=Ee.glyphOffset,vt=Ee.isSDF,rr=Ee.sectionIndex,Ht=X.vertexLength,pr=Bt[1];Tf(N,w.x,w.y,ke.x,pr+ke.y,xt.x,xt.y,i,vt,it.x,it.y,ot,Yt),Tf(N,w.x,w.y,Fe.x,pr+Fe.y,xt.x+xt.w,xt.y,i,vt,Pt.x,it.y,ot,Yt),Tf(N,w.x,w.y,Ze.x,pr+Ze.y,xt.x,xt.y+xt.h,i,vt,it.x,Pt.y,ot,Yt),Tf(N,w.x,w.y,Ke.x,pr+Ke.y,xt.x+xt.w,xt.y+xt.h,i,vt,Pt.x,Pt.y,ot,Yt),Gm(e.dynamicLayoutVertexArray,w,re),R.emplaceBack(Ht,Ht+1,Ht+2),R.emplaceBack(Ht+1,Ht+2,Ht+3),X.vertexLength+=4,X.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Bt[0]),_e!==r.length-1&&rr===r[_e+1].sectionIndex||e.programConfigurations.populatePaintArrays(N.length,d,d.index,{},z,he&&he[rr])}e.placedSymbolArray.emplaceBack(w.x,w.y,J,this.glyphOffsetArray.length-J,ae,P,I,w.segment,i?i[0]:0,i?i[1]:0,c[0],c[1],v,0,!1,0,M)},Or.prototype._addCollisionDebugVertex=function(e,r,i,c,f,d){return r.emplaceBack(0,0),e.emplaceBack(i.x,i.y,c,f,Math.round(d.x),Math.round(d.y))},Or.prototype.addCollisionDebugVertices=function(e,r,i,c,f,d,v){var w=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),P=w.vertexLength,I=f.layoutVertexArray,M=f.collisionVertexArray,z=v.anchorX,R=v.anchorY;this._addCollisionDebugVertex(I,M,d,z,R,new $(e,r)),this._addCollisionDebugVertex(I,M,d,z,R,new $(i,r)),this._addCollisionDebugVertex(I,M,d,z,R,new $(i,c)),this._addCollisionDebugVertex(I,M,d,z,R,new $(e,c)),w.vertexLength+=4;var N=f.indexArray;N.emplaceBack(P,P+1),N.emplaceBack(P+1,P+2),N.emplaceBack(P+2,P+3),N.emplaceBack(P+3,P),w.primitiveLength+=4},Or.prototype.addDebugCollisionBoxes=function(e,r,i,c){for(var f=e;f<r;f++){var d=this.collisionBoxArray.get(f);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,c?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},Or.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Bp(gu,u_.members,cl),this.iconCollisionBox=new Bp(gu,u_.members,cl);for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}},Or.prototype._deserializeCollisionBoxesForSymbol=function(e,r,i,c,f,d,v,w,P){for(var I={},M=r;M<i;M++){var z=e.get(M);I.textBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},I.textFeatureIndex=z.featureIndex;break}for(var R=c;R<f;R++){var N=e.get(R);I.verticalTextBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},I.verticalTextFeatureIndex=N.featureIndex;break}for(var X=d;X<v;X++){var J=e.get(X);I.iconBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},I.iconFeatureIndex=J.featureIndex;break}for(var ae=w;ae<P;ae++){var re=e.get(ae);I.verticalIconBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},I.verticalIconFeatureIndex=re.featureIndex;break}return I},Or.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var r=0;r<this.symbolInstances.length;r++){var i=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Or.prototype.hasTextData=function(){return this.text.segments.get().length>0},Or.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Or.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Or.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Or.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Or.prototype.addIndicesForPlacedSymbol=function(e,r){for(var i=e.placedSymbolArray.get(r),c=i.vertexStartIndex+4*i.numGlyphs,f=i.vertexStartIndex;f<c;f+=4)e.indexArray.emplaceBack(f,f+1,f+2),e.indexArray.emplaceBack(f+1,f+2,f+3)},Or.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var r=Math.sin(e),i=Math.cos(e),c=[],f=[],d=[],v=0;v<this.symbolInstances.length;++v){d.push(v);var w=this.symbolInstances.get(v);c.push(0|Math.round(r*w.anchorX+i*w.anchorY)),f.push(w.featureIndex)}return d.sort(function(P,I){return c[P]-c[I]||f[I]-f[P]}),d},Or.prototype.addToSortKeyRanges=function(e,r){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===r?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Or.prototype.sortFeatures=function(e){var r=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,c=this.symbolInstanceIndexes;i<c.length;i+=1){var f=this.symbolInstances.get(c[i]);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(function(d,v,w){d>=0&&w.indexOf(d)===v&&r.addIndicesForPlacedSymbol(r.text,d)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ft("SymbolBucket",Or,{omit:["layers","collisionBoxArray","features","compareText"]}),Or.MAX_GLYPHS=65535,Or.addDynamicAttributes=Gm;var $2=new ai({"symbol-placement":new St(V.layout_symbol["symbol-placement"]),"symbol-spacing":new St(V.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new St(V.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(V.layout_symbol["symbol-sort-key"]),"symbol-z-order":new St(V.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new St(V.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new St(V.layout_symbol["icon-ignore-placement"]),"icon-optional":new St(V.layout_symbol["icon-optional"]),"icon-rotation-alignment":new St(V.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(V.layout_symbol["icon-size"]),"icon-text-fit":new St(V.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new St(V.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(V.layout_symbol["icon-image"]),"icon-rotate":new yt(V.layout_symbol["icon-rotate"]),"icon-padding":new St(V.layout_symbol["icon-padding"]),"icon-keep-upright":new St(V.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(V.layout_symbol["icon-offset"]),"icon-anchor":new yt(V.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new St(V.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new St(V.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new St(V.layout_symbol["text-rotation-alignment"]),"text-field":new yt(V.layout_symbol["text-field"]),"text-font":new yt(V.layout_symbol["text-font"]),"text-size":new yt(V.layout_symbol["text-size"]),"text-max-width":new yt(V.layout_symbol["text-max-width"]),"text-line-height":new St(V.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(V.layout_symbol["text-letter-spacing"]),"text-justify":new yt(V.layout_symbol["text-justify"]),"text-radial-offset":new yt(V.layout_symbol["text-radial-offset"]),"text-variable-anchor":new St(V.layout_symbol["text-variable-anchor"]),"text-anchor":new yt(V.layout_symbol["text-anchor"]),"text-max-angle":new St(V.layout_symbol["text-max-angle"]),"text-writing-mode":new St(V.layout_symbol["text-writing-mode"]),"text-rotate":new yt(V.layout_symbol["text-rotate"]),"text-padding":new St(V.layout_symbol["text-padding"]),"text-keep-upright":new St(V.layout_symbol["text-keep-upright"]),"text-transform":new yt(V.layout_symbol["text-transform"]),"text-offset":new yt(V.layout_symbol["text-offset"]),"text-allow-overlap":new St(V.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new St(V.layout_symbol["text-ignore-placement"]),"text-optional":new St(V.layout_symbol["text-optional"])}),Wm={paint:new ai({"icon-opacity":new yt(V.paint_symbol["icon-opacity"]),"icon-color":new yt(V.paint_symbol["icon-color"]),"icon-halo-color":new yt(V.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(V.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(V.paint_symbol["icon-halo-blur"]),"icon-translate":new St(V.paint_symbol["icon-translate"]),"icon-translate-anchor":new St(V.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(V.paint_symbol["text-opacity"]),"text-color":new yt(V.paint_symbol["text-color"],{runtimeType:Qe,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new yt(V.paint_symbol["text-halo-color"]),"text-halo-width":new yt(V.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(V.paint_symbol["text-halo-blur"]),"text-translate":new St(V.paint_symbol["text-translate"]),"text-translate-anchor":new St(V.paint_symbol["text-translate-anchor"])}),layout:$2},_c=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:st,this.defaultValue=e};_c.prototype.evaluate=function(e){if(e.formattedSection){var r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},_c.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},_c.prototype.outputDefined=function(){return!1},_c.prototype.serialize=function(){return null},ft("FormatSectionOverride",_c,{omit:["defaultValue"]});var H2=function(e){function r(i){e.call(this,i,Wm)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.recalculate=function(i,c){if(e.prototype.recalculate.call(this,i,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var f=this.layout.get("text-writing-mode");if(f){for(var d=[],v=0,w=f;v<w.length;v+=1){var P=w[v];d.indexOf(P)<0&&d.push(P)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},r.prototype.getValueAndResolveTokens=function(i,c,f,d){var v=this.layout.get(i).evaluate(c,{},f,d),w=this._unevaluatedLayout._values[i];return w.isDataDriven()||Yo(w.value)||!v?v:function(P,I){return I.replace(/{([^{}]+)}/g,function(M,z){return z in P?String(P[z]):""})}(c.properties,v)},r.prototype.createBucket=function(i){return new Or(i)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype._setPaintOverrides=function(){for(var i=0,c=Wm.paint.overridableProperties;i<c.length;i+=1){var f=c[i];if(r.hasPaintOverride(this.layout,f)){var d,v=this.paint.get(f),w=new _c(v),P=new Va(w,v.property.specification);d=v.value.kind==="constant"||v.value.kind==="source"?new Vs("source",P):new de("composite",P,v.value.zoomStops,v.value._interpolationType),this.paint._values[f]=new vi(v.property,d,v.parameters)}}},r.prototype._handleOverridablePaintPropertyUpdate=function(i,c,f){return!(!this.layout||c.isDataDriven()||f.isDataDriven())&&r.hasPaintOverride(this.layout,i)},r.hasPaintOverride=function(i,c){var f=i.get("text-field"),d=Wm.paint.properties[c],v=!1,w=function(M){for(var z=0,R=M;z<R.length;z+=1)if(d.overrides&&d.overrides.hasOverride(R[z]))return void(v=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Nr)w(f.value.value.sections);else if(f.value.kind==="source"){var P=function(M){v||(M instanceof ii&&rn(M.value)===kr?w(M.value.sections):M instanceof yo?w(M.sections):M.eachChild(P))},I=f.value;I._styleExpression&&P(I._styleExpression.expression)}return v},r}(ba),X2={paint:new ai({"background-color":new St(V.paint_background["background-color"]),"background-pattern":new gi(V.paint_background["background-pattern"]),"background-opacity":new St(V.paint_background["background-opacity"])})},K2=function(e){function r(i){e.call(this,i,X2)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(ba),J2={paint:new ai({"raster-opacity":new St(V.paint_raster["raster-opacity"]),"raster-hue-rotate":new St(V.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new St(V.paint_raster["raster-brightness-min"]),"raster-brightness-max":new St(V.paint_raster["raster-brightness-max"]),"raster-saturation":new St(V.paint_raster["raster-saturation"]),"raster-contrast":new St(V.paint_raster["raster-contrast"]),"raster-resampling":new St(V.paint_raster["raster-resampling"]),"raster-fade-duration":new St(V.paint_raster["raster-fade-duration"])})},Y2=function(e){function r(i){e.call(this,i,J2)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(ba),Q2=function(e){function r(i){e.call(this,i,{}),this.implementation=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},r.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},r.prototype.recalculate=function(){},r.prototype.updateTransitions=function(){},r.prototype.hasTransition=function(){},r.prototype.serialize=function(){},r.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},r.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},r}(ba),eS={circle:Am,heatmap:Fw,hillshade:Uw,fill:r2,"fill-extrusion":p2,line:v2,symbol:H2,background:K2,raster:Y2},M_=W.HTMLImageElement,z_=W.HTMLCanvasElement,L_=W.HTMLVideoElement,D_=W.ImageData,Cf=W.ImageBitmap,yl=function(e,r,i,c){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(r,c)};yl.prototype.update=function(e,r,i){var c=e.width,f=e.height,d=!(this.size&&this.size[0]===c&&this.size[1]===f||i),v=this.context,w=v.gl;if(this.useMipmap=Boolean(r&&r.useMipmap),w.bindTexture(w.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!r||r.premultiply!==!1)),d)this.size=[c,f],e instanceof M_||e instanceof z_||e instanceof L_||e instanceof D_||Cf&&e instanceof Cf?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,e):w.texImage2D(w.TEXTURE_2D,0,this.format,c,f,0,this.format,w.UNSIGNED_BYTE,e.data);else{var P=i||{x:0,y:0},I=P.x,M=P.y;e instanceof M_||e instanceof z_||e instanceof L_||e instanceof D_||Cf&&e instanceof Cf?w.texSubImage2D(w.TEXTURE_2D,0,I,M,w.RGBA,w.UNSIGNED_BYTE,e):w.texSubImage2D(w.TEXTURE_2D,0,I,M,c,f,w.RGBA,w.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&w.generateMipmap(w.TEXTURE_2D)},yl.prototype.bind=function(e,r,i){var c=this.context.gl;c.bindTexture(c.TEXTURE_2D,this.texture),i!==c.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=c.LINEAR),e!==this.filter&&(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,e),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,i||e),this.filter=e),r!==this.wrap&&(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,r),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,r),this.wrap=r)},yl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},yl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var $m=function(e){var r=this;this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){r._triggered=!1,r._callback()})};$m.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},$m.prototype.remove=function(){delete this._channel,this._callback=function(){}};var xc=function(e,r,i){this.target=e,this.parent=r,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},je(["receive","process"],this),this.invoker=new $m(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ir()?e:W};function O_(e,r,i){var c=2*Math.PI*6378137/256/Math.pow(2,i);return[e*c-2*Math.PI*6378137/2,r*c-2*Math.PI*6378137/2]}xc.prototype.send=function(e,r,i,c,f){var d=this;f===void 0&&(f=!1);var v=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[v]=i);var w=Bn(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:e,hasCallback:!!i,targetMapId:c,mustQueue:f,sourceMapId:this.mapId,data:ra(r,w)},w),{cancel:function(){i&&delete d.callbacks[v],d.target.postMessage({id:v,type:"<cancel>",targetMapId:c,sourceMapId:d.mapId})}}},xc.prototype.receive=function(e){var r=e.data,i=r.id;if(i&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){delete this.tasks[i];var c=this.cancelCallbacks[i];delete this.cancelCallbacks[i],c&&c()}else Ir()||r.mustQueue?(this.tasks[i]=r,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,r)},xc.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),r=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(e,r)}},xc.prototype.processTask=function(e,r){var i=this;if(r.type==="<response>"){var c=this.callbacks[e];delete this.callbacks[e],c&&(r.error?c(ro(r.error)):c(null,ro(r.data)))}else{var f=!1,d=Bn(this.globalScope)?void 0:[],v=r.hasCallback?function(M,z){f=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:M?ra(M):null,data:ra(z,d)},d)}:function(M){f=!0},w=null,P=ro(r.data);if(this.parent[r.type])w=this.parent[r.type](r.sourceMapId,P,v);else if(this.parent.getWorkerSource){var I=r.type.split(".");w=this.parent.getWorkerSource(r.sourceMapId,I[0],P.source)[I[1]](P,v)}else v(new Error("Could not find function "+r.type));!f&&w&&w.cancel&&(this.cancelCallbacks[e]=w.cancel)}},xc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var On=function(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};On.prototype.setNorthEast=function(e){return this._ne=e instanceof Xr?new Xr(e.lng,e.lat):Xr.convert(e),this},On.prototype.setSouthWest=function(e){return this._sw=e instanceof Xr?new Xr(e.lng,e.lat):Xr.convert(e),this},On.prototype.extend=function(e){var r,i,c=this._sw,f=this._ne;if(e instanceof Xr)r=e,i=e;else{if(!(e instanceof On))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(On.convert(e)):this.extend(Xr.convert(e)):this;if(i=e._ne,!(r=e._sw)||!i)return this}return c||f?(c.lng=Math.min(r.lng,c.lng),c.lat=Math.min(r.lat,c.lat),f.lng=Math.max(i.lng,f.lng),f.lat=Math.max(i.lat,f.lat)):(this._sw=new Xr(r.lng,r.lat),this._ne=new Xr(i.lng,i.lat)),this},On.prototype.getCenter=function(){return new Xr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},On.prototype.getSouthWest=function(){return this._sw},On.prototype.getNorthEast=function(){return this._ne},On.prototype.getNorthWest=function(){return new Xr(this.getWest(),this.getNorth())},On.prototype.getSouthEast=function(){return new Xr(this.getEast(),this.getSouth())},On.prototype.getWest=function(){return this._sw.lng},On.prototype.getSouth=function(){return this._sw.lat},On.prototype.getEast=function(){return this._ne.lng},On.prototype.getNorth=function(){return this._ne.lat},On.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},On.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},On.prototype.isEmpty=function(){return!(this._sw&&this._ne)},On.prototype.contains=function(e){var r=Xr.convert(e),i=r.lng,c=r.lat,f=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&f},On.convert=function(e){return!e||e instanceof On?e:new On(e)};var Xr=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid LngLat object: ("+e+", "+r+")");if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Xr.prototype.wrap=function(){return new Xr(te(this.lng,-180,180),this.lat)},Xr.prototype.toArray=function(){return[this.lng,this.lat]},Xr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Xr.prototype.distanceTo=function(e){var r=Math.PI/180,i=this.lat*r,c=e.lat*r,f=Math.sin(i)*Math.sin(c)+Math.cos(i)*Math.cos(c)*Math.cos((e.lng-this.lng)*r);return 63710088e-1*Math.acos(Math.min(f,1))},Xr.prototype.toBounds=function(e){e===void 0&&(e=0);var r=360*e/40075017,i=r/Math.cos(Math.PI/180*this.lat);return new On(new Xr(this.lng-i,this.lat-r),new Xr(this.lng+i,this.lat+r))},Xr.convert=function(e){if(e instanceof Xr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Xr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Xr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var R_=2*Math.PI*63710088e-1;function F_(e){return R_*Math.cos(e*Math.PI/180)}function B_(e){return(180+e)/360}function U_(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function N_(e,r){return e/F_(r)}function Hm(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var vl=function(e,r,i){i===void 0&&(i=0),this.x=+e,this.y=+r,this.z=+i};vl.fromLngLat=function(e,r){r===void 0&&(r=0);var i=Xr.convert(e);return new vl(B_(i.lng),U_(i.lat),N_(r,i.lat))},vl.prototype.toLngLat=function(){return new Xr(360*this.x-180,Hm(this.y))},vl.prototype.toAltitude=function(){return this.z*F_(Hm(this.y))},vl.prototype.meterInMercatorCoordinateUnits=function(){return 1/R_*(e=Hm(this.y),1/Math.cos(e*Math.PI/180));var e};var gl=function(e,r,i){this.z=e,this.x=r,this.y=i,this.key=Up(0,e,e,r,i)};gl.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},gl.prototype.url=function(e,r){var i,c,f,d,v,w=(c=this.y,f=this.z,d=O_(256*(i=this.x),256*(c=Math.pow(2,f)-c-1),f),v=O_(256*(i+1),256*(c+1),f),d[0]+","+d[1]+","+v[0]+","+v[1]),P=function(I,M,z){for(var R,N="",X=I;X>0;X--)N+=(M&(R=1<<X-1)?1:0)+(z&R?2:0);return N}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",P).replace("{bbox-epsg-3857}",w)},gl.prototype.getTilePoint=function(e){var r=Math.pow(2,this.z);return new $(8192*(e.x*r-this.x),8192*(e.y*r-this.y))},gl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var j_=function(e,r){this.wrap=e,this.canonical=r,this.key=Up(e,r.z,r.z,r.x,r.y)},Rn=function(e,r,i,c,f){this.overscaledZ=e,this.wrap=r,this.canonical=new gl(i,+c,+f),this.key=Up(r,e,i,c,f)};function Up(e,r,i,c,f){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*f+c).toString(36)+i.toString(36)+r.toString(36)}Rn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Rn.prototype.scaledTo=function(e){var r=this.canonical.z-e;return e>this.canonical.z?new Rn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Rn(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)},Rn.prototype.calculateScaledKey=function(e,r){var i=this.canonical.z-e;return e>this.canonical.z?Up(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y):Up(this.wrap*+r,e,e,this.canonical.x>>i,this.canonical.y>>i)},Rn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r},Rn.prototype.children=function(e){if(this.overscaledZ>=e)return[new Rn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var r=this.canonical.z+1,i=2*this.canonical.x,c=2*this.canonical.y;return[new Rn(r,this.wrap,r,i,c),new Rn(r,this.wrap,r,i+1,c),new Rn(r,this.wrap,r,i,c+1),new Rn(r,this.wrap,r,i+1,c+1)]},Rn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Rn.prototype.wrapped=function(){return new Rn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Rn.prototype.unwrapTo=function(e){return new Rn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Rn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Rn.prototype.toUnwrapped=function(){return new j_(this.wrap,this.canonical)},Rn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Rn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new vl(e.x-this.wrap,e.y))},ft("CanonicalTileID",gl),ft("OverscaledTileID",Rn,{omit:["posMatrix"]});var Ys=function(e,r,i){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Ct('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=r.height;var c=this.dim=r.height-2;this.data=new Uint32Array(r.data.buffer),this.encoding=i||"mapbox";for(var f=0;f<c;f++)this.data[this._idx(-1,f)]=this.data[this._idx(0,f)],this.data[this._idx(c,f)]=this.data[this._idx(c-1,f)],this.data[this._idx(f,-1)]=this.data[this._idx(f,0)],this.data[this._idx(f,c)]=this.data[this._idx(f,c-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(c,-1)]=this.data[this._idx(c-1,0)],this.data[this._idx(-1,c)]=this.data[this._idx(0,c-1)],this.data[this._idx(c,c)]=this.data[this._idx(c-1,c-1)]};Ys.prototype.get=function(e,r){var i=new Uint8Array(this.data.buffer),c=4*this._idx(e,r);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[c],i[c+1],i[c+2])},Ys.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ys.prototype._idx=function(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)},Ys.prototype._unpackMapbox=function(e,r,i){return(256*e*256+256*r+i)/10-1e4},Ys.prototype._unpackTerrarium=function(e,r,i){return 256*e+r+i/256-32768},Ys.prototype.getPixels=function(){return new so({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ys.prototype.backfillBorder=function(e,r,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var c=r*this.dim,f=r*this.dim+this.dim,d=i*this.dim,v=i*this.dim+this.dim;switch(r){case-1:c=f-1;break;case 1:f=c+1}switch(i){case-1:d=v-1;break;case 1:v=d+1}for(var w=-r*this.dim,P=-i*this.dim,I=d;I<v;I++)for(var M=c;M<f;M++)this.data[this._idx(M,I)]=e.data[this._idx(M+w,I+P)]},ft("DEMData",Ys);var If=function(e){this._stringToNumber={},this._numberToString=[];for(var r=0;r<e.length;r++){var i=e[r];this._stringToNumber[i]=r,this._numberToString[r]=i}};If.prototype.encode=function(e){return this._stringToNumber[e]},If.prototype.decode=function(e){return this._numberToString[e]};var kf=function(e,r,i,c,f){this.type="Feature",this._vectorTileFeature=e,e._z=r,e._x=i,e._y=c,this.properties=e.properties,this.id=f},Xm={geometry:{configurable:!0}};Xm.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Xm.geometry.set=function(e){this._geometry=e},kf.prototype.toJSON=function(){var e={geometry:this.geometry};for(var r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(e[r]=this[r]);return e},Object.defineProperties(kf.prototype,Xm);var bc=function(){this.state={},this.stateChanges={},this.deletedStates={}};bc.prototype.updateState=function(e,r,i){var c=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][c]=this.stateChanges[e][c]||{},ne(this.stateChanges[e][c],i),this.deletedStates[e]===null)for(var f in this.deletedStates[e]={},this.state[e])f!==c&&(this.deletedStates[e][f]=null);else if(this.deletedStates[e]&&this.deletedStates[e][c]===null)for(var d in this.deletedStates[e][c]={},this.state[e][c])i[d]||(this.deletedStates[e][c][d]=null);else for(var v in i)this.deletedStates[e]&&this.deletedStates[e][c]&&this.deletedStates[e][c][v]===null&&delete this.deletedStates[e][c][v]},bc.prototype.removeFeatureState=function(e,r,i){if(this.deletedStates[e]!==null){var c=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&r!==void 0)this.deletedStates[e][c]!==null&&(this.deletedStates[e][c]=this.deletedStates[e][c]||{},this.deletedStates[e][c][i]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][c])for(i in this.deletedStates[e][c]={},this.stateChanges[e][c])this.deletedStates[e][c][i]=null;else this.deletedStates[e][c]=null;else this.deletedStates[e]=null}},bc.prototype.getState=function(e,r){var i=String(r),c=ne({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var f=this.deletedStates[e][r];if(f===null)return{};for(var d in f)delete c[d]}return c},bc.prototype.initializeTileState=function(e,r){e.setFeatureState(this.state,r)},bc.prototype.coalesceChanges=function(e,r){var i={};for(var c in this.stateChanges){this.state[c]=this.state[c]||{};var f={};for(var d in this.stateChanges[c])this.state[c][d]||(this.state[c][d]={}),ne(this.state[c][d],this.stateChanges[c][d]),f[d]=this.state[c][d];i[c]=f}for(var v in this.deletedStates){this.state[v]=this.state[v]||{};var w={};if(this.deletedStates[v]===null)for(var P in this.state[v])w[P]={},this.state[v][P]={};else for(var I in this.deletedStates[v]){if(this.deletedStates[v][I]===null)this.state[v][I]={};else for(var M=0,z=Object.keys(this.deletedStates[v][I]);M<z.length;M+=1)delete this.state[v][I][z[M]];w[I]=this.state[v][I]}i[v]=i[v]||{},ne(i[v],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var R in e)e[R].setFeatureState(i,r)};var Qs=function(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new eo(8192,16,0),this.grid3D=new eo(8192,16,0),this.featureIndexArray=new D,this.promoteId=r};function V_(e,r,i,c,f){return Xe(e,function(d,v){var w=r instanceof ul?r.get(v):null;return w&&w.evaluate?w.evaluate(i,c,f):w})}function q_(e){for(var r=1/0,i=1/0,c=-1/0,f=-1/0,d=0,v=e;d<v.length;d+=1){var w=v[d];r=Math.min(r,w.x),i=Math.min(i,w.y),c=Math.max(c,w.x),f=Math.max(f,w.y)}return{minX:r,minY:i,maxX:c,maxY:f}}function tS(e,r){return r-e}Qs.prototype.insert=function(e,r,i,c,f,d){var v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,c,f);for(var w=d?this.grid3D:this.grid,P=0;P<r.length;P++){for(var I=r[P],M=[1/0,1/0,-1/0,-1/0],z=0;z<I.length;z++){var R=I[z];M[0]=Math.min(M[0],R.x),M[1]=Math.min(M[1],R.y),M[2]=Math.max(M[2],R.x),M[3]=Math.max(M[3],R.y)}M[0]<8192&&M[1]<8192&&M[2]>=0&&M[3]>=0&&w.insert(v,M[0],M[1],M[2],M[3])}},Qs.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new pc.VectorTile(new vf(this.rawTileData)).layers,this.sourceLayerCoder=new If(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Qs.prototype.query=function(e,r,i,c){var f=this;this.loadVTLayers();for(var d=e.params||{},v=8192/e.tileSize/e.scale,w=zi(d.filter),P=e.queryGeometry,I=e.queryPadding*v,M=q_(P),z=this.grid.query(M.minX-I,M.minY-I,M.maxX+I,M.maxY+I),R=q_(e.cameraQueryGeometry),N=this.grid3D.query(R.minX-I,R.minY-I,R.maxX+I,R.maxY+I,function(Ee,ke,Fe,Ze){return function(Ke,xt,it,Pt,ot){for(var Yt=0,Bt=Ke;Yt<Bt.length;Yt+=1){var vt=Bt[Yt];if(xt<=vt.x&&it<=vt.y&&Pt>=vt.x&&ot>=vt.y)return!0}var rr=[new $(xt,it),new $(xt,ot),new $(Pt,ot),new $(Pt,it)];if(Ke.length>2){for(var Ht=0,pr=rr;Ht<pr.length;Ht+=1)if(Sa(Ke,pr[Ht]))return!0}for(var Tt=0;Tt<Ke.length-1;Tt++)if(fl(Ke[Tt],Ke[Tt+1],rr))return!0;return!1}(e.cameraQueryGeometry,Ee-I,ke-I,Fe+I,Ze+I)}),X=0,J=N;X<J.length;X+=1)z.push(J[X]);z.sort(tS);for(var ae,re={},he=function(Ee){var ke=z[Ee];if(ke!==ae){ae=ke;var Fe=f.featureIndexArray.get(ke),Ze=null;f.loadMatchingFeature(re,Fe.bucketIndex,Fe.sourceLayerIndex,Fe.featureIndex,w,d.layers,d.availableImages,r,i,c,function(Ke,xt,it){return Ze||(Ze=un(Ke)),xt.queryIntersectsFeature(P,Ke,it,Ze,f.z,e.transform,v,e.pixelPosMatrix)})}},_e=0;_e<z.length;_e++)he(_e);return re},Qs.prototype.loadMatchingFeature=function(e,r,i,c,f,d,v,w,P,I,M){var z=this.bucketLayerIDs[r];if(!d||function(Ke,xt){for(var it=0;it<Ke.length;it++)if(xt.indexOf(Ke[it])>=0)return!0;return!1}(d,z)){var R=this.sourceLayerCoder.decode(i),N=this.vtLayers[R].feature(c);if(f.needGeometry){var X=_n(N,!0);if(!f.filter(new nr(this.tileID.overscaledZ),X,this.tileID.canonical))return}else if(!f.filter(new nr(this.tileID.overscaledZ),N))return;for(var J=this.getId(N,R),ae=0;ae<z.length;ae++){var re=z[ae];if(!(d&&d.indexOf(re)<0)){var he=w[re];if(he){var _e={};J!==void 0&&I&&(_e=I.getState(he.sourceLayer||"_geojsonTileLayer",J));var Ee=ne({},P[re]);Ee.paint=V_(Ee.paint,he.paint,N,_e,v),Ee.layout=V_(Ee.layout,he.layout,N,_e,v);var ke=!M||M(N,he,_e);if(ke){var Fe=new kf(N,this.z,this.x,this.y,J);Fe.layer=Ee;var Ze=e[re];Ze===void 0&&(Ze=e[re]=[]),Ze.push({featureIndex:c,feature:Fe,intersectionZ:ke})}}}}}},Qs.prototype.lookupSymbolFeatures=function(e,r,i,c,f,d,v,w){var P={};this.loadVTLayers();for(var I=zi(f),M=0,z=e;M<z.length;M+=1)this.loadMatchingFeature(P,i,c,z[M],I,d,v,w,r);return P},Qs.prototype.hasLayer=function(e){for(var r=0,i=this.bucketLayerIDs;r<i.length;r+=1)for(var c=0,f=i[r];c<f.length;c+=1)if(e===f[c])return!0;return!1},Qs.prototype.getId=function(e,r){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]])=="boolean"&&(i=Number(i)),i},ft("FeatureIndex",Qs,{omit:["rawTileData","sourceLayerCoder"]});var ei=function(e,r){this.tileID=e,this.uid=Le(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ei.prototype.registerFadeDuration=function(e){var r=e+this.timeAdded;r<si.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)},ei.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ei.prototype.loadVectorData=function(e,r,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var c in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(I,M){var z={};if(!M)return z;for(var R=function(){var J=X[N],ae=J.layerIds.map(function(_e){return M.getLayer(_e)}).filter(Boolean);if(ae.length!==0){J.layers=ae,J.stateDependentLayerIds&&(J.stateDependentLayers=J.stateDependentLayerIds.map(function(_e){return ae.filter(function(Ee){return Ee.id===_e})[0]}));for(var re=0,he=ae;re<he.length;re+=1)z[he[re].id]=J}},N=0,X=I;N<X.length;N+=1)R();return z}(e.buckets,r.style),this.hasSymbolBuckets=!1,this.buckets){var f=this.buckets[c];if(f instanceof Or){if(this.hasSymbolBuckets=!0,!i)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var v=this.buckets[d];if(v instanceof Or&&v.hasRTLText){this.hasRTLText=!0,wo.isLoading()||wo.isLoaded()||wp()!=="deferred"||na();break}}for(var w in this.queryPadding=0,this.buckets){var P=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(w).queryRadius(P))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new u},ei.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ei.prototype.getBucket=function(e){return this.buckets[e.id]},ei.prototype.upload=function(e){for(var r in this.buckets){var i=this.buckets[r];i.uploadPending()&&i.upload(e)}var c=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new yl(e,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new yl(e,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)},ei.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},ei.prototype.queryRenderedFeatures=function(e,r,i,c,f,d,v,w,P,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:c,cameraQueryGeometry:f,scale:d,tileSize:this.tileSize,pixelPosMatrix:I,transform:w,params:v,queryPadding:this.queryPadding*P},e,r,i):{}},ei.prototype.querySourceFeatures=function(e,r){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var c=i.loadVTLayers(),f=r?r.sourceLayer:"",d=c._geojsonTileLayer||c[f];if(d)for(var v=zi(r&&r.filter),w=this.tileID.canonical,P=w.z,I=w.x,M=w.y,z={z:P,x:I,y:M},R=0;R<d.length;R++){var N=d.feature(R);if(v.needGeometry){var X=_n(N,!0);if(!v.filter(new nr(this.tileID.overscaledZ),X,this.tileID.canonical))continue}else if(!v.filter(new nr(this.tileID.overscaledZ),N))continue;var J=i.getId(N,f),ae=new kf(N,P,I,M,J);ae.tile=z,e.push(ae)}}},ei.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ei.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ei.prototype.setExpiryData=function(e){var r=this.expirationTime;if(e.cacheControl){var i=Fn(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var c=Date.now(),f=!1;if(this.expirationTime>c)f=!1;else if(r)if(this.expirationTime<r)f=!0;else{var d=this.expirationTime-r;d?this.expirationTime=c+Math.max(d,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ei.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ei.prototype.setFeatureState=function(e,r){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var c in this.buckets)if(r.style.hasLayer(c)){var f=this.buckets[c],d=f.layers[0].sourceLayer||"_geojsonTileLayer",v=i[d],w=e[d];if(v&&w&&Object.keys(w).length!==0){f.update(w,v,this.imageAtlas&&this.imageAtlas.patternPositions||{});var P=r&&r.style&&r.style.getLayer(c);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(f)))}}}},ei.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ei.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<si.now()},ei.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ei.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=si.now()+e},ei.prototype.setDependencies=function(e,r){for(var i={},c=0,f=r;c<f.length;c+=1)i[f[c]]=!0;this.dependencies[e]=i},ei.prototype.hasDependency=function(e,r){for(var i=0,c=e;i<c.length;i+=1){var f=this.dependencies[c[i]];if(f){for(var d=0,v=r;d<v.length;d+=1)if(f[v[d]])return!0}}return!1};var Su=W.performance,Z_=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Su.mark(this._marks.start)};Z_.prototype.finish=function(){Su.mark(this._marks.end);var e=Su.getEntriesByName(this._marks.measure);return e.length===0&&(Su.measure(this._marks.measure,this._marks.start,this._marks.end),e=Su.getEntriesByName(this._marks.measure),Su.clearMarks(this._marks.start),Su.clearMarks(this._marks.end),Su.clearMeasures(this._marks.measure)),e},l.Actor=xc,l.AlphaImage=ml,l.CanonicalTileID=gl,l.CollisionBoxArray=u,l.Color=fr,l.DEMData=Ys,l.DataConstantProperty=St,l.DictionaryCoder=If,l.EXTENT=8192,l.ErrorEvent=ue,l.EvaluationParameters=nr,l.Event=K,l.Evented=pe,l.FeatureIndex=Qs,l.FillBucket=Xa,l.FillExtrusionBucket=Ka,l.ImageAtlas=Fp,l.ImagePosition=_f,l.LineBucket=Oi,l.LngLat=Xr,l.LngLatBounds=On,l.MercatorCoordinate=vl,l.ONE_EM=24,l.OverscaledTileID=Rn,l.Point=$,l.Point$1=$,l.Properties=ai,l.Protobuf=vf,l.RGBAImage=so,l.RequestManager=on,l.RequestPerformance=Z_,l.ResourceType=Os,l.SegmentVector=q,l.SourceFeatureState=bc,l.StructArrayLayout1ui2=Ip,l.StructArrayLayout2f1f2i16=Hs,l.StructArrayLayout2i4=$s,l.StructArrayLayout3ui6=ps,l.StructArrayLayout4i8=Ep,l.SymbolBucket=Or,l.Texture=yl,l.Tile=ei,l.Transitionable=oi,l.Uniform1f=He,l.Uniform1i=Ne,l.Uniform2f=We,l.Uniform3f=lt,l.Uniform4f=Et,l.UniformColor=At,l.UniformMatrix4f=mr,l.UnwrappedTileID=j_,l.ValidationError=ee,l.WritingMode=No,l.ZoomHistory=gp,l.add=function(e,r,i){return e[0]=r[0]+i[0],e[1]=r[1]+i[1],e[2]=r[2]+i[2],e},l.addDynamicAttributes=Gm,l.asyncAll=function(e,r,i){if(!e.length)return i(null,[]);var c=e.length,f=new Array(e.length),d=null;e.forEach(function(v,w){r(v,function(P,I){P&&(d=P),f[w]=I,--c==0&&i(d,f)})})},l.bezier=Ce,l.bindAll=je,l.browser=si,l.cacheEntryPossiblyAdded=function(e){++Un>Wi&&(e.getActor().send("enforceCacheSizeLimit",Gi),Un=0)},l.clamp=se,l.clearTileCache=function(e){var r=W.caches.delete("mapbox-tiles");e&&r.catch(e).then(function(){return e()})},l.clipLine=P_,l.clone=function(e){var r=new wr(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},l.clone$1=Mt,l.clone$2=function(e){var r=new wr(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r},l.collisionCircleLayout=b2,l.config=cr,l.create=function(){var e=new wr(16);return wr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},l.create$1=function(){var e=new wr(9);return wr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},l.create$2=function(){var e=new wr(4);return wr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},l.createCommonjsModule=C,l.createExpression=js,l.createLayout=Yn,l.createStyleLayer=function(e){return e.type==="custom"?new Q2(e):new eS[e.type](e)},l.cross=function(e,r,i){var c=r[0],f=r[1],d=r[2],v=i[0],w=i[1],P=i[2];return e[0]=f*P-d*w,e[1]=d*v-c*P,e[2]=c*w-f*v,e},l.deepEqual=function e(r,i){if(Array.isArray(r)){if(!Array.isArray(i)||r.length!==i.length)return!1;for(var c=0;c<r.length;c++)if(!e(r[c],i[c]))return!1;return!0}if(typeof r=="object"&&r!==null&&i!==null){if(typeof i!="object"||Object.keys(r).length!==Object.keys(i).length)return!1;for(var f in r)if(!e(r[f],i[f]))return!1;return!0}return r===i},l.dot=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]},l.dot$1=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]},l.ease=Oe,l.emitValidationErrors=ga,l.endsWith=at,l.enforceCacheSizeLimit=function(e){Xn(),mi&&mi.then(function(r){r.keys().then(function(i){for(var c=0;c<i.length-e;c++)r.delete(i[c])})})},l.evaluateSizeForFeature=__,l.evaluateSizeForZoom=x_,l.evaluateVariableOffset=I_,l.evented=bp,l.extend=ne,l.featureFilter=zi,l.filterObject=_t,l.fromRotation=function(e,r){var i=Math.sin(r),c=Math.cos(r);return e[0]=c,e[1]=i,e[2]=0,e[3]=-i,e[4]=c,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},l.getAnchorAlignment=jm,l.getAnchorJustification=Zm,l.getArrayBuffer=as,l.getImage=O,l.getJSON=function(e,r){return Mr(ne(e,{type:"json"}),r)},l.getRTLTextPluginStatus=wp,l.getReferrer=Oa,l.getVideo=function(e,r){var i,c,f=W.document.createElement("video");f.muted=!0,f.onloadstart=function(){r(null,f)};for(var d=0;d<e.length;d++){var v=W.document.createElement("source");i=e[d],c=void 0,(c=W.document.createElement("a")).href=i,(c.protocol!==W.document.location.protocol||c.host!==W.document.location.host)&&(f.crossOrigin="Anonymous"),v.src=e[d],f.appendChild(v)}return{cancel:function(){}}},l.identity=So,l.invert=function(e,r){var i=r[0],c=r[1],f=r[2],d=r[3],v=r[4],w=r[5],P=r[6],I=r[7],M=r[8],z=r[9],R=r[10],N=r[11],X=r[12],J=r[13],ae=r[14],re=r[15],he=i*w-c*v,_e=i*P-f*v,Ee=i*I-d*v,ke=c*P-f*w,Fe=c*I-d*w,Ze=f*I-d*P,Ke=M*J-z*X,xt=M*ae-R*X,it=M*re-N*X,Pt=z*ae-R*J,ot=z*re-N*J,Yt=R*re-N*ae,Bt=he*Yt-_e*ot+Ee*Pt+ke*it-Fe*xt+Ze*Ke;return Bt?(e[0]=(w*Yt-P*ot+I*Pt)*(Bt=1/Bt),e[1]=(f*ot-c*Yt-d*Pt)*Bt,e[2]=(J*Ze-ae*Fe+re*ke)*Bt,e[3]=(R*Fe-z*Ze-N*ke)*Bt,e[4]=(P*it-v*Yt-I*xt)*Bt,e[5]=(i*Yt-f*it+d*xt)*Bt,e[6]=(ae*Ee-X*Ze-re*_e)*Bt,e[7]=(M*Ze-R*Ee+N*_e)*Bt,e[8]=(v*ot-w*it+I*Ke)*Bt,e[9]=(c*it-i*ot-d*Ke)*Bt,e[10]=(X*Fe-J*Ee+re*he)*Bt,e[11]=(z*Ee-M*Fe-N*he)*Bt,e[12]=(w*xt-v*Pt-P*Ke)*Bt,e[13]=(i*Pt-c*xt+f*Ke)*Bt,e[14]=(J*_e-X*ke-ae*he)*Bt,e[15]=(M*ke-z*_e+R*he)*Bt,e):null},l.isChar=et,l.isMapboxURL=An,l.keysDifference=function(e,r){var i=[];for(var c in e)c in r||i.push(c);return i},l.makeRequest=Mr,l.mapObject=Xe,l.mercatorXfromLng=B_,l.mercatorYfromLat=U_,l.mercatorZfromAltitude=N_,l.mul=km,l.multiply=Di,l.mvt=pc,l.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},l.normalize=function(e,r){var i=r[0],c=r[1],f=r[2],d=i*i+c*c+f*f;return d>0&&(d=1/Math.sqrt(d)),e[0]=r[0]*d,e[1]=r[1]*d,e[2]=r[2]*d,e},l.number=nn,l.offscreenCanvasSupported=tr,l.ortho=function(e,r,i,c,f,d,v){var w=1/(r-i),P=1/(c-f),I=1/(d-v);return e[0]=-2*w,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*P,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*I,e[11]=0,e[12]=(r+i)*w,e[13]=(f+c)*P,e[14]=(v+d)*I,e[15]=1,e},l.parseGlyphPBF=function(e){return new vf(e).readFields(z2,[])},l.pbf=vf,l.performSymbolLayout=function(e,r,i,c,f,d,v){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var w=e.layers[0].layout,P=e.layers[0]._unevaluatedLayout._values,I={};if(e.textSizeData.kind==="composite"){var M=e.textSizeData,z=M.maxZoom;I.compositeTextSizes=[P["text-size"].possiblyEvaluate(new nr(M.minZoom),v),P["text-size"].possiblyEvaluate(new nr(z),v)]}if(e.iconSizeData.kind==="composite"){var R=e.iconSizeData,N=R.maxZoom;I.compositeIconSizes=[P["icon-size"].possiblyEvaluate(new nr(R.minZoom),v),P["icon-size"].possiblyEvaluate(new nr(N),v)]}I.layoutTextSize=P["text-size"].possiblyEvaluate(new nr(e.zoom+1),v),I.layoutIconSize=P["icon-size"].possiblyEvaluate(new nr(e.zoom+1),v),I.textMaxSize=P["text-size"].possiblyEvaluate(new nr(18));for(var X=24*w.get("text-line-height"),J=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point",ae=w.get("text-keep-upright"),re=w.get("text-size"),he=function(){var ke=Ee[_e],Fe=w.get("text-font").evaluate(ke,{},v).join(","),Ze=re.evaluate(ke,{},v),Ke=I.layoutTextSize.evaluate(ke,{},v),xt=I.layoutIconSize.evaluate(ke,{},v),it={horizontal:{},vertical:void 0},Pt=ke.text,ot=[0,0];if(Pt){var Yt=Pt.toString(),Bt=24*w.get("text-letter-spacing").evaluate(ke,{},v),vt=function(sr){for(var Br=0,Ar=sr;Br<Ar.length;Br+=1)if(yr=Ar[Br].charCodeAt(0),et.Arabic(yr)||et["Arabic Supplement"](yr)||et["Arabic Extended-A"](yr)||et["Arabic Presentation Forms-A"](yr)||et["Arabic Presentation Forms-B"](yr))return!1;var yr;return!0}(Yt)?Bt:0,rr=w.get("text-anchor").evaluate(ke,{},v),Ht=w.get("text-variable-anchor");if(!Ht){var pr=w.get("text-radial-offset").evaluate(ke,{},v);ot=pr?I_(rr,[24*pr,qm]):w.get("text-offset").evaluate(ke,{},v).map(function(sr){return 24*sr})}var Tt=J?"center":w.get("text-justify").evaluate(ke,{},v),xr=w.get("symbol-placement"),Kr=xr==="point"?24*w.get("text-max-width").evaluate(ke,{},v):0,dn=function(){e.allowVerticalPlacement&&_p(Yt)&&(it.vertical=xf(Pt,r,i,f,Fe,Kr,X,rr,"left",vt,ot,No.vertical,!0,xr,Ke,Ze))};if(!J&&Ht){for(var ln=Tt==="auto"?Ht.map(function(sr){return Zm(sr)}):[Tt],Jr=!1,mn=0;mn<ln.length;mn++){var Zn=ln[mn];if(!it.horizontal[Zn])if(Jr)it.horizontal[Zn]=it.horizontal[0];else{var Gn=xf(Pt,r,i,f,Fe,Kr,X,"center",Zn,vt,ot,No.horizontal,!1,xr,Ke,Ze);Gn&&(it.horizontal[Zn]=Gn,Jr=Gn.positionedLines.length===1)}}dn()}else{Tt==="auto"&&(Tt=Zm(rr));var bi=xf(Pt,r,i,f,Fe,Kr,X,rr,Tt,vt,ot,No.horizontal,!1,xr,Ke,Ze);bi&&(it.horizontal[Tt]=bi),dn(),_p(Yt)&&J&&ae&&(it.vertical=xf(Pt,r,i,f,Fe,Kr,X,rr,Tt,vt,ot,No.vertical,!1,xr,Ke,Ze))}}var ti=void 0,wi=!1;if(ke.icon&&ke.icon.name){var xn=c[ke.icon.name];xn&&(ti=function(sr,Br,Ar){var yr=jm(Ar),Ri=Br[0]-sr.displaySize[0]*yr.horizontalAlign,hi=Br[1]-sr.displaySize[1]*yr.verticalAlign;return{image:sr,top:hi,bottom:hi+sr.displaySize[1],left:Ri,right:Ri+sr.displaySize[0]}}(f[ke.icon.name],w.get("icon-offset").evaluate(ke,{},v),w.get("icon-anchor").evaluate(ke,{},v)),wi=xn.sdf,e.sdfIcons===void 0?e.sdfIcons=xn.sdf:e.sdfIcons!==xn.sdf&&Ct("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xn.pixelRatio!==e.pixelRatio||w.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var ri=A_(it.horizontal)||it.vertical;e.iconsInText=!!ri&&ri.iconsInText,(ri||ti)&&function(sr,Br,Ar,yr,Ri,hi,Hr,Cn,fi,br,vs){var jo=hi.textMaxSize.evaluate(Br,{});jo===void 0&&(jo=Hr);var gs,bn=sr.layers[0].layout,_s=bn.get("icon-offset").evaluate(Br,{},vs),Pa=A_(Ar.horizontal),wc=Hr/24,_l=sr.tilePixelRatio*wc,Sc=sr.tilePixelRatio*jo/24,eu=sr.tilePixelRatio*Cn,Ec=sr.tilePixelRatio*bn.get("symbol-spacing"),Af=bn.get("text-padding")*sr.tilePixelRatio,Pc=bn.get("icon-padding")*sr.tilePixelRatio,Np=bn.get("text-max-angle")/180*Math.PI,Mf=bn.get("text-rotation-alignment")==="map"&&bn.get("symbol-placement")!=="point",zf=bn.get("icon-rotation-alignment")==="map"&&bn.get("symbol-placement")!=="point",tu=bn.get("symbol-placement"),jp=Ec/2,Tc=bn.get("icon-text-fit");yr&&Tc!=="none"&&(sr.allowVerticalPlacement&&Ar.vertical&&(gs=g_(yr,Ar.vertical,Tc,bn.get("icon-text-fit-padding"),_s,wc)),Pa&&(yr=g_(yr,Pa,Tc,bn.get("icon-text-fit-padding"),_s,wc)));var Eu=function(rS,Xp){Xp.x<0||Xp.x>=8192||Xp.y<0||Xp.y>=8192||function(wn,Ja,nS,Pu,Qm,$_,Bf,xs,Uf,Kp,Nf,jf,ey,H_,Jp,X_,K_,J_,Y_,Q_,Vo,Vf,e0,bs,iS){var t0,bl,Mc,zc,Lc,Dc=wn.addToLineVertexArray(Ja,nS),r0=0,n0=0,i0=0,o0=0,ty=-1,ry=-1,ru={},a0=H(""),ny=0,iy=0;if(xs._unevaluatedLayout.getValue("text-radial-offset")===void 0?(ny=(t0=xs.layout.get("text-offset").evaluate(Vo,{},bs).map(function(Qp){return 24*Qp}))[0],iy=t0[1]):(ny=24*xs.layout.get("text-radial-offset").evaluate(Vo,{},bs),iy=qm),wn.allowVerticalPlacement&&Pu.vertical){var s0=xs.layout.get("text-rotate").evaluate(Vo,{},bs)+90;zc=new Pf(Uf,Ja,Kp,Nf,jf,Pu.vertical,ey,H_,Jp,s0),Bf&&(Lc=new Pf(Uf,Ja,Kp,Nf,jf,Bf,K_,J_,Jp,s0))}if(Qm){var oy=xs.layout.get("icon-rotate").evaluate(Vo,{}),u0=xs.layout.get("icon-text-fit")!=="none",l0=T_(Qm,oy,e0,u0),ay=Bf?T_(Bf,oy,e0,u0):void 0;Mc=new Pf(Uf,Ja,Kp,Nf,jf,Qm,K_,J_,!1,oy),r0=4*l0.length;var c0=wn.iconSizeData,Yp=null;c0.kind==="source"?(Yp=[128*xs.layout.get("icon-size").evaluate(Vo,{})])[0]>32640&&Ct(wn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):c0.kind==="composite"&&((Yp=[128*Vf.compositeIconSizes[0].evaluate(Vo,{},bs),128*Vf.compositeIconSizes[1].evaluate(Vo,{},bs)])[0]>32640||Yp[1]>32640)&&Ct(wn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),wn.addSymbols(wn.icon,l0,Yp,Q_,Y_,Vo,!1,Ja,Dc.lineStartIndex,Dc.lineLength,-1,bs),ty=wn.icon.placedSymbolArray.length-1,ay&&(n0=4*ay.length,wn.addSymbols(wn.icon,ay,Yp,Q_,Y_,Vo,No.vertical,Ja,Dc.lineStartIndex,Dc.lineLength,-1,bs),ry=wn.icon.placedSymbolArray.length-1)}for(var p0 in Pu.horizontal){var qf=Pu.horizontal[p0];if(!bl){a0=H(qf.text);var oS=xs.layout.get("text-rotate").evaluate(Vo,{},bs);bl=new Pf(Uf,Ja,Kp,Nf,jf,qf,ey,H_,Jp,oS)}var h0=qf.positionedLines.length===1;if(i0+=k_(wn,Ja,qf,$_,xs,Jp,Vo,X_,Dc,Pu.vertical?No.horizontal:No.horizontalOnly,h0?Object.keys(Pu.horizontal):[p0],ru,ty,Vf,bs),h0)break}Pu.vertical&&(o0+=k_(wn,Ja,Pu.vertical,$_,xs,Jp,Vo,X_,Dc,No.vertical,["vertical"],ru,ry,Vf,bs));var aS=bl?bl.boxStartIndex:wn.collisionBoxArray.length,sS=bl?bl.boxEndIndex:wn.collisionBoxArray.length,uS=zc?zc.boxStartIndex:wn.collisionBoxArray.length,lS=zc?zc.boxEndIndex:wn.collisionBoxArray.length,cS=Mc?Mc.boxStartIndex:wn.collisionBoxArray.length,pS=Mc?Mc.boxEndIndex:wn.collisionBoxArray.length,hS=Lc?Lc.boxStartIndex:wn.collisionBoxArray.length,fS=Lc?Lc.boxEndIndex:wn.collisionBoxArray.length,ws=-1,Zf=function(Qp,d0){return Qp&&Qp.circleDiameter?Math.max(Qp.circleDiameter,d0):d0};ws=Zf(bl,ws),ws=Zf(zc,ws),ws=Zf(Mc,ws);var f0=(ws=Zf(Lc,ws))>-1?1:0;f0&&(ws*=iS/24),wn.glyphOffsetArray.length>=Or.MAX_GLYPHS&&Ct("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vo.sortKey!==void 0&&wn.addToSortKeyRanges(wn.symbolInstances.length,Vo.sortKey),wn.symbolInstances.emplaceBack(Ja.x,Ja.y,ru.right>=0?ru.right:-1,ru.center>=0?ru.center:-1,ru.left>=0?ru.left:-1,ru.vertical||-1,ty,ry,a0,aS,sS,uS,lS,cS,pS,hS,fS,Kp,i0,o0,r0,n0,f0,0,ey,ny,iy,ws)}(sr,Xp,rS,Ar,yr,Ri,gs,sr.layers[0],sr.collisionBoxArray,Br.index,Br.sourceLayerIndex,sr.index,_l,Af,Mf,fi,eu,Pc,zf,_s,Br,hi,br,vs,Hr)};if(tu==="line")for(var Cc=0,Lf=P_(Br.geometry,0,0,8192,8192);Cc<Lf.length;Cc+=1)for(var Df=Lf[Cc],Vp=0,qp=U2(Df,Ec,Np,Ar.vertical||Pa,yr,24,Sc,sr.overscaling,8192);Vp<qp.length;Vp+=1){var Of=qp[Vp];Pa&&q2(sr,Pa.text,jp,Of)||Eu(Df,Of)}else if(tu==="line-center")for(var Zp=0,Gp=Br.geometry;Zp<Gp.length;Zp+=1){var Wp=Gp[Zp];if(Wp.length>1){var Rf=B2(Wp,Np,Ar.vertical||Pa,yr,24,Sc);Rf&&Eu(Wp,Rf)}}else if(Br.type==="Polygon")for(var Ic=0,Ff=Rm(Br.geometry,0);Ic<Ff.length;Ic+=1){var kc=Ff[Ic],$p=j2(kc,16);Eu(kc[0],new mc($p.x,$p.y,0))}else if(Br.type==="LineString")for(var xl=0,Hp=Br.geometry;xl<Hp.length;xl+=1){var Ac=Hp[xl];Eu(Ac,new mc(Ac[0].x,Ac[0].y,0))}else if(Br.type==="Point")for(var Km=0,G_=Br.geometry;Km<G_.length;Km+=1)for(var Jm=0,W_=G_[Km];Jm<W_.length;Jm+=1){var Ym=W_[Jm];Eu([Ym],new mc(Ym.x,Ym.y,0))}}(e,ke,it,ti,c,I,Ke,xt,ot,wi,v)},_e=0,Ee=e.features;_e<Ee.length;_e+=1)he();d&&e.generateCollisionDebugBuffers()},l.perspective=function(e,r,i,c,f){var d,v=1/Math.tan(r/2);return e[0]=v/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,f!=null&&f!==1/0?(e[10]=(f+c)*(d=1/(c-f)),e[14]=2*f*c*d):(e[10]=-1,e[14]=-2*c),e},l.pick=function(e,r){for(var i={},c=0;c<r.length;c++){var f=r[c];f in e&&(i[f]=e[f])}return i},l.plugin=wo,l.polygonIntersectsPolygon=ds,l.postMapLoadEvent=Mn,l.postTurnstileEvent=os,l.potpack=d_,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=ft,l.registerForPluginStateChange=function(e){return e({pluginStatus:io,pluginURL:Wa}),bp.on("pluginStateChange",e),e},l.renderColorRamp=Xg,l.rotate=function(e,r,i){var c=r[0],f=r[1],d=r[2],v=r[3],w=Math.sin(i),P=Math.cos(i);return e[0]=c*P+d*w,e[1]=f*P+v*w,e[2]=c*-w+d*P,e[3]=f*-w+v*P,e},l.rotateX=function(e,r,i){var c=Math.sin(i),f=Math.cos(i),d=r[4],v=r[5],w=r[6],P=r[7],I=r[8],M=r[9],z=r[10],R=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=d*f+I*c,e[5]=v*f+M*c,e[6]=w*f+z*c,e[7]=P*f+R*c,e[8]=I*f-d*c,e[9]=M*f-v*c,e[10]=z*f-w*c,e[11]=R*f-P*c,e},l.rotateZ=function(e,r,i){var c=Math.sin(i),f=Math.cos(i),d=r[0],v=r[1],w=r[2],P=r[3],I=r[4],M=r[5],z=r[6],R=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=d*f+I*c,e[1]=v*f+M*c,e[2]=w*f+z*c,e[3]=P*f+R*c,e[4]=I*f-d*c,e[5]=M*f-v*c,e[6]=z*f-w*c,e[7]=R*f-P*c,e},l.scale=function(e,r,i){var c=i[0],f=i[1],d=i[2];return e[0]=r[0]*c,e[1]=r[1]*c,e[2]=r[2]*c,e[3]=r[3]*c,e[4]=r[4]*f,e[5]=r[5]*f,e[6]=r[6]*f,e[7]=r[7]*f,e[8]=r[8]*d,e[9]=r[9]*d,e[10]=r[10]*d,e[11]=r[11]*d,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},l.scale$1=function(e,r,i){return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=r[3]*i,e},l.scale$2=function(e,r,i){return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e},l.setCacheLimits=function(e,r){Gi=e,Wi=r},l.setRTLTextPlugin=function(e,r,i){if(i===void 0&&(i=!1),io==="deferred"||io==="loading"||io==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Wa=si.resolveURL(e),io="deferred",tc=r,sl(),i||na()},l.sphericalToCartesian=function(e){var r=e[0],i=e[1],c=e[2];return i+=90,i*=Math.PI/180,c*=Math.PI/180,{x:r*Math.cos(i)*Math.sin(c),y:r*Math.sin(i)*Math.sin(c),z:r*Math.cos(c)}},l.sqrLen=function(e){var r=e[0],i=e[1];return r*r+i*i},l.styleSpec=V,l.sub=function(e,r,i){return e[0]=r[0]-i[0],e[1]=r[1]-i[1],e[2]=r[2]-i[2],e},l.symbolSize=F2,l.transformMat3=function(e,r,i){var c=r[0],f=r[1],d=r[2];return e[0]=c*i[0]+f*i[3]+d*i[6],e[1]=c*i[1]+f*i[4]+d*i[7],e[2]=c*i[2]+f*i[5]+d*i[8],e},l.transformMat4=sc,l.translate=function(e,r,i){var c,f,d,v,w,P,I,M,z,R,N,X,J=i[0],ae=i[1],re=i[2];return r===e?(e[12]=r[0]*J+r[4]*ae+r[8]*re+r[12],e[13]=r[1]*J+r[5]*ae+r[9]*re+r[13],e[14]=r[2]*J+r[6]*ae+r[10]*re+r[14],e[15]=r[3]*J+r[7]*ae+r[11]*re+r[15]):(f=r[1],d=r[2],v=r[3],w=r[4],P=r[5],I=r[6],M=r[7],z=r[8],R=r[9],N=r[10],X=r[11],e[0]=c=r[0],e[1]=f,e[2]=d,e[3]=v,e[4]=w,e[5]=P,e[6]=I,e[7]=M,e[8]=z,e[9]=R,e[10]=N,e[11]=X,e[12]=c*J+w*ae+z*re+r[12],e[13]=f*J+P*ae+R*re+r[13],e[14]=d*J+I*ae+N*re+r[14],e[15]=v*J+M*ae+X*re+r[15]),e},l.triggerPluginCompletionEvent=cf,l.uniqueId=Le,l.validateCustomStyleLayer=function(e){var r=[],i=e.id;return i===void 0&&r.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&r.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&r.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),r},l.validateLight=Jl,l.validateStyle=Qi,l.values=function(e){var r=[];for(var i in e)r.push(e[i]);return r},l.vectorTile=pc,l.version="1.13.2",l.warnOnce=Ct,l.webpSupported=Io,l.window=W,l.wrap=te}),x(["./shared"],function(l){function C(L){var O=typeof L;if(O==="number"||O==="boolean"||O==="string"||L==null)return JSON.stringify(L);if(Array.isArray(L)){for(var U="[",G=0,K=L;G<K.length;G+=1)U+=C(K[G])+",";return U+"]"}for(var ue=Object.keys(L).sort(),pe="{",V=0;V<ue.length;V++)pe+=JSON.stringify(ue[V])+":"+C(L[ue[V]])+",";return pe+"}"}function k(L){for(var O="",U=0,G=l.refProperties;U<G.length;U+=1)O+="/"+C(L[G[U]]);return O}var F=function(L){this.keyCache={},L&&this.replace(L)};F.prototype.replace=function(L){this._layerConfigs={},this._layers={},this.update(L,[])},F.prototype.update=function(L,O){for(var U=this,G=0,K=L;G<K.length;G+=1){var ue=K[G];this._layerConfigs[ue.id]=ue;var pe=this._layers[ue.id]=l.createStyleLayer(ue);pe._featureFilter=l.featureFilter(pe.filter),this.keyCache[ue.id]&&delete this.keyCache[ue.id]}for(var V=0,ee=O;V<ee.length;V+=1){var ye=ee[V];delete this.keyCache[ye],delete this._layerConfigs[ye],delete this._layers[ye]}this.familiesBySource={};for(var Ue=0,qe=function(Je,Qe){for(var Wt={},rt=0;rt<Je.length;rt++){var or=Qe&&Qe[Je[rt].id]||k(Je[rt]);Qe&&(Qe[Je[rt].id]=or);var kr=Wt[or];kr||(kr=Wt[or]=[]),kr.push(Je[rt])}var Rt=[];for(var hr in Wt)Rt.push(Wt[hr]);return Rt}(l.values(this._layerConfigs),this.keyCache);Ue<qe.length;Ue+=1){var Ae=qe[Ue].map(function(Je){return U._layers[Je.id]}),Ve=Ae[0];if(Ve.visibility!=="none"){var pt=Ve.source||"",st=this.familiesBySource[pt];st||(st=this.familiesBySource[pt]={});var ze=Ve.sourceLayer||"_geojsonTileLayer",tt=st[ze];tt||(tt=st[ze]=[]),tt.push(Ae)}}};var $=function(L){var O={},U=[];for(var G in L){var K=L[G],ue=O[G]={};for(var pe in K){var V=K[+pe];if(V&&V.bitmap.width!==0&&V.bitmap.height!==0){var ee={x:0,y:0,w:V.bitmap.width+2,h:V.bitmap.height+2};U.push(ee),ue[pe]={rect:ee,metrics:V.metrics}}}}var ye=l.potpack(U),Ue=new l.AlphaImage({width:ye.w||1,height:ye.h||1});for(var qe in L){var Ae=L[qe];for(var Ve in Ae){var pt=Ae[+Ve];if(pt&&pt.bitmap.width!==0&&pt.bitmap.height!==0){var st=O[qe][Ve].rect;l.AlphaImage.copy(pt.bitmap,Ue,{x:0,y:0},{x:st.x+1,y:st.y+1},pt.bitmap)}}}this.image=Ue,this.positions=O};l.register("GlyphAtlas",$);var me=function(L){this.tileID=new l.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId};function W(L,O,U){for(var G=new l.EvaluationParameters(O),K=0,ue=L;K<ue.length;K+=1)ue[K].recalculate(G,U)}function xe(L,O){var U=l.getArrayBuffer(L.request,function(G,K,ue,pe){G?O(G):K&&O(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(K)),rawData:K,cacheControl:ue,expires:pe})});return function(){U.cancel(),O()}}me.prototype.parse=function(L,O,U,G,K){var ue=this;this.status="parsing",this.data=L,this.collisionBoxArray=new l.CollisionBoxArray;var pe=new l.DictionaryCoder(Object.keys(L.layers).sort()),V=new l.FeatureIndex(this.tileID,this.promoteId);V.bucketLayerIDs=[];var ee,ye,Ue,qe,Ae={},Ve={featureIndex:V,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:U},pt=O.familiesBySource[this.source];for(var st in pt){var ze=L.layers[st];if(ze){ze.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+st+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var tt=pe.encode(st),Je=[],Qe=0;Qe<ze.length;Qe++){var Wt=ze.feature(Qe),rt=V.getId(Wt,st);Je.push({feature:Wt,id:rt,index:Qe,sourceLayerIndex:tt})}for(var or=0,kr=pt[st];or<kr.length;or+=1){var Rt=kr[or],hr=Rt[0];hr.minzoom&&this.zoom<Math.floor(hr.minzoom)||hr.maxzoom&&this.zoom>=hr.maxzoom||hr.visibility!=="none"&&(W(Rt,this.zoom,U),(Ae[hr.id]=hr.createBucket({index:V.bucketLayerIDs.length,layers:Rt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:tt,sourceID:this.source})).populate(Je,Ve,this.tileID.canonical),V.bucketLayerIDs.push(Rt.map(function(Sr){return Sr.id})))}}}var ur=l.mapObject(Ve.glyphDependencies,function(Sr){return Object.keys(Sr).map(Number)});Object.keys(ur).length?G.send("getGlyphs",{uid:this.uid,stacks:ur},function(Sr,Dt){ee||(ee=Sr,ye=Dt,tn.call(ue))}):ye={};var Nn=Object.keys(Ve.iconDependencies);Nn.length?G.send("getImages",{icons:Nn,source:this.source,tileID:this.tileID,type:"icons"},function(Sr,Dt){ee||(ee=Sr,Ue=Dt,tn.call(ue))}):Ue={};var vr=Object.keys(Ve.patternDependencies);function tn(){if(ee)return K(ee);if(ye&&Ue&&qe){var Sr=new $(ye),Dt=new l.ImageAtlas(Ue,qe);for(var fr in Ae){var ui=Ae[fr];ui instanceof l.SymbolBucket?(W(ui.layers,this.zoom,U),l.performSymbolLayout(ui,ye,Sr.positions,Ue,Dt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ui.hasPattern&&(ui instanceof l.LineBucket||ui instanceof l.FillBucket||ui instanceof l.FillExtrusionBucket)&&(W(ui.layers,this.zoom,U),ui.addFeatures(Ve,this.tileID.canonical,Dt.patternPositions))}this.status="done",K(null,{buckets:l.values(Ae).filter(function(Hi){return!Hi.isEmpty()}),featureIndex:V,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Sr.image,imageAtlas:Dt,glyphMap:this.returnDependencies?ye:null,iconMap:this.returnDependencies?Ue:null,glyphPositions:this.returnDependencies?Sr.positions:null})}}vr.length?G.send("getImages",{icons:vr,source:this.source,tileID:this.tileID,type:"patterns"},function(Sr,Dt){ee||(ee=Sr,qe=Dt,tn.call(ue))}):qe={},tn.call(this)};var Ce=function(L,O,U,G){this.actor=L,this.layerIndex=O,this.availableImages=U,this.loadVectorData=G||xe,this.loading={},this.loaded={}};Ce.prototype.loadTile=function(L,O){var U=this,G=L.uid;this.loading||(this.loading={});var K=!!(L&&L.request&&L.request.collectResourceTiming)&&new l.RequestPerformance(L.request),ue=this.loading[G]=new me(L);ue.abort=this.loadVectorData(L,function(pe,V){if(delete U.loading[G],pe||!V)return ue.status="done",U.loaded[G]=ue,O(pe);var ee=V.rawData,ye={};V.expires&&(ye.expires=V.expires),V.cacheControl&&(ye.cacheControl=V.cacheControl);var Ue={};if(K){var qe=K.finish();qe&&(Ue.resourceTiming=JSON.parse(JSON.stringify(qe)))}ue.vectorTile=V.vectorTile,ue.parse(V.vectorTile,U.layerIndex,U.availableImages,U.actor,function(Ae,Ve){if(Ae||!Ve)return O(Ae);O(null,l.extend({rawTileData:ee.slice(0)},Ve,ye,Ue))}),U.loaded=U.loaded||{},U.loaded[G]=ue})},Ce.prototype.reloadTile=function(L,O){var U=this,G=this.loaded,K=L.uid,ue=this;if(G&&G[K]){var pe=G[K];pe.showCollisionBoxes=L.showCollisionBoxes;var V=function(ee,ye){var Ue=pe.reloadCallback;Ue&&(delete pe.reloadCallback,pe.parse(pe.vectorTile,ue.layerIndex,U.availableImages,ue.actor,Ue)),O(ee,ye)};pe.status==="parsing"?pe.reloadCallback=V:pe.status==="done"&&(pe.vectorTile?pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,V):V())}},Ce.prototype.abortTile=function(L,O){var U=this.loading,G=L.uid;U&&U[G]&&U[G].abort&&(U[G].abort(),delete U[G]),O()},Ce.prototype.removeTile=function(L,O){var U=this.loaded,G=L.uid;U&&U[G]&&delete U[G],O()};var Oe=l.window.ImageBitmap,se=function(){this.loaded={}};function te(L,O){if(L.length!==0){ne(L[0],O);for(var U=1;U<L.length;U++)ne(L[U],!O)}}function ne(L,O){for(var U=0,G=0,K=L.length,ue=K-1;G<K;ue=G++)U+=(L[G][0]-L[ue][0])*(L[ue][1]+L[G][1]);U>=0!=!!O&&L.reverse()}se.prototype.loadTile=function(L,O){var U=L.uid,G=L.encoding,K=L.rawImageData,ue=Oe&&K instanceof Oe?this.getImageData(K):K,pe=new l.DEMData(U,ue,G);this.loaded=this.loaded||{},this.loaded[U]=pe,O(null,pe)},se.prototype.getImageData=function(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);var O=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:O.width,height:O.height},O.data)},se.prototype.removeTile=function(L){var O=this.loaded,U=L.uid;O&&O[U]&&delete O[U]};var be=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,Le=function(L){this._feature=L,this.extent=l.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))};Le.prototype.loadGeometry=function(){if(this._feature.type===1){for(var L=[],O=0,U=this._feature.geometry;O<U.length;O+=1){var G=U[O];L.push([new l.Point$1(G[0],G[1])])}return L}for(var K=[],ue=0,pe=this._feature.geometry;ue<pe.length;ue+=1){for(var V=[],ee=0,ye=pe[ue];ee<ye.length;ee+=1){var Ue=ye[ee];V.push(new l.Point$1(Ue[0],Ue[1]))}K.push(V)}return K},Le.prototype.toGeoJSON=function(L,O,U){return be.call(this,L,O,U)};var Se=function(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=L.length,this._features=L};Se.prototype.feature=function(L){return new Le(this._features[L])};var Ie=l.vectorTile.VectorTileFeature,je=at;function at(L,O){this.options=O||{},this.features=L,this.length=L.length}function Xe(L,O){this.id=typeof L.id=="number"?L.id:void 0,this.type=L.type,this.rawGeometry=L.type===1?[L.geometry]:L.geometry,this.properties=L.tags,this.extent=O||4096}at.prototype.feature=function(L){return new Xe(this.features[L],this.options.extent)},Xe.prototype.loadGeometry=function(){var L=this.rawGeometry;this.geometry=[];for(var O=0;O<L.length;O++){for(var U=L[O],G=[],K=0;K<U.length;K++)G.push(new l.Point$1(U[K][0],U[K][1]));this.geometry.push(G)}return this.geometry},Xe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var L=this.geometry,O=1/0,U=-1/0,G=1/0,K=-1/0,ue=0;ue<L.length;ue++)for(var pe=L[ue],V=0;V<pe.length;V++){var ee=pe[V];O=Math.min(O,ee.x),U=Math.max(U,ee.x),G=Math.min(G,ee.y),K=Math.max(K,ee.y)}return[O,G,U,K]},Xe.prototype.toGeoJSON=Ie.prototype.toGeoJSON;var _t=bt,Mt=je;function bt(L){var O=new l.pbf;return function(U,G){for(var K in U.layers)G.writeMessage(3,Ct,U.layers[K])}(L,O),O.finish()}function Ct(L,O){var U;O.writeVarintField(15,L.version||1),O.writeStringField(1,L.name||""),O.writeVarintField(5,L.extent||4096);var G={keys:[],values:[],keycache:{},valuecache:{}};for(U=0;U<L.length;U++)G.feature=L.feature(U),O.writeMessage(2,Ut,G);var K=G.keys;for(U=0;U<K.length;U++)O.writeStringField(3,K[U]);var ue=G.values;for(U=0;U<ue.length;U++)O.writeMessage(4,Bn,ue[U])}function Ut(L,O){var U=L.feature;U.id!==void 0&&O.writeVarintField(1,U.id),O.writeMessage(2,Cr,L),O.writeVarintField(3,U.type),O.writeMessage(4,Qt,U)}function Cr(L,O){var U=L.feature,G=L.keys,K=L.values,ue=L.keycache,pe=L.valuecache;for(var V in U.properties){var ee=ue[V];ee===void 0&&(G.push(V),ue[V]=ee=G.length-1),O.writeVarint(ee);var ye=U.properties[V],Ue=typeof ye;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(ye=JSON.stringify(ye));var qe=Ue+":"+ye,Ae=pe[qe];Ae===void 0&&(K.push(ye),pe[qe]=Ae=K.length-1),O.writeVarint(Ae)}}function Ir(L,O){return(O<<3)+(7&L)}function Fn(L){return L<<1^L>>31}function Qt(L,O){for(var U=L.loadGeometry(),G=L.type,K=0,ue=0,pe=U.length,V=0;V<pe;V++){var ee=U[V],ye=1;G===1&&(ye=ee.length),O.writeVarint(Ir(1,ye));for(var Ue=G===3?ee.length-1:ee.length,qe=0;qe<Ue;qe++){qe===1&&G!==1&&O.writeVarint(Ir(2,Ue-1));var Ae=ee[qe].x-K,Ve=ee[qe].y-ue;O.writeVarint(Fn(Ae)),O.writeVarint(Fn(Ve)),K+=Ae,ue+=Ve}G===3&&O.writeVarint(Ir(7,1))}}function Bn(L,O){var U=typeof L;U==="string"?O.writeStringField(1,L):U==="boolean"?O.writeBooleanField(7,L):U==="number"&&(L%1!=0?O.writeDoubleField(3,L):L<0?O.writeSVarintField(6,L):O.writeVarintField(5,L))}function Gt(L,O,U,G){Ye(L,U,G),Ye(O,2*U,2*G),Ye(O,2*U+1,2*G+1)}function Ye(L,O,U){var G=L[O];L[O]=L[U],L[U]=G}function zt(L,O,U,G){var K=L-U,ue=O-G;return K*K+ue*ue}_t.fromVectorTileJs=bt,_t.fromGeojsonVt=function(L,O){O=O||{};var U={};for(var G in L)U[G]=new je(L[G].features,O),U[G].name=G,U[G].version=O.version,U[G].extent=O.extent;return bt({layers:U})},_t.GeoJSONWrapper=Mt;var Xt=function(L){return L[0]},Rr=function(L){return L[1]},Gr=function(L,O,U,G,K){O===void 0&&(O=Xt),U===void 0&&(U=Rr),G===void 0&&(G=64),K===void 0&&(K=Float64Array),this.nodeSize=G,this.points=L;for(var ue=L.length<65536?Uint16Array:Uint32Array,pe=this.ids=new ue(L.length),V=this.coords=new K(2*L.length),ee=0;ee<L.length;ee++)pe[ee]=ee,V[2*ee]=O(L[ee]),V[2*ee+1]=U(L[ee]);(function ye(Ue,qe,Ae,Ve,pt,st){if(!(pt-Ve<=Ae)){var ze=Ve+pt>>1;(function tt(Je,Qe,Wt,rt,or,kr){for(;or>rt;){if(or-rt>600){var Rt=or-rt+1,hr=Wt-rt+1,ur=Math.log(Rt),Nn=.5*Math.exp(2*ur/3),vr=.5*Math.sqrt(ur*Nn*(Rt-Nn)/Rt)*(hr-Rt/2<0?-1:1);tt(Je,Qe,Wt,Math.max(rt,Math.floor(Wt-hr*Nn/Rt+vr)),Math.min(or,Math.floor(Wt+(Rt-hr)*Nn/Rt+vr)),kr)}var tn=Qe[2*Wt+kr],Sr=rt,Dt=or;for(Gt(Je,Qe,rt,Wt),Qe[2*or+kr]>tn&&Gt(Je,Qe,rt,or);Sr<Dt;){for(Gt(Je,Qe,Sr,Dt),Sr++,Dt--;Qe[2*Sr+kr]<tn;)Sr++;for(;Qe[2*Dt+kr]>tn;)Dt--}Qe[2*rt+kr]===tn?Gt(Je,Qe,rt,Dt):Gt(Je,Qe,++Dt,or),Dt<=Wt&&(rt=Dt+1),Wt<=Dt&&(or=Dt-1)}})(Ue,qe,ze,Ve,pt,st%2),ye(Ue,qe,Ae,Ve,ze-1,st+1),ye(Ue,qe,Ae,ze+1,pt,st+1)}})(pe,V,G,0,pe.length-1,0)};Gr.prototype.range=function(L,O,U,G){return function(K,ue,pe,V,ee,ye,Ue){for(var qe,Ae,Ve=[0,K.length-1,0],pt=[];Ve.length;){var st=Ve.pop(),ze=Ve.pop(),tt=Ve.pop();if(ze-tt<=Ue)for(var Je=tt;Je<=ze;Je++)Ae=ue[2*Je+1],(qe=ue[2*Je])>=pe&&qe<=ee&&Ae>=V&&Ae<=ye&&pt.push(K[Je]);else{var Qe=Math.floor((tt+ze)/2);Ae=ue[2*Qe+1],(qe=ue[2*Qe])>=pe&&qe<=ee&&Ae>=V&&Ae<=ye&&pt.push(K[Qe]);var Wt=(st+1)%2;(st===0?pe<=qe:V<=Ae)&&(Ve.push(tt),Ve.push(Qe-1),Ve.push(Wt)),(st===0?ee>=qe:ye>=Ae)&&(Ve.push(Qe+1),Ve.push(ze),Ve.push(Wt))}}return pt}(this.ids,this.coords,L,O,U,G,this.nodeSize)},Gr.prototype.within=function(L,O,U){return function(G,K,ue,pe,V,ee){for(var ye=[0,G.length-1,0],Ue=[],qe=V*V;ye.length;){var Ae=ye.pop(),Ve=ye.pop(),pt=ye.pop();if(Ve-pt<=ee)for(var st=pt;st<=Ve;st++)zt(K[2*st],K[2*st+1],ue,pe)<=qe&&Ue.push(G[st]);else{var ze=Math.floor((pt+Ve)/2),tt=K[2*ze],Je=K[2*ze+1];zt(tt,Je,ue,pe)<=qe&&Ue.push(G[ze]);var Qe=(Ae+1)%2;(Ae===0?ue-V<=tt:pe-V<=Je)&&(ye.push(pt),ye.push(ze-1),ye.push(Qe)),(Ae===0?ue+V>=tt:pe+V>=Je)&&(ye.push(ze+1),ye.push(Ve),ye.push(Qe))}}return Ue}(this.ids,this.coords,L,O,U,this.nodeSize)};var fo={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(L){return L}},en=function(L){this.options=Vi(Object.create(fo),L),this.trees=new Array(this.options.maxZoom+1)};function si(L,O,U,G,K){return{x:L,y:O,zoom:1/0,id:U,parentId:-1,numPoints:G,properties:K}}function cr(L,O){var U=L.geometry.coordinates,G=U[1];return{x:Hn(U[0]),y:er(G),zoom:1/0,index:O,parentId:-1}}function Io(L){return{type:"Feature",id:L.id,properties:is(L),geometry:{type:"Point",coordinates:[(G=L.x,360*(G-.5)),(O=L.y,U=(180-360*O)*Math.PI/180,360*Math.atan(Math.exp(U))/Math.PI-90)]}};var O,U,G}function is(L){var O=L.numPoints,U=O>=1e4?Math.round(O/1e3)+"k":O>=1e3?Math.round(O/100)/10+"k":O;return Vi(Vi({},L.properties),{cluster:!0,cluster_id:L.id,point_count:O,point_count_abbreviated:U})}function Hn(L){return L/360+.5}function er(L){var O=Math.sin(L*Math.PI/180),U=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return U<0?0:U>1?1:U}function Vi(L,O){for(var U in O)L[U]=O[U];return L}function on(L){return L.x}function An(L){return L.y}function Ju(L,O,U,G,K,ue){var pe=K-U,V=ue-G;if(pe!==0||V!==0){var ee=((L-U)*pe+(O-G)*V)/(pe*pe+V*V);ee>1?(U=K,G=ue):ee>0&&(U+=pe*ee,G+=V*ee)}return(pe=L-U)*pe+(V=O-G)*V}function qi(L,O,U,G){var K={id:L===void 0?null:L,type:O,geometry:U,tags:G,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ue){var pe=ue.geometry,V=ue.type;if(V==="Point"||V==="MultiPoint"||V==="LineString")zs(ue,pe);else if(V==="Polygon"||V==="MultiLineString")for(var ee=0;ee<pe.length;ee++)zs(ue,pe[ee]);else if(V==="MultiPolygon")for(ee=0;ee<pe.length;ee++)for(var ye=0;ye<pe[ee].length;ye++)zs(ue,pe[ee][ye])}(K),K}function zs(L,O){for(var U=0;U<O.length;U+=3)L.minX=Math.min(L.minX,O[U]),L.minY=Math.min(L.minY,O[U+1]),L.maxX=Math.max(L.maxX,O[U]),L.maxY=Math.max(L.maxY,O[U+1])}function cn(L,O,U,G){if(O.geometry){var K=O.geometry.coordinates,ue=O.geometry.type,pe=Math.pow(U.tolerance/((1<<U.maxZoom)*U.extent),2),V=[],ee=O.id;if(U.promoteId?ee=O.properties[U.promoteId]:U.generateId&&(ee=G||0),ue==="Point")La(K,V);else if(ue==="MultiPoint")for(var ye=0;ye<K.length;ye++)La(K[ye],V);else if(ue==="LineString")ko(K,V,pe,!1);else if(ue==="MultiLineString"){if(U.lineMetrics){for(ye=0;ye<K.length;ye++)ko(K[ye],V=[],pe,!1),L.push(qi(ee,"LineString",V,O.properties));return}Ci(K,V,pe,!1)}else if(ue==="Polygon")Ci(K,V,pe,!0);else{if(ue!=="MultiPolygon"){if(ue==="GeometryCollection"){for(ye=0;ye<O.geometry.geometries.length;ye++)cn(L,{id:ee,geometry:O.geometry.geometries[ye],properties:O.properties},U,G);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ye=0;ye<K.length;ye++){var Ue=[];Ci(K[ye],Ue,pe,!0),V.push(Ue)}}L.push(qi(ee,ue,V,O.properties))}}function La(L,O){O.push(mi(L[0])),O.push(pa(L[1])),O.push(0)}function ko(L,O,U,G){for(var K,ue,pe=0,V=0;V<L.length;V++){var ee=mi(L[V][0]),ye=pa(L[V][1]);O.push(ee),O.push(ye),O.push(0),V>0&&(pe+=G?(K*ye-ee*ue)/2:Math.sqrt(Math.pow(ee-K,2)+Math.pow(ye-ue,2))),K=ee,ue=ye}var Ue=O.length-3;O[2]=1,function qe(Ae,Ve,pt,st){for(var ze,tt=st,Je=pt-Ve>>1,Qe=pt-Ve,Wt=Ae[Ve],rt=Ae[Ve+1],or=Ae[pt],kr=Ae[pt+1],Rt=Ve+3;Rt<pt;Rt+=3){var hr=Ju(Ae[Rt],Ae[Rt+1],Wt,rt,or,kr);if(hr>tt)ze=Rt,tt=hr;else if(hr===tt){var ur=Math.abs(Rt-Je);ur<Qe&&(ze=Rt,Qe=ur)}}tt>st&&(ze-Ve>3&&qe(Ae,Ve,ze,st),Ae[ze+2]=tt,pt-ze>3&&qe(Ae,ze,pt,st))}(O,0,Ue,U),O[Ue+2]=1,O.size=Math.abs(pe),O.start=0,O.end=O.size}function Ci(L,O,U,G){for(var K=0;K<L.length;K++){var ue=[];ko(L[K],ue,U,G),O.push(ue)}}function mi(L){return L/360+.5}function pa(L){var O=Math.sin(L*Math.PI/180),U=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return U<0?0:U>1?1:U}function Zi(L,O,U,G,K,ue,pe,V){if(G/=O,ue>=(U/=O)&&pe<G)return L;if(pe<U||ue>=G)return null;for(var ee=[],ye=0;ye<L.length;ye++){var Ue=L[ye],qe=Ue.geometry,Ae=Ue.type,Ve=K===0?Ue.minX:Ue.minY,pt=K===0?Ue.maxX:Ue.maxY;if(Ve>=U&&pt<G)ee.push(Ue);else if(!(pt<U||Ve>=G)){var st=[];if(Ae==="Point"||Ae==="MultiPoint")Ls(qe,st,U,G,K);else if(Ae==="LineString")os(qe,st,U,G,K,!1,V.lineMetrics);else if(Ae==="MultiLineString")Mn(qe,st,U,G,K,!1);else if(Ae==="Polygon")Mn(qe,st,U,G,K,!0);else if(Ae==="MultiPolygon")for(var ze=0;ze<qe.length;ze++){var tt=[];Mn(qe[ze],tt,U,G,K,!0),tt.length&&st.push(tt)}if(st.length){if(V.lineMetrics&&Ae==="LineString"){for(ze=0;ze<st.length;ze++)ee.push(qi(Ue.id,Ae,st[ze],Ue.tags));continue}Ae!=="LineString"&&Ae!=="MultiLineString"||(st.length===1?(Ae="LineString",st=st[0]):Ae="MultiLineString"),Ae!=="Point"&&Ae!=="MultiPoint"||(Ae=st.length===3?"Point":"MultiPoint"),ee.push(qi(Ue.id,Ae,st,Ue.tags))}}}return ee.length?ee:null}function Ls(L,O,U,G,K){for(var ue=0;ue<L.length;ue+=3){var pe=L[ue+K];pe>=U&&pe<=G&&(O.push(L[ue]),O.push(L[ue+1]),O.push(L[ue+2]))}}function os(L,O,U,G,K,ue,pe){for(var V,ee,ye=Da(L),Ue=K===0?Wi:Xn,qe=L.start,Ae=0;Ae<L.length-3;Ae+=3){var Ve=L[Ae],pt=L[Ae+1],st=L[Ae+2],ze=L[Ae+3],tt=L[Ae+4],Je=K===0?Ve:pt,Qe=K===0?ze:tt,Wt=!1;pe&&(V=Math.sqrt(Math.pow(Ve-ze,2)+Math.pow(pt-tt,2))),Je<U?Qe>U&&(ee=Ue(ye,Ve,pt,ze,tt,U),pe&&(ye.start=qe+V*ee)):Je>G?Qe<G&&(ee=Ue(ye,Ve,pt,ze,tt,G),pe&&(ye.start=qe+V*ee)):Gi(ye,Ve,pt,st),Qe<U&&Je>=U&&(ee=Ue(ye,Ve,pt,ze,tt,U),Wt=!0),Qe>G&&Je<=G&&(ee=Ue(ye,Ve,pt,ze,tt,G),Wt=!0),!ue&&Wt&&(pe&&(ye.end=qe+V*ee),O.push(ye),ye=Da(L)),pe&&(qe+=V)}var rt=L.length-3;Ve=L[rt],pt=L[rt+1],st=L[rt+2],(Je=K===0?Ve:pt)>=U&&Je<=G&&Gi(ye,Ve,pt,st),rt=ye.length-3,ue&&rt>=3&&(ye[rt]!==ye[0]||ye[rt+1]!==ye[1])&&Gi(ye,ye[0],ye[1],ye[2]),ye.length&&O.push(ye)}function Da(L){var O=[];return O.size=L.size,O.start=L.start,O.end=L.end,O}function Mn(L,O,U,G,K,ue){for(var pe=0;pe<L.length;pe++)os(L[pe],O,U,G,K,ue,!1)}function Gi(L,O,U,G){L.push(O),L.push(U),L.push(G)}function Wi(L,O,U,G,K,ue){var pe=(ue-O)/(G-O);return L.push(ue),L.push(U+(K-U)*pe),L.push(1),pe}function Xn(L,O,U,G,K,ue){var pe=(ue-U)/(K-U);return L.push(O+(G-O)*pe),L.push(ue),L.push(1),pe}function Ds(L,O){for(var U=[],G=0;G<L.length;G++){var K,ue=L[G],pe=ue.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")K=Ao(ue.geometry,O);else if(pe==="MultiLineString"||pe==="Polygon"){K=[];for(var V=0;V<ue.geometry.length;V++)K.push(Ao(ue.geometry[V],O))}else if(pe==="MultiPolygon")for(K=[],V=0;V<ue.geometry.length;V++){for(var ee=[],ye=0;ye<ue.geometry[V].length;ye++)ee.push(Ao(ue.geometry[V][ye],O));K.push(ee)}U.push(qi(ue.id,pe,K,ue.tags))}return U}function Ao(L,O){var U=[];U.size=L.size,L.start!==void 0&&(U.start=L.start,U.end=L.end);for(var G=0;G<L.length;G+=3)U.push(L[G]+O,L[G+1],L[G+2]);return U}function Un(L,O){if(L.transformed)return L;var U,G,K,ue=1<<L.z,pe=L.x,V=L.y;for(U=0;U<L.features.length;U++){var ee=L.features[U],ye=ee.geometry,Ue=ee.type;if(ee.geometry=[],Ue===1)for(G=0;G<ye.length;G+=2)ee.geometry.push(tr(ye[G],ye[G+1],O,ue,pe,V));else for(G=0;G<ye.length;G++){var qe=[];for(K=0;K<ye[G].length;K+=2)qe.push(tr(ye[G][K],ye[G][K+1],O,ue,pe,V));ee.geometry.push(qe)}}return L.transformed=!0,L}function tr(L,O,U,G,K,ue){return[Math.round(U*(L*G-K)),Math.round(U*(O*G-ue))]}function Os(L,O,U,G,K){for(var ue=O===K.maxZoom?0:K.tolerance/((1<<O)*K.extent),pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:U,y:G,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},V=0;V<L.length;V++){pe.numFeatures++,cu(pe,L[V],ue,K);var ee=L[V].minX,ye=L[V].minY,Ue=L[V].maxX,qe=L[V].maxY;ee<pe.minX&&(pe.minX=ee),ye<pe.minY&&(pe.minY=ye),Ue>pe.maxX&&(pe.maxX=Ue),qe>pe.maxY&&(pe.maxY=qe)}return pe}function cu(L,O,U,G){var K=O.geometry,ue=O.type,pe=[];if(ue==="Point"||ue==="MultiPoint")for(var V=0;V<K.length;V+=3)pe.push(K[V]),pe.push(K[V+1]),L.numPoints++,L.numSimplified++;else if(ue==="LineString")Oa(pe,K,L,U,!1,!1);else if(ue==="MultiLineString"||ue==="Polygon")for(V=0;V<K.length;V++)Oa(pe,K[V],L,U,ue==="Polygon",V===0);else if(ue==="MultiPolygon")for(var ee=0;ee<K.length;ee++){var ye=K[ee];for(V=0;V<ye.length;V++)Oa(pe,ye[V],L,U,!0,V===0)}if(pe.length){var Ue=O.tags||null;if(ue==="LineString"&&G.lineMetrics){for(var qe in Ue={},O.tags)Ue[qe]=O.tags[qe];Ue.mapbox_clip_start=K.start/K.size,Ue.mapbox_clip_end=K.end/K.size}var Ae={geometry:pe,type:ue==="Polygon"||ue==="MultiPolygon"?3:ue==="LineString"||ue==="MultiLineString"?2:1,tags:Ue};O.id!==null&&(Ae.id=O.id),L.features.push(Ae)}}function Oa(L,O,U,G,K,ue){var pe=G*G;if(G>0&&O.size<(K?pe:G))U.numPoints+=O.length/3;else{for(var V=[],ee=0;ee<O.length;ee+=3)(G===0||O[ee+2]>pe)&&(U.numSimplified++,V.push(O[ee]),V.push(O[ee+1])),U.numPoints++;K&&function(ye,Ue){for(var qe=0,Ae=0,Ve=ye.length,pt=Ve-2;Ae<Ve;pt=Ae,Ae+=2)qe+=(ye[Ae]-ye[pt])*(ye[Ae+1]+ye[pt+1]);if(qe>0===Ue)for(Ae=0,Ve=ye.length;Ae<Ve/2;Ae+=2){var st=ye[Ae],ze=ye[Ae+1];ye[Ae]=ye[Ve-2-Ae],ye[Ae+1]=ye[Ve-1-Ae],ye[Ve-2-Ae]=st,ye[Ve-1-Ae]=ze}}(V,ue),L.push(V)}}function $i(L,O){var U=(O=this.options=function(K,ue){for(var pe in ue)K[pe]=ue[pe];return K}(Object.create(this.options),O)).debug;if(U&&console.time("preprocess data"),O.maxZoom<0||O.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(O.promoteId&&O.generateId)throw new Error("promoteId and generateId cannot be used together.");var G=function(K,ue){var pe=[];if(K.type==="FeatureCollection")for(var V=0;V<K.features.length;V++)cn(pe,K.features[V],ue,V);else cn(pe,K.type==="Feature"?K:{geometry:K},ue);return pe}(L,O);this.tiles={},this.tileCoords=[],U&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",O.indexMaxZoom,O.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(G=function(K,ue){var pe=ue.buffer/ue.extent,V=K,ee=Zi(K,1,-1-pe,pe,0,-1,2,ue),ye=Zi(K,1,1-pe,2+pe,0,-1,2,ue);return(ee||ye)&&(V=Zi(K,1,-pe,1+pe,0,-1,2,ue)||[],ee&&(V=Ds(ee,1).concat(V)),ye&&(V=V.concat(Ds(ye,-1)))),V}(G,O)).length&&this.splitTile(G,0,0,0),U&&(G.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ho(L,O,U){return 32*((1<<L)*U+O)+L}function Mr(L,O){var U=L.tileID.canonical;if(!this._geoJSONIndex)return O(null,null);var G=this._geoJSONIndex.getTile(U.z,U.x,U.y);if(!G)return O(null,null);var K=new Se(G.features),ue=_t(K);ue.byteOffset===0&&ue.byteLength===ue.buffer.byteLength||(ue=new Uint8Array(ue)),O(null,{vectorTile:K,rawData:ue.buffer})}en.prototype.load=function(L){var O=this.options,U=O.log,G=O.minZoom,K=O.maxZoom,ue=O.nodeSize;U&&console.time("total time");var pe="prepare "+L.length+" points";U&&console.time(pe),this.points=L;for(var V=[],ee=0;ee<L.length;ee++)L[ee].geometry&&V.push(cr(L[ee],ee));this.trees[K+1]=new Gr(V,on,An,ue,Float32Array),U&&console.timeEnd(pe);for(var ye=K;ye>=G;ye--){var Ue=+Date.now();V=this._cluster(V,ye),this.trees[ye]=new Gr(V,on,An,ue,Float32Array),U&&console.log("z%d: %d clusters in %dms",ye,V.length,+Date.now()-Ue)}return U&&console.timeEnd("total time"),this},en.prototype.getClusters=function(L,O){var U=((L[0]+180)%360+360)%360-180,G=Math.max(-90,Math.min(90,L[1])),K=L[2]===180?180:((L[2]+180)%360+360)%360-180,ue=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)U=-180,K=180;else if(U>K){var pe=this.getClusters([U,G,180,ue],O),V=this.getClusters([-180,G,K,ue],O);return pe.concat(V)}for(var ee=this.trees[this._limitZoom(O)],ye=[],Ue=0,qe=ee.range(Hn(U),er(ue),Hn(K),er(G));Ue<qe.length;Ue+=1){var Ae=ee.points[qe[Ue]];ye.push(Ae.numPoints?Io(Ae):this.points[Ae.index])}return ye},en.prototype.getChildren=function(L){var O=this._getOriginId(L),U=this._getOriginZoom(L),G="No cluster with the specified id.",K=this.trees[U];if(!K)throw new Error(G);var ue=K.points[O];if(!ue)throw new Error(G);for(var pe=this.options.radius/(this.options.extent*Math.pow(2,U-1)),V=[],ee=0,ye=K.within(ue.x,ue.y,pe);ee<ye.length;ee+=1){var Ue=K.points[ye[ee]];Ue.parentId===L&&V.push(Ue.numPoints?Io(Ue):this.points[Ue.index])}if(V.length===0)throw new Error(G);return V},en.prototype.getLeaves=function(L,O,U){var G=[];return this._appendLeaves(G,L,O=O||10,U=U||0,0),G},en.prototype.getTile=function(L,O,U){var G=this.trees[this._limitZoom(L)],K=Math.pow(2,L),ue=this.options,pe=ue.radius/ue.extent,V=(U-pe)/K,ee=(U+1+pe)/K,ye={features:[]};return this._addTileFeatures(G.range((O-pe)/K,V,(O+1+pe)/K,ee),G.points,O,U,K,ye),O===0&&this._addTileFeatures(G.range(1-pe/K,V,1,ee),G.points,K,U,K,ye),O===K-1&&this._addTileFeatures(G.range(0,V,pe/K,ee),G.points,-1,U,K,ye),ye.features.length?ye:null},en.prototype.getClusterExpansionZoom=function(L){for(var O=this._getOriginZoom(L)-1;O<=this.options.maxZoom;){var U=this.getChildren(L);if(O++,U.length!==1)break;L=U[0].properties.cluster_id}return O},en.prototype._appendLeaves=function(L,O,U,G,K){for(var ue=0,pe=this.getChildren(O);ue<pe.length;ue+=1){var V=pe[ue],ee=V.properties;if(ee&&ee.cluster?K+ee.point_count<=G?K+=ee.point_count:K=this._appendLeaves(L,ee.cluster_id,U,G,K):K<G?K++:L.push(V),L.length===U)break}return K},en.prototype._addTileFeatures=function(L,O,U,G,K,ue){for(var pe=0,V=L;pe<V.length;pe+=1){var ee=O[V[pe]],ye=ee.numPoints,Ue={type:1,geometry:[[Math.round(this.options.extent*(ee.x*K-U)),Math.round(this.options.extent*(ee.y*K-G))]],tags:ye?is(ee):this.points[ee.index].properties},qe=void 0;ye?qe=ee.id:this.options.generateId?qe=ee.index:this.points[ee.index].id&&(qe=this.points[ee.index].id),qe!==void 0&&(Ue.id=qe),ue.features.push(Ue)}},en.prototype._limitZoom=function(L){return Math.max(this.options.minZoom,Math.min(+L,this.options.maxZoom+1))},en.prototype._cluster=function(L,O){for(var U=[],G=this.options,K=G.reduce,ue=G.minPoints,pe=G.radius/(G.extent*Math.pow(2,O)),V=0;V<L.length;V++){var ee=L[V];if(!(ee.zoom<=O)){ee.zoom=O;for(var ye=this.trees[O+1],Ue=ye.within(ee.x,ee.y,pe),qe=ee.numPoints||1,Ae=qe,Ve=0,pt=Ue;Ve<pt.length;Ve+=1){var st=ye.points[pt[Ve]];st.zoom>O&&(Ae+=st.numPoints||1)}if(Ae>=ue){for(var ze=ee.x*qe,tt=ee.y*qe,Je=K&&qe>1?this._map(ee,!0):null,Qe=(V<<5)+(O+1)+this.points.length,Wt=0,rt=Ue;Wt<rt.length;Wt+=1){var or=ye.points[rt[Wt]];if(!(or.zoom<=O)){or.zoom=O;var kr=or.numPoints||1;ze+=or.x*kr,tt+=or.y*kr,or.parentId=Qe,K&&(Je||(Je=this._map(ee,!0)),K(Je,this._map(or)))}}ee.parentId=Qe,U.push(si(ze/Ae,tt/Ae,Qe,Ae,Je))}else if(U.push(ee),Ae>1)for(var Rt=0,hr=Ue;Rt<hr.length;Rt+=1){var ur=ye.points[hr[Rt]];ur.zoom<=O||(ur.zoom=O,U.push(ur))}}}return U},en.prototype._getOriginId=function(L){return L-this.points.length>>5},en.prototype._getOriginZoom=function(L){return(L-this.points.length)%32},en.prototype._map=function(L,O){if(L.numPoints)return O?Vi({},L.properties):L.properties;var U=this.points[L.index].properties,G=this.options.map(U);return O&&G===U?Vi({},G):G},$i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$i.prototype.splitTile=function(L,O,U,G,K,ue,pe){for(var V=[L,O,U,G],ee=this.options,ye=ee.debug;V.length;){G=V.pop(),U=V.pop(),O=V.pop(),L=V.pop();var Ue=1<<O,qe=Ho(O,U,G),Ae=this.tiles[qe];if(!Ae&&(ye>1&&console.time("creation"),Ae=this.tiles[qe]=Os(L,O,U,G,ee),this.tileCoords.push({z:O,x:U,y:G}),ye)){ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",O,U,G,Ae.numFeatures,Ae.numPoints,Ae.numSimplified),console.timeEnd("creation"));var Ve="z"+O;this.stats[Ve]=(this.stats[Ve]||0)+1,this.total++}if(Ae.source=L,K){if(O===ee.maxZoom||O===K)continue;var pt=1<<K-O;if(U!==Math.floor(ue/pt)||G!==Math.floor(pe/pt))continue}else if(O===ee.indexMaxZoom||Ae.numPoints<=ee.indexMaxPoints)continue;if(Ae.source=null,L.length!==0){ye>1&&console.time("clipping");var st,ze,tt,Je,Qe,Wt,rt=.5*ee.buffer/ee.extent,or=.5-rt,kr=.5+rt,Rt=1+rt;st=ze=tt=Je=null,Qe=Zi(L,Ue,U-rt,U+kr,0,Ae.minX,Ae.maxX,ee),Wt=Zi(L,Ue,U+or,U+Rt,0,Ae.minX,Ae.maxX,ee),L=null,Qe&&(st=Zi(Qe,Ue,G-rt,G+kr,1,Ae.minY,Ae.maxY,ee),ze=Zi(Qe,Ue,G+or,G+Rt,1,Ae.minY,Ae.maxY,ee),Qe=null),Wt&&(tt=Zi(Wt,Ue,G-rt,G+kr,1,Ae.minY,Ae.maxY,ee),Je=Zi(Wt,Ue,G+or,G+Rt,1,Ae.minY,Ae.maxY,ee),Wt=null),ye>1&&console.timeEnd("clipping"),V.push(st||[],O+1,2*U,2*G),V.push(ze||[],O+1,2*U,2*G+1),V.push(tt||[],O+1,2*U+1,2*G),V.push(Je||[],O+1,2*U+1,2*G+1)}}},$i.prototype.getTile=function(L,O,U){var G=this.options,K=G.extent,ue=G.debug;if(L<0||L>24)return null;var pe=1<<L,V=Ho(L,O=(O%pe+pe)%pe,U);if(this.tiles[V])return Un(this.tiles[V],K);ue>1&&console.log("drilling down to z%d-%d-%d",L,O,U);for(var ee,ye=L,Ue=O,qe=U;!ee&&ye>0;)ye--,Ue=Math.floor(Ue/2),qe=Math.floor(qe/2),ee=this.tiles[Ho(ye,Ue,qe)];return ee&&ee.source?(ue>1&&console.log("found parent tile z%d-%d-%d",ye,Ue,qe),ue>1&&console.time("drilling down"),this.splitTile(ee.source,ye,Ue,qe,L,O,U),ue>1&&console.timeEnd("drilling down"),this.tiles[V]?Un(this.tiles[V],K):null):null};var as=function(L){function O(U,G,K,ue){L.call(this,U,G,K,Mr),ue&&(this.loadGeoJSON=ue)}return L&&(O.__proto__=L),(O.prototype=Object.create(L&&L.prototype)).constructor=O,O.prototype.loadData=function(U,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=G,this._pendingLoadDataParams=U,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},O.prototype._loadData=function(){var U=this;if(this._pendingCallback&&this._pendingLoadDataParams){var G=this._pendingCallback,K=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ue=!!(K&&K.request&&K.request.collectResourceTiming)&&new l.RequestPerformance(K.request);this.loadGeoJSON(K,function(pe,V){if(pe||!V)return G(pe);if(typeof V!="object")return G(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."));(function Ae(Ve,pt){var st,ze=Ve&&Ve.type;if(ze==="FeatureCollection")for(st=0;st<Ve.features.length;st++)Ae(Ve.features[st],pt);else if(ze==="GeometryCollection")for(st=0;st<Ve.geometries.length;st++)Ae(Ve.geometries[st],pt);else if(ze==="Feature")Ae(Ve.geometry,pt);else if(ze==="Polygon")te(Ve.coordinates,pt);else if(ze==="MultiPolygon")for(st=0;st<Ve.coordinates.length;st++)te(Ve.coordinates[st],pt);return Ve})(V,!0);try{if(K.filter){var ee=l.createExpression(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ee.result==="error")throw new Error(ee.value.map(function(Ae){return Ae.key+": "+Ae.message}).join(", "));var ye=V.features.filter(function(Ae){return ee.value.evaluate({zoom:0},Ae)});V={type:"FeatureCollection",features:ye}}U._geoJSONIndex=K.cluster?new en(function(Ae){var Ve=Ae.superclusterOptions,pt=Ae.clusterProperties;if(!pt||!Ve)return Ve;for(var st={},ze={},tt={accumulated:null,zoom:0},Je={properties:null},Qe=Object.keys(pt),Wt=0,rt=Qe;Wt<rt.length;Wt+=1){var or=rt[Wt],kr=pt[or],Rt=kr[0],hr=l.createExpression(kr[1]),ur=l.createExpression(typeof Rt=="string"?[Rt,["accumulated"],["get",or]]:Rt);st[or]=hr.value,ze[or]=ur.value}return Ve.map=function(Nn){Je.properties=Nn;for(var vr={},tn=0,Sr=Qe;tn<Sr.length;tn+=1){var Dt=Sr[tn];vr[Dt]=st[Dt].evaluate(tt,Je)}return vr},Ve.reduce=function(Nn,vr){Je.properties=vr;for(var tn=0,Sr=Qe;tn<Sr.length;tn+=1){var Dt=Sr[tn];tt.accumulated=Nn[Dt],Nn[Dt]=ze[Dt].evaluate(tt,Je)}},Ve}(K)).load(V.features):function(Ae,Ve){return new $i(Ae,Ve)}(V,K.geojsonVtOptions)}catch(Ae){return G(Ae)}U.loaded={};var Ue={};if(ue){var qe=ue.finish();qe&&(Ue.resourceTiming={},Ue.resourceTiming[K.source]=JSON.parse(JSON.stringify(qe)))}G(null,Ue)})}},O.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},O.prototype.reloadTile=function(U,G){var K=this.loaded;return K&&K[U.uid]?L.prototype.reloadTile.call(this,U,G):this.loadTile(U,G)},O.prototype.loadGeoJSON=function(U,G){if(U.request)l.getJSON(U.request,G);else{if(typeof U.data!="string")return G(new Error("Input data given to '"+U.source+"' is not a valid GeoJSON object."));try{return G(null,JSON.parse(U.data))}catch{return G(new Error("Input data given to '"+U.source+"' is not a valid GeoJSON object."))}}},O.prototype.removeSource=function(U,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),G()},O.prototype.getClusterExpansionZoom=function(U,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(U.clusterId))}catch(K){G(K)}},O.prototype.getClusterChildren=function(U,G){try{G(null,this._geoJSONIndex.getChildren(U.clusterId))}catch(K){G(K)}},O.prototype.getClusterLeaves=function(U,G){try{G(null,this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset))}catch(K){G(K)}},O}(Ce),zr=function(L){var O=this;this.self=L,this.actor=new l.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Ce,geojson:as},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(U,G){if(O.workerSourceTypes[U])throw new Error('Worker source with name "'+U+'" already registered.');O.workerSourceTypes[U]=G},this.self.registerRTLTextPlugin=function(U){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=U.applyArabicShaping,l.plugin.processBidirectionalText=U.processBidirectionalText,l.plugin.processStyledBidirectionalText=U.processStyledBidirectionalText}};return zr.prototype.setReferrer=function(L,O){this.referrer=O},zr.prototype.setImages=function(L,O,U){for(var G in this.availableImages[L]=O,this.workerSources[L]){var K=this.workerSources[L][G];for(var ue in K)K[ue].availableImages=O}U()},zr.prototype.setLayers=function(L,O,U){this.getLayerIndex(L).replace(O),U()},zr.prototype.updateLayers=function(L,O,U){this.getLayerIndex(L).update(O.layers,O.removedIds),U()},zr.prototype.loadTile=function(L,O,U){this.getWorkerSource(L,O.type,O.source).loadTile(O,U)},zr.prototype.loadDEMTile=function(L,O,U){this.getDEMWorkerSource(L,O.source).loadTile(O,U)},zr.prototype.reloadTile=function(L,O,U){this.getWorkerSource(L,O.type,O.source).reloadTile(O,U)},zr.prototype.abortTile=function(L,O,U){this.getWorkerSource(L,O.type,O.source).abortTile(O,U)},zr.prototype.removeTile=function(L,O,U){this.getWorkerSource(L,O.type,O.source).removeTile(O,U)},zr.prototype.removeDEMTile=function(L,O){this.getDEMWorkerSource(L,O.source).removeTile(O)},zr.prototype.removeSource=function(L,O,U){if(this.workerSources[L]&&this.workerSources[L][O.type]&&this.workerSources[L][O.type][O.source]){var G=this.workerSources[L][O.type][O.source];delete this.workerSources[L][O.type][O.source],G.removeSource!==void 0?G.removeSource(O,U):U()}},zr.prototype.loadWorkerSource=function(L,O,U){try{this.self.importScripts(O.url),U()}catch(G){U(G.toString())}},zr.prototype.syncRTLPluginState=function(L,O,U){try{l.plugin.setState(O);var G=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&G!=null){this.self.importScripts(G);var K=l.plugin.isParsed();U(K?void 0:new Error("RTL Text Plugin failed to import scripts from "+G),K)}}catch(ue){U(ue.toString())}},zr.prototype.getAvailableImages=function(L){var O=this.availableImages[L];return O||(O=[]),O},zr.prototype.getLayerIndex=function(L){var O=this.layerIndexes[L];return O||(O=this.layerIndexes[L]=new F),O},zr.prototype.getWorkerSource=function(L,O,U){var G=this;return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][O]||(this.workerSources[L][O]={}),this.workerSources[L][O][U]||(this.workerSources[L][O][U]=new this.workerSourceTypes[O]({send:function(K,ue,pe){G.actor.send(K,ue,pe,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][O][U]},zr.prototype.getDEMWorkerSource=function(L,O){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][O]||(this.demWorkerSources[L][O]=new se),this.demWorkerSources[L][O]},zr.prototype.enforceCacheSizeLimit=function(L,O){l.enforceCacheSizeLimit(O)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new zr(self)),zr}),x(["./shared"],function(l){var C=l.createCommonjsModule(function(o){function u(m){return!a(m)}function a(m){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,E,A=new Blob([""],{type:"text/javascript"}),D=URL.createObjectURL(A);try{E=new Worker(D),b=!0}catch{b=!1}return E&&E.terminate(),URL.revokeObjectURL(D),b}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var b=document.createElement("canvas");b.width=b.height=1;var E=b.getContext("2d");if(!E)return!1;var A=E.getImageData(0,0,1,1);return A&&A.width===b.width}()?(p[g=m&&m.failIfMajorPerformanceCaveat]===void 0&&(p[g]=function(b){var E=function(D){var j=document.createElement("canvas"),q=Object.create(u.webGLContextAttributes);return q.failIfMajorPerformanceCaveat=D,j.probablySupportsContext?j.probablySupportsContext("webgl",q)||j.probablySupportsContext("experimental-webgl",q):j.supportsContext?j.supportsContext("webgl",q)||j.supportsContext("experimental-webgl",q):j.getContext("webgl",q)||j.getContext("experimental-webgl",q)}(b);if(!E)return!1;var A=E.createShader(E.VERTEX_SHADER);return!(!A||E.isContextLost())&&(E.shaderSource(A,"void main() {}"),E.compileShader(A),E.getShaderParameter(A,E.COMPILE_STATUS)===!0)}(g)),p[g]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var g}o.exports?o.exports=u:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=u,window.mapboxgl.notSupportedReason=a);var p={};u.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),k={create:function(o,u,a){var p=l.window.document.createElement(o);return u!==void 0&&(p.className=u),a&&a.appendChild(p),p},createNS:function(o,u){return l.window.document.createElementNS(o,u)}},F=l.window.document&&l.window.document.documentElement.style;function $(o){if(!F)return o[0];for(var u=0;u<o.length;u++)if(o[u]in F)return o[u];return o[0]}var me,W=$(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);k.disableDrag=function(){F&&W&&(me=F[W],F[W]="none")},k.enableDrag=function(){F&&W&&(F[W]=me)};var xe=$(["transform","WebkitTransform"]);k.setTransform=function(o,u){o.style[xe]=u};var Ce=!1;try{var Oe=Object.defineProperty({},"passive",{get:function(){Ce=!0}});l.window.addEventListener("test",Oe,Oe),l.window.removeEventListener("test",Oe,Oe)}catch{Ce=!1}k.addEventListener=function(o,u,a,p){p===void 0&&(p={}),o.addEventListener(u,a,"passive"in p&&Ce?p:p.capture)},k.removeEventListener=function(o,u,a,p){p===void 0&&(p={}),o.removeEventListener(u,a,"passive"in p&&Ce?p:p.capture)};var se=function(o){o.preventDefault(),o.stopPropagation(),l.window.removeEventListener("click",se,!0)};function te(o){var u=o.userImage;return!!(u&&u.render&&u.render())&&(o.data.replace(new Uint8Array(u.data.buffer)),!0)}k.suppressClick=function(){l.window.addEventListener("click",se,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",se,!0)},0)},k.mousePos=function(o,u){var a=o.getBoundingClientRect();return new l.Point(u.clientX-a.left-o.clientLeft,u.clientY-a.top-o.clientTop)},k.touchPos=function(o,u){for(var a=o.getBoundingClientRect(),p=[],m=0;m<u.length;m++)p.push(new l.Point(u[m].clientX-a.left-o.clientLeft,u[m].clientY-a.top-o.clientTop));return p},k.mouseButton=function(o){return l.window.InstallTrigger!==void 0&&o.button===2&&o.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:o.button},k.remove=function(o){o.parentNode&&o.parentNode.removeChild(o)};var ne=function(o){function u(){o.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.isLoaded=function(){return this.loaded},u.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var p=0,m=this.requestors;p<m.length;p+=1){var g=m[p];this._notify(g.ids,g.callback)}this.requestors=[]}},u.prototype.getImage=function(a){return this.images[a]},u.prototype.addImage=function(a,p){this._validate(a,p)&&(this.images[a]=p)},u.prototype._validate=function(a,p){var m=!0;return this._validateStretch(p.stretchX,p.data&&p.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(p.stretchY,p.data&&p.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),m=!1),this._validateContent(p.content,p)||(this.fire(new l.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),m=!1),m},u.prototype._validateStretch=function(a,p){if(!a)return!0;for(var m=0,g=0,b=a;g<b.length;g+=1){var E=b[g];if(E[0]<m||E[1]<E[0]||p<E[1])return!1;m=E[1]}return!0},u.prototype._validateContent=function(a,p){return!(a&&(a.length!==4||a[0]<0||p.data.width<a[0]||a[1]<0||p.data.height<a[1]||a[2]<0||p.data.width<a[2]||a[3]<0||p.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},u.prototype.updateImage=function(a,p){p.version=this.images[a].version+1,this.images[a]=p,this.updatedImages[a]=!0},u.prototype.removeImage=function(a){var p=this.images[a];delete this.images[a],delete this.patterns[a],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()},u.prototype.listImages=function(){return Object.keys(this.images)},u.prototype.getImages=function(a,p){var m=!0;if(!this.isLoaded())for(var g=0,b=a;g<b.length;g+=1)this.images[b[g]]||(m=!1);this.isLoaded()||m?this._notify(a,p):this.requestors.push({ids:a,callback:p})},u.prototype._notify=function(a,p){for(var m={},g=0,b=a;g<b.length;g+=1){var E=b[g];this.images[E]||this.fire(new l.Event("styleimagemissing",{id:E}));var A=this.images[E];A?m[E]={data:A.data.clone(),pixelRatio:A.pixelRatio,sdf:A.sdf,version:A.version,stretchX:A.stretchX,stretchY:A.stretchY,content:A.content,hasRenderCallback:Boolean(A.userImage&&A.userImage.render)}:l.warnOnce('Image "'+E+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}p(null,m)},u.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},u.prototype.getPattern=function(a){var p=this.patterns[a],m=this.getImage(a);if(!m)return null;if(p&&p.position.version===m.version)return p.position;if(p)p.position.version=m.version;else{var g={w:m.data.width+2,h:m.data.height+2,x:0,y:0},b=new l.ImagePosition(g,m);this.patterns[a]={bin:g,position:b}}return this._updatePatternAtlas(),this.patterns[a].position},u.prototype.bind=function(a){var p=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(a,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)},u.prototype._updatePatternAtlas=function(){var a=[];for(var p in this.patterns)a.push(this.patterns[p].bin);var m=l.potpack(a),g=m.w,b=m.h,E=this.atlasImage;for(var A in E.resize({width:g||1,height:b||1}),this.patterns){var D=this.patterns[A].bin,j=D.x+1,q=D.y+1,Z=this.images[A].data,Q=Z.width,Y=Z.height;l.RGBAImage.copy(Z,E,{x:0,y:0},{x:j,y:q},{width:Q,height:Y}),l.RGBAImage.copy(Z,E,{x:0,y:Y-1},{x:j,y:q-1},{width:Q,height:1}),l.RGBAImage.copy(Z,E,{x:0,y:0},{x:j,y:q+Y},{width:Q,height:1}),l.RGBAImage.copy(Z,E,{x:Q-1,y:0},{x:j-1,y:q},{width:1,height:Y}),l.RGBAImage.copy(Z,E,{x:0,y:0},{x:j+Q,y:q},{width:1,height:Y})}this.dirty=!0},u.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},u.prototype.dispatchRenderCallbacks=function(a){for(var p=0,m=a;p<m.length;p+=1){var g=m[p];if(!this.callbackDispatchedThisFrame[g]){this.callbackDispatchedThisFrame[g]=!0;var b=this.images[g];te(b)&&this.updateImage(g,b)}}},u}(l.Evented),be=Ie,Le=Ie,Se=1e20;function Ie(o,u,a,p,m,g){this.fontSize=o||24,this.buffer=u===void 0?3:u,this.cutoff=p||.25,this.fontFamily=m||"sans-serif",this.fontWeight=g||"normal",this.radius=a||8;var b=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=b,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.d=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Int16Array(b),this.middle=Math.round(b/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function je(o,u,a,p,m,g,b){for(var E=0;E<u;E++){for(var A=0;A<a;A++)p[A]=o[A*u+E];for(at(p,m,g,b,a),A=0;A<a;A++)o[A*u+E]=m[A]}for(A=0;A<a;A++){for(E=0;E<u;E++)p[E]=o[A*u+E];for(at(p,m,g,b,u),E=0;E<u;E++)o[A*u+E]=Math.sqrt(m[E])}}function at(o,u,a,p,m){a[0]=0,p[0]=-Se,p[1]=+Se;for(var g=1,b=0;g<m;g++){for(var E=(o[g]+g*g-(o[a[b]]+a[b]*a[b]))/(2*g-2*a[b]);E<=p[b];)b--,E=(o[g]+g*g-(o[a[b]]+a[b]*a[b]))/(2*g-2*a[b]);a[++b]=g,p[b]=E,p[b+1]=+Se}for(g=0,b=0;g<m;g++){for(;p[b+1]<g;)b++;u[g]=(g-a[b])*(g-a[b])+o[a[b]]}}Ie.prototype.draw=function(o){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(o,this.buffer,this.middle);for(var u=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),p=0;p<this.size*this.size;p++){var m=u.data[4*p+3]/255;this.gridOuter[p]=m===1?0:m===0?Se:Math.pow(Math.max(0,.5-m),2),this.gridInner[p]=m===1?Se:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(je(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),je(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),p=0;p<this.size*this.size;p++)a[p]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[p]-this.gridInner[p])/this.radius+this.cutoff))));return a},be.default=Le;var Xe=function(o,u){this.requestManager=o,this.localIdeographFontFamily=u,this.entries={}};Xe.prototype.setURL=function(o){this.url=o},Xe.prototype.getGlyphs=function(o,u){var a=this,p=[];for(var m in o)for(var g=0,b=o[m];g<b.length;g+=1)p.push({stack:m,id:b[g]});l.asyncAll(p,function(E,A){var D=E.stack,j=E.id,q=a.entries[D];q||(q=a.entries[D]={glyphs:{},requests:{},ranges:{}});var Z=q.glyphs[j];if(Z===void 0){if(Z=a._tinySDF(q,D,j))return q.glyphs[j]=Z,void A(null,{stack:D,id:j,glyph:Z});var Q=Math.floor(j/256);if(256*Q>65535)A(new Error("glyphs > 65535 not supported"));else if(q.ranges[Q])A(null,{stack:D,id:j,glyph:Z});else{var Y=q.requests[Q];Y||(Y=q.requests[Q]=[],Xe.loadGlyphRange(D,Q,a.url,a.requestManager,function(oe,H){if(H){for(var ie in H)a._doesCharSupportLocalGlyph(+ie)||(q.glyphs[+ie]=H[+ie]);q.ranges[Q]=!0}for(var ce=0,ve=Y;ce<ve.length;ce+=1)(0,ve[ce])(oe,H);delete q.requests[Q]})),Y.push(function(oe,H){oe?A(oe):H&&A(null,{stack:D,id:j,glyph:H[j]||null})})}}else A(null,{stack:D,id:j,glyph:Z})},function(E,A){if(E)u(E);else if(A){for(var D={},j=0,q=A;j<q.length;j+=1){var Z=q[j],Q=Z.stack,Y=Z.id,oe=Z.glyph;(D[Q]||(D[Q]={}))[Y]=oe&&{id:oe.id,bitmap:oe.bitmap.clone(),metrics:oe.metrics}}u(null,D)}})},Xe.prototype._doesCharSupportLocalGlyph=function(o){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](o)||l.isChar["Hangul Syllables"](o)||l.isChar.Hiragana(o)||l.isChar.Katakana(o))},Xe.prototype._tinySDF=function(o,u,a){var p=this.localIdeographFontFamily;if(p&&this._doesCharSupportLocalGlyph(a)){var m=o.tinySDF;if(!m){var g="400";/bold/i.test(u)?g="900":/medium/i.test(u)?g="500":/light/i.test(u)&&(g="200"),m=o.tinySDF=new Xe.TinySDF(24,3,8,.25,p,g)}return{id:a,bitmap:new l.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Xe.loadGlyphRange=function(o,u,a,p,m){var g=256*u,b=g+255,E=p.transformRequest(p.normalizeGlyphsURL(a).replace("{fontstack}",o).replace("{range}",g+"-"+b),l.ResourceType.Glyphs);l.getArrayBuffer(E,function(A,D){if(A)m(A);else if(D){for(var j={},q=0,Z=l.parseGlyphPBF(D);q<Z.length;q+=1){var Q=Z[q];j[Q.id]=Q}m(null,j)}})},Xe.TinySDF=be;var _t=function(){this.specification=l.styleSpec.light.position};_t.prototype.possiblyEvaluate=function(o,u){return l.sphericalToCartesian(o.expression.evaluate(u))},_t.prototype.interpolate=function(o,u,a){return{x:l.number(o.x,u.x,a),y:l.number(o.y,u.y,a),z:l.number(o.z,u.z,a)}};var Mt=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new _t,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),bt=function(o){function u(a){o.call(this),this._transitionable=new l.Transitionable(Mt),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getLight=function(){return this._transitionable.serialize()},u.prototype.setLight=function(a,p){if(p===void 0&&(p={}),!this._validate(l.validateLight,a,p))for(var m in a){var g=a[m];l.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-"-transition".length),g):this._transitionable.setValue(m,g)}},u.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},u.prototype.hasTransition=function(){return this._transitioning.hasTransition()},u.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},u.prototype._validate=function(a,p,m){return(!m||m.validate!==!1)&&l.emitValidationErrors(this,a.call(l.validateStyle,l.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},u}(l.Evented),Ct=function(o,u){this.width=o,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ct.prototype.getDash=function(o,u){var a=o.join(",")+String(u);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(o,u)),this.dashEntry[a]},Ct.prototype.getDashRanges=function(o,u,a){var p=[],m=o.length%2==1?-o[o.length-1]*a:0,g=o[0]*a,b=!0;p.push({left:m,right:g,isDash:b,zeroLength:o[0]===0});for(var E=o[0],A=1;A<o.length;A++){var D=o[A];p.push({left:m=E*a,right:g=(E+=D)*a,isDash:b=!b,zeroLength:D===0})}return p},Ct.prototype.addRoundDash=function(o,u,a){for(var p=u/2,m=-a;m<=a;m++)for(var g=this.width*(this.nextRow+a+m),b=0,E=o[b],A=0;A<this.width;A++){A/E.right>1&&(E=o[++b]);var D=Math.abs(A-E.left),j=Math.abs(A-E.right),q=Math.min(D,j),Z=void 0,Q=m/a*(p+1);if(E.isDash){var Y=p-Math.abs(Q);Z=Math.sqrt(q*q+Y*Y)}else Z=p-Math.sqrt(q*q+Q*Q);this.data[g+A]=Math.max(0,Math.min(255,Z+128))}},Ct.prototype.addRegularDash=function(o){for(var u=o.length-1;u>=0;--u){var a=o[u],p=o[u+1];a.zeroLength?o.splice(u,1):p&&p.isDash===a.isDash&&(p.left=a.left,o.splice(u,1))}var m=o[0],g=o[o.length-1];m.isDash===g.isDash&&(m.left=g.left-this.width,g.right=m.right+this.width);for(var b=this.width*this.nextRow,E=0,A=o[E],D=0;D<this.width;D++){D/A.right>1&&(A=o[++E]);var j=Math.abs(D-A.left),q=Math.abs(D-A.right),Z=Math.min(j,q);this.data[b+D]=Math.max(0,Math.min(255,(A.isDash?Z:-Z)+128))}},Ct.prototype.addDash=function(o,u){var a=u?7:0,p=2*a+1;if(this.nextRow+p>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var m=0,g=0;g<o.length;g++)m+=o[g];if(m!==0){var b=this.width/m,E=this.getDashRanges(o,this.width,b);u?this.addRoundDash(E,b,a):this.addRegularDash(E)}var A={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:m};return this.nextRow+=p,this.dirty=!0,A},Ct.prototype.bind=function(o){var u=o.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))};var Ut=function o(u,a){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var p=this.workerPool.acquire(this.id),m=0;m<p.length;m++){var g=new o.Actor(p[m],a,this.id);g.name="Worker "+m,this.actors.push(g)}};function Cr(o,u,a){var p=function(m,g){if(m)return a(m);if(g){var b=l.pick(l.extend(g,o),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);g.vector_layers&&(b.vectorLayers=g.vector_layers,b.vectorLayerIds=b.vectorLayers.map(function(E){return E.id})),b.tiles=u.canonicalizeTileset(b,o.url),a(null,b)}};return o.url?l.getJSON(u.transformRequest(u.normalizeSourceURL(o.url),l.ResourceType.Source),p):l.browser.frame(function(){return p(null,o)})}Ut.prototype.broadcast=function(o,u,a){l.asyncAll(this.actors,function(p,m){p.send(o,u,m)},a=a||function(){})},Ut.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ut.prototype.remove=function(){this.actors.forEach(function(o){o.remove()}),this.actors=[],this.workerPool.release(this.id)},Ut.Actor=l.Actor;var Ir=function(o,u,a){this.bounds=l.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=u||0,this.maxzoom=a||24};Ir.prototype.validateBounds=function(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]},Ir.prototype.contains=function(o){var u=Math.pow(2,o.z),a=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*u),p=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*u),m=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*u),g=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*u);return o.x>=a&&o.x<m&&o.y>=p&&o.y<g};var Fn=function(o){function u(a,p,m,g){if(o.call(this),this.id=a,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(p,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Cr(this._options,this.map._requestManager,function(p,m){a._tileJSONRequest=null,a._loaded=!0,p?a.fire(new l.ErrorEvent(p)):m&&(l.extend(a,m),m.bounds&&(a.tileBounds=new Ir(m.bounds,a.minzoom,a.maxzoom)),l.postTurnstileEvent(m.tiles,a.map._requestManager._customAccessToken),l.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},u.prototype.loaded=function(){return this._loaded},u.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},u.prototype.onAdd=function(a){this.map=a,this.load()},u.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},u.prototype.setTiles=function(a){var p=this;return this.setSourceProperty(function(){p._options.tiles=a}),this},u.prototype.setUrl=function(a){var p=this;return this.setSourceProperty(function(){p.url=a,p._options.url=a}),this},u.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},u.prototype.serialize=function(){return l.extend({},this._options)},u.prototype.loadTile=function(a,p){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(m,l.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(E,A){return delete a.request,a.aborted?p(null):E&&E.status!==404?p(E):(A&&A.resourceTiming&&(a.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&a.setExpiryData(A),a.loadVectorData(A,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),p(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=p:a.request=a.actor.send("reloadTile",g,b.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",g,b.bind(this)))},u.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},u.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},u.prototype.hasTransition=function(){return!1},u}(l.Evented),Qt=function(o){function u(a,p,m,g){o.call(this),this.id=a,this.dispatcher=m,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},p),l.extend(this,l.pick(p,["url","scheme","tileSize"]))}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Cr(this._options,this.map._requestManager,function(p,m){a._tileJSONRequest=null,a._loaded=!0,p?a.fire(new l.ErrorEvent(p)):m&&(l.extend(a,m),m.bounds&&(a.tileBounds=new Ir(m.bounds,a.minzoom,a.maxzoom)),l.postTurnstileEvent(m.tiles),l.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},u.prototype.loaded=function(){return this._loaded},u.prototype.onAdd=function(a){this.map=a,this.load()},u.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},u.prototype.serialize=function(){return l.extend({},this._options)},u.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},u.prototype.loadTile=function(a,p){var m=this,g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=l.getImage(this.map._requestManager.transformRequest(g,l.ResourceType.Tile),function(b,E){if(delete a.request,a.aborted)a.state="unloaded",p(null);else if(b)a.state="errored",p(b);else if(E){m.map._refreshExpiredTiles&&a.setExpiryData(E),delete E.cacheControl,delete E.expires;var A=m.map.painter.context,D=A.gl;a.texture=m.map.painter.getTileTexture(E.width),a.texture?a.texture.update(E,{useMipmap:!0}):(a.texture=new l.Texture(A,E,D.RGBA,{useMipmap:!0}),a.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),A.extTextureFilterAnisotropic&&D.texParameterf(D.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax)),a.state="loaded",l.cacheEntryPossiblyAdded(m.dispatcher),p(null)}})},u.prototype.abortTile=function(a,p){a.request&&(a.request.cancel(),delete a.request),p()},u.prototype.unloadTile=function(a,p){a.texture&&this.map.painter.saveTileTexture(a.texture),p()},u.prototype.hasTransition=function(){return!1},u}(l.Evented),Bn=function(o){function u(a,p,m,g){o.call(this,a,p,m,g),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox"}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},u.prototype.loadTile=function(a,p){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function g(b,E){b&&(a.state="errored",p(b)),E&&(a.dem=E,a.needsHillshadePrepare=!0,a.state="loaded",p(null))}a.request=l.getImage(this.map._requestManager.transformRequest(m,l.ResourceType.Tile),function(b,E){if(delete a.request,a.aborted)a.state="unloaded",p(null);else if(b)a.state="errored",p(b);else if(E){this.map._refreshExpiredTiles&&a.setExpiryData(E),delete E.cacheControl,delete E.expires;var A=l.window.ImageBitmap&&E instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?E:l.browser.getImageData(E,1),D={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:A,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",D,g.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},u.prototype._getNeighboringTiles=function(a){var p=a.canonical,m=Math.pow(2,p.z),g=(p.x-1+m)%m,b=p.x===0?a.wrap-1:a.wrap,E=(p.x+1+m)%m,A=p.x+1===m?a.wrap+1:a.wrap,D={};return D[new l.OverscaledTileID(a.overscaledZ,b,p.z,g,p.y).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,A,p.z,E,p.y).key]={backfilled:!1},p.y>0&&(D[new l.OverscaledTileID(a.overscaledZ,b,p.z,g,p.y-1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,a.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,A,p.z,E,p.y-1).key]={backfilled:!1}),p.y+1<m&&(D[new l.OverscaledTileID(a.overscaledZ,b,p.z,g,p.y+1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,a.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},D[new l.OverscaledTileID(a.overscaledZ,A,p.z,E,p.y+1).key]={backfilled:!1}),D},u.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},u}(Qt),Gt=function(o){function u(a,p,m,g){o.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(g),this._data=p.data,this._options=l.extend({},p),this._collectResourceTiming=p.collectResourceTiming,this._resourceTiming=[],p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;var b=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*b,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*b,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?Math.min(p.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:l.EXTENT,radius:(p.clusterRadius||50)*b,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.load=function(){var a=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(p){if(p)a.fire(new l.ErrorEvent(p));else{var m={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(m.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new l.Event("data",m))}})},u.prototype.onAdd=function(a){this.map=a,this.load()},u.prototype.setData=function(a){var p=this;return this._data=a,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)p.fire(new l.ErrorEvent(m));else{var g={dataType:"source",sourceDataType:"content"};p._collectResourceTiming&&p._resourceTiming&&p._resourceTiming.length>0&&(g.resourceTiming=p._resourceTiming,p._resourceTiming=[]),p.fire(new l.Event("data",g))}}),this},u.prototype.getClusterExpansionZoom=function(a,p){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},p),this},u.prototype.getClusterChildren=function(a,p){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},p),this},u.prototype.getClusterLeaves=function(a,p,m,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:p,offset:m},g),this},u.prototype._updateWorkerData=function(a){var p=this;this._loaded=!1;var m=l.extend({},this.workerOptions),g=this._data;typeof g=="string"?(m.request=this.map._requestManager.transformRequest(l.browser.resolveURL(g),l.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(g),this.actor.send(this.type+".loadData",m,function(b,E){p._removed||E&&E.abandoned||(p._loaded=!0,E&&E.resourceTiming&&E.resourceTiming[p.id]&&(p._resourceTiming=E.resourceTiming[p.id].slice(0)),p.actor.send(p.type+".coalesce",{source:m.source},null),a(b))})},u.prototype.loaded=function(){return this._loaded},u.prototype.loadTile=function(a,p){var m=this,g=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(g,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(b,E){return delete a.request,a.unloadVectorData(),a.aborted?p(null):b?p(b):(a.loadVectorData(E,m.map.painter,g==="reloadTile"),p(null))})},u.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},u.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},u.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},u.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},u.prototype.hasTransition=function(){return!1},u}(l.Evented),Ye=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),zt=function(o){function u(a,p,m,g){o.call(this),this.id=a,this.dispatcher=m,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=p}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.load=function(a,p){var m=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(g,b){m._loaded=!0,g?m.fire(new l.ErrorEvent(g)):b&&(m.image=b,a&&(m.coordinates=a),p&&p(),m._finishLoading())})},u.prototype.loaded=function(){return this._loaded},u.prototype.updateImage=function(a){var p=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){p.texture=null}),this):this},u.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},u.prototype.onAdd=function(a){this.map=a,this.load()},u.prototype.setCoordinates=function(a){var p=this;this.coordinates=a;var m=a.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(b){for(var E=1/0,A=1/0,D=-1/0,j=-1/0,q=0,Z=b;q<Z.length;q+=1){var Q=Z[q];E=Math.min(E,Q.x),A=Math.min(A,Q.y),D=Math.max(D,Q.x),j=Math.max(j,Q.y)}var Y=Math.max(D-E,j-A),oe=Math.max(0,Math.floor(-Math.log(Y)/Math.LN2)),H=Math.pow(2,oe);return new l.CanonicalTileID(oe,Math.floor((E+D)/2*H),Math.floor((A+j)/2*H))}(m),this.minzoom=this.maxzoom=this.tileID.z;var g=m.map(function(b){return p.tileID.getTilePoint(b)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(g[2].x,g[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},u.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,p=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(a,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[m];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},u.prototype.loadTile=function(a,p){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},p(null)):(a.state="errored",p(null))},u.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},u.prototype.hasTransition=function(){return!1},u}(l.Evented),Xt=function(o){function u(a,p,m,g){o.call(this,a,p,m,g),this.roundZoom=!0,this.type="video",this.options=p}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.load=function(){var a=this;this._loaded=!1;var p=this.options;this.urls=[];for(var m=0,g=p.urls;m<g.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(g[m],l.ResourceType.Source).url);l.getVideo(this.urls,function(b,E){a._loaded=!0,b?a.fire(new l.ErrorEvent(b)):E&&(a.video=E,a.video.loop=!0,a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},u.prototype.pause=function(){this.video&&this.video.pause()},u.prototype.play=function(){this.video&&this.video.play()},u.prototype.seek=function(a){if(this.video){var p=this.video.seekable;a<p.start(0)||a>p.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+p.start(0)+" and "+p.end(0)+"-second mark."))):this.video.currentTime=a}},u.prototype.getVideo=function(){return this.video},u.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},u.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,p=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(a,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[m];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},u.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},u.prototype.hasTransition=function(){return this.video&&!this.video.paused},u}(zt),Rr=function(o){function u(a,p,m,g){o.call(this,a,p,m,g),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(function(b){return!Array.isArray(b)||b.length!==2||b.some(function(E){return typeof E!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},u.prototype.getCanvas=function(){return this.canvas},u.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},u.prototype.onRemove=function(){this.pause()},u.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var p=this.map.painter.context,m=p.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(p,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},u.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},u.prototype.hasTransition=function(){return this._playing},u.prototype._hasInvalidDimensions=function(){for(var a=0,p=[this.canvas.width,this.canvas.height];a<p.length;a+=1){var m=p[a];if(isNaN(m)||m<=0)return!0}return!1},u}(zt),Gr={vector:Fn,raster:Qt,"raster-dem":Bn,geojson:Gt,video:Xt,image:zt,canvas:Rr};function fo(o,u){var a=l.identity([]);return l.translate(a,a,[1,1,0]),l.scale(a,a,[.5*o.width,.5*o.height,1]),l.multiply(a,a,o.calculatePosMatrix(u.toUnwrapped()))}function en(o,u,a,p,m,g){var b=function(oe,H,ie){if(oe)for(var ce=0,ve=oe;ce<ve.length;ce+=1){var Me=H[ve[ce]];if(Me&&Me.source===ie&&Me.type==="fill-extrusion")return!0}else for(var Pe in H){var De=H[Pe];if(De.source===ie&&De.type==="fill-extrusion")return!0}return!1}(m&&m.layers,u,o.id),E=g.maxPitchScaleFactor(),A=o.tilesIn(p,E,b);A.sort(si);for(var D=[],j=0,q=A;j<q.length;j+=1){var Z=q[j];D.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(u,a,o._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,m,g,E,fo(o.transform,Z.tileID))})}var Q=function(oe){for(var H={},ie={},ce=0,ve=oe;ce<ve.length;ce+=1){var Me=ve[ce],Pe=Me.queryResults,De=Me.wrappedTileID,Ne=ie[De]=ie[De]||{};for(var He in Pe)for(var We=Pe[He],lt=Ne[He]=Ne[He]||{},Et=H[He]=H[He]||[],At=0,kt=We;At<kt.length;At+=1){var mr=kt[At];lt[mr.featureIndex]||(lt[mr.featureIndex]=!0,Et.push(mr))}}return H}(D);for(var Y in Q)Q[Y].forEach(function(oe){var H=oe.feature,ie=o.getFeatureState(H.layer["source-layer"],H.id);H.source=H.layer.source,H.layer["source-layer"]&&(H.sourceLayer=H.layer["source-layer"]),H.state=ie});return Q}function si(o,u){var a=o.tileID,p=u.tileID;return a.overscaledZ-p.overscaledZ||a.canonical.y-p.canonical.y||a.wrap-p.wrap||a.canonical.x-p.canonical.x}var cr=function(o,u){this.max=o,this.onRemove=u,this.reset()};cr.prototype.reset=function(){for(var o in this.data)for(var u=0,a=this.data[o];u<a.length;u+=1){var p=a[u];p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value)}return this.data={},this.order=[],this},cr.prototype.add=function(o,u,a){var p=this,m=o.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var g={value:u,timeout:void 0};if(a!==void 0&&(g.timeout=setTimeout(function(){p.remove(o,g)},a)),this.data[m].push(g),this.order.push(m),this.order.length>this.max){var b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this},cr.prototype.has=function(o){return o.wrapped().key in this.data},cr.prototype.getAndRemove=function(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null},cr.prototype._getAndRemoveByKey=function(o){var u=this.data[o].shift();return u.timeout&&clearTimeout(u.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),u.value},cr.prototype.getByKey=function(o){var u=this.data[o];return u?u[0].value:null},cr.prototype.get=function(o){return this.has(o)?this.data[o.wrapped().key][0].value:null},cr.prototype.remove=function(o,u){if(!this.has(o))return this;var a=o.wrapped().key,p=u===void 0?0:this.data[a].indexOf(u),m=this.data[a][p];return this.data[a].splice(p,1),m.timeout&&clearTimeout(m.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(m.value),this.order.splice(this.order.indexOf(a),1),this},cr.prototype.setMaxSize=function(o){for(this.max=o;this.order.length>this.max;){var u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this},cr.prototype.filter=function(o){var u=[];for(var a in this.data)for(var p=0,m=this.data[a];p<m.length;p+=1){var g=m[p];o(g.value)||u.push(g)}for(var b=0,E=u;b<E.length;b+=1){var A=E[b];this.remove(A.value.tileID,A)}};var Io=function(o,u,a){this.context=o;var p=o.gl;this.buffer=p.createBuffer(),this.dynamicDraw=Boolean(a),this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer};Io.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Io.prototype.updateData=function(o){var u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)},Io.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var is={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Hn=function(o,u,a,p){this.length=u.length,this.attributes=a,this.itemSize=u.bytesPerElement,this.dynamicDraw=p,this.context=o;var m=o.gl;this.buffer=m.createBuffer(),o.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer};Hn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Hn.prototype.updateData=function(o){var u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,o.arrayBuffer)},Hn.prototype.enableAttributes=function(o,u){for(var a=0;a<this.attributes.length;a++){var p=u.attributes[this.attributes[a].name];p!==void 0&&o.enableVertexAttribArray(p)}},Hn.prototype.setVertexAttribPointers=function(o,u,a){for(var p=0;p<this.attributes.length;p++){var m=this.attributes[p],g=u.attributes[m.name];g!==void 0&&o.vertexAttribPointer(g,m.components,o[is[m.type]],!1,this.itemSize,m.offset+this.itemSize*(a||0))}},Hn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var er=function(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};er.prototype.get=function(){return this.current},er.prototype.set=function(o){},er.prototype.getDefault=function(){return this.default},er.prototype.setDefault=function(){this.set(this.default)};var Vi=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return l.Color.transparent},u.prototype.set=function(a){var p=this.current;(a.r!==p.r||a.g!==p.g||a.b!==p.b||a.a!==p.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},u}(er),on=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return 1},u.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},u}(er),An=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return 0},u.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},u}(er),Ju=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return[!0,!0,!0,!0]},u.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||a[3]!==p[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},u}(er),qi=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return!0},u.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},u}(er),zs=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return 255},u.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},u}(er),cn=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},u.prototype.set=function(a){var p=this.current;(a.func!==p.func||a.ref!==p.ref||a.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},u}(er),La=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},u.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},u}(er),ko=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return!1},u.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=a,this.dirty=!1}},u}(er),Ci=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return[0,1]},u.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},u}(er),mi=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return!1},u.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=a,this.dirty=!1}},u}(er),pa=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return this.gl.LESS},u.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},u}(er),Zi=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return!1},u.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.BLEND):p.disable(p.BLEND),this.current=a,this.dirty=!1}},u}(er),Ls=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},u.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},u}(er),os=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return l.Color.transparent},u.prototype.set=function(a){var p=this.current;(a.r!==p.r||a.g!==p.g||a.b!==p.b||a.a!==p.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},u}(er),Da=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return this.gl.FUNC_ADD},u.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},u}(er),Mn=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return!1},u.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;a?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=a,this.dirty=!1}},u}(er),Gi=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return this.gl.BACK},u.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},u}(er),Wi=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return this.gl.CCW},u.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},u}(er),Xn=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return null},u.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},u}(er),Ds=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return this.gl.TEXTURE0},u.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},u}(er),Ao=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},u.prototype.set=function(a){var p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||a[3]!==p[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},u}(er),Un=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return null},u.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},u}(er),tr=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return null},u.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,a),this.current=a,this.dirty=!1}},u}(er),Os=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return null},u.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindTexture(p.TEXTURE_2D,a),this.current=a,this.dirty=!1}},u}(er),cu=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return null},u.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},u}(er),Oa=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return null},u.prototype.set=function(a){var p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},u}(er),$i=function(o){function u(a){o.call(this,a),this.vao=a.extVertexArrayObject}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return null},u.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},u}(er),Ho=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return 4},u.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},u}(er),Mr=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return!1},u.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},u}(er),as=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return!1},u.prototype.set=function(a){if(a!==this.current||this.dirty){var p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},u}(er),zr=function(o){function u(a,p){o.call(this,a),this.context=a,this.parent=p}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getDefault=function(){return null},u}(er),L=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.setDirty=function(){this.dirty=!0},u.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},u}(zr),O=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,a),this.current=a,this.dirty=!1}},u}(zr),U=function(o,u,a,p){this.context=o,this.width=u,this.height=a;var m=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new L(o,m),p&&(this.depthAttachment=new O(o,m))};U.prototype.destroy=function(){var o=this.context.gl,u=this.colorAttachment.get();if(u&&o.deleteTexture(u),this.depthAttachment){var a=this.depthAttachment.get();a&&o.deleteRenderbuffer(a)}o.deleteFramebuffer(this.framebuffer)};var G=function(o,u,a){this.func=o,this.mask=u,this.range=a};G.ReadOnly=!1,G.ReadWrite=!0,G.disabled=new G(519,G.ReadOnly,[0,1]);var K=function(o,u,a,p,m,g){this.test=o,this.ref=u,this.mask=a,this.fail=p,this.depthFail=m,this.pass=g};K.disabled=new K({func:519,mask:0},0,0,7680,7680,7680);var ue=function(o,u,a){this.blendFunction=o,this.blendColor=u,this.mask=a};ue.disabled=new ue(ue.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),ue.unblended=new ue(ue.Replace,l.Color.transparent,[!0,!0,!0,!0]),ue.alphaBlended=new ue([1,771],l.Color.transparent,[!0,!0,!0,!0]);var pe=function(o,u,a){this.enable=o,this.mode=u,this.frontFace=a};pe.disabled=new pe(!1,1029,2305),pe.backCCW=new pe(!0,1029,2305);var V=function(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Vi(this),this.clearDepth=new on(this),this.clearStencil=new An(this),this.colorMask=new Ju(this),this.depthMask=new qi(this),this.stencilMask=new zs(this),this.stencilFunc=new cn(this),this.stencilOp=new La(this),this.stencilTest=new ko(this),this.depthRange=new Ci(this),this.depthTest=new mi(this),this.depthFunc=new pa(this),this.blend=new Zi(this),this.blendFunc=new Ls(this),this.blendColor=new os(this),this.blendEquation=new Da(this),this.cullFace=new Mn(this),this.cullFaceSide=new Gi(this),this.frontFace=new Wi(this),this.program=new Xn(this),this.activeTexture=new Ds(this),this.viewport=new Ao(this),this.bindFramebuffer=new Un(this),this.bindRenderbuffer=new tr(this),this.bindTexture=new Os(this),this.bindVertexBuffer=new cu(this),this.bindElementBuffer=new Oa(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new $i(this),this.pixelStoreUnpack=new Ho(this),this.pixelStoreUnpackPremultiplyAlpha=new Mr(this),this.pixelStoreUnpackFlipY=new as(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)};V.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},V.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},V.prototype.createIndexBuffer=function(o,u){return new Io(this,o,u)},V.prototype.createVertexBuffer=function(o,u,a){return new Hn(this,o,u,a)},V.prototype.createRenderbuffer=function(o,u,a){var p=this.gl,m=p.createRenderbuffer();return this.bindRenderbuffer.set(m),p.renderbufferStorage(p.RENDERBUFFER,o,u,a),this.bindRenderbuffer.set(null),m},V.prototype.createFramebuffer=function(o,u,a){return new U(this,o,u,a)},V.prototype.clear=function(o){var u=o.color,a=o.depth,p=this.gl,m=0;u&&(m|=p.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(m|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),p.clear(m)},V.prototype.setCullFace=function(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))},V.prototype.setDepthMode=function(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)},V.prototype.setStencilMode=function(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)},V.prototype.setColorMode=function(o){l.deepEqual(o.blendFunction,ue.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)},V.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ee=function(o){function u(a,p,m){var g=this;o.call(this),this.id=a,this.dispatcher=m,this.on("data",function(b){b.dataType==="source"&&b.sourceDataType==="metadata"&&(g._sourceLoaded=!0),g._sourceLoaded&&!g._paused&&b.dataType==="source"&&b.sourceDataType==="content"&&(g.reload(),g.transform&&g.update(g.transform))}),this.on("error",function(){g._sourceErrored=!0}),this._source=function(b,E,A,D){var j=new Gr[E.type](b,E,A,D);if(j.id!==b)throw new Error("Expected Source id to be "+b+" instead of "+j.id);return l.bindAll(["load","abort","unload","serialize","prepare"],j),j}(a,p,m,this),this._tiles={},this._cache=new cr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},u.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},u.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var p=this._tiles[a];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0},u.prototype.getSource=function(){return this._source},u.prototype.pause=function(){this._paused=!0},u.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},u.prototype._loadTile=function(a,p){return this._source.loadTile(a,p)},u.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},u.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},u.prototype.serialize=function(){return this._source.serialize()},u.prototype.prepare=function(a){for(var p in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[p];m.upload(a),m.prepare(this.map.style.imageManager)}},u.prototype.getIds=function(){return l.values(this._tiles).map(function(a){return a.tileID}).sort(ye).map(function(a){return a.key})},u.prototype.getRenderableIds=function(a){var p=this,m=[];for(var g in this._tiles)this._isIdRenderable(g,a)&&m.push(this._tiles[g]);return a?m.sort(function(b,E){var A=b.tileID,D=E.tileID,j=new l.Point(A.canonical.x,A.canonical.y)._rotate(p.transform.angle),q=new l.Point(D.canonical.x,D.canonical.y)._rotate(p.transform.angle);return A.overscaledZ-D.overscaledZ||q.y-j.y||q.x-j.x}).map(function(b){return b.tileID.key}):m.map(function(b){return b.tileID}).sort(ye).map(function(b){return b.key})},u.prototype.hasRenderableParent=function(a){var p=this.findLoadedParent(a,0);return!!p&&this._isIdRenderable(p.tileID.key)},u.prototype._isIdRenderable=function(a,p){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(p||!this._tiles[a].holdingForFade())},u.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},u.prototype._reloadTile=function(a,p){var m=this._tiles[a];m&&(m.state!=="loading"&&(m.state=p),this._loadTile(m,this._tileLoaded.bind(this,m,a,p)))},u.prototype._tileLoaded=function(a,p,m,g){if(g)return a.state="errored",void(g.status!==404?this._source.fire(new l.ErrorEvent(g,{tile:a})):this.update(this.transform));a.timeAdded=l.browser.now(),m==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(p,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},u.prototype._backfillDEM=function(a){for(var p=this.getRenderableIds(),m=0;m<p.length;m++){var g=p[m];if(a.neighboringTiles&&a.neighboringTiles[g]){var b=this.getTileByID(g);E(a,b),E(b,a)}}function E(A,D){A.needsHillshadePrepare=!0;var j=D.tileID.canonical.x-A.tileID.canonical.x,q=D.tileID.canonical.y-A.tileID.canonical.y,Z=Math.pow(2,A.tileID.canonical.z),Q=D.tileID.key;j===0&&q===0||Math.abs(q)>1||(Math.abs(j)>1&&(Math.abs(j+Z)===1?j+=Z:Math.abs(j-Z)===1&&(j-=Z)),D.dem&&A.dem&&(A.dem.backfillBorder(D.dem,j,q),A.neighboringTiles&&A.neighboringTiles[Q]&&(A.neighboringTiles[Q].backfilled=!0)))}},u.prototype.getTile=function(a){return this.getTileByID(a.key)},u.prototype.getTileByID=function(a){return this._tiles[a]},u.prototype._retainLoadedChildren=function(a,p,m,g){for(var b in this._tiles){var E=this._tiles[b];if(!(g[b]||!E.hasData()||E.tileID.overscaledZ<=p||E.tileID.overscaledZ>m)){for(var A=E.tileID;E&&E.tileID.overscaledZ>p+1;){var D=E.tileID.scaledTo(E.tileID.overscaledZ-1);(E=this._tiles[D.key])&&E.hasData()&&(A=D)}for(var j=A;j.overscaledZ>p;)if(a[(j=j.scaledTo(j.overscaledZ-1)).key]){g[A.key]=A;break}}}},u.prototype.findLoadedParent=function(a,p){if(a.key in this._loadedParentTiles){var m=this._loadedParentTiles[a.key];return m&&m.tileID.overscaledZ>=p?m:null}for(var g=a.overscaledZ-1;g>=p;g--){var b=a.scaledTo(g),E=this._getLoadedTile(b);if(E)return E}},u.prototype._getLoadedTile=function(a){var p=this._tiles[a.key];return p&&p.hasData()?p:this._cache.getByKey(a.wrapped().key)},u.prototype.updateCacheSize=function(a){var p=Math.ceil(a.width/this._source.tileSize)+1,m=Math.ceil(a.height/this._source.tileSize)+1,g=Math.floor(p*m*5),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(b)},u.prototype.handleWrapJump=function(a){var p=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,p){var m={};for(var g in this._tiles){var b=this._tiles[g];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+p),m[b.tileID.key]=b}for(var E in this._tiles=m,this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(var A in this._tiles)this._setTileReloadTimer(A,this._tiles[A])}},u.prototype.update=function(a){var p=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ne){return new l.OverscaledTileID(Ne.canonical.z,Ne.wrap,Ne.canonical.z,Ne.canonical.x,Ne.canonical.y)}):(m=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(Ne){return p._source.hasTile(Ne)}))):m=[];var g=a.coveringZoomLevel(this._source),b=Math.max(g-u.maxOverzooming,this._source.minzoom),E=Math.max(g+u.maxUnderzooming,this._source.minzoom),A=this._updateRetainedTiles(m,g);if(Ue(this._source.type)){for(var D={},j={},q=0,Z=Object.keys(A);q<Z.length;q+=1){var Q=Z[q],Y=A[Q],oe=this._tiles[Q];if(oe&&!(oe.fadeEndTime&&oe.fadeEndTime<=l.browser.now())){var H=this.findLoadedParent(Y,b);H&&(this._addTile(H.tileID),D[H.tileID.key]=H.tileID),j[Q]=Y}}for(var ie in this._retainLoadedChildren(j,g,E,A),D)A[ie]||(this._coveredTiles[ie]=!0,A[ie]=D[ie])}for(var ce in A)this._tiles[ce].clearFadeHold();for(var ve=0,Me=l.keysDifference(this._tiles,A);ve<Me.length;ve+=1){var Pe=Me[ve],De=this._tiles[Pe];De.hasSymbolBuckets&&!De.holdingForFade()?De.setHoldDuration(this.map._fadeDuration):De.hasSymbolBuckets&&!De.symbolFadeFinished()||this._removeTile(Pe)}this._updateLoadedParentTileCache()}},u.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},u.prototype._updateRetainedTiles=function(a,p){for(var m={},g={},b=Math.max(p-u.maxOverzooming,this._source.minzoom),E=Math.max(p+u.maxUnderzooming,this._source.minzoom),A={},D=0,j=a;D<j.length;D+=1){var q=j[D],Z=this._addTile(q);m[q.key]=q,Z.hasData()||p<this._source.maxzoom&&(A[q.key]=q)}this._retainLoadedChildren(A,p,E,m);for(var Q=0,Y=a;Q<Y.length;Q+=1){var oe=Y[Q],H=this._tiles[oe.key];if(!H.hasData()){if(p+1>this._source.maxzoom){var ie=oe.children(this._source.maxzoom)[0],ce=this.getTile(ie);if(ce&&ce.hasData()){m[ie.key]=ie;continue}}else{var ve=oe.children(this._source.maxzoom);if(m[ve[0].key]&&m[ve[1].key]&&m[ve[2].key]&&m[ve[3].key])continue}for(var Me=H.wasRequested(),Pe=oe.overscaledZ-1;Pe>=b;--Pe){var De=oe.scaledTo(Pe);if(g[De.key]||(g[De.key]=!0,!(H=this.getTile(De))&&Me&&(H=this._addTile(De)),H&&(m[De.key]=De,Me=H.wasRequested(),H.hasData())))break}}}return m},u.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var p=[],m=void 0,g=this._tiles[a].tileID;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){m=this._loadedParentTiles[g.key];break}p.push(g.key);var b=g.scaledTo(g.overscaledZ-1);if(m=this._getLoadedTile(b))break;g=b}for(var E=0,A=p;E<A.length;E+=1)this._loadedParentTiles[A[E]]=m}},u.prototype._addTile=function(a){var p=this._tiles[a.key];if(p)return p;(p=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,p),p.tileID=a,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,p)));var m=Boolean(p);return m||(p=new l.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(p,this._tileLoaded.bind(this,p,a.key,p.state))),p?(p.uses++,this._tiles[a.key]=p,m||this._source.fire(new l.Event("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p):null},u.prototype._setTileReloadTimer=function(a,p){var m=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var g=p.getExpiryTimeout();g&&(this._timers[a]=setTimeout(function(){m._reloadTile(a,"expired"),delete m._timers[a]},g))},u.prototype._removeTile=function(a){var p=this._tiles[a];p&&(p.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))},u.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},u.prototype.tilesIn=function(a,p,m){var g=this,b=[],E=this.transform;if(!E)return b;for(var A=m?E.getCameraQueryGeometry(a):a,D=a.map(function(Pe){return E.pointCoordinate(Pe)}),j=A.map(function(Pe){return E.pointCoordinate(Pe)}),q=this.getIds(),Z=1/0,Q=1/0,Y=-1/0,oe=-1/0,H=0,ie=j;H<ie.length;H+=1){var ce=ie[H];Z=Math.min(Z,ce.x),Q=Math.min(Q,ce.y),Y=Math.max(Y,ce.x),oe=Math.max(oe,ce.y)}for(var ve=function(Pe){var De=g._tiles[q[Pe]];if(!De.holdingForFade()){var Ne=De.tileID,He=Math.pow(2,E.zoom-De.tileID.overscaledZ),We=p*De.queryPadding*l.EXTENT/De.tileSize/He,lt=[Ne.getTilePoint(new l.MercatorCoordinate(Z,Q)),Ne.getTilePoint(new l.MercatorCoordinate(Y,oe))];if(lt[0].x-We<l.EXTENT&&lt[0].y-We<l.EXTENT&&lt[1].x+We>=0&&lt[1].y+We>=0){var Et=D.map(function(kt){return Ne.getTilePoint(kt)}),At=j.map(function(kt){return Ne.getTilePoint(kt)});b.push({tile:De,tileID:Ne,queryGeometry:Et,cameraQueryGeometry:At,scale:He})}}},Me=0;Me<q.length;Me++)ve(Me);return b},u.prototype.getVisibleCoordinates=function(a){for(var p=this,m=this.getRenderableIds(a).map(function(A){return p._tiles[A].tileID}),g=0,b=m;g<b.length;g+=1){var E=b[g];E.posMatrix=this.transform.calculatePosMatrix(E.toUnwrapped())}return m},u.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ue(this._source.type))for(var a in this._tiles){var p=this._tiles[a];if(p.fadeEndTime!==void 0&&p.fadeEndTime>=l.browser.now())return!0}return!1},u.prototype.setFeatureState=function(a,p,m){this._state.updateState(a=a||"_geojsonTileLayer",p,m)},u.prototype.removeFeatureState=function(a,p,m){this._state.removeFeatureState(a=a||"_geojsonTileLayer",p,m)},u.prototype.getFeatureState=function(a,p){return this._state.getState(a=a||"_geojsonTileLayer",p)},u.prototype.setDependencies=function(a,p,m){var g=this._tiles[a];g&&g.setDependencies(p,m)},u.prototype.reloadTilesForDependencies=function(a,p){for(var m in this._tiles)this._tiles[m].hasDependency(a,p)&&this._reloadTile(m,"reloading");this._cache.filter(function(g){return!g.hasDependency(a,p)})},u}(l.Evented);function ye(o,u){var a=Math.abs(2*o.wrap)-+(o.wrap<0),p=Math.abs(2*u.wrap)-+(u.wrap<0);return o.overscaledZ-u.overscaledZ||p-a||u.canonical.y-o.canonical.y||u.canonical.x-o.canonical.x}function Ue(o){return o==="raster"||o==="image"||o==="video"}function qe(){return new l.window.Worker(ac.workerUrl)}ee.maxOverzooming=10,ee.maxUnderzooming=3;var Ae="mapboxgl_preloaded_worker_pool",Ve=function(){this.active={}};Ve.prototype.acquire=function(o){if(!this.workers)for(this.workers=[];this.workers.length<Ve.workerCount;)this.workers.push(new qe);return this.active[o]=!0,this.workers.slice()},Ve.prototype.release=function(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(function(u){u.terminate()}),this.workers=null)},Ve.prototype.isPreloaded=function(){return!!this.active[Ae]},Ve.prototype.numActive=function(){return Object.keys(this.active).length};var pt,st=Math.floor(l.browser.hardwareConcurrency/2);function ze(){return pt||(pt=new Ve),pt}function tt(o,u){var a={};for(var p in o)p!=="ref"&&(a[p]=o[p]);return l.refProperties.forEach(function(m){m in u&&(a[m]=u[m])}),a}function Je(o){o=o.slice();for(var u=Object.create(null),a=0;a<o.length;a++)u[o[a].id]=o[a];for(var p=0;p<o.length;p++)"ref"in o[p]&&(o[p]=tt(o[p],u[o[p].ref]));return o}Ve.workerCount=Math.max(Math.min(st,6),1);var Qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Wt(o,u,a){a.push({command:Qe.addSource,args:[o,u[o]]})}function rt(o,u,a){u.push({command:Qe.removeSource,args:[o]}),a[o]=!0}function or(o,u,a,p){rt(o,a,p),Wt(o,u,a)}function kr(o,u,a){var p;for(p in o[a])if(o[a].hasOwnProperty(p)&&p!=="data"&&!l.deepEqual(o[a][p],u[a][p]))return!1;for(p in u[a])if(u[a].hasOwnProperty(p)&&p!=="data"&&!l.deepEqual(o[a][p],u[a][p]))return!1;return!0}function Rt(o,u,a,p,m,g){var b;for(b in u=u||{},o=o||{})o.hasOwnProperty(b)&&(l.deepEqual(o[b],u[b])||a.push({command:g,args:[p,b,u[b],m]}));for(b in u)u.hasOwnProperty(b)&&!o.hasOwnProperty(b)&&(l.deepEqual(o[b],u[b])||a.push({command:g,args:[p,b,u[b],m]}))}function hr(o){return o.id}function ur(o,u){return o[u.id]=u,o}var Nn=function(o,u){this.reset(o,u)};Nn.prototype.reset=function(o,u){this.points=o||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Nn.prototype.lerp=function(o){if(this.points.length===1)return this.points[0];o=l.clamp(o,0,1);for(var u=1,a=this._distances[u],p=o*this.paddedLength+this.padding;a<p&&u<this._distances.length;)a=this._distances[++u];var m=u-1,g=this._distances[m],b=a-g,E=b>0?(p-g)/b:0;return this.points[m].mult(1-E).add(this.points[u].mult(E))};var vr=function(o,u,a){var p=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(o/a),this.yCellCount=Math.ceil(u/a);for(var g=0;g<this.xCellCount*this.yCellCount;g++)p.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=u,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0};function tn(o,u,a,p,m){var g=l.create();return u?(l.scale(g,g,[1/m,1/m,1]),a||l.rotateZ(g,g,p.angle)):l.multiply(g,p.labelPlaneMatrix,o),g}function Sr(o,u,a,p,m){if(u){var g=l.clone(o);return l.scale(g,g,[m,m,1]),a||l.rotateZ(g,g,-p.angle),g}return p.glCoordMatrix}function Dt(o,u){var a=[o.x,o.y,0,1];zn(a,a,u);var p=a[3];return{point:new l.Point(a[0]/p,a[1]/p),signedDistanceFromCamera:p}}function fr(o,u){return .5+o/u*.5}function ui(o,u){var a=o[0]/o[3],p=o[1]/o[3];return a>=-u[0]&&a<=u[0]&&p>=-u[1]&&p<=u[1]}function Hi(o,u,a,p,m,g,b,E){var A=p?o.textSizeData:o.iconSizeData,D=l.evaluateSizeForZoom(A,a.transform.zoom),j=[256/a.width*2+1,256/a.height*2+1],q=p?o.text.dynamicLayoutVertexArray:o.icon.dynamicLayoutVertexArray;q.clear();for(var Z=o.lineVertexArray,Q=p?o.text.placedSymbolArray:o.icon.placedSymbolArray,Y=a.transform.width/a.transform.height,oe=!1,H=0;H<Q.length;H++){var ie=Q.get(H);if(ie.hidden||ie.writingMode===l.WritingMode.vertical&&!oe)ii(ie.numGlyphs,q);else{oe=!1;var ce=[ie.anchorX,ie.anchorY,0,1];if(l.transformMat4(ce,ce,u),ui(ce,j)){var ve=fr(a.transform.cameraToCenterDistance,ce[3]),Me=l.evaluateSizeForFeature(A,D,ie),Pe=b?Me/ve:Me*ve,De=new l.Point(ie.anchorX,ie.anchorY),Ne=Dt(De,m).point,He={},We=Xo(ie,Pe,!1,E,u,m,g,o.glyphOffsetArray,Z,q,Ne,De,He,Y);oe=We.useVertical,(We.notEnoughRoom||oe||We.needsFlipping&&Xo(ie,Pe,!0,E,u,m,g,o.glyphOffsetArray,Z,q,Ne,De,He,Y).notEnoughRoom)&&ii(ie.numGlyphs,q)}else ii(ie.numGlyphs,q)}}p?o.text.dynamicLayoutVertexBuffer.updateData(q):o.icon.dynamicLayoutVertexBuffer.updateData(q)}function Nr(o,u,a,p,m,g,b,E,A,D,j){var q=E.glyphStartIndex+E.numGlyphs,Z=E.lineStartIndex,Q=E.lineStartIndex+E.lineLength,Y=u.getoffsetX(E.glyphStartIndex),oe=u.getoffsetX(q-1),H=rn(o*Y,a,p,m,g,b,E.segment,Z,Q,A,D,j);if(!H)return null;var ie=rn(o*oe,a,p,m,g,b,E.segment,Z,Q,A,D,j);return ie?{first:H,last:ie}:null}function Kn(o,u,a,p){return o===l.WritingMode.horizontal&&Math.abs(a.y-u.y)>Math.abs(a.x-u.x)*p?{useVertical:!0}:(o===l.WritingMode.vertical?u.y<a.y:u.x>a.x)?{needsFlipping:!0}:null}function Xo(o,u,a,p,m,g,b,E,A,D,j,q,Z,Q){var Y,oe=u/24,H=o.lineOffsetX*oe,ie=o.lineOffsetY*oe;if(o.numGlyphs>1){var ce=o.glyphStartIndex+o.numGlyphs,ve=o.lineStartIndex,Me=o.lineStartIndex+o.lineLength,Pe=Nr(oe,E,H,ie,a,j,q,o,A,g,Z);if(!Pe)return{notEnoughRoom:!0};var De=Dt(Pe.first.point,b).point,Ne=Dt(Pe.last.point,b).point;if(p&&!a){var He=Kn(o.writingMode,De,Ne,Q);if(He)return He}Y=[Pe.first];for(var We=o.glyphStartIndex+1;We<ce-1;We++)Y.push(rn(oe*E.getoffsetX(We),H,ie,a,j,q,o.segment,ve,Me,A,g,Z));Y.push(Pe.last)}else{if(p&&!a){var lt=Dt(q,m).point,Et=o.lineStartIndex+o.segment+1,At=new l.Point(A.getx(Et),A.gety(Et)),kt=Dt(At,m),mr=kt.signedDistanceFromCamera>0?kt.point:mo(q,At,lt,1,m),ht=Kn(o.writingMode,lt,mr,Q);if(ht)return ht}var Zt=rn(oe*E.getoffsetX(o.glyphStartIndex),H,ie,a,j,q,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,A,g,Z);if(!Zt)return{notEnoughRoom:!0};Y=[Zt]}for(var Jt=0,qt=Y;Jt<qt.length;Jt+=1){var jt=qt[Jt];l.addDynamicAttributes(D,jt.point,jt.angle)}return{}}function mo(o,u,a,p,m){var g=Dt(o.add(o.sub(u)._unit()),m).point,b=a.sub(g);return a.add(b._mult(p/b.mag()))}function rn(o,u,a,p,m,g,b,E,A,D,j,q){var Z=p?o-u:o+u,Q=Z>0?1:-1,Y=0;p&&(Q*=-1,Y=Math.PI),Q<0&&(Y+=Math.PI);for(var oe=Q>0?E+b:E+b+1,H=m,ie=m,ce=0,ve=0,Me=Math.abs(Z),Pe=[];ce+ve<=Me;){if((oe+=Q)<E||oe>=A)return null;if(ie=H,Pe.push(H),(H=q[oe])===void 0){var De=new l.Point(D.getx(oe),D.gety(oe)),Ne=Dt(De,j);if(Ne.signedDistanceFromCamera>0)H=q[oe]=Ne.point;else{var He=oe-Q;H=mo(ce===0?g:new l.Point(D.getx(He),D.gety(He)),De,ie,Me-ce+1,j)}}ce+=ve,ve=ie.dist(H)}var We=(Me-ce)/ve,lt=H.sub(ie),Et=lt.mult(We)._add(ie);Et._add(lt._unit()._perp()._mult(a*Q));var At=Y+Math.atan2(H.y-ie.y,H.x-ie.x);return Pe.push(Et),{point:Et,angle:At,path:Pe}}vr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},vr.prototype.insert=function(o,u,a,p,m){this._forEachCell(u,a,p,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(u),this.bboxes.push(a),this.bboxes.push(p),this.bboxes.push(m)},vr.prototype.insertCircle=function(o,u,a,p){this._forEachCell(u-p,a-p,u+p,a+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(u),this.circles.push(a),this.circles.push(p)},vr.prototype._insertBoxCell=function(o,u,a,p,m,g){this.boxCells[m].push(g)},vr.prototype._insertCircleCell=function(o,u,a,p,m,g){this.circleCells[m].push(g)},vr.prototype._query=function(o,u,a,p,m,g){if(a<0||o>this.width||p<0||u>this.height)return!m&&[];var b=[];if(o<=0&&u<=0&&this.width<=a&&this.height<=p){if(m)return!0;for(var E=0;E<this.boxKeys.length;E++)b.push({key:this.boxKeys[E],x1:this.bboxes[4*E],y1:this.bboxes[4*E+1],x2:this.bboxes[4*E+2],y2:this.bboxes[4*E+3]});for(var A=0;A<this.circleKeys.length;A++){var D=this.circles[3*A],j=this.circles[3*A+1],q=this.circles[3*A+2];b.push({key:this.circleKeys[A],x1:D-q,y1:j-q,x2:D+q,y2:j+q})}return g?b.filter(g):b}return this._forEachCell(o,u,a,p,this._queryCell,b,{hitTest:m,seenUids:{box:{},circle:{}}},g),m?b.length>0:b},vr.prototype._queryCircle=function(o,u,a,p,m){var g=o-a,b=o+a,E=u-a,A=u+a;if(b<0||g>this.width||A<0||E>this.height)return!p&&[];var D=[];return this._forEachCell(g,E,b,A,this._queryCellCircle,D,{hitTest:p,circle:{x:o,y:u,radius:a},seenUids:{box:{},circle:{}}},m),p?D.length>0:D},vr.prototype.query=function(o,u,a,p,m){return this._query(o,u,a,p,!1,m)},vr.prototype.hitTest=function(o,u,a,p,m){return this._query(o,u,a,p,!0,m)},vr.prototype.hitTestCircle=function(o,u,a,p){return this._queryCircle(o,u,a,!0,p)},vr.prototype._queryCell=function(o,u,a,p,m,g,b,E){var A=b.seenUids,D=this.boxCells[m];if(D!==null)for(var j=this.bboxes,q=0,Z=D;q<Z.length;q+=1){var Q=Z[q];if(!A.box[Q]){A.box[Q]=!0;var Y=4*Q;if(o<=j[Y+2]&&u<=j[Y+3]&&a>=j[Y+0]&&p>=j[Y+1]&&(!E||E(this.boxKeys[Q]))){if(b.hitTest)return g.push(!0),!0;g.push({key:this.boxKeys[Q],x1:j[Y],y1:j[Y+1],x2:j[Y+2],y2:j[Y+3]})}}}var oe=this.circleCells[m];if(oe!==null)for(var H=this.circles,ie=0,ce=oe;ie<ce.length;ie+=1){var ve=ce[ie];if(!A.circle[ve]){A.circle[ve]=!0;var Me=3*ve;if(this._circleAndRectCollide(H[Me],H[Me+1],H[Me+2],o,u,a,p)&&(!E||E(this.circleKeys[ve]))){if(b.hitTest)return g.push(!0),!0;var Pe=H[Me],De=H[Me+1],Ne=H[Me+2];g.push({key:this.circleKeys[ve],x1:Pe-Ne,y1:De-Ne,x2:Pe+Ne,y2:De+Ne})}}}},vr.prototype._queryCellCircle=function(o,u,a,p,m,g,b,E){var A=b.circle,D=b.seenUids,j=this.boxCells[m];if(j!==null)for(var q=this.bboxes,Z=0,Q=j;Z<Q.length;Z+=1){var Y=Q[Z];if(!D.box[Y]){D.box[Y]=!0;var oe=4*Y;if(this._circleAndRectCollide(A.x,A.y,A.radius,q[oe+0],q[oe+1],q[oe+2],q[oe+3])&&(!E||E(this.boxKeys[Y])))return g.push(!0),!0}}var H=this.circleCells[m];if(H!==null)for(var ie=this.circles,ce=0,ve=H;ce<ve.length;ce+=1){var Me=ve[ce];if(!D.circle[Me]){D.circle[Me]=!0;var Pe=3*Me;if(this._circlesCollide(ie[Pe],ie[Pe+1],ie[Pe+2],A.x,A.y,A.radius)&&(!E||E(this.circleKeys[Me])))return g.push(!0),!0}}},vr.prototype._forEachCell=function(o,u,a,p,m,g,b,E){for(var A=this._convertToXCellCoord(o),D=this._convertToYCellCoord(u),j=this._convertToXCellCoord(a),q=this._convertToYCellCoord(p),Z=A;Z<=j;Z++)for(var Q=D;Q<=q;Q++)if(m.call(this,o,u,a,p,this.xCellCount*Q+Z,g,b,E))return},vr.prototype._convertToXCellCoord=function(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))},vr.prototype._convertToYCellCoord=function(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))},vr.prototype._circlesCollide=function(o,u,a,p,m,g){var b=p-o,E=m-u,A=a+g;return A*A>b*b+E*E},vr.prototype._circleAndRectCollide=function(o,u,a,p,m,g,b){var E=(g-p)/2,A=Math.abs(o-(p+E));if(A>E+a)return!1;var D=(b-m)/2,j=Math.abs(u-(m+D));if(j>D+a)return!1;if(A<=E||j<=D)return!0;var q=A-E,Z=j-D;return q*q+Z*Z<=a*a};var Rs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ii(o,u){for(var a=0;a<o;a++){var p=u.length;u.resize(p+4),u.float32.set(Rs,3*p)}}function zn(o,u,a){var p=u[0],m=u[1];return o[0]=a[0]*p+a[4]*m+a[12],o[1]=a[1]*p+a[5]*m+a[13],o[3]=a[3]*p+a[7]*m+a[15],o}var Ii=function(o,u,a){u===void 0&&(u=new vr(o.width+200,o.height+200,25)),a===void 0&&(a=new vr(o.width+200,o.height+200,25)),this.transform=o,this.grid=u,this.ignoredGrid=a,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+100,this.screenBottomBoundary=o.height+100,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200};function Vr(o,u,a){return u*(l.EXTENT/(o.tileSize*Math.pow(2,a-o.tileID.overscaledZ)))}Ii.prototype.placeCollisionBox=function(o,u,a,p,m){var g=this.projectAndGetPerspectiveRatio(p,o.anchorPointX,o.anchorPointY),b=a*g.perspectiveRatio,E=o.x1*b+g.point.x,A=o.y1*b+g.point.y,D=o.x2*b+g.point.x,j=o.y2*b+g.point.y;return!this.isInsideGrid(E,A,D,j)||!u&&this.grid.hitTest(E,A,D,j,m)?{box:[],offscreen:!1}:{box:[E,A,D,j],offscreen:this.isOffscreen(E,A,D,j)}},Ii.prototype.placeCollisionCircles=function(o,u,a,p,m,g,b,E,A,D,j,q,Z){var Q=[],Y=new l.Point(u.anchorX,u.anchorY),oe=Dt(Y,g),H=fr(this.transform.cameraToCenterDistance,oe.signedDistanceFromCamera),ie=(D?m/H:m*H)/l.ONE_EM,ce=Dt(Y,b).point,ve=Nr(ie,p,u.lineOffsetX*ie,u.lineOffsetY*ie,!1,ce,Y,u,a,b,{}),Me=!1,Pe=!1,De=!0;if(ve){for(var Ne=.5*q*H+Z,He=new l.Point(-100,-100),We=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),lt=new Nn,Et=ve.first,At=ve.last,kt=[],mr=Et.path.length-1;mr>=1;mr--)kt.push(Et.path[mr]);for(var ht=1;ht<At.path.length;ht++)kt.push(At.path[ht]);var Zt=2.5*Ne;if(E){var Jt=kt.map(function(Uo){return Dt(Uo,E)});kt=Jt.some(function(Uo){return Uo.signedDistanceFromCamera<=0})?[]:Jt.map(function(Uo){return Uo.point})}var qt=[];if(kt.length>0){for(var jt=kt[0].clone(),Kt=kt[0].clone(),Nt=1;Nt<kt.length;Nt++)jt.x=Math.min(jt.x,kt[Nt].x),jt.y=Math.min(jt.y,kt[Nt].y),Kt.x=Math.max(Kt.x,kt[Nt].x),Kt.y=Math.max(Kt.y,kt[Nt].y);qt=jt.x>=He.x&&Kt.x<=We.x&&jt.y>=He.y&&Kt.y<=We.y?[kt]:Kt.x<He.x||jt.x>We.x||Kt.y<He.y||jt.y>We.y?[]:l.clipLine([kt],He.x,He.y,We.x,We.y)}for(var Ot=0,Vn=qt;Ot<Vn.length;Ot+=1){var fn;lt.reset(Vn[Ot],.25*Ne),fn=lt.length<=.5*Ne?1:Math.ceil(lt.paddedLength/Zt)+1;for(var pi=0;pi<fn;pi++){var Qn=pi/Math.max(fn-1,1),un=lt.lerp(Qn),_n=un.x+100,ao=un.y+100;Q.push(_n,ao,Ne,0);var _i=_n-Ne,ds=ao-Ne,Li=_n+Ne,aa=ao+Ne;if(De=De&&this.isOffscreen(_i,ds,Li,aa),Pe=Pe||this.isInsideGrid(_i,ds,Li,aa),!o&&this.grid.hitTestCircle(_n,ao,Ne,j)&&(Me=!0,!A))return{circles:[],offscreen:!1,collisionDetected:Me}}}}return{circles:!A&&Me||!Pe?[]:Q,offscreen:De,collisionDetected:Me}},Ii.prototype.queryRenderedSymbols=function(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var u=[],a=1/0,p=1/0,m=-1/0,g=-1/0,b=0,E=o;b<E.length;b+=1){var A=E[b],D=new l.Point(A.x+100,A.y+100);a=Math.min(a,D.x),p=Math.min(p,D.y),m=Math.max(m,D.x),g=Math.max(g,D.y),u.push(D)}for(var j={},q={},Z=0,Q=this.grid.query(a,p,m,g).concat(this.ignoredGrid.query(a,p,m,g));Z<Q.length;Z+=1){var Y=Q[Z],oe=Y.key;if(j[oe.bucketInstanceId]===void 0&&(j[oe.bucketInstanceId]={}),!j[oe.bucketInstanceId][oe.featureIndex]){var H=[new l.Point(Y.x1,Y.y1),new l.Point(Y.x2,Y.y1),new l.Point(Y.x2,Y.y2),new l.Point(Y.x1,Y.y2)];l.polygonIntersectsPolygon(u,H)&&(j[oe.bucketInstanceId][oe.featureIndex]=!0,q[oe.bucketInstanceId]===void 0&&(q[oe.bucketInstanceId]=[]),q[oe.bucketInstanceId].push(oe.featureIndex))}}return q},Ii.prototype.insertCollisionBox=function(o,u,a,p,m){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:p,collisionGroupID:m},o[0],o[1],o[2],o[3])},Ii.prototype.insertCollisionCircles=function(o,u,a,p,m){for(var g=u?this.ignoredGrid:this.grid,b={bucketInstanceId:a,featureIndex:p,collisionGroupID:m},E=0;E<o.length;E+=4)g.insertCircle(b,o[E],o[E+1],o[E+2])},Ii.prototype.projectAndGetPerspectiveRatio=function(o,u,a){var p=[u,a,0,1];return zn(p,p,o),{point:new l.Point((p[0]/p[3]+1)/2*this.transform.width+100,(-p[1]/p[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/p[3]*.5}},Ii.prototype.isOffscreen=function(o,u,a,p){return a<100||o>=this.screenRightBoundary||p<100||u>this.screenBottomBoundary},Ii.prototype.isInsideGrid=function(o,u,a,p){return a>=0&&o<this.gridRightBoundary&&p>=0&&u<this.gridBottomBoundary},Ii.prototype.getViewportMatrix=function(){var o=l.identity([]);return l.translate(o,o,[-100,-100,0]),o};var yo=function(o,u,a,p){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?u:-u))):p&&a?1:0,this.placed=a};yo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ki=function(o,u,a,p,m){this.text=new yo(o?o.text:null,u,a,m),this.icon=new yo(o?o.icon:null,u,p,m)};ki.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var jl=function(o,u,a){this.text=o,this.icon=u,this.skipFade=a},Ai=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},S=function(o,u,a,p,m){this.bucketInstanceId=o,this.featureIndex=u,this.sourceLayerIndex=a,this.bucketIndex=p,this.tileID=m},T=function(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}};function B(o,u,a,p,m){var g=l.getAnchorAlignment(o),b=-(g.horizontalAlign-.5)*u,E=-(g.verticalAlign-.5)*a,A=l.evaluateVariableOffset(o,p);return new l.Point(b+A[0]*m,E+A[1]*m)}function le(o,u,a,p,m,g){var b=o.x1,E=o.x2,A=o.y1,D=o.y2,j=o.anchorPointX,q=o.anchorPointY,Z=new l.Point(u,a);return p&&Z._rotate(m?g:-g),{x1:b+Z.x,y1:A+Z.y,x2:E+Z.x,y2:D+Z.y,anchorPointX:j,anchorPointY:q}}T.prototype.get=function(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){var u=++this.maxGroupID;this.collisionGroups[o]={ID:u,predicate:function(a){return a.collisionGroupID===u}}}return this.collisionGroups[o]};var ge=function(o,u,a,p){this.transform=o.clone(),this.collisionIndex=new Ii(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new T(a),this.collisionCircleArrays={},this.prevPlacement=p,p&&(p.prevPlacement=void 0),this.placedOrientations={}};function fe(o,u,a,p,m){o.emplaceBack(u?1:0,a?1:0,p||0,m||0),o.emplaceBack(u?1:0,a?1:0,p||0,m||0),o.emplaceBack(u?1:0,a?1:0,p||0,m||0),o.emplaceBack(u?1:0,a?1:0,p||0,m||0)}ge.prototype.getBucketParts=function(o,u,a,p){var m=a.getBucket(u),g=a.latestFeatureIndex;if(m&&g&&u.id===m.layerIds[0]){var b=a.collisionBoxArray,E=m.layers[0].layout,A=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),D=a.tileSize/l.EXTENT,j=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),q=E.get("text-pitch-alignment")==="map",Z=E.get("text-rotation-alignment")==="map",Q=Vr(a,1,this.transform.zoom),Y=tn(j,q,Z,this.transform,Q),oe=null;if(q){var H=Sr(j,q,Z,this.transform,Q);oe=l.multiply([],this.transform.labelPlaneMatrix,H)}this.retainedQueryData[m.bucketInstanceId]=new S(m.bucketInstanceId,g,m.sourceLayerIndex,m.index,a.tileID);var ie={bucket:m,layout:E,posMatrix:j,textLabelPlaneMatrix:Y,labelToScreenMatrix:oe,scale:A,textPixelRatio:D,holdingForFade:a.holdingForFade(),collisionBoxArray:b,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(p)for(var ce=0,ve=m.sortKeyRanges;ce<ve.length;ce+=1){var Me=ve[ce];o.push({sortKey:Me.sortKey,symbolInstanceStart:Me.symbolInstanceStart,symbolInstanceEnd:Me.symbolInstanceEnd,parameters:ie})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:ie})}},ge.prototype.attemptAnchorPlacement=function(o,u,a,p,m,g,b,E,A,D,j,q,Z,Q,Y){var oe,H=[q.textOffset0,q.textOffset1],ie=B(o,a,p,H,m),ce=this.collisionIndex.placeCollisionBox(le(u,ie.x,ie.y,g,b,this.transform.angle),j,E,A,D.predicate);if(!Y||this.collisionIndex.placeCollisionBox(le(Y,ie.x,ie.y,g,b,this.transform.angle),j,E,A,D.predicate).box.length!==0)return ce.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(oe=this.prevPlacement.variableOffsets[q.crossTileID].anchor),this.variableOffsets[q.crossTileID]={textOffset:H,width:a,height:p,anchor:o,textBoxScale:m,prevAnchor:oe},this.markUsedJustification(Z,o,q,Q),Z.allowVerticalPlacement&&(this.markUsedOrientation(Z,Q,q),this.placedOrientations[q.crossTileID]=Q),{shift:ie,placedGlyphBoxes:ce}):void 0},ge.prototype.placeLayerBucketPart=function(o,u,a){var p=this,m=o.parameters,g=m.bucket,b=m.layout,E=m.posMatrix,A=m.textLabelPlaneMatrix,D=m.labelToScreenMatrix,j=m.textPixelRatio,q=m.holdingForFade,Z=m.collisionBoxArray,Q=m.partiallyEvaluatedTextSize,Y=m.collisionGroup,oe=b.get("text-optional"),H=b.get("icon-optional"),ie=b.get("text-allow-overlap"),ce=b.get("icon-allow-overlap"),ve=b.get("text-rotation-alignment")==="map",Me=b.get("text-pitch-alignment")==="map",Pe=b.get("icon-text-fit")!=="none",De=b.get("symbol-z-order")==="viewport-y",Ne=ie&&(ce||!g.hasIconData()||H),He=ce&&(ie||!g.hasTextData()||oe);!g.collisionArrays&&Z&&g.deserializeCollisionBoxes(Z);var We=function(ht,Zt){if(!u[ht.crossTileID])if(q)p.placements[ht.crossTileID]=new jl(!1,!1,!1);else{var Jt,qt=!1,jt=!1,Kt=!0,Nt=null,Ot={box:null,offscreen:null},Vn={box:null,offscreen:null},fn=null,pi=null,Qn=0,un=0,_n=0;Zt.textFeatureIndex?Qn=Zt.textFeatureIndex:ht.useRuntimeCollisionCircles&&(Qn=ht.featureIndex),Zt.verticalTextFeatureIndex&&(un=Zt.verticalTextFeatureIndex);var ao=Zt.textBox;if(ao){var _i=function(wr){var So=l.WritingMode.horizontal;if(g.allowVerticalPlacement&&!wr&&p.prevPlacement){var Di=p.prevPlacement.placedOrientations[ht.crossTileID];Di&&(p.placedOrientations[ht.crossTileID]=Di,p.markUsedOrientation(g,So=Di,ht))}return So},ds=function(wr,So){if(g.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&Zt.verticalTextBox)for(var Di=0,Ks=g.writingModes;Di<Ks.length&&(Ks[Di]===l.WritingMode.vertical?(Ot=So(),Vn=Ot):Ot=wr(),!(Ot&&Ot.box&&Ot.box.length));Di+=1);else Ot=wr()};if(b.get("text-variable-anchor")){var Li=b.get("text-variable-anchor");if(p.prevPlacement&&p.prevPlacement.variableOffsets[ht.crossTileID]){var aa=p.prevPlacement.variableOffsets[ht.crossTileID];Li.indexOf(aa.anchor)>0&&(Li=Li.filter(function(wr){return wr!==aa.anchor})).unshift(aa.anchor)}var Uo=function(wr,So,Di){for(var Ks=wr.x2-wr.x1,km=wr.y2-wr.y1,sc=ht.textBoxScale,Am=Pe&&!ce?So:null,dl={box:[],offscreen:!1},hf=ie?2*Li.length:Li.length,bu=0;bu<hf;++bu){var uc=p.attemptAnchorPlacement(Li[bu%Li.length],wr,Ks,km,sc,ve,Me,j,E,Y,bu>=Li.length,ht,g,Di,Am);if(uc&&(dl=uc.placedGlyphBoxes)&&dl.box&&dl.box.length){qt=!0,Nt=uc.shift;break}}return dl};ds(function(){return Uo(ao,Zt.iconBox,l.WritingMode.horizontal)},function(){var wr=Zt.verticalTextBox;return g.allowVerticalPlacement&&!(Ot&&Ot.box&&Ot.box.length)&&ht.numVerticalGlyphVertices>0&&wr?Uo(wr,Zt.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Ot&&(qt=Ot.box,Kt=Ot.offscreen);var pl=_i(Ot&&Ot.box);if(!qt&&p.prevPlacement){var _u=p.prevPlacement.variableOffsets[ht.crossTileID];_u&&(p.variableOffsets[ht.crossTileID]=_u,p.markUsedJustification(g,_u.anchor,ht,pl))}}else{var ms=function(wr,So){var Di=p.collisionIndex.placeCollisionBox(wr,ie,j,E,Y.predicate);return Di&&Di.box&&Di.box.length&&(p.markUsedOrientation(g,So,ht),p.placedOrientations[ht.crossTileID]=So),Di};ds(function(){return ms(ao,l.WritingMode.horizontal)},function(){var wr=Zt.verticalTextBox;return g.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&wr?ms(wr,l.WritingMode.vertical):{box:null,offscreen:null}}),_i(Ot&&Ot.box&&Ot.box.length)}}if(qt=(Jt=Ot)&&Jt.box&&Jt.box.length>0,Kt=Jt&&Jt.offscreen,ht.useRuntimeCollisionCircles){var xu=g.text.placedSymbolArray.get(ht.centerJustifiedTextSymbolIndex),hl=l.evaluateSizeForFeature(g.textSizeData,Q,xu),Sa=b.get("text-padding");fn=p.collisionIndex.placeCollisionCircles(ie,xu,g.lineVertexArray,g.glyphOffsetArray,hl,E,A,D,a,Me,Y.predicate,ht.collisionCircleDiameter,Sa),qt=ie||fn.circles.length>0&&!fn.collisionDetected,Kt=Kt&&fn.offscreen}if(Zt.iconFeatureIndex&&(_n=Zt.iconFeatureIndex),Zt.iconBox){var fl=function(wr){var So=Pe&&Nt?le(wr,Nt.x,Nt.y,ve,Me,p.transform.angle):wr;return p.collisionIndex.placeCollisionBox(So,ce,j,E,Y.predicate)};jt=Vn&&Vn.box&&Vn.box.length&&Zt.verticalIconBox?(pi=fl(Zt.verticalIconBox)).box.length>0:(pi=fl(Zt.iconBox)).box.length>0,Kt=Kt&&pi.offscreen}var Ea=oe||ht.numHorizontalGlyphVertices===0&&ht.numVerticalGlyphVertices===0,qn=H||ht.numIconVertices===0;if(Ea||qn?qn?Ea||(jt=jt&&qt):qt=jt&&qt:jt=qt=jt&&qt,qt&&Jt&&Jt.box&&p.collisionIndex.insertCollisionBox(Jt.box,b.get("text-ignore-placement"),g.bucketInstanceId,Vn&&Vn.box&&un?un:Qn,Y.ID),jt&&pi&&p.collisionIndex.insertCollisionBox(pi.box,b.get("icon-ignore-placement"),g.bucketInstanceId,_n,Y.ID),fn&&(qt&&p.collisionIndex.insertCollisionCircles(fn.circles,b.get("text-ignore-placement"),g.bucketInstanceId,Qn,Y.ID),a)){var Ha=g.bucketInstanceId,ys=p.collisionCircleArrays[Ha];ys===void 0&&(ys=p.collisionCircleArrays[Ha]=new Ai);for(var Xs=0;Xs<fn.circles.length;Xs+=4)ys.circles.push(fn.circles[Xs+0]),ys.circles.push(fn.circles[Xs+1]),ys.circles.push(fn.circles[Xs+2]),ys.circles.push(fn.collisionDetected?1:0)}p.placements[ht.crossTileID]=new jl(qt||Ne,jt||He,Kt||g.justReloaded),u[ht.crossTileID]=!0}};if(De)for(var lt=g.getSortedSymbolIndexes(this.transform.angle),Et=lt.length-1;Et>=0;--Et){var At=lt[Et];We(g.symbolInstances.get(At),g.collisionArrays[At])}else for(var kt=o.symbolInstanceStart;kt<o.symbolInstanceEnd;kt++)We(g.symbolInstances.get(kt),g.collisionArrays[kt]);if(a&&g.bucketInstanceId in this.collisionCircleArrays){var mr=this.collisionCircleArrays[g.bucketInstanceId];l.invert(mr.invProjMatrix,E),mr.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1},ge.prototype.markUsedJustification=function(o,u,a,p){var m;m=p===l.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(u)];for(var g=0,b=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];g<b.length;g+=1){var E=b[g];E>=0&&(o.text.placedSymbolArray.get(E).crossTileID=m>=0&&E!==m?0:a.crossTileID)}},ge.prototype.markUsedOrientation=function(o,u,a){for(var p=u===l.WritingMode.horizontal||u===l.WritingMode.horizontalOnly?u:0,m=u===l.WritingMode.vertical?u:0,g=0,b=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];g<b.length;g+=1)o.text.placedSymbolArray.get(b[g]).placedOrientation=p;a.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=m)},ge.prototype.commit=function(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;var u=this.prevPlacement,a=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;var p=u?u.symbolFadeChange(o):1,m=u?u.opacities:{},g=u?u.variableOffsets:{},b=u?u.placedOrientations:{};for(var E in this.placements){var A=this.placements[E],D=m[E];D?(this.opacities[E]=new ki(D,p,A.text,A.icon),a=a||A.text!==D.text.placed||A.icon!==D.icon.placed):(this.opacities[E]=new ki(null,p,A.text,A.icon,A.skipFade),a=a||A.text||A.icon)}for(var j in m){var q=m[j];if(!this.opacities[j]){var Z=new ki(q,p,!1,!1);Z.isHidden()||(this.opacities[j]=Z,a=a||q.text.placed||q.icon.placed)}}for(var Q in g)this.variableOffsets[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.variableOffsets[Q]=g[Q]);for(var Y in b)this.placedOrientations[Y]||!this.opacities[Y]||this.opacities[Y].isHidden()||(this.placedOrientations[Y]=b[Y]);a?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:o)},ge.prototype.updateLayerOpacities=function(o,u){for(var a={},p=0,m=u;p<m.length;p+=1){var g=m[p],b=g.getBucket(o);b&&g.latestFeatureIndex&&o.id===b.layerIds[0]&&this.updateBucketOpacities(b,a,g.collisionBoxArray)}},ge.prototype.updateBucketOpacities=function(o,u,a){var p=this;o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();var m=o.layers[0].layout,g=new ki(null,0,!1,!1,!0),b=m.get("text-allow-overlap"),E=m.get("icon-allow-overlap"),A=m.get("text-variable-anchor"),D=m.get("text-rotation-alignment")==="map",j=m.get("text-pitch-alignment")==="map",q=m.get("icon-text-fit")!=="none",Z=new ki(null,0,b&&(E||!o.hasIconData()||m.get("icon-optional")),E&&(b||!o.hasTextData()||m.get("text-optional")),!0);!o.collisionArrays&&a&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(a);for(var Q=function(ie,ce,ve){for(var Me=0;Me<ce/4;Me++)ie.opacityVertexArray.emplaceBack(ve)},Y=function(ie){var ce=o.symbolInstances.get(ie),ve=ce.numHorizontalGlyphVertices,Me=ce.numVerticalGlyphVertices,Pe=ce.crossTileID,De=p.opacities[Pe];u[Pe]?De=g:De||(p.opacities[Pe]=De=Z),u[Pe]=!0;var Ne=ce.numIconVertices>0,He=p.placedOrientations[ce.crossTileID],We=He===l.WritingMode.vertical,lt=He===l.WritingMode.horizontal||He===l.WritingMode.horizontalOnly;if(ve>0||Me>0){var Et=Ft(De.text);Q(o.text,ve,We?Vt:Et),Q(o.text,Me,lt?Vt:Et);var At=De.text.isHidden();[ce.rightJustifiedTextSymbolIndex,ce.centerJustifiedTextSymbolIndex,ce.leftJustifiedTextSymbolIndex].forEach(function(Ot){Ot>=0&&(o.text.placedSymbolArray.get(Ot).hidden=At||We?1:0)}),ce.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(ce.verticalPlacedTextSymbolIndex).hidden=At||lt?1:0);var kt=p.variableOffsets[ce.crossTileID];kt&&p.markUsedJustification(o,kt.anchor,ce,He);var mr=p.placedOrientations[ce.crossTileID];mr&&(p.markUsedJustification(o,"left",ce,mr),p.markUsedOrientation(o,mr,ce))}if(Ne){var ht=Ft(De.icon),Zt=!(q&&ce.verticalPlacedIconSymbolIndex&&We);ce.placedIconSymbolIndex>=0&&(Q(o.icon,ce.numIconVertices,Zt?ht:Vt),o.icon.placedSymbolArray.get(ce.placedIconSymbolIndex).hidden=De.icon.isHidden()),ce.verticalPlacedIconSymbolIndex>=0&&(Q(o.icon,ce.numVerticalIconVertices,Zt?Vt:ht),o.icon.placedSymbolArray.get(ce.verticalPlacedIconSymbolIndex).hidden=De.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){var Jt=o.collisionArrays[ie];if(Jt){var qt=new l.Point(0,0);if(Jt.textBox||Jt.verticalTextBox){var jt=!0;if(A){var Kt=p.variableOffsets[Pe];Kt?(qt=B(Kt.anchor,Kt.width,Kt.height,Kt.textOffset,Kt.textBoxScale),D&&qt._rotate(j?p.transform.angle:-p.transform.angle)):jt=!1}Jt.textBox&&fe(o.textCollisionBox.collisionVertexArray,De.text.placed,!jt||We,qt.x,qt.y),Jt.verticalTextBox&&fe(o.textCollisionBox.collisionVertexArray,De.text.placed,!jt||lt,qt.x,qt.y)}var Nt=Boolean(!lt&&Jt.verticalIconBox);Jt.iconBox&&fe(o.iconCollisionBox.collisionVertexArray,De.icon.placed,Nt,q?qt.x:0,q?qt.y:0),Jt.verticalIconBox&&fe(o.iconCollisionBox.collisionVertexArray,De.icon.placed,!Nt,q?qt.x:0,q?qt.y:0)}}},oe=0;oe<o.symbolInstances.length;oe++)Y(oe);if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){var H=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=H.invProjMatrix,o.placementViewportMatrix=H.viewportMatrix,o.collisionCircleArray=H.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}},ge.prototype.symbolFadeChange=function(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ge.prototype.zoomAdjustment=function(o){return Math.max(0,(this.transform.zoom-o)/1.5)},ge.prototype.hasTransitions=function(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration},ge.prototype.stillRecent=function(o,u){var a=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*a>o},ge.prototype.setStale=function(){this.stale=!0};var we=Math.pow(2,25),$e=Math.pow(2,24),Ge=Math.pow(2,17),dt=Math.pow(2,16),Te=Math.pow(2,9),ut=Math.pow(2,8),mt=Math.pow(2,1);function Ft(o){if(o.opacity===0&&!o.placed)return 0;if(o.opacity===1&&o.placed)return 4294967295;var u=o.placed?1:0,a=Math.floor(127*o.opacity);return a*we+u*$e+a*Ge+u*dt+a*Te+u*ut+a*mt+u}var Vt=0,an=function(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};an.prototype.continuePlacement=function(o,u,a,p,m){for(var g=this._bucketParts;this._currentTileIndex<o.length;)if(u.getBucketParts(g,p,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,g.sort(function(b,E){return b.sortKey-E.sortKey}));this._currentPartIndex<g.length;)if(u.placeLayerBucketPart(g[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,m())return!0;return!1};var Be=function(o,u,a,p,m,g,b){this.placement=new ge(o,m,g,b),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=p,this._done=!1};Be.prototype.isDone=function(){return this._done},Be.prototype.continuePlacement=function(o,u,a){for(var p=this,m=l.browser.now(),g=function(){var A=l.browser.now()-m;return!p._forceFullPlacement&&A>2};this._currentPlacementIndex>=0;){var b=u[o[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=E)&&(!b.maxzoom||b.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new an(b)),this._inProgressLayer.continuePlacement(a[b.source],this.placement,this._showCollisionBoxes,b,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Be.prototype.commit=function(o){return this.placement.commit(o),this.placement};var gt=512/l.EXTENT/2,Pr=function(o,u,a){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var p=0;p<u.length;p++){var m=u.get(p),g=m.key;this.indexedSymbolInstances[g]||(this.indexedSymbolInstances[g]=[]),this.indexedSymbolInstances[g].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,o)})}};Pr.prototype.getScaledCoordinates=function(o,u){var a=gt/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*l.EXTENT+o.anchorX)*a),y:Math.floor((u.canonical.y*l.EXTENT+o.anchorY)*a)}},Pr.prototype.findMatches=function(o,u,a){for(var p=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z),m=0;m<o.length;m++){var g=o.get(m);if(!g.crossTileID){var b=this.indexedSymbolInstances[g.key];if(b)for(var E=this.getScaledCoordinates(g,u),A=0,D=b;A<D.length;A+=1){var j=D[A];if(Math.abs(j.coord.x-E.x)<=p&&Math.abs(j.coord.y-E.y)<=p&&!a[j.crossTileID]){a[j.crossTileID]=!0,g.crossTileID=j.crossTileID;break}}}}};var ar=function(){this.maxCrossTileID=0};ar.prototype.generate=function(){return++this.maxCrossTileID};var Lr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Lr.prototype.handleWrapJump=function(o){var u=Math.round((o-this.lng)/360);if(u!==0)for(var a in this.indexes){var p=this.indexes[a],m={};for(var g in p){var b=p[g];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+u),m[b.tileID.key]=b}this.indexes[a]=m}this.lng=o},Lr.prototype.addBucket=function(o,u,a){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(var p=0;p<u.symbolInstances.length;p++)u.symbolInstances.get(p).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});var m=this.usedCrossTileIDs[o.overscaledZ];for(var g in this.indexes){var b=this.indexes[g];if(Number(g)>o.overscaledZ)for(var E in b){var A=b[E];A.tileID.isChildOf(o)&&A.findMatches(u.symbolInstances,o,m)}else{var D=b[o.scaledTo(Number(g)).key];D&&D.findMatches(u.symbolInstances,o,m)}}for(var j=0;j<u.symbolInstances.length;j++){var q=u.symbolInstances.get(j);q.crossTileID||(q.crossTileID=a.generate(),m[q.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Pr(o,u.symbolInstances,u.bucketInstanceId),!0},Lr.prototype.removeBucketCrossTileIDs=function(o,u){for(var a in u.indexedSymbolInstances)for(var p=0,m=u.indexedSymbolInstances[a];p<m.length;p+=1)delete this.usedCrossTileIDs[o][m[p].crossTileID]},Lr.prototype.removeStaleBuckets=function(o){var u=!1;for(var a in this.indexes){var p=this.indexes[a];for(var m in p)o[p[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,p[m]),delete p[m],u=!0)}return u};var It=function(){this.layerIndexes={},this.crossTileIDs=new ar,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};It.prototype.addLayer=function(o,u,a){var p=this.layerIndexes[o.id];p===void 0&&(p=this.layerIndexes[o.id]=new Lr);var m=!1,g={};p.handleWrapJump(a);for(var b=0,E=u;b<E.length;b+=1){var A=E[b],D=A.getBucket(o);D&&o.id===D.layerIds[0]&&(D.bucketInstanceId||(D.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(A.tileID,D,this.crossTileIDs)&&(m=!0),g[D.bucketInstanceId]=!0)}return p.removeStaleBuckets(g)&&(m=!0),m},It.prototype.pruneUnusedLayers=function(o){var u={};for(var a in o.forEach(function(p){u[p]=!0}),this.layerIndexes)u[a]||delete this.layerIndexes[a]};var Mi=function(o,u){return l.emitValidationErrors(o,u&&u.filter(function(a){return a.identifier!=="source.canvas"}))},li=l.pick(Qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),lr=l.pick(Qe,["setCenter","setZoom","setBearing","setPitch"]),yi=function(){var o={},u=l.styleSpec.$version;for(var a in l.styleSpec.$root){var p,m=l.styleSpec.$root[a];m.required&&(p=a==="version"?u:m.type==="array"?[]:{})!=null&&(o[a]=p)}return o}(),qr=function(o){function u(a,p){var m=this;p===void 0&&(p={}),o.call(this),this.map=a,this.dispatcher=new Ut(ze(),this),this.imageManager=new ne,this.imageManager.setEventedParent(this),this.glyphManager=new Xe(a._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Ct(256,512),this.crossTileSymbolIndex=new It,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var g=this;this._rtlTextPluginCallback=u.registerForPluginStateChange(function(b){g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},function(E,A){if(l.triggerPluginCompletionEvent(E),A&&A.every(function(j){return j}))for(var D in g.sourceCaches)g.sourceCaches[D].reload()})}),this.on("data",function(b){if(b.dataType==="source"&&b.sourceDataType==="metadata"){var E=m.sourceCaches[b.sourceId];if(E){var A=E.getSource();if(A&&A.vectorLayerIds)for(var D in m._layers){var j=m._layers[D];j.source===A.id&&m._validateLayer(j)}}}})}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.loadURL=function(a,p){var m=this;p===void 0&&(p={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var g=typeof p.validate=="boolean"?p.validate:!l.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,p.accessToken);var b=this.map._requestManager.transformRequest(a,l.ResourceType.Style);this._request=l.getJSON(b,function(E,A){m._request=null,E?m.fire(new l.ErrorEvent(E)):A&&m._load(A,g)})},u.prototype.loadJSON=function(a,p){var m=this;p===void 0&&(p={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){m._request=null,m._load(a,p.validate!==!1)})},u.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(yi,!1)},u.prototype._load=function(a,p){if(!p||!Mi(this,l.validateStyle(a))){for(var m in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(m,a.sources[m],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var g=Je(this.stylesheet.layers);this._order=g.map(function(D){return D.id}),this._layers={},this._serializedLayers={};for(var b=0,E=g;b<E.length;b+=1){var A=E[b];(A=l.createStyleLayer(A)).setEventedParent(this,{layer:{id:A.id}}),this._layers[A.id]=A,this._serializedLayers[A.id]=A.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new bt(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},u.prototype._loadSprite=function(a){var p=this;this._spriteRequest=function(m,g,b){var E,A,D,j=l.browser.devicePixelRatio>1?"@2x":"",q=l.getJSON(g.transformRequest(g.normalizeSpriteURL(m,j,".json"),l.ResourceType.SpriteJSON),function(Y,oe){q=null,D||(D=Y,E=oe,Q())}),Z=l.getImage(g.transformRequest(g.normalizeSpriteURL(m,j,".png"),l.ResourceType.SpriteImage),function(Y,oe){Z=null,D||(D=Y,A=oe,Q())});function Q(){if(D)b(D);else if(E&&A){var Y=l.browser.getImageData(A),oe={};for(var H in E){var ie=E[H],ce=ie.width,ve=ie.height,Me=ie.x,Pe=ie.y,De=ie.sdf,Ne=ie.pixelRatio,He=ie.stretchX,We=ie.stretchY,lt=ie.content,Et=new l.RGBAImage({width:ce,height:ve});l.RGBAImage.copy(Y,Et,{x:Me,y:Pe},{x:0,y:0},{width:ce,height:ve}),oe[H]={data:Et,pixelRatio:Ne,sdf:De,stretchX:He,stretchY:We,content:lt}}b(null,oe)}}return{cancel:function(){q&&(q.cancel(),q=null),Z&&(Z.cancel(),Z=null)}}}(a,this.map._requestManager,function(m,g){if(p._spriteRequest=null,m)p.fire(new l.ErrorEvent(m));else if(g)for(var b in g)p.imageManager.addImage(b,g[b]);p.imageManager.setLoaded(!0),p._availableImages=p.imageManager.listImages(),p.dispatcher.broadcast("setImages",p._availableImages),p.fire(new l.Event("data",{dataType:"style"}))})},u.prototype._validateLayer=function(a){var p=this.sourceCaches[a.source];if(p){var m=a.sourceLayer;if(m){var g=p.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(m)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+g.id+'" as specified by style layer "'+a.id+'"')))}}},u.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},u.prototype._serializeLayers=function(a){for(var p=[],m=0,g=a;m<g.length;m+=1){var b=this._layers[g[m]];b.type!=="custom"&&p.push(b.serialize())}return p},u.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var p in this._layers)if(this._layers[p].hasTransition())return!0;return!1},u.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},u.prototype.update=function(a){if(this._loaded){var p=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);for(var b in(m.length||g.length)&&this._updateWorkerLayers(m,g),this._updatedSources){var E=this._updatedSources[b];E==="reload"?this._reloadSource(b):E==="clear"&&this._clearSource(b)}for(var A in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[A].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var D={};for(var j in this.sourceCaches){var q=this.sourceCaches[j];D[j]=q.used,q.used=!1}for(var Z=0,Q=this._order;Z<Q.length;Z+=1){var Y=this._layers[Q[Z]];Y.recalculate(a,this._availableImages),!Y.isHidden(a.zoom)&&Y.source&&(this.sourceCaches[Y.source].used=!0)}for(var oe in D){var H=this.sourceCaches[oe];D[oe]!==H.used&&H.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:oe}))}this.light.recalculate(a),this.z=a.zoom,p&&this.fire(new l.Event("data",{dataType:"style"}))}},u.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},u.prototype._updateWorkerLayers=function(a,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:p})},u.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},u.prototype.setState=function(a){var p=this;if(this._checkLoaded(),Mi(this,l.validateStyle(a)))return!1;(a=l.clone$1(a)).layers=Je(a.layers);var m=function(b,E){if(!b)return[{command:Qe.setStyle,args:[E]}];var A=[];try{if(!l.deepEqual(b.version,E.version))return[{command:Qe.setStyle,args:[E]}];l.deepEqual(b.center,E.center)||A.push({command:Qe.setCenter,args:[E.center]}),l.deepEqual(b.zoom,E.zoom)||A.push({command:Qe.setZoom,args:[E.zoom]}),l.deepEqual(b.bearing,E.bearing)||A.push({command:Qe.setBearing,args:[E.bearing]}),l.deepEqual(b.pitch,E.pitch)||A.push({command:Qe.setPitch,args:[E.pitch]}),l.deepEqual(b.sprite,E.sprite)||A.push({command:Qe.setSprite,args:[E.sprite]}),l.deepEqual(b.glyphs,E.glyphs)||A.push({command:Qe.setGlyphs,args:[E.glyphs]}),l.deepEqual(b.transition,E.transition)||A.push({command:Qe.setTransition,args:[E.transition]}),l.deepEqual(b.light,E.light)||A.push({command:Qe.setLight,args:[E.light]});var D={},j=[];(function(Z,Q,Y,oe){var H;for(H in Q=Q||{},Z=Z||{})Z.hasOwnProperty(H)&&(Q.hasOwnProperty(H)||rt(H,Y,oe));for(H in Q)Q.hasOwnProperty(H)&&(Z.hasOwnProperty(H)?l.deepEqual(Z[H],Q[H])||(Z[H].type==="geojson"&&Q[H].type==="geojson"&&kr(Z,Q,H)?Y.push({command:Qe.setGeoJSONSourceData,args:[H,Q[H].data]}):or(H,Q,Y,oe)):Wt(H,Q,Y))})(b.sources,E.sources,j,D);var q=[];b.layers&&b.layers.forEach(function(Z){D[Z.source]?A.push({command:Qe.removeLayer,args:[Z.id]}):q.push(Z)}),A=A.concat(j),function(Z,Q,Y){Q=Q||[];var oe,H,ie,ce,ve,Me,Pe,De=(Z=Z||[]).map(hr),Ne=Q.map(hr),He=Z.reduce(ur,{}),We=Q.reduce(ur,{}),lt=De.slice(),Et=Object.create(null);for(oe=0,H=0;oe<De.length;oe++)We.hasOwnProperty(ie=De[oe])?H++:(Y.push({command:Qe.removeLayer,args:[ie]}),lt.splice(lt.indexOf(ie,H),1));for(oe=0,H=0;oe<Ne.length;oe++)lt[lt.length-1-oe]!==(ie=Ne[Ne.length-1-oe])&&(He.hasOwnProperty(ie)?(Y.push({command:Qe.removeLayer,args:[ie]}),lt.splice(lt.lastIndexOf(ie,lt.length-H),1)):H++,Y.push({command:Qe.addLayer,args:[We[ie],Me=lt[lt.length-oe]]}),lt.splice(lt.length-oe,0,ie),Et[ie]=!0);for(oe=0;oe<Ne.length;oe++)if(ce=He[ie=Ne[oe]],ve=We[ie],!Et[ie]&&!l.deepEqual(ce,ve))if(l.deepEqual(ce.source,ve.source)&&l.deepEqual(ce["source-layer"],ve["source-layer"])&&l.deepEqual(ce.type,ve.type)){for(Pe in Rt(ce.layout,ve.layout,Y,ie,null,Qe.setLayoutProperty),Rt(ce.paint,ve.paint,Y,ie,null,Qe.setPaintProperty),l.deepEqual(ce.filter,ve.filter)||Y.push({command:Qe.setFilter,args:[ie,ve.filter]}),l.deepEqual(ce.minzoom,ve.minzoom)&&l.deepEqual(ce.maxzoom,ve.maxzoom)||Y.push({command:Qe.setLayerZoomRange,args:[ie,ve.minzoom,ve.maxzoom]}),ce)ce.hasOwnProperty(Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?Rt(ce[Pe],ve[Pe],Y,ie,Pe.slice(6),Qe.setPaintProperty):l.deepEqual(ce[Pe],ve[Pe])||Y.push({command:Qe.setLayerProperty,args:[ie,Pe,ve[Pe]]}));for(Pe in ve)ve.hasOwnProperty(Pe)&&!ce.hasOwnProperty(Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?Rt(ce[Pe],ve[Pe],Y,ie,Pe.slice(6),Qe.setPaintProperty):l.deepEqual(ce[Pe],ve[Pe])||Y.push({command:Qe.setLayerProperty,args:[ie,Pe,ve[Pe]]}))}else Y.push({command:Qe.removeLayer,args:[ie]}),Me=lt[lt.lastIndexOf(ie)+1],Y.push({command:Qe.addLayer,args:[ve,Me]})}(q,E.layers,A)}catch(Z){console.warn("Unable to compute style diff:",Z),A=[{command:Qe.setStyle,args:[E]}]}return A}(this.serialize(),a).filter(function(b){return!(b.command in lr)});if(m.length===0)return!1;var g=m.filter(function(b){return!(b.command in li)});if(g.length>0)throw new Error("Unimplemented: "+g.map(function(b){return b.command}).join(", ")+".");return m.forEach(function(b){b.command!=="setTransition"&&p[b.command].apply(p,b.args)}),this.stylesheet=a,!0},u.prototype.addImage=function(a,p){if(this.getImage(a))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,p),this._afterImageUpdated(a)},u.prototype.updateImage=function(a,p){this.imageManager.updateImage(a,p)},u.prototype.getImage=function(a){return this.imageManager.getImage(a)},u.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},u.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))},u.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},u.prototype.addSource=function(a,p,m){var g=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!p.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(p).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(l.validateStyle.source,"sources."+a,p,null,m))){this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);var b=this.sourceCaches[a]=new ee(a,p,this.dispatcher);b.style=this,b.setEventedParent(this,function(){return{isSourceLoaded:g.loaded(),source:b.serialize(),sourceId:a}}),b.onAdd(this.map),this._changed=!0}},u.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var p in this._layers)if(this._layers[p].source===a)return this.fire(new l.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+p+'" is using it.')));var m=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],m.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},u.prototype.setGeoJSONSourceData=function(a,p){this._checkLoaded(),this.sourceCaches[a].getSource().setData(p),this._changed=!0},u.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},u.prototype.addLayer=function(a,p,m){m===void 0&&(m={}),this._checkLoaded();var g=a.id;if(this.getLayer(g))this.fire(new l.ErrorEvent(new Error('Layer with id "'+g+'" already exists on this map')));else{var b;if(a.type==="custom"){if(Mi(this,l.validateCustomStyleLayer(a)))return;b=l.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(g,a.source),a=l.clone$1(a),a=l.extend(a,{source:g})),this._validate(l.validateStyle.layer,"layers."+g,a,{arrayIndex:-1},m))return;b=l.createStyleLayer(a),this._validateLayer(b),b.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[b.id]=b.serialize()}var E=p?this._order.indexOf(p):this._order.length;if(p&&E===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+p+'" does not exist on this map.')));else{if(this._order.splice(E,0,g),this._layerOrderChanged=!0,this._layers[g]=b,this._removedLayers[g]&&b.source&&b.type!=="custom"){var A=this._removedLayers[g];delete this._removedLayers[g],A.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}},u.prototype.moveLayer=function(a,p){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==p){var m=this._order.indexOf(a);this._order.splice(m,1);var g=p?this._order.indexOf(p):this._order.length;p&&g===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+p+'" does not exist on this map.'))):(this._order.splice(g,0,a),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},u.prototype.removeLayer=function(a){this._checkLoaded();var p=this._layers[a];if(p){p.setEventedParent(null);var m=this._order.indexOf(a);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=p,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],p.onRemove&&p.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},u.prototype.getLayer=function(a){return this._layers[a]},u.prototype.hasLayer=function(a){return a in this._layers},u.prototype.setLayerZoomRange=function(a,p,m){this._checkLoaded();var g=this.getLayer(a);g?g.minzoom===p&&g.maxzoom===m||(p!=null&&(g.minzoom=p),m!=null&&(g.maxzoom=m),this._updateLayer(g)):this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},u.prototype.setFilter=function(a,p,m){m===void 0&&(m={}),this._checkLoaded();var g=this.getLayer(a);if(g){if(!l.deepEqual(g.filter,p))return p==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.validateStyle.filter,"layers."+g.id+".filter",p,null,m)||(g.filter=l.clone$1(p),this._updateLayer(g)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},u.prototype.getFilter=function(a){return l.clone$1(this.getLayer(a).filter)},u.prototype.setLayoutProperty=function(a,p,m,g){g===void 0&&(g={}),this._checkLoaded();var b=this.getLayer(a);b?l.deepEqual(b.getLayoutProperty(p),m)||(b.setLayoutProperty(p,m,g),this._updateLayer(b)):this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},u.prototype.getLayoutProperty=function(a,p){var m=this.getLayer(a);if(m)return m.getLayoutProperty(p);this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},u.prototype.setPaintProperty=function(a,p,m,g){g===void 0&&(g={}),this._checkLoaded();var b=this.getLayer(a);b?l.deepEqual(b.getPaintProperty(p),m)||(b.setPaintProperty(p,m,g)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},u.prototype.getPaintProperty=function(a,p){return this.getLayer(a).getPaintProperty(p)},u.prototype.setFeatureState=function(a,p){this._checkLoaded();var m=a.source,g=a.sourceLayer,b=this.sourceCaches[m];if(b!==void 0){var E=b.getSource().type;E==="geojson"&&g?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||g?(a.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),b.setFeatureState(g,a.id,p)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},u.prototype.removeFeatureState=function(a,p){this._checkLoaded();var m=a.source,g=this.sourceCaches[m];if(g!==void 0){var b=g.getSource().type,E=b==="vector"?a.sourceLayer:void 0;b!=="vector"||E?p&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(E,a.id,p):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},u.prototype.getFeatureState=function(a){this._checkLoaded();var p=a.source,m=a.sourceLayer,g=this.sourceCaches[p];if(g!==void 0){if(g.getSource().type!=="vector"||m)return a.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(m,a.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+p+"' does not exist in the map's style.")))},u.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},u.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},u.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},u.prototype._flattenAndSortRenderedFeatures=function(a){for(var p=this,m=function(He){return p._layers[He].type==="fill-extrusion"},g={},b=[],E=this._order.length-1;E>=0;E--){var A=this._order[E];if(m(A)){g[A]=E;for(var D=0,j=a;D<j.length;D+=1){var q=j[D][A];if(q)for(var Z=0,Q=q;Z<Q.length;Z+=1)b.push(Q[Z])}}}b.sort(function(He,We){return We.intersectionZ-He.intersectionZ});for(var Y=[],oe=this._order.length-1;oe>=0;oe--){var H=this._order[oe];if(m(H))for(var ie=b.length-1;ie>=0;ie--){var ce=b[ie].feature;if(g[ce.layer.id]<oe)break;Y.push(ce),b.pop()}else for(var ve=0,Me=a;ve<Me.length;ve+=1){var Pe=Me[ve][H];if(Pe)for(var De=0,Ne=Pe;De<Ne.length;De+=1)Y.push(Ne[De].feature)}}return Y},u.prototype.queryRenderedFeatures=function(a,p,m){p&&p.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",p.filter,null,p);var g={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var b=0,E=p.layers;b<E.length;b+=1){var A=E[b],D=this._layers[A];if(!D)return this.fire(new l.ErrorEvent(new Error("The layer '"+A+"' does not exist in the map's style and cannot be queried for features."))),[];g[D.source]=!0}}var j=[];for(var q in p.availableImages=this._availableImages,this.sourceCaches)p.layers&&!g[q]||j.push(en(this.sourceCaches[q],this._layers,this._serializedLayers,a,p,m));return this.placement&&j.push(function(Z,Q,Y,oe,H,ie,ce){for(var ve={},Me=ie.queryRenderedSymbols(oe),Pe=[],De=0,Ne=Object.keys(Me).map(Number);De<Ne.length;De+=1)Pe.push(ce[Ne[De]]);Pe.sort(si);for(var He=function(){var kt=lt[We],mr=kt.featureIndex.lookupSymbolFeatures(Me[kt.bucketInstanceId],Q,kt.bucketIndex,kt.sourceLayerIndex,H.filter,H.layers,H.availableImages,Z);for(var ht in mr){var Zt=ve[ht]=ve[ht]||[],Jt=mr[ht];Jt.sort(function(Kt,Nt){var Ot=kt.featureSortOrder;if(Ot){var Vn=Ot.indexOf(Kt.featureIndex);return Ot.indexOf(Nt.featureIndex)-Vn}return Nt.featureIndex-Kt.featureIndex});for(var qt=0,jt=Jt;qt<jt.length;qt+=1)Zt.push(jt[qt])}},We=0,lt=Pe;We<lt.length;We+=1)He();var Et=function(kt){ve[kt].forEach(function(mr){var ht=mr.feature,Zt=Y[Z[kt].source].getFeatureState(ht.layer["source-layer"],ht.id);ht.source=ht.layer.source,ht.layer["source-layer"]&&(ht.sourceLayer=ht.layer["source-layer"]),ht.state=Zt})};for(var At in ve)Et(At);return ve}(this._layers,this._serializedLayers,this.sourceCaches,a,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(j)},u.prototype.querySourceFeatures=function(a,p){p&&p.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",p.filter,null,p);var m=this.sourceCaches[a];return m?function(g,b){for(var E=g.getRenderableIds().map(function(Q){return g.getTileByID(Q)}),A=[],D={},j=0;j<E.length;j++){var q=E[j],Z=q.tileID.canonical.key;D[Z]||(D[Z]=!0,q.querySourceFeatures(A,b))}return A}(m,p):[]},u.prototype.addSourceType=function(a,p,m){return u.getSourceType(a)?m(new Error('A source type called "'+a+'" already exists.')):(u.setSourceType(a,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:p.workerSourceURL},m):m(null,null))},u.prototype.getLight=function(){return this.light.getLight()},u.prototype.setLight=function(a,p){p===void 0&&(p={}),this._checkLoaded();var m=this.light.getLight(),g=!1;for(var b in a)if(!l.deepEqual(a[b],m[b])){g=!0;break}if(g){var E={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,p),this.light.updateTransitions(E)}},u.prototype._validate=function(a,p,m,g,b){return b===void 0&&(b={}),(!b||b.validate!==!1)&&Mi(this,a.call(l.validateStyle,l.extend({key:p,style:this.serialize(),value:m,styleSpec:l.styleSpec},g)))},u.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var p in this.sourceCaches)this.sourceCaches[p].clearTiles(),this.sourceCaches[p].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},u.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},u.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},u.prototype._updateSources=function(a){for(var p in this.sourceCaches)this.sourceCaches[p].update(a)},u.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},u.prototype._updatePlacement=function(a,p,m,g,b){b===void 0&&(b=!1);for(var E=!1,A=!1,D={},j=0,q=this._order;j<q.length;j+=1){var Z=this._layers[q[j]];if(Z.type==="symbol"){if(!D[Z.source]){var Q=this.sourceCaches[Z.source];D[Z.source]=Q.getRenderableIds(!0).map(function(ce){return Q.getTileByID(ce)}).sort(function(ce,ve){return ve.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(ve.tileID)?-1:1)})}var Y=this.crossTileSymbolIndex.addLayer(Z,D[Z.source],a.center.lng);E=E||Y}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),a.zoom))&&(this.pauseablePlacement=new Be(a,this._order,b,p,m,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),A=!0),E&&this.pauseablePlacement.placement.setStale()),A||E)for(var oe=0,H=this._order;oe<H.length;oe+=1){var ie=this._layers[H[oe]];ie.type==="symbol"&&this.placement.updateLayerOpacities(ie,D[ie.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},u.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},u.prototype.getImages=function(a,p,m){this.imageManager.getImages(p.icons,m),this._updateTilesForChangedImages();var g=this.sourceCaches[p.source];g&&g.setDependencies(p.tileID.key,p.type,p.icons)},u.prototype.getGlyphs=function(a,p,m){this.glyphManager.getGlyphs(p.stacks,m)},u.prototype.getResource=function(a,p,m){return l.makeRequest(p,m)},u}(l.Evented);qr.getSourceType=function(o){return Gr[o]},qr.setSourceType=function(o,u){Gr[o]=u},qr.registerForPluginStateChange=l.registerForPluginStateChange;var nn=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ra=Er(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),vo=Er(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Vl=Er(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),ql=Er(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Yu=Er("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),pu=Er(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ss=Er(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),hu=Er("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Qu=Er("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Zl=Er("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Fa=Er(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),us=Er(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Fs=Er(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Gl=Er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Pn=Er(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ba=Er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Mo=Er(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),zo=Er(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ko=Er(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),go=Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ha=Er(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ua=Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Na=Er(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),fa=Er(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Wl=Er(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),el=Er(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Er(o,u){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=u.match(/attribute ([\w]+) ([\w]+)/g),m=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=g?g.concat(m):m,E={};return{fragmentSource:o=o.replace(a,function(A,D,j,q,Z){return E[Z]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_`+Z+`
varying `+j+" "+q+" "+Z+`;
#else
uniform `+j+" "+q+" u_"+Z+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Z+`
    `+j+" "+q+" "+Z+" = u_"+Z+`;
#endif
`}),vertexSource:u=u.replace(a,function(A,D,j,q,Z){var Q=q==="float"?"vec2":"vec4",Y=Z.match(/color/)?"color":Q;return E[Z]?D==="define"?`
#ifndef HAS_UNIFORM_u_`+Z+`
uniform lowp float u_`+Z+`_t;
attribute `+j+" "+Q+" a_"+Z+`;
varying `+j+" "+q+" "+Z+`;
#else
uniform `+j+" "+q+" u_"+Z+`;
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+Z+" = a_"+Z+`;
#else
    `+j+" "+q+" "+Z+" = u_"+Z+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+Z+" = unpack_mix_"+Y+"(a_"+Z+", u_"+Z+`_t);
#else
    `+j+" "+q+" "+Z+" = u_"+Z+`;
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_`+Z+`
uniform lowp float u_`+Z+`_t;
attribute `+j+" "+Q+" a_"+Z+`;
#else
uniform `+j+" "+q+" u_"+Z+`;
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+j+" "+q+" "+Z+" = a_"+Z+`;
#else
    `+j+" "+q+" "+Z+" = u_"+Z+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Z+`
    `+j+" "+q+" "+Z+" = unpack_mix_"+Y+"(a_"+Z+", u_"+Z+`_t);
#else
    `+j+" "+q+" "+Z+" = u_"+Z+`;
#endif
`}),staticAttributes:p,staticUniforms:b}}var ja=Object.freeze({__proto__:null,prelude:Ra,background:vo,backgroundPattern:Vl,circle:ql,clippingMask:Yu,heatmap:pu,heatmapTexture:ss,collisionBox:hu,collisionCircle:Qu,debug:Zl,fill:Fa,fillOutline:us,fillOutlinePattern:Fs,fillPattern:Gl,fillExtrusion:Pn,fillExtrusionPattern:Ba,hillshadePrepare:Mo,hillshade:zo,line:Ko,lineGradient:go,linePattern:ha,lineSDF:Ua,raster:Na,symbolIcon:fa,symbolSDF:Wl,symbolTextAndIcon:el}),Xi=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function da(o){for(var u=[],a=0;a<o.length;a++)if(o[a]!==null){var p=o[a].split(" ");u.push(p.pop())}return u}Xi.prototype.bind=function(o,u,a,p,m,g,b,E){this.context=o;for(var A=this.boundPaintVertexBuffers.length!==p.length,D=0;!A&&D<p.length;D++)this.boundPaintVertexBuffers[D]!==p[D]&&(A=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===a&&!A&&this.boundIndexBuffer===m&&this.boundVertexOffset===g&&this.boundDynamicVertexBuffer===b&&this.boundDynamicVertexBuffer2===E?(o.bindVertexArrayOES.set(this.vao),b&&b.bind(),m&&m.dynamicDraw&&m.bind(),E&&E.bind()):this.freshBind(u,a,p,m,g,b,E)},Xi.prototype.freshBind=function(o,u,a,p,m,g,b){var E,A=o.numAttributes,D=this.context,j=D.gl;if(D.extVertexArrayObject)this.vao&&this.destroy(),this.vao=D.extVertexArrayObject.createVertexArrayOES(),D.bindVertexArrayOES.set(this.vao),E=0,this.boundProgram=o,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=p,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=g,this.boundDynamicVertexBuffer2=b;else{E=D.currentNumAttributes||0;for(var q=A;q<E;q++)j.disableVertexAttribArray(q)}u.enableAttributes(j,o);for(var Z=0,Q=a;Z<Q.length;Z+=1)Q[Z].enableAttributes(j,o);g&&g.enableAttributes(j,o),b&&b.enableAttributes(j,o),u.bind(),u.setVertexAttribPointers(j,o,m);for(var Y=0,oe=a;Y<oe.length;Y+=1){var H=oe[Y];H.bind(),H.setVertexAttribPointers(j,o,m)}g&&(g.bind(),g.setVertexAttribPointers(j,o,m)),p&&p.bind(),b&&(b.bind(),b.setVertexAttribPointers(j,o,m)),D.currentNumAttributes=A},Xi.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Bs=function(o,u,a,p,m,g){var b=o.gl;this.program=b.createProgram();for(var E=da(a.staticAttributes),A=p?p.getBinderAttributes():[],D=E.concat(A),j=a.staticUniforms?da(a.staticUniforms):[],q=p?p.getBinderUniforms():[],Z=[],Q=0,Y=j.concat(q);Q<Y.length;Q+=1){var oe=Y[Q];Z.indexOf(oe)<0&&Z.push(oe)}var H=p?p.defines():[];g&&H.push("#define OVERDRAW_INSPECTOR;");var ie=H.concat(Ra.fragmentSource,a.fragmentSource).join(`
`),ce=H.concat(Ra.vertexSource,a.vertexSource).join(`
`),ve=b.createShader(b.FRAGMENT_SHADER);if(b.isContextLost())this.failedToCreate=!0;else{b.shaderSource(ve,ie),b.compileShader(ve),b.attachShader(this.program,ve);var Me=b.createShader(b.VERTEX_SHADER);if(b.isContextLost())this.failedToCreate=!0;else{b.shaderSource(Me,ce),b.compileShader(Me),b.attachShader(this.program,Me),this.attributes={};var Pe={};this.numAttributes=D.length;for(var De=0;De<this.numAttributes;De++)D[De]&&(b.bindAttribLocation(this.program,De,D[De]),this.attributes[D[De]]=De);b.linkProgram(this.program),b.deleteShader(Me),b.deleteShader(ve);for(var Ne=0;Ne<Z.length;Ne++){var He=Z[Ne];if(He&&!Pe[He]){var We=b.getUniformLocation(this.program,He);We&&(Pe[He]=We)}}this.fixedUniforms=m(o,Pe),this.binderUniforms=p?p.getUniforms(o,Pe):[]}}};function Jo(o,u,a){var p=1/Vr(a,1,u.transform.tileZoom),m=Math.pow(2,a.tileID.overscaledZ),g=a.tileSize*Math.pow(2,u.transform.tileZoom)/m,b=g*(a.tileID.canonical.x+a.tileID.wrap*m),E=g*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[p,o.fromScale,o.toScale],u_fade:o.t,u_pixel_coord_upper:[b>>16,E>>16],u_pixel_coord_lower:[65535&b,65535&E]}}Bs.prototype.draw=function(o,u,a,p,m,g,b,E,A,D,j,q,Z,Q,Y,oe){var H,ie=o.gl;if(!this.failedToCreate){for(var ce in o.program.set(this.program),o.setDepthMode(a),o.setStencilMode(p),o.setColorMode(m),o.setCullFace(g),this.fixedUniforms)this.fixedUniforms[ce].set(b[ce]);Q&&Q.setUniforms(o,this.binderUniforms,q,{zoom:Z});for(var ve=(H={},H[ie.LINES]=2,H[ie.TRIANGLES]=3,H[ie.LINE_STRIP]=1,H)[u],Me=0,Pe=j.get();Me<Pe.length;Me+=1){var De=Pe[Me],Ne=De.vaos||(De.vaos={});(Ne[E]||(Ne[E]=new Xi)).bind(o,this,A,Q?Q.getPaintVertexBuffers():[],D,De.vertexOffset,Y,oe),ie.drawElements(u,De.primitiveLength*ve,ie.UNSIGNED_SHORT,De.primitiveOffset*ve*2)}}};var $l=function(o,u,a,p){var m=u.style.light,g=m.properties.get("position"),b=[g.x,g.y,g.z],E=l.create$1();m.properties.get("anchor")==="viewport"&&l.fromRotation(E,-u.transform.angle),l.transformMat3(b,b,E);var A=m.properties.get("color");return{u_matrix:o,u_lightpos:b,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+a,u_opacity:p}},Lo=function(o,u,a,p,m,g,b){return l.extend($l(o,u,a,p),Jo(g,u,b),{u_height_factor:-Math.pow(2,m.overscaledZ)/b.tileSize/8})},Ki=function(o){return{u_matrix:o}},ma=function(o,u,a,p){return l.extend(Ki(o),Jo(a,u,p))},tl=function(o,u){return{u_matrix:o,u_world:u}},Hl=function(o,u,a,p,m){return l.extend(ma(o,u,a,p),{u_world:m})},rl=function(o,u,a,p){var m,g,b=o.transform;if(p.paint.get("circle-pitch-alignment")==="map"){var E=Vr(a,1,b.zoom);m=!0,g=[E,E]}else m=!1,g=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:o.translatePosMatrix(u.posMatrix,a,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:g}},ya=function(o,u,a){var p=Vr(a,1,u.zoom),m=Math.pow(2,u.zoom-a.tileID.overscaledZ),g=a.tileID.overscaleFactor();return{u_matrix:o,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[u.pixelsToGLUnits[0]/(p*m),u.pixelsToGLUnits[1]/(p*m)],u_overscale_factor:g}},nl=function(o,u,a){return{u_matrix:o,u_inv_matrix:u,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},Do=function(o,u,a){return a===void 0&&(a=1),{u_matrix:o,u_color:u,u_overlay:0,u_overlay_scale:a}},Ji=function(o){return{u_matrix:o}},Xl=function(o,u,a,p){return{u_matrix:o,u_extrude_scale:Vr(u,1,a),u_intensity:p}},Yi=function(o,u,a){var p=o.transform;return{u_matrix:Us(o,u,a),u_ratio:1/Vr(u,1,p.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Fr=function(o,u,a,p){return l.extend(Yi(o,u,a),{u_image:0,u_image_height:p})},Oo=function(o,u,a,p){var m=o.transform,g=ls(u,m);return{u_matrix:Us(o,u,a),u_texsize:u.imageAtlasTexture.size,u_ratio:1/Vr(u,1,m.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[g,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Kl=function(o,u,a,p,m){var g=o.lineAtlas,b=ls(u,o.transform),E=a.layout.get("line-cap")==="round",A=g.getDash(p.from,E),D=g.getDash(p.to,E),j=A.width*m.fromScale,q=D.width*m.toScale;return l.extend(Yi(o,u,a),{u_patternscale_a:[b/j,-A.height/2],u_patternscale_b:[b/q,-D.height/2],u_sdfgamma:g.width/(256*Math.min(j,q)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:A.y,u_tex_y_b:D.y,u_mix:m.t})};function ls(o,u){return 1/Vr(o,1,u.tileZoom)}function Us(o,u,a){return o.translatePosMatrix(u.tileID.posMatrix,u,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var il=function(o,u,a,p,m){return{u_matrix:o,u_tl_parent:u,u_scale_parent:a,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(b=m.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(g=m.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:ol(m.paint.get("raster-hue-rotate"))};var g,b};function ol(o){o*=Math.PI/180;var u=Math.sin(o),a=Math.cos(o);return[(2*a+1)/3,(-Math.sqrt(3)*u-a+1)/3,(Math.sqrt(3)*u-a+1)/3]}var Ns,Va=function(o,u,a,p,m,g,b,E,A,D){var j=m.transform;return{u_is_size_zoom_constant:+(o==="constant"||o==="source"),u_is_size_feature_constant:+(o==="constant"||o==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:j.cameraToCenterDistance,u_pitch:j.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:j.width/j.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:g,u_label_plane_matrix:b,u_coord_matrix:E,u_is_text:+A,u_pitch_with_map:+p,u_texsize:D,u_texture:0}},Yo=function(o,u,a,p,m,g,b,E,A,D,j){var q=m.transform;return l.extend(Va(o,u,a,p,m,g,b,E,A,D),{u_gamma_scale:p?Math.cos(q._pitch)*q.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+j})},js=function(o,u,a,p,m,g,b,E,A,D){return l.extend(Yo(o,u,a,p,m,g,b,E,!0,A,!0),{u_texsize_icon:D,u_texture_icon:1})},Vs=function(o,u,a){return{u_matrix:o,u_opacity:u,u_color:a}},de=function(o,u,a,p,m,g){return l.extend(function(b,E,A,D){var j=A.imageManager.getPattern(b.from.toString()),q=A.imageManager.getPattern(b.to.toString()),Z=A.imageManager.getPixelSize(),Q=Z.width,Y=Z.height,oe=Math.pow(2,D.tileID.overscaledZ),H=D.tileSize*Math.pow(2,A.transform.tileZoom)/oe,ie=H*(D.tileID.canonical.x+D.tileID.wrap*oe),ce=H*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[Q,Y],u_mix:E.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Vr(D,1,A.transform.tileZoom),u_pixel_coord_upper:[ie>>16,ce>>16],u_pixel_coord_lower:[65535&ie,65535&ce]}}(p,g,a,m),{u_matrix:o,u_opacity:u})},Re={fillExtrusion:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_lightpos:new l.Uniform3f(o,u.u_lightpos),u_lightintensity:new l.Uniform1f(o,u.u_lightintensity),u_lightcolor:new l.Uniform3f(o,u.u_lightcolor),u_vertical_gradient:new l.Uniform1f(o,u.u_vertical_gradient),u_opacity:new l.Uniform1f(o,u.u_opacity)}},fillExtrusionPattern:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_lightpos:new l.Uniform3f(o,u.u_lightpos),u_lightintensity:new l.Uniform1f(o,u.u_lightintensity),u_lightcolor:new l.Uniform3f(o,u.u_lightcolor),u_vertical_gradient:new l.Uniform1f(o,u.u_vertical_gradient),u_height_factor:new l.Uniform1f(o,u.u_height_factor),u_image:new l.Uniform1i(o,u.u_image),u_texsize:new l.Uniform2f(o,u.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,u.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,u.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,u.u_scale),u_fade:new l.Uniform1f(o,u.u_fade),u_opacity:new l.Uniform1f(o,u.u_opacity)}},fill:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix)}},fillPattern:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_image:new l.Uniform1i(o,u.u_image),u_texsize:new l.Uniform2f(o,u.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,u.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,u.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,u.u_scale),u_fade:new l.Uniform1f(o,u.u_fade)}},fillOutline:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_world:new l.Uniform2f(o,u.u_world)}},fillOutlinePattern:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_world:new l.Uniform2f(o,u.u_world),u_image:new l.Uniform1i(o,u.u_image),u_texsize:new l.Uniform2f(o,u.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,u.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,u.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,u.u_scale),u_fade:new l.Uniform1f(o,u.u_fade)}},circle:function(o,u){return{u_camera_to_center_distance:new l.Uniform1f(o,u.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(o,u.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(o,u.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(o,u.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(o,u.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(o,u.u_matrix)}},collisionBox:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_camera_to_center_distance:new l.Uniform1f(o,u.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(o,u.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(o,u.u_extrude_scale),u_overscale_factor:new l.Uniform1f(o,u.u_overscale_factor)}},collisionCircle:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_inv_matrix:new l.UniformMatrix4f(o,u.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(o,u.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(o,u.u_viewport_size)}},debug:function(o,u){return{u_color:new l.UniformColor(o,u.u_color),u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_overlay:new l.Uniform1i(o,u.u_overlay),u_overlay_scale:new l.Uniform1f(o,u.u_overlay_scale)}},clippingMask:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix)}},heatmap:function(o,u){return{u_extrude_scale:new l.Uniform1f(o,u.u_extrude_scale),u_intensity:new l.Uniform1f(o,u.u_intensity),u_matrix:new l.UniformMatrix4f(o,u.u_matrix)}},heatmapTexture:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_world:new l.Uniform2f(o,u.u_world),u_image:new l.Uniform1i(o,u.u_image),u_color_ramp:new l.Uniform1i(o,u.u_color_ramp),u_opacity:new l.Uniform1f(o,u.u_opacity)}},hillshade:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_image:new l.Uniform1i(o,u.u_image),u_latrange:new l.Uniform2f(o,u.u_latrange),u_light:new l.Uniform2f(o,u.u_light),u_shadow:new l.UniformColor(o,u.u_shadow),u_highlight:new l.UniformColor(o,u.u_highlight),u_accent:new l.UniformColor(o,u.u_accent)}},hillshadePrepare:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_image:new l.Uniform1i(o,u.u_image),u_dimension:new l.Uniform2f(o,u.u_dimension),u_zoom:new l.Uniform1f(o,u.u_zoom),u_unpack:new l.Uniform4f(o,u.u_unpack)}},line:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_ratio:new l.Uniform1f(o,u.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,u.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,u.u_units_to_pixels)}},lineGradient:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_ratio:new l.Uniform1f(o,u.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,u.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,u.u_units_to_pixels),u_image:new l.Uniform1i(o,u.u_image),u_image_height:new l.Uniform1f(o,u.u_image_height)}},linePattern:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_texsize:new l.Uniform2f(o,u.u_texsize),u_ratio:new l.Uniform1f(o,u.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,u.u_device_pixel_ratio),u_image:new l.Uniform1i(o,u.u_image),u_units_to_pixels:new l.Uniform2f(o,u.u_units_to_pixels),u_scale:new l.Uniform3f(o,u.u_scale),u_fade:new l.Uniform1f(o,u.u_fade)}},lineSDF:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_ratio:new l.Uniform1f(o,u.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,u.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,u.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(o,u.u_patternscale_a),u_patternscale_b:new l.Uniform2f(o,u.u_patternscale_b),u_sdfgamma:new l.Uniform1f(o,u.u_sdfgamma),u_image:new l.Uniform1i(o,u.u_image),u_tex_y_a:new l.Uniform1f(o,u.u_tex_y_a),u_tex_y_b:new l.Uniform1f(o,u.u_tex_y_b),u_mix:new l.Uniform1f(o,u.u_mix)}},raster:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_tl_parent:new l.Uniform2f(o,u.u_tl_parent),u_scale_parent:new l.Uniform1f(o,u.u_scale_parent),u_buffer_scale:new l.Uniform1f(o,u.u_buffer_scale),u_fade_t:new l.Uniform1f(o,u.u_fade_t),u_opacity:new l.Uniform1f(o,u.u_opacity),u_image0:new l.Uniform1i(o,u.u_image0),u_image1:new l.Uniform1i(o,u.u_image1),u_brightness_low:new l.Uniform1f(o,u.u_brightness_low),u_brightness_high:new l.Uniform1f(o,u.u_brightness_high),u_saturation_factor:new l.Uniform1f(o,u.u_saturation_factor),u_contrast_factor:new l.Uniform1f(o,u.u_contrast_factor),u_spin_weights:new l.Uniform3f(o,u.u_spin_weights)}},symbolIcon:function(o,u){return{u_is_size_zoom_constant:new l.Uniform1i(o,u.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,u.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,u.u_size_t),u_size:new l.Uniform1f(o,u.u_size),u_camera_to_center_distance:new l.Uniform1f(o,u.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,u.u_pitch),u_rotate_symbol:new l.Uniform1i(o,u.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,u.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,u.u_fade_change),u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,u.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,u.u_coord_matrix),u_is_text:new l.Uniform1i(o,u.u_is_text),u_pitch_with_map:new l.Uniform1i(o,u.u_pitch_with_map),u_texsize:new l.Uniform2f(o,u.u_texsize),u_texture:new l.Uniform1i(o,u.u_texture)}},symbolSDF:function(o,u){return{u_is_size_zoom_constant:new l.Uniform1i(o,u.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,u.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,u.u_size_t),u_size:new l.Uniform1f(o,u.u_size),u_camera_to_center_distance:new l.Uniform1f(o,u.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,u.u_pitch),u_rotate_symbol:new l.Uniform1i(o,u.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,u.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,u.u_fade_change),u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,u.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,u.u_coord_matrix),u_is_text:new l.Uniform1i(o,u.u_is_text),u_pitch_with_map:new l.Uniform1i(o,u.u_pitch_with_map),u_texsize:new l.Uniform2f(o,u.u_texsize),u_texture:new l.Uniform1i(o,u.u_texture),u_gamma_scale:new l.Uniform1f(o,u.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(o,u.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(o,u.u_is_halo)}},symbolTextAndIcon:function(o,u){return{u_is_size_zoom_constant:new l.Uniform1i(o,u.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,u.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,u.u_size_t),u_size:new l.Uniform1f(o,u.u_size),u_camera_to_center_distance:new l.Uniform1f(o,u.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,u.u_pitch),u_rotate_symbol:new l.Uniform1i(o,u.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,u.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,u.u_fade_change),u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,u.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,u.u_coord_matrix),u_is_text:new l.Uniform1i(o,u.u_is_text),u_pitch_with_map:new l.Uniform1i(o,u.u_pitch_with_map),u_texsize:new l.Uniform2f(o,u.u_texsize),u_texsize_icon:new l.Uniform2f(o,u.u_texsize_icon),u_texture:new l.Uniform1i(o,u.u_texture),u_texture_icon:new l.Uniform1i(o,u.u_texture_icon),u_gamma_scale:new l.Uniform1f(o,u.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(o,u.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(o,u.u_is_halo)}},background:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_opacity:new l.Uniform1f(o,u.u_opacity),u_color:new l.UniformColor(o,u.u_color)}},backgroundPattern:function(o,u){return{u_matrix:new l.UniformMatrix4f(o,u.u_matrix),u_opacity:new l.Uniform1f(o,u.u_opacity),u_image:new l.Uniform1i(o,u.u_image),u_pattern_tl_a:new l.Uniform2f(o,u.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(o,u.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(o,u.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(o,u.u_pattern_br_b),u_texsize:new l.Uniform2f(o,u.u_texsize),u_mix:new l.Uniform1f(o,u.u_mix),u_pattern_size_a:new l.Uniform2f(o,u.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(o,u.u_pattern_size_b),u_scale_a:new l.Uniform1f(o,u.u_scale_a),u_scale_b:new l.Uniform1f(o,u.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(o,u.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,u.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(o,u.u_tile_units_to_pixels)}}};function nt(o,u,a,p,m,g,b){for(var E=o.context,A=E.gl,D=o.useProgram("collisionBox"),j=[],q=0,Z=0,Q=0;Q<p.length;Q++){var Y=p[Q],oe=u.getTile(Y),H=oe.getBucket(a);if(H){var ie=Y.posMatrix;m[0]===0&&m[1]===0||(ie=o.translatePosMatrix(Y.posMatrix,oe,m,g));var ce=b?H.textCollisionBox:H.iconCollisionBox,ve=H.collisionCircleArray;if(ve.length>0){var Me=l.create(),Pe=ie;l.mul(Me,H.placementInvProjMatrix,o.transform.glCoordMatrix),l.mul(Me,Me,H.placementViewportMatrix),j.push({circleArray:ve,circleOffset:Z,transform:Pe,invTransform:Me}),Z=q+=ve.length/4}ce&&D.draw(E,A.LINES,G.disabled,K.disabled,o.colorModeForRenderPass(),pe.disabled,ya(ie,o.transform,oe),a.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,null,o.transform.zoom,null,null,ce.collisionVertexBuffer)}}if(b&&j.length){var De=o.useProgram("collisionCircle"),Ne=new l.StructArrayLayout2f1f2i16;Ne.resize(4*q),Ne._trim();for(var He=0,We=0,lt=j;We<lt.length;We+=1)for(var Et=lt[We],At=0;At<Et.circleArray.length/4;At++){var kt=4*At,mr=Et.circleArray[kt+0],ht=Et.circleArray[kt+1],Zt=Et.circleArray[kt+2],Jt=Et.circleArray[kt+3];Ne.emplace(He++,mr,ht,Zt,Jt,0),Ne.emplace(He++,mr,ht,Zt,Jt,1),Ne.emplace(He++,mr,ht,Zt,Jt,2),Ne.emplace(He++,mr,ht,Zt,Jt,3)}(!Ns||Ns.length<2*q)&&(Ns=function(fn){var pi=2*fn,Qn=new l.StructArrayLayout3ui6;Qn.resize(pi),Qn._trim();for(var un=0;un<pi;un++){var _n=6*un;Qn.uint16[_n+0]=4*un+0,Qn.uint16[_n+1]=4*un+1,Qn.uint16[_n+2]=4*un+2,Qn.uint16[_n+3]=4*un+2,Qn.uint16[_n+4]=4*un+3,Qn.uint16[_n+5]=4*un+0}return Qn}(q));for(var qt=E.createIndexBuffer(Ns,!0),jt=E.createVertexBuffer(Ne,l.collisionCircleLayout.members,!0),Kt=0,Nt=j;Kt<Nt.length;Kt+=1){var Ot=Nt[Kt],Vn=nl(Ot.transform,Ot.invTransform,o.transform);De.draw(E,A.TRIANGLES,G.disabled,K.disabled,o.colorModeForRenderPass(),pe.disabled,Vn,a.id,jt,qt,l.SegmentVector.simpleSegment(0,2*Ot.circleOffset,Ot.circleArray.length,Ot.circleArray.length/2),null,o.transform.zoom,null,null,null)}jt.destroy(),qt.destroy()}}var wt=l.identity(new Float32Array(16));function Wr(o,u,a,p,m,g){var b=l.getAnchorAlignment(o),E=-(b.horizontalAlign-.5)*u,A=-(b.verticalAlign-.5)*a,D=l.evaluateVariableOffset(o,p);return new l.Point((E/m+D[0])*g,(A/m+D[1])*g)}function dr(o,u,a,p,m,g,b,E,A,D,j){var q=o.text.placedSymbolArray,Z=o.text.dynamicLayoutVertexArray,Q=o.icon.dynamicLayoutVertexArray,Y={};Z.clear();for(var oe=0;oe<q.length;oe++){var H=q.get(oe),ie=H.hidden||!H.crossTileID||o.allowVerticalPlacement&&!H.placedOrientation?null:p[H.crossTileID];if(ie){var ce=new l.Point(H.anchorX,H.anchorY),ve=Dt(ce,a?E:b),Me=fr(g.cameraToCenterDistance,ve.signedDistanceFromCamera),Pe=m.evaluateSizeForFeature(o.textSizeData,D,H)*Me/l.ONE_EM;a&&(Pe*=o.tilePixelRatio/A);for(var De=Wr(ie.anchor,ie.width,ie.height,ie.textOffset,ie.textBoxScale,Pe),Ne=a?Dt(ce.add(De),b).point:ve.point.add(u?De.rotate(-g.angle):De),He=o.allowVerticalPlacement&&H.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,We=0;We<H.numGlyphs;We++)l.addDynamicAttributes(Z,Ne,He);j&&H.associatedIconIndex>=0&&(Y[H.associatedIconIndex]={shiftedAnchor:Ne,angle:He})}else ii(H.numGlyphs,Z)}if(j){Q.clear();for(var lt=o.icon.placedSymbolArray,Et=0;Et<lt.length;Et++){var At=lt.get(Et);if(At.hidden)ii(At.numGlyphs,Q);else{var kt=Y[Et];if(kt)for(var mr=0;mr<At.numGlyphs;mr++)l.addDynamicAttributes(Q,kt.shiftedAnchor,kt.angle);else ii(At.numGlyphs,Q)}}o.icon.dynamicLayoutVertexBuffer.updateData(Q)}o.text.dynamicLayoutVertexBuffer.updateData(Z)}function sn(o,u,a){return a.iconsInText&&u?"symbolTextAndIcon":o?"symbolSDF":"symbolIcon"}function $r(o,u,a,p,m,g,b,E,A,D,j,q){for(var Z=o.context,Q=Z.gl,Y=o.transform,oe=E==="map",H=A==="map",ie=oe&&a.layout.get("symbol-placement")!=="point",ce=oe&&!H&&!ie,ve=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,Me=!1,Pe=o.depthModeForSublayer(0,G.ReadOnly),De=a.layout.get("text-variable-anchor"),Ne=[],He=0,We=p;He<We.length;He+=1){var lt=We[He],Et=u.getTile(lt),At=Et.getBucket(a);if(At){var kt=m?At.text:At.icon;if(kt&&kt.segments.get().length){var mr=kt.programConfigurations.get(a.id),ht=m||At.sdfIcons,Zt=m?At.textSizeData:At.iconSizeData,Jt=H||Y.pitch!==0,qt=o.useProgram(sn(ht,m,At),mr),jt=l.evaluateSizeForZoom(Zt,Y.zoom),Kt=void 0,Nt=[0,0],Ot=void 0,Vn=void 0,fn=null,pi=void 0;if(m)Ot=Et.glyphAtlasTexture,Vn=Q.LINEAR,Kt=Et.glyphAtlasTexture.size,At.iconsInText&&(Nt=Et.imageAtlasTexture.size,fn=Et.imageAtlasTexture,pi=Jt||o.options.rotating||o.options.zooming||Zt.kind==="composite"||Zt.kind==="camera"?Q.LINEAR:Q.NEAREST);else{var Qn=a.layout.get("icon-size").constantOr(0)!==1||At.iconsNeedLinear;Ot=Et.imageAtlasTexture,Vn=ht||o.options.rotating||o.options.zooming||Qn||Jt?Q.LINEAR:Q.NEAREST,Kt=Et.imageAtlasTexture.size}var un=Vr(Et,1,o.transform.zoom),_n=tn(lt.posMatrix,H,oe,o.transform,un),ao=Sr(lt.posMatrix,H,oe,o.transform,un),_i=De&&At.hasTextData(),ds=a.layout.get("icon-text-fit")!=="none"&&_i&&At.hasIconData();ie&&Hi(At,lt.posMatrix,o,m,_n,ao,H,D);var Li=o.translatePosMatrix(lt.posMatrix,Et,g,b),aa=ie||m&&De||ds?wt:_n,Uo=o.translatePosMatrix(ao,Et,g,b,!0),pl=ht&&a.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,_u={program:qt,buffers:kt,uniformValues:ht?At.iconsInText?js(Zt.kind,jt,ce,H,o,Li,aa,Uo,Kt,Nt):Yo(Zt.kind,jt,ce,H,o,Li,aa,Uo,m,Kt,!0):Va(Zt.kind,jt,ce,H,o,Li,aa,Uo,m,Kt),atlasTexture:Ot,atlasTextureIcon:fn,atlasInterpolation:Vn,atlasInterpolationIcon:pi,isSDF:ht,hasHalo:pl};if(ve&&At.canOverlap){Me=!0;for(var ms=0,xu=kt.segments.get();ms<xu.length;ms+=1){var hl=xu[ms];Ne.push({segments:new l.SegmentVector([hl]),sortKey:hl.sortKey,state:_u})}}else Ne.push({segments:kt.segments,sortKey:0,state:_u})}}}Me&&Ne.sort(function(ys,Xs){return ys.sortKey-Xs.sortKey});for(var Sa=0,fl=Ne;Sa<fl.length;Sa+=1){var Ea=fl[Sa],qn=Ea.state;if(Z.activeTexture.set(Q.TEXTURE0),qn.atlasTexture.bind(qn.atlasInterpolation,Q.CLAMP_TO_EDGE),qn.atlasTextureIcon&&(Z.activeTexture.set(Q.TEXTURE1),qn.atlasTextureIcon&&qn.atlasTextureIcon.bind(qn.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),qn.isSDF){var Ha=qn.uniformValues;qn.hasHalo&&(Ha.u_is_halo=1,ci(qn.buffers,Ea.segments,a,o,qn.program,Pe,j,q,Ha)),Ha.u_is_halo=0}ci(qn.buffers,Ea.segments,a,o,qn.program,Pe,j,q,qn.uniformValues)}}function ci(o,u,a,p,m,g,b,E,A){var D=p.context;m.draw(D,D.gl.TRIANGLES,g,b,E,pe.disabled,A,a.id,o.layoutVertexBuffer,o.indexBuffer,u,a.paint,p.transform.zoom,o.programConfigurations.get(a.id),o.dynamicLayoutVertexBuffer,o.opacityVertexBuffer)}function pn(o,u,a,p,m,g,b){var E,A,D,j,q,Z=o.context.gl,Q=a.paint.get("fill-pattern"),Y=Q&&Q.constantOr(1),oe=a.getCrossfadeParameters();b?(A=Y&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",E=Z.LINES):(A=Y?"fillPattern":"fill",E=Z.TRIANGLES);for(var H=0,ie=p;H<ie.length;H+=1){var ce=ie[H],ve=u.getTile(ce);if(!Y||ve.patternsLoaded()){var Me=ve.getBucket(a);if(Me){var Pe=Me.programConfigurations.get(a.id),De=o.useProgram(A,Pe);Y&&(o.context.activeTexture.set(Z.TEXTURE0),ve.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Pe.updatePaintBuffers(oe));var Ne=Q.constantOr(null);if(Ne&&ve.imageAtlas){var He=ve.imageAtlas,We=He.patternPositions[Ne.to.toString()],lt=He.patternPositions[Ne.from.toString()];We&&lt&&Pe.setConstantPatternPositions(We,lt)}var Et=o.translatePosMatrix(ce.posMatrix,ve,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(b){j=Me.indexBuffer2,q=Me.segments2;var At=[Z.drawingBufferWidth,Z.drawingBufferHeight];D=A==="fillOutlinePattern"&&Y?Hl(Et,o,oe,ve,At):tl(Et,At)}else j=Me.indexBuffer,q=Me.segments,D=Y?ma(Et,o,oe,ve):Ki(Et);De.draw(o.context,E,m,o.stencilModeForClipping(ce),g,pe.disabled,D,a.id,Me.layoutVertexBuffer,j,q,a.paint,o.transform.zoom,Pe)}}}}function gn(o,u,a,p,m,g,b){for(var E=o.context,A=E.gl,D=a.paint.get("fill-extrusion-pattern"),j=D.constantOr(1),q=a.getCrossfadeParameters(),Z=a.paint.get("fill-extrusion-opacity"),Q=0,Y=p;Q<Y.length;Q+=1){var oe=Y[Q],H=u.getTile(oe),ie=H.getBucket(a);if(ie){var ce=ie.programConfigurations.get(a.id),ve=o.useProgram(j?"fillExtrusionPattern":"fillExtrusion",ce);j&&(o.context.activeTexture.set(A.TEXTURE0),H.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ce.updatePaintBuffers(q));var Me=D.constantOr(null);if(Me&&H.imageAtlas){var Pe=H.imageAtlas,De=Pe.patternPositions[Me.to.toString()],Ne=Pe.patternPositions[Me.from.toString()];De&&Ne&&ce.setConstantPatternPositions(De,Ne)}var He=o.translatePosMatrix(oe.posMatrix,H,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),We=a.paint.get("fill-extrusion-vertical-gradient"),lt=j?Lo(He,o,We,Z,oe,q,H):$l(He,o,We,Z);ve.draw(E,E.gl.TRIANGLES,m,g,b,pe.backCCW,lt,a.id,ie.layoutVertexBuffer,ie.indexBuffer,ie.segments,a.paint,o.transform.zoom,ce)}}}function zi(o,u,a,p,m,g){var b=o.context,E=b.gl,A=u.fbo;if(A){var D=o.useProgram("hillshade");b.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,A.colorAttachment.get());var j=function(q,Z,Q){var Y=Q.paint.get("hillshade-shadow-color"),oe=Q.paint.get("hillshade-highlight-color"),H=Q.paint.get("hillshade-accent-color"),ie=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);Q.paint.get("hillshade-illumination-anchor")==="viewport"&&(ie-=q.transform.angle);var ce,ve,Me,Pe=!q.options.moving;return{u_matrix:q.transform.calculatePosMatrix(Z.tileID.toUnwrapped(),Pe),u_image:0,u_latrange:(ce=Z.tileID,ve=Math.pow(2,ce.canonical.z),Me=ce.canonical.y,[new l.MercatorCoordinate(0,Me/ve).toLngLat().lat,new l.MercatorCoordinate(0,(Me+1)/ve).toLngLat().lat]),u_light:[Q.paint.get("hillshade-exaggeration"),ie],u_shadow:Y,u_highlight:oe,u_accent:H}}(o,u,a);D.draw(b,E.TRIANGLES,p,m,g,pe.disabled,j,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}}function Qo(o,u,a,p,m,g){var b=o.context,E=b.gl,A=u.dem;if(A&&A.data){var D=A.dim,j=A.stride,q=A.getPixels();if(b.activeTexture.set(E.TEXTURE1),b.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||o.getTileTexture(j),u.demTexture){var Z=u.demTexture;Z.update(q,{premultiply:!1}),Z.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else u.demTexture=new l.Texture(b,q,E.RGBA,{premultiply:!1}),u.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);b.activeTexture.set(E.TEXTURE0);var Q=u.fbo;if(!Q){var Y=new l.Texture(b,{width:D,height:D,data:null},E.RGBA);Y.bind(E.LINEAR,E.CLAMP_TO_EDGE),(Q=u.fbo=b.createFramebuffer(D,D,!0)).colorAttachment.set(Y.texture)}b.bindFramebuffer.set(Q.framebuffer),b.viewport.set([0,0,D,D]),o.useProgram("hillshadePrepare").draw(b,E.TRIANGLES,p,m,g,pe.disabled,function(oe,H){var ie=H.stride,ce=l.create();return l.ortho(ce,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ce,ce,[0,-l.EXTENT,0]),{u_matrix:ce,u_image:1,u_dimension:[ie,ie],u_zoom:oe.overscaledZ,u_unpack:H.getUnpackVector()}}(u.tileID,A),a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function jn(o,u,a,p,m){var g=p.paint.get("raster-fade-duration");if(g>0){var b=l.browser.now(),E=(b-o.timeAdded)/g,A=u?(b-u.timeAdded)/g:-1,D=a.getSource(),j=m.coveringZoomLevel({tileSize:D.tileSize,roundZoom:D.roundZoom}),q=!u||Math.abs(u.tileID.overscaledZ-j)>Math.abs(o.tileID.overscaledZ-j),Z=q&&o.refreshedUponExpiration?1:l.clamp(q?E:1-A,0,1);return o.refreshedUponExpiration&&E>=1&&(o.refreshedUponExpiration=!1),u?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}var _o=new l.Color(1,0,0,1),qa=new l.Color(0,1,0,1),qs=new l.Color(0,0,1,1),ea=new l.Color(1,0,1,1),Za=new l.Color(0,1,1,1);function fu(o,u,a,p){Zs(o,0,u+a/2,o.transform.width,a,p)}function al(o,u,a,p){Zs(o,u-a/2,0,a,o.transform.height,p)}function Zs(o,u,a,p,m,g){var b=o.context,E=b.gl;E.enable(E.SCISSOR_TEST),E.scissor(u*l.browser.devicePixelRatio,a*l.browser.devicePixelRatio,p*l.browser.devicePixelRatio,m*l.browser.devicePixelRatio),b.clear({color:g}),E.disable(E.SCISSOR_TEST)}function jr(o,u,a){var p=o.context,m=p.gl,g=a.posMatrix,b=o.useProgram("debug"),E=G.disabled,A=K.disabled,D=o.colorModeForRenderPass();p.activeTexture.set(m.TEXTURE0),o.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),b.draw(p,m.LINE_STRIP,E,A,D,pe.disabled,Do(g,l.Color.red),"$debug",o.debugBuffer,o.tileBorderIndexBuffer,o.debugSegments);var j=u.getTileByID(a.key).latestRawTileData,q=Math.floor((j&&j.byteLength||0)/1024),Z=u.getTile(a).tileSize,Q=512/Math.min(Z,512)*(a.overscaledZ/o.transform.zoom)*.5,Y=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(Y+=" => "+a.overscaledZ),function(oe,H){oe.initDebugOverlayCanvas();var ie=oe.debugOverlayCanvas,ce=oe.context.gl,ve=oe.debugOverlayCanvas.getContext("2d");ve.clearRect(0,0,ie.width,ie.height),ve.shadowColor="white",ve.shadowBlur=2,ve.lineWidth=1.5,ve.strokeStyle="white",ve.textBaseline="top",ve.font="bold 36px Open Sans, sans-serif",ve.fillText(H,5,5),ve.strokeText(H,5,5),oe.debugOverlayTexture.update(ie),oe.debugOverlayTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)}(o,Y+" "+q+"kb"),b.draw(p,m.TRIANGLES,E,A,ue.alphaBlended,pe.disabled,Do(g,l.Color.transparent,Q),"$debug",o.debugBuffer,o.quadTriangleIndexBuffer,o.debugSegments)}var _r={symbol:function(o,u,a,p,m){if(o.renderPass==="translucent"){var g=K.disabled,b=o.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(E,A,D,j,q,Z,Q){for(var Y=A.transform,oe=q==="map",H=Z==="map",ie=0,ce=E;ie<ce.length;ie+=1){var ve=ce[ie],Me=j.getTile(ve),Pe=Me.getBucket(D);if(Pe&&Pe.text&&Pe.text.segments.get().length){var De=l.evaluateSizeForZoom(Pe.textSizeData,Y.zoom),Ne=Vr(Me,1,A.transform.zoom),He=tn(ve.posMatrix,H,oe,A.transform,Ne),We=D.layout.get("icon-text-fit")!=="none"&&Pe.hasIconData();if(De){var lt=Math.pow(2,Y.zoom-Me.tileID.overscaledZ);dr(Pe,oe,H,Q,l.symbolSize,Y,He,ve.posMatrix,lt,De,We)}}}}(p,o,a,u,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),m),a.paint.get("icon-opacity").constantOr(1)!==0&&$r(o,u,a,p,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),g,b),a.paint.get("text-opacity").constantOr(1)!==0&&$r(o,u,a,p,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),g,b),u.map.showCollisionBoxes&&(nt(o,u,a,p,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),nt(o,u,a,p,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(o,u,a,p){if(o.renderPass==="translucent"){var m=a.paint.get("circle-opacity"),g=a.paint.get("circle-stroke-width"),b=a.paint.get("circle-stroke-opacity"),E=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||g.constantOr(1)!==0&&b.constantOr(1)!==0){for(var A=o.context,D=A.gl,j=o.depthModeForSublayer(0,G.ReadOnly),q=K.disabled,Z=o.colorModeForRenderPass(),Q=[],Y=0;Y<p.length;Y++){var oe=p[Y],H=u.getTile(oe),ie=H.getBucket(a);if(ie){var ce=ie.programConfigurations.get(a.id),ve={programConfiguration:ce,program:o.useProgram("circle",ce),layoutVertexBuffer:ie.layoutVertexBuffer,indexBuffer:ie.indexBuffer,uniformValues:rl(o,oe,H,a)};if(E)for(var Me=0,Pe=ie.segments.get();Me<Pe.length;Me+=1){var De=Pe[Me];Q.push({segments:new l.SegmentVector([De]),sortKey:De.sortKey,state:ve})}else Q.push({segments:ie.segments,sortKey:0,state:ve})}}E&&Q.sort(function(Et,At){return Et.sortKey-At.sortKey});for(var Ne=0,He=Q;Ne<He.length;Ne+=1){var We=He[Ne],lt=We.state;lt.program.draw(A,D.TRIANGLES,j,q,Z,pe.disabled,lt.uniformValues,a.id,lt.layoutVertexBuffer,lt.indexBuffer,We.segments,a.paint,o.transform.zoom,lt.programConfiguration)}}}},heatmap:function(o,u,a,p){if(a.paint.get("heatmap-opacity")!==0)if(o.renderPass==="offscreen"){var m=o.context,g=m.gl,b=K.disabled,E=new ue([g.ONE,g.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Q,Y,oe){var H=Q.gl;Q.activeTexture.set(H.TEXTURE1),Q.viewport.set([0,0,Y.width/4,Y.height/4]);var ie=oe.heatmapFbo;if(ie)H.bindTexture(H.TEXTURE_2D,ie.colorAttachment.get()),Q.bindFramebuffer.set(ie.framebuffer);else{var ce=H.createTexture();H.bindTexture(H.TEXTURE_2D,ce),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.LINEAR),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.LINEAR),ie=oe.heatmapFbo=Q.createFramebuffer(Y.width/4,Y.height/4,!1),function(ve,Me,Pe,De){var Ne=ve.gl;Ne.texImage2D(Ne.TEXTURE_2D,0,Ne.RGBA,Me.width/4,Me.height/4,0,Ne.RGBA,ve.extRenderToTextureHalfFloat?ve.extTextureHalfFloat.HALF_FLOAT_OES:Ne.UNSIGNED_BYTE,null),De.colorAttachment.set(Pe)}(Q,Y,ce,ie)}})(m,o,a),m.clear({color:l.Color.transparent});for(var A=0;A<p.length;A++){var D=p[A];if(!u.hasRenderableParent(D)){var j=u.getTile(D),q=j.getBucket(a);if(q){var Z=q.programConfigurations.get(a.id);o.useProgram("heatmap",Z).draw(m,g.TRIANGLES,G.disabled,b,E,pe.disabled,Xl(D.posMatrix,j,o.transform.zoom,a.paint.get("heatmap-intensity")),a.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,a.paint,o.transform.zoom,Z)}}}m.viewport.set([0,0,o.width,o.height])}else o.renderPass==="translucent"&&(o.context.setColorMode(o.colorModeForRenderPass()),function(Q,Y){var oe=Q.context,H=oe.gl,ie=Y.heatmapFbo;if(ie){oe.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,ie.colorAttachment.get()),oe.activeTexture.set(H.TEXTURE1);var ce=Y.colorRampTexture;ce||(ce=Y.colorRampTexture=new l.Texture(oe,Y.colorRamp,H.RGBA)),ce.bind(H.LINEAR,H.CLAMP_TO_EDGE),Q.useProgram("heatmapTexture").draw(oe,H.TRIANGLES,G.disabled,K.disabled,Q.colorModeForRenderPass(),pe.disabled,function(ve,Me,Pe,De){var Ne=l.create();l.ortho(Ne,0,ve.width,ve.height,0,0,1);var He=ve.context.gl;return{u_matrix:Ne,u_world:[He.drawingBufferWidth,He.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Me.paint.get("heatmap-opacity")}}(Q,Y),Y.id,Q.viewportBuffer,Q.quadTriangleIndexBuffer,Q.viewportSegments,Y.paint,Q.transform.zoom)}}(o,a))},line:function(o,u,a,p){if(o.renderPass==="translucent"){var m=a.paint.get("line-opacity"),g=a.paint.get("line-width");if(m.constantOr(1)!==0&&g.constantOr(1)!==0)for(var b=o.depthModeForSublayer(0,G.ReadOnly),E=o.colorModeForRenderPass(),A=a.paint.get("line-dasharray"),D=a.paint.get("line-pattern"),j=D.constantOr(1),q=a.paint.get("line-gradient"),Z=a.getCrossfadeParameters(),Q=j?"linePattern":A?"lineSDF":q?"lineGradient":"line",Y=o.context,oe=Y.gl,H=!0,ie=0,ce=p;ie<ce.length;ie+=1){var ve=ce[ie],Me=u.getTile(ve);if(!j||Me.patternsLoaded()){var Pe=Me.getBucket(a);if(Pe){var De=Pe.programConfigurations.get(a.id),Ne=o.context.program.get(),He=o.useProgram(Q,De),We=H||He.program!==Ne,lt=D.constantOr(null);if(lt&&Me.imageAtlas){var Et=Me.imageAtlas,At=Et.patternPositions[lt.to.toString()],kt=Et.patternPositions[lt.from.toString()];At&&kt&&De.setConstantPatternPositions(At,kt)}var mr=j?Oo(o,Me,a,Z):A?Kl(o,Me,a,A,Z):q?Fr(o,Me,a,Pe.lineClipsArray.length):Yi(o,Me,a);if(j)Y.activeTexture.set(oe.TEXTURE0),Me.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),De.updatePaintBuffers(Z);else if(A&&(We||o.lineAtlas.dirty))Y.activeTexture.set(oe.TEXTURE0),o.lineAtlas.bind(Y);else if(q){var ht=Pe.gradients[a.id],Zt=ht.texture;if(a.gradientVersion!==ht.version){var Jt=256;if(a.stepInterpolant){var qt=u.getSource().maxzoom,jt=ve.canonical.z===qt?Math.ceil(1<<o.transform.maxZoom-ve.canonical.z):1;Jt=l.clamp(l.nextPowerOfTwo(Pe.maxLineLength/l.EXTENT*1024*jt),256,Y.maxTextureSize)}ht.gradient=l.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Jt,image:ht.gradient||void 0,clips:Pe.lineClipsArray}),ht.texture?ht.texture.update(ht.gradient):ht.texture=new l.Texture(Y,ht.gradient,oe.RGBA),ht.version=a.gradientVersion,Zt=ht.texture}Y.activeTexture.set(oe.TEXTURE0),Zt.bind(a.stepInterpolant?oe.NEAREST:oe.LINEAR,oe.CLAMP_TO_EDGE)}He.draw(Y,oe.TRIANGLES,b,o.stencilModeForClipping(ve),E,pe.disabled,mr,a.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,a.paint,o.transform.zoom,De,Pe.layoutVertexBuffer2),H=!1}}}}},fill:function(o,u,a,p){var m=a.paint.get("fill-color"),g=a.paint.get("fill-opacity");if(g.constantOr(1)!==0){var b=o.colorModeForRenderPass(),E=a.paint.get("fill-pattern"),A=o.opaquePassEnabledForLayer()&&!E.constantOr(1)&&m.constantOr(l.Color.transparent).a===1&&g.constantOr(0)===1?"opaque":"translucent";if(o.renderPass===A){var D=o.depthModeForSublayer(1,o.renderPass==="opaque"?G.ReadWrite:G.ReadOnly);pn(o,u,a,p,D,b,!1)}if(o.renderPass==="translucent"&&a.paint.get("fill-antialias")){var j=o.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,G.ReadOnly);pn(o,u,a,p,j,b,!0)}}},"fill-extrusion":function(o,u,a,p){var m=a.paint.get("fill-extrusion-opacity");if(m!==0&&o.renderPass==="translucent"){var g=new G(o.context.gl.LEQUAL,G.ReadWrite,o.depthRangeFor3D);if(m!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))gn(o,u,a,p,g,K.disabled,ue.disabled),gn(o,u,a,p,g,o.stencilModeFor3D(),o.colorModeForRenderPass());else{var b=o.colorModeForRenderPass();gn(o,u,a,p,g,K.disabled,b)}}},hillshade:function(o,u,a,p){if(o.renderPass==="offscreen"||o.renderPass==="translucent"){for(var m=o.context,g=o.depthModeForSublayer(0,G.ReadOnly),b=o.colorModeForRenderPass(),E=o.renderPass==="translucent"?o.stencilConfigForOverlap(p):[{},p],A=E[0],D=0,j=E[1];D<j.length;D+=1){var q=j[D],Z=u.getTile(q);Z.needsHillshadePrepare&&o.renderPass==="offscreen"?Qo(o,Z,a,g,K.disabled,b):o.renderPass==="translucent"&&zi(o,Z,a,g,A[q.overscaledZ],b)}m.viewport.set([0,0,o.width,o.height])}},raster:function(o,u,a,p){if(o.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&p.length)for(var m=o.context,g=m.gl,b=u.getSource(),E=o.useProgram("raster"),A=o.colorModeForRenderPass(),D=b instanceof zt?[{},p]:o.stencilConfigForOverlap(p),j=D[0],q=D[1],Z=q[q.length-1].overscaledZ,Q=!o.options.moving,Y=0,oe=q;Y<oe.length;Y+=1){var H=oe[Y],ie=o.depthModeForSublayer(H.overscaledZ-Z,a.paint.get("raster-opacity")===1?G.ReadWrite:G.ReadOnly,g.LESS),ce=u.getTile(H),ve=o.transform.calculatePosMatrix(H.toUnwrapped(),Q);ce.registerFadeDuration(a.paint.get("raster-fade-duration"));var Me=u.findLoadedParent(H,0),Pe=jn(ce,Me,u,a,o.transform),De=void 0,Ne=void 0,He=a.paint.get("raster-resampling")==="nearest"?g.NEAREST:g.LINEAR;m.activeTexture.set(g.TEXTURE0),ce.texture.bind(He,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(g.TEXTURE1),Me?(Me.texture.bind(He,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),De=Math.pow(2,Me.tileID.overscaledZ-ce.tileID.overscaledZ),Ne=[ce.tileID.canonical.x*De%1,ce.tileID.canonical.y*De%1]):ce.texture.bind(He,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST);var We=il(ve,Ne||[0,0],De||1,Pe,a);b instanceof zt?E.draw(m,g.TRIANGLES,ie,K.disabled,A,pe.disabled,We,a.id,b.boundsBuffer,o.quadTriangleIndexBuffer,b.boundsSegments):E.draw(m,g.TRIANGLES,ie,j[H.overscaledZ],A,pe.disabled,We,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}},background:function(o,u,a){var p=a.paint.get("background-color"),m=a.paint.get("background-opacity");if(m!==0){var g=o.context,b=g.gl,E=o.transform,A=E.tileSize,D=a.paint.get("background-pattern");if(!o.isPatternMissing(D)){var j=!D&&p.a===1&&m===1&&o.opaquePassEnabledForLayer()?"opaque":"translucent";if(o.renderPass===j){var q=K.disabled,Z=o.depthModeForSublayer(0,j==="opaque"?G.ReadWrite:G.ReadOnly),Q=o.colorModeForRenderPass(),Y=o.useProgram(D?"backgroundPattern":"background"),oe=E.coveringTiles({tileSize:A});D&&(g.activeTexture.set(b.TEXTURE0),o.imageManager.bind(o.context));for(var H=a.getCrossfadeParameters(),ie=0,ce=oe;ie<ce.length;ie+=1){var ve=ce[ie],Me=o.transform.calculatePosMatrix(ve.toUnwrapped()),Pe=D?de(Me,m,o,D,{tileID:ve,tileSize:A},H):Vs(Me,m,p);Y.draw(g,b.TRIANGLES,Z,q,Q,pe.disabled,Pe,a.id,o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}}}},debug:function(o,u,a){for(var p=0;p<a.length;p++)jr(o,u,a[p])},custom:function(o,u,a){var p=o.context,m=a.implementation;if(o.renderPass==="offscreen"){var g=m.prerender;g&&(o.setCustomLayerDefaults(),p.setColorMode(o.colorModeForRenderPass()),g.call(m,p.gl,o.transform.customLayerMatrix()),p.setDirty(),o.setBaseState())}else if(o.renderPass==="translucent"){o.setCustomLayerDefaults(),p.setColorMode(o.colorModeForRenderPass()),p.setStencilMode(K.disabled);var b=m.renderingMode==="3d"?new G(o.context.gl.LEQUAL,G.ReadWrite,o.depthRangeFor3D):o.depthModeForSublayer(0,G.ReadOnly);p.setDepthMode(b),m.render(p.gl,o.transform.customLayerMatrix()),p.setDirty(),o.setBaseState(),p.bindFramebuffer.set(null)}}},Dr=function(o,u){this.context=new V(o),this.transform=u,this._tileTextures={},this.setup(),this.numSublayers=ee.maxUnderzooming+ee.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new It,this.gpuTimers={}};Dr.prototype.resize=function(o,u){if(this.width=o*l.browser.devicePixelRatio,this.height=u*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,p=this.style._order;a<p.length;a+=1)this.style._layers[p[a]].resize()},Dr.prototype.setup=function(){var o=this.context,u=new l.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(l.EXTENT,0),u.emplaceBack(0,l.EXTENT),u.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(u,nn.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var a=new l.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(l.EXTENT,0),a.emplaceBack(0,l.EXTENT),a.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=o.createVertexBuffer(a,nn.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var p=new l.StructArrayLayout4i8;p.emplaceBack(0,0,0,0),p.emplaceBack(l.EXTENT,0,l.EXTENT,0),p.emplaceBack(0,l.EXTENT,0,l.EXTENT),p.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(p,Ye.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var m=new l.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(m,nn.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var g=new l.StructArrayLayout1ui2;g.emplaceBack(0),g.emplaceBack(1),g.emplaceBack(3),g.emplaceBack(2),g.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(g);var b=new l.StructArrayLayout3ui6;b.emplaceBack(0,1,2),b.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(b),this.emptyTexture=new l.Texture(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);var E=this.context.gl;this.stencilClearMode=new K({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)},Dr.prototype.clearStencil=function(){var o=this.context,u=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=l.create();l.ortho(a,0,this.width,this.height,0,0,1),l.scale(a,a,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,u.TRIANGLES,G.disabled,this.stencilClearMode,ue.disabled,pe.disabled,Ji(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Dr.prototype._renderTileClippingMasks=function(o,u){if(this.currentStencilSource!==o.source&&o.isTileClipped()&&u&&u.length){this.currentStencilSource=o.source;var a=this.context,p=a.gl;this.nextStencilID+u.length>256&&this.clearStencil(),a.setColorMode(ue.disabled),a.setDepthMode(G.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var g=0,b=u;g<b.length;g+=1){var E=b[g],A=this._tileClippingMaskIDs[E.key]=this.nextStencilID++;m.draw(a,p.TRIANGLES,G.disabled,new K({func:p.ALWAYS,mask:0},A,255,p.KEEP,p.KEEP,p.REPLACE),ue.disabled,pe.disabled,Ji(E.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Dr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var o=this.nextStencilID++,u=this.context.gl;return new K({func:u.NOTEQUAL,mask:255},o,255,u.KEEP,u.KEEP,u.REPLACE)},Dr.prototype.stencilModeForClipping=function(o){var u=this.context.gl;return new K({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,u.KEEP,u.KEEP,u.REPLACE)},Dr.prototype.stencilConfigForOverlap=function(o){var u,a=this.context.gl,p=o.sort(function(A,D){return D.overscaledZ-A.overscaledZ}),m=p[p.length-1].overscaledZ,g=p[0].overscaledZ-m+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();for(var b={},E=0;E<g;E++)b[E+m]=new K({func:a.GEQUAL,mask:255},E+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=g,[b,p]}return[(u={},u[m]=K.disabled,u),p]},Dr.prototype.colorModeForRenderPass=function(){var o=this.context.gl;return this._showOverdrawInspector?new ue([o.CONSTANT_COLOR,o.ONE],new l.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ue.unblended:ue.alphaBlended},Dr.prototype.depthModeForSublayer=function(o,u,a){if(!this.opaquePassEnabledForLayer())return G.disabled;var p=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new G(a||this.context.gl.LEQUAL,u,[p,p])},Dr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Dr.prototype.render=function(o,u){var a=this;this.style=o,this.options=u,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var p=this.style._order,m=this.style.sourceCaches;for(var g in m){var b=m[g];b.used&&b.prepare(this.context)}var E,A,D={},j={},q={};for(var Z in m){var Q=m[Z];D[Z]=Q.getVisibleCoordinates(),j[Z]=D[Z].slice().reverse(),q[Z]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Y=0;Y<p.length;Y++)if(this.style._layers[p[Y]].is3D()){this.opaquePassCutoff=Y;break}this.renderPass="offscreen";for(var oe=0,H=p;oe<H.length;oe+=1){var ie=this.style._layers[H[oe]];if(ie.hasOffscreenPass()&&!ie.isHidden(this.transform.zoom)){var ce=j[ie.source];(ie.type==="custom"||ce.length)&&this.renderLayer(this,m[ie.source],ie,ce)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){var ve=this.style._layers[p[this.currentLayer]],Me=m[ve.source],Pe=D[ve.source];this._renderTileClippingMasks(ve,Pe),this.renderLayer(this,Me,ve,Pe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){var De=this.style._layers[p[this.currentLayer]],Ne=m[De.source],He=(De.type==="symbol"?q:j)[De.source];this._renderTileClippingMasks(De,D[De.source]),this.renderLayer(this,Ne,De,He)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(We){We.source&&!We.isHidden(a.transform.zoom)&&(We.source!==(A&&A.id)&&(A=a.style.sourceCaches[We.source]),(!E||E.getSource().maxzoom<A.getSource().maxzoom)&&(E=A))}),E&&_r.debug(this,E,E.getVisibleCoordinates())),this.options.showPadding&&function(We){var lt=We.transform.padding;fu(We,We.transform.height-(lt.top||0),3,_o),fu(We,lt.bottom||0,3,qa),al(We,lt.left||0,3,qs),al(We,We.transform.width-(lt.right||0),3,ea);var Et=We.transform.centerPoint;(function(At,kt,mr,ht){Zs(At,kt-1,mr-10,2,20,ht),Zs(At,kt-10,mr-1,20,2,ht)})(We,Et.x,We.transform.height-Et.y,Za)}(this),this.context.setDefault()},Dr.prototype.renderLayer=function(o,u,a,p){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||p.length)&&(this.id=a.id,this.gpuTimingStart(a),_r[a.type](o,u,a,p,this.style.placement.variableOffsets),this.gpuTimingEnd())},Dr.prototype.gpuTimingStart=function(o){if(this.options.gpuTiming){var u=this.context.extTimerQuery,a=this.gpuTimers[o.id];a||(a=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),a.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,a.query)}},Dr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}},Dr.prototype.collectGpuTimers=function(){var o=this.gpuTimers;return this.gpuTimers={},o},Dr.prototype.queryGpuTimers=function(o){var u={};for(var a in o){var p=o[a],m=this.context.extTimerQuery,g=m.getQueryObjectEXT(p.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(p.query),u[a]=g}return u},Dr.prototype.translatePosMatrix=function(o,u,a,p,m){if(!a[0]&&!a[1])return o;var g=m?p==="map"?this.transform.angle:0:p==="viewport"?-this.transform.angle:0;if(g){var b=Math.sin(g),E=Math.cos(g);a=[a[0]*E-a[1]*b,a[0]*b+a[1]*E]}var A=[m?a[0]:Vr(u,a[0],this.transform.zoom),m?a[1]:Vr(u,a[1],this.transform.zoom),0],D=new Float32Array(16);return l.translate(D,o,A),D},Dr.prototype.saveTileTexture=function(o){var u=this._tileTextures[o.size[0]];u?u.push(o):this._tileTextures[o.size[0]]=[o]},Dr.prototype.getTileTexture=function(o){var u=this._tileTextures[o];return u&&u.length>0?u.pop():null},Dr.prototype.isPatternMissing=function(o){if(!o)return!1;if(!o.from||!o.to)return!0;var u=this.imageManager.getPattern(o.from.toString()),a=this.imageManager.getPattern(o.to.toString());return!u||!a},Dr.prototype.useProgram=function(o,u){this.cache=this.cache||{};var a=""+o+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new Bs(this.context,o,ja[o],u,Re[o],this._showOverdrawInspector)),this.cache[a]},Dr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Dr.prototype.setBaseState=function(){var o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)},Dr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Dr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var xo=function(o,u){this.points=o,this.planes=u};xo.fromInvProjectionMatrix=function(o,u,a){var p=Math.pow(2,a),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(b){return l.transformMat4([],b,o)}).map(function(b){return l.scale$1([],b,1/b[3]/u*p)}),g=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(b){var E=l.sub([],m[b[0]],m[b[1]]),A=l.sub([],m[b[2]],m[b[1]]),D=l.normalize([],l.cross([],E,A)),j=-l.dot(D,m[b[1]]);return D.concat(j)});return new xo(m,g)};var ta=function(o,u){this.min=o,this.max=u,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};ta.prototype.quadrant=function(o){for(var u=[o%2==0,o<2],a=l.clone$2(this.min),p=l.clone$2(this.max),m=0;m<u.length;m++)a[m]=u[m]?this.min[m]:this.center[m],p[m]=u[m]?this.center[m]:this.max[m];return p[2]=this.max[2],new ta(a,p)},ta.prototype.distanceX=function(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]},ta.prototype.distanceY=function(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]},ta.prototype.intersects=function(o){for(var u=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,p=0;p<o.planes.length;p++){for(var m=o.planes[p],g=0,b=0;b<u.length;b++)g+=l.dot$1(m,u[b])>=0;if(g===0)return 0;g!==u.length&&(a=!1)}if(a)return 2;for(var E=0;E<3;E++){for(var A=Number.MAX_VALUE,D=-Number.MAX_VALUE,j=0;j<o.points.length;j++){var q=o.points[j][E]-this.min[E];A=Math.min(A,q),D=Math.max(D,q)}if(D<0||A>this.max[E]-this.min[E])return 0}return 1};var Ln=function(o,u,a,p){if(o===void 0&&(o=0),u===void 0&&(u=0),a===void 0&&(a=0),p===void 0&&(p=0),isNaN(o)||o<0||isNaN(u)||u<0||isNaN(a)||a<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=u,this.left=a,this.right=p};Ln.prototype.interpolate=function(o,u,a){return u.top!=null&&o.top!=null&&(this.top=l.number(o.top,u.top,a)),u.bottom!=null&&o.bottom!=null&&(this.bottom=l.number(o.bottom,u.bottom,a)),u.left!=null&&o.left!=null&&(this.left=l.number(o.left,u.left,a)),u.right!=null&&o.right!=null&&(this.right=l.number(o.right,u.right,a)),this},Ln.prototype.getCenter=function(o,u){var a=l.clamp((this.left+o-this.right)/2,0,o),p=l.clamp((this.top+u-this.bottom)/2,0,u);return new l.Point(a,p)},Ln.prototype.equals=function(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right},Ln.prototype.clone=function(){return new Ln(this.top,this.bottom,this.left,this.right)},Ln.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var $t=function(o,u,a,p,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=o||0,this._maxZoom=u||22,this._minPitch=a==null?0:a,this._maxPitch=p==null?60:p,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ln,this._posMatrixCache={},this._alignedPosMatrixCache={}},gr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};$t.prototype.clone=function(){var o=new $t(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o},gr.minZoom.get=function(){return this._minZoom},gr.minZoom.set=function(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))},gr.maxZoom.get=function(){return this._maxZoom},gr.maxZoom.set=function(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))},gr.minPitch.get=function(){return this._minPitch},gr.minPitch.set=function(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))},gr.maxPitch.get=function(){return this._maxPitch},gr.maxPitch.set=function(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))},gr.renderWorldCopies.get=function(){return this._renderWorldCopies},gr.renderWorldCopies.set=function(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o},gr.worldSize.get=function(){return this.tileSize*this.scale},gr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},gr.size.get=function(){return new l.Point(this.width,this.height)},gr.bearing.get=function(){return-this.angle/Math.PI*180},gr.bearing.set=function(o){var u=-l.wrap(o,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},gr.pitch.get=function(){return this._pitch/Math.PI*180},gr.pitch.set=function(o){var u=l.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())},gr.fov.get=function(){return this._fov/Math.PI*180},gr.fov.set=function(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())},gr.zoom.get=function(){return this._zoom},gr.zoom.set=function(o){var u=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())},gr.center.get=function(){return this._center},gr.center.set=function(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())},gr.padding.get=function(){return this._edgeInsets.toJSON()},gr.padding.set=function(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())},gr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},$t.prototype.isPaddingEqual=function(o){return this._edgeInsets.equals(o)},$t.prototype.interpolatePadding=function(o,u,a){this._unmodified=!1,this._edgeInsets.interpolate(o,u,a),this._constrain(),this._calcMatrices()},$t.prototype.coveringZoomLevel=function(o){var u=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,u)},$t.prototype.getVisibleUnwrappedCoordinates=function(o){var u=[new l.UnwrappedTileID(0,o)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new l.Point(0,0)),p=this.pointCoordinate(new l.Point(this.width,0)),m=this.pointCoordinate(new l.Point(this.width,this.height)),g=this.pointCoordinate(new l.Point(0,this.height)),b=Math.floor(Math.min(a.x,p.x,m.x,g.x)),E=Math.floor(Math.max(a.x,p.x,m.x,g.x)),A=b-1;A<=E+1;A++)A!==0&&u.push(new l.UnwrappedTileID(A,o));return u},$t.prototype.coveringTiles=function(o){var u=this.coveringZoomLevel(o),a=u;if(o.minzoom!==void 0&&u<o.minzoom)return[];o.maxzoom!==void 0&&u>o.maxzoom&&(u=o.maxzoom);var p=l.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,u),g=[m*p.x,m*p.y,0],b=xo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u),E=o.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(E=u);var A=function(We){return{aabb:new ta([We*m,0,0],[(We+1)*m,m,0]),zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}},D=[],j=[],q=u,Z=o.reparseOverscaled?a:u;if(this._renderWorldCopies)for(var Q=1;Q<=3;Q++)D.push(A(-Q)),D.push(A(Q));for(D.push(A(0));D.length>0;){var Y=D.pop(),oe=Y.x,H=Y.y,ie=Y.fullyVisible;if(!ie){var ce=Y.aabb.intersects(b);if(ce===0)continue;ie=ce===2}var ve=Y.aabb.distanceX(g),Me=Y.aabb.distanceY(g),Pe=Math.max(Math.abs(ve),Math.abs(Me));if(Y.zoom===q||Pe>3+(1<<q-Y.zoom)-2&&Y.zoom>=E)j.push({tileID:new l.OverscaledTileID(Y.zoom===q?Z:Y.zoom,Y.wrap,Y.zoom,oe,H),distanceSq:l.sqrLen([g[0]-.5-oe,g[1]-.5-H])});else for(var De=0;De<4;De++){var Ne=(oe<<1)+De%2,He=(H<<1)+(De>>1);D.push({aabb:Y.aabb.quadrant(De),zoom:Y.zoom+1,x:Ne,y:He,wrap:Y.wrap,fullyVisible:ie})}}return j.sort(function(We,lt){return We.distanceSq-lt.distanceSq}).map(function(We){return We.tileID})},$t.prototype.resize=function(o,u){this.width=o,this.height=u,this.pixelsToGLUnits=[2/o,-2/u],this._constrain(),this._calcMatrices()},gr.unmodified.get=function(){return this._unmodified},$t.prototype.zoomScale=function(o){return Math.pow(2,o)},$t.prototype.scaleZoom=function(o){return Math.log(o)/Math.LN2},$t.prototype.project=function(o){var u=l.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(o.lng)*this.worldSize,l.mercatorYfromLat(u)*this.worldSize)},$t.prototype.unproject=function(o){return new l.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()},gr.point.get=function(){return this.project(this.center)},$t.prototype.setLocationAtPoint=function(o,u){var a=this.pointCoordinate(u),p=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(o),g=new l.MercatorCoordinate(m.x-(a.x-p.x),m.y-(a.y-p.y));this.center=this.coordinateLocation(g),this._renderWorldCopies&&(this.center=this.center.wrap())},$t.prototype.locationPoint=function(o){return this.coordinatePoint(this.locationCoordinate(o))},$t.prototype.pointLocation=function(o){return this.coordinateLocation(this.pointCoordinate(o))},$t.prototype.locationCoordinate=function(o){return l.MercatorCoordinate.fromLngLat(o)},$t.prototype.coordinateLocation=function(o){return o.toLngLat()},$t.prototype.pointCoordinate=function(o){var u=[o.x,o.y,0,1],a=[o.x,o.y,1,1];l.transformMat4(u,u,this.pixelMatrixInverse),l.transformMat4(a,a,this.pixelMatrixInverse);var p=u[3],m=a[3],g=u[1]/p,b=a[1]/m,E=u[2]/p,A=a[2]/m,D=E===A?0:(0-E)/(A-E);return new l.MercatorCoordinate(l.number(u[0]/p,a[0]/m,D)/this.worldSize,l.number(g,b,D)/this.worldSize)},$t.prototype.coordinatePoint=function(o){var u=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(u,u,this.pixelMatrix),new l.Point(u[0]/u[3],u[1]/u[3])},$t.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},$t.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},$t.prototype.setMaxBounds=function(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},$t.prototype.calculatePosMatrix=function(o,u){u===void 0&&(u=!1);var a=o.key,p=u?this._alignedPosMatrixCache:this._posMatrixCache;if(p[a])return p[a];var m=o.canonical,g=this.worldSize/this.zoomScale(m.z),b=m.x+Math.pow(2,m.z)*o.wrap,E=l.identity(new Float64Array(16));return l.translate(E,E,[b*g,m.y*g,0]),l.scale(E,E,[g/l.EXTENT,g/l.EXTENT,1]),l.multiply(E,u?this.alignedProjMatrix:this.projMatrix,E),p[a]=new Float32Array(E),p[a]},$t.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},$t.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var o,u,a,p,m=-90,g=90,b=-180,E=180,A=this.size,D=this._unmodified;if(this.latRange){var j=this.latRange;m=l.mercatorYfromLat(j[1])*this.worldSize,o=(g=l.mercatorYfromLat(j[0])*this.worldSize)-m<A.y?A.y/(g-m):0}if(this.lngRange){var q=this.lngRange;b=l.mercatorXfromLng(q[0])*this.worldSize,u=(E=l.mercatorXfromLng(q[1])*this.worldSize)-b<A.x?A.x/(E-b):0}var Z=this.point,Q=Math.max(u||0,o||0);if(Q)return this.center=this.unproject(new l.Point(u?(E+b)/2:Z.x,o?(g+m)/2:Z.y)),this.zoom+=this.scaleZoom(Q),this._unmodified=D,void(this._constraining=!1);if(this.latRange){var Y=Z.y,oe=A.y/2;Y-oe<m&&(p=m+oe),Y+oe>g&&(p=g-oe)}if(this.lngRange){var H=Z.x,ie=A.x/2;H-ie<b&&(a=b+ie),H+ie>E&&(a=E-ie)}a===void 0&&p===void 0||(this.center=this.unproject(new l.Point(a!==void 0?a:Z.x,p!==void 0?p:Z.y))),this._unmodified=D,this._constraining=!1}},$t.prototype._calcMatrices=function(){if(this.height){var o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var u=Math.PI/2+this._pitch,a=this._fov*(.5+o.y/this.height),p=Math.sin(a)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-u-a,.01,Math.PI-.01)),m=this.point,g=m.x,b=m.y,E=1.01*(Math.cos(Math.PI/2-this._pitch)*p+this.cameraToCenterDistance),A=this.height/50,D=new Float64Array(16);l.perspective(D,this._fov,this.width/this.height,A,E),D[8]=2*-o.x/this.width,D[9]=2*o.y/this.height,l.scale(D,D,[1,-1,1]),l.translate(D,D,[0,0,-this.cameraToCenterDistance]),l.rotateX(D,D,this._pitch),l.rotateZ(D,D,this.angle),l.translate(D,D,[-g,-b,0]),this.mercatorMatrix=l.scale([],D,[this.worldSize,this.worldSize,this.worldSize]),l.scale(D,D,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=D,this.invProjMatrix=l.invert([],this.projMatrix);var j=this.width%2/2,q=this.height%2/2,Z=Math.cos(this.angle),Q=Math.sin(this.angle),Y=g-Math.round(g)+Z*j+Q*q,oe=b-Math.round(b)+Z*q+Q*j,H=new Float64Array(D);if(l.translate(H,H,[Y>.5?Y-1:Y,oe>.5?oe-1:oe,0]),this.alignedProjMatrix=H,D=l.create(),l.scale(D,D,[this.width/2,-this.height/2,1]),l.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=l.create(),l.scale(D,D,[1,-1,1]),l.translate(D,D,[-1,-1,0]),l.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(D=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=D,this._posMatrixCache={},this._alignedPosMatrixCache={}}},$t.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var o=this.pointCoordinate(new l.Point(0,0)),u=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance},$t.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,o))},$t.prototype.getCameraQueryGeometry=function(o){var u=this.getCameraPoint();if(o.length===1)return[o[0],u];for(var a=u.x,p=u.y,m=u.x,g=u.y,b=0,E=o;b<E.length;b+=1){var A=E[b];a=Math.min(a,A.x),p=Math.min(p,A.y),m=Math.max(m,A.x),g=Math.max(g,A.y)}return[new l.Point(a,p),new l.Point(m,p),new l.Point(m,g),new l.Point(a,g),new l.Point(a,p)]},Object.defineProperties($t.prototype,gr);var Jn=function(o){var u,a,p,m;this._hashName=o&&encodeURIComponent(o),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(u=this._updateHashUnthrottled.bind(this),a=!1,p=null,m=function(){p=null,a&&(u(),p=setTimeout(m,300),a=!1)},function(){return a=!0,p||m(),p})};Jn.prototype.addTo=function(o){return this._map=o,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Jn.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Jn.prototype.getHashString=function(o){var u=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,p=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,p),g=Math.round(u.lng*m)/m,b=Math.round(u.lat*m)/m,E=this._map.getBearing(),A=this._map.getPitch(),D="";if(D+=o?"/"+g+"/"+b+"/"+a:a+"/"+b+"/"+g,(E||A)&&(D+="/"+Math.round(10*E)/10),A&&(D+="/"+Math.round(A)),this._hashName){var j=this._hashName,q=!1,Z=l.window.location.hash.slice(1).split("&").map(function(Q){var Y=Q.split("=")[0];return Y===j?(q=!0,Y+"="+D):Q}).filter(function(Q){return Q});return q||Z.push(j+"="+D),"#"+Z.join("&")}return"#"+D},Jn.prototype._getCurrentHash=function(){var o,u=this,a=l.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(p){return p.split("=")}).forEach(function(p){p[0]===u._hashName&&(o=p)}),(o&&o[1]||"").split("/")):a.split("/")},Jn.prototype._onHashChange=function(){var o=this._getCurrentHash();if(o.length>=3&&!o.some(function(a){return isNaN(a)})){var u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:u,pitch:+(o[4]||0)}),!0}return!1},Jn.prototype._updateHashUnthrottled=function(){var o=l.window.location.href.replace(/(#.+)?$/,this.getHashString());try{l.window.history.replaceState(l.window.history.state,null,o)}catch{}};var va={linearity:.3,easing:l.bezier(0,0,.3,1)},bo=l.extend({deceleration:2500,maxSpeed:1400},va),Qi=l.extend({deceleration:20,maxSpeed:1400},va),Jl=l.extend({deceleration:1e3,maxSpeed:360},va),du=l.extend({deceleration:1e3,maxSpeed:90},va),Ga=function(o){this._map=o,this.clear()};function ga(o,u){(!o.duration||o.duration<u.duration)&&(o.duration=u.duration,o.easing=u.easing)}function eo(o,u,a){var p=a.maxSpeed,m=a.linearity,g=a.deceleration,b=l.clamp(o*m/(u/1e3),-p,p),E=Math.abs(b)/(g*m);return{easing:a.easing,duration:1e3*E,amount:b*(E/2)}}Ga.prototype.clear=function(){this._inertiaBuffer=[]},Ga.prototype.record=function(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:o})},Ga.prototype._drainInertiaBuffer=function(){for(var o=this._inertiaBuffer,u=l.browser.now();o.length>0&&u-o[0].time>160;)o.shift()},Ga.prototype._onMoveEnd=function(o){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var u={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},a=0,p=this._inertiaBuffer;a<p.length;a+=1){var m=p[a].settings;u.zoom+=m.zoomDelta||0,u.bearing+=m.bearingDelta||0,u.pitch+=m.pitchDelta||0,m.panDelta&&u.pan._add(m.panDelta),m.around&&(u.around=m.around),m.pinchAround&&(u.pinchAround=m.pinchAround)}var g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(u.pan.mag()){var E=eo(u.pan.mag(),g,l.extend({},bo,o||{}));b.offset=u.pan.mult(E.amount/u.pan.mag()),b.center=this._map.transform.center,ga(b,E)}if(u.zoom){var A=eo(u.zoom,g,Qi);b.zoom=this._map.transform.zoom+A.amount,ga(b,A)}if(u.bearing){var D=eo(u.bearing,g,Jl);b.bearing=this._map.transform.bearing+l.clamp(D.amount,-179,179),ga(b,D)}if(u.pitch){var j=eo(u.pitch,g,du);b.pitch=this._map.transform.pitch+j.amount,ga(b,j)}if(b.zoom||b.bearing){var q=u.pinchAround===void 0?u.around:u.pinchAround;b.around=q?this._map.unproject(q):this._map.getCenter()}return this.clear(),l.extend(b,{noMoveStart:!0})}};var hn=function(o){function u(p,m,g,b){b===void 0&&(b={});var E=k.mousePos(m.getCanvasContainer(),g),A=m.unproject(E);o.call(this,p,l.extend({point:E,lngLat:A,originalEvent:g},b)),this._defaultPrevented=!1,this.target=m}o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u;var a={defaultPrevented:{configurable:!0}};return u.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(u.prototype,a),u}(l.Event),_a=function(o){function u(p,m,g){var b=p==="touchend"?g.changedTouches:g.touches,E=k.touchPos(m.getCanvasContainer(),b),A=E.map(function(q){return m.unproject(q)}),D=E.reduce(function(q,Z,Q,Y){return q.add(Z.div(Y.length))},new l.Point(0,0)),j=m.unproject(D);o.call(this,p,{points:E,point:D,lngLats:A,lngLat:j,originalEvent:g}),this._defaultPrevented=!1}o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u;var a={defaultPrevented:{configurable:!0}};return u.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(u.prototype,a),u}(l.Event),Gs=function(o){function u(p,m,g){o.call(this,p,{originalEvent:g}),this._defaultPrevented=!1}o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u;var a={defaultPrevented:{configurable:!0}};return u.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(u.prototype,a),u}(l.Event),Tn=function(o,u){this._map=o,this._clickTolerance=u.clickTolerance};Tn.prototype.reset=function(){delete this._mousedownPos},Tn.prototype.wheel=function(o){return this._firePreventable(new Gs(o.type,this._map,o))},Tn.prototype.mousedown=function(o,u){return this._mousedownPos=u,this._firePreventable(new hn(o.type,this._map,o))},Tn.prototype.mouseup=function(o){this._map.fire(new hn(o.type,this._map,o))},Tn.prototype.click=function(o,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new hn(o.type,this._map,o))},Tn.prototype.dblclick=function(o){return this._firePreventable(new hn(o.type,this._map,o))},Tn.prototype.mouseover=function(o){this._map.fire(new hn(o.type,this._map,o))},Tn.prototype.mouseout=function(o){this._map.fire(new hn(o.type,this._map,o))},Tn.prototype.touchstart=function(o){return this._firePreventable(new _a(o.type,this._map,o))},Tn.prototype.touchmove=function(o){this._map.fire(new _a(o.type,this._map,o))},Tn.prototype.touchend=function(o){this._map.fire(new _a(o.type,this._map,o))},Tn.prototype.touchcancel=function(o){this._map.fire(new _a(o.type,this._map,o))},Tn.prototype._firePreventable=function(o){if(this._map.fire(o),o.defaultPrevented)return{}},Tn.prototype.isEnabled=function(){return!0},Tn.prototype.isActive=function(){return!1},Tn.prototype.enable=function(){},Tn.prototype.disable=function(){};var ft=function(o){this._map=o};ft.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ft.prototype.mousemove=function(o){this._map.fire(new hn(o.type,this._map,o))},ft.prototype.mousedown=function(){this._delayContextMenu=!0},ft.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new hn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ft.prototype.contextmenu=function(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new hn(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()},ft.prototype.isEnabled=function(){return!0},ft.prototype.isActive=function(){return!1},ft.prototype.enable=function(){},ft.prototype.disable=function(){};var to=function(o,u){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=u.clickTolerance||1};function Yl(o,u){for(var a={},p=0;p<o.length;p++)a[o[p].identifier]=u[p];return a}to.prototype.isEnabled=function(){return!!this._enabled},to.prototype.isActive=function(){return!!this._active},to.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},to.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},to.prototype.mousedown=function(o,u){this.isEnabled()&&o.shiftKey&&o.button===0&&(k.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)},to.prototype.mousemoveWindow=function(o,u){if(this._active){var a=u;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var p=this._startPos;this._lastPos=a,this._box||(this._box=k.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));var m=Math.min(p.x,a.x),g=Math.max(p.x,a.x),b=Math.min(p.y,a.y),E=Math.max(p.y,a.y);k.setTransform(this._box,"translate("+m+"px,"+b+"px)"),this._box.style.width=g-m+"px",this._box.style.height=E-b+"px"}}},to.prototype.mouseupWindow=function(o,u){var a=this;if(this._active&&o.button===0){var p=this._startPos,m=u;if(this.reset(),k.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:function(g){return g.fitScreenCoordinates(p,m,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",o)}},to.prototype.keydown=function(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))},to.prototype.blur=function(){this.reset()},to.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos},to.prototype._fireEvent=function(o,u){return this._map.fire(new l.Event(o,{originalEvent:u}))};var mu=function(o){this.reset(),this.numTouches=o.numTouches};mu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},mu.prototype.touchstart=function(o,u,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),a.length===this.numTouches&&(this.centroid=function(p){for(var m=new l.Point(0,0),g=0,b=p;g<b.length;g+=1)m._add(b[g]);return m.div(p.length)}(u),this.touches=Yl(a,u)))},mu.prototype.touchmove=function(o,u,a){if(!this.aborted&&this.centroid){var p=Yl(a,u);for(var m in this.touches){var g=p[m];(!g||g.dist(this.touches[m])>30)&&(this.aborted=!0)}}},mu.prototype.touchend=function(o,u,a){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var p=!this.aborted&&this.centroid;if(this.reset(),p)return p}};var ra=function(o){this.singleTap=new mu(o),this.numTaps=o.numTaps,this.reset()};ra.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ra.prototype.touchstart=function(o,u,a){this.singleTap.touchstart(o,u,a)},ra.prototype.touchmove=function(o,u,a){this.singleTap.touchmove(o,u,a)},ra.prototype.touchend=function(o,u,a){var p=this.singleTap.touchend(o,u,a);if(p){var m=o.timeStamp-this.lastTime<500,g=!this.lastTap||this.lastTap.dist(p)<30;if(m&&g||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}};var ro=function(){this._zoomIn=new ra({numTouches:1,numTaps:2}),this._zoomOut=new ra({numTouches:2,numTaps:1}),this.reset()};ro.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ro.prototype.touchstart=function(o,u,a){this._zoomIn.touchstart(o,u,a),this._zoomOut.touchstart(o,u,a)},ro.prototype.touchmove=function(o,u,a){this._zoomIn.touchmove(o,u,a),this._zoomOut.touchmove(o,u,a)},ro.prototype.touchend=function(o,u,a){var p=this,m=this._zoomIn.touchend(o,u,a),g=this._zoomOut.touchend(o,u,a);return m?(this._active=!0,o.preventDefault(),setTimeout(function(){return p.reset()},0),{cameraAnimation:function(b){return b.easeTo({duration:300,zoom:b.getZoom()+1,around:b.unproject(m)},{originalEvent:o})}}):g?(this._active=!0,o.preventDefault(),setTimeout(function(){return p.reset()},0),{cameraAnimation:function(b){return b.easeTo({duration:300,zoom:b.getZoom()-1,around:b.unproject(g)},{originalEvent:o})}}):void 0},ro.prototype.touchcancel=function(){this.reset()},ro.prototype.enable=function(){this._enabled=!0},ro.prototype.disable=function(){this._enabled=!1,this.reset()},ro.prototype.isEnabled=function(){return this._enabled},ro.prototype.isActive=function(){return this._active};var gp={0:1,2:2},et=function(o){this.reset(),this._clickTolerance=o.clickTolerance||1};et.prototype.blur=function(){this.reset()},et.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},et.prototype._correctButton=function(o,u){return!1},et.prototype._move=function(o,u){return{}},et.prototype.mousedown=function(o,u){if(!this._lastPoint){var a=k.mouseButton(o);this._correctButton(o,a)&&(this._lastPoint=u,this._eventButton=a)}},et.prototype.mousemoveWindow=function(o,u){var a=this._lastPoint;if(a){if(o.preventDefault(),function(p,m){var g=gp[m];return p.buttons===void 0||(p.buttons&g)!==g}(o,this._eventButton))this.reset();else if(this._moved||!(u.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(a,u)}},et.prototype.mouseupWindow=function(o){this._lastPoint&&k.mouseButton(o)===this._eventButton&&(this._moved&&k.suppressClick(),this.reset())},et.prototype.enable=function(){this._enabled=!0},et.prototype.disable=function(){this._enabled=!1,this.reset()},et.prototype.isEnabled=function(){return this._enabled},et.prototype.isActive=function(){return this._active};var _p=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.mousedown=function(a,p){o.prototype.mousedown.call(this,a,p),this._lastPoint&&(this._active=!0)},u.prototype._correctButton=function(a,p){return p===0&&!a.ctrlKey},u.prototype._move=function(a,p){return{around:p,panDelta:p.sub(a)}},u}(et),Ql=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._correctButton=function(a,p){return p===0&&a.ctrlKey||p===2},u.prototype._move=function(a,p){var m=.8*(p.x-a.x);if(m)return this._active=!0,{bearingDelta:m}},u.prototype.contextmenu=function(a){a.preventDefault()},u}(et),xp=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._correctButton=function(a,p){return p===0&&a.ctrlKey||p===2},u.prototype._move=function(a,p){var m=-.5*(p.y-a.y);if(m)return this._active=!0,{pitchDelta:m}},u.prototype.contextmenu=function(a){a.preventDefault()},u}(et),Ro=function(o){this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset()};Ro.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},Ro.prototype.touchstart=function(o,u,a){return this._calculateTransform(o,u,a)},Ro.prototype.touchmove=function(o,u,a){if(this._active&&!(a.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,u,a)},Ro.prototype.touchend=function(o,u,a){this._calculateTransform(o,u,a),this._active&&a.length<this._minTouches&&this.reset()},Ro.prototype.touchcancel=function(){this.reset()},Ro.prototype._calculateTransform=function(o,u,a){a.length>0&&(this._active=!0);var p=Yl(a,u),m=new l.Point(0,0),g=new l.Point(0,0),b=0;for(var E in p){var A=p[E],D=this._touches[E];D&&(m._add(A),g._add(A.sub(D)),b++,p[E]=A)}if(this._touches=p,!(b<this._minTouches)&&g.mag()){var j=g.div(b);if(this._sum._add(j),!(this._sum.mag()<this._clickTolerance))return{around:m.div(b),panDelta:j}}},Ro.prototype.enable=function(){this._enabled=!0},Ro.prototype.disable=function(){this._enabled=!1,this.reset()},Ro.prototype.isEnabled=function(){return this._enabled},Ro.prototype.isActive=function(){return this._active};var no=function(){this.reset()};function ec(o,u,a){for(var p=0;p<o.length;p++)if(o[p].identifier===a)return u[p]}function tc(o,u){return Math.log(o/u)/Math.LN2}no.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},no.prototype._start=function(o){},no.prototype._move=function(o,u,a){return{}},no.prototype.touchstart=function(o,u,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([u[0],u[1]]))},no.prototype.touchmove=function(o,u,a){if(this._firstTwoTouches){o.preventDefault();var p=this._firstTwoTouches,m=p[1],g=ec(a,u,p[0]),b=ec(a,u,m);if(g&&b){var E=this._aroundCenter?null:g.add(b).div(2);return this._move([g,b],E,o)}}},no.prototype.touchend=function(o,u,a){if(this._firstTwoTouches){var p=this._firstTwoTouches,m=p[1],g=ec(a,u,p[0]),b=ec(a,u,m);g&&b||(this._active&&k.suppressClick(),this.reset())}},no.prototype.touchcancel=function(){this.reset()},no.prototype.enable=function(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"},no.prototype.disable=function(){this._enabled=!1,this.reset()},no.prototype.isEnabled=function(){return this._enabled},no.prototype.isActive=function(){return this._active};var io=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.reset=function(){o.prototype.reset.call(this),delete this._distance,delete this._startDistance},u.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},u.prototype._move=function(a,p){var m=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(tc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:tc(this._distance,m),pinchAround:p}},u}(no);function Wa(o,u){return 180*o.angleWith(u)/Math.PI}var cf=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.reset=function(){o.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},u.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},u.prototype._move=function(a,p){var m=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Wa(this._vector,m),pinchAround:p}},u.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var p=25/(Math.PI*this._minDiameter)*360,m=Wa(a,this._startVector);return Math.abs(m)<p},u}(no);function sl(o){return Math.abs(o.y)>Math.abs(o.x)}var bp=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.reset=function(){o.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},u.prototype._start=function(a){this._lastPoints=a,sl(a[0].sub(a[1]))&&(this._valid=!1)},u.prototype._move=function(a,p,m){var g=a[0].sub(this._lastPoints[0]),b=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(g,b,m.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(g.y+b.y)/2*-.5}},u.prototype.gestureBeginsVertically=function(a,p,m){if(this._valid!==void 0)return this._valid;var g=a.mag()>=2,b=p.mag()>=2;if(g||b){if(!g||!b)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var E=a.y>0==p.y>0;return sl(a)&&sl(p)&&E}},u}(no),wp={panStep:100,bearingStep:15,pitchStep:10},na=function(){var o=wp;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1};function wo(o){return o*(2-o)}na.prototype.blur=function(){this.reset()},na.prototype.reset=function(){this._active=!1},na.prototype.keydown=function(o){var u=this;if(!(o.altKey||o.ctrlKey||o.metaKey)){var a=0,p=0,m=0,g=0,b=0;switch(o.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:o.shiftKey?p=-1:(o.preventDefault(),g=-1);break;case 39:o.shiftKey?p=1:(o.preventDefault(),g=1);break;case 38:o.shiftKey?m=1:(o.preventDefault(),b=-1);break;case 40:o.shiftKey?m=-1:(o.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:function(E){var A=E.getZoom();E.easeTo({duration:300,easeId:"keyboardHandler",easing:wo,zoom:a?Math.round(A)+a*(o.shiftKey?2:1):A,bearing:E.getBearing()+p*u._bearingStep,pitch:E.getPitch()+m*u._pitchStep,offset:[-g*u._panStep,-b*u._panStep],center:E.getCenter()},{originalEvent:o})}}}},na.prototype.enable=function(){this._enabled=!0},na.prototype.disable=function(){this._enabled=!1,this.reset()},na.prototype.isEnabled=function(){return this._enabled},na.prototype.isActive=function(){return this._active},na.prototype.disableRotation=function(){this._rotationDisabled=!0},na.prototype.enableRotation=function(){this._rotationDisabled=!1};var nr=function(o,u){this._map=o,this._el=o.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,l.bindAll(["_onTimeout"],this)};nr.prototype.setZoomRate=function(o){this._defaultZoomRate=o},nr.prototype.setWheelZoomRate=function(o){this._wheelZoomRate=o},nr.prototype.isEnabled=function(){return!!this._enabled},nr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},nr.prototype.isZooming=function(){return!!this._zooming},nr.prototype.enable=function(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")},nr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},nr.prototype.wheel=function(o){if(this.isEnabled()){var u=o.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,a=l.browser.now(),p=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,u!==0&&u%4.000244140625==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(p*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),o.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=o,this._delta-=u,this._active||this._start(o)),o.preventDefault()}},nr.prototype._onTimeout=function(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)},nr.prototype._start=function(o){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var u=k.mousePos(this._el,o);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},nr.prototype.renderFrame=function(){var o=this;if(this._frameId&&(this._frameId=null,this.isActive())){var u=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,p=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&p!==0&&(p=1/p);var m=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(m*p))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var g,b=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,E=this._startZoom,A=this._easing,D=!1;if(this._type==="wheel"&&E&&A){var j=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),q=A(j);g=l.number(E,b,q),j<1?this._frameId||(this._frameId=!0):D=!0}else g=b,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(function(){o._zooming=!1,o._handler._triggerRenderFrame(),delete o._targetZoom,delete o._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:g-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},nr.prototype._smoothOutEasing=function(o){var u=l.ease;if(this._prevEase){var a=this._prevEase,p=(l.browser.now()-a.start)/a.duration,m=a.easing(p+.01)-a.easing(p),g=.27/Math.sqrt(m*m+1e-4)*.01,b=Math.sqrt(.0729-g*g);u=l.bezier(g,b,.25,1)}return this._prevEase={start:l.browser.now(),duration:o,easing:u},u},nr.prototype.blur=function(){this.reset()},nr.prototype.reset=function(){this._active=!1};var xa=function(o,u){this._clickZoom=o,this._tapZoom=u};xa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},xa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},xa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},xa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Fo=function(){this.reset()};Fo.prototype.reset=function(){this._active=!1},Fo.prototype.blur=function(){this.reset()},Fo.prototype.dblclick=function(o,u){return o.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(o.shiftKey?-1:1),around:a.unproject(u)},{originalEvent:o})}}},Fo.prototype.enable=function(){this._enabled=!0},Fo.prototype.disable=function(){this._enabled=!1,this.reset()},Fo.prototype.isEnabled=function(){return this._enabled},Fo.prototype.isActive=function(){return this._active};var oi=function(){this._tap=new ra({numTouches:1,numTaps:1}),this.reset()};oi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},oi.prototype.touchstart=function(o,u,a){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=u[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(o,u,a))},oi.prototype.touchmove=function(o,u,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var p=u[0],m=p.y-this._swipePoint.y;return this._swipePoint=p,o.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(o,u,a)},oi.prototype.touchend=function(o,u,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(o,u,a)&&(this._tapTime=o.timeStamp)},oi.prototype.touchcancel=function(){this.reset()},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active};var Ws=function(o,u,a){this._el=o,this._mousePan=u,this._touchPan=a};Ws.prototype.enable=function(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ws.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ws.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ws.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var cs=function(o,u,a){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=u,this._mousePitch=a};cs.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},cs.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},cs.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},cs.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ia=function(o,u,a,p){this._el=o,this._touchZoom=u,this._touchRotate=a,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0};ia.prototype.enable=function(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ia.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ia.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ia.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ia.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ia.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var vi=function(o){return o.zoom||o.drag||o.pitch||o.rotate},ul=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u}(l.Event);function St(o){return o.panDelta&&o.panDelta.mag()||o.zoomDelta||o.bearingDelta||o.pitchDelta}var yt=function(o,u){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ga(o),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),l.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[l.window,"blur",void 0]];for(var p=0,m=this._listeners;p<m.length;p+=1){var g=m[p],b=g[0];k.addEventListener(b,g[1],b===l.window.document?this.handleWindowEvent:this.handleEvent,g[2])}};yt.prototype.destroy=function(){for(var o=0,u=this._listeners;o<u.length;o+=1){var a=u[o],p=a[0];k.removeEventListener(p,a[1],p===l.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},yt.prototype._addDefaultHandlers=function(o){var u=this._map,a=u.getCanvasContainer();this._add("mapEvent",new Tn(u,o));var p=u.boxZoom=new to(u,o);this._add("boxZoom",p);var m=new ro,g=new Fo;u.doubleClickZoom=new xa(g,m),this._add("tapZoom",m),this._add("clickZoom",g);var b=new oi;this._add("tapDragZoom",b);var E=u.touchPitch=new bp;this._add("touchPitch",E);var A=new Ql(o),D=new xp(o);u.dragRotate=new cs(o,A,D),this._add("mouseRotate",A,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]);var j=new _p(o),q=new Ro(o);u.dragPan=new Ws(a,j,q),this._add("mousePan",j),this._add("touchPan",q,["touchZoom","touchRotate"]);var Z=new cf,Q=new io;u.touchZoomRotate=new ia(a,Q,Z,b),this._add("touchRotate",Z,["touchPan","touchZoom"]),this._add("touchZoom",Q,["touchPan","touchRotate"]);var Y=u.scrollZoom=new nr(u,this);this._add("scrollZoom",Y,["mousePan"]);var oe=u.keyboard=new na;this._add("keyboard",oe),this._add("blockableMapEvent",new ft(u));for(var H=0,ie=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];H<ie.length;H+=1){var ce=ie[H];o.interactive&&o[ce]&&u[ce].enable(o[ce])}},yt.prototype._add=function(o,u,a){this._handlers.push({handlerName:o,handler:u,allowed:a}),this._handlersById[o]=u},yt.prototype.stop=function(o){if(!this._updatingCamera){for(var u=0,a=this._handlers;u<a.length;u+=1)a[u].handler.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}},yt.prototype.isActive=function(){for(var o=0,u=this._handlers;o<u.length;o+=1)if(u[o].handler.isActive())return!0;return!1},yt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yt.prototype.isMoving=function(){return Boolean(vi(this._eventsInProgress))||this.isZooming()},yt.prototype._blockedByActive=function(o,u,a){for(var p in o)if(p!==a&&(!u||u.indexOf(p)<0))return!0;return!1},yt.prototype.handleWindowEvent=function(o){this.handleEvent(o,o.type+"Window")},yt.prototype._getMapTouches=function(o){for(var u=[],a=0,p=o;a<p.length;a+=1){var m=p[a];this._el.contains(m.target)&&u.push(m)}return u},yt.prototype.handleEvent=function(o,u){this._updatingCamera=!0;for(var a=o.type==="renderFrame"?void 0:o,p={needsRenderFrame:!1},m={},g={},b=o.touches?this._getMapTouches(o.touches):void 0,E=b?k.touchPos(this._el,b):k.mousePos(this._el,o),A=0,D=this._handlers;A<D.length;A+=1){var j=D[A],q=j.handlerName,Z=j.handler,Q=j.allowed;if(Z.isEnabled()){var Y=void 0;this._blockedByActive(g,Q,q)?Z.reset():Z[u||o.type]&&(Y=Z[u||o.type](o,E,b),this.mergeHandlerResult(p,m,Y,q,a),Y&&Y.needsRenderFrame&&this._triggerRenderFrame()),(Y||Z.isActive())&&(g[q]=Z)}}var oe={};for(var H in this._previousActiveHandlers)g[H]||(oe[H]=a);this._previousActiveHandlers=g,(Object.keys(oe).length||St(p))&&(this._changes.push([p,m,oe]),this._triggerRenderFrame()),(Object.keys(g).length||St(p))&&this._map._stop(!0),this._updatingCamera=!1;var ie=p.cameraAnimation;ie&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ie(this._map))},yt.prototype.mergeHandlerResult=function(o,u,a,p,m){if(a){l.extend(o,a);var g={handlerName:p,originalEvent:a.originalEvent||m};a.zoomDelta!==void 0&&(u.zoom=g),a.panDelta!==void 0&&(u.drag=g),a.pitchDelta!==void 0&&(u.pitch=g),a.bearingDelta!==void 0&&(u.rotate=g)}},yt.prototype._applyChanges=function(){for(var o={},u={},a={},p=0,m=this._changes;p<m.length;p+=1){var g=m[p],b=g[0],E=g[1],A=g[2];b.panDelta&&(o.panDelta=(o.panDelta||new l.Point(0,0))._add(b.panDelta)),b.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(o.around=b.around),b.pinchAround!==void 0&&(o.pinchAround=b.pinchAround),b.noInertia&&(o.noInertia=b.noInertia),l.extend(u,E),l.extend(a,A)}this._updateMapTransform(o,u,a),this._changes=[]},yt.prototype._updateMapTransform=function(o,u,a){var p=this._map,m=p.transform;if(!St(o))return this._fireEvents(u,a,!0);var g=o.panDelta,b=o.zoomDelta,E=o.bearingDelta,A=o.pitchDelta,D=o.around,j=o.pinchAround;j!==void 0&&(D=j),p._stop(!0),D=D||p.transform.centerPoint;var q=m.pointLocation(g?D.sub(g):D);E&&(m.bearing+=E),A&&(m.pitch+=A),b&&(m.zoom+=b),m.setLocationAtPoint(q,D),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(u,a,!0)},yt.prototype._fireEvents=function(o,u,a){var p=this,m=vi(this._eventsInProgress),g=vi(o),b={};for(var E in o)this._eventsInProgress[E]||(b[E+"start"]=o[E].originalEvent),this._eventsInProgress[E]=o[E];for(var A in!m&&g&&this._fireEvent("movestart",g.originalEvent),b)this._fireEvent(A,b[A]);for(var D in g&&this._fireEvent("move",g.originalEvent),o)this._fireEvent(D,o[D].originalEvent);var j,q={};for(var Z in this._eventsInProgress){var Q=this._eventsInProgress[Z],Y=Q.handlerName,oe=Q.originalEvent;this._handlersById[Y].isActive()||(delete this._eventsInProgress[Z],q[Z+"end"]=j=u[Y]||oe)}for(var H in q)this._fireEvent(H,q[H]);var ie=vi(this._eventsInProgress);if(a&&(m||g)&&!ie){this._updatingCamera=!0;var ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ve=function(Me){return Me!==0&&-p._bearingSnap<Me&&Me<p._bearingSnap};ce?(ve(ce.bearing||this._map.getBearing())&&(ce.bearing=0),this._map.easeTo(ce,{originalEvent:j})):(this._map.fire(new l.Event("moveend",{originalEvent:j})),ve(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},yt.prototype._fireEvent=function(o,u){this._map.fire(new l.Event(o,u?{originalEvent:u}:{}))},yt.prototype._requestFrame=function(){var o=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(u){delete o._frameId,o.handleEvent(new ul("renderFrame",{timeStamp:u})),o._applyChanges()})},yt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var rc=function(o){function u(a,p){o.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=p.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},u.prototype.setCenter=function(a,p){return this.jumpTo({center:a},p)},u.prototype.panBy=function(a,p,m){return a=l.Point.convert(a).mult(-1),this.panTo(this.transform.center,l.extend({offset:a},p),m)},u.prototype.panTo=function(a,p,m){return this.easeTo(l.extend({center:a},p),m)},u.prototype.getZoom=function(){return this.transform.zoom},u.prototype.setZoom=function(a,p){return this.jumpTo({zoom:a},p),this},u.prototype.zoomTo=function(a,p,m){return this.easeTo(l.extend({zoom:a},p),m)},u.prototype.zoomIn=function(a,p){return this.zoomTo(this.getZoom()+1,a,p),this},u.prototype.zoomOut=function(a,p){return this.zoomTo(this.getZoom()-1,a,p),this},u.prototype.getBearing=function(){return this.transform.bearing},u.prototype.setBearing=function(a,p){return this.jumpTo({bearing:a},p),this},u.prototype.getPadding=function(){return this.transform.padding},u.prototype.setPadding=function(a,p){return this.jumpTo({padding:a},p),this},u.prototype.rotateTo=function(a,p,m){return this.easeTo(l.extend({bearing:a},p),m)},u.prototype.resetNorth=function(a,p){return this.rotateTo(0,l.extend({duration:1e3},a),p),this},u.prototype.resetNorthPitch=function(a,p){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},a),p),this},u.prototype.snapToNorth=function(a,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,p):this},u.prototype.getPitch=function(){return this.transform.pitch},u.prototype.setPitch=function(a,p){return this.jumpTo({pitch:a},p),this},u.prototype.cameraForBounds=function(a,p){a=l.LngLatBounds.convert(a);var m=p&&p.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),m,p)},u.prototype._cameraForBoxAndBearing=function(a,p,m,g){var b={top:0,bottom:0,right:0,left:0};if(typeof(g=l.extend({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){var E=g.padding;g.padding={top:E,bottom:E,right:E,left:E}}g.padding=l.extend(b,g.padding);var A=this.transform,D=A.padding,j=A.project(l.LngLat.convert(a)),q=A.project(l.LngLat.convert(p)),Z=j.rotate(-m*Math.PI/180),Q=q.rotate(-m*Math.PI/180),Y=new l.Point(Math.max(Z.x,Q.x),Math.max(Z.y,Q.y)),oe=new l.Point(Math.min(Z.x,Q.x),Math.min(Z.y,Q.y)),H=Y.sub(oe),ie=(A.width-(D.left+D.right+g.padding.left+g.padding.right))/H.x,ce=(A.height-(D.top+D.bottom+g.padding.top+g.padding.bottom))/H.y;if(!(ce<0||ie<0)){var ve=Math.min(A.scaleZoom(A.scale*Math.min(ie,ce)),g.maxZoom),Me=typeof g.offset.x=="number"?new l.Point(g.offset.x,g.offset.y):l.Point.convert(g.offset),Pe=new l.Point((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(m*Math.PI/180),De=Me.add(Pe).mult(A.scale/A.zoomScale(ve));return{center:A.unproject(j.add(q).div(2).sub(De)),zoom:ve,bearing:m}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},u.prototype.fitBounds=function(a,p,m){return this._fitInternal(this.cameraForBounds(a,p),p,m)},u.prototype.fitScreenCoordinates=function(a,p,m,g,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(a)),this.transform.pointLocation(l.Point.convert(p)),m,g),g,b)},u.prototype._fitInternal=function(a,p,m){return a?(delete(p=l.extend(a,p)).padding,p.linear?this.easeTo(p,m):this.flyTo(p,m)):this},u.prototype.jumpTo=function(a,p){this.stop();var m=this.transform,g=!1,b=!1,E=!1;return"zoom"in a&&m.zoom!==+a.zoom&&(g=!0,m.zoom=+a.zoom),a.center!==void 0&&(m.center=l.LngLat.convert(a.center)),"bearing"in a&&m.bearing!==+a.bearing&&(b=!0,m.bearing=+a.bearing),"pitch"in a&&m.pitch!==+a.pitch&&(E=!0,m.pitch=+a.pitch),a.padding==null||m.isPaddingEqual(a.padding)||(m.padding=a.padding),this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p)),g&&this.fire(new l.Event("zoomstart",p)).fire(new l.Event("zoom",p)).fire(new l.Event("zoomend",p)),b&&this.fire(new l.Event("rotatestart",p)).fire(new l.Event("rotate",p)).fire(new l.Event("rotateend",p)),E&&this.fire(new l.Event("pitchstart",p)).fire(new l.Event("pitch",p)).fire(new l.Event("pitchend",p)),this.fire(new l.Event("moveend",p))},u.prototype.easeTo=function(a,p){var m=this;this._stop(!1,a.easeId),((a=l.extend({offset:[0,0],duration:500,easing:l.ease},a)).animate===!1||!a.essential&&l.browser.prefersReducedMotion)&&(a.duration=0);var g=this.transform,b=this.getZoom(),E=this.getBearing(),A=this.getPitch(),D=this.getPadding(),j="zoom"in a?+a.zoom:b,q="bearing"in a?this._normalizeBearing(a.bearing,E):E,Z="pitch"in a?+a.pitch:A,Q="padding"in a?a.padding:g.padding,Y=l.Point.convert(a.offset),oe=g.centerPoint.add(Y),H=g.pointLocation(oe),ie=l.LngLat.convert(a.center||H);this._normalizeCenter(ie);var ce,ve,Me=g.project(H),Pe=g.project(ie).sub(Me),De=g.zoomScale(j-b);a.around&&(ce=l.LngLat.convert(a.around),ve=g.locationPoint(ce));var Ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||j!==b,this._rotating=this._rotating||E!==q,this._pitching=this._pitching||Z!==A,this._padding=!g.isPaddingEqual(Q),this._easeId=a.easeId,this._prepareEase(p,a.noMoveStart,Ne),this._ease(function(He){if(m._zooming&&(g.zoom=l.number(b,j,He)),m._rotating&&(g.bearing=l.number(E,q,He)),m._pitching&&(g.pitch=l.number(A,Z,He)),m._padding&&(g.interpolatePadding(D,Q,He),oe=g.centerPoint.add(Y)),ce)g.setLocationAtPoint(ce,ve);else{var We=g.zoomScale(g.zoom-b),lt=j>b?Math.min(2,De):Math.max(.5,De),Et=Math.pow(lt,1-He),At=g.unproject(Me.add(Pe.mult(He*Et)).mult(We));g.setLocationAtPoint(g.renderWorldCopies?At.wrap():At,oe)}m._fireMoveEvents(p)},function(He){m._afterEase(p,He)},a),this},u.prototype._prepareEase=function(a,p,m){m===void 0&&(m={}),this._moving=!0,p||m.moving||this.fire(new l.Event("movestart",a)),this._zooming&&!m.zooming&&this.fire(new l.Event("zoomstart",a)),this._rotating&&!m.rotating&&this.fire(new l.Event("rotatestart",a)),this._pitching&&!m.pitching&&this.fire(new l.Event("pitchstart",a))},u.prototype._fireMoveEvents=function(a){this.fire(new l.Event("move",a)),this._zooming&&this.fire(new l.Event("zoom",a)),this._rotating&&this.fire(new l.Event("rotate",a)),this._pitching&&this.fire(new l.Event("pitch",a))},u.prototype._afterEase=function(a,p){if(!this._easeId||!p||this._easeId!==p){delete this._easeId;var m=this._zooming,g=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new l.Event("zoomend",a)),g&&this.fire(new l.Event("rotateend",a)),b&&this.fire(new l.Event("pitchend",a)),this.fire(new l.Event("moveend",a))}},u.prototype.flyTo=function(a,p){var m=this;if(!a.essential&&l.browser.prefersReducedMotion){var g=l.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,p)}this.stop(),a=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},a);var b=this.transform,E=this.getZoom(),A=this.getBearing(),D=this.getPitch(),j=this.getPadding(),q="zoom"in a?l.clamp(+a.zoom,b.minZoom,b.maxZoom):E,Z="bearing"in a?this._normalizeBearing(a.bearing,A):A,Q="pitch"in a?+a.pitch:D,Y="padding"in a?a.padding:b.padding,oe=b.zoomScale(q-E),H=l.Point.convert(a.offset),ie=b.centerPoint.add(H),ce=b.pointLocation(ie),ve=l.LngLat.convert(a.center||ce);this._normalizeCenter(ve);var Me=b.project(ce),Pe=b.project(ve).sub(Me),De=a.curve,Ne=Math.max(b.width,b.height),He=Ne/oe,We=Pe.mag();if("minZoom"in a){var lt=l.clamp(Math.min(a.minZoom,E,q),b.minZoom,b.maxZoom),Et=Ne/b.zoomScale(lt-E);De=Math.sqrt(Et/We*2)}var At=De*De;function kt(Nt){var Ot=(He*He-Ne*Ne+(Nt?-1:1)*At*At*We*We)/(2*(Nt?He:Ne)*At*We);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function mr(Nt){return(Math.exp(Nt)-Math.exp(-Nt))/2}function ht(Nt){return(Math.exp(Nt)+Math.exp(-Nt))/2}var Zt=kt(0),Jt=function(Nt){return ht(Zt)/ht(Zt+De*Nt)},qt=function(Nt){return Ne*((ht(Zt)*(mr(Ot=Zt+De*Nt)/ht(Ot))-mr(Zt))/At)/We;var Ot},jt=(kt(1)-Zt)/De;if(Math.abs(We)<1e-6||!isFinite(jt)){if(Math.abs(Ne-He)<1e-6)return this.easeTo(a,p);var Kt=He<Ne?-1:1;jt=Math.abs(Math.log(He/Ne))/De,qt=function(){return 0},Jt=function(Nt){return Math.exp(Kt*De*Nt)}}return a.duration="duration"in a?+a.duration:1e3*jt/("screenSpeed"in a?+a.screenSpeed/De:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=A!==Z,this._pitching=Q!==D,this._padding=!b.isPaddingEqual(Y),this._prepareEase(p,!1),this._ease(function(Nt){var Ot=Nt*jt,Vn=1/Jt(Ot);b.zoom=Nt===1?q:E+b.scaleZoom(Vn),m._rotating&&(b.bearing=l.number(A,Z,Nt)),m._pitching&&(b.pitch=l.number(D,Q,Nt)),m._padding&&(b.interpolatePadding(j,Y,Nt),ie=b.centerPoint.add(H));var fn=Nt===1?ve:b.unproject(Me.add(Pe.mult(qt(Ot))).mult(Vn));b.setLocationAtPoint(b.renderWorldCopies?fn.wrap():fn,ie),m._fireMoveEvents(p)},function(){return m._afterEase(p)},a),this},u.prototype.isEasing=function(){return!!this._easeFrameId},u.prototype.stop=function(){return this._stop()},u.prototype._stop=function(a,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,p)}if(!a){var g=this.handlers;g&&g.stop(!1)}return this},u.prototype._ease=function(a,p,m){m.animate===!1||m.duration===0?(a(1),p()):(this._easeStart=l.browser.now(),this._easeOptions=m,this._onEaseFrame=a,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},u.prototype._renderFrameCallback=function(){var a=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},u.prototype._normalizeBearing=function(a,p){a=l.wrap(a,-180,180);var m=Math.abs(a-p);return Math.abs(a-360-p)<m&&(a-=360),Math.abs(a+360-p)<m&&(a+=360),a},u.prototype._normalizeCenter=function(a){var p=this.transform;if(p.renderWorldCopies&&!p.lngRange){var m=a.lng-p.center.lng;a.lng+=m>180?-360:m<-180?360:0}},u}(l.Evented),gi=function(o){o===void 0&&(o={}),this.options=o,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};gi.prototype.getDefaultPosition=function(){return"bottom-right"},gi.prototype.onAdd=function(o){var u=this.options&&this.options.compact;return this._map=o,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=k.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),u&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),u===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},gi.prototype.onRemove=function(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},gi.prototype._setElementTitle=function(o,u){var a=this._map._getUIString("AttributionControl."+u);o.title=a,o.setAttribute("aria-label",a)},gi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},gi.prototype._updateEditLink=function(){var o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));var u=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(o){var a=u.reduce(function(p,m,g){return m.value&&(p+=m.key+"="+m.value+(g<u.length-1?"&":"")),p},"?");o.href=l.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}},gi.prototype._updateData=function(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},gi.prototype._updateAttributions=function(){if(this._map.style){var o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(function(E){return typeof E!="string"?"":E})):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){var u=this._map.style.stylesheet;this.styleOwner=u.owner,this.styleId=u.id}var a=this._map.style.sourceCaches;for(var p in a){var m=a[p];if(m.used){var g=m.getSource();g.attribution&&o.indexOf(g.attribution)<0&&o.push(g.attribution)}}o.sort(function(E,A){return E.length-A.length});var b=(o=o.filter(function(E,A){for(var D=A+1;D<o.length;D++)if(o[D].indexOf(E)>=0)return!1;return!0})).join(" | ");b!==this._attribHTML&&(this._attribHTML=b,o.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},gi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var oa=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};oa.prototype.onAdd=function(o){this._map=o,this._container=k.create("div","mapboxgl-ctrl");var u=k.create("a","mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://www.mapbox.com/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},oa.prototype.onRemove=function(){k.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},oa.prototype.getDefaultPosition=function(){return"bottom-left"},oa.prototype._updateLogo=function(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},oa.prototype._logoRequired=function(){if(this._map.style){var o=this._map.style.sourceCaches;for(var u in o)if(o[u].getSource().mapbox_logo)return!0;return!1}},oa.prototype._updateCompact=function(){var o=this._container.children;if(o.length){var u=o[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("mapboxgl-compact"):u.classList.remove("mapboxgl-compact")}};var ai=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ai.prototype.add=function(o){var u=++this._id;return this._queue.push({callback:o,id:u,cancelled:!1}),u},ai.prototype.remove=function(o){for(var u=this._currentlyRunning,a=0,p=u?this._queue.concat(u):this._queue;a<p.length;a+=1){var m=p[a];if(m.id===o)return void(m.cancelled=!0)}},ai.prototype.run=function(o){o===void 0&&(o=0);var u=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,p=u;a<p.length;a+=1){var m=p[a];if(!m.cancelled&&(m.callback(o),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ai.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ba={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Sp=l.window.HTMLImageElement,nc=l.window.HTMLElement,Tr=l.window.ImageBitmap,Yn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},pf=function(o){function u(p){var m=this;if((p=l.extend({},Yn,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var g=new $t(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies);if(o.call(this,g,p),this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new ai,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},ba,p.locale),this._clickTolerance=p.clickTolerance,this._requestManager=new l.RequestManager(p.transformRequest,p.accessToken),typeof p.container=="string"){if(this._container=l.window.document.getElementById(p.container),!this._container)throw new Error("Container '"+p.container+"' not found.")}else{if(!(p.container instanceof nc))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new yt(this,p),this._hash=p.hash&&new Jn(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new gi({customAttribution:p.customAttribution})),this.addControl(new oa,p.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(b){m._update(b.dataType==="style"),m.fire(new l.Event(b.dataType+"data",b))}),this.on("dataloading",function(b){m.fire(new l.Event(b.dataType+"dataloading",b))})}o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return u.prototype._getMapId=function(){return this._mapId},u.prototype.addControl=function(p,m){if(m===void 0&&(m=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var g=p.onAdd(this);this._controls.push(p);var b=this._controlPositions[m];return m.indexOf("bottom")!==-1?b.insertBefore(g,b.firstChild):b.appendChild(g),this},u.prototype.removeControl=function(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(p);return m>-1&&this._controls.splice(m,1),p.onRemove(this),this},u.prototype.hasControl=function(p){return this._controls.indexOf(p)>-1},u.prototype.resize=function(p){var m=this._containerDimensions(),g=m[0],b=m[1];if(g===this.transform.width&&b===this.transform.height)return this;this._resizeCanvas(g,b),this.transform.resize(g,b),this.painter.resize(g,b);var E=!this._moving;return E&&this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p)),this.fire(new l.Event("resize",p)),E&&this.fire(new l.Event("moveend",p)),this},u.prototype.getBounds=function(){return this.transform.getBounds()},u.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},u.prototype.setMaxBounds=function(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()},u.prototype.setMinZoom=function(p){if((p=p==null?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},u.prototype.getMinZoom=function(){return this.transform.minZoom},u.prototype.setMaxZoom=function(p){if((p=p==null?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")},u.prototype.getMaxZoom=function(){return this.transform.maxZoom},u.prototype.setMinPitch=function(p){if((p=p==null?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},u.prototype.getMinPitch=function(){return this.transform.minPitch},u.prototype.setMaxPitch=function(p){if((p=p==null?60:p)>60)throw new Error("maxPitch must be less than or equal to 60");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")},u.prototype.getMaxPitch=function(){return this.transform.maxPitch},u.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},u.prototype.setRenderWorldCopies=function(p){return this.transform.renderWorldCopies=p,this._update()},u.prototype.project=function(p){return this.transform.locationPoint(l.LngLat.convert(p))},u.prototype.unproject=function(p){return this.transform.pointLocation(l.Point.convert(p))},u.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},u.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},u.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},u.prototype._createDelegatedListener=function(p,m,g){var b,E=this;if(p==="mouseenter"||p==="mouseover"){var A=!1;return{layer:m,listener:g,delegates:{mousemove:function(j){var q=E.getLayer(m)?E.queryRenderedFeatures(j.point,{layers:[m]}):[];q.length?A||(A=!0,g.call(E,new hn(p,E,j.originalEvent,{features:q}))):A=!1},mouseout:function(){A=!1}}}}if(p==="mouseleave"||p==="mouseout"){var D=!1;return{layer:m,listener:g,delegates:{mousemove:function(j){(E.getLayer(m)?E.queryRenderedFeatures(j.point,{layers:[m]}):[]).length?D=!0:D&&(D=!1,g.call(E,new hn(p,E,j.originalEvent)))},mouseout:function(j){D&&(D=!1,g.call(E,new hn(p,E,j.originalEvent)))}}}}return{layer:m,listener:g,delegates:(b={},b[p]=function(j){var q=E.getLayer(m)?E.queryRenderedFeatures(j.point,{layers:[m]}):[];q.length&&(j.features=q,g.call(E,j),delete j.features)},b)}},u.prototype.on=function(p,m,g){if(g===void 0)return o.prototype.on.call(this,p,m);var b=this._createDelegatedListener(p,m,g);for(var E in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(b),b.delegates)this.on(E,b.delegates[E]);return this},u.prototype.once=function(p,m,g){if(g===void 0)return o.prototype.once.call(this,p,m);var b=this._createDelegatedListener(p,m,g);for(var E in b.delegates)this.once(E,b.delegates[E]);return this},u.prototype.off=function(p,m,g){var b=this;return g===void 0?o.prototype.off.call(this,p,m):(this._delegatedListeners&&this._delegatedListeners[p]&&function(E){for(var A=E[p],D=0;D<A.length;D++){var j=A[D];if(j.layer===m&&j.listener===g){for(var q in j.delegates)b.off(q,j.delegates[q]);return A.splice(D,1),b}}}(this._delegatedListeners),this)},u.prototype.queryRenderedFeatures=function(p,m){if(!this.style)return[];var g;if(m!==void 0||p===void 0||p instanceof l.Point||Array.isArray(p)||(m=p,p=void 0),m=m||{},(p=p||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof p[0]=="number")g=[l.Point.convert(p)];else{var b=l.Point.convert(p[0]),E=l.Point.convert(p[1]);g=[b,new l.Point(E.x,b.y),E,new l.Point(b.x,E.y),b]}return this.style.queryRenderedFeatures(g,m,this.transform)},u.prototype.querySourceFeatures=function(p,m){return this.style.querySourceFeatures(p,m)},u.prototype.setStyle=function(p,m){return(m=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(p,m))},u.prototype._getUIString=function(p){var m=this._locale[p];if(m==null)throw new Error("Missing UI string '"+p+"'");return m},u.prototype._updateStyle=function(p,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),p?(this.style=new qr(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p),this):(delete this.style,this)},u.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},u.prototype._diffStyle=function(p,m){var g=this;if(typeof p=="string"){var b=this._requestManager.normalizeStyleURL(p),E=this._requestManager.transformRequest(b,l.ResourceType.Style);l.getJSON(E,function(A,D){A?g.fire(new l.ErrorEvent(A)):D&&g._updateDiff(D,m)})}else typeof p=="object"&&this._updateDiff(p,m)},u.prototype._updateDiff=function(p,m){try{this.style.setState(p)&&this._update(!0)}catch(g){l.warnOnce("Unable to perform style diff: "+(g.message||g.error||g)+".  Rebuilding the style from scratch."),this._updateStyle(p,m)}},u.prototype.getStyle=function(){if(this.style)return this.style.serialize()},u.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},u.prototype.addSource=function(p,m){return this._lazyInitEmptyStyle(),this.style.addSource(p,m),this._update(!0)},u.prototype.isSourceLoaded=function(p){var m=this.style&&this.style.sourceCaches[p];if(m!==void 0)return m.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+p+"'")))},u.prototype.areTilesLoaded=function(){var p=this.style&&this.style.sourceCaches;for(var m in p){var g=p[m]._tiles;for(var b in g){var E=g[b];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0},u.prototype.addSourceType=function(p,m,g){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,m,g)},u.prototype.removeSource=function(p){return this.style.removeSource(p),this._update(!0)},u.prototype.getSource=function(p){return this.style.getSource(p)},u.prototype.addImage=function(p,m,g){g===void 0&&(g={});var b=g.pixelRatio;b===void 0&&(b=1);var E=g.sdf;E===void 0&&(E=!1);var A=g.stretchX,D=g.stretchY,j=g.content;if(this._lazyInitEmptyStyle(),m instanceof Sp||Tr&&m instanceof Tr){var q=l.browser.getImageData(m);this.style.addImage(p,{data:new l.RGBAImage({width:q.width,height:q.height},q.data),pixelRatio:b,stretchX:A,stretchY:D,content:j,sdf:E,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Z=m;this.style.addImage(p,{data:new l.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:b,stretchX:A,stretchY:D,content:j,sdf:E,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,p)}},u.prototype.updateImage=function(p,m){var g=this.style.getImage(p);if(!g)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var b=m instanceof Sp||Tr&&m instanceof Tr?l.browser.getImageData(m):m,E=b.width,A=b.height,D=b.data;return E===void 0||A===void 0?this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):E!==g.data.width||A!==g.data.height?this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(g.data.replace(D,!(m instanceof Sp||Tr&&m instanceof Tr)),void this.style.updateImage(p,g))},u.prototype.hasImage=function(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},u.prototype.removeImage=function(p){this.style.removeImage(p)},u.prototype.loadImage=function(p,m){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),m)},u.prototype.listImages=function(){return this.style.listImages()},u.prototype.addLayer=function(p,m){return this._lazyInitEmptyStyle(),this.style.addLayer(p,m),this._update(!0)},u.prototype.moveLayer=function(p,m){return this.style.moveLayer(p,m),this._update(!0)},u.prototype.removeLayer=function(p){return this.style.removeLayer(p),this._update(!0)},u.prototype.getLayer=function(p){return this.style.getLayer(p)},u.prototype.setLayerZoomRange=function(p,m,g){return this.style.setLayerZoomRange(p,m,g),this._update(!0)},u.prototype.setFilter=function(p,m,g){return g===void 0&&(g={}),this.style.setFilter(p,m,g),this._update(!0)},u.prototype.getFilter=function(p){return this.style.getFilter(p)},u.prototype.setPaintProperty=function(p,m,g,b){return b===void 0&&(b={}),this.style.setPaintProperty(p,m,g,b),this._update(!0)},u.prototype.getPaintProperty=function(p,m){return this.style.getPaintProperty(p,m)},u.prototype.setLayoutProperty=function(p,m,g,b){return b===void 0&&(b={}),this.style.setLayoutProperty(p,m,g,b),this._update(!0)},u.prototype.getLayoutProperty=function(p,m){return this.style.getLayoutProperty(p,m)},u.prototype.setLight=function(p,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(p,m),this._update(!0)},u.prototype.getLight=function(){return this.style.getLight()},u.prototype.setFeatureState=function(p,m){return this.style.setFeatureState(p,m),this._update()},u.prototype.removeFeatureState=function(p,m){return this.style.removeFeatureState(p,m),this._update()},u.prototype.getFeatureState=function(p){return this.style.getFeatureState(p)},u.prototype.getContainer=function(){return this._container},u.prototype.getCanvasContainer=function(){return this._canvasContainer},u.prototype.getCanvas=function(){return this._canvas},u.prototype._containerDimensions=function(){var p=0,m=0;return this._container&&(p=this._container.clientWidth||400,m=this._container.clientHeight||300),[p,m]},u.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},u.prototype._setupContainer=function(){var p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=k.create("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=k.create("div","mapboxgl-canvas-container",p);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=k.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var g=this._containerDimensions();this._resizeCanvas(g[0],g[1]);var b=this._controlContainer=k.create("div","mapboxgl-control-container",p),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(A){E[A]=k.create("div","mapboxgl-ctrl-"+A,b)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},u.prototype._resizeCanvas=function(p,m){var g=l.browser.devicePixelRatio||1;this._canvas.width=g*p,this._canvas.height=g*m,this._canvas.style.width=p+"px",this._canvas.style.height=m+"px"},u.prototype._setupPainter=function(){var p=l.extend({},C.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);m?(this.painter=new Dr(m,this.transform),l.webpSupported.testSupport(m)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},u.prototype._contextLost=function(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))},u.prototype._contextRestored=function(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))},u.prototype._onMapScroll=function(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},u.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},u.prototype._update=function(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this},u.prototype._requestRenderFrame=function(p){return this._update(),this._renderTaskQueue.add(p)},u.prototype._cancelRenderFrame=function(p){this._renderTaskQueue.remove(p)},u.prototype._render=function(p){var m,g=this,b=0,E=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=E.createQueryEXT(),E.beginQueryEXT(E.TIME_ELAPSED_EXT,m),b=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),!this._removed){var A=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var D=this.transform.zoom,j=l.browser.now();this.style.zoomHistory.update(D,j);var q=new l.EvaluationParameters(D,{now:j,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Z=q.crossFadingFactor();Z===1&&Z===this._crossFadingFactor||(A=!0,this._crossFadingFactor=Z),this.style.update(q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||A)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Q=l.browser.now()-b;E.endQueryEXT(E.TIME_ELAPSED_EXT,m),setTimeout(function(){var H=E.getQueryObjectEXT(m,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(m),g.fire(new l.Event("gpu-timing-frame",{cpuTime:Q,gpuTime:H}))},50)}if(this.listens("gpu-timing-layer")){var Y=this.painter.collectGpuTimers();setTimeout(function(){var H=g.painter.queryGpuTimers(Y);g.fire(new l.Event("gpu-timing-layer",{layerTimes:H}))},50)}var oe=this._sourcesDirty||this._styleDirty||this._placementDirty;return oe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||oe||(this._fullyLoaded=!0),this}},u.prototype.remove=function(){this._hash&&this._hash.remove();for(var p=0,m=this._controls;p<m.length;p+=1)m[p].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),$s(this._canvasContainer),$s(this._controlContainer),$s(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},u.prototype.triggerRepaint=function(){var p=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(m){p._frame=null,p._render(m)}))},u.prototype._onWindowOnline=function(){this._update()},u.prototype._onWindowResize=function(p){this._trackResize&&this.resize({originalEvent:p})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(p){this._showPadding!==p&&(this._showPadding=p,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(p){this._vertices=p,this._update()},u.prototype._setCacheLimits=function(p,m){l.setCacheLimits(p,m)},a.version.get=function(){return l.version},Object.defineProperties(u.prototype,a),u}(rc);function $s(o){o.parentNode&&o.parentNode.removeChild(o)}var Ep={showCompass:!0,showZoom:!0,visualizePitch:!1},$a=function(o){var u=this;this.options=l.extend({},Ep,o),this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return u._map.zoomIn({},{originalEvent:a})}),k.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return u._map.zoomOut({},{originalEvent:a})}),k.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){u.options.visualizePitch?u._map.resetNorthPitch({},{originalEvent:a}):u._map.resetNorth({},{originalEvent:a})}),this._compassIcon=k.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};$a.prototype._updateZoomButtons=function(){var o=this._map.getZoom(),u=o===this._map.getMaxZoom(),a=o===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},$a.prototype._rotateCompassArrow=function(){var o=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=o},$a.prototype.onAdd=function(o){return this._map=o,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new oo(this._map,this._compass,this.options.visualizePitch)),this._container},$a.prototype.onRemove=function(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},$a.prototype._createButton=function(o,u){var a=k.create("button",o,this._container);return a.type="button",a.addEventListener("click",u),a},$a.prototype._setButtonTitle=function(o,u){var a=this._map._getUIString("NavigationControl."+u);o.title=a,o.setAttribute("aria-label",a)};var oo=function(o,u,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=u,this.mouseRotate=new Ql({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,a&&(this.mousePitch=new xp({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),k.addEventListener(u,"mousedown",this.mousedown),k.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(u,"touchmove",this.touchmove),k.addEventListener(u,"touchend",this.touchend),k.addEventListener(u,"touchcancel",this.reset)};function yu(o,u,a){if(o=new l.LngLat(o.lng,o.lat),u){var p=new l.LngLat(o.lng-360,o.lat),m=new l.LngLat(o.lng+360,o.lat),g=a.locationPoint(o).distSqr(u);a.locationPoint(p).distSqr(u)<g?o=p:a.locationPoint(m).distSqr(u)<g&&(o=m)}for(;Math.abs(o.lng-a.center.lng)>180;){var b=a.locationPoint(o);if(b.x>=0&&b.y>=0&&b.x<=a.width&&b.y<=a.height)break;o.lng>a.center.lng?o.lng-=360:o.lng+=360}return o}oo.prototype.down=function(o,u){this.mouseRotate.mousedown(o,u),this.mousePitch&&this.mousePitch.mousedown(o,u),k.disableDrag()},oo.prototype.move=function(o,u){var a=this.map,p=this.mouseRotate.mousemoveWindow(o,u);if(p&&p.bearingDelta&&a.setBearing(a.getBearing()+p.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(o,u);m&&m.pitchDelta&&a.setPitch(a.getPitch()+m.pitchDelta)}},oo.prototype.off=function(){var o=this.element;k.removeEventListener(o,"mousedown",this.mousedown),k.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(o,"touchmove",this.touchmove),k.removeEventListener(o,"touchend",this.touchend),k.removeEventListener(o,"touchcancel",this.reset),this.offTemp()},oo.prototype.offTemp=function(){k.enableDrag(),k.removeEventListener(l.window,"mousemove",this.mousemove),k.removeEventListener(l.window,"mouseup",this.mouseup)},oo.prototype.mousedown=function(o){this.down(l.extend({},o,{ctrlKey:!0,preventDefault:function(){return o.preventDefault()}}),k.mousePos(this.element,o)),k.addEventListener(l.window,"mousemove",this.mousemove),k.addEventListener(l.window,"mouseup",this.mouseup)},oo.prototype.mousemove=function(o){this.move(o,k.mousePos(this.element,o))},oo.prototype.mouseup=function(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()},oo.prototype.touchstart=function(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return o.preventDefault()}},this._startPos))},oo.prototype.touchmove=function(o){o.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:function(){return o.preventDefault()}},this._lastPos))},oo.prototype.touchend=function(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},oo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var wa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ic(o,u,a){var p=o.classList;for(var m in wa)p.remove("mapboxgl-"+a+"-anchor-"+m);p.add("mapboxgl-"+a+"-anchor-"+u)}var vu,ll=function(o){function u(a,p){if(o.call(this),(a instanceof l.window.HTMLElement||p)&&(a=l.extend({element:a},p)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=l.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div"),this._element.setAttribute("aria-label","Map marker");var m=k.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var g=k.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");var b=k.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");var E=k.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");for(var A=0,D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];A<D.length;A+=1){var j=D[A],q=k.createNS("http://www.w3.org/2000/svg","ellipse");q.setAttributeNS(null,"opacity","0.04"),q.setAttributeNS(null,"cx","10.5"),q.setAttributeNS(null,"cy","5.80029008"),q.setAttributeNS(null,"rx",j.rx),q.setAttributeNS(null,"ry",j.ry),E.appendChild(q)}var Z=k.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"fill",this._color);var Q=k.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Z.appendChild(Q);var Y=k.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");var oe=k.createNS("http://www.w3.org/2000/svg","path");oe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild(oe);var H=k.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(6.0, 7.0)"),H.setAttributeNS(null,"fill","#FFFFFF");var ie=k.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");var ce=k.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");var ve=k.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#FFFFFF"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962"),ie.appendChild(ce),ie.appendChild(ve),b.appendChild(E),b.appendChild(Z),b.appendChild(Y),b.appendChild(H),b.appendChild(ie),m.appendChild(b),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=l.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Me){Me.preventDefault()}),this._element.addEventListener("mousedown",function(Me){Me.preventDefault()}),ic(this._element,this._anchor,"marker"),this._popup=null}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},u.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this},u.prototype.getLngLat=function(){return this._lngLat},u.prototype.setLngLat=function(a){return this._lngLat=l.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},u.prototype.getElement=function(){return this._element},u.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var p=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(24.6+p)],"bottom-right":[-p,-1*(24.6+p)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},u.prototype._onKeyPress=function(a){var p=a.code,m=a.charCode||a.keyCode;p!=="Space"&&p!=="Enter"&&m!==32&&m!==13||this.togglePopup()},u.prototype._onMapClick=function(a){var p=a.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},u.prototype.getPopup=function(){return this._popup},u.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},u.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=yu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(p="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,wa[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+p)}},u.prototype.getOffset=function(){return this._offset},u.prototype.setOffset=function(a){return this._offset=l.Point.convert(a),this._update(),this},u.prototype._onMove=function(a){if(!this._isDragging){var p=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))},u.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},u.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},u.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},u.prototype.isDraggable=function(){return this._draggable},u.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},u.prototype.getRotation=function(){return this._rotation},u.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},u.prototype.getRotationAlignment=function(){return this._rotationAlignment},u.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},u.prototype.getPitchAlignment=function(){return this._pitchAlignment},u}(l.Evented),Pp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},gu=0,Hs=!1,Tp=function(o){function u(a){o.call(this),this.options=l.extend({},Pp,a),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.onAdd=function(a){var p;return this._map=a,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),p=this._setupUI,vu!==void 0?p(vu):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(m){p(vu=m.state!=="denied")}):p(vu=!!l.window.navigator.geolocation),this._container},u.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,gu=0,Hs=!1},u.prototype._isOutOfMapMaxBounds=function(a){var p=this._map.getMaxBounds(),m=a.coords;return p&&(m.longitude<p.getWest()||m.longitude>p.getEast()||m.latitude<p.getSouth()||m.latitude>p.getNorth())},u.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},u.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",a)),this._finish()}},u.prototype._updateCamera=function(a){var p=new l.LngLat(a.coords.longitude,a.coords.latitude),m=a.coords.accuracy,g=this._map.getBearing(),b=l.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(p.toBounds(m),b,{geolocateSource:!0})},u.prototype._updateMarker=function(a){if(a){var p=new l.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},u.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,p=this._map.unproject([0,a]),m=this._map.unproject([1,a]),g=p.distanceTo(m),b=Math.ceil(2*this._accuracy/g);this._circleElement.style.width=b+"px",this._circleElement.style.height=b+"px"},u.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},u.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Hs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",a)),this._finish()}},u.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},u.prototype._setupUI=function(a){var p=this;if(this._container.addEventListener("contextmenu",function(b){return b.preventDefault()}),this._geolocateButton=k.create("button","mapboxgl-ctrl-geolocate",this._container),k.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var g=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ll(this._dotElement),this._circleElement=k.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ll({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(b){b.geolocateSource||p._watchState!=="ACTIVE_LOCK"||b.originalEvent&&b.originalEvent.type==="resize"||(p._watchState="BACKGROUND",p._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),p._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),p.fire(new l.Event("trackuserlocationend")))})},u.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":gu--,Hs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++gu>1?(a={maximumAge:6e5,timeout:0},Hs=!0):(a=this.options.positionOptions,Hs=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},u.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},u}(l.Evented),ps={maxWidth:100,unit:"metric"},hs=function(o){this.options=l.extend({},ps,o),l.bindAll(["_onMove","setUnit"],this)};function oc(o,u,a){var p=a&&a.maxWidth||100,m=o._container.clientHeight/2,g=o.unproject([0,m]),b=o.unproject([p,m]),E=g.distanceTo(b);if(a&&a.unit==="imperial"){var A=3.2808*E;A>5280?fs(u,p,A/5280,o._getUIString("ScaleControl.Miles")):fs(u,p,A,o._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?fs(u,p,E/1852,o._getUIString("ScaleControl.NauticalMiles")):E>=1e3?fs(u,p,E/1e3,o._getUIString("ScaleControl.Kilometers")):fs(u,p,E,o._getUIString("ScaleControl.Meters"))}function fs(o,u,a,p){var m,g,b,E=(m=a,(g=Math.pow(10,(""+Math.floor(m)).length-1))*(b=(b=m/g)>=10?10:b>=5?5:b>=3?3:b>=2?2:b>=1?1:function(A){var D=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*D)/D}(b)));o.style.width=u*(E/a)+"px",o.innerHTML=E+"&nbsp;"+p}hs.prototype.getDefaultPosition=function(){return"bottom-left"},hs.prototype._onMove=function(){oc(this._map,this._container,this.options)},hs.prototype.onAdd=function(o){return this._map=o,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",o.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},hs.prototype.onRemove=function(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},hs.prototype.setUnit=function(o){this.options.unit=o,oc(this._map,this._container,this.options)};var Bo=function(o){this._fullscreen=!1,o&&o.container&&(o.container instanceof l.window.HTMLElement?this._container=o.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};Bo.prototype.onAdd=function(o){return this._map=o,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Bo.prototype.onRemove=function(){k.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Bo.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},Bo.prototype._setupUI=function(){var o=this._fullscreenButton=k.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);k.create("span","mapboxgl-ctrl-icon",o).setAttribute("aria-hidden",!0),o.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Bo.prototype._updateTitle=function(){var o=this._getTitle();this._fullscreenButton.setAttribute("aria-label",o),this._fullscreenButton.title=o},Bo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Bo.prototype._isFullscreen=function(){return this._fullscreen},Bo.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Bo.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Cp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},cl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ip=function(o){function u(a){o.call(this),this.options=l.extend(Object.create(Cp),a),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},u.prototype.isOpen=function(){return!!this._map},u.prototype.remove=function(){return this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},u.prototype.getLngLat=function(){return this._lngLat},u.prototype.setLngLat=function(a){return this._lngLat=l.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},u.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},u.prototype.getElement=function(){return this._container},u.prototype.setText=function(a){return this.setDOMContent(l.window.document.createTextNode(a))},u.prototype.setHTML=function(a){var p,m=l.window.document.createDocumentFragment(),g=l.window.document.createElement("body");for(g.innerHTML=a;p=g.firstChild;)m.appendChild(p);return this.setDOMContent(m)},u.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},u.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},u.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},u.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},u.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},u.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},u.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},u.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=k.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},u.prototype._onMouseUp=function(a){this._update(a.point)},u.prototype._onMouseMove=function(a){this._update(a.point)},u.prototype._onDrag=function(a){this._update(a.point)},u.prototype._update=function(a){var p=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=k.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=k.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(q){return p._container.classList.add(q)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=yu(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var m=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),g=this.options.anchor,b=function q(Z){if(Z){if(typeof Z=="number"){var Q=Math.round(Math.sqrt(.5*Math.pow(Z,2)));return{center:new l.Point(0,0),top:new l.Point(0,Z),"top-left":new l.Point(Q,Q),"top-right":new l.Point(-Q,Q),bottom:new l.Point(0,-Z),"bottom-left":new l.Point(Q,-Q),"bottom-right":new l.Point(-Q,-Q),left:new l.Point(Z,0),right:new l.Point(-Z,0)}}if(Z instanceof l.Point||Array.isArray(Z)){var Y=l.Point.convert(Z);return{center:Y,top:Y,"top-left":Y,"top-right":Y,bottom:Y,"bottom-left":Y,"bottom-right":Y,left:Y,right:Y}}return{center:l.Point.convert(Z.center||[0,0]),top:l.Point.convert(Z.top||[0,0]),"top-left":l.Point.convert(Z["top-left"]||[0,0]),"top-right":l.Point.convert(Z["top-right"]||[0,0]),bottom:l.Point.convert(Z.bottom||[0,0]),"bottom-left":l.Point.convert(Z["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(Z["bottom-right"]||[0,0]),left:l.Point.convert(Z.left||[0,0]),right:l.Point.convert(Z.right||[0,0])}}return q(new l.Point(0,0))}(this.options.offset);if(!g){var E,A=this._container.offsetWidth,D=this._container.offsetHeight;E=m.y+b.bottom.y<D?["top"]:m.y>this._map.transform.height-D?["bottom"]:[],m.x<A/2?E.push("left"):m.x>this._map.transform.width-A/2&&E.push("right"),g=E.length===0?"bottom":E.join("-")}var j=m.add(b[g]).round();k.setTransform(this._container,wa[g]+" translate("+j.x+"px,"+j.y+"px)"),ic(this._container,g,"popup")}},u.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(cl);a&&a.focus()}},u.prototype._onClose=function(){this.remove()},u}(l.Evented),ac={version:l.version,supported:C,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:pf,NavigationControl:$a,GeolocateControl:Tp,AttributionControl:gi,ScaleControl:hs,FullscreenControl:Bo,Popup:Ip,Marker:ll,Style:qr,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){ze().acquire(Ae)},clearPrewarmedResources:function(){var o=pt;o&&(o.isPreloaded()&&o.numActive()===1?(o.release(Ae),pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(o){l.config.ACCESS_TOKEN=o},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(o){l.config.API_URL=o},get workerCount(){return Ve.workerCount},set workerCount(o){Ve.workerCount=o},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(o){l.config.MAX_PARALLEL_IMAGE_REQUESTS=o},clearStorage:function(o){l.clearTileCache(o)},workerUrl:""};return ac}),y})})(O0);var RC=O0.exports,R0={exports:{}};(function(t,n){(function(s,h){t.exports=h()})(Oc,function(){var s=function(S,T){var B={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},le={on:function(fe,we,$e){if(B[fe]===void 0)throw new Error("Invalid event type: "+fe);B[fe].push({selector:we,fn:$e})},render:function(fe){T.store.featureChanged(fe)}},ge=function(fe,we){for(var $e=B[fe],Ge=$e.length;Ge--;){var dt=$e[Ge];if(dt.selector(we)){dt.fn.call(le,we)||T.store.render(),T.ui.updateMapClasses();break}}};return S.start.call(le),{render:S.render,stop:function(){S.stop&&S.stop()},trash:function(){S.trash&&(S.trash(),T.store.render())},combineFeatures:function(){S.combineFeatures&&S.combineFeatures()},uncombineFeatures:function(){S.uncombineFeatures&&S.uncombineFeatures()},drag:function(fe){ge("drag",fe)},click:function(fe){ge("click",fe)},mousemove:function(fe){ge("mousemove",fe)},mousedown:function(fe){ge("mousedown",fe)},mouseup:function(fe){ge("mouseup",fe)},mouseout:function(fe){ge("mouseout",fe)},keydown:function(fe){ge("keydown",fe)},keyup:function(fe){ge("keyup",fe)},touchstart:function(fe){ge("touchstart",fe)},touchmove:function(fe){ge("touchmove",fe)},touchend:function(fe){ge("touchend",fe)},tap:function(fe){ge("tap",fe)}}},h=6378137;function y(S){var T=0;if(S&&S.length>0){T+=Math.abs(x(S[0]));for(var B=1;B<S.length;B++)T-=Math.abs(x(S[B]))}return T}function x(S){var T,B,le,ge,fe,we,$e=0,Ge=S.length;if(Ge>2){for(we=0;we<Ge;we++)we===Ge-2?(le=Ge-2,ge=Ge-1,fe=0):we===Ge-1?(le=Ge-1,ge=0,fe=1):(le=we,ge=we+1,fe=we+2),T=S[le],B=S[ge],$e+=(l(S[fe][0])-l(T[0]))*Math.sin(l(B[1]));$e=$e*h*h/2}return $e}function l(S){return S*Math.PI/180}var C={geometry:function S(T){var B,le=0;switch(T.type){case"Polygon":return y(T.coordinates);case"MultiPolygon":for(B=0;B<T.coordinates.length;B++)le+=y(T.coordinates[B]);return le;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(B=0;B<T.geometries.length;B++)le+=S(T.geometries[B]);return le}},ring:x},k="mapboxgl-ctrl",F="mapbox-gl-draw_ctrl-draw-btn",$="mapbox-gl-draw_line",me="mapbox-gl-draw_polygon",W="mapbox-gl-draw_point",xe="mapbox-gl-draw_trash",Ce="mapbox-gl-draw_combine",Oe="mapbox-gl-draw_uncombine",se="mapboxgl-ctrl-group",te="active",ne="mapbox-gl-draw_boxselect",be="mapbox-gl-draw-hot",Le="mapbox-gl-draw-cold",Se="add",Ie="move",je="drag",at="pointer",Xe="none",_t={POLYGON:"polygon",LINE:"line_string",POINT:"point"},Mt="Feature",bt="Polygon",Ct="LineString",Ut="Point",Cr="FeatureCollection",Ir="Multi",Fn="MultiPoint",Qt="MultiLineString",Bn="MultiPolygon",Gt={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},Ye="draw.create",zt="draw.delete",Xt="draw.update",Rr="draw.selectionchange",Gr="draw.modechange",fo="draw.actionable",en="draw.render",si="draw.combine",cr="draw.uncombine",Io="move",is="change_coordinates",Hn="feature",er="midpoint",Vi="vertex",on="true",An="false",Ju=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],qi={Point:0,LineString:1,Polygon:2};function zs(S,T){var B=qi[S.geometry.type]-qi[T.geometry.type];return B===0&&S.geometry.type===bt?S.area-T.area:B}function cn(S){if(this._items={},this._nums={},this._length=S?S.length:0,S)for(var T=0,B=S.length;T<B;T++)this.add(S[T]),S[T]!==void 0&&(typeof S[T]=="string"?this._items[S[T]]=T:this._nums[S[T]]=T)}cn.prototype.add=function(S){return this.has(S)||(this._length++,typeof S=="string"?this._items[S]=this._length:this._nums[S]=this._length),this},cn.prototype.delete=function(S){return this.has(S)===!1||(this._length--,delete this._items[S],delete this._nums[S]),this},cn.prototype.has=function(S){return(typeof S=="string"||typeof S=="number")&&(this._items[S]!==void 0||this._nums[S]!==void 0)},cn.prototype.values=function(){var S=this,T=[];return Object.keys(this._items).forEach(function(B){T.push({k:B,v:S._items[B]})}),Object.keys(this._nums).forEach(function(B){T.push({k:JSON.parse(B),v:S._nums[B]})}),T.sort(function(B,le){return B.v-le.v}).map(function(B){return B.k})},cn.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var La=[Hn,er,Vi],ko={click:function(S,T,B){return Ci(S,T,B,B.options.clickBuffer)},touch:function(S,T,B){return Ci(S,T,B,B.options.touchBuffer)}};function Ci(S,T,B,le){if(B.map===null)return[];var ge=S?function(dt,Te){return Te===void 0&&(Te=0),[[dt.point.x-Te,dt.point.y-Te],[dt.point.x+Te,dt.point.y+Te]]}(S,le):T,fe={};B.options.styles&&(fe.layers=B.options.styles.map(function(dt){return dt.id}));var we=B.map.queryRenderedFeatures(ge,fe).filter(function(dt){return La.indexOf(dt.properties.meta)!==-1}),$e=new cn,Ge=[];return we.forEach(function(dt){var Te=dt.properties.id;$e.has(Te)||($e.add(Te),Ge.push(dt))}),function(dt){return dt.map(function(Te){return Te.geometry.type===bt&&(Te.area=C.geometry({type:Mt,property:{},geometry:Te.geometry})),Te}).sort(zs).map(function(Te){return delete Te.area,Te})}(Ge)}function mi(S,T){var B=ko.click(S,null,T),le={mouse:Xe};return B[0]&&(le.mouse=B[0].properties.active===on?Ie:at,le.feature=B[0].properties.meta),T.events.currentModeName().indexOf("draw")!==-1&&(le.mouse=Se),T.ui.queueMapClasses(le),T.ui.updateMapClasses(),B[0]}function pa(S,T){var B=S.x-T.x,le=S.y-T.y;return Math.sqrt(B*B+le*le)}function Zi(S,T,B){B===void 0&&(B={});var le=B.fineTolerance!=null?B.fineTolerance:4,ge=B.grossTolerance!=null?B.grossTolerance:12,fe=B.interval!=null?B.interval:500;S.point=S.point||T.point,S.time=S.time||T.time;var we=pa(S.point,T.point);return we<le||we<ge&&T.time-S.time<fe}function Ls(S,T,B){B===void 0&&(B={});var le=B.tolerance!=null?B.tolerance:25,ge=B.interval!=null?B.interval:250;return S.point=S.point||T.point,S.time=S.time||T.time,pa(S.point,T.point)<le&&T.time-S.time<ge}function os(S,T){return S(T={exports:{}},T.exports),T.exports}var Da=os(function(S){var T=S.exports=function(B,le){if(le||(le=16),B===void 0&&(B=128),B<=0)return"0";for(var ge=Math.log(Math.pow(2,B))/Math.log(le),fe=2;ge===1/0;fe*=2)ge=Math.log(Math.pow(2,B/fe))/Math.log(le)*fe;var we=ge-Math.floor(ge),$e="";for(fe=0;fe<Math.floor(ge);fe++)$e=Math.floor(Math.random()*le).toString(le)+$e;if(we){var Ge=Math.pow(le,we);$e=Math.floor(Math.random()*Ge).toString(le)+$e}var dt=parseInt($e,le);return dt!==1/0&&dt>=Math.pow(2,B)?T(B,le):$e};T.rack=function(B,le,ge){var fe=function($e){var Ge=0;do{if(Ge++>10){if(!ge)throw new Error("too many ID collisions, use more bits");B+=ge}var dt=T(B,le)}while(Object.hasOwnProperty.call(we,dt));return we[dt]=$e,dt},we=fe.hats={};return fe.get=function($e){return fe.hats[$e]},fe.set=function($e,Ge){return fe.hats[$e]=Ge,fe},fe.bits=B||128,fe.base=le||16,fe}}),Mn=function(S,T){this.ctx=S,this.properties=T.properties||{},this.coordinates=T.geometry.coordinates,this.id=T.id||Da(),this.type=T.geometry.type};Mn.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Mn.prototype.incomingCoords=function(S){this.setCoordinates(S)},Mn.prototype.setCoordinates=function(S){this.coordinates=S,this.changed()},Mn.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Mn.prototype.setProperty=function(S,T){this.properties[S]=T},Mn.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:Mt,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Mn.prototype.internal=function(S){var T={id:this.id,meta:Hn,"meta:type":this.type,active:An,mode:S};if(this.ctx.options.userProperties)for(var B in this.properties)T["user_"+B]=this.properties[B];return{type:Mt,properties:T,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Gi=function(S,T){Mn.call(this,S,T)};(Gi.prototype=Object.create(Mn.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Gi.prototype.updateCoordinate=function(S,T,B){this.coordinates=arguments.length===3?[T,B]:[S,T],this.changed()},Gi.prototype.getCoordinate=function(){return this.getCoordinates()};var Wi=function(S,T){Mn.call(this,S,T)};(Wi.prototype=Object.create(Mn.prototype)).isValid=function(){return this.coordinates.length>1},Wi.prototype.addCoordinate=function(S,T,B){this.changed();var le=parseInt(S,10);this.coordinates.splice(le,0,[T,B])},Wi.prototype.getCoordinate=function(S){var T=parseInt(S,10);return JSON.parse(JSON.stringify(this.coordinates[T]))},Wi.prototype.removeCoordinate=function(S){this.changed(),this.coordinates.splice(parseInt(S,10),1)},Wi.prototype.updateCoordinate=function(S,T,B){var le=parseInt(S,10);this.coordinates[le]=[T,B],this.changed()};var Xn=function(S,T){Mn.call(this,S,T),this.coordinates=this.coordinates.map(function(B){return B.slice(0,-1)})};(Xn.prototype=Object.create(Mn.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(S){return S.length>2})},Xn.prototype.incomingCoords=function(S){this.coordinates=S.map(function(T){return T.slice(0,-1)}),this.changed()},Xn.prototype.setCoordinates=function(S){this.coordinates=S,this.changed()},Xn.prototype.addCoordinate=function(S,T,B){this.changed();var le=S.split(".").map(function(ge){return parseInt(ge,10)});this.coordinates[le[0]].splice(le[1],0,[T,B])},Xn.prototype.removeCoordinate=function(S){this.changed();var T=S.split(".").map(function(le){return parseInt(le,10)}),B=this.coordinates[T[0]];B&&(B.splice(T[1],1),B.length<3&&this.coordinates.splice(T[0],1))},Xn.prototype.getCoordinate=function(S){var T=S.split(".").map(function(le){return parseInt(le,10)}),B=this.coordinates[T[0]];return JSON.parse(JSON.stringify(B[T[1]]))},Xn.prototype.getCoordinates=function(){return this.coordinates.map(function(S){return S.concat([S[0]])})},Xn.prototype.updateCoordinate=function(S,T,B){this.changed();var le=S.split("."),ge=parseInt(le[0],10),fe=parseInt(le[1],10);this.coordinates[ge]===void 0&&(this.coordinates[ge]=[]),this.coordinates[ge][fe]=[T,B]};var Ds={MultiPoint:Gi,MultiLineString:Wi,MultiPolygon:Xn},Ao=function(S,T,B,le,ge){var fe=B.split("."),we=parseInt(fe[0],10),$e=fe[1]?fe.slice(1).join("."):null;return S[we][T]($e,le,ge)},Un=function(S,T){if(Mn.call(this,S,T),delete this.coordinates,this.model=Ds[T.geometry.type],this.model===void 0)throw new TypeError(T.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(T.geometry.coordinates)};function tr(S){this.map=S.map,this.drawConfig=JSON.parse(JSON.stringify(S.options||{})),this._ctx=S}(Un.prototype=Object.create(Mn.prototype))._coordinatesToFeatures=function(S){var T=this,B=this.model.bind(this);return S.map(function(le){return new B(T.ctx,{id:Da(),type:Mt,properties:{},geometry:{coordinates:le,type:T.type.replace("Multi","")}})})},Un.prototype.isValid=function(){return this.features.every(function(S){return S.isValid()})},Un.prototype.setCoordinates=function(S){this.features=this._coordinatesToFeatures(S),this.changed()},Un.prototype.getCoordinate=function(S){return Ao(this.features,"getCoordinate",S)},Un.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(S){return S.type===bt?S.getCoordinates():S.coordinates})))},Un.prototype.updateCoordinate=function(S,T,B){Ao(this.features,"updateCoordinate",S,T,B),this.changed()},Un.prototype.addCoordinate=function(S,T,B){Ao(this.features,"addCoordinate",S,T,B),this.changed()},Un.prototype.removeCoordinate=function(S){Ao(this.features,"removeCoordinate",S),this.changed()},Un.prototype.getFeatures=function(){return this.features},tr.prototype.setSelected=function(S){return this._ctx.store.setSelected(S)},tr.prototype.setSelectedCoordinates=function(S){var T=this;this._ctx.store.setSelectedCoordinates(S),S.reduce(function(B,le){return B[le.feature_id]===void 0&&(B[le.feature_id]=!0,T._ctx.store.get(le.feature_id).changed()),B},{})},tr.prototype.getSelected=function(){return this._ctx.store.getSelected()},tr.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},tr.prototype.isSelected=function(S){return this._ctx.store.isSelected(S)},tr.prototype.getFeature=function(S){return this._ctx.store.get(S)},tr.prototype.select=function(S){return this._ctx.store.select(S)},tr.prototype.deselect=function(S){return this._ctx.store.deselect(S)},tr.prototype.deleteFeature=function(S,T){return T===void 0&&(T={}),this._ctx.store.delete(S,T)},tr.prototype.addFeature=function(S){return this._ctx.store.add(S)},tr.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},tr.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},tr.prototype.setActionableState=function(S){S===void 0&&(S={});var T={trash:S.trash||!1,combineFeatures:S.combineFeatures||!1,uncombineFeatures:S.uncombineFeatures||!1};return this._ctx.events.actionable(T)},tr.prototype.changeMode=function(S,T,B){return T===void 0&&(T={}),B===void 0&&(B={}),this._ctx.events.changeMode(S,T,B)},tr.prototype.updateUIClasses=function(S){return this._ctx.ui.queueMapClasses(S)},tr.prototype.activateUIButton=function(S){return this._ctx.ui.setActiveButton(S)},tr.prototype.featuresAt=function(S,T,B){if(B===void 0&&(B="click"),B!=="click"&&B!=="touch")throw new Error("invalid buffer type");return ko[B](S,T,this._ctx)},tr.prototype.newFeature=function(S){var T=S.geometry.type;return T===Ut?new Gi(this._ctx,S):T===Ct?new Wi(this._ctx,S):T===bt?new Xn(this._ctx,S):new Un(this._ctx,S)},tr.prototype.isInstanceOf=function(S,T){if(S===Ut)return T instanceof Gi;if(S===Ct)return T instanceof Wi;if(S===bt)return T instanceof Xn;if(S==="MultiFeature")return T instanceof Un;throw new Error("Unknown feature class: "+S)},tr.prototype.doRender=function(S){return this._ctx.store.featureChanged(S)},tr.prototype.onSetup=function(){},tr.prototype.onDrag=function(){},tr.prototype.onClick=function(){},tr.prototype.onMouseMove=function(){},tr.prototype.onMouseDown=function(){},tr.prototype.onMouseUp=function(){},tr.prototype.onMouseOut=function(){},tr.prototype.onKeyUp=function(){},tr.prototype.onKeyDown=function(){},tr.prototype.onTouchStart=function(){},tr.prototype.onTouchMove=function(){},tr.prototype.onTouchEnd=function(){},tr.prototype.onTap=function(){},tr.prototype.onStop=function(){},tr.prototype.onTrash=function(){},tr.prototype.onCombineFeature=function(){},tr.prototype.onUncombineFeature=function(){},tr.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Os={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},cu=Object.keys(Os);function Oa(S){var T=Object.keys(S);return function(B,le){le===void 0&&(le={});var ge={},fe=T.reduce(function(we,$e){return we[$e]=S[$e],we},new tr(B));return{start:function(){var we=this;ge=fe.onSetup(le),cu.forEach(function($e){var Ge,dt=Os[$e],Te=function(){return!1};S[dt]&&(Te=function(){return!0}),we.on($e,Te,(Ge=dt,function(ut){return fe[Ge](ge,ut)}))})},stop:function(){fe.onStop(ge)},trash:function(){fe.onTrash(ge)},combineFeatures:function(){fe.onCombineFeatures(ge)},uncombineFeatures:function(){fe.onUncombineFeatures(ge)},render:function(we,$e){fe.toDisplayFeatures(ge,we,$e)}}}}function $i(S){return[].concat(S).filter(function(T){return T!==void 0})}function Ho(){var S=this;if(!(S.ctx.map&&S.ctx.map.getSource(be)!==void 0))return Ge();var T=S.ctx.events.currentModeName();S.ctx.ui.queueMapClasses({mode:T});var B=[],le=[];S.isDirty?le=S.getAllIds():(B=S.getChangedIds().filter(function(dt){return S.get(dt)!==void 0}),le=S.sources.hot.filter(function(dt){return dt.properties.id&&B.indexOf(dt.properties.id)===-1&&S.get(dt.properties.id)!==void 0}).map(function(dt){return dt.properties.id})),S.sources.hot=[];var ge=S.sources.cold.length;S.sources.cold=S.isDirty?[]:S.sources.cold.filter(function(dt){var Te=dt.properties.id||dt.properties.parent;return B.indexOf(Te)===-1});var fe=ge!==S.sources.cold.length||le.length>0;function we(dt,Te){var ut=S.get(dt).internal(T);S.ctx.events.currentModeRender(ut,function(mt){S.sources[Te].push(mt)})}if(B.forEach(function(dt){return we(dt,"hot")}),le.forEach(function(dt){return we(dt,"cold")}),fe&&S.ctx.map.getSource(Le).setData({type:Cr,features:S.sources.cold}),S.ctx.map.getSource(be).setData({type:Cr,features:S.sources.hot}),S._emitSelectionChange&&(S.ctx.map.fire(Rr,{features:S.getSelected().map(function(dt){return dt.toGeoJSON()}),points:S.getSelectedCoordinates().map(function(dt){return{type:Mt,properties:{},geometry:{type:Ut,coordinates:dt.coordinates}}})}),S._emitSelectionChange=!1),S._deletedFeaturesToEmit.length){var $e=S._deletedFeaturesToEmit.map(function(dt){return dt.toGeoJSON()});S._deletedFeaturesToEmit=[],S.ctx.map.fire(zt,{features:$e})}function Ge(){S.isDirty=!1,S.clearChangedIds()}Ge(),S.ctx.map.fire(en,{})}function Mr(S){var T,B=this;this._features={},this._featureIds=new cn,this._selectedFeatureIds=new cn,this._selectedCoordinates=[],this._changedFeatureIds=new cn,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=S,this.sources={hot:[],cold:[]},this.render=function(){T||(T=requestAnimationFrame(function(){T=null,Ho.call(B)}))},this.isDirty=!1}function as(S,T){var B=S._selectedCoordinates.filter(function(le){return S._selectedFeatureIds.has(le.feature_id)});S._selectedCoordinates.length===B.length||T.silent||(S._emitSelectionChange=!0),S._selectedCoordinates=B}Mr.prototype.createRenderBatch=function(){var S=this,T=this.render,B=0;return this.render=function(){B++},function(){S.render=T,B>0&&S.render()}},Mr.prototype.setDirty=function(){return this.isDirty=!0,this},Mr.prototype.featureChanged=function(S){return this._changedFeatureIds.add(S),this},Mr.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Mr.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Mr.prototype.getAllIds=function(){return this._featureIds.values()},Mr.prototype.add=function(S){return this.featureChanged(S.id),this._features[S.id]=S,this._featureIds.add(S.id),this},Mr.prototype.delete=function(S,T){var B=this;return T===void 0&&(T={}),$i(S).forEach(function(le){B._featureIds.has(le)&&(B._featureIds.delete(le),B._selectedFeatureIds.delete(le),T.silent||B._deletedFeaturesToEmit.indexOf(B._features[le])===-1&&B._deletedFeaturesToEmit.push(B._features[le]),delete B._features[le],B.isDirty=!0)}),as(this,T),this},Mr.prototype.get=function(S){return this._features[S]},Mr.prototype.getAll=function(){var S=this;return Object.keys(this._features).map(function(T){return S._features[T]})},Mr.prototype.select=function(S,T){var B=this;return T===void 0&&(T={}),$i(S).forEach(function(le){B._selectedFeatureIds.has(le)||(B._selectedFeatureIds.add(le),B._changedFeatureIds.add(le),T.silent||(B._emitSelectionChange=!0))}),this},Mr.prototype.deselect=function(S,T){var B=this;return T===void 0&&(T={}),$i(S).forEach(function(le){B._selectedFeatureIds.has(le)&&(B._selectedFeatureIds.delete(le),B._changedFeatureIds.add(le),T.silent||(B._emitSelectionChange=!0))}),as(this,T),this},Mr.prototype.clearSelected=function(S){return S===void 0&&(S={}),this.deselect(this._selectedFeatureIds.values(),{silent:S.silent}),this},Mr.prototype.setSelected=function(S,T){var B=this;return T===void 0&&(T={}),S=$i(S),this.deselect(this._selectedFeatureIds.values().filter(function(le){return S.indexOf(le)===-1}),{silent:T.silent}),this.select(S.filter(function(le){return!B._selectedFeatureIds.has(le)}),{silent:T.silent}),this},Mr.prototype.setSelectedCoordinates=function(S){return this._selectedCoordinates=S,this._emitSelectionChange=!0,this},Mr.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Mr.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Mr.prototype.getSelected=function(){var S=this;return this._selectedFeatureIds.values().map(function(T){return S.get(T)})},Mr.prototype.getSelectedCoordinates=function(){var S=this;return this._selectedCoordinates.map(function(T){return{coordinates:S.get(T.feature_id).getCoordinate(T.coord_path)}})},Mr.prototype.isSelected=function(S){return this._selectedFeatureIds.has(S)},Mr.prototype.setFeatureProperty=function(S,T,B){this.get(S).setProperty(T,B),this.featureChanged(S)},Mr.prototype.storeMapConfig=function(){var S=this;Ju.forEach(function(T){S.ctx.map[T]&&(S._mapInitialConfig[T]=S.ctx.map[T].isEnabled())})},Mr.prototype.restoreMapConfig=function(){var S=this;Object.keys(this._mapInitialConfig).forEach(function(T){S._mapInitialConfig[T]?S.ctx.map[T].enable():S.ctx.map[T].disable()})},Mr.prototype.getInitialConfigValue=function(S){return this._mapInitialConfig[S]===void 0||this._mapInitialConfig[S]};var zr=function(){for(var S=arguments,T={},B=0;B<arguments.length;B++){var le=S[B];for(var ge in le)L.call(le,ge)&&(T[ge]=le[ge])}return T},L=Object.prototype.hasOwnProperty,O=["mode","feature","mouse"];function U(S){var T=null,B=null,le={onRemove:function(){return S.map.off("load",le.connect),clearInterval(B),le.removeLayers(),S.store.restoreMapConfig(),S.ui.removeButtons(),S.events.removeEventListeners(),S.ui.clearMapClasses(),S.map=null,S.container=null,S.store=null,T&&T.parentNode&&T.parentNode.removeChild(T),T=null,this},connect:function(){S.map.off("load",le.connect),clearInterval(B),le.addLayers(),S.store.storeMapConfig(),S.events.addEventListeners()},onAdd:function(ge){var fe=ge.fire;return ge.fire=function(we,$e){var Ge=arguments;return fe.length===1&&arguments.length!==1&&(Ge=[zr({},{type:we},$e)]),fe.apply(ge,Ge)},S.map=ge,S.events=function(we){var $e=Object.keys(we.options.modes).reduce(function(Be,gt){return Be[gt]=Oa(we.options.modes[gt]),Be},{}),Ge={},dt={},Te={},ut=null,mt=null;Te.drag=function(Be,gt){gt({point:Be.point,time:new Date().getTime()})?(we.ui.queueMapClasses({mouse:je}),mt.drag(Be)):Be.originalEvent.stopPropagation()},Te.mousedrag=function(Be){Te.drag(Be,function(gt){return!Zi(Ge,gt)})},Te.touchdrag=function(Be){Te.drag(Be,function(gt){return!Ls(dt,gt)})},Te.mousemove=function(Be){if((Be.originalEvent.buttons!==void 0?Be.originalEvent.buttons:Be.originalEvent.which)===1)return Te.mousedrag(Be);var gt=mi(Be,we);Be.featureTarget=gt,mt.mousemove(Be)},Te.mousedown=function(Be){Ge={time:new Date().getTime(),point:Be.point};var gt=mi(Be,we);Be.featureTarget=gt,mt.mousedown(Be)},Te.mouseup=function(Be){var gt=mi(Be,we);Be.featureTarget=gt,Zi(Ge,{point:Be.point,time:new Date().getTime()})?mt.click(Be):mt.mouseup(Be)},Te.mouseout=function(Be){mt.mouseout(Be)},Te.touchstart=function(Be){if(Be.originalEvent.preventDefault(),we.options.touchEnabled){dt={time:new Date().getTime(),point:Be.point};var gt=ko.touch(Be,null,we)[0];Be.featureTarget=gt,mt.touchstart(Be)}},Te.touchmove=function(Be){if(Be.originalEvent.preventDefault(),we.options.touchEnabled)return mt.touchmove(Be),Te.touchdrag(Be)},Te.touchend=function(Be){if(Be.originalEvent.preventDefault(),we.options.touchEnabled){var gt=ko.touch(Be,null,we)[0];Be.featureTarget=gt,Ls(dt,{time:new Date().getTime(),point:Be.point})?mt.tap(Be):mt.touchend(Be)}};var Ft=function(Be){return!(Be===8||Be===46||Be>=48&&Be<=57)};function Vt(Be,gt,Pr){Pr===void 0&&(Pr={}),mt.stop();var ar=$e[Be];if(ar===void 0)throw new Error(Be+" is not valid");ut=Be;var Lr=ar(we,gt);mt=s(Lr,we),Pr.silent||we.map.fire(Gr,{mode:Be}),we.store.setDirty(),we.store.render()}Te.keydown=function(Be){(Be.srcElement||Be.target).classList[0]==="mapboxgl-canvas"&&(Be.keyCode!==8&&Be.keyCode!==46||!we.options.controls.trash?Ft(Be.keyCode)?mt.keydown(Be):Be.keyCode===49&&we.options.controls.point?Vt(Gt.DRAW_POINT):Be.keyCode===50&&we.options.controls.line_string?Vt(Gt.DRAW_LINE_STRING):Be.keyCode===51&&we.options.controls.polygon&&Vt(Gt.DRAW_POLYGON):(Be.preventDefault(),mt.trash()))},Te.keyup=function(Be){Ft(Be.keyCode)&&mt.keyup(Be)},Te.zoomend=function(){we.store.changeZoom()},Te.data=function(Be){if(Be.dataType==="style"){var gt=we.setup,Pr=we.map,ar=we.options,Lr=we.store;ar.styles.some(function(It){return Pr.getLayer(It.id)})||(gt.addLayers(),Lr.setDirty(),Lr.render())}};var an={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){ut=we.options.defaultMode,mt=s($e[ut](we),we)},changeMode:Vt,actionable:function(Be){var gt=!1;Object.keys(Be).forEach(function(Pr){if(an[Pr]===void 0)throw new Error("Invalid action type");an[Pr]!==Be[Pr]&&(gt=!0),an[Pr]=Be[Pr]}),gt&&we.map.fire(fo,{actions:an})},currentModeName:function(){return ut},currentModeRender:function(Be,gt){return mt.render(Be,gt)},fire:function(Be,gt){Te[Be]&&Te[Be](gt)},addEventListeners:function(){we.map.on("mousemove",Te.mousemove),we.map.on("mousedown",Te.mousedown),we.map.on("mouseup",Te.mouseup),we.map.on("data",Te.data),we.map.on("touchmove",Te.touchmove),we.map.on("touchstart",Te.touchstart),we.map.on("touchend",Te.touchend),we.container.addEventListener("mouseout",Te.mouseout),we.options.keybindings&&(we.container.addEventListener("keydown",Te.keydown),we.container.addEventListener("keyup",Te.keyup))},removeEventListeners:function(){we.map.off("mousemove",Te.mousemove),we.map.off("mousedown",Te.mousedown),we.map.off("mouseup",Te.mouseup),we.map.off("data",Te.data),we.map.off("touchmove",Te.touchmove),we.map.off("touchstart",Te.touchstart),we.map.off("touchend",Te.touchend),we.container.removeEventListener("mouseout",Te.mouseout),we.options.keybindings&&(we.container.removeEventListener("keydown",Te.keydown),we.container.removeEventListener("keyup",Te.keyup))},trash:function(Be){mt.trash(Be)},combineFeatures:function(){mt.combineFeatures()},uncombineFeatures:function(){mt.uncombineFeatures()},getMode:function(){return ut}}}(S),S.ui=function(we){var $e={},Ge=null,dt={mode:null,feature:null,mouse:null},Te={mode:null,feature:null,mouse:null};function ut(Be){Te=zr(Te,Be)}function mt(){var Be,gt;if(we.container){var Pr=[],ar=[];O.forEach(function(Lr){Te[Lr]!==dt[Lr]&&(Pr.push(Lr+"-"+dt[Lr]),Te[Lr]!==null&&ar.push(Lr+"-"+Te[Lr]))}),Pr.length>0&&(Be=we.container.classList).remove.apply(Be,Pr),ar.length>0&&(gt=we.container.classList).add.apply(gt,ar),dt=zr(dt,Te)}}function Ft(Be,gt){gt===void 0&&(gt={});var Pr=document.createElement("button");return Pr.className=F+" "+gt.className,Pr.setAttribute("title",gt.title),gt.container.appendChild(Pr),Pr.addEventListener("click",function(ar){if(ar.preventDefault(),ar.stopPropagation(),ar.target===Ge)return Vt(),void gt.onDeactivate();an(Be),gt.onActivate()},!0),Pr}function Vt(){Ge&&(Ge.classList.remove(te),Ge=null)}function an(Be){Vt();var gt=$e[Be];gt&&gt&&Be!=="trash"&&(gt.classList.add(te),Ge=gt)}return{setActiveButton:an,queueMapClasses:ut,updateMapClasses:mt,clearMapClasses:function(){ut({mode:null,feature:null,mouse:null}),mt()},addButtons:function(){var Be=we.options.controls,gt=document.createElement("div");return gt.className=se+" "+k,Be&&(Be[_t.LINE]&&($e[_t.LINE]=Ft(_t.LINE,{container:gt,className:$,title:"LineString tool "+(we.options.keybindings?"(l)":""),onActivate:function(){return we.events.changeMode(Gt.DRAW_LINE_STRING)},onDeactivate:function(){return we.events.trash()}})),Be[_t.POLYGON]&&($e[_t.POLYGON]=Ft(_t.POLYGON,{container:gt,className:me,title:"Polygon tool "+(we.options.keybindings?"(p)":""),onActivate:function(){return we.events.changeMode(Gt.DRAW_POLYGON)},onDeactivate:function(){return we.events.trash()}})),Be[_t.POINT]&&($e[_t.POINT]=Ft(_t.POINT,{container:gt,className:W,title:"Marker tool "+(we.options.keybindings?"(m)":""),onActivate:function(){return we.events.changeMode(Gt.DRAW_POINT)},onDeactivate:function(){return we.events.trash()}})),Be.trash&&($e.trash=Ft("trash",{container:gt,className:xe,title:"Delete",onActivate:function(){we.events.trash()}})),Be.combine_features&&($e.combine_features=Ft("combineFeatures",{container:gt,className:Ce,title:"Combine",onActivate:function(){we.events.combineFeatures()}})),Be.uncombine_features&&($e.uncombine_features=Ft("uncombineFeatures",{container:gt,className:Oe,title:"Uncombine",onActivate:function(){we.events.uncombineFeatures()}}))),gt},removeButtons:function(){Object.keys($e).forEach(function(Be){var gt=$e[Be];gt.parentNode&&gt.parentNode.removeChild(gt),delete $e[Be]})}}}(S),S.container=ge.getContainer(),S.store=new Mr(S),T=S.ui.addButtons(),S.options.boxSelect&&(ge.boxZoom.disable(),ge.dragPan.disable(),ge.dragPan.enable()),ge.loaded()?le.connect():(ge.on("load",le.connect),B=setInterval(function(){ge.loaded()&&le.connect()},16)),S.events.start(),T},addLayers:function(){S.map.addSource(Le,{data:{type:Cr,features:[]},type:"geojson"}),S.map.addSource(be,{data:{type:Cr,features:[]},type:"geojson"}),S.options.styles.forEach(function(ge){S.map.addLayer(ge)}),S.store.setDirty(!0),S.store.render()},removeLayers:function(){S.options.styles.forEach(function(ge){S.map.getLayer(ge.id)&&S.map.removeLayer(ge.id)}),S.map.getSource(Le)&&S.map.removeSource(Le),S.map.getSource(be)&&S.map.removeSource(be)}};return S.setup=le,le}function G(S){return function(T){var B=T.featureTarget;return!!B&&!!B.properties&&B.properties.meta===S}}function K(S){return!!S.featureTarget&&!!S.featureTarget.properties&&S.featureTarget.properties.active===on&&S.featureTarget.properties.meta===Hn}function ue(S){return!!S.featureTarget&&!!S.featureTarget.properties&&S.featureTarget.properties.active===An&&S.featureTarget.properties.meta===Hn}function pe(S){return S.featureTarget===void 0}function V(S){var T=S.featureTarget;return!!T&&!!T.properties&&T.properties.meta===Vi}function ee(S){return!!S.originalEvent&&S.originalEvent.shiftKey===!0}function ye(S){return S.keyCode===27}function Ue(S){return S.keyCode===13}var qe=Ae;function Ae(S,T){this.x=S,this.y=T}function Ve(S,T){var B=T.getBoundingClientRect();return new qe(S.clientX-B.left-(T.clientLeft||0),S.clientY-B.top-(T.clientTop||0))}function pt(S,T,B,le){return{type:Mt,properties:{meta:Vi,parent:S,coord_path:B,active:le?on:An},geometry:{type:Ut,coordinates:T}}}function st(S,T,B){T===void 0&&(T={}),B===void 0&&(B=null);var le,ge=S.geometry,fe=ge.type,we=ge.coordinates,$e=S.properties&&S.properties.id,Ge=[];function dt(ut,mt){var Ft="",Vt=null;ut.forEach(function(an,Be){var gt=mt!=null?mt+"."+Be:String(Be),Pr=pt($e,an,gt,Te(gt));if(T.midpoints&&Vt){var ar=function(It,Mi,li){var lr=Mi.geometry.coordinates,yi=li.geometry.coordinates;if(lr[1]>85||lr[1]<-85||yi[1]>85||yi[1]<-85)return null;var qr={lng:(lr[0]+yi[0])/2,lat:(lr[1]+yi[1])/2};return{type:Mt,properties:{meta:er,parent:It,lng:qr.lng,lat:qr.lat,coord_path:li.properties.coord_path},geometry:{type:Ut,coordinates:[qr.lng,qr.lat]}}}($e,Vt,Pr);ar&&Ge.push(ar)}Vt=Pr;var Lr=JSON.stringify(an);Ft!==Lr&&Ge.push(Pr),Be===0&&(Ft=Lr)})}function Te(ut){return!!T.selectedPaths&&T.selectedPaths.indexOf(ut)!==-1}return fe===Ut?Ge.push(pt($e,we,B,Te(B))):fe===bt?we.forEach(function(ut,mt){dt(ut,B!==null?B+"."+mt:String(mt))}):fe===Ct?dt(we,B):fe.indexOf(Ir)===0&&(le=fe.replace(Ir,""),we.forEach(function(ut,mt){var Ft={type:Mt,properties:S.properties,geometry:{type:le,coordinates:ut}};Ge=Ge.concat(st(Ft,T,mt))})),Ge}Ae.prototype={clone:function(){return new Ae(this.x,this.y)},add:function(S){return this.clone()._add(S)},sub:function(S){return this.clone()._sub(S)},multByPoint:function(S){return this.clone()._multByPoint(S)},divByPoint:function(S){return this.clone()._divByPoint(S)},mult:function(S){return this.clone()._mult(S)},div:function(S){return this.clone()._div(S)},rotate:function(S){return this.clone()._rotate(S)},rotateAround:function(S,T){return this.clone()._rotateAround(S,T)},matMult:function(S){return this.clone()._matMult(S)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(S){return this.x===S.x&&this.y===S.y},dist:function(S){return Math.sqrt(this.distSqr(S))},distSqr:function(S){var T=S.x-this.x,B=S.y-this.y;return T*T+B*B},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(S){return Math.atan2(this.y-S.y,this.x-S.x)},angleWith:function(S){return this.angleWithSep(S.x,S.y)},angleWithSep:function(S,T){return Math.atan2(this.x*T-this.y*S,this.x*S+this.y*T)},_matMult:function(S){var T=S[0]*this.x+S[1]*this.y,B=S[2]*this.x+S[3]*this.y;return this.x=T,this.y=B,this},_add:function(S){return this.x+=S.x,this.y+=S.y,this},_sub:function(S){return this.x-=S.x,this.y-=S.y,this},_mult:function(S){return this.x*=S,this.y*=S,this},_div:function(S){return this.x/=S,this.y/=S,this},_multByPoint:function(S){return this.x*=S.x,this.y*=S.y,this},_divByPoint:function(S){return this.x/=S.x,this.y/=S.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var S=this.y;return this.y=this.x,this.x=-S,this},_rotate:function(S){var T=Math.cos(S),B=Math.sin(S),le=T*this.x-B*this.y,ge=B*this.x+T*this.y;return this.x=le,this.y=ge,this},_rotateAround:function(S,T){var B=Math.cos(S),le=Math.sin(S),ge=T.x+B*(this.x-T.x)-le*(this.y-T.y),fe=T.y+le*(this.x-T.x)+B*(this.y-T.y);return this.x=ge,this.y=fe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ae.convert=function(S){return S instanceof Ae?S:Array.isArray(S)?new Ae(S[0],S[1]):S};var ze=function(S){setTimeout(function(){S.map&&S.map.doubleClickZoom&&S._ctx&&S._ctx.store&&S._ctx.store.getInitialConfigValue&&S._ctx.store.getInitialConfigValue("doubleClickZoom")&&S.map.doubleClickZoom.enable()},0)},tt=function(S){setTimeout(function(){S.map&&S.map.doubleClickZoom&&S.map.doubleClickZoom.disable()},0)},Je=function(S){if(!S||!S.type)return null;var T=Qe[S.type];if(!T)return null;if(T==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:S}]};if(T==="feature")return{type:"FeatureCollection",features:[S]};if(T==="featurecollection")return S},Qe={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Wt(S){switch(S&&S.type||null){case"FeatureCollection":return S.features=S.features.reduce(function(T,B){return T.concat(Wt(B))},[]),S;case"Feature":return S.geometry?Wt(S.geometry).map(function(T){var B={type:"Feature",properties:JSON.parse(JSON.stringify(S.properties)),geometry:T};return S.id!==void 0&&(B.id=S.id),B}):[S];case"MultiPoint":return S.coordinates.map(function(T){return{type:"Point",coordinates:T}});case"MultiPolygon":return S.coordinates.map(function(T){return{type:"Polygon",coordinates:T}});case"MultiLineString":return S.coordinates.map(function(T){return{type:"LineString",coordinates:T}});case"GeometryCollection":return S.geometries.map(Wt).reduce(function(T,B){return T.concat(B)},[]);case"Point":case"Polygon":case"LineString":return[S]}}var rt=function(S){if(!S)return[];var T=Wt(Je(S)),B=[];return T.features.forEach(function(le){le.geometry&&(B=B.concat(function ge(fe){return Array.isArray(fe)&&fe.length&&typeof fe[0]=="number"?[fe]:fe.reduce(function(we,$e){return Array.isArray($e)&&Array.isArray($e[0])?we.concat(ge($e)):(we.push($e),we)},[])}(le.geometry.coordinates)))}),B},or=os(function(S){var T=S.exports=function(Te){return new B(Te)};function B(Te){this.value=Te}function le(Te,ut,mt){var Ft=[],Vt=[],an=!0;return function Be(gt){var Pr=mt?ge(gt):gt,ar={},Lr=!0,It={node:Pr,node_:gt,path:[].concat(Ft),parent:Vt[Vt.length-1],parents:Vt,key:Ft.slice(-1)[0],isRoot:Ft.length===0,level:Ft.length,circular:null,update:function(lr,yi){It.isRoot||(It.parent.node[It.key]=lr),It.node=lr,yi&&(Lr=!1)},delete:function(lr){delete It.parent.node[It.key],lr&&(Lr=!1)},remove:function(lr){$e(It.parent.node)?It.parent.node.splice(It.key,1):delete It.parent.node[It.key],lr&&(Lr=!1)},keys:null,before:function(lr){ar.before=lr},after:function(lr){ar.after=lr},pre:function(lr){ar.pre=lr},post:function(lr){ar.post=lr},stop:function(){an=!1},block:function(){Lr=!1}};if(!an)return It;function Mi(){if(typeof It.node=="object"&&It.node!==null){It.keys&&It.node_===It.node||(It.keys=fe(It.node)),It.isLeaf=It.keys.length==0;for(var lr=0;lr<Vt.length;lr++)if(Vt[lr].node_===gt){It.circular=Vt[lr];break}}else It.isLeaf=!0,It.keys=null;It.notLeaf=!It.isLeaf,It.notRoot=!It.isRoot}Mi();var li=ut.call(It,It.node);return li!==void 0&&It.update&&It.update(li),ar.before&&ar.before.call(It,It.node),Lr&&(typeof It.node!="object"||It.node===null||It.circular||(Vt.push(It),Mi(),Ge(It.keys,function(lr,yi){Ft.push(lr),ar.pre&&ar.pre.call(It,It.node[lr],lr);var qr=Be(It.node[lr]);mt&&dt.call(It.node,lr)&&(It.node[lr]=qr.node),qr.isLast=yi==It.keys.length-1,qr.isFirst=yi==0,ar.post&&ar.post.call(It,qr),Ft.pop()}),Vt.pop()),ar.after&&ar.after.call(It,It.node)),It}(Te).node}function ge(Te){if(typeof Te=="object"&&Te!==null){var ut;if($e(Te))ut=[];else if(we(Te)==="[object Date]")ut=new Date(Te.getTime?Te.getTime():Te);else if(function(Vt){return we(Vt)==="[object RegExp]"}(Te))ut=new RegExp(Te);else if(function(Vt){return we(Vt)==="[object Error]"}(Te))ut={message:Te.message};else if(function(Vt){return we(Vt)==="[object Boolean]"}(Te))ut=new Boolean(Te);else if(function(Vt){return we(Vt)==="[object Number]"}(Te))ut=new Number(Te);else if(function(Vt){return we(Vt)==="[object String]"}(Te))ut=new String(Te);else if(Object.create&&Object.getPrototypeOf)ut=Object.create(Object.getPrototypeOf(Te));else if(Te.constructor===Object)ut={};else{var mt=Te.constructor&&Te.constructor.prototype||Te.__proto__||{},Ft=function(){};Ft.prototype=mt,ut=new Ft}return Ge(fe(Te),function(Vt){ut[Vt]=Te[Vt]}),ut}return Te}B.prototype.get=function(Te){for(var ut=this.value,mt=0;mt<Te.length;mt++){var Ft=Te[mt];if(!ut||!dt.call(ut,Ft)){ut=void 0;break}ut=ut[Ft]}return ut},B.prototype.has=function(Te){for(var ut=this.value,mt=0;mt<Te.length;mt++){var Ft=Te[mt];if(!ut||!dt.call(ut,Ft))return!1;ut=ut[Ft]}return!0},B.prototype.set=function(Te,ut){for(var mt=this.value,Ft=0;Ft<Te.length-1;Ft++){var Vt=Te[Ft];dt.call(mt,Vt)||(mt[Vt]={}),mt=mt[Vt]}return mt[Te[Ft]]=ut,ut},B.prototype.map=function(Te){return le(this.value,Te,!0)},B.prototype.forEach=function(Te){return this.value=le(this.value,Te,!1),this.value},B.prototype.reduce=function(Te,ut){var mt=arguments.length===1,Ft=mt?this.value:ut;return this.forEach(function(Vt){this.isRoot&&mt||(Ft=Te.call(this,Ft,Vt))}),Ft},B.prototype.paths=function(){var Te=[];return this.forEach(function(ut){Te.push(this.path)}),Te},B.prototype.nodes=function(){var Te=[];return this.forEach(function(ut){Te.push(this.node)}),Te},B.prototype.clone=function(){var Te=[],ut=[];return function mt(Ft){for(var Vt=0;Vt<Te.length;Vt++)if(Te[Vt]===Ft)return ut[Vt];if(typeof Ft=="object"&&Ft!==null){var an=ge(Ft);return Te.push(Ft),ut.push(an),Ge(fe(Ft),function(Be){an[Be]=mt(Ft[Be])}),Te.pop(),ut.pop(),an}return Ft}(this.value)};var fe=Object.keys||function(Te){var ut=[];for(var mt in Te)ut.push(mt);return ut};function we(Te){return Object.prototype.toString.call(Te)}var $e=Array.isArray||function(Te){return Object.prototype.toString.call(Te)==="[object Array]"},Ge=function(Te,ut){if(Te.forEach)return Te.forEach(ut);for(var mt=0;mt<Te.length;mt++)ut(Te[mt],mt,Te)};Ge(fe(B.prototype),function(Te){T[Te]=function(ut){var mt=[].slice.call(arguments,1),Ft=new B(ut);return Ft[Te].apply(Ft,mt)}});var dt=Object.hasOwnProperty||function(Te,ut){return ut in Te}}),kr=Rt;function Rt(S){if(!(this instanceof Rt))return new Rt(S);this._bbox=S||[1/0,1/0,-1/0,-1/0],this._valid=!!S}Rt.prototype.include=function(S){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],S[0]),this._bbox[1]=Math.min(this._bbox[1],S[1]),this._bbox[2]=Math.max(this._bbox[2],S[0]),this._bbox[3]=Math.max(this._bbox[3],S[1]),this},Rt.prototype.equals=function(S){var T;return T=S instanceof Rt?S.bbox():S,this._bbox[0]==T[0]&&this._bbox[1]==T[1]&&this._bbox[2]==T[2]&&this._bbox[3]==T[3]},Rt.prototype.center=function(S){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Rt.prototype.union=function(S){var T;return this._valid=!0,T=S instanceof Rt?S.bbox():S,this._bbox[0]=Math.min(this._bbox[0],T[0]),this._bbox[1]=Math.min(this._bbox[1],T[1]),this._bbox[2]=Math.max(this._bbox[2],T[2]),this._bbox[3]=Math.max(this._bbox[3],T[3]),this},Rt.prototype.bbox=function(){return this._valid?this._bbox:null},Rt.prototype.contains=function(S){if(!S)return this._fastContains();if(!this._valid)return null;var T=S[0],B=S[1];return this._bbox[0]<=T&&this._bbox[1]<=B&&this._bbox[2]>=T&&this._bbox[3]>=B},Rt.prototype.intersect=function(S){return this._valid?(T=S instanceof Rt?S.bbox():S,!(this._bbox[0]>T[2]||this._bbox[2]<T[0]||this._bbox[3]<T[1]||this._bbox[1]>T[3])):null;var T},Rt.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var S="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",S)},Rt.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var hr={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},ur=Object.keys(hr),Nn=function(S){return vr(S).bbox()};function vr(S){for(var T=kr(),B=rt(S),le=0;le<B.length;le++)T.include(B[le]);return T}Nn.polygon=function(S){return vr(S).polygon()},Nn.bboxify=function(S){return or(S).map(function(T){T&&ur.some(function(B){return!!T[B]&&hr[B].indexOf(T.type)!==-1})&&(T.bbox=vr(T).bbox(),this.update(T))})};function tn(S,T){var B=-90,le=90,ge=-90,fe=90,we=270,$e=-270;S.forEach(function(dt){var Te=Nn(dt),ut=Te[1],mt=Te[3],Ft=Te[0],Vt=Te[2];ut>B&&(B=ut),mt<le&&(le=mt),mt>ge&&(ge=mt),ut<fe&&(fe=ut),Ft<we&&(we=Ft),Vt>$e&&($e=Vt)});var Ge=T;return B+Ge.lat>85&&(Ge.lat=85-B),ge+Ge.lat>90&&(Ge.lat=90-ge),le+Ge.lat<-85&&(Ge.lat=-85-le),fe+Ge.lat<-90&&(Ge.lat=-90-fe),we+Ge.lng<=-270&&(Ge.lng+=360*Math.ceil(Math.abs(Ge.lng)/360)),$e+Ge.lng>=270&&(Ge.lng-=360*Math.ceil(Math.abs(Ge.lng)/360)),Ge}function Sr(S,T){var B=tn(S.map(function(le){return le.toGeoJSON()}),T);S.forEach(function(le){var ge,fe=le.getCoordinates(),we=function(Ge){var dt={lng:Ge[0]+B.lng,lat:Ge[1]+B.lat};return[dt.lng,dt.lat]},$e=function(Ge){return Ge.map(function(dt){return we(dt)})};le.type===Ut?ge=we(fe):le.type===Ct||le.type===Fn?ge=fe.map(we):le.type===bt||le.type===Qt?ge=fe.map($e):le.type===Bn&&(ge=fe.map(function(Ge){return Ge.map(function(dt){return $e(dt)})})),le.incomingCoords(ge)})}var Dt={onSetup:function(S){var T=this,B={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:S.featureIds||[]};return this.setSelected(B.initiallySelectedFeatureIds.filter(function(le){return T.getFeature(le)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),B},fireUpdate:function(){this.map.fire(Xt,{action:Io,features:this.getSelected().map(function(S){return S.toGeoJSON()})})},fireActionable:function(){var S=this,T=this.getSelected(),B=T.filter(function($e){return S.isInstanceOf("MultiFeature",$e)}),le=!1;if(T.length>1){le=!0;var ge=T[0].type.replace("Multi","");T.forEach(function($e){$e.type.replace("Multi","")!==ge&&(le=!1)})}var fe=B.length>0,we=T.length>0;this.setActionableState({combineFeatures:le,uncombineFeatures:fe,trash:we})},getUniqueIds:function(S){return S.length?S.map(function(T){return T.properties.id}).filter(function(T){return T!==void 0}).reduce(function(T,B){return T.add(B),T},new cn).values():[]},stopExtendedInteractions:function(S){S.boxSelectElement&&(S.boxSelectElement.parentNode&&S.boxSelectElement.parentNode.removeChild(S.boxSelectElement),S.boxSelectElement=null),this.map.dragPan.enable(),S.boxSelecting=!1,S.canBoxSelect=!1,S.dragMoving=!1,S.canDragMove=!1},onStop:function(){ze(this)},onMouseMove:function(S){return this.stopExtendedInteractions(S),!0},onMouseOut:function(S){return!S.dragMoving||this.fireUpdate()}};Dt.onTap=Dt.onClick=function(S,T){return pe(T)?this.clickAnywhere(S,T):G(Vi)(T)?this.clickOnVertex(S,T):function(B){return!!B.featureTarget&&!!B.featureTarget.properties&&B.featureTarget.properties.meta===Hn}(T)?this.clickOnFeature(S,T):void 0},Dt.clickAnywhere=function(S){var T=this,B=this.getSelectedIds();B.length&&(this.clearSelectedFeatures(),B.forEach(function(le){return T.doRender(le)})),ze(this),this.stopExtendedInteractions(S)},Dt.clickOnVertex=function(S,T){this.changeMode(Gt.DIRECT_SELECT,{featureId:T.featureTarget.properties.parent,coordPath:T.featureTarget.properties.coord_path,startPos:T.lngLat}),this.updateUIClasses({mouse:Ie})},Dt.startOnActiveFeature=function(S,T){this.stopExtendedInteractions(S),this.map.dragPan.disable(),this.doRender(T.featureTarget.properties.id),S.canDragMove=!0,S.dragMoveLocation=T.lngLat},Dt.clickOnFeature=function(S,T){var B=this;tt(this),this.stopExtendedInteractions(S);var le=ee(T),ge=this.getSelectedIds(),fe=T.featureTarget.properties.id,we=this.isSelected(fe);if(!le&&we&&this.getFeature(fe).type!==Ut)return this.changeMode(Gt.DIRECT_SELECT,{featureId:fe});we&&le?(this.deselect(fe),this.updateUIClasses({mouse:at}),ge.length===1&&ze(this)):!we&&le?(this.select(fe),this.updateUIClasses({mouse:Ie})):we||le||(ge.forEach(function($e){return B.doRender($e)}),this.setSelected(fe),this.updateUIClasses({mouse:Ie})),this.doRender(fe)},Dt.onMouseDown=function(S,T){return K(T)?this.startOnActiveFeature(S,T):this.drawConfig.boxSelect&&function(B){return!!B.originalEvent&&!!B.originalEvent.shiftKey&&B.originalEvent.button===0}(T)?this.startBoxSelect(S,T):void 0},Dt.startBoxSelect=function(S,T){this.stopExtendedInteractions(S),this.map.dragPan.disable(),S.boxSelectStartLocation=Ve(T.originalEvent,this.map.getContainer()),S.canBoxSelect=!0},Dt.onTouchStart=function(S,T){if(K(T))return this.startOnActiveFeature(S,T)},Dt.onDrag=function(S,T){return S.canDragMove?this.dragMove(S,T):this.drawConfig.boxSelect&&S.canBoxSelect?this.whileBoxSelect(S,T):void 0},Dt.whileBoxSelect=function(S,T){S.boxSelecting=!0,this.updateUIClasses({mouse:Se}),S.boxSelectElement||(S.boxSelectElement=document.createElement("div"),S.boxSelectElement.classList.add(ne),this.map.getContainer().appendChild(S.boxSelectElement));var B=Ve(T.originalEvent,this.map.getContainer()),le=Math.min(S.boxSelectStartLocation.x,B.x),ge=Math.max(S.boxSelectStartLocation.x,B.x),fe=Math.min(S.boxSelectStartLocation.y,B.y),we=Math.max(S.boxSelectStartLocation.y,B.y),$e="translate("+le+"px, "+fe+"px)";S.boxSelectElement.style.transform=$e,S.boxSelectElement.style.WebkitTransform=$e,S.boxSelectElement.style.width=ge-le+"px",S.boxSelectElement.style.height=we-fe+"px"},Dt.dragMove=function(S,T){S.dragMoving=!0,T.originalEvent.stopPropagation();var B={lng:T.lngLat.lng-S.dragMoveLocation.lng,lat:T.lngLat.lat-S.dragMoveLocation.lat};Sr(this.getSelected(),B),S.dragMoveLocation=T.lngLat},Dt.onMouseUp=function(S,T){var B=this;if(S.dragMoving)this.fireUpdate();else if(S.boxSelecting){var le=[S.boxSelectStartLocation,Ve(T.originalEvent,this.map.getContainer())],ge=this.featuresAt(null,le,"click"),fe=this.getUniqueIds(ge).filter(function(we){return!B.isSelected(we)});fe.length&&(this.select(fe),fe.forEach(function(we){return B.doRender(we)}),this.updateUIClasses({mouse:Ie}))}this.stopExtendedInteractions(S)},Dt.toDisplayFeatures=function(S,T,B){T.properties.active=this.isSelected(T.properties.id)?on:An,B(T),this.fireActionable(),T.properties.active===on&&T.geometry.type!==Ut&&st(T).forEach(B)},Dt.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Dt.onCombineFeatures=function(){var S=this.getSelected();if(!(S.length===0||S.length<2)){for(var T=[],B=[],le=S[0].type.replace("Multi",""),ge=0;ge<S.length;ge++){var fe=S[ge];if(fe.type.replace("Multi","")!==le)return;fe.type.includes("Multi")?fe.getCoordinates().forEach(function($e){T.push($e)}):T.push(fe.getCoordinates()),B.push(fe.toGeoJSON())}if(B.length>1){var we=this.newFeature({type:Mt,properties:B[0].properties,geometry:{type:"Multi"+le,coordinates:T}});this.addFeature(we),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([we.id]),this.map.fire(si,{createdFeatures:[we.toGeoJSON()],deletedFeatures:B})}this.fireActionable()}},Dt.onUncombineFeatures=function(){var S=this,T=this.getSelected();if(T.length!==0){for(var B=[],le=[],ge=function(we){var $e=T[we];S.isInstanceOf("MultiFeature",$e)&&($e.getFeatures().forEach(function(Ge){S.addFeature(Ge),Ge.properties=$e.properties,B.push(Ge.toGeoJSON()),S.select([Ge.id])}),S.deleteFeature($e.id,{silent:!0}),le.push($e.toGeoJSON()))},fe=0;fe<T.length;fe++)ge(fe);B.length>1&&this.map.fire(cr,{createdFeatures:B,deletedFeatures:le}),this.fireActionable()}};var fr=G(Vi),ui=G(er),Hi={fireUpdate:function(){this.map.fire(Xt,{action:is,features:this.getSelected().map(function(S){return S.toGeoJSON()})})},fireActionable:function(S){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:S.selectedCoordPaths.length>0})},startDragging:function(S,T){this.map.dragPan.disable(),S.canDragMove=!0,S.dragMoveLocation=T.lngLat},stopDragging:function(S){this.map.dragPan.enable(),S.dragMoving=!1,S.canDragMove=!1,S.dragMoveLocation=null},onVertex:function(S,T){this.startDragging(S,T);var B=T.featureTarget.properties,le=S.selectedCoordPaths.indexOf(B.coord_path);ee(T)||le!==-1?ee(T)&&le===-1&&S.selectedCoordPaths.push(B.coord_path):S.selectedCoordPaths=[B.coord_path];var ge=this.pathsToCoordinates(S.featureId,S.selectedCoordPaths);this.setSelectedCoordinates(ge)},onMidpoint:function(S,T){this.startDragging(S,T);var B=T.featureTarget.properties;S.feature.addCoordinate(B.coord_path,B.lng,B.lat),this.fireUpdate(),S.selectedCoordPaths=[B.coord_path]},pathsToCoordinates:function(S,T){return T.map(function(B){return{feature_id:S,coord_path:B}})},onFeature:function(S,T){S.selectedCoordPaths.length===0?this.startDragging(S,T):this.stopDragging(S)},dragFeature:function(S,T,B){Sr(this.getSelected(),B),S.dragMoveLocation=T.lngLat},dragVertex:function(S,T,B){for(var le=S.selectedCoordPaths.map(function($e){return S.feature.getCoordinate($e)}),ge=tn(le.map(function($e){return{type:Mt,properties:{},geometry:{type:Ut,coordinates:$e}}}),B),fe=0;fe<le.length;fe++){var we=le[fe];S.feature.updateCoordinate(S.selectedCoordPaths[fe],we[0]+ge.lng,we[1]+ge.lat)}},clickNoTarget:function(){this.changeMode(Gt.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(Gt.SIMPLE_SELECT)},clickActiveFeature:function(S){S.selectedCoordPaths=[],this.clearSelectedCoordinates(),S.feature.changed()},onSetup:function(S){var T=S.featureId,B=this.getFeature(T);if(!B)throw new Error("You must provide a featureId to enter direct_select mode");if(B.type===Ut)throw new TypeError("direct_select mode doesn't handle point features");var le={featureId:T,feature:B,dragMoveLocation:S.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:S.coordPath?[S.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(T,le.selectedCoordPaths)),this.setSelected(T),tt(this),this.setActionableState({trash:!0}),le},onStop:function(){ze(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(S,T,B){S.featureId===T.properties.id?(T.properties.active=on,B(T),st(T,{map:this.map,midpoints:!0,selectedPaths:S.selectedCoordPaths}).forEach(B)):(T.properties.active=An,B(T)),this.fireActionable(S)},onTrash:function(S){S.selectedCoordPaths.sort(function(T,B){return B.localeCompare(T,"en",{numeric:!0})}).forEach(function(T){return S.feature.removeCoordinate(T)}),this.fireUpdate(),S.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(S),S.feature.isValid()===!1&&(this.deleteFeature([S.featureId]),this.changeMode(Gt.SIMPLE_SELECT,{}))},onMouseMove:function(S,T){var B=K(T),le=fr(T),ge=S.selectedCoordPaths.length===0;return B&&ge||le&&!ge?this.updateUIClasses({mouse:Ie}):this.updateUIClasses({mouse:Xe}),this.stopDragging(S),!0},onMouseOut:function(S){return S.dragMoving&&this.fireUpdate(),!0}};Hi.onTouchStart=Hi.onMouseDown=function(S,T){return fr(T)?this.onVertex(S,T):K(T)?this.onFeature(S,T):ui(T)?this.onMidpoint(S,T):void 0},Hi.onDrag=function(S,T){if(S.canDragMove===!0){S.dragMoving=!0,T.originalEvent.stopPropagation();var B={lng:T.lngLat.lng-S.dragMoveLocation.lng,lat:T.lngLat.lat-S.dragMoveLocation.lat};S.selectedCoordPaths.length>0?this.dragVertex(S,T,B):this.dragFeature(S,T,B),S.dragMoveLocation=T.lngLat}},Hi.onClick=function(S,T){return pe(T)?this.clickNoTarget(S,T):K(T)?this.clickActiveFeature(S,T):ue(T)?this.clickInactive(S,T):void this.stopDragging(S)},Hi.onTap=function(S,T){return pe(T)?this.clickNoTarget(S,T):K(T)?this.clickActiveFeature(S,T):ue(T)?this.clickInactive(S,T):void 0},Hi.onTouchEnd=Hi.onMouseUp=function(S){S.dragMoving&&this.fireUpdate(),this.stopDragging(S)};var Nr={};function Kn(S,T){return!!S.lngLat&&S.lngLat.lng===T[0]&&S.lngLat.lat===T[1]}Nr.onSetup=function(){var S=this.newFeature({type:Mt,properties:{},geometry:{type:Ut,coordinates:[]}});return this.addFeature(S),this.clearSelectedFeatures(),this.updateUIClasses({mouse:Se}),this.activateUIButton(_t.POINT),this.setActionableState({trash:!0}),{point:S}},Nr.stopDrawingAndRemove=function(S){this.deleteFeature([S.point.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT)},Nr.onTap=Nr.onClick=function(S,T){this.updateUIClasses({mouse:Ie}),S.point.updateCoordinate("",T.lngLat.lng,T.lngLat.lat),this.map.fire(Ye,{features:[S.point.toGeoJSON()]}),this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.point.id]})},Nr.onStop=function(S){this.activateUIButton(),S.point.getCoordinate().length||this.deleteFeature([S.point.id],{silent:!0})},Nr.toDisplayFeatures=function(S,T,B){var le=T.properties.id===S.point.id;if(T.properties.active=le?on:An,!le)return B(T)},Nr.onTrash=Nr.stopDrawingAndRemove,Nr.onKeyUp=function(S,T){if(ye(T)||Ue(T))return this.stopDrawingAndRemove(S,T)};var Xo={onSetup:function(){var S=this.newFeature({type:Mt,properties:{},geometry:{type:bt,coordinates:[[]]}});return this.addFeature(S),this.clearSelectedFeatures(),tt(this),this.updateUIClasses({mouse:Se}),this.activateUIButton(_t.POLYGON),this.setActionableState({trash:!0}),{polygon:S,currentVertexPosition:0}},clickAnywhere:function(S,T){if(S.currentVertexPosition>0&&Kn(T,S.polygon.coordinates[0][S.currentVertexPosition-1]))return this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.polygon.id]});this.updateUIClasses({mouse:Se}),S.polygon.updateCoordinate("0."+S.currentVertexPosition,T.lngLat.lng,T.lngLat.lat),S.currentVertexPosition++,S.polygon.updateCoordinate("0."+S.currentVertexPosition,T.lngLat.lng,T.lngLat.lat)},clickOnVertex:function(S){return this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.polygon.id]})},onMouseMove:function(S,T){S.polygon.updateCoordinate("0."+S.currentVertexPosition,T.lngLat.lng,T.lngLat.lat),V(T)&&this.updateUIClasses({mouse:at})}};Xo.onTap=Xo.onClick=function(S,T){return V(T)?this.clickOnVertex(S,T):this.clickAnywhere(S,T)},Xo.onKeyUp=function(S,T){ye(T)?(this.deleteFeature([S.polygon.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT)):Ue(T)&&this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.polygon.id]})},Xo.onStop=function(S){this.updateUIClasses({mouse:Xe}),ze(this),this.activateUIButton(),this.getFeature(S.polygon.id)!==void 0&&(S.polygon.removeCoordinate("0."+S.currentVertexPosition),S.polygon.isValid()?this.map.fire(Ye,{features:[S.polygon.toGeoJSON()]}):(this.deleteFeature([S.polygon.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT,{},{silent:!0})))},Xo.toDisplayFeatures=function(S,T,B){var le=T.properties.id===S.polygon.id;if(T.properties.active=le?on:An,!le)return B(T);if(T.geometry.coordinates.length!==0){var ge=T.geometry.coordinates[0].length;if(!(ge<3)){if(T.properties.meta=Hn,B(pt(S.polygon.id,T.geometry.coordinates[0][0],"0.0",!1)),ge>3){var fe=T.geometry.coordinates[0].length-3;B(pt(S.polygon.id,T.geometry.coordinates[0][fe],"0."+fe,!1))}if(ge<=4){var we=[[T.geometry.coordinates[0][0][0],T.geometry.coordinates[0][0][1]],[T.geometry.coordinates[0][1][0],T.geometry.coordinates[0][1][1]]];if(B({type:Mt,properties:T.properties,geometry:{coordinates:we,type:Ct}}),ge===3)return}return B(T)}}},Xo.onTrash=function(S){this.deleteFeature([S.polygon.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT)};var mo={onSetup:function(S){var T,B,le=(S=S||{}).featureId,ge="forward";if(le){if(!(T=this.getFeature(le)))throw new Error("Could not find a feature with the provided featureId");var fe=S.from;if(fe&&fe.type==="Feature"&&fe.geometry&&fe.geometry.type==="Point"&&(fe=fe.geometry),fe&&fe.type==="Point"&&fe.coordinates&&fe.coordinates.length===2&&(fe=fe.coordinates),!fe||!Array.isArray(fe))throw new Error("Please use the `from` property to indicate which point to continue the line from");var we=T.coordinates.length-1;if(T.coordinates[we][0]===fe[0]&&T.coordinates[we][1]===fe[1])B=we+1,T.addCoordinate.apply(T,[B].concat(T.coordinates[we]));else{if(T.coordinates[0][0]!==fe[0]||T.coordinates[0][1]!==fe[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");ge="backwards",B=0,T.addCoordinate.apply(T,[B].concat(T.coordinates[0]))}}else T=this.newFeature({type:Mt,properties:{},geometry:{type:Ct,coordinates:[]}}),B=0,this.addFeature(T);return this.clearSelectedFeatures(),tt(this),this.updateUIClasses({mouse:Se}),this.activateUIButton(_t.LINE),this.setActionableState({trash:!0}),{line:T,currentVertexPosition:B,direction:ge}},clickAnywhere:function(S,T){if(S.currentVertexPosition>0&&Kn(T,S.line.coordinates[S.currentVertexPosition-1])||S.direction==="backwards"&&Kn(T,S.line.coordinates[S.currentVertexPosition+1]))return this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.line.id]});this.updateUIClasses({mouse:Se}),S.line.updateCoordinate(S.currentVertexPosition,T.lngLat.lng,T.lngLat.lat),S.direction==="forward"?(S.currentVertexPosition++,S.line.updateCoordinate(S.currentVertexPosition,T.lngLat.lng,T.lngLat.lat)):S.line.addCoordinate(0,T.lngLat.lng,T.lngLat.lat)},clickOnVertex:function(S){return this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.line.id]})},onMouseMove:function(S,T){S.line.updateCoordinate(S.currentVertexPosition,T.lngLat.lng,T.lngLat.lat),V(T)&&this.updateUIClasses({mouse:at})}};mo.onTap=mo.onClick=function(S,T){if(V(T))return this.clickOnVertex(S,T);this.clickAnywhere(S,T)},mo.onKeyUp=function(S,T){Ue(T)?this.changeMode(Gt.SIMPLE_SELECT,{featureIds:[S.line.id]}):ye(T)&&(this.deleteFeature([S.line.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT))},mo.onStop=function(S){ze(this),this.activateUIButton(),this.getFeature(S.line.id)!==void 0&&(S.line.removeCoordinate(""+S.currentVertexPosition),S.line.isValid()?this.map.fire(Ye,{features:[S.line.toGeoJSON()]}):(this.deleteFeature([S.line.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT,{},{silent:!0})))},mo.onTrash=function(S){this.deleteFeature([S.line.id],{silent:!0}),this.changeMode(Gt.SIMPLE_SELECT)},mo.toDisplayFeatures=function(S,T,B){var le=T.properties.id===S.line.id;if(T.properties.active=le?on:An,!le)return B(T);T.geometry.coordinates.length<2||(T.properties.meta=Hn,B(pt(S.line.id,T.geometry.coordinates[S.direction==="forward"?T.geometry.coordinates.length-2:1],""+(S.direction==="forward"?T.geometry.coordinates.length-2:1),!1)),B(T))};var rn={simple_select:Dt,direct_select:Hi,draw_point:Nr,draw_polygon:Xo,draw_line_string:mo},Rs={defaultMode:Gt.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:rn,controls:{},userProperties:!1},ii={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},zn={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Ii(S,T){return S.map(function(B){return B.source?B:zr(B,{id:B.id+"."+T,source:T==="hot"?be:Le})})}var Vr=os(function(S,T){var B="[object Arguments]",le="[object Map]",ge="[object Object]",fe="[object Set]",we=/^\[object .+?Constructor\]$/,$e=/^(?:0|[1-9]\d*)$/,Ge={};Ge["[object Float32Array]"]=Ge["[object Float64Array]"]=Ge["[object Int8Array]"]=Ge["[object Int16Array]"]=Ge["[object Int32Array]"]=Ge["[object Uint8Array]"]=Ge["[object Uint8ClampedArray]"]=Ge["[object Uint16Array]"]=Ge["[object Uint32Array]"]=!0,Ge[B]=Ge["[object Array]"]=Ge["[object ArrayBuffer]"]=Ge["[object Boolean]"]=Ge["[object DataView]"]=Ge["[object Date]"]=Ge["[object Error]"]=Ge["[object Function]"]=Ge[le]=Ge["[object Number]"]=Ge[ge]=Ge["[object RegExp]"]=Ge[fe]=Ge["[object String]"]=Ge["[object WeakMap]"]=!1;var dt=typeof Oc=="object"&&Oc&&Oc.Object===Object&&Oc,Te=typeof self=="object"&&self&&self.Object===Object&&self,ut=dt||Te||Function("return this")(),mt=T&&!T.nodeType&&T,Ft=mt&&S&&!S.nodeType&&S,Vt=Ft&&Ft.exports===mt,an=Vt&&dt.process,Be=function(){try{return an&&an.binding&&an.binding("util")}catch{}}(),gt=Be&&Be.isTypedArray;function Pr(de,Re){for(var nt=-1,wt=de==null?0:de.length;++nt<wt;)if(Re(de[nt],nt,de))return!0;return!1}function ar(de){var Re=-1,nt=Array(de.size);return de.forEach(function(wt,Wr){nt[++Re]=[Wr,wt]}),nt}function Lr(de){var Re=-1,nt=Array(de.size);return de.forEach(function(wt){nt[++Re]=wt}),nt}var It,Mi,li,lr=Array.prototype,yi=Function.prototype,qr=Object.prototype,nn=ut["__core-js_shared__"],Ra=yi.toString,vo=qr.hasOwnProperty,Vl=(It=/[^.]+$/.exec(nn&&nn.keys&&nn.keys.IE_PROTO||""))?"Symbol(src)_1."+It:"",ql=qr.toString,Yu=RegExp("^"+Ra.call(vo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pu=Vt?ut.Buffer:void 0,ss=ut.Symbol,hu=ut.Uint8Array,Qu=qr.propertyIsEnumerable,Zl=lr.splice,Fa=ss?ss.toStringTag:void 0,us=Object.getOwnPropertySymbols,Fs=pu?pu.isBuffer:void 0,Gl=(Mi=Object.keys,li=Object,function(de){return Mi(li(de))}),Pn=Ji(ut,"DataView"),Ba=Ji(ut,"Map"),Mo=Ji(ut,"Promise"),zo=Ji(ut,"Set"),Ko=Ji(ut,"WeakMap"),go=Ji(Object,"create"),ha=Oo(Pn),Ua=Oo(Ba),Na=Oo(Mo),fa=Oo(zo),Wl=Oo(Ko),el=ss?ss.prototype:void 0,Er=el?el.valueOf:void 0;function ja(de){var Re=-1,nt=de==null?0:de.length;for(this.clear();++Re<nt;){var wt=de[Re];this.set(wt[0],wt[1])}}function Xi(de){var Re=-1,nt=de==null?0:de.length;for(this.clear();++Re<nt;){var wt=de[Re];this.set(wt[0],wt[1])}}function da(de){var Re=-1,nt=de==null?0:de.length;for(this.clear();++Re<nt;){var wt=de[Re];this.set(wt[0],wt[1])}}function Bs(de){var Re=-1,nt=de==null?0:de.length;for(this.__data__=new da;++Re<nt;)this.add(de[Re])}function Jo(de){var Re=this.__data__=new Xi(de);this.size=Re.size}function $l(de,Re){var nt=Us(de),wt=!nt&&ls(de),Wr=!nt&&!wt&&il(de),dr=!nt&&!wt&&!Wr&&js(de),sn=nt||wt||Wr||dr,$r=sn?function(gn,zi){for(var Qo=-1,jn=Array(gn);++Qo<gn;)jn[Qo]=zi(Qo);return jn}(de.length,String):[],ci=$r.length;for(var pn in de)!Re&&!vo.call(de,pn)||sn&&(pn=="length"||Wr&&(pn=="offset"||pn=="parent")||dr&&(pn=="buffer"||pn=="byteLength"||pn=="byteOffset")||Fr(pn,ci))||$r.push(pn);return $r}function Lo(de,Re){for(var nt=de.length;nt--;)if(Kl(de[nt][0],Re))return nt;return-1}function Ki(de){return de==null?de===void 0?"[object Undefined]":"[object Null]":Fa&&Fa in Object(de)?function(Re){var nt=vo.call(Re,Fa),wt=Re[Fa];try{Re[Fa]=void 0;var Wr=!0}catch{}var dr=ql.call(Re);return Wr&&(nt?Re[Fa]=wt:delete Re[Fa]),dr}(de):function(Re){return ql.call(Re)}(de)}function ma(de){return Yo(de)&&Ki(de)==B}function tl(de,Re,nt,wt,Wr){return de===Re||(de==null||Re==null||!Yo(de)&&!Yo(Re)?de!=de&&Re!=Re:function(dr,sn,$r,ci,pn,gn){var zi=Us(dr),Qo=Us(sn),jn=zi?"[object Array]":Yi(dr),_o=Qo?"[object Array]":Yi(sn),qa=(jn=jn==B?ge:jn)==ge,qs=(_o=_o==B?ge:_o)==ge,ea=jn==_o;if(ea&&il(dr)){if(!il(sn))return!1;zi=!0,qa=!1}if(ea&&!qa)return gn||(gn=new Jo),zi||js(dr)?ya(dr,sn,$r,ci,pn,gn):function(jr,_r,Dr,xo,ta,Ln,$t){switch(Dr){case"[object DataView]":if(jr.byteLength!=_r.byteLength||jr.byteOffset!=_r.byteOffset)return!1;jr=jr.buffer,_r=_r.buffer;case"[object ArrayBuffer]":return!(jr.byteLength!=_r.byteLength||!Ln(new hu(jr),new hu(_r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Kl(+jr,+_r);case"[object Error]":return jr.name==_r.name&&jr.message==_r.message;case"[object RegExp]":case"[object String]":return jr==_r+"";case le:var gr=ar;case fe:var Jn=1&xo;if(gr||(gr=Lr),jr.size!=_r.size&&!Jn)return!1;var va=$t.get(jr);if(va)return va==_r;xo|=2,$t.set(jr,_r);var bo=ya(gr(jr),gr(_r),xo,ta,Ln,$t);return $t.delete(jr),bo;case"[object Symbol]":if(Er)return Er.call(jr)==Er.call(_r)}return!1}(dr,sn,jn,$r,ci,pn,gn);if(!(1&$r)){var Za=qa&&vo.call(dr,"__wrapped__"),fu=qs&&vo.call(sn,"__wrapped__");if(Za||fu){var al=Za?dr.value():dr,Zs=fu?sn.value():sn;return gn||(gn=new Jo),pn(al,Zs,$r,ci,gn)}}return ea?(gn||(gn=new Jo),function(jr,_r,Dr,xo,ta,Ln){var $t=1&Dr,gr=nl(jr),Jn=gr.length,va=nl(_r).length;if(Jn!=va&&!$t)return!1;for(var bo=Jn;bo--;){var Qi=gr[bo];if(!($t?Qi in _r:vo.call(_r,Qi)))return!1}var Jl=Ln.get(jr);if(Jl&&Ln.get(_r))return Jl==_r;var du=!0;Ln.set(jr,_r),Ln.set(_r,jr);for(var Ga=$t;++bo<Jn;){Qi=gr[bo];var ga=jr[Qi],eo=_r[Qi];if(xo)var hn=$t?xo(eo,ga,Qi,_r,jr,Ln):xo(ga,eo,Qi,jr,_r,Ln);if(!(hn===void 0?ga===eo||ta(ga,eo,Dr,xo,Ln):hn)){du=!1;break}Ga||(Ga=Qi=="constructor")}if(du&&!Ga){var _a=jr.constructor,Gs=_r.constructor;_a==Gs||!("constructor"in jr)||!("constructor"in _r)||typeof _a=="function"&&_a instanceof _a&&typeof Gs=="function"&&Gs instanceof Gs||(du=!1)}return Ln.delete(jr),Ln.delete(_r),du}(dr,sn,$r,ci,pn,gn)):!1}(de,Re,nt,wt,tl,Wr))}function Hl(de){return!(!Va(de)||function(Re){return!!Vl&&Vl in Re}(de))&&(ol(de)?Yu:we).test(Oo(de))}function rl(de){if(nt=(Re=de)&&Re.constructor,wt=typeof nt=="function"&&nt.prototype||qr,Re!==wt)return Gl(de);var Re,nt,wt,Wr=[];for(var dr in Object(de))vo.call(de,dr)&&dr!="constructor"&&Wr.push(dr);return Wr}function ya(de,Re,nt,wt,Wr,dr){var sn=1&nt,$r=de.length,ci=Re.length;if($r!=ci&&!(sn&&ci>$r))return!1;var pn=dr.get(de);if(pn&&dr.get(Re))return pn==Re;var gn=-1,zi=!0,Qo=2&nt?new Bs:void 0;for(dr.set(de,Re),dr.set(Re,de);++gn<$r;){var jn=de[gn],_o=Re[gn];if(wt)var qa=sn?wt(_o,jn,gn,Re,de,dr):wt(jn,_o,gn,de,Re,dr);if(qa!==void 0){if(qa)continue;zi=!1;break}if(Qo){if(!Pr(Re,function(qs,ea){if(Za=ea,!Qo.has(Za)&&(jn===qs||Wr(jn,qs,nt,wt,dr)))return Qo.push(ea);var Za})){zi=!1;break}}else if(jn!==_o&&!Wr(jn,_o,nt,wt,dr)){zi=!1;break}}return dr.delete(de),dr.delete(Re),zi}function nl(de){return function(Re,nt,wt){var Wr=nt(Re);return Us(Re)?Wr:function(dr,sn){for(var $r=-1,ci=sn.length,pn=dr.length;++$r<ci;)dr[pn+$r]=sn[$r];return dr}(Wr,wt(Re))}(de,Vs,Xl)}function Do(de,Re){var nt,wt,Wr=de.__data__;return((wt=typeof(nt=Re))=="string"||wt=="number"||wt=="symbol"||wt=="boolean"?nt!=="__proto__":nt===null)?Wr[typeof Re=="string"?"string":"hash"]:Wr.map}function Ji(de,Re){var nt=function(wt,Wr){return wt==null?void 0:wt[Wr]}(de,Re);return Hl(nt)?nt:void 0}ja.prototype.clear=function(){this.__data__=go?go(null):{},this.size=0},ja.prototype.delete=function(de){var Re=this.has(de)&&delete this.__data__[de];return this.size-=Re?1:0,Re},ja.prototype.get=function(de){var Re=this.__data__;if(go){var nt=Re[de];return nt==="__lodash_hash_undefined__"?void 0:nt}return vo.call(Re,de)?Re[de]:void 0},ja.prototype.has=function(de){var Re=this.__data__;return go?Re[de]!==void 0:vo.call(Re,de)},ja.prototype.set=function(de,Re){var nt=this.__data__;return this.size+=this.has(de)?0:1,nt[de]=go&&Re===void 0?"__lodash_hash_undefined__":Re,this},Xi.prototype.clear=function(){this.__data__=[],this.size=0},Xi.prototype.delete=function(de){var Re=this.__data__,nt=Lo(Re,de);return!(nt<0)&&(nt==Re.length-1?Re.pop():Zl.call(Re,nt,1),--this.size,!0)},Xi.prototype.get=function(de){var Re=this.__data__,nt=Lo(Re,de);return nt<0?void 0:Re[nt][1]},Xi.prototype.has=function(de){return Lo(this.__data__,de)>-1},Xi.prototype.set=function(de,Re){var nt=this.__data__,wt=Lo(nt,de);return wt<0?(++this.size,nt.push([de,Re])):nt[wt][1]=Re,this},da.prototype.clear=function(){this.size=0,this.__data__={hash:new ja,map:new(Ba||Xi),string:new ja}},da.prototype.delete=function(de){var Re=Do(this,de).delete(de);return this.size-=Re?1:0,Re},da.prototype.get=function(de){return Do(this,de).get(de)},da.prototype.has=function(de){return Do(this,de).has(de)},da.prototype.set=function(de,Re){var nt=Do(this,de),wt=nt.size;return nt.set(de,Re),this.size+=nt.size==wt?0:1,this},Bs.prototype.add=Bs.prototype.push=function(de){return this.__data__.set(de,"__lodash_hash_undefined__"),this},Bs.prototype.has=function(de){return this.__data__.has(de)},Jo.prototype.clear=function(){this.__data__=new Xi,this.size=0},Jo.prototype.delete=function(de){var Re=this.__data__,nt=Re.delete(de);return this.size=Re.size,nt},Jo.prototype.get=function(de){return this.__data__.get(de)},Jo.prototype.has=function(de){return this.__data__.has(de)},Jo.prototype.set=function(de,Re){var nt=this.__data__;if(nt instanceof Xi){var wt=nt.__data__;if(!Ba||wt.length<199)return wt.push([de,Re]),this.size=++nt.size,this;nt=this.__data__=new da(wt)}return nt.set(de,Re),this.size=nt.size,this};var Xl=us?function(de){return de==null?[]:(de=Object(de),function(Re,nt){for(var wt=-1,Wr=Re==null?0:Re.length,dr=0,sn=[];++wt<Wr;){var $r=Re[wt];nt($r,wt,Re)&&(sn[dr++]=$r)}return sn}(us(de),function(Re){return Qu.call(de,Re)}))}:function(){return[]},Yi=Ki;function Fr(de,Re){return!!(Re=Re==null?9007199254740991:Re)&&(typeof de=="number"||$e.test(de))&&de>-1&&de%1==0&&de<Re}function Oo(de){if(de!=null){try{return Ra.call(de)}catch{}try{return de+""}catch{}}return""}function Kl(de,Re){return de===Re||de!=de&&Re!=Re}(Pn&&Yi(new Pn(new ArrayBuffer(1)))!="[object DataView]"||Ba&&Yi(new Ba)!=le||Mo&&Yi(Mo.resolve())!="[object Promise]"||zo&&Yi(new zo)!=fe||Ko&&Yi(new Ko)!="[object WeakMap]")&&(Yi=function(de){var Re=Ki(de),nt=Re==ge?de.constructor:void 0,wt=nt?Oo(nt):"";if(wt)switch(wt){case ha:return"[object DataView]";case Ua:return le;case Na:return"[object Promise]";case fa:return fe;case Wl:return"[object WeakMap]"}return Re});var ls=ma(function(){return arguments}())?ma:function(de){return Yo(de)&&vo.call(de,"callee")&&!Qu.call(de,"callee")},Us=Array.isArray,il=Fs||function(){return!1};function ol(de){if(!Va(de))return!1;var Re=Ki(de);return Re=="[object Function]"||Re=="[object GeneratorFunction]"||Re=="[object AsyncFunction]"||Re=="[object Proxy]"}function Ns(de){return typeof de=="number"&&de>-1&&de%1==0&&de<=9007199254740991}function Va(de){var Re=typeof de;return de!=null&&(Re=="object"||Re=="function")}function Yo(de){return de!=null&&typeof de=="object"}var js=gt?function(de){return function(Re){return de(Re)}}(gt):function(de){return Yo(de)&&Ns(de.length)&&!!Ge[Ki(de)]};function Vs(de){return(Re=de)!=null&&Ns(Re.length)&&!ol(Re)?$l(de):rl(de);var Re}S.exports=function(de,Re){return tl(de,Re)}}),yo={Polygon:Xn,LineString:Wi,Point:Gi,MultiPolygon:Un,MultiLineString:Un,MultiPoint:Un};function ki(S,T){return T.modes=Gt,T.getFeatureIdsAt=function(B){return ko.click({point:B},null,S).map(function(le){return le.properties.id})},T.getSelectedIds=function(){return S.store.getSelectedIds()},T.getSelected=function(){return{type:Cr,features:S.store.getSelectedIds().map(function(B){return S.store.get(B)}).map(function(B){return B.toGeoJSON()})}},T.getSelectedPoints=function(){return{type:Cr,features:S.store.getSelectedCoordinates().map(function(B){return{type:Mt,properties:{},geometry:{type:Ut,coordinates:B.coordinates}}})}},T.set=function(B){if(B.type===void 0||B.type!==Cr||!Array.isArray(B.features))throw new Error("Invalid FeatureCollection");var le=S.store.createRenderBatch(),ge=S.store.getAllIds().slice(),fe=T.add(B),we=new cn(fe);return(ge=ge.filter(function($e){return!we.has($e)})).length&&T.delete(ge),le(),fe},T.add=function(B){var le=JSON.parse(JSON.stringify(Je(B))).features.map(function(ge){if(ge.id=ge.id||Da(),ge.geometry===null)throw new Error("Invalid geometry: null");if(S.store.get(ge.id)===void 0||S.store.get(ge.id).type!==ge.geometry.type){var fe=yo[ge.geometry.type];if(fe===void 0)throw new Error("Invalid geometry type: "+ge.geometry.type+".");var we=new fe(S,ge);S.store.add(we)}else{var $e=S.store.get(ge.id);$e.properties=ge.properties,Vr($e.getCoordinates(),ge.geometry.coordinates)||$e.incomingCoords(ge.geometry.coordinates)}return ge.id});return S.store.render(),le},T.get=function(B){var le=S.store.get(B);if(le)return le.toGeoJSON()},T.getAll=function(){return{type:Cr,features:S.store.getAll().map(function(B){return B.toGeoJSON()})}},T.delete=function(B){return S.store.delete(B,{silent:!0}),T.getMode()!==Gt.DIRECT_SELECT||S.store.getSelectedIds().length?S.store.render():S.events.changeMode(Gt.SIMPLE_SELECT,void 0,{silent:!0}),T},T.deleteAll=function(){return S.store.delete(S.store.getAllIds(),{silent:!0}),T.getMode()===Gt.DIRECT_SELECT?S.events.changeMode(Gt.SIMPLE_SELECT,void 0,{silent:!0}):S.store.render(),T},T.changeMode=function(B,le){return le===void 0&&(le={}),B===Gt.SIMPLE_SELECT&&T.getMode()===Gt.SIMPLE_SELECT?(ge=le.featureIds||[],fe=S.store.getSelectedIds(),ge.length===fe.length&&JSON.stringify(ge.map(function(we){return we}).sort())===JSON.stringify(fe.map(function(we){return we}).sort())||(S.store.setSelected(le.featureIds,{silent:!0}),S.store.render()),T):(B===Gt.DIRECT_SELECT&&T.getMode()===Gt.DIRECT_SELECT&&le.featureId===S.store.getSelectedIds()[0]||S.events.changeMode(B,le,{silent:!0}),T);var ge,fe},T.getMode=function(){return S.events.getMode()},T.trash=function(){return S.events.trash({silent:!0}),T},T.combineFeatures=function(){return S.events.combineFeatures({silent:!0}),T},T.uncombineFeatures=function(){return S.events.uncombineFeatures({silent:!0}),T},T.setFeatureProperty=function(B,le,ge){return S.store.setFeatureProperty(B,le,ge),T},T}var jl=function(S,T){var B={options:S=function(ge){ge===void 0&&(ge={});var fe=zr(ge);return ge.controls||(fe.controls={}),ge.displayControlsDefault===!1?fe.controls=zr(zn,ge.controls):fe.controls=zr(ii,ge.controls),(fe=zr(Rs,fe)).styles=Ii(fe.styles,"cold").concat(Ii(fe.styles,"hot")),fe}(S)};T=ki(B,T),B.api=T;var le=U(B);return T.onAdd=le.onAdd,T.onRemove=le.onRemove,T.types=_t,T.options=S,T};function Ai(S){jl(S,this)}return Ai.modes=rn,Ai})})(R0);var FC=R0.exports,F0={},wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.ActionCreators=wl.ActionTypes=void 0;var Sl={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};wl.ActionTypes=Sl;var kS={undo:function(){return{type:Sl.UNDO}},redo:function(){return{type:Sl.REDO}},jumpToFuture:function(n){return{type:Sl.JUMP_TO_FUTURE,index:n}},jumpToPast:function(n){return{type:Sl.JUMP_TO_PAST,index:n}},jump:function(n){return{type:Sl.JUMP,index:n}},clearHistory:function(){return{type:Sl.CLEAR_HISTORY}}};wl.ActionCreators=kS;var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.parseActions=Hf;Ss.isHistory=AS;Ss.includeAction=MS;Ss.excludeAction=zS;Ss.combineFilters=LS;Ss.groupByActionTypes=DS;Ss.newHistory=OS;function Hf(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Array.isArray(t)?t:typeof t=="string"?[t]:n}function AS(t){return typeof t.present!="undefined"&&typeof t.future!="undefined"&&typeof t.past!="undefined"&&Array.isArray(t.future)&&Array.isArray(t.past)}function MS(t){var n=Hf(t);return function(s){return n.indexOf(s.type)>=0}}function zS(t){var n=Hf(t);return function(s){return n.indexOf(s.type)<0}}function LS(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return n.reduce(function(h,y){return function(x,l,C){return h(x,l,C)&&y(x,l,C)}},function(){return!0})}function DS(t){var n=Hf(t);return function(s){return n.indexOf(s.type)>=0?s.type:null}}function OS(t,n,s){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{past:t,present:n,future:s,group:h,_latestUnfiltered:n,index:t.length,limit:t.length+s.length+1}}var B0={},Uc={};Object.defineProperty(Uc,"__esModule",{value:!0});Uc.set=ZS;Uc.start=jS;Uc.end=VS;Uc.log=qS;function Es(t){return BS(t)||FS(t)||RS()}function RS(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function FS(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function BS(t){if(Array.isArray(t)){for(var n=0,s=new Array(t.length);n<t.length;n++)s[n]=t[n];return s}}var Xf,Ta,fy={prevState:"#9E9E9E",action:"#03A9F4",nextState:"#4CAF50"};function US(){Ta={header:[],prev:[],action:[],next:[],msgs:[]}}function NS(){var t=Ta,n=t.header,s=t.prev,h=t.next,y=t.action,x=t.msgs;if(console.group){var l,C,k,F,$;(l=console).groupCollapsed.apply(l,Es(n)),(C=console).log.apply(C,Es(s)),(k=console).log.apply(k,Es(y)),(F=console).log.apply(F,Es(h)),($=console).log.apply($,Es(x)),console.groupEnd()}else{var me,W,xe,Ce,Oe;(me=console).log.apply(me,Es(n)),(W=console).log.apply(W,Es(s)),(xe=console).log.apply(xe,Es(y)),(Ce=console).log.apply(Ce,Es(h)),(Oe=console).log.apply(Oe,Es(x))}}function dy(t,n,s){return["%c".concat(t),"color: ".concat(n,"; font-weight: bold"),s]}function jS(t,n){US(),Xf&&(console.group?(Ta.header=["%credux-undo","font-style: italic","action",t.type],Ta.action=dy("action",fy.action,t),Ta.prev=dy("prev history",fy.prevState,n)):(Ta.header=["redux-undo action",t.type],Ta.action=["action",t],Ta.prev=["prev history",n]))}function VS(t){Xf&&(console.group?Ta.next=dy("next history",fy.nextState,t):Ta.next=["next history",t],NS())}function qS(){if(Xf){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];Ta.msgs=Ta.msgs.concat([].concat(n,[`
`]))}}function ZS(t){Xf=t}(function(t){function n(Se){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(je){return typeof je}:n=function(je){return je&&typeof Symbol=="function"&&je.constructor===Symbol&&je!==Symbol.prototype?"symbol":typeof je},n(Se)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=Le;var s=l(Uc),h=wl,y=Ss;function x(){if(typeof WeakMap!="function")return null;var Se=new WeakMap;return x=function(){return Se},Se}function l(Se){if(Se&&Se.__esModule)return Se;if(Se===null||n(Se)!=="object"&&typeof Se!="function")return{default:Se};var Ie=x();if(Ie&&Ie.has(Se))return Ie.get(Se);var je={},at=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Xe in Se)if(Object.prototype.hasOwnProperty.call(Se,Xe)){var _t=at?Object.getOwnPropertyDescriptor(Se,Xe):null;_t&&(_t.get||_t.set)?Object.defineProperty(je,Xe,_t):je[Xe]=Se[Xe]}return je.default=Se,Ie&&Ie.set(Se,je),je}function C(Se,Ie){var je=Object.keys(Se);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(Se);Ie&&(at=at.filter(function(Xe){return Object.getOwnPropertyDescriptor(Se,Xe).enumerable})),je.push.apply(je,at)}return je}function k(Se){for(var Ie=1;Ie<arguments.length;Ie++){var je=arguments[Ie]!=null?arguments[Ie]:{};Ie%2?C(Object(je),!0).forEach(function(at){F(Se,at,je[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(je)):C(Object(je)).forEach(function(at){Object.defineProperty(Se,at,Object.getOwnPropertyDescriptor(je,at))})}return Se}function F(Se,Ie,je){return Ie in Se?Object.defineProperty(Se,Ie,{value:je,enumerable:!0,configurable:!0,writable:!0}):Se[Ie]=je,Se}function $(Se){return xe(Se)||W(Se)||me()}function me(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function W(Se){if(Symbol.iterator in Object(Se)||Object.prototype.toString.call(Se)==="[object Arguments]")return Array.from(Se)}function xe(Se){if(Array.isArray(Se)){for(var Ie=0,je=new Array(Se.length);Ie<Se.length;Ie++)je[Ie]=Se[Ie];return je}}function Ce(Se,Ie){var je=(0,y.newHistory)([],Se,[]);return Ie&&(je._latestUnfiltered=null),je}function Oe(Se,Ie,je,at){var Xe=Se.past.length+1;s.log("inserting",Ie),s.log("new free: ",je-Xe);var _t=Se.past,Mt=Se._latestUnfiltered,bt=je&&je<=Xe,Ct=_t.slice(bt?1:0),Ut=Mt!=null?[].concat($(Ct),[Mt]):Ct;return(0,y.newHistory)(Ut,Ie,[],at)}function se(Se,Ie){if(Ie<0||Ie>=Se.future.length)return Se;var je=Se.past,at=Se.future,Xe=Se._latestUnfiltered,_t=[].concat($(je),[Xe],$(at.slice(0,Ie))),Mt=at[Ie],bt=at.slice(Ie+1);return(0,y.newHistory)(_t,Mt,bt)}function te(Se,Ie){if(Ie<0||Ie>=Se.past.length)return Se;var je=Se.past,at=Se.future,Xe=Se._latestUnfiltered,_t=je.slice(0,Ie),Mt=[].concat($(je.slice(Ie+1)),[Xe],$(at)),bt=je[Ie];return(0,y.newHistory)(_t,bt,Mt)}function ne(Se,Ie){return Ie>0?se(Se,Ie-1):Ie<0?te(Se,Se.past.length+Ie):Se}function be(Se,Ie){return Ie.indexOf(Se)>-1?Se:!Se}function Le(Se){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.set(Ie.debug);var je=k({limit:void 0,filter:function(){return!0},groupBy:function(){return null},undoType:h.ActionTypes.UNDO,redoType:h.ActionTypes.REDO,jumpToPastType:h.ActionTypes.JUMP_TO_PAST,jumpToFutureType:h.ActionTypes.JUMP_TO_FUTURE,jumpType:h.ActionTypes.JUMP,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1},Ie,{initTypes:(0,y.parseActions)(Ie.initTypes,["@@redux-undo/INIT"]),clearHistoryType:(0,y.parseActions)(Ie.clearHistoryType,[h.ActionTypes.CLEAR_HISTORY])}),at=je.neverSkipReducer?function(_t,Mt){for(var bt=arguments.length,Ct=new Array(bt>2?bt-2:0),Ut=2;Ut<bt;Ut++)Ct[Ut-2]=arguments[Ut];return k({},_t,{present:Se.apply(void 0,[_t.present,Mt].concat(Ct))})}:function(_t){return _t},Xe;return function(){var _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xe,Mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.start(Mt,_t);for(var bt=_t,Ct=arguments.length,Ut=new Array(Ct>2?Ct-2:0),Cr=2;Cr<Ct;Cr++)Ut[Cr-2]=arguments[Cr];if(!Xe)if(s.log("history is uninitialized"),_t===void 0){var Ir={type:"@@redux-undo/CREATE_HISTORY"},Fn=Se.apply(void 0,[_t,Ir].concat(Ut));return bt=Ce(Fn,je.ignoreInitialState),s.log("do not set initialState on probe actions"),s.end(bt),bt}else(0,y.isHistory)(_t)?(bt=Xe=je.ignoreInitialState?_t:(0,y.newHistory)(_t.past,_t.present,_t.future),s.log("initialHistory initialized: initialState is a history",Xe)):(bt=Xe=Ce(_t,je.ignoreInitialState),s.log("initialHistory initialized: initialState is not a history",Xe));var Qt;switch(Mt.type){case void 0:return bt;case je.undoType:return Qt=ne(bt,-1),s.log("perform undo"),s.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));case je.redoType:return Qt=ne(bt,1),s.log("perform redo"),s.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));case je.jumpToPastType:return Qt=te(bt,Mt.index),s.log("perform jumpToPast to ".concat(Mt.index)),s.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));case je.jumpToFutureType:return Qt=se(bt,Mt.index),s.log("perform jumpToFuture to ".concat(Mt.index)),s.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));case je.jumpType:return Qt=ne(bt,Mt.index),s.log("perform jump to ".concat(Mt.index)),s.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));case be(Mt.type,je.clearHistoryType):return Qt=Ce(bt.present,je.ignoreInitialState),s.log("perform clearHistory"),s.end(Qt),at.apply(void 0,[Qt,Mt].concat(Ut));default:if(Qt=Se.apply(void 0,[bt.present,Mt].concat(Ut)),je.initTypes.some(function(Xt){return Xt===Mt.type}))return s.log("reset history due to init action"),s.end(Xe),Xe;if(bt._latestUnfiltered===Qt)return bt;var Bn=typeof je.filter=="function"&&!je.filter(Mt,Qt,bt);if(Bn){var Gt=(0,y.newHistory)(bt.past,Qt,bt.future,bt.group);return je.syncFilter||(Gt._latestUnfiltered=bt._latestUnfiltered),s.log("filter ignored action, not storing it in past"),s.end(Gt),Gt}var Ye=je.groupBy(Mt,Qt,bt);if(Ye!=null&&Ye===bt.group){var zt=(0,y.newHistory)(bt.past,Qt,bt.future,bt.group);return s.log("groupBy grouped the action with the previous action"),s.end(zt),zt}return bt=Oe(bt,Qt,je.limit,Ye),s.log("inserted new state into history"),s.end(bt),bt}}}})(B0);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ActionTypes",{enumerable:!0,get:function(){return n.ActionTypes}}),Object.defineProperty(t,"ActionCreators",{enumerable:!0,get:function(){return n.ActionCreators}}),Object.defineProperty(t,"parseActions",{enumerable:!0,get:function(){return s.parseActions}}),Object.defineProperty(t,"isHistory",{enumerable:!0,get:function(){return s.isHistory}}),Object.defineProperty(t,"includeAction",{enumerable:!0,get:function(){return s.includeAction}}),Object.defineProperty(t,"excludeAction",{enumerable:!0,get:function(){return s.excludeAction}}),Object.defineProperty(t,"combineFilters",{enumerable:!0,get:function(){return s.combineFilters}}),Object.defineProperty(t,"groupByActionTypes",{enumerable:!0,get:function(){return s.groupByActionTypes}}),Object.defineProperty(t,"newHistory",{enumerable:!0,get:function(){return s.newHistory}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return h.default}});var n=wl,s=Ss,h=y(B0);function y(x){return x&&x.__esModule?x:{default:x}}})(F0);var BC=dS(F0),GS="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",WS=GS,$S=WS;function U0(){}function N0(){}N0.resetWarningCache=U0;var HS=function(){function t(h,y,x,l,C,k){if(k!==$S){var F=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw F.name="Invariant Violation",F}}t.isRequired=t;function n(){return t}var s={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:n,element:t,elementType:t,instanceOf:n,node:t,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:N0,resetWarningCache:U0};return s.PropTypes=s,s};HS();var Tu=Bc.createContext(null);function XS(t){t()}var j0=XS,KS=function(n){return j0=n},JS=function(){return j0};function YS(){var t=JS(),n=null,s=null;return{clear:function(){n=null,s=null},notify:function(){t(function(){for(var y=n;y;)y.callback(),y=y.next})},get:function(){for(var y=[],x=n;x;)y.push(x),x=x.next;return y},subscribe:function(y){var x=!0,l=s={callback:y,next:null,prev:s};return l.prev?l.prev.next=l:n=l,function(){!x||n===null||(x=!1,l.next?l.next.prev=l.prev:s=l.prev,l.prev?l.prev.next=l.next:n=l.next)}}}}var V0={notify:function(){},get:function(){return[]}};function q0(t,n){var s,h=V0;function y(me){return k(),h.subscribe(me)}function x(){h.notify()}function l(){$.onStateChange&&$.onStateChange()}function C(){return Boolean(s)}function k(){s||(s=n?n.addNestedSub(l):t.subscribe(l),h=YS())}function F(){s&&(s(),s=void 0,h.clear(),h=V0)}var $={addNestedSub:y,notifyNestedSubs:x,handleChangeWrapper:l,isSubscribed:C,trySubscribe:k,tryUnsubscribe:F,getListeners:function(){return h}};return $}var my=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?Si.exports.useLayoutEffect:Si.exports.useEffect;function UC(t){var n=t.store,s=t.context,h=t.children,y=Si.exports.useMemo(function(){var C=q0(n);return{store:n,subscription:C}},[n]),x=Si.exports.useMemo(function(){return n.getState()},[n]);my(function(){var C=y.subscription;return C.onStateChange=C.notifyNestedSubs,C.trySubscribe(),x!==n.getState()&&C.notifyNestedSubs(),function(){C.tryUnsubscribe(),C.onStateChange=null}},[y,x]);var l=s||Tu;return IS(l.Provider,{value:y,children:h})}function Yr(){return Yr=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(t[h]=s[h])}return t},Yr.apply(this,arguments)}var Z0={exports:{}},Qr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ei=typeof Symbol=="function"&&Symbol.for,yy=Ei?Symbol.for("react.element"):60103,vy=Ei?Symbol.for("react.portal"):60106,Kf=Ei?Symbol.for("react.fragment"):60107,Jf=Ei?Symbol.for("react.strict_mode"):60108,Yf=Ei?Symbol.for("react.profiler"):60114,Qf=Ei?Symbol.for("react.provider"):60109,ed=Ei?Symbol.for("react.context"):60110,gy=Ei?Symbol.for("react.async_mode"):60111,td=Ei?Symbol.for("react.concurrent_mode"):60111,rd=Ei?Symbol.for("react.forward_ref"):60112,nd=Ei?Symbol.for("react.suspense"):60113,QS=Ei?Symbol.for("react.suspense_list"):60120,id=Ei?Symbol.for("react.memo"):60115,od=Ei?Symbol.for("react.lazy"):60116,eE=Ei?Symbol.for("react.block"):60121,tE=Ei?Symbol.for("react.fundamental"):60117,rE=Ei?Symbol.for("react.responder"):60118,nE=Ei?Symbol.for("react.scope"):60119;function sa(t){if(typeof t=="object"&&t!==null){var n=t.$$typeof;switch(n){case yy:switch(t=t.type,t){case gy:case td:case Kf:case Yf:case Jf:case nd:return t;default:switch(t=t&&t.$$typeof,t){case ed:case rd:case od:case id:case Qf:return t;default:return n}}case vy:return n}}}function G0(t){return sa(t)===td}Qr.AsyncMode=gy;Qr.ConcurrentMode=td;Qr.ContextConsumer=ed;Qr.ContextProvider=Qf;Qr.Element=yy;Qr.ForwardRef=rd;Qr.Fragment=Kf;Qr.Lazy=od;Qr.Memo=id;Qr.Portal=vy;Qr.Profiler=Yf;Qr.StrictMode=Jf;Qr.Suspense=nd;Qr.isAsyncMode=function(t){return G0(t)||sa(t)===gy};Qr.isConcurrentMode=G0;Qr.isContextConsumer=function(t){return sa(t)===ed};Qr.isContextProvider=function(t){return sa(t)===Qf};Qr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===yy};Qr.isForwardRef=function(t){return sa(t)===rd};Qr.isFragment=function(t){return sa(t)===Kf};Qr.isLazy=function(t){return sa(t)===od};Qr.isMemo=function(t){return sa(t)===id};Qr.isPortal=function(t){return sa(t)===vy};Qr.isProfiler=function(t){return sa(t)===Yf};Qr.isStrictMode=function(t){return sa(t)===Jf};Qr.isSuspense=function(t){return sa(t)===nd};Qr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Kf||t===td||t===Yf||t===Jf||t===nd||t===QS||typeof t=="object"&&t!==null&&(t.$$typeof===od||t.$$typeof===id||t.$$typeof===Qf||t.$$typeof===ed||t.$$typeof===rd||t.$$typeof===tE||t.$$typeof===rE||t.$$typeof===nE||t.$$typeof===eE)};Qr.typeOf=sa;Z0.exports=Qr;var W0=Z0.exports,iE={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},oE={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$0={};$0[W0.ForwardRef]=iE;$0[W0.Memo]=oE;var yn={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad=60103,sd=60106,rh=60107,nh=60108,ih=60114,oh=60109,ah=60110,sh=60112,uh=60113,_y=60120,lh=60115,ch=60116,H0=60121,X0=60122,K0=60117,J0=60129,Y0=60131;if(typeof Symbol=="function"&&Symbol.for){var Fi=Symbol.for;ad=Fi("react.element"),sd=Fi("react.portal"),rh=Fi("react.fragment"),nh=Fi("react.strict_mode"),ih=Fi("react.profiler"),oh=Fi("react.provider"),ah=Fi("react.context"),sh=Fi("react.forward_ref"),uh=Fi("react.suspense"),_y=Fi("react.suspense_list"),lh=Fi("react.memo"),ch=Fi("react.lazy"),H0=Fi("react.block"),X0=Fi("react.server.block"),K0=Fi("react.fundamental"),J0=Fi("react.debug_trace_mode"),Y0=Fi("react.legacy_hidden")}function Qa(t){if(typeof t=="object"&&t!==null){var n=t.$$typeof;switch(n){case ad:switch(t=t.type,t){case rh:case ih:case nh:case uh:case _y:return t;default:switch(t=t&&t.$$typeof,t){case ah:case sh:case ch:case lh:case oh:return t;default:return n}}case sd:return n}}}var aE=oh,sE=ad,uE=sh,lE=rh,cE=ch,pE=lh,hE=sd,fE=ih,dE=nh,mE=uh;yn.ContextConsumer=ah;yn.ContextProvider=aE;yn.Element=sE;yn.ForwardRef=uE;yn.Fragment=lE;yn.Lazy=cE;yn.Memo=pE;yn.Portal=hE;yn.Profiler=fE;yn.StrictMode=dE;yn.Suspense=mE;yn.isAsyncMode=function(){return!1};yn.isConcurrentMode=function(){return!1};yn.isContextConsumer=function(t){return Qa(t)===ah};yn.isContextProvider=function(t){return Qa(t)===oh};yn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ad};yn.isForwardRef=function(t){return Qa(t)===sh};yn.isFragment=function(t){return Qa(t)===rh};yn.isLazy=function(t){return Qa(t)===ch};yn.isMemo=function(t){return Qa(t)===lh};yn.isPortal=function(t){return Qa(t)===sd};yn.isProfiler=function(t){return Qa(t)===ih};yn.isStrictMode=function(t){return Qa(t)===nh};yn.isSuspense=function(t){return Qa(t)===uh};yn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===rh||t===ih||t===J0||t===nh||t===uh||t===_y||t===Y0||typeof t=="object"&&t!==null&&(t.$$typeof===ch||t.$$typeof===lh||t.$$typeof===oh||t.$$typeof===ah||t.$$typeof===sh||t.$$typeof===K0||t.$$typeof===H0||t[0]===X0)};yn.typeOf=Qa;function Q0(){var t=Si.exports.useContext(Tu);return t}function e1(t){t===void 0&&(t=Tu);var n=t===Tu?Q0:function(){return Si.exports.useContext(t)};return function(){var h=n(),y=h.store;return y}}var yE=e1();function vE(t){t===void 0&&(t=Tu);var n=t===Tu?yE:e1(t);return function(){var h=n();return h.dispatch}}var NC=vE(),gE=function(n,s){return n===s};function _E(t,n,s,h){var y=Si.exports.useReducer(function(Ce){return Ce+1},0),x=y[1],l=Si.exports.useMemo(function(){return q0(s,h)},[s,h]),C=Si.exports.useRef(),k=Si.exports.useRef(),F=Si.exports.useRef(),$=Si.exports.useRef(),me=s.getState(),W;try{if(t!==k.current||me!==F.current||C.current){var xe=t(me);$.current===void 0||!n(xe,$.current)?W=xe:W=$.current}else W=$.current}catch(Ce){throw C.current&&(Ce.message+=`
The error may be correlated with this previous error:
`+C.current.stack+`

`),Ce}return my(function(){k.current=t,F.current=me,$.current=W,C.current=void 0}),my(function(){function Ce(){try{var Oe=s.getState();if(Oe===F.current)return;var se=k.current(Oe);if(n(se,$.current))return;$.current=se,F.current=Oe}catch(te){C.current=te}x()}return l.onStateChange=Ce,l.trySubscribe(),Ce(),function(){return l.tryUnsubscribe()}},[s,l]),W}function xE(t){t===void 0&&(t=Tu);var n=t===Tu?Q0:function(){return Si.exports.useContext(t)};return function(h,y){y===void 0&&(y=gE);var x=n(),l=x.store,C=x.subscription,k=_E(h,y,l,C);return Si.exports.useDebugValue(k),k}}var jC=xE(),xy={exports:{}},Ca={},t1={exports:{}},r1={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var n,s,h,y;if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;t.unstable_now=function(){return x.now()}}else{var l=Date,C=l.now();t.unstable_now=function(){return l.now()-C}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var k=null,F=null,$=function(){if(k!==null)try{var Ye=t.unstable_now();k(!0,Ye),k=null}catch(zt){throw setTimeout($,0),zt}};n=function(Ye){k!==null?setTimeout(n,0,Ye):(k=Ye,setTimeout($,0))},s=function(Ye,zt){F=setTimeout(Ye,zt)},h=function(){clearTimeout(F)},t.unstable_shouldYield=function(){return!1},y=t.unstable_forceFrameRate=function(){}}else{var me=window.setTimeout,W=window.clearTimeout;if(typeof console!="undefined"){var xe=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof xe!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var Ce=!1,Oe=null,se=-1,te=5,ne=0;t.unstable_shouldYield=function(){return t.unstable_now()>=ne},y=function(){},t.unstable_forceFrameRate=function(Ye){0>Ye||125<Ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<Ye?Math.floor(1e3/Ye):5};var be=new MessageChannel,Le=be.port2;be.port1.onmessage=function(){if(Oe!==null){var Ye=t.unstable_now();ne=Ye+te;try{Oe(!0,Ye)?Le.postMessage(null):(Ce=!1,Oe=null)}catch(zt){throw Le.postMessage(null),zt}}else Ce=!1},n=function(Ye){Oe=Ye,Ce||(Ce=!0,Le.postMessage(null))},s=function(Ye,zt){se=me(function(){Ye(t.unstable_now())},zt)},h=function(){W(se),se=-1}}function Se(Ye,zt){var Xt=Ye.length;Ye.push(zt);e:for(;;){var Rr=Xt-1>>>1,Gr=Ye[Rr];if(Gr!==void 0&&0<at(Gr,zt))Ye[Rr]=zt,Ye[Xt]=Gr,Xt=Rr;else break e}}function Ie(Ye){return Ye=Ye[0],Ye===void 0?null:Ye}function je(Ye){var zt=Ye[0];if(zt!==void 0){var Xt=Ye.pop();if(Xt!==zt){Ye[0]=Xt;e:for(var Rr=0,Gr=Ye.length;Rr<Gr;){var fo=2*(Rr+1)-1,en=Ye[fo],si=fo+1,cr=Ye[si];if(en!==void 0&&0>at(en,Xt))cr!==void 0&&0>at(cr,en)?(Ye[Rr]=cr,Ye[si]=Xt,Rr=si):(Ye[Rr]=en,Ye[fo]=Xt,Rr=fo);else if(cr!==void 0&&0>at(cr,Xt))Ye[Rr]=cr,Ye[si]=Xt,Rr=si;else break e}}return zt}return null}function at(Ye,zt){var Xt=Ye.sortIndex-zt.sortIndex;return Xt!==0?Xt:Ye.id-zt.id}var Xe=[],_t=[],Mt=1,bt=null,Ct=3,Ut=!1,Cr=!1,Ir=!1;function Fn(Ye){for(var zt=Ie(_t);zt!==null;){if(zt.callback===null)je(_t);else if(zt.startTime<=Ye)je(_t),zt.sortIndex=zt.expirationTime,Se(Xe,zt);else break;zt=Ie(_t)}}function Qt(Ye){if(Ir=!1,Fn(Ye),!Cr)if(Ie(Xe)!==null)Cr=!0,n(Bn);else{var zt=Ie(_t);zt!==null&&s(Qt,zt.startTime-Ye)}}function Bn(Ye,zt){Cr=!1,Ir&&(Ir=!1,h()),Ut=!0;var Xt=Ct;try{for(Fn(zt),bt=Ie(Xe);bt!==null&&(!(bt.expirationTime>zt)||Ye&&!t.unstable_shouldYield());){var Rr=bt.callback;if(typeof Rr=="function"){bt.callback=null,Ct=bt.priorityLevel;var Gr=Rr(bt.expirationTime<=zt);zt=t.unstable_now(),typeof Gr=="function"?bt.callback=Gr:bt===Ie(Xe)&&je(Xe),Fn(zt)}else je(Xe);bt=Ie(Xe)}if(bt!==null)var fo=!0;else{var en=Ie(_t);en!==null&&s(Qt,en.startTime-zt),fo=!1}return fo}finally{bt=null,Ct=Xt,Ut=!1}}var Gt=y;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ye){Ye.callback=null},t.unstable_continueExecution=function(){Cr||Ut||(Cr=!0,n(Bn))},t.unstable_getCurrentPriorityLevel=function(){return Ct},t.unstable_getFirstCallbackNode=function(){return Ie(Xe)},t.unstable_next=function(Ye){switch(Ct){case 1:case 2:case 3:var zt=3;break;default:zt=Ct}var Xt=Ct;Ct=zt;try{return Ye()}finally{Ct=Xt}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=Gt,t.unstable_runWithPriority=function(Ye,zt){switch(Ye){case 1:case 2:case 3:case 4:case 5:break;default:Ye=3}var Xt=Ct;Ct=Ye;try{return zt()}finally{Ct=Xt}},t.unstable_scheduleCallback=function(Ye,zt,Xt){var Rr=t.unstable_now();switch(typeof Xt=="object"&&Xt!==null?(Xt=Xt.delay,Xt=typeof Xt=="number"&&0<Xt?Rr+Xt:Rr):Xt=Rr,Ye){case 1:var Gr=-1;break;case 2:Gr=250;break;case 5:Gr=1073741823;break;case 4:Gr=1e4;break;default:Gr=5e3}return Gr=Xt+Gr,Ye={id:Mt++,callback:zt,priorityLevel:Ye,startTime:Xt,expirationTime:Gr,sortIndex:-1},Xt>Rr?(Ye.sortIndex=Xt,Se(_t,Ye),Ie(Xe)===null&&Ye===Ie(_t)&&(Ir?h():Ir=!0,s(Qt,Xt-Rr))):(Ye.sortIndex=Gr,Se(Xe,Ye),Cr||Ut||(Cr=!0,n(Bn))),Ye},t.unstable_wrapCallback=function(Ye){var zt=Ct;return function(){var Xt=Ct;Ct=zt;try{return Ye.apply(this,arguments)}finally{Ct=Xt}}}})(r1);t1.exports=r1;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ud=Si.exports,In=y0,Pi=t1.exports;function ct(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!ud)throw Error(ct(227));var n1=new Set,ph={};function El(t,n){Nc(t,n),Nc(t+"Capture",n)}function Nc(t,n){for(ph[t]=n,t=0;t<n.length;t++)n1.add(n[t])}var iu=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),bE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i1=Object.prototype.hasOwnProperty,o1={},a1={};function wE(t){return i1.call(a1,t)?!0:i1.call(o1,t)?!1:bE.test(t)?a1[t]=!0:(o1[t]=!0,!1)}function SE(t,n,s,h){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return h?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function EE(t,n,s,h){if(n===null||typeof n=="undefined"||SE(t,n,s,h))return!0;if(h)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Po(t,n,s,h,y,x,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=h,this.attributeNamespace=y,this.mustUseProperty=s,this.propertyName=t,this.type=n,this.sanitizeURL=x,this.removeEmptyString=l}var Bi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bi[t]=new Po(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Bi[n]=new Po(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bi[t]=new Po(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bi[t]=new Po(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bi[t]=new Po(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bi[t]=new Po(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bi[t]=new Po(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bi[t]=new Po(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bi[t]=new Po(t,5,!1,t.toLowerCase(),null,!1,!1)});var by=/[\-:]([a-z])/g;function wy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(by,wy);Bi[n]=new Po(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(by,wy);Bi[n]=new Po(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(by,wy);Bi[n]=new Po(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bi[t]=new Po(t,1,!1,t.toLowerCase(),null,!1,!1)});Bi.xlinkHref=new Po("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bi[t]=new Po(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sy(t,n,s,h){var y=Bi.hasOwnProperty(n)?Bi[n]:null,x=y!==null?y.type===0:h?!1:!(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N");x||(EE(n,s,y,h)&&(s=null),h||y===null?wE(n)&&(s===null?t.removeAttribute(n):t.setAttribute(n,""+s)):y.mustUseProperty?t[y.propertyName]=s===null?y.type===3?!1:"":s:(n=y.attributeName,h=y.attributeNamespace,s===null?t.removeAttribute(n):(y=y.type,s=y===3||y===4&&s===!0?"":""+s,h?t.setAttributeNS(h,n,s):t.setAttribute(n,s))))}var Pl=ud.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hh=60103,Tl=60106,Cu=60107,Ey=60108,fh=60114,Py=60109,Ty=60110,ld=60112,dh=60113,cd=60120,pd=60115,Cy=60116,Iy=60121,ky=60128,s1=60129,Ay=60130,My=60131;if(typeof Symbol=="function"&&Symbol.for){var Ti=Symbol.for;hh=Ti("react.element"),Tl=Ti("react.portal"),Cu=Ti("react.fragment"),Ey=Ti("react.strict_mode"),fh=Ti("react.profiler"),Py=Ti("react.provider"),Ty=Ti("react.context"),ld=Ti("react.forward_ref"),dh=Ti("react.suspense"),cd=Ti("react.suspense_list"),pd=Ti("react.memo"),Cy=Ti("react.lazy"),Iy=Ti("react.block"),Ti("react.scope"),ky=Ti("react.opaque.id"),s1=Ti("react.debug_trace_mode"),Ay=Ti("react.offscreen"),My=Ti("react.legacy_hidden")}var u1=typeof Symbol=="function"&&Symbol.iterator;function mh(t){return t===null||typeof t!="object"?null:(t=u1&&t[u1]||t["@@iterator"],typeof t=="function"?t:null)}var zy;function yh(t){if(zy===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);zy=n&&n[1]||""}return`
`+zy+t}var Ly=!1;function hd(t,n){if(!t||Ly)return"";Ly=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(k){var h=k}Reflect.construct(t,[],n)}else{try{n.call()}catch(k){h=k}t.call(n.prototype)}else{try{throw Error()}catch(k){h=k}t()}}catch(k){if(k&&h&&typeof k.stack=="string"){for(var y=k.stack.split(`
`),x=h.stack.split(`
`),l=y.length-1,C=x.length-1;1<=l&&0<=C&&y[l]!==x[C];)C--;for(;1<=l&&0<=C;l--,C--)if(y[l]!==x[C]){if(l!==1||C!==1)do if(l--,C--,0>C||y[l]!==x[C])return`
`+y[l].replace(" at new "," at ");while(1<=l&&0<=C);break}}}finally{Ly=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?yh(t):""}function PE(t){switch(t.tag){case 5:return yh(t.type);case 16:return yh("Lazy");case 13:return yh("Suspense");case 19:return yh("SuspenseList");case 0:case 2:case 15:return t=hd(t.type,!1),t;case 11:return t=hd(t.type.render,!1),t;case 22:return t=hd(t.type._render,!1),t;case 1:return t=hd(t.type,!0),t;default:return""}}function jc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cu:return"Fragment";case Tl:return"Portal";case fh:return"Profiler";case Ey:return"StrictMode";case dh:return"Suspense";case cd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ty:return(t.displayName||"Context")+".Consumer";case Py:return(t._context.displayName||"Context")+".Provider";case ld:var n=t.render;return n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case pd:return jc(t.type);case Iy:return jc(t._render);case Cy:n=t._payload,t=t._init;try{return jc(t(n))}catch{}}return null}function Iu(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function l1(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function TE(t){var n=l1(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),h=""+t[n];if(!t.hasOwnProperty(n)&&typeof s!="undefined"&&typeof s.get=="function"&&typeof s.set=="function"){var y=s.get,x=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return y.call(this)},set:function(l){h=""+l,x.call(this,l)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return h},setValue:function(l){h=""+l},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function fd(t){t._valueTracker||(t._valueTracker=TE(t))}function c1(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),h="";return t&&(h=l1(t)?t.checked?"true":"false":t.value),t=h,t!==s?(n.setValue(t),!0):!1}function dd(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dy(t,n){var s=n.checked;return In({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s!=null?s:t._wrapperState.initialChecked})}function p1(t,n){var s=n.defaultValue==null?"":n.defaultValue,h=n.checked!=null?n.checked:n.defaultChecked;s=Iu(n.value!=null?n.value:s),t._wrapperState={initialChecked:h,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function h1(t,n){n=n.checked,n!=null&&Sy(t,"checked",n,!1)}function Oy(t,n){h1(t,n);var s=Iu(n.value),h=n.type;if(s!=null)h==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(h==="submit"||h==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Ry(t,n.type,s):n.hasOwnProperty("defaultValue")&&Ry(t,n.type,Iu(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function f1(t,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var h=n.type;if(!(h!=="submit"&&h!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,s||n===t.value||(t.value=n),t.defaultValue=n}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Ry(t,n,s){(n!=="number"||dd(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}function CE(t){var n="";return ud.Children.forEach(t,function(s){s!=null&&(n+=s)}),n}function Fy(t,n){return t=In({children:void 0},n),(n=CE(n.children))&&(t.children=n),t}function Vc(t,n,s,h){if(t=t.options,n){n={};for(var y=0;y<s.length;y++)n["$"+s[y]]=!0;for(s=0;s<t.length;s++)y=n.hasOwnProperty("$"+t[s].value),t[s].selected!==y&&(t[s].selected=y),y&&h&&(t[s].defaultSelected=!0)}else{for(s=""+Iu(s),n=null,y=0;y<t.length;y++){if(t[y].value===s){t[y].selected=!0,h&&(t[y].defaultSelected=!0);return}n!==null||t[y].disabled||(n=t[y])}n!==null&&(n.selected=!0)}}function By(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(ct(91));return In({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function d1(t,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(ct(92));if(Array.isArray(s)){if(!(1>=s.length))throw Error(ct(93));s=s[0]}n=s}n==null&&(n=""),s=n}t._wrapperState={initialValue:Iu(s)}}function m1(t,n){var s=Iu(n.value),h=Iu(n.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),n.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),h!=null&&(t.defaultValue=""+h)}function y1(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}var Uy={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function v1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ny(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?v1(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var md,g1=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(n,s,h,y){MSApp.execUnsafeLocalFunction(function(){return t(n,s,h,y)})}:t}(function(t,n){if(t.namespaceURI!==Uy.svg||"innerHTML"in t)t.innerHTML=n;else{for(md=md||document.createElement("div"),md.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=md.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function vh(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var gh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IE=["Webkit","ms","Moz","O"];Object.keys(gh).forEach(function(t){IE.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),gh[n]=gh[t]})});function _1(t,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||gh.hasOwnProperty(t)&&gh[t]?(""+n).trim():n+"px"}function x1(t,n){t=t.style;for(var s in n)if(n.hasOwnProperty(s)){var h=s.indexOf("--")===0,y=_1(s,n[s],h);s==="float"&&(s="cssFloat"),h?t.setProperty(s,y):t[s]=y}}var kE=In({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jy(t,n){if(n){if(kE[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(ct(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(ct(60));if(!(typeof n.dangerouslySetInnerHTML=="object"&&"__html"in n.dangerouslySetInnerHTML))throw Error(ct(61))}if(n.style!=null&&typeof n.style!="object")throw Error(ct(62))}}function Vy(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function qy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zy=null,qc=null,Zc=null;function b1(t){if(t=Fh(t)){if(typeof Zy!="function")throw Error(ct(280));var n=t.stateNode;n&&(n=Ld(n),Zy(t.stateNode,t.type,n))}}function w1(t){qc?Zc?Zc.push(t):Zc=[t]:qc=t}function S1(){if(qc){var t=qc,n=Zc;if(Zc=qc=null,b1(t),n)for(t=0;t<n.length;t++)b1(n[t])}}function Gy(t,n){return t(n)}function E1(t,n,s,h,y){return t(n,s,h,y)}function Wy(){}var P1=Gy,Cl=!1,$y=!1;function Hy(){(qc!==null||Zc!==null)&&(Wy(),S1())}function AE(t,n,s){if($y)return t(n,s);$y=!0;try{return P1(t,n,s)}finally{$y=!1,Hy()}}function _h(t,n){var s=t.stateNode;if(s===null)return null;var h=Ld(s);if(h===null)return null;s=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(t=t.type,h=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!h;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(ct(231,n,typeof s));return s}var Xy=!1;if(iu)try{var xh={};Object.defineProperty(xh,"passive",{get:function(){Xy=!0}}),window.addEventListener("test",xh,xh),window.removeEventListener("test",xh,xh)}catch{Xy=!1}function ME(t,n,s,h,y,x,l,C,k){var F=Array.prototype.slice.call(arguments,3);try{n.apply(s,F)}catch($){this.onError($)}}var bh=!1,yd=null,vd=!1,Ky=null,zE={onError:function(t){bh=!0,yd=t}};function LE(t,n,s,h,y,x,l,C,k){bh=!1,yd=null,ME.apply(zE,arguments)}function DE(t,n,s,h,y,x,l,C,k){if(LE.apply(this,arguments),bh){if(bh){var F=yd;bh=!1,yd=null}else throw Error(ct(198));vd||(vd=!0,Ky=F)}}function Il(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&1026)!=0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function T1(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function C1(t){if(Il(t)!==t)throw Error(ct(188))}function OE(t){var n=t.alternate;if(!n){if(n=Il(t),n===null)throw Error(ct(188));return n!==t?null:t}for(var s=t,h=n;;){var y=s.return;if(y===null)break;var x=y.alternate;if(x===null){if(h=y.return,h!==null){s=h;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===s)return C1(y),t;if(x===h)return C1(y),n;x=x.sibling}throw Error(ct(188))}if(s.return!==h.return)s=y,h=x;else{for(var l=!1,C=y.child;C;){if(C===s){l=!0,s=y,h=x;break}if(C===h){l=!0,h=y,s=x;break}C=C.sibling}if(!l){for(C=x.child;C;){if(C===s){l=!0,s=x,h=y;break}if(C===h){l=!0,h=x,s=y;break}C=C.sibling}if(!l)throw Error(ct(189))}}if(s.alternate!==h)throw Error(ct(190))}if(s.tag!==3)throw Error(ct(188));return s.stateNode.current===s?t:n}function I1(t){if(t=OE(t),!t)return null;for(var n=t;;){if(n.tag===5||n.tag===6)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===t)break;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}function k1(t,n){for(var s=t.alternate;n!==null;){if(n===t||n===s)return!0;n=n.return}return!1}var A1,Jy,M1,z1,Yy=!1,Ps=[],ku=null,Au=null,Mu=null,wh=new Map,Sh=new Map,Eh=[],L1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qy(t,n,s,h,y){return{blockedOn:t,domEventName:n,eventSystemFlags:s|16,nativeEvent:y,targetContainers:[h]}}function D1(t,n){switch(t){case"focusin":case"focusout":ku=null;break;case"dragenter":case"dragleave":Au=null;break;case"mouseover":case"mouseout":Mu=null;break;case"pointerover":case"pointerout":wh.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sh.delete(n.pointerId)}}function Ph(t,n,s,h,y,x){return t===null||t.nativeEvent!==x?(t=Qy(n,s,h,y,x),n!==null&&(n=Fh(n),n!==null&&Jy(n)),t):(t.eventSystemFlags|=h,n=t.targetContainers,y!==null&&n.indexOf(y)===-1&&n.push(y),t)}function RE(t,n,s,h,y){switch(n){case"focusin":return ku=Ph(ku,t,n,s,h,y),!0;case"dragenter":return Au=Ph(Au,t,n,s,h,y),!0;case"mouseover":return Mu=Ph(Mu,t,n,s,h,y),!0;case"pointerover":var x=y.pointerId;return wh.set(x,Ph(wh.get(x)||null,t,n,s,h,y)),!0;case"gotpointercapture":return x=y.pointerId,Sh.set(x,Ph(Sh.get(x)||null,t,n,s,h,y)),!0}return!1}function FE(t){var n=kl(t.target);if(n!==null){var s=Il(n);if(s!==null){if(n=s.tag,n===13){if(n=T1(s),n!==null){t.blockedOn=n,z1(t.lanePriority,function(){Pi.unstable_runWithPriority(t.priority,function(){M1(s)})});return}}else if(n===3&&s.stateNode.hydrate){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gd(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=ov(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(s!==null)return n=Fh(s),n!==null&&Jy(n),t.blockedOn=s,!1;n.shift()}return!0}function O1(t,n,s){gd(t)&&s.delete(n)}function BE(){for(Yy=!1;0<Ps.length;){var t=Ps[0];if(t.blockedOn!==null){t=Fh(t.blockedOn),t!==null&&A1(t);break}for(var n=t.targetContainers;0<n.length;){var s=ov(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(s!==null){t.blockedOn=s;break}n.shift()}t.blockedOn===null&&Ps.shift()}ku!==null&&gd(ku)&&(ku=null),Au!==null&&gd(Au)&&(Au=null),Mu!==null&&gd(Mu)&&(Mu=null),wh.forEach(O1),Sh.forEach(O1)}function Th(t,n){t.blockedOn===n&&(t.blockedOn=null,Yy||(Yy=!0,Pi.unstable_scheduleCallback(Pi.unstable_NormalPriority,BE)))}function R1(t){function n(y){return Th(y,t)}if(0<Ps.length){Th(Ps[0],t);for(var s=1;s<Ps.length;s++){var h=Ps[s];h.blockedOn===t&&(h.blockedOn=null)}}for(ku!==null&&Th(ku,t),Au!==null&&Th(Au,t),Mu!==null&&Th(Mu,t),wh.forEach(n),Sh.forEach(n),s=0;s<Eh.length;s++)h=Eh[s],h.blockedOn===t&&(h.blockedOn=null);for(;0<Eh.length&&(s=Eh[0],s.blockedOn===null);)FE(s),s.blockedOn===null&&Eh.shift()}function _d(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var Gc={animationend:_d("Animation","AnimationEnd"),animationiteration:_d("Animation","AnimationIteration"),animationstart:_d("Animation","AnimationStart"),transitionend:_d("Transition","TransitionEnd")},ev={},F1={};iu&&(F1=document.createElement("div").style,"AnimationEvent"in window||(delete Gc.animationend.animation,delete Gc.animationiteration.animation,delete Gc.animationstart.animation),"TransitionEvent"in window||delete Gc.transitionend.transition);function xd(t){if(ev[t])return ev[t];if(!Gc[t])return t;var n=Gc[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in F1)return ev[t]=n[s];return t}var B1=xd("animationend"),U1=xd("animationiteration"),N1=xd("animationstart"),j1=xd("transitionend"),V1=new Map,tv=new Map,UE=["abort","abort",B1,"animationEnd",U1,"animationIteration",N1,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",j1,"transitionEnd","waiting","waiting"];function rv(t,n){for(var s=0;s<t.length;s+=2){var h=t[s],y=t[s+1];y="on"+(y[0].toUpperCase()+y.slice(1)),tv.set(h,n),V1.set(h,y),El(y,[h])}}var NE=Pi.unstable_now;NE();var vn=8;function Wc(t){if((1&t)!=0)return vn=15,1;if((2&t)!=0)return vn=14,2;if((4&t)!=0)return vn=13,4;var n=24&t;return n!==0?(vn=12,n):(t&32)!=0?(vn=11,32):(n=192&t,n!==0?(vn=10,n):(t&256)!=0?(vn=9,256):(n=3584&t,n!==0?(vn=8,n):(t&4096)!=0?(vn=7,4096):(n=4186112&t,n!==0?(vn=6,n):(n=62914560&t,n!==0?(vn=5,n):t&67108864?(vn=4,67108864):(t&134217728)!=0?(vn=3,134217728):(n=805306368&t,n!==0?(vn=2,n):(1073741824&t)!=0?(vn=1,1073741824):(vn=8,t))))))}function jE(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function VE(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(ct(358,t))}}function Ch(t,n){var s=t.pendingLanes;if(s===0)return vn=0;var h=0,y=0,x=t.expiredLanes,l=t.suspendedLanes,C=t.pingedLanes;if(x!==0)h=x,y=vn=15;else if(x=s&134217727,x!==0){var k=x&~l;k!==0?(h=Wc(k),y=vn):(C&=x,C!==0&&(h=Wc(C),y=vn))}else x=s&~l,x!==0?(h=Wc(x),y=vn):C!==0&&(h=Wc(C),y=vn);if(h===0)return 0;if(h=31-zu(h),h=s&((0>h?0:1<<h)<<1)-1,n!==0&&n!==h&&(n&l)==0){if(Wc(n),y<=vn)return n;vn=y}if(n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=h;0<n;)s=31-zu(n),y=1<<s,h|=t[s],n&=~y;return h}function q1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bd(t,n){switch(t){case 15:return 1;case 14:return 2;case 12:return t=$c(24&~n),t===0?bd(10,n):t;case 10:return t=$c(192&~n),t===0?bd(8,n):t;case 8:return t=$c(3584&~n),t===0&&(t=$c(4186112&~n),t===0&&(t=512)),t;case 2:return n=$c(805306368&~n),n===0&&(n=268435456),n}throw Error(ct(358,t))}function $c(t){return t&-t}function nv(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function wd(t,n,s){t.pendingLanes|=n;var h=n-1;t.suspendedLanes&=h,t.pingedLanes&=h,t=t.eventTimes,n=31-zu(n),t[n]=s}var zu=Math.clz32?Math.clz32:GE,qE=Math.log,ZE=Math.LN2;function GE(t){return t===0?32:31-(qE(t)/ZE|0)|0}var WE=Pi.unstable_UserBlockingPriority,$E=Pi.unstable_runWithPriority,Sd=!0;function HE(t,n,s,h){Cl||Wy();var y=iv,x=Cl;Cl=!0;try{E1(y,t,n,s,h)}finally{(Cl=x)||Hy()}}function XE(t,n,s,h){$E(WE,iv.bind(null,t,n,s,h))}function iv(t,n,s,h){if(Sd){var y;if((y=(n&4)==0)&&0<Ps.length&&-1<L1.indexOf(t))t=Qy(null,t,n,s,h),Ps.push(t);else{var x=ov(t,n,s,h);if(x===null)y&&D1(t,h);else{if(y){if(-1<L1.indexOf(t)){t=Qy(x,t,n,s,h),Ps.push(t);return}if(RE(x,t,n,s,h))return;D1(t,h)}_x(t,n,h,null,s)}}}}function ov(t,n,s,h){var y=qy(h);if(y=kl(y),y!==null){var x=Il(y);if(x===null)y=null;else{var l=x.tag;if(l===13){if(y=T1(x),y!==null)return y;y=null}else if(l===3){if(x.stateNode.hydrate)return x.tag===3?x.stateNode.containerInfo:null;y=null}else x!==y&&(y=null)}}return _x(t,n,h,y,s),null}var Lu=null,av=null,Ed=null;function Z1(){if(Ed)return Ed;var t,n=av,s=n.length,h,y="value"in Lu?Lu.value:Lu.textContent,x=y.length;for(t=0;t<s&&n[t]===y[t];t++);var l=s-t;for(h=1;h<=l&&n[s-h]===y[x-h];h++);return Ed=y.slice(t,1<h?1-h:void 0)}function Pd(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Td(){return!0}function G1(){return!1}function ua(t){function n(s,h,y,x,l){this._reactName=s,this._targetInst=y,this.type=h,this.nativeEvent=x,this.target=l,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(s=t[C],this[C]=s?s(x):x[C]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Td:G1,this.isPropagationStopped=G1,this}return In(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Td)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Td)},persist:function(){},isPersistent:Td}),n}var Hc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sv=ua(Hc),Ih=In({},Hc,{view:0,detail:0}),KE=ua(Ih),uv,lv,kh,Cd=In({},Ih,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kh&&(kh&&t.type==="mousemove"?(uv=t.screenX-kh.screenX,lv=t.screenY-kh.screenY):lv=uv=0,kh=t),uv)},movementY:function(t){return"movementY"in t?t.movementY:lv}}),W1=ua(Cd),JE=In({},Cd,{dataTransfer:0}),YE=ua(JE),QE=In({},Ih,{relatedTarget:0}),cv=ua(QE),eP=In({},Hc,{animationName:0,elapsedTime:0,pseudoElement:0}),tP=ua(eP),rP=In({},Hc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nP=ua(rP),iP=In({},Hc,{data:0}),$1=ua(iP),oP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uP(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=sP[t])?!!n[t]:!1}function pv(){return uP}var lP=In({},Ih,{key:function(t){if(t.key){var n=oP[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Pd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pv,charCode:function(t){return t.type==="keypress"?Pd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cP=ua(lP),pP=In({},Cd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H1=ua(pP),hP=In({},Ih,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pv}),fP=ua(hP),dP=In({},Hc,{propertyName:0,elapsedTime:0,pseudoElement:0}),mP=ua(dP),yP=In({},Cd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vP=ua(yP),gP=[9,13,27,32],hv=iu&&"CompositionEvent"in window,Ah=null;iu&&"documentMode"in document&&(Ah=document.documentMode);var _P=iu&&"TextEvent"in window&&!Ah,X1=iu&&(!hv||Ah&&8<Ah&&11>=Ah),K1=String.fromCharCode(32),J1=!1;function Y1(t,n){switch(t){case"keyup":return gP.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xc=!1;function xP(t,n){switch(t){case"compositionend":return Q1(n);case"keypress":return n.which!==32?null:(J1=!0,K1);case"textInput":return t=n.data,t===K1&&J1?null:t;default:return null}}function bP(t,n){if(Xc)return t==="compositionend"||!hv&&Y1(t,n)?(t=Z1(),Ed=av=Lu=null,Xc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return X1&&n.locale!=="ko"?null:n.data;default:return null}}var wP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ex(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!wP[t.type]:n==="textarea"}function tx(t,n,s,h){w1(h),n=kd(n,"onChange"),0<n.length&&(s=new sv("onChange","change",null,s,h),t.push({event:s,listeners:n}))}var Mh=null,zh=null;function SP(t){dx(t,0)}function Id(t){var n=ep(t);if(c1(n))return t}function EP(t,n){if(t==="change")return n}var rx=!1;if(iu){var fv;if(iu){var dv="oninput"in document;if(!dv){var nx=document.createElement("div");nx.setAttribute("oninput","return;"),dv=typeof nx.oninput=="function"}fv=dv}else fv=!1;rx=fv&&(!document.documentMode||9<document.documentMode)}function ix(){Mh&&(Mh.detachEvent("onpropertychange",ox),zh=Mh=null)}function ox(t){if(t.propertyName==="value"&&Id(zh)){var n=[];if(tx(n,zh,t,qy(t)),t=SP,Cl)t(n);else{Cl=!0;try{Gy(t,n)}finally{Cl=!1,Hy()}}}}function PP(t,n,s){t==="focusin"?(ix(),Mh=n,zh=s,Mh.attachEvent("onpropertychange",ox)):t==="focusout"&&ix()}function TP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Id(zh)}function CP(t,n){if(t==="click")return Id(n)}function IP(t,n){if(t==="input"||t==="change")return Id(n)}function kP(t,n){return t===n&&(t!==0||1/t==1/n)||t!==t&&n!==n}var Ia=typeof Object.is=="function"?Object.is:kP,AP=Object.prototype.hasOwnProperty;function Lh(t,n){if(Ia(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),h=Object.keys(n);if(s.length!==h.length)return!1;for(h=0;h<s.length;h++)if(!AP.call(n,s[h])||!Ia(t[s[h]],n[s[h]]))return!1;return!0}function ax(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sx(t,n){var s=ax(t);t=0;for(var h;s;){if(s.nodeType===3){if(h=t+s.textContent.length,t<=n&&h>=n)return{node:s,offset:n-t};t=h}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ax(s)}}function ux(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?ux(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function lx(){for(var t=window,n=dd();n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=dd(t.document)}return n}function mv(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var MP=iu&&"documentMode"in document&&11>=document.documentMode,Kc=null,yv=null,Dh=null,vv=!1;function cx(t,n,s){var h=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;vv||Kc==null||Kc!==dd(h)||(h=Kc,"selectionStart"in h&&mv(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Dh&&Lh(Dh,h)||(Dh=h,h=kd(yv,"onSelect"),0<h.length&&(n=new sv("onSelect","select",null,n,s),t.push({event:n,listeners:h}),n.target=Kc)))}rv("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);rv("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);rv(UE,2);for(var px="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),gv=0;gv<px.length;gv++)tv.set(px[gv],0);Nc("onMouseEnter",["mouseout","mouseover"]);Nc("onMouseLeave",["mouseout","mouseover"]);Nc("onPointerEnter",["pointerout","pointerover"]);Nc("onPointerLeave",["pointerout","pointerover"]);El("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));El("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));El("onBeforeInput",["compositionend","keypress","textInput","paste"]);El("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));El("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));El("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oh));function fx(t,n,s){var h=t.type||"unknown-event";t.currentTarget=s,DE(h,n,void 0,t),t.currentTarget=null}function dx(t,n){n=(n&4)!=0;for(var s=0;s<t.length;s++){var h=t[s],y=h.event;h=h.listeners;e:{var x=void 0;if(n)for(var l=h.length-1;0<=l;l--){var C=h[l],k=C.instance,F=C.currentTarget;if(C=C.listener,k!==x&&y.isPropagationStopped())break e;fx(y,C,F),x=k}else for(l=0;l<h.length;l++){if(C=h[l],k=C.instance,F=C.currentTarget,C=C.listener,k!==x&&y.isPropagationStopped())break e;fx(y,C,F),x=k}}}if(vd)throw t=Ky,vd=!1,Ky=null,t}function Sn(t,n){var s=Px(n),h=t+"__bubble";s.has(h)||(gx(n,t,2,!1),s.add(h))}var mx="_reactListening"+Math.random().toString(36).slice(2);function yx(t){t[mx]||(t[mx]=!0,n1.forEach(function(n){hx.has(n)||vx(n,!1,t,null),vx(n,!0,t,null)}))}function vx(t,n,s,h){var y=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,x=s;if(t==="selectionchange"&&s.nodeType!==9&&(x=s.ownerDocument),h!==null&&!n&&hx.has(t)){if(t!=="scroll")return;y|=2,x=h}var l=Px(x),C=t+"__"+(n?"capture":"bubble");l.has(C)||(n&&(y|=4),gx(x,t,y,n),l.add(C))}function gx(t,n,s,h){var y=tv.get(n);switch(y===void 0?2:y){case 0:y=HE;break;case 1:y=XE;break;default:y=iv}s=y.bind(null,n,s,t),y=void 0,!Xy||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(y=!0),h?y!==void 0?t.addEventListener(n,s,{capture:!0,passive:y}):t.addEventListener(n,s,!0):y!==void 0?t.addEventListener(n,s,{passive:y}):t.addEventListener(n,s,!1)}function _x(t,n,s,h,y){var x=h;if((n&1)==0&&(n&2)==0&&h!==null)e:for(;;){if(h===null)return;var l=h.tag;if(l===3||l===4){var C=h.stateNode.containerInfo;if(C===y||C.nodeType===8&&C.parentNode===y)break;if(l===4)for(l=h.return;l!==null;){var k=l.tag;if((k===3||k===4)&&(k=l.stateNode.containerInfo,k===y||k.nodeType===8&&k.parentNode===y))return;l=l.return}for(;C!==null;){if(l=kl(C),l===null)return;if(k=l.tag,k===5||k===6){h=x=l;continue e}C=C.parentNode}}h=h.return}AE(function(){var F=x,$=qy(s),me=[];e:{var W=V1.get(t);if(W!==void 0){var xe=sv,Ce=t;switch(t){case"keypress":if(Pd(s)===0)break e;case"keydown":case"keyup":xe=cP;break;case"focusin":Ce="focus",xe=cv;break;case"focusout":Ce="blur",xe=cv;break;case"beforeblur":case"afterblur":xe=cv;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=W1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=YE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=fP;break;case B1:case U1:case N1:xe=tP;break;case j1:xe=mP;break;case"scroll":xe=KE;break;case"wheel":xe=vP;break;case"copy":case"cut":case"paste":xe=nP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=H1}var Oe=(n&4)!=0,se=!Oe&&t==="scroll",te=Oe?W!==null?W+"Capture":null:W;Oe=[];for(var ne=F,be;ne!==null;){be=ne;var Le=be.stateNode;if(be.tag===5&&Le!==null&&(be=Le,te!==null&&(Le=_h(ne,te),Le!=null&&Oe.push(Rh(ne,Le,be)))),se)break;ne=ne.return}0<Oe.length&&(W=new xe(W,Ce,null,s,$),me.push({event:W,listeners:Oe}))}}if((n&7)==0){e:{if(W=t==="mouseover"||t==="pointerover",xe=t==="mouseout"||t==="pointerout",W&&(n&16)==0&&(Ce=s.relatedTarget||s.fromElement)&&(kl(Ce)||Ce[Qc]))break e;if((xe||W)&&(W=$.window===$?$:(W=$.ownerDocument)?W.defaultView||W.parentWindow:window,xe?(Ce=s.relatedTarget||s.toElement,xe=F,Ce=Ce?kl(Ce):null,Ce!==null&&(se=Il(Ce),Ce!==se||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(xe=null,Ce=F),xe!==Ce)){if(Oe=W1,Le="onMouseLeave",te="onMouseEnter",ne="mouse",(t==="pointerout"||t==="pointerover")&&(Oe=H1,Le="onPointerLeave",te="onPointerEnter",ne="pointer"),se=xe==null?W:ep(xe),be=Ce==null?W:ep(Ce),W=new Oe(Le,ne+"leave",xe,s,$),W.target=se,W.relatedTarget=be,Le=null,kl($)===F&&(Oe=new Oe(te,ne+"enter",Ce,s,$),Oe.target=be,Oe.relatedTarget=se,Le=Oe),se=Le,xe&&Ce)t:{for(Oe=xe,te=Ce,ne=0,be=Oe;be;be=Jc(be))ne++;for(be=0,Le=te;Le;Le=Jc(Le))be++;for(;0<ne-be;)Oe=Jc(Oe),ne--;for(;0<be-ne;)te=Jc(te),be--;for(;ne--;){if(Oe===te||te!==null&&Oe===te.alternate)break t;Oe=Jc(Oe),te=Jc(te)}Oe=null}else Oe=null;xe!==null&&xx(me,W,xe,Oe,!1),Ce!==null&&se!==null&&xx(me,se,Ce,Oe,!0)}}e:{if(W=F?ep(F):window,xe=W.nodeName&&W.nodeName.toLowerCase(),xe==="select"||xe==="input"&&W.type==="file")var Se=EP;else if(ex(W))if(rx)Se=IP;else{Se=TP;var Ie=PP}else(xe=W.nodeName)&&xe.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(Se=CP);if(Se&&(Se=Se(t,F))){tx(me,Se,s,$);break e}Ie&&Ie(t,W,F),t==="focusout"&&(Ie=W._wrapperState)&&Ie.controlled&&W.type==="number"&&Ry(W,"number",W.value)}switch(Ie=F?ep(F):window,t){case"focusin":(ex(Ie)||Ie.contentEditable==="true")&&(Kc=Ie,yv=F,Dh=null);break;case"focusout":Dh=yv=Kc=null;break;case"mousedown":vv=!0;break;case"contextmenu":case"mouseup":case"dragend":vv=!1,cx(me,s,$);break;case"selectionchange":if(MP)break;case"keydown":case"keyup":cx(me,s,$)}var je;if(hv)e:{switch(t){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Xc?Y1(t,s)&&(at="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(at="onCompositionStart");at&&(X1&&s.locale!=="ko"&&(Xc||at!=="onCompositionStart"?at==="onCompositionEnd"&&Xc&&(je=Z1()):(Lu=$,av="value"in Lu?Lu.value:Lu.textContent,Xc=!0)),Ie=kd(F,at),0<Ie.length&&(at=new $1(at,t,null,s,$),me.push({event:at,listeners:Ie}),je?at.data=je:(je=Q1(s),je!==null&&(at.data=je)))),(je=_P?xP(t,s):bP(t,s))&&(F=kd(F,"onBeforeInput"),0<F.length&&($=new $1("onBeforeInput","beforeinput",null,s,$),me.push({event:$,listeners:F}),$.data=je))}dx(me,n)})}function Rh(t,n,s){return{instance:t,listener:n,currentTarget:s}}function kd(t,n){for(var s=n+"Capture",h=[];t!==null;){var y=t,x=y.stateNode;y.tag===5&&x!==null&&(y=x,x=_h(t,s),x!=null&&h.unshift(Rh(t,x,y)),x=_h(t,n),x!=null&&h.push(Rh(t,x,y))),t=t.return}return h}function Jc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xx(t,n,s,h,y){for(var x=n._reactName,l=[];s!==null&&s!==h;){var C=s,k=C.alternate,F=C.stateNode;if(k!==null&&k===h)break;C.tag===5&&F!==null&&(C=F,y?(k=_h(s,x),k!=null&&l.unshift(Rh(s,k,C))):y||(k=_h(s,x),k!=null&&l.push(Rh(s,k,C)))),s=s.return}l.length!==0&&t.push({event:n,listeners:l})}function Ad(){}var _v=null,xv=null;function bx(t,n){switch(t){case"button":case"input":case"select":case"textarea":return!!n.autoFocus}return!1}function bv(t,n){return t==="textarea"||t==="option"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var wx=typeof setTimeout=="function"?setTimeout:void 0,zP=typeof clearTimeout=="function"?clearTimeout:void 0;function wv(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Yc(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break}return t}function Sx(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}var Sv=0;function LP(t){return{$$typeof:ky,toString:t,valueOf:t}}var Md=Math.random().toString(36).slice(2),Du="__reactFiber$"+Md,zd="__reactProps$"+Md,Qc="__reactContainer$"+Md,Ex="__reactEvents$"+Md;function kl(t){var n=t[Du];if(n)return n;for(var s=t.parentNode;s;){if(n=s[Qc]||s[Du]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=Sx(t);t!==null;){if(s=t[Du])return s;t=Sx(t)}return n}t=s,s=t.parentNode}return null}function Fh(t){return t=t[Du]||t[Qc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ep(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ct(33))}function Ld(t){return t[zd]||null}function Px(t){var n=t[Ex];return n===void 0&&(n=t[Ex]=new Set),n}var Ev=[],tp=-1;function Ou(t){return{current:t}}function En(t){0>tp||(t.current=Ev[tp],Ev[tp]=null,tp--)}function Wn(t,n){tp++,Ev[tp]=t.current,t.current=n}var Ru={},uo=Ou(Ru),qo=Ou(!1),Al=Ru;function rp(t,n){var s=t.type.contextTypes;if(!s)return Ru;var h=t.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===n)return h.__reactInternalMemoizedMaskedChildContext;var y={},x;for(x in s)y[x]=n[x];return h&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=y),y}function Zo(t){return t=t.childContextTypes,t!=null}function Dd(){En(qo),En(uo)}function Tx(t,n,s){if(uo.current!==Ru)throw Error(ct(168));Wn(uo,n),Wn(qo,s)}function Cx(t,n,s){var h=t.stateNode;if(t=n.childContextTypes,typeof h.getChildContext!="function")return s;h=h.getChildContext();for(var y in h)if(!(y in t))throw Error(ct(108,jc(n)||"Unknown",y));return In({},s,h)}function Od(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ru,Al=uo.current,Wn(uo,t),Wn(qo,qo.current),!0}function Ix(t,n,s){var h=t.stateNode;if(!h)throw Error(ct(169));s?(t=Cx(t,n,Al),h.__reactInternalMemoizedMergedChildContext=t,En(qo),En(uo),Wn(uo,t)):En(qo),Wn(qo,s)}var Pv=null,Ml=null,DP=Pi.unstable_runWithPriority,Tv=Pi.unstable_scheduleCallback,Cv=Pi.unstable_cancelCallback,OP=Pi.unstable_shouldYield,kx=Pi.unstable_requestPaint,Iv=Pi.unstable_now,RP=Pi.unstable_getCurrentPriorityLevel,Rd=Pi.unstable_ImmediatePriority,Ax=Pi.unstable_UserBlockingPriority,Mx=Pi.unstable_NormalPriority,zx=Pi.unstable_LowPriority,Lx=Pi.unstable_IdlePriority,kv={},FP=kx!==void 0?kx:function(){},ou=null,Fd=null,Av=!1,Dx=Iv(),lo=1e4>Dx?Iv:function(){return Iv()-Dx};function np(){switch(RP()){case Rd:return 99;case Ax:return 98;case Mx:return 97;case zx:return 96;case Lx:return 95;default:throw Error(ct(332))}}function Ox(t){switch(t){case 99:return Rd;case 98:return Ax;case 97:return Mx;case 96:return zx;case 95:return Lx;default:throw Error(ct(332))}}function zl(t,n){return t=Ox(t),DP(t,n)}function Bh(t,n,s){return t=Ox(t),Tv(t,n,s)}function Ts(){if(Fd!==null){var t=Fd;Fd=null,Cv(t)}Rx()}function Rx(){if(!Av&&ou!==null){Av=!0;var t=0;try{var n=ou;zl(99,function(){for(;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}}),ou=null}catch(s){throw ou!==null&&(ou=ou.slice(t+1)),Tv(Rd,Ts),s}finally{Av=!1}}}var BP=Pl.ReactCurrentBatchConfig;function es(t,n){if(t&&t.defaultProps){n=In({},n),t=t.defaultProps;for(var s in t)n[s]===void 0&&(n[s]=t[s]);return n}return n}var Bd=Ou(null),Ud=null,ip=null,Nd=null;function Mv(){Nd=ip=Ud=null}function zv(t){var n=Bd.current;En(Bd),t.type._context._currentValue=n}function Fx(t,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&n)===n){if(s===null||(s.childLanes&n)===n)break;s.childLanes|=n}else t.childLanes|=n,s!==null&&(s.childLanes|=n);t=t.return}}function op(t,n){Ud=t,Nd=ip=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!=0&&(ts=!0),t.firstContext=null)}function ka(t,n){if(Nd!==t&&n!==!1&&n!==0)if((typeof n!="number"||n===1073741823)&&(Nd=t,n=1073741823),n={context:t,observedBits:n,next:null},ip===null){if(Ud===null)throw Error(ct(308));ip=n,Ud.dependencies={lanes:0,firstContext:n,responders:null}}else ip=ip.next=n;return t._currentValue}var Fu=!1;function Lv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Bx(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bu(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Uu(t,n){if(t=t.updateQueue,t!==null){t=t.shared;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}}function Ux(t,n){var s=t.updateQueue,h=t.alternate;if(h!==null&&(h=h.updateQueue,s===h)){var y=null,x=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};x===null?y=x=l:x=x.next=l,s=s.next}while(s!==null);x===null?y=x=n:x=x.next=n}else y=x=n;s={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:h.shared,effects:h.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}function Uh(t,n,s,h){var y=t.updateQueue;Fu=!1;var x=y.firstBaseUpdate,l=y.lastBaseUpdate,C=y.shared.pending;if(C!==null){y.shared.pending=null;var k=C,F=k.next;k.next=null,l===null?x=F:l.next=F,l=k;var $=t.alternate;if($!==null){$=$.updateQueue;var me=$.lastBaseUpdate;me!==l&&(me===null?$.firstBaseUpdate=F:me.next=F,$.lastBaseUpdate=k)}}if(x!==null){me=y.baseState,l=0,$=F=k=null;do{C=x.lane;var W=x.eventTime;if((h&C)===C){$!==null&&($=$.next={eventTime:W,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var xe=t,Ce=x;switch(C=n,W=s,Ce.tag){case 1:if(xe=Ce.payload,typeof xe=="function"){me=xe.call(W,me,C);break e}me=xe;break e;case 3:xe.flags=xe.flags&-4097|64;case 0:if(xe=Ce.payload,C=typeof xe=="function"?xe.call(W,me,C):xe,C==null)break e;me=In({},me,C);break e;case 2:Fu=!0}}x.callback!==null&&(t.flags|=32,C=y.effects,C===null?y.effects=[x]:C.push(x))}else W={eventTime:W,lane:C,tag:x.tag,payload:x.payload,callback:x.callback,next:null},$===null?(F=$=W,k=me):$=$.next=W,l|=C;if(x=x.next,x===null){if(C=y.shared.pending,C===null)break;x=C.next,C.next=null,y.lastBaseUpdate=C,y.shared.pending=null}}while(1);$===null&&(k=me),y.baseState=k,y.firstBaseUpdate=F,y.lastBaseUpdate=$,Jh|=l,t.lanes=l,t.memoizedState=me}}function Nx(t,n,s){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var h=t[n],y=h.callback;if(y!==null){if(h.callback=null,h=s,typeof y!="function")throw Error(ct(191,y));y.call(h)}}}var jx=new ud.Component().refs;function jd(t,n,s,h){n=t.memoizedState,s=s(h,n),s=s==null?n:In({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Vd={isMounted:function(t){return(t=t._reactInternals)?Il(t)===t:!1},enqueueSetState:function(t,n,s){t=t._reactInternals;var h=la(),y=Vu(t),x=Bu(h,y);x.payload=n,s!=null&&(x.callback=s),Uu(t,x),qu(t,y,h)},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var h=la(),y=Vu(t),x=Bu(h,y);x.tag=1,x.payload=n,s!=null&&(x.callback=s),Uu(t,x),qu(t,y,h)},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=la(),h=Vu(t),y=Bu(s,h);y.tag=2,n!=null&&(y.callback=n),Uu(t,y),qu(t,h,s)}};function Vx(t,n,s,h,y,x,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(h,x,l):n.prototype&&n.prototype.isPureReactComponent?!Lh(s,h)||!Lh(y,x):!0}function qx(t,n,s){var h=!1,y=Ru,x=n.contextType;return typeof x=="object"&&x!==null?x=ka(x):(y=Zo(n)?Al:uo.current,h=n.contextTypes,x=(h=h!=null)?rp(t,y):Ru),n=new n(s,x),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Vd,t.stateNode=n,n._reactInternals=t,h&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=y,t.__reactInternalMemoizedMaskedChildContext=x),n}function Zx(t,n,s,h){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,h),n.state!==t&&Vd.enqueueReplaceState(n,n.state,null)}function Dv(t,n,s,h){var y=t.stateNode;y.props=s,y.state=t.memoizedState,y.refs=jx,Lv(t);var x=n.contextType;typeof x=="object"&&x!==null?y.context=ka(x):(x=Zo(n)?Al:uo.current,y.context=rp(t,x)),Uh(t,s,y,h),y.state=t.memoizedState,x=n.getDerivedStateFromProps,typeof x=="function"&&(jd(t,n,x,s),y.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(n=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),n!==y.state&&Vd.enqueueReplaceState(y,y.state,null),Uh(t,s,y,h),y.state=t.memoizedState),typeof y.componentDidMount=="function"&&(t.flags|=4)}var qd=Array.isArray;function Nh(t,n,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(ct(309));var h=s.stateNode}if(!h)throw Error(ct(147,t));var y=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===y?n.ref:(n=function(x){var l=h.refs;l===jx&&(l=h.refs={}),x===null?delete l[y]:l[y]=x},n._stringRef=y,n)}if(typeof t!="string")throw Error(ct(284));if(!s._owner)throw Error(ct(290,t))}return t}function Zd(t,n){if(t.type!=="textarea")throw Error(ct(31,Object.prototype.toString.call(n)==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":n))}function Gx(t){function n(se,te){if(t){var ne=se.lastEffect;ne!==null?(ne.nextEffect=te,se.lastEffect=te):se.firstEffect=se.lastEffect=te,te.nextEffect=null,te.flags=8}}function s(se,te){if(!t)return null;for(;te!==null;)n(se,te),te=te.sibling;return null}function h(se,te){for(se=new Map;te!==null;)te.key!==null?se.set(te.key,te):se.set(te.index,te),te=te.sibling;return se}function y(se,te){return se=Wu(se,te),se.index=0,se.sibling=null,se}function x(se,te,ne){return se.index=ne,t?(ne=se.alternate,ne!==null?(ne=ne.index,ne<te?(se.flags=2,te):ne):(se.flags=2,te)):te}function l(se){return t&&se.alternate===null&&(se.flags=2),se}function C(se,te,ne,be){return te===null||te.tag!==6?(te=yg(ne,se.mode,be),te.return=se,te):(te=y(te,ne),te.return=se,te)}function k(se,te,ne,be){return te!==null&&te.elementType===ne.type?(be=y(te,ne.props),be.ref=Nh(se,te,ne),be.return=se,be):(be=um(ne.type,ne.key,ne.props,null,se.mode,be),be.ref=Nh(se,te,ne),be.return=se,be)}function F(se,te,ne,be){return te===null||te.tag!==4||te.stateNode.containerInfo!==ne.containerInfo||te.stateNode.implementation!==ne.implementation?(te=vg(ne,se.mode,be),te.return=se,te):(te=y(te,ne.children||[]),te.return=se,te)}function $(se,te,ne,be,Le){return te===null||te.tag!==7?(te=fp(ne,se.mode,be,Le),te.return=se,te):(te=y(te,ne),te.return=se,te)}function me(se,te,ne){if(typeof te=="string"||typeof te=="number")return te=yg(""+te,se.mode,ne),te.return=se,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case hh:return ne=um(te.type,te.key,te.props,null,se.mode,ne),ne.ref=Nh(se,null,te),ne.return=se,ne;case Tl:return te=vg(te,se.mode,ne),te.return=se,te}if(qd(te)||mh(te))return te=fp(te,se.mode,ne,null),te.return=se,te;Zd(se,te)}return null}function W(se,te,ne,be){var Le=te!==null?te.key:null;if(typeof ne=="string"||typeof ne=="number")return Le!==null?null:C(se,te,""+ne,be);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case hh:return ne.key===Le?ne.type===Cu?$(se,te,ne.props.children,be,Le):k(se,te,ne,be):null;case Tl:return ne.key===Le?F(se,te,ne,be):null}if(qd(ne)||mh(ne))return Le!==null?null:$(se,te,ne,be,null);Zd(se,ne)}return null}function xe(se,te,ne,be,Le){if(typeof be=="string"||typeof be=="number")return se=se.get(ne)||null,C(te,se,""+be,Le);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case hh:return se=se.get(be.key===null?ne:be.key)||null,be.type===Cu?$(te,se,be.props.children,Le,be.key):k(te,se,be,Le);case Tl:return se=se.get(be.key===null?ne:be.key)||null,F(te,se,be,Le)}if(qd(be)||mh(be))return se=se.get(ne)||null,$(te,se,be,Le,null);Zd(te,be)}return null}function Ce(se,te,ne,be){for(var Le=null,Se=null,Ie=te,je=te=0,at=null;Ie!==null&&je<ne.length;je++){Ie.index>je?(at=Ie,Ie=null):at=Ie.sibling;var Xe=W(se,Ie,ne[je],be);if(Xe===null){Ie===null&&(Ie=at);break}t&&Ie&&Xe.alternate===null&&n(se,Ie),te=x(Xe,te,je),Se===null?Le=Xe:Se.sibling=Xe,Se=Xe,Ie=at}if(je===ne.length)return s(se,Ie),Le;if(Ie===null){for(;je<ne.length;je++)Ie=me(se,ne[je],be),Ie!==null&&(te=x(Ie,te,je),Se===null?Le=Ie:Se.sibling=Ie,Se=Ie);return Le}for(Ie=h(se,Ie);je<ne.length;je++)at=xe(Ie,se,je,ne[je],be),at!==null&&(t&&at.alternate!==null&&Ie.delete(at.key===null?je:at.key),te=x(at,te,je),Se===null?Le=at:Se.sibling=at,Se=at);return t&&Ie.forEach(function(_t){return n(se,_t)}),Le}function Oe(se,te,ne,be){var Le=mh(ne);if(typeof Le!="function")throw Error(ct(150));if(ne=Le.call(ne),ne==null)throw Error(ct(151));for(var Se=Le=null,Ie=te,je=te=0,at=null,Xe=ne.next();Ie!==null&&!Xe.done;je++,Xe=ne.next()){Ie.index>je?(at=Ie,Ie=null):at=Ie.sibling;var _t=W(se,Ie,Xe.value,be);if(_t===null){Ie===null&&(Ie=at);break}t&&Ie&&_t.alternate===null&&n(se,Ie),te=x(_t,te,je),Se===null?Le=_t:Se.sibling=_t,Se=_t,Ie=at}if(Xe.done)return s(se,Ie),Le;if(Ie===null){for(;!Xe.done;je++,Xe=ne.next())Xe=me(se,Xe.value,be),Xe!==null&&(te=x(Xe,te,je),Se===null?Le=Xe:Se.sibling=Xe,Se=Xe);return Le}for(Ie=h(se,Ie);!Xe.done;je++,Xe=ne.next())Xe=xe(Ie,se,je,Xe.value,be),Xe!==null&&(t&&Xe.alternate!==null&&Ie.delete(Xe.key===null?je:Xe.key),te=x(Xe,te,je),Se===null?Le=Xe:Se.sibling=Xe,Se=Xe);return t&&Ie.forEach(function(Mt){return n(se,Mt)}),Le}return function(se,te,ne,be){var Le=typeof ne=="object"&&ne!==null&&ne.type===Cu&&ne.key===null;Le&&(ne=ne.props.children);var Se=typeof ne=="object"&&ne!==null;if(Se)switch(ne.$$typeof){case hh:e:{for(Se=ne.key,Le=te;Le!==null;){if(Le.key===Se){switch(Le.tag){case 7:if(ne.type===Cu){s(se,Le.sibling),te=y(Le,ne.props.children),te.return=se,se=te;break e}break;default:if(Le.elementType===ne.type){s(se,Le.sibling),te=y(Le,ne.props),te.ref=Nh(se,Le,ne),te.return=se,se=te;break e}}s(se,Le);break}else n(se,Le);Le=Le.sibling}ne.type===Cu?(te=fp(ne.props.children,se.mode,be,ne.key),te.return=se,se=te):(be=um(ne.type,ne.key,ne.props,null,se.mode,be),be.ref=Nh(se,te,ne),be.return=se,se=be)}return l(se);case Tl:e:{for(Le=ne.key;te!==null;){if(te.key===Le)if(te.tag===4&&te.stateNode.containerInfo===ne.containerInfo&&te.stateNode.implementation===ne.implementation){s(se,te.sibling),te=y(te,ne.children||[]),te.return=se,se=te;break e}else{s(se,te);break}else n(se,te);te=te.sibling}te=vg(ne,se.mode,be),te.return=se,se=te}return l(se)}if(typeof ne=="string"||typeof ne=="number")return ne=""+ne,te!==null&&te.tag===6?(s(se,te.sibling),te=y(te,ne),te.return=se,se=te):(s(se,te),te=yg(ne,se.mode,be),te.return=se,se=te),l(se);if(qd(ne))return Ce(se,te,ne,be);if(mh(ne))return Oe(se,te,ne,be);if(Se&&Zd(se,ne),typeof ne=="undefined"&&!Le)switch(se.tag){case 1:case 22:case 0:case 11:case 15:throw Error(ct(152,jc(se.type)||"Component"))}return s(se,te)}}var Gd=Gx(!0),Wx=Gx(!1),jh={},Cs=Ou(jh),Vh=Ou(jh),qh=Ou(jh);function Ll(t){if(t===jh)throw Error(ct(174));return t}function Ov(t,n){switch(Wn(qh,n),Wn(Vh,t),Wn(Cs,jh),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Ny(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=Ny(n,t)}En(Cs),Wn(Cs,n)}function ap(){En(Cs),En(Vh),En(qh)}function $x(t){Ll(qh.current);var n=Ll(Cs.current),s=Ny(n,t.type);n!==s&&(Wn(Vh,t),Wn(Cs,s))}function Rv(t){Vh.current===t&&(En(Cs),En(Vh))}var $n=Ou(0);function Wd(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&64)!=0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var au=null,Nu=null,Is=!1;function Hx(t,n){var s=za(5,null,null,0);s.elementType="DELETED",s.type="DELETED",s.stateNode=n,s.return=t,s.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=s,t.lastEffect=s):t.firstEffect=t.lastEffect=s}function Xx(t,n){switch(t.tag){case 5:var s=t.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,!0):!1;case 13:return!1;default:return!1}}function Fv(t){if(Is){var n=Nu;if(n){var s=n;if(!Xx(t,n)){if(n=Yc(s.nextSibling),!n||!Xx(t,n)){t.flags=t.flags&-1025|2,Is=!1,au=t;return}Hx(au,s)}au=t,Nu=Yc(n.firstChild)}else t.flags=t.flags&-1025|2,Is=!1,au=t}}function Kx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;au=t}function $d(t){if(t!==au)return!1;if(!Is)return Kx(t),Is=!0,!1;var n=t.type;if(t.tag!==5||n!=="head"&&n!=="body"&&!bv(n,t.memoizedProps))for(n=Nu;n;)Hx(t,n),n=Yc(n.nextSibling);if(Kx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ct(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(n===0){Nu=Yc(t.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}t=t.nextSibling}Nu=null}}else Nu=au?Yc(t.stateNode.nextSibling):null;return!0}function Bv(){Nu=au=null,Is=!1}var sp=[];function Uv(){for(var t=0;t<sp.length;t++)sp[t]._workInProgressVersionPrimary=null;sp.length=0}var Zh=Pl.ReactCurrentDispatcher,Aa=Pl.ReactCurrentBatchConfig,Gh=0,ni=null,co=null,Ui=null,Hd=!1,Wh=!1;function Go(){throw Error(ct(321))}function Nv(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!Ia(t[s],n[s]))return!1;return!0}function jv(t,n,s,h,y,x){if(Gh=x,ni=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Zh.current=t===null||t.memoizedState===null?NP:jP,t=s(h,y),Wh){x=0;do{if(Wh=!1,!(25>x))throw Error(ct(301));x+=1,Ui=co=null,n.updateQueue=null,Zh.current=VP,t=s(h,y)}while(Wh)}if(Zh.current=Yd,n=co!==null&&co.next!==null,Gh=0,Ui=co=ni=null,Hd=!1,n)throw Error(ct(300));return t}function Dl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ui===null?ni.memoizedState=Ui=t:Ui=Ui.next=t,Ui}function Ol(){if(co===null){var t=ni.alternate;t=t!==null?t.memoizedState:null}else t=co.next;var n=Ui===null?ni.memoizedState:Ui.next;if(n!==null)Ui=n,co=t;else{if(t===null)throw Error(ct(310));co=t,t={memoizedState:co.memoizedState,baseState:co.baseState,baseQueue:co.baseQueue,queue:co.queue,next:null},Ui===null?ni.memoizedState=Ui=t:Ui=Ui.next=t}return Ui}function ks(t,n){return typeof n=="function"?n(t):n}function $h(t){var n=Ol(),s=n.queue;if(s===null)throw Error(ct(311));s.lastRenderedReducer=t;var h=co,y=h.baseQueue,x=s.pending;if(x!==null){if(y!==null){var l=y.next;y.next=x.next,x.next=l}h.baseQueue=y=x,s.pending=null}if(y!==null){y=y.next,h=h.baseState;var C=l=x=null,k=y;do{var F=k.lane;if((Gh&F)===F)C!==null&&(C=C.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),h=k.eagerReducer===t?k.eagerState:t(h,k.action);else{var $={lane:F,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null};C===null?(l=C=$,x=h):C=C.next=$,ni.lanes|=F,Jh|=F}k=k.next}while(k!==null&&k!==y);C===null?x=h:C.next=l,Ia(h,n.memoizedState)||(ts=!0),n.memoizedState=h,n.baseState=x,n.baseQueue=C,s.lastRenderedState=h}return[n.memoizedState,s.dispatch]}function Hh(t){var n=Ol(),s=n.queue;if(s===null)throw Error(ct(311));s.lastRenderedReducer=t;var h=s.dispatch,y=s.pending,x=n.memoizedState;if(y!==null){s.pending=null;var l=y=y.next;do x=t(x,l.action),l=l.next;while(l!==y);Ia(x,n.memoizedState)||(ts=!0),n.memoizedState=x,n.baseQueue===null&&(n.baseState=x),s.lastRenderedState=x}return[x,h]}function Jx(t,n,s){var h=n._getVersion;h=h(n._source);var y=n._workInProgressVersionPrimary;if(y!==null?t=y===h:(t=t.mutableReadLanes,(t=(Gh&t)===t)&&(n._workInProgressVersionPrimary=h,sp.push(n))),t)return s(n._source);throw sp.push(n),Error(ct(350))}function Yx(t,n,s,h){var y=To;if(y===null)throw Error(ct(349));var x=n._getVersion,l=x(n._source),C=Zh.current,k=C.useState(function(){return Jx(y,n,s)}),F=k[1],$=k[0];k=Ui;var me=t.memoizedState,W=me.refs,xe=W.getSnapshot,Ce=me.source;me=me.subscribe;var Oe=ni;return t.memoizedState={refs:W,source:n,subscribe:h},C.useEffect(function(){W.getSnapshot=s,W.setSnapshot=F;var se=x(n._source);if(!Ia(l,se)){se=s(n._source),Ia($,se)||(F(se),se=Vu(Oe),y.mutableReadLanes|=se&y.pendingLanes),se=y.mutableReadLanes,y.entangledLanes|=se;for(var te=y.entanglements,ne=se;0<ne;){var be=31-zu(ne),Le=1<<be;te[be]|=se,ne&=~Le}}},[s,n,h]),C.useEffect(function(){return h(n._source,function(){var se=W.getSnapshot,te=W.setSnapshot;try{te(se(n._source));var ne=Vu(Oe);y.mutableReadLanes|=ne&y.pendingLanes}catch(be){te(function(){throw be})}})},[n,h]),Ia(xe,s)&&Ia(Ce,n)&&Ia(me,h)||(t={pending:null,dispatch:null,lastRenderedReducer:ks,lastRenderedState:$},t.dispatch=F=Gv.bind(null,ni,t),k.queue=t,k.baseQueue=null,$=Jx(y,n,s),k.memoizedState=k.baseState=$),$}function Qx(t,n,s){var h=Ol();return Yx(h,t,n,s)}function Xh(t){var n=Dl();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t=n.queue={pending:null,dispatch:null,lastRenderedReducer:ks,lastRenderedState:t},t=t.dispatch=Gv.bind(null,ni,t),[n.memoizedState,t]}function Xd(t,n,s,h){return t={tag:t,create:n,destroy:s,deps:h,next:null},n=ni.updateQueue,n===null?(n={lastEffect:null},ni.updateQueue=n,n.lastEffect=t.next=t):(s=n.lastEffect,s===null?n.lastEffect=t.next=t:(h=s.next,s.next=t,t.next=h,n.lastEffect=t)),t}function eb(t){var n=Dl();return t={current:t},n.memoizedState=t}function Kd(){return Ol().memoizedState}function Vv(t,n,s,h){var y=Dl();ni.flags|=t,y.memoizedState=Xd(1|n,s,void 0,h===void 0?null:h)}function qv(t,n,s,h){var y=Ol();h=h===void 0?null:h;var x=void 0;if(co!==null){var l=co.memoizedState;if(x=l.destroy,h!==null&&Nv(h,l.deps)){Xd(n,s,x,h);return}}ni.flags|=t,y.memoizedState=Xd(1|n,s,x,h)}function tb(t,n){return Vv(516,4,t,n)}function Jd(t,n){return qv(516,4,t,n)}function rb(t,n){return qv(4,2,t,n)}function nb(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function ib(t,n,s){return s=s!=null?s.concat([t]):null,qv(4,2,nb.bind(null,n,t),s)}function Zv(){}function ob(t,n){var s=Ol();n=n===void 0?null:n;var h=s.memoizedState;return h!==null&&n!==null&&Nv(n,h[1])?h[0]:(s.memoizedState=[t,n],t)}function ab(t,n){var s=Ol();n=n===void 0?null:n;var h=s.memoizedState;return h!==null&&n!==null&&Nv(n,h[1])?h[0]:(t=t(),s.memoizedState=[t,n],t)}function UP(t,n){var s=np();zl(98>s?98:s,function(){t(!0)}),zl(97<s?97:s,function(){var h=Aa.transition;Aa.transition=1;try{t(!1),n()}finally{Aa.transition=h}})}function Gv(t,n,s){var h=la(),y=Vu(t),x={lane:y,action:s,eagerReducer:null,eagerState:null,next:null},l=n.pending;if(l===null?x.next=x:(x.next=l.next,l.next=x),n.pending=x,l=t.alternate,t===ni||l!==null&&l===ni)Wh=Hd=!0;else{if(t.lanes===0&&(l===null||l.lanes===0)&&(l=n.lastRenderedReducer,l!==null))try{var C=n.lastRenderedState,k=l(C,s);if(x.eagerReducer=l,x.eagerState=k,Ia(k,C))return}catch{}finally{}qu(t,y,h)}}var Yd={readContext:ka,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useOpaqueIdentifier:Go,unstable_isNewReconciler:!1},NP={readContext:ka,useCallback:function(t,n){return Dl().memoizedState=[t,n===void 0?null:n],t},useContext:ka,useEffect:tb,useImperativeHandle:function(t,n,s){return s=s!=null?s.concat([t]):null,Vv(4,2,nb.bind(null,n,t),s)},useLayoutEffect:function(t,n){return Vv(4,2,t,n)},useMemo:function(t,n){var s=Dl();return n=n===void 0?null:n,t=t(),s.memoizedState=[t,n],t},useReducer:function(t,n,s){var h=Dl();return n=s!==void 0?s(n):n,h.memoizedState=h.baseState=n,t=h.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},t=t.dispatch=Gv.bind(null,ni,t),[h.memoizedState,t]},useRef:eb,useState:Xh,useDebugValue:Zv,useDeferredValue:function(t){var n=Xh(t),s=n[0],h=n[1];return tb(function(){var y=Aa.transition;Aa.transition=1;try{h(t)}finally{Aa.transition=y}},[t]),s},useTransition:function(){var t=Xh(!1),n=t[0];return t=UP.bind(null,t[1]),eb(t),[t,n]},useMutableSource:function(t,n,s){var h=Dl();return h.memoizedState={refs:{getSnapshot:n,setSnapshot:null},source:t,subscribe:s},Yx(h,t,n,s)},useOpaqueIdentifier:function(){if(Is){var t=!1,n=LP(function(){throw t||(t=!0,s("r:"+(Sv++).toString(36))),Error(ct(355))}),s=Xh(n)[1];return(ni.mode&2)==0&&(ni.flags|=516,Xd(5,function(){s("r:"+(Sv++).toString(36))},void 0,null)),n}return n="r:"+(Sv++).toString(36),Xh(n),n},unstable_isNewReconciler:!1},jP={readContext:ka,useCallback:ob,useContext:ka,useEffect:Jd,useImperativeHandle:ib,useLayoutEffect:rb,useMemo:ab,useReducer:$h,useRef:Kd,useState:function(){return $h(ks)},useDebugValue:Zv,useDeferredValue:function(t){var n=$h(ks),s=n[0],h=n[1];return Jd(function(){var y=Aa.transition;Aa.transition=1;try{h(t)}finally{Aa.transition=y}},[t]),s},useTransition:function(){var t=$h(ks)[0];return[Kd().current,t]},useMutableSource:Qx,useOpaqueIdentifier:function(){return $h(ks)[0]},unstable_isNewReconciler:!1},VP={readContext:ka,useCallback:ob,useContext:ka,useEffect:Jd,useImperativeHandle:ib,useLayoutEffect:rb,useMemo:ab,useReducer:Hh,useRef:Kd,useState:function(){return Hh(ks)},useDebugValue:Zv,useDeferredValue:function(t){var n=Hh(ks),s=n[0],h=n[1];return Jd(function(){var y=Aa.transition;Aa.transition=1;try{h(t)}finally{Aa.transition=y}},[t]),s},useTransition:function(){var t=Hh(ks)[0];return[Kd().current,t]},useMutableSource:Qx,useOpaqueIdentifier:function(){return Hh(ks)[0]},unstable_isNewReconciler:!1},qP=Pl.ReactCurrentOwner,ts=!1;function Wo(t,n,s,h){n.child=t===null?Wx(n,null,s,h):Gd(n,t.child,s,h)}function sb(t,n,s,h,y){s=s.render;var x=n.ref;return op(n,y),h=jv(t,n,s,h,x,y),t!==null&&!ts?(n.updateQueue=t.updateQueue,n.flags&=-517,t.lanes&=~y,su(t,n,y)):(n.flags|=1,Wo(t,n,h,y),n.child)}function ub(t,n,s,h,y,x){if(t===null){var l=s.type;return typeof l=="function"&&!dg(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=l,lb(t,n,l,h,y,x)):(t=um(s.type,null,h,n,n.mode,x),t.ref=n.ref,t.return=n,n.child=t)}return l=t.child,(y&x)==0&&(y=l.memoizedProps,s=s.compare,s=s!==null?s:Lh,s(y,h)&&t.ref===n.ref)?su(t,n,x):(n.flags|=1,t=Wu(l,h),t.ref=n.ref,t.return=n,n.child=t)}function lb(t,n,s,h,y,x){if(t!==null&&Lh(t.memoizedProps,h)&&t.ref===n.ref)if(ts=!1,(x&y)!=0)(t.flags&16384)!=0&&(ts=!0);else return n.lanes=t.lanes,su(t,n,x);return $v(t,n,s,h,x)}function Wv(t,n,s){var h=n.pendingProps,y=h.children,x=t!==null?t.memoizedState:null;if(h.mode==="hidden"||h.mode==="unstable-defer-without-hiding")if((n.mode&4)==0)n.memoizedState={baseLanes:0},sm(n,s);else if((s&1073741824)!=0)n.memoizedState={baseLanes:0},sm(n,x!==null?x.baseLanes:s);else return t=x!==null?x.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t},sm(n,t),null;else x!==null?(h=x.baseLanes|s,n.memoizedState=null):h=s,sm(n,h);return Wo(t,n,y,s),n.child}function cb(t,n){var s=n.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(n.flags|=128)}function $v(t,n,s,h,y){var x=Zo(s)?Al:uo.current;return x=rp(n,x),op(n,y),s=jv(t,n,s,h,x,y),t!==null&&!ts?(n.updateQueue=t.updateQueue,n.flags&=-517,t.lanes&=~y,su(t,n,y)):(n.flags|=1,Wo(t,n,s,y),n.child)}function pb(t,n,s,h,y){if(Zo(s)){var x=!0;Od(n)}else x=!1;if(op(n,y),n.stateNode===null)t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2),qx(n,s,h),Dv(n,s,h,y),h=!0;else if(t===null){var l=n.stateNode,C=n.memoizedProps;l.props=C;var k=l.context,F=s.contextType;typeof F=="object"&&F!==null?F=ka(F):(F=Zo(s)?Al:uo.current,F=rp(n,F));var $=s.getDerivedStateFromProps,me=typeof $=="function"||typeof l.getSnapshotBeforeUpdate=="function";me||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(C!==h||k!==F)&&Zx(n,l,h,F),Fu=!1;var W=n.memoizedState;l.state=W,Uh(n,h,l,y),k=n.memoizedState,C!==h||W!==k||qo.current||Fu?(typeof $=="function"&&(jd(n,s,$,h),k=n.memoizedState),(C=Fu||Vx(n,s,C,h,W,k,F))?(me||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4)):(typeof l.componentDidMount=="function"&&(n.flags|=4),n.memoizedProps=h,n.memoizedState=k),l.props=h,l.state=k,l.context=F,h=C):(typeof l.componentDidMount=="function"&&(n.flags|=4),h=!1)}else{l=n.stateNode,Bx(t,n),C=n.memoizedProps,F=n.type===n.elementType?C:es(n.type,C),l.props=F,me=n.pendingProps,W=l.context,k=s.contextType,typeof k=="object"&&k!==null?k=ka(k):(k=Zo(s)?Al:uo.current,k=rp(n,k));var xe=s.getDerivedStateFromProps;($=typeof xe=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(C!==me||W!==k)&&Zx(n,l,h,k),Fu=!1,W=n.memoizedState,l.state=W,Uh(n,h,l,y);var Ce=n.memoizedState;C!==me||W!==Ce||qo.current||Fu?(typeof xe=="function"&&(jd(n,s,xe,h),Ce=n.memoizedState),(F=Fu||Vx(n,s,F,h,W,Ce,k))?($||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(h,Ce,k),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(h,Ce,k)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=256)):(typeof l.componentDidUpdate!="function"||C===t.memoizedProps&&W===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&W===t.memoizedState||(n.flags|=256),n.memoizedProps=h,n.memoizedState=Ce),l.props=h,l.state=Ce,l.context=k,h=F):(typeof l.componentDidUpdate!="function"||C===t.memoizedProps&&W===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&W===t.memoizedState||(n.flags|=256),h=!1)}return Hv(t,n,s,h,x,y)}function Hv(t,n,s,h,y,x){cb(t,n);var l=(n.flags&64)!=0;if(!h&&!l)return y&&Ix(n,s,!1),su(t,n,x);h=n.stateNode,qP.current=n;var C=l&&typeof s.getDerivedStateFromError!="function"?null:h.render();return n.flags|=1,t!==null&&l?(n.child=Gd(n,t.child,null,x),n.child=Gd(n,null,C,x)):Wo(t,n,C,x),n.memoizedState=h.state,y&&Ix(n,s,!0),n.child}function hb(t){var n=t.stateNode;n.pendingContext?Tx(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Tx(t,n.context,!1),Ov(t,n.containerInfo)}var Qd={dehydrated:null,retryLane:0};function fb(t,n,s){var h=n.pendingProps,y=$n.current,x=!1,l;return(l=(n.flags&64)!=0)||(l=t!==null&&t.memoizedState===null?!1:(y&2)!=0),l?(x=!0,n.flags&=-65):t!==null&&t.memoizedState===null||h.fallback===void 0||h.unstable_avoidThisFallback===!0||(y|=1),Wn($n,y&1),t===null?(h.fallback!==void 0&&Fv(n),t=h.children,y=h.fallback,x?(t=db(n,t,y,s),n.child.memoizedState={baseLanes:s},n.memoizedState=Qd,t):typeof h.unstable_expectedLoadTime=="number"?(t=db(n,t,y,s),n.child.memoizedState={baseLanes:s},n.memoizedState=Qd,n.lanes=33554432,t):(s=mg({mode:"visible",children:t},n.mode,s,null),s.return=n,n.child=s)):t.memoizedState!==null?x?(h=yb(t,n,h.children,h.fallback,s),x=n.child,y=t.child.memoizedState,x.memoizedState=y===null?{baseLanes:s}:{baseLanes:y.baseLanes|s},x.childLanes=t.childLanes&~s,n.memoizedState=Qd,h):(s=mb(t,n,h.children,s),n.memoizedState=null,s):x?(h=yb(t,n,h.children,h.fallback,s),x=n.child,y=t.child.memoizedState,x.memoizedState=y===null?{baseLanes:s}:{baseLanes:y.baseLanes|s},x.childLanes=t.childLanes&~s,n.memoizedState=Qd,h):(s=mb(t,n,h.children,s),n.memoizedState=null,s)}function db(t,n,s,h){var y=t.mode,x=t.child;return n={mode:"hidden",children:n},(y&2)==0&&x!==null?(x.childLanes=0,x.pendingProps=n):x=mg(n,y,0,null),s=fp(s,y,h,null),x.return=t,s.return=t,x.sibling=s,t.child=x,s}function mb(t,n,s,h){var y=t.child;return t=y.sibling,s=Wu(y,{mode:"visible",children:s}),(n.mode&2)==0&&(s.lanes=h),s.return=n,s.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,n.firstEffect=n.lastEffect=t),n.child=s}function yb(t,n,s,h,y){var x=n.mode,l=t.child;t=l.sibling;var C={mode:"hidden",children:s};return(x&2)==0&&n.child!==l?(s=n.child,s.childLanes=0,s.pendingProps=C,l=s.lastEffect,l!==null?(n.firstEffect=s.firstEffect,n.lastEffect=l,l.nextEffect=null):n.firstEffect=n.lastEffect=null):s=Wu(l,C),t!==null?h=Wu(t,h):(h=fp(h,x,y,null),h.flags|=2),h.return=n,s.return=n,s.sibling=h,n.child=s,h}function vb(t,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n),Fx(t.return,n)}function Xv(t,n,s,h,y,x){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:s,tailMode:y,lastEffect:x}:(l.isBackwards=n,l.rendering=null,l.renderingStartTime=0,l.last=h,l.tail=s,l.tailMode=y,l.lastEffect=x)}function gb(t,n,s){var h=n.pendingProps,y=h.revealOrder,x=h.tail;if(Wo(t,n,h.children,s),h=$n.current,(h&2)!=0)h=h&1|2,n.flags|=64;else{if(t!==null&&(t.flags&64)!=0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vb(t,s);else if(t.tag===19)vb(t,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}h&=1}if(Wn($n,h),(n.mode&2)==0)n.memoizedState=null;else switch(y){case"forwards":for(s=n.child,y=null;s!==null;)t=s.alternate,t!==null&&Wd(t)===null&&(y=s),s=s.sibling;s=y,s===null?(y=n.child,n.child=null):(y=s.sibling,s.sibling=null),Xv(n,!1,y,s,x,n.lastEffect);break;case"backwards":for(s=null,y=n.child,n.child=null;y!==null;){if(t=y.alternate,t!==null&&Wd(t)===null){n.child=y;break}t=y.sibling,y.sibling=s,s=y,y=t}Xv(n,!0,s,null,x,n.lastEffect);break;case"together":Xv(n,!1,null,null,void 0,n.lastEffect);break;default:n.memoizedState=null}return n.child}function su(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),Jh|=n.lanes,(s&n.childLanes)!=0){if(t!==null&&n.child!==t.child)throw Error(ct(153));if(n.child!==null){for(t=n.child,s=Wu(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Wu(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}return null}var _b,Kv,xb,bb;_b=function(t,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Kv=function(){};xb=function(t,n,s,h){var y=t.memoizedProps;if(y!==h){t=n.stateNode,Ll(Cs.current);var x=null;switch(s){case"input":y=Dy(t,y),h=Dy(t,h),x=[];break;case"option":y=Fy(t,y),h=Fy(t,h),x=[];break;case"select":y=In({},y,{value:void 0}),h=In({},h,{value:void 0}),x=[];break;case"textarea":y=By(t,y),h=By(t,h),x=[];break;default:typeof y.onClick!="function"&&typeof h.onClick=="function"&&(t.onclick=Ad)}jy(s,h);var l;s=null;for(F in y)if(!h.hasOwnProperty(F)&&y.hasOwnProperty(F)&&y[F]!=null)if(F==="style"){var C=y[F];for(l in C)C.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(ph.hasOwnProperty(F)?x||(x=[]):(x=x||[]).push(F,null));for(F in h){var k=h[F];if(C=y!=null?y[F]:void 0,h.hasOwnProperty(F)&&k!==C&&(k!=null||C!=null))if(F==="style")if(C){for(l in C)!C.hasOwnProperty(l)||k&&k.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in k)k.hasOwnProperty(l)&&C[l]!==k[l]&&(s||(s={}),s[l]=k[l])}else s||(x||(x=[]),x.push(F,s)),s=k;else F==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,C=C?C.__html:void 0,k!=null&&C!==k&&(x=x||[]).push(F,k)):F==="children"?typeof k!="string"&&typeof k!="number"||(x=x||[]).push(F,""+k):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(ph.hasOwnProperty(F)?(k!=null&&F==="onScroll"&&Sn("scroll",t),x||C===k||(x=[])):typeof k=="object"&&k!==null&&k.$$typeof===ky?k.toString():(x=x||[]).push(F,k))}s&&(x=x||[]).push("style",s);var F=x;(n.updateQueue=F)&&(n.flags|=4)}};bb=function(t,n,s,h){s!==h&&(n.flags|=4)};function Kh(t,n){if(!Is)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:h.sibling=null}}function ZP(t,n,s){var h=n.pendingProps;switch(n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Zo(n.type)&&Dd(),null;case 3:return ap(),En(qo),En(uo),Uv(),h=n.stateNode,h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(t===null||t.child===null)&&($d(n)?n.flags|=4:h.hydrate||(n.flags|=256)),Kv(n),null;case 5:Rv(n);var y=Ll(qh.current);if(s=n.type,t!==null&&n.stateNode!=null)xb(t,n,s,h,y),t.ref!==n.ref&&(n.flags|=128);else{if(!h){if(n.stateNode===null)throw Error(ct(166));return null}if(t=Ll(Cs.current),$d(n)){h=n.stateNode,s=n.type;var x=n.memoizedProps;switch(h[Du]=n,h[zd]=x,s){case"dialog":Sn("cancel",h),Sn("close",h);break;case"iframe":case"object":case"embed":Sn("load",h);break;case"video":case"audio":for(t=0;t<Oh.length;t++)Sn(Oh[t],h);break;case"source":Sn("error",h);break;case"img":case"image":case"link":Sn("error",h),Sn("load",h);break;case"details":Sn("toggle",h);break;case"input":p1(h,x),Sn("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!x.multiple},Sn("invalid",h);break;case"textarea":d1(h,x),Sn("invalid",h)}jy(s,x),t=null;for(var l in x)x.hasOwnProperty(l)&&(y=x[l],l==="children"?typeof y=="string"?h.textContent!==y&&(t=["children",y]):typeof y=="number"&&h.textContent!==""+y&&(t=["children",""+y]):ph.hasOwnProperty(l)&&y!=null&&l==="onScroll"&&Sn("scroll",h));switch(s){case"input":fd(h),f1(h,x,!0);break;case"textarea":fd(h),y1(h);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(h.onclick=Ad)}h=t,n.updateQueue=h,h!==null&&(n.flags|=4)}else{switch(l=y.nodeType===9?y:y.ownerDocument,t===Uy.html&&(t=v1(s)),t===Uy.html?s==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof h.is=="string"?t=l.createElement(s,{is:h.is}):(t=l.createElement(s),s==="select"&&(l=t,h.multiple?l.multiple=!0:h.size&&(l.size=h.size))):t=l.createElementNS(t,s),t[Du]=n,t[zd]=h,_b(t,n,!1,!1),n.stateNode=t,l=Vy(s,h),s){case"dialog":Sn("cancel",t),Sn("close",t),y=h;break;case"iframe":case"object":case"embed":Sn("load",t),y=h;break;case"video":case"audio":for(y=0;y<Oh.length;y++)Sn(Oh[y],t);y=h;break;case"source":Sn("error",t),y=h;break;case"img":case"image":case"link":Sn("error",t),Sn("load",t),y=h;break;case"details":Sn("toggle",t),y=h;break;case"input":p1(t,h),y=Dy(t,h),Sn("invalid",t);break;case"option":y=Fy(t,h);break;case"select":t._wrapperState={wasMultiple:!!h.multiple},y=In({},h,{value:void 0}),Sn("invalid",t);break;case"textarea":d1(t,h),y=By(t,h),Sn("invalid",t);break;default:y=h}jy(s,y);var C=y;for(x in C)if(C.hasOwnProperty(x)){var k=C[x];x==="style"?x1(t,k):x==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&g1(t,k)):x==="children"?typeof k=="string"?(s!=="textarea"||k!=="")&&vh(t,k):typeof k=="number"&&vh(t,""+k):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(ph.hasOwnProperty(x)?k!=null&&x==="onScroll"&&Sn("scroll",t):k!=null&&Sy(t,x,k,l))}switch(s){case"input":fd(t),f1(t,h,!1);break;case"textarea":fd(t),y1(t);break;case"option":h.value!=null&&t.setAttribute("value",""+Iu(h.value));break;case"select":t.multiple=!!h.multiple,x=h.value,x!=null?Vc(t,!!h.multiple,x,!1):h.defaultValue!=null&&Vc(t,!!h.multiple,h.defaultValue,!0);break;default:typeof y.onClick=="function"&&(t.onclick=Ad)}bx(s,h)&&(n.flags|=4)}n.ref!==null&&(n.flags|=128)}return null;case 6:if(t&&n.stateNode!=null)bb(t,n,t.memoizedProps,h);else{if(typeof h!="string"&&n.stateNode===null)throw Error(ct(166));s=Ll(qh.current),Ll(Cs.current),$d(n)?(h=n.stateNode,s=n.memoizedProps,h[Du]=n,h.nodeValue!==s&&(n.flags|=4)):(h=(s.nodeType===9?s:s.ownerDocument).createTextNode(h),h[Du]=n,n.stateNode=h)}return null;case 13:return En($n),h=n.memoizedState,(n.flags&64)!=0?(n.lanes=s,n):(h=h!==null,s=!1,t===null?n.memoizedProps.fallback!==void 0&&$d(n):s=t.memoizedState!==null,h&&!s&&(n.mode&2)!=0&&(t===null&&n.memoizedProps.unstable_avoidThisFallback!==!0||($n.current&1)!=0?Ni===0&&(Ni=3):((Ni===0||Ni===3)&&(Ni=4),To===null||(Jh&134217727)==0&&(lp&134217727)==0||pp(To,po))),(h||s)&&(n.flags|=4),null);case 4:return ap(),Kv(n),t===null&&yx(n.stateNode.containerInfo),null;case 10:return zv(n),null;case 17:return Zo(n.type)&&Dd(),null;case 19:if(En($n),h=n.memoizedState,h===null)return null;if(x=(n.flags&64)!=0,l=h.rendering,l===null)if(x)Kh(h,!1);else{if(Ni!==0||t!==null&&(t.flags&64)!=0)for(t=n.child;t!==null;){if(l=Wd(t),l!==null){for(n.flags|=64,Kh(h,!1),x=l.updateQueue,x!==null&&(n.updateQueue=x,n.flags|=4),h.lastEffect===null&&(n.firstEffect=null),n.lastEffect=h.lastEffect,h=s,s=n.child;s!==null;)x=s,t=h,x.flags&=2,x.nextEffect=null,x.firstEffect=null,x.lastEffect=null,l=x.alternate,l===null?(x.childLanes=0,x.lanes=t,x.child=null,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=l.childLanes,x.lanes=l.lanes,x.child=l.child,x.memoizedProps=l.memoizedProps,x.memoizedState=l.memoizedState,x.updateQueue=l.updateQueue,x.type=l.type,t=l.dependencies,x.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Wn($n,$n.current&1|2),n.child}t=t.sibling}h.tail!==null&&lo()>sg&&(n.flags|=64,x=!0,Kh(h,!1),n.lanes=33554432)}else{if(!x)if(t=Wd(l),t!==null){if(n.flags|=64,x=!0,s=t.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Kh(h,!0),h.tail===null&&h.tailMode==="hidden"&&!l.alternate&&!Is)return n=n.lastEffect=h.lastEffect,n!==null&&(n.nextEffect=null),null}else 2*lo()-h.renderingStartTime>sg&&s!==1073741824&&(n.flags|=64,x=!0,Kh(h,!1),n.lanes=33554432);h.isBackwards?(l.sibling=n.child,n.child=l):(s=h.last,s!==null?s.sibling=l:n.child=l,h.last=l)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.lastEffect=n.lastEffect,h.renderingStartTime=lo(),s.sibling=null,n=$n.current,Wn($n,x?n&1|2:n&1),s):null;case 23:case 24:return fg(),t!==null&&t.memoizedState!==null!=(n.memoizedState!==null)&&h.mode!=="unstable-defer-without-hiding"&&(n.flags|=4),null}throw Error(ct(156,n.tag))}function GP(t){switch(t.tag){case 1:Zo(t.type)&&Dd();var n=t.flags;return n&4096?(t.flags=n&-4097|64,t):null;case 3:if(ap(),En(qo),En(uo),Uv(),n=t.flags,(n&64)!=0)throw Error(ct(285));return t.flags=n&-4097|64,t;case 5:return Rv(t),null;case 13:return En($n),n=t.flags,n&4096?(t.flags=n&-4097|64,t):null;case 19:return En($n),null;case 4:return ap(),null;case 10:return zv(t),null;case 23:case 24:return fg(),null;default:return null}}function Jv(t,n){try{var s="",h=n;do s+=PE(h),h=h.return;while(h);var y=s}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:t,source:n,stack:y}}function Yv(t,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var WP=typeof WeakMap=="function"?WeakMap:Map;function wb(t,n,s){s=Bu(-1,s),s.tag=3,s.payload={element:null};var h=n.value;return s.callback=function(){rm||(rm=!0,ug=h),Yv(t,n)},s}function Sb(t,n,s){s=Bu(-1,s),s.tag=3;var h=t.type.getDerivedStateFromError;if(typeof h=="function"){var y=n.value;s.payload=function(){return Yv(t,n),h(y)}}var x=t.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){typeof h!="function"&&(As===null?As=new Set([this]):As.add(this),Yv(t,n));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),s}var $P=typeof WeakSet=="function"?WeakSet:Set;function Eb(t){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Gu(t,s)}else n.current=null}function HP(t,n){switch(n.tag){case 0:case 11:case 15:case 22:return;case 1:if(n.flags&256&&t!==null){var s=t.memoizedProps,h=t.memoizedState;t=n.stateNode,n=t.getSnapshotBeforeUpdate(n.elementType===n.type?s:es(n.type,s),h),t.__reactInternalSnapshotBeforeUpdate=n}return;case 3:n.flags&256&&wv(n.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(ct(163))}function XP(t,n,s){switch(s.tag){case 0:case 11:case 15:case 22:if(n=s.updateQueue,n=n!==null?n.lastEffect:null,n!==null){t=n=n.next;do{if((t.tag&3)==3){var h=t.create;t.destroy=h()}t=t.next}while(t!==n)}if(n=s.updateQueue,n=n!==null?n.lastEffect:null,n!==null){t=n=n.next;do{var y=t;h=y.next,y=y.tag,(y&4)!=0&&(y&1)!=0&&(Ub(s,t),nT(s,t)),t=h}while(t!==n)}return;case 1:t=s.stateNode,s.flags&4&&(n===null?t.componentDidMount():(h=s.elementType===s.type?n.memoizedProps:es(s.type,n.memoizedProps),t.componentDidUpdate(h,n.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),n=s.updateQueue,n!==null&&Nx(s,n,t);return;case 3:if(n=s.updateQueue,n!==null){if(t=null,s.child!==null)switch(s.child.tag){case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}Nx(s,n,t)}return;case 5:t=s.stateNode,n===null&&s.flags&4&&bx(s.type,s.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:s.memoizedState===null&&(s=s.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&R1(s))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(ct(163))}function Pb(t,n){for(var s=t;;){if(s.tag===5){var h=s.stateNode;if(n)h=h.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{h=s.stateNode;var y=s.memoizedProps.style;y=y!=null&&y.hasOwnProperty("display")?y.display:null,h.style.display=_1("display",y)}}else if(s.tag===6)s.stateNode.nodeValue=n?"":s.memoizedProps;else if((s.tag!==23&&s.tag!==24||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}}function Tb(t,n){if(Ml&&typeof Ml.onCommitFiberUnmount=="function")try{Ml.onCommitFiberUnmount(Pv,n)}catch{}switch(n.tag){case 0:case 11:case 14:case 15:case 22:if(t=n.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var s=t=t.next;do{var h=s,y=h.destroy;if(h=h.tag,y!==void 0)if((h&4)!=0)Ub(n,s);else{h=n;try{y()}catch(x){Gu(h,x)}}s=s.next}while(s!==t)}break;case 1:if(Eb(n),t=n.stateNode,typeof t.componentWillUnmount=="function")try{t.props=n.memoizedProps,t.state=n.memoizedState,t.componentWillUnmount()}catch(x){Gu(n,x)}break;case 5:Eb(n);break;case 4:Ab(t,n)}}function Cb(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function Ib(t){return t.tag===5||t.tag===3||t.tag===4}function kb(t){e:{for(var n=t.return;n!==null;){if(Ib(n))break e;n=n.return}throw Error(ct(160))}var s=n;switch(n=s.stateNode,s.tag){case 5:var h=!1;break;case 3:n=n.containerInfo,h=!0;break;case 4:n=n.containerInfo,h=!0;break;default:throw Error(ct(161))}s.flags&16&&(vh(n,""),s.flags&=-17);e:t:for(s=t;;){for(;s.sibling===null;){if(s.return===null||Ib(s.return)){s=null;break e}s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2)){s=s.stateNode;break e}}h?Qv(t,s,n):eg(t,s,n)}function Qv(t,n,s){var h=t.tag,y=h===5||h===6;if(y)t=y?t.stateNode:t.stateNode.instance,n?s.nodeType===8?s.parentNode.insertBefore(t,n):s.insertBefore(t,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(t,s)):(n=s,n.appendChild(t)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Ad));else if(h!==4&&(t=t.child,t!==null))for(Qv(t,n,s),t=t.sibling;t!==null;)Qv(t,n,s),t=t.sibling}function eg(t,n,s){var h=t.tag,y=h===5||h===6;if(y)t=y?t.stateNode:t.stateNode.instance,n?s.insertBefore(t,n):s.appendChild(t);else if(h!==4&&(t=t.child,t!==null))for(eg(t,n,s),t=t.sibling;t!==null;)eg(t,n,s),t=t.sibling}function Ab(t,n){for(var s=n,h=!1,y,x;;){if(!h){h=s.return;e:for(;;){if(h===null)throw Error(ct(160));switch(y=h.stateNode,h.tag){case 5:x=!1;break e;case 3:y=y.containerInfo,x=!0;break e;case 4:y=y.containerInfo,x=!0;break e}h=h.return}h=!0}if(s.tag===5||s.tag===6){e:for(var l=t,C=s,k=C;;)if(Tb(l,k),k.child!==null&&k.tag!==4)k.child.return=k,k=k.child;else{if(k===C)break e;for(;k.sibling===null;){if(k.return===null||k.return===C)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}x?(l=y,C=s.stateNode,l.nodeType===8?l.parentNode.removeChild(C):l.removeChild(C)):y.removeChild(s.stateNode)}else if(s.tag===4){if(s.child!==null){y=s.stateNode.containerInfo,x=!0,s.child.return=s,s=s.child;continue}}else if(Tb(t,s),s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return,s.tag===4&&(h=!1)}s.sibling.return=s.return,s=s.sibling}}function tg(t,n){switch(n.tag){case 0:case 11:case 14:case 15:case 22:var s=n.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var h=s=s.next;do(h.tag&3)==3&&(t=h.destroy,h.destroy=void 0,t!==void 0&&t()),h=h.next;while(h!==s)}return;case 1:return;case 5:if(s=n.stateNode,s!=null){h=n.memoizedProps;var y=t!==null?t.memoizedProps:h;t=n.type;var x=n.updateQueue;if(n.updateQueue=null,x!==null){for(s[zd]=h,t==="input"&&h.type==="radio"&&h.name!=null&&h1(s,h),Vy(t,y),n=Vy(t,h),y=0;y<x.length;y+=2){var l=x[y],C=x[y+1];l==="style"?x1(s,C):l==="dangerouslySetInnerHTML"?g1(s,C):l==="children"?vh(s,C):Sy(s,l,C,n)}switch(t){case"input":Oy(s,h);break;case"textarea":m1(s,h);break;case"select":t=s._wrapperState.wasMultiple,s._wrapperState.wasMultiple=!!h.multiple,x=h.value,x!=null?Vc(s,!!h.multiple,x,!1):t!==!!h.multiple&&(h.defaultValue!=null?Vc(s,!!h.multiple,h.defaultValue,!0):Vc(s,!!h.multiple,h.multiple?[]:"",!1))}}}return;case 6:if(n.stateNode===null)throw Error(ct(162));n.stateNode.nodeValue=n.memoizedProps;return;case 3:s=n.stateNode,s.hydrate&&(s.hydrate=!1,R1(s.containerInfo));return;case 12:return;case 13:n.memoizedState!==null&&(ag=lo(),Pb(n.child,!0)),Mb(n);return;case 19:Mb(n);return;case 17:return;case 23:case 24:Pb(n,n.memoizedState!==null);return}throw Error(ct(163))}function Mb(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new $P),n.forEach(function(h){var y=aT.bind(null,t,h);s.has(h)||(s.add(h),h.then(y,y))})}}function KP(t,n){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(n=n.memoizedState,n!==null&&n.dehydrated===null):!1}var JP=Math.ceil,em=Pl.ReactCurrentDispatcher,rg=Pl.ReactCurrentOwner,ir=0,To=null,di=null,po=0,Rl=0,ng=Ou(0),Ni=0,tm=null,up=0,Jh=0,lp=0,ig=0,og=null,ag=0,sg=1/0;function cp(){sg=lo()+500}var Lt=null,rm=!1,ug=null,As=null,ju=!1,Yh=null,Qh=90,lg=[],cg=[],uu=null,ef=0,pg=null,nm=-1,lu=0,im=0,tf=null,om=!1;function la(){return(ir&48)!=0?lo():nm!==-1?nm:nm=lo()}function Vu(t){if(t=t.mode,(t&2)==0)return 1;if((t&4)==0)return np()===99?1:2;if(lu===0&&(lu=up),BP.transition!==0){im!==0&&(im=og!==null?og.pendingLanes:0),t=lu;var n=4186112&~im;return n&=-n,n===0&&(t=4186112&~t,n=t&-t,n===0&&(n=8192)),n}return t=np(),(ir&4)!=0&&t===98?t=bd(12,lu):(t=jE(t),t=bd(t,lu)),t}function qu(t,n,s){if(50<ef)throw ef=0,pg=null,Error(ct(185));if(t=am(t,n),t===null)return null;wd(t,n,s),t===To&&(lp|=n,Ni===4&&pp(t,po));var h=np();n===1?(ir&8)!=0&&(ir&48)==0?hg(t):(Ma(t,s),ir===0&&(cp(),Ts())):((ir&4)==0||h!==98&&h!==99||(uu===null?uu=new Set([t]):uu.add(t)),Ma(t,s)),og=t}function am(t,n){t.lanes|=n;var s=t.alternate;for(s!==null&&(s.lanes|=n),s=t,t=t.return;t!==null;)t.childLanes|=n,s=t.alternate,s!==null&&(s.childLanes|=n),s=t,t=t.return;return s.tag===3?s.stateNode:null}function Ma(t,n){for(var s=t.callbackNode,h=t.suspendedLanes,y=t.pingedLanes,x=t.expirationTimes,l=t.pendingLanes;0<l;){var C=31-zu(l),k=1<<C,F=x[C];if(F===-1){if((k&h)==0||(k&y)!=0){F=n,Wc(k);var $=vn;x[C]=10<=$?F+250:6<=$?F+5e3:-1}}else F<=n&&(t.expiredLanes|=k);l&=~k}if(h=Ch(t,t===To?po:0),n=vn,h===0)s!==null&&(s!==kv&&Cv(s),t.callbackNode=null,t.callbackPriority=0);else{if(s!==null){if(t.callbackPriority===n)return;s!==kv&&Cv(s)}n===15?(s=hg.bind(null,t),ou===null?(ou=[s],Fd=Tv(Rd,Rx)):ou.push(s),s=kv):n===14?s=Bh(99,hg.bind(null,t)):(s=VE(n),s=Bh(s,zb.bind(null,t))),t.callbackPriority=n,t.callbackNode=s}}function zb(t){if(nm=-1,im=lu=0,(ir&48)!=0)throw Error(ct(327));var n=t.callbackNode;if(Zu()&&t.callbackNode!==n)return null;var s=Ch(t,t===To?po:0);if(s===0)return null;var h=s,y=ir;ir|=16;var x=Rb();(To!==t||po!==h)&&(cp(),hp(t,h));do try{eT();break}catch(C){Ob(t,C)}while(1);if(Mv(),em.current=x,ir=y,di!==null?h=0:(To=null,po=0,h=Ni),(up&lp)!=0)hp(t,0);else if(h!==0){if(h===2&&(ir|=64,t.hydrate&&(t.hydrate=!1,wv(t.containerInfo)),s=q1(t),s!==0&&(h=rf(t,s))),h===1)throw n=tm,hp(t,0),pp(t,s),Ma(t,lo()),n;switch(t.finishedWork=t.current.alternate,t.finishedLanes=s,h){case 0:case 1:throw Error(ct(345));case 2:Fl(t);break;case 3:if(pp(t,s),(s&62914560)===s&&(h=ag+500-lo(),10<h)){if(Ch(t,0)!==0)break;if(y=t.suspendedLanes,(y&s)!==s){la(),t.pingedLanes|=t.suspendedLanes&y;break}t.timeoutHandle=wx(Fl.bind(null,t),h);break}Fl(t);break;case 4:if(pp(t,s),(s&4186112)===s)break;for(h=t.eventTimes,y=-1;0<s;){var l=31-zu(s);x=1<<l,l=h[l],l>y&&(y=l),s&=~x}if(s=y,s=lo()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*JP(s/1960))-s,10<s){t.timeoutHandle=wx(Fl.bind(null,t),s);break}Fl(t);break;case 5:Fl(t);break;default:throw Error(ct(329))}}return Ma(t,lo()),t.callbackNode===n?zb.bind(null,t):null}function pp(t,n){for(n&=~ig,n&=~lp,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var s=31-zu(n),h=1<<s;t[s]=-1,n&=~h}}function hg(t){if((ir&48)!=0)throw Error(ct(327));if(Zu(),t===To&&(t.expiredLanes&po)!=0){var n=po,s=rf(t,n);(up&lp)!=0&&(n=Ch(t,n),s=rf(t,n))}else n=Ch(t,0),s=rf(t,n);if(t.tag!==0&&s===2&&(ir|=64,t.hydrate&&(t.hydrate=!1,wv(t.containerInfo)),n=q1(t),n!==0&&(s=rf(t,n))),s===1)throw s=tm,hp(t,0),pp(t,n),Ma(t,lo()),s;return t.finishedWork=t.current.alternate,t.finishedLanes=n,Fl(t),Ma(t,lo()),null}function YP(){if(uu!==null){var t=uu;uu=null,t.forEach(function(n){n.expiredLanes|=24&n.pendingLanes,Ma(n,lo())})}Ts()}function Lb(t,n){var s=ir;ir|=1;try{return t(n)}finally{ir=s,ir===0&&(cp(),Ts())}}function Db(t,n){var s=ir;ir&=-2,ir|=8;try{return t(n)}finally{ir=s,ir===0&&(cp(),Ts())}}function sm(t,n){Wn(ng,Rl),Rl|=n,up|=n}function fg(){Rl=ng.current,En(ng)}function hp(t,n){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,zP(s)),di!==null)for(s=di.return;s!==null;){var h=s;switch(h.tag){case 1:h=h.type.childContextTypes,h!=null&&Dd();break;case 3:ap(),En(qo),En(uo),Uv();break;case 5:Rv(h);break;case 4:ap();break;case 13:En($n);break;case 19:En($n);break;case 10:zv(h);break;case 23:case 24:fg()}s=s.return}To=t,di=Wu(t.current,null),po=Rl=up=n,Ni=0,tm=null,ig=lp=Jh=0}function Ob(t,n){do{var s=di;try{if(Mv(),Zh.current=Yd,Hd){for(var h=ni.memoizedState;h!==null;){var y=h.queue;y!==null&&(y.pending=null),h=h.next}Hd=!1}if(Gh=0,Ui=co=ni=null,Wh=!1,rg.current=null,s===null||s.return===null){Ni=1,tm=n,di=null;break}e:{var x=t,l=s.return,C=s,k=n;if(n=po,C.flags|=2048,C.firstEffect=C.lastEffect=null,k!==null&&typeof k=="object"&&typeof k.then=="function"){var F=k;if((C.mode&2)==0){var $=C.alternate;$?(C.updateQueue=$.updateQueue,C.memoizedState=$.memoizedState,C.lanes=$.lanes):(C.updateQueue=null,C.memoizedState=null)}var me=($n.current&1)!=0,W=l;do{var xe;if(xe=W.tag===13){var Ce=W.memoizedState;if(Ce!==null)xe=Ce.dehydrated!==null;else{var Oe=W.memoizedProps;xe=Oe.fallback===void 0?!1:Oe.unstable_avoidThisFallback!==!0?!0:!me}}if(xe){var se=W.updateQueue;if(se===null){var te=new Set;te.add(F),W.updateQueue=te}else se.add(F);if((W.mode&2)==0){if(W.flags|=64,C.flags|=16384,C.flags&=-2981,C.tag===1)if(C.alternate===null)C.tag=17;else{var ne=Bu(-1,1);ne.tag=2,Uu(C,ne)}C.lanes|=1;break e}k=void 0,C=n;var be=x.pingCache;if(be===null?(be=x.pingCache=new WP,k=new Set,be.set(F,k)):(k=be.get(F),k===void 0&&(k=new Set,be.set(F,k))),!k.has(C)){k.add(C);var Le=oT.bind(null,x,F,C);F.then(Le,Le)}W.flags|=4096,W.lanes=n;break e}W=W.return}while(W!==null);k=Error((jc(C.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ni!==5&&(Ni=2),k=Jv(k,C),W=l;do{switch(W.tag){case 3:x=k,W.flags|=4096,n&=-n,W.lanes|=n;var Se=wb(W,x,n);Ux(W,Se);break e;case 1:x=k;var Ie=W.type,je=W.stateNode;if((W.flags&64)==0&&(typeof Ie.getDerivedStateFromError=="function"||je!==null&&typeof je.componentDidCatch=="function"&&(As===null||!As.has(je)))){W.flags|=4096,n&=-n,W.lanes|=n;var at=Sb(W,x,n);Ux(W,at);break e}}W=W.return}while(W!==null)}Bb(s)}catch(Xe){n=Xe,di===s&&s!==null&&(di=s=s.return);continue}break}while(1)}function Rb(){var t=em.current;return em.current=Yd,t===null?Yd:t}function rf(t,n){var s=ir;ir|=16;var h=Rb();To===t&&po===n||hp(t,n);do try{QP();break}catch(y){Ob(t,y)}while(1);if(Mv(),ir=s,em.current=h,di!==null)throw Error(ct(261));return To=null,po=0,Ni}function QP(){for(;di!==null;)Fb(di)}function eT(){for(;di!==null&&!OP();)Fb(di)}function Fb(t){var n=jb(t.alternate,t,Rl);t.memoizedProps=t.pendingProps,n===null?Bb(t):di=n,rg.current=null}function Bb(t){var n=t;do{var s=n.alternate;if(t=n.return,(n.flags&2048)==0){if(s=ZP(s,n,Rl),s!==null){di=s;return}if(s=n,s.tag!==24&&s.tag!==23||s.memoizedState===null||(Rl&1073741824)!=0||(s.mode&4)==0){for(var h=0,y=s.child;y!==null;)h|=y.lanes|y.childLanes,y=y.sibling;s.childLanes=h}t!==null&&(t.flags&2048)==0&&(t.firstEffect===null&&(t.firstEffect=n.firstEffect),n.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=n.firstEffect),t.lastEffect=n.lastEffect),1<n.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=n:t.firstEffect=n,t.lastEffect=n))}else{if(s=GP(n),s!==null){s.flags&=2047,di=s;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(n=n.sibling,n!==null){di=n;return}di=n=t}while(n!==null);Ni===0&&(Ni=5)}function Fl(t){var n=np();return zl(99,tT.bind(null,t,n)),null}function tT(t,n){do Zu();while(Yh!==null);if((ir&48)!=0)throw Error(ct(327));var s=t.finishedWork;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(ct(177));t.callbackNode=null;var h=s.lanes|s.childLanes,y=h,x=t.pendingLanes&~y;t.pendingLanes=y,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=y,t.mutableReadLanes&=y,t.entangledLanes&=y,y=t.entanglements;for(var l=t.eventTimes,C=t.expirationTimes;0<x;){var k=31-zu(x),F=1<<k;y[k]=0,l[k]=-1,C[k]=-1,x&=~F}if(uu!==null&&(h&24)==0&&uu.has(t)&&uu.delete(t),t===To&&(di=To=null,po=0),1<s.flags?s.lastEffect!==null?(s.lastEffect.nextEffect=s,h=s.firstEffect):h=s:h=s.firstEffect,h!==null){if(y=ir,ir|=32,rg.current=null,_v=Sd,l=lx(),mv(l)){if("selectionStart"in l)C={start:l.selectionStart,end:l.selectionEnd};else e:if(C=(C=l.ownerDocument)&&C.defaultView||window,(F=C.getSelection&&C.getSelection())&&F.rangeCount!==0){C=F.anchorNode,x=F.anchorOffset,k=F.focusNode,F=F.focusOffset;try{C.nodeType,k.nodeType}catch{C=null;break e}var $=0,me=-1,W=-1,xe=0,Ce=0,Oe=l,se=null;t:for(;;){for(var te;Oe!==C||x!==0&&Oe.nodeType!==3||(me=$+x),Oe!==k||F!==0&&Oe.nodeType!==3||(W=$+F),Oe.nodeType===3&&($+=Oe.nodeValue.length),(te=Oe.firstChild)!==null;)se=Oe,Oe=te;for(;;){if(Oe===l)break t;if(se===C&&++xe===x&&(me=$),se===k&&++Ce===F&&(W=$),(te=Oe.nextSibling)!==null)break;Oe=se,se=Oe.parentNode}Oe=te}C=me===-1||W===-1?null:{start:me,end:W}}else C=null;C=C||{start:0,end:0}}else C=null;xv={focusedElem:l,selectionRange:C},Sd=!1,tf=null,om=!1,Lt=h;do try{rT()}catch(Xe){if(Lt===null)throw Error(ct(330));Gu(Lt,Xe),Lt=Lt.nextEffect}while(Lt!==null);tf=null,Lt=h;do try{for(l=t;Lt!==null;){var ne=Lt.flags;if(ne&16&&vh(Lt.stateNode,""),ne&128){var be=Lt.alternate;if(be!==null){var Le=be.ref;Le!==null&&(typeof Le=="function"?Le(null):Le.current=null)}}switch(ne&1038){case 2:kb(Lt),Lt.flags&=-3;break;case 6:kb(Lt),Lt.flags&=-3,tg(Lt.alternate,Lt);break;case 1024:Lt.flags&=-1025;break;case 1028:Lt.flags&=-1025,tg(Lt.alternate,Lt);break;case 4:tg(Lt.alternate,Lt);break;case 8:C=Lt,Ab(l,C);var Se=C.alternate;Cb(C),Se!==null&&Cb(Se)}Lt=Lt.nextEffect}}catch(Xe){if(Lt===null)throw Error(ct(330));Gu(Lt,Xe),Lt=Lt.nextEffect}while(Lt!==null);if(Le=xv,be=lx(),ne=Le.focusedElem,l=Le.selectionRange,be!==ne&&ne&&ne.ownerDocument&&ux(ne.ownerDocument.documentElement,ne)){for(l!==null&&mv(ne)&&(be=l.start,Le=l.end,Le===void 0&&(Le=be),"selectionStart"in ne?(ne.selectionStart=be,ne.selectionEnd=Math.min(Le,ne.value.length)):(Le=(be=ne.ownerDocument||document)&&be.defaultView||window,Le.getSelection&&(Le=Le.getSelection(),C=ne.textContent.length,Se=Math.min(l.start,C),l=l.end===void 0?Se:Math.min(l.end,C),!Le.extend&&Se>l&&(C=l,l=Se,Se=C),C=sx(ne,Se),x=sx(ne,l),C&&x&&(Le.rangeCount!==1||Le.anchorNode!==C.node||Le.anchorOffset!==C.offset||Le.focusNode!==x.node||Le.focusOffset!==x.offset)&&(be=be.createRange(),be.setStart(C.node,C.offset),Le.removeAllRanges(),Se>l?(Le.addRange(be),Le.extend(x.node,x.offset)):(be.setEnd(x.node,x.offset),Le.addRange(be)))))),be=[],Le=ne;Le=Le.parentNode;)Le.nodeType===1&&be.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof ne.focus=="function"&&ne.focus(),ne=0;ne<be.length;ne++)Le=be[ne],Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}Sd=!!_v,xv=_v=null,t.current=s,Lt=h;do try{for(ne=t;Lt!==null;){var Ie=Lt.flags;if(Ie&36&&XP(ne,Lt.alternate,Lt),Ie&128){be=void 0;var je=Lt.ref;if(je!==null){var at=Lt.stateNode;switch(Lt.tag){case 5:be=at;break;default:be=at}typeof je=="function"?je(be):je.current=be}}Lt=Lt.nextEffect}}catch(Xe){if(Lt===null)throw Error(ct(330));Gu(Lt,Xe),Lt=Lt.nextEffect}while(Lt!==null);Lt=null,FP(),ir=y}else t.current=s;if(ju)ju=!1,Yh=t,Qh=n;else for(Lt=h;Lt!==null;)n=Lt.nextEffect,Lt.nextEffect=null,Lt.flags&8&&(Ie=Lt,Ie.sibling=null,Ie.stateNode=null),Lt=n;if(h=t.pendingLanes,h===0&&(As=null),h===1?t===pg?ef++:(ef=0,pg=t):ef=0,s=s.stateNode,Ml&&typeof Ml.onCommitFiberRoot=="function")try{Ml.onCommitFiberRoot(Pv,s,void 0,(s.current.flags&64)==64)}catch{}if(Ma(t,lo()),rm)throw rm=!1,t=ug,ug=null,t;return(ir&8)!=0||Ts(),null}function rT(){for(;Lt!==null;){var t=Lt.alternate;om||tf===null||((Lt.flags&8)!=0?k1(Lt,tf)&&(om=!0):Lt.tag===13&&KP(t,Lt)&&k1(Lt,tf)&&(om=!0));var n=Lt.flags;(n&256)!=0&&HP(t,Lt),(n&512)==0||ju||(ju=!0,Bh(97,function(){return Zu(),null})),Lt=Lt.nextEffect}}function Zu(){if(Qh!==90){var t=97<Qh?97:Qh;return Qh=90,zl(t,iT)}return!1}function nT(t,n){lg.push(n,t),ju||(ju=!0,Bh(97,function(){return Zu(),null}))}function Ub(t,n){cg.push(n,t),ju||(ju=!0,Bh(97,function(){return Zu(),null}))}function iT(){if(Yh===null)return!1;var t=Yh;if(Yh=null,(ir&48)!=0)throw Error(ct(331));var n=ir;ir|=32;var s=cg;cg=[];for(var h=0;h<s.length;h+=2){var y=s[h],x=s[h+1],l=y.destroy;if(y.destroy=void 0,typeof l=="function")try{l()}catch(k){if(x===null)throw Error(ct(330));Gu(x,k)}}for(s=lg,lg=[],h=0;h<s.length;h+=2){y=s[h],x=s[h+1];try{var C=y.create;y.destroy=C()}catch(k){if(x===null)throw Error(ct(330));Gu(x,k)}}for(C=t.current.firstEffect;C!==null;)t=C.nextEffect,C.nextEffect=null,C.flags&8&&(C.sibling=null,C.stateNode=null),C=t;return ir=n,Ts(),!0}function Nb(t,n,s){n=Jv(s,n),n=wb(t,n,1),Uu(t,n),n=la(),t=am(t,1),t!==null&&(wd(t,1,n),Ma(t,n))}function Gu(t,n){if(t.tag===3)Nb(t,t,n);else for(var s=t.return;s!==null;){if(s.tag===3){Nb(s,t,n);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(As===null||!As.has(h))){t=Jv(n,t);var y=Sb(s,t,1);if(Uu(s,y),y=la(),s=am(s,1),s!==null)wd(s,1,y),Ma(s,y);else if(typeof h.componentDidCatch=="function"&&(As===null||!As.has(h)))try{h.componentDidCatch(n,t)}catch{}break}}s=s.return}}function oT(t,n,s){var h=t.pingCache;h!==null&&h.delete(n),n=la(),t.pingedLanes|=t.suspendedLanes&s,To===t&&(po&s)===s&&(Ni===4||Ni===3&&(po&62914560)===po&&500>lo()-ag?hp(t,0):ig|=s),Ma(t,n)}function aT(t,n){var s=t.stateNode;s!==null&&s.delete(n),n=0,n===0&&(n=t.mode,(n&2)==0?n=1:(n&4)==0?n=np()===99?1:2:(lu===0&&(lu=up),n=$c(62914560&~lu),n===0&&(n=4194304))),s=la(),t=am(t,n),t!==null&&(wd(t,n,s),Ma(t,s))}var jb;jb=function(t,n,s){var h=n.lanes;if(t!==null)if(t.memoizedProps!==n.pendingProps||qo.current)ts=!0;else if((s&h)!=0)ts=(t.flags&16384)!=0;else{switch(ts=!1,n.tag){case 3:hb(n),Bv();break;case 5:$x(n);break;case 1:Zo(n.type)&&Od(n);break;case 4:Ov(n,n.stateNode.containerInfo);break;case 10:h=n.memoizedProps.value;var y=n.type._context;Wn(Bd,y._currentValue),y._currentValue=h;break;case 13:if(n.memoizedState!==null)return(s&n.child.childLanes)!=0?fb(t,n,s):(Wn($n,$n.current&1),n=su(t,n,s),n!==null?n.sibling:null);Wn($n,$n.current&1);break;case 19:if(h=(s&n.childLanes)!=0,(t.flags&64)!=0){if(h)return gb(t,n,s);n.flags|=64}if(y=n.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Wn($n,$n.current),h)break;return null;case 23:case 24:return n.lanes=0,Wv(t,n,s)}return su(t,n,s)}else ts=!1;switch(n.lanes=0,n.tag){case 2:if(h=n.type,t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2),t=n.pendingProps,y=rp(n,uo.current),op(n,s),y=jv(null,n,h,t,y,s),n.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0){if(n.tag=1,n.memoizedState=null,n.updateQueue=null,Zo(h)){var x=!0;Od(n)}else x=!1;n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Lv(n);var l=h.getDerivedStateFromProps;typeof l=="function"&&jd(n,h,l,t),y.updater=Vd,n.stateNode=y,y._reactInternals=n,Dv(n,h,t,s),n=Hv(null,n,h,!0,x,s)}else n.tag=0,Wo(null,n,y,s),n=n.child;return n;case 16:y=n.elementType;e:{switch(t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2),t=n.pendingProps,x=y._init,y=x(y._payload),n.type=y,x=n.tag=uT(y),t=es(y,t),x){case 0:n=$v(null,n,y,t,s);break e;case 1:n=pb(null,n,y,t,s);break e;case 11:n=sb(null,n,y,t,s);break e;case 14:n=ub(null,n,y,es(y.type,t),h,s);break e}throw Error(ct(306,y,""))}return n;case 0:return h=n.type,y=n.pendingProps,y=n.elementType===h?y:es(h,y),$v(t,n,h,y,s);case 1:return h=n.type,y=n.pendingProps,y=n.elementType===h?y:es(h,y),pb(t,n,h,y,s);case 3:if(hb(n),h=n.updateQueue,t===null||h===null)throw Error(ct(282));if(h=n.pendingProps,y=n.memoizedState,y=y!==null?y.element:null,Bx(t,n),Uh(n,h,null,s),h=n.memoizedState.element,h===y)Bv(),n=su(t,n,s);else{if(y=n.stateNode,(x=y.hydrate)&&(Nu=Yc(n.stateNode.containerInfo.firstChild),au=n,x=Is=!0),x){if(t=y.mutableSourceEagerHydrationData,t!=null)for(y=0;y<t.length;y+=2)x=t[y],x._workInProgressVersionPrimary=t[y+1],sp.push(x);for(s=Wx(n,null,h,s),n.child=s;s;)s.flags=s.flags&-3|1024,s=s.sibling}else Wo(t,n,h,s),Bv();n=n.child}return n;case 5:return $x(n),t===null&&Fv(n),h=n.type,y=n.pendingProps,x=t!==null?t.memoizedProps:null,l=y.children,bv(h,y)?l=null:x!==null&&bv(h,x)&&(n.flags|=16),cb(t,n),Wo(t,n,l,s),n.child;case 6:return t===null&&Fv(n),null;case 13:return fb(t,n,s);case 4:return Ov(n,n.stateNode.containerInfo),h=n.pendingProps,t===null?n.child=Gd(n,null,h,s):Wo(t,n,h,s),n.child;case 11:return h=n.type,y=n.pendingProps,y=n.elementType===h?y:es(h,y),sb(t,n,h,y,s);case 7:return Wo(t,n,n.pendingProps,s),n.child;case 8:return Wo(t,n,n.pendingProps.children,s),n.child;case 12:return Wo(t,n,n.pendingProps.children,s),n.child;case 10:e:{h=n.type._context,y=n.pendingProps,l=n.memoizedProps,x=y.value;var C=n.type._context;if(Wn(Bd,C._currentValue),C._currentValue=x,l!==null)if(C=l.value,x=Ia(C,x)?0:(typeof h._calculateChangedBits=="function"?h._calculateChangedBits(C,x):1073741823)|0,x===0){if(l.children===y.children&&!qo.current){n=su(t,n,s);break e}}else for(C=n.child,C!==null&&(C.return=n);C!==null;){var k=C.dependencies;if(k!==null){l=C.child;for(var F=k.firstContext;F!==null;){if(F.context===h&&(F.observedBits&x)!=0){C.tag===1&&(F=Bu(-1,s&-s),F.tag=2,Uu(C,F)),C.lanes|=s,F=C.alternate,F!==null&&(F.lanes|=s),Fx(C.return,s),k.lanes|=s;break}F=F.next}}else l=C.tag===10&&C.type===n.type?null:C.child;if(l!==null)l.return=C;else for(l=C;l!==null;){if(l===n){l=null;break}if(C=l.sibling,C!==null){C.return=l.return,l=C;break}l=l.return}C=l}Wo(t,n,y.children,s),n=n.child}return n;case 9:return y=n.type,x=n.pendingProps,h=x.children,op(n,s),y=ka(y,x.unstable_observedBits),h=h(y),n.flags|=1,Wo(t,n,h,s),n.child;case 14:return y=n.type,x=es(y,n.pendingProps),x=es(y.type,x),ub(t,n,y,x,h,s);case 15:return lb(t,n,n.type,n.pendingProps,h,s);case 17:return h=n.type,y=n.pendingProps,y=n.elementType===h?y:es(h,y),t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2),n.tag=1,Zo(h)?(t=!0,Od(n)):t=!1,op(n,s),qx(n,h,y),Dv(n,h,y,s),Hv(null,n,h,!0,t,s);case 19:return gb(t,n,s);case 23:return Wv(t,n,s);case 24:return Wv(t,n,s)}throw Error(ct(156,n.tag))};function sT(t,n,s,h){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function za(t,n,s,h){return new sT(t,n,s,h)}function dg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uT(t){if(typeof t=="function")return dg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ld)return 11;if(t===pd)return 14}return 2}function Wu(t,n){var s=t.alternate;return s===null?(s=za(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null),s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function um(t,n,s,h,y,x){var l=2;if(h=t,typeof t=="function")dg(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Cu:return fp(s.children,y,x,n);case s1:l=8,y|=16;break;case Ey:l=8,y|=1;break;case fh:return t=za(12,s,n,y|8),t.elementType=fh,t.type=fh,t.lanes=x,t;case dh:return t=za(13,s,n,y),t.type=dh,t.elementType=dh,t.lanes=x,t;case cd:return t=za(19,s,n,y),t.elementType=cd,t.lanes=x,t;case Ay:return mg(s,y,x,n);case My:return t=za(24,s,n,y),t.elementType=My,t.lanes=x,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Py:l=10;break e;case Ty:l=9;break e;case ld:l=11;break e;case pd:l=14;break e;case Cy:l=16,h=null;break e;case Iy:l=22;break e}throw Error(ct(130,t==null?t:typeof t,""))}return n=za(l,s,n,y),n.elementType=t,n.type=h,n.lanes=x,n}function fp(t,n,s,h){return t=za(7,t,h,n),t.lanes=s,t}function mg(t,n,s,h){return t=za(23,t,h,n),t.elementType=Ay,t.lanes=s,t}function yg(t,n,s){return t=za(6,t,null,n),t.lanes=s,t}function vg(t,n,s){return n=za(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function lT(t,n,s){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=s,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=nv(0),this.expirationTimes=nv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nv(0),this.mutableSourceEagerHydrationData=null}function cT(t,n,s){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tl,key:h==null?null:""+h,children:t,containerInfo:n,implementation:s}}function lm(t,n,s,h){var y=n.current,x=la(),l=Vu(y);e:if(s){s=s._reactInternals;t:{if(Il(s)!==s||s.tag!==1)throw Error(ct(170));var C=s;do{switch(C.tag){case 3:C=C.stateNode.context;break t;case 1:if(Zo(C.type)){C=C.stateNode.__reactInternalMemoizedMergedChildContext;break t}}C=C.return}while(C!==null);throw Error(ct(171))}if(s.tag===1){var k=s.type;if(Zo(k)){s=Cx(s,k,C);break e}}s=C}else s=Ru;return n.context===null?n.context=s:n.pendingContext=s,n=Bu(x,l),n.payload={element:t},h=h===void 0?null:h,h!==null&&(n.callback=h),Uu(y,n),qu(y,l,x),l}function gg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vb(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function _g(t,n){Vb(t,n),(t=t.alternate)&&Vb(t,n)}function pT(){return null}function xg(t,n,s){var h=s!=null&&s.hydrationOptions!=null&&s.hydrationOptions.mutableSources||null;if(s=new lT(t,n,s!=null&&s.hydrate===!0),n=za(3,null,null,n===2?7:n===1?3:0),s.current=n,n.stateNode=s,Lv(n),t[Qc]=s.current,yx(t.nodeType===8?t.parentNode:t),h)for(t=0;t<h.length;t++){n=h[t];var y=n._getVersion;y=y(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,y]:s.mutableSourceEagerHydrationData.push(n,y)}this._internalRoot=s}xg.prototype.render=function(t){lm(t,this._internalRoot,null,null)};xg.prototype.unmount=function(){var t=this._internalRoot,n=t.containerInfo;lm(null,t,null,function(){n[Qc]=null})};function nf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hT(t,n){if(n||(n=t?t.nodeType===9?t.documentElement:t.firstChild:null,n=!(!n||n.nodeType!==1||!n.hasAttribute("data-reactroot"))),!n)for(var s;s=t.lastChild;)t.removeChild(s);return new xg(t,0,n?{hydrate:!0}:void 0)}function cm(t,n,s,h,y){var x=s._reactRootContainer;if(x){var l=x._internalRoot;if(typeof y=="function"){var C=y;y=function(){var F=gg(l);C.call(F)}}lm(n,l,t,y)}else{if(x=s._reactRootContainer=hT(s,h),l=x._internalRoot,typeof y=="function"){var k=y;y=function(){var F=gg(l);k.call(F)}}Db(function(){lm(n,l,t,y)})}return gg(l)}A1=function(t){if(t.tag===13){var n=la();qu(t,4,n),_g(t,4)}};Jy=function(t){if(t.tag===13){var n=la();qu(t,67108864,n),_g(t,67108864)}};M1=function(t){if(t.tag===13){var n=la(),s=Vu(t);qu(t,s,n),_g(t,s)}};z1=function(t,n){return n()};Zy=function(t,n,s){switch(n){case"input":if(Oy(t,s),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var h=s[n];if(h!==t&&h.form===t.form){var y=Ld(h);if(!y)throw Error(ct(90));c1(h),Oy(h,y)}}}break;case"textarea":m1(t,s);break;case"select":n=s.value,n!=null&&Vc(t,!!s.multiple,n,!1)}};Gy=Lb;E1=function(t,n,s,h,y){var x=ir;ir|=4;try{return zl(98,t.bind(null,n,s,h,y))}finally{ir=x,ir===0&&(cp(),Ts())}};Wy=function(){(ir&49)==0&&(YP(),Zu())};P1=function(t,n){var s=ir;ir|=2;try{return t(n)}finally{ir=s,ir===0&&(cp(),Ts())}};function qb(t,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nf(n))throw Error(ct(200));return cT(t,n,null,s)}var fT={Events:[Fh,ep,Ld,w1,S1,Zu,{current:!1}]},of={findFiberByHostInstance:kl,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},dT={bundleType:of.bundleType,version:of.version,rendererPackageName:of.rendererPackageName,rendererConfig:of.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=I1(t),t===null?null:t.stateNode},findFiberByHostInstance:of.findFiberByHostInstance||pT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{Pv=pm.inject(dT),Ml=pm}catch{}}Ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fT;Ca.createPortal=qb;Ca.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(ct(188)):Error(ct(268,Object.keys(t)));return t=I1(n),t=t===null?null:t.stateNode,t};Ca.flushSync=function(t,n){var s=ir;if((s&48)!=0)return t(n);ir|=1;try{if(t)return zl(99,t.bind(null,n))}finally{ir=s,Ts()}};Ca.hydrate=function(t,n,s){if(!nf(n))throw Error(ct(200));return cm(null,t,n,!0,s)};Ca.render=function(t,n,s){if(!nf(n))throw Error(ct(200));return cm(null,t,n,!1,s)};Ca.unmountComponentAtNode=function(t){if(!nf(t))throw Error(ct(40));return t._reactRootContainer?(Db(function(){cm(null,null,t,!1,function(){t._reactRootContainer=null,t[Qc]=null})}),!0):!1};Ca.unstable_batchedUpdates=Lb;Ca.unstable_createPortal=function(t,n){return qb(t,n,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ca.unstable_renderSubtreeIntoContainer=function(t,n,s,h){if(!nf(s))throw Error(ct(200));if(t==null||t._reactInternals===void 0)throw Error(ct(38));return cm(t,n,s,!1,h)};Ca.version="17.0.2";function Zb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zb)}catch(t){console.error(t)}}Zb(),xy.exports=Ca;var mT=xy.exports;KS(xy.exports.unstable_batchedUpdates);function rs(t){for(var n=arguments.length,s=Array(n>1?n-1:0),h=1;h<n;h++)s[h-1]=arguments[h];throw Error("[Immer] minified error nr: "+t+(s.length?" "+s.map(function(y){return"'"+y+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function $u(t){return!!t&&!!t[kn]}function Hu(t){return!!t&&(function(n){if(!n||typeof n!="object")return!1;var s=Object.getPrototypeOf(n);if(s===null)return!0;var h=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return h===Object||typeof h=="function"&&Function.toString.call(h)===ET}(t)||Array.isArray(t)||!!t[ew]||!!t.constructor[ew]||bg(t)||wg(t))}function Bl(t,n,s){s===void 0&&(s=!1),dp(t)===0?(s?Object.keys:yp)(t).forEach(function(h){s&&typeof h=="symbol"||n(h,t[h],t)}):t.forEach(function(h,y){return n(y,h,t)})}function dp(t){var n=t[kn];return n?n.i>3?n.i-4:n.i:Array.isArray(t)?1:bg(t)?2:wg(t)?3:0}function mp(t,n){return dp(t)===2?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function yT(t,n){return dp(t)===2?t.get(n):t[n]}function Gb(t,n,s){var h=dp(t);h===2?t.set(n,s):h===3?(t.delete(n),t.add(s)):t[n]=s}function Wb(t,n){return t===n?t!==0||1/t==1/n:t!=t&&n!=n}function bg(t){return wT&&t instanceof Map}function wg(t){return ST&&t instanceof Set}function Ul(t){return t.o||t.t}function Sg(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var n=tw(t);delete n[kn];for(var s=yp(n),h=0;h<s.length;h++){var y=s[h],x=n[y];x.writable===!1&&(x.writable=!0,x.configurable=!0),(x.get||x.set)&&(n[y]={configurable:!0,writable:!0,enumerable:x.enumerable,value:t[y]})}return Object.create(Object.getPrototypeOf(t),n)}function Eg(t,n){return n===void 0&&(n=!1),Pg(t)||$u(t)||!Hu(t)||(dp(t)>1&&(t.set=t.add=t.clear=t.delete=vT),Object.freeze(t),n&&Bl(t,function(s,h){return Eg(h,!0)},!0)),t}function vT(){rs(2)}function Pg(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Ms(t){var n=Dg[t];return n||rs(18,t),n}function gT(t,n){Dg[t]||(Dg[t]=n)}function Tg(){return af}function Cg(t,n){n&&(Ms("Patches"),t.u=[],t.s=[],t.v=n)}function hm(t){Ig(t),t.p.forEach(_T),t.p=null}function Ig(t){t===af&&(af=t.l)}function $b(t){return af={p:[],l:af,h:t,m:!0,_:0}}function _T(t){var n=t[kn];n.i===0||n.i===1?n.j():n.O=!0}function kg(t,n){n._=n.p.length;var s=n.p[0],h=t!==void 0&&t!==s;return n.h.g||Ms("ES5").S(n,t,h),h?(s[kn].P&&(hm(n),rs(4)),Hu(t)&&(t=fm(n,t),n.l||dm(n,t)),n.u&&Ms("Patches").M(s[kn].t,t,n.u,n.s)):t=fm(n,s,[]),hm(n),n.u&&n.v(n.u,n.s),t!==Qb?t:void 0}function fm(t,n,s){if(Pg(n))return n;var h=n[kn];if(!h)return Bl(n,function(x,l){return Hb(t,h,n,x,l,s)},!0),n;if(h.A!==t)return n;if(!h.P)return dm(t,h.t,!0),h.t;if(!h.I){h.I=!0,h.A._--;var y=h.i===4||h.i===5?h.o=Sg(h.k):h.o;Bl(h.i===3?new Set(y):y,function(x,l){return Hb(t,h,y,x,l,s)}),dm(t,y,!1),s&&t.u&&Ms("Patches").R(h,s,t.u,t.s)}return h.o}function Hb(t,n,s,h,y,x){if($u(y)){var l=fm(t,y,x&&n&&n.i!==3&&!mp(n.D,h)?x.concat(h):void 0);if(Gb(s,h,l),!$u(l))return;t.m=!1}if(Hu(y)&&!Pg(y)){if(!t.h.F&&t._<1)return;fm(t,y),n&&n.A.l||dm(t,y)}}function dm(t,n,s){s===void 0&&(s=!1),t.h.F&&t.m&&Eg(n,s)}function Ag(t,n){var s=t[kn];return(s?Ul(s):t)[n]}function Xb(t,n){if(n in t)for(var s=Object.getPrototypeOf(t);s;){var h=Object.getOwnPropertyDescriptor(s,n);if(h)return h;s=Object.getPrototypeOf(s)}}function Xu(t){t.P||(t.P=!0,t.l&&Xu(t.l))}function Mg(t){t.o||(t.o=Sg(t.t))}function zg(t,n,s){var h=bg(n)?Ms("MapSet").N(n,s):wg(n)?Ms("MapSet").T(n,s):t.g?function(y,x){var l=Array.isArray(y),C={i:l?1:0,A:x?x.A:Tg(),P:!1,I:!1,D:{},l:x,t:y,k:null,o:null,j:null,C:!1},k=C,F=sf;l&&(k=[C],F=uf);var $=Proxy.revocable(k,F),me=$.revoke,W=$.proxy;return C.k=W,C.j=me,W}(n,s):Ms("ES5").J(n,s);return(s?s.A:Tg()).p.push(h),h}function xT(t){return $u(t)||rs(22,t),function n(s){if(!Hu(s))return s;var h,y=s[kn],x=dp(s);if(y){if(!y.P&&(y.i<4||!Ms("ES5").K(y)))return y.t;y.I=!0,h=Kb(s,x),y.I=!1}else h=Kb(s,x);return Bl(h,function(l,C){y&&yT(y.t,l)===C||Gb(h,l,n(C))}),x===3?new Set(h):h}(t)}function Kb(t,n){switch(n){case 2:return new Map(t);case 3:return Array.from(t)}return Sg(t)}function bT(){function t(x,l){var C=y[x];return C?C.enumerable=l:y[x]=C={configurable:!0,enumerable:l,get:function(){var k=this[kn];return sf.get(k,x)},set:function(k){var F=this[kn];sf.set(F,x,k)}},C}function n(x){for(var l=x.length-1;l>=0;l--){var C=x[l][kn];if(!C.P)switch(C.i){case 5:h(C)&&Xu(C);break;case 4:s(C)&&Xu(C)}}}function s(x){for(var l=x.t,C=x.k,k=yp(C),F=k.length-1;F>=0;F--){var $=k[F];if($!==kn){var me=l[$];if(me===void 0&&!mp(l,$))return!0;var W=C[$],xe=W&&W[kn];if(xe?xe.t!==me:!Wb(W,me))return!0}}var Ce=!!l[kn];return k.length!==yp(l).length+(Ce?0:1)}function h(x){var l=x.k;if(l.length!==x.t.length)return!0;var C=Object.getOwnPropertyDescriptor(l,l.length-1);if(C&&!C.get)return!0;for(var k=0;k<l.length;k++)if(!l.hasOwnProperty(k))return!0;return!1}var y={};gT("ES5",{J:function(x,l){var C=Array.isArray(x),k=function($,me){if($){for(var W=Array(me.length),xe=0;xe<me.length;xe++)Object.defineProperty(W,""+xe,t(xe,!0));return W}var Ce=tw(me);delete Ce[kn];for(var Oe=yp(Ce),se=0;se<Oe.length;se++){var te=Oe[se];Ce[te]=t(te,$||!!Ce[te].enumerable)}return Object.create(Object.getPrototypeOf(me),Ce)}(C,x),F={i:C?5:4,A:l?l.A:Tg(),P:!1,I:!1,D:{},l,t:x,k,o:null,O:!1,C:!1};return Object.defineProperty(k,kn,{value:F,writable:!0}),k},S:function(x,l,C){C?$u(l)&&l[kn].A===x&&n(x.p):(x.u&&function k(F){if(F&&typeof F=="object"){var $=F[kn];if($){var me=$.t,W=$.k,xe=$.D,Ce=$.i;if(Ce===4)Bl(W,function(be){be!==kn&&(me[be]!==void 0||mp(me,be)?xe[be]||k(W[be]):(xe[be]=!0,Xu($)))}),Bl(me,function(be){W[be]!==void 0||mp(W,be)||(xe[be]=!1,Xu($))});else if(Ce===5){if(h($)&&(Xu($),xe.length=!0),W.length<me.length)for(var Oe=W.length;Oe<me.length;Oe++)xe[Oe]=!1;else for(var se=me.length;se<W.length;se++)xe[se]=!0;for(var te=Math.min(W.length,me.length),ne=0;ne<te;ne++)W.hasOwnProperty(ne)||(xe[ne]=!0),xe[ne]===void 0&&k(W[ne])}}}}(x.p[0]),n(x.p))},K:function(x){return x.i===4?s(x):h(x)}})}var Jb,af,Lg=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",wT=typeof Map!="undefined",ST=typeof Set!="undefined",Yb=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Qb=Lg?Symbol.for("immer-nothing"):((Jb={})["immer-nothing"]=!0,Jb),ew=Lg?Symbol.for("immer-draftable"):"__$immer_draftable",kn=Lg?Symbol.for("immer-state"):"__$immer_state",ET=""+Object.prototype.constructor,yp=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,tw=Object.getOwnPropertyDescriptors||function(t){var n={};return yp(t).forEach(function(s){n[s]=Object.getOwnPropertyDescriptor(t,s)}),n},Dg={},sf={get:function(t,n){if(n===kn)return t;var s=Ul(t);if(!mp(s,n))return function(y,x,l){var C,k=Xb(x,l);return k?"value"in k?k.value:(C=k.get)===null||C===void 0?void 0:C.call(y.k):void 0}(t,s,n);var h=s[n];return t.I||!Hu(h)?h:h===Ag(t.t,n)?(Mg(t),t.o[n]=zg(t.A.h,h,t)):h},has:function(t,n){return n in Ul(t)},ownKeys:function(t){return Reflect.ownKeys(Ul(t))},set:function(t,n,s){var h=Xb(Ul(t),n);if(h==null?void 0:h.set)return h.set.call(t.k,s),!0;if(!t.P){var y=Ag(Ul(t),n),x=y==null?void 0:y[kn];if(x&&x.t===s)return t.o[n]=s,t.D[n]=!1,!0;if(Wb(s,y)&&(s!==void 0||mp(t.t,n)))return!0;Mg(t),Xu(t)}return t.o[n]===s&&typeof s!="number"&&(s!==void 0||n in t.o)||(t.o[n]=s,t.D[n]=!0,!0)},deleteProperty:function(t,n){return Ag(t.t,n)!==void 0||n in t.t?(t.D[n]=!1,Mg(t),Xu(t)):delete t.D[n],t.o&&delete t.o[n],!0},getOwnPropertyDescriptor:function(t,n){var s=Ul(t),h=Reflect.getOwnPropertyDescriptor(s,n);return h&&{writable:!0,configurable:t.i!==1||n!=="length",enumerable:h.enumerable,value:s[n]}},defineProperty:function(){rs(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){rs(12)}},uf={};Bl(sf,function(t,n){uf[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}}),uf.deleteProperty=function(t,n){return uf.set.call(this,t,n,void 0)},uf.set=function(t,n,s){return sf.set.call(this,t[0],n,s,t[0])};var PT=function(){function t(s){var h=this;this.g=Yb,this.F=!0,this.produce=function(y,x,l){if(typeof y=="function"&&typeof x!="function"){var C=x;x=y;var k=h;return function(Oe){var se=this;Oe===void 0&&(Oe=C);for(var te=arguments.length,ne=Array(te>1?te-1:0),be=1;be<te;be++)ne[be-1]=arguments[be];return k.produce(Oe,function(Le){var Se;return(Se=x).call.apply(Se,[se,Le].concat(ne))})}}var F;if(typeof x!="function"&&rs(6),l!==void 0&&typeof l!="function"&&rs(7),Hu(y)){var $=$b(h),me=zg(h,y,void 0),W=!0;try{F=x(me),W=!1}finally{W?hm($):Ig($)}return typeof Promise!="undefined"&&F instanceof Promise?F.then(function(Oe){return Cg($,l),kg(Oe,$)},function(Oe){throw hm($),Oe}):(Cg($,l),kg(F,$))}if(!y||typeof y!="object"){if((F=x(y))===void 0&&(F=y),F===Qb&&(F=void 0),h.F&&Eg(F,!0),l){var xe=[],Ce=[];Ms("Patches").M(y,F,xe,Ce),l(xe,Ce)}return F}rs(21,y)},this.produceWithPatches=function(y,x){if(typeof y=="function")return function(F){for(var $=arguments.length,me=Array($>1?$-1:0),W=1;W<$;W++)me[W-1]=arguments[W];return h.produceWithPatches(F,function(xe){return y.apply(void 0,[xe].concat(me))})};var l,C,k=h.produce(y,x,function(F,$){l=F,C=$});return typeof Promise!="undefined"&&k instanceof Promise?k.then(function(F){return[F,l,C]}):[k,l,C]},typeof(s==null?void 0:s.useProxies)=="boolean"&&this.setUseProxies(s.useProxies),typeof(s==null?void 0:s.autoFreeze)=="boolean"&&this.setAutoFreeze(s.autoFreeze)}var n=t.prototype;return n.createDraft=function(s){Hu(s)||rs(8),$u(s)&&(s=xT(s));var h=$b(this),y=zg(this,s,void 0);return y[kn].C=!0,Ig(h),y},n.finishDraft=function(s,h){var y=s&&s[kn],x=y.A;return Cg(x,h),kg(void 0,x)},n.setAutoFreeze=function(s){this.F=s},n.setUseProxies=function(s){s&&!Yb&&rs(20),this.g=s},n.applyPatches=function(s,h){var y;for(y=h.length-1;y>=0;y--){var x=h[y];if(x.path.length===0&&x.op==="replace"){s=x.value;break}}y>-1&&(h=h.slice(y+1));var l=Ms("Patches").$;return $u(s)?l(s,h):this.produce(s,function(C){return l(C,h)})},t}(),ca=new PT,TT=ca.produce;ca.produceWithPatches.bind(ca);ca.setAutoFreeze.bind(ca);ca.setUseProxies.bind(ca);ca.applyPatches.bind(ca);ca.createDraft.bind(ca);ca.finishDraft.bind(ca);var Og=TT;function CT(t,n,s){return n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,t}function rw(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(t);n&&(h=h.filter(function(y){return Object.getOwnPropertyDescriptor(t,y).enumerable})),s.push.apply(s,h)}return s}function nw(t){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?rw(Object(s),!0).forEach(function(h){CT(t,h,s[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):rw(Object(s)).forEach(function(h){Object.defineProperty(t,h,Object.getOwnPropertyDescriptor(s,h))})}return t}function ho(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var iw=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Rg=function(){return Math.random().toString(36).substring(7).split("").join(".")},mm={INIT:"@@redux/INIT"+Rg(),REPLACE:"@@redux/REPLACE"+Rg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Rg()}};function IT(t){if(typeof t!="object"||t===null)return!1;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n}function ow(t,n,s){var h;if(typeof n=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(ho(0));if(typeof n=="function"&&typeof s=="undefined"&&(s=n,n=void 0),typeof s!="undefined"){if(typeof s!="function")throw new Error(ho(1));return s(ow)(t,n)}if(typeof t!="function")throw new Error(ho(2));var y=t,x=n,l=[],C=l,k=!1;function F(){C===l&&(C=l.slice())}function $(){if(k)throw new Error(ho(3));return x}function me(Oe){if(typeof Oe!="function")throw new Error(ho(4));if(k)throw new Error(ho(5));var se=!0;return F(),C.push(Oe),function(){if(!!se){if(k)throw new Error(ho(6));se=!1,F();var ne=C.indexOf(Oe);C.splice(ne,1),l=null}}}function W(Oe){if(!IT(Oe))throw new Error(ho(7));if(typeof Oe.type=="undefined")throw new Error(ho(8));if(k)throw new Error(ho(9));try{k=!0,x=y(x,Oe)}finally{k=!1}for(var se=l=C,te=0;te<se.length;te++){var ne=se[te];ne()}return Oe}function xe(Oe){if(typeof Oe!="function")throw new Error(ho(10));y=Oe,W({type:mm.REPLACE})}function Ce(){var Oe,se=me;return Oe={subscribe:function(ne){if(typeof ne!="object"||ne===null)throw new Error(ho(11));function be(){ne.next&&ne.next($())}be();var Le=se(be);return{unsubscribe:Le}}},Oe[iw]=function(){return this},Oe}return W({type:mm.INIT}),h={dispatch:W,subscribe:me,getState:$,replaceReducer:xe},h[iw]=Ce,h}function kT(t){Object.keys(t).forEach(function(n){var s=t[n],h=s(void 0,{type:mm.INIT});if(typeof h=="undefined")throw new Error(ho(12));if(typeof s(void 0,{type:mm.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(ho(13))})}function AT(t){for(var n=Object.keys(t),s={},h=0;h<n.length;h++){var y=n[h];typeof t[y]=="function"&&(s[y]=t[y])}var x=Object.keys(s),l;try{kT(s)}catch(C){l=C}return function(k,F){if(k===void 0&&(k={}),l)throw l;for(var $=!1,me={},W=0;W<x.length;W++){var xe=x[W],Ce=s[xe],Oe=k[xe],se=Ce(Oe,F);if(typeof se=="undefined")throw F&&F.type,new Error(ho(14));me[xe]=se,$=$||se!==Oe}return $=$||x.length!==Object.keys(k).length,$?me:k}}function ym(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return n.length===0?function(h){return h}:n.length===1?n[0]:n.reduce(function(h,y){return function(){return h(y.apply(void 0,arguments))}})}function MT(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return function(h){return function(){var y=h.apply(void 0,arguments),x=function(){throw new Error(ho(15))},l={getState:y.getState,dispatch:function(){return x.apply(void 0,arguments)}},C=n.map(function(k){return k(l)});return x=ym.apply(void 0,C)(y.dispatch),nw(nw({},y),{},{dispatch:x})}}}var vm="NOT_FOUND";function zT(t){var n;return{get:function(h){return n&&t(n.key,h)?n.value:vm},put:function(h,y){n={key:h,value:y}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}}function LT(t,n){var s=[];function h(C){var k=s.findIndex(function($){return n(C,$.key)});if(k>-1){var F=s[k];return k>0&&(s.splice(k,1),s.unshift(F)),F.value}return vm}function y(C,k){h(C)===vm&&(s.unshift({key:C,value:k}),s.length>t&&s.pop())}function x(){return s}function l(){s=[]}return{get:h,put:y,getEntries:x,clear:l}}var DT=function(n,s){return n===s};function OT(t){return function(s,h){if(s===null||h===null||s.length!==h.length)return!1;for(var y=s.length,x=0;x<y;x++)if(!t(s[x],h[x]))return!1;return!0}}function RT(t,n){var s=typeof n=="object"?n:{equalityCheck:n},h=s.equalityCheck,y=h===void 0?DT:h,x=s.maxSize,l=x===void 0?1:x,C=s.resultEqualityCheck,k=OT(y),F=l===1?zT(k):LT(l,k);function $(){var me=F.get(arguments);if(me===vm){if(me=t.apply(null,arguments),C){var W=F.getEntries(),xe=W.find(function(Ce){return C(Ce.value,me)});xe&&(me=xe.value)}F.put(arguments,me)}return me}return $.clearCache=function(){return F.clear()},$}function FT(t){var n=Array.isArray(t[0])?t[0]:t;if(!n.every(function(h){return typeof h=="function"})){var s=n.map(function(h){return typeof h=="function"?"function "+(h.name||"unnamed")+"()":typeof h}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+s+"]")}return n}function BT(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),h=1;h<n;h++)s[h-1]=arguments[h];var y=function(){for(var l=arguments.length,C=new Array(l),k=0;k<l;k++)C[k]=arguments[k];var F=0,$,me={memoizeOptions:void 0},W=C.pop();if(typeof W=="object"&&(me=W,W=C.pop()),typeof W!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof W+"]");var xe=me,Ce=xe.memoizeOptions,Oe=Ce===void 0?s:Ce,se=Array.isArray(Oe)?Oe:[Oe],te=FT(C),ne=t.apply(void 0,[function(){return F++,W.apply(null,arguments)}].concat(se)),be=t(function(){for(var Le=[],Se=te.length,Ie=0;Ie<Se;Ie++)Le.push(te[Ie].apply(null,arguments));return $=ne.apply(null,Le),$});return Object.assign(be,{resultFunc:W,memoizedResultFunc:ne,dependencies:te,lastResult:function(){return $},recomputations:function(){return F},resetRecomputations:function(){return F=0}}),be};return y}var VC=BT(RT);function aw(t){var n=function(h){var y=h.dispatch,x=h.getState;return function(l){return function(C){return typeof C=="function"?C(y,x,t):l(C)}}};return n}var sw=aw();sw.withExtraArgument=aw;var uw=sw,UT=globalThis&&globalThis.__extends||function(){var t=function(n,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,y){h.__proto__=y}||function(h,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(h[x]=y[x])},t(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(n,s);function h(){this.constructor=n}n.prototype=s===null?Object.create(s):(h.prototype=s.prototype,new h)}}();globalThis&&globalThis.__generator;var gm=globalThis&&globalThis.__spreadArray||function(t,n){for(var s=0,h=n.length,y=t.length;s<h;s++,y++)t[y]=n[s];return t},NT=Object.defineProperty,lw=Object.getOwnPropertySymbols,jT=Object.prototype.hasOwnProperty,VT=Object.prototype.propertyIsEnumerable,cw=function(t,n,s){return n in t?NT(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s},Fg=function(t,n){for(var s in n||(n={}))jT.call(n,s)&&cw(t,s,n[s]);if(lw)for(var h=0,y=lw(n);h<y.length;h++){var s=y[h];VT.call(n,s)&&cw(t,s,n[s])}return t},qT=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ym:ym.apply(null,arguments)};function ZT(t){if(typeof t!="object"||t===null)return!1;var n=Object.getPrototypeOf(t);if(n===null)return!0;for(var s=n;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return n===s}var GT=function(t){UT(n,t);function n(){for(var s=[],h=0;h<arguments.length;h++)s[h]=arguments[h];var y=t.apply(this,s)||this;return Object.setPrototypeOf(y,n.prototype),y}return Object.defineProperty(n,Symbol.species,{get:function(){return n},enumerable:!1,configurable:!0}),n.prototype.concat=function(){for(var s=[],h=0;h<arguments.length;h++)s[h]=arguments[h];return t.prototype.concat.apply(this,s)},n.prototype.prepend=function(){for(var s=[],h=0;h<arguments.length;h++)s[h]=arguments[h];return s.length===1&&Array.isArray(s[0])?new(n.bind.apply(n,gm([void 0],s[0].concat(this)))):new(n.bind.apply(n,gm([void 0],s.concat(this))))},n}(Array);function WT(t){return typeof t=="boolean"}function $T(){return function(n){return HT(n)}}function HT(t){t===void 0&&(t={});var n=t.thunk,s=n===void 0?!0:n;t.immutableCheck,t.serializableCheck;var h=new GT;return s&&(WT(s)?h.push(uw):h.push(uw.withExtraArgument(s.extraArgument))),h}var XT=!0;function qC(t){var n=$T(),s=t||{},h=s.reducer,y=h===void 0?void 0:h,x=s.middleware,l=x===void 0?n():x,C=s.devTools,k=C===void 0?!0:C,F=s.preloadedState,$=F===void 0?void 0:F,me=s.enhancers,W=me===void 0?void 0:me,xe;if(typeof y=="function")xe=y;else if(ZT(y))xe=AT(y);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var Ce=l;typeof Ce=="function"&&(Ce=Ce(n));var Oe=MT.apply(void 0,Ce),se=ym;k&&(se=qT(Fg({trace:!XT},typeof k=="object"&&k)));var te=[Oe];Array.isArray(W)?te=gm([Oe],W):typeof W=="function"&&(te=W(te));var ne=se.apply(void 0,te);return ow(xe,$,ne)}function Bg(t,n){function s(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];if(n){var x=n.apply(void 0,h);if(!x)throw new Error("prepareAction did not return an object");return Fg(Fg({type:t,payload:x.payload},"meta"in x&&{meta:x.meta}),"error"in x&&{error:x.error})}return{type:t,payload:h[0]}}return s.toString=function(){return""+t},s.type=t,s.match=function(h){return h.type===t},s}function KT(t){var n={},s=[],h,y={addCase:function(x,l){var C=typeof x=="string"?x:x.type;if(C in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[C]=l,y},addMatcher:function(x,l){return s.push({matcher:x,reducer:l}),y},addDefaultCase:function(x){return h=x,y}};return t(y),[n,s,h]}function JT(t){return typeof t=="function"}function ZC(t,n,s,h){s===void 0&&(s=[]);var y=typeof n=="function"?KT(n):[n,s,h],x=y[0],l=y[1],C=y[2],k;if(JT(t))k=function(){return Og(t(),function(){})};else{var F=Og(t,function(){});k=function(){return F}}function $(me,W){me===void 0&&(me=k());var xe=gm([x[W.type]],l.filter(function(Ce){var Oe=Ce.matcher;return Oe(W)}).map(function(Ce){var Oe=Ce.reducer;return Oe}));return xe.filter(function(Ce){return!!Ce}).length===0&&(xe=[C]),xe.reduce(function(Ce,Oe){if(Oe)if($u(Ce)){var se=Ce,te=Oe(se,W);return typeof te=="undefined"?Ce:te}else{if(Hu(Ce))return Og(Ce,function(ne){return Oe(ne,W)});var te=Oe(Ce,W);if(typeof te=="undefined"){if(Ce===null)return Ce;throw Error("A case reducer on a non-draftable value must not return undefined")}return te}return Ce},me)}return $.getInitialState=k,$}var Ug="listenerMiddleware";Bg(Ug+"/add");Bg(Ug+"/removeAll");Bg(Ug+"/remove");bT();var $o=63710088e-1,pw={centimeters:$o*100,centimetres:$o*100,degrees:$o/111325,feet:$o*3.28084,inches:$o*39.37,kilometers:$o/1e3,kilometres:$o/1e3,meters:$o,metres:$o,miles:$o/1609.344,millimeters:$o*1e3,millimetres:$o*1e3,nauticalmiles:$o/1852,radians:1,yards:$o*1.0936};function _m(t,n,s){s===void 0&&(s={});var h={type:"Feature"};return(s.id===0||s.id)&&(h.id=s.id),s.bbox&&(h.bbox=s.bbox),h.properties=n||{},h.geometry=t,h}function Ng(t,n,s){if(s===void 0&&(s={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!hw(t[0])||!hw(t[1]))throw new Error("coordinates must contain numbers");var h={type:"Point",coordinates:t};return _m(h,n,s)}function GC(t,n,s){s===void 0&&(s={});for(var h=0,y=t;h<y.length;h++){var x=y[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<x[x.length-1].length;l++)if(x[x.length-1][l]!==x[0][l])throw new Error("First and last Position are not equivalent.")}var C={type:"Polygon",coordinates:t};return _m(C,n,s)}function WC(t,n,s){if(s===void 0&&(s={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var h={type:"LineString",coordinates:t};return _m(h,n,s)}function YT(t,n){n===void 0&&(n={});var s={type:"FeatureCollection"};return n.id&&(s.id=n.id),n.bbox&&(s.bbox=n.bbox),s.features=t,s}function QT(t,n,s){s===void 0&&(s={});var h={type:"MultiPoint",coordinates:t};return _m(h,n,s)}function eC(t,n){n===void 0&&(n="kilometers");var s=pw[n];if(!s)throw new Error(n+" units is invalid");return t*s}function tC(t,n){n===void 0&&(n="kilometers");var s=pw[n];if(!s)throw new Error(n+" units is invalid");return t/s}function jg(t){var n=t%(2*Math.PI);return n*180/Math.PI}function ns(t){var n=t%360;return n*Math.PI/180}function hw(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function fw(t,n,s){if(t!==null)for(var h,y,x,l,C,k,F,$=0,me=0,W,xe=t.type,Ce=xe==="FeatureCollection",Oe=xe==="Feature",se=Ce?t.features.length:1,te=0;te<se;te++){F=Ce?t.features[te].geometry:Oe?t.geometry:t,W=F?F.type==="GeometryCollection":!1,C=W?F.geometries.length:1;for(var ne=0;ne<C;ne++){var be=0,Le=0;if(l=W?F.geometries[ne]:F,l!==null){k=l.coordinates;var Se=l.type;switch($=s&&(Se==="Polygon"||Se==="MultiPolygon")?1:0,Se){case null:break;case"Point":if(n(k,me,te,be,Le)===!1)return!1;me++,be++;break;case"LineString":case"MultiPoint":for(h=0;h<k.length;h++){if(n(k[h],me,te,be,Le)===!1)return!1;me++,Se==="MultiPoint"&&be++}Se==="LineString"&&be++;break;case"Polygon":case"MultiLineString":for(h=0;h<k.length;h++){for(y=0;y<k[h].length-$;y++){if(n(k[h][y],me,te,be,Le)===!1)return!1;me++}Se==="MultiLineString"&&be++,Se==="Polygon"&&Le++}Se==="Polygon"&&be++;break;case"MultiPolygon":for(h=0;h<k.length;h++){for(Le=0,y=0;y<k[h].length;y++){for(x=0;x<k[h][y].length-$;x++){if(n(k[h][y][x],me,te,be,Le)===!1)return!1;me++}Le++}be++}break;case"GeometryCollection":for(h=0;h<l.geometries.length;h++)if(fw(l.geometries[h],n,s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function rC(t,n){if(t.type==="Feature")n(t,0);else if(t.type==="FeatureCollection")for(var s=0;s<t.features.length&&n(t.features[s],s)!==!1;s++);}function dw(t,n){var s,h,y,x,l,C,k,F,$,me,W=0,xe=t.type==="FeatureCollection",Ce=t.type==="Feature",Oe=xe?t.features.length:1;for(s=0;s<Oe;s++){for(C=xe?t.features[s].geometry:Ce?t.geometry:t,F=xe?t.features[s].properties:Ce?t.properties:{},$=xe?t.features[s].bbox:Ce?t.bbox:void 0,me=xe?t.features[s].id:Ce?t.id:void 0,k=C?C.type==="GeometryCollection":!1,l=k?C.geometries.length:1,y=0;y<l;y++){if(x=k?C.geometries[y]:C,x===null){if(n(null,W,F,$,me)===!1)return!1;continue}switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(x,W,F,$,me)===!1)return!1;break}case"GeometryCollection":{for(h=0;h<x.geometries.length;h++)if(n(x.geometries[h],W,F,$,me)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}W++}}function vp(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function mw(t){return t.type==="Feature"?t.geometry:t}function yw(t,n,s){if(s===void 0&&(s={}),!t)throw new Error("point is required");if(!n)throw new Error("polygon is required");var h=vp(t),y=mw(n),x=y.type,l=n.bbox,C=y.coordinates;if(l&&nC(h,l)===!1)return!1;x==="Polygon"&&(C=[C]);for(var k=!1,F=0;F<C.length&&!k;F++)if(vw(h,C[F][0],s.ignoreBoundary)){for(var $=!1,me=1;me<C[F].length&&!$;)vw(h,C[F][me],!s.ignoreBoundary)&&($=!0),me++;$||(k=!0)}return k}function vw(t,n,s){var h=!1;n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]&&(n=n.slice(0,n.length-1));for(var y=0,x=n.length-1;y<n.length;x=y++){var l=n[y][0],C=n[y][1],k=n[x][0],F=n[x][1],$=t[1]*(l-k)+C*(k-t[0])+F*(t[0]-l)==0&&(l-t[0])*(k-t[0])<=0&&(C-t[1])*(F-t[1])<=0;if($)return!s;var me=C>t[1]!=F>t[1]&&t[0]<(k-l)*(t[1]-C)/(F-C)+l;me&&(h=!h)}return h}function nC(t,n){return n[0]<=t[0]&&n[1]<=t[1]&&n[2]>=t[0]&&n[3]>=t[1]}function $C(t,n){var s=[];return rC(t,function(h){var y=!1;if(h.geometry.type==="Point")dw(n,function(l){yw(h,l)&&(y=!0)}),y&&s.push(h);else if(h.geometry.type==="MultiPoint"){var x=[];dw(n,function(l){fw(h,function(C){yw(C,l)&&(y=!0,x.push(C))})}),y&&s.push(QT(x))}else throw new Error("Input geometry must be a Point or MultiPoint")}),YT(s)}function iC(t,n,s){s===void 0&&(s={});var h=vp(t),y=vp(n),x=ns(y[1]-h[1]),l=ns(y[0]-h[0]),C=ns(h[1]),k=ns(y[1]),F=Math.pow(Math.sin(x/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(C)*Math.cos(k);return eC(2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F)),s.units)}function oC(t,n,s,h){h===void 0&&(h={});var y=vp(t),x=ns(y[0]),l=ns(y[1]),C=ns(s),k=tC(n,h.units),F=Math.asin(Math.sin(l)*Math.cos(k)+Math.cos(l)*Math.sin(k)*Math.cos(C)),$=x+Math.atan2(Math.sin(C)*Math.sin(k)*Math.cos(l),Math.cos(k)-Math.sin(l)*Math.sin(F)),me=jg($),W=jg(F);return Ng([me,W],h.properties)}function gw(t,n,s){if(s===void 0&&(s={}),s.final===!0)return aC(t,n);var h=vp(t),y=vp(n),x=ns(h[0]),l=ns(y[0]),C=ns(h[1]),k=ns(y[1]),F=Math.sin(l-x)*Math.cos(k),$=Math.cos(C)*Math.sin(k)-Math.sin(C)*Math.cos(k)*Math.cos(l-x);return jg(Math.atan2(F,$))}function aC(t,n){var s=gw(n,t);return s=(s+180)%360,s}function HC(t,n,s){s===void 0&&(s={});for(var h=mw(t),y=h.coordinates,x=0,l=0;l<y.length&&!(n>=x&&l===y.length-1);l++)if(x>=n){var C=n-x;if(C){var k=gw(y[l],y[l-1])-180,F=oC(y[l],C,k,s);return F}else return Ng(y[l])}else x+=iC(y[l],y[l+1],s);return Ng(y[y.length-1])}function Vg(t,n){return Vg=Object.setPrototypeOf||function(h,y){return h.__proto__=y,h},Vg(t,n)}function xm(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,Vg(t,n)}var bm=function(){function t(){this.listeners=[]}var n=t.prototype;return n.subscribe=function(h){var y=this,x=h||function(){};return this.listeners.push(x),this.onSubscribe(),function(){y.listeners=y.listeners.filter(function(l){return l!==x}),y.onUnsubscribe()}},n.hasListeners=function(){return this.listeners.length>0},n.onSubscribe=function(){},n.onUnsubscribe=function(){},t}(),_w=typeof window=="undefined";function Co(){}function sC(t,n){return typeof t=="function"?t(n):t}function uC(t){return typeof t=="number"&&t>=0&&t!==1/0}function wm(t){return Array.isArray(t)?t:[t]}function lC(t,n){return Math.max(t+(n||0)-Date.now(),0)}function qg(t,n,s){return Em(t)?typeof n=="function"?Yr({},s,{queryKey:t,queryFn:n}):Yr({},n,{queryKey:t}):t}function Ku(t,n,s){return Em(t)?[Yr({},n,{queryKey:t}),s]:[t||{},n]}function cC(t,n){if(t===!0&&n===!0||t==null&&n==null)return"all";if(t===!1&&n===!1)return"none";var s=t!=null?t:!n;return s?"active":"inactive"}function xw(t,n){var s=t.active,h=t.exact,y=t.fetching,x=t.inactive,l=t.predicate,C=t.queryKey,k=t.stale;if(Em(C)){if(h){if(n.queryHash!==Zg(C,n.options))return!1}else if(!Sm(n.queryKey,C))return!1}var F=cC(s,x);if(F==="none")return!1;if(F!=="all"){var $=n.isActive();if(F==="active"&&!$||F==="inactive"&&$)return!1}return!(typeof k=="boolean"&&n.isStale()!==k||typeof y=="boolean"&&n.isFetching()!==y||l&&!l(n))}function bw(t,n){var s=t.exact,h=t.fetching,y=t.predicate,x=t.mutationKey;if(Em(x)){if(!n.options.mutationKey)return!1;if(s){if(Nl(n.options.mutationKey)!==Nl(x))return!1}else if(!Sm(n.options.mutationKey,x))return!1}return!(typeof h=="boolean"&&n.state.status==="loading"!==h||y&&!y(n))}function Zg(t,n){var s=(n==null?void 0:n.queryKeyHashFn)||Nl;return s(t)}function Nl(t){var n=wm(t);return pC(n)}function pC(t){return JSON.stringify(t,function(n,s){return Gg(s)?Object.keys(s).sort().reduce(function(h,y){return h[y]=s[y],h},{}):s})}function Sm(t,n){return ww(wm(t),wm(n))}function ww(t,n){return t===n?!0:typeof t!=typeof n?!1:t&&n&&typeof t=="object"&&typeof n=="object"?!Object.keys(n).some(function(s){return!ww(t[s],n[s])}):!1}function Sw(t,n){if(t===n)return t;var s=Array.isArray(t)&&Array.isArray(n);if(s||Gg(t)&&Gg(n)){for(var h=s?t.length:Object.keys(t).length,y=s?n:Object.keys(n),x=y.length,l=s?[]:{},C=0,k=0;k<x;k++){var F=s?k:y[k];l[F]=Sw(t[F],n[F]),l[F]===t[F]&&C++}return h===x&&C===h?t:l}return n}function Gg(t){if(!Ew(t))return!1;var n=t.constructor;if(typeof n=="undefined")return!0;var s=n.prototype;return!(!Ew(s)||!s.hasOwnProperty("isPrototypeOf"))}function Ew(t){return Object.prototype.toString.call(t)==="[object Object]"}function Em(t){return typeof t=="string"||Array.isArray(t)}function hC(t){return new Promise(function(n){setTimeout(n,t)})}function Pw(t){Promise.resolve().then(t).catch(function(n){return setTimeout(function(){throw n})})}function Tw(){if(typeof AbortController=="function")return new AbortController}var fC=function(t){xm(n,t);function n(){return t.apply(this,arguments)||this}var s=n.prototype;return s.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},s.setEventListener=function(y){var x=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=y(function(l){typeof l=="boolean"?x.setFocused(l):x.onFocus()})},s.setFocused=function(y){this.focused=y,y&&this.onFocus()},s.onFocus=function(){this.listeners.forEach(function(y){y()})},s.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document=="undefined"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},s.setDefaultEventListener=function(){var y;!_w&&((y=window)==null?void 0:y.addEventListener)&&this.setEventListener(function(x){var l=function(){return x()};return window.addEventListener("visibilitychange",l,!1),window.addEventListener("focus",l,!1),function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("focus",l)}})},n}(bm),Pm=new fC,dC=function(t){xm(n,t);function n(){return t.apply(this,arguments)||this}var s=n.prototype;return s.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},s.setEventListener=function(y){var x=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=y(function(l){typeof l=="boolean"?x.setOnline(l):x.onOnline()})},s.setOnline=function(y){this.online=y,y&&this.onOnline()},s.onOnline=function(){this.listeners.forEach(function(y){y()})},s.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator=="undefined"||typeof navigator.onLine=="undefined"?!0:navigator.onLine},s.setDefaultEventListener=function(){var y;!_w&&((y=window)==null?void 0:y.addEventListener)&&this.setEventListener(function(x){var l=function(){return x()};return window.addEventListener("online",l,!1),window.addEventListener("offline",l,!1),function(){window.removeEventListener("online",l),window.removeEventListener("offline",l)}})},n}(bm),Tm=new dC;function mC(t){return Math.min(1e3*Math.pow(2,t),3e4)}function Cm(t){return typeof(t==null?void 0:t.cancel)=="function"}var Cw=function(n){this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent};function Wg(t){return t instanceof Cw}var Iw=function(n){var s=this,h=!1,y,x,l,C;this.abort=n.abort,this.cancel=function(W){return y==null?void 0:y(W)},this.cancelRetry=function(){h=!0},this.continueRetry=function(){h=!1},this.continue=function(){return x==null?void 0:x()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(W,xe){l=W,C=xe});var k=function(xe){s.isResolved||(s.isResolved=!0,n.onSuccess==null||n.onSuccess(xe),x==null||x(),l(xe))},F=function(xe){s.isResolved||(s.isResolved=!0,n.onError==null||n.onError(xe),x==null||x(),C(xe))},$=function(){return new Promise(function(xe){x=xe,s.isPaused=!0,n.onPause==null||n.onPause()}).then(function(){x=void 0,s.isPaused=!1,n.onContinue==null||n.onContinue()})},me=function W(){if(!s.isResolved){var xe;try{xe=n.fn()}catch(Ce){xe=Promise.reject(Ce)}y=function(Oe){if(!s.isResolved&&(F(new Cw(Oe)),s.abort==null||s.abort(),Cm(xe)))try{xe.cancel()}catch{}},s.isTransportCancelable=Cm(xe),Promise.resolve(xe).then(k).catch(function(Ce){var Oe,se;if(!s.isResolved){var te=(Oe=n.retry)!=null?Oe:3,ne=(se=n.retryDelay)!=null?se:mC,be=typeof ne=="function"?ne(s.failureCount,Ce):ne,Le=te===!0||typeof te=="number"&&s.failureCount<te||typeof te=="function"&&te(s.failureCount,Ce);if(h||!Le){F(Ce);return}s.failureCount++,n.onFail==null||n.onFail(s.failureCount,Ce),hC(be).then(function(){if(!Pm.isFocused()||!Tm.isOnline())return $()}).then(function(){h?F(Ce):W()})}})}};me()},yC=function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(s){s()},this.batchNotifyFn=function(s){s()}}var n=t.prototype;return n.batch=function(h){this.transactions++;var y=h();return this.transactions--,this.transactions||this.flush(),y},n.schedule=function(h){var y=this;this.transactions?this.queue.push(h):Pw(function(){y.notifyFn(h)})},n.batchCalls=function(h){var y=this;return function(){for(var x=arguments.length,l=new Array(x),C=0;C<x;C++)l[C]=arguments[C];y.schedule(function(){h.apply(void 0,l)})}},n.flush=function(){var h=this,y=this.queue;this.queue=[],y.length&&Pw(function(){h.batchNotifyFn(function(){y.forEach(function(x){h.notifyFn(x)})})})},n.setNotifyFunction=function(h){this.notifyFn=h},n.setBatchNotifyFunction=function(h){this.batchNotifyFn=h},t}(),ji=new yC,kw=console;function Aw(){return kw}function vC(t){kw=t}var gC=function(){function t(s){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.cache=s.cache,this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.initialState=s.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=s.meta,this.scheduleGc()}var n=t.prototype;return n.setOptions=function(h){var y;this.options=Yr({},this.defaultOptions,h),this.meta=h==null?void 0:h.meta,this.cacheTime=Math.max(this.cacheTime||0,(y=this.options.cacheTime)!=null?y:5*60*1e3)},n.setDefaultOptions=function(h){this.defaultOptions=h},n.scheduleGc=function(){var h=this;this.clearGcTimeout(),uC(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){h.optionalRemove()},this.cacheTime))},n.clearGcTimeout=function(){clearTimeout(this.gcTimeout),this.gcTimeout=void 0},n.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},n.setData=function(h,y){var x,l,C=this.state.data,k=sC(h,C);return((x=(l=this.options).isDataEqual)==null?void 0:x.call(l,C,k))?k=C:this.options.structuralSharing!==!1&&(k=Sw(C,k)),this.dispatch({data:k,type:"success",dataUpdatedAt:y==null?void 0:y.updatedAt}),k},n.setState=function(h,y){this.dispatch({type:"setState",state:h,setStateOptions:y})},n.cancel=function(h){var y,x=this.promise;return(y=this.retryer)==null||y.cancel(h),x?x.then(Co).catch(Co):Promise.resolve()},n.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},n.reset=function(){this.destroy(),this.setState(this.initialState)},n.isActive=function(){return this.observers.some(function(h){return h.options.enabled!==!1})},n.isFetching=function(){return this.state.isFetching},n.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(h){return h.getCurrentResult().isStale})},n.isStaleByTime=function(h){return h===void 0&&(h=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!lC(this.state.dataUpdatedAt,h)},n.onFocus=function(){var h,y=this.observers.find(function(x){return x.shouldFetchOnWindowFocus()});y&&y.refetch(),(h=this.retryer)==null||h.continue()},n.onOnline=function(){var h,y=this.observers.find(function(x){return x.shouldFetchOnReconnect()});y&&y.refetch(),(h=this.retryer)==null||h.continue()},n.addObserver=function(h){this.observers.indexOf(h)===-1&&(this.observers.push(h),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:h}))},n.removeObserver=function(h){this.observers.indexOf(h)!==-1&&(this.observers=this.observers.filter(function(y){return y!==h}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:h}))},n.getObserversCount=function(){return this.observers.length},n.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},n.fetch=function(h,y){var x=this,l,C,k;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(y==null?void 0:y.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var F;return(F=this.retryer)==null||F.continueRetry(),this.promise}}if(h&&this.setOptions(h),!this.options.queryFn){var $=this.observers.find(function(ne){return ne.options.queryFn});$&&this.setOptions($.options)}var me=wm(this.queryKey),W=Tw(),xe={queryKey:me,pageParam:void 0,meta:this.meta};Object.defineProperty(xe,"signal",{enumerable:!0,get:function(){if(W)return x.abortSignalConsumed=!0,W.signal}});var Ce=function(){return x.options.queryFn?(x.abortSignalConsumed=!1,x.options.queryFn(xe)):Promise.reject("Missing queryFn")},Oe={fetchOptions:y,options:this.options,queryKey:me,state:this.state,fetchFn:Ce,meta:this.meta};if((l=this.options.behavior)==null?void 0:l.onFetch){var se;(se=this.options.behavior)==null||se.onFetch(Oe)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((C=Oe.fetchOptions)==null?void 0:C.meta)){var te;this.dispatch({type:"fetch",meta:(te=Oe.fetchOptions)==null?void 0:te.meta})}return this.retryer=new Iw({fn:Oe.fetchFn,abort:W==null||(k=W.abort)==null?void 0:k.bind(W),onSuccess:function(be){x.setData(be),x.cache.config.onSuccess==null||x.cache.config.onSuccess(be,x),x.cacheTime===0&&x.optionalRemove()},onError:function(be){Wg(be)&&be.silent||x.dispatch({type:"error",error:be}),Wg(be)||(x.cache.config.onError==null||x.cache.config.onError(be,x),Aw().error(be)),x.cacheTime===0&&x.optionalRemove()},onFail:function(){x.dispatch({type:"failed"})},onPause:function(){x.dispatch({type:"pause"})},onContinue:function(){x.dispatch({type:"continue"})},retry:Oe.options.retry,retryDelay:Oe.options.retryDelay}),this.promise=this.retryer.promise,this.promise},n.dispatch=function(h){var y=this;this.state=this.reducer(this.state,h),ji.batch(function(){y.observers.forEach(function(x){x.onQueryUpdate(h)}),y.cache.notify({query:y,type:"queryUpdated",action:h})})},n.getDefaultState=function(h){var y=typeof h.initialData=="function"?h.initialData():h.initialData,x=typeof h.initialData!="undefined",l=x?typeof h.initialDataUpdatedAt=="function"?h.initialDataUpdatedAt():h.initialDataUpdatedAt:0,C=typeof y!="undefined";return{data:y,dataUpdateCount:0,dataUpdatedAt:C?l!=null?l:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:C?"success":"idle"}},n.reducer=function(h,y){var x,l;switch(y.type){case"failed":return Yr({},h,{fetchFailureCount:h.fetchFailureCount+1});case"pause":return Yr({},h,{isPaused:!0});case"continue":return Yr({},h,{isPaused:!1});case"fetch":return Yr({},h,{fetchFailureCount:0,fetchMeta:(x=y.meta)!=null?x:null,isFetching:!0,isPaused:!1,status:h.dataUpdatedAt?h.status:"loading"});case"success":return Yr({},h,{data:y.data,dataUpdateCount:h.dataUpdateCount+1,dataUpdatedAt:(l=y.dataUpdatedAt)!=null?l:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var C=y.error;return Wg(C)&&C.revert&&this.revertState?Yr({},this.revertState):Yr({},h,{error:C,errorUpdateCount:h.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:h.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return Yr({},h,{isInvalidated:!0});case"setState":return Yr({},h,y.state);default:return h}},t}(),_C=function(t){xm(n,t);function n(h){var y;return y=t.call(this)||this,y.config=h||{},y.queries=[],y.queriesMap={},y}var s=n.prototype;return s.build=function(y,x,l){var C,k=x.queryKey,F=(C=x.queryHash)!=null?C:Zg(k,x),$=this.get(F);return $||($=new gC({cache:this,queryKey:k,queryHash:F,options:y.defaultQueryOptions(x),state:l,defaultOptions:y.getQueryDefaults(k),meta:x.meta}),this.add($)),$},s.add=function(y){this.queriesMap[y.queryHash]||(this.queriesMap[y.queryHash]=y,this.queries.push(y),this.notify({type:"queryAdded",query:y}))},s.remove=function(y){var x=this.queriesMap[y.queryHash];x&&(y.destroy(),this.queries=this.queries.filter(function(l){return l!==y}),x===y&&delete this.queriesMap[y.queryHash],this.notify({type:"queryRemoved",query:y}))},s.clear=function(){var y=this;ji.batch(function(){y.queries.forEach(function(x){y.remove(x)})})},s.get=function(y){return this.queriesMap[y]},s.getAll=function(){return this.queries},s.find=function(y,x){var l=Ku(y,x),C=l[0];return typeof C.exact=="undefined"&&(C.exact=!0),this.queries.find(function(k){return xw(C,k)})},s.findAll=function(y,x){var l=Ku(y,x),C=l[0];return Object.keys(C).length>0?this.queries.filter(function(k){return xw(C,k)}):this.queries},s.notify=function(y){var x=this;ji.batch(function(){x.listeners.forEach(function(l){l(y)})})},s.onFocus=function(){var y=this;ji.batch(function(){y.queries.forEach(function(x){x.onFocus()})})},s.onOnline=function(){var y=this;ji.batch(function(){y.queries.forEach(function(x){x.onOnline()})})},n}(bm),xC=function(){function t(s){this.options=Yr({},s.defaultOptions,s.options),this.mutationId=s.mutationId,this.mutationCache=s.mutationCache,this.observers=[],this.state=s.state||bC(),this.meta=s.meta}var n=t.prototype;return n.setState=function(h){this.dispatch({type:"setState",state:h})},n.addObserver=function(h){this.observers.indexOf(h)===-1&&this.observers.push(h)},n.removeObserver=function(h){this.observers=this.observers.filter(function(y){return y!==h})},n.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Co).catch(Co)):Promise.resolve()},n.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},n.execute=function(){var h=this,y,x=this.state.status==="loading",l=Promise.resolve();return x||(this.dispatch({type:"loading",variables:this.options.variables}),l=l.then(function(){h.mutationCache.config.onMutate==null||h.mutationCache.config.onMutate(h.state.variables,h)}).then(function(){return h.options.onMutate==null?void 0:h.options.onMutate(h.state.variables)}).then(function(C){C!==h.state.context&&h.dispatch({type:"loading",context:C,variables:h.state.variables})})),l.then(function(){return h.executeMutation()}).then(function(C){y=C,h.mutationCache.config.onSuccess==null||h.mutationCache.config.onSuccess(y,h.state.variables,h.state.context,h)}).then(function(){return h.options.onSuccess==null?void 0:h.options.onSuccess(y,h.state.variables,h.state.context)}).then(function(){return h.options.onSettled==null?void 0:h.options.onSettled(y,null,h.state.variables,h.state.context)}).then(function(){return h.dispatch({type:"success",data:y}),y}).catch(function(C){return h.mutationCache.config.onError==null||h.mutationCache.config.onError(C,h.state.variables,h.state.context,h),Aw().error(C),Promise.resolve().then(function(){return h.options.onError==null?void 0:h.options.onError(C,h.state.variables,h.state.context)}).then(function(){return h.options.onSettled==null?void 0:h.options.onSettled(void 0,C,h.state.variables,h.state.context)}).then(function(){throw h.dispatch({type:"error",error:C}),C})})},n.executeMutation=function(){var h=this,y;return this.retryer=new Iw({fn:function(){return h.options.mutationFn?h.options.mutationFn(h.state.variables):Promise.reject("No mutationFn found")},onFail:function(){h.dispatch({type:"failed"})},onPause:function(){h.dispatch({type:"pause"})},onContinue:function(){h.dispatch({type:"continue"})},retry:(y=this.options.retry)!=null?y:0,retryDelay:this.options.retryDelay}),this.retryer.promise},n.dispatch=function(h){var y=this;this.state=wC(this.state,h),ji.batch(function(){y.observers.forEach(function(x){x.onMutationUpdate(h)}),y.mutationCache.notify(y)})},t}();function bC(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function wC(t,n){switch(n.type){case"failed":return Yr({},t,{failureCount:t.failureCount+1});case"pause":return Yr({},t,{isPaused:!0});case"continue":return Yr({},t,{isPaused:!1});case"loading":return Yr({},t,{context:n.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:n.variables});case"success":return Yr({},t,{data:n.data,error:null,status:"success",isPaused:!1});case"error":return Yr({},t,{data:void 0,error:n.error,failureCount:t.failureCount+1,isPaused:!1,status:"error"});case"setState":return Yr({},t,n.state);default:return t}}var SC=function(t){xm(n,t);function n(h){var y;return y=t.call(this)||this,y.config=h||{},y.mutations=[],y.mutationId=0,y}var s=n.prototype;return s.build=function(y,x,l){var C=new xC({mutationCache:this,mutationId:++this.mutationId,options:y.defaultMutationOptions(x),state:l,defaultOptions:x.mutationKey?y.getMutationDefaults(x.mutationKey):void 0,meta:x.meta});return this.add(C),C},s.add=function(y){this.mutations.push(y),this.notify(y)},s.remove=function(y){this.mutations=this.mutations.filter(function(x){return x!==y}),y.cancel(),this.notify(y)},s.clear=function(){var y=this;ji.batch(function(){y.mutations.forEach(function(x){y.remove(x)})})},s.getAll=function(){return this.mutations},s.find=function(y){return typeof y.exact=="undefined"&&(y.exact=!0),this.mutations.find(function(x){return bw(y,x)})},s.findAll=function(y){return this.mutations.filter(function(x){return bw(y,x)})},s.notify=function(y){var x=this;ji.batch(function(){x.listeners.forEach(function(l){l(y)})})},s.onFocus=function(){this.resumePausedMutations()},s.onOnline=function(){this.resumePausedMutations()},s.resumePausedMutations=function(){var y=this.mutations.filter(function(x){return x.state.isPaused});return ji.batch(function(){return y.reduce(function(x,l){return x.then(function(){return l.continue().catch(Co)})},Promise.resolve())})},n}(bm);function EC(){return{onFetch:function(n){n.fetchFn=function(){var s,h,y,x,l,C,k=(s=n.fetchOptions)==null||(h=s.meta)==null?void 0:h.refetchPage,F=(y=n.fetchOptions)==null||(x=y.meta)==null?void 0:x.fetchMore,$=F==null?void 0:F.pageParam,me=(F==null?void 0:F.direction)==="forward",W=(F==null?void 0:F.direction)==="backward",xe=((l=n.state.data)==null?void 0:l.pages)||[],Ce=((C=n.state.data)==null?void 0:C.pageParams)||[],Oe=Tw(),se=Oe==null?void 0:Oe.signal,te=Ce,ne=!1,be=n.options.queryFn||function(){return Promise.reject("Missing queryFn")},Le=function(Ut,Cr,Ir,Fn){return te=Fn?[Cr].concat(te):[].concat(te,[Cr]),Fn?[Ir].concat(Ut):[].concat(Ut,[Ir])},Se=function(Ut,Cr,Ir,Fn){if(ne)return Promise.reject("Cancelled");if(typeof Ir=="undefined"&&!Cr&&Ut.length)return Promise.resolve(Ut);var Qt={queryKey:n.queryKey,signal:se,pageParam:Ir,meta:n.meta},Bn=be(Qt),Gt=Promise.resolve(Bn).then(function(zt){return Le(Ut,Ir,zt,Fn)});if(Cm(Bn)){var Ye=Gt;Ye.cancel=Bn.cancel}return Gt},Ie;if(!xe.length)Ie=Se([]);else if(me){var je=typeof $!="undefined",at=je?$:Mw(n.options,xe);Ie=Se(xe,je,at)}else if(W){var Xe=typeof $!="undefined",_t=Xe?$:PC(n.options,xe);Ie=Se(xe,Xe,_t,!0)}else(function(){te=[];var Ct=typeof n.options.getNextPageParam=="undefined",Ut=k&&xe[0]?k(xe[0],0,xe):!0;Ie=Ut?Se([],Ct,Ce[0]):Promise.resolve(Le([],Ce[0],xe[0]));for(var Cr=function(Qt){Ie=Ie.then(function(Bn){var Gt=k&&xe[Qt]?k(xe[Qt],Qt,xe):!0;if(Gt){var Ye=Ct?Ce[Qt]:Mw(n.options,Bn);return Se(Bn,Ct,Ye)}return Promise.resolve(Le(Bn,Ce[Qt],xe[Qt]))})},Ir=1;Ir<xe.length;Ir++)Cr(Ir)})();var Mt=Ie.then(function(Ct){return{pages:Ct,pageParams:te}}),bt=Mt;return bt.cancel=function(){ne=!0,Oe==null||Oe.abort(),Cm(Ie)&&Ie.cancel()},Mt}}}}function Mw(t,n){return t.getNextPageParam==null?void 0:t.getNextPageParam(n[n.length-1],n)}function PC(t,n){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(n[0],n)}var XC=function(){function t(s){s===void 0&&(s={}),this.queryCache=s.queryCache||new _C,this.mutationCache=s.mutationCache||new SC,this.defaultOptions=s.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var n=t.prototype;return n.mount=function(){var h=this;this.unsubscribeFocus=Pm.subscribe(function(){Pm.isFocused()&&Tm.isOnline()&&(h.mutationCache.onFocus(),h.queryCache.onFocus())}),this.unsubscribeOnline=Tm.subscribe(function(){Pm.isFocused()&&Tm.isOnline()&&(h.mutationCache.onOnline(),h.queryCache.onOnline())})},n.unmount=function(){var h,y;(h=this.unsubscribeFocus)==null||h.call(this),(y=this.unsubscribeOnline)==null||y.call(this)},n.isFetching=function(h,y){var x=Ku(h,y),l=x[0];return l.fetching=!0,this.queryCache.findAll(l).length},n.isMutating=function(h){return this.mutationCache.findAll(Yr({},h,{fetching:!0})).length},n.getQueryData=function(h,y){var x;return(x=this.queryCache.find(h,y))==null?void 0:x.state.data},n.getQueriesData=function(h){return this.getQueryCache().findAll(h).map(function(y){var x=y.queryKey,l=y.state,C=l.data;return[x,C]})},n.setQueryData=function(h,y,x){var l=qg(h),C=this.defaultQueryOptions(l);return this.queryCache.build(this,C).setData(y,x)},n.setQueriesData=function(h,y,x){var l=this;return ji.batch(function(){return l.getQueryCache().findAll(h).map(function(C){var k=C.queryKey;return[k,l.setQueryData(k,y,x)]})})},n.getQueryState=function(h,y){var x;return(x=this.queryCache.find(h,y))==null?void 0:x.state},n.removeQueries=function(h,y){var x=Ku(h,y),l=x[0],C=this.queryCache;ji.batch(function(){C.findAll(l).forEach(function(k){C.remove(k)})})},n.resetQueries=function(h,y,x){var l=this,C=Ku(h,y,x),k=C[0],F=C[1],$=this.queryCache,me=Yr({},k,{active:!0});return ji.batch(function(){return $.findAll(k).forEach(function(W){W.reset()}),l.refetchQueries(me,F)})},n.cancelQueries=function(h,y,x){var l=this,C=Ku(h,y,x),k=C[0],F=C[1],$=F===void 0?{}:F;typeof $.revert=="undefined"&&($.revert=!0);var me=ji.batch(function(){return l.queryCache.findAll(k).map(function(W){return W.cancel($)})});return Promise.all(me).then(Co).catch(Co)},n.invalidateQueries=function(h,y,x){var l,C,k,F=this,$=Ku(h,y,x),me=$[0],W=$[1],xe=Yr({},me,{active:(l=(C=me.refetchActive)!=null?C:me.active)!=null?l:!0,inactive:(k=me.refetchInactive)!=null?k:!1});return ji.batch(function(){return F.queryCache.findAll(me).forEach(function(Ce){Ce.invalidate()}),F.refetchQueries(xe,W)})},n.refetchQueries=function(h,y,x){var l=this,C=Ku(h,y,x),k=C[0],F=C[1],$=ji.batch(function(){return l.queryCache.findAll(k).map(function(W){return W.fetch(void 0,Yr({},F,{meta:{refetchPage:k==null?void 0:k.refetchPage}}))})}),me=Promise.all($).then(Co);return(F==null?void 0:F.throwOnError)||(me=me.catch(Co)),me},n.fetchQuery=function(h,y,x){var l=qg(h,y,x),C=this.defaultQueryOptions(l);typeof C.retry=="undefined"&&(C.retry=!1);var k=this.queryCache.build(this,C);return k.isStaleByTime(C.staleTime)?k.fetch(C):Promise.resolve(k.state.data)},n.prefetchQuery=function(h,y,x){return this.fetchQuery(h,y,x).then(Co).catch(Co)},n.fetchInfiniteQuery=function(h,y,x){var l=qg(h,y,x);return l.behavior=EC(),this.fetchQuery(l)},n.prefetchInfiniteQuery=function(h,y,x){return this.fetchInfiniteQuery(h,y,x).then(Co).catch(Co)},n.cancelMutations=function(){var h=this,y=ji.batch(function(){return h.mutationCache.getAll().map(function(x){return x.cancel()})});return Promise.all(y).then(Co).catch(Co)},n.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},n.executeMutation=function(h){return this.mutationCache.build(this,h).execute()},n.getQueryCache=function(){return this.queryCache},n.getMutationCache=function(){return this.mutationCache},n.getDefaultOptions=function(){return this.defaultOptions},n.setDefaultOptions=function(h){this.defaultOptions=h},n.setQueryDefaults=function(h,y){var x=this.queryDefaults.find(function(l){return Nl(h)===Nl(l.queryKey)});x?x.defaultOptions=y:this.queryDefaults.push({queryKey:h,defaultOptions:y})},n.getQueryDefaults=function(h){var y;return h?(y=this.queryDefaults.find(function(x){return Sm(h,x.queryKey)}))==null?void 0:y.defaultOptions:void 0},n.setMutationDefaults=function(h,y){var x=this.mutationDefaults.find(function(l){return Nl(h)===Nl(l.mutationKey)});x?x.defaultOptions=y:this.mutationDefaults.push({mutationKey:h,defaultOptions:y})},n.getMutationDefaults=function(h){var y;return h?(y=this.mutationDefaults.find(function(x){return Sm(h,x.mutationKey)}))==null?void 0:y.defaultOptions:void 0},n.defaultQueryOptions=function(h){if(h==null?void 0:h._defaulted)return h;var y=Yr({},this.defaultOptions.queries,this.getQueryDefaults(h==null?void 0:h.queryKey),h,{_defaulted:!0});return!y.queryHash&&y.queryKey&&(y.queryHash=Zg(y.queryKey,y)),y},n.defaultQueryObserverOptions=function(h){return this.defaultQueryOptions(h)},n.defaultMutationOptions=function(h){return(h==null?void 0:h._defaulted)?h:Yr({},this.defaultOptions.mutations,this.getMutationDefaults(h==null?void 0:h.mutationKey),h,{_defaulted:!0})},n.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},t}(),TC=mT.unstable_batchedUpdates;ji.setBatchNotifyFunction(TC);var CC=console;vC(CC);var zw=Bc.createContext(void 0),IC=Bc.createContext(!1);function kC(t){return t&&typeof window!="undefined"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=zw),window.ReactQueryClientContext):zw}var KC=function(n){var s=n.client,h=n.contextSharing,y=h===void 0?!1:h,x=n.children;Bc.useEffect(function(){return s.mount(),function(){s.unmount()}},[s]);var l=kC(y);return Bc.createElement(IC.Provider,{value:y},Bc.createElement(l.Provider,{value:s},x))};try{self["workbox:window:6.4.1"]&&_()}catch{}function Lw(t,n){return new Promise(function(s){var h=new MessageChannel;h.port1.onmessage=function(y){s(y.data)},t.postMessage(n,[h.port2])})}function AC(t,n){for(var s=0;s<n.length;s++){var h=n[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}function Dw(t,n){(n==null||n>t.length)&&(n=t.length);for(var s=0,h=new Array(n);s<n;s++)h[s]=t[s];return h}function MC(t,n){var s;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(s=function(y,x){if(y){if(typeof y=="string")return Dw(y,x);var l=Object.prototype.toString.call(y).slice(8,-1);return l==="Object"&&y.constructor&&(l=y.constructor.name),l==="Map"||l==="Set"?Array.from(y):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Dw(y,x):void 0}}(t))||n&&t&&typeof t.length=="number"){s&&(t=s);var h=0;return function(){return h>=t.length?{done:!0}:{done:!1,value:t[h++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(s=t[Symbol.iterator]()).next.bind(s)}try{self["workbox:core:6.4.1"]&&_()}catch{}var $g=function(){var t=this;this.promise=new Promise(function(n,s){t.resolve=n,t.reject=s})};function Hg(t,n){var s=location.href;return new URL(t,s).href===new URL(n,s).href}var lf=function(t,n){this.type=t,Object.assign(this,n)};function Im(t,n,s){return s?n?n(t):t:(t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t)}function zC(){}var LC={type:"SKIP_WAITING"};function Ow(t,n){if(!n)return t&&t.then?t.then(zC):Promise.resolve()}var JC=function(t){var n,s;function h(C,k){var F,$;return k===void 0&&(k={}),(F=t.call(this)||this).nn={},F.tn=0,F.rn=new $g,F.en=new $g,F.on=new $g,F.un=0,F.an=new Set,F.cn=function(){var me=F.fn,W=me.installing;F.tn>0||!Hg(W.scriptURL,F.sn.toString())||performance.now()>F.un+6e4?(F.vn=W,me.removeEventListener("updatefound",F.cn)):(F.hn=W,F.an.add(W),F.rn.resolve(W)),++F.tn,W.addEventListener("statechange",F.ln)},F.ln=function(me){var W=F.fn,xe=me.target,Ce=xe.state,Oe=xe===F.vn,se={sw:xe,isExternal:Oe,originalEvent:me};!Oe&&F.mn&&(se.isUpdate=!0),F.dispatchEvent(new lf(Ce,se)),Ce==="installed"?F.wn=self.setTimeout(function(){Ce==="installed"&&W.waiting===xe&&F.dispatchEvent(new lf("waiting",se))},200):Ce==="activating"&&(clearTimeout(F.wn),Oe||F.en.resolve(xe))},F.dn=function(me){var W=F.hn,xe=W!==navigator.serviceWorker.controller;F.dispatchEvent(new lf("controlling",{isExternal:xe,originalEvent:me,sw:W,isUpdate:F.mn})),xe||F.on.resolve(W)},F.gn=($=function(me){var W=me.data,xe=me.ports,Ce=me.source;return Im(F.getSW(),function(){F.an.has(Ce)&&F.dispatchEvent(new lf("message",{data:W,originalEvent:me,ports:xe,sw:Ce}))})},function(){for(var me=[],W=0;W<arguments.length;W++)me[W]=arguments[W];try{return Promise.resolve($.apply(this,me))}catch(xe){return Promise.reject(xe)}}),F.sn=C,F.nn=k,navigator.serviceWorker.addEventListener("message",F.gn),F}s=t,(n=h).prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s;var y,x,l=h.prototype;return l.register=function(C){var k=(C===void 0?{}:C).immediate,F=k!==void 0&&k;try{var $=this;return function(me,W){var xe=me();return xe&&xe.then?xe.then(W):W(xe)}(function(){if(!F&&document.readyState!=="complete")return Ow(new Promise(function(me){return window.addEventListener("load",me)}))},function(){return $.mn=Boolean(navigator.serviceWorker.controller),$.yn=$.pn(),Im($.bn(),function(me){$.fn=me,$.yn&&($.hn=$.yn,$.en.resolve($.yn),$.on.resolve($.yn),$.yn.addEventListener("statechange",$.ln,{once:!0}));var W=$.fn.waiting;return W&&Hg(W.scriptURL,$.sn.toString())&&($.hn=W,Promise.resolve().then(function(){$.dispatchEvent(new lf("waiting",{sw:W,wasWaitingBeforeRegister:!0}))}).then(function(){})),$.hn&&($.rn.resolve($.hn),$.an.add($.hn)),$.fn.addEventListener("updatefound",$.cn),navigator.serviceWorker.addEventListener("controllerchange",$.dn),$.fn})})}catch(me){return Promise.reject(me)}},l.update=function(){try{return this.fn?Ow(this.fn.update()):void 0}catch(C){return Promise.reject(C)}},l.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},l.messageSW=function(C){try{return Im(this.getSW(),function(k){return Lw(k,C)})}catch(k){return Promise.reject(k)}},l.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Lw(this.fn.waiting,LC)},l.pn=function(){var C=navigator.serviceWorker.controller;return C&&Hg(C.scriptURL,this.sn.toString())?C:void 0},l.bn=function(){try{var C=this;return function(k,F){try{var $=k()}catch(me){return F(me)}return $&&$.then?$.then(void 0,F):$}(function(){return Im(navigator.serviceWorker.register(C.sn,C.nn),function(k){return C.un=performance.now(),k})},function(k){throw k})}catch(k){return Promise.reject(k)}},y=h,(x=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&AC(y.prototype,x),h}(function(){function t(){this.Pn=new Map}var n=t.prototype;return n.addEventListener=function(s,h){this.Sn(s).add(h)},n.removeEventListener=function(s,h){this.Sn(s).delete(h)},n.dispatchEvent=function(s){s.target=this;for(var h,y=MC(this.Sn(s.type));!(h=y()).done;)(0,h.value)(s)},n.Sn=function(s){return this.Pn.has(s)||this.Pn.set(s,new Set),this.Pn.get(s)},t}());export{OC as F,FC as M,UC as P,XC as Q,Bc as R,DC as a,O0 as b,jC as c,VC as d,ZC as e,Bg as f,YT as g,GC as h,$C as i,IS as j,HC as k,F0 as l,RC as m,WC as n,qC as o,Ng as p,BC as q,Si as r,AT as s,mT as t,NC as u,JC as v,KC as w};
